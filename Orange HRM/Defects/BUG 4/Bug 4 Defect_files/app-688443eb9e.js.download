/**
 * orangeHrm - orangeHrm Project Generated from HotTowel Angular
 * @authors 
 * @version v0.0.0
 * @link 
 * @license 
 */
var bootstrapDropdown=$.fn.dropdown.noConflict();$.fn.bootstrapDropdown=bootstrapDropdown;var bootstrapTooltip=$.fn.tooltip.noConflict();$.fn.bootstrapTooltip=bootstrapTooltip,function(){"use strict";angular.module("app",["app.core","app.widgets","app.directives","app.layout","app.maintenance","app.pim","app.help","app.admin","app.leave","app.time","app.performance","app.noncore","app.management-tools","app.succession-and-development","app.news","app.attendance","app.corporate-directory","app.buzz","app.training","app.reports-and-analytics","app.recruitment"])}(),function(){"use strict";angular.module("app.admin",["app.pim","ngJsTree"],["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}])}(),function(){"use strict";angular.module("app.attendance",[],["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}])}(),function(){"use strict";angular.module("blocks.exception",["blocks.logger"])}(),function(){"use strict";angular.module("blocks.logger",[])}(),function(){"use strict";angular.module("blocks.modal",["angularModalService","blocks.logger"])}(),function(){"use strict";angular.module("blocks.report",[])}(),function(){"use strict";angular.module("blocks.router",["ui.router","blocks.logger"])}(),function(){"use strict";angular.module("app.buzz",["app.core"],["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}])}(),function(){"use strict";angular.module("app.core",["ngAnimate","ngSanitize","blocks.exception","blocks.logger","blocks.router","ui.router","ngplus","ui.materialize","pascalprecht.translate","angularModalService","angucomplete-alt","naif.base64","rzModule","ui.calendar","color.picker","ngQtip2","ngMessages","ngImgCrop","schemaForm","debounce","ngStorage","cfp.hotkeys","ngMd5","ngCookies","cfp.loadingBar","angucomplete-alt-with-employee-id","angular-cache",angularDragula(angular),"ui.bootstrap","ja.qr","app.directives"])}(),function(){"use strict";angular.module("app.corporate-directory",[],["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data|tel):/)}])}(),function(){"use strict";angular.module("app.directives",["pascalprecht.translate"])}(),function(){"use strict";angular.module("app.help",["app.core","app.directives","app.widgets","app.pim"],["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}])}(),function(){"use strict";angular.module("app.layout",["app.core","ui.bootstrap"])}(),function(){"use strict";angular.module("app.leave",["app.core","colorpicker.module"],["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}])}(),function(){"use strict";angular.module("app.maintenance",["app.core","app.directives","app.widgets","app.pim"],["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}])}(),function(){"use strict";angular.module("app.management-tools",["app.core","app.directives","app.widgets","app.pim"],["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}])}(),function(){"use strict";angular.module("app.news",[],["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}])}(),function(){"use strict";angular.module("app.noncore",["app.directives"],["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}])}(),function(){"use strict";angular.module("app.performance",["app.core","app.widgets","app.directives","blocks.report","pascalprecht.translate","ui.bootstrap"],["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s* https?|ftp\mailto|file\data :/)}])}(),function(){"use strict";angular.module("app.pim",["app.core","app.widgets","app.directives","blocks.report","pascalprecht.translate","ui.bootstrap","ui.tinymce","infinite-scroll"],["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}]).value("uiTinymceConfig",{selector:".tinymce",theme:"modern",plugins:"advlist,anchor,autolink,autoresize,colorpicker,emoticons,hr,image,link,nonbreaking,pagebreak,paste,preview,print,searchreplace,table,textcolor,wordcount,contextmenu,lists",fontsize_formats:"8pt 10pt 12pt 14pt 18pt 24pt 36pt",toolbar1:"toggleToolbar |  fontselect fontsizeselect | bold italic | bullist numlist outdent indent ",toolbar2:"undo redo | link image image-upload  | background-upload background-remove | alignleft aligncenter alignright alignjustify | forecolor backcolor ",image_advtab:!0,browser_spellcheck:!0,paste_as_text:!0,paste_data_images:!0,autoresize_max_height:350,contextmenu_never_use_native:!0,setup:function(e){function t(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){tinymce.activeEditor.execCommand("mceInsertContent",!1,'<img src="'+t.result+'"/>')},t.onerror=function(e){}}function a(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(e){var a=new Image;a.src=e.target.result,a.onload=function(){var e=this.height,a=tinyMCE.activeEditor.getContent(),i=a;if($(a).hasClass("background-image")){var o="";$(a).children().each(function(e,t){o+=t.outerHTML}),""==o&&(o="<p>&nbsp;</p>"),i='<div id="backgroundImage" class="background-image" style="background-repeat: no-repeat; background-image: url(\''+t.result+"'); min-height: "+e+'px " data-src="'+t.result+'">'+o+"</div>"}else""==a&&(a="<p>&nbsp;</p>"),i='<div id="backgroundImage" class="background-image" style="background-repeat: no-repeat; background-image: url(\''+t.result+"'); min-height: "+e+'px " data-src="'+t.result+'">'+a+"</div>";tinymce.activeEditor.setContent(""),tinymce.activeEditor.execCommand("mceReplaceContent",!1,i)}},t.onerror=function(e){}}function i(){var e=tinyMCE.activeEditor.getContent(),t=e;$(e).hasClass("background-image")&&(t="",$(e).children().each(function(e,a){t+=a.outerHTML})),tinymce.activeEditor.setContent(""),tinymce.activeEditor.execCommand("mceReplaceContent",!1,t)}function o(e){if(e&&e.size){var t=1048576;return"function"==typeof tinymce.max_image_size_&&(t=tinymce.max_image_size_()),!(e.size>t)||("function"==typeof tinymce.image_size_error&&tinymce.image_size_error(),!1)}return!0}function n(e){var t=["image/gif","image/jpeg","image/jpg","image/pjpeg","image/png","image/x-png"];return"function"==typeof tinymce.allowed_file_types&&(t=tinymce.allowed_file_types()),!e||(!(e&&e.type&&t.indexOf(e.type)===-1||e&&!e.type)||("function"==typeof tinymce.image_type_error&&tinymce.image_type_error(),!1))}$(e.getElement()).siblings("input.tinymce-image").change(function(){this.files[0]&&n(this.files[0])&&o(this.files[0])&&t(this.files[0]),this.files[0]&&$(this).val(null)}),$(e.getElement()).siblings("input.tinymce-background-image").change(function(){this.files[0]&&n(this.files[0])&&o(this.files[0])&&a(this.files[0]),this.files[0]&&$(this).val(null)}),e.addButton("image-upload",{tooltip:"Upload image",icon:"browse",onclick:function(){$(e.getElement()).siblings("input.tinymce-image").click()}}),e.addButton("background-upload",{tooltip:"Upload background image",icon:"upload-bg",onclick:function(){$(e.getElement()).siblings("input.tinymce-background-image").click()}}),e.addButton("background-remove",{tooltip:"Remove background image",icon:"remove-bg",onclick:function(){i()}}),e.addButton("toggleToolbar",{icon:"mce-ico mce-i-settings",tooltip:"Toggle Toolbar",onclick:function(){$(e.editorContainer).find(".mce-container.mce-toolbar.mce-stack-layout-item:not(.mce-first)").toggle()}})},init_instance_callback:function(e){$(e.editorContainer).find(".mce-container.mce-toolbar.mce-stack-layout-item:not(.mce-first)").toggle()}})}(),function(){"use strict";angular.module("app.recruitment",["app.core"],["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}])}(),function(){"use strict";angular.module("app.reports-and-analytics",["app.reports-and-analytics"],["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}])}(),function(){"use strict";angular.module("app.succession-and-development",["app.core","app.directives","app.widgets","app.pim"],["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}])}(),function(){"use strict";angular.module("app.time",["app.pim"],["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}])}(),function(){"use strict";angular.module("app.training",[],["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}])}(),function(){"use strict";angular.module("app.widgets",["angular-flot"])}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"admin",config:{"abstract":!0,url:"/admin",template:"<ui-view/>"}},{state:"admin.pay_grades",config:{url:"/pay_grades",views:{"":{templateUrl:"app/admin/payGrades/pay_grades.html",controller:"AdminPayGradesController",controllerAs:"payGradesCtrl"}},data:{title:"Pay Grades"}}},{state:"admin.pay_grade_details",config:{url:"/pay_grades/{payGradeId}",views:{"":{templateUrl:"app/admin/payGrades/pay_grade_details.html",controller:"AdminPayGradeDetailsController",controllerAs:"PayGradeDetailsCtrl"}},data:{initialState:"admin.pay_grades",title:"Edit Pay Grade"},params:{payGradeId:null,payGrade:null,payGradeObjectArray:null,payGradesPermissions:null,payGrades:null}}},{state:"admin.education",config:{url:"/education",views:{"":{templateUrl:"app/admin/educations/education.html",controller:"AdminEducationsController",controllerAs:"educationsCtrl"}},data:{title:"Education"}}},{state:"admin.languages",config:{url:"/languages",views:{"":{templateUrl:"app/admin/languages/languages.html",controller:"AdminLanguagesController",controllerAs:"languagesCtrl"}},data:{title:"Languages"}}},{state:"admin.employment_status",config:{url:"/employment_status",views:{"":{templateUrl:"app/admin/employmentStatus/employment_status.html",controller:"AdminEmploymentStatusController",controllerAs:"employmentStatusCtrl"}},data:{title:"Employment Status"}}},{state:"admin.jobcategories",config:{url:"/jobcategories",views:{"":{templateUrl:"app/admin/jobCategories/jobcategories.html",controller:"AdminJobCategoriesController",controllerAs:"jobcategoryCtrl"}},data:{title:"Job Categories"}}},{state:"admin.job_titles",config:{url:"/job_titles",views:{"":{templateUrl:"app/admin/jobTitles/job_titles.html",controller:"AdminJobTitlesController",controllerAs:"jobTitlesCtrl"}},data:{title:"Job Titles"}}},{state:"admin.salary_components",config:{url:"/salary_components",views:{"":{templateUrl:"app/admin/salaryComponents/salary_components.html",controller:"AdminSalaryComponentController",controllerAs:"salaryComponentCtrl"}},data:{title:"Salary Components"}}},{state:"admin.licenses",config:{url:"/licenses",views:{"":{templateUrl:"app/admin/licenses/licenses.html",controller:"AdminLicensesController",controllerAs:"licenseCtrl"}},data:{title:"Licenses"}}},{state:"admin.nationalities",config:{url:"/nationalities",views:{"":{templateUrl:"app/admin/nationalities/nationalities.html",controller:"AdminNationalitiesController",controllerAs:"nationalityCtrl"}},data:{title:"Nationalities"}}},{state:"admin.skills",config:{url:"/skills",views:{"":{templateUrl:"app/admin/skills/skills.html",controller:"AdminSkillsController",controllerAs:"skillCtrl"}},data:{title:"Skills"}}},{state:"admin.memberships",config:{url:"/memberships",views:{"":{templateUrl:"app/admin/memberships/memberships.html",controller:"AdminMembershipsController",controllerAs:"membershipsCtrl"}},data:{title:"Memberships"}}},{state:"admin.localization",config:{url:"/localization",views:{"":{templateUrl:"app/admin/localization/localization.html",controller:"AdminLocalizationController",controllerAs:"localizationCtrl"}},data:{title:"Localization"}}},{state:"admin.mail_configuration",config:{url:"/mail_configuration",views:{"":{templateUrl:"app/admin/mailConfiguration/mail_configuration.html",controller:"AdminMailConfigurationController",controllerAs:"mailConfigurationCtrl"}},data:{title:"Email Settings"}}},{state:"admin.configSystemAdmin",config:{url:"/configSystemAdmin",views:{"":{templateUrl:"app/admin/systemAdminConfiguration/configSystemAdmin.html",controller:"AdminSystemAdminConfigurationController",controllerAs:"systemAdminConfigurationCtrl"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:function(){this.menuItem="System Admin Configuration"},controllerAs:"vm"}},data:{title:"System Admin Configuration"}}},{state:"admin.locations",config:{url:"/locations",views:{"":{templateUrl:"app/admin/locations/locations.html",controller:"AdminLocationsController",controllerAs:"locationCtrl"},"navbar@":{templateUrl:"app/admin/locations/location_list_navbar.html",controller:"LocationListNavbarController",controllerAs:"navbar"}},data:{title:"Locations",navbar:{title:!0}}}},{state:"admin.costCentres",config:{url:"/cost_centres",views:{"":{templateUrl:"app/admin/costCentre/cost_centres.html",controller:"AdminCostCentresController",controllerAs:"costCentreCtrl"}},data:{title:"Cost Centers",navbar:{title:!0}}}},{state:"admin.company_structure",config:{url:"/company_structure",views:{"":{templateUrl:"app/admin/companyStructure/company_structure.html",controller:"AdminCompanyStructureController",controllerAs:"CompanyStructureCtrl"}},data:{title:"Organization Structure"},params:{}}},{state:"admin.work_shifts",config:{url:"/work_shifts",views:{"":{templateUrl:"app/admin/workShifts/work_shifts.html",controller:"AdminWorkShiftsController",controllerAs:"workShiftCtrl"}},data:{title:"Work Shifts"}}},{state:"admin.viewApplicationChangeLog",config:{url:"/viewApplicationChangeLog",views:{"":{templateUrl:"app/admin/applicationChangeLog/viewApplicationChangeLog.html",controller:"AdminApplicationChangeLogController",controllerAs:"applicationChangeLogCtrl"}},data:{title:"Application Change Log"}}},{state:"admin.organization_general_information",config:{url:"/organization_general_information",views:{"":{templateUrl:"app/admin/organizationGeneralInformation/organization_general_information.html",controller:"AdminOrganizationGeneralInformationController",controllerAs:"organizationGeneralInformationCtrl"}},data:{title:"General Information"}}},{state:"admin.systemUsers",config:{url:"/systemUsers",views:{"":{templateUrl:"app/admin/systemUsers/systemUsers.html",controller:"AdminSystemUsersController",controllerAs:"systemUsersCtrl"},"navbar@":{templateUrl:"app/admin/systemUsers/systemUser_list_navbar.html",controller:"SystemUserListNavbarController",controllerAs:"navbar"}},data:{title:"Users"}}},{state:"admin.auditTrail",config:{url:"/auditTrail",views:{"":{templateUrl:"app/admin/auditTrail/auditTrail.html",controller:"AdminAuditTrailController",controllerAs:"auditTrailCtrl"},"navbar@":{templateUrl:"app/admin/auditTrail/auditTrail_list_navbar.html",controller:"AuditTrailListNavbarController",controllerAs:"navbar"}},data:{title:"Audit Trail"}}},{state:"admin.reports_catalog",config:{url:"/reports_catalog",views:{"":{templateUrl:"app/admin/reportsCatalog/reports_catalog.html",controller:"AdminReportsCatalogController",controllerAs:"reportsCatalogCtrl"}},data:{title:"Reports Catalog"}}},{state:"admin.user_roles",config:{url:"/user_roles",views:{"":{templateUrl:"app/admin/userRoles/user_roles.html",controller:"AdminUserRolesController",controllerAs:"UserRolesCtrl"}},data:{title:"User Roles"},params:{savedUserRoleId:null}}},{state:"admin.add_user_role",config:{url:"/add_user_role",views:{"":{templateUrl:"app/admin/userRoles/edit_user_role.html",controller:"AdminEditUserRoleController",controllerAs:"EditUserRolesCtrl"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:function(){this.menuItem="Add User Role"},controllerAs:"vm"}},data:{initialState:"admin.user_roles",title:"Add User Role"}}},{state:"admin.edit_user_role",config:{url:"/edit_user_role/{id:int}",views:{"":{templateUrl:"app/admin/userRoles/edit_user_role.html",controller:"AdminEditUserRoleController",controllerAs:"EditUserRolesCtrl"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:function(){this.menuItem="Edit User Role"},controllerAs:"vm"}},data:{initialState:"admin.user_roles",title:"Edit User Role"}}},{state:"admin.email_subscriptions",config:{url:"/email_subscriptions?type",views:{"":{templateUrl:"app/admin/emailSubscriptions/email-subscription-list.html",controller:"AdminEmailSubscriptionListController",controllerAs:"email"}},data:{title:"Email Notifications"}}},{state:"admin.edit_email_subscription",config:{url:"/email_subscription/{id:int}",views:{"":{templateUrl:"app/admin/emailSubscriptions/email-subscription.html",controller:"AdminEmailSubscriptionController",controllerAs:"vm"}},data:{initialState:"admin.email_subscriptions"}}},{state:"admin.edit_email_subscription.edit",config:{url:"/edit-subscriber/{subscriber:int}",views:{"":{templateUrl:"app/admin/emailSubscriptions/edit-subscriber.html",controller:"AdminEmailSubscriptionsEditSubscriberController",controllerAs:"modal"}},data:{}}},{state:"admin.edit_email_subscription.subscribe",config:{url:"/subscribe",views:{"":{templateUrl:"app/admin/emailSubscriptions/add-subscribers.html",controller:"AdminAddSubscribersController",controllerAs:"addVm"}},data:{}}},{state:"admin.default_authentication_settings",config:{url:"/default_authentication_settings",views:{"":{templateUrl:"app/admin/defaultAuthenticationSettings/default_authentication_settings.html",controller:"DefaultAuthenticationSettingsController",controllerAs:"defaultAuthenticationSettingsCtrl"}},data:{title:"Default Authentication Settings"}}},{state:"admin.ldap_authentication",config:{url:"/ldap_authentication",views:{"":{templateUrl:"app/admin/ldapAuthentication/ldap_authentication.html",controller:"AdminLdapAuthenticationController",controllerAs:"ldapAuthenticationCtrl"}},data:{title:"LDAP Configuration",initialState:"admin.default_authentication_settings"}}},{state:"admin.openIdProvider",config:{url:"/openIdProvider",views:{"":{templateUrl:"app/admin/openIdProvider/openIdProvider.html",controller:"AdminOpenIdController",controllerAs:"openIdCtrl"}},data:{title:"Provider List",initialState:"admin.default_authentication_settings"}}},{state:"admin.externalServices",config:{url:"/externalServices",views:{"":{templateUrl:"app/admin/externalServices/externalServices.html",controller:"AdminExternalServicesController",controllerAs:"vm"}},data:{title:"External Services",initialState:"admin.default_authentication_settings",oxd:!0}}},{state:"admin.samlProvider",config:{url:"/samlProvider",views:{"":{templateUrl:"app/admin/samlProvider/samlProvider.html",controller:"AdminSamlController",controllerAs:"vm"}},data:{title:"SAML Authentication List",initialState:"admin.default_authentication_settings",oxd:!0}}},{state:"admin.change_user_password",config:{url:"/change_user_password",views:{"":{templateUrl:"app/admin/changeUserPassword/change_user_password.html",controller:"AdminChangeUserPasswordController",controllerAs:"ChangeUserPasswordCtrl"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:function(){this.menuItem="Change Password"},controllerAs:"vm"}},data:{title:"Change Password"}}},{state:"admin.preferences",config:{url:"/preferences",views:{"":{templateUrl:"app/admin/preferences/preferences.html",controller:"AdminPreferencesController",controllerAs:"preferencesCtrl"}},data:{title:"Preferences"}}},{state:"admin.view_email_templates_list",config:{url:"/view_email_templates/{id:int}",views:{"":{templateUrl:"app/admin/emailSubscriptions/view-email-templates-list.html",controller:"AdminViewEmailTemplateListController",controllerAs:"vm"}},data:{initialState:"admin.email_subscriptions"}}},{state:"admin.edit_email_template",config:{url:"/edit_email_template/{id:int}/{notification_id:int}",views:{"":{templateUrl:"app/admin/emailSubscriptions/edit-email-template.html",controller:"AdminEditEmailTemplateController",controllerAs:"vm"}},data:{initialState:"admin.email_subscriptions"}}},{state:"admin.oauth_clients",config:{url:"/register_oauth_client",views:{"":{templateUrl:"app/admin/oauthClients/oauth_clients.html",controller:"AdminOauthClientsController",controllerAs:"oauthClientCtrl"}},data:{title:"OAuth Clients",initialState:"admin.default_authentication_settings"}}},{state:"admin.eeo_filing_wizard",config:{url:"/eeo_filing_wizard",views:{"":{templateUrl:"app/admin/eeoFiling/wizard/eeo_filing_wizard.html",controller:"EEOFilingWizardController",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/admin/eeoFiling/wizard/eeo_filing_custom_top_ribbon.html",controller:"EEOFilingCustomTopRibbonController",controllerAs:"vm"}}}},{state:"admin.eeo_filing_wizard.eeo_filing_wizard_basic_report_details",config:{url:"/basic_report_details",views:{"":{templateUrl:"app/admin/eeoFiling/basicReportDetails/eeo_filing_basic_report_details.html",controller:"EEOFilingBasicReportDetailsController",controllerAs:"basicReportDetails"}}}},{state:"admin.eeo_filing_wizard.eeo_filing_wizard_establishment_details",config:{url:"/establishment_details/:locationId",views:{"":{templateUrl:"app/admin/eeoFiling/establishmentDetails/eeo_filing_establishment_details.html",controller:"EEOFilingEstablishmentDetailsController",controllerAs:"establishmentDetails"}},params:{locationId:null}}},{state:"admin.eeo_filing_wizard.eeo_filing_wizard_summary",config:{url:"/summary",views:{"":{templateUrl:"app/admin/eeoFiling/summary/eeo_filing_summary.html",controller:"EEOFilingSummaryController",controllerAs:"summary"}}}},{state:"admin.in_app_marketing",config:{url:"/in_app_marketing",views:{"":{templateUrl:"app/admin/inAppMarketing/in_app_marketing.html",controller:"InAppMarketingController",controllerAs:"inAppMarketing"}},data:{title:"In-App Marketing",oxd:!0}}},{state:"admin.configure_icalendar_feed",config:{url:"/configure_icalendar",views:{"":{templateUrl:"app/admin/configureCalendarFeed/icalendar.html",controller:"ICalendarController",controllerAs:"iCalendar"},params:{}},data:{title:"iCalendar",oxd:!0}}}]}angular.module("app.admin",["app.pim","ngJsTree"]).run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t){function a(){var e={useCache:!0,serverFetch:!0};return t.get("countries",{},e).then(function(e){return e.data})}function i(){var e={useCache:!0,serverFetch:!0};return t.get("currencyType",{},e).then(function(e){return e.data})}function o(e,a){var i={},o={},n=!1;return"undefined"!=typeof e&&(n=!0,Array.isArray(e)||(e=[e]),o.name=e),"undefined"!=typeof a&&(n=!0,o.status=a),n&&(i.filter=o),t.call("modules","GET",[],i,void 0,!0)}var n={getCountries:a,getCurrencyTypes:i,getModules:o};return n}angular.module("app.pim").factory("adminService",e),e.$inject=["$q","webservice"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){m.getPermissions().then(function(e){h.permissions=e.admin_app_change_log,h.permissions.read?o.call("applicationChangeLog","GET",[],{}).then(function(e){p(),h.applicationChangeLog=e.data.data,g(),0==h.applicationChangeLog.length&&c.infoToast("No Records Found")}):d.go("403")})}function p(){h.panelInfo={applicationChangeLogInfo:{icon:"images/pim/icon_work.svg"}},f()}function f(){var e=[{name:"changeType",lable:"Change Type",getter:"change_type"},{name:"description",lable:"Description",getter:"description"},{name:"timestamp",lable:"Timestamp",getter:"timestamp",formatter:function(e){if(e){var t=e.slice(0,10),a=e.slice(10);return s.toLocalizedDate(t)+a}return e}}],t=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:h.permissions["delete"]}];h.listData={applicationChangeLog:{selectable:!1,selected:[],idGetter:"id",listFields:e,showColumnsAnyway:!0,permission:h.permissions,listActions:t,columnWidths:["10%","80%","10%"]}}}function g(){var e=0;for(e=0;e<h.applicationChangeLog.length;e++)h.applicationChangeLog[e].id=e}var h=this;h.title="Application Change Log",h.applicationChangeLog="",u()}angular.module("app.admin").controller("AdminApplicationChangeLogController",e),e.$inject=["logger","$q","$window","ModalService","webservice","$rootScope","loader","toast","dateService","localizedMessages","$state","datagroupPermissions"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){m.getPermissions().then(function(e){C.permissions=e.admin_audit_trail,C.permissions.read?u.getSetting("page_size").then(function(e){C.pageSize=e,b(),f()}):i.go("403")})}function f(){var e=new Date,t=new Date;t.setFullYear(e.getFullYear()-1),C.filters.from=t,C.filters.to=e,g("dateAndTime","DESC",1).then(function(e){l.call("auditModules","GET",[],{},void 0,!0).then(function(e){C.modules=e.data.data,C.modulesLoaded.resolve()})})}function g(e,t,a){return C.auditTrailRecords=[],C.totalDataCount=0,C.dataInCurruntPage=0,c.startProgress(),l.call("auditTrail","GET",[],h(e,t,a)).then(function(e){C.auditTrailRecords=e.data.data;for(var t=0;t<C.auditTrailRecords.length;t++)C.auditTrailRecords[t].uniqueId=t;C.dataInCurruntPage=e.data.data.length,C.totalDataCount=e.data.meta.total,C.meta=e.data.meta,C.page=a,C.lastPage=Math.ceil(C.totalDataCount/C.pageSize),0==C.auditTrailRecords.length&&r.infoToast("No Records Found")})["finally"](function(){c.completeProgress()})}function h(e,t,a){var i={page:a,limit:C.pageSize,sortBy:C.sortFieldMapping[e],sortOrder:t};return C.filters&&(i.filter={},C.filters.selectedUser&&(i.filter.user_name=C.filters.selectedUser.user_name),C.filters.from&&(i.filter.from=d.toStandardDate(C.filters.from)),C.filters.to&&(i.filter.to=d.toStandardDate(C.filters.to)),C.filters.section&&(i.filter.section_id=C.filters.section.id,"Employee"===C.filters.section.affected_entity?C.filters.selectedEmployee&&(i.filter.affected_entity_id=C.filters.selectedEmployee.empNumber):C.filters.selectedEntity&&(i.filter.affected_entity_id=C.filters.selectedEntity.primaryKey)),C.filters.action&&(i.filter.action_name=C.filters.action.action)),i}function v(){if(0===C.modules.length)return void r.warningToast("No Audit Modules Defined");var e={close:function(){}};n.showModal({templateUrl:"app/admin/auditTrail/auditTrailSearch.html",controller:"AdminAuditTrailSearchController",controllerAs:"modal",inputs:{auditModules:C.modules,currentFilter:C.filters,modalFunctions:e}}).then(function(t){$(t.element).openModal({complete:function(){e.close()}}),t.close.then(function(a){$(t.element).closeModal(),e.close=function(){},a&&(C.filters=a,"search"==a.actionName&&(a.section&&a.section.affected_entity!==C.affectedHeading&&(C.affectedHeading=a.section.affected_entity,b()),g("dateAndTime","DESC",1)),"export"==a.actionName&&y())})})}function y(){var e=h("dateAndTime","DESC",1),i=t(e);r.infoToast("Download Will Start Shortly"),s.ohrmGlobals.downloadFile(a.baseUrl+"audittrail/downloadAuditCsv?"+i)}function b(){var e=[{name:"dateAndTime",lable:"Date and Time",getter:"actionTime",sortable:!0,sortAction:"fetchAuditTrails",formatter:function(e){if(e){var t=e.slice(0,10),a=e.slice(10);return d.toLocalizedDate(t)+a}return e}},{name:"Action Owner",lable:"Action Owner",getter:"actionOwnerName",sortable:!0,sortAction:"fetchAuditTrails"},{name:"Action",lable:"Action",getter:"action",sortable:!0,sortAction:"fetchAuditTrails",formatter:function(e){return r.getLocalizedCustom(e)}},{name:"Employee",lable:C.affectedHeading?C.affectedHeading:"Employee",getter:"affectedEntityName",sortable:!0,sortAction:"fetchAuditTrails"},{name:"Section",lable:"Section",getter:"section",sortable:!0,sortAction:"fetchAuditTrails",formatter:function(e){return r.getLocalizedCustom(e)}},{name:"Action Description",lable:"Action Description",getter:"actionDescription",sortable:!0,sortAction:"fetchAuditTrails","class":"pre-wrap",formatter:function(e){return e.trim().replace(/  +/g," ").replace(/\r |\n /g,"\r\n")},type:"qtipped-cell"}];C.listData={auditTrailRecords:{selectable:!1,selected:[],idGetter:"uniqueId",listFields:e,showColumnsAnyway:!0,columnWidths:["15%","12%","12%","15%","15%","31%"],permission:C.permissions,listActions:[],pagination:!0}}}var C=this;C.pageSize=50,C.page=1,C.lastPage=0,C.totalDataCount=0,C.dataInCurruntPage=0,C.title="Audit Trail",C.affectedHeading="Employee",C.auditTrailRecords="",C.modulesLoaded=o.defer(),C.sortFieldMapping={dateAndTime:"actionTime","Action Owner":"actionOwnerName",Action:"action",Employee:"affectedEntityName",Section:"section","Action Description":"actionDescription"},C.filters={},C.downloadCsv=y,C.fetchAuditTrails=g,e.$on("filter",function(){C.modulesLoaded.promise.then(v)}),p()}angular.module("app.admin").controller("AdminAuditTrailController",e),e.$inject=["$scope","$httpParamSerializer","LOGIN","$state","$q","ModalService","webservice","localizedMessages","$rootScope","loader","dateService","datagroupPermissions","settingsService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r){function s(){w.filters=o,w.defaultModule=null,w.modules=n,w.moduleTitleMap=[],w.modules.forEach(function(e,t){w.moduleTitleMap.push({name:e.name,value:e}),0!==t&&"Employee Management"!==e.name||(w.defaultModule=e)}),c();var e=!1;w.filters.module&&w.model.module!==w.filters.module&&(e=!0,w.model.module=w.filters.module,w.sectionTitleMap=f(w.model.module)),(e||w.filters.section&&w.model.section!==w.filters.section)&&(e=!0,w.model.section=w.filters.section,w.actionTitleMap=g(w.model.section)),(e||w.filters.action&&w.model.action!==w.filters.action)&&(w.model.action=w.filters.action),w.model.from=w.filters.from,w.model.to=w.filters.to,w.model.selectedUser=w.filters.selectedUser,w.model.selectedEntity=w.filters.selectedEntity,w.model.selectedEmployee=w.filters.selectedEmployee,w.oldSection=w.model.section,d()}function c(){var e=null,t=null;w.sectionTitleMap=f(w.defaultModule),w.sectionTitleMap[0]&&(e=w.sectionTitleMap[0].value),w.actionTitleMap=g(e),w.actionTitleMap[0]&&(t=w.actionTitleMap[0].value);var a=new Date,i=new Date;i.setFullYear(a.getFullYear()-1),w.model={module:w.defaultModule,section:e,action:t,from:i,to:a,selectedUser:null,selectedEntity:null,selectedEmployee:null}}function d(){w.schema={type:"object",title:"audit trail",properties:{from:{title:"From",type:["null","object"]},to:{title:"To",type:["null","object"]},module:{title:"Module",type:"object"},section:{title:"Section",type:"object"},selectedEntity:{title:a.getLocalizedCustom("Affected")+" "+a.getLocalizedCustom(w.model.section.affected_entity),type:"object",idsToSkip:[]},selectedEmployee:{title:"Affected Employee",type:"object",idsToSkip:[]},action:{title:"Actions",type:["null","object"]},selectedUser:{title:a.getLocalizedCustom("Action Owner"),type:"object"}},required:[]};var e=w.model.from?new Date(w.model.from):null,i=w.model.to?new Date(w.model.to):null;w.form=[{type:"section",htmlClass:"row",items:[{type:"date",htmlClass:"col s12 m12 l4",key:"from",validationMessage:{maxDate:a.getLocalizedCustom("From Date should be less than To Date")},$validators:{maxDate:function(e){return t.minDate.validator(w.model.to,e)}},onChange:m,defaultDate:e,resetDefaultDate:w.resetDefaultDate},{type:"date",htmlClass:"col s12 m12 l4",key:"to",validationMessage:{minDate:a.getLocalizedCustom("To Date should be greater than From Date")},$validators:{minDate:function(e){return t.minDate.validator(e,w.model.from)}},onChange:m,defaultDate:i,resetDefaultDate:w.resetDefaultDate},{type:"select",htmlClass:"col s12 m12 l4",key:"module",translate:!0,"default":"1",emptyOption:!1,titleMap:w.moduleTitleMap,onChange:u}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l4",key:"section",translate:!0,emptyOption:!1,"default":w.sectionTitleMap[0].value,titleMap:w.sectionTitleMap,onChange:p},{type:"select",htmlClass:"col s12 m12 l4",key:"action",translate:!0,emptyOption:!1,"default":w.actionTitleMap[0].value,titleMap:w.actionTitleMap},{htmlClass:"col s12 m12 l4",key:"selectedEntity",type:"auto-complete-audit-trail-affected-entity",
placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found","search-fields":"description",condition:"(model.section.affected_entity !== 'Employee') && (model.section.affected_entity !== '') ",section:function(){return w.model.section.id}},{key:"selectedEmployee",type:"auto-complete-with-deleted",htmlClass:"col s12 m12 l4",placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",condition:"model.section.affected_entity == 'Employee'",requireSelection:!0,includePast:!0},{key:"selectedUser",type:"auto-complete-users",htmlClass:"col s12 m12 l4",placeholder:a.getLocalizedCustom("Type for hints..."),"text-searching":"Searching...",condition:"(model.section.affected_entity !== '')","text-no-results":"No results found"}]}]}function m(){t.minDate.validator(w.model.to,w.model.from)&&(e.$broadcast("schemaForm.error.from","maxDate",!0),e.$broadcast("schemaForm.error.to","minDate",!0))}function u(e,t){w.sectionTitleMap=f(e),w.model.section=w.sectionTitleMap[0].value,p(w.model.section)}function p(e,t){w.actionTitleMap=g(e),w.model.action=w.actionTitleMap[0].value,w.form[1].items[2].title=a.getLocalizedCustom("Affected")+" "+a.getLocalizedCustom(w.model.section.affected_entity),w.oldSection&&w.oldSection.id===w.model.section.id||(w.model.selectedEntity=null),w.oldSection=w.model.section,d()}function f(e){var t=[];return e.AuditSection.sort(C),e.AuditSection.forEach(function(e){t.push({name:e.description,value:e})}),t}function g(e){var t=[{name:a.getLocalizedCustom("All"),value:""}];return e.AuditAction.sort(C),e.AuditAction.forEach(function(e){t.push({name:e.description,value:e})}),t}function h(t){e.$broadcast("schemaFormValidate"),t.$valid&&(w.model.actionName="search",r(w.model))}function v(t){e.$broadcast("schemaFormValidate"),t.$valid&&(w.model.actionName="export",r(w.model))}function y(){r(!1)}function b(){c(),w.model.actionName="search",r(w.model)}function C(e,t){var a=e.description.toLowerCase(),i=t.description.toLowerCase();return a===i?0:e.name&&"all"===e.name.toLowerCase()||a<i?-1:1}var w=this;l.close=r,w.search=h,w.cancel=y,w.reset=b,w.exportCSV=v,w.resetDefaultDate={reset:!1},w.model={},s()}angular.module("app.admin").controller("AdminAuditTrailSearchController",e),e.$inject=["$scope","formValidationHelper","localizedMessages","dateService","currentFilter","auditModules","modalFunctions","close"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s){function c(){e.$broadcast("filter",[])}var d=this;d.filter=c,d.title=o.current.data.title,d.employee=!1,s.getPermissions().then(function(e){d.permissions=e.admin_audit_trail})}angular.module("app.admin").controller("AuditTrailListNavbarController",e),e.$inject=["$rootScope","$scope","$document","$translate","$state","webservice","ModalService","focus","datagroupPermissions"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){m.setForcedTitle(["Change Password"]);var t=[];t.push(a.call("changePassword","GET",[]).then(function(e){b.changePasswordInfo=e.data.data})),t.push(a.call("defaultAuthenticationSettings","GET",[]).then(function(e){b.defaultConfiguration=e.data.data})),e.all(t).then(function(e){C=!(!b.defaultConfiguration.enforcePasswordStrength||"Enable"!=b.defaultConfiguration.defaultSettingsStatus),w=!(!b.defaultConfiguration.enableSecondaryPassword||"Enable"!=b.defaultConfiguration.defaultSettingsStatus),p()})}function p(){b.schema={type:"object",title:"Change Password",properties:{userName:{title:"Username",type:"string"},currentPassword:{title:"Current Password",type:"string"},newPassword:{title:"New Password",type:"string",minLength:8,maxLength:64},confirmNewPassword:{title:"Confirm New Password",type:"string",minLength:8,maxLength:64},secondaryPassword:{title:"Secondary Password",type:"string",minLength:8,maxLength:64},confirmSecondaryPassword:{title:"Confirm Secondary Password",type:"string",minLength:8,maxLength:64}},required:["currentPassword","newPassword","confirmNewPassword","secondaryPassword","confirmSecondaryPassword"]},b.passwordField={type:"password",strengthCheck:!0,htmlClass:"col s12 m16 l6",key:"newPassword",toggleSave:y,ngModelOptions:{allowInvalid:!0},onChange:function(e){b.model.confirmNewPassword&&h(b.model.confirmNewPassword)},validationMessage:{302:t.getLocalizedCustom("Required"),201:d.textLengthExceedValidation.message(b.schema.properties.newPassword.maxLength),200:t.getLocalizedCustomWithVariables("Your password should have at least {{min}} characters. Try a different password.",{min:b.schema.properties.newPassword.minLength})}},b.secondaryPasswordField={type:"password",strengthCheck:!0,htmlClass:"col s12 m16 l6",key:"secondaryPassword",toggleSave:y,condition:!b.changePasswordInfo.secondaryPasswordEnabled,ngModelOptions:{allowInvalid:!0},onChange:function(e){b.model.confirmSecondaryPassword&&v(b.model.confirmSecondaryPassword)},validationMessage:{302:t.getLocalizedCustom("Required"),201:d.textLengthExceedValidation.message(b.schema.properties.secondaryPassword.maxLength),200:t.getLocalizedCustomWithVariables("Your password should have at least {{min}} characters. Try a different password.",{min:b.schema.properties.secondaryPassword.minLength})}},b.defaultConfiguration.enforcePasswordStrength&&"Enable"==b.defaultConfiguration.defaultSettingsStatus&&(b.passwordField.passwordEnforced=!0,b.secondaryPasswordField.passwordEnforced=!0),b.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m6 l6",key:"userName",readonly:!0}]},{type:"section",htmlClass:"row",items:[{type:"password",htmlClass:"col s12 m6 l6",key:"currentPassword"}]},{type:"section",htmlClass:"row",items:[b.passwordField,{type:"password",htmlClass:"col s12 m16 l6",key:"confirmNewPassword",validationMessage:{unmatchedPassword:t.getLocalizedCustom("Passwords do not match")},onChange:h,ngModelOptions:{allowInvalid:!0}}]},{type:"section",htmlClass:"row",items:[b.secondaryPasswordField,{type:"password",htmlClass:"col s12 m16 l6",key:"confirmSecondaryPassword",condition:!b.changePasswordInfo.secondaryPasswordEnabled,validationMessage:{unmatchedPassword:t.getLocalizedCustom("Passwords do not match")},onChange:v,ngModelOptions:{allowInvalid:!0}}]}],c.addRequiredMessage(b.form),b.model={userName:b.changePasswordInfo.userName,currentPassword:"",newPassword:"",confirmNewPassword:"",secondaryPassword:"",confirmSecondaryPassword:""}}function f(){i.show();var e={currentPassword:b.model.currentPassword,newPassword:b.model.newPassword,confirmNewPassword:b.model.confirmNewPassword,secondaryPassword:b.model.secondaryPassword,confirmSecondaryPassword:b.model.confirmSecondaryPassword},o="PATCH",n="changePassword",l="updateSuccess",r="saveFailure";a.call(n,o,e,{}).then(function(e){i.hide(),1==e.data.data.success?t.showLocalizedToast(l):t.errorToast(r)},function(e){i.hide(),e.data.details?t.errorToast(e.data.details):t.errorToast(r)})}function g(){window.history.back()}function h(e){!e&&!b.model.newPassword||e==b.model.newPassword?n.$broadcast("schemaForm.error.confirmNewPassword","unmatchedPassword",!0):n.$broadcast("schemaForm.error.confirmNewPassword","unmatchedPassword",!1)}function v(e){!e&&!b.model.secondaryPassword||e==b.model.secondaryPassword?n.$broadcast("schemaForm.error.confirmSecondaryPassword","unmatchedPassword",!0):n.$broadcast("schemaForm.error.confirmSecondaryPassword","unmatchedPassword",!1)}function y(e){b.enableSaveButton=e}var b=this,C=!1,w=!1;b.toggleSave=y,b.enableSaveButton=!0,b.model={},b.cancel=g,b.title=s.current.data.title,u(),b.onSubmit=function(e){b.model.newPassword&&h(b.model.confirmNewPassword),b.model.secondaryPassword&&v(b.model.confirmSecondaryPassword),n.$broadcast("schemaFormValidate"),e.$valid&&b.enableSaveButton&&f()}}angular.module("app.admin").controller("AdminChangeUserPasswordController",e),e.$inject=["$q","localizedMessages","webservice","loader","toast","$scope","$stateParams","datagroupPermissions","$state","formHelper","formValidationHelper","titleService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){var a=e.call("organizationStructure","GET",[]),o=e.call("organization","GET",[],{});t.show(),i.all([a,o]).then(function(e){var a=e[0].data.data;C.organizationInformation=e[1].data.data,angular.copy(a,C.treeData),C.editMode?$(function(){$(".org_structure .ng_tree").removeClass("locked")}):$(function(){$(".org_structure .ng_tree").addClass("locked")}),t.hide()})}function f(){w=!0,p()}function g(e){if(!C.editMode||e&&e.state&&e.state.disabled)return{};var t={add:{label:d.getLocalizedCustom("Add"),action:function(){h(e,!1)}},show_details:{label:d.getLocalizedCustom("Show Details"),action:function(){h(e,!0)}}};return 1!=e.id&&(t["delete"]={label:d.getLocalizedCustom("Delete"),action:function(){o.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(t){$(t.element).openModal(),t.close.then(function(t){t===!0&&v(e)})})}}),t}function h(e,t){var a=t?"Edit Sub Unit":"Add Sub Unit";o.showModal({templateUrl:"app/admin/companyStructure/subunit_modal.html",controller:"AdminEditSubunitController",controllerAs:"modal",inputs:{selectedNode:e,treeData:C.treeData,title:a,editMode:t,organizationInformation:C.organizationInformation}}).then(function(e){e.element.openModal(),e.close.then(function(t){e.element.closeModal()})})}function v(i){var o="subunits",n="DELETE",l={id:i.id};t.show(),e.call(o,n,l,{}).then(function(i){t.hide(),i.data.data.success?(p(),u.dispatch("core/subunits/dropSubunitData"),d.showLocalizedToast("deleteSuccess"),e.clearCache("subunits")):a.warning("Failed to Delete")},function(e){t.hide(),a.warning(e)})}function y(){m("Loading").then(function(e){C.treeConfig.core.strings={"Loading ...":e+" ..."},w||f()})}function b(a,i){var o=i.node.id,n=i.parent,l=i.position,r={subunitId:o,parent:n,position:l},s="organizationStructure",c="PATCH";t.show(),e.call(s,c,r,{}).then(function(a){a.data.data.success&&(t.show(),e.call("organizationStructure","GET",[]).then(function(e){var t=e.data.data;angular.copy(t,C.treeData)})["finally"](function(){t.hide()}))})["finally"](function(){t.hide()})}var C=this,w=!1;C.editMode=!1,C.treeData=[],C.treeInstance,C.treeEventsObj={ready:y,move_node:b},C.btnAction="Edit",c.getPermissions().then(function(e){C.permissions=e.admin_company_structure,C.permissions.update||l.go("403")}),C.treeConfig={core:{data:C.treeData,animation:!0,check_callback:function(e,t,a,i,o){return"move_node"===e&&"#"===a.id?"i"===o.pos:C.editMode},error:function(e){r.error("treeCtrl: error from js tree - "+angular.toJson(e))}},contextmenu:{items:g},dnd:{is_draggable:function(){return C.editMode}},plugins:["dnd","contextmenu"],version:1},C.ignoreModelChanges=function(){return!0},C.reCreateTree=function(){C.treeConfig.version++},C.editTree=function(){C.editMode?(C.btnAction="Edit",$(".org_structure .ng_tree").addClass("locked")):(C.btnAction="Done",$(".org_structure .ng_tree").removeClass("locked")),C.editMode=!C.editMode}}angular.module("app.admin").controller("AdminCompanyStructureController",e),e.$inject=["webservice","loader","toast","$q","ModalService","$filter","$state","$log","$scope","datagroupPermissions","localizedMessages","$translate","$store"]}(),$(document).bind("dnd_start.vakata",function(e,t){$("#"+t.element.id).addClass("moving")}),$(document).bind("dnd_stop.vakata",function(e,t){$("#"+t.element.id).removeClass("moving")}),$(document).on("click",".menu",function(){$(this).closest(".jstree-anchor").contextmenu()}),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y){function b(){var e=[];o?(D.parentId=i.parent,i.original.unit_id=i.original.unitId,D.subunit=i.original,D.currentSubunitId=i.id,i.original.hod_emp_number&&""!=i.original.hod_emp_name&&e.push(h.getEmployee(i.original.hod_emp_number,!0,!0).then(function(e){e&&(e.fullName=h.getFullName(e),D.subunit.head_of_department_employee=e)})),i.original.CostCentre&&(D.subunit.costCentre=i.original.CostCentre,D.subunit.costCentre.cost_centre_name&&(D.subunit.costCentre.name=D.subunit.costCentre.cost_centre_name))):(i.original.CostCentre&&i.original.CostCentre.cost_centre_name&&(i.original.CostCentre.name=i.original.CostCentre.cost_centre_name),D.parentId=i.id,D.subunit={id:null,unit_id:"",name:"",head_of_department_employee:"",costCentre:i.original.CostCentre,description:""}),p.all(e).then(function(e){C()}),d.$on("invalidCostCenter",function(e,t){t?d.$broadcast("schemaForm.error.costCentre","invalid",!0):d.$broadcast("schemaForm.error.costCentre","invalid",f.instant("Invalid"))})}function C(){var e="1"===i.id;if(D.schema={type:"object",title:D.title,properties:{unit_id:{title:"Unit Id",type:"string",maxLength:100},name:{title:"Name",type:"string",maxLength:100},selectedEmployee:{title:f.instant("Head of Unit"),type:"object"},costCentre:{title:"Cost Center",type:"object",idsToSkip:[]},description:{title:"Description",type:"string",maxLength:400}},required:["name"]},D.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"unit_id",validationMessage:{201:v.textLengthExceedValidation.message(D.schema.properties.unit_id.maxLength)}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"name",readonly:e&&o,validationMessage:{unique:t.getLocalizedCustom("Already exists"),302:t.getLocalizedCustom("Required"),201:v.textLengthExceedValidation.message(D.schema.properties.name.maxLength)},$validators:{unique:function(e){if(e){null==D.validationTreeData&&(D.validationTreeData=angular.copy(a),D.subunit.id&&D.validationTreeData.splice(D.validationTreeData.indexOf(u("filter")(D.validationTreeData,{id:D.subunit.id},!0)[0]),1));var t=u("filter")(D.validationTreeData,{name:e},!0);return!(t.length>0)}return!0}}}]},{type:"section",htmlClass:"row",items:[{type:"auto-complete",htmlClass:"col s12 m12 l12",key:"selectedEmployee",placeholder:f.instant("Employee Name"),"text-searching":f.instant("Searching..."),"text-no-results":f.instant("No results found"),idsToSkip:[],requireSelection:!0,validationMessage:{invalid:t.getLocalizedCustom("Invalid")},$validators:{invalid:function(e){return!(e&&e.hasOwnProperty("purged_at")&&e.purged_at)}}}]},{type:"section",htmlClass:"row",items:[{key:"costCentre",type:"cost-centre-auto-complete",htmlClass:"col s12 m12 l12",placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",requireSelection:!0,condition:"modal.costCenterEnabled"}]},{type:"section",htmlClass:"row",items:[{type:"textarea",htmlClass:"col s12 m12 l12",key:"description",validationMessage:{201:v.textLengthExceedValidation.message(D.schema.properties.description.maxLength)}}]}],!o){var n={type:"section",htmlClass:"row subUnitHelpText",items:[{type:"help",helpvalue:t.getLocalizedCustom("This unit will be added under")+" "+m(_.escape(i.original.name))}]};D.form.push(n)}g.addRequiredMessage(D.form),D.model={unit_id:D.subunit.unit_id,name:D.subunit.name,selectedEmployee:D.subunit.head_of_department_employee,costCentre:D.subunit.costCentre,description:D.subunit.description,parent_id:D.parentId}}function w(i){if(d.$broadcast("schemaFormValidate"),i.$valid){s.show();var n=o?"PATCH":"POST",l={unit_id:D.model.unit_id,name:D.model.name,description:D.model.description,parent_id:D.parentId};o&&(l.id=D.subunit.id),D.model.selectedEmployee&&(l.head_of_department_employee=D.model.selectedEmployee.empNumber),D.model.costCentre?l.cost_centre_id=D.model.costCentre.id:l.cost_centre_id=null,e.call("subunits",n,l,{}).then(function(i){var n=i.data.data;if(o)var l=u("filter")(a,{id:D.currentSubunitId},!0)[0];else D.subunit.empCount=0,l={id:n.id,parent:D.parentId,empCount:0,state:{opened:!0,disabled:!1}};D.model.selectedEmployee?(l.hod_emp_number=D.model.selectedEmployee.empNumber,l.hod_emp_name=D.model.selectedEmployee.fullName):(l.hod_emp_number=null,l.hod_emp_name=null),D.model.costCentre?l.CostCentre=D.model.costCentre:l.CostCentre=null,l.name=n.name,l.unitId=n.unitId,l.description=n.description;var r="<span class='subunit_info'><span class='handle'><i class='material-icons'>ohrm_drag_vertical</i></span> <i class='material-icons'>person</i> <span class='org_info'><span class='highlight_count'>("+D.subunit.empCount+")-"+n.accruedEmployeeCount+"</span> ";n.cost_centre_id&&D.model.costCentre&&(r+=" ("+m(_.escape(D.model.costCentre.cost_code))+") "),n.unitId&&n.unitId.length&&(r+=m(_.escape(n.unitId))+": "),r+=m(_.escape(n.name)),D.model.selectedEmployee&&(r+=" - "+m(_.escape(D.model.selectedEmployee.fullName))),r+="</span></span><span class='menu'><i class='material-icons'>more_horiz</i></span>",l.text=r,o||a.push(l);var s=o?"updateSuccess":"saveSuccess";t.showLocalizedToast(s),e.clearCache("subunits"),y.dispatch("core/subunits/dropSubunitData")},function(e){c.error(e)})["finally"](function(){s.hide()}),r(!0)}}function S(){r(!1)}var D=this;D.title=l,D.subunit={},D.parentId=null,D.validationTreeData=null,D.costCenterEnabled=n.costCenterEnabled,D.save=w,D.cancel=S,b()}angular.module("app.admin").controller("AdminEditSubunitController",e),e.$inject=["webservice","localizedMessages","treeData","selectedNode","editMode","organizationInformation","title","close","loader","toast","$scope","$sanitize","$filter","$q","$translate","formHelper","employeeService","formValidationHelper","$store"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c){function d(e,t,a){"0"!==t.iCalendarStatus&&t.iCalendarStatus!==e.iCalendarStatus&&p()}function m(){o.getPermissions().then(function(e){e.icalendar_global_config&&e.icalendar_global_config.read?(l.show(),f.loader=!0,s.getCalendarFeedGlobalConfiguration().then(function(e){f.model.iCalendarStatus="1"===e.data.data.isEnabled})["finally"](function(){l.hide(),f.loader=!1,f.dataFetched=!0})):c.go("403")})}function u(){f.schema={type:"object",title:"iCalendar",properties:{iCalendarStatus:{title:"Enable iCalendar Feed",type:"boolean"}}},f.form=[{type:"row",items:[{type:"switch",htmlClass:"col-3",key:"iCalendarStatus"}]}]}function p(){var t=f.model.iCalendarStatus?"1":"0";s.saveCalendarFeedGlobalConfiguration(t).then(function(t){e.successToast("Successfully Updated")})}var f=this;f.title="iCalendar",f.save=p,f.loader=!1,f.dataFetched=!1,m(),u(),f.model={iCalendarStatus:"0"},a.$watch("iCalendar.model",d,!0)}angular.module("app.core").controller("ICalendarController",e),e.$inject=["localizedMessages","formValidationHelper","$scope","settingsService","datagroupPermissions","$q","loader","toast","calendarFeedGlobalConfigService","$state"]}(),function(){"use strict";function e(e){function t(t){return e.call(i,"GET",[],{})}function a(t){var a={isEnabled:t};return e.call(i,"PATCH",a,{})}var i="calendarFeedGlobalConfig",o={getCalendarFeedGlobalConfiguration:t,saveCalendarFeedGlobalConfiguration:a};return o}angular.module("app.core").service("calendarFeedGlobalConfigService",e),e.$inject=["webservice"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c){function d(i,r,c){var d={offset:(c-1)*T.pageSize,limit:T.pageSize,sortingFeild:T.SortingListFields[i],sortingOrder:r};T.filters&&(d.filter=T.filters),l.show();var m=[];m.push(o.call("costCentres","GET",[],d)),m.push(s.getPermissions().then(function(e){return void 0!==e.admin_cost_centres&&e.admin_cost_centres.read?e.admin_cost_centres:a.reject({statusText:"Forbidden"})})),a.all(m).then(function(t){T.permissions=t[1],u(),T.costCentres=t[0].data.data,T.total=t[0].data.meta.total,T.totalDataCount=T.total,T.dataInCurruntPage=t[0].data.data.length,T.meta=t[0].data.meta,T.page=c,T.lastPage=Math.ceil(T.total/T.pageSize),T.costCentresListHelper=new e.list(T.listData.costCentres,T.costCentres),T.selectAll=T.costCentresListHelper.selectAllItems,T.deselectAll=T.costCentresListHelper.deselectAllItems,l.hide(),0==T.costCentres.length&&n.infoToast("No Records Found")},function(e){l.hide(),t.go("403")})}function m(){T.filters=!1,l.show(),o.call("organization","GET",[],{}).then(function(e){l.hide(),e.data.data.costCenterEnabled?c.getSetting("page_size").then(function(e){T.pageSize=e,d("cost_code","ASC",T.page)}):t.go("403")})}function u(){T.panelInfo={costCentreInfo:{}},p()}function p(){var e=[{name:"cost_code",lable:"Cost Center ID",getter:"cost_code",sortable:!0,sortAction:"fetchCostCentres"},{name:"name",lable:"Name",getter:"name",sortable:!0,sortAction:"fetchCostCentres"},{name:"description",lable:"Description",getter:"description",sortable:!0,sortAction:"fetchCostCentres"}],t=[{colspan:3}],a=[{"class":"edit_item",clickAction:"editCostCentre",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:T.permissions["delete"]}];T.listData={costCentres:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:T.permissions,listActions:i,pagination:!0}},T.permissions["delete"]?T.listData.costCentres.columnWidths=["5%","20%","30%","40","5%"]:T.listData.costCentres.columnWidths=["20%","30%","40","5%"]}function f(){T.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function g(e){i.showModal({templateUrl:"app/admin/costCentre/cost_centre_modal.html",controller:"AdminEditCostCentreController",controllerAs:"modal",inputs:{costCentre:e,dataList:T.costCentres,modalProperties:{title:"Edit Cost Center"}}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function h(){if(T.listData.costCentres.selected.length>0){var e=T.listData.costCentres.selected.length;l.show(),o.call("costCentres","DELETE",{data:T.listData.costCentres.selected},{}).then(function(t){l.hide(),n.showLocalizedToast("deleteSuccess"),T.total-=e,v(T.listData.costCentres.selected)},function(e){l.hide(),r.success(e)})}}function v(e){for(var t=T.costCentres.length-1;t>=0;t--){var a=e.indexOf(T.costCentres[t].id);a>-1&&(e.splice(a,1),T.costCentres.splice(t,1))}}function y(e){var t=e.obj;if(t.selected)T.listData.costCentres.selected.push(t.id);else{var a=T.listData.costCentres.selected.indexOf(t.id);a>-1&&T.listData.costCentres.selected.splice(a,1)}}function b(){T.listData.costCentres.selected.length>0&&i.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&(h(),_(T.listData.costCentres.selected.length))})})}function C(){var e={cost_code:"",name:"",description:""};i.showModal({templateUrl:"app/admin/costCentre/cost_centre_modal.html",controller:"AdminEditCostCentreController",controllerAs:"modal",inputs:{costCentre:e,dataList:T.costCentres,modalProperties:{title:"Add Cost Center"}}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e&&w()})})}function w(){T.totalDataCount=T.totalDataCount+1,T.dataInCurruntPage=T.dataInCurruntPage+1}function _(e){T.totalDataCount=T.totalDataCount-e,T.dataInCurruntPage=T.dataInCurruntPage-e}function S(){close(!0)}function D(){close(!1)}var T=this;T.pageSize=50,T.page=1,T.total=0,T.totalDataCount=0,T.dataInCurruntPage=0,T.title="Cost Centers",T.costCentres="",T.sort="",T.editCostCentre=g,T.deleteCostCentres=h,T.changeSelection=y,T.deleteSelection=b,T.addCostCentre=C,T.confirm=S,T.cancel=D,T.SortingListFields={cost_code:"cost_code",name:"name",description:"description"},T.fetchCostCentres=d,T.state=t,T.selected=[],T.filters=!1,T.oldFilter=!1,T.countries=[],T.costCentres||m(),f()}angular.module("app.admin").controller("AdminCostCentresController",e),e.$inject=["listHelper","$state","$q","ModalService","webservice","localizedMessages","loader","toast","datagroupPermissions","settingsService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){d.getCostCentreList(!0).then(function(e){if(_=e,C.exsistingCostCodes=y(_,"cost_code",!0),C.exsistingNames=y(_,"name",!0),C.costCentre.id){var t=C.exsistingCostCodes.indexOf(C.costCentre.cost_code.toLowerCase());C.exsistingCostCodes.splice(t,1);var t=C.exsistingNames.indexOf(C.costCentre.name.toLowerCase());C.exsistingNames.splice(t,1)}p()})}function p(e){C.schema={type:"object",title:"CostCentre",properties:{cost_code:{title:"Cost Center ID",type:"string",maxLength:20},name:{title:"Name",type:"string",maxLength:40},description:{title:"Description",type:"string",maxLength:255}},required:["cost_code","name"]},C.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"cost_code",validationMessage:{duplicationCostCode:t.getLocalizedCustom("Already exists"),302:t.getLocalizedCustom("Required"),201:m.textLengthExceedValidation.message(C.schema.properties.cost_code.maxLength)},$validators:{duplicationCostCode:f}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"name",validationMessage:{duplicationName:t.getLocalizedCustom("Already exists"),302:t.getLocalizedCustom("Required"),201:m.textLengthExceedValidation.message(C.schema.properties.name.maxLength)},$validators:{duplicationName:g}}]},{type:"section",htmlClass:"row",items:[{type:"textarea",htmlClass:"col s12 m12 l12",key:"description",validationMessage:{201:m.textLengthExceedValidation.message(C.schema.properties.description.maxLength)}}]}],c.addRequiredMessage(C.form),C.model={cost_code:C.costCentre.cost_code,name:C.costCentre.name,description:C.costCentre.description}}function f(e){return""==e||(C.exsistingCostCodes?!(C.exsistingCostCodes.indexOf(e.toLowerCase())>-1):void 0)}function g(e){return""==e||(C.exsistingNames?!(C.exsistingNames.indexOf(e.toLowerCase())>-1):void 0)}function h(a){if(s.$broadcast("schemaFormValidate"),a.$valid){l.show(),angular.extend(C.costCentre,C.model);var i=C.costCentre.id,c="POST",d="costCentres",m="saveSuccess";i?(c="PATCH",d+="/"+i,m="updateSuccess"):(c="POST",m="saveSuccess"),e.call(d,c,C.model,{}).then(function(e){l.hide(),"POST"==c?o.unshift(e.data.data):"PATCH"==c&&v(C.costCentre),t.showLocalizedToast(m)},function(e){l.hide(),r.success(e)}),n(!0)}}function v(e){for(var t=0;t<o.length;t++)if(o[t].id==e.id){angular.extend(o[t],e);break}}function y(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}function b(){n(!1)}p.$inject=["formData"];var C=this;C.modalProperties=i;var w={};angular.copy(a,w),C.costCentre=w,C.save=h,C.cancel=b,C.model={};var _=o;u()}angular.module("app.admin").controller("AdminEditCostCentreController",e),e.$inject=["webservice","localizedMessages","costCentre","modalProperties","dataList","close","loader","toast","$scope","formHelper","costCentreService","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v){function y(){h.show(),u.getPermissions().then(function(e){if(M.permissions=e.security_authentication_configuration,M.permissions.read){var t={filter:{status:1}},i={defaultAuthenticationSettings:r.call("defaultAuthenticationSettings","GET",[]),ssoOauthProviders:r.call("ssoOAuthProviders","GET",[],t)};a.all(i).then(function(e){M.defaultConfiguration=e.defaultAuthenticationSettings.data.data,M.loginProviders=e.ssoOauthProviders.data.data,M.providerList=A(M.loginProviders),M.toolTipMessage=b(),C(),k(),w(),h.hide()})}else h.hide(),v.isEnabledFromLicence().then(function(e){e?f.go("admin.ldap_authentication"):u.getPermission("openid_configuration").then(function(e){e.read?f.go("admin.openIdProvider"):u.getPermission("admin_oauth_register").then(function(e){e.read?f.go("admin.oauth_clients"):u.getPermission("saml_configuration").then(function(e){e.read?f.go("admin.samlProvider"):f.go("403")})})})})})}function b(){var t=M.defaultConfiguration.withInTimeForBlock.split(":");return e.getLocalizedCustomWithVariables("System will be disabled for {{days}} day(s) {{hours}} hour(s) {{minutes}} minute(s)",{days:t[0],hours:t[1],minutes:t[2]})}function C(){M.schema={type:"object",title:"Default Authentication Settings",readonly:!0,properties:{defaultSettingsStatus:{title:"Default settings status",type:"string","enum":["Enable","Disable"],readonly:!0},defaultAlternateLogin:{title:"Default alternative login",type:"string","enum":M.providerList["enum"],readonly:!1},userCanResetPassword:{title:"User can reset the password",type:"boolean"},enableCaptcha:{title:"Show CAPTCHA when failed attempts exceed",type:"boolean",readonly:!0},numberOfFailedAttemptsForCaptcha:{title:"Attempts",type:"string",minimum:1,maximum:10,readonly:!0},blockAccess:{title:"Block Access when failed attempts exceeds",type:"boolean",readonly:!0},numberOfFailedAttemptsForBlock:{title:"Attempts",type:"string",minimum:1,maximum:20,readonly:!0},withInTimeForBlock:{title:"For",type:"string",readonly:!0},enableSecondaryPassword:{title:"Enable secondary password",type:"boolean"},enablePasswordExpiration:{title:"Enable password expiration after",type:"boolean",readonly:!0},numberOfMonthsForPasswordExpiration:{title:"Months",type:"string",minimum:1,maximum:12,readonly:!0},adminCanResetPassword:{title:"Admin can reset password",type:"boolean"},notifyEmployeeToSetPassword:{title:"Notify employee to set password upon user creation",type:"boolean"},enforcePasswordStrength:{title:"Enforce required password strength",type:"boolean",readonly:!0},defaultRequiredPasswordStrength:{title:"Minimum required",type:"string","enum":["veryWeak","weak","better","medium","strong","strongest"],readonly:!0}},required:["defaultSettingsStatus"]},M.permissions.update&&(M.schema.readonly=!1),M.form=[{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l4",key:"defaultSettingsStatus",emptyOption:!1,titleMap:[{value:"Enable",name:e.getLocalizedCustom("Enabled")},{value:"Disable",name:e.getLocalizedCustom("Disabled")}],onChange:w},{type:"select",htmlClass:"col s12 m12 l4",key:"defaultAlternateLogin",emptyOption:"None",titleMap:M.providerList.titleMap,condition:function(){return"Enable"==M.model.defaultSettingsStatus}}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l4",key:"userCanResetPassword"}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l6",key:"adminCanResetPassword"}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l4",key:"enableSecondaryPassword"}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l8",key:"notifyEmployeeToSetPassword"}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l5 default_authentication_checkboxes",key:"enablePasswordExpiration"},{type:"text",htmlClass:"col s12 m12 l2",key:"numberOfMonthsForPasswordExpiration",validationMessage:{numberValidation:g.integers.message,maxValidation:g.numericMaxValidation.message(M.schema.properties.numberOfMonthsForPasswordExpiration.maximum),minValidation:g.numericMinValidation.message(M.schema.properties.numberOfMonthsForPasswordExpiration.minimum)},$validators:{numberValidation:g.integers.validator,maxValidation:function(e){return g.numericMaxValidation.validator(e,M.schema.properties.numberOfMonthsForPasswordExpiration.maximum)},minValidation:function(e){return g.numericMinValidation.validator(e,M.schema.properties.numberOfMonthsForPasswordExpiration.minimum)}}}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l5 default_authentication_checkboxes",key:"enforcePasswordStrength"},{type:"select",htmlClass:"col s12 m12 l3",key:"defaultRequiredPasswordStrength",titleMap:[{value:"veryWeak",name:e.getLocalizedCustom("Very Weak")},{value:"weak",name:e.getLocalizedCustom("Weak")},{value:"better",name:e.getLocalizedCustom("Better")},{value:"medium",name:e.getLocalizedCustom("Medium")},{value:"strong",name:e.getLocalizedCustom("Strong")},{value:"strongest",name:e.getLocalizedCustom("Strongest")}]}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l5 default_authentication_checkboxes",key:"enableCaptcha",onChange:function(){
S()}},{type:"text",htmlClass:"col s12 m12 l2",key:"numberOfFailedAttemptsForCaptcha",onChange:S,validationMessage:{numberValidation:g.positiveInteger.message,maxValidation:g.numericMaxValidation.message(M.schema.properties.numberOfFailedAttemptsForCaptcha.maximum),minValidation:g.numericMinValidation.message(M.schema.properties.numberOfFailedAttemptsForCaptcha.minimum)},$validators:{numberValidation:g.positiveInteger.validator,maxValidation:function(e){return g.numericMaxValidation.validator(e,M.schema.properties.numberOfFailedAttemptsForCaptcha.maximum)},minValidation:function(e){return g.numericMinValidation.validator(e,M.schema.properties.numberOfFailedAttemptsForCaptcha.minimum)}}}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l5 default_authentication_checkboxes",key:"blockAccess",onChange:function(){T(M.model.withInTimeForBlock),x(M.model.withInTimeForBlock),S(M.model.numberOfFailedAttemptsForBlock),M.model.blockAccess||_()}},{type:"text",htmlClass:"col s12 m12 l2",key:"numberOfFailedAttemptsForBlock",validationMessage:{numberValidation:g.positiveInteger.message,maxValidation:g.numericMaxValidation.message(M.schema.properties.numberOfFailedAttemptsForBlock.maximum),minValidation:g.numericMinValidation.message(M.schema.properties.numberOfFailedAttemptsForBlock.minimum),disablingPeriodWithCaptchaValidation:e.getLocalizedCustom("Attempts to Block Access should be greater than Attempts to Enable CAPTCHA")},$validators:{numberValidation:g.positiveInteger.validator,maxValidation:function(e){return g.numericMaxValidation.validator(e,M.schema.properties.numberOfFailedAttemptsForBlock.maximum)},minValidation:function(e){return g.numericMinValidation.validator(e,M.schema.properties.numberOfFailedAttemptsForBlock.minimum)},disablingPeriodWithCaptchaValidation:D}},{type:"text-with-helptext",htmlClass:"col s12 m12 l2",key:"withInTimeForBlock",validationMessage:{disablingPeriodRequired:e.getLocalizedCustom("Please select account disabling period"),disablingPeriodFormat:e.getLocalizedCustom("Account disabling period should be in DD:HH:MM format"),disablingPeriodTypeValidation:e.getLocalizedCustom("Account disabling period is invalid")},placeholder:"DD:HH:MM",helpText:"DD:HH:MM",helpTextClass:"disabled",$validators:{disablingPeriodFormat:T,disablingPeriodTypeValidation:x},onChange:_}]}],p.addRequiredMessage(M.form)}function w(){var e;e="Disable"==M.model.defaultSettingsStatus;for(var t in M.form){var a=M.form[t].items;for(var i in a)void 0!=a[i].readonly&&(a[i].readonly=e)}o.$broadcast("schemaFormRedraw")}function _(){o.$broadcast("schemaForm.error.withInTimeForBlock","disablingPeriodRequired",!0)}function S(){M.model.blockAccess&&M.model.enableCaptcha&&Number(M.model.numberOfFailedAttemptsForBlock)<=Number(M.model.numberOfFailedAttemptsForCaptcha)?o.$broadcast("schemaForm.error.numberOfFailedAttemptsForBlock","disablingPeriodWithCaptchaValidation",!1):o.$broadcast("schemaForm.error.numberOfFailedAttemptsForBlock","disablingPeriodWithCaptchaValidation",!0)}function D(e){return!M.model.blockAccess||!M.model.enableCaptcha||!(Number(e)<=Number(M.model.numberOfFailedAttemptsForCaptcha))}function T(e){if(M.model.blockAccess){var t=/^[0-9]{1,2}:[0-9]{1,2}:[0-9]{1,2}$/;return!!String(e).match(t)}return!0}function x(e){if(M.model.blockAccess){var t=e.split(":"),a=parseInt(t[0]),i=parseInt(t[1]),o=parseInt(t[2]);return a>-1&&a<100&&i>-1&&i<24&&o>-1&&o<60}return!0}function F(){M.model.blockAccess&&(""==M.model.withInTimeForBlock||void 0==M.model.withInTimeForBlock)?o.$broadcast("schemaForm.error.withInTimeForBlock","disablingPeriodRequired",!1):o.$broadcast("schemaForm.error.withInTimeForBlock","disablingPeriodRequired",!0)}function k(){M.model.defaultSettingsStatus=""==M.defaultConfiguration.defaultSettingsStatus?"Disable":M.defaultConfiguration.defaultSettingsStatus,M.model.userCanResetPassword=M.defaultConfiguration.userCanResetPassword,M.model.enableCaptcha=M.defaultConfiguration.enableCaptcha,M.model.numberOfFailedAttemptsForCaptcha=M.defaultConfiguration.numberOfFailedAttemptsForCaptcha.toString(),M.model.blockAccess=M.defaultConfiguration.blockAccess,M.model.numberOfFailedAttemptsForBlock=M.defaultConfiguration.numberOfFailedAttemptsForBlock.toString(),M.model.withInTimeForBlock=M.defaultConfiguration.withInTimeForBlock,M.model.enableSecondaryPassword=M.defaultConfiguration.enableSecondaryPassword,M.model.enablePasswordExpiration=M.defaultConfiguration.enablePasswordExpiration,M.model.numberOfMonthsForPasswordExpiration=M.defaultConfiguration.numberOfMonthsForPasswordExpiration.toString(),M.model.adminCanResetPassword=M.defaultConfiguration.adminCanResetPassword,M.model.notifyEmployeeToSetPassword=M.defaultConfiguration.notifyEmployeeToSetPassword,M.model.enforcePasswordStrength=M.defaultConfiguration.enforcePasswordStrength,M.model.defaultRequiredPasswordStrength=M.defaultConfiguration.defaultRequiredPasswordStrength,M.model.defaultAlternateLogin=""==M.defaultConfiguration.defaultAlternateLogin.id?"":M.defaultConfiguration.defaultAlternateLogin.type+"_"+M.defaultConfiguration.defaultAlternateLogin.id}function E(e){F(),S(),o.$broadcast("schemaFormValidate"),e.$valid&&I()}function I(){r.call("defaultAuthenticationSettings","PATCH",M.model,{}).then(function(t){e.showLocalizedToast("saveSuccess")})}function A(e){for(var t=[],a=[],i=0;i<e.length;i++)t.push({value:e[i].providerId,name:e[i].providerName}),a.push(e[i].providerId);return{titleMap:t,"enum":a}}var M=this;M.onSubmit=E,M.title="Default Authentication Settings",M.setFormDefaults=k,M.submitDefaultAuthenticationSettings=I,M.defaultConfiguration,M.toolTipMessage,M.loginProviders=[],M.providerList,M.model={},y()}angular.module("app.admin").controller("DefaultAuthenticationSettingsController",e),e.$inject=["localizedMessages","logger","$q","$rootScope","$scope","$window","$stateParams","webservice","$timeout","toast","pimHelper","ModalService","datagroupPermissions","formHelper","$state","formValidationHelper","loader","ldapAuthenticationService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){t.call("education","GET",[]).then(function(e){if(b.existingEducations=y(e.data.data,"name",!0),b.education.id){var t=b.existingEducations.indexOf(b.education.name.toLowerCase());b.existingEducations.splice(t,1)}p()})}function p(){b.schema={type:"object",title:"Education",properties:{name:{title:"Level of Education",type:"string",maxLength:100}},required:["name"]},b.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"name",validationMessage:{duplicationEducation:a.getLocalizedCustom("Already exists"),302:a.getLocalizedCustom("Required"),201:m.textLengthExceedValidation.message(b.schema.properties.name.maxLength)},$validators:{duplicationEducation:f}}]}],d.addRequiredMessage(b.form),b.model={name:b.education.name}}function f(e){return""==e||(b.existingEducations?!(b.existingEducations.indexOf(e.toLowerCase())>-1):void 0)}function g(e){if(c.$broadcast("schemaFormValidate"),e.$valid){l.show(),angular.extend(b.education,b.model);var i=b.education.id,s="POST",d="education",m="saveSuccess";i?(s="PATCH",d+="/"+i,m="updateSuccess"):(s="POST",m="saveSuccess"),t.call(d,s,b.model,{}).then(function(e){l.hide(),delete b.existingEducations,"POST"==s?o.unshift(e.data.data):"PATCH"==s&&h(b.education),a.showLocalizedToast(m)},function(e){l.hide(),r.success(e)}),n(!0)}}function h(e){for(var t=0;t<o.length;t++)if(o[t].id==e.id){angular.extend(o[t],e);break}}function v(){n(!1)}function y(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}var b=this,C={};angular.copy(i,C),b.education=C,b.education.id?b.title="Edit Education":b.title="Add Education",b.save=g,b.cancel=v,b.existingEducations,u()}angular.module("app.pim").controller("AdminEditEducationController",e),e.$inject=["logger","webservice","localizedMessages","education","dataList","close","loader","toast","$rootScope","$scope","formHelper","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){s.show(),d.getPermissions().then(function(e){E.permissions=e.admin_education,E.permissions.read?u.getSetting("page_size").then(function(e){E.pageSize=e,E.fetchEducations("level","ASC",1)}):(s.hide(),m.go("403"))})}function f(e,t,a){s.show();var o={offset:(a-1)*E.pageSize,limit:E.pageSize,sortingFeild:E.sortingListFields[e],sortingOrder:t},r=[];r.push(l.call("education","GET",[],o)),i.all(r).then(function(e){h(),E.educations=e[0].data.data,E.totalDataCount=e[0].data.meta.total,E.dataInCurruntPage=e[0].data.data.length,E.page=a,E.lastPage=Math.ceil(E.totalDataCount/E.pageSize),g(),s.hide(),0==E.educations.length&&n.infoToast("No Records Found")})}function g(){E.educationsListHelper=new t.list(E.listData.educations,E.educations),E.selectAll=E.educationsListHelper.selectAllItems,E.deselectAll=E.educationsListHelper.deselectAllItems}function h(){E.panelInfo={educationInfo:{}},v()}function v(){var e=[{name:"level",lable:"Level of Education",getter:"name",sortable:!0,sortAction:"fetchEducations"}],t=[{colspan:3}],a=[{"class":"edit_item",clickAction:"editEducation",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:E.permissions["delete"]}];E.listData={educations:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:E.permissions,listActions:i,columnWidths:["5%","90%","5%"],pagination:!0}}}function y(){E.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function b(e){o.showModal({templateUrl:"app/admin/educations/education_modal.html",controller:"AdminEditEducationController",controllerAs:"modal",inputs:{education:e,dataList:E.educations}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function C(){if(E.listData.educations.selected.length>0){var e=E.listData.educations.selected.length;s.show(),l.call("education","DELETE",{data:E.listData.educations.selected},{}).then(function(t){s.hide();var a="deleteSuccess";n.showLocalizedToast(a),E.total-=e,w(E.listData.educations.selected)},function(e){s.hide(),c.success(e)})}}function w(e){for(var t=E.educations.length-1;t>=0;t--){var a=e.indexOf(E.educations[t].id);a>-1&&(e.splice(a,1),E.educations.splice(t,1))}}function _(e){var t=e.obj;if(t.selected)E.listData.educations.selected.push(t.id);else{var a=E.listData.educations.selected.indexOf(t.id);a>-1&&E.listData.educations.selected.splice(a,1)}}function S(){E.listData.educations.selected.length>0&&o.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&(C(),x(E.listData.educations.selected.length))})})}function D(){var e={name:""};o.showModal({templateUrl:"app/admin/educations/education_modal.html",controller:"AdminEditEducationController",controllerAs:"modal",inputs:{education:e,dataList:E.educations}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e&&T()})})}function T(){E.totalDataCount=E.totalDataCount+1,E.dataInCurruntPage=E.dataInCurruntPage+1}function x(e){E.totalDataCount=E.totalDataCount-e,E.dataInCurruntPage=E.dataInCurruntPage-e}function F(){close(!0)}function k(){close(!1)}var E=this;E.title="Educations",E.addBtntitle="Add Education",E.educations="",E.editEducation=b,E.deleteEducations=C,E.changeSelection=_,E.deleteSelection=S,E.addEducation=D,E.confirm=F,E.cancel=k,E.fetchEducations=f,E.sortingListFields={level:"name"},E.pageSize=50,E.page=1,E.lastPage=0,E.totalDataCount=0,E.dataInCurruntPage=0,p(),y()}angular.module("app.admin").controller("AdminEducationsController",e),e.$inject=["logger","listHelper","$window","$q","ModalService","localizedMessages","webservice","$rootScope","loader","toast","datagroupPermissions","$state","settingsService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){function m(e,t){C(t.step,t.skipValidate)}function u(){var e={persistedCriteria:n.fetchEEOReportCriteria(),hasEEOEnabledlocations:n.hasEEOEnabledLocations(),eeoFilingConfigurations:D()};s.all(e).then(function(e){e.hasEEOEnabledlocations||T(),p(e.persistedCriteria),f(),e.eeoFilingConfigurations.data.data.payPeriodStartMonth&&(x.payPeriodStartMonth=e.eeoFilingConfigurations.data.data.payPeriodStartMonth),e.eeoFilingConfigurations.data.data.payPeriodEndMonth&&(x.payPeriodEndMonth=e.eeoFilingConfigurations.data.data.payPeriodEndMonth),v(),y()})}function p(e){o[i.EEO_FILING_MODEL_KEY]||(e?o[i.EEO_FILING_MODEL_KEY]=e:o[i.EEO_FILING_MODEL_KEY]={basic:{},establishments:{}})}function f(){o[i.EEO_FILING_MODEL_KEY]?x.currentModel=g():x.currentModel=x.defaultModel}function g(){return x.initialModel=o[i.EEO_FILING_MODEL_KEY],h(x.initialModel.basic)}function h(e){var t={};return t.companyNumber=e.companyNumber,t.ein=e.ein,t.payPeriodStartDate=e.payPeriodStartDate?new Date(e.payPeriodStartDate):null,t.payPeriodEndDate=e.payPeriodEndDate?new Date(e.payPeriodEndDate):null,t.c1=e.c1,t.c2=e.c2,t.c3=e.c3,t.dunsNumber=e.dunsNumber,t}function v(){x.formData={c1:r.getEnumAndTitleMapForSelect([{name:"Yes",value:"Yes"},{name:"No",value:"No"}],{name:"name",value:"value"}),c2:r.getEnumAndTitleMapForSelect([{name:"Yes",value:"Yes"},{name:"No",value:"No"}],{name:"name",value:"value"}),c3:r.getEnumAndTitleMapForSelect([{name:"Yes",value:"Yes"},{name:"No",value:"No"}],{name:"name",value:"value"})}}function y(){x.model=x.currentModel,x.schema={type:"object",properties:{companyNumber:{title:"Company Number",type:"string",maxLength:7},ein:{title:"Employer Identification Number (EIN)",type:"string"},payPeriodStartDate:{title:"Pay Period Start Date",type:["null","object"]},payPeriodEndDate:{title:"Pay Period End Date",type:["null","object"]},c1:{title:n.getStructuredEEOQuestionLabels("c1"),type:"string","enum":x.formData.c1["enum"]},c2:{title:n.getStructuredEEOQuestionLabels("c2"),type:"string","enum":x.formData.c2["enum"]},c3:{title:n.getStructuredEEOQuestionLabels("c3"),type:"string","enum":x.formData.c3["enum"]},dunsNumber:{title:"DUN & Bradstreet Identification Number",type:"string"}},required:["companyNumber","ein","payPeriodStartDate","payPeriodEndDate","c1","c2","c3","dunsNumber"]},x.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s4 m4 l4",key:"companyNumber",onChange:function(e){e&&x.initialModel&&x.initialModel.establishments[0]&&(x.initialModel.establishments[0].unitNumber=e)},validationMessage:{302:t.getLocalizedCustom("Required"),201:a.textLengthExceedValidation.message(x.schema.properties.companyNumber.maxLength),alphanumeric:a.alphanumeric.message},$validators:{alphanumeric:function(e){return a.alphanumeric.validator(e)}}},{type:"text",htmlClass:"col s4 m4 l4",key:"ein",validationMessage:{302:t.getLocalizedCustom("Required"),numericOnly:a.numericOnly.message,numberOfDigits:a.numberOfDigits.message(9)},$validators:{numericOnly:function(e){return a.numericOnly.validator(e)},numberOfDigits:function(e){return a.numberOfDigits.validator(e,9)}}},{type:"date",htmlClass:"col s2 m2 l2",key:"payPeriodStartDate",onChange:function(t){t&&x.model.payPeriodEndDate&&(t.getTime()<=x.model.payPeriodEndDate.getTime()?e.basicReportDetailsForm.$valid||(e.$broadcast("schemaForm.error.payPeriodEndDate","payPeriodEndDate",!0),e.$broadcast("schemaForm.error.payPeriodEndDate","schemaForm",!0)):e.$broadcast("schemaForm.error.payPeriodEndDate","payPeriodEndDate",!1))},ngModelOptions:{allowInvalid:!0},validationMessage:{302:t.getLocalizedCustom("Required"),payPeriodStartDate:function(){return t.getLocalizedCustom("Start Date can not be after the End Date")},dateBetweenMonths:a.dateBetweenMonths.message(x.payPeriodStartMonth,x.payPeriodEndMonth)},$validators:{payPeriodStartDate:function(e){return!e||!x.model.payPeriodEndDate||a.beforeDate.validator(e,x.model.payPeriodEndDate)},dateBetweenMonths:function(e){return a.dateBetweenMonths.validator(e,x.payPeriodStartMonth,x.payPeriodEndMonth)}}},{type:"date",htmlClass:"col s2 m2 l2",key:"payPeriodEndDate",onChange:function(t){t&&x.model.payPeriodStartDate&&(t.getTime()>=x.model.payPeriodStartDate.getTime()?e.basicReportDetailsForm.$valid||(e.$broadcast("schemaForm.error.payPeriodStartDate","payPeriodStartDate",!0),e.$broadcast("schemaForm.error.payPeriodStartDate","schemaForm",!0)):e.$broadcast("schemaForm.error.payPeriodStartDate","payPeriodStartDate",!1))},ngModelOptions:{allowInvalid:!0},validationMessage:{302:t.getLocalizedCustom("Required"),payPeriodEndDate:function(){return t.getLocalizedCustom("End Date cannot be before the Start Date")},payPeriodEndDateYear:function(){return t.getLocalizedCustom("End Date needs to be within the same year as the Start Date")},dateBetweenMonths:a.dateBetweenMonths.message(x.payPeriodStartMonth,x.payPeriodEndMonth)},$validators:{payPeriodEndDate:function(e){return!e||!x.model.payPeriodStartDate||a.afterDate.validator(e,x.model.payPeriodStartDate)},payPeriodEndDateYear:function(e){if(e&&x.model.payPeriodStartDate){var t=e.getFullYear(),a=x.model.payPeriodStartDate.getFullYear();return t===a}return!0},dateBetweenMonths:function(e){return a.dateBetweenMonths.validator(e,x.payPeriodStartMonth,x.payPeriodEndMonth)}}}]},{type:"section",htmlClass:"row",items:[{type:"separator",htmlClass:"sub-section-separator",key:"separator"}]},{type:"section",htmlClass:"row",items:[{type:"structured-label-radios",key:"c1",titleMap:x.formData.c1.titleMap,excludeRequiredIndicator:!0,labelSectionClass:"col s9 s9 s9 ",radioSectionClass:"col s2 m2 l2 offset-l1",validationMessage:{302:t.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row",items:[{type:"separator",htmlClass:"sub-section-separator",key:"separator"}]},{type:"section",htmlClass:"row",items:[{type:"structured-label-radios",key:"c2",titleMap:x.formData.c2.titleMap,excludeRequiredIndicator:!0,labelSectionClass:"col s9 s9 s9 ",radioSectionClass:"col s2 m2 l2 offset-l1",validationMessage:{302:t.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row",items:[{type:"separator",htmlClass:"sub-section-separator",key:"separator"}]},{type:"section",htmlClass:"row",items:[{type:"structured-label-radios",labelSectionClass:"col s9 s9 s9 ",radioSectionClass:"col s2 m2 l2 offset-l1",key:"c3",titleMap:x.formData.c3.titleMap,excludeRequiredIndicator:!0,validationMessage:{302:t.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s4 m4 l4",key:"dunsNumber",ngModelOptions:{allowInvalid:!0},onChange:function(e){b(e)},condition:function(){return"Yes"===x.model.c3},validationMessage:{302:t.getLocalizedCustom("Required"),dunsNumber:function(){return t.getLocalizedCustom("Invalid DUN and Bradstreet Identification Number")},required:t.getLocalizedCustom("Required")},$validators:{dunsNumber:function(e){var t=/^[0-9]+$/,a=/^.{9}$/;return!!(!e||e.match(t)&&e.match(a))}}}]},{type:"section",htmlClass:"row",items:[{type:"separator",htmlClass:"sub-section-separator",key:"separator"}]},{type:"section",htmlClass:"row",items:[{htmlClass:"col s m4 l4",type:"help",helpvalue:"<em>*</em> "+t.getLocalizedCustom("Required Field")},{type:"rounded-button",htmlClass:"label-button btn right",postIcon:"arrow_forward",title:"Save & Continue",onClick:function(){C()}}]}]}function b(t){t?e.$broadcast("schemaForm.error.dunsNumber","required",!0):e.$broadcast("schemaForm.error.dunsNumber","required",!1)}function C(t,a){a?w(t):n.hasEEOEnabledLocations().then(function(i){if(!i)return T(),!1;var o=e.basicReportDetailsForm;b(x.model.dunsNumber),e.$broadcast("schemaFormValidate"),(o.$valid||a)&&w(t)})}function w(t){var a=_();e.$emit("saveEeoFiling",{model:a,step:t})}function _(){var e=x.initialModel.basic;return e.companyNumber=x.model.companyNumber,e.ein=x.model.ein,e.payPeriodStartDate=S(x.model.payPeriodStartDate),e.payPeriodEndDate=S(x.model.payPeriodEndDate),e.c1=x.model.c1,e.c2=x.model.c2,e.c3=x.model.c3,"Yes"===x.model.c3?e.dunsNumber=x.model.dunsNumber:e.dunsNumber=void 0,x.initialModel.basic=e,x.initialModel}function S(e){return"object"==typeof e&&(e=l.toStandardDate(e)),e}function D(){return c.call("eeoFilingConfigurations","GET",[],{})}function T(){t.errorToast("At Least One Location Needs to Be EEO Enabled")}var x=this;x.save=C,e.$on("stepChange",m),x.formData={},x.defaultModel={},x.currentModel={},x.initialModel={},x.payPeriodStartMonth=10,x.payPeriodEndMonth=12,u()}angular.module("app.admin").controller("EEOFilingBasicReportDetailsController",e),e.$inject=["$scope","localizedMessages","formValidationHelper","EEOFilingConstants","$localStorage","EEOFilingService","dateService","formHelper","$q","webservice","$state"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(e,t){A(t.step,t.skipValidate)}function p(){f();var e={naicsCodes:N(R.currentModel.naicsCode),states:O()};l.all(e).then(function(e){R.naicsCodes=e.naicsCodes.data.data,R.naicsCodes.forEach(function(e){e.title=e.code+" - "+t.getLocalizedCustom(e.title)}),R.states=e.states.data.data,y(),b(),v()})}function f(){o[i.EEO_FILING_MODEL_KEY]?R.currentModel=g():R.currentModel=R.defaultModel}function g(){R.initialModel=o[i.EEO_FILING_MODEL_KEY];var e=R.initialModel.establishments[R.locationId];return R.companyNumber=R.initialModel.basic.companyNumber,e||(e={},R.initialModel.establishments[R.locationId]={}),h(e)}function h(e){var t={};return t.location=e.location?e.location:"0",t.reportType=e.reportType?e.reportType:"1",t.unitNumber=R.companyNumber,t.c4=e.c4,t.naicsCode=e.naicsCode,t.street1=e.street1,t.street2=e.street2,t.city=e.city,t.state=e.state,t.zipCode=e.zipCode,t.name=e.name,t.title=e.title,t.phone=e.phone,t.email=e.email,t}function v(){var e={organizationGeneralInformation:n.getOrganizationGeneralInformation()};l.all(e).then(function(e){if(void 0===R.model.street1&&(R.model.street1=e.organizationGeneralInformation.street1?e.organizationGeneralInformation.street1:R.defaultModel.street1),void 0===R.model.street2&&(R.model.street2=e.organizationGeneralInformation.street2?e.organizationGeneralInformation.street2:R.defaultModel.street2),void 0===R.model.city&&(R.model.city=e.organizationGeneralInformation.city?e.organizationGeneralInformation.city:R.defaultModel.city),void 0===R.model.state){var t=_.result(_.find(R.states,function(t){return t.title.toLowerCase().trim()===e.organizationGeneralInformation.province.toLowerCase().trim()}),"code");t?R.model.state=t:R.model.state=R.defaultModel.state}R.validDefaultZipCode=!0,void 0===R.model.zipCode&&(R.model.zipCode=e.organizationGeneralInformation.zipCode?e.organizationGeneralInformation.zipCode:R.defaultModel.zipCode,R.model.zipCode&&n.validateZipCode(angular.copy(R.model.zipCode)).then(function(e){R.validDefaultZipCode=e}))})}function y(){R.formData={location:r.getEnumAndTitleMapForSelect([{name:"All EEO enabled locations",value:"0"}],{name:"name",value:"value"}),reportType:r.getEnumAndTitleMapForSelect([{name:"1 - Single Establishment Employer Report",value:"1"}],{name:"name",value:"value"}),c4:r.getEnumAndTitleMapForSelect([{name:"Yes",value:"Yes"},{name:"No",value:"No"}],{name:"name",value:"value"}),naicsCode:r.getEnumAndTitleMapForSelect(R.naicsCodes,{name:"title",value:"code"}),state:r.getEnumAndTitleMapForSelect(R.states,{name:"title",value:"code"})}}function b(){R.model=R.currentModel,C(),R.schema={type:"object",properties:{location:{title:"Location",type:"string","enum":R.formData.location["enum"]},reportType:{title:"Type of Report",type:"string","enum":R.formData.reportType["enum"]},unitNumber:{title:"Unit Number",type:"string",maxLength:7},c4:{title:n.getStructuredEEOQuestionLabels("c4"),type:"string","enum":R.formData.c4["enum"]},naicsCode:{title:"NAICS Code",type:"string"},street1:{title:"Street 1",type:"string",maxLength:34},street2:{title:"Street 2",type:"string",maxLength:25},city:{title:"City",type:"string",maxLength:20},state:{title:"State",type:"string","enum":R.formData.state["enum"]},zipCode:{title:"Zip Code",type:"string"},name:{title:"Name",type:"string",maxLength:35},title:{title:"Title",type:"string",maxLength:35},phone:{title:"Phone",type:"string"},email:{title:"Email",type:"string",maxLength:40}},required:["location","reportType","unitNumber","c4","naicsCode","street1","city","state","zipCode","name","title","phone"]},R.form=[{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s4 m4 l4",key:"location",emptyOption:!1,titleMap:R.formData.location.titleMap,validationMessage:{302:t.getLocalizedCustom("Required")}},{type:"select",htmlClass:"col s4 m4 l4",key:"reportType",emptyOption:!1,titleMap:R.formData.reportType.titleMap,validationMessage:{302:t.getLocalizedCustom("Required")}},{type:"text",htmlClass:"col s2 m2 l2",key:"unitNumber",readonly:!0,validationMessage:{302:t.getLocalizedCustom("Required"),201:a.textLengthExceedValidation.message(R.schema.properties.unitNumber.maxLength),alphanumeric:a.alphanumeric.message},$validators:{alphanumeric:function(e){return a.alphanumeric.validator(e)}}}]},{type:"section",htmlClass:"row",items:[{type:"separator",htmlClass:"sub-section-separator",key:"separator"}]},{type:"section",htmlClass:"row",items:[{type:"structured-label-radios",key:"c4",excludeRequiredIndicator:!0,titleMap:R.formData.c4.titleMap,labelSectionClass:"col s7 m7 l7",radioSectionClass:"col s4 m4 l4 offset-l1",validationMessage:{302:t.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row",items:[{type:"separator",htmlClass:"sub-section-separator",key:"separator"}]},{type:"section",htmlClass:"row",items:[{type:"generic-auto-complete",htmlClass:"col s8 m8 l8",key:"naicsCode","text-searching":"Searching...","text-no-results":"No results found",titleField:"name",searchFields:"name",initialValue:$(),fetchItemsCallback:function(e){return l(function(a,i){return N(e).then(function(i){R.naicsCodes=i.data.data,R.naicsCodes.forEach(function(e){e.title=e.code+" - "+t.getLocalizedCustom(e.title)}),R.formData.naicsCode=r.getEnumAndTitleMapForSelect(R.naicsCodes,{name:"title",value:"code"});var o=_.filter(R.formData.naicsCode.titleMap,function(t){return(t.value+" - "+t.name.toLowerCase()).indexOf(e.toLowerCase())!==-1});a(o)})})},onInputChange:function(t){t?e.$broadcast("schemaForm.error.naicsCode","required",!1):(R.model.naicsCode="",e.$broadcast("schemaForm.error.naicsCode","required",!0))},objectSelectedCallback:function(t){t&&(R.model.naicsCode=t.originalObject.value,e.$broadcast("schemaForm.error.naicsCode","required",!0))},validationMessage:{302:t.getLocalizedCustom("Required"),required:t.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row",items:[{type:"label",htmlClass:"col s12 m12 l12 eeo-section-header",text:t.getLocalizedCustom("Address")}]},{type:"section",htmlClass:"row",items:[{type:"separator",htmlClass:"section-separator",key:"separator"}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s8 m8 l8",key:"street1",ngModelOptions:{allowInvalid:!0},onChange:function(t){e.$broadcast("schemaForm.error.street1","additionalLengthValidation",!0)},validationMessage:{302:t.getLocalizedCustom("Required"),201:a.textLengthExceedValidation.message(R.schema.properties.street1.maxLength),additionalLengthValidation:a.textLengthExceedValidation.message(R.schema.properties.street1.maxLength)}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s8 m8 l8",key:"street2",ngModelOptions:{allowInvalid:!0},onChange:function(t){e.$broadcast("schemaForm.error.street2","additionalLengthValidation",!0)},validationMessage:{201:a.textLengthExceedValidation.message(R.schema.properties.street2.maxLength),additionalLengthValidation:a.textLengthExceedValidation.message(R.schema.properties.street2.maxLength)}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s4 m4 l4",key:"city",ngModelOptions:{allowInvalid:!0},onChange:function(t){e.$broadcast("schemaForm.error.city","additionalLengthValidation",!0)},validationMessage:{302:t.getLocalizedCustom("Required"),201:a.textLengthExceedValidation.message(R.schema.properties.city.maxLength),additionalLengthValidation:a.textLengthExceedValidation.message(R.schema.properties.city.maxLength)}},{type:"select",htmlClass:"col s4 m4 l4",key:"state",titleMap:R.formData.state.titleMap,onChange:function(e){x(e)},validationMessage:{302:t.getLocalizedCustom("Required"),required:function(){return t.getLocalizedCustom("Required")}},ngModelOptions:{allowInvalid:!0}},{type:"text",htmlClass:"col s2 m2 l2",key:"zipCode",ngModelOptions:{allowInvalid:!0},onChange:function(t){R.validDefaultZipCode=!0,e.$broadcast("schemaForm.error.zipCode","additionalInvalidValidation",!0)},validationMessage:{302:t.getLocalizedCustom("Required"),zipCodeUS:function(){return t.getLocalizedCustom("Invalid Zip Code")},additionalInvalidValidation:t.getLocalizedCustom("Invalid Zip Code")},$asyncValidators:{"tv4-zipCodeUS":function(e){var t=l.defer();return e?n.validateZipCode(e).then(function(e){e?t.resolve():t.reject()}):c(function(){t.resolve()}),t.promise}}}]},{type:"section",htmlClass:"row",items:[{type:"label",htmlClass:"col s12 m12 l12 eeo-section-header",text:t.getLocalizedCustom("Certifying Official")}]},{type:"section",htmlClass:"row",items:[{type:"separator",htmlClass:"section-separator",key:"separator"}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s4 m4 l4",key:"name",validationMessage:{302:t.getLocalizedCustom("Required"),201:a.textLengthExceedValidation.message(R.schema.properties.name.maxLength)}},{type:"text",htmlClass:"col s4 m4 l4",key:"title",validationMessage:{302:t.getLocalizedCustom("Required"),201:a.textLengthExceedValidation.message(R.schema.properties.title.maxLength)}},{type:"phone",htmlClass:"col s2 m2 l2",key:"phone",onBlur:function(){C()},onFocus:function(){w()},onChange:function(e){D(e)},ngModelOptions:{allowInvalid:!0},validationMessage:{302:t.getLocalizedCustom("Required"),maxLength:a.numericLengthExceedValidation.message(10),phoneNumber:function(){return t.getLocalizedCustom("Invalid Phone Number")}}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s4 m4 l4",key:"email",validationMessage:{201:a.textLengthExceedValidation.message(R.schema.properties.email.maxLength),email:function(){return t.getLocalizedCustom("Invalid Email")}},$validators:{email:function(e){return a.email.validator(e)}}}]},{type:"section",htmlClass:"row",items:[{type:"separator",htmlClass:"sub-section-separator",key:"separator"}]},{type:"section",htmlClass:"row",items:[{htmlClass:"col s m4 l4",type:"help",helpvalue:"<em>*</em> "+t.getLocalizedCustom("Required Field")},{type:"rounded-button",htmlClass:"label-button btn right",postIcon:"arrow_forward",title:"Save & Continue",onClick:function(){A()}}]}]}function C(){var e=angular.copy(R.model.phone);e&&10===e.length&&(R.model.phone="("+e.substr(0,3)+")"+e.substr(3,3)+"-"+e.substr(6,4))}function w(){var e=angular.copy(R.model.phone);e&&(R.model.phone=S(e))}function S(e){return e?e.replace(/[^0-9\.]+/g,""):e}function D(t){if(t){var a=/^[0-9]*$/;!t||t.match(a)&&t.length>=10?e.$broadcast("schemaForm.error.phone","phoneNumber",!0):e.$broadcast("schemaForm.error.phone","phoneNumber",!1),t.length>10?e.$broadcast("schemaForm.error.phone","maxLength",!1):e.$broadcast("schemaForm.error.phone","maxLength",!0)}else e.$broadcast("schemaForm.error.phone","phoneNumber",!0),e.$broadcast("schemaForm.error.phone","maxLength",!0)}function T(){var e=!0;if(R.model){var t=S(angular.copy(R.model.phone)),a=/^[0-9]*$/;e=!(!t||10!==t.length||!t.match(a))}return e}function x(t){t?e.$broadcast("schemaForm.error.state","required",!0):e.$broadcast("schemaForm.error.state","required",!1)}function F(t){R.model&&R.model[t]&&R.model[t].length>R.schema.properties[t].maxLength&&e.$broadcast("schemaForm.error."+t,"additionalLengthValidation",!1)}function k(e){var t=!0;return R.model&&(t=!!(R.model[e]&&R.model[e].length<=R.schema.properties[e].maxLength)),
t}function E(){R.model&&R.model.zipCode&&!R.validDefaultZipCode&&e.$broadcast("schemaForm.error.zipCode","additionalInvalidValidation",!1)}function I(){x(R.model.state),F("street1"),F("street2"),F("city"),E()}function A(t,a){if(a)M(t);else{var i=e.establishmentDetailsForm;e.$broadcast("schemaFormValidate"),I(),(i.$valid||a)&&L(t)}}function M(e){k("street1")||delete R.model.street1,k("street2")||delete R.model.street2,k("city")||delete R.model.city,T()||delete R.model.phone,R.model.zipCode?n.validateZipCode(angular.copy(R.model.zipCode)).then(function(t){t||delete R.model.zipCode,L(e)}):(delete R.model.zipCode,L(e))}function L(t){var a=P();e.$emit("saveEeoFiling",{model:a,step:t})}function P(){var e={};return e.location=R.model.location,e.reportType=R.model.reportType,e.unitNumber=R.model.unitNumber,e.c4=R.model.c4,e.naicsCode=R.model.naicsCode,e.street1=R.model.street1,e.street2=R.model.street2,e.city=R.model.city,e.state=R.model.state,e.zipCode=R.model.zipCode,e.name=R.model.name,e.title=R.model.title,e.phone=S(R.model.phone),e.email=R.model.email,R.initialModel.establishments[R.locationId]=e,R.initialModel}function $(){var e=_(R.formData.naicsCode.titleMap).where({value:R.currentModel.naicsCode}).valueOf();return e.length>0?e[0]:null}function N(e){var t={filter:{naics_code_title:e},limit:50};return s.call("naicsCodes","GET",[],t)}function O(){return s.call("states/US","GET",[],{})}var R=this;if(R.save=A,m&&d){var z=n.getStepIdFromState(m.current.name,parseInt(d.locationId));n.reinitiateInUrlChange(z)}e.$on("stepChange",u),R.locationId=d.locationId,R.formData={},R.defaultModel={location:"0",reportType:"1",street1:void 0,street2:void 0,city:void 0,state:"",zipCode:void 0},R.currentModel={},R.initialModel={},R.naicsCodes=[],R.states=[],p()}angular.module("app.admin").controller("EEOFilingEstablishmentDetailsController",e),e.$inject=["$scope","localizedMessages","formValidationHelper","EEOFilingConstants","$localStorage","EEOFilingService","$q","formHelper","webservice","$timeout","$stateParams","$state"]}(),function(){"use strict";angular.module("app.admin").constant("EEOFilingConstants",{EEO_FILING_MODEL_KEY:"eeoFilingModel",EEO_FILING_CURRENT_STEP_ID_KEY:"eeoFilingCurrentStepId"})}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c){function d(){var e=1,t=[];t.push({stepId:1,title:"Basic Report Details",screen:"admin.eeo_filing_wizard.eeo_filing_wizard_basic_report_details"});for(var a=0;a<e;a++)t.push({stepId:t.length+1,title:"Establishment Details",screen:"admin.eeo_filing_wizard.eeo_filing_wizard_establishment_details",locationId:0});return t.push({stepId:t.length+1,title:"Summary",screen:"admin.eeo_filing_wizard.eeo_filing_wizard_summary"}),t}function m(e,t){var a=d();return"undefined"!=typeof t?_.result(_.find(a,{screen:e,locationId:t}),"stepId"):_.result(_.find(a,{screen:e}),"stepId")}function u(e){r[c.EEO_FILING_CURRENT_STEP_ID_KEY]!==e&&(r[c.EEO_FILING_CURRENT_STEP_ID_KEY]=null,s.go("admin.eeo_filing_wizard.eeo_filing_wizard_basic_report_details",{},{reload:!0}))}function p(e){var t="";switch(e){case"c1":t='<span class="structured-radio-question"><span class="bold-eeo-label question-id">C1</span> - <span class="indented-question">'+l.getLocalizedCustom("Does the entire company have at least 100 employees employed in the payroll period which you are reporting")+'?<em class="required-indicator">*</em></span></span>';break;case"c2":t='<span class="structured-radio-question"><span class="bold-eeo-label question-id">C2</span> - <span class="indented-question">'+l.getLocalizedCustom("Is your company affiliated through common ownership and/or centralized management with other entities in an enterprise with a total employment of 100 or more")+'?<em class="required-indicator">*</em></span></span>';break;case"c3":t='<span class="structured-radio-question"><span class="bold-eeo-label question-id">C3</span> - <span class="indented-question">'+l.getLocalizedCustom("Does the company or any of its establishments")+";<br/> (a) "+l.getLocalizedCustom("Have 50 or more employees")+' <span class="bold-eeo-label">'+l.getLocalizedCustom("AND")+"</span><br/> (b) "+l.getLocalizedCustom("Is not exempt as provided by 41 CFR 60-1.5")+', <span class="bold-eeo-label">'+l.getLocalizedCustom("AND")+"</span> "+l.getLocalizedCustom("either")+';<br/><span class="indented-sub-section"><span class="sub-question"> (i) <span class="indented-question">'+l.getLocalizedCustom("Is a prime government contractor or first-tier subcontractor, and has a contract, subcontract, or purchase order amounting to $50,000 or more")+'?</span></span><br/><span class="bold-eeo-label">'+l.getLocalizedCustom("OR")+'</span><br/> <span class="sub-question">(ii)  <span class="indented-question">'+l.getLocalizedCustom("Serves as a depository of Government funds in any amount or is a financial institution which is an issuing and paying agent for U.S Savings Bonds and Savings Notes")+'?<em class="required-indicator">*</em></span></span></span></span></span>';break;case"c4":t='<span class="bold-eeo-label"></span> '+l.getLocalizedCustom("Was an EEO-1 Component 1 report filed for this establishment last year")+'?<em class="required-indicator">*</em>'}return t}function f(){return a(function(t,a){return e.call("organization","GET",[],{}).then(function(e){t(e.data.data)})})}function g(t){return e.call("eeoReportCriteria","PATCH",t,{})}function h(){return e.call("eeoReportCriteria","GET",[],{}).then(function(e){return e.data.data})}function v(t){var a={filter:{zipCode:t}};return e.call("zipCodes/US","GET",[],a).then(function(e){return e.data.data.length>0})}function y(){return e.call("locations","GET",[],{}).then(function(e){var t=e.data.data,a=_.filter(t,{eeo_applicable:"1"});return a.length>0})}function b(a){var i=t.baseUrl+"api/exportEEOReport?reportKey=";e.call("exportEEOReport","PATCH",a,{}).then(function(e){e.data&&e.data.messages&&C(e.data.messages),e.data&&e.data.reportKey&&(i+=e.data.reportKey,window.location.href=i)},function(e){400===e.status&&e.data&&l.errorToast(e.data)})}function C(e){for(var t=0;t<e.length;t++)"info"===e[t].type&&l.infoToast(e[t].content),"warning"===e[t].type&&l.warningToast(e[t].content)}return{getEEOFilingSteps:d,getStructuredEEOQuestionLabels:p,getOrganizationGeneralInformation:f,saveEEOReportCriteria:g,fetchEEOReportCriteria:h,exportEEOFilingCSV:b,validateZipCode:v,hasEEOEnabledLocations:y,getStepIdFromState:m,reinitiateInUrlChange:u}}angular.module("app.admin").service("EEOFilingService",e),e.$inject=["webservice","LOGIN","$q","ModalService","titleService","performanceConstants","localizedMessages","$sessionStorage","$state","EEOFilingConstants"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r){function s(e,t){p(t.step)}function c(){d(),u(),m()}function d(){o[i.EEO_FILING_MODEL_KEY]&&(g.initialModel=o[i.EEO_FILING_MODEL_KEY])}function m(){var e={organizationGeneralInformation:n.getOrganizationGeneralInformation()};l.all(e).then(function(e){g.companyName=e.organizationGeneralInformation.name})}function u(){g.title="EEO Reports",g.reportType="Single Establishment Report"}function p(t){e.$emit("saveEeoFiling",{model:g.initialModel,step:t})}function f(){e.$emit("generateEEOFiling",{model:g.initialModel})}var g=this;if(g.save=p,g.generateEEOFiling=f,r){var h=n.getStepIdFromState(r.current.name);n.reinitiateInUrlChange(h)}e.$on("stepChange",s),g.summaryData={},g.initialModel={},c()}angular.module("app.admin").controller("EEOFilingSummaryController",e),e.$inject=["$scope","localizedMessages","formValidationHelper","EEOFilingConstants","$localStorage","EEOFilingService","$q","$state"]}(),function(){"use strict";function e(e,t,a){function i(e){t.$broadcast("stepChangeFromCustomTopRibbon",{step:e})}function o(e){return e.stepId<s.maxStepVisited}function n(e){return e.stepId>s.currentStepId}function l(e){return e.stepId===s.currentStepId}function r(e){return e.stepId<=s.maxStepVisited}var s=this;s.currentStepId=1,s.steps=[],s.stepChange=i,s.maxStepVisited=1,s.itemIsDone=o,s.itemIsTodo=n,s.itemIsCurrent=l,s.itemIsVisited=r,t.$on("eeoFilingWizardPageChanged",function(e,t){a(function(){s.currentStepId=t.currentStepId,s.currentStep=t.currentStep,s.steps=t.steps,s.maxStepVisited=t.maxStepVisited})})}angular.module("app.admin").controller("EEOFilingCustomTopRibbonController",e),e.$inject=["$scope","$rootScope","$timeout"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){s.show();var e={permission:d.getPermission("admin_process_eeo_filling").then(function(e){return e.read?e:c.reject({statusText:"Forbidden",status:403})})};c.all(e).then(function(e){F.steps=l.getEEOFilingSteps(),f(),p(F.currentStepId)},function(e){403===e.status&&t.go("403")})["finally"](function(){s.hide()})}function p(e){F.currentStepId=e,F.currentStep=_.find(F.steps,{stepId:e}),n.$broadcast("eeoFilingWizardPageChanged",{currentStepId:F.currentStepId,currentStep:F.currentStep,steps:F.steps,maxStepVisited:F.maxStepVisited}),m[i.EEO_FILING_CURRENT_STEP_ID_KEY]=F.currentStepId,t.go(F.currentStep.screen,{locationId:F.currentStep.locationId},{location:"replace"}).then(function(){f()})}function f(){e.setForcedTitle(["HR Administration","Organization","Process EEO Filing"])}function g(e){r[i.EEO_FILING_MODEL_KEY]=e}function h(e,t){var a=T(t.model),i=w(t.step);i?v(a,i):y(a)}function v(e,t){s.show(),l.saveEEOReportCriteria(e).then(function(){g(e),b(t)})["finally"](function(){s.hide()})}function y(e){s.show(),l.saveEEOReportCriteria(e).then(function(){g(e),C()})["finally"](function(){s.hide()})}function b(e){p(e)}function C(){F.currentStepId<F.steps.length&&(S(F.currentStepId+1),p(F.currentStepId+1))}function w(e){var t=null;return e&&(t=e.stepId),t}function S(e){F.maxStepVisited<e&&(F.maxStepVisited=e)}function D(e,t){l.exportEEOFilingCSV(t.model)}function T(e){var t=angular.copy(e);t.establishments={},t.basic.dunsNumber||delete t.basic.dunsNumber;for(var a in e.establishments)e.establishments[a].email||delete e.establishments[a].email,e.establishments[a].street2||delete e.establishments[a].street2,""===e.establishments[a].naicsCode&&delete e.establishments[a].naicsCode,t.establishments[a]=e.establishments[a];return t}function x(e){if(F.showStepper=!1,e&&e.stepId<=F.maxStepVisited){if(e.stepId===F.currentStepId)return!1;var t=!1;F.maxStepVisited===F.currentStepId&&(t=!0),a.$broadcast("stepChange",{step:e,skipValidate:t})}}var F=this;F.currentStepId=1,m[i.EEO_FILING_CURRENT_STEP_ID_KEY]=void 0,F.maxStepVisited=1,F.stepChange=x,a.$on("saveEeoFiling",h),a.$on("generateEEOFiling",D),a.$on("stepChangeFromCustomTopRibbon",function(e,t){x(t.step),f()}),u()}angular.module("app.admin").controller("EEOFilingWizardController",e),e.$inject=["titleService","$state","$scope","EEOFilingConstants","LOGIN","$rootScope","EEOFilingService","$localStorage","loader","$q","datagroupPermissions","$sessionStorage"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g){function h(){$(".material-tooltip").remove(),u.getPermissions().then(function(t){if(B.permissions=t.event_notification,B.permissions.read){var i=[];i[0]=m.getNotificationById(B.id);var n={};n.filter={has_work_email:1},i[1]=e.call("employees","GET",[],n);var r={};r.filter={is_assignable:"1"},i[2]=e.call("userRoles","GET",[],r),i[3]=m.getSubscriptions(B.id),i[4]=m.getSubscribers(B.id),i[5]=m.getNotificationTemplates(B.id),a.all(i).then(function(e){B.notification=e[0],B.notificationTypeId=e[0].type_id,j=null!==JSON.parse(B.notification.parameters)&&JSON.parse(B.notification.parameters).email_subscriber_schedule,3==B.notificationTypeId&&(B.formModel.scheduleFrequency="D",B.formModel.scheduleDays="1"),2==B.notificationTypeId&&(B.formModel.notifyBefore=""),B.employeeItems=l.getItemsForMultyselectAutocomplete(e[1].data.data,function(e){return{id:e.empNumber,name:e.firstName+" "+e.lastName,employeeId:e.employeeId}}),B.adminRoles=l.getItemsForMultyselectAutocomplete(v(e[2].data.data,N),{}),B.supervisorRoles=l.getItemsForMultyselectAutocomplete(v(e[2].data.data,R),{}),B.essRoles=l.getItemsForMultyselectAutocomplete(v(e[2].data.data,O),{}),B.availableSubscriptions=e[3],G=e[4],angular.forEach(G,function(e,t){"Email"==e.type&&V.push(e.email.toLowerCase())}),g.setForcedTitle(["HR Administration","Configurations","Email Notifications",o.instant(B.notification.name)+" - "+o.instant("Subscribers")]),m.getNotificationExtraRoles(B.notification).then(function(e){B.extraRoles=e,B.otherRoles=l.getItemsForMultyselectAutocomplete(v(B.extraRoles,null),{}),B.formModel.otherRolesAvailable=B.otherRoles.length>0,B.formModel.showNotifyAffectedUser=1==B.notification.type_id&&B.notification.notifyAffectedUserOptionVisible,B.extraFields=m.getExtraNotificationFields(B.notification),C(),y(),E()}),B.templatesItems=e[5],s.$on("set-template-add",function(e,t){for(var a=t,i=0;i<B.workFlowItems.length;i++)B.workFlowItems[i].subscribed&&(B.workFlowItems[i].template=a)})})}else c.go("403")})}function v(e,a){var i=[];a==R&&e.push({id:z,display_name:"Default Supervisor",typeId:R}),e=e.sort(function(e,t){return e.typeId!=a||"Global Admin"!=e.display_name&&"Default ESS"!=e.display_name&&"Default Supervisor"!=e.display_name?t.typeId!=a||"Global Admin"!=t.display_name&&"Default ESS"!=t.display_name&&"Default Supervisor"!=t.display_name?0:1:-1});for(var o=0;o<e.length;o++){var n=e[o];null!==a&&n.typeId!=a||i.push({id:n.id,name:t.getLocalizedCustom(n.display_name)})}return i}function y(){var e=[{key:"viewRole",label:"Performed By"},{key:"viewState",label:"Initial State"},{key:"resultingState",label:"Resulting State"},{key:"subscribed",label:"Notify"}],t=["20%","20%","20%","20%","20%"],a=[],i=[],o=[];B.listData={name:"Advanced Subscription Settings",selectable:!1,selected:[],idGetter:["id"],listFields:e,extraTH:i,extraTD:o,showColumnsAnyway:!0,permission:B.permissions,columnWidths:t,listActions:a}}function b(){p.showModal({templateUrl:"app/admin/emailSubscriptions/set-template-all.html",controller:"AdminSetTemplateAllController",controllerAs:"modal",inputs:{templateItems:B.templatesItems,mode:"add"}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function C(){if(B.formSchema={type:"object",title:"Add Subscribers",name:"add_subscribers_form",properties:{employees:{title:o.instant("Employees (with work email)"),type:"object"},adminRoles:{title:o.instant("Admin Roles"),type:"object"},supervisorRoles:{title:o.instant("Supervisor Roles"),type:"object"},supervisorChain:{title:"Notify",type:"string","enum":["0","1"]},essRoles:{title:o.instant("ESS Roles"),type:"object"},otherRoles:{title:o.instant("Other Roles"),type:"object"},notifyAffectedUser:{title:"Send Notification to Affected Employee",type:"boolean"},addOtherEmails:{title:"Email Addresses",type:"boolean"},otherEmail_name1:{title:"Name",type:"string",maxLength:100},otherEmail_email1:{title:"Email",type:"string",maxLength:100},addressPart:{title:"Include In",type:"string","enum":["To","Cc"]},scheduleFrequency:{title:"Schedule",type:"string","enum":["D","W"]},scheduleDays:{title:"On",type:"string","enum":["1","2","3","4","5","6","7"]},affectedEmployee:{title:"Notify When the Affected Employee is",type:["null","object"]},notifyAffectedEmployee:{title:"Send Notification to Affected Employee",type:"boolean"},notifyBefore:{title:"When to Notify",type:"string","enum":l.getEnumAndTitleMapForSelect(A())["enum"]},template:{title:o.instant("Template"),type:"string","enum":l.getEnumAndTitleMapForSelect(B.templatesItems)["enum"]},exclusions:{title:o.instant("Exclude Employees (with work email)"),type:"object"}},required:["otherEmail_name1","template","otherEmail_email1","notifyBefore"]},B.form=[{type:"section",htmlClass:"row",items:[{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l12",key:"employees",choices:B.employeeItems}]},{type:"section",htmlClass:"row",items:[{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l4",key:"adminRoles",choices:B.adminRoles,sorting:!1},{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l4",key:"supervisorRoles",choices:B.supervisorRoles,sorting:!1},{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l4",key:"essRoles",choices:B.essRoles,sorting:!1}]},{type:"section",htmlClass:"row",items:[{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l4",key:"otherRoles",choices:B.otherRoles,condition:"model.otherRolesAvailable"},{type:"radiobuttons",htmlClass:"col s12 m12 l8",key:"supervisorChain",titleMap:[{value:"0",name:t.getLocalizedCustom("Immediate Supervisors Only")},{value:"1",name:t.getLocalizedCustom("Entire Supervisor Chain")}],condition:"!model.objectEmpty(model.supervisorRoles)"}]},{type:"section",htmlClass:"row",items:[{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l12",key:"exclusions",choices:B.employeeItems,condition:"!model.objectEmpty(model.supervisorRoles) || !model.objectEmpty(model.adminRoles) || !model.objectEmpty(model.essRoles) || !model.objectEmpty(model.otherRoles) || model.notifyAffectedEmployee || model.notifyAffectedUser"}]},{type:"section",htmlClass:"compact-section row",items:[{type:"checkbox",htmlClass:"col s12 m12 l4",key:"addOtherEmails",onChange:function(){s.$broadcast("schemaFormRedraw")}},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l3",key:"otherEmail_name1",condition:"model.addOtherEmails",validationMessage:{302:t.getLocalizedCustom("Required"),201:r.textLengthExceedValidation.message(B.formSchema.properties.otherEmail_name1.maxLength)}},{type:"text",htmlClass:"col s12 m12 l3 offset-l1",key:"otherEmail_email1",condition:"model.addOtherEmails",validationMessage:{email:t.getLocalizedCustom("Expected format: admin@example.com"),302:t.getLocalizedCustom("Required"),201:r.textLengthExceedValidation.message(B.formSchema.properties.otherEmail_email1.maxLength),uniqueEmail:t.getLocalizedCustomWithVariables("Email should be unique"),existEmail:t.getLocalizedCustomWithVariables("Email Already Exist")},$validators:{email:r.email.validator,uniqueEmail:L,existEmail:P},ngModelOptions:{allowInvalid:!0}},{type:"section",htmlClass:"col s1",items:[{type:"icon",iconName:"add_box",htmlClass:"col s1",otherEmailFieldIndex:1,style:{"margin-top":"10px",cursor:"pointer"},onClick:T,condition:"model.addOtherEmails && addVm.otherEmailFieldIds[1]"}]}]}]},{type:"section",htmlClass:"section",items:[{type:"section",htmlClass:"row section-heading",items:[{type:"section-heading",htmlClass:"col s12",text:o.instant("Subscription Settings")}]},{type:"section",htmlClass:"row",items:[{type:"radiobuttons",htmlClass:"col s12 m12 l4",key:"addressPart",titleMap:[{value:"to",name:"To"},{value:"cc",name:"Cc"}]},{type:"checkbox",htmlClass:"col s12 m12 l4",key:"notifyAffectedUser",condition:"model.showNotifyAffectedUser"},{key:"affectedEmployee",type:"auto-complete",htmlClass:"col s12 m12 l4",placeholder:"All","text-searching":"Searching...","text-no-results":"No results found",condition:"addVm.notificationTypeId==2"},{type:"checkbox",htmlClass:"col s12 m12 l4",key:"notifyAffectedEmployee",condition:"addVm.notificationTypeId==2"},{type:"select",htmlClass:"col s12 m6 l4",key:"scheduleFrequency",emptyOption:!1,titleMap:[{value:"D",name:t.getLocalizedCustom("Daily")},{value:"W",name:t.getLocalizedCustom("Weekly")}],condition:"addVm.notificationTypeId==3",readonly:j},{type:"select",htmlClass:"col s12 m6 l4",key:"scheduleDays",emptyOption:!1,titleMap:[{value:"1",name:t.getLocalizedCustom("Sunday")},{value:"2",name:t.getLocalizedCustom("Monday")},{value:"3",name:t.getLocalizedCustom("Tuesday")},{value:"4",name:t.getLocalizedCustom("Wednesday")},{value:"5",name:t.getLocalizedCustom("Thursday")},{value:"6",name:t.getLocalizedCustom("Friday")},{value:"7",name:t.getLocalizedCustom("Saturday")}],condition:"addVm.notificationTypeId==3 && model.scheduleFrequency=='W'"}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l4",key:"notifyBefore",titleMap:l.getEnumAndTitleMapForSelect(A()).titleMap,condition:"addVm.notificationTypeId==2",validationMessage:{302:t.getLocalizedCustom("Required")}},{type:"select",htmlClass:"col s12 m12 l4",key:"template",titleMap:l.getEnumAndTitleMapForSelect(B.templatesItems).titleMap,condition:"addVm.notificationTypeId != 1",validationMessage:{302:t.getLocalizedCustom("Required")}}]}]}],B.extraFields.length>0)for(var e=0;e<B.extraFields.length;e++){var a=B.extraFields[e],i=a;i=i.replace("_"," "),B.formSchema.properties[a]={title:i,type:"string"},B.formSchema.required.push(a),B.form.push({type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l4",key:a}]})}l.addRequiredMessage(B.form),B.otherEmailFieldIds={1:!0},B.otherEmailFieldCount=1}function w(){c.go("^")}function S(e){if(I(),s.$broadcast("schemaFormValidate"),e.$valid){k();D(B.formModel)}}function D(a){var o={};o.template=a.template,o.addressPart=a.addressPart,o.employees=M(a.employees),o.adminRoles=M(a.adminRoles),o.supervisorRoles=M(a.supervisorRoles),void 0!==a.supervisorChain&&(o.supervisorChain="1"===a.supervisorChain?"on":""),o.essRoles=M(a.essRoles);var l=M(a.otherRoles);if(l.length>0?o.otherRoles=l:delete o.otherRoles,a.addOtherEmails&&(o.emailSubscribers=k()),B.formModel.objectEmpty(o.adminRoles)&&B.formModel.objectEmpty(o.essRoles)&&B.formModel.objectEmpty(o.supervisorRoles)&&B.formModel.objectEmpty(o.otherRoles)&&!B.formModel.notifyAffectedEmployee||(o.exclusions=M(a.exclusions)),1==B.notification.type_id){var r=a.subscribed,s=a.subscribedTemplate,d=[],m={};if(angular.isObject(r))for(var u=Object.keys(r),p=0;p<u.length;p++)if(r[u[p]]){if(B.formModel.templateSettings&&(s[u[p]]=a.template),""==s[u[p]]||void 0==s[u[p]])return void t.warningToast("No Templates Selected");d.push(u[p]),m[u[p]]=s[u[p]]}if(0==d.length)return void t.warningToast("No Subscribers Added");o.subscribedWorkflows=d,o.subscribedTemplateIds=m,B.notification.notifyAffectedUserOptionVisible&&(o.notifyAffectedUser=a.notifyAffectedUser)}else if(2==B.notification.type_id){var f=a.selectedEmployee;angular.isObject(f)&&(o.affectedEmployee=f.empNumber),a.notifyAffectedEmployee&&(o.notifyAffectedEmployee="1"),o.notifyBefore=a.notifyBefore}else 3==B.notification.type_id&&(o.schedule=[a.scheduleFrequency,a.scheduleDays]);if(B.extraFields.length>0){for(var g={},h=0,v=0;v<B.extraFields.length;v++){var y=B.extraFields[v];void 0!==a[y]&&(h++,g[y]=a[y])}h>0&&(o.params=g)}i.show(),e.call("notifications/"+B.id+"/subscribers","POST",o,[]).then(function(e){e.data.data.length>0?(n.$broadcast("subscribers-added"),c.go("^")):(t.warningToast("No Subscribers Added"),i.hide())},function(e){i.hide(),t.errorToast("saveFailure")})}function T(){B.otherEmailFieldCount++,B.otherEmailFieldIds[B.otherEmailFieldCount]=!0;var e={type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s3 l3 offset-l4",key:"otherEmail_name"+B.otherEmailFieldCount,condition:"model.addOtherEmails",validationMessage:{302:t.getLocalizedCustom("Required")}},{type:"text",htmlClass:"col l3 offset-l1",key:"otherEmail_email"+B.otherEmailFieldCount,condition:"model.addOtherEmails",validationMessage:{email:t.getLocalizedCustom("Expected format: admin@example.com"),302:t.getLocalizedCustom("Required"),uniqueEmail:t.getLocalizedCustomWithVariables("Email should be unique"),existEmail:t.getLocalizedCustomWithVariables("Email Already Exist")},$validators:{email:r.email.validator,uniqueEmail:L,existEmail:P},ngModelOptions:{allowInvalid:!0}},{type:"section",htmlClass:"col s1",items:[{type:"icon",iconName:"indeterminate_check_box",htmlClass:"col s1",otherEmailFieldIndex:B.otherEmailFieldCount,style:{"margin-top":"10px",cursor:"pointer"},onClick:x,condition:"model.addOtherEmails"},{type:"icon",iconName:"add_box",htmlClass:"col s1",otherEmailFieldIndex:B.otherEmailFieldCount,style:{"margin-top":"10px",cursor:"pointer"},onClick:T,condition:"model.addOtherEmails  && addVm.otherEmailFieldIds["+B.otherEmailFieldCount+"]"}]}]};B.form[3].items.push(e),B.formSchema.properties["otherEmail_name"+B.otherEmailFieldCount]={title:"Name",type:"string"},B.formSchema.properties["otherEmail_email"+B.otherEmailFieldCount]={title:"Email",type:"string"},B.formSchema.required.push("otherEmail_name"+B.otherEmailFieldCount),B.formSchema.required.push("otherEmail_email"+B.otherEmailFieldCount),F(),s.$broadcast("schemaFormRedraw")}function x(e){for(var t=B.form[3].items,a=!1,i=1;i<t.length;i++)if(e.otherEmailFieldIndex==t[i].items[2].items[0].otherEmailFieldIndex){a=i;break}a&&(B.form[3].items.splice(a,1),delete B.formSchema.properties["otherEmail_name"+e.otherEmailFieldIndex],delete B.formSchema.properties["otherEmail_email"+e.otherEmailFieldIndex],delete B.formSchema.required["otherEmail_name"+e.otherEmailFieldIndex],delete B.formSchema.required["otherEmail_email"+e.otherEmailFieldIndex],delete B.otherEmailFieldIds[e.otherEmailFieldIndex],F(),s.$broadcast("schemaFormRedraw"))}function F(){var e=Object.keys(B.otherEmailFieldIds).reduce(function(e,t){return B.otherEmailFieldIds[e]>B.otherEmailFieldIds[t]?e:t});for(var t in B.otherEmailFieldIds)e==t?B.otherEmailFieldIds[t]=!0:B.otherEmailFieldIds[t]=!1}function k(){var e=[];for(var t in B.otherEmailFieldIds)e.push({name:B.formModel["otherEmail_name"+t],email:B.formModel["otherEmail_email"+t]});return e}function E(){for(var e=[],t=[],a=0;a<B.availableSubscriptions.length;a++){var i=B.availableSubscriptions[a];if(void 0!==i.WorkflowStateMachine){var o=i.WorkflowStateMachine;if(t.indexOf(o.id)===-1){var n=f.getWorkflowItemKey(o);e[n]||(o.subscribed=!0,o.tempKey=n,o.viewRole=f.getFormattedRole(o),o.viewState=f.getFormattedState(o),B.workFlowItems.push(o),e[n]=!0),t.push(o.id),B.formModel.subscribed[o.id]=!0}}}}function I(){var e=B.workFlowItems.filter(function(e){return!!e.subscribed}),t=[],a=[];e.forEach(function(e){t[e.tempKey]=!0,a[e.tempKey]=e.template});for(var i=0;i<B.availableSubscriptions.length;i++){var o=B.availableSubscriptions[i];if(void 0!==o.WorkflowStateMachine){var n=o.WorkflowStateMachine,l=f.getWorkflowItemKey(n);B.formModel.subscribed[n.id]=!!t[l],void 0!==a[l]||""==a[l]?B.formModel.subscribedTemplate[n.id]=a[l]:B.formModel.subscribedTemplate[n.id]=B.formModel.template}}}function A(){var e=B.notifyAfterNotifications.includes(B.notification.name)?"After":"Before";return[{id:"0 DAY",name:"On the Day of Event"},{id:"1 DAY",name:"1 Day "+e},{id:"2 DAY",name:"2 Days "+e},{id:"3 DAY",name:"3 Days "+e},{id:"1 WEEK",name:"1 Week "+e},{id:"2 WEEK",name:"2 Weeks "+e},{id:"3 WEEK",name:"3 Weeks "+e},{id:"1 MONTH",name:"1 Month "+e},{id:"2 MONTH",name:"2 Months "+e},{id:"3 MONTH",name:"3 Months "+e},{id:"6 MONTH",name:"6 Months "+e}]}function M(e){var t=[];return angular.isObject(e)&&(t=Object.keys(e)),t}function L(e,t){var a=_.pick(B.formModel,function(e,t){return _.startsWith(t,"otherEmail_email")});a=_.mapValues(a,function(e){return _.isString(e)?e.toLowerCase():e});var i=e?e.toLowerCase():e,o=_.filter(a,function(e){return e.match(new RegExp("^"+i+"$"))});return!(_.where(o,i).length>1)}function P(e,t){var a=e?e.toLowerCase():e;return!(V.indexOf(a)>=0&&1==B.notificationTypeId)}var N=1,O=2,R=3,z=3,j="",V=[],G=[],B=this;B.id=String(d.id),B.notification,B.notificationTypeId,B.availableSubscriptions,B.extraFields=[],B.workFlowItems=[],B.subscribedIds=[],B.formModel={employees:"",adminRoles:"",supervisorRoles:"",supervisorChain:"0",essRoles:"",otherRoles:"",addressPart:"to",addOtherEmails:!1,advancedSettings:!1,templateSettings:!1,subscribed:{},template:"",subscribedTemplate:{},exclusions:"",objectEmpty:function(e){return!angular.isObject(e)||0==Object.keys(e).length}},B.notifyAfterNotifications=["Online Assessment Courses - Course Overdue Notification"],B.cancel=w,B.save=S,B.setAllTemplate=b,h()}angular.module("app.pim").controller("AdminAddSubscribersController",e),e.$inject=["webservice","localizedMessages","$q","loader","$translate","$rootScope","formHelper","formValidationHelper","$scope","$state","$stateParams","emailSubscriptionsService","datagroupPermissions","ModalService","emailSubscriberHelper","titleService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(){function e(){var e=[],a="GET";e[0]=t.call("/notifications/subscriber-templates/"+w.template_id,a,{},{}),e[1]=p.getNotificationTemplates(w.notification_id),s.all(e).then(function(e){w.template=e[0].data.data;for(var t=e[1],a=0;a<t.length;a++)w.templatesNames.push(t[a].name.toLowerCase());h()})}e()}function h(){w.schema={type:"object",title:"Email Templates",properties:{name:{title:"Name",type:"string",maxLength:200}},required:["name"]},w.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"name",validationMessage:{201:f.textLengthExceedValidation.message(w.schema.properties.name.maxLength),302:e.getLocalizedCustom("Required"),uniqueName:e.getLocalizedCustom("Notification template name must be unique")},$validators:{uniqueName:v}}]}],n.addRequiredMessage(w.form),w.model={name:r.instant("Copy of")+" "+e.getLocalizedCustom(w.template.name)}}function v(e,t){return w.templatesNames.indexOf(e.toLowerCase())<0}function y(n){if(l.$broadcast("schemaFormValidate",n.$name),C(),n.$valid){i.show(),angular.extend(w.template,w.model);var s,c,d,m=(w.template_id,"notifications/copy-subscriber-templates");d="POST",s="saveSuccess",c="Failed to Add",t.call(m,d,{id:w.template_id,name:w.model.name},{}).then(function(t){i.hide(),e.showLocalizedToast(s),u.unshift(t.data)},function(e){i.hide(),o.error(r.instant(c))}),a(!0)}}function b(){a(!1)}function C(){w.model.name.length>w.schema.properties.name.maxLength?l.$broadcast("schemaForm.error.name","tv4-201",!1):l.$broadcast("schemaForm.error.name","tv4-201",!0)}var w=this;w.notification_id=c,w.template_id=d,w.mode=m,w.template=null,w.title="Copy Email Template",w.save=y,w.cancel=b,w.templatesNames=[],g()}angular.module("app.admin").controller("AdminCopyEmailTemplateController",e),e.$inject=["localizedMessages","webservice","close","loader","toast","formHelper","$scope","$translate","$q","notification_id","template_id","mode","dataList","emailSubscriptionsService","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g){function h(){var e=[],a="GET";e.push(p.getNotificationById(w.notification_id)),e.push(t.call("/notifications/subscriber-templates/"+w.template_id,a,{},{})),e.push(p.getNotificationTemplates(w.notification_id)),r.all(e).then(function(e){w.notification=e[0],w.template=e[1].data.data;for(var t=e[2],a=0;a<t.length;a++)""+t[a].id!==w.template_id&&w.templatesNames.push(t[a].name.toLowerCase());v()})}function v(){w.title="Edit Email Template",u.setForcedTitle(["HR Administration","Configurations","Email Notifications",s.instant(w.notification.name)+" - "+s.instant("Templates")]),w.schema={type:"object",title:"Email Templates",properties:{name:{title:"Name",type:"string",maxLength:200},subject:{title:"Subject",type:"string",maxLength:255},body:{title:"Body",type:"string"}},required:["name","subject","body"]},w.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"name",validationMessage:{201:f.textLengthExceedValidation.message(w.schema.properties.name.maxLength),302:e.getLocalizedCustom("Required"),uniqueName:e.getLocalizedCustom("Notification template name must be unique")},$validators:{uniqueName:y}}]},{type:"section",htmlClass:"row",items:[{type:"textarea",htmlClass:"col s12 m12 l12",key:"subject",validationMessage:{201:f.textLengthExceedValidation.message(w.schema.properties.subject.maxLength)}}]},{type:"section",htmlClass:"row",items:[{type:"tinymce",htmlClass:"col s12",labelHtmlClass:"active-collection-label",tinymceOptions:{toolbar1:"insertfile undo redo | bold italic style-p | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image image-upload | background-upload background-remove | forecolor backcolor | fontselect fontsizeselect"},key:"body",maxImageSizeValidationMessage:"*"+e.getLocalizedCustomWithVariables("File size should be less than {{maxSize}}MB",{maxSize:w.attachmentSizeInMb}),validationMessage:{302:e.getLocalizedCustom("Required")}}]
}],o.addRequiredMessage(w.form),w.model={name:e.getLocalizedCustom(w.template.name),subject:w.template.subject,body:w.template.body},l.$on("sf-render-finished",function(){l.$broadcast("$tinymce:refresh")}),w.intervalTinyMCECheck=setInterval(function(){w.template.body||clearInterval(w.intervalTinyMCECheck),tinymce.activeEditor&&w.template.body&&(tinymce.activeEditor.setContent(w.template.body),clearInterval(w.intervalTinyMCECheck))},1e3)}function y(e,t){return w.templatesNames.indexOf(e.toLowerCase())<0}function b(){d.go("admin.view_email_templates_list",{id:w.notification_id})}function C(o){l.$broadcast("schemaFormValidate"),c(function(){if(o.$valid){a.show(),tinymce&&(w.model.body=tinymce.activeEditor.save()),angular.extend(w.template,w.model);var n,l,r,s=w.template_id,c="notifications/subscriber-templates";r="PATCH",c+="/"+s,n="updateSuccess",l="Failed to Update",t.call(c,r,w.model,{}).then(function(t){a.hide(),e.showLocalizedToast(n)},function(e){a.hide(),i.error(l)})}})}var w=this;w.title="",w.template=null,w.notification_id=""+m.notification_id,w.template_id=""+m.id,w.templatesNames=[],w.attachmentSizeInMb=1,tinymce&&g.getSetting("max_attachment_size").then(function(t){w.attachmentSizeInMb=t/1048576,tinymce.image_type_error=function(){i.error(e.getLocalizedCustom("File Type Not Allowed"))},tinymce.image_size_error=function(){i.warning(e.getLocalizedCustomWithVariables("File Size Should Be Less than {{maxSize}}MB",{maxSize:w.attachmentSizeInMb}))},tinymce.max_image_size_=function(){return t}}),w.save=C,w.backToList=b,h()}angular.module("app.admin").controller("AdminEditEmailTemplateController",e),e.$inject=["localizedMessages","webservice","loader","toast","formHelper","$rootScope","$scope","$q","$translate","$timeout","$state","$stateParams","titleService","emailSubscriptionsService","formValidationHelper","settingsService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h){function v(){var a={notification:r.getNotificationById(""+N.notificationId),subscribers:r.getSubscribers(""+N.notificationId),employees:t.call("employees","GET",[],{filter:{has_work_email:1}}),userRoles:t.call("userRoles","GET",[],{filter:{is_assignable:"1"}}),permissions:p.getPermissions(),templates:r.getNotificationTemplates(""+N.notificationId),subscriptions:r.getSubscriptions(""+N.notificationId),templateData:r.getSubscribedTemplates(""+N.notificationId,""+N.subscriberId)};i.all(a).then(function(t){N.employeeItems=e.getItemsForMultyselectAutocomplete(t.employees.data.data,function(e){return{id:e.empNumber,name:e.firstName+" "+e.lastName,employeeId:e.employeeId}}),N.notification=t.notification,N.notificationTypeId=N.notification.type_id,N.permission=t.permissions.event_notification,N.templatesItems=t.templates,N.subscriber=b(N.subscriberId,t.subscribers),N.subscriptions=N.subscriber.Subscriptions,N.availableSubscriptions=t.subscriptions,N.templateData=t.templateData,y(N.notification,t.userRoles),N.parameters=JSON.parse(N.subscriber.parameters),z=null!==JSON.parse(N.notification.parameters)&&JSON.parse(N.notification.parameters).email_subscriber_schedule,h.setForcedTitle(["HR Administration","Configurations","Email Notifications",l.instant(N.notification.name)+" - "+l.instant("Subscribers")]),d.$on("set-template-edit",function(e,t){for(var a=t,i=0;i<N.workFlowItems.length;i++)N.workFlowItems[i].subscribed&&(N.workFlowItems[i].template=a)})})}function y(e,t){var a={extraRoles:r.getNotificationExtraRoles(e)};i.all(a).then(function(e){var a=t.data.data.concat(e.extraRoles);N.userRoles=C(a),D()})}function b(e,t){for(var a=0;a<t.length;a++)if(t[a].id===""+e)return t[a]}function C(e){for(var t=[],i=0;i<e.length;i++){var o=e[i];t.push({value:{id:o.id,type:o.typeId},name:a.getLocalizedCustom(o.display_name)})}return t.push({value:{id:O,type:R},name:a.getLocalizedCustom("Default Supervisor")}),t.sort(function(e,t){var a=e.name.toUpperCase(),i=t.name.toUpperCase();return a<i?-1:a>i?1:0}),t}function w(){f.showModal({templateUrl:"app/admin/emailSubscriptions/set-template-all.html",controller:"AdminSetTemplateAllController",controllerAs:"modal",inputs:{templateItems:N.templatesItems,mode:"edit"}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function S(){close(!0)}function D(){N.schema={type:"object",title:"Subscriber",readonly:!N.permission.update,properties:{employeeSubscriber:{title:l.instant("Employee"),type:"object"},userRole:{title:l.instant("User Role"),type:"object"},supervisorChain:{title:"Notify",type:"string","enum":["0","1"]},name:{title:"Name",type:"string"},email:{title:"Email",type:"string"},toOrCc:{title:"Include In",type:"string","enum":L()["enum"]},template:{title:"Template",type:"string","enum":e.getEnumAndTitleMapForSelect(N.templatesItems)["enum"]},exclusions:{title:l.instant("Exclude Employees (with work email)"),type:"object"},affectedEmployee:{title:"Notify When the Affected Employee is",type:["null","object"]},notifyBefore:{title:"When to Notify",type:"string","enum":e.getEnumAndTitleMapForSelect(M())["enum"]},scheduleFrequency:{title:"Schedule",type:"string","enum":["D","W"]},scheduleDays:{title:"On",type:"string","enum":["1","2","3","4","5","6","7"]}},required:["employee","template"]},N.form=[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"row",items:[{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l12",key:"exclusions",choices:N.employeeItems,condition:"(modal.subscriber.type === 'UserRole') || ((modal.subscriber.type === 'Employee') && (modal.subscriber.Employee == undefined)) || ((modal.parameters !== null && modal.parameters.restrict_employees))"}]},{type:"section",htmlClass:"row section-heading",items:[{type:"section-heading",htmlClass:"col s12",text:l.instant("Subscription Settings")}]},{type:"radiobuttons",htmlClass:"col s12 m12 l4",key:"toOrCc",titleMap:L().titleMap},{key:"affectedEmployee",type:"auto-complete",htmlClass:"col s12 m12 l4",placeholder:"All","text-searching":"Searching...","text-no-results":"No results found",condition:"modal.notificationTypeId==2"},{type:"select",htmlClass:"col s12 m12 l4",key:"notifyBefore",titleMap:e.getEnumAndTitleMapForSelect(M()).titleMap,condition:"modal.notificationTypeId==2",validationMessage:{302:a.getLocalizedCustom("Required")}},{type:"select",htmlClass:"col s12 m6 l4",key:"scheduleFrequency",emptyOption:!1,titleMap:[{value:"D",name:a.getLocalizedCustom("Daily")},{value:"W",name:a.getLocalizedCustom("Weekly")}],condition:"modal.notificationTypeId==3",readonly:z},{type:"select",htmlClass:"col s12 m6 l4",key:"scheduleDays",emptyOption:!1,titleMap:[{value:"1",name:a.getLocalizedCustom("Sunday")},{value:"2",name:a.getLocalizedCustom("Monday")},{value:"3",name:a.getLocalizedCustom("Tuesday")},{value:"4",name:a.getLocalizedCustom("Wednesday")},{value:"5",name:a.getLocalizedCustom("Thursday")},{value:"6",name:a.getLocalizedCustom("Friday")},{value:"7",name:a.getLocalizedCustom("Saturday")}],condition:"modal.notificationTypeId==3 && model.scheduleFrequency=='W'"}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l4",key:"template",condition:"modal.notificationTypeId != 1",titleMap:e.getEnumAndTitleMapForSelect(N.templatesItems).titleMap}]}],1!==N.notificationTypeId&&(N.subscriberTemplate=N.templateData),N.model={name:N.subscriber.name,email:N.subscriber.email,template:N.subscriberTemplate,toOrCc:null===N.subscriber.address_part?"to":N.subscriber.address_part,supervisorChain:"0",advancedSettings:!1,templateSettings:!1,exclusions:{}};for(var t in N.subscriber.exclusions)if(N.subscriber.exclusions.hasOwnProperty(t)){var i=_.find(N.employeeItems,{id:N.subscriber.exclusions[t]});i&&(N.model.exclusions[N.subscriber.exclusions[t]]=i.name)}switch(parseInt(N.notificationTypeId,10)){case 2:null!=N.subscriptions[0].affected_emp_number&&(N.model.affectedEmployee=N.subscriptions[0].AffectedEmployee,N.model.affectedEmployee.fullName=N.model.affectedEmployee.firstName+" "+N.model.affectedEmployee.lastName),N.model.notifyBefore=N.subscriptions[0].notify_before_value+" "+N.subscriptions[0].notify_before_unit;break;case 3:null==N.subscriptions[0].schedule_dow?N.model.scheduleFrequency="D":(N.model.scheduleFrequency="W",N.model.scheduleDays=N.subscriptions[0].schedule_dow)}if("Employee"===N.subscriber.type&&N.subscriber.emp_number&&(N.model.employeeSubscriber={empNumber:N.subscriber.emp_number,employeeId:N.subscriber.Employee.employeeId,fullName:N.subscriber.name}),"UserRole"===N.subscriber.type||"CustomUserRole"===N.subscriber.type){var o=_.find(N.userRoles,{value:{id:N.subscriber.user_role_id+""}});if(o&&(N.model.userRole=o.value,N.model.userRole.type==R&&N.subscriber.parameters)){var n=JSON.parse(N.subscriber.parameters);null!==n&&"on"===n.supervisor_chain&&(N.model.supervisorChain="1")}}var r=x();N.form[0].items=r.concat(N.form[0].items);for(var s=[],c=[],d=0;d<N.subscriptions.length;d++)null!==N.subscriptions[d].workflow_item_id&&N.subscribedIds.push(N.subscriptions[d].workflow_item_id);for(var m=0;m<N.availableSubscriptions.length;m++){var u=N.availableSubscriptions[m];if(void 0!==u.WorkflowStateMachine){var p=u.WorkflowStateMachine;if(c.indexOf(p.id)===-1){var f=g.getWorkflowItemKey(p);if(!s[f]){var h=N.subscribedIds.indexOf(p.id)!==-1;p.subscribed=h,void 0!==N.templateData[p.id]&&(p.template=N.templateData[p.id]),p.viewRole=g.getFormattedRole(p),p.viewState=g.getFormattedState(p),N.workFlowItems.push(p),s[f]=!0}c.push(p.id)}}}}function T(e,t){return!0}function x(){switch(N.subscriber.type){case"Employee":return F();case"UserRole":case"CustomUserRole":return k();case"Email":return E();case"Custom":}return I()}function F(){if(N.subscriber.emp_number){var e=[{type:"auto-complete",htmlClass:"col s12",key:"employeeSubscriber",idsToSkip:[],placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",required:!0,requireSelection:!0,has_work_email:1}];return e}return I()}function k(){var e=[{type:"select",htmlClass:"col s12",key:"userRole",required:!0,titleMap:N.userRoles},{type:"radiobuttons",htmlClass:"col s12 m12 l12",key:"supervisorChain",titleMap:[{value:"0",name:a.getLocalizedCustom("Immediate Supervisors Only")},{value:"1",name:a.getLocalizedCustom("Entire Supervisor Chain")}],condition:"model.userRole.type == "+R}];return e}function E(){var e=[{type:"text",htmlClass:"col s6",key:"name",required:!0},{type:"text",htmlClass:"col s6",key:"email",required:!0,validationMessage:{email:a.getLocalizedCustom("Expected format: admin@example.com"),uniqueEmail:a.getLocalizedCustomWithVariables("Email should be unique")},$validators:{email:s.email.validator,uniqueEmail:T}}];return e}function I(){var e=[{type:"readonly",label:"Subscriber",htmlClass:"col s12",value:N.subscriber.name}];return e}function A(e){var t=[];return angular.isObject(e)&&(t=Object.keys(e)),t}function M(){var e=N.notifyAfterNotifications.includes(N.notification.name)?"After":"Before";return[{id:"0 DAY",name:"On the Day of Event"},{id:"1 DAY",name:"1 Day "+e},{id:"2 DAY",name:"2 Days "+e},{id:"3 DAY",name:"3 Days "+e},{id:"1 WEEK",name:"1 Week "+e},{id:"2 WEEK",name:"2 Weeks "+e},{id:"3 WEEK",name:"3 Weeks "+e},{id:"1 MONTH",name:"1 Month "+e},{id:"2 MONTH",name:"2 Months "+e},{id:"3 MONTH",name:"3 Months "+e},{id:"6 MONTH",name:"6 Months "+e}]}function L(){var e=[{value:"to",name:"To"},{value:"cc",name:"Cc"}],t=["To","Cc"];return null!==N.parameters&&N.parameters.include_bcc&&(e.push({value:"bcc",name:"Bcc"}),t.push("Bcc")),{titleMap:e,"enum":t}}function P(e){if(N.permission&&(d.$broadcast("schemaFormValidate"),e.$valid)){var t=angular.copy(N.subscriber);switch(delete t.Subscriptions,delete t.UserRole,t.address_part=N.model.toOrCc,("UserRole"===t.type||"Employee"===t.type&&void 0===t.Employee||null!==N.parameters&&N.parameters.restrict_employees)&&(t.exclusions=A(N.model.exclusions)),t.type){case"Employee":t.emp_number=void 0!==N.model.employeeSubscriber?N.model.employeeSubscriber.empNumber:"",delete t.Employee;break;case"UserRole":if(t.user_role_id=N.model.userRole.id,N.model.userRole.type==R){var i={};t.parameters&&(i=JSON.parse(t.parameters)),i.supervisor_chain="1"===N.model.supervisorChain?"on":"off",t.parameters=i}break;case"Email":t.name=N.model.name,t.email=N.model.email;break;case"Custom":}""===t.emp_number&&(t.type="Custom"),t.template=N.model.template;for(var l={},s=[],u=0;u<N.workFlowItems.length;u++)if(N.workFlowItems[u].subscribed){if(""==N.workFlowItems[u].template||void 0==N.workFlowItems[u].template)return void a.warningToast("No Templates Selected");l[N.workFlowItems[u].id]=N.workFlowItems[u].template,s.push(N.workFlowItems[u].id)}switch(t.subscriptionTemplate=l,t.subscribedWorkflows=s,parseInt(N.notificationTypeId,10)){case 2:var p=N.model.affectedEmployee;angular.isObject(p)&&(t.affectedEmployee=p.empNumber),t.notifyBefore=N.model.notifyBefore;break;case 3:t.schedule=[N.model.scheduleFrequency,void 0===N.model.scheduleDays?"1":N.model.scheduleDays]}for(var f=[],u=0;u<N.subscriptions.length;u++)null!==N.subscriptions[u].id&&f.push(N.subscriptions[u].id);t.affectedSubscriptions=f,o.show(),r.saveSubscriber(N.notification.id,t).then(function(e){c.$broadcast("subscribers-edited"),m.go("^")},function(e){n.error(e),o.hide()})}}var N=this,O="3",R="3",z="";N.notificationId=u.id,N.notificationTypeId,N.subscriberId=u.subscriber,N.workFlowItems=[],N.subscribedIds=[],N.subscriber,N.notification,N.permission,N.availableSubscriptions,N.subscriptions,N.subscriberTemplate="",N.templateData,N.parameters=[],N.schema={},N.form=[],N.model={},N.notifyAfterNotifications=["Online Assessment Courses - Course Overdue Notification"],N.cancel=S,N.save=P,N.setAllTemplate=w,v()}angular.module("app.pim").controller("AdminEmailSubscriptionsEditSubscriberController",e),e.$inject=["formHelper","webservice","localizedMessages","$q","loader","toast","$translate","emailSubscriptionsService","formValidationHelper","$rootScope","$scope","$state","$stateParams","datagroupPermissions","ModalService","emailSubscriberHelper","titleService"]}(),function(){"use strict";function e(){function e(e){var t=e.role;switch(e.workflow){case"SUPERVISOR REVIEW":t="SUPERVISOR EVALUATOR";break;case"SUBORDINATE REVIEW":t="SUBORDINATE EVALUATOR";break;case"SELF REVIEW":t="SELF EVALUATOR";break;case"PEER REVIEW":t="PEER EVALUATOR"}return"SUBMITTED"==e.resultingState?t:e.role}function t(e){var t=["SUPERVISOR REVIEW","SUBORDINATE REVIEW","SELF REVIEW","PEER REVIEW","FINAL REVIEW"];return t.indexOf(e.workflow)>-1&&"REJECTED"==e.resultingState?e.workflow+" "+e.state:e.state}function a(e){return["workflow","role","state","resultingState"].reduce(function(t,a){return t+"_"+e[a]},0)}return{getFormattedRole:e,getFormattedState:t,getWorkflowItemKey:a}}angular.module("app.admin").factory("emailSubscriberHelper",e),e.$inject=[]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){function m(){h(),void 0===y.notificationType?n.fetchNotificationTypes().then(function(e){e.length>0&&i.go(i.current,{type:e[0].id},{reload:!0})}):(n.fetchNotifications(y.notificationType).then(function(e){y.emailNotifications=e,y.isChangeSubscriberAllowedForList=n.isListActionAllowedForAllNotifications(y.emailNotifications,y.changeSubscriberActionKey)}),l.getPermissions().then(function(e){y.permissions=e.event_notification,y.permissions.read||(t.hide(),i.go("403"))}))}function u(e){g(e,y.changeSubscriberActionKey)&&i.go("admin.edit_email_subscription",{id:e.id})}function p(e){i.go("admin.view_email_templates_list",{id:e.id})}function f(t){n.setNotificationStatus(t.id,t.is_enable).then(function(){var e="updateSuccess";r.showLocalizedToast(e)},function(i){var o="Failed to Save";e(o).then(function(e){a.error(o)},function(e){a.error(o)}),t.is_enable="1"===t.is_enable?"0":"1"})}function g(e,t){return n.isListActionAllowed(e,t)}function h(){d.onSuccess({},function(e){var a=e.$from().name,i=e.$to().name;"admin.email_subscriptions"===i&&i!==a&&"noncore"!==a&&(t.show(),c(function(){s.location.reload()}))})}function v(e){switch(e.name){case"Password Reset Notification":a.warning(r.getLocalizedCustom("Unable To Add Subscribers for Password Reset Email"));break;case"Set Password on First Login Notification":a.warning(r.getLocalizedCustom("Unable To Add Subscribers for Set Password on First Login Email"))}}var y=this;y.emailNotifications="",y.permissions,y.notificationType=o.type,y.changeSubscriberActionKey="change_subscribers",y.changeStatusActionKey="change_status",y.toggleStatus=f,y.linkNotification=u,y.linkTemplates=p,y.isListActionAllowed=g,y.clickOnDisabledSubscribers=v,m()}angular.module("app.admin").controller("AdminEmailSubscriptionListController",e),e.$inject=["$translate","loader","toast","$state","$stateParams","emailSubscriptionsService","datagroupPermissions","localizedMessages","$window","$timeout","$transitions"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s){function c(){$(".material-tooltip").remove()}function d(e){e&&o.go(e)}var m=this;m.tabs=[],m.title=l,m.titleClicked=d,c()}angular.module("app.admin").controller("EmailSubscriptionNavbarController",e),e.$inject=["$rootScope","$scope","$q","$translate","$state","emailSubscriptionsService","titleService","focus","LOGIN"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p){function f(){var t=[];t.push(m.getNotificationById(O.id)),t.push(m.getSubscribers(O.id)),t.push(u.getPermissions()),t.push(m.getSubscriptions(O.id)),e.all(t).then(function(e){O.notification=e[0],O.extraFields=m.getExtraNotificationFields(O.notification),o.setForcedTitle(["HR Administration","Configurations","Email Notifications",i.instant(O.notification.name)+" - "+i.instant("Subscribers")]),O.permissions=e[2].event_notification,O.permissions.read||(r.hide(),c.go("403")),O.subscriptions=e[3],2==O.notification.type_id?v(O.subscriptions).then(function(){O.subscribers=e[1],w(),h()}):(O.subscribers=e[1],w(),h())}),n.$on("subscribers-added",function(e,t){g(),p.successToast("saveSuccess")}),n.$on("subscribers-edited",function(e,t){g(),p.successToast("updateSuccess")})}function g(){var t=[];t.push(m.getSubscribers(O.id)),t.push(m.getSubscriptions(O.id)),e.all(t).then(function(e){v(e[1]).then(function(){O.subscribers=e[0],O.subscriptions=e[1]})})["finally"](function(){r.hide()})}function h(){0==O.subscribers.length&&p.infoToast("No Records Found")}function v(t){for(var i=[],o=0;o<t.length;o++){var n=t[o],l=n.affected_emp_number;l&&i.push(l)}if(i.length>0){var r={};return r.filter={employee_id_list:i},a.call("employees","GET",[],r).then(function(e){O.affectedEmployees=e.data.data})}return e(function(e,t){e(!0)})}function y(e){c.go("admin.edit_email_subscription.edit",{subscriber:e.id})}function b(e){var a=_(e);t.showModal({templateUrl:"app/admin/emailSubscriptions/extra-params-view-modal.html",controller:"AdminEmailSubscriptionsExtraParamsViewController",controllerAs:"modal",inputs:{extraParams:a}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function C(e,t){return"UserRole"===t.type?e+=" ("+i.instant("User Role")+")":"Email"===t.type&&(e+=" <"+t.email+">"),e}function w(){var e=[{name:"subscriber",lable:"Subscriber",getter:"name",formatter:C},{name:"template",lable:"Template",getter:"template_name"},{name:"to_cc",lable:"Recipient Type",getter:"address_part",filters:[{name:"translate"}],formatter:function(e,t){return"cc"===e?"Cc":"bcc"===e?"Bcc":"To"}}],t=[],a=[{action:"deleteSelectedSubscribers",lable:"Delete Selected",actionPermission:O.permissions["delete"]}],i=[],o=[{icon:"edit_item",clickAction:"editSubscriber",tooltip:"Edit"}];if(1==O.notification.type_id)i.push({colspan:o.length}),t=["5%","40%","40%","10%","5%"];else if(2==O.notification.type_id){var n=[{name:"affectedEmployee",lable:"Affected Employee",getter:"id",formatter:T},{name:"notifyEmployee",lable:"Notify Employee",getter:"id",formatter:D},{name:"notified",lable:"Notified",formatter:S}];Array.prototype.push.apply(e,n),o.push({icon:"settings",clickAction:"viewExtraParams",tooltip:"View additional parameters",hideIf:function(e){var t=_(e),a=Object.keys(t);return a.length>0}}),i.push({colspan:o.length}),t=["5%","20%","30%","10%","10%","10%","10%","5%"]}else 3==O.notification.type_id&&(e.push({name:"schedule",lable:"Schedule",getter:"id",formatter:F}),i.push({colspan:1}),t=["5%","35%","35%","10%","10%","5%"]);O.permissions["delete"]||t.shift(),O.unselectableIds=[];for(var l=0;l<O.subscribers.length;l++){var r=O.subscribers[l],s=JSON.parse(r.parameters);null!==s&&void 0!==s.prevent_delete&&s.prevent_delete===!0&&O.unselectableIds.push(r.id)}O.listData={name:"Subscribers",selectable:!0,selected:[],unselectableIds:O.unselectableIds,idGetter:["id"],listFields:e,extraTH:i,extraTD:o,showColumnsAnyway:!0,permission:O.permissions,columnWidths:t,listActions:a}}function _(e){var t=e.Subscriptions,a={};if(angular.isArray(t))for(var i=0;i<t.length;i++){var o=t[i];if(void 0!==o.parameters){var n=JSON.parse(o.parameters);angular.extend(a,n)}}return a}function S(e,t){var a="",o=t.Subscriptions;if(o.length>0){var n=o[0],l=parseInt(n.notify_before_value,10),r=n.notify_before_unit,s=O.notifyAfterNotifications.includes(O.notification.name)?"After":"Before";0===l?a=i.instant("On the Day of Event"):(l>1&&(r+="S"),r=r.toLowerCase(),r=r[0].toUpperCase()+r.slice(1),a=l+" "+i.instant(r)+" "+i.instant(s))}return a}function D(e,t){var a=!1,o=t.Subscriptions;if(o.length>0){var n=o[0];a=n.notify_affected_employee}var l=a?"Yes":"No";return i.instant(l)}function T(e,t){var a="",o=t.Subscriptions;if(o.length>0){var n=o[0],l=n.affected_emp_number;a=l?x(l):i.instant("All")}return a}function x(e){for(var t=0;t<O.affectedEmployees.length;t++)if(O.affectedEmployees[t].empNumber==e)return O.affectedEmployees[t].firstName+" "+O.affectedEmployees[t].lastName;return""}function F(e,t){var a="",i=t.Subscriptions;if(angular.isArray(i))for(var o=0;o<i.length;o++)""!==a&&(a+=", "),a+=k(i[o]);return a}function k(e){var t="";return t=null===e.schedule_dow&&null===e.schedule_dom?i.instant("Daily"):null!==e.schedule_dow?i.instant("Weekly")+" "+i.instant("On")+" "+i.instant(E(e.schedule_dow)):i.instant("Monthly")+" "+i.instant("On")+" ".subscription.schedule_dom}function E(e){return void 0===R[e]?e:R[e]}function I(){O.listData.selected.length>0&&t.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&A()})})}function A(){var e=O.listData.selected.length;e>0&&(r.show(),m.deleteSubscribers(O.id,O.listData.selected).then(function(e){r.hide(),M(O.listData.selected),p.showLocalizedToast("deleteSuccess")},function(e){r.hide(),s.error(e)}))}function M(e){for(var t=O.subscribers.length-1;t>=0;t--){var a=e.indexOf(O.subscribers[t].id);a>-1&&(e.splice(a,1),O.subscribers.splice(t,1))}}function L(e){var t=e.obj;if(O.unselectableIds.indexOf(t.id)===-1)if(t.selected)O.listData.selected.push(t.id);else{var a=O.listData.selected.indexOf(t.id);a>-1&&O.listData.selected.splice(a,1)}}function P(){O.listData.selected=[];for(var e=0;e<O.subscribers.length;e++){var t=O.subscribers[e];O.unselectableIds.indexOf(t.id)===-1&&(t.selected=!0,O.listData.selected.push(t.id))}}function N(){O.listData.selected=[];for(var e=0;e<O.subscribers.length;e++)O.subscribers[e].selected=!1}var O=this,R={1:"Sunday",2:"Monday",3:"Tuesday",4:"Wednesday",5:"Thursday",6:"Friday",7:"Saturday"};O.id=String(d.id),O.permissions,O.notification,O.subscribers,O.subscriptions,O.listData,O.unselectableIds,O.affectedEmployees={},O.extraFields=[],O.state=c,O.notifyAfterNotifications=["Online Assessment Courses - Course Overdue Notification"],O.editSubscriber=y,O.viewExtraParams=b,O.changeSelection=L,O.selectAll=P,O.deselectAll=N,O.deleteSelectedSubscribers=I,f()}angular.module("app.admin").controller("AdminEmailSubscriptionController",e),e.$inject=["$q","ModalService","webservice","$translate","titleService","$scope","$rootScope","loader","toast","$state","$stateParams","emailSubscriptionsService","datagroupPermissions","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c){function d(){$(".material-tooltip").remove(),n.fetchNotificationTabs().then(function(e){f.tabs=e})}function m(e){}function u(e){}function p(){return c.getLocalizedCustom(f.moreLinkText)}var f=this;f.tabs=[],f.title=l,f.moreLinkText="More",f.clickOnTab=m,f.clickOnOtherLink=u,f.getMoreLinkText=p,d()}angular.module("app.admin").controller("EmailSubscriptionsNavbarController",e),e.$inject=["$rootScope","$scope","$q","$translate","$state","emailSubscriptionsService","titleService","focus","LOGIN","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n){function l(e,t){return i.call("notifications/"+e+"/subscribed-template/"+t,"GET",{},[]).then(function(e){return e.data.data})}function r(e){return i.call("notifications/"+e+"/templates","GET",{},[]).then(function(e){return e.data.data})}function s(){return t(function(e,t){null!==M?e(M):i.call("userRoles","GET",[],{}).then(function(t){M=t.data.data,e(M)})})}function c(e,t){var a=[];return t&&(a=t),i.call("notifications/"+e+"/subscribers","GET",[],a).then(function(e){return e.data.data})}function d(e){var t={include:"WorkflowStateMachine"};return i.call("notifications/"+e+"/subscriptions","GET",{},t).then(function(e){return e.data.data})}function m(e,t){return i.call("notifications/"+e,"PATCH",{is_enable:t},[])}function u(e,t){return i.call("notifications/"+e+"/subscribers","DELETE",{data:t},{})}function p(e){return g().then(function(t){for(var a=0;a<t.length;a++)for(var i=0;i<t[a].Notification.length;i++)if(t[a].Notification[i].id===e)return t[a].Notification[i];return!1})}function f(e){return h().then(function(t){for(var a=0;a<t.length;a++)for(var i=0;i<t[a].Notification.length;i++)if(t[a].Notification[i].id===e)return t[a].Notification[i];return!1})}function g(){return t(function(e,t){null!==E?e(E):v().then(function(t){E=t.data.data,e(E)})})}function h(){return t(function(e,t){null!==I?e(I):y().then(function(t){I=t.data.data,e(I)})})}function v(){var e={include:"Notification"};return i.call("notificationType","GET",[],e)}function y(){var e={include:"NotificationWithHidden"};return i.call("notificationType","GET",[],e)}function b(){return g().then(function(e){A=[];for(var t=0;t<e.length;t++){var a=e[t];a.Notification.length>0&&A.push({id:a.id,title:n.getLocalizedCustom(a.name),uiSref:"admin.email_subscriptions({type: "+a.id+"})",icon:C(a.name)})}return A})}function C(e){return k.hasOwnProperty(e)?k[e]:k.Other}function w(e){return g().then(function(t){for(var a=0;a<t.length;a++)if(e===t[a].id)return t[a].Notification;return[]})}function _(e){var a=[],i=[];if(void 0!==e.parameters)try{var o=JSON.parse(e.parameters);void 0!==o.extra_roles&&(a=o.extra_roles)}catch(n){}return t(function(e,t){0==a.length?e(i):s().then(function(t){for(var o=0;o<a.length;o++)for(var n=0;n<t.length;n++)if(a[o]===t[n].name){"AppraisalReviewer"===t[n].name&&(t[n].display_name="Evaluator"),i.push(t[n]);break}e(i)})})}function S(e){var t={};if(void 0!==e.parameters){var a=JSON.parse(e.parameters);angular.isObject(a)&&void 0!==a.extra_settings&&(t=Object.keys(a.extra_settings))}return t}function D(e,t){return i.call("notifications/"+e+"/subscribers","PATCH",t,[])}function T(e,t){return i.call("notifications/subscriber-templates/"+e,"DELETE",{data:t},{})}function x(e,t){var a=!0;if(e.parameters){var i=JSON.parse(e.parameters),o=i.list_action_rights;void 0!==o&&void 0!==o[t]&&(a=o[t])}return a}function F(e,t){for(var a=!1,i=0;i<e.length;i++)if(x(e[i],t)){a=!0;break}return a}var k={"Action Based":"check_circle","Date Based":"date_range",Scheduled:"schedule",Manual:"ohrm_notification",Other:"email"},E=null,I=null,A=null,M=null,L={fetchNotificationTypes:g,fetchNotificationTabs:b,fetchNotifications:w,setNotificationStatus:m,getNotificationById:p,getSubscribers:c,getSubscriptions:d,deleteSubscribers:u,getNotificationExtraRoles:_,getExtraNotificationFields:S,saveSubscriber:D,getNotificationTemplates:r,deleteTemplates:T,getSubscribedTemplates:l,isListActionAllowed:x,isListActionAllowedForAllNotifications:F,fetchNotificationTypesIncludingHiddenNotifications:h,getNotificationByIdIncludingHiddenNotifications:f};return L}angular.module("app.core").factory("emailSubscriptionsService",e),e.$inject=["$rootScope","$q","$stateParams","webservice","LOGIN","localizedMessages"]}(),function(){"use strict";function e(e,t){function a(){for(var t=Object.keys(e),a=0;a<t.length;a++)n.parameters.push({parameter:t[a],value:e[t[a]]});o()}function i(){t(!0)}function o(){var e=[{name:"parameter",lable:"Parameter",getter:"parameter"},{name:"value",lable:"Value",getter:"value"}],t=["50%","50%"],a=[],i=[],o=[];n.listData={name:"Extra Parameters",selectable:!1,selected:[],idGetter:["id"],listFields:e,extraTH:i,extraTD:o,showColumnsAnyway:!0,permission:{},columnWidths:t,listActions:a}}var n=this;n.parameters=[],n.cancel=i,a()}angular.module("app.pim").controller("AdminEmailSubscriptionsExtraParamsViewController",e),e.$inject=["extraParams","close"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r){function s(){m.schema={type:"object",title:"Email Templates",properties:{template:{title:t.instant("Template"),type:"string","enum":i.getEnumAndTitleMapForSelect(m.templatesItems)["enum"]}},required:["template"]},m.form=[{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l12",key:"template",titleMap:i.getEnumAndTitleMapForSelect(m.templatesItems).titleMap,validationMessage:{302:e.getLocalizedCustom("Required")}}]}],i.addRequiredMessage(m.form),m.model={template:""}}function c(e){n.$broadcast("schemaFormValidate"),e.$valid&&("add"===r?o.$broadcast("set-template-add",m.model.template):"edit"===r&&o.$broadcast("set-template-edit",m.model.template),a(!0))}function d(){a(!1)}var m=this;m.templatesItems=l,m.mode=r,m.title="Set Same Template for All Scenarios",m.save=c,m.cancel=d,s()}angular.module("app.admin").controller("AdminSetTemplateAllController",e),e.$inject=["localizedMessages","$translate","close","formHelper","$rootScope","$scope","templateItems","mode"]}(),function(){"use strict";function e(e,t){function a(t){return"UserRole"===t.type?e.instant("User Role"):"Email"===t.type?e.instant("Email")+" < "+t.email+" >":e.instant(t.type)}var i=this;i.formatType=a,i.templateSubscribers=t}angular.module("app.admin").controller("AdminViewEmailTemplateSubscribersController",e),e.$inject=["$translate","templateSubscribers"]}(),function(){"use strict";function e(e,t,a,i,o,n,l){function r(){var t=[],i="GET";t.push(e.call("/notifications/subscriber-templates/"+c.template_id,i,{},{}).then(function(e){c.template=e.data.data})),a.all(t).then(function(e){c.title=n.getLocalizedCustom("View Template")+" - "+n.getLocalizedCustom(c.template.name),c.subject=c.template.subject,c.body=o.trustAsHtml(l.sanitizeTinymceContent(c.template.body))})}function s(){t(!1)}var c=this;c.template_id=i,c.template=null,c.title="",c.subject="",c.body="",c.cancel=s,r()}angular.module("app.admin").controller("AdminViewEmailTemplateController",e),e.$inject=["webservice","close","$q","template_id","$sce","localizedMessages","sanitizeService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(e){var a=e.id;t.showModal({templateUrl:"app/admin/emailSubscriptions/view-email-template.html",controller:"AdminViewEmailTemplateController",controllerAs:"modal",inputs:{notification_id:F.notificationId,template_id:a,dataList:F.emailSubscriptionTemplates,mode:"view"}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function f(){F.listData.templates.selected=[];for(var e=0;e<F.emailSubscriptionTemplates.length;e++){var t=F.emailSubscriptionTemplates[e];F.unselectableIds.indexOf(t.id)===-1&&(t.selected=!0,F.listData.templates.selected.push(t.id))}}function g(){F.listData.templates.selected=[];for(var e=0;e<F.emailSubscriptionTemplates.length;e++)F.emailSubscriptionTemplates[e].selected=!1}function h(e){var t=e.obj;if(t.selected)F.listData.templates.selected.push(t.id);else{
var a=F.listData.templates.selected.indexOf(t.id);a>-1&&F.listData.templates.selected.splice(a,1)}}function v(e){var t=e.id;s.go("admin.edit_email_template",{id:t,notification_id:F.notificationId})}function y(e){var a=e.id;t.showModal({templateUrl:"app/admin/emailSubscriptions/copy-email-template.html",controller:"AdminCopyEmailTemplateController",controllerAs:"modal",inputs:{notification_id:F.notificationId,template_id:a,dataList:F.emailSubscriptionTemplates,mode:"copy"}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function b(e){var a=e.id,o=[],n="GET";o.push(i.call("notifications/view-subscribers/"+a,n,{},{}).then(function(e){F.template_subscribers=e.data.data,t.showModal({templateUrl:"app/admin/emailSubscriptions/view-email-template-subscribers.html",controller:"AdminViewEmailTemplateSubscribersController",controllerAs:"vm",inputs:{templateSubscribers:F.template_subscribers}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}))}function C(e){"UserRole"===e.type?e.type=o.instant("User Role"):"Email"===e.type&&(e.type=e.email)}function w(){var t=[];t.push(d.getNotificationById(F.notificationId)),t.push(m.getPermissions()),t.push(d.getNotificationTemplates(F.notificationId)),e.all(t).then(function(e){F.notification=e[0],F.allowCopyTemplate=d.isListActionAllowed(F.notification,F.copyTempatesActionKey),a.setForcedTitle(["HR Administration","Configurations","Email Notifications",o.instant(F.notification.name)+" - "+o.instant("Templates")]),F.permissions=e[1].event_notification,F.permissions.read||(l.hide(),s.go("403")),F.emailSubscriptionTemplates=e[2],x()})}function _(){for(var e=0;e<F.emailSubscriptionTemplates.length;e++){var t=F.emailSubscriptionTemplates[e];t.undeletable&&F.unselectableIds.push(t.id)}}function S(){F.listData.templates.selected.length>0&&t.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&D()})})}function D(){var e=F.listData.templates.selected.length;if(e>0){l.show();var t=F.listData.templates.selected;d.deleteTemplates(F.notificationId,t).then(function(e){l.hide(),T(e.data.data,t),u.showLocalizedToast("deleteSuccess")},function(e){l.hide(),r.error(e)})}}function T(e,t){for(var a=F.emailSubscriptionTemplates.length-1;a>=0;a--){var i=e.indexOf(F.emailSubscriptionTemplates[a].id);i>-1&&(e.splice(i,1),F.emailSubscriptionTemplates.splice(a,1))}g()}function x(){_();var e=[{name:"template",lable:"Template Name",getter:"name",filters:[{name:"translate"}]}],t=[{action:"deleteSelectedTemplates",lable:"Delete Selected",actionPermission:F.permissions["delete"]}],a=3;F.allowCopyTemplate||(a=2);var i=[{heading:"Subscribers"},{heading:"Template Settings",colspan:a}],o=[{icon:"supervisor_account",clickAction:"viewTemplateSubscribers",tooltip:"View Subscribers"},{icon:"visibility",clickAction:"viewTemplate",tooltip:"View Template"},{icon:"edit",clickAction:"editTemplate",tooltip:"Edit Template"}];F.allowCopyTemplate&&o.push({icon:"content_copy",clickAction:"copyTemplate",tooltip:"Copy Template"});var n=[];n=F.permissions["delete"]?F.allowCopyTemplate?["5%","70%","10%","5%","5%","5%"]:["5%","75%","10%","5%","5%"]:F.allowCopyTemplate?["75%","10%","5%","5%","5%"]:["80%","10%","5%","5%"],F.listData={templates:{name:"templates",selectable:!0,selected:[],unselectableIds:F.unselectableIds,idGetter:["id"],listFields:e,extraTH:i,extraTD:o,showColumnsAnyway:!0,permission:F.permissions,columnWidths:n,listActions:t}}}var F=this;F.notificationId=""+c.id,F.emailSubscriptionTemplates="",F.unselectableIds=[],F.template_subscribers="",F.notification="",F.permissions="",F.listData,F.selectAll=f,F.deselectAll=g,F.changeSelection=h,F.deleteSelectedTemplates=S,F.viewTemplate=p,F.editTemplate=v,F.copyTemplate=y,F.viewTemplateSubscribers=b,F.formatSubscriberName=C,F.copyTempatesActionKey="copy_templates",w()}angular.module("app.admin").controller("AdminViewEmailTemplateListController",e),e.$inject=["$q","ModalService","titleService","webservice","$translate","$rootScope","loader","toast","$state","$stateParams","emailSubscriptionsService","datagroupPermissions","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){t.call("employmentStatus","GET",[]).then(function(e){if(b.exsistingEmploymentStatus=y(e.data.data,"name",!0),p(),b.employmentStatus.id){var t=b.exsistingEmploymentStatus.indexOf(b.employmentStatus.name.toLowerCase());b.exsistingEmploymentStatus.splice(t,1)}})}function p(){b.schema={type:"object",title:"Employment Status",properties:{name:{title:"Name",type:"string",maxLength:60}},required:["name"]},b.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"name",validationMessage:{duplicationEmploymentStatus:a.getLocalizedCustom("Already exists"),302:a.getLocalizedCustom("Required"),201:d.textLengthExceedValidation.message(b.schema.properties.name.maxLength)},$validators:{duplicationEmploymentStatus:f}}]}],m.addRequiredMessage(b.form),b.model={name:b.employmentStatus.name}}function f(e){return e=e.trim(),""==e||(b.exsistingEmploymentStatus?!(b.exsistingEmploymentStatus.indexOf(e.toLowerCase())>-1):void 0)}function g(e){if(c.$broadcast("schemaFormValidate"),e.$valid){l.show(),angular.extend(b.employmentStatus,b.model);var i=b.employmentStatus.id,s="POST",d="employmentStatus",m="saveSuccess";i?(s="PATCH",d+="/"+i,m="updateSuccess"):s="POST",t.call(d,s,b.model,{}).then(function(e){l.hide(),delete b.exsistingEmploymentStatus,"POST"==s?o.unshift(e.data.data):"PATCH"==s&&h(b.employmentStatus),a.showLocalizedToast(m),t.clearCache("employmentStatus")},function(e){l.hide(),r.error(e)}),n(!0)}}function h(e){for(var t=0;t<o.length;t++)if(o[t].id==e.id){angular.extend(o[t],e);break}}function v(){n(!1)}function y(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}var b=this,C={};angular.copy(i,C),b.employmentStatus=C,b.exsistingEmploymentStatus,b.extractFeildValueFromData=y,b.employmentStatus.id?b.title="Edit Employment Status":b.title="Add Employment Status",b.save=g,b.cancel=v,u()}angular.module("app.admin").controller("AdminEditEmploymentStatusController",e),e.$inject=["logger","webservice","localizedMessages","employmentStatus","dataList","close","loader","toast","$rootScope","$scope","formValidationHelper","formHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){r.show(),d.getPermissions().then(function(e){E.permissions=e.admin_employment_status,E.permissions.read?u.getSetting("page_size").then(function(e){E.pageSize=e,E.fetchEmploymentStatus("employmentStatus","ASC",1)}):(r.hide(),m.go("403"))})}function f(e,t,i){var o={offset:(i-1)*E.pageSize,limit:E.pageSize,sortingFeild:E.sortingListFields[e],sortingOrder:t},l=[];l.push(n.call("employmentStatus","GET",[],o)),a.all(l).then(function(e){h(),E.employmentStatus=e[0].data.data,E.totalDataCount=e[0].data.meta.total,E.dataInCurruntPage=e[0].data.data.length,E.page=i,E.lastPage=Math.ceil(E.totalDataCount/E.pageSize),g(),r.hide(),0==E.employmentStatus.length&&c.infoToast("No Records Found")})}function g(){E.employmentStatusListHelper=new t.list(E.listData.employmentStatus,E.employmentStatus),E.selectAll=E.employmentStatusListHelper.selectAllItems,E.deselectAll=E.employmentStatusListHelper.deselectAllItems}function h(){E.panelInfo={employmentStatusInfo:{icon:"images/pim/icon_work.svg"}},v()}function v(){var e=[{name:"employmentStatus",lable:"Employment Status",getter:"name",sortable:!0,sortAction:"fetchEmploymentStatus"}],t=[{colspan:3}],a=[{"class":"edit_item",clickAction:"editEmploymentStatus",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:E.permissions["delete"]}];E.listData={employmentStatus:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:E.permissions,listActions:i,pagination:!0}}}function y(){E.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function b(e){o.showModal({templateUrl:"app/admin/employmentStatus/employment_status_modal.html",controller:"AdminEditEmploymentStatusController",controllerAs:"modal",inputs:{employmentStatus:e,dataList:E.employmentStatus}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function C(){if(E.listData.employmentStatus.selected.length>0){var e=E.listData.employmentStatus.selected.length;r.show(),n.call("employmentStatus","DELETE",{data:E.listData.employmentStatus.selected},{}).then(function(t){r.hide(),c.showLocalizedToast("deleteSuccess"),E.total-=e,w(E.listData.employmentStatus.selected),n.clearCache("employmentStatus")},function(e){r.hide(),s.success(e)})}}function w(e){for(var t=E.employmentStatus.length-1;t>=0;t--){var a=e.indexOf(E.employmentStatus[t].id);a>-1&&(e.splice(a,1),E.employmentStatus.splice(t,1))}}function _(e){var t=e.obj;if(t.selected)E.listData.employmentStatus.selected.push(t.id);else{var a=E.listData.employmentStatus.selected.indexOf(t.id);a>-1&&E.listData.employmentStatus.selected.splice(a,1)}}function S(){E.listData.employmentStatus.selected.length>0&&o.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&(C(),x(E.listData.employmentStatus.selected.length))})})}function D(){var e={name:""};o.showModal({templateUrl:"app/admin/employmentStatus/employment_status_modal.html",controller:"AdminEditEmploymentStatusController",controllerAs:"modal",inputs:{employmentStatus:e,dataList:E.employmentStatus}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e&&T()})})}function T(){E.totalDataCount=E.totalDataCount+1,E.dataInCurruntPage=E.dataInCurruntPage+1}function x(e){E.totalDataCount=E.totalDataCount-e,E.dataInCurruntPage=E.dataInCurruntPage-e}function F(){close(!0)}function k(){close(!1)}var E=this;E.title="Employment Status",E.employmentStatus="",E.editEmploymentStatus=b,E.deleteEmploymentStatus=C,E.changeSelection=_,E.deleteSelection=S,E.addEmploymentStatus=D,E.fetchEmploymentStatus=f,E.confirm=F,E.cancel=k,E.sortingListFields={employmentStatus:"name"},E.pageSize=50,E.page=1,E.lastPage=0,E.totalDataCount=0,E.dataInCurruntPage=0,p(),y()}angular.module("app.admin").controller("AdminEmploymentStatusController",e),e.$inject=["logger","listHelper","$q","$window","ModalService","webservice","$rootScope","loader","toast","localizedMessages","datagroupPermissions","$state","settingsService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v){function y(){var e={};e.filter={status:"1",type:["SP"]};var t={settings:p.getSettings(),userRoles:v.getUserRoles(),orangeHrmIdPs:v.getOrangeHrmIdps(e)};I.externalService&&I.externalService.type&&"idp"==I.externalService.type.name&&I.externalService.idpId&&(t.orangeHRMIdp=v.getOrangeHRMIdpById(I.externalService.idpId)),c.all(t).then(function(e){I.userRoles=e.userRoles.data.data,I.idps=e.orangeHrmIdPs.data.data,I.userRoles.admins=I.userRoles.filter(function(e){return null!=e.userRoleType&&e.userRoleType.id==A}),I.userRoles.supervisors=I.userRoles.filter(function(e){return null!=e.userRoleType&&e.userRoleType.id==L}),I.userRoles.ess=I.userRoles.filter(function(e){return null!=e.userRoleType&&e.userRoleType.id==M}),I.adminRoles=n.getItemsForMultyselectAutocomplete(I.userRoles.admins,{id:"id",name:"display_name"}),I.supervisorRoles=n.getItemsForMultyselectAutocomplete(I.userRoles.supervisors,{id:"id",name:"display_name"}),I.essRoles=n.getItemsForMultyselectAutocomplete(I.userRoles.ess,{id:"id",name:"display_name"}),I.idpArrayForForm=n.getEnumAndTitleMapForSelect(I.idps,{name:"name",value:"id"}),I.externalService&&I.externalService.type&&"idp"==I.externalService.type.name&&I.externalService.idpId&&(I.idpIdExistsInOptions=_.find(I.idps,function(e){return e.id===I.externalService.idpId}),I.externalServiceIdp=e.orangeHRMIdp.data.data,void 0==I.idpIdExistsInOptions&&I.externalServiceIdp&&(I.allowToEnable=!1,I.idpArrayForForm["enum"].push(I.externalServiceIdp.id),I.idpArrayForForm.titleMap.push({value:I.externalServiceIdp.id,name:I.externalServiceIdp.name}))),S(),b(),E()})}function b(){I.schema={type:"object",title:"External Service",properties:{name:{title:"Menu Item Title",type:"string",maxLength:30},status:{title:"Status",type:"string","enum":I.statusArrayForForm["enum"]},source:{title:"Source",type:"string","enum":I.sourceArrayForForm["enum"]},url:{title:"Menu Item URL",type:"string",minLength:1,maxLength:2048},idp:{title:"OrangeHRM IdP",type:"string","enum":I.idpArrayForForm["enum"]},adminRoles:{title:l.getLocalizedCustom("Admin Roles"),type:"object"},supervisorRoles:{title:l.getLocalizedCustom("Supervisor Roles"),type:"object"},essRoles:{title:l.getLocalizedCustom("ESS Roles"),type:"object"}},required:["name","url","idp"]},I.form=[{type:"row",items:[{type:"text",htmlClass:"col-6",key:"name",placeholder:l.getLocalizedCustom("Type here"),validationMessage:{duplicationName:l.getLocalizedCustom("Already exists"),201:r.textLengthExceedValidation.message(I.schema.properties.name.maxLength),302:l.getLocalizedCustom("Required")},onChange:function(e){(void 0==I.externalService||void 0!=I.externalService&&e!=I.externalService.name)&&x(e)}},{type:"radiobuttons",htmlClass:"col-6",key:"status",titleMap:I.statusArrayForForm.titleMap,makeHorizontal:!0,onChange:function(e){I.statusChanged=1==e&&!I.allowToEnable&&I.initialIdpId&&I.model.idp!=I.initialIdpId,k()?I.alertMessage="Please select the user roles.":I.alertMessage="Please enable the IDP first.",E()}}]},{type:"row",items:[{type:"select",htmlClass:"col-6",key:"source",emptyOption:!1,titleMap:I.sourceArrayForForm.titleMap,onChange:function(){b(),(void 0==I.externalService||void 0!=I.externalService&&I.model.name!=I.externalService.name)&&x(I.model.name)}},{type:"text",condition:function(){return I.model.source===P},htmlClass:"col-6",key:"url",placeholder:l.getLocalizedCustom("Type here"),validationMessage:{email:r.url.message,201:r.textLengthExceedValidation.message(I.schema.properties.url.maxLength),302:l.getLocalizedCustom("Required")},$validators:{email:r.url.validator}},{type:"select",condition:function(){return I.model.source!==P},htmlClass:"col-6",key:"idp",emptyOption:!0,titleMap:I.idpArrayForForm.titleMap,validationMessage:{302:l.getLocalizedCustom("Required")}}]},{type:"row",items:[{type:"subheading",htmlClass:"col-12 cycle-details-sub-heading",title:l.getLocalizedCustom("Menu Item Display for"),required:!0},{type:"autocomplete-multiselect",htmlClass:"col-4",key:"adminRoles",choices:I.adminRoles},{type:"autocomplete-multiselect",htmlClass:"col-4",key:"supervisorRoles",choices:I.supervisorRoles},{type:"autocomplete-multiselect",htmlClass:"col-4",key:"essRoles",choices:I.essRoles}]}]}function C(t){if(I.isUserRolesDirty=!0,e.$broadcast("schemaFormValidate"),t.$valid&&F()&&k()){g.show();var a=angular.copy(I.model),n={};n.name=a.name,n.status=a.status,n.type=a.source,n.type==P&&(n.url=a.url),n.type==$&&(n.idp=a.idp);var r=[];r=r.concat(D(a.adminRoles)),r=r.concat(D(a.supervisorRoles)),r=r.concat(D(a.essRoles)),n.menuItemDisplayFor=r;var s=void 0!=I.externalService?"Successfully Updated":"Successfully Saved",d="Failed to Save";return v.saveExternalService(n,I.externalService).then(function(e){g.hide(),e.data.success?(o(!0),i.success(l.getLocalizedCustom(s))):(o(!1),i.error(l.getLocalizedCustom(d)))},function(e){g.hide(),o(!1),i.error(l.getLocalizedCustom(d))})}return c.when(!0)}function w(){o(!1)}function S(){if(I.model={name:"",status:1,source:P,url:"",idp:"",adminRoles:{},supervisorRoles:{},essRoles:{}},void 0!=I.externalService){I.model.name=I.externalService.name,I.model.status=I.externalService.status,I.model.source=I.externalService.type.id,I.model.url=I.externalService.url,I.model.idp=I.externalService.idpId?I.externalService.idpId:"",I.initialIdpId=I.model.idp;var e=I.externalService.menuItemDisplayFor.filter(function(e){return e.userRoleType==A}),t=I.externalService.menuItemDisplayFor.filter(function(e){return e.userRoleType==L}),a=I.externalService.menuItemDisplayFor.filter(function(e){return e.userRoleType==M});I.model.adminRoles=T({},e),I.model.supervisorRoles=T({},t),I.model.essRoles=T({},a)}}function D(e){var t=[];return angular.isObject(e)&&(t=Object.keys(e)),t}function T(e,t){for(var a=0;a<t.length;a++){var i=t[a].id,o={};o[i]=t[a].display_name,Object.assign(e,o)}return e}function x(t){I.pendingRequest=!0,I.debounceHolder.cancel(),I.debounceHolder=_.debounce(function(){""==t||null==t?e.$broadcast("schemaForm.error.name","duplicationName",!0):v.getExternalServices().then(function(a){if(a.data.data.length>0){var i=v.extractFieldValueFromData(a.data.data,"name",!0);i.indexOf(t.toLowerCase())>-1?e.$broadcast("schemaForm.error.name","duplicationName",l.getLocalizedCustom("Already exists")):e.$broadcast("schemaForm.error.name","duplicationName",!0)}else e.$broadcast("schemaForm.error.name","duplicationName",!0)},function(t){e.$broadcast("schemaForm.error.name","duplicationName",!0)})},500),I.debounceHolder()}function F(){return Object.keys(I.model.adminRoles).length>0||Object.keys(I.model.supervisorRoles).length>0||Object.keys(I.model.essRoles).length>0}function k(){return 0==I.model.status||I.allowToEnable||I.initialIdpId!=I.model.idp}function E(){I.alert={type:"danger",message:I.alertMessage,icon:"ohrm_delete_alert_warning",clickable:!1,condition:function(){return I.isUserRolesDirty&&!F()||!k()}}}var I=this;I.title=d,I.save=C,I.cancel=w,I.externalService=m;var A=1,M=2,L=3,P="1",$="2",N=[{name:"Enabled",value:"1"},{name:"Disabled",value:"0"}],O=[{name:"URL",value:P},{name:"OrangeHRM IdP",value:$}];I.statusArrayForForm=n.getEnumAndTitleMapForSelect(N,{name:"name",value:"value"}),I.sourceArrayForForm=n.getEnumAndTitleMapForSelect(O,{name:"name",value:"value"}),I.debounceHolder=_.debounce(function(){},0),I.isUserRolesDirty=!!I.externalService,I.allowToEnable=!0,I.alertMessage="Please select the user roles.",I.initialIdpId="",y()}angular.module("app.admin").controller("AdminEditServiceModalController",e),e.$inject=["$scope","$state","webservice","toast","close","formHelper","localizedMessages","formValidationHelper","$translate","$q","title","externalService","LOGIN","settingsService","$timeout","loader","$filter","externalServicesService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v){function y(){d(function(){o.show()});var e={permission:C(),settings:n.getSettings(),organizationInformation:i.call("organization","GET",[],{})};r.all(e).then(function(e){M.permissions=e.permission,M.permissions.read||a.go("403"),M.pageSize=e.settings.page_size,T(function(){w(),o.hide()},!0)},function(){o.hide(),a.go("403")})}function b(e,t,a){M.orderField=e,M.orderBy=t,M.page=a,A(),T(void 0)}function C(){return l.getSinglePermission(["external_services"],!1)}function w(){var e=[{name:"name",lable:"Menu Item Name",getter:"name",sortable:!0,sortAction:"sortAction"},{name:"status",lable:"Status",getter:"status",type:"oxd-status",sortable:!0,sortAction:"sortAction",formatter:function(e){return"1"==e?"Enabled":"Disabled"}},{name:"action",lable:"",getter:"id","class":"text-center",width:"20%",type:"oxd-action-button-panel",iconButtons:[{id:"delete-button",classes:"btn-list",text:"Delete",tooltip:{text:"Delete"},clickAction:function(e,t,a,i){E(new Array(a))},icon:"delete",displayCondition:function(e,t){return M.permissions["delete"]&&M.unDeletableIds&&M.unDeletableIds.indexOf(t.id)===-1}},{id:"edit-button",classes:"btn-list",text:"Edit",tooltip:{text:"Edit"},clickAction:function(e,t,a,i){S(a)},icon:"edit",displayCondition:function(e,t){return M.permissions.update&&M.unEditableIds&&M.unEditableIds.indexOf(t.id)===-1}}]}],t=[],a=D();M.listDefinition={tableId:"externalServicesList",name:"External Services",listClass:"classic-table hover selectable",selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:[],extraTD:[],showColumnsAnyway:!0,permission:M.permissions,columnWidths:a,listActions:t,showSelectableAlways:!1,showLoader:!0,pagination:!1,persistPagination:!0,listSpecificInitialSort:!0,clickableCondition:"id",unselectableIds:[],isSingleRowDeletable:function(e){return M.unDeletableIds&&M.unDeletableIds.indexOf(e.id)===-1},listTopBar:{getMessageForNoOfItemsSelected:function(e){return e?c.getLocalizedCustomWithVariables("({{number}}) External Service"+(e>1?"s":"")+" Selected",{number:e}):""},configurable:!1,title:{name:"External Services"}}},M.permissions.create&&(M.listDefinition.listTopBar.mainActionButton={id:"add-services-btn",label:"Add",icon:"add",nestedOptions:!1,onClick:function(e){k(e)}}),M.permissions["delete"]&&(M.listDefinition.listTopBar.onBulkDelete=function(e){E(e)},M.listDefinition.listTopBar.isBulkDeletable=function(e){return M.permissions["delete"]},M.listDefinition.listTopBar.isBulkDeleteDisabled=function(e){return _.intersection(e,M.unDeletableIds).length>0})}function S(e){void 0!=e&&v.getExternalService(e).then(function(e){var t=e.data.data,a=t.type;k(a,t)})}function D(){var e;return e=M.permissions["delete"]?["5%"]:[],e=e.concat(["45%","25%","25%"])}function T(e){return F(M.params,void 0,!1).then(function(t){var a=t.meta;M.unDeletableIds=[],M.unEditableIds=[],M.listData=t.data,M.totalDataCount=a.total,M.lastPage=x(),"function"==typeof e&&e()})}function x(){return Math.ceil(M.totalDataCount/M.pageSize)}function F(e,t,a){var i={};return i.page={page:M.page,limit:e.limit},i.sort={orderField:e.orderField,orderBy:e.orderBy},v.getExternalServices(i).then(function(e){return e.data})}function k(e,t){var a="Add External Services";void 0!=t&&(a="Edit External Service"),s.showModal("app/admin/externalServices/admin.edit_service_modal.html","AdminEditServiceModalController","modal",{title:a,id:"",externalService:t}).then(function(e){e&&T(void 0)})}function E(e){e.length>0&&0==_.intersection(e,M.unDeletableIds).length&&s.showDeleteConfirmationModal(c.getLocalizedCustom("The selected external service(s) will be deleted. Are you sure you want to continue?")).then(function(t){t===!0&&I(e)})}function I(e){e=e?e:M.selectedIds,v.deleteExternalServices(e).then(function(e){T(void 0),c.successToast("Successfully Deleted")},function(e){h.error(c.getLocalizedCustom(e.data.details))})}function A(){M.orderBy&&M.orderField&&(M.params.orderBy=M.orderBy,M.params.orderField=M.orderField)}var M=this;M.addExternalService=k,M.page=1,M.activePageNo=1,M.total=0,M.externalServices=[],M.params={},M.orderField="name",M.orderBy="ASC",M.sortAction=b,M.filters={},M.listData=[],M.selectedIds=[],M.selectedServices="",M.editExternalService=S,M.listConfig={};y()}angular.module("app.admin").controller("AdminExternalServicesController",e),e.$inject=["$scope","$rootScope","$state","webservice","loader","settingsService","datagroupPermissions","$q","modalHelperService","localizedMessages","$timeout","ModalService","$stateParams","$translate","formHelper","employeeService","toast","externalServicesService"]}(),function(){"use strict";function e(e){function t(t){return e.call("samlProvider/"+t,"GET",[],{})}function a(t){return e.call("externalServices","DELETE",{data:t},{})}function i(t){return e.call("externalServices","GET",[],t)}function o(t){return e.call("externalServices/"+t,"GET",[],{})}function n(t,a){var i="externalServices",o="POST";return void 0!=a&&""!=a.id&&(i+="/"+a.id,o="PATCH"),e.call(i,o,t,{})}function l(t){return e.call("userRoles","GET",[],t)}function r(t){return e.call("samlProvider","GET",[],t)}function s(e,t,a){var i=[];for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}var c={getExternalService:o,getExternalServices:i,deleteExternalServices:a,saveExternalService:n,getUserRoles:l,getOrangeHrmIdps:r,getOrangeHRMIdpById:t,extractFieldValueFromData:s};return c}angular.module("app.leave").service("externalServicesService",e),e.$inject=["webservice","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c){function d(){s.show(),p.loader=!0,n.getPermissions().then(function(e){if(p.permissions=e.inAppMarketing,p.permissions.read){var t=[];t.push(o.getSetting("allowed_image_types")),l.all(t).then(function(e){p.imageTypes=e[0],r.getInAppMarkeringData().then(function(e){p.model.contentLoadType=e.type,p.model.defaultSettingsStatus=e.status,p.model.url=e.url,g=e.url,p.model.imageUpload=e.image,f=angular.copy(e.image),p.fileName=e.image.filename,p.dataFetched=!0,p.loader=!1,m()})})}})["finally"](function(){s.hide(),p.loader=!1})}function m(){p.schema={type:"object",title:"In-App Marketing",properties:{contentLoadType:{title:"Content Loader",type:"string","enum":["url","image"]},defaultSettingsStatus:{title:"Enable In-App Marketing",type:"boolean"},url:{title:"URL",type:"string",maxLength:2048},imageUpload:{title:"Image Upload",type:"object"}},required:["contentLoadType","url","imageUpload"]},p.form=[{type:"row",items:[{type:"switch",htmlClass:"col-3",key:"defaultSettingsStatus"}]},{type:"row",items:[{type:"select",htmlClass:"col-3",emptyOption:!1,key:"contentLoadType",titleMap:[{value:"url",name:t.getLocalizedCustom("URL")},{value:"image",name:t.getLocalizedCustom("Image")}],validationMessage:{302:t.getLocalizedCustom("Required")},onChange:function(e){"url"==e?p.model.imageUpload=f:"image"==e&&(p.model.url=g)}},{type:"text",htmlClass:"col-9",key:"url",removePristine:!0,condition:"model.contentLoadType=='url'",validationMessage:{urlValidation:a.isValidUrl.message,302:t.getLocalizedCustom("Required"),201:a.textLengthExceedValidation.message(p.schema.properties.url.maxLength)},$validators:{urlValidation:a.isValidUrl.validator}},{type:"file",htmlClass:"col-9",key:"imageUpload",condition:"model.contentLoadType=='image'",filename:p.fileName,allowedFileTypes:p.imageTypes,maxSize:256e3,validationMessage:{fileSize:t.getLocalizedCustom("Attachment size exceeded"),fileType:t.getLocalizedCustom("Attachment type invalid")}}]}],e.addRequiredMessage(p.form)}function u(e){if(i.$broadcast("schemaFormValidate"),e.$valid){s.show();var a=angular.copy(p.model),o={};"url"==a.contentLoadType?(o.type=a.contentLoadType,o.status=a.defaultSettingsStatus,o.url=a.url,delete o.image):"image"==a.contentLoadType&&(o.type=a.contentLoadType,o.status=a.defaultSettingsStatus,o.image=a.imageUpload,delete o.url);var n="Successfully Updated",l="Failed to Update";r.updateInAppMarketingData(o).then(function(e){s.hide(),c.success(t.getLocalizedCustom(n)),"url"==a.contentLoadType?g=a.url:"image"==a.contentLoadType&&(f=a.imageUpload)},function(){s.hide(),c.error(t.getLocalizedCustom(l))})}}var p=this;p.title="In-App Marketing",p.model={},p.save=u,p.loader=!1,d(),p.dataFetched=!1,p.fileName=!1;var f={},g=""}angular.module("app.admin").controller("InAppMarketingController",e),e.$inject=["formHelper","localizedMessages","formValidationHelper","$scope","settingsService","datagroupPermissions","$q","inAppMarketingService","loader","toast"]}(),function(){"use strict";function e(e,t){function a(){return t.get("inAppMarketing",{},{useCache:!1}).then(function(e){return e.data.data})}function i(e){return t.call("inAppMarketing","PATCH",e).then(function(e){return e.data.data})}var o={getInAppMarkeringData:a,updateInAppMarketingData:i};return o}angular.module("app.admin").factory("inAppMarketingService",e),e.$inject=["$q","webservice"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){function m(){e.call("jobCategories","GET",[]).then(function(e){if(y.exsistingJobCategories=v(e.data.data,"name",!0),y.jobCategory.id){var t=y.exsistingJobCategories.indexOf(y.jobCategory.name.toLowerCase());y.exsistingJobCategories.splice(t,1)}u()})}function u(){y.schema={type:"object",title:"Job Category",properties:{name:{title:"Name",type:"string",maxLength:50}},required:["name"]},y.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"name",validationMessage:{duplicationJobCategories:t.getLocalizedCustom("Already exists"),302:t.getLocalizedCustom("Required"),201:d.textLengthExceedValidation.message(y.schema.properties.name.maxLength)},$validators:{duplicationJobCategories:p}}]}],s.addRequiredMessage(y.form),y.model={name:y.jobCategory.name}}function p(e){return""==e||(y.exsistingJobCategories?!(y.exsistingJobCategories.indexOf(e.toLowerCase())>-1):void 0)}function f(a){if(c.$broadcast("schemaFormValidate"),a.$valid){l.show(),angular.extend(y.jobCategory,y.model);var i=y.jobCategory.id,s="POST",d="jobCategories",m="saveSuccess";i?(s="PATCH",d+="/"+i,m="updateSuccess"):s="POST",e.call(d,s,y.model,{}).then(function(e){l.hide(),delete y.exsistingJobCategories,"POST"==s?o.unshift(e.data.data):"PATCH"==s&&g(y.jobCategory),t.showLocalizedToast(m)},function(e){l.hide(),r.success(e)}),n(!0)}}function g(e){for(var t=0;t<o.length;t++)if(o[t].id==e.id){angular.extend(o[t],e);break}}function h(){n(!1)}function v(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}var y=this;y.modalProperties=i;var b={};angular.copy(a,b),y.jobCategory=b,y.save=f,y.cancel=h,y.exsistingJobCategories,m()}angular.module("app.admin").controller("AdminEditJobCategoriesController",e),e.$inject=["webservice","localizedMessages","jobCategory","modalProperties","dataList","close","loader","toast","formHelper","$scope","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){s.show(),u.getSetting("page_size").then(function(e){E.pageSize=e,E.fetchJobCategories("Jobcategory","ASC",1)})}function f(e,t,a){var o={offset:(a-1)*E.pageSize,limit:E.pageSize,sortingFeild:E.SortingListFields[e],sortingOrder:t},r=[];r.push(n.call("jobCategories","GET",[],o)),r.push(d.getPermissions().then(function(e){return void 0!==e.admin_job_categories&&e.admin_job_categories.read?e.admin_job_categories:i.reject({statusText:"Forbidden"})})),i.all(r).then(function(e){E.permissions=e[1],h(),E.jobCategories=e[0].data.data,E.totalDataCount=e[0].data.meta.total,E.dataInCurruntPage=e[0].data.data.length,E.page=a,E.lastPage=Math.ceil(E.totalDataCount/E.pageSize),g(),s.hide(),0==E.jobCategories.length&&l.infoToast("No Records Found")},function(e){s.hide(),m.go("403")})}function g(){E.jobCategoriesListHelper=new t.list(E.listData.jobCategories,E.jobCategories),E.selectAll=E.jobCategoriesListHelper.selectAllItems,E.deselectAll=E.jobCategoriesListHelper.deselectAllItems}function h(){E.panelInfo={jobcategoriesInfo:{title:"",icon:"images/pim/icon_work.svg"}},v()}function v(){var e=[{name:"Jobcategory",lable:"Job Category",getter:"name",sortable:!0,sortAction:"fetchJobCategories",formatter:function(e){return l.getLocalizedCustom(e)}}],t=[{colspan:3}],a=[{"class":"edit_item",clickAction:"editJobCategories",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:E.permissions["delete"]}];E.listData={jobCategories:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:E.permissions,listActions:i,pagination:!0}}}function y(){E.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function b(e){o.showModal({templateUrl:"app/admin/jobCategories/job_categories_modal.html",controller:"AdminEditJobCategoriesController",controllerAs:"modal",inputs:{jobCategory:e,dataList:E.jobCategories,modalProperties:{title:"Edit Job Category"}}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function C(){if(E.listData.jobCategories.selected.length>0){var e=E.listData.jobCategories.selected.length;s.show(),n.call("jobCategories","DELETE",{data:E.listData.jobCategories.selected
},{}).then(function(t){s.hide(),l.showLocalizedToast("deleteSuccess"),E.total-=e,w(E.listData.jobCategories.selected)},function(e){s.hide(),c.success(e)})}}function w(e){for(var t=E.jobCategories.length-1;t>=0;t--){var a=e.indexOf(E.jobCategories[t].id);a>-1&&(e.splice(a,1),E.jobCategories.splice(t,1))}}function _(e){var t=e.obj;if(t.selected)E.listData.jobCategories.selected.push(t.id);else{var a=E.listData.jobCategories.selected.indexOf(t.id);a>-1&&E.listData.jobCategories.selected.splice(a,1)}}function S(){E.listData.jobCategories.selected.length>0&&o.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&(C(),x(E.listData.jobCategories.selected.length))})})}function D(){var e={name:""};o.showModal({templateUrl:"app/admin/jobCategories/job_categories_modal.html",controller:"AdminEditJobCategoriesController",controllerAs:"modal",inputs:{jobCategory:e,dataList:E.jobCategories,modalProperties:{title:"Add Job Category"}}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e&&T()})})}function T(){E.totalDataCount=E.totalDataCount+1,E.dataInCurruntPage=E.dataInCurruntPage+1}function x(e){E.totalDataCount=E.totalDataCount-e,E.dataInCurruntPage=E.dataInCurruntPage-e}function F(){close(!0)}function k(){close(!1)}var E=this;E.title="",E.jobCategories="",E.editJobCategories=b,E.deleteJobCategories=C,E.changeSelection=_,E.deleteSelection=S,E.addJobCategory=D,E.confirm=F,E.cancel=k,E.fetchJobCategories=f,E.SortingListFields={Jobcategory:"name"},E.pageSize=50,E.page=1,E.lastPage=0,E.totalDataCount=0,E.dataInCurruntPage=0,p(),y()}angular.module("app.admin").controller("AdminJobCategoriesController",e),e.$inject=["logger","listHelper","$window","$q","ModalService","webservice","localizedMessages","$rootScope","loader","toast","datagroupPermissions","$state","settingsService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p){function f(){var e=[];e.push(m.getSetting("max_attachment_size")),e.push(t.call("jobTitles","GET",[])),S.jobTitle.id&&e.push(t.call("jobSpecificationAttachment","GET",[],{id:S.jobTitle.id})),d.all(e).then(function(e){if(S.maxAttachmentSize=e[0],S.exsistingJobTitles=_(e[1].data.data,"jobTitleName",!0),S.isJobTitleEditing&&null!=e[2].data.data.fileType&&(S.currentAttachmentName=e[2].data.data.fileName,S.isJobSpecificationAttached=!0,S.attachmentId=e[2].data.data.attachmentId,S.jobTitle.jobSpecification="hasJobSpec"),S.isJobTitleEditing){var t=S.exsistingJobTitles.indexOf(S.jobTitle.jobTitleName.toLowerCase().trim());S.exsistingJobTitles.splice(t,1)}g()})}function g(){S.schema={type:"object",title:"Job Titles",readonly:!S.permission,properties:{jobTitleName:{title:"Job Title",type:"string",maxLength:100},jobDescription:{title:"Job Description",type:"string",maxLength:400},currentJobSpecification:{title:"Current Job Specification",type:"string","enum":["keepCurrent","deleteCurrent","replaceCurrent"]},jobSpecification:{title:"Job Specification",type:"object"},note:{title:"Note",type:"string",maxLength:400}},required:["jobTitleName"]},S.isJobTitleEditing&&S.isJobSpecificationAttached?S.form=[{type:"row",items:[{type:"text",htmlClass:"col-6",key:"jobTitleName",validationMessage:{duplicationJobTitle:e.getLocalizedCustom("Already exists"),302:e.getLocalizedCustom("Required"),201:u.textLengthExceedValidation.message(S.schema.properties.jobTitleName.maxLength)},$validators:{duplicationJobTitle:h}},{type:"textarea",htmlClass:"col-12",key:"jobDescription",validationMessage:{201:u.textLengthExceedValidation.message(S.schema.properties.jobDescription.maxLength)}},{type:"attachmentWithModifyOptions",htmlClass:"col-12",titleMap:[{value:"keepCurrent",name:"Keep Current"},{value:"deleteCurrent",name:"Delete Current"},{value:"replaceCurrent",name:"Replace Current"}],key:"currentJobSpecification",link:a.baseUrl+"admin/viewJobSpec/attachId/"+S.attachmentId,fileName:S.currentAttachmentName},{type:"file",htmlClass:"col-12",key:"jobSpecification",onFileChange:C,maxSize:S.maxAttachmentSize,allowedFileTypes:T,validationMessage:{fileSize:e.getLocalizedCustom("Attachment size exceeded"),fileType:e.getLocalizedCustom("Attachment type invalid")},condition:"model.currentJobSpecification=='replaceCurrent'"},{type:"textarea",htmlClass:"col-12",key:"note",validationMessage:{201:u.textLengthExceedValidation.message(S.schema.properties.note.maxLength)}}]}]:S.form=[{type:"row",items:[{type:"text",htmlClass:"col-6",key:"jobTitleName",validationMessage:{duplicationJobTitle:e.getLocalizedCustom("Already exists"),302:e.getLocalizedCustom("Required"),201:u.textLengthExceedValidation.message(S.schema.properties.jobTitleName.maxLength)},$validators:{duplicationJobTitle:h}},{type:"textarea",htmlClass:"col-12",key:"jobDescription",validationMessage:{201:u.textLengthExceedValidation.message(S.schema.properties.jobDescription.maxLength)}},{type:"file",htmlClass:"col-12",key:"jobSpecification",maxSize:S.maxAttachmentSize,onFileChange:C,allowedFileTypes:T,validationMessage:{fileSize:e.getLocalizedCustom("Attachment size exceeded"),fileType:e.getLocalizedCustom("Attachment type invalid")}},{type:"textarea",htmlClass:"col-12",key:"note",validationMessage:{201:u.textLengthExceedValidation.message(S.schema.properties.note.maxLength)}}]}],S.model={jobTitleName:S.jobTitle.jobTitleName,jobDescription:S.jobTitle.jobDescription,note:S.jobTitle.note,currentJobSpecification:"keepCurrent"}}function h(e){return e=e.trim(),""==e||(S.exsistingJobTitles?!(S.exsistingJobTitles.indexOf(e.toLowerCase())>-1):void 0)}function v(a){if(c.$broadcast("schemaFormValidate"),a.$valid&&S.permission){r.show(),S.isJobTitleEditing&&!S.isJobSpecificationAttached&&(S.model.jobSpecification?S.model.currentJobSpecification="newAttachment":S.model.currentJobSpecification="keepCurrent"),angular.extend(S.jobTitle,S.model);var i=S.jobTitle.id,n="POST",d="jobTitles",m="saveSuccess";i?(n="PATCH",d+="/"+i,m="updateSuccess"):n="POST",t.call(d,n,y(S.jobTitle),{}).then(function(a){r.hide(),delete S.exsistingJobTitles,"POST"==n?o.unshift(a.data.data):"PATCH"==n&&b(S.jobTitle),e.showLocalizedToast(m),t.clearCache("jobTitles"),p.dispatch("core/subunits/dropJobTitleData")},function(e){r.hide(),s.success(e)}),l(!0)}}function y(e){var t={currentJobSpecification:e.currentJobSpecification,id:e.id,jobDescription:e.jobDescription,jobSpecification:e.jobSpecification,jobTitleName:e.jobTitleName,note:e.note};return t}function b(e){for(var t=0;t<o.length;t++)if(o[t].id==e.id){angular.extend(o[t],e);break}}function C(e){S.jobTitle.jobSpecification=e}function w(){l(!1)}function _(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase().trim()):i.push(e[o][t].trim()));return i}var S=this;S.exsistingJobTitles,S.permission=n;var D={};angular.copy(i,D),S.jobTitle=D,S.model={},S.currentAttachmentName="",S.isJobSpecificationAttached=!1,S.isJobTitleEditing=!1;var T="";S.jobTitle.id?(S.title="Edit Job Title",S.isJobTitleEditing=!0):S.title="Add Job Title",S.save=v,S.cancel=w,f(),m.getSettings().then(function(e){T=e.attachmentFileTypes})}angular.module("app.admin").controller("AdminEditJobTitlesController",e),e.$inject=["localizedMessages","webservice","LOGIN","jobTitle","dataList","permission","close","loader","toast","$scope","$q","settingsService","formValidationHelper","$store"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p){function f(){r.show(),u.getSetting("page_size").then(function(e){I.pageSize=e,I.fetchJobTitles("jobTitle","ASC",1)})}function g(){I.panelInfo={jobTitlesInfo:{icon:"images/pim/icon_work.svg"}},h()}function h(){var e=[{name:"jobTitle",lable:"Job Title",getter:"jobTitleName",clickAction:"editJobTitles",sortable:!0,sortAction:"fetchJobTitles"},{name:"jobDescription",lable:"Job Description",getter:"jobDescription"}],t=[{colspan:4}],a=[{"class":"edit_item",clickAction:"editJobTitles",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:I.permissions["delete"]}];I.listData={jobTitles:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:I.permissions,listActions:i,pagination:!0}},I.permissions["delete"]?I.listData.jobTitles.columnWidths=["5%","30%","60%","5%"]:I.listData.jobTitles.columnWidths=["35%","60%","5%"]}function v(e,t,i){r.show();var o={offset:(i-1)*I.pageSize,limit:I.pageSize,sortingField:I.SortingListFields[e],sortingOrder:t},l=[];d.getSinglePermission("job_titles").then(function(e){e.read?(l.push(n.call("jobTitles","GET",[],o)),a.all(l).then(function(t){I.permissions=e,g(),I.jobTitles=t[0].data.data,I.totalDataCount=t[0].data.meta.total,I.dataInCurruntPage=t[0].data.data.length,I.page=i,I.lastPage=Math.ceil(I.totalDataCount/I.pageSize),y(),r.hide(),0==I.jobTitles.length&&c.infoToast("No Records Found")},function(e){r.hide(),s.warning(c.getLocalizedCustom(e.statusText,null))})):(r.hide(),m.go("403"))})}function y(){I.jobTitlesListHelper=new t.list(I.listData.jobTitles,I.jobTitles),I.selectAll=I.jobTitlesListHelper.selectAllItems,I.deselectAll=I.jobTitlesListHelper.deselectAllItems}function b(){I.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function C(e){I.permissions.update||(I.permissions.update=!1),o.showModal("app/admin/jobTitles/job_titles_modal.html","AdminEditJobTitlesController","modal",{jobTitle:e,dataList:I.jobTitles,permission:I.permissions.update})}function w(){if(I.listData.jobTitles.selected.length>0){var e=I.listData.jobTitles.selected.length;r.show(),n.call("jobTitles","DELETE",{data:I.listData.jobTitles.selected},{}).then(function(t){r.hide(),c.showLocalizedToast("deleteSuccess"),I.total-=e,_(I.listData.jobTitles.selected),p.dispatch("core/subunits/dropJobTitleData"),n.clearCache("jobTitles")},function(e){r.hide(),s.success(e)})}}function _(e){for(var t=I.jobTitles.length-1;t>=0;t--){var a=e.indexOf(I.jobTitles[t].id);a>-1&&(e.splice(a,1),I.jobTitles.splice(t,1))}}function S(e){var t=e.obj;if(t.selected)I.listData.jobTitles.selected.push(t.id);else{var a=I.listData.jobTitles.selected.indexOf(t.id);a>-1&&I.listData.jobTitles.selected.splice(a,1)}}function D(){I.listData.jobTitles.selected.length>0&&o.showDeleteConfirmationModal().then(function(e){e===!0&&(w(),F(I.listData.jobTitles.selected.length))})}function T(){if(I.permissions.create||(I.permissions.create=!1),I.permissions.create){var e={jobTitleName:""};o.showModal("app/admin/jobTitles/job_titles_modal.html","AdminEditJobTitlesController","modal",{jobTitle:e,dataList:I.jobTitles,permission:I.permissions.create}).then(function(e){e===!0&&x()})}}function x(){I.totalDataCount=I.totalDataCount+1,I.dataInCurruntPage=I.dataInCurruntPage+1}function F(e){I.totalDataCount=I.totalDataCount-e,I.dataInCurruntPage=I.dataInCurruntPage-e}function k(){close(!0)}function E(){close(!1)}var I=this;I.title="Job Titles",I.jobTitles="",I.editJobTitles=C,I.deleteJobTitles=w,I.changeSelection=S,I.deleteSelection=D,I.addJobTitles=T,I.fetchJobTitles=v,I.confirm=k,I.cancel=E,I.SortingListFields={jobTitle:"jobTitleName"},I.pageSize=50,I.page=1,I.lastPage=0,I.totalDataCount=0,I.dataInCurruntPage=0,f(),b()}angular.module("app.admin").controller("AdminJobTitlesController",e),e.$inject=["logger","listHelper","$q","$window","modalHelperService","webservice","$rootScope","loader","toast","localizedMessages","datagroupPermissions","$state","settingsService","$store"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){a.call("languages","GET",[]).then(function(e){if(b.exsistingLanguages=y(e.data.data,"name",!0),b.language.id){var t=b.exsistingLanguages.indexOf(b.language.name.toLowerCase());b.exsistingLanguages.splice(t,1)}p()})}function p(){b.schema={type:"object",title:"Languages",properties:{name:{title:"Name",type:"string",maxLength:120}},required:["name"]},b.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"name",validationMessage:{duplicationLanguages:t.getLocalizedCustom("Already exists"),302:t.getLocalizedCustom("Required"),201:m.textLengthExceedValidation.message(b.schema.properties.name.maxLength)},$validators:{duplicationLanguages:f}}]}],d.addRequiredMessage(b.form),b.model={name:b.language.name}}function f(e){return""==e||(b.exsistingLanguages?!(b.exsistingLanguages.indexOf(e.toLowerCase())>-1):void 0)}function g(e){if(c.$broadcast("schemaFormValidate"),e.$valid){l.show(),angular.extend(b.language,b.model);var i=b.language.id,s="POST",d="languages",m="saveSuccess";i?(s="PATCH",d+="/"+i,m="updateSuccess"):(s="POST",m="saveSuccess"),a.call(d,s,b.model,{}).then(function(e){l.hide(),delete b.exsistingLanguages,"POST"==s?o.unshift(e.data.data):"PATCH"==s&&h(b.language),t.showLocalizedToast(m)},function(e){l.hide(),r.success(e)}),n(!0)}}function h(e){for(var t=0;t<o.length;t++)if(o[t].id==e.id){angular.extend(o[t],e);break}}function v(){n(!1)}function y(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}var b=this,C={};angular.copy(i,C),b.language=C,b.save=g,b.cancel=v,b.exsistingLanguages,b.language.id?b.title="Edit Language":b.title="Add Language",u()}angular.module("app.admin").controller("AdminEditLanguageController",e),e.$inject=["logger","localizedMessages","webservice","language","dataList","close","loader","toast","$rootScope","$scope","formHelper","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){s.show(),m.getSetting("page_size").then(function(e){k.pageSize=e,k.fetchLanguages("name","ASC",1)})}function p(e,t,a){var o={offset:(a-1)*k.pageSize,limit:k.pageSize,sortingFeild:k.SortingListFields[e],sortingOrder:t},r=[];r.push(l.call("languages","GET",[],o)),r.push(l.call("permissions/dataGroup/admin_languages","GET",[],{})),i.all(r).then(function(e){k.permissions=e[1].data.data,g(),k.languages=e[0].data.data,k.totalDataCount=e[0].data.meta.total,k.dataInCurruntPage=e[0].data.data.length,k.page=a,k.lastPage=Math.ceil(k.totalDataCount/k.pageSize),f(),s.hide(),0==k.languages.length&&n.infoToast("No Records Found")},function(e){s.hide(),d.go("403")})}function f(){k.languagesListHelper=new t.list(k.listData.languages,k.languages),k.selectAll=k.languagesListHelper.selectAllItems,k.deselectAll=k.languagesListHelper.deselectAllItems}function g(){k.panelInfo={languagesInfo:{icon:"images/admin/icon_work.svg"}},h()}function h(){var e=[{name:"name",lable:"Language",getter:"name",sortable:!0,sortAction:"fetchLanguages"}],t=[{colspan:3}],a=[{"class":"edit_item",clickAction:"editLanguage",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:k.permissions["delete"]}];k.listData={languages:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:k.permissions,listActions:i,columnWidths:["5%","90%","5%"],pagination:!0}}}function v(){k.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function y(e){o.showModal({templateUrl:"app/admin/languages/languages_modal.html",controller:"AdminEditLanguageController",controllerAs:"modal",inputs:{language:e,dataList:k.languages}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function b(){if(k.listData.languages.selected.length>0){var e=k.listData.languages.selected.length;s.show(),l.call("languages","DELETE",{data:k.listData.languages.selected},{}).then(function(t){s.hide();var a="deleteSuccess";n.showLocalizedToast(a),k.total-=e,C(k.listData.languages.selected)},function(e){s.hide(),c.success(e)})}}function C(e){for(var t=k.languages.length-1;t>=0;t--){var a=e.indexOf(k.languages[t].id);a>-1&&(e.splice(a,1),k.languages.splice(t,1))}}function w(e){var t=e.obj;if(t.selected)k.listData.languages.selected.push(t.id);else{var a=k.listData.languages.selected.indexOf(t.id);a>-1&&k.listData.languages.selected.splice(a,1)}}function _(){k.listData.languages.selected.length>0&&o.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&(b(),T(k.listData.languages.selected.length))})})}function S(){var e={name:""};o.showModal({templateUrl:"app/admin/languages/languages_modal.html",controller:"AdminEditLanguageController",controllerAs:"modal",inputs:{language:e,dataList:k.languages}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){D()})})}function D(){k.totalDataCount=k.totalDataCount+1,k.dataInCurruntPage=k.dataInCurruntPage+1}function T(e){k.totalDataCount=k.totalDataCount-e,k.dataInCurruntPage=k.dataInCurruntPage-e}function x(){close(!0)}function F(){close(!1)}var k=this;k.title="Languages",k.languages="",k.editLanguage=y,k.deleteLanguages=b,k.changeSelection=w,k.deleteSelection=_,k.addLanguages=S,k.confirm=x,k.cancel=F,k.fetchLanguages=p,k.SortingListFields={name:"name"},k.pageSize=50,k.page=1,k.lastPage=0,k.totalDataCount=0,k.dataInCurruntPage=0,k.tempEmpNo=r.empNumber,u(),v()}angular.module("app.admin").controller("AdminLanguagesController",e),e.$inject=["logger","listHelper","$window","$q","ModalService","localizedMessages","webservice","$rootScope","loader","toast","$state","settingsService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h){function v(){h.show(),u.getPermissions().then(function(e){_.permissions=e.ldap_configuration,_.permissions.read?r.call("ldapAuthenticationSettings","GET",[]).then(function(e){_.ldapConfiguration=e.data.data,y(),b(),h.hide()},function(e){h.hide(),f.go("403")}):(h.hide(),f.go("403"))})}function y(){_.schema={type:"object",title:"Ldap Authentication Settings",readonly:!0,properties:{implementation:{title:"LDAP Implementation",type:"string","enum":["OpenLDAP","ActiveDirectory"]},status:{title:"Enable LDAP Authentication",type:"boolean"},isAnonymous:{title:"Use Anonymous Binding",type:"boolean","default":!0},server:{title:"LDAP Server",type:"string"},port:{title:"LDAP Port",type:"string",maxLength:100},userSuffix:{title:"LDAP User Suffix",type:"string",maxLength:100},filterFields:{title:"LDAP Filter Fields",type:"string",maxLength:100},protocol:{title:"LDAP Protocol",type:"string","enum":["ldap","ldaps"]},username:{title:"LDAP Bind Username ",type:"string"},password:{title:"LDAP Bind Password",type:"string"}},required:["server","userSuffix","username","password"]},_.permissions.update&&(_.schema.readonly=!1),_.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l4",key:"server",placeholder:"192.168.1.200 or my.ldaphost.org",validationMessage:{302:e.getLocalizedCustom("Required"),serverAddressValidation:g.serverAddress.message},$validators:{serverAddressValidation:g.serverAddress.validator}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l4",key:"port",placeholder:"389",validationMessage:{201:g.textLengthExceedValidation.message(_.schema.properties.port.maxLength)}}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l4",key:"implementation",titleMap:[{value:"OpenLDAP",name:"OpenLDAP"},{value:"ActiveDirectory",name:"MS Active Directory"}]}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l4",key:"protocol",titleMap:[{value:"ldap",name:"LDAP"},{value:"ldaps",name:"LDAPS"}]}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l4",key:"userSuffix",placeholder:"u=john,dc=orangehrm,dc=com",validationMessage:{302:e.getLocalizedCustom("Required"),201:g.textLengthExceedValidation.message(_.schema.properties.userSuffix.maxLength)}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l4",key:"filterFields",placeholder:"cn,uid",validationMessage:{201:g.textLengthExceedValidation.message(_.schema.properties.filterFields.maxLength)}}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l4",key:"status"}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l4",key:"isAnonymous",onChange:function(){o.$broadcast("schemaFormRedraw")}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l6",key:"username",condition:"!model.isAnonymous",validationMessage:{302:e.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row",items:[{type:"password",htmlClass:"col s12 m12 l6",key:"password",condition:"!model.isAnonymous",validationMessage:{302:e.getLocalizedCustom("Required")}}]}],p.addRequiredMessage(_.form)}function b(){_.model.server=_.ldapConfiguration.server,_.model.port=_.ldapConfiguration.port,_.model.protocol=_.ldapConfiguration.protocol?_.ldapConfiguration.protocol:"",_.model.userSuffix=_.ldapConfiguration.userSuffix,_.model.implementation=_.ldapConfiguration.implementation?_.ldapConfiguration.implementation:"",_.model.username=_.ldapConfiguration.username,_.model.password=""==_.ldapConfiguration.password?"********":_.ldapConfiguration.password,_.model.status=_.ldapConfiguration.statusCheckboxAttributes,_.model.isAnonymous=_.ldapConfiguration.isAnonymousCheckboxAttributes,_.model.filterFields=_.ldapConfiguration.filterFields}function C(e){o.$broadcast("schemaFormValidate"),e.$valid&&w()}function w(){var t={};angular.copy(_.model,t),_.model.status?t.status="Enabled":t.status="Disabled",_.model.isAnonymous?t.isAnonymous="yes":t.isAnonymous="no",t.password="********"!=_.model.password?_.model.password:"",r.call("ldapAuthenticationSettings","PATCH",t,{}).then(function(t){e.showLocalizedToast("saveSuccess")})}var _=this;_.onSubmit=C,_.title="LDAP Configuration",_.setFormDefaults=b,_.submitLdapAuthentication=w,_.ldapConfiguration,_.model={},v()}angular.module("app.admin").controller("AdminLdapAuthenticationController",e),e.$inject=["localizedMessages","logger","$q","$rootScope","$scope","$window","$stateParams","webservice","$timeout","toast","pimHelper","ModalService","datagroupPermissions","formHelper","$state","formValidationHelper","loader"]}(),function(){"use strict";function e(e,t){function a(){return e.call("ldap/enabled","GET",[],{}).then(function(e){return!!e.data.data&&e.data.data.enabled},function(e){return!1})}function i(){var a=t.defer();return e.call("ldap/enabled_from_licence","GET",[],{}).then(function(e){a.resolve(!0)},function(e){a.resolve(!1)}),a.promise}function o(){var a=t.defer();return e.call("ldapAuthenticationSettings","GET",[],{}).then(function(e){a.resolve(e)},function(e){a.resolve(!1)}),a.promise}function n(t){return e.call("ldapAuthenticationSettings","PATCH",t,{})}var l={fetch:o,save:n,isEnabled:a,isEnabledFromLicence:i};return l}angular.module("app.leave").service("ldapAuthenticationService",e),e.$inject=["webservice","$q"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){t.call("licenses","GET",[]).then(function(e){if(C.exsistingLicenses=b(e.data.data,"name",!0),C.license.id){var t=C.exsistingLicenses.indexOf(C.license.name.toLowerCase());C.exsistingLicenses.splice(t,1)}f()})}function f(){C.schema={type:"object",title:"License",properties:{name:{title:"Name",type:"string",maxLength:100}},required:["name"]},C.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"name",validationMessage:{duplicationLicenses:a.getLocalizedCustom("Already exists"),302:a.getLocalizedCustom("Required"),201:u.textLengthExceedValidation.message(C.schema.properties.name.maxLength)},$validators:{duplicationLicenses:g}}]}],m.addRequiredMessage(C.form),C.model={name:C.license.name}}function g(e){return""==e||(C.exsistingLicenses?!(C.exsistingLicenses.indexOf(e.toLowerCase())>-1):void 0)}function h(e){if(d.$broadcast("schemaFormValidate"),e.$valid){r.show(),angular.extend(C.license,C.model);var i=C.license.id,o="POST",c="licenses",m="saveSuccess";i?(o="PATCH",c+="/"+i,m="updateSuccess"):(o="POST",m="saveSuccess"),t.call(c,o,C.model,{}).then(function(e){r.hide(),delete C.exsistingLicenses,"POST"==o?n.unshift(e.data.data):"PATCH"==o&&v(C.license),a.showLocalizedToast(m)},function(e){r.hide(),s.success(e)}),l(!0)}}function v(e){for(var t=0;t<n.length;t++)if(n[t].id==e.id){angular.extend(n[t],e);break}}function y(){l(!1)}function b(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}var C=this;C.modalProperties=o;var w={};angular.copy(i,w),C.license=w,C.save=h,C.cancel=y,C.exsistingLicenses,p()}angular.module("app.admin").controller("AdminEditLicensesController",e),e.$inject=["logger","webservice","localizedMessages","license","modalProperties","dataList","close","loader","toast","$rootScope","$scope","formHelper","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){s.show(),m.getSetting("page_size").then(function(e){k.pageSize=e,k.fetchLicense("license","ASC",1)})}function p(){k.panelInfo={licensesInfo:{icon:"images/pim/icon_work.svg"}},f()}function f(){var e=[{name:"license",lable:"License",getter:"name",sortable:!0,sortAction:"fetchLicense"}],t=[{colspan:3}],a=[{"class":"edit_item",clickAction:"editLicenses",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:k.permissions["delete"]}];k.listData={licenses:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:k.permissions,listActions:i,pagination:!0}}}function g(e,t,a){s.show();var o={offset:(a-1)*k.pageSize,limit:k.pageSize,sortingFeild:k.SortingListFields[e],sortingOrder:t},r=[];r.push(n.call("licenses","GET",[],o)),r.push(n.call("permissions/dataGroup/admin_licenses","GET",[],{})),i.all(r).then(function(e){k.permissions=e[1].data.data,p(),k.licenses=e[0].data.data,k.totalDataCount=e[0].data.meta.total,k.dataInCurruntPage=e[0].data.data.length,k.page=a,k.lastPage=Math.ceil(k.totalDataCount/k.pageSize),h(),s.hide(),0==k.licenses.length&&l.infoToast("No Records Found")},function(e){s.hide(),d.go("403")})}function h(){k.licensesListHelper=new t.list(k.listData.licenses,k.licenses),k.selectAll=k.licensesListHelper.selectAllItems,k.deselectAll=k.licensesListHelper.deselectAllItems}function v(){k.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function y(e){o.showModal({templateUrl:"app/admin/licenses/licenses_modal.html",controller:"AdminEditLicensesController",controllerAs:"modal",inputs:{license:e,dataList:k.licenses,modalProperties:{title:"Edit License"}}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function b(){if(k.listData.licenses.selected.length>0){var e=k.listData.licenses.selected.length;s.show(),n.call("licenses","DELETE",{data:k.listData.licenses.selected},{}).then(function(t){s.hide(),l.showLocalizedToast("deleteSuccess"),k.total-=e,C(k.listData.licenses.selected)},function(e){s.hide(),c.success(e)})}}function C(e){for(var t=k.licenses.length-1;t>=0;t--){var a=e.indexOf(k.licenses[t].id);a>-1&&(e.splice(a,1),k.licenses.splice(t,1))}}function w(e){var t=e.obj;if(t.selected)k.listData.licenses.selected.push(t.id);else{var a=k.listData.licenses.selected.indexOf(t.id);a>-1&&k.listData.licenses.selected.splice(a,1)}}function _(){k.listData.licenses.selected.length>0&&o.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&(b(),T(k.listData.licenses.selected.length))})})}function S(){var e={name:""};o.showModal({templateUrl:"app/admin/licenses/licenses_modal.html",controller:"AdminEditLicensesController",controllerAs:"modal",inputs:{license:e,dataList:k.licenses,modalProperties:{title:"Add License"}}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e&&D()})})}function D(){k.totalDataCount=k.totalDataCount+1,k.dataInCurruntPage=k.dataInCurruntPage+1}function T(e){k.totalDataCount=k.totalDataCount-e,k.dataInCurruntPage=k.dataInCurruntPage-e}function x(){close(!0)}function F(){close(!1)}var k=this;k.title="licenses",k.licenses="",k.editLicenses=y,k.deleteLicenses=b,k.changeSelection=w,k.deleteSelection=_,k.fetchLicense=g,k.addLicense=S,k.confirm=x,k.cancel=F,k.SortingListFields={license:"name"},k.pageSize=50,k.page=1,k.lastPage=0,k.totalDataCount=0,k.dataInCurruntPage=0,u(),v()}angular.module("app.admin").controller("AdminLicensesController",e),e.$inject=["logger","listHelper","$window","$q","ModalService","webservice","localizedMessages","$rootScope","loader","toast","$state","settingsService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g){function h(){g.show();var t=[];t.push(s.call("localizationLanguages","GET",[])),t.push(s.call("localizationDateFormats","GET",[])),t.push(s.call("localization","GET",[])),t.push(s.call("permissions/dataGroup/admin_localization","GET",[],{})),i.all(t).then(function(t){D.languageList=t[0].data.data,D.dateFormatList=t[1].data.data,D.supportedList=D.languageList,D.existingLanguage=t[2].data.existingLanguage,D.existingUseBrowserLanguage=t[2].data.existingUseBrowserLanguage,D.existingDateFormat=t[2].data.existingDateFormat,D.permissions=t[3].data.data,D.languageList=_(D.languageList),D.languageList.languageListTitleMap=p.getSortedObjectList(D.languageList.languageListTitleMap,"name","ASC"),D.dateFormatList=S(D.dateFormatList),v(),b(),g.hide(),null!==localStorage.getItem("toast")&&(e.showLocalizedToast(localStorage.getItem("toast")),localStorage.removeItem("toast"))},function(e){g.hide(),f.go("403")})}function v(){D.formSchema={type:"object",title:"Localization",properties:{language:{title:"Language",type:"string","enum":D.languageList.languageListEnum},useBrowserLanguageCheckBox:{title:"Use browser language instead of the above ",type:"boolean"},dateFormat:{title:"Date Format",type:"string","enum":D.dateFormatList.dateFormatListEnum}},required:["language","dateFormat"]},D.form=[{type:"section",htmlClass:"row ",items:[{type:"select",htmlClass:"col s12 m12 l5",titleMap:D.languageList.languageListTitleMap,key:"language",validationMessage:{302:e.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row",items:[{htmlClass:"col s12 m12 l5 localization-language-check-box",key:"useBrowserLanguageCheckBox"},{type:"help",htmlClass:"col localization-language-supporting",helpvalue:"(<a>"+e.getLocalizedCustom("Supported languages")+"</a>)",onClick:D.showSupportedLanguages,validationMessage:{302:e.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l5",titleMap:D.dateFormatList.dateFormatListTitleMap,key:"dateFormat"}]},{type:"section",htmlClass:"row",items:[{type:"help",htmlClass:"col s12 m12 l5 align-left localization-language-language-help",helpvalue:' <a title="languageHelp" target="_blank" href="http://www.orangehrm.com/localization-help.shtml">'+e.getLocalizedCustom("Language and font help")+"</a>"}]}],p.addRequiredMessage(D.form)}function y(){u.showModal({templateUrl:"app/admin/localization/supported_languages_modal.html",controller:"AdminSupportedLanguagesController",controllerAs:"modal",inputs:{supportedList:D.supportedList}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function b(){D.formModel.language=D.existingLanguage,D.formModel.useBrowserLanguageCheckBox=D.existingUseBrowserLanguage,D.formModel.dateFormat=D.existingDateFormat}function C(e){if(n.$broadcast("schemaFormValidate"),e.$valid)return w()}function w(){return D.formModel.browserLanguage=l.navigator.language||l.navigator.userLanguage,
s.call("localization","PATCH",D.formModel,{}).then(function(e){location.reload(),localStorage.setItem("toast","updateSuccess")},function(e){g.hide(),d.error(e)})}function _(e){var t=[],a=[];for(var i in e)e.hasOwnProperty(i)&&(t.push({value:i,name:e[i]}),a.push(i));return{languageListTitleMap:t,languageListEnum:a}}function S(e){var t=[],a=[];for(var i in e)e.hasOwnProperty(i)&&(t.push({value:i,name:e[i]}),a.push(i));return{dateFormatListTitleMap:t,dateFormatListEnum:a}}var D=this;D.onSubmit=C,D.title="Localization",D.languageList="",D.dateFormatList="",D.existingLanguage="",D.existingDateFormat="",D.existingUseBrowserLanguage=!0,D.supportedList,D.getLanguageListForForm=_,D.getDateFormatListForForm=S,D.submitLocalizationDetails=w,D.showSupportedLanguages=y,D.formModel={},h()}angular.module("app.admin").controller("AdminLocalizationController",e),e.$inject=["localizedMessages","$sce","logger","$q","$rootScope","$scope","$window","$stateParams","webservice","$timeout","toast","pimHelper","ModalService","formHelper","$state","loader"]}(),function(){"use strict";function e(e,t,a){function i(){t(!0)}var o=this,n={};angular.copy(a,n),o.supportedList=n,o.supportedList=a,o.confirm=i}angular.module("app.admin").controller("AdminSupportedLanguagesController",e),e.$inject=["$scope","close","supportedList"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(){if(E.location.id){var e=E.exsistingLocations.indexOf(E.location.name.toLowerCase());E.exsistingLocations.splice(e,1)}}function h(e){E.schema={type:"object",title:"Location",properties:{name:{title:"Name",type:"string",maxLength:100},city:{title:"City",type:"string",maxLength:50},phone:{title:"Phone",type:"string",maxLength:30},time_zone:{title:"Time Zone",type:"string",maxLength:100},province:{title:"State/Province",type:"string",maxLength:50},state:{title:"State",type:"string",maxLength:50,"enum":e.states["enum"]},address:{title:"Address",type:"string",maxLength:250},zipCode:{title:"Zip/Postal Code",type:"string",maxLength:30},fax:{title:"Fax",type:"string",maxLength:30},notes:{title:"Notes",type:"string",maxLength:250},countryCode:{title:"Country",type:"string","enum":e.countries["enum"]}},required:["name","countryCode","city","zipCode","time_zone"]},"US"==E.location.countryCode?E.schema.required=["name","countryCode","city","zipCode","state","time_zone"]:E.schema.required=["name","countryCode","city","zipCode","time_zone"],E.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l6",key:"name",validationMessage:{duplicationLocation:a.getLocalizedCustom("Already exists"),302:a.getLocalizedCustom("Required"),201:u.textLengthExceedValidation.message(E.schema.properties.name.maxLength)},$validators:{duplicationLocation:b}},{type:"select",htmlClass:"col s12 m12 l6",key:"countryCode",titleMap:e.countries.titleMap,onChange:function(e,t){"US"==e?E.schema.required=["name","countryCode","city","zipCode","state"]:E.schema.required=["name","countryCode","city","zipCode"],E.model.province="",E.model.state="",m.$broadcast("schemaFormRedraw")},validationMessage:{302:a.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"time_zone",titleMap:e.timezonesData.titleMap,validationMessage:{201:u.textLengthExceedValidation.message(E.schema.properties.time_zone.maxLength)}},{type:"text",htmlClass:"col s12 m12 l6",key:"province",condition:"model.countryCode != 'US'",validationMessage:{201:u.textLengthExceedValidation.message(E.schema.properties.province.maxLength)}},{type:"select",htmlClass:"col s12 m12 l6",key:"state",titleMap:e.states.titleMap,condition:"model.countryCode == 'US'",validationMessage:{302:a.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l6",key:"city",validationMessage:{302:a.getLocalizedCustom("Required"),201:u.textLengthExceedValidation.message(E.schema.properties.city.maxLength)}},{type:"text",htmlClass:"col s12 m12 l6",key:"zipCode",validationMessage:{302:a.getLocalizedCustom("Required"),201:u.textLengthExceedValidation.message(E.schema.properties.zipCode.maxLength)}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l6",key:"phone",validationMessage:{phoneNumber:u.phoneNumber.message,201:u.textLengthExceedValidation.message(E.schema.properties.phone.maxLength)},$validators:{phoneNumber:u.phoneNumber.validator}},{type:"text",htmlClass:"col s12 m12 l6",key:"fax",validationMessage:{phoneNumber:u.phoneNumber.message,201:u.textLengthExceedValidation.message(E.schema.properties.fax.maxLength)},$validators:{phoneNumber:u.phoneNumber.validator}}]},{type:"section",htmlClass:"row",items:[{type:"textarea",htmlClass:"col s12 m12 l12",key:"address",validationMessage:{201:u.textLengthExceedValidation.message(E.schema.properties.address.maxLength)}}]},{type:"section",htmlClass:"row",items:[{type:"textarea",htmlClass:"col s12 m12 l12",key:"notes",validationMessage:{201:u.textLengthExceedValidation.message(E.schema.properties.notes.maxLength)}}]}],p.addRequiredMessage(E.form);var t=y(e.timezonesData,E.location.time_zone);E.timezoneModified=t!==E.location.time_zone,E.modifiedTimezone=t,E.model={name:E.location.name,city:v(E.location.city),phone:E.location.phone,time_zone:v(t),province:E.location.province,state:"US"==E.location.countryCode?v(E.location.province):"",address:E.location.address,zipCode:E.location.zipCode,fax:E.location.fax,notes:E.location.notes,countryCode:E.location.countryCode,eeo_applicable:1==E.location.eeo_applicable}}function v(e){return null==e?"":e}function y(e,t){return t&&!e["enum"].includes(t)&&Object.keys(e.timezoneAlternativeKeys).includes(t)?e.timezoneAlternativeKeys[t]:t}function b(e){return""==e||(E.exsistingLocations?!(E.exsistingLocations.indexOf(e.toLowerCase())>-1):void 0)}function C(e){if(m.$broadcast("schemaFormValidate"),e.$valid){s.show();var i=f("filter")(E.countrysArray,function(e,t,a){return e.cou_code==E.model.countryCode},!0)[0];angular.extend(E.location,E.model);var o={};angular.copy(E.model,o),o.eeo_applicable=o.eeo_applicable?1:0;var n=E.location.id,d="POST",u="locations",p="saveSuccess";n?(d="PATCH",u+="/"+n,p="updateSuccess"):(d="POST",p="saveSuccess"),o.time_zone=E.timezoneModified&&E.modifiedTimezone===o.time_zone?E.existingTimezone:o.time_zone,t.call(u,d,o,{}).then(function(e){s.hide(),"POST"==d?l.unshift(e.data.data):"PATCH"==d&&(E.location.country=i,"US"==E.location.countryCode&&(E.location.province=E.location.state),w(E.location)),a.showLocalizedToast(p),t.clearCache("employees/locations"),t.clearCache("employees/locations",{operation:"edit"})},function(e){s.hide(),c.success(e)}),r(!0)}}function w(e){for(var t=0;t<l.length;t++)if(l[t].id==e.id){angular.extend(l[t],e);break}}function _(){if(E.eeo_config){E.schema.properties.eeo_applicable={title:"EEO Enabled",type:"boolean"};var e={type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l4",key:"eeo_applicable"}]};E.form.splice(4,0,e)}}function S(e){var a=[];a.push(t.call("countries","GET",[],{})),a.push(t.call("standardTimeZones","GET",[],{})),a.push(t.call("provinces","GET",[],{})),i.all(a).then(function(e){var t=e[0].data.data,a=e[1].data.data,i=e[2].data.data;E.countrysArray=t,h({countries:D(t),timezonesData:T(a),states:x(i)}),_()})}function D(e){for(var t=[],i=[],o=0;o<e.length;o++)t.push({value:e[o].cou_code,name:a.getLocalizedCustom(e[o].cou_name)}),i.push(e[o].cou_code);return{titleMap:t,"enum":i}}function T(e){var t=[],i=[],o={};return e.forEach(function(e){var n={value:e.name,name:"("+e.prefix+") "+a.getLocalizedCustom(e.label)};e.alternativeKeys&&e.alternativeKeys.forEach(function(t){o[t]=e.name}),t.push(n),i.push(n.value)}),{titleMap:t,"enum":i,timezoneAlternativeKeys:o}}function x(e){for(var t=[],i=[],o=0;o<e.length;o++)t.push({value:e[o].province_code,name:a.getLocalizedCustom(e[o].province_name)}),i.push(e[o].province_code);return{titleMap:t,"enum":i}}function F(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}function k(){r(!1)}h.$inject=["formData"];var E=this;E.modalProperties=n;var I={};angular.copy(o,I),E.location=I,E.save=C,E.cancel=k,E.model={},E.exsistingLocations=F(l,"name",!0),E.eeo_config=!1,E.existingTimezone=E.location.time_zone,E.timezoneModified=!1,E.modifiedTimezone=null;var A=!1;angular.isDefined(E.location.eeo_applicable)&&1==E.location.eeo_applicable&&(A=!0);var M=[];M.push(t.call("organization","GET",[],{})),i.all(M).then(function(e){var t=e[0].data.data;1==t.eeo_applicable&&(E.eeo_config=!0)}),g(),S(h)}angular.module("app.admin").controller("AdminEditLocationsController",e),e.$inject=["logger","webservice","localizedMessages","$q","location","modalProperties","dataList","close","loader","toast","$rootScope","$scope","formValidationHelper","formHelper","$filter"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(e,a,i){var l={offset:(i-1)*O.pageSize,limit:O.pageSize,sortingFeild:O.SortingListFields[e],sortingOrder:a,includePastEmployees:!1};O.filters&&(l.filter=O.filters),d.show();var c=[];c.push(r.call("locations","GET",[],l)),c.push(u.getPermissions().then(function(e){return void 0!==e.admin_locations&&e.admin_locations.read?e.admin_locations:n.reject({statusText:"Forbidden"})})),c.push(r.call("countries","GET",[],{})),n.all(c).then(function(e){O.permissions=e[1],w(),O.locations=e[0].data.data,O.total=e[0].data.meta.total,O.totalDataCount=O.total,O.dataInCurruntPage=e[0].data.data.length,O.meta=e[0].data.meta,O.page=i,O.lastPage=Math.ceil(O.total/O.pageSize),O.locationsListHelper=new t.list(O.listData.locations,O.locations),O.selectAll=O.locationsListHelper.selectAllItems,O.deselectAll=O.locationsListHelper.deselectAllItems,O.countries=e[2].data.data,d.hide(),0==O.locations.length&&s.infoToast("No Records Found")},function(e){d.hide(),o.go("403")})}function h(){O.filters=!1,f.getSetting("page_size").then(function(e){O.pageSize=e,g("location","ASC",O.page)})}function v(){g("location","ASC",O.page+1)}function y(){O.page>1&&g("location","ASC",O.page-1)}function b(){var e=p.getEnumAndTitleMapForSelect(O.countries,{name:"cou_name",value:"cou_code"});l.showModal({templateUrl:"app/admin/locations/locationsearch.html",controller:"AdminLocationsearchController",controllerAs:"modal",inputs:{currentFilter:O.oldFilter,countries:e}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e!==!1&&(O.oldFilter=e,O.filters={},e.name&&(O.filters.name=e.name),e.city&&(O.filters.city=e.city),e.country&&"0"!==e.country&&(O.filters.country=e.country)),g("location","ASC",1)})})}function C(e,t){void 0!==t.name&&(O.filters={},g("location","ASC",1))}function w(){O.panelInfo={locationsInfo:{}},_()}function _(){var e=[{name:"location",lable:"Name",getter:"name",sortable:!0,sortAction:"fetchLocations"},{name:"City",lable:"City",getter:"city",sortable:!0,sortAction:"fetchLocations"},{name:"Country",lable:"Country",getter:["country","cou_name"],sortable:!0,sortAction:"fetchLocations",formatter:function(e){return s.getLocalizedCustom(e)}},{name:"Phone",lable:"Phone",getter:"phone",sortable:!0,sortAction:"fetchLocations"},{name:"Number Of Employees",lable:"Number of Employees",getter:"numberOfEmployees",sortable:!0,sortAction:"fetchLocations"}],t=[];t.push(r.call("organization","GET",[],{})),n.all(t).then(function(t){var a=t[0].data.data;1==a.eeo_applicable&&e.push({name:"EEO Applicable",lable:"EEO Enabled",getter:"eeo_applicable",sortable:!0,sortAction:"fetchLocations",formatter:function(e){return 1==e?s.getLocalizedCustom("Yes"):s.getLocalizedCustom("No")}})});var a=[{colspan:3}],i=[{"class":"edit_item",clickAction:"editLocations",tooltip:"Edit"}],o=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:O.permissions["delete"]}];O.listData={locations:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:a,extraTD:i,showColumnsAnyway:!0,permission:O.permissions,listActions:o,pagination:!0}}}function S(){O.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function D(e){l.showModal({templateUrl:"app/admin/locations/locations_modal.html",controller:"AdminEditLocationsController",controllerAs:"modal",inputs:{location:e,dataList:O.locations,modalProperties:{title:"Edit Location"}}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function T(){if(O.listData.locations.selected.length>0){var e=O.listData.locations.selected.length;d.show(),r.call("locations","DELETE",{data:O.listData.locations.selected},{}).then(function(t){d.hide(),s.showLocalizedToast("deleteSuccess"),O.total-=e,L(e),x(O.listData.locations.selected),r.clearCache("employees/locations"),r.clearCache("employees/locations",{operation:"edit"})},function(e){d.hide(),m.error(s.getLocalizedCustom(e.data.details))})}}function x(e){for(var t=O.locations.length-1;t>=0;t--){var a=e.indexOf(O.locations[t].id);a>-1&&(e.splice(a,1),O.locations.splice(t,1))}}function F(e){return e===O.sort?"arrow_upward":"-"+e===O.sort?"arrow_downward":""}function k(e){O.sort===e?O.sort="-"+e:O.sort==="-"+e?O.sort=e:O.sort=e,g("location","ASC",O.page)}function E(e){var t=e.obj;if(t.selected)O.listData.locations.selected.push(t.id);else{var a=O.listData.locations.selected.indexOf(t.id);a>-1&&O.listData.locations.selected.splice(a,1)}}function I(){O.listData.locations.selected.length>0&&l.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&T()})})}function A(){var e={name:"",city:"",country:"",phone:"",time_zone:"",province:"",state:"",address:"",zipCode:"",fax:"",notes:"",countryCode:"",eeoApplicable:""};l.showModal({templateUrl:"app/admin/locations/locations_modal.html",controller:"AdminEditLocationsController",controllerAs:"modal",inputs:{location:e,dataList:O.locations,modalProperties:{title:"Add Location"}}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e&&M()})})}function M(){O.totalDataCount=O.totalDataCount+1,O.dataInCurruntPage=O.dataInCurruntPage+1}function L(e){O.totalDataCount=O.totalDataCount-e,O.dataInCurruntPage=O.dataInCurruntPage-e}function P(){close(!0)}function N(){close(!1)}var O=this;O.pageSize=50,O.page=1,O.total=0,O.totalDataCount=0,O.dataInCurruntPage=0,O.title="locations",O.locations="",O.sort="",O.sortBy=k,O.getSortIcon=F,O.nextPage=v,O.prevPage=y,O.search=C,O.editLocations=D,O.deleteLocations=T,O.changeSelection=E,O.deleteSelection=I,O.addLocation=A,O.confirm=P,O.cancel=N,O.SortingListFields={location:"name",City:"city",Country:"countryName","Number Of Employees":"numberOfEmployees",Phone:"phone"},O.fetchLocations=g,O.state=o,O.selected=[],O.filters=!1,O.oldFilter=!1,O.countries=[],O.locations||h(),S(),e.$on("filter",b),e.$on("search",C)}angular.module("app.admin").controller("AdminLocationsController",e),e.$inject=["$scope","listHelper","logger","$window","$state","$q","ModalService","webservice","localizedMessages","$rootScope","loader","toast","datagroupPermissions","formHelper","settingsService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r){function s(){i!==!1&&(p.filters=i),c()}function c(){p.locationSelectSchema={type:"object",title:"Location",properties:{country:{title:"Country",type:"string","enum":p.countries["enum"]}}},p.locationSelectForm=[{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"country",titleMap:p.countries.titleMap}]}]}function d(){n(p.filters)}function m(){n(!1)}function u(){p.filters={name:null,id:null,country:""},d()}var p=this;p.search=d,p.cancel=m,p.reset=u,p.countries=o,p.filters={name:null,id:null,country:""},s()}angular.module("app.admin").controller("AdminLocationsearchController",e),e.$inject=["$scope","logger","webservice","currentFilter","countries","close","localizedMessages","formHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r){function s(){e.$broadcast("filter",[])}var c=this;c.filter=s,c.title=o.current.data.title,c.employee=!1}angular.module("app.admin").controller("LocationListNavbarController",e),e.$inject=["$rootScope","$scope","$document","$translate","$state","webservice","ModalService","focus"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r){function s(){t.show();var e=[];e.push(o.call("mailConfiguration","GET",[],{})),e.push(o.call("permissions/dataGroup/mail_configuration","GET",[],{})),e.push(o.call("organization","GET",[],{})),a.all(e).then(function(e){p.permissions=e[1].data.data,p.defaultConfiguration=e[0].data.data,p.organization=e[2].data.data,c(),d(),t.hide()},function(e){t.hide(),r.go("403")})}function c(){p.schema={type:"object",title:"Email Settings",readonly:!0,properties:{senderEmail:{title:"Sender Email",type:["null","string"],maxLength:250},senderName:{title:"Sender Name",type:["null","string"],maxLength:100},sendingMethod:{title:"Sending Method",type:["null","string"],"enum":["sendmail","smtp"]},smtpHost:{title:"SMTP Host",type:["null","string"],maxLength:250},smtpPort:{title:"SMTP Port",type:["null","string"],maxLength:50},useSmtpAuthentication:{title:"Use SMTP Authentication",type:"string","enum":["none","login"]},smtpUser:{title:"SMTP User",type:["null","string"],maxLength:250},smtpPassword:{title:"SMTP Password ",type:["null","string"],maxLength:250},useSecureConnection:{title:"Use Secure Connection",type:["null","string"],"enum":["none","ssl","tsl"]},sendTestEmail:{title:"Send Test Email",type:"boolean"},testEmailAddress:{title:"Test Email Address",type:["null","string"],maxLength:250}},required:["senderEmail","smtpUser","testEmailAddress","smtpPassword","sendingMethod","smtpHost","smtpPort"]},p.permissions.update&&(p.schema.readonly=!1),p.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l6",key:"senderEmail",validationMessage:{email:l.email.message,302:e.getLocalizedCustom("Required"),201:l.textLengthExceedValidation.message(p.schema.properties.senderEmail.maxLength)},$validators:{email:l.email.validator}},{type:"text",htmlClass:"col s12 m12 l6",key:"senderName",validationMessage:{201:l.textLengthExceedValidation.message(p.schema.properties.senderName.maxLength)}}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",emptyOption:!1,titleMap:[{value:"sendmail",name:"Sendmail"},{value:"smtp",name:"SMTP"}],key:"sendingMethod",onChange:function(){i.$broadcast("schemaFormRedraw")},validationMessage:{302:e.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l6",key:"smtpHost",validationMessage:{302:e.getLocalizedCustom("Required"),201:l.textLengthExceedValidation.message(p.schema.properties.smtpHost.maxLength)}},{type:"text",htmlClass:"col s12 m12 l6",key:"smtpPort",validationMessage:{Port:l.positiveInteger.message,302:e.getLocalizedCustom("Required"),201:l.textLengthExceedValidation.message(p.schema.properties.smtpPort.maxLength)},$validators:{Port:l.positiveInteger.validator}}],condition:"model.sendingMethod=='smtp'"},{type:"section",htmlClass:"row",items:[{type:"radiobuttons",htmlClass:"col s12 m12 l6",titleMap:[{value:"none",name:"No"},{value:"login",name:"Yes"}],key:"useSmtpAuthentication"}],condition:"model.sendingMethod=='smtp'"},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l6",key:"smtpUser",validationMessage:{302:e.getLocalizedCustom("Required"),201:l.textLengthExceedValidation.message(p.schema.properties.smtpUser.maxLength)}},{type:"password",htmlClass:"col s12 m12 l6",key:"smtpPassword",validationMessage:{302:e.getLocalizedCustom("Required"),201:l.textLengthExceedValidation.message(p.schema.properties.smtpPassword.maxLength)}}],condition:"model.useSmtpAuthentication=='login' && model.sendingMethod=='smtp'"},{type:"section",htmlClass:"row",items:[{type:"radiobuttons",htmlClass:"col s12 m12 l6",titleMap:[{value:"none",name:"No"},{value:"ssl",name:"SSL"},{value:"tls",name:"TLS"}],key:"useSecureConnection"}],condition:"model.sendingMethod=='smtp'"},{type:"section",htmlClass:"row",items:[{htmlClass:"col s12 m12 l6 ",key:"sendTestEmail",onChange:function(){i.$broadcast("schemaFormRedraw")}},{type:"text",htmlClass:"col s12 m12 l6",key:"testEmailAddress",validationMessage:{email:l.email.message,302:e.getLocalizedCustom("Required"),201:l.textLengthExceedValidation.message(p.schema.properties.testEmailAddress.maxLength)},$validators:{email:l.email.validator},condition:"model.sendTestEmail"}]}],n.addRequiredMessage(p.form)}function d(){p.model.senderEmail=p.defaultConfiguration.senderEmail,p.model.senderName=p.defaultConfiguration.senderName?p.defaultConfiguration.senderName:p.organization.name,p.model.sendingMethod=p.defaultConfiguration.sendingMethod?p.defaultConfiguration.sendingMethod:"sendmail",p.model.smtpHost=p.defaultConfiguration.smtpHost,p.model.smtpPort=p.defaultConfiguration.smtpPort,p.model.useSmtpAuthentication=p.defaultConfiguration.useSmtpAuthentication?p.defaultConfiguration.useSmtpAuthentication:"none",p.model.smtpUser=p.defaultConfiguration.smtpUser,p.model.smtpPassword=""==p.defaultConfiguration.smtpPassword?"********":p.defaultConfiguration.smtpPassword,p.model.useSecureConnection=p.defaultConfiguration.useSecureConnection,p.model.sendTestEmail=!1,p.model.testEmailAddress=p.defaultConfiguration.testEmailAddress?p.defaultConfiguration.testEmailAddress:""}function m(e){i.$broadcast("schemaFormValidate"),e.$valid&&(t.show(),u())}function u(){var a={senderEmail:p.model.senderEmail,senderName:p.model.senderName,sendingMethod:p.model.sendingMethod,smtpHost:p.model.smtpHost,smtpPort:p.model.smtpPort,useSmtpAuthentication:p.model.useSmtpAuthentication,smtpUser:p.model.smtpUser,smtpPassword:"********"!=p.model.smtpPassword?p.model.smtpPassword:"",useSecureConnection:p.model.useSecureConnection,sendTestEmail:p.model.sendTestEmail,testEmailAddress:p.model.testEmailAddress};o.call("mailConfiguration","PATCH",a,{}).then(function(a){t.hide(),e.showLocalizedToast("saveSuccess"),a.data.sendTestEmail?e.showLocalizedToast("testMailSentSuccess"):p.model.sendTestEmail&&e.warningToast("testMailSentFailed")})}var p=this;p.onSubmit=m,p.title="Email Settings",p.newMailConfiguration,p.setFormDefaults=d,p.submitMailConfigurationDetails=u,p.defaultConfiguration,p.model={},s()}angular.module("app.admin").controller("AdminMailConfigurationController",e),e.$inject=["localizedMessages","loader","$q","$scope","webservice","formHelper","formValidationHelper","$state"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){a.call("memberships","GET",[]).then(function(e){if(b.exsistingMemberships=v(e.data.data,"name",!0),b.membership.id){var t=b.exsistingMemberships.indexOf(b.membership.name.toLowerCase());b.exsistingMemberships.splice(t,1)}p()})}function p(){b.schema={type:"object",title:"Membership",properties:{name:{title:"Name",type:"string",maxLength:100}},required:["name"]},b.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"name",validationMessage:{duplicationMemberships:e.getLocalizedCustom("Already exists"),302:e.getLocalizedCustom("Required"),201:m.textLengthExceedValidation.message(b.schema.properties.name.maxLength)},$validators:{duplicationMemberships:f}}]}],d.addRequiredMessage(b.form),b.model={name:b.membership.name}}function f(e){return""==e||(b.exsistingMemberships?!(b.exsistingMemberships.indexOf(e.toLowerCase())>-1):void 0)}function g(t){if(c.$broadcast("schemaFormValidate"),t.$valid){l.show(),angular.extend(b.membership,b.model);var i=b.membership.id,s="POST",d="memberships",m="saveSuccess";i?(s="PATCH",d+="/"+i,m="updateSuccess"):s="POST",a.call(d,s,b.model,{}).then(function(t){delete b.exsistingMemberships,l.hide(),"POST"==s?o.unshift(t.data.data):"PATCH"==s&&h(b.membership),e.showLocalizedToast(m)},function(e){l.hide(),r.success(e)}),n(!0)}}function h(e){for(var t=0;t<o.length;t++)if(o[t].id==e.id){angular.extend(o[t],e);break}}function v(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}function y(){n(!1)}var b=this,C={};angular.copy(i,C),b.membership=C,b.membership.id?b.title="Edit Membership":b.title="Add Membership",b.save=g,b.cancel=y,b.exsistingMemberships,u()}angular.module("app.admin").controller("AdminEditMembershipsController",e),e.$inject=["localizedMessages","logger","webservice","membership","dataList","close","loader","toast","$rootScope","$scope","formHelper","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){c.show(),u.getSetting("page_size").then(function(e){E.pageSize=e,E.fetchMemberships("memberships","ASC",1)})}function f(){E.panelInfo={membershipsInfo:{icon:"images/pim/icon_work.svg"}},g()}function g(){var e=[{name:"memberships",lable:"Membership",getter:"name",sortable:!0,sortAction:"fetchMemberships"}],t=[{colspan:3}],a=[{"class":"edit_item",clickAction:"editMemberships",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:E.permissions["delete"]}];E.listData={memberships:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:E.permissions,listActions:i,pagination:!0}}}function h(a,i,n){var l={offset:(n-1)*E.pageSize,limit:E.pageSize,sortingFeild:E.SortingListFields[a],sortingOrder:i},s=[];s.push(r.call("memberships","GET",[],l)),s.push(t.getPermissions().then(function(e){return void 0!==e.admin_memberships&&e.admin_memberships.read?e.admin_memberships:o.reject({statusText:"Forbidden"})})),o.all(s).then(function(t){E.permissions=t[1],f(),E.memberships=t[0].data.data,E.totalDataCount=t[0].data.meta.total,E.dataInCurruntPage=t[0].data.data.length,E.page=n,E.lastPage=Math.ceil(E.totalDataCount/E.pageSize),v(),c.hide(),0==E.memberships.length&&e.infoToast("No Records Found")},function(e){c.hide(),m.go("403")})}function v(){E.membershipsListHelper=new a.list(E.listData.memberships,E.memberships),E.selectAll=E.membershipsListHelper.selectAllItems,E.deselectAll=E.membershipsListHelper.deselectAllItems}function y(){E.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function b(e){l.showModal({templateUrl:"app/admin/memberships/memberships_modal.html",controller:"AdminEditMembershipsController",controllerAs:"modal",inputs:{membership:e,dataList:E.memberships}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function C(){if(E.listData.memberships.selected.length>0){var t=E.listData.memberships.selected.length;c.show(),r.call("memberships","DELETE",{data:E.listData.memberships.selected},{}).then(function(a){c.hide(),e.showLocalizedToast("deleteSuccess"),E.total-=t,w(E.listData.memberships.selected)},function(e){c.hide(),d.success(e)})}}function w(e){for(var t=E.memberships.length-1;t>=0;t--){var a=e.indexOf(E.memberships[t].id);a>-1&&(e.splice(a,1),E.memberships.splice(t,1))}}function _(e){var t=e.obj;if(t.selected)E.listData.memberships.selected.push(t.id);else{var a=E.listData.memberships.selected.indexOf(t.id);a>-1&&E.listData.memberships.selected.splice(a,1)}}function S(){E.listData.memberships.selected.length>0&&l.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&(C(),x(E.listData.memberships.selected.length))})})}function D(){var e={name:""};l.showModal({templateUrl:"app/admin/memberships/memberships_modal.html",controller:"AdminEditMembershipsController",controllerAs:"modal",inputs:{membership:e,dataList:E.memberships}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e&&T()})})}function T(){E.totalDataCount=E.totalDataCount+1,E.dataInCurruntPage=E.dataInCurruntPage+1}function x(e){E.totalDataCount=E.totalDataCount-e,E.dataInCurruntPage=E.dataInCurruntPage-e}function F(){close(!0)}function k(){close(!1)}var E=this;E.title="Memberships",E.memberships="",E.editMemberships=b,E.deleteMemberships=C,E.changeSelection=_,E.deleteSelection=S,E.addMemberships=D,E.confirm=F,E.cancel=k,E.fetchMemberships=h,E.SortingListFields={memberships:"name"},E.pageSize=50,E.page=1,E.lastPage=0,E.totalDataCount=0,E.dataInCurruntPage=0,p(),y()}angular.module("app.admin").controller("AdminMembershipsController",e),e.$inject=["localizedMessages","datagroupPermissions","listHelper","logger","$q","$window","ModalService","webservice","$rootScope","loader","toast","$state","settingsService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){function m(){e.call("nationality","GET",[]).then(function(e){if(y.exsistingNationalities=v(e.data.data,"name",!0),y.nationality.id){var t=y.exsistingNationalities.indexOf(y.nationality.name.toLowerCase());y.exsistingNationalities.splice(t,1)}u()})}function u(){y.schema={type:"object",title:"Nationality",properties:{name:{title:"Name",type:"string",maxLength:100}},required:["name"]},y.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"name",validationMessage:{duplicationNationalities:t.getLocalizedCustom("Already exists"),302:t.getLocalizedCustom("Required"),201:d.textLengthExceedValidation.message(y.schema.properties.name.maxLength)},$validators:{duplicationNationalities:p}}]}],c.addRequiredMessage(y.form),y.model={name:y.nationality.name}}function p(e){return""==e||(y.exsistingNationalities?!(y.exsistingNationalities.indexOf(e.toLowerCase())>-1):void 0)}function f(a){if(s.$broadcast("schemaFormValidate"),a.$valid){l.show(),angular.extend(y.nationality,y.model);var i=y.nationality.id,c="POST",d="nationality",m="saveSuccess";i?(c="PATCH",d+="/"+i,m="updateSuccess"):(c="POST",m="saveSuccess"),e.call(d,c,y.model,{}).then(function(e){delete y.exsistingNationalities,l.hide(),"POST"==c?o.unshift(e.data.data):"PATCH"==c&&g(y.nationality),t.showLocalizedToast(m)},function(e){l.hide(),r.success(e)}),n(!0)}}function g(e){for(var t=0;t<o.length;t++)if(o[t].id==e.id){angular.extend(o[t],e);break}}function h(){n(!1)}function v(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}var y=this;y.modalProperties=i;var b={};angular.copy(a,b),y.nationality=b,y.save=f,y.cancel=h,m()}angular.module("app.admin").controller("AdminEditNationalitiesController",e),e.$inject=["webservice","localizedMessages","nationality","modalProperties","dataList","close","loader","toast","$scope","formHelper","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){s.show(),d.getPermissions().then(function(e){E.permissions=e.admin_nationalities,E.permissions.read?u.getSetting("page_size").then(function(e){E.pageSize=e,E.fetchNationalities("nationality","ASC",1)}):(s.hide(),m.go("403"))})}function f(e,t,a){var o={offset:(a-1)*E.pageSize,limit:E.pageSize,sortingFeild:E.sortingListFields[e],sortingOrder:t},r=[];r.push(n.call("nationality","GET",[],o)),i.all(r).then(function(e){h(),E.nationalities=e[0].data.data,E.totalDataCount=e[0].data.meta.total,E.dataInCurruntPage=e[0].data.data.length,E.page=a,E.lastPage=Math.ceil(E.totalDataCount/E.pageSize),g(),s.hide(),0==E.nationalities.length&&l.infoToast("No Records Found")})}function g(){E.nationalitiesListHelper=new t.list(E.listData.nationalities,E.nationalities),E.selectAll=E.nationalitiesListHelper.selectAllItems,E.deselectAll=E.nationalitiesListHelper.deselectAllItems}function h(){E.panelInfo={nationalitiesInfo:{}},v()}function v(){var e=[{name:"nationality",lable:"Nationality",getter:"name",sortable:!0,sortAction:"fetchNationalities",formatter:function(e){return l.getLocalizedCustom(e);
}}],t=[{colspan:3}],a=[{"class":"edit_item",clickAction:"editNationalities",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:E.permissions["delete"]}];E.listData={nationalities:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:E.permissions,listActions:i,columnWidths:["5%","90%","5%"],pagination:!0}}}function y(){E.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function b(e){o.showModal({templateUrl:"app/admin/nationalities/nationalities_modal.html",controller:"AdminEditNationalitiesController",controllerAs:"modal",inputs:{nationality:e,dataList:E.nationalities,modalProperties:{title:"Edit Nationality"}}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function C(){if(E.listData.nationalities.selected.length>0){var e=E.listData.nationalities.selected.length;s.show(),n.call("nationality","DELETE",{data:E.listData.nationalities.selected},{}).then(function(t){s.hide(),l.showLocalizedToast("deleteSuccess"),E.total-=e,w(E.listData.nationalities.selected)},function(e){s.hide(),c.success(e)})}}function w(e){for(var t=E.nationalities.length-1;t>=0;t--){var a=e.indexOf(E.nationalities[t].id);a>-1&&(e.splice(a,1),E.nationalities.splice(t,1))}}function _(e){var t=e.obj;if(t.selected)E.listData.nationalities.selected.push(t.id);else{var a=E.listData.nationalities.selected.indexOf(t.id);a>-1&&E.listData.nationalities.selected.splice(a,1)}}function S(){E.listData.nationalities.selected.length>0&&o.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&(C(),x(E.listData.nationalities.selected.length))})})}function D(){var e={name:""};o.showModal({templateUrl:"app/admin/nationalities/nationalities_modal.html",controller:"AdminEditNationalitiesController",controllerAs:"modal",inputs:{nationality:e,dataList:E.nationalities,modalProperties:{title:"Add Nationality"}}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e&&T()})})}function T(){E.totalDataCount=E.totalDataCount+1,E.dataInCurruntPage=E.dataInCurruntPage+1}function x(e){E.totalDataCount=E.totalDataCount-e,E.dataInCurruntPage=E.dataInCurruntPage-e}function F(){close(!0)}function k(){close(!1)}var E=this;E.title="",E.nationalities="",E.editNationalities=b,E.deleteNationalities=C,E.changeSelection=_,E.deleteSelection=S,E.addNationality=D,E.confirm=F,E.cancel=k,E.fetchNationalities=f,E.sortingListFields={nationality:"name"},E.pageSize=50,E.page=1,E.lastPage=0,E.totalDataCount=0,E.dataInCurruntPage=0,p(),y()}angular.module("app.admin").controller("AdminNationalitiesController",e),e.$inject=["logger","listHelper","$window","$q","ModalService","webservice","localizedMessages","$rootScope","loader","toast","datagroupPermissions","$state","settingsService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v){function y(){var e=[],t={allClientIdListOnly:!0};e.push(a.call("oauthClients","GET",[],t)),x.isEdit||e.push(u.generateClientSecret()),x.allowedGrantTypes=d.getEnumAndTitleMapForSelect(h,{name:"name",value:"value"}),p.all(e).then(function(e){if(x.exsistingOauthClients=D(e[0].data.data,"clientId",!0),x.oauthClient.clientId){var t=x.exsistingOauthClients.indexOf(x.oauthClient.clientId.toLowerCase());x.exsistingOauthClients.splice(t,1)}x.isEdit?(x.model={client_id:x.oauthClient.clientId,client_secret:x.oauthClient.clientSecret,grant_types:x.oauthClient.grantTypes},x.grantTypeAltered&&(x.model.grant_types_altered=x.oauthClient.grantTypes)):x.model={client_id:"",client_secret:e[1],grant_types:""},b()})}function b(){x.schema={type:"object",title:"OauthClients",properties:{client_id:{title:"Client Id",type:"string",maxLength:80,readonly:!!x.isEdit},client_secret:{title:"Client Secret",type:"string",maxLength:80,readonly:!0},reset_client_secret:{title:"Change Client Secret",type:"boolean"},grant_types:{title:"Grant Type",type:"string","enum":x.allowedGrantTypes["enum"]},grant_types_altered:{title:"Grant Type",type:"string",readonly:!0}},required:["client_id","client_secret","grant_types"]},x.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"client_id",validationMessage:{testClientValidation:t.getLocalizedCustom("Client Id is reserved for mobile applications"),duplicationOauthClients:t.getLocalizedCustom("Already exists"),302:t.getLocalizedCustom("Required"),201:m.textLengthExceedValidation.message(x.schema.properties.client_id.maxLength)},$validators:{duplicationOauthClients:C,testClientValidation:function(e){return!e||"test"!==e.toLowerCase()}}},{type:"checkbox",htmlClass:"col s12 m12 l12",key:"reset_client_secret",condition:function(){return x.isEdit},onChange:function(e){e?u.generateClientSecret().then(function(e){x.model.client_secret=e}):x.model.client_secret=""}},{type:"generated-input",htmlClass:"col s12 m12 l12",key:"client_secret",autoGenerateIcon:"autorenew",condition:function(){return x.model.reset_client_secret&&x.isEdit||!x.isEdit},autoGenerateCallBack:function(){u.generateClientSecret().then(function(e){x.model.client_secret=e})},validationMessage:{302:t.getLocalizedCustom("Required"),201:m.textLengthExceedValidation.message(x.schema.properties.client_secret.maxLength)}},{type:"select",htmlClass:"col s12 m12 l12",key:"grant_types",titleMap:x.allowedGrantTypes.titleMap,validationMessage:{302:t.getLocalizedCustom("Required")},condition:function(){return!x.grantTypeAltered}},{type:"text",htmlClass:"col s12 m12 l12",key:"grant_types_altered",condition:function(){return x.grantTypeAltered}}]}],d.addRequiredMessage(x.form)}function C(e){return""==e||(x.exsistingOauthClients?!(x.exsistingOauthClients.indexOf(e.toLowerCase())>-1):void 0)}function w(e){if(c.$broadcast("schemaFormValidate"),e.$valid){l.show(),x.oauthClient.clientId=x.model.client_id,x.oauthClient.clientSecret=x.model.client_secret,x.oauthClient.grantTypes=x.model.grant_types;var i=x.oauthClient.clientId,s="POST",d="oauthClients",m="saveSuccess";x.isEdit?(x.model.reset_client_secret||(x.model.client_secret="",x.oauthClient.clientSecret=""),s="PATCH",d+="/"+i,m="updateSuccess"):(s="POST",m="saveSuccess"),delete x.model.reset_client_secret,delete x.model.grant_types_altered,a.call(d,s,x.model,{}).then(function(e){if(l.hide(),delete x.exsistingOauthClients,x.oauthClient.clientSecret){var a={};angular.copy(x.oauthClient,a),T(a)}"POST"==s?o.unshift(e.data.data):"PATCH"==s&&(x.oauthClient.clientSecret="",_(x.oauthClient)),t.showLocalizedToast(m)},function(e){l.hide(),r.error("Invalid Data Submitted")}),n(!0)}}function _(e){for(var t=0;t<o.length;t++)if(o[t].clientId==e.clientId){angular.extend(o[t],e);break}}function S(){n(!1)}function D(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}function T(e){g.showModal({templateUrl:"app/admin/oauthClients/oauth_client_data_modal.html",controller:"AdminOauthClientDataModalController",controllerAs:"modal",inputs:{oauthClient:e}}).then(function(e){$(e.element).openModal()})}var x=this,F={};angular.copy(i,F),x.oauthClient=F,x.isEdit=""!=x.oauthClient.clientId,x.save=w,x.cancel=S,x.exsistingOauthClients,f.close=n,x.grantTypeAltered=v,x.oauthClient.clientId?x.title="Edit OAuth Client":x.title="Add OAuth Client",y()}angular.module("app.admin").controller("AdminEditOauthClientController",e),e.$inject=["logger","localizedMessages","webservice","oauthClient","dataList","close","loader","toast","$rootScope","$scope","formHelper","formValidationHelper","oauthClientSecretAutoGenerateHelper","$q","modalFunctions","ModalService","allowedGrantTypes","grantTypeAltered"]}(),function(){"use strict";function e(e,t,a){function i(){t(!0)}var o=this;o.confirm=i,o.oauthClient=a}angular.module("app.admin").controller("AdminOauthClientDataModalController",e),e.$inject=["$scope","close","oauthClient"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){s.show(),m.getSetting("page_size").then(function(e){I.pageSize=e,I.fetchOauthClients("client_id","ASC",1)})}function f(e,t,a){var o={offset:(a-1)*I.pageSize,limit:I.pageSize,sortingField:I.SortingListFields[e],sortingOrder:t},r=[];r.push(l.call("oauthClients","GET",[],o)),r.push(u.getPermission("admin_oauth_register")),i.all(r).then(function(e){I.permissions=e[1],void 0!==I.permissions&&I.permissions.read?(I.notSelectableIdList=h(e[0].data.data),v(),I.oauthClients=e[0].data.data,I.totalDataCount=e[0].data.meta.total,I.dataInCurruntPage=e[0].data.data.length,I.page=a,I.lastPage=Math.ceil(I.totalDataCount/I.pageSize),g(),s.hide(),0==I.oauthClients.length&&n.infoToast("No Records Found")):(s.hide(),d.go("403"))},function(e){s.hide(),d.go("403")})}function g(){I.oauthClientsListHelper=new t.list(I.listData.oauthClients,I.oauthClients),I.selectAll=I.oauthClientsListHelper.selectAllItems,I.deselectAll=I.oauthClientsListHelper.deselectAllItems}function h(e){for(var t=[],a=0;a<e.length;a++)I.allowedGrantTypeKeys.indexOf(e[a].grantTypes)<0&&t.push(e[a].clientId);return t}function v(){I.panelInfo={oauthClientsInfo:{icon:"images/admin/icon_work.svg"}},y()}function y(){var e=[{name:"client_id",lable:"Client Id",getter:"clientId",sortable:!0,sortAction:"fetchOauthClients"},{name:"grant_types",lable:"Grant Type",getter:"grantTypes",sortable:!0,sortAction:"fetchOauthClients",formatter:function(e){for(var t in I.allowedGrantTypes)if(I.allowedGrantTypes[t].value==e)return n.getLocalizedCustom(I.allowedGrantTypes[t].name);return e}}],t=[{colspan:3}],a=[{"class":"edit_item",clickAction:"editOauthClient",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:I.permissions["delete"]}];I.listData={oauthClients:{selectable:!0,selected:[],idGetter:"clientId",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:I.permissions,listActions:i,columnWidths:["5%","60%","30%","5%"],pagination:!0,unselectableIds:I.notSelectableIdList}}}function b(){I.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function C(e){var t={close:function(){}},a=!1;o.showModal({templateUrl:"app/admin/oauthClients/edit_oauth_clients.html",controller:"AdminEditOauthClientController",controllerAs:"modal",inputs:{oauthClient:e,dataList:I.oauthClients,modalFunctions:t,allowedGrantTypes:I.allowedGrantTypes,grantTypeAltered:I.notSelectableIdList.indexOf(e.clientId)>-1}}).then(function(e){$(e.element).openModal({complete:function(){a||t.close(!1)}}),e.close.then(function(e){a=!0})})}function w(){if(I.listData.oauthClients.selected.length>0){var e=I.listData.oauthClients.selected.length;s.show(),l.call("oauthClients","DELETE",{data:I.listData.oauthClients.selected},{}).then(function(t){s.hide();var a="deleteSuccess";n.showLocalizedToast(a),I.total-=e,_(I.listData.oauthClients.selected)},function(e){s.hide(),c.success(e)})}}function _(e){for(var t=I.oauthClients.length-1;t>=0;t--){var a=e.indexOf(I.oauthClients[t].clientId);a>-1&&(e.splice(a,1),I.oauthClients.splice(t,1))}}function S(e){var t=e.obj;if(t.selected)I.listData.oauthClients.selected.push(t.clientId);else{var a=I.listData.oauthClients.selected.indexOf(t.clientId);a>-1&&I.listData.oauthClients.selected.splice(a,1)}}function D(){I.listData.oauthClients.selected.length>0&&o.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&(w(),F(I.listData.oauthClients.selected.length))})})}function T(){var e={clientId:"",clientSecret:"",grantTypes:""},t={close:function(){}},a=!1;o.showModal({templateUrl:"app/admin/oauthClients/edit_oauth_clients.html",controller:"AdminEditOauthClientController",controllerAs:"modal",inputs:{oauthClient:e,dataList:I.oauthClients,modalFunctions:t,allowedGrantTypes:I.allowedGrantTypes,grantTypeAltered:!1}}).then(function(e){$(e.element).openModal({complete:function(){a||t.close(!1)}}),e.close.then(function(e){a=!0,x()})})}function x(){I.totalDataCount=I.totalDataCount+1,I.dataInCurruntPage=I.dataInCurruntPage+1}function F(e){I.totalDataCount=I.totalDataCount-e,I.dataInCurruntPage=I.dataInCurruntPage-e}function k(){close(!0)}function E(){close(!1)}var I=this;I.title="OAuth Clients",I.oauthClients="",I.editOauthClient=C,I.deleteOauthClients=w,I.changeSelection=S,I.deleteSelection=D,I.addOauthClients=T,I.confirm=k,I.cancel=E,I.fetchOauthClients=f,I.SortingListFields={client_id:"client_id",grant_types:"grant_types"},I.allowedGrantTypes=[{value:"password",name:n.getLocalizedCustom("Password")},{value:"client_credentials",name:n.getLocalizedCustom("Client Credentials")}],I.allowedGrantTypeKeys=["password","client_credentials"],I.pageSize=50,I.page=1,I.lastPage=0,I.totalDataCount=0,I.dataInCurruntPage=0,I.tempEmpNo=r.empNumber,p(),b()}angular.module("app.admin").controller("AdminOauthClientsController",e),e.$inject=["logger","listHelper","$window","$q","ModalService","localizedMessages","webservice","$rootScope","loader","toast","$state","settingsService","datagroupPermissions"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){i.call("openIds","GET",[]).then(function(e){if(_.exsistingOpenIds=w(e.data.data,"providerName",!0),_.openId.providerId){var t=_.exsistingOpenIds.indexOf(_.openId.providerName.toLowerCase());_.exsistingOpenIds.splice(t,1)}y(f)})}function f(e){_.schema={type:"object",title:"open id",properties:{providerName:{title:"Name",type:"string",maxLength:100},providerType:{title:"Type",type:"string",maxLength:100,"enum":e.providers["enum"]},providerUrl:{title:"Redirect Url",type:"string",maxLength:100},clientId:{title:"Client Id",type:"string",maxLength:100},clientSecret:{title:"Client Secret",type:"string",maxLength:100},developerKey:{title:"Developer Key",type:"string",maxLength:100}},required:["providerName","providerType","providerUrl","clientId","clientSecret","developerKey"]},_.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"providerName",validationMessage:{duplicationOpenIds:o.getLocalizedCustom("Already exists"),201:t.textLengthExceedValidation.message(_.schema.properties.providerName.maxLength),302:o.getLocalizedCustom("Required")},$validators:{duplicationOpenIds:g}},{type:"select",htmlClass:"col s12 m12 l12",key:"providerType",titleMap:e.providers.titleMap,validationMessage:{201:t.textLengthExceedValidation.message(_.schema.properties.providerType.maxLength),302:o.getLocalizedCustom("Required")},onChange:function(){u.$broadcast("schemaFormRedraw")}},{type:"text",htmlClass:"col s12 m12 l12",key:"providerUrl",validationMessage:{url:o.getLocalizedCustom("Mal formatted URL"),201:t.textLengthExceedValidation.message(_.schema.properties.providerUrl.maxLength),302:o.getLocalizedCustom("Required")},$validators:{url:t.url.validator}},{type:"text",htmlClass:"col s12 m12 l12",key:"clientId",condition:"model.providerType==2",validationMessage:{201:t.textLengthExceedValidation.message(_.schema.properties.clientId.maxLength),302:o.getLocalizedCustom("Required")}},{type:"password",htmlClass:"col s12 m12 l12",key:"clientSecret",condition:"model.providerType==2",validationMessage:{201:t.textLengthExceedValidation.message(_.schema.properties.clientSecret.maxLength),302:o.getLocalizedCustom("Required")}},{type:"password",htmlClass:"col s12 m12 l12",key:"developerKey",condition:"model.providerType==2",validationMessage:{201:t.textLengthExceedValidation.message(_.schema.properties.developerKey.maxLength),302:o.getLocalizedCustom("Required")}}]}],m.addRequiredMessage(_.form),_.model={providerName:_.openId.providerName,providerType:_.openId.providerType?_.openId.providerType:"",providerUrl:_.openId.providerUrl,clientId:"2"==_.openId.providerType?_.openId.clientId:"",clientSecret:"2"==_.openId.providerType?""==_.openId.clientSecret?"********":_.openId.clientSecret:"",developerKey:"2"==_.openId.providerType?""==_.openId.developerKey?"********":_.openId.developerKey:""}}function g(e){if(null!=e){if(""==e)return!0;if(_.exsistingOpenIds)return!(_.exsistingOpenIds.indexOf(e.toLowerCase())>-1)}}function h(e){if(u.$broadcast("schemaFormValidate"),e.$valid){c.show(),angular.extend(_.openId,_.model);var t=_.openId.providerId,a="POST",n="openIds",l="saveSuccess";t?(a="PATCH",n+="/"+t,l="updateSuccess"):(a="POST",l="saveSuccess"),_.model.clientSecret="********"!=_.model.clientSecret?_.model.clientSecret:"",_.model.developerKey="********"!=_.model.developerKey?_.model.developerKey:"",i.call(n,a,_.model,{}).then(function(e){c.hide(),delete _.exsistingOpenIds,"POST"==a?r.unshift(e.data.data):"PATCH"==a&&v(_.openId),o.showLocalizedToast(l)},function(e){c.hide(),d.success(e)}),s(!0)}}function v(e){for(var t=0;t<r.length;t++)if(r[t].providerId==e.providerId){angular.extend(r[t],e);break}}function y(e){var t=[];t.push(i.call("openIds","GET",[],{})),a.all(t).then(function(e){var t=e[0].data.dataProviders;f({providers:b(t)})})}function b(e){var t=[],a=[];for(var i in e)e.hasOwnProperty(i)&&(t.push({value:i,name:e[i]}),a.push(i));return{titleMap:t,"enum":a}}function C(){s(!1)}function w(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}f.$inject=["formData"];var _=this;_.modalProperties=l;var S={};angular.copy(n,S),_.openId=S,_.save=h,_.cancel=C,_.exsistingOpenIds,p()}angular.module("app.admin").controller("AdminEditOpenIdController",e),e.$inject=["logger","formValidationHelper","$q","webservice","localizedMessages","openId","modalProperties","dataList","close","loader","toast","formHelper","$scope"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){s.show(),d.getPermissions().then(function(e){x.permissions=e.openid_configuration,x.permissions.read?n.call("openIds","GET",[],{}).then(function(e){p(),x.openIds=e.data.data,s.hide(),0==x.openIds.length&&l.infoToast("No Records Found")}):(s.hide(),m.go("403"))})}function p(){x.panelInfo={openIdsInfo:{title:"Provider List"}},f()}function f(){var e=[{name:"openId",lable:"Provider",getter:"providerName"}];if(x.permissions.update)var t=[{colspan:3}],a=[{"class":"edit_item",clickAction:"editOpenIds",tooltip:"Edit"}];else var t=[],a=[];var i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:x.permissions["delete"]}],o=["5%","85%","10%"];if(!x.permissions["delete"])var o=["85%","10%"];x.listData={openIds:{selectable:!0,selected:[],idGetter:"providerId",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:x.permissions,listActions:i,columnWidths:o}}}function g(){x.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function h(e){o.showModal({templateUrl:"app/admin/openIdProvider/openId_modal.html",controller:"AdminEditOpenIdController",controllerAs:"modal",inputs:{openId:e,dataList:x.openIds,modalProperties:{title:"Edit Provider"}}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){$(".lean-overlay").css("display","none")})})}function v(){if(x.listData.openIds.selected.length>0){var e=x.listData.openIds.selected.length;s.show(),n.call("openIds","DELETE",{data:x.listData.openIds.selected},{}).then(function(t){s.hide(),l.showLocalizedToast("deleteSuccess"),x.total-=e,y(x.listData.openIds.selected)},function(e){s.hide(),c.success(e)})}}function y(e){for(var t=x.openIds.length-1;t>=0;t--){var a=e.indexOf(x.openIds[t].providerId);a>-1&&(e.splice(a,1),x.openIds.splice(t,1))}}function b(e){var t=e.obj;if(t.selected)x.listData.openIds.selected.push(t.providerId);else{var a=x.listData.openIds.selected.indexOf(t.providerId);a>-1&&x.listData.openIds.selected.splice(a,1)}}function C(){x.listData.openIds.selected.length>0&&o.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&v()})})}function w(){var e={name:"",type:"",url:""};o.showModal({templateUrl:"app/admin/openIdProvider/openId_modal.html",controller:"AdminEditOpenIdController",controllerAs:"modal",inputs:{openId:e,dataList:x.openIds,modalProperties:{title:"Add Provider"}}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function _(e){x.listData.openIds.selected=[];for(var t=0;t<x.openIds.length;t++)x.openIds[t].selected=!0,x.listData.openIds.selected.push(x.openIds[t].providerId)}function S(e){x.listData.openIds.selected=[];for(var t=0;t<x.openIds.length;t++)x.openIds[t].selected=!1}function D(){close(!0)}function T(){close(!1)}var x=this;x.title="",x.openIds="",x.editOpenIds=h,x.deleteOpenIds=v,x.changeSelection=b,x.deleteSelection=C,x.addOpenId=w,x.confirm=D,x.cancel=T,x.selectAll=_,x.deselectAll=S,u(),g()}angular.module("app.admin").controller("AdminOpenIdController",e),e.$inject=["logger","listHelper","$window","$q","ModalService","webservice","localizedMessages","$rootScope","loader","toast","datagroupPermissions","$state"]}(),function(){"use strict";function e(e,t){function a(){return e.call("open_id_provider/enabled","GET",[],{}).then(function(e){return!!e.data.data&&e.data.data.enabled},function(e){return!1})}var i={isEnabled:a};return i}angular.module("app.leave").service("openIdProviderService",e),e.$inject=["webservice","$q"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r){function s(){r.controllerObject.submitOrganizationGeneralInformation(),l(!0)}function c(){l(!1)}var d=this;d.confirm=s,d.cancel=c,d.messageContent=r.messageContent}angular.module("app.admin").controller("AdminEeoDisableModalController",e),e.$inject=["logger","$q","$window","$rootScope","$scope","$translate","close","controllerParameters"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h){function v(){o.$on("invalidCostCenter",function(e,t){t?o.$broadcast("schemaForm.error.costCentre","invalid",!0):o.$broadcast("schemaForm.error.costCentre","invalid",n.instant("Invalid"))}),c.show(),p.getPermissions().then(function(e){T.permissions=e.admin_organization_general_information,T.permissions.read?(_(),c.hide()):(c.hide(),f.go("403"))})}function y(e){if(T.formSchema={type:"object",title:"General Information",properties:{street1:{title:"Address Street 1",type:"string",maxLength:100},street2:{title:"Address Street 2",type:"string",maxLength:100},city:{title:"City",type:"string",maxLength:30},province:{title:"State/Province",type:"string",maxLength:30},zipCode:{title:"Zip/Postal Code",type:"string",maxLength:30},country:{title:"Country",type:"string","enum":e.countries["enum"]},phone:{title:"Phone",type:"string",maxLength:30},email:{title:"Email",type:"string",maxLength:50},name:{title:"Organization Name ",type:"string",maxLength:100},taxId:{title:"Tax ID",type:"string",maxLength:30},registraionNumber:{title:"Registration Number",type:"string",maxLength:30},costCentre:{title:"Cost Center",type:["object","null"],idsToSkip:[]},costCenterEnabled:{title:"Cost Center Enabled",type:"boolean"},eeoApplicable:{title:"EEO Enabled",type:"boolean"},note:{title:"Note ",type:"string",maxLength:250},numemp:{title:"Number of Employees",type:"string",maxLength:25},fax:{title:"Fax",type:"string",maxLength:30}},required:["name"]},T.form=[{type:"section",htmlClass:"section",items:[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l4",key:"name",validationMessage:{302:r.getLocalizedCustom("Required"),201:u.textLengthExceedValidation.message(T.formSchema.properties.name.maxLength)}},{type:"text",htmlClass:"col s12 m12 l4",key:"taxId",validationMessage:{201:u.textLengthExceedValidation.message(T.formSchema.properties.taxId.maxLength)}},{type:"text",htmlClass:"col s12 m12 l4",key:"numemp",readonly:!0,validationMessage:{201:u.textLengthExceedValidation.message(T.formSchema.properties.numemp.maxLength)}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l4",key:"registraionNumber",validationMessage:{201:u.textLengthExceedValidation.message(T.formSchema.properties.registraionNumber.maxLength)}},{type:"checkbox",htmlClass:"col s12 m12 l4",key:"costCenterEnabled"},{key:"costCentre",type:"cost-centre-auto-complete",condition:"model.costCenterEnabled",htmlClass:"col s12 m12 l4",placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",requireSelection:!0},{type:"checkbox",htmlClass:"col s12 m12 l4",key:"eeoApplicable"}]}]},{type:"section",htmlClass:"section",items:[{type:"section",htmlClass:"row",items:[{type:"section-heading",htmlClass:"col s12",text:n.instant("Contact Details")}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l4",key:"phone",validationMessage:{phoneNumber:u.phoneNumber.message,201:u.textLengthExceedValidation.message(T.formSchema.properties.phone.maxLength)},$validators:{phoneNumber:u.phoneNumber.validator}},{type:"text",htmlClass:"col s12 m12 l4",key:"fax",validationMessage:{phoneNumber:u.phoneNumber.message,201:u.textLengthExceedValidation.message(T.formSchema.properties.fax.maxLength)},$validators:{phoneNumber:u.phoneNumber.validator}},{type:"text",htmlClass:"col s12 m12 l4",key:"email",validationMessage:{email:u.email.message,201:u.textLengthExceedValidation.message(T.formSchema.properties.email.maxLength)},$validators:{email:u.email.validator}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l4",key:"street1",validationMessage:{201:u.textLengthExceedValidation.message(T.formSchema.properties.street1.maxLength)}},{type:"text",htmlClass:"col s12 m12 l4",key:"street2",validationMessage:{201:u.textLengthExceedValidation.message(T.formSchema.properties.street2.maxLength)}},{type:"text",htmlClass:"col s12 m12 l4",key:"city",validationMessage:{201:u.textLengthExceedValidation.message(T.formSchema.properties.city.maxLength)}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l4",key:"province",validationMessage:{201:u.textLengthExceedValidation.message(T.formSchema.properties.province.maxLength)}},{type:"text",htmlClass:"col s12 m12 l4",key:"zipCode",validationMessage:{201:u.textLengthExceedValidation.message(T.formSchema.properties.zipCode.maxLength)}},{type:"select",htmlClass:"col s12 m12 l4",key:"country",titleMap:e.countries.titleMap}]},{type:"section",htmlClass:"row",items:[{type:"textarea",htmlClass:"col s12 m12 l6",key:"note",validationMessage:{201:u.textLengthExceedValidation.message(T.formSchema.properties.note.maxLength)}}]}]}],m.addRequiredMessage(T.form),T.permissions.update){var t={type:"section",htmlClass:"row form-buttons",items:[{htmlClass:"col s12 right-align",type:"submit",title:"Save"}]};T.form.push(t)}}function b(e){o.$broadcast("schemaFormValidate"),e.$valid&&T.submitOrganizationGeneralInformation()}function C(){var e="POST",t="organization",i="saveSuccess";e="PATCH",i="updateSuccess",T.model.costCenterEnabled&&(T.model.costCentre?T.model.cost_centre_id=T.model.costCentre.id:T.model.cost_centre_id=null),l.clearCache(t),l.call(t,e,T.model,{}).then(function(e){r.showLocalizedToast(i),l.call(t,"GET",[],{}).then(function(e){angular.extend(T.defaultData,e.data.data),T.costCentreEnabledInitially!=T.defaultData.costCenterEnabled||T.eeoEnabledInitially!=T.model.eeoApplicable?a.location.reload():w()})},function(e){s.success(e)})}function w(){T.model.street1=T.defaultData.street1,T.model.street2=T.defaultData.street2,T.model.city=T.defaultData.city,T.model.province=T.defaultData.province,T.model.zipCode=T.defaultData.zipCode,T.model.country=T.defaultData.country?T.defaultData.country:"",T.model.phone=T.defaultData.phone,T.model.fax=T.defaultData.fax,T.model.email=T.defaultData.email,T.model.name=T.defaultData.name,T.model.taxId=T.defaultData.taxId,T.model.registraionNumber=T.defaultData.registraionNumber,T.model.costCentre=T.defaultData.costCentre,T.model.note=T.defaultData.note,T.model.numemp=T.defaultData.numemp,T.model.eeoApplicable=1==T.defaultData.eeo_applicable,T.model.costCenterEnabled=1==T.defaultData.costCenterEnabled,T.costCentreEnabledInitially=T.model.costCenterEnabled,T.eeoEnabledInitially=T.model.eeoApplicable}function _(){var e=[];e.push(l.call("organization","GET",[],{})),t.all(e).then(function(e){T.defaultData=d.convertDates(e[0].data.data),Object.keys(T.defaultData).forEach(function(e,t){null==T.defaultData[e]&&(T.defaultData[e]="")}),angular.isDefined(T.defaultData.eeo_applicable)&&1==T.defaultData.eeo_applicable&&(x=!0),T.defaultData.cost_centre_id?g.getCostCentreById(T.defaultData.cost_centre_id).then(function(e){T.defaultData.costCentre=e,S()},function(){T.defaultData.costCentre=null,T.defaultData.cost_centre_id=null,S()}):(T.defaultData.costCentre=null,S())})}function S(){D(y),w()}function D(e){"countrylist"in i?y({countries:m.getEnumAndTitleMapForSelect(i.countrylist,{value:"cou_code",name:"cou_name"})}):l.call("countries","GET",[],{}).then(function(e){var t=e.data.data;i.countrylist=t,y({countries:m.getEnumAndTitleMapForSelect(i.countrylist,{value:"cou_code",name:"cou_name"})})})}y.$inject=["formData"];var T=this;T.title="General Information",T.submitOrganizationGeneralInformation=C,T.onSubmit=b,T.contact={},T.model={},T.defaultData;var x=!1;v()}angular.module("app.admin").controller("AdminOrganizationGeneralInformationController",e),e.$inject=["logger","$q","$window","$rootScope","$scope","$translate","webservice","localizedMessages","toast","loader","pimHelper","formHelper","formValidationHelper","datagroupPermissions","$state","costCentreService","ModalService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(e){C.schema={type:"object",title:C.title,properties:{currency_id:{title:"Currency",type:"string","enum":e["enum"]},minSalary:{title:"Minimum Salary",type:"string"},maxSalary:{title:"Maximum Salary",type:"string"}},required:["currency_id"]},C.form=[{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l12",key:"currency_id",titleMap:e.titleMap,validationMessage:{302:t.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"minSalary",validationMessage:{numericPositive:m.numericPositiveMaxTwoDecimalPlaces.message,max:p.instant("Should be less than 1,000,000,000")},$validators:{numericPositive:m.numericPositiveMaxTwoDecimalPlaces.validator,max:function(e){return!e||parseInt(e)<1e9}},onChange:function(e,t){!e||!C.model.maxSalary||0==parseInt(C.model.maxSalary)||0==parseInt(e)||parseInt(e)<=parseInt(C.model.maxSalary)?d.$broadcast("schemaForm.error.maxSalary","lowerThanMinimum",!0):d.$broadcast("schemaForm.error.maxSalary","lowerThanMinimum",!1)},ngModelOptions:{allowInvalid:!0}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"maxSalary",validationMessage:{numericPositive:m.numericPositiveMaxTwoDecimalPlaces.message,max:p.instant("Should be less than 1,000,000,000"),lowerThanMinimum:p.instant("Should be higher than Minimum Salary")},$validators:{numericPositive:m.numericPositiveMaxTwoDecimalPlaces.validator,max:function(e){return!e||parseInt(e)<1e9}},onChange:function(e,t){"undefined"==typeof e&&(e=document.getElementById("maxSalary").value),!e||!C.model.minSalary||0==parseInt(C.model.minSalary)||0==parseInt(e)||parseInt(C.model.minSalary)<=parseInt(e)?d.$broadcast("schemaForm.error.maxSalary","lowerThanMinimum",!0):d.$broadcast("schemaForm.error.maxSalary","lowerThanMinimum",!1)},ngModelOptions:{allowInvalid:!0}}]}],f.addRequiredMessage(C.form),C.model={pay_grade_id:C.assignedCurrency.pay_grade_id,
currency_id:C.assignedCurrency.currency_id,minSalary:C.assignedCurrency.minSalary,maxSalary:C.assignedCurrency.maxSalary,original_currency_id:a.currency_id}}function h(a){if(d.$broadcast("schemaFormValidate"),a.$valid){s.show();var l="payGrades/"+C.assignedCurrency.pay_grade_id+"/payGradeCurrency";e.call(l,n,C.model,{}).then(function(e){var a=e.data.data;if(a.currencyType=u("filter")(o,{currency_id:a.currency_id},!0)[0],"POST"==n){var l="saveSuccess";i.unshift(a)}else if("PATCH"==n){var l="updateSuccess";v(a)}s.hide(),t.showLocalizedToast(l)},function(e){s.hide(),c.success(e)}),r(!0)}}function v(e){for(var t=0;t<i.length;t++)if(i[t].currency_id==C.model.original_currency_id){angular.extend(i[t],e);break}}function y(){r(!1)}function b(e){for(var o=[],n=[],l=0;l<e.length;l++){var r=u("filter")(i,{currency_id:e[l].currency_id},!0);a.currency_id!=e[l].currency_id&&r.length>0||(o.push({value:e[l].currency_id,name:e[l].currency_id+" - "+t.getLocalizedCustom(e[l].currency_name)}),n.push(e[l].currency_id))}return{titleMap:o,"enum":n}}var C=this,w={};C.title=l,angular.copy(a,w),C.assignedCurrency=w,C.save=h,C.cancel=y,C.canValidateMaxSalary=!1,C.currencyTypeList=b(o),g(C.currencyTypeList)}angular.module("app.admin").controller("AdminEditAssignedCurrenciesController",e),e.$inject=["webservice","localizedMessages","assignedCurrency","dataList","currencyTypes","method","title","close","loader","toast","$scope","formValidationHelper","$filter","$translate","formHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s){function c(){e.call("payGrades","GET",[]).then(function(e){g.exsistingPayGrades=f(e.data.data,"name",!0),d()})}function d(){g.schema={type:"object",title:"Pay Grade",properties:{name:{title:"Name",type:"string",maxLength:50}},required:["name"]},g.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"name",validationMessage:{duplicationPayGrades:t.getLocalizedCustom("Already exists"),302:t.getLocalizedCustom("Required"),201:s.textLengthExceedValidation.message(g.schema.properties.name.maxLength)},$validators:{duplicationPayGrades:m}}]}],r.addRequiredMessage(g.form),g.model.name=g.payGrade.name?g.payGrade.name:""}function m(e){return""==e||(g.exsistingPayGrades?!(g.exsistingPayGrades.indexOf(e.toLowerCase())>-1):void 0)}function u(r){if(l.$broadcast("schemaFormValidate"),r.$valid){o.show();var s="POST",c="payGrades",d="saveSuccess";e.call(c,s,g.model,{}).then(function(e){o.hide(),delete g.exsistingPayGrades,t.showLocalizedToast(d),"POST"==s&&a.unshift(e.data.data)},function(e){o.hide(),n.success(e)}),i(!0)}}function p(){i(!1)}function f(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}var g=this,h={};g.payGrade=h,g.save=u,g.cancel=p,g.exsistingPayGrades,g.model={},c()}angular.module("app.admin").controller("AdminEditPayGradesController",e),e.$inject=["webservice","localizedMessages","dataList","close","loader","toast","$scope","formHelper","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){c.getPermissions().then(function(t){if(t.pay_grades.read){A.payGradeId=r.payGradeId;var a=[];r.payGrades?A.exsistingPayGrades=I(r.payGrades,"name",!0):a.push(i.call("payGrades","GET",[]).then(function(e){A.exsistingPayGrades=I(e.data.data,"name",!0)})),A.payGrade||a.push(i.call("payGrades/"+A.payGradeId,"GET",[]).then(function(e){A.payGrade=e.data.data})),A.permissions||(A.permissions=t.pay_grades,A.permissions["delete"]=A.permissions.update,A.permissions.create=A.permissions.update),A.currencyTypes||a.push(i.call("currencyType","GET",[]).then(function(e){A.currencyTypes=e.data.data})),e.all(a).then(function(e){f(),_(),A.payGrade.assignedCurrencies.forEach(function(e,t){A.payGrade.assignedCurrencies[t].currencyType=s("filter")(A.currencyTypes,{currency_id:e.currency_id},!0)[0]}),A.assignedCurrencies=A.payGrade.assignedCurrencies,A.assignedCurrencies=m.getSortedObjectList(A.assignedCurrencies,function(e){return e.currencyType.currency_name},"ASC");var t=A.exsistingPayGrades.indexOf(A.payGrade.name.toLowerCase());A.exsistingPayGrades.splice(t,1)})}else o.hide(),d.go("403")})}function f(){A.panelInfo={assignedCurrenciesInfo:{title:"",icon:"images/pim/icon_work.svg"}},g()}function g(){var e=[{name:"currencyName",lable:"Currency",getter:["currencyType","currency_name"],formatter:function(e){return a.getLocalizedCustom(e)}},{name:"minSalary",lable:"Minimum Salary",getter:"minSalary",filters:[{name:"currency",params:["",2]}]},{name:"maxSalary",lable:"Maximum Salary",getter:"maxSalary",filters:[{name:"currency",params:["",2]}]}],t=[{colspan:1}],i=[{"class":"edit_item",clickAction:"editAssignedCurrencies",tooltip:"Edit"}],o=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:A.permissions["delete"]}];A.listData={assignedCurrencies:{selectable:!0,selected:[],idGetter:["assignedCurrencies","currency_id"],listFields:e,showColumnsAnyway:!0,permission:A.permissions,listActions:o}},A.permissions.update&&(A.listData.assignedCurrencies.extraTH=t,A.listData.assignedCurrencies.extraTD=i)}function h(){if(A.schema={type:"object",title:"Edit Pay Grade",readonly:!0,properties:{name:{title:"Name",type:"string",maxLength:50}},required:["name"]},A.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"name",validationMessage:{duplicationPayGrades:a.getLocalizedCustom("Already exists"),302:a.getLocalizedCustom("Required"),201:u.textLengthExceedValidation.message(A.schema.properties.name.maxLength)},$validators:{duplicationPayGrades:v}}]}],m.addRequiredMessage(A.form),A.model={name:A.payGrade.name},A.permissions.update){A.schema.readonly=!1;var e={type:"section",htmlClass:"row form-buttons",items:[{htmlClass:"right",type:"submit",title:"Save"},{htmlClass:"right",type:"button",title:"Cancel",style:"secondary-btn",onClick:w},{htmlClass:"right",type:"button",onClick:S,title:"Assign currency"}]};A.form.push(e)}}function v(e){return""==e||(A.exsistingPayGrades?!(A.exsistingPayGrades.indexOf(e.toLowerCase())>-1):void 0)}function y(e){l.$broadcast("schemaFormValidate"),e.$valid&&b()}function b(){var e={name:A.model.name},t="PATCH",l="payGrades/"+A.payGradeId,r="updateSuccess",s="Failed To Updated Record";i.call(l,t,e,{}).then(function(e){o.hide(),1==e.data.data.success?a.showLocalizedToast(r):n.success(s)},function(e){o.hide(),n.success(e)})}function C(e){t.showModal({templateUrl:"app/admin/payGrades/pay_grade_assigned_currency_modal.html",controller:"AdminEditAssignedCurrenciesController",controllerAs:"modal",inputs:{assignedCurrency:e,currencyTypes:A.currencyTypes,dataList:A.assignedCurrencies,title:"Edit Currency",method:"PATCH"}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function w(){d.go("admin.pay_grades")}function _(){h()}function S(){var e={pay_grade_id:A.payGradeId,currency_id:"",minSalary:"",maxSalary:""};t.showModal({templateUrl:"app/admin/payGrades/pay_grade_assigned_currency_modal.html",controller:"AdminEditAssignedCurrenciesController",controllerAs:"modal",inputs:{assignedCurrency:e,currencyTypes:A.currencyTypes,dataList:A.assignedCurrencies,title:"Add Currency",method:"POST"}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function D(e){var t=e.obj;if(t.selected)A.listData.assignedCurrencies.selected.push(t.currency_id);else{var a=A.listData.assignedCurrencies.selected.indexOf(t.currency_id);a>-1&&A.listData.assignedCurrencies.selected.splice(a,1)}}function T(){A.listData.assignedCurrencies.selected.length>0&&t.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&x()})})}function x(){if(A.listData.assignedCurrencies.selected.length>0){var e=A.listData.assignedCurrencies.selected.length;o.show(),i.call("payGrades/"+A.payGradeId+"/payGradeCurrency","DELETE",{data:A.listData.assignedCurrencies.selected},{}).then(function(t){if(o.hide(),t.data.data.success=!0){var i="deleteSuccess";a.showLocalizedToast(i),A.total-=e,F(A.listData.assignedCurrencies.selected)}},function(e){o.hide(),n.success(e)})}}function F(e){for(var t=A.assignedCurrencies.length-1;t>=0;t--){var a=e.indexOf(A.assignedCurrencies[t].currency_id);a>-1&&(e.splice(a,1),A.assignedCurrencies.splice(t,1))}}function k(e){A.listData.assignedCurrencies.selected=[];for(var t=0;t<A.assignedCurrencies.length;t++)A.assignedCurrencies[t].selected=!0,A.listData.assignedCurrencies.selected.push(A.assignedCurrencies[t].currency_id)}function E(e){A.listData.assignedCurrencies.selected=[];for(var t=0;t<A.assignedCurrencies.length;t++)A.assignedCurrencies[t].selected=!1}function I(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}var A=this;A.title="Pay Grade",A.assignedCurrencies={},A.savePayGrade=b,A.onSubmit=y,A.editAssignedCurrencies=C,A.addAssignedCurrencies=S,A.changeSelection=D,A.deleteSelection=T,A.selectAll=k,A.deselectAll=E,p()}angular.module("app.admin").controller("AdminPayGradeDetailsController",e),e.$inject=["$q","ModalService","localizedMessages","webservice","loader","toast","$scope","$stateParams","$filter","datagroupPermissions","$state","formHelper","formValidationHelper"]}(),$(function(){$(".material-tooltip").hide()}),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c){function d(){a.show(),c.getPermissions().then(function(e){e.pay_grades.read?(C.permissions=e.pay_grades,u(),C.fetchPayGrades("name","ASC")):(a.hide(),s.go("403"))})}function m(o,n){var r={sortingFeild:C.SortingListFields[o],sortingOrder:n};c.getPermissions().then(function(o){return o.pay_grades.read?e.call("payGrades","GET",[],r).then(function(e){C.payGrades=e.data.data,C.payGradesListHelper=new t.list(C.listData.payGrades,C.payGrades),C.selectAll=C.payGradesListHelper.selectAllItems,C.deselectAll=C.payGradesListHelper.deselectAllItems,a.hide(),0==C.payGrades.length&&l.infoToast("No Records Found")},function(e){a.hide(),i.warning(l.getLocalizedCustom(e.statusText,null))}):(a.hide(),void s.go("403"))})}function u(){C.panelInfo={payGradesInfo:{title:"",icon:"images/pim/icon_work.svg"}},p()}function p(){var e=[{name:"name",lable:"Pay Grade",getter:"name",sortable:!0,sortAction:"fetchPayGrades"},{name:"currencyList",lable:"Currency",getter:"PayGradeCurrency",sortable:!1,formatter:function(e,t){var a=[];if(angular.isArray(e))for(var i=0;i<e.length;i++)a.push(l.getLocalizedCustom(e[i].CurrencyType.currency_name));return a.join()}}],t=[{colspan:1}],a=[{"class":"edit_item",clickAction:"editPayGrade",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:C.permissions["delete"]}],o=["5%","15%","75%","5%"];C.permissions["delete"]||o.shift(),C.listData={payGrades:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:C.permissions,listActions:i,columnWidths:o,pagination:!0}}}function f(){C.listData.payGrades.selected.length>0&&n.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&g()})})}function g(){if(C.listData.payGrades.selected.length>0){C.listData.payGrades.selected.length;a.show(),e.call("payGrades","DELETE",{data:C.listData.payGrades.selected},{}).then(function(e){if(a.hide(),e.data.data.failure.length>0)0==e.data.data.success.length?i.warning("Pay Grade/s Will Not Be Deleted Since It's Already In Use"):i.warning("Some Pay Grade/s Will Not Be Deleted Since It's Already In Use");else{var t="deleteSuccess";l.showLocalizedToast(t)}C.total-=e.data.data.success.length,h(e.data.data.success)},function(e){a.hide(),i.success(e)})}}function h(e){for(var t=C.payGrades.length-1;t>=0;t--){var a=e.indexOf(C.payGrades[t].id);if(a>-1){var i=C.listData.payGrades.selected.indexOf(C.payGrades[t].id);i>-1&&C.listData.payGrades.selected.splice(i,1),e.splice(a,1),C.payGrades.splice(t,1)}}}function v(e){var t=e.obj;if(t.selected)C.listData.payGrades.selected.push(t.id);else{var a=C.listData.payGrades.selected.indexOf(t.id);a>-1&&C.listData.payGrades.selected.splice(a,1)}}function y(e){$(".material-tooltip").remove();var e=r("filter")(C.payGrades,{id:e.id},!0);e=e[0],s.go("admin.pay_grade_details",{payGradeId:e.id,payGradesPermissions:C.permissions,payGrades:C.payGrades})}function b(){var e={name:""};n.showModal({templateUrl:"app/admin/payGrades/pay_grade_modal.html",controller:"AdminEditPayGradesController",controllerAs:"modal",inputs:{payGrade:e,payGradeObjectArray:C.payGrades,dataList:C.payGrades}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}var C=this;C.editPayGrade=y,C.deleteSelection=f,C.changeSelection=v,C.addPayGrade=b,C.fetchPayGrades=m,C.SortingListFields={name:"name"},d()}angular.module("app.admin").controller("AdminPayGradesController",e),e.$inject=["webservice","listHelper","loader","toast","$q","ModalService","localizedMessages","$filter","$state","datagroupPermissions"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g){function h(){g.getPermissions().then(function(t){_.permissions=t.admin_preferences;var a=[];a.push(s.call("localizationLanguages","GET",[])),a.push(s.call("localizationDateFormats","GET",[])),a.push(s.call("preferences","GET",[])),i.all(a).then(function(t){_.languageList=w(t[0].data.data),_.dateFormatList=w(t[1].data.data),_.existingLanguage=t[2].data.existingLanguage,_.existingDateFormat=t[2].data.existingDateFormat,v(),y(),null!==localStorage.getItem("toast")&&(e.showLocalizedToast(localStorage.getItem("toast")),localStorage.removeItem("toast"))},function(e){f.go("403")})})}function v(){_.formSchema={type:"object",title:"Localization",properties:{language:{title:"Language",type:"string","enum":_.languageList["enum"]},dateFormat:{title:"Date Format",type:"string","enum":_.dateFormatList["enum"]}},required:["language","dateFormat"]},_.form=[{type:"section",htmlClass:"row ",items:[{type:"select",htmlClass:"col s12 m12 l5",titleMap:_.languageList.titleMap,key:"language",validationMessage:{302:e.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l5",titleMap:_.dateFormatList.titleMap,key:"dateFormat"}]}],p.addRequiredMessage(_.form)}function y(){_.formModel.language=_.existingLanguage,_.formModel.dateFormat=_.existingDateFormat}function b(e){n.$broadcast("schemaFormValidate"),e.$valid&&C()}function C(){s.call("preferences","PATCH",_.formModel,{}).then(function(e){location.reload(),localStorage.setItem("toast","updateSuccess")},function(e){loader.hide(),d.error(e)})}function w(e){var t=[],a=[];for(var i in e)e.hasOwnProperty(i)&&(t.push({value:i,name:e[i]}),a.push(i));return{titleMap:t,"enum":a}}var _=this;_.onSubmit=b,_.title="Preferences",_.languageList="",_.dateFormatList="",_.existingLanguage="",_.existingDateFormat="",_.existingUseBrowserLanguage=!0,_.submitLocalizationDetails=C,_.formModel={},h()}angular.module("app.admin").controller("AdminPreferencesController",e),e.$inject=["localizedMessages","$sce","logger","$q","$rootScope","$scope","$window","$stateParams","webservice","$timeout","toast","pimHelper","ModalService","formHelper","$state","datagroupPermissions"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){r.show(),n.call("reportsCatalog","GET",[],{}).then(function(e){p(),h.reportsCatalog=e.data.data,h.cannedReportsListHelper=new t.list(h.listData.reportsCatalog,h.reportsCatalog),h.selectAll=h.cannedReportsListHelper.selectAllItems,h.deselectAll=h.cannedReportsListHelper.deselectAllItems,r.hide(),0==h.reportsCatalog.length&&c.infoToast("No Records Found")},function(e){r.hide(),d.go("403")})}function p(){h.panelInfo={reportsCatalogInfo:{icon:"images/pim/icon_work.svg"}},f()}function f(){var e=[{name:"report",lable:"Report",getter:"name",clickAction:"runReport",formatter:function(e){return c.getLocalizedCustom(e)}}];h.listData={reportsCatalog:{selectable:!1,selected:[],idGetter:"id",listFields:e,showColumnsAnyway:!0,permission:h.permissions,listActions:[]}}}function g(e){var t=[{name:"Reports and Analytics",state:null,params:null},{name:h.title,state:d.$current.name,params:d.$current.params}];d.go("report_view_with_persistence",{id:e.id,filters:null,breadCrumbs:t,menuSelector:"menu_admin_reportsCatalog"})}var h=this;h.title="Reports Catalog",h.reportsCatalog="",h.permissions={create:!0,"delete":!0,read:!0,update:!0},h.runReport=g,u()}angular.module("app.admin").controller("AdminReportsCatalogController",e),e.$inject=["logger","listHelper","$q","$window","ModalService","webservice","$rootScope","loader","toast","localizedMessages","$state","datagroupPermissions"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){var a=[];a.push(t.call("salaryComponents","GET",[])),_&&a.push(t.call("salaryComponent","GET",[],{id:S.salaryComponent.id})),e.all(a).then(function(e){if(p(),S.exsistingSalaryComponents=w(e[0].data.data,"name",!0),_&&(S.salaryComponent=e[1].data.data),h(),_){var t=S.exsistingSalaryComponents.indexOf(S.salaryComponent.name.toLowerCase());S.exsistingSalaryComponents.splice(t,1)}})}function p(){S.schema={type:"object",title:"Salary Components",properties:{name:{title:"Component Name",name:"name",type:"string",maxLength:60},type:{title:"Type",name:"type",type:"string","enum":["1","2"]},is_part_of_total_payable:{title:"Total Payable",name:"is_part_of_total_payable",type:"boolean"},is_cost_to_company:{title:"Cost to Company",name:"is_cost_to_company",type:"boolean"},amount:{title:"Amount",name:"amount",type:"boolean"},percentage:{title:"Percentage",name:"percentage",type:"boolean"}},required:["name","type"]},S.disabledClass="",0==S.salaryComponent.isEditable&&(S.schema.readonly=!0,S.disabledClass="disabled"),S.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12",key:"name",validationMessage:{302:a.getLocalizedCustom("Required"),duplicationComponentName:a.getLocalizedCustom("Already exists"),201:m.textLengthExceedValidation.message(S.schema.properties.name.maxLength)},$validators:{duplicationComponentName:g}}]},{type:"section",htmlClass:"row",items:[{type:"radiobuttons",htmlClass:"col s12",titleMap:[{value:"1",name:"Earning"},{value:"2",name:"Deduction"}],key:"type"}]},{type:"section",htmlClass:"row",items:[{type:"help",htmlClass:"col s12",helpvalue:'<label class="radiobutton-label active-collection-label '+S.disabledClass+'">'+a.getLocalizedCustom("Add to")+"</label>"}]},{type:"section",htmlClass:"row",items:[{htmlClass:"col s6",key:"is_part_of_total_payable"},{htmlClass:"col s6",key:"is_cost_to_company"}]},{type:"section",htmlClass:"row",items:[{type:"help",htmlClass:"col s12",helpvalue:'<label class="radiobutton-label active-collection-label '+S.disabledClass+'">'+a.getLocalizedCustom("Value Type")+"</label>"}]},{type:"section",htmlClass:"row",items:[{htmlClass:"col s6",key:"amount",onChange:f,validationMessage:{atLeastOneValueTypeRequiredValidation:a.getLocalizedCustom("Required")}},{htmlClass:"col s6",key:"percentage",onChange:f}]}],d.addRequiredMessage(S.form)}function f(){s.$broadcast("schemaForm.error.amount","atLeastOneValueTypeRequiredValidation",!0)}function g(e){return""==e||(S.exsistingSalaryComponents?!(S.exsistingSalaryComponents.indexOf(e.toLowerCase())>-1):void 0)}function h(){S.model={name:S.salaryComponent.name?S.salaryComponent.name:"",is_part_of_total_payable:S.salaryComponent.is_part_of_total_payable,is_cost_to_company:S.salaryComponent.is_cost_to_company},_&&S.schema.readonly&&S.salaryComponent.name&&"Annual Basic Payment"==S.salaryComponent.name&&(S.model.name=a.getLocalizedCustom("Annual Basic Payment"));for(var e in S.salaryComponent.value_type)"1"==S.salaryComponent.value_type[e]?S.model.amount=!0:"2"==S.salaryComponent.value_type[e]&&(S.model.percentage=!0);S.model.type=S.salaryComponent.type,_&&(S.model.id=S.salaryComponent.id)}function v(e){if(S.model.amount||S.model.percentage?s.$broadcast("schemaForm.error.amount","atLeastOneValueTypeRequiredValidation",!0):s.$broadcast("schemaForm.error.amount","atLeastOneValueTypeRequiredValidation",!1),s.$broadcast("schemaFormValidate"),e.$valid){l.show();var i="POST",c="salaryComponents",d="saveSuccess";_?(i="PATCH",c+="/"+S.model.id,d="updateSuccess"):(i="POST",d="saveSuccess"),t.call(c,i,S.model,{}).then(function(e){l.hide(),"POST"==i?o.unshift(y(e.data.data)):"PATCH"==i&&b(y(S.model)),a.showLocalizedToast(d)},function(e){l.hide(),r.success(e)}),n(!0)}}function y(e){var t=a.getLocalizedCustom("Earning"),i=a.getLocalizedCustom("Deduction"),o=a.getLocalizedCustom("Yes"),n=a.getLocalizedCustom("No");return e.type="1"==e.type?t:i,e.is_part_of_total_payable="1"==e.is_part_of_total_payable?o:n,e.is_cost_to_company="1"==e.is_cost_to_company?o:n,e}function b(e){for(var t=0;t<o.length;t++)if(o[t].id==e.id){angular.extend(o[t],e);break}}function C(){n(!1)}function w(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}c.close=n;var _=!1,S=this,D={};angular.copy(i,D),S.salaryComponent=D,S.extractFeildValueFromData=w,S.exsistingSalaryComponents,S.salaryComponent.id?(S.title="Edit Salary Component",_=!0):S.title="Add Salary Component",S.save=v,S.cancel=C,u()}angular.module("app.pim").controller("AdminEditSalaryComponentController",e),e.$inject=["$q","webservice","localizedMessages","salaryComponent","dataList","close","loader","toast","$scope","modalFunctions","formHelper","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){c.show(),r.call("salaryComponents","GET",[],{}).then(function(e){E.unselectableIdList||(E.unselectableIdList=e.data.uneditableIdList),u.getSetting("page_size").then(function(e){E.pageSize=e,E.fetchSalaryComponents("name","ASC",1)})},function(e){c.hide(),m.go("403")})}function f(t,i,o){c.show();var n={offset:(o-1)*E.pageSize,limit:E.pageSize,sortingField:E.sortingListFields[t],sortingOrder:i};e.getPermissions().then(function(e){if(E.permissions=e.admin_salary_components,E.permissions.read){var t=[];t.push(r.call("salaryComponents","GET",[],n)),a.all(t).then(function(e){v(),E.salaryComponents=h(e[0].data.data),E.totalDataCount=e[0].data.meta.total,E.dataInCurruntPage=e[0].data.data.length,E.page=o,E.lastPage=Math.ceil(E.totalDataCount/E.pageSize),g(),c.hide(),0==E.salaryComponents.length&&l.infoToast("No Records Found")})}else c.hide(),m.go("403")})}function g(){E.salaryComponentsListHelper=new i.list(E.listData.salaryComponents,E.salaryComponents,E.unselectableIdList),E.selectAll=E.salaryComponentsListHelper.selectAllItems,E.deselectAll=E.salaryComponentsListHelper.deselectAllItems}function h(e){var t=l.getLocalizedCustom("Earning"),a=l.getLocalizedCustom("Deduction"),i=l.getLocalizedCustom("Yes"),o=l.getLocalizedCustom("No");for(var n in e)"Annual Basic Payment"==e[n].name&&(e[n].name=l.getLocalizedCustom("Annual Basic Payment")),e[n].type="1"==e[n].type?t:a,e[n].is_part_of_total_payable="1"==e[n].is_part_of_total_payable?i:o,e[n].is_cost_to_company="1"==e[n].is_cost_to_company?i:o;return e}function v(){var e=[{name:"name",lable:"Component Name",getter:"name",sortable:!0,sortAction:"fetchSalaryComponents"},{name:"type",lable:"Type",getter:"type",sortable:!0,sortAction:"fetchSalaryComponents"},{name:"isPayable",lable:"Part of Total Payable?",getter:"is_part_of_total_payable",sortable:!0,sortAction:"fetchSalaryComponents"},{name:"isCost",lable:"Cost to Company?",getter:"is_cost_to_company",sortable:!0,sortAction:"fetchSalaryComponents"}],t=[{colspan:3}],a=[{"class":"edit_item",clickAction:"editSalaryComponent",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:E.permissions["delete"]}];E.listData={salaryComponents:{selectable:!0,selected:[],idGetter:"id",listFields:e,showColumnsAnyway:!0,permission:E.permissions,listActions:i,pagination:!0,unselectableIds:E.unselectableIdList}},E.listData.salaryComponents.columnWidths=["5%","35%","20%","20%","15%","5%"],E.permissions.update&&(E.listData.salaryComponents.extraTH=t,E.listData.salaryComponents.extraTD=a)}function y(){E.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function b(e){var t={close:function(){}};n.showModal({templateUrl:"app/admin/salaryComponents/salary_component_modal.html",controller:"AdminEditSalaryComponentController",controllerAs:"modal",inputs:{salaryComponent:e,dataList:E.salaryComponents,modalFunctions:t}}).then(function(e){$(e.element).openModal({complete:function(){t.close()}}),e.close.then(function(e){})})}function C(){if(E.listData.salaryComponents.selected.length>0){c.show();var e=E.listData.salaryComponents.selected.length;r.call("salaryComponents","DELETE",{data:E.listData.salaryComponents.selected},{}).then(function(t){c.hide();var a="deleteSuccess";l.showLocalizedToast(a),w(E.listData.salaryComponents.selected),x(e)},function(e){c.hide(),l.errorToast(e.data[0])})}}function w(e){for(var t=E.salaryComponents.length-1;t>=0;t--){var a=e.indexOf(E.salaryComponents[t].id);a>-1&&(e.splice(a,1),E.salaryComponents.splice(t,1))}}function _(e){var t=e.obj;if(t.selected)E.listData.salaryComponents.selected.push(t.id);else{var a=E.listData.salaryComponents.selected.indexOf(t.id);a>-1&&E.listData.salaryComponents.selected.splice(a,1)}}function S(){E.listData.salaryComponents.selected.length>0&&n.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&C()})})}function D(){var e={name:"",type:"1",is_cost_to_company:!1,is_part_of_total_payable:!1,value_type:["1"],isEditable:!0},t={close:function(){}};n.showModal({templateUrl:"app/admin/salaryComponents/salary_component_modal.html",controller:"AdminEditSalaryComponentController",controllerAs:"modal",inputs:{salaryComponent:e,dataList:E.salaryComponents,modalFunctions:t}}).then(function(e){$(e.element).openModal({complete:function(){t.close(!1)}}),e.close.then(function(e){e&&T()})})}function T(){E.totalDataCount=E.totalDataCount+1,E.dataInCurruntPage=E.dataInCurruntPage+1}function x(e){E.totalDataCount=E.totalDataCount-e,E.dataInCurruntPage=E.dataInCurruntPage-e}function F(){close(!0)}function k(){close(!1)}var E=this;E.title="Salary Components",E.salaryComponents="",E.editSalaryComponent=b,E.deleteSalaryComponent=C,E.changeSelection=_,E.deleteSelection=S,E.addSalaryComponent=D,E.confirm=F,E.cancel=k,E.fetchSalaryComponents=f,E.sortingListFields={name:"name",type:"type",isPayable:"is_part_of_total_payable",isCost:"is_cost_to_company"},E.pageSize=50,E.page=1,E.lastPage=0,E.totalDataCount=0,E.dataInCurruntPage=0,E.tempEmpNo=s.empNumber,p(),y()}angular.module("app.admin").controller("AdminSalaryComponentController",e),e.$inject=["datagroupPermissions","logger","$q","listHelper","$window","ModalService","localizedMessages","webservice","$rootScope","loader","toast","$state","settingsService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y){function b(){var e={settings:g.getSettings(),attributes:f.getSamlAttributes()};k.isSPConfig&&(e.certificates=f.verifySamlCertificate()),c.all(e).then(function(e){k.maxAttachmentSize=65536,k.fileType=e.settings.allowed_image_types,k.tokenArray=e.attributes.data.data,x(),C(),F()})}function C(){k.schema={type:"object",title:"Projects",properties:{name:{title:"IdP Name",type:"string",maxLength:255},type:{title:"Provider Type",type:"string","enum":k.typeArrayForForm["enum"]},metadata:{title:"IdP Metadata",type:"string",maxLength:15e3},status:{title:"Status",type:"string","enum":k.statusArrayForForm["enum"]},username_key:{title:"Username Key",type:"string",minLength:1,maxLength:255},image:{title:"Alternative Login Icon",type:"object"},link:{title:"OrangeHRM Metadata Link",type:"string"},saml_provider_attribute_statement:{title:"Attribute Statement",type:["null","object"]}},required:["name","metadata","username_key","saml_provider_attribute_statement"]},k.form=[{type:"row",items:[{type:"text",htmlClass:"col-4",key:"name",placeholder:l.getLocalizedCustom("Type IdP name"),validationMessage:{201:r.textLengthExceedValidation.message(k.schema.properties.name.maxLength),302:l.getLocalizedCustom("Required")}},{type:"select",htmlClass:"col-4",key:"type",emptyOption:!1,readonly:!0,titleMap:k.typeArrayForForm.titleMap},{type:"radiobuttons",htmlClass:"col-4",key:"status",titleMap:k.statusArrayForForm.titleMap,makeHorizontal:!0,onChange:function(e){k.statusChanged=0==e&&!k.model.allowed_to_disable}}]},{type:"row",items:[{type:"textarea",htmlClass:"col-12",key:"metadata",placeholder:l.getLocalizedCustom("Type your metadata"),ngModelOptions:{allowInvalid:!0},validationMessage:{201:r.textLengthExceedValidation.message(k.schema.properties.metadata.maxLength),302:l.getLocalizedCustom("Required"),metadataValidation:l.getLocalizedCustom("Invalid")},$asyncValidators:{"tv4-metadataValidation":S}}]},{type:"row",condition:k.isSPConfig,items:[{type:"file",htmlClass:"col-8",key:"image",maxSize:k.maxAttachmentSize,customHint:l.getLocalizedCustomWithVariables("Support up to {{fileSize}}Kb, and same width & height icons",{fileSize:y("number")(k.maxAttachmentSize/1024,0)}),allowedFileTypes:["image/png","image/jpeg","image/jpg","image/gif","image/pjpeg"],attachmentExists:k.fileName,attachmentFileName:k.fileName,permissions:{read:!1,update:!0},deleteAttachment:function(e){e.showDeleteConfirmation=!0},confirmDeletion:function(e){e.attachmentExists=!1,e.showDeleteConfirmation=!1,k.model.image={}},cancelDeletion:function(e){e.showDeleteConfirmation=!1},validationMessage:{fileSize:l.getLocalizedCustom("Attachment size exceeded"),fileType:l.getLocalizedCustom("Attachment type invalid")}},{type:"text",htmlClass:"col-8",key:"username_key",placeholder:l.getLocalizedCustom("Type username key"),validationMessage:{201:r.textLengthExceedValidation.message(k.schema.properties.username_key.maxLength),302:l.getLocalizedCustom("Required")}}]},{type:"row",condition:!k.isSPConfig,items:[{type:"multiselect-dropdown-with-text",htmlClass:"col-12",key:"saml_provider_attribute_statement",idGetter:"token_id",valueGetter:"claim_name",ngModelOptions:{allowInvalid:!0},placeholder:l.getLocalizedCustom("Type attribute statement name"),choices:k.tokenArray,validationMessage:{302:l.getLocalizedCustom("Required"),validateStatement:l.getLocalizedCustom("Invalid")}}]},{type:"row",items:[{type:"link-with-button",htmlClass:"col-12",title:"OrangeHRM Metadata Link",link:k.model.link,displayLink:k.model.displayLink,placeholder:"Metadata Link",onClick:function(){navigator.clipboard.writeText(k.model.displayLink),i.info(l.getLocalizedCustom("Link Copied Successfully"))}}]}]}function w(){return 1==k.model.status||k.model.allowed_to_disable}function _(){var t=!0;return"SP"==k.type&&(k.model.saml_provider_attribute_statement?angular.forEach(k.model.saml_provider_attribute_statement,function(a){if(t)if(""===a.token_id||""===a.claim_name)t=!1;else if(a.claim_name.length>255)t=!1;else{var i=Object.keys(k.model.saml_provider_attribute_statement).filter(function(e){return k.model.saml_provider_attribute_statement[e].claim_name===a.claim_name});Object.keys(k.model.saml_provider_attribute_statement).filter(function(e){return k.model.saml_provider_attribute_statement[e].token_id===a.token_id});i.length>1?(e.$broadcast("schemaForm.error.saml_provider_attribute_statement","validateStatement",l.getLocalizedCustom("Duplicate values are not allowed")),t=!1):e.$broadcast("schemaForm.error.saml_provider_attribute_statement","validateStatement",!0)}}):e.$broadcast("schemaForm.error.saml_provider_attribute_statement","validateStatement",!0)),t}function S(e){var t=c.defer();
return""==e||null==e?h(function(){t.resolve()}):a.call("validateSamlMetadata","POST",{metadata:e}).then(function(e){e.data.valid?t.resolve():t.reject()}),t.promise}function D(t){e.$broadcast("schemaFormValidate");var a=_()&&w();if(t.$valid&&a){v.show();var n=angular.copy(k.model),r={};if(r.name=n.name,r.metadata=n.metadata,r.status=n.status,r.type=k.type,"IDP"==k.type)r.username_key=n.username_key,void 0!=n.image&&n.image.base64&&(r.image=n.image);else{r.saml_provider_attribute_statement=[];for(var s in n.saml_provider_attribute_statement)r.saml_provider_attribute_statement.push({token_id:n.saml_provider_attribute_statement[s].token_id,claim_name:n.saml_provider_attribute_statement[s].claim_name})}var d=void 0!=k.samlProvider?"Successfully Updated":"Successfully Saved",m="Failed to Save";return f.saveProvider(r,k.samlProvider).then(function(e){v.hide(),e.data.success?(o(!0),i.success(l.getLocalizedCustom(d))):(o(!1),i.error(l.getLocalizedCustom(m)))},function(e){v.hide(),o(!1),i.error(l.getLocalizedCustom(m))})}return c.when(!0)}function T(){o(!1)}function x(){var e=window.location.href;if(e=e.split("client"),k.model={name:"",metadata:"",username_key:"",status:1,link:"",displayLink:"",type:k.type,image:{},saml_provider_attribute_statement:{0:{token_id:"",claim_name:""}},allowed_to_disable:!0},"IDP"==k.type?(k.model.link=p.baseUrl+"saml/module.php/saml/sp/metadata.php/orangehrm-sp",k.model.displayLink=e[0]+"saml/module.php/saml/sp/metadata.php/orangehrm-sp"):(k.model.link=p.baseUrl+"saml/saml2/idp/metadata.php",k.model.displayLink=e[0]+"saml/saml2/idp/metadata.php"),void 0!=k.samlProvider){if(k.model.name=k.samlProvider.name,k.model.metadata=k.samlProvider.metadata,k.model.status=k.samlProvider.status,k.model.image=k.samlProvider.image,k.model.username_key=k.samlProvider.username_key,k.model.allowed_to_disable=k.samlProvider.allowed_to_disable,k.samlProvider.saml_provider_attribute_statement&&k.samlProvider.saml_provider_attribute_statement.length){k.model.saml_provider_attribute_statement={};var t=1;angular.forEach(k.samlProvider.saml_provider_attribute_statement,function(e){k.model.saml_provider_attribute_statement[t++]={token_id:e.token_id,claim_name:e.claim_name}})}void 0!=k.model.image&&k.model.image.filename&&(k.fileName=k.model.image.filename)}}function F(){k.alert={type:"danger",message:"Please disable already configured External Links first.",icon:"ohrm_delete_alert_warning",clickable:!1,condition:function(){return k.statusChanged&&!k.model.allowed_to_disable}}}var k=this;k.title=d,k.save=D,k.cancel=T;var E=[{name:"External IdP",value:"IDP"},{name:"OrangeHRM IdP",value:"SP"}],I=[{name:"Enabled",value:"1"},{name:"Disabled",value:"0"}];k.statusArrayForForm=n.getEnumAndTitleMapForSelect(I,{name:"name",value:"value"}),k.typeArrayForForm=n.getEnumAndTitleMapForSelect(E,{name:"name",value:"value"}),k.statusChanged=!1,k.type=m,k.samlProvider=u,k.type=m,k.isSPConfig="IDP"!=m,k.fileName=!1,b()}angular.module("app.admin").controller("AdminEditSamlModalController",e),e.$inject=["$scope","$state","webservice","toast","close","formHelper","localizedMessages","formValidationHelper","$translate","$q","title","type","samlProvider","LOGIN","samlProviderService","settingsService","$timeout","loader","$filter"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v){function y(){d(function(){o.show()});var e={permission:b(),settings:n.getSettings(),organizationInformation:i.call("organization","GET",[],{})};r.all(e).then(function(e){I.permissions=e.permission,I.permissions.read||a.go("403"),D(function(){C(),o.hide()},!0)},function(){o.hide(),a.go("403")})}function b(){return l.getSinglePermission(["saml_configuration"],!1)}function C(){var e=[{name:"providerName",lable:"IdP Name",getter:"name"},{name:"providerType",lable:"Provider Type",getter:"type",formatter:function(e){var t="IDP"==e?"External IdP":"OrangeHRM IdP";return c.getLocalizedCustom(t)}},{name:"providerStatus",lable:"Status",getter:"status",type:"oxd-status",formatter:function(e){return"1"==e?"Enabled":"Disabled"}},{name:"action",lable:"",getter:"id","class":"text-center",width:"20%",type:"oxd-action-button-panel",iconButtons:[{id:"edit-button",classes:"btn-list",text:"Edit",tooltip:{text:"Edit"},clickAction:function(e,t,a,i){w(a)},icon:"edit",displayCondition:function(e,t){return I.permissions.update&&I.unEditableIds&&I.unEditableIds.indexOf(t.id)===-1}}]}],t=[],a=S();I.listDefinition={tableId:"providerList",name:"Providers",listClass:"classic-table hover selectable",selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:[],extraTD:[],showColumnsAnyway:!0,permission:I.permissions,columnWidths:a,listActions:t,showSelectableAlways:!1,showLoader:!0,pagination:!1,listSpecificInitialSort:!0,clickableCondition:"id",unselectableIds:[],isSingleRowDeletable:function(e){return I.unDeletableIds&&I.unDeletableIds.indexOf(e.id)===-1},listTopBar:{getMessageForNoOfItemsSelected:function(e){return e?c.getLocalizedCustomWithVariables("({{number}}) Provider"+(e>1?"s":"")+" Selected",{number:e}):""},configurable:!1,title:{name:"Authentication List"}}},I.permissions.create&&(I.listDefinition.listTopBar.mainActionButton={id:"add-providers-btn",label:"Add",icon:"add",nestedOptions:!0,options:[{id:"add-providers-btn-idp",label:"OrangeHRM IdP",value:"SP",onClick:function(e){F(e)}},{id:"add-providers-btn-sp",label:"External IdP",value:"IDP",onClick:function(e){F(e)}}]}),I.permissions["delete"]&&(I.listDefinition.listTopBar.onBulkDelete=function(e){k(e)},I.listDefinition.listTopBar.isBulkDeletable=function(e){return I.permissions["delete"]},I.listDefinition.listTopBar.isBulkDeleteDisabled=function(e){return _.intersection(e,I.unDeletableIds).length>0})}function w(e){void 0!=e&&v.getProvider(e).then(function(e){var t=e.data.data,a=t.type;F(a,t)})}function S(){var e;return e=I.permissions["delete"]?["5%"]:[],e=e.concat(["45%","25%","25%"])}function D(e){return x(I.params,void 0,!1).then(function(t){I.unDeletableIds=[],I.unEditableIds=[],I.listData=t.data,I.totalDataCount=I.listData.length,I.lastPage=T(),"function"==typeof e&&e()})}function T(){return Math.ceil(I.totalDataCount/I.pageSize)}function x(e,t,a){return v.getProviders().then(function(e){return e.data})}function F(e,t){var a="Add SAML Authentication";void 0!=t&&(a="Edit SAML Authentication"),s.showModal("app/admin/samlProvider/admin.edit_saml_modal.html","AdminEditSamlModalController","modal",{title:a,providerId:"",type:e,samlProvider:t}).then(function(e){e&&D(void 0)})}function k(e){e.length>0&&0==_.intersection(e,I.unDeletableIds).length&&s.showDeleteConfirmationModal(c.getLocalizedCustom("The selected provider(s) will be deleted. Are you sure you want to continue?")).then(function(t){t===!0&&E(e)})}function E(e){e=e?e:I.selectedIds,v.deleteProviders(e).then(function(e){D(void 0),c.successToast("Successfully Deleted")},function(e){h.error(c.getLocalizedCustom(e.data.details))})}var I=this;I.addProvider=F,I.pageSize=50,I.page=1,I.total=0,I.providers=[],I.filters={},I.listData=[],I.selectedIds=[],I.selectedProviders="",I.editProvider=w,I.listConfig={};y()}angular.module("app.admin").controller("AdminSamlController",e),e.$inject=["$scope","$rootScope","$state","webservice","loader","settingsService","datagroupPermissions","$q","modalHelperService","localizedMessages","$timeout","ModalService","$stateParams","$translate","formHelper","employeeService","toast","samlProviderService"]}(),function(){"use strict";function e(e,t){function a(){return e.call("verifySamlCertificate","GET",[],{})}function i(){return e.call("samlAttributes","GET",[],{})}function o(t){return e.call("samlProvider","DELETE",{data:t},{})}function n(t){return e.call("samlProvider","GET",[],t)}function l(t){return e.call("samlProvider/"+t,"GET",[],{})}function r(t,a){var i="samlProvider",o="POST";return void 0!=a&&""!=a.id&&(i+="/"+a.id,o="PATCH"),e.call(i,o,t,{})}var s={getProvider:l,getProviders:n,deleteProviders:o,saveProvider:r,getSamlAttributes:i,verifySamlCertificate:a};return s}angular.module("app.leave").service("samlProviderService",e),e.$inject=["webservice","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){function m(){e.call("skills","GET",[]).then(function(e){if(y.exsistingSkills=v(e.data.data,"name",!0),y.skill.id){var t=y.exsistingSkills.indexOf(y.skill.name.toLowerCase());y.exsistingSkills.splice(t,1)}u()})}function u(){y.schema={type:"object",title:"Skill",properties:{name:{title:"Name",type:"string",maxLength:100},description:{title:"Description",type:"string",maxLength:250}},required:["name"]},y.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"name",validationMessage:{duplicationSkills:t.getLocalizedCustom("Already exists"),302:t.getLocalizedCustom("Required"),201:d.textLengthExceedValidation.message(y.schema.properties.name.maxLength)},$validators:{duplicationSkills:p}},{type:"textarea",htmlClass:"col s12 m12 l12",key:"description",validationMessage:{201:d.textLengthExceedValidation.message(y.schema.properties.description.maxLength)}}]}],s.addRequiredMessage(y.form),y.model={name:y.skill.name,description:y.skill.description}}function p(e){return""==e||(y.exsistingSkills?!(y.exsistingSkills.indexOf(e.toLowerCase())>-1):void 0)}function f(a){if(c.$broadcast("schemaFormValidate"),a.$valid){l.show(),angular.extend(y.skill,y.model);var i=y.skill.id,s="POST",d="skills",m="saveSuccess";i?(s="PATCH",d+="/"+i,m="updateSuccess"):(s="POST",m="saveSuccess"),e.call(d,s,y.model,{}).then(function(e){l.hide(),delete y.exsistingSkills,"POST"==s?o.unshift(e.data.data):"PATCH"==s&&g(y.skill),t.showLocalizedToast(m)},function(e){l.hide(),r.success(e)}),n(!0)}}function g(e){for(var t=0;t<o.length;t++)if(o[t].id==e.id){angular.extend(o[t],e);break}}function h(){n(!1)}function v(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}var y=this;y.modalProperties=i;var b={};angular.copy(a,b),y.skill=b,y.save=f,y.cancel=h,y.exsistingSkills,m()}angular.module("app.admin").controller("AdminEditSkillsController",e),e.$inject=["webservice","localizedMessages","skill","modalProperties","dataList","close","loader","toast","formHelper","$scope","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){s.show(),d.getPermissions().then(function(e){E.permissions=e.admin_skills,E.permissions.read?u.getSetting("page_size").then(function(e){E.pageSize=e,E.fetchSkills("skill","ASC",1)}):(s.hide(),m.go("403"))})}function f(e,t,a){s.show();var o={offset:(a-1)*E.pageSize,limit:E.pageSize,sortingFeild:E.sortingListFields[e],sortingOrder:t},r=[];r.push(n.call("skills","GET",[],o)),i.all(r).then(function(e){h(),E.skills=e[0].data.data,E.totalDataCount=e[0].data.meta.total,E.dataInCurruntPage=e[0].data.data.length,E.page=a,E.lastPage=Math.ceil(E.totalDataCount/E.pageSize),g(),s.hide(),0==E.skills.length&&l.infoToast("No Records Found")})}function g(){E.skillsListHelper=new t.list(E.listData.skills,E.skills),E.selectAll=E.skillsListHelper.selectAllItems,E.deselectAll=E.skillsListHelper.deselectAllItems}function h(){E.panelInfo={skillsInfo:{title:"",icon:"images/pim/icon_work.svg"}},v()}function v(){var e=[{name:"skill",lable:"Skill",getter:"name",sortable:!0,sortAction:"fetchSkills"},{name:"Description",lable:"Description",getter:"description"}],t=[{colspan:3}],a=[{"class":"edit_item",clickAction:"editSkills",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:E.permissions["delete"]}];E.listData={skills:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:E.permissions,listActions:i,pagination:!0}}}function y(){E.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function b(e){o.showModal({templateUrl:"app/admin/skills/skills_modal.html",controller:"AdminEditSkillsController",controllerAs:"modal",inputs:{skill:e,dataList:E.skills,modalProperties:{title:"Edit Skill"}}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function C(){if(E.listData.skills.selected.length>0){var e=E.listData.skills.selected.length;s.show(),n.call("skills","DELETE",{data:E.listData.skills.selected},{}).then(function(t){s.hide(),l.showLocalizedToast("deleteSuccess"),E.total-=e,w(E.listData.skills.selected)},function(e){s.hide(),c.success(e)})}}function w(e){for(var t=E.skills.length-1;t>=0;t--){var a=e.indexOf(E.skills[t].id);a>-1&&(e.splice(a,1),E.skills.splice(t,1))}}function _(e){var t=e.obj;if(t.selected)E.listData.skills.selected.push(t.id);else{var a=E.listData.skills.selected.indexOf(t.id);a>-1&&E.listData.skills.selected.splice(a,1)}}function S(){E.listData.skills.selected.length>0&&o.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&(C(),x(E.listData.skills.selected.length))})})}function D(){var e={name:"",description:""};o.showModal({templateUrl:"app/admin/skills/skills_modal.html",controller:"AdminEditSkillsController",controllerAs:"modal",inputs:{skill:e,dataList:E.skills,modalProperties:{title:"Add Skill"}}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e&&T()})})}function T(){E.totalDataCount=E.totalDataCount+1,E.dataInCurruntPage=E.dataInCurruntPage+1}function x(e){E.totalDataCount=E.totalDataCount-e,E.dataInCurruntPage=E.dataInCurruntPage-e}function F(){close(!0)}function k(){close(!1)}var E=this;E.title="skills",E.skills="",E.editSkills=b,E.deleteSkills=C,E.changeSelection=_,E.deleteSelection=S,E.addSkill=D,E.confirm=F,E.cancel=k,E.fetchSkills=f,E.sortingListFields={skill:"name"},E.pageSize=50,E.page=1,E.lastPage=0,E.totalDataCount=0,E.dataInCurruntPage=0,p(),y()}angular.module("app.admin").controller("AdminSkillsController",e),e.$inject=["logger","listHelper","$window","$q","ModalService","webservice","localizedMessages","$rootScope","loader","toast","datagroupPermissions","$state","settingsService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){u.setForcedTitle(["HR Administration"]),t.show(),a.getPermissions().then(function(a){if(a.admin_config_system_admin.read){var i=[];i.push(o.call("systemAdminConfiguration","GET",[])),i.push(s.isEnabled()),i.push(o.call("samlAuthenticationSettings","GET",[])),i.push(d.isEnabled()),r.all(i).then(function(i){C.permissions=a.admin_config_system_admin,C.defaultData=i[0].data.data,w=i[1],_=i[2].data.data.isEnabled,S=i[3],C.userName=e.getLocalizedCustom("Username")+" : "+C.defaultData.userName,f(),g(),t.hide()})}else t.hide(),l.go("403")})}function f(){if(C.schema={type:"object",title:"System Admin Configuration",properties:{changePassword:{title:"Change Password",type:"boolean"},newPassword:{title:"New Password",type:"string",minLength:8,maxLength:64},confirmPassword:{title:"Confirm Password",type:"string"},enabled:{title:"Enabled",type:"boolean"},globalAdminPrivileges:{title:"Global Admin Privileges",type:"boolean"}},required:["newPassword","confirmPassword"]},w||_||S){var t;t=C.schema.required.indexOf("newPassword"),C.schema.required.splice(t,1),t=C.schema.required.indexOf("confirmPassword"),C.schema.required.splice(t,1)}C.form=[{type:"section",htmlClass:"row",items:[{key:"changePassword",onChange:function(){i.$broadcast("schemaFormRedraw")}}]},{type:"section",htmlClass:"row",items:[{type:"password",htmlClass:"col s12 m12 l6",key:"newPassword",toggleSave:b,strengthCheck:!0,validationMessage:{302:e.getLocalizedCustom("Required"),201:m.textLengthExceedValidation.message(C.schema.properties.newPassword.maxLength),200:e.getLocalizedCustomWithVariables("Your password should have at least {{min}} characters. Try a different password.",{min:C.schema.properties.newPassword.minLength})},ngModelOptions:{allowInvalid:!0},onChange:function(){C.model.confirmPassword&&y(C.model.confirmPassword)}}],condition:"model.changePassword"},{type:"section",htmlClass:"row",items:[{type:"password",htmlClass:"col s12 m12 l6",key:"confirmPassword",validationMessage:{302:e.getLocalizedCustom("Required"),unmatchedPassword:e.getLocalizedCustom("Passwords do not match")},onChange:y,ngModelOptions:{allowInvalid:!0}}],condition:"model.changePassword"},{type:"section",htmlClass:"row",items:[{key:"enabled"}]},{type:"section",htmlClass:"row",items:[{key:"globalAdminPrivileges"}]}],n.addRequiredMessage(C.form)}function g(){C.model.newPassword="",C.model.confirmPassword="",C.model.changePassword=C.defaultData.changePassword,C.model.enabled=C.defaultData.enabled,C.model.globalAdminPrivileges=C.defaultData.globalAdminPrivileges}function h(e){C.model.newPassword&&y(C.model.confirmPassword),i.$broadcast("schemaFormValidate"),e.$valid&&v()}function v(){var a={changePassword:C.model.changePassword,password:C.model.newPassword,enabled:C.model.enabled,globalAdminPrivileges:C.model.globalAdminPrivileges};o.call("systemAdminConfiguration","PATCH",a,{}).then(function(t){e.showLocalizedToast("saveSuccess")},function(e){t.hide(),c.error(e.data)})}function y(e){!e&&!C.model.newPassword||e==C.model.newPassword?i.$broadcast("schemaForm.error.confirmPassword","unmatchedPassword",!0):i.$broadcast("schemaForm.error.confirmPassword","unmatchedPassword",!1)}function b(e){C.enableSaveButton=e}var C=this;C.onSubmit=h,C.title="System Admin Configuration",C.toggleSave=b,C.submitSystemAdminDetails=v,C.defaultData,C.userName;var w=!1,_=!1,S=!1;C.model={},p()}angular.module("app.admin").controller("AdminSystemAdminConfigurationController",e),e.$inject=["localizedMessages","loader","datagroupPermissions","$scope","webservice","formHelper","$state","$q","ldapAuthenticationService","toast","openIdProviderService","formValidationHelper","titleService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s){function c(){n.show();var t=[];t.push(e.call("user-regions","GET",[],{include:"Location"})),a.all(t).then(function(e){v.regionTree=e[0].data.data,v.operationalcountries=h(v.regionTree),d(),n.hide()})}function d(){v.schema={type:"object",title:"System user",properties:{allRegions:{title:"All Regions",type:"boolean"},regions:{title:t.getLocalizedCustom("Select Region"),type:"object"}},required:["regions"]},v.form=[{type:"row",items:[{key:"allRegions",type:"checkbox",onChange:function(){r.$broadcast("schemaFormRedraw")},htmlClass:"col-12 modify-region-allregions"}]},{type:"row",items:[{key:"regions",htmlClass:"col -12",type:"autocomplete-multiselect",choices:s.getItemsForMultyselectAutocomplete(m(v.operationalcountries),{}),onChange:f,validationMessage:{required:t.getLocalizedCustom("Required"),302:t.getLocalizedCustom("Required")},condition:"!model.allRegions"}]},{type:"section",htmlClass:"row",items:[]}],s.addRequiredMessage(v.form)}function m(e){var t=[];for(var a in e)t.push({id:a,name:e[a]});return t}function u(e){if(r.$broadcast("schemaFormValidate"),e.$valid){n.show();var t={accessibleLocationIds:[],regionIds:[],allRegions:!1};if(v.model.allRegions)t.allRegions=!0;else for(var a in v.model.regions)if("selectedLocationsOnly_"+a in v.model&&!v.model["selectedLocationsOnly_"+a])t.regionIds.push(a);else if("selectedLocationsOnly_"+a in v.model&&v.model["selectedLocationsOnly_"+a])for(var i in v.model.regions)if("object"==typeof v.model["selectedLocations_"+i])for(var l=Object.keys(v.model["selectedLocations_"+i]),s=0;s<l.length;s++)t.accessibleLocationIds.push(l[s]);o(t)}}function p(){o(!1)}function f(e){function a(){for(var e in v.operationalcountries)delete v.schema.properties["selectedLocationsOnly_"+e],delete v.schema.properties["selectedLocations_"+e]}"undefined"==typeof e&&(e=!0),a();var i=[];for(var o in v.model.regions)v.schema.properties["selectedLocationsOnly_"+o]={title:t.getLocalizedCustom("Select Locations"),type:"boolean"},v.schema.properties["selectedLocations_"+o]={title:t.getLocalizedCustom("Locations"),type:"object"},i.push({type:"row",items:[{type:"section-heading",htmlClass:"col-3 modify-region-countryname",text:v.model.regions[o],condition:"!model.allRegions"},{htmlClass:"col-4 modify-region-allLocations",type:"checkbox",key:"selectedLocationsOnly_"+o,condition:"!model.allRegions"},{htmlClass:"col-5",type:"autocomplete-multiselect",key:"selectedLocations_"+o,choices:g(v.regionTree,o),condition:"!model.allRegions && model.selectedLocationsOnly_"+o}]});v.form[2].items=i,e&&r.$broadcast("schemaFormRedraw")}function g(e,t){for(var a=0;a<e.length;a++)if(e[a].id==t)return s.getItemsForMultyselectAutocomplete(e[a].locations,{});return{}}function h(e){for(var t={},a=0;a<e.length;a++)t[e[a].id]=e[a].name;return t}var v=this;v.modalProperties=i,v.save=u,v.cancel=p,v.model={allRegions:!0,regions:{}},c()}angular.module("app.admin").controller("AdminCollectSystemUserRegionValuesController",e),e.$inject=["webservice","localizedMessages","$q","modalProperties","close","loader","toast","$scope","formHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){y.model.isReadOnly=y.systemUser.hasOwnProperty("Employee")&&null!==y.systemUser.Employee.termination_id,y.showLoader=!0;var t=[];t.push(e.call("user-regions","GET",[],{include:"Location"})),a.all(t).then(function(e){y.regionTree=e[0].data.data,y.operationalcountries=g(y.regionTree);var t=function(){return!0},a=function(){return!y.model.allRegions};m.setForm(y.schema,y.form,y.model,y.regionTree,y.operationalcountries,2,"",t,a),l&&(v(l),c.$broadcast("schemaFormRedraw")),y.showLoader=!1,y.inlineAlert={type:"danger",icon:"ohrm_delete_alert_warning",message:b.terminated,condition:function(){return y.model.isReadOnly}}})}function p(a){if(!y.showLoader&&(c.$broadcast("schemaFormValidate"),a.$valid)){y.showLoader=!0;var i=y.systemUser.id,o={allRegions:!1,regionIds:[],locationIds:[]};if(y.model.allRegions)o.allRegions=!0;else for(var n in y.model.regions)if("selectedLocationsOnly_"+n in y.model&&!y.model["selectedLocationsOnly_"+n])o.regionIds.push(n);else if("selectedLocationsOnly_"+n in y.model&&y.model["selectedLocationsOnly_"+n])for(var l in y.model.regions)if("object"==typeof y.model["selectedLocations_"+l])for(var d=Object.keys(y.model["selectedLocations_"+l]),m=0;m<d.length;m++)o.locationIds.push(d[m]);var u="saveSuccess";e.call("systemUsers/"+i+"/regions","PATCH",o,{}).then(function(e){y.showLoader=!1,h(i,e.data),t.showLocalizedToast(u),r(!0)},function(e){y.showLoader=!1,u="Unknown error",e.data.errors&&e.data.errors.general&&"string"==typeof e.data.errors.general[0]?u=e.data.errors.general[0]:"string"==typeof e.data&&(u=e.data),s.error(t.getLocalizedCustom(u))}),c.$broadcast("regionSaved")}}function f(){r(!1)}function g(e){for(var a={},i=0;i<e.length;i++)a[e[i].id]=t.getLocalizedCustom(e[i].name);return a}function h(e,t){for(var a=0;a<n.length;a++)if(e==n[a].id){var i=[];!0===t.data.hasAllRegions?i=t.meta.allRegions:(Object.entries(t.data.regionList).forEach(function(e){i.push(e[1])}),Object.entries(t.data.locationCountries).forEach(function(e){i.push(e[1])})),i.sort(),angular.extend(n[a],{regions:i.join(", ")});break}}function v(e){function t(){for(var t in e.regionList)y.model.regions[t]=e.regionList[t];m.updateRegionSelections(!1,y.schema,y.model,y.regionTree,y.operationalcountries,2)}function a(){for(var t in e.locationList)y.model.regions[t]=e.locationCountries[t];m.updateRegionSelections(!1,y.schema,y.model,y.regionTree,y.operationalcountries,2);for(var t in e.locationList)y.model["selectedLocationsOnly_"+t]=!0,y.model["selectedLocations_"+t]=e.locationList[t]}e.hasAllRegions?y.model.allRegions=!0:(y.model.allRegions=!1,t(),a(),m.updateRegionSelections(!1,y.schema,y.model,y.regionTree,y.operationalcountries,2))}var y=this,b={terminated:"This Employee has been Terminated."};y.modalProperties=o;var C={};angular.copy(i,C),y.systemUser=C,m.setScope(c),m.setController(y),y.save=p,y.cancel=f,y.showLoader=!1,y.model={isReadOnly:!1,allRegions:!0,regions:{}},y.form=[],y.schema={type:"object",title:"System user",properties:{},required:[]},u()}angular.module("app.admin").controller("AdminEditSystemUserRegionController",e),e.$inject=["webservice","localizedMessages","$q","systemUser","modalProperties","dataList","defaults","close","toast","$scope","formHelper","selectRegionService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w){function S(){V.isReadOnly=V.systemUser.hasOwnProperty("Employee")&&null!==V.systemUser.Employee.termination_id,V.inlineAlert={type:"danger",icon:"ohrm_delete_alert_warning",message:G.terminated,condition:function(){return V.isReadOnly}};var e=[];e.push(t.call("defaultAuthenticationSettings","GET",[])),e.push(h.isEnabled()),e.push(t.call("samlAuthenticationSettings","GET",[])),e.push(b.isEnabled()),r.all(e).then(function(e){V.defaultConfiguration=e[0].data.data,q=e[1],H=e[2].data.data.isEnabled,U=e[3],W=V.defaultConfiguration.enableSecondaryPassword&&"Enable"===V.defaultConfiguration.defaultSettingsStatus,I(D)})}function D(e){if(V.schema={type:"object",title:"System user",properties:{selectedEmployee:{title:"Employee Name",type:"object",idsToSkip:[]},user_name:{title:"Username",type:"string",minLength:5,maxLength:50},essrole:{title:"ESS Role",type:"string","enum":e.essroles["enum"]},adminrole:{title:"Admin Role",type:"string","enum":e.adminroles["enum"]},supervisorrole:{title:"Supervisor Role",type:"string","enum":e.superviosrroles["enum"]},status:{title:"Status",type:"string","enum":["0","1"]},changepassword:{title:"Change Password",type:"boolean","default":!1},allowEmptyPassword:{title:"Set password on first login",type:"boolean","default":!1},password:{title:"Password",type:"string",minLength:8,maxLength:64},confirmpassword:{title:"Confirm Password",type:"string"},changeSecondaryPassword:{title:"Change Secondary Password",type:"boolean","default":!1},secondaryPassword:{title:"Secondary Password",type:"string",minLength:8,maxLength:64},confirmSecondaryPassword:{title:"Confirm Secondary Password",type:"string"}},required:["selectedEmployee","password","confirmpassword","essrole","supervisorrole","user_name"]},W&&(V.schema.required.push("secondaryPassword"),V.schema.required.push("confirmSecondaryPassword")),q||H||U){var t;t=V.schema.required.indexOf("password"),V.schema.required.splice(t,1),t=V.schema.required.indexOf("confirmpassword"),V.schema.required.splice(t,1),V.schema.properties.user_name.minLength=0,W&&(t=V.schema.required.indexOf("secondaryPassword"),V.schema.required.splice(t,1),t=V.schema.required.indexOf("confirmSecondaryPassword"),V.schema.required.splice(t,1))}V.passwordField={type:"password",strengthCheck:!0,htmlClass:"col-6",placeholder:a.getLocalizedCustom("Enter Password"),key:"password",minLength:V.schema.properties.password.minLength,maxLength:V.schema.properties.password.maxLength,toggleSave:O,ngModelOptions:{allowInvalid:!0},onChange:function(e){(V.model.confirmpassword||!e&&!V.model.confirmpassword)&&L(V.model.confirmpassword)},validationMessage:{302:a.getLocalizedCustom("Required"),201:C.textLengthExceedValidation.message(V.schema.properties.password.maxLength),200:a.getLocalizedCustomWithVariables("Your password should have at least {{min}} characters.",{min:V.schema.properties.password.minLength})}},V.secondaryPasswordField={type:"password",strengthCheck:!0,htmlClass:"col-6 ",key:"secondaryPassword",toggleSave:O,condition:"(model.changeSecondaryPassword || (!model.isEdit && !model.allowEmptyPassword)) && model.secondaryPasswordEnabled",ngModelOptions:{allowInvalid:!0},onChange:function(e){(V.model.confirmSecondaryPassword||!e&&!V.model.confirmSecondaryPassword)&&P(V.model.confirmSecondaryPassword)},validationMessage:{302:a.getLocalizedCustom("Required"),201:C.textLengthExceedValidation.message(V.schema.properties.secondaryPassword.maxLength),200:a.getLocalizedCustomWithVariables("Your password should have at least {{min}} characters.",{min:V.schema.properties.secondaryPassword.minLength})}},V.defaultConfiguration.enforcePasswordStrength&&"Enable"===V.defaultConfiguration.defaultSettingsStatus&&(V.passwordField.passwordEnforced=!0,V.secondaryPasswordField.passwordEnforced=!0),V.form=[{type:"row",htmlClass:"col-12",items:[{key:"selectedEmployee",type:"auto-complete",htmlClass:"col-6",placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",requireSelection:!0,disable:V.isEdit&&V.systemUser.hasOwnProperty("Employee")&&null!==V.systemUser.Employee.empNumber,validationMessage:{invalid:a.getLocalizedCustom("Invalid")},$validators:{invalid:function(e){return!(e&&e.hasOwnProperty("purged_at")&&e.purged_at)}},permissionType:"system_users"},{type:"text",htmlClass:"col-6",key:"user_name",removePristine:V.removePristine,readonly:V.isReadOnly,ngModelOptions:{allowInvalid:!0},validationMessage:{duplicationUserName:a.getLocalizedCustom("Already exists"),302:a.getLocalizedCustom("Required"),201:C.textLengthExceedValidation.message(V.schema.properties.user_name.maxLength),200:a.getLocalizedCustomWithVariables("Should have at least {{minLength}} characters",{minLength:V.schema.properties.user_name.minLength})},$asyncValidators:{"tv4-duplicationUserName":T}}]},{type:"row",htmlClass:"col-12",items:[{type:"select",htmlClass:"col-6",key:"essrole",titleMap:f.getSortedObjectList(e.essroles.titleMap,"name","ASC"),readonly:V.isReadOnly,validationMessage:{302:a.getLocalizedCustom("Required")}},{type:"select",htmlClass:"col-6",key:"supervisorrole",titleMap:f.getSortedObjectList(e.superviosrroles.titleMap,"name","ASC"),readonly:V.isReadOnly,validationMessage:{302:a.getLocalizedCustom("Required")}}]},{type:"row",htmlClass:"col-12",items:[{type:"select",htmlClass:"col-6",key:"adminrole",condition:"model.isGlobalAdmin",titleMap:f.getSortedObjectList(e.adminroles.titleMap,"name","ASC"),readonly:V.isReadOnly},{type:"radiobuttons",htmlClass:"col-6",key:"status",makeHorizontal:!0,readonly:V.isReadOnly,titleMap:[{value:"1",name:a.getLocalizedCustom("Enabled")},{value:"0",name:a.getLocalizedCustom("Disabled")}],validationMessage:{302:a.getLocalizedCustom("Required")}}]},{type:"checkbox",key:"changepassword",condition:"model.isEdit",htmlClass:"col-12",readonly:V.isReadOnly,onChange:function(){p.$broadcast("schemaFormRedraw")}},{type:"checkbox",htmlClass:"col-12",key:"allowEmptyPassword",condition:"model.notifyEmployeeToSetPassword && !model.isEdit",readonly:V.isReadOnly,onChange:function(){p.$broadcast("schemaFormRedraw")}},{type:"row",htmlClass:"col-12",condition:"model.changepassword || (!model.isEdit && !model.allowEmptyPassword)",items:[{type:"container",htmlClass:"col-12 password-section-container form-group",items:[{type:"row",htmlClass:"col-12 remove-bottom-margin remove-padding",items:[V.passwordField,{type:"password",htmlClass:"col-6",key:"confirmpassword",placeholder:a.getLocalizedCustom("Confirm Password"),readonly:V.isReadOnly,validationMessage:{unmatchedPassword:a.getLocalizedCustom("Passwords do not match"),302:a.getLocalizedCustom("Required")},onChange:L,ngModelOptions:{allowInvalid:!0}}]},{type:"password-help-text",htmlClass:"col-8 remove-bottom-margin password-help-text-top-padding",condition:function(){return V.passwordField.strengthCheck}}]}]},{type:"checkbox",htmlClass:"col-12",key:"changeSecondaryPassword",condition:"model.isEdit && model.secondaryPasswordEnabled",readonly:V.isReadOnly,onChange:function(){p.$broadcast("schemaFormRedraw")}},{type:"row",htmlClass:"col-12",condition:function(){return(V.model.changeSecondaryPassword||!V.model.isEdit&&!V.model.allowEmptyPassword)&&V.model.secondaryPasswordEnabled},items:[{type:"row",htmlClass:"col-12 password-section-container",items:[V.secondaryPasswordField,{type:"password",htmlClass:"col-6",key:"confirmSecondaryPassword",condition:"(model.changeSecondaryPassword || (!model.isEdit && !model.allowEmptyPassword) && model.secondaryPasswordEnabled)",readonly:V.isReadOnly,validationMessage:{
unmatchedPassword:a.getLocalizedCustom("Passwords do not match"),302:a.getLocalizedCustom("Required")},onChange:P,ngModelOptions:{allowInvalid:!0}}]}]},{type:"divider",margin:"1rem 0px",condition:function(){return V.isEdit&&V.defaultConfiguration.adminCanResetPassword}},{type:"row",htmlClass:"col-6",items:[{type:"icon-button-with-inline-label",label:"Primary Password",icon:"refresh",iconLabel:"Reset",htmlClass:"col-6",style:"btn btn-text btn-xs right",readonly:V.isReadOnly||V.resetPasswordDisabled,condition:function(){return V.isEdit&&V.defaultConfiguration.adminCanResetPassword},onClick:function(e,t){N(1,t)}}]},{type:"row",htmlClass:"col-6",items:[{type:"icon-button-with-inline-label",label:"Secondary Password",icon:"refresh",iconLabel:"Reset",htmlClass:"col-6",style:"btn btn-text btn-xs right",readonly:V.isReadOnly||V.resetPasswordDisabled,condition:function(){return V.isEdit&&V.defaultConfiguration.adminCanResetPassword&&V.defaultConfiguration.enableSecondaryPassword},onClick:function(e,t){N(2,t)}}]}],V.model={isGlobalAdmin:v.is_global_admin,user_name:V.systemUser.user_name,selectedEmployee:null,essrole:V.isEdit?x(V.systemUser,2):"2",adminrole:V.isEdit?x(V.systemUser,1):"",supervisorrole:V.isEdit?x(V.systemUser,3):"3",status:V.isEdit?V.systemUser.status:"1",changepassword:V.systemUser.changepassword,password:V.systemUser.password,confirmpassword:V.systemUser.confirmpassword,changeSecondaryPassword:V.systemUser.changeSecondaryPassword,secondaryPassword:V.systemUser.secondaryPassword,confirmSecondaryPassword:V.systemUser.confirmSecondaryPassword,isEdit:V.isEdit,notifyEmployeeToSetPassword:V.defaultConfiguration.notifyEmployeeToSetPassword,allowEmptyPassword:V.defaultConfiguration.notifyEmployeeToSetPassword,user_role_id:V.systemUser.user_role_id,secondaryPasswordEnabled:V.defaultConfiguration.enableSecondaryPassword},V.isEdit&&V.systemUser.hasOwnProperty("Employee")&&(V.model.selectedEmployee=V.systemUser.Employee,V.model.selectedEmployee.fullName=g.getFullName(V.model.selectedEmployee)),V.initialAdminRole=V.model.adminrole}function T(e){var a=r.defer();return e?t.call("systemUsers","GET",[],{filter:{uname:e},usernameAvailabilityCheck:!0}).then(function(e){e.data.data instanceof Array&&e.data.data.length>0?Y&&1==e.data.data.length&&e.data.data[0].trim()==Y.trim()?a.resolve():a.reject():a.resolve()}):y(function(){a.resolve()}),a.promise}function x(e,t){if(!V.systemUser.hasOwnProperty("UserUserRole"))return"";for(var a=0;a<e.UserUserRole.length;a++){var i=e.UserUserRole[a].UserRole;if(i.typeId==t)return i.id}return""}function F(e){if(!V.showLoader&&!V.isReadOnly){if(V.model.password&&L(V.model.confirmpassword),V.model.secondaryPassword&&P(V.model.confirmSecondaryPassword),p.$broadcast("schemaFormValidate"),e.$valid&&V.modalProperties.permission&&V.enableSaveButton){R(),angular.extend(V.systemUser,V.model);var i=V.systemUser.id;V.model.selectedEmployee&&(V.model.emp_number=V.model.selectedEmployee.empNumber);var o=angular.copy(V.model);delete o.isGlobalAdmin,delete o.isEdit,delete o.selectedEmployee,delete o.employee_name,delete o.user_role_id,V.model.secondaryPassword||V.model.confirmSecondaryPassword||(delete o.secondaryPassword,delete o.confirmSecondaryPassword);var n="POST",s="systemUsers",c="saveSuccess";return i?(n="PATCH",s+="/"+i,c="updateSuccess"):(n="POST",c="saveSuccess"),t.call(s,n,o,{}).then(function(e){"POST"==n?(d.unshift(e.data.data),m({user:e.data.data,toRegionModify:parseInt(V.model.adminrole)>1&&l}),!V.model.allowEmptyPassword||""!=e.data.data.Employee.emp_work_email&&null!=e.data.data.Employee.emp_work_email||u.error(a.getLocalizedCustom("Email was not sent. Employee work email is not set."))):"PATCH"==n&&(E(e.data.data),m({user:e.data.data,toRegionModify:parseInt(V.model.adminrole)>1&&l&&V.initialAdminRole!=V.model.adminrole})),a.showLocalizedToast(c)},function(e){c="Unknown error",e.data.errors&&e.data.errors.general&&"string"==typeof e.data.errors.general[0]?(c=e.data.errors.general[0],c.toLowerCase().includes("terminated employee")&&(c=a.getLocalizedCustom(G.terminated))):"string"==typeof e.data&&(c=e.data),u.error(c)})["finally"](function(){z()})}return r.when(!0)}}function k(e){ModalService.showModal({templateUrl:"app/admin/systemUsers/systemUserRegion_modal.html",controller:"AdminEditSystemUserRegionController",controllerAs:"modal",inputs:{isEdit:!0,modalProperties:{title:"User Region"}}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function E(e){for(var t=0;t<d.length;t++)if(d[t].id==e.id){angular.extend(d[t],e);break}}function I(e){D({adminroles:A(V.adminroles),essroles:A(V.essroles),superviosrroles:A(V.superviosrroles)})}function A(e){var t=[],i=[];return _.forOwn(e,function(e,o){t.push({value:o,name:a.getLocalizedCustom(e)}),i.push(o)}),{titleMap:t,"enum":i}}function M(){m(!1)}function L(e){!e&&!V.model.password||e==V.model.password?p.$broadcast("schemaForm.error.confirmpassword","unmatchedPassword",!0):p.$broadcast("schemaForm.error.confirmpassword","unmatchedPassword",!1)}function P(e){!e&&!V.model.secondaryPassword||e==V.model.secondaryPassword?p.$broadcast("schemaForm.error.confirmSecondaryPassword","unmatchedPassword",!0):p.$broadcast("schemaForm.error.confirmSecondaryPassword","unmatchedPassword",!1)}function N(e,i){if(V.resetPasswordDisabled||V.showLoader)return!1;R();var o=V.systemUser.id,n="PATCH",l="systemUsers/"+o+"/action/reset-password?resetOption="+e;t.call(l,n,[],{}).then(function(e){u.success(a.getLocalizedCustom("Password Reset Successfully"))},function(e){"string"==typeof e.data&&u.error(a.getLocalizedCustom(e.data))})["finally"](function(){z()})}function O(e){V.enableSaveButton=e}function R(){V.showLoader=!0,V.showCloseButton=!1,w.disableClickOutside(J)}function z(){V.showLoader=!1,V.showCloseButton=!0,w.enableClickOutside(J)}function j(e){J=e}D.$inject=["formData"];var V=this;V.isReadOnly=!1;var G={terminated:"This Employee has been Terminated."};V.modalProperties=c;var B={};angular.copy(s,B),V.systemUser=B,V.adminroles=i,V.essroles=o,V.superviosrroles=n,V.isEdit=e,V.save=F,V.cancel=M,V.model={},V.toggleSave=O,V.editSystemUserRegion=k;var q=!1,H=!1,U=!1,W=!1;V.resetPassword=N,V.enableSaveButton=!0;var Y=V.systemUser.user_name;V.removePristine=!!Y,V.resetPasswordDisabled="0"===V.systemUser.status,V.buttons=[],V.showLoader=!1,V.showCloseButton=!0,V.setElement=j;var J=null;S()}angular.module("app.admin").controller("AdminEditSystemUsersController",e),e.$inject=["isEdit","webservice","localizedMessages","adminroles","essroles","superviosrroles","enterpriseEnabled","$q","systemUser","modalProperties","dataList","close","toast","$scope","formHelper","employeeService","ldapAuthenticationService","$rootScope","$timeout","openIdProviderService","formValidationHelper","modalHelperService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y){function b(e,a,i){var o={"page[offset]":(i-1)*H.pageSize,"page[limit]":H.pageSize,orderField:H.SortingListFields[e],orderBy:a};H.filters&&(o.filter=H.filters),o.include=["Employee","UserUserRole","UserRole","Regions"].join(","),u.show(),t.getPermissions().then(function(e){return e.system_users.read?c.call("systemUsers","GET",[],o).then(function(e){H.systemUsers=e.data.data,H.totalDataCount=e.data.meta.total,H.dataInCurruntPage=e.data.data.length,H.meta=e.data.meta,H.page=i,H.lastPage=Math.ceil(H.totalDataCount/H.pageSize),C(),u.hide(),y.showListConfigurationSuccess(4e3),0==H.systemUsers.length&&d.infoToast("No Records Found")},function(e){p.warning(d.getLocalizedCustom(e.statusText,null))}):void n.go("403")})}function C(){H.systemUsersHelper=new a.list(H.listData.systemUsers,H.systemUsers,H.unselectableIds),H.selectAll=H.systemUsersHelper.selectAllItems,H.deselectAll=H.systemUsersHelper.deselectAllItems}function w(){H.filters=!1;var e=[];e.push(c.call("userRoles/assignable-lists","GET",[],{})),e.push(c.call("systemUserLocations","GET",[],{})),u.show(),l.all(e).then(function(e){H.adminroles=q(e[0].data.data.admin),H.superviosrroles=q(e[0].data.data.supervisor),H.essroles=q(e[0].data.data.ess),H.eeEnabled=e[1].data.meta.feature_country_based,H.unselectableIds=[m.user_id],_(),u.hide(),H.fetchSystemUsers("username","ASC",1)})}function _(){H.panelInfo={},F()}function S(e,t){var a={name:"userInputString",filter:{employee_name:e},fields:"empNumber,firstName,middleName,lastName","page[offset]":"0","page[limit]":"10"};return c.call("employees","GET",[],a,t).then(function(e){return e.data.data})}function D(){r.showModal({templateUrl:"app/admin/systemUsers/systemUserSearch.html",controller:"AdminSystemUserSearchController",controllerAs:"modal",inputs:{currentFilter:H.oldFilter,adminroles:H.adminroles,essroles:H.essroles,superviosrroles:H.superviosrroles,eeEnabled:H.eeEnabled,operationalCountryLocation:H.operationalCountryLocation}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e!==!1&&(H.oldFilter=e,H.filters={},e.employee&&(H.filters.employeeId=e.employee.originalObject.empNumber),e.uname&&(H.filters.uname=e.uname),e.essroles&&(H.filters.essrole=e.essroles),e.supervisorroles&&(H.filters.supervisorrole=e.supervisorroles),e.adminroles&&(H.filters.adminrole=e.adminroles),e.status&&(H.filters.status=e.status),e.location&&(H.filters.location=e.location)),H.fetchSystemUsers("username","ASC",1)})})}function T(e,t){void 0!==t.name&&(H.filters={},H.fetchSystemUsers("username","ASC",1))}function x(e){var t=[],a="";for(var i in e.UserUserRole){var o=e.UserUserRole[i].UserRole;"undefined"!=typeof o&&("1"==o.typeId&&(t[2]=o.display_name),"3"==o.typeId&&(t[1]=o.display_name),"2"==o.typeId&&(t[0]=o.display_name))}for(var n=0;n<3;n++)""!=t[n]&&null!=t[n]&&(a=""==a?d.getLocalizedCustom(t[n]):a+", "+d.getLocalizedCustom(t[n]));return a}function F(){var e=[{name:"username",lable:"Username",getter:"user_name",sortable:!0,sortAction:"fetchSystemUsers",hideField:!H.listConfig.username},{name:"userroles",lable:"User Role(s)",getter:"display_name",sortable:!0,sortAction:"fetchSystemUsers",formatter:function(e,t){return t.hasOwnProperty("UserUserRole")?x(t):""},hideField:!H.listConfig.userroles},{name:"emp_id",lable:"Employee Id",getter:["Employee","employeeId"],sortable:!1,sortAction:"fetchSystemUsers",hideField:!H.listConfig.emp_id},{name:"employeeName",lable:"Employee Name",sortable:!0,sortAction:"fetchSystemUsers",formatter:function(e,t){if(!t.hasOwnProperty("Employee")||!t.Employee)return"";if(t.Employee.firstName&&t.Employee.lastName){var a=t.Employee.firstName+" "+t.Employee.lastName;return t.Employee.termination_id&&(a+=" ("+g.instant("Past Employee")+")"),a}},hideField:!H.listConfig.employeeName},{name:"status",lable:"Status",getter:"status",sortable:!0,sortAction:"fetchSystemUsers",formatter:function(e,t){return t.hasOwnProperty("status")?"1"==t.status?d.getLocalizedCustom("Enabled"):"0"==t.status?d.getLocalizedCustom("Disabled"):void 0:""},hideField:!H.listConfig.status}];H.eeEnabled&&e.push({name:"Regions",lable:"Regions",getter:"regions",formatter:function(e){var t=[];if("string"==typeof e){t=e.split(",");for(var a in t)t[a]=d.getLocalizedCustom(t[a])}return t.join(",")},hideField:!H.listConfig.regions});var t=[{colspan:3}],a=[{"class":"edit_item",clickAction:"editSystemUsers",tooltip:"Edit"}];H.eeEnabled&&a.splice(0,0,{"class":"user-modify-region",clickAction:"editRegion",tooltip:function(e){return O(e)?e.regions?"Modify Region":"Set Region":""},icon:function(e){return!!O(e)&&"edit_location"}});var i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:H.permissions["delete"]}];H.listData={systemUsers:{selectable:!0,configurable:H.listConfigurationPermissions.update,selected:[],idGetter:"id",listFields:e,showColumnsAnyway:!0,permission:H.permissions,listActions:i,pagination:!0,unselectableIds:H.unselectableIds,columnWidths:["5%"],listConfigData:H.listConfigData}},H.permissions.update&&(H.listData.systemUsers.extraTD=a,H.listData.systemUsers.extraTH=t)}function k(){H.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function E(){var e=l.defer();if(H.listData.systemUsers.selected.length>0){var t=H.listData.systemUsers.selected.length;c.call("systemUsers","DELETE",{data:H.listData.systemUsers.selected},{}).then(function(a){d.showLocalizedToast("deleteSuccess"),H.total-=t,I(H.listData.systemUsers.selected),B(H.listData.systemUsers.selected.length),e.resolve()},function(t){e.reject()})}return e.promise}function I(e){for(var t=H.systemUsers.length-1;t>=0;t--){var a=e.indexOf(H.systemUsers[t].id);a>-1&&(e.splice(a,1),H.systemUsers.splice(t,1))}}function A(e){var t=e.obj;if(t.selected)H.listData.systemUsers.selected.push(t.id);else{var a=H.listData.systemUsers.selected.indexOf(t.id);a>-1&&H.listData.systemUsers.selected.splice(a,1)}}function M(){H.listData.systemUsers.selected.length>0&&s.showDeleteConfirmationModal(null,null,null,{},E).then(function(e){})}function L(){P().then(function(){H.permissions.create||(H.permissions.create=!1);var e={ename:"",user_name:"",essrole:"",adminrole:"",supervisorrole:"",password:"",Status:"",confirmpassword:"",changepassword:"",user_role_id:"",selectedEmployee:""};H.isAddUserModalOpened||(H.isAddUserModalOpened=!0,s.showModal("app/admin/systemUsers/systemUsers_modal.html","AdminEditSystemUsersController","modal",{systemUser:e,dataList:H.systemUsers,adminroles:H.adminroles,essroles:H.essroles,superviosrroles:H.superviosrroles,isEdit:!1,modalProperties:{title:"Add User",permission:H.permissions.create},enterpriseEnabled:H.eeEnabled}).then(function(e){H.isAddUserModalOpened=!1,e&&e.user&&(G(),e.toRegionModify&&R(e.user))}))})}function P(){return h.getSettings().then(function(e){return!e.limits.employee_limit||v.checkUserLimit().then(function(e){return e.allowed?(e.message&&p.info(e.message),!0):(p.error(e.message),l.reject())})})}function N(e){O(e)&&(u.show(),c.call("systemUsers/"+e.id+"/regions","GET",[],{}).then(function(t){u.hide();var a=t.data.data,i={hasAllRegions:a.hasAllRegions,regionList:{},locationList:a.locationList,locationCountries:{}};Object.entries(a.regionList).forEach(function(e){i.regionList[e[0]]=d.getLocalizedCustom(e[1])}),Object.entries(a.locationCountries).forEach(function(e){i.locationCountries[e[0]]=d.getLocalizedCustom(e[1])}),R(e,i)}))}function O(e){for(var t in e.UserUserRole){var a=e.UserUserRole[t].UserRole;if("undefined"!=typeof a&&1==a.typeId&&1!=a.id)return!0}return!1}function R(e,t){s.showModal("app/admin/systemUsers/modifyRegion_modal.html","AdminEditSystemUserRegionController","modal",{dataList:H.systemUsers,systemUser:e,modalProperties:{title:"Modify Region"},defaults:t})}function z(e){H.permissions.update||(H.permissions.update=!1),s.showModal("app/admin/systemUsers/systemUsers_modal.html","AdminEditSystemUsersController","modal",{systemUser:e,dataList:H.systemUsers,adminroles:H.adminroles,essroles:H.essroles,superviosrroles:H.superviosrroles,isEdit:!0,modalProperties:{title:"Edit User",permission:H.permissions.update},enterpriseEnabled:H.eeEnabled}).then(function(e){e&&e.toRegionModify&&R(e.user)})}function j(){close(!0)}function V(){close(!1)}function G(){H.totalDataCount=H.totalDataCount+1,H.dataInCurruntPage=H.dataInCurruntPage+1}function B(e){H.totalDataCount=H.totalDataCount-e,H.dataInCurruntPage=H.dataInCurruntPage-e}function q(e){var t={};return e.forEach(function(e){t[e.id]=d.getLocalizedCustom(e.name)}),t}var H=this;H.pageSize=50,H.page=1,H.lastPage=0,H.totalDataCount=0,H.dataInCurruntPage=0,H.title="Users",H.systemUsers="",H.systemUserLocations="",H.search=T,H.fetchMatchingEmployees=S,H.editSystemUsers=z,H.deleteSystemUsers=E,H.changeSelection=A,H.deleteSelection=M,H.fetchSystemUsers=b,H.addSystemUser=L,H.confirm=j,H.cancel=V,H.operationalCountryLocation=null,H.SortingListFields={username:"user_name",userroles:"display_name",employeeName:"emp_lastName",status:"status"},H.state=n,H.selected=[],H.filters=!1,H.oldFilter=!1,H.countries=[],H.supervisors=[],H.adminroles=[],H.essroles=[],H.superviosrroles=[],H.editRegion=N,H.listName="systemUsersList",H.listConfig={},H.modalHeader="Users List Configuration",H.applyForAllEmployeesLabel="Apply for All Admins",H.conditionalFields={},H.specialMessagesForFields={},H.maxNoOfFields=6,y.getRegisteredListConfiguration(H.listName,!0).then(function(e){H.listConfig=e.listConfig,H.listConfigData={availableFields:e.availableFields,mandatoryFields:e.mandatoryFields,defaultFields:e.defaultFields,listName:H.listName,modalHeader:H.modalHeader,applyForAllEmployeesLabel:H.applyForAllEmployeesLabel,conditionalFields:H.conditionalFields,specialMessagesForFields:H.specialMessagesForFields,maxNoOfFields:H.maxNoOfFields},H.systemUsers||t.getPermissions().then(function(e){if(e.system_users.read){H.permissions=e.system_users;var a=[],i={permissionType:[{type:"data_group",required_permissions:{system_users:{canRead:1,canCreate:0,canUpdate:0,canDelete:0}}}]};a.push(c.call("operationalCountryLocationHierarchy","GET",[],i)),a.push(h.getSetting("page_size")),a.push(t.getPermission("list_configuration",!0)),l.all(a).then(function(e){H.operationalCountryLocation=f.getOperationalCountryLocationDropDown(e[0].data.data.options),H.pageSize=e[1],H.listConfigurationPermissions=e[2],w()})}else n.go("403")})}),k(),e.$on("filter",D),e.$on("search",T),H.isAddUserModalOpened=!1}angular.module("app.admin").controller("AdminSystemUsersController",e),e.$inject=["$scope","datagroupPermissions","listHelper","logger","$window","$state","$q","ModalService","modalHelperService","webservice","localizedMessages","$rootScope","loader","toast","widgetChoiceHelper","$translate","settingsService","licenseService","listConfigurationService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(){o!==!1&&(_.filters=o,o.employee&&(_.employeeName=o.employee.title)),h()}function h(){_.userSelectSchema={type:"object",title:"Location",properties:{essroles:{title:"ESS Role",type:"string","enum":S.essroles["enum"]},adminroles:{title:"Admin Role",type:"string","enum":S.adminroles["enum"]},supervisorroles:{title:"Supervisor Role",type:"string","enum":S.superviosrroles["enum"]},status:{title:"Status",type:"string","enum":S.status["enum"]},location:{title:"Location",type:"string","enum":S.location["enum"]}}},_.userSelectForm=[{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"essroles",emptyOption:"All",titleMap:d.getSortedObjectList(S.essroles.titleMap,"name","ASC")},{type:"select",htmlClass:"col s12 m12 l6",key:"adminroles",emptyOption:"All",titleMap:d.getSortedObjectList(S.adminroles.titleMap,"name","ASC")}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"supervisorroles",emptyOption:"All",titleMap:d.getSortedObjectList(S.superviosrroles.titleMap,"name","ASC")},{type:"select",htmlClass:"col s12 m12 l6",key:"status",emptyOption:!1,titleMap:S.status.titleMap}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"location",titleMap:_.operationalCountryLocation}]}]}function v(e){var t=[],a=[];for(var i in e)t.push({value:i,name:f.getLocalizedCustom(e[i])}),a.push(i);return{titleMap:t,"enum":a}}function y(){s(_.filters)}function b(){s(!1)}function C(){_.filters={uname:null,essroles:"",supervisorroles:"",adminroles:"",status:"",location:""},y()}function w(e,t){var a=" ("+p.instant("Past Employee")+")",o={name:"userInputString",filter:{employee_name_or_id:e,termination:"2"},fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId","page[offset]":"0","page[limit]":"10"};return i.call("employees","GET",[],o,t).then(function(e){for(var t=0;t<e.data.data.length;t++)e.data.data[t].termination_id&&(e.data.data[t].past_employee=a);return e.data.data})}var _=this;_.search=y,_.cancel=b,_.reset=C,_.fetchMatchingEmployees=w,_.operationalCountryLocation=u,_.essroles=l,_.adminroles=n,_.superviosrroles=r,_.eeEnabled=c;var S={essroles:v(_.essroles),adminroles:v(_.adminroles),superviosrroles:v(_.superviosrroles),status:d.getEnumAndTitleMapForSelect([{name:"All",value:"all"},{name:"Enabled",value:"1"},{name:"Disabled",value:"0"}],{name:"name",value:"value"}),location:d.getEnumAndTitleMapForSelect(_.operationalCountryLocation,{name:"name",value:"value"})};_.filters={uname:null,essroles:"",supervisorroles:"",adminroles:"",status:"1",location:""},g()}angular.module("app.admin").controller("AdminSystemUserSearchController",e),e.$inject=["$q","$scope","logger","webservice","currentFilter","adminroles","essroles","superviosrroles","close","eeEnabled","formHelper","widgetChoiceHelper","operationalCountryLocation","$translate","localizedMessages"]}(),function(){"use strict";function e(e,t){function a(e,t,a,n,l,r,s,c,d){i(e),o(t,a,e,n,l,r,s,c,d)}function i(t){t.properties.allRegions={title:"All Regions",type:"boolean"},t.properties.regions={title:e.getLocalizedCustom("Select Region"),type:"object"},t.required.push("regions")}function o(a,i,o,l,r,s,m,u,p){a.push({type:"row",htmlClass:"col-12",items:[{key:"allRegions",type:"switch",icon:"ohrm_switch_icon_oxd",htmlClass:"col-4 modify-region-allregions",condition:u,readonly:i.isReadOnly,onChange:function(){d.$broadcast("schemaFormRedraw")}}]},{type:"row",htmlClass:"col-12",items:[{key:"regions",htmlClass:"col-6",placeholder:"Select Regions",type:"autocomplete-multiselect",choices:t.getItemsForMultyselectAutocomplete(c(r),{}),condition:p,readonly:i.isReadOnly,onChange:function(){n(!0,o,i,l,r,s,m)},validationMessage:{required:e.getLocalizedCustom("Required"),302:e.getLocalizedCustom("Required")}}]},{type:"row",htmlClass:"col-12",condition:"!model.allRegions",readonly:i.isReadOnly,items:[]})}function n(t,a,i,o,n,r,s){function c(e,t){for(var a in e){delete t.properties["selectedLocationsOnly_"+a],delete t.properties["selectedLocations_"+a];var i=t.required.indexOf("selectedLocations_"+a);i>-1&&t.required.splice(i,1)}}"undefined"==typeof t&&(t=!0),c(n,a);var p=[];for(var f in i.regions)!function(t){var n=t;a.properties["selectedLocationsOnly_"+t]={type:"boolean",title:e.getLocalizedCustom("Select Locations")},a.properties["selectedLocations_"+t]={type:"object",title:e.getLocalizedCustom("Locations")},a.required.push("selectedLocations_"+t),i["selectedLocationsOnly_"+t]||(i["selectedLocationsOnly_"+t]=!1),p.push({type:"row",htmlClass:"col-12 remove-bottom-margin",items:[{htmlClass:"col-12",type:"subheading"},{type:"section-heading",htmlClass:"col-4 oxd-modify-region-country-name remove-bottom-margin",text:i.regions[t],condition:"!model.allRegions"},{type:"row",htmlClass:"col-6 remove-bottom-margin",items:[{htmlClass:"col-12 modify-region-allLocations",type:"switch",key:"selectedLocationsOnly_"+t,condition:"!model.allRegions",onChange:function(e){e===!1?(u[t]=i["selectedLocations_"+t],delete i["selectedLocations_"+t]):e===!0&&(i["selectedLocations_"+t]=u[t]),d.$broadcast("schemaFormRedraw")}},{htmlClass:"col-12",type:"autocomplete-multiselect",placeholder:"Select Locations",key:"selectedLocations_"+t,choices:l(o,t),condition:"!model.allRegions && model.selectedLocationsOnly_"+t,validationMessage:{required:e.getLocalizedCustom("Required"),302:e.getLocalizedCustom("Required")}}]},{type:"deleteButton",htmlClass:"col-2 remove-bottom-margin",key:"Delete",icon:"delete",condition:"!model.allRegions",onClick:function(){i.isReadOnly||n&&d.$broadcast("removeItemSelected",{countryId:n})}}]})}(f);d.$on("regionSaved",function(){u=[]}),s?s.items[r].items=p:m.form&&m.form[r]&&m.form[r].items&&(m.form[r].items=p),t&&d.$broadcast("schemaFormRedraw")}function l(e,a){for(var i=0;i<e.length;i++)if(e[i].id==a)return t.getItemsForMultyselectAutocomplete(e[i].locations,{});return{}}function r(e){d=e}function s(e){m=e}function c(e){var t=[];for(var a in e)t.push({id:a,name:e[a]});return t}a.$inject=["schema","form","model","regionTree","operationalCountries","arrayIndexToInsertRegion","absoluteInsertLocation","displayAllRegionsCondition","displaySelectRegionsCondition"];var d,m,u=[],p={setScope:r,updateRegionSelections:n,getLocationsForCountry:l,getObjectArray:c,setForm:a,setController:s,setFormSchema:i,setFormRegion:o};return p}angular.module("app.admin").service("selectRegionService",e),e.$inject=["localizedMessages","formHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s){function c(){e.$broadcast("filter",[])}var d=this;d.filter=c,d.title=o.current.data.title,s.getPermissions().then(function(e){d.permissions=e.system_users}),d.employee=!1}angular.module("app.admin").controller("SystemUserListNavbarController",e),e.$inject=["$rootScope","$scope","$document","$translate","$state","webservice","ModalService","focus","datagroupPermissions"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h){function v(){$(".material-tooltip").remove(),X.permissions?X.permissions.create||X.permissions.update?X.fetchDataGroupsAndWorkFlow():(l.hide(),m.go("403")):f.getPermissions().then(function(e){X.permissions=e.admin_user_roles,X.permissions.create||X.permissions.update?X.fetchDataGroupsAndWorkFlow():(l.hide(),m.go("403"))})}function y(){s.$broadcast("markMenuItemAsCurrent",{stateName:"admin.user_roles"}),o.setForcedTitle(["HR Administration","Manage User Roles"]),s.$broadcast("addTopMenuBackButton",{uiSref:"admin.user_roles",tooltip:"Manage User Roles"})}function b(){return[n.getLocalizedCustom("Admin"),n.getLocalizedCustom("ESS"),n.getLocalizedCustom("Supervisor")]}function C(){l.show();var e={};d.id&&(X.userRoleId=d.id,e.userRoleDefaultType=t.call("userRoleDefaultType/userRoleId/"+X.userRoleId,"GET",[],{})),e.userRoles=t.call("userRoles/","GET",[],{}),i.all(e).then(function(e){if(X.userRoles=e.userRoles.data.data,d.id&&!V(X.userRoles,d.id))return l.hide(),void m.go("403");d.id?X.selectedUserRoleType=e.userRoleDefaultType.data.userRoleTypeId+"":null==X.selectedUserRoleType&&(X.selectedUserRoleType="1");var a={pimConfig:p.getPimOptionalFieldConfiguration(),userRoleTypeEmployeeOptions:t.call("userRoleTypeEmployeeOptions/userRoleType/"+X.selectedUserRoleType,"GET",[],{}),userRoleTypes:t.call("userRoleTypes","GET",[],{}),userRoleTypeWorkFlow:t.call("userRoleTypeWorkFlow/userRoleType/"+X.selectedUserRoleType,"GET",[],{}),userRoleTypeDataGroup:t.call("userRoleTypeDataGroup/userRoleType/"+X.selectedUserRoleType,"GET",[],{}),organization:t.call("organization","GET",[],{})};d.id&&(X.userRoleId=d.id,a.userRoleEmployeeOptions=t.call("userRoleEmployeeOptions/userRoleId/"+X.userRoleId,"GET",[],{}),a.userRoleDataGroup=t.call("userRoleDataGroup/userRoleId/"+X.userRoleId,"GET",[],{}),a.userRoleWorkFlow=t.call("userRoleWorkFlow/userRoleId/"+X.userRoleId,"GET",[],{})),i.all(a).then(function(e){if(X.pimConfig=e.pimConfig,X.employeeActions=e.userRoleTypeEmployeeOptions.data.data,X.userRoleTypes=e.userRoleTypes.data.data,X.userRoleTypeWorkFlows=e.userRoleTypeWorkFlow.data.data,X.userRoleTypeWorkFlowsDefaultSelection=T(e.userRoleTypeWorkFlow.data["default"],X.userRoleTypeWorkFlows),X.userRoleTypeDataGroups=e.userRoleTypeDataGroup.data.data,X.userRoleTypeDataGroupDefaultSelection=e.userRoleTypeDataGroup.data["default"],ee=1==e.organization.data.data.eeo_applicable,X.pimConfig.showTaxExeptions||D(),X.editableUserRoleNames=j(X.userRoles),X.predefinedUserRoleNames=G(X.userRoles),d.id){X.employeeActionModel=e.userRoleEmployeeOptions.data.data,Array.isArray(e.userRoleDataGroup.data.data)?X.userRoleDataGroups={}:X.userRoleDataGroups=w(X.userRoleTypeDataGroups,e.userRoleDataGroup.data.data,!1);var t=_.find(X.userRoles,{id:d.id.toString()});X.userRoleName=t.display_name,1==t.is_predefined&&(X.userRoleNameReadOnly=!0,X.userRoleWorkflowReadOnly=!0,X.userRoleName=n.getLocalizedCustom(t.display_name)),Array.isArray(e.userRoleWorkFlow.data.data)?X.workFlowModel={}:X.workFlowModel=e.userRoleWorkFlow.data.data}else"1"!=X.selectedUserRoleType?(X.userRoleDataGroups=w(X.userRoleTypeDataGroups,X.userRoleTypeDataGroupDefaultSelection,!1),X.workFlowModel=X.userRoleTypeWorkFlowsDefaultSelection):"1"==X.selectedUserRoleType&&(X.userRoleDataGroups=w(X.userRoleTypeDataGroups,X.userRoleTypeDataGroupDefaultSelection,!0),X.workFlowModel={});null!==X.userRoleDataGroups&&(X.userRoleDataGroups=F(X.userRoleDataGroups)),null!==X.userRoleTypeWorkFlows&&(X.userRoleTypeWorkFlowsTitleMap=I(X.userRoleTypeWorkFlows).titleMap);var a=X.addModuleToUserRoleTypeDataGroups(X.userRoleTypeDataGroups);null!==X.userRoleTypeDataGroups&&(X.userRoleTypeDataGroups=F(X.userRoleTypeDataGroups)),X.hideUnrelatedModules(a),q(),Q(),y(),l.hide()},function(e){l.hide(),r.warning(n.getLocalizedCustom(e.statusText,null))})},function(e){l.hide(),r.warning(n.getLocalizedCustom(e.statusText,null))})}function w(e,t,a){var i={};return angular.forEach(e,function(e,o){var n=e.id,l=[];void 0!==t[n]?l=t[n]:(l=angular.copy(e),l=S(l)),a&&(l=S(l)),i[o]=l}),i}function S(e){return e.canCreate=0,e.canDelete=0,e.canRead=0,e.canUpdate=0,e}function D(){var e=["tax_exemptions","tax_attachment","tax_custom_fields"];for(var t in X.userRoleTypeDataGroups)e.indexOf(X.userRoleTypeDataGroups[t].name)>-1&&delete X.userRoleTypeDataGroups[t]}function T(e,t){var a={};for(var i in t)for(var o in e)t[i].id==e[o]&&(t[i].groupName?a[t[i].groupName]=!0:t[i].name&&(a[t[i].name]=!0));return a}function x(){return h.textLengthExceedValidation.message(X.maxUserNameWidth)}function F(e){for(var t in e)(ee||"admin_process_eeo_filling"!=e[t].name)&&(null!=e[t].canRead&&(e[t].canRead=1==e[t].canRead),null!=e[t].canUpdate&&(e[t].canUpdate=1==e[t].canUpdate),null!=e[t].canCreate&&(e[t].canCreate=1==e[t].canCreate),null!=e[t].canDelete&&(e[t].canDelete=1==e[t].canDelete),null==X.modularizedDataGroups[e[t].module]&&(X.modularizedDataGroups[e[t].module]=[]),X.modularizedDataGroups[e[t].module].push(e[t]));return e}function k(e){var t=X.save(e);return X.userRoleNameOnChanged(e),t}function E(e){return t.call("userRoles/","GET",[],{}).then(function(a){if(X.editableUserRoleNames=j(a.data.data),X.predefinedUserRoleNames=G(a.data.data),R(e),z()){l.show();var i="saveSuccess";return X.userRoleId&&(i="updateSuccess"),t.call("userRoles/"+X.userRoleId,"POST",{name:X.userRoleName,actions:X.employeeActionModel,type:X.selectedUserRoleType,workflows:X.workFlowModel,dataGroups:X.userRoleDataGroups},{}).then(function(e){X.userRoleId?m.go("admin.user_roles").then(function(){n.showLocalizedToast(i)}):m.go("admin.user_roles",{savedUserRoleId:e.data.data.userRoleId}).then(function(){n.showLocalizedToast(i)}),l.hide()},function(e){l.hide(),r.error(n.getLocalizedCustom(e.data.details),null)})}})}function I(e){var t=[],a=[],i=[];if(null!==e)for(var o=0;o<e.length;o++){var n="",l="",r="",s="",c=e[o].availableTo.split(",");null!=e[o].groupName?(l=e[o].groupName,n=e[o].groupLabel):(l=e[o].name,n=e[o].label),null!=e[o].id&&(s=e[o].id),c.indexOf(X.selectedUserRoleType)>-1&&(r=!1);var d=a.indexOf(l);d>-1||(a.push(l),t.push({value:l,name:n}),i[l]=r)}return{titleMap:t,"enum":a,workFlowModel:i}}function A(){l.show(),m.go("admin.user_roles",{}),l.hide()}function M(e){var t={"HR Administration":0,Training:0,Asset:0,Attendance:0,Discipline:0,Leave:0,Maintenance:0,Onboarding:0,Performance:0,"Employee Management":0,"Recruitment (ATS)":0,"Reports Catalog":0,"Career Development":0,"Time Tracking":0,"Travel and Expense":0,"Reports and Analytics":0,Other:0};for(var a in e)e.hasOwnProperty(a)&&(L(e[a].description,"HR Administration")?(e[a].module="HR Administration",t["HR Administration"]++):L(e[a].description,"Learning Courses")||L(e[a].description,"Online Assessment Courses")||L(e[a].description,"Training")?(e[a].module="Training",t.Training++):L(e[a].description,"Asset")?(e[a].module="Asset",t.Asset++):L(e[a].description,"Attendance")?(e[a].module="Attendance",t.Attendance++):L(e[a].description,"Discipline")?(e[a].module="Discipline",t.Discipline++):L(e[a].description,"Leave")?(e[a].module="Leave",t.Leave++):L(e[a].description,"Maintenance")?(e[a].module="Maintenance",t.Maintenance++):L(e[a].description,"Onboarding")?(e[a].module="Onboarding",
t.Onboarding++):L(e[a].description,"Performance")?(e[a].module="Performance",t.Performance++):L(e[a].description,"Employee Management")?(e[a].module="Employee Management",t["Employee Management"]++):L(e[a].description,"Recruitment (ATS)")?(e[a].module="Recruitment (ATS)",t["Recruitment (ATS)"]++):L(e[a].description,"Reports Catalog")?(e[a].module="Reports Catalog",t["Reports Catalog"]++):L(e[a].description,"Career Development")?(e[a].module="Career Development",t["Career Development"]++):L(e[a].description,"Time Tracking")?(e[a].module="Time Tracking",t["Time Tracking"]++):L(e[a].description,"Travel and Expense")?(e[a].module="Travel and Expense",t["Travel and Expense"]++):L(e[a].description,"Reports and Analytics")?(e[a].module="Reports and Analytics",t["Reports and Analytics"]++):(e[a].module="Other",t.Other++));return t}function L(e,t){return 0===e.indexOf(t)}function P(e){for(var t in e)if(0==e[t]){var a=X.exsitingModulePrefix.map(function(e){return e.name}).indexOf(t);a>-1&&X.exsitingModulePrefix.splice(a,1)}}function N(){delete X.employeeActions,delete X.userRoleTypeDataGroups,delete X.userRoleDataGroups,delete X.exsitingModulePrefix,delete X.moduleChecked,X.modularizedDataGroups={},X.userRoleDataGroups={},X.moduleChecked={"HR Administration":!1,Training:!1,Asset:!1,Attendance:!1,Discipline:!1,Leave:!1,Maintenance:!1,Onboarding:!1,Performance:!1,"Employee Management":!1,"Recruitment (ATS)":!1,"Reports Catalog":!1,"Career Development":!1,"Time Tracking":!1,"Travel and Expense":!1,"Reports and Analytics":!1,Other:!1},X.exsitingModulePrefix=[{name:"HR Administration"},{name:"Training"},{name:"Asset"},{name:"Attendance"},{name:"Discipline"},{name:"Leave"},{name:"Maintenance"},{name:"Onboarding"},{name:"Performance"},{name:"Employee Management"},{name:"Recruitment (ATS)"},{name:"Reports Catalog"},{name:"Career Development"},{name:"Time Tracking"},{name:"Travel and Expense"},{name:"Reports and Analytics"},{name:"Other"}],X.fetchDataGroupsAndWorkFlow()}function O(e){for(var t=0;t<X.modularizedDataGroups[e].length;t++)X.moduleChecked[e]?X.userRoleDataGroups[X.modularizedDataGroups[e][t].id]=angular.copy(X.modularizedDataGroups[e][t]):delete X.userRoleDataGroups[parseInt(X.modularizedDataGroups[e][t].id)]}function R(e){e.userRoleName.$setDirty(),X.editableUserRoleNames.indexOf(X.userRoleName.toLowerCase())>-1?e.userRoleName.$setValidity("duplicate",!1):e.userRoleName.$setValidity("duplicate",!0),X.predefinedUserRoleNames.indexOf(X.userRoleName.toLowerCase())>-1?e.userRoleName.$setValidity("predefined",!1):e.userRoleName.$setValidity("predefined",!0),""==X.userRoleName?e.userRoleName.$setValidity("required",!1):e.userRoleName.$setValidity("required",!0),X.userRoleName.length>X.maxUserNameWidth?e.userRoleName.$setValidity("MaxChar",!1):e.userRoleName.$setValidity("MaxChar",!0)}function z(){return!(""==X.userRoleName||X.editableUserRoleNames.indexOf(X.userRoleName.toLowerCase())>-1||X.predefinedUserRoleNames.indexOf(X.userRoleName.toLowerCase())>-1||X.userRoleName.length>255)}function j(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&e[a].is_editable&&(X.userRoleId?X.userRoleId!=e[a].id&&t.push(e[a].display_name.toLowerCase()):t.push(e[a].display_name.toLowerCase()));return t}function V(e,t){for(var a in e)if(e.hasOwnProperty(a)&&e[a].is_editable&&e[a].id==t)return!0;return!1}function G(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&e[a].is_predefined&&(X.userRoleId?X.userRoleId!=e[a].id&&t.push(e[a].name.toLowerCase()):t.push(e[a].name.toLowerCase()));return t.push("Global Admin".toLowerCase()),t}function B(e){X.clickedModule==e?"arrow_drop_down"==X.modulesIconsForExpanding[e]?X.modulesIconsForExpanding[e]="arrow_drop_up":X.modulesIconsForExpanding[e]="arrow_drop_down":(X.modulesIconsForExpanding[X.clickedModule]="arrow_drop_down",X.modulesIconsForExpanding[e]="arrow_drop_up",X.clickedModule=e)}function q(){for(var e in X.modularizedDataGroups)X.modularizedDataGroups[e].sort(H)}function H(e,t){return e.description<t.description?-1:e.description>t.description?1:0}function U(e,t,a){switch(void 0===X.userRoleDataGroups[e]&&(X.userRoleDataGroups[e]={canRead:!1,canUpdate:!1,canCreate:!1,canDelete:!1}),t){case"Read":W(e);break;case"Update":Y(e);break;case"Create":J(e);break;case"Delete":K(e)}Z(a)}function W(e){X.userRoleDataGroups[e].canRead=!X.userRoleDataGroups[e].canRead}function Y(e){X.userRoleDataGroups[e].canUpdate=!X.userRoleDataGroups[e].canUpdate,X.userRoleDataGroups[e].canUpdate&&(X.userRoleDataGroups[e].canRead=!0)}function J(e){X.userRoleDataGroups[e].canCreate=!X.userRoleDataGroups[e].canCreate,X.userRoleDataGroups[e].canCreate&&(X.userRoleDataGroups[e].canRead=!0)}function K(e){X.userRoleDataGroups[e].canDelete=!X.userRoleDataGroups[e].canDelete,X.userRoleDataGroups[e].canDelete&&(X.userRoleDataGroups[e].canRead=!0)}function Z(e){var t=X.modularizedDataGroups[e],a=!0;for(var i in t){var o=void 0===X.userRoleDataGroups[t[i].id];if(1==t[i].canCreate&&!o&&X.userRoleDataGroups[t[i].id].canCreate!==!0){a=!1;break}if(1==t[i].canDelete&&!o&&X.userRoleDataGroups[t[i].id].canDelete!==!0){a=!1;break}if(1==t[i].canUpdate&&!o&&X.userRoleDataGroups[t[i].id].canUpdate!==!0){a=!1;break}if(1==t[i].canRead&&!o&&X.userRoleDataGroups[t[i].id].canRead!==!0){a=!1;break}}X.moduleChecked[e]=a}function Q(){for(var e in X.moduleChecked)Z(e)}var X=this;X.save=E,X.onSubmit=k,X.cancel=A,X.userRoleName="",X.permissions=d.permissions,X.hideUnrelatedModules=P,X.addModuleToUserRoleTypeDataGroups=M,X.fetchDataGroupsAndWorkFlow=C,X.strStartsWith=L,X.updateSelection=U,X.updateReadRights=W,X.updateUpdateRights=Y,X.updateCreateRights=J,X.updateDeleteRights=K,X.selectedRoleType,X.getUserRoleNameValidationMessage=x,X.userRoleNameOnChanged=R,X.cleanVariables=N,X.userRoleNameReadOnly=!1,X.userRoleWorkflowReadOnly=!1,X.moduleChecked={"HR Administration":!1,Training:!1,Asset:!1,Attendance:!1,Discipline:!1,Leave:!1,Onboarding:!1,Maintenance:!1,Performance:!1,"Employee Management":!1,"Recruitment (ATS)":!1,"Reports Catalog":!1,"Career Development":!1,"Time Tracking":!1,"Travel and Expense":!1,"Reports and Analytics":!1,Other:!1},X.moduleCheckChange=O,X.modularizedDataGroups={},X.userRoleDataGroups={},X.employeeActionModel={},X.workFlowModel={},X.maxUserNameWidth=255,X.collapsibleClicked=B,X.getUserRoleTypeStrings=b,g.fetchMaintenanceConfigurations().then(function(e){var t=e.data.data;t.enableMaintenanceModule?X.exsitingModulePrefix=[{name:"HR Administration"},{name:"Training"},{name:"Asset"},{name:"Attendance"},{name:"Discipline"},{name:"Leave"},{name:"Maintenance"},{name:"Onboarding"},{name:"Performance"},{name:"Employee Management"},{name:"Recruitment (ATS)"},{name:"Reports Catalog"},{name:"Career Development"},{name:"Time Tracking"},{name:"Travel and Expense"},{name:"Reports and Analytics"},{name:"Other"}]:X.exsitingModulePrefix=[{name:"HR Administration"},{name:"Training"},{name:"Asset"},{name:"Attendance"},{name:"Discipline"},{name:"Leave"},{name:"Onboarding"},{name:"Performance"},{name:"Employee Management"},{name:"Recruitment (ATS)"},{name:"Reports Catalog"},{name:"Career Development"},{name:"Time Tracking"},{name:"Travel and Expense"},{name:"Reports and Analytics"},{name:"Other"}]}),X.modulesIconsForExpanding={"HR Administration":"arrow_drop_down",Training:"arrow_drop_down",Asset:"arrow_drop_down",Attendance:"arrow_drop_down",Discipline:"arrow_drop_down",Leave:"arrow_drop_down",Maintenance:"arrow_drop_down",Onboarding:"arrow_drop_down",Performance:"arrow_drop_down","Employee Management":"arrow_drop_down","Recruitment (ATS)":"arrow_drop_down","Reports Catalog":"arrow_drop_down","Career Development":"arrow_drop_down","Time Tracking":"arrow_drop_down","Travel and Expense":"arrow_drop_down","Reports and Analytics":"arrow_drop_down",Other:"arrow_drop_down"},X.clickedModule="",X.lang={Read:"Read",Update:"Update",Create:"Create",Delete:"Delete"};var ee=!1;v()}angular.module("app.admin").controller("AdminEditUserRoleController",e),e.$inject=["logger","webservice","formHelper","$q","titleService","localizedMessages","loader","toast","$rootScope","$scope","$stateParams","$state","$translate","pimTabs","datagroupPermissions","maintenanceConfigurationService","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p){function f(){r.show(),m.getPermissions().then(function(e){N.permissions=e.admin_user_roles,N.permissions.read?p.getSetting("page_size").then(function(e){N.pageSize=e,N.fetchUserRoles("userRole","ASC","1")}):(r.hide(),c.go("403"))})}function g(e,t,i){if(N.userRoles)v(e,t,i);else{var l=[],s={filter:{is_editable:"1"}};l.push(o.call("userRoles","GET",[],s)),a.all(l).then(function(a){S(),N.userRoles=a[0].data.data,N.userRoles.forEach(function(e,t){e.deletable||N.unselectableIdList.push(e.id)}),N.total=a[0].data.data.length,N.totalDataCount=N.total,N.page=i,N.lastPage=Math.ceil(N.total/N.pageSize),N.page==N.lastPage?N.dataInCurruntPage=N.totalDataCount-N.pageSize*Math.floor(N.total/N.pageSize):N.dataInCurruntPage=N.pageSize,_(),v(e,t,i),r.hide(),0==N.userRoles.length&&n.infoToast("No Records Found")})}}function h(e,t){var a=null;for(var i in e)e[i].id==t&&(a=e[i],e.splice(i,1),e.unshift(a));return e}function v(e,t,a){r.show(),N.field=N.SortingListFields[e],"ASC"==t?N.userRoles.sort(C):"DESC"==t&&N.userRoles.sort(w),N.savedUserRoleId&&(N.userRoles=h(N.userRoles,N.savedUserRoleId),N.savedUserRoleId=null),b(a),y(),r.hide()}function y(){N.page==N.lastPage?N.dataInCurruntPage=N.totalDataCount-N.pageSize*Math.floor(N.total/N.pageSize):N.dataInCurruntPage=N.pageSize}function b(e){N.page=e;var t=(e-1)*N.pageSize;e==N.lastPage?N.userRolesSub=N.userRoles.slice(t,N.total):N.userRolesSub=N.userRoles.slice(t,t+N.pageSize)}function C(e,t){return e[N.field]<t[N.field]?-1:e[N.field]>t[N.field]?1:0}function w(e,t){return e[N.field]<t[N.field]?1:e[N.field]>t[N.field]?-1:0}function _(){N.userRolesListHelper=new e.list(N.listData.userRoles,N.userRoles,N.unselectableIdList),N.selectAll=N.userRolesListHelper.selectAllItems,N.deselectAll=N.userRolesListHelper.deselectAllItems}function S(){N.panelInfo={userRolesInfo:{icon:"images/pim/icon_work.svg"}},D()}function D(){var e=[{name:"userRole",lable:"User Role",getter:"display_name",clickAction:"editUserRole",sortable:!0,sortAction:"fetchUserRoles",formatter:function(e,t){return 1==t.is_predefined?n.getLocalizedCustom(e):e}},{name:"userRoleType",lable:"User Role Type",getter:["userRoleType","name"],sortable:!0,sortAction:"fetchUserRoles",formatter:function(e){return n.getLocalizedCustom(e)}}],t=[{colspan:3}],a=[{"class":"edit_item",clickAction:"editUserRole",tooltip:"Edit",colspan:function(e){return 1==e.is_predefined?2:1==e.typeId||3==e.typeId?1:2}},{icon:"block",clickAction:"preventAccessTo",tooltip:"Prevent Access To",hideIf:function(e){return 1!=e.is_predefined&&(1==e.typeId||3==e.typeId)}}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:N.permissions["delete"]}];N.listData={userRoles:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:N.permissions,listActions:i,pagination:!0,unselectableIds:N.unselectableIdList}},N.listData.userRoles.columnWidths=["5%","25%","55%","2%","5%"]}function T(e){i.showModal({templateUrl:"app/admin/userRoles/preventAccess.html",controller:"UserRolePreventAccessToController",controllerAs:"modal",inputs:{modalProperties:{title:"Prevent Access To",userRoleType:e.typeId,userRole:e.id}}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function x(e){c.go("admin.edit_user_role",{id:e.id,permissions:N.permissions})}function F(){if(N.listData.userRoles.selected.length>0){var e=N.listData.userRoles.selected.length;r.show(),o.call("userRoles","DELETE",{data:N.listData.userRoles.selected},{}).then(function(t){r.hide(),n.showLocalizedToast("deleteSuccess"),N.total-=e,k(N.listData.userRoles.selected),b(N.page)},function(e){r.hide(),s.success(e)})}}function k(e){for(var t=N.userRoles.length-1;t>=0;t--){var a=e.indexOf(N.userRoles[t].id);a>-1&&(e.splice(a,1),N.userRoles.splice(t,1))}}function E(e){var t=e.obj;if(t.selected)N.listData.userRoles.selected.push(t.id);else{var a=N.listData.userRoles.selected.indexOf(t.id);a>-1&&N.listData.userRoles.selected.splice(a,1)}}function I(){N.listData.userRoles.selected.length>0&&i.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&(F(),A(N.listData.userRoles.selected.length))})})}function A(e){N.totalDataCount=N.totalDataCount-e,N.dataInCurruntPage=N.dataInCurruntPage-e}function M(){c.go("admin.add_user_role",{permissions:N.permissions})}function L(){close(!0)}function P(){close(!1)}var N=this;N.title="userRole",N.userRoles,N.userRolesSub,N.editUserRole=x,N.preventAccessTo=T,N.deleteUserRoles=F,N.changeSelection=E,N.deleteSelection=I,N.addUserRole=M,N.confirm=L,N.cancel=P,N.SortingListFields={userRole:"display_name",userRoleType:"typeId"},N.fetchUserRoles=g,N.colspan=3,N.pageSize=50,N.page=1,N.total=0,N.totalDataCount=0,N.dataInCurruntPage=0,N.unselectableIdList=[],N.savedUserRoleId=u.savedUserRoleId,f()}angular.module("app.admin").controller("AdminUserRolesController",e),e.$inject=["listHelper","$window","$q","ModalService","webservice","localizedMessages","$rootScope","loader","toast","$state","$filter","datagroupPermissions","$stateParams","settingsService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l){function r(){i.show();var a=[];a.push(t.call("jobTitles","GET",[],{})),a.push(t.call("restrictableDataGroup/"+n.userRoleType+"/"+n.userRole,"GET",[],{})),a.push(t.call("userRoleRestriction/"+n.userRole,"GET",[],{})),e.all(a).then(function(e){var t=_.values(e[1].data.data),a=[];angular.forEach(t,function(e){angular.isDefined(e.DataGroup)&&angular.isDefined(e.DataGroup.MenuItem)&&"pim_left_menu"===e.DataGroup.MenuItem.menu_category&&"1"==e.canRead&&a.push(e)}),g.jobTitleItems=o.getItemsForMultyselectAutocomplete(e[0].data.data,{id:"id",name:"jobTitleName"});var i=o.getItemsForMultyselectAutocomplete(a,{id:"name",name:"description"});g.dataGroupItems=d(i);var n=e[2].data.data;g.restrictionId=n.restrictionId,g.dataGroups=s(n.dataGroups,g.dataGroupItems),g.jobTitles=c(n.jobTitles,g.jobTitleItems),m()}).then(function(e){i.hide()})}function s(e,t){return Object.keys(e).forEach(function(a,i){for(var o=!1,n=0;n<t.length;n++)if(t[n].id==a){o=!0;break}o||delete e[a]}),e}function c(e,t){return Object.keys(e).forEach(function(a,i){for(var o=!1,n=0;n<t.length;n++)if(t[n].id==a){o=!0;break}o||delete e[a]}),e}function d(e){for(var t=0;t<e.length;t++)e[t].name=a.getLocalizedCustom(e[t].name);return e}function m(){g.schema={type:"object",title:"preventAccessTo",properties:{jobTitle:{title:a.getLocalizedCustom("Job Titles"),type:"object"},dataGroup:{title:a.getLocalizedCustom("Data Groups"),type:"object"}}},g.model={jobTitle:g.jobTitles,dataGroup:g.dataGroups},g.form=[{type:"section",htmlClass:"row",items:[{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l12",key:"jobTitle",choices:g.jobTitleItems,validationMessage:{onlyHasJobTitle:a.getLocalizedCustom("Required")},onChange:function(){setTimeout(function(){void 0!=g.model.dataGroup&&0!=Object.keys(g.model.dataGroup).length||void 0!=g.model.jobTitle&&0!=Object.keys(g.model.jobTitle).length?(void 0==g.model.dataGroup||0==Object.keys(g.model.dataGroup).length)&&g.model.jobTitle&&Object.keys(g.model.jobTitle).length>0&&l.$broadcast("schemaForm.error.dataGroup","onlyHasDataGroup",!1):(l.$broadcast("schemaForm.error.dataGroup","onlyHasDataGroup",!0),l.$broadcast("schemaForm.error.jobTitle","onlyHasJobTitle",!0))},500)},$validators:{onlyHasJobTitle:u}},{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l12",key:"dataGroup",choices:g.dataGroupItems,validationMessage:{onlyHasDataGroup:a.getLocalizedCustom("Required")},onChange:function(){setTimeout(function(){void 0!=g.model.dataGroup&&0!=Object.keys(g.model.dataGroup).length||void 0!=g.model.jobTitle&&0!=Object.keys(g.model.jobTitle).length?g.model.dataGroup&&Object.keys(g.model.dataGroup).length>0&&(void 0==g.model.jobTitle||0==Object.keys(g.model.jobTitle).length)&&l.$broadcast("schemaForm.error.jobTitle","onlyHasJobTitle",!1):(l.$broadcast("schemaForm.error.dataGroups","onlyHasDataGroup",!0),l.$broadcast("schemaForm.error.jobTitle","onlyHasJobTitle",!0))},500)},$validators:{onlyHasDataGroup:p}}]}],o.addRequiredMessage(g.form)}function u(e){return(void 0==g.model.dataGroup||0==Object.keys(g.model.dataGroup).length)&&0==Object.keys(e).length||Object.keys(e).length>0}function p(e){return(void 0==g.model.jobTitle||0==Object.keys(g.model.jobTitle).length)&&0==Object.keys(e).length||Object.keys(e).length>0}function f(e){if(l.$broadcast("schemaFormValidate"),e.$valid){i.show(),g.model.restrictionId=g.restrictionId;var o="PATCH",r="userRoleRestriction/"+n.userRole,s="updateSuccess";t.call(r,o,g.model,{}).then(function(e){i.hide(),t.clearCache("employeeWizard"),a.showLocalizedToast(s),g.dataList=[]},function(e){i.hide()})}}var g=this;g.title="Prevent Access To",g.restrictionId=0,g.save=f,r()}angular.module("app.admin").controller("UserRolePreventAccessToController",e),e.$inject=["$q","webservice","localizedMessages","loader","formHelper","modalProperties","$scope"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){e.call("workShifts","GET",[]).then(function(e){if(_.existingWorkShifts=w(e.data.data,"name",!0),_.workShift.id)for(var t=0;t<_.existingWorkShifts.length;t++)if(e.data.data[t].id===_.workShift.id){_.existingWorkShifts.splice(t,1);break}})}function p(e){if(_.schema={type:"object",title:"Work Shifts",properties:{name:{title:"Work Shift",type:"string",maxLength:50},start_time:{title:"From",type:"string"},end_time:{title:"To",type:"string"},hoursPerDay:{title:"Hours Per Day",type:"string",notitle:!0}},required:["name","start_time","end_time"]},_.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"name",readonly:_.modalProperties.isDefaultShift,validationMessage:{302:t.getLocalizedCustom("Required"),201:m.textLengthExceedValidation.message(_.schema.properties.name.maxLength),duplicationWorkShift:t.getLocalizedCustom("Already exists")},$validators:{duplicationWorkShift:f}},{type:"timepicker",htmlClass:"col s12 m12 l12",key:"start_time",onChange:function(e,t){C()},workShiftType:"start_time",required:!0,validationMessage:{302:t.getLocalizedCustom("Required"),toShouldBeAfterFrom:t.getLocalizedCustom("From time should be before to time")}},{type:"timepicker",htmlClass:"col s12 m12 l12",key:"end_time",onChange:function(e,t){C()},workShiftType:"end_time",required:!0,validationMessage:{302:t.getLocalizedCustom("Required"),toShouldBeAfterFrom:t.getLocalizedCustom("To time should be after from time")}},{type:"text",htmlClass:"col s12 m12 l12",key:"hoursPerDay",notitle:!0,readonly:!0}]}],s.addRequiredMessage(_.form),_.workShift.start_time){var a=_.workShift.start_time.split(":");_.workShift.start_time=a[0]+":"+a[1]}if(_.workShift.end_time){var i=_.workShift.end_time.split(":");_.workShift.end_time=i[0]+":"+i[1]}_.model={name:_.workShift.name,start_time:""==_.workShift.start_time?"09:00":_.workShift.start_time,end_time:""==_.workShift.end_time?"17:00":_.workShift.end_time,hoursPerDay:""==_.workShift.hoursPerDay?"8.00":_.workShift.hoursPerDay}}function f(e){return!e||(_.existingWorkShifts?!(_.existingWorkShifts.indexOf(e.toLowerCase())>-1):void 0)}function g(a){if(c.$broadcast("schemaFormValidate"),a.$valid){l.show(),angular.extend(_.workShift,_.model);var i=_.workShift.id,s="POST",d="workShifts",m="saveSuccess";i?(s="PATCH",d+="/"+i,m="updateSuccess"):(s="POST",m="saveSuccess");var u={name:_.modalProperties.isDefaultShift?void 0:_.model.name,start_time:_.model.start_time,end_time:_.model.end_time,hoursPerDay:_.model.hoursPerDay};e.call(d,s,u,{}).then(function(e){l.hide(),"POST"==s?o.unshift(e.data.data):"PATCH"==s&&h(_.workShift),t.showLocalizedToast(m)},function(e){l.hide(),e.data&&e.data.title&&r.error(t.getLocalizedCustom(e.data.title))}),n(!0)}}function h(e){for(var t=0;t<o.length;t++)if(o[t].id==e.id){angular.extend(o[t],e);break}}function v(e){p({stimes:b(),etimes:b()})}function y(){n(!1)}function b(){for(var e=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],t=["00","15","30","45"],a=[],i=0,o=0;o<e.length;o++)for(var n=0;n<t.length;n++)a[i++]=e[o]+":"+t[n]+":00";for(var l=[],r=[],o=0;o<a.length;o++)l.push({value:a[o],name:a[o].substring(0,5)}),r.push(a[o]);return{titleMap:l,"enum":r}}function C(){var e=_.model.start_time,t=_.model.end_time;c.$broadcast("schemaForm.error.start_time","toShouldBeAfterFrom",!0),c.$broadcast("schemaForm.error.end_time","toShouldBeAfterFrom",!0),d(function(){if("undefined"!=typeof e&&"undefined"!=typeof t){if(e>=t)return c.$broadcast("schemaForm.error.start_time","toShouldBeAfterFrom",!1),void c.$broadcast("schemaForm.error.end_time","toShouldBeAfterFrom",!1);var a=0,i=e.split(":"),o=new Date;o.setHours(i[0],i[1]);var n=t.split(":"),l=new Date;l.setHours(n[0],n[1]);var r=l-o,s=parseFloat(r/36e5);a=Math.round(s*Math.pow(10,2))/Math.pow(10,2),_.model.hoursPerDay=a.toFixed(2)+""}})}function w(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}p.$inject=["formData"];var _=this;_.modalProperties=i;var S={};angular.copy(a,S),_.workShift=S,_.save=g,_.cancel=y,_.model={},_.existingWorkShifts=[],u(),v(p),c.$on("workShiftChanged",function(e,t){C()}),c.$on("timeTextChanged",function(e,t){t.timeText&&t.timeText.match(t.timePattern)||("start_time"===t.shiftType?c.$broadcast("schemaForm.error.start_time","toShouldBeAfterFrom",!0):c.$broadcast("schemaForm.error.end_time","toShouldBeAfterFrom",!0))})}angular.module("app.admin").controller("AdminEditWorkShiftsController",e),e.$inject=["webservice","localizedMessages","workShift","modalProperties","dataList","close","loader","toast","formHelper","$scope","$timeout","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(){m.show(),p.getSetting("page_size").then(function(e){L.pageSize=e,L.fetchWorkShifts("name","ASC",1)})}function h(e,t,a){m.show();var i={offset:(a-1)*L.pageSize,limit:L.pageSize,sortingFeild:L.sortingListFields[e],sortingOrder:t},l=[];l.push(s.call("workShifts","GET",[],i)),l.push(r.getPermissions().then(function(e){return void 0!==e.admin_work_shifts&&e.admin_work_shifts.read?e.admin_work_shifts:n.reject({statusText:"Forbidden"})})),n.all(l).then(function(e){L.permissions=e[1],L.workShifts=e[0].data.data,L.totalDataCount=e[0].data.meta.total,L.defaultShiftId=e[0].data.meta.defaultShiftId,L.unselectableIds=[L.defaultShiftId],L.dataInCurruntPage=e[0].data.data.length,L.page=a,L.lastPage=Math.ceil(L.totalDataCount/L.pageSize),v(),b(),y(),m.hide(),0==L.workShifts.length&&c.infoToast("No Records Found")},function(e){o.go("403")})}function v(){for(var e=0;e<L.workShifts.length;e++)L.workShifts[e].name=c.getLocalizedCustom(L.workShifts[e].name)}function y(){L.workShiftsListHelper=new t.list(L.listData.workShifts,L.workShifts,L.unselectableIds),L.selectAll=L.workShiftsListHelper.selectAllItems,L.deselectAll=L.workShiftsListHelper.deselectAllItems}function b(){L.panelInfo={workShiftsInfo:{title:"",icon:"images/pim/icon_work.svg"}},C()}function C(){var e=[{name:"name",lable:"Work Shift",getter:"name",sortable:!0,sortAction:"fetchWorkShifts"},{name:"From",lable:"From",getter:"start_time",sortable:!0,sortAction:"fetchWorkShifts",formatter:M},{name:"To",lable:"To",getter:"end_time",sortable:!0,sortAction:"fetchWorkShifts",formatter:M},{name:"Hours Per Day",lable:"Hours Per Day",getter:"hoursPerDay",sortable:!0,sortAction:"fetchWorkShifts"}],t=[{colspan:3}],a=[{"class":"edit_item",clickAction:"editWorkShifts",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:L.permissions["delete"]}];L.listData={workShifts:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:L.permissions,unselectableIds:L.unselectableIds,listActions:i,pagination:!0}}}function w(){L.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function _(e){l.showModal({templateUrl:"app/admin/workShifts/work_shifts_modal.html",controller:"AdminEditWorkShiftsController",controllerAs:"modal",inputs:{workShift:e,dataList:L.workShifts,modalProperties:{title:"Edit Work Shift",isDefaultShift:e.id===L.defaultShiftId}}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function S(){if(L.listData.workShifts.selected.length>0){var e={updateFinished:!1,updateCancelled:!1},t={forceCompletionCallback:function(t){return 1==e.updateFinished},forceCancellationCallback:function(t){return 1==e.updateCancelled}},a={progressModal:f.showProgressModal("Deleting Work Shift(s)","delete_work_shift",t),workShiftsDelete:s.call("workShifts","DELETE",{data:L.listData.workShifts.selected},{}).then(function(t){return e.updateFinished=!0,t})},i=L.listData.workShifts.selected.length;m.show(),n.all(a).then(function(e){m.hide(),c.showLocalizedToast("deleteSuccess"),L.total-=i,D(L.listData.workShifts.selected)},function(t){m.hide(),e.updateCancelled=!0,u.success(t)})}}function D(e){for(var t=L.workShifts.length-1;t>=0;t--){var a=e.indexOf(L.workShifts[t].id);a>-1&&(e.splice(a,1),L.workShifts.splice(t,1))}}function T(e){var t=e.obj;if(t.selected)L.listData.workShifts.selected.push(t.id);else{var a=L.listData.workShifts.selected.indexOf(t.id);a>-1&&L.listData.workShifts.selected.splice(a,1)}}function x(){L.listData.workShifts.selected.length>0&&l.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&(S(),E(L.listData.workShifts.selected.length))})})}function F(){var e={name:"",start_time:"",end_time:"",hoursPerDay:""};l.showModal({templateUrl:"app/admin/workShifts/work_shifts_modal.html",controller:"AdminEditWorkShiftsController",controllerAs:"modal",inputs:{workShift:e,dataList:L.workShifts,modalProperties:{title:"Add Work Shift "}}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e&&k()})})}function k(){L.totalDataCount=L.totalDataCount+1,L.dataInCurruntPage=L.dataInCurruntPage+1}function E(e){L.totalDataCount=L.totalDataCount-e,L.dataInCurruntPage=L.dataInCurruntPage-e}function I(){close(!0)}function A(){close(!1)}function M(e){return"string"==typeof e?e.substring(0,5):e}var L=this;L.title="Work Shifts",L.workShifts="",L.editWorkShifts=_,L.deleteWorkShifts=S,L.changeSelection=T,L.deleteSelection=x,L.addWorkShift=F,L.confirm=I,L.cancel=A,L.fetchWorkShifts=h,L.sortingListFields={name:"name",From:"start_time",To:"end_time","Hours Per Day":"hours_per_day"},L.pageSize=50,L.page=1,L.lastPage=0,L.totalDataCount=0,L.dataInCurruntPage=0,g(),w()}angular.module("app.admin").controller("AdminWorkShiftsController",e),e.$inject=["$scope","listHelper","logger","$window","$state","$q","ModalService","datagroupPermissions","webservice","localizedMessages","$rootScope","loader","toast","settingsService","modalHelperService"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"attendance",config:{"abstract":!0,url:"/attendance",template:"<ui-view/>"}},{state:"attendance.config",config:{url:"/config",views:{"":{templateUrl:"app/attendance/configuration/attendance_configuration.html",controller:"AttendanceConfigurationController",controllerAs:"vm"}}}},{state:"attendance.punch_in_out",config:{url:"/punch_in_out/empNumber/{empNumber}/date/{date}",views:{"":{templateUrl:"app/attendance/punchInOut/attendance_punch_in_out.html",controller:"AttendancePunchInOutController",controllerAs:"vm"}},params:{empNumber:null,date:null,redirectedFrom:null,sheetId:null,fromDate:null,toDate:null,specificPunchRecord:null}}},{state:"attendance.punch_in_out.forcedPunchIn",config:{url:"/forcedPunchIn/{forcedPunchIn}",params:{empNumber:null,date:null,forcedPunchIn:"false"}}},{state:"attendance.my_punch_in_out",config:{url:"/my_punch_in_out",views:{"":{templateUrl:"app/attendance/myPunchInOut/attendance_my_punch_in_out.html",controller:"AttendanceMyPunchInOutController",controllerAs:"vm"}},params:{redirectedFrom:null,sheetId:null,fromDate:null,toDate:null,specificPunchRecord:null}}},{state:"attendance.my_punch_in_out.date",config:{url:"/date/{date}",params:{date:null,transitionToast:null}}},{state:"attendance.my_punch_in_out.forcedPunchIn",config:{url:"/date/{date}/forcedPunchIn/{forcedPunchIn}",params:{date:null,forcedPunchIn:"false"}}},{state:"attendance.pay_policies",config:{url:"/pay_policies",views:{"":{templateUrl:"app/attendance/payPolicy/list/pay_policy_list.html",controller:"AttendancePayPoliciesController",controllerAs:"vm"}},data:{title:"Pay Policies",oxd:!0}}},{state:"attendance.pay_policy",config:{url:"/pay_policy/:id",views:{"":{templateUrl:"app/attendance/payPolicy/add/pay_policy.html",controller:"AttendancePayPolicyController",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:"SingleMenuItemTopRibbonController",controllerAs:"vm"}},data:{oxd:!0},params:{id:null,name:"Pay Policy"}}},{state:"attendance.pay_policy_employees",config:{url:"/pay_policy_employees/:id",views:{"":{templateUrl:"app/attendance/payPolicy/add/pay_policy_employees.html",controller:"AttendancePayPolicyEmployeesController",controllerAs:"vm"}},data:{title:"Employee Selection",oxd:!0},params:{id:null}}},{state:"attendance.attendance_sheets",config:{url:"/attendance_sheets",views:{"":{templateUrl:"app/attendance/attendanceSheets/attendance_sheets.html",controller:"AttendanceSheetsController",controllerAs:"vm"}},data:{title:"Attendance Sheets Ready for Approval",oxd:!0}}},{state:"attendance.attendance_sheet",config:{url:"/attendance_sheet/:sheetId/:empNumber/:fromDate/:toDate",views:{"":{templateUrl:"app/attendance/attendanceSheets/attendance_sheet.html",controller:"AttendanceSheetController",controllerAs:"vm"}},data:{oxd:!0},params:{sheetId:null,empNumber:null,fromDate:null,toDate:null,date:null,redirectedFrom:null}}},{state:"attendance.my_attendance_sheet",config:{url:"/my_attendance_sheet",views:{"":{controller:"MyAttendanceSheetController",controllerAs:"vm",template:""}},data:{oxd:!0},params:{currentMonth:!1,redirectedFrom:null}}}]}angular.module("app.attendance").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(){return{restrict:"E",scope:{sheetItems:"=",sheetMeta:"=",selectedDate:"=",attendanceRecordsPermissions:"="},templateUrl:"app/attendance/attendanceSheets/attendance-sheet-container.html",controller:t,controllerAs:"vm"}}function t(e,t,a,i,o,n){}angular.module("app.directives").directive("attendanceSheetContainer",e),t.$inject=["formHelper","localizedMessages","$scope","$rootScope","toast","ModalService"]}(),function(){"use strict";function e(){return{restrict:"A",scope:{sheetItem:"=",sheetMeta:"=",selectedDate:"=",attendanceRecordsPermissions:"="},templateUrl:"app/attendance/attendanceSheets/attendance-sheet-day.html",controller:t,controllerAs:"vm"}}function t(e,t,a,i,o,n,l){function r(e){return new Date(e)<new Date((new Date).toDateString())}function s(){c.summaryString="",c.showPrefixIcon=!1,c.showSuffixIcon=!1;var e=i.sheetItem.punchRecords,t=Object.keys(e),o=new Date(c.date+" 00:00:00");if(i.sheetItem.total>0&&t.length>0){var n=e[t[0]],l=e[t[t.length-1]];c.showPrefixIcon=o>new Date(n.punchInDate+" 00:00:00"),c.showSuffixIcon=!l.punchOutDate&&r(o)||o<new Date(l.punchOutDate+" 00:00:00"),c.summaryString+=c.showPrefixIcon?"00:00":n.punchInTime,c.summaryString+=" - "+(c.showSuffixIcon?"23:59":l.punchOutTime?l.punchOutTime:a.getLocalizedCustom("Now"));
}}var c=this;c.date=i.sheetItem.date,c.hasPunchRecords=Object.keys(i.sheetItem.punchRecords).length>0,c.dayOffStatus=i.sheetMeta.DayOffStatus,c.hasAttendanceRecordsPermissions=i.attendanceRecordsPermissions.read,s(),c.triggerClick=function(e){e==i.selectedDate&&o(function(){$("#date_"+e+" .collapsible-header").trigger("click"),$("#attendanceSheetDetailedSection").scrollTop(75),$("#attendanceSheetDetailedSection").animate({scrollTop:$("#date_"+e).position().top-50},"slow")})},c.getItemId=function(e){return c.date+"_"+e},c.checkUnfold=function(e){n.$broadcast("updateUnfold",{selectedDate:e})},c.onAdd=function(){var t={empNumber:i.sheetMeta.empNumber,date:c.date,redirectedFrom:"attendance_sheet",sheetId:i.sheetMeta.id,fromDate:i.sheetMeta.startDate,toDate:i.sheetMeta.endDate};e.go("attendance.punch_in_out",t)},c.getDayOfItem=function(){var e=c.date,t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date(e).getUTCDay()];return a.getLocalizedCustom(t).substring(0,5)},c.getMonthOfItem=function(){var e=c.date,t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][new Date(e).getUTCMonth()];return a.getLocalizedCustom(t).substring(0,5)},c.showPayCodeDuration=function(e){return e!=i.sheetMeta.dailyUntilPayCode},c.getPayHoursComponentClass=function(e){return"payCodeTotal-"+e},c.getDayOffStatus=function(){var e=c.date,t=c.dayOffStatus[e],i="",o=a.getLocalizedCustom("Full day"),n=a.getLocalizedCustom("Half day");if(t&&(t.holiday&&(i+=t.holiday.name+" ("+(1==t.holiday.length?o:n)+") "),t.leave)){var r;r=1==t.leave.length_days?o:.5==t.leave.length_days?n:l.secondsToHourMinuteFormat(3600*t.leave.length_hours),i+=a.getLocalizedCustom("Leave")+" ("+r+")"}return i},c.isLeaveDay=function(){var e=c.date,t=c.dayOffStatus[e];return t&&t.leave},c.isHoliday=function(){var e=c.date,t=c.dayOffStatus[e];return t&&t.holiday},c.isWeekend=function(){var e=c.date,t=c.dayOffStatus[e];return t&&t.weekend},c.isPastDateWithoutRecords=function(){var e=c.date,t=i.sheetItem.total,a=c.dayOffStatus[e],o=a&&a.isOffDay;return 0==t&&!o&&r(e)}}angular.module("app.directives").directive("attendanceSheetDay",e),t.$inject=["$state","formHelper","localizedMessages","$scope","$timeout","$rootScope","attendanceService"]}(),function(){"use strict";function e(){return{restrict:"E",scope:{punchRecord:"=",itemId:"="},templateUrl:"app/attendance/attendanceSheets/attendance-sheet-punch-record.html",controller:t,controllerAs:"vm"}}function t(e,t,a,i,o,n,l,r,s,c,d,m,u,p){function f(){D.schema={type:"object",properties:{punchInDate:{title:"",type:["null","object"]},punchInTime:{type:"string"},punchInNote:{type:"string",maxLength:250},punchOutDate:{title:"",type:["null","object"]},punchOutTime:{type:"string"},punchOutNote:{type:"string",maxLength:250}}},D.model={punchInDate:D.punchRecord.punchInDate?new Date(moment.utc(D.punchRecord.punchInDate).format("l LT")):void 0,punchInTime:D.punchRecord.punchInTime?D.punchRecord.punchInTime:void 0,punchInNote:D.punchRecord.punchInNote?D.punchRecord.punchInNote:void 0,punchOutDate:D.punchRecord.punchOutDate?new Date(moment.utc(D.punchRecord.punchOutDate).format("l LT")):void 0,punchOutTime:D.punchRecord.punchOutTime?D.punchRecord.punchOutTime:void 0,punchOutNote:D.punchRecord.punchOutNote?D.punchRecord.punchOutNote:void 0},D.form=[{type:"row",items:[{type:"date",key:"punchInDate",htmlClass:"col-6",defaultDate:D.model.punchInDate,resetDefaultDate:D.resetDefaultDate,readonly:!D.punchRecord.canEditPunchIn,onChange:function(){h("In")},validationMessage:{required:t.required.message(),invalidTime:i.getLocalizedCustom("Punch out Time Should be Later Than Punch in Time")},$validators:{required:function(e){return t.dateRequiredValidation.validator(e)}}},{type:"text",defaultTime:D.model.punchInTime,key:"punchInTime",htmlClass:"col-4",readonly:!D.punchRecord.canEditPunchIn,onChange:function(){h("In")},validationMessage:{required:t.required.message(),timeFormat24HourMinuteValidation:t.timeFormat24HourMinuteValidation.message()},$validators:{required:function(e){return t.required.validator(e)},timeFormat24HourMinuteValidation:function(e){return t.timeFormat24HourMinuteValidation.validator(e)}}},{type:"icon-button",iconName:"ohrm_comment_oxd",style:"btn btn-list",htmlClass:"col-2 iconDiv commentIcon",onClick:function(e){w(e,"punchInNote",D.punchRecord.canEditPunchIn)}}]},{type:"row",items:g()},{type:"row",items:[{type:"icon-button",iconName:"save",style:"btn btn-list",title:"Save",htmlClass:"col-1 iconDiv saveIcon",onClick:function(){D.allowedToSubmit&&y()}}]}]}function g(){return D.punchRecord.punchOutDate?[{type:"date",key:"punchOutDate",htmlClass:"col-6",defaultDate:D.model.punchOutDate,resetDefaultDate:D.resetDefaultDate,condition:"vm.punchRecord.punchOutDate",readonly:!D.punchRecord.canEditPunchOut,onChange:function(){h("Out")},validationMessage:{required:t.required.message(),invalidTime:i.getLocalizedCustom("Punch out Time Should be Later Than Punch in Time")},$validators:{required:function(e){return t.dateRequiredValidation.validator(e)}}},{type:"text",defaultTime:D.model.punchOutTime,key:"punchOutTime",htmlClass:"col-4",condition:"vm.punchRecord.punchOutTime",readonly:!D.punchRecord.canEditPunchOut,onChange:function(){h("Out")},validationMessage:{required:t.required.message(),timeFormat24HourMinuteValidation:t.timeFormat24HourMinuteValidation.message()},$validators:{required:function(e){return t.required.validator(e)},timeFormat24HourMinuteValidation:function(e){return t.timeFormat24HourMinuteValidation.validator(e)}}},{type:"icon-button",iconName:"ohrm_comment_oxd",style:"btn btn-list",htmlClass:"col-2 iconDiv commentIcon",condition:"vm.punchRecord.punchOutDate",onClick:function(e){w(e,"punchOutNote",D.punchRecord.canEditPunchOut)}}]:[{type:"icon-button-with-text",icon:"chevron_right",iconLabel:"Punch Out",htmlClass:"col-12 iconDiv",style:"btn btn-text attendancePunchInBtn",condition:"!vm.punchRecord.punchOutDate",onClick:function(e,t){S()}}]}function h(e){n.$broadcast("schemaForm.error.punchInTime","overlappingTime",!0),n.$broadcast("schemaForm.error.punchOutTime","overlappingTime",!0),n.$broadcast("schemaForm.error.punchInDate","frozenDate",!0),n.$broadcast("schemaForm.error.punchOutDate","frozenDate",!0);var t=["In","Out"],a=["Date","Time"],i=["invalidTime"];if(_.forEach(t,function(e){_.forEach(a,function(t){_.forEach(i,function(a){n.$broadcast("schemaForm.error.punch"+e+t,a,!0)})})}),D.allowedToSubmit=!0,D.model.punchInDate&&D.model.punchOutDate&&D.model.punchInTime&&D.model.punchOutTime){var o=new Date(v(D.model.punchInDate)+"T"+D.model.punchInTime).getTime()/1e3,l=new Date(v(D.model.punchOutDate)+"T"+D.model.punchOutTime).getTime()/1e3,r=3600*D.punchRecord.punchInTimezoneOffset,s=3600*D.punchRecord.punchOutTimezoneOffset,c=o-r,d=l-s;d<c?(n.$broadcast("schemaForm.error.punch"+e+"Date","invalidTime",!1),n.$broadcast("schemaForm.error.punch"+e+"Time","invalidTime",!1),D.allowedToSubmit=!1):(n.$broadcast("schemaForm.error.punch"+e+"Date","invalidTime",!0),n.$broadcast("schemaForm.error.punch"+e+"Time","invalidTime",!0))}}function v(e){return d.convertDateToString(e)}function y(){if(n.punchInRecordForm.$valid){r.show();var t={};t.id=D.punchRecord.id,t.punchInDate=D.model.punchInDate?v(D.model.punchInDate):void 0,t.punchInTime=D.model.punchInTime?D.model.punchInTime:void 0,t.punchInTimezoneOffset=D.punchRecord.punchInTimezoneOffset?D.punchRecord.punchInTimezoneOffset:void 0,t.punchInNote=D.model.punchInNote?D.model.punchInNote:void 0,t.punchOutDate=D.model.punchOutDate?v(D.model.punchOutDate):void 0,t.punchOutTime=D.model.punchOutTime?D.model.punchOutTime:void 0,t.punchOutTimezoneOffset=D.punchRecord.punchOutTimezoneOffset?D.punchRecord.punchOutTimezoneOffset:void 0,t.punchOutNote=D.model.punchOutNote?D.model.punchOutNote:void 0;var a={empNumber:D.punchRecord.empNumber,mode:"editPunchInOutRecords",punchInOutRecords:[t]};d.editAttendanceEmployeeRecords(a).then(function(t){t.data.success?(e.$broadcast("updateAttendanceSheet"),r.hide(),i.successToast("Successfully Saved")):(b(t.data.messages),r.hide())},function(e){b(e.data.messages)})["finally"](function(){r.hide()})}}function b(e){if("Overlapping Records Found"===e.error)n.$broadcast("schemaForm.error.punchInTime","overlappingTime",!1),n.$broadcast("schemaForm.error.punchOutTime","overlappingTime",!1),D.allowedToSubmit=!1,i.warningToast("Overlapping Records Found");else if("Dates Are on Already Approved Attendance Sheets"===e.error){var t=e.invalidDates[D.punchRecord.id];D.model.punchInDate&&t.includes(v(D.model.punchInDate))&&(D.allowedToSubmit=!1,n.$broadcast("schemaForm.error.punchInDate","frozenDate",!1)),D.model.punchOutDate&&t.includes(v(D.model.punchOutDate))&&(D.allowedToSubmit=!1,n.$broadcast("schemaForm.error.punchOutDate","frozenDate",!1)),D.allowedToSubmit?i.errorToast(u.PAY_CODE_CHANGE_ON_FROZEN_ATTENDANCE_SHEET_ERROR):i.warningToast(u.DATE_ON_FROZEN_ATTENDANCE_SHEET_ERROR)}else{var a=e.error?e.error:"Failed to Save";i.errorToast(a)}}function C(){r.show(),d.deleteAttendanceEmployeeRecords({ids:[D.punchRecord.id]}).then(function(t){if(t.data.success)e.$broadcast("updateAttendanceSheet"),r.hide(),i.successToast("Successfully Deleted");else{var a=t.data.messages.error?t.data.messages.error:"Failed to Delete";i.errorToast(a),r.hide()}},function(e){i.errorToast("Failed to Delete"),r.hide()})}function w(e,t,a){var i="punchOutNote"==t?D.model.punchOutNote:D.model.punchInNote;m.showModal("app/core/modal/oxd-comment-popover.html","OxdCommentModalController","modal",{comment:i,properties:{editable:a},clickEvent:e}).then(function(e){e&&("punchInNote"==t?D.model.punchInNote=e:D.model.punchOutNote=e)})}function S(){var t={specificPunchRecord:D.punchRecord.id,sheetId:p.sheetId,empNumber:D.punchRecord.empNumber,date:v(D.model.punchInDate),redirectedFrom:"attendance_sheet",fromDate:p.fromDate,toDate:p.toDate},a=e.emp_number==D.punchRecord.empNumber;a?c.go("attendance.my_punch_in_out",t):c.go("attendance.punch_in_out",t)}var D=this;D.editItemId=void 0,D.resetDefaultDate={reset:!1},D.punchRecord=n.punchRecord,D.allowedToSubmit=!0,D.toggleEditMode=function(){e.$broadcast("updateEditItem",{itemId:n.itemId})},D.showDeleteConfirmation=function(){m.showDeleteConfirmationModal("The selected record will be permanently deleted. Are you sure you want to continue?").then(function(e){e===!0&&C()})},n.$on("updateEditItem",function(e,t){D.editItemId=t.itemId}),n.$on("formLocator",function(e,t){n.punchInRecordForm=e.targetScope.punchInRecordForm}),f(),D.getLocalizedDate=function(e){return o.toLocalizedDate(e)}}angular.module("app.directives").directive("attendanceSheetPunchRecord",e),t.$inject=["$rootScope","formValidationHelper","formHelper","localizedMessages","dateService","$scope","$timeout","loader","datagroupPermissions","$state","attendanceService","modalHelperService","attendanceConstants","$stateParams"]}(),function(){"use strict";function e(e){var a={restrict:"E",templateUrl:"app/attendance/attendanceSheets/attendance-sheet-summary.html",scope:{attendanceSheetMeta:"=attendanceSheetMeta",actionCallback:"=",selectedDate:"=",mode:"=",attendanceRecordsPermissions:"="},controller:t,controllerAs:"vm",link:function(e){}};return a}function t(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){var e={redirectedFrom:"attendance_sheet",sheetId:m.attendanceSheetMeta.id,fromDate:m.attendanceSheetMeta.startDate,toDate:m.attendanceSheetMeta.endDate};if(i.emp_number==m.attendanceSheetMeta.empNumber)c.go("attendance.my_punch_in_out",e);else{var t=moment(new Date).format("YYYY-MM-DD");e.empNumber=m.attendanceSheetMeta.empNumber,e.date=t,c.go("attendance.punch_in_out",e)}}function f(e){for(var t=[],a=[],i={},n=0;n<e.length;n++)i=e[n].AttendanceSheetPeriod,t.push({value:e[n].id,name:o.toLocalizedDate(i.startDate)+" to "+o.toLocalizedDate(i.endDate)}),a.push(e[n].id);return{titleMap:t,"enum":a}}function g(e){var t=f(e);L.schema={type:"object",properties:{attendanceSheet:{type:"string","enum":t["enum"]},fromDate:{title:"Start Date",type:["null","object"]},toDate:{title:"End Date",type:["null","object"]}}},L.model={attendanceSheet:d.sheetId,fromDate:new Date(moment.utc(d.fromDate).format("l LT")),toDate:new Date(moment.utc(d.toDate).format("l LT"))},L.form=[{type:"row",items:[{type:"select",key:"attendanceSheet",htmlClass:"dropdown-btn",hideLabel:!0,emptyOption:!1,onChange:function(e,t){h(e,t)},titleMap:t.titleMap,condition:"vm.mode=='hourly'"},{type:"date",key:"fromDate",htmlClass:"col-12",defaultDate:L.model.fromDate,resetDefaultDate:L.resetDefaultDate,onChange:function(e,t){e&&L.model.toDate&&(e.getTime()<=L.model.toDate.getTime()?(m.$broadcast("schemaForm.error.toDate","minDate",!0),m.$broadcast("schemaForm.error.toDate","schemaForm",!0),h(e,t)):m.$broadcast("schemaForm.error.toDate","minDate",!1))},condition:"vm.mode=='salaried'",ngModelOptions:{allowInvalid:!0},validationMessage:{maxDate:l.getLocalizedCustom("From date should be before to date")},$validators:{maxDate:function(e){return!L.model.toDate||s.maxDate.validator(e,L.model.toDate)}}},{type:"date",key:"toDate",htmlClass:"col-12",defaultDate:L.model.toDate,resetDefaultDate:L.resetDefaultDate,onChange:function(e,t){e&&L.model.fromDate&&(L.model.fromDate.getTime()<=e.getTime()?(m.$broadcast("schemaForm.error.fromDate","maxDate",!0),m.$broadcast("schemaForm.error.fromDate","schemaForm",!0),h(e,t)):m.$broadcast("schemaForm.error.fromDate","maxDate",!1))},condition:"vm.mode=='salaried'",ngModelOptions:{allowInvalid:!0},validationMessage:{minDate:l.getLocalizedCustom("To date should be after from date")},$validators:{minDate:function(e){return!L.model.fromDate||s.minDate.validator(e,L.model.fromDate)}}}]}]}function h(e,t){if("hourly"==L.mode)c.go("attendance.attendance_sheet",{sheetId:e,date:null});else{var a=o.toStandardDate(L.model.fromDate),i=o.toStandardDate(L.model.toDate);c.go("attendance.attendance_sheet",{empNumber:L.empNumber,fromDate:a,toDate:i,date:m.selectedDate})}}function v(){var e={lastPunchRecord:S(),accessibleEmployees:k()};"hourly"==m.mode&&(e.attendanceSheetData=_()),a.all(e).then(function(e){L.attendanceSheetData="hourly"==m.mode?e.attendanceSheetData.data:{},g(L.attendanceSheetData),L.lastPunchRecord=w(e.lastPunchRecord.data.data),L.hasAccessibleEmployees=e.accessibleEmployees.data.meta.total>0,L.allowedActions=e.lastPunchRecord.data.meta.allowedActions;var a=m.attendanceSheetMeta,i=a.totalForCurrentDate,o=a.serverUtcDate,n=a.serverUtcTime,l=0;L.workedTime=t.getTotalWorkedTimeInHoursAndMinutes(i,o,n,l),setInterval(function(){l++,L.workedTime=t.getTotalWorkedTimeInHoursAndMinutes(i,o,n,l)},6e4),C(),y(),L.canPunch=m.attendanceRecordsPermissions.read&&m.attendanceSheetMeta.canPunchForCurrentDate})["finally"](function(){L.showLoader=!1,L.idToPunchOut=L.punchedIn?L.lastPunchRecord.id:void 0})}function y(){var e=m.attendanceSheetMeta.totalsForCurrentWeek;L.workedHoursForWeek=t.secondsToHourMinuteFormat(e.total),L.currentWeek="("+t.getDateRageTextInMonthDateFormat(e,"-")+")",L.graphData=b(e.totalPerDay);var a=document.getElementById("summarySection").offsetWidth+30;L.graphOptions={height:170*a/285,main:{width:a+10,color:"#ff7b1d",spacing:.7},shadow:{width:a,color:"#f6f5fb",spacing:.4}},L.chartMarginBottom=L.graphOptions.height+20,L.graphDataLoaded=!0,i.$broadcast("updateBarChart")}function b(e){for(var t=0;t<e.length;t++)e[t].name=l.getLocalizedCustom(e[t].name).substring(0,5);return e}function C(){if(L.action="Punch In",L.lastPunchRecord)if("PUNCHED IN"===L.lastPunchRecord.state){var e=moment(L.lastPunchRecord.punchInUserTime);L.lastPunch=t.formatPunchedTime(e,L.lastPunchRecord.punchInTimeOffset),L.punchedIn=!0,L.action="Punch Out"}else{var e=moment(L.lastPunchRecord.punchOutUserTime);L.lastPunch=t.formatPunchedTime(e,L.lastPunchRecord.punchOutTimeOffset),L.punchedIn=!1}else L.lastPunch=!1,L.punchedIn=!1}function w(e){return e.length>0&&e[0].id?e[0]:null}function _(){var e={filter:{empNumber:L.empNumber},orderField:"sheetPeriod",orderBy:"ASC"};return t.fetchAttendanceSheets(e)}function S(){var e=moment(new Date),a=e.format("YYYY-MM-DD"),i={include:"employee",filter:{empNumbers:[L.empNumber],onlyLastPunchRecord:"true",includeSelf:"true",toDate:a}};return t.fetchAttendanceEmployeeRecords(i)}function D(){for(var e=m.attendanceSheetMeta.AllowedWorkflowActions,t=0;t<e.length;t++)if("Submit"===e[t])return!0;return!1}function T(e){return"Approve"===e?"btn-approve":"Reject"===e?"btn-reject":"btn-label"}function x(e){return"Approve"===e?"thumb_up":"thumb_down"}function F(){for(var e=0,t=m.attendanceSheetMeta.AllowedWorkflowActions,a=0;a<t.length;a++)"Submit"!==t[a]&&e++;return 100/e+"%"}function k(){var t={fields:"empNumber",includeSelf:!1,filter:{permissionType:[{type:"data_group",required_permissions:{attendance_sheets:{canRead:"1",canCreate:"0",canUpdate:"0",canDelete:"0"}}}]}};return e.call("employees","GET",[],t)}function E(e){r.showModal("app/attendance/attendanceSheets/switch-employee.html","SwitchEmployeeController","modal",{clickEvent:e}).then(function(e){"object"==typeof e&&M(e.empNumber)})}function I(){r.showModal("app/core/modal/oxd_modal_with_list.html","OxdModalWithListController","modal",{listData:m.attendanceSheetMeta.actionLogs,listDefinition:A({read:!0}),title:"Actions Performed on the Attendance Sheet",modalSizeClass:"modal-md"}).then(function(){})}function A(e){var t=[{name:"action",lable:"Action",getter:"action",formatter:function(e){return l.getLocalizedCustom(e)}},{name:"performer",lable:"Performed By",getter:"performer",formatter:function(e){return e.employeeId?n.getFullName(e):e.name}},{name:"actionTime",lable:"Performed Time",getter:"actionTime",formatter:function(e){var t=e.split(" ");return o.toLocalizedDate(t[0])+" "+t[1]}}];return{tableId:"actionLogList_",name:"AttendanceSheetActions",selectable:!1,selected:[],idGetter:["id"],listFields:t,unselectableIds:[],extraTH:[],extraTD:[],showColumnsAnyway:!0,permission:e,columnWidths:["20%","40%","40%"],listActions:[],listClass:"classic-table"}}function M(e){u.show();var a={empNumber:e,fromDate:d.fromDate,toDate:d.toDate,mode:"find"};if(d.sheetId)for(var i=L.attendanceSheetData,o=0;o<i.length;o++)i[o].id==d.sheetId&&(a.fromDate=i[o].AttendanceSheetPeriod.startDate,a.toDate=i[o].AttendanceSheetPeriod.endDate);t.fetchAttendanceSheet(a).then(function(t){u.hide(),t.data.latestSheetId?c.go("attendance.attendance_sheet",{sheetId:t.data.latestSheetId,empNumber:null,fromDate:null,toDate:null,date:null}):c.go("attendance.attendance_sheet",{sheetId:null,empNumber:e,fromDate:a.fromDate,toDate:a.toDate,date:null})})}var L=this;L.punchedIn=!0,L.showLoader=!0,L.mode=m.mode,L.empNumber=m.attendanceSheetMeta.empNumber,L.canSubmit=D,L.getButtonClass=T,L.getButtonIcon=x,L.getButtonWidth=F,L.openSwitchEmployeePopover=E,L.showActionLogModal=I,L.resetDefaultDate={reset:!1},L.legendItems=[{"class":"holiday",description:"Holiday"},{"class":"leaveDay",description:"Leave"},{"class":"weekend",description:"Weekend"},{"class":"pastDate",description:"Absence without leave"}],L.punchInClicked=function(){p()},m.$on("updateAttendanceSummary",function(){v()}),v()}angular.module("app.core").directive("attendanceSheetSummary",e),e.$inject=["$timeout"],t.$inject=["webservice","attendanceService","$q","$rootScope","dateService","employeeService","localizedMessages","modalHelperService","formValidationHelper","$state","$stateParams","$scope","loader"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(){l.show();var t="hourly"==v.mode?{id:o.sheetId}:{empNumber:o.empNumber,fromDate:o.fromDate,toDate:o.toDate};t.include="extraDetails",n.fetchAttendanceSheet(t).then(function(t){v.attendanceSheetData=t.data,v.attendanceSheetMeta=t.meta,v.payHours=v.attendanceSheetMeta.totals;var a=e.emp_number==v.attendanceSheetMeta.empNumber,n={attendanceRecordsPermissions:m.getPermissions(a,{Employee:v.attendanceSheetMeta.empNumber})};i.all(n).then(function(t){if(void 0==v.selectedDate&&o.date&&v.attendanceSheetData.some(function(e){return e.date===o.date})&&(v.selectedDate=o.date),v.attendanceRecordsPermissions=t.attendanceRecordsPermissions.attendance_records,v.render=!0,v.triggerUpdateSummary&&(e.$broadcast("updateAttendanceSummary"),v.triggerUpdateSummary=!1),h(a),l.hide(),null!==localStorage.getItem("toast")){var i=JSON.parse(localStorage.getItem("toast"));"success"==i.type?s.successToast(i.message):"error"===i.type?s.errorToast(i.message):s.warningToast(i.message),localStorage.removeItem("toast")}})},function(e){l.hide(),a.go("403")})["finally"](function(){if("employeeProfile"===o.redirectedFrom){var e=o.empNumber?o.empNumber:v.attendanceSheetMeta.empNumber;p.addBackToProfileButton(e)}})}function h(t){var a=$("#menu-content,#top-ribbon-menu").find('a[href*="Attendance_Pay_Hours_Report"]');a.length?e.$broadcast("markMenuItemAsCurrent",{href:"Attendance_Pay_Hours_Report"}):(a=$("#menu-content,#top-ribbon-menu").find('a[href*="Attendance_Employee_Records_Report"]'),a.length?e.$broadcast("markMenuItemAsCurrent",{href:"Attendance_Employee_Records_Report"}):e.$broadcast("markMenuItemAsCurrent",{href:"my_punch_in_out"})),f(function(){t?e.$broadcast("markMenuItemAsCurrent",{stateName:"attendance.my_attendance_sheet"}):o.redirectedFrom&&!["employeeProfile","dashboard"].includes(o.redirectedFrom)?e.$broadcast("markMenuItemAsCurrent",{stateName:o.redirectedFrom}):"hourly"==v.mode?e.$broadcast("markMenuItemAsCurrent",{href:"Attendance_Pay_Hours_Report"}):e.$broadcast("markMenuItemAsCurrent",{href:"Attendance_Employee_Records_Report"})})}var v=this;v.render=!1,v.payHourPanelTemplate="app/attendance/attendanceSheets/pay-hours-panel.html",v.mode=o.sheetId?"hourly":"salaried";var y=o.sheetId?"Attendance Sheet":"Attendance Records";u.setTitle(y),v.selectedDate=void 0,v.triggerUpdateSummary=!1,g(),t.$on("updateAttendanceSheet",function(){v.triggerUpdateSummary=!0,g()}),t.$on("updateUnfold",function(e,t){v.selectedDate=t.selectedDate}),v.action=function(e){l.show();var a={action:e};n.performAttendanceSheetWorkflowAction(o.sheetId,a).then(function(e){l.hide(),e.data.success?(c.success(s.getLocalizedCustom(e.data.message)),t.$broadcast("updateAttendanceSheet")):c.error(s.getLocalizedCustom(e.data.message))},function(e){l.hide(),c.error(s.getLocalizedCustom("Invalid Data"))})},v.getPayHoursComponentClass=function(e){return"pay-hours-duration-"+e}}angular.module("app.attendance").controller("AttendanceSheetController",e),e.$inject=["$rootScope","$scope","$state","$q","$stateParams","attendanceService","loader","dateService","localizedMessages","toast","formValidationHelper","datagroupPermissions","titleService","menuService","$timeout"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(){var e={permission:l.getPermission("attendance_sheets").then(function(e){return e.read?e:a.reject({statusText:"Forbidden"})}),pageSize:u.getSetting("page_size"),payPolicies:r.fetchPayPolicies({filter:{includeDeleted:!0},orderField:"name",orderBy:"ASC"})};a.all(e).then(function(e){F.permissions=e.permission,F.pageSize=e.pageSize,F.payPolicies=e.payPolicies.data,v(F.payPolicies),y(F.orderField,"DESC",F.page)},function(){t.go("403")})}function h(e){e.sort(function(e,t){return"1"==e.isDeleted&&"1"!=t.isDeleted?1:"1"!=e.isDeleted&&"1"==t.isDeleted?-1:0});for(var t=[],a=[],i="",o=null,n=0;n<e.length;n++)o=o?o:e[n].id,i="1"===e[n].isDeleted?" ("+c.getLocalizedCustom("Deleted")+")":"",t.push({value:e[n].id,name:c.getLocalizedCustom(e[n].payPolicyName)+i}),a.push(e[n].id);return F.model={payPolicy:o,lastCompletedPayPeriodOnly:!0},f[F.sessionStorageKeyLastSearchFilters]&&(F.model=f[F.sessionStorageKeyLastSearchFilters],delete f[F.sessionStorageKeyLastSearchFilters]),{titleMap:t,"enum":a}}function v(e){var t=h(e);F.schema={type:"object",properties:{payPolicy:{title:"Pay Policy",type:"string","enum":t["enum"]},lastCompletedPayPeriodOnly:{title:"Last Completed Pay Period Only",type:"boolean"}}},F.form=[{type:"row",items:[{type:"select",key:"payPolicy",htmlClass:"col-12 dropdown-btn",emptyOption:!1,onChange:function(e,t){y(F.orderField,"DESC",F.page)},titleMap:t.titleMap}]},{type:"row",items:[{type:"checkbox",htmlClass:"col-12",key:"lastCompletedPayPeriodOnly",onChange:function(e,t){y(F.orderField,"DESC",F.page)}}]}]}function y(e,t,a){F.employeeAttendanceSheets=null;var i={offset:(a-1)*F.pageSize,limit:F.pageSize,orderField:F.sortingListFields[e],orderBy:t,actionable:"Approve",filter:F.model};r.fetchAttendanceSheets(i).then(function(e){var t=e.data;F.meta=e.meta,F.ids=F.meta.ids,F.total=F.ids.length,F.totalDataCount=F.total,F.dataInCurruntPage=t.length,F.page=a,F.lastPage=Math.ceil(F.total/F.pageSize),Object.keys(t).length>0?r.getPhotos(t).then(function(){F.employeeAttendanceSheets=t,b()}):(F.employeeAttendanceSheets=t,b())},function(){F.employeeAttendanceSheets=[],F.totalDataCount=0,F.dataInCurruntPage=0,b()})}function b(){F.panelInfo={employeeAttendanceSheetsInfo:{}},C()}function C(){var e=[{name:"profilePic",lable:"",getter:"photo",type:"oxd-profile-pic",clickAction:"viewAttendanceSheet"},{name:"employeeId",lable:"Employee Id",getter:"Employee",sortable:!0,sortAction:"fetchAttendanceSheets",formatter:function(e){return e.employeeId},clickAction:"viewAttendanceSheet"},{name:"name",lable:"Employee Name",getter:"Employee",sortable:!0,sortAction:"fetchAttendanceSheets",formatter:function(e){return d.getFullName(e)},clickAction:"viewAttendanceSheet"},{name:"supervisors",lable:"Supervisor(s)",getter:"Supervisors",formatter:function(e){var t="",a=1;return _.forEach(e,function(e){t+=a>1?", ":"",t+=d.getFullName(e),a++}),t},clickAction:"viewAttendanceSheet"},{name:"sheetPeriod",lable:"Pay Period",getter:"AttendanceSheetPeriod",sortable:!0,"class":"not-break-word",sortAction:"fetchAttendanceSheets",formatter:function(e){return s.toLocalizedDate(e.startDate)+" "+c.getLocalizedCustom("to")+" "+s.toLocalizedDate(e.endDate)},clickAction:"viewAttendanceSheet"},{name:"totalTime",lable:"Total Time",type:"oxd-value-with-description",getter:"totalTime",sortable:!1,"class":"center-align-text",formatter:function(e,t){var a=t.payCodeDurations,i="",o=1,n={mainValue:r.secondsToHourMinuteFormat(e)};return _.forEach(a,function(e,a){a!=t.dailyUntilPayCode&&e.duration>0&&(i+=o>1?", ":"",i+='<span class="bold-text">'+sanitise(e.description)+": </span>"+r.secondsToHourMinuteFormat(e.duration),o++)}),""!=i&&(n.subValueHtml=i),JSON.stringify(n)},clickAction:"viewAttendanceSheet"}];F.listDefinition={tableId:"employeeAttendanceSheetsList_",name:"Attendance Sheets",listClass:"classic-table hover selectable",selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:[],extraTD:[],showColumnsAnyway:!0,permission:F.permissions,columnWidths:["2%","4%","15%","20%","18%","16%","25%"],listActions:[],showSelectableAlways:!1,showLoader:!0,pagination:!0,listSpecificInitialSort:!0,clickableCondition:"id",unselectableIds:[],isSingleRowDeletable:function(e){return!1},isSingleRowEditable:function(e){return!1},listTopBar:{getMessageForNoOfItemsFound:function(e){return"undefined"!=typeof F.totalDataCount?c.getLocalizedCustomWithVariables("({{number}}) Attendance Sheet"+(1==F.totalDataCount?"":"s")+" Found",{number:F.totalDataCount}):""},getMessageForNoOfItemsSelected:function(e){return e?c.getLocalizedCustomWithVariables("({{number}}) Attendance Sheet"+(e>1?"s":"")+" Selected",{number:e}):""},getBulkActionButtons:function(e){return[{label:c.getLocalizedCustom("Approve Selected"),onClick:function(e){D(e,"The selected attendance sheets will be approved.")}}]}}}}function w(){D(F.ids,"All filtered attendance sheets will be approved.")}function S(){F.compactLeftPanel=!F.compactLeftPanel}function D(e,t){e.length>0&&p.showConfirmationModal(t+" Are you sure you want to continue?","Yes","No").then(function(t){t===!0&&T(e)})}function T(e){if(e.length>0){F.total=0,F.employeeAttendanceSheets=null;var t={ids:e,action:"Approve"};r.performAttendanceSheetsBulkAction(t).then(function(e){e.data.success?m.success(c.getLocalizedCustom(e.data.message)):m.error(c.getLocalizedCustom(e.data.message)),y(F.orderField,"DESC",F.page)},function(e){m.error(c.getLocalizedCustom("Invalid Data"))})}}function x(e){t.go("attendance.attendance_sheet",{sheetId:e.id,redirectedFrom:"attendance.attendance_sheets"})}var F=this;F.pageSize=50,F.page=1,F.total=0,F.totalDataCount=0,F.dataInCurruntPage=0,F.sortingListFields={name:"name",employeeId:"employeeId",sheetPeriod:"sheetPeriod"},F.viewAttendanceSheet=x,F.approveAttendanceSheets=T,F.fetchAttendanceSheets=y,F.toggleLeftMenu=S,F.approveAll=w,F.orderField="sheetPeriod",F.order="DESC",F.compactLeftPanel=!1,F.sessionStorageKeyLastSearchFilters="pending_approval_attendance_sheets_last_search_filters",g()}angular.module("app.attendance").controller("AttendanceSheetsController",e),e.$inject=["$scope","$state","$q","$stateParams","ModalService","listHelper","datagroupPermissions","attendanceService","dateService","localizedMessages","employeeService","toast","settingsService","modalHelperService","$localStorage"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){function m(){n.show(),i.currentMonth?g():o.fetchAttendanceSheet({}).then(function(e){n.hide(),e.meta.canCreateCurrentSheet?u(e.data):p(e.data)}),"employeeProfile"===i.redirectedFrom&&d.addBackToProfileButton(s.emp_number)}function u(e){c.showConfirmationModal("The attendance sheet for the current period is not created. Do you want to create it?","Yes","No").then(function(t){t===!0?(n.show(),o.createAttendanceSheet({empNumber:s.emp_number}).then(function(t){n.hide(),t.data.success?f(t.data.sheetId):p(e)},function(t){n.hide(),p(e)})):p(e)})}function p(e){e.latestSheetId?f(e.latestSheetId):g()}function f(e){t.go("attendance.attendance_sheet",{sheetId:e})}function g(){var e=new Date,a=r.toStandardDate(new Date(e.getFullYear(),e.getMonth(),1)),o=r.toStandardDate(new Date(e.getFullYear(),e.getMonth()+1,0));t.go("attendance.attendance_sheet",{empNumber:s.emp_number,fromDate:a,toDate:o,redirectedFrom:i.redirectedFrom})}m()}angular.module("app.attendance").controller("MyAttendanceSheetController",e),e.$inject=["$scope","$state","$q","$stateParams","attendanceService","loader","localizedMessages","dateService","$rootScope","modalHelperService","menuService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l){function r(){s.schema={type:"object",title:"",properties:{selectedEmployee:{title:"Switch Employee",type:"object"}},required:[]},s.form=[{type:"row",items:[{key:"selectedEmployee",type:"auto-complete",htmlClass:"col-12",placeholder:i.getLocalizedCustom("Employee Name"),"text-searching":"Searching...","text-no-results":"No results found",permissionType:[{type:"data_group",required_permissions:{attendance_sheets:{canRead:1,canCreate:0,canUpdate:0,canDelete:0}}}],"input-changed":function(){},onChange:function(e){e?(s.model.selectedEmployee=e.originalObject,n(s.model.selectedEmployee)):s.model.selectedEmployee=void 0}}]}]}var s=this;s.model={selectedEmployee:""},s.clickEvent=l,s.title="",r()}angular.module("app.performance").controller("SwitchEmployeeController",e),e.$inject=["$state","formHelper","webservice","localizedMessages","employeeService","close","clickEvent"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c){function d(){i.show();var e={checkDataGroupPermissions:_(),attendanceConfiguration:S()};a.all(e).then(function(e){var t=e.attendanceConfiguration.data.data;k.payPolicyConfigurationReadOnly=t.hasPayPolicies&&t.payPoliciesEnabled,m(e.attendanceConfiguration),p(),null!==localStorage.getItem("toast")&&"saveSuccess"===localStorage.getItem("toast")&&(r.showLocalizedToast("saveSuccess"),localStorage.removeItem("toast"))},function(e){t.go("403")})["finally"](function(){i.hide()})}function m(t){k.mainSchema={type:"object",required:[],properties:{employeeCanChangeCurrentPunchTime:{title:"Employee can change current time when punching in/out",type:"boolean",readOnly:!k.permissions.update},employeeCanEditDeleteOwnRecords:{title:"Employee can edit/delete own attendance records",type:"boolean",readOnly:!k.permissions.update},supervisorHodCanAddEditDeleteEmployeeRecords:{
title:"Supervisor/Head of Department can add/edit/delete attendance records of employees",type:"boolean",readOnly:!k.permissions.update},payPoliciesEnabled:{title:"Pay Policies enabled",type:"boolean",readOnly:!k.permissions.update||k.payPolicyConfigurationReadOnly},ipBasedRestrictionEnabled:{title:"IP based Punch In/Out restriction enabled",type:"boolean",readOnly:!k.permissions.update}}},k.mainForm=[{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l12",key:"employeeCanChangeCurrentPunchTime"}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l12",key:"employeeCanEditDeleteOwnRecords"}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l12",key:"supervisorHodCanAddEditDeleteEmployeeRecords"}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l12",key:"payPoliciesEnabled"}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l12",key:"ipBasedRestrictionEnabled",onChange:function(t){t&&0===k.allowedIpRanges.length?g():(k.ipRangeModel.ipFrom||k.ipRangeModel.ipTo)&&(f(!0),e.$broadcast("schemaFormValidate")),e.$broadcast("schemaFormRedraw")}}]}],k.mainModel=D(t),k.subSchema={type:"object",properties:{_dummy:{}}},k.subForm=[{type:"section",htmlClass:"compact-section row",items:[{type:"label",htmlClass:"col s12 m12 l12 allowed-ip-range-label",text:r.getLocalizedCustom("Allowed IP Address ranges :"),condition:function(){return k.mainModel.ipBasedRestrictionEnabled}}]},{type:"section",htmlClass:"row form-buttons",items:[{type:"submit",htmlClass:"col s12 m12 l12 right-align",title:"Save"}],condition:function(){return k.permissions.update}}],k.subModel=T(t),k.ipRangeSchema={type:"object",required:["ipFrom","ipTo"],properties:{seq:{title:"#",type:"string"},ipFrom:{title:"From",type:"string"},ipTo:{title:"To",type:"string"}}},k.ipRangeForm=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l5",key:"ipFrom",removePristine:k.removePristine,placeholder:r.getLocalizedCustom("From"),hideLabel:!0,condition:function(){return k.mainModel.ipBasedRestrictionEnabled},onChange:function(e,t){F("ipFrom")},$validators:{requiredForDirty:function(e){return s.requiredForDirty.validator(e,!1)},ip:function(e){return s.ip.validator(e)},ipFrom:function(e){return s.ipFrom.validator(e,k.ipRangeModel.ipTo)}},validationMessage:{requiredForDirty:s.requiredForDirty.message,ip:s.ip.message,ipFrom:s.ipFrom.message},ngModelOptions:{allowInvalid:!0}},{type:"text",htmlClass:"col s12 m12 l5",key:"ipTo",removePristine:k.removePristine,placeholder:r.getLocalizedCustom("To"),hideLabel:!0,condition:function(){return k.mainModel.ipBasedRestrictionEnabled},onChange:function(e,t){F("ipTo")},$validators:{requiredForDirty:function(e){return s.requiredForDirty.validator(e,!1)},ip:function(e){return s.ip.validator(e)},ipTo:function(e){return s.ipTo.validator(e,k.ipRangeModel.ipFrom)}},validationMessage:{requiredForDirty:s.requiredForDirty.message,ip:s.ip.message,ipTo:s.ipTo.message},ngModelOptions:{allowInvalid:!0}},{type:"icon",iconName:"remove",htmlClass:"col s1 l2 allowed-ip-range-inner-action-button",condition:function(e,t){return"ADD"===k.currentAction&&0<k.allowedIpRanges.length||1<k.allowedIpRanges.length},onClick:function(e){"EDIT"===k.currentAction&&h(k.ipRangeModel.seq-1),p()}},{type:"icon",iconName:"add",htmlClass:"col s1 allowed-ip-range-inner-action-button",condition:function(e,t){switch(k.currentAction){case"ADD":return!(!t.model.isValid||0!==k.allowedIpRanges.length)||t.model.isValid&&t.model.seq===1+k.allowedIpRanges.length;case"EDIT":return t.model.seq===k.allowedIpRanges.length}return!1},onClick:function(e){try{y(),c(function(){g()})}catch(t){}}}]}],k.ipRangeModel=u()}function u(){return{seq:null,isValid:!1,ipFrom:"",ipTo:""}}function p(){k.currentAction=null,k.isNewAllowedIpRange=!1,k.selectedItemIndex=null,f(),k.ipRangeModel=u()}function f(t){void 0===t&&(t=k.removePristine),k.ipRangeForm[0].items=k.ipRangeForm[0].items.map(function(e){return"text"===e.type&&(e.removePristine=t),e}),e.$broadcast("schemaFormRedraw")}function g(){if(k.ipRangeModel.isValid||"ADD"!==k.currentAction)try{y(),p(),k.currentAction="ADD",k.isNewAllowedIpRange=!0,k.ipRangeModel=u(),k.ipRangeModel.seq=1+k.allowedIpRanges.length}catch(e){}}function h(e){k.allowedIpRanges=k.allowedIpRanges.filter(function(t,a){return a!==e})}function v(e){if(k.ipRangeModel.isValid||"ADD"!==k.currentAction)try{y(),p(),k.currentAction="EDIT",k.selectedItemIndex=e;var t=k.allowedIpRanges[e];k.ipRangeModel={seq:1+e,isValid:!0,ipFrom:t.ipFrom,ipTo:t.ipTo}}catch(a){}}function y(){if(e.$broadcast("schemaFormValidate"),!k.htmlForm.$valid)throw"INVALID";switch(k.currentAction){case"ADD":k.ipRangeModel.isValid&&(k.allowedIpRanges.push({ipFrom:k.ipRangeModel.ipFrom,ipTo:k.ipRangeModel.ipTo}),p());break;case"EDIT":k.allowedIpRanges[k.ipRangeModel.seq-1]={ipFrom:k.ipRangeModel.ipFrom,ipTo:k.ipRangeModel.ipTo},p()}}function b(){if(!k.isSubmitting)try{k.acceptIpRange(),e.$broadcast("schemaFormValidate"),k.htmlForm.$valid&&k.permissions.update&&C()}catch(t){}}function C(){k.isSubmitting=!0,i.show();var e=w();l.saveAttendanceConfiguration(e).then(function(e){e.data.success?(location.reload(),localStorage.setItem("toast","saveSuccess")):r.errorToast("Failed to Save")},function(e){r.errorToast("Failed to Save")})["finally"](function(){i.hide(),k.isSubmitting=!1})}function w(){return{employeeCanChangeCurrentPunchTime:k.mainModel.employeeCanChangeCurrentPunchTime,employeeCanEditDeleteOwnRecords:k.mainModel.employeeCanEditDeleteOwnRecords,supervisorHodCanAddEditDeleteEmployeeRecords:k.mainModel.supervisorHodCanAddEditDeleteEmployeeRecords,payPoliciesEnabled:k.mainModel.payPoliciesEnabled,ipBasedRestrictionEnabled:k.mainModel.ipBasedRestrictionEnabled,allowedIpRanges:k.mainModel.ipBasedRestrictionEnabled?x():[]}}function _(){return n.getPermissions().then(function(e){k.permissions=e.attendance_configuration,k.permissions.read||(i.hide(),t.go("403"))})}function S(){return l.fetchAttendanceConfiguration()}function D(e){var t=e.data.data,a={employeeCanChangeCurrentPunchTime:t.employeeCanChangeCurrentPunchTime,employeeCanEditDeleteOwnRecords:t.employeeCanEditDeleteOwnRecords,supervisorHodCanAddEditDeleteEmployeeRecords:t.supervisorHodCanAddEditDeleteEmployeeRecords,payPoliciesEnabled:t.payPoliciesEnabled,ipBasedRestrictionEnabled:t.ipBasedRestrictionEnabled};return a}function T(e){var t=e.data.data,a={};return t.ipBasedRestrictionEnabled&&(k.allowedIpRanges=t.allowedIpRanges),a}function x(){return k.allowedIpRanges.map(function(e,t){return{ipFrom:e.ipFrom,ipTo:e.ipTo}})}function F(t){k.ipRangeModel.isValid=!1;var a=t,i="ipFrom"===t?"ipTo":"ipFrom",o=k.ipRangeModel[a],n=k.ipRangeModel[i];if(o&&s.requiredForDirty.validator(o,!1)){if(!s.ip.validator(o))return void e.$broadcast("schemaForm.error."+a,"ip",!1);if(!n||!s.ip.validator(n))return void e.$broadcast("schemaForm.error."+a,"ip",!0);var l=s.ipFrom.validator(k.ipRangeModel.ipFrom,k.ipRangeModel.ipTo)&&s.ipTo.validator(k.ipRangeModel.ipTo,k.ipRangeModel.ipFrom);e.$broadcast("schemaForm.error.ipFrom","ipFrom",l),e.$broadcast("schemaForm.error.ipTo","ipTo",l),l&&(k.ipRangeModel.isValid=!0)}}var k=this;o.setTitle("Attendance Configuration"),k.htmlForm=null,k.currentAction=null,k.permissions={},k.attendanceConfigurationHeading="Attendance Configuration",k.removePristine=!1,k.payPolicyConfigurationReadOnly=!1,k.selectedItemIndex=null,k.isNewAllowedIpRange=!1,k.allowedIpRanges=[],k.isSubmitting=!1,k.reset=p,k.toggleEditMode=v,k.deleteIpAddrRange=h,k.addIpAddrRange=g,k.acceptIpRange=y,k.onSubmit=b,d()}angular.module("app.attendance").controller("AttendanceConfigurationController",e),e.$inject=["$scope","$state","$q","loader","titleService","datagroupPermissions","attendanceService","localizedMessages","formValidationHelper","$timeout"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w){function _(){i.show();var e={checkDataGroupPermissions:L(),lastPunchRecord:$()};a.all(e).then(function(e){Q.lastPunchRecord=e.lastPunchRecord.data.data[0]?e.lastPunchRecord.data.data[0]:{};var a=e.lastPunchRecord.data.meta;Q.total=a.total,Q.allowedActions=a.allowedActions,0==Q.allowedActions.PunchIn&&0==Q.allowedActions.PunchOut&&t.go("403"),Q.isAllowedClientIp=a.isAllowedClientIp,G(),S(),K()},function(e){Q.lastPunchRecord={},Q.total=0,Q.allowedActions={Delete:!1,Edit:!1,PunchIn:!1,PunchOut:!1},Q.isAllowedClientIp=!0})["finally"](function(){Q.attendanceMyPunchInOutHeading=Q.allowedActions.PunchOut?"Punch Out":"Punch In",Q.idToPunchOut=Q.allowedActions.PunchOut?Q.lastPunchRecord.id:void 0,N(Q.lastPunchRecord),O(Q.lastPunchRecord),W(),i.hide(),g.redirectedFrom&&"employeeProfile"==g.redirectedFrom&&w.addBackToProfileButton(Q.empNumber),y(function(){Q.isPageLoaded=!0,J(),Z()})})}function S(){Q.schema={type:"object",properties:{date:{title:"Date",type:["null","object"],datePickerConfig:{selectMonths:!0,selectYears:10}},time:{title:"Time (HH:MM)*",type:"string"},note:{title:"Note",type:"string",maxLength:250}},required:["date"]},Q.form=[{type:"section",htmlClass:"row",items:[{type:"date",htmlClass:"col s12 m4 l4",key:"date",readonly:!Q.isAllowedClientIp,condition:function(){return!Q.readOnlyMode},onChange:function(e){Q.isPageLoaded&&(z(e,"date"),H(),q(e),R(e,"date"),j(e,"date"))},validationMessage:{302:r.getLocalizedCustom("Required"),frozenDate:function(){return r.getLocalizedCustom(l.getFormattedErrorMessage(C.DATE_ON_FROZEN_ATTENDANCE_SHEET_ERROR,!0))}}},{type:"text",htmlClass:"col s12 m4 l4",key:"time",placeholder:"HH:MM",removePristine:!0,readonly:!Q.isAllowedClientIp,condition:function(){return!Q.readOnlyMode},ngModelOptions:{allowInvalid:!0},onChange:function(e){Q.isPageLoaded&&(R(e),j(e))},$validators:{requiredForDirty:function(e){return s.requiredForDirty.validator(e,!1)},timeFormat:function(e){return s.timeFormat24HourMinuteValidation.validator(e)}},$asyncValidators:{"tv4-punchOutTime":function(e){var t=a.defer();return e&&Q.isPageLoaded?R(e,"time").then(function(e){e?t.resolve():t.reject()}):y(function(){t.resolve()}),t.promise},"tv4-overlappingRecords":function(e){var t=a.defer();return e&&Q.isPageLoaded?j(e,"time").then(function(e){e?t.resolve():t.reject()}):y(function(){t.resolve()}),t.promise}},validationMessage:{requiredForDirty:s.requiredForDirty.message,timeFormat:r.getLocalizedCustom("Should be a valid time in HH:MM format"),punchOutTime:r.getLocalizedCustom("Punch out time should be later than punch in time"),overlappingRecords:function(){return r.getLocalizedCustom("Overlapping records found")}}}]},{type:"section",htmlClass:"row",items:[{type:"textarea",htmlClass:"col s8 m8 l8",key:"note",readonly:!Q.isAllowedClientIp,validationMessage:{201:s.textLengthExceedValidation.message(Q.schema.properties.note.maxLength)}}]},{type:"section",htmlClass:"row requiredHelperText",items:[{type:"help",helpvalue:"<em>*</em> "+r.getLocalizedCustom("Required field"),condition:function(){return!Q.readOnlyMode}}]}],Q.model=D()}function D(){var e={date:new Date(Q.date+"T"+Q.time),time:Q.time,timezone:F()};return e}function T(){return l.getCurrentTime()}function x(){return l.getCurrentTimeFromServerUtcDateAndTime()}function F(){return l.getUserTimeZoneOffset()}function k(e){if(Q.isPageLoaded&&!Q.submitInProgress&&Q.isAllowedClientIp&&!Q.isGeoLocationMandatory&&!Q.isSelfieMandatory){Q.submitInProgress=!0;var t=U(!0),i=e.$valid!==!1&&0===Object.keys(e.$error).length,o={isPunchOutTimeValid:R(),isValidDate:z(),noOverlappingRecords:j()};a.all(o).then(function(e){e.isValidDate&&e.noOverlappingRecords&&i&&e.isPunchOutTimeValid&&t&&(Q.allowedActions.PunchIn||Q.allowedActions.PunchOut)?(P(),E()):Y(e.isPunchOutTimeValid,e.noOverlappingRecords,e.isValidDate)})}}function E(){var e="Failed to Save";i.show();var t=A();l.saveAttendanceEmployeeRecord(Q.idToPunchOut,t).then(function(e){if(e.data.success)I(M(Q.submittedValues.date),"Successfully Saved","success");else{if("Overlapping Records Found"===e.data.messages.error)I(null,"Overlapping Records Found","error");else if("Invalid Punch In Date/Time"===e.data.messages.error||"Invalid Punch Out Date/Time"===e.data.messages.error)I(null,"Unable to sync with the server. Please refresh the page and try again.","error");else{var t=e.data.messages.error?e.data.messages.error:"Failed to Save";I(null,t,"error")}i.hide()}},function(t){403===t.status?Q.idToPunchOut?I(M(Q.serverUtcDate?Q.serverUtcDate:new Date),"Not Allowed To Punch Out","warning"):I(M(Q.submittedValues.date),"Not Allowed To Punch In","warning"):401===t.status?(Q.isPageLoaded=!1,I(null,"Failed to Save","error"),i.hide(),c.logout()):(I(null,t.data&&t.data.messages&&t.data.messages.error?t.data.messages.error:e,"error"),i.hide())})["finally"](function(){Q.submitInProgress=!1})}function I(e,a,i){var o={sheetId:g.sheetId,date:e};g.redirectedFrom&&"attendance_sheet"==g.redirectedFrom?(g.sheetId||(o={empNumber:Q.empNumber,fromDate:g.fromDate,toDate:g.toDate,date:e}),localStorage.setItem("toast",JSON.stringify({message:a,type:i})),t.go("attendance.attendance_sheet",o)):g.redirectedFrom&&"dashboard"==g.redirectedFrom?(localStorage.setItem("dashboardToast",JSON.stringify({message:a,type:i})),t.go("dashboard",{})):g.redirectedFrom&&"employeeProfile"==g.redirectedFrom?(localStorage.setItem("dashboardToast",JSON.stringify({message:a,type:i})),t.go("pim.employees.profile.profile",{empNumber:Q.empNumber})):"error"!==i?(o={date:e,transitionToast:a},t.go("attendance.my_punch_in_out.date",o,{reload:!0})):r.errorToast(a)}function A(){var e={empNumber:Q.empNumber,date:M(Q.model.date),time:Q.model.time,timezoneOffset:Q.model.timezone,note:Q.model.note};return Q.idToPunchOut||(e.forcePunchIn="true"===Q.forcedPunchIn),e}function M(e){return l.convertDateToString(e)}function L(){return n.getPermissions(!0).then(function(e){Q.permissions=e.attendance_records,Q.permissions.read||(i.hide(),t.go("403"))})}function P(){Q.submittedValues={date:Q.model.date,time:Q.model.time,timezone:Q.model.timezone}}function $(){var e={include:"employee",filter:{empNumbers:[Q.empNumber],toDate:Q.date,onlyLastPunchRecord:"true",includeSelf:"true"}};return g.specificPunchRecord&&(e.filter.specificPunchRecord=g.specificPunchRecord),l.fetchAttendanceEmployeeRecords(e)}function N(e){if(e.punchInUserTime){var t=e.punchInUserTime.split(" ");Q.formattedPunchInUserTime=m.toLocalizedDate(t[0])+" "+t[1].slice(0,5)}else Q.formattedPunchInUserTime=void 0}function O(e){if(Q.idToPunchOut){var t=e.punchInUtcTime.split(" "),a=new Date(t[0]+"T"+t[1]).getTime()/1e3,i=new Date(M(Q.model.date)+"T00:00").getTime()/1e3,o=3600*Q.model.timezone,n=i-o;if(a<n){Q.isForcePunchInPossible=!0,Q.forcePunchInDate=M(Q.model.date);var l;if(Q.serverUtcDate&&Q.serverUtcTime){var s=new Date(Q.serverUtcDate+"T"+Q.serverUtcTime+"Z");l=M(s)}else l=M(new Date);Q.forcePunchInDate===l?Q.forcePunchInDescription=r.getLocalizedCustom("Punch in for Today"):Q.forcePunchInDescription=r.getLocalizedCustomWithVariables("Punch in for {{date}}",{date:m.toLocalizedDate(Q.forcePunchInDate)})}else Q.isForcePunchInPossible=!1,Q.forcePunchInDate=void 0,Q.forcePunchInDescription=void 0}else Q.isForcePunchInPossible=!1,Q.forcePunchInDate=void 0,Q.forcePunchInDescription=void 0}function R(t,a){return l.validatePunchOutTime(t,a,Q.model,Q.empNumber,Q.idToPunchOut,Q.lastPunchRecord).then(function(t){return Q.isPageLoaded?("time"!==a&&e.$broadcast("schemaForm.error.time","punchOutTime",t),t):(e.$broadcast("schemaForm.error.time","punchOutTime",!0),!0)},function(t){return e.$broadcast("schemaForm.error.time","punchOutTime",!0),!0})}function z(t,a){return e.$broadcast("schemaForm.error.date","frozenDate",!0),l.checkWithinFrozenDuration(Q.model,Q.empNumber,Q.idToPunchOut,Q.lastPunchRecord,Q.isPageLoaded,t,a).then(function(t){return e.$broadcast("schemaForm.error.date","frozenDate",t),t},function(t){return e.$broadcast("schemaForm.error.date","frozenDate",!0),!0})}function j(t,a){return l.validateOverlappingRecords(t,a,Q.model,Q.empNumber,Q.idToPunchOut,Q.lastPunchRecord).then(function(t){if(Q.isPageLoaded){var i=!0;return t.data||(i=!1),"time"!==a&&e.$broadcast("schemaForm.error.time","overlappingRecords",i),i}return e.$broadcast("schemaForm.error.time","overlappingRecords",!0),!0},function(t){return e.$broadcast("schemaForm.error.time","overlappingRecords",!0),!0})}function V(){if(Q.isForcePunchInPossible&&Q.forcePunchInDate){var e={date:M(Q.forcePunchInDate),forcedPunchIn:"true"};t.go("attendance.my_punch_in_out.forcedPunchIn",e,{reload:!0})}}function G(){"true"===Q.forcedPunchIn&&(Q.lastPunchRecord={},Q.total=0,Q.allowedActions.PunchIn=!0,Q.allowedActions.PunchOut=!1)}function B(){return l.fetchAttendanceConfiguration()}function q(e){var a=M(e);if(!Q.idToPunchOut&&a!==Q.date){var o={include:"employee",filter:{empNumbers:[Q.empNumber],toDate:a,onlyLastPunchRecord:"true",includeSelf:"true"}};i.show(),l.fetchAttendanceEmployeeRecords(o).then(function(e){e.data.meta.allowedActions.PunchOut&&t.go("attendance.my_punch_in_out.date",{date:a,transitionToast:null},{reload:!0})},function(e){})["finally"](function(){i.hide()})}}function H(){Q.model.time="",U(!1),e.$broadcast("schemaForm.error.time","timeFormat",!0),e.$broadcast("schemaForm.error.time","punchOutTime",!0),e.$broadcast("schemaForm.error.time","overlappingRecords",!0)}function U(t){return s.requiredForDirty.validator(Q.model.time,t)?(e.$broadcast("schemaForm.error.time","requiredForDirty",!0),!0):(Q.model.time="",e.$broadcast("schemaForm.error.time","requiredForDirty",!1),!1)}function W(){b.remove(),Q.isAllowedClientIp||r.warningToast("You are not allowed to Punch In/Out from your IP address")}function Y(e,t,a){Q.readOnlyMode&&(b.remove(),e?t?a||r.errorToast(C.DATE_ON_FROZEN_ATTENDANCE_SHEET_ERROR):r.errorToast("Overlapping Records Found"):r.errorToast("Punch out Time Should Be Later than Punch in Time")),Q.submitInProgress=!1}function J(){g.transitionToast&&"attendance.my_punch_in_out.date"===t.current.name&&("Successfully Saved"===g.transitionToast?r.successToast("Successfully Saved"):"Not Allowed To Punch In"===g.transitionToast?r.warningToast("Not Allowed To Punch In"):"Not Allowed To Punch Out"===g.transitionToast&&r.warningToast("Not Allowed To Punch Out"))}function K(){Q.readOnlyMode&&x().then(function(t){if(t)Q.time=t.time,Q.date=M(t.date);else if(Q.updateCurrentTimeFlag){var a=moment(new Date(Q.date+"T"+Q.time)).add(1,"m").toDate();Q.time=("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)}Q.formattedPunchInOutTime=Q.time,Q.formattedPunchInOutDate=m.toLocalizedDate(Q.date),Q.model.time=Q.time,Q.model.date=Q.date,Q.updateCurrentTimeFlag=!0;var i=y(K,6e4);e.$on("$destroy",function(){y.cancel(i)})})}function Z(){(Q.isGeoLocationMandatory||Q.isSelfieMandatory)&&r.warningToast("Punch In/Out Is Disabled for Web, Please Use the Mobile Application.")}var Q=this;o.setTitle("Punch In/Out"),Q.onSubmit=k,Q.forcePunchIn=V,Q.empNumber=v.emp_number,Q.date=g.date,Q.time=T(),Q.forcedPunchIn=g.forcedPunchIn,Q.permissions={},Q.lastPunchRecord={},Q.total=0,Q.allowedActions={Delete:!1,Edit:!1,PunchIn:!1,PunchOut:!1},Q.isAllowedClientIp=!0,Q.idToPunchOut=void 0,Q.formattedPunchInUserTime=void 0,Q.submittedValues={},Q.isForcePunchInPossible=!1,Q.forcePunchInDate=void 0,Q.forcePunchInDescription=void 0,Q.readOnlyMode=!1,Q.serverUtcDate=void 0,Q.serverUtcTime=void 0,Q.updateCurrentTimeFlag=!1,Q.isPageLoaded=!1,Q.submitInProgress=!1,Q.isGeoLocationMandatory=!1,Q.isSelfieMandatory=!1,i.show();var X={attendanceConfiguration:B()};a.all(X).then(function(e){Q.readOnlyMode=e.attendanceConfiguration.data.data.employeeCanChangeCurrentPunchTime===!1,Q.serverUtcDate=e.attendanceConfiguration.data.meta.serverUtcDate,Q.serverUtcTime=e.attendanceConfiguration.data.meta.serverUtcTime,Q.isGeoLocationMandatory=e.attendanceConfiguration.data.data.isGeoLocationMandatory,Q.isSelfieMandatory=e.attendanceConfiguration.data.data.isSelfieMandatory},function(e){Q.readOnlyMode=!1,Q.serverUtcDate=void 0,Q.serverUtcTime=void 0})["finally"](function(){if(g.date)Q.date=g.date;else if(Q.serverUtcDate&&Q.serverUtcTime){var e=new Date(Q.serverUtcDate+"T"+Q.serverUtcTime+"Z");Q.date=M(e)}else Q.date=M(new Date);if(Q.serverUtcDate&&Q.serverUtcTime){var t=new Date(Q.serverUtcDate+"T"+Q.serverUtcTime+"Z");Q.time=("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)}else Q.time=T();Q.formattedPunchInOutDate=m.toLocalizedDate(Q.date),Q.formattedPunchInOutTime=Q.time,y(function(){_()})})}angular.module("app.attendance").controller("AttendanceMyPunchInOutController",e),e.$inject=["$scope","$state","$q","loader","titleService","datagroupPermissions","attendanceService","localizedMessages","formValidationHelper","webservice","employeeService","dateService","ModalService","listHelper","settingsService","$stateParams","formHelper","$rootScope","$timeout","toast","attendanceConstants","menuService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g){function h(){n.show();var e={permission:s.getPermission("pay_policies").then(function(e){return e.read?e:c.reject({statusText:"Forbidden"})})};c.all(e).then(function(e){te.permissions=e.permission,te.hasEditPermissions=te.payPolicyId?te.permissions.update:te.permissions.create,y(),B(),u.$broadcast("markMenuItemAsCurrent",{stateName:"attendance.pay_policies"}),v(),n.hide()},function(){n.hide(),t.go("403")})}function v(){r(function(){f.setForcedTitle(["Attendance","Pay Policies"]),u.$broadcast("SingleMenuItemTopRibbonControllerMenuChanged",{menuItem:ae}),u.$broadcast("addTopMenuBackButton",{uiSref:"attendance.pay_policies",tooltip:"Pay Policies"})})}function y(){var t=[];t.push(m.fetchPayPeriods()),t.push(m.fetchPayPolicies({filter:{includeDeleted:!0}})),te.payPolicyId&&t.push(m.fetchPayPolicyById(te.payPolicyId)),c.all(t).then(function(t){te.payPolicyId&&(te.payPolicy=t[2].data,te.payPolicyMeta=t[2].meta,te.employeeCountString=i.getLocalizedCustomWithVariables("({{number}}) Employee"+(1==te.payPolicyMeta.employeeCount?"":"s")+" in this Pay Policy",{number:te.payPolicyMeta.employeeCount}),te.canEditPayCodeConfigurations=!te.payPolicyMeta.hasAttendanceSheets,te.isEditablePayPolicy=te.payPolicyMeta.isEditable,te.hasEditPermissions=te.hasEditPermissions&&te.isEditablePayPolicy),b(),te.existingPayPolicies=t[1].data,te.payPeriodsEnumAndTitleMap=l.getEnumAndTitleMapForSelect(t[0]),j(),G(),z(),C(),te.dataLoaded=!0,e.$applyAsync(function(){te.canEditPayCodeConfigurations&&Z("",{})})})}function b(){var e=te.payPolicy?te.payPolicy.rules.roundingOffRules:{},t=!!te.payPolicy&&te.payPolicy.rules.payCodeRules.filter(function(e){return"weekend"==e.periodicity||"holiday"==e.periodicity}).length>0;te.model={name:te.payPolicy?te.payPolicy.name:"",payPeriod:te.payPolicy?te.payPolicy.pay_period_id:"",startDate:te.payPolicy?new Date(moment.utc(te.payPolicy.start_date).format("l LT")):null,firstPeriodEndDate:te.payPolicy&&te.payPolicy.first_period_end_date?new Date(moment.utc(te.payPolicy.first_period_end_date).format("l LT")):null,hasNonWorkingDayRules:t,consecutiveDays:te.payPolicy&&te.payPolicy.consecutive_days?te.payPolicy.consecutive_days:"",roundingOffEnabled:Object.keys(e).length>0,roundingOffType:e.base?e.base:"time",shiftWindow:e.window?e.window:"5",timeWindow:e.window?e.window:"5"}}function C(){te.payCodeRuleIds={},te.payCodeRuleCount=-1;var e=te.payPolicy?te.payPolicy.rules.payCodeRules:te.defaultPayCodeRules;for(var t in e)e.hasOwnProperty(t)&&(I(e[t].conjunction,e[t].periodicity),te.model["payCodeRule_"+parseInt(t,10)+"_periodicity"]=e[t].periodicity,te.model["payCodeRule_"+parseInt(t,10)+"_conjunction"]=e[t].conjunction,te.model["payCodeRule_"+parseInt(t,10)+"_pay_code"]=e[t].pay_code,te.model["payCodeRule_"+parseInt(t,10)+"_pay_code_name"]=e[t].pay_code_name,te.model["payCodeRule_"+parseInt(t,10)+"_threshold_hours"]=e[t].threshold_hours,te.model["payCodeRule_"+parseInt(t,10)+"_multiplier"]=e[t].multiplier)}function w(e,t){return{type:"subheading",htmlClass:t,title:e,hideSeparator:!0,payCodeRuleIndex:te.payCodeRuleCount}}function S(e){return{type:"icon-button",iconName:"delete",style:"btn btn-list",title:"Remove",htmlClass:"col-9p delete-rule-div",condition:"vm.hasEditPermissions && vm.canEditPayCodeConfigurations",payCodeRuleIndex:te.payCodeRuleCount,periodicity:e,onClick:P}}function D(e,t,a,o,n){var l={};return l="consecutive_days"==o&&"until"==n?{positiveIntegerValidation:p.positiveInteger.validator,numericMinMaxValidation:function(e){return p.numericMinMaxValidation.validator(e,1,a)}}:{numericPositiveMaxTwoDecimalPlacesValidation:p.numericPositiveMaxTwoDecimalPlaces.validator,maxValidation:function(e){return p.numericMaxValidation.validator(e,a)},minValidation:function(e){return p.numericMinValidation.validator(e,0)},isDecimalCanShowInExactMinute:function(e){if(!isNaN(e)){var t=Math.trunc(e),a=Number((e-t).toFixed(2));return!!Number.isInteger(60*a)}return!1}},{key:e,type:"text",htmlClass:t,hideLabel:!0,readonly:!te.hasEditPermissions||!te.canEditPayCodeConfigurations,payCodeRuleIndex:te.payCodeRuleCount,ngModelOptions:{updateOn:"blur",allowInvalid:!0},onChange:T,validationMessage:{302:i.getLocalizedCustom("Required"),positiveIntegerValidation:p.positiveInteger.message,numericMinMaxValidation:p.numericMinMaxValidation.message(1,a),numericPositiveMaxTwoDecimalPlacesValidation:i.getLocalizedCustom("Should be a positive multiple of 0.05 with at most 2 decimal places. (E.g.: 0.05, 0.1, etc.)"),maxValidation:p.numericMaxValidation.message(a),minValidation:p.numericMinValidation.message(0),shouldBeGreaterThanUpto:i.getLocalizedCustom("Should not be less than up to value"),duplicateAfter:i.getLocalizedCustom("Duplicate after value"),isDecimalCanShowInExactMinute:i.getLocalizedCustom("Should be a positive multiple of 0.05 with at most 2 decimal places. (E.g.: 0.05, 0.1, etc.)")},$validators:l}}function T(){var e,t,a,i={},o={daily:0,weekend:0,holiday:0},n={daily:{},weekend:{},holiday:{}};for(var l in te.payCodeRuleIds)te.payCodeRuleIds.hasOwnProperty(l)&&(t=te.model["payCodeRule_"+l+"_periodicity"],a=te.model["payCodeRule_"+l+"_conjunction"],e=te.model["payCodeRule_"+l+"_threshold_hours"],i[l]=-1,_.forEach(o,function(r,s){o[s]=t==s&&"until"==a?e:r,t==s&&"after"==a&&(parseFloat(e)<parseFloat(o[s])&&(i[l]="shouldBeGreaterThanUpto"),void 0===n[s][e]?n[s][e]=!0:i[l]===-1&&(i[l]="duplicateAfter"))}));for(var r in i)i.hasOwnProperty(r)&&(x(r,"duplicateAfter",!0),x(r,"shouldBeGreaterThanUpto",!0),i[r]!==-1&&x(r,i[r],!1))}function x(t,a,i){e.$broadcast("schemaForm.error.payCodeRule_"+t+"_threshold_hours",a,i)}function F(){return{key:"payCodeRule_"+te.payCodeRuleCount+"_multiplier",type:"text",htmlClass:"col-10p",hideLabel:!0,readonly:!te.hasEditPermissions,validationMessage:{302:i.getLocalizedCustom("Required"),numberValidation:p.numericPositiveMaxOneDecimalPlaces.message,maxValidation:p.numericMaxValidation.message(10),minValidation:p.numericMinValidation.message(0)},$validators:{numberValidation:p.numericPositiveMaxOneDecimalPlaces.validator,maxValidation:function(e){return p.numericMaxValidation.validator(e,10)},minValidation:function(e){return p.numericMinValidation.validator(e,0)}}}}function k(e,t,a){return{key:e,type:"text",htmlClass:t,hideLabel:!0,ngModelOptions:{updateOn:"blur"},onChange:Z,readonly:!te.hasEditPermissions||!te.canEditPayCodeConfigurations,validationMessage:{302:i.getLocalizedCustom("Required"),201:p.textLengthExceedValidation.message(a)}}}function E(e,t){var a={title:e,type:"string"};return t&&(a.maxLength=t),a}function I(t,a){te.payCodeRuleCount++,te.payCodeRuleIds[te.payCodeRuleCount]=!0;var o=["pay_code","pay_code_name","multiplier"],n=O(a),l=N(a);n.properties["payCodeRule_"+te.payCodeRuleCount+"_multiplier"]=E("Multiplier"),n.properties["payCodeRule_"+te.payCodeRuleCount+"_pay_code"]=E("Pay Code",6),n.properties["payCodeRule_"+te.payCodeRuleCount+"_pay_code_name"]=E("Pay Code Name",30),n.properties["payCodeRule_"+te.payCodeRuleCount+"_threshold_hours"]=E("Threshold Hours");var r="payCodeRule_"+te.payCodeRuleCount+"_threshold_hours",s="weekly"==a?168:24,c="weekly"==a?"Hours per Week":"Hours per Day";"consecutive_days"==a&&"until"==t?(n.properties.consecutiveDays=E("Consecutive Days","string"),n.required.push("consecutiveDays"),r="consecutiveDays",s=6,c="Consecutive Days"):(n.properties["payCodeRule_"+te.payCodeRuleCount+"_threshold_hours"]=E("Threshold Hours","string"),o.push("threshold_hours"));var d={type:"row",items:[w(i.getLocalizedCustom("consecutive_days"!=a&&"until"==t?"Up to":"After"),"col-6p center-align-div"),D(r,"col-10p",s,a,t),w(i.getLocalizedCustom(c),"col-15p info-button"),k("payCodeRule_"+te.payCodeRuleCount+"_pay_code","col-10p payCode",6),k("payCodeRule_"+te.payCodeRuleCount+"_pay_code_name","col-30p payCodeName",30),F(),w("X Base Pay","col-10p basePayLabel center-align-div")]};"after"==t&&d.items.push(S(a)),l.push(d),o.forEach(function(e){n.required.push("payCodeRule_"+te.payCodeRuleCount+"_"+e)}),te.model["payCodeRule_"+te.payCodeRuleCount+"_conjunction"]=t,te.model["payCodeRule_"+te.payCodeRuleCount+"_periodicity"]=a,te.groupedRuleIds[a][te.payCodeRuleCount]=!0,"weekly"!=a&&"consecutive_days"!=a||j(),e.$broadcast("schemaFormRedraw")}function A(e,t){for(var a=!1,i=0;i<e.length;i++)if(t==e[i].items[0].payCodeRuleIndex){a=i+1;break}return a}function M(e,t){var a,i=["pay_code","pay_code_name","threshold_hours","multiplier"];i.forEach(function(i){a="payCodeRule_"+t+"_"+i,e.properties.hasOwnProperty(a)&&delete e.properties[a]})}function L(e,t){for(var a in te.groupedRuleIds[t])te.groupedRuleIds[t].hasOwnProperty(a)&&P(e,{payCodeRuleIndex:a,periodicity:t});te.groupedRuleIds[t]={},"consecutive_days"===t&&(te.model.consecutiveDays="",j())}function P(t,a){var i=a.payCodeRuleIndex,o=N(a.periodicity),n=O(a.periodicity),l=A(o,i);l&&(l--,o.splice(l,1),M(n,i),delete te.payCodeRuleIds[i],delete te.groupedRuleIds[a.periodicity][i],"weekly"==a.periodicity&&j(),e.$broadcast("schemaFormRedraw"))}function N(e){switch(e){case"daily":return te.dailyRulesForm;case"weekly":return te.weeklyRulesForm;case"weekend":return te.weekendRulesForm;case"holiday":return te.holidayRulesForm;default:return te.consecutiveDayRulesForm}}function O(e){switch(e){case"daily":return te.dailyRulesSchema;case"weekly":return te.weeklyRulesSchema;case"weekend":return te.weekendRulesSchema;case"holiday":return te.holidaydRulesSchema;default:return te.consecutiveDayRulesSchema}}function R(){return{type:"object",title:"Rules",properties:{},required:[]}}function z(){te.dailyRulesSchema=R(),te.weekendRulesSchema=R(),te.holidaydRulesSchema=R(),te.weeklyRulesSchema=R(),te.consecutiveDayRulesSchema=R(),te.dailyRulesForm=[],te.weekendRulesForm=[],te.holidayRulesForm=[],te.weeklyRulesForm=[],te.consecutiveDayRulesForm=[]}function j(){te.schema={type:"object",title:"Pay Policy",properties:{name:{title:"Name",type:"string",maxLength:100},payPeriod:{title:"Pay Period",type:"string","enum":te.payPeriodsEnumAndTitleMap["enum"]},startDate:{title:"First Pay Period Start Date",type:["null","object"]},firstPeriodEndDate:{title:"First Pay Period End Date",type:["null","object"]},hasNonWorkingDayRules:{title:"Enable Working Day, Non-Working Day and Holiday Rules",type:"boolean"}},required:["name","payPeriod","startDate","firstPeriodEndDate"]};var t=U();te.form=[{type:"row",items:[{type:"text",htmlClass:"col-3",key:"name",readonly:!te.hasEditPermissions,placeholder:i.getLocalizedCustom("Pay Policy Name"),validationMessage:{uniqueName:p.unique.message,302:i.getLocalizedCustom("Required"),201:p.textLengthExceedValidation.message(te.schema.properties.name.maxLength)},$validators:{uniqueName:function(e){return p.unique.validator(e,te.payPolicyId,te.existingPayPolicies,"id","payPolicyName",!1)}}},{type:"select",htmlClass:"col-3",key:"payPeriod",titleMap:te.payPeriodsEnumAndTitleMap.titleMap,readonly:te.payPolicy},{type:"date",htmlClass:"col-3",key:"startDate",placeholder:i.getLocalizedCustom("First Pay Period Start Date"),defaultDate:te.model.startDate,resetDefaultDate:te.resetDefaultDate,
readonly:te.payPolicy,onChange:function(t){t&&te.model.firstPeriodEndDate&&(t.getTime()<te.model.firstPeriodEndDate.getTime()?e.$broadcast("schemaForm.error.firstPeriodEndDate","minDate",!0):e.$broadcast("schemaForm.error.firstPeriodEndDate","minDate",!1))}},{type:"date",htmlClass:"col-3",key:"firstPeriodEndDate",placeholder:i.getLocalizedCustom("First Pay Period End Date"),defaultDate:te.model.firstPeriodEndDate,resetDefaultDate:te.resetDefaultDate,ngModelOptions:{allowInvalid:!0},condition:"vm.model.payPeriod == "+g.PAY_PERIOD_SEMI_MONTHLY,readonly:te.payPolicy,validationMessage:{minDate:i.getLocalizedCustom("End date should be after start date"),maxDate:function(e){var t=d.toLocalizedDate(d.convertDateToString(moment(te.model.startDate).add(1,"months").subtract(1,"days").toDate()));return i.getLocalizedCustomWithVariables("End date should be before {{endDate}}",{endDate:t})}},$validators:{minDate:function(e){return p.minDate.validator(e,te.model.startDate)},maxDate:function(e){var t=moment(te.model.startDate).add(1,"months").subtract(2,"days");return p.maxDate.validator(e,t)}}}]},{type:"row",items:[{type:"checkbox",key:"hasNonWorkingDayRules",htmlClass:"col-6",readonly:!te.canEditPayCodeConfigurations,onChange:V},{type:"dropdown-button",title:"Add Rule",htmlClass:"addRuleButton",dropDownOptions:t,condition:"vm.hasEditPermissions && vm.canEditPayCodeConfigurations",onPerformDropdownOptionAction:W,style:"btn btn-secondary"}]}]}function V(e){e?(I("until","weekend"),I("until","holiday")):(L(null,"weekend"),L(null,"holiday")),j()}function G(){var e=m.getEnumAndTitleMapForPayPolicyRoundingOffOptions();te.roundOffRuleSchema={type:"object",title:"Pay Policy Round Off Rules",properties:{roundingOffEnabled:{title:"Round-Off Attendance",type:"boolean"},roundingOffType:{title:"Round-Off Type",type:"string","enum":[g.PAY_POLICY_ROUND_OFF_RULE_SHIFT_BASED,g.PAY_POLICY_ROUND_OFF_RULE_TIME_BASED]},shiftWindow:{title:"Rounding Window",type:"string","enum":e["enum"]},timeWindow:{title:"Round-Off to Nearest",type:"string","enum":e["enum"]}},required:[]},te.roundOffRuleForm=[{type:"row",items:[{type:"switch",htmlClass:"col-3",readonly:!te.hasEditPermissions,onChange:G,key:"roundingOffEnabled"}]},{type:"row",items:[{type:"radiobuttons",hideLabel:!0,htmlClass:"col-12 radiobuttons-group",key:"roundingOffType",readonly:!te.hasEditPermissions,condition:"vm.model.roundingOffEnabled",onChange:G,titleMap:[{value:g.PAY_POLICY_ROUND_OFF_RULE_TIME_BASED,name:"Round Off to Nearest","class":"col-6 radio-group time-based-option"},{value:g.PAY_POLICY_ROUND_OFF_RULE_SHIFT_BASED,name:"Round Off to Shift Times","class":"col-6 radio-group shift-based-option"}],validationMessage:{302:i.getLocalizedCustom("Required")},items:[{type:"select",hideLabel:!0,key:"timeWindow",htmlClass:"col-6",titleMap:e.titleMap,emptyOption:!1,readonly:!te.hasEditPermissions||te.model.roundingOffType!==g.PAY_POLICY_ROUND_OFF_RULE_TIME_BASED,parent:g.PAY_POLICY_ROUND_OFF_RULE_TIME_BASED,validationMessage:{302:i.getLocalizedCustom("Required")}},{type:"select",key:"shiftWindow",htmlClass:"col-6",titleMap:e.titleMap,emptyOption:!1,readonly:!te.hasEditPermissions||te.model.roundingOffType!==g.PAY_POLICY_ROUND_OFF_RULE_SHIFT_BASED,parent:g.PAY_POLICY_ROUND_OFF_RULE_SHIFT_BASED,validationMessage:{302:i.getLocalizedCustom("Required")}}]}]}]}function B(){var e=[{key:g.PAY_POLICY_GENERAL_RULES,title:"General Rules","class":"card-title-text",isCurrent:!0}];te.payPolicyId&&e.push({key:g.PAY_POLICY_ROUND_OFF_RULES,title:"Round-Off Rules","class":"card-title-text",isCurrent:!1}),te.tabs=e}function q(){return Object.keys(te.groupedRuleIds.consecutive_days).length>0}function H(){return Object.keys(te.groupedRuleIds.weekly).length>0}function U(){var e=[{name:te.model.hasNonWorkingDayRules?"Working Day Rule":"Daily Rule",value:"daily"}];return te.model.hasNonWorkingDayRules&&(e.push({name:"Non-working Day Rule",value:"weekend"}),e.push({name:"Holiday Rule",value:"holiday"})),H()||e.push({name:"Weekly Rule",value:"weekly"}),q()||e.push({name:"Consecutive Days Rules",value:"consecutive_days"}),e}function W(e){"consecutive_days"==e&&I("until",e),I("after",e)}function Y(){t.go("attendance.pay_policies")}function J(t){e.$broadcast("schemaFormValidate"),T(),r(function(){if(!te.submitInProgress&&t.$valid){te.submitInProgress=!0;var e=K();m.savePayPolicy(te.payPolicyId,e).then(function(e){e.data.success?(te.submitInProgress=!1,o.success(i.getLocalizedCustom(e.data.messages.success)),ee(e.data.data.id)):(te.submitInProgress=!1,i.errorToast(e.data.messages.error))},function(e){te.submitInProgress=!1,i.errorToast("Failed to Save")})}})}function K(){var e={};return te.currentTabKey===g.PAY_POLICY_GENERAL_RULES?(e.name=te.model.name,te.payPolicyId||(e.payPeriod=te.model.payPeriod,e.startDate=d.toStandardDate(te.model.startDate),te.model.payPeriod==g.PAY_PERIOD_SEMI_MONTHLY&&(e.firstPeriodEndDate=d.toStandardDate(te.model.firstPeriodEndDate))),te.model.consecutiveDays&&(e.consecutiveDays=te.model.consecutiveDays),e.payCodeRules=X()):(e.roundingOffRules={enabled:te.model.roundingOffEnabled},te.model.roundingOffEnabled&&(e.roundingOffRules.base=te.model.roundingOffType,e.roundingOffRules.window=te.model.roundingOffType===g.PAY_POLICY_ROUND_OFF_RULE_SHIFT_BASED?te.model.shiftWindow:te.model.timeWindow)),e}function Z(e,t){te.payCodeNameMap={},te.payCodeMap={};var a,i,o;for(var n in te.payCodeRuleIds)te.payCodeRuleIds.hasOwnProperty(n)&&(a=te.model["payCodeRule_"+n+"_pay_code"],i=a?a.toLowerCase():void 0,o=te.model["payCodeRule_"+n+"_pay_code_name"],void 0!==te.payCodeMap[i]?te.model["payCodeRule_"+n+"_pay_code"]=te.payCodeMap[i]:void 0!==i&&(te.payCodeMap[i]=a),void 0!==te.payCodeNameMap[i]?(te.model["payCodeRule_"+n+"_pay_code_name"]=te.payCodeNameMap[i],$("#payCodeRule_"+n+"_pay_code_name").prop("disabled",!0)):(te.payCodeNameMap[i]=o,$("#payCodeRule_"+n+"_pay_code_name").prop("disabled",!1)))}function Q(e){te.currentTabKey=e.key}function X(){var e,t,a=[],i=q()?Object.keys(te.groupedRuleIds.consecutive_days)[0]:-1;for(var o in te.payCodeRuleIds)te.payCodeRuleIds.hasOwnProperty(o)&&(e=te.model["payCodeRule_"+o+"_threshold_hours"],i==o&&(t=parseInt(o,10)+1,e=2==Object.keys(te.groupedRuleIds.consecutive_days).length?te.model["payCodeRule_"+t+"_threshold_hours"]:24),a.push({periodicity:te.model["payCodeRule_"+o+"_periodicity"],conjunction:te.model["payCodeRule_"+o+"_conjunction"],threshold_hours:e,pay_code:te.model["payCodeRule_"+o+"_pay_code"],pay_code_name:te.model["payCodeRule_"+o+"_pay_code_name"],multiplier:te.model["payCodeRule_"+o+"_multiplier"]}));return a}function ee(e){t.go("attendance.pay_policy",{id:e})}var te=this;te.payPolicyId=a.id;var ae=te.payPolicyId?"Edit Pay Policy":"Add Pay Policy";te.currentTabKey=g.PAY_POLICY_GENERAL_RULES,te.save=J,te.deleteAllRulesOfType=L,te.hasWeeklyRules=H,te.hasConsecutiveDayRules=q,te.existingPayPolicies={},te.payPolicy=null,te.submitInProgress=!1,te.cancelAddPayPolicy=Y,te.dataLoaded=!1,te.isEditablePayPolicy=!0,te.hasEditPermissions=!1,te.canEditPayCodeConfigurations=!0,te.groupedRuleIds={daily:{},weekly:{},consecutive_days:{},weekend:{},holiday:{}},te.onChangePayCode=Z,te.tabClicked=Q,te.resetDefaultDate={reset:!1},te.defaultPayCodeRules=[{threshold_hours:"",multiplier:"",pay_code:"",pay_code_name:"",conjunction:"until",periodicity:"daily"}],h(),te.goToEmployeeSelection=function(){t.go("attendance.pay_policy_employees",{id:te.payPolicyId})}}angular.module("app.attendance").controller("AttendancePayPolicyController",e),e.$inject=["$scope","$state","$stateParams","localizedMessages","toast","loader","formHelper","$timeout","datagroupPermissions","$q","dateService","attendanceService","$rootScope","formValidationHelper","titleService","attendanceConstants"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){n.show();var e={permission:r.getPermission("pay_policies").then(function(e){return e.read?e:s.reject({statusText:"Forbidden"})}),selectionCriteria:d.fetchPayPolicyEmployeeSelectionCriteria(a.id),locations:g()};s.all(e).then(function(e){C.permissions=e.permission,C.hasEditPermissions=C.permissions.update,C.payPolicy=e.selectionCriteria.meta,C.payPolicy.isEditable||(n.hide(),t.go("403")),C.selectionCriteria=e.selectionCriteria.data,C.dataLoaded=!0,C.locationFormData=l.getLocationsListForHierarchicalMultiSelect(e.locations.data.data),m.$broadcast("markMenuItemAsCurrent",{stateName:"attendance.pay_policies"}),n.hide()},function(){n.hide(),t.go("403")})}function f(){t.go("attendance.pay_policy",{id:a.id})}function g(){var e={required_permissions:{data_group:{name:"pay_policies",permissions:{canRead:1}}}};return u.call("employees/locations","GET",[],e)}function h(t,l){if(e.$broadcast("schemaFormValidate"),!C.submitInProgress){C.submitInProgress=!0;var r=v(l);n.show(),d.savePayPolicyEmployeeSelectionCriteria(a.id,r).then(function(e){n.hide(),e.data.success?(C.submitInProgress=!1,o.success(i.getLocalizedCustom(e.data.messages.success))):(C.submitInProgress=!1,i.errorToast(e.data.messages.error))},function(e){n.hide(),C.submitInProgress=!1,i.errorToast("Failed to Save")})}}function v(e){var t={};if(t.sub_unit_list=[],t.job_title_list=[],t.location_list=[],t.employee_status_list=[],void 0===e.location||0==e.location.length)t.location_list.push(-1);else for(var a in e.location)isNaN(e.location[a])||t.location_list.push(e.location[a]);return void 0===e.subunit||0==e.subunit.length?t.sub_unit_list.push(-1):t.sub_unit_list=e.subunit,0==Object.keys(e.jobTitle).length?t.job_title_list.push(-1):t.job_title_list=Object.keys(e.jobTitle),0==Object.keys(e.employmentStatus).length?t.employee_status_list.push(-1):t.employee_status_list=Object.keys(e.employmentStatus),t}function y(e){return d.fetchPayPolicyIncludibleEmployees(a.id,e).then(function(t){if(t.meta.errorMessage&&b(e.filter)){var a=i.getLocalizedCustomWithVariables(t.meta.errorMessage+": {{payPolicyNames}}",{payPolicyNames:t.meta.extraData});i.showCustomizedToast(a,"warning",{timeOut:5e3})}return{data:t.data,total:t.meta.total,searchEnabled:!t.meta.error}})}function b(e){return e.employee_status_list.length>0||e.job_title_list.length>0||e.sub_unit_list_exact_match&&e.sub_unit_list_exact_match.length>0||""!==e.location}var C=this;C.save=h,C.onCancel=f,C.payPolicy=null,C.submitInProgress=!1,C.dataLoaded=!1,C.employeeGetter=y,C.resetDefaultDate={reset:!1},p(),C.getEmployeeSelectButtonLabel=function(e){return i.getLocalizedCustom("Save")}}angular.module("app.attendance").controller("AttendancePayPolicyEmployeesController",e),e.$inject=["$scope","$state","$stateParams","localizedMessages","toast","loader","formHelper","datagroupPermissions","$q","dateService","attendanceService","$rootScope","webservice"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v){function y(){var e={offset:(L.page-1)*L.pageSize,limit:L.pageSize,orderField:L.sortingListFields[L.orderField],orderBy:L.orderBy};"undefined"!=typeof L.filters&&(e.filter=L.filters),h.fetchPayPolicies(e).then(function(e){L.unDeletableIds=e.meta.unselectableIds,L.unEditableIds=e.meta.unselectableIds,D(),L.payPolicies=e.data,C(),L.total=e.meta.total,L.totalDataCount=L.total,L.dataInCurruntPage=e.data.length,L.meta=e.meta,L.lastPage=Math.ceil(L.total/L.pageSize),0===L.payPolicies.length&&c.infoToast("No Records Found")},function(){L.payPolicies=[],L.totalDataCount=0,L.dataInCurruntPage=0,D(),c.infoToast("No Records Found")})}function b(){m.show();var e={permission:p.getPermission("pay_policies").then(function(e){return e.read?e:n.reject({statusText:"Forbidden"})}),pageSize:g.getSetting("page_size")};n.all(e).then(function(e){L.permissions=e.permission,L.pageSize=e.pageSize,y(),m.hide()},function(){m.hide(),o.go("403")})}function C(){var e=["subUnit","jobTitle","location","empStatus"],t="";_.forEach(L.payPolicies,function(a){_.forEach(e,function(e){t=e+"ListViewData",a[t]=w(a,e)})})}function w(e,t){var a="",i="",o={subUnit:"Sub Unit",jobTitle:"Job Title",location:"Location",empStatus:"Employment Status"},n=t+".allSelected",l=t+"Names",r="empStatus"==t?"es":"s";if(e[n])i=c.getLocalizedCustom("All "+o[t]+r);else{var s=e[l].splice(0,P);if(a=s.join(", "),e[l].length>0){var d=e[l].length>1?c.getLocalizedCustomWithVariables("+{{itemCount}} "+o[t]+r,{itemCount:e[l].length}):c.getLocalizedCustom("+1 "+o[t]);i=" "+d}}return[{value:a,"class":"subunit-main-part"},{value:i,"class":"subunit-sub-part"}]}function S(){o.go("attendance.pay_policy")}function D(){L.panelInfo={payPolicyInfo:{}},x()}function T(e,t,a){L.orderField=e,L.orderBy=t,L.page=a,y()}function x(){var e=[{name:"name",lable:"Name",getter:"payPolicyName",sortable:!0,sortAction:"sortAction",clickAction:"editPayPolicy"},{name:"payPeriod",lable:"Pay Period",getter:"payPeriodName",sortable:!0,filters:[{name:"translate"}],sortAction:"sortAction",clickAction:"editPayPolicy"},{name:"startDate",lable:"Start Date",getter:"startDate",sortable:!0,sortAction:"sortAction",formatter:function(e){return e?(e=e.slice(0,10),v.toLocalizedDate(e)):e},clickAction:"editPayPolicy"},{name:"jobTitles",lable:"Job Titles",getter:"jobTitleListViewData",clickAction:"editPayPolicy",type:"text-array"},{name:"locations",lable:"Locations",getter:"locationListViewData",clickAction:"editPayPolicy",type:"text-array"},{name:"subUnits",lable:"Sub Units",getter:"subUnitListViewData",clickAction:"editPayPolicy",type:"text-array"},{name:"employmentStatuses",lable:"Employment Statuses",getter:"empStatusListViewData",clickAction:"editPayPolicy",type:"text-array"}],t=k();L.listDefinition={tableId:"payPolicyList_",name:"Pay Policies",listClass:"classic-table hover selectable",selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:[],extraTD:[],showColumnsAnyway:!0,permission:L.permissions,columnWidths:t,listActions:[],showSelectableAlways:!1,showLoader:!0,pagination:!0,listSpecificInitialSort:!0,clickableCondition:"id",unselectableIds:_.intersection(L.unDeletableIds,L.unEditableIds),listTopBar:{getMessageForNoOfItemsFound:function(e){return"undefined"!=typeof L.totalDataCount?c.getLocalizedCustomWithVariables("({{number}}) Pay "+(1==L.totalDataCount?"Policy":"Policies")+" Found",{number:L.totalDataCount}):""},getMessageForNoOfItemsSelected:function(e){return e?c.getLocalizedCustomWithVariables("({{number}}) Pay "+(e>1?"Policies":"Policy")+" Selected",{number:e}):""}}},L.permissions.create&&(L.listDefinition.listTopBar.mainActionButton={id:"add-pay-policy-button",icon:"add",label:"Add Pay Policy",onClick:function(){S()}}),L.permissions["delete"]&&(L.listDefinition.listTopBar.onBulkDelete=function(e){I(e)},L.listDefinition.listTopBar.isBulkDeletable=function(e){return 0==_.intersection(e,L.unDeletableIds).length})}function F(e){o.go("attendance.pay_policy",{id:e})}function k(){var e=[];return e=L.permissions["delete"]?["3%","15%","13%","13%","13%","13%","14%","16%"]:["15%","13%","13%","14%","14%","15%","16%"]}function E(e){if(e.length>0){var t={updateFinished:!1,updateCancelled:!1},a={progressModal:M(t),deletePayPolicies:h.deletePayPolicies({ids:e}).then(function(e){return t.updateFinished=!0,e})};n.all(a).then(function(e){y(),c.successToast("Successfully Deleted")},function(e){t.updateCancelled=!0,u.error(c.getLocalizedCustom(e.data.message))})}}function I(e){e.length>0&&s.showDeleteConfirmationModal(c.getLocalizedCustom("The selected pay policies will be permanently deleted. Are you sure you want to continue?")).then(function(t){t===!0&&E(e)})}function A(e){F(e.id)}function M(e){var t={closeDelay:0,determinate:!1,forceCompletionCallback:function(t){return 1==e.updateFinished},forceCancellationCallback:function(t){return 1==e.updateCancelled}};return s.showProgressModal("Deleting Pay Policies","deletePayPolicies",t)}var L=this,P=4;L.pageSize=50,L.page=1,L.total=0,L.totalDataCount=0,L.dataInCurruntPage=0,L.payPolicies="",L.sort="",L.sortingListFields={name:"name",payPeriod:"payPeriod",startDate:"startDate"},L.sortAction=T,L.deleteSelection=I,L.addPayPolicy=S,L.editPayPolicy=A,L.listDefinition={},L.orderField="name",L.orderBy="ASC",L.selected=[],L.oldFilter=!1,L.payPolicies||b()}angular.module("app.attendance").controller("AttendancePayPoliciesController",e),e.$inject=["$scope","listHelper","logger","$window","$state","$q","ModalService","webservice","modalHelperService","localizedMessages","$rootScope","loader","toast","datagroupPermissions","formHelper","settingsService","attendanceService","dateService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C){function w(){i.show();var e={checkDataGroupPermissions:M(),lastPunchRecord:P()};a.all(e).then(function(e){Y.lastPunchRecord=e.lastPunchRecord.data.data[0]?e.lastPunchRecord.data.data[0]:{};var a=e.lastPunchRecord.data.meta;Y.total=a.total,Y.allowedActions=a.allowedActions,0==Y.allowedActions.PunchIn&&0==Y.allowedActions.PunchOut&&t.go("403"),G(),_(),S()},function(e){Y.lastPunchRecord={},Y.total=0,Y.allowedActions={Delete:!1,Edit:!1,PunchIn:!1,PunchOut:!1}})["finally"](function(){Y.attendancePunchInOutHeading=Y.allowedActions.PunchOut?"Punch Out":"Punch In",Y.idToPunchOut=Y.allowedActions.PunchOut?Y.lastPunchRecord.id:void 0,N(Y.lastPunchRecord),O(Y.lastPunchRecord),i.hide(),g.redirectedFrom&&"employeeProfile"==g.redirectedFrom&&b.addBackToProfileButton(g.empNumber),v(function(){Y.isPageLoaded=!0})})}function _(){Y.timezones.forEach(function(e){e.title=e.prefix+" "+r.getLocalizedCustom(e.name)}),Y.formData={timezone:h.getEnumAndTitleMapForSelect(Y.timezones,{name:"title",value:"offset"})}}function S(){Y.schema={type:"object",properties:{date:{title:"Date",type:["null","object"],datePickerConfig:{selectMonths:!0,selectYears:10}},time:{title:"Time (HH:MM)*",type:"string"},timezone:{title:"Timezone",type:"string","enum":Y.formData.timezone["enum"]},note:{title:"Note",type:"string",maxLength:250}},required:["date"]},Y.form=[{type:"section",htmlClass:"row",items:[{type:"date",htmlClass:"col s12 m4 l4",key:"date",onChange:function(e){Y.isPageLoaded&&(z(e,"date"),H(),q(e),R(e,"date"),j(e,"date"))},validationMessage:{302:r.getLocalizedCustom("Required"),frozenDate:function(){return r.getLocalizedCustom(l.getFormattedErrorMessage(y.DATE_ON_FROZEN_ATTENDANCE_SHEET_ERROR,!0))}}},{type:"text",htmlClass:"col s12 m4 l4",key:"time",placeholder:"HH:MM",removePristine:!0,ngModelOptions:{allowInvalid:!0},onChange:function(e){Y.isPageLoaded&&(R(e),j(e))},$validators:{requiredForDirty:function(e){return s.requiredForDirty.validator(e,!1)},timeFormat:function(e){return s.timeFormat24HourMinuteValidation.validator(e)}},$asyncValidators:{"tv4-punchOutTime":function(e){var t=a.defer();return e&&Y.isPageLoaded?R(e,"time").then(function(e){e?t.resolve():t.reject()}):v(function(){t.resolve()}),t.promise},"tv4-overlappingRecords":function(e){var t=a.defer();return e&&Y.isPageLoaded?j(e,"time").then(function(e){e?t.resolve():t.reject()}):v(function(){t.resolve()}),t.promise}},validationMessage:{requiredForDirty:s.requiredForDirty.message,timeFormat:r.getLocalizedCustom("Should be a valid time in HH:MM format"),punchOutTime:r.getLocalizedCustom("Punch out time should be later than punch in time"),overlappingRecords:function(){return r.getLocalizedCustom("Overlapping records found")}}},{type:"select",htmlClass:"col s12 m4 l4",key:"timezone",emptyOption:!1,titleMap:Y.formData.timezone.titleMap,onChange:function(e){Y.isPageLoaded&&(R(e,"timezone"),j(e,"timezone"))}}]},{type:"section",htmlClass:"row",items:[{type:"textarea",htmlClass:"col s12 m12 l12",key:"note",validationMessage:{201:s.textLengthExceedValidation.message(Y.schema.properties.note.maxLength)}}]},{type:"section",htmlClass:"row requiredHelperText",items:[{type:"help",helpvalue:"<em>*</em> "+r.getLocalizedCustom("Required field")}]}],Y.model=D()}function D(){var e={date:new Date(Y.date+"T"+Y.time),time:Y.time,timezone:x()};return e}function T(){return l.getCurrentTime()}function x(){return l.getUserTimeZoneOffset()}function F(e){if(Y.isPageLoaded&&!Y.submitInProgress){Y.submitInProgress=!0;var t=U(!0),i=e.$valid!==!1&&0===Object.keys(e.$error).length,o={isPunchOutTimeValid:R(),isValidDate:z(),noOverlappingRecords:j()};a.all(o).then(function(e){e.isValidDate&&e.noOverlappingRecords&&i&&e.isPunchOutTimeValid&&t&&(Y.allowedActions.PunchIn||Y.allowedActions.PunchOut)?(L(),E()):Y.submitInProgress=!1})}}function k(e){var a=A(Y.submittedValues.date),i={empNumber:Y.empNumber,fromDate:g.fromDate?g.fromDate:a,toDate:g.toDate?g.toDate:a,date:a},o={message:"Successfully Saved",type:"success"};e||(o.type="warning",o.message=Y.idToPunchOut?"Not Allowed To Punch Out":"Not Allowed To Punch In"),g.sheetId&&(i={sheetId:g.sheetId,date:a}),g.redirectedFrom&&"employeeProfile"==g.redirectedFrom?(localStorage.setItem("dashboardToast",JSON.stringify(o)),t.go("pim.employees.profile.profile",{empNumber:g.empNumber})):(localStorage.setItem("toast",JSON.stringify(o)),t.go("attendance.attendance_sheet",i))}function E(){var e="Failed to Save";i.show();var t=I();l.saveAttendanceEmployeeRecord(Y.idToPunchOut,t).then(function(t){if(t.data.success)k(!0);else if("Overlapping Records Found"===t.data.messages.error)r.errorToast("Overlapping Records Found");else{var a=t.data.messages.error?t.data.messages.error:e;r.errorToast(a)}},function(t){403===t.status?k(!1):401===t.status?(Y.isPageLoaded=!1,r.errorToast(e),c.logout()):r.errorToast(t.data&&t.data.messages&&t.data.messages.error?t.data.messages.error:e)})["finally"](function(){Y.submitInProgress=!1,i.hide()})}function I(){var e={empNumber:Y.empNumber,date:A(Y.model.date),time:Y.model.time,timezoneOffset:Y.model.timezone,note:Y.model.note};return Y.idToPunchOut||(e.forcePunchIn="true"===Y.forcedPunchIn),e}function A(e){return l.convertDateToString(e)}function M(){return n.getPermissions().then(function(e){Y.permissions=e.attendance_records,Y.permissions.read||(i.hide(),t.go("403"))})}function L(){Y.submittedValues={date:Y.model.date,time:Y.model.time,timezone:Y.model.timezone}}function P(){var e={include:"employee",filter:{empNumbers:[Y.empNumber],toDate:Y.date,onlyLastPunchRecord:"true"}};return g.specificPunchRecord&&(e.filter.specificPunchRecord=g.specificPunchRecord),l.fetchAttendanceEmployeeRecords(e)}function N(e){if(e.punchInUserTime){var t=e.punchInUserTime.split(" ");Y.formattedPunchInUserTime=m.toLocalizedDate(t[0])+" "+t[1].slice(0,5)}else Y.formattedPunchInUserTime=void 0}function O(e){if(Y.idToPunchOut){var t=e.punchInUtcTime.split(" "),a=new Date(t[0]+"T"+t[1]).getTime()/1e3,i=new Date(A(Y.model.date)+"T00:00").getTime()/1e3,o=3600*Y.model.timezone,n=i-o;if(a<n){Y.isForcePunchInPossible=!0,Y.forcePunchInDate=A(Y.model.date);var l;if(Y.serverUtcDate&&Y.serverUtcTime){var s=new Date(Y.serverUtcDate+"T"+Y.serverUtcTime+"Z");l=A(s)}else l=A(new Date);Y.forcePunchInDate===l?Y.forcePunchInDescription=r.getLocalizedCustom("Punch in for Today"):Y.forcePunchInDescription=r.getLocalizedCustomWithVariables("Punch in for {{date}}",{date:m.toLocalizedDate(Y.forcePunchInDate)})}else Y.isForcePunchInPossible=!1,Y.forcePunchInDate=void 0,Y.forcePunchInDescription=void 0}else Y.isForcePunchInPossible=!1,Y.forcePunchInDate=void 0,Y.forcePunchInDescription=void 0}function R(t,a){return l.validatePunchOutTime(t,a,Y.model,Y.empNumber,Y.idToPunchOut,Y.lastPunchRecord).then(function(t){return Y.isPageLoaded?("time"!==a&&e.$broadcast("schemaForm.error.time","punchOutTime",t),t):(e.$broadcast("schemaForm.error.time","punchOutTime",!0),!0)},function(t){return e.$broadcast("schemaForm.error.time","punchOutTime",!0),!0})}function z(t,a){return e.$broadcast("schemaForm.error.date","frozenDate",!0),l.checkWithinFrozenDuration(Y.model,Y.empNumber,Y.idToPunchOut,Y.lastPunchRecord,Y.isPageLoaded,t,a).then(function(t){return e.$broadcast("schemaForm.error.date","frozenDate",t),t},function(t){return e.$broadcast("schemaForm.error.date","frozenDate",!0),!0})}function j(t,a){return l.validateOverlappingRecords(t,a,Y.model,Y.empNumber,Y.idToPunchOut,Y.lastPunchRecord).then(function(t){if(Y.isPageLoaded){var i=!0;return t.data||(i=!1),"time"!==a&&e.$broadcast("schemaForm.error.time","overlappingRecords",i),i}return e.$broadcast("schemaForm.error.time","overlappingRecords",!0),!0},function(t){return e.$broadcast("schemaForm.error.time","overlappingRecords",!0),!0})}function V(){if(Y.isForcePunchInPossible&&Y.forcePunchInDate){var e={empNumber:Y.empNumber,date:A(Y.forcePunchInDate),forcedPunchIn:"true"};t.go("attendance.punch_in_out.forcedPunchIn",e,{reload:!0})}}function G(){"true"===Y.forcedPunchIn&&(Y.lastPunchRecord={},Y.total=0,Y.allowedActions.PunchIn=!0,Y.allowedActions.PunchOut=!1)}function B(){return l.fetchAttendanceConfiguration()}function q(e){var a=A(e);if(!Y.idToPunchOut&&a!==Y.date){var o={include:"employee",filter:{empNumbers:[Y.empNumber],toDate:a,onlyLastPunchRecord:"true"}};i.show(),l.fetchAttendanceEmployeeRecords(o).then(function(e){e.data.meta.allowedActions.PunchOut&&t.go("attendance.punch_in_out",{empNumber:Y.empNumber,date:a},{reload:!0})},function(e){})["finally"](function(){i.hide()})}}function H(){Y.model.time="",U(!1),e.$broadcast("schemaForm.error.time","timeFormat",!0),e.$broadcast("schemaForm.error.time","punchOutTime",!0),e.$broadcast("schemaForm.error.time","overlappingRecords",!0)}function U(t){return s.requiredForDirty.validator(Y.model.time,t)?(e.$broadcast("schemaForm.error.time","requiredForDirty",!0),!0):(Y.model.time="",e.$broadcast("schemaForm.error.time","requiredForDirty",!1),!1)}function W(){var e=$("#menu-content,#top-ribbon-menu").find('a[href*="Attendance_Pay_Hours_Report"]');e.length&&C.$broadcast("markMenuItemAsCurrent",{href:"Attendance_Pay_Hours_Report"}),v(function(){C.$broadcast("markMenuItemAsCurrent",{href:"Attendance_Employee_Records_Report"})})}var Y=this;o.setTitle("Employee Attendance Records"),Y.onSubmit=F,Y.forcePunchIn=V,Y.empNumber=g.empNumber,Y.date=g.date,Y.time=T(),Y.forcedPunchIn=g.forcedPunchIn,Y.permissions={},Y.formData={},Y.lastPunchRecord={},Y.total=0,Y.allowedActions={Delete:!1,Edit:!1,PunchIn:!1,PunchOut:!1},Y.idToPunchOut=void 0,Y.formattedPunchInUserTime=void 0,Y.submittedValues={},Y.isForcePunchInPossible=!1,Y.forcePunchInDate=void 0,Y.forcePunchInDescription=void 0,Y.timezones=[],Y.serverUtcDate=void 0,Y.serverUtcTime=void 0,Y.updateCurrentTimeFlag=!1,Y.isPageLoaded=!1,Y.submitInProgress=!1,i.show();var J={attendanceConfiguration:B()};a.all(J).then(function(e){Y.timezones=e.attendanceConfiguration.data.meta.timezones,Y.serverUtcDate=e.attendanceConfiguration.data.meta.serverUtcDate,Y.serverUtcTime=e.attendanceConfiguration.data.meta.serverUtcTime},function(e){Y.timezones=[],Y.serverUtcDate=void 0,Y.serverUtcTime=void 0})["finally"](function(){if(g.date)Y.date=g.date;else if(Y.serverUtcDate&&Y.serverUtcTime){var e=new Date(Y.serverUtcDate+"T"+Y.serverUtcTime+"Z");Y.date=A(e)}else Y.date=A(new Date);if(Y.serverUtcDate&&Y.serverUtcTime){var t=new Date(Y.serverUtcDate+"T"+Y.serverUtcTime+"Z");Y.time=("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)}else Y.time=T();Y.formattedPunchInOutDate=m.toLocalizedDate(Y.date),Y.formattedPunchInOutTime=Y.time,v(function(){w(),W()})})}angular.module("app.attendance").controller("AttendancePunchInOutController",e),e.$inject=["$scope","$state","$q","loader","titleService","datagroupPermissions","attendanceService","localizedMessages","formValidationHelper","webservice","employeeService","dateService","ModalService","listHelper","settingsService","$stateParams","formHelper","$timeout","attendanceConstants","menuService","$rootScope"]}(),function(){"use strict";angular.module("app.attendance").constant("attendanceConstants",{PAY_PERIOD_SEMI_MONTHLY:4,PAY_POLICY_GENERAL_RULES:"general",PAY_POLICY_ROUND_OFF_RULES:"round_off",PAY_POLICY_ROUND_OFF_RULE_SHIFT_BASED:"shift",PAY_POLICY_ROUND_OFF_RULE_TIME_BASED:"time",DATE_ON_FROZEN_ATTENDANCE_SHEET_ERROR:"Date Is on an Already Approved Attendance Sheet",PAY_CODE_CHANGE_ON_FROZEN_ATTENDANCE_SHEET_ERROR:"Failed to Save. This Will Result in a Pay Code Change in an Already Approved Attendance Sheet"})}(),function(){"use strict";function e(e,t,a,i,o,n){function l(t){return e.call("attendance/config","PATCH",t,{})}function r(){return e.call("attendance/config","GET",[],{})}function s(t){return e.call("attendanceRecords","GET",[],t)}function c(t){return e.call("attendanceRecords","DELETE",t,{})}function d(t,a){return t?e.call("attendanceRecord/"+t,"PATCH",a,{}):e.call("attendanceRecords","POST",a,{})}function m(t,a,i,o,n,l,r){var s=f(l,r,t,a,i,o,"checkWithinFrozenDuration",!0);return e.call("attendanceRecords","POST",s,{}).then(function(e){return!n||!!e.data},function(e){return!0})}function u(t,a,i,o,n,l){var r=n?"checkPunchOutOverlappingRecords":"checkPunchInOverlappingRecords",s=f(t,a,i,o,n,l,r,!1);return e.call("attendanceRecords","POST",s,{})}function p(t,a,i,l,r,s){if(r){var c=f(t,a,i,l,r,s,"getRoundedOffTime",!1),d=c.punchOutDate,m=c.punchOutTime,u=c.punchOutTimezoneOffset,p=o.timeFormat24HourMinuteValidation.validator(m);return d&&m&&p?e.call("attendanceRecords","POST",c,{}).then(function(e){d=e.data.date,m=e.data.time;var t=s.punchInUtcTime.split(" "),a=new Date(t[0]+"T"+t[1]).getTime()/1e3,i=new Date(C(d)+"T"+m).getTime()/1e3,o=3600*u,n=i-o;return!(n<a)},function(e){return!0}):n(function(e,t){e(!0)})}return n(function(e,t){e(!0)})}function f(e,t,a,i,o,n,l,r){var s=a.date,c=a.time,d=a.timezone;switch(t){case"date":s=e;break;case"time":c=e;break;case"timezone":d=e}var m={empNumber:i,mode:l};if(o){var u=n.punchInUserTime.split(" ");m.id=o,m.punchInDate=u[0],m.punchOutDate=C(s),r||(m.punchInTime=u[1].slice(0,5),m.punchInTimezoneOffset=n.punchInTimeOffset,m.punchOutTime=c,m.punchOutTimezoneOffset=d)}else m.punchInDate=C(s),r||(m.punchInTime=c,m.punchInTimezoneOffset=d);return m}function g(t){return e.call("attendanceRecords","PATCH",t,{})}function h(){var e=new Date;return("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)}function v(){return r().then(function(e){var t=e.data.meta.serverUtcDate,a=e.data.meta.serverUtcTime;if(t&&a){var i=new Date(t+"T"+a+"Z");return("0"+i.getHours()).slice(-2)+":"+("0"+i.getMinutes()).slice(-2)}},function(e){})}function y(){return r().then(function(e){var t=e.data.meta.serverUtcDate,a=e.data.meta.serverUtcTime;if(t&&a){var i=new Date(t+"T"+a+"Z"),o=("0"+i.getHours()).slice(-2)+":"+("0"+i.getMinutes()).slice(-2),n=new Date(t+"T"+a+"Z");return{time:o,date:n}}},function(){})}function b(){var e=new Date,t=-1*e.getTimezoneOffset()/60,a=parseFloat(t.toFixed(2))!=parseFloat(t.toFixed(1))?t.toFixed(2):t.toFixed(1);return"0.0"===a?"0":a}function C(e){return"object"==typeof e&&(e=t.toStandardDate(e)),e.match(/([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/)||(e=t.toStandardDate(t.stringToStandardDate(e))),e}function w(t){return e.call("attendanceSheet","GET",[],t).then(function(e){return e.data})}function S(t){return e.call("payPolicy/"+t,"GET",[],{}).then(function(e){return e.data})}function D(t){return e.call("attendanceSheets","GET",[],t).then(function(e){return e.data})}function T(t){var a=t.reduce(function(e,t){return e[t.empNumber]=e.hasOwnProperty(t.empNumber)?e[t.empNumber]:{},e[t.empNumber][t.id]=t,e},{}),i={filter:{id:Object.keys(a),size:"small"}};return e.call("employeePhotos","GET",[],i).then(function(e){for(var t=0;t<e.data.data.length;t++){var i=e.data.data[t];_.forEach(a[i.id],function(e){e.photo=i})}return e.data.data})}function x(t){return e.call("attendanceSheets","POST",t,{})}function F(t,a){var i="attendanceSheet/"+t;return e.call(i,"PATCH",a,{})}function k(t){return e.call("attendanceSheets/bulkAction","POST",t,{})}function E(t,a){var i=t?"payPolicy/"+t:"payPolicies",o=t?"PATCH":"POST";return e.call(i,o,a,{})}function I(t,a){return e.call("payPolicy/"+t+"/employeeSelectionCriteria","PATCH",a,{})}function A(t){return e.call("payPolicies","GET",[],t).then(function(e){return e.data})}function M(){return e.call("payPeriods","GET",[],{}).then(function(e){return e.data.data})}function L(t){return e.call("payPolicy/"+t+"/employeeSelectionCriteria","GET",[],{}).then(function(e){
return e.data})}function P(t,a){return e.call("payPolicy/"+t+"/includibleEmployees","GET",[],a).then(function(e){return e.data})}function $(t){return e.call("payPolicies","DELETE",t,{})}function N(e,t,a,i){var o=R(t,a,i),n=O(e.punchedInTime,o),l=1e3*e.duration,r=l+n;return j(r/1e3)}function O(e,t){var a=0;if(e){var i=moment(e);a+=t-i}return a>0?a:0}function R(e,t,a){var i=moment(new Date);return e&&t&&(i=moment(new Date(e+"T"+t+"Z")),i.add(a,"m")),i.add(-1*i.utcOffset(),"m"),i}function z(e,t){var i=moment(new Date),o=a.instant("Today");return moment(e).format("YYYY-MM-DD")!==moment(i).format("YYYY-MM-DD")&&(o=a.instant(moment(e).format("MMM")),o=o+" "+a.instant(moment(e).format("Do"))),o+" "+a.instant("at")+" "+moment(e).format("hh:mm A")+" (GMT "+t+")"}function j(e){var t=Math.floor(e/3600),a=Math.floor(e%86400%3600/60),i="";return a<10&&(i="0"),t+"h "+i+a+"m"}function V(){for(var e=["5","10","15","30","60"],t=[],a="",o=i.getLocalizedCustom("Hour"),n=i.getLocalizedCustom("Minutes"),l=0;l<e.length;l++)a="60"===e[l]?"1 "+o:e[l]+" "+n,t.push({value:e[l],name:a});return{titleMap:t,"enum":e}}function G(e,t){if(t){var a=e.toLowerCase();return a.charAt(0).toUpperCase()+a.slice(1)}return e}function B(e,t){var a=new Date(e.startDate),i=new Date(e.endDate);return q(a)+" "+t+" "+q(i)}function q(e){return a.instant(moment(e).format("MMM"))+" "+a.instant(moment(e).format("Do"))}var H={saveAttendanceConfiguration:l,fetchAttendanceConfiguration:r,fetchAttendanceEmployeeRecords:s,deleteAttendanceEmployeeRecords:c,saveAttendanceEmployeeRecord:d,editAttendanceEmployeeRecords:g,validateOverlappingRecords:u,validatePunchOutTime:p,checkWithinFrozenDuration:m,getCurrentTime:h,getCurrentTimeFromServerUtcTime:v,getUserTimeZoneOffset:b,convertDateToString:C,getCurrentTimeFromServerUtcDateAndTime:y,fetchAttendanceSheets:D,getPhotos:T,fetchAttendanceSheet:w,fetchPayPolicyById:S,createAttendanceSheet:x,performAttendanceSheetWorkflowAction:F,performAttendanceSheetsBulkAction:k,fetchPayPolicies:A,fetchPayPeriods:M,savePayPolicy:E,fetchPayPolicyEmployeeSelectionCriteria:L,savePayPolicyEmployeeSelectionCriteria:I,fetchPayPolicyIncludibleEmployees:P,deletePayPolicies:$,getTotalWorkedTimeInHoursAndMinutes:N,formatPunchedTime:z,secondsToHourMinuteFormat:j,getEnumAndTitleMapForPayPolicyRoundingOffOptions:V,getFormattedErrorMessage:G,getDateRageTextInMonthDateFormat:B};return H}angular.module("app.attendance").service("attendanceService",e),e.$inject=["webservice","dateService","$translate","localizedMessages","formValidationHelper","$q"]}(),function(){"use strict";function e(){this.config={appErrorPrefix:void 0},this.configure=function(e){this.config.appErrorPrefix=e},this.$get=function(){return{config:this.config}}}function t(e){e.decorator("$exceptionHandler",a)}function a(e,t,a){return function(i,o){var n=t.config.appErrorPrefix||"",l={exception:i,cause:o};i.message=n+i.message,e(i,o),a.error(i.message,l)}}angular.module("blocks.exception").provider("exceptionHandler",e).config(t),t.$inject=["$provide"],a.$inject=["$delegate","exceptionHandler","logger"]}(),function(){"use strict";function e(e,t){function a(a){return function(i){var o,n;return i.data&&i.data.description&&(o="\n"+i.data.description,n=a+o),i.data.description=n,t.error(n),e.reject(i)}}var i={catcher:a};return i}angular.module("blocks.exception").factory("exception",e),e.$inject=["$q","logger"]}(),function(){"use strict";function e(e){function t(t,a,i){e.error("Error: "+t,a)}function a(t,a,i){e.info("Info: "+t,a)}function i(t,a,i){e.info("Success: "+t,a)}function o(t,a,i){e.warn("Warning: "+t,a)}var n={showToasts:!0,error:t,info:a,success:i,warning:o,log:e.log};return n}angular.module("blocks.logger").factory("logger",e),e.$inject=["$log"]}(),function(){"use strict";function e(e,t){function a(){$("#preloader").addClass("loading")}function i(){$("#preloader").removeClass("loading")}var o={show:a,hide:i};return o}angular.module("blocks.modal").factory("dialogService",e),e.$inject=["$q","ModalService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){function m(){u()}function u(){g.schema={type:"object",title:"AddShortCuts",properties:{name:{title:"Name",type:"string",maxLength:100}},required:["name"]},g.form=[{type:"row",items:[{key:"name",type:"text",htmlClass:"col s12 m12 l12",validationMessage:{302:o.getLocalizedCustom("Required"),201:c.textLengthExceedValidation.message(g.schema.properties.name.maxLength)}}]}],e.addRequiredMessage(g.form),g.model={name:""}}function p(e){if(n.$broadcast("schemaFormValidate"),e.$valid){var a={name:g.model.name,state:r.current.name,params:JSON.stringify(r.params.filterParameters)};l.show();var c="POST",m="myShortcuts",u="saveSuccess";t.call(m,c,a,{}).then(function(e){l.hide(),s.addItemToMyShortcutDropDownList(e.data.data,n),o.showLocalizedToast(u)},function(e){l.hide(),d.error(e)}),i(!0)}}function f(){i(!1)}var g=this;g.save=p,g.cancel=f,m()}angular.module("app.core").controller("AddShortcutController",e),e.$inject=["formHelper","webservice","$translate","close","localizedMessages","$scope","loader","$state","myShortcutService","formValidationHelper","toast"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r){function s(t){return e.call("reports/"+t+"/definition","GET",[],{}).then(function(e){return m(e.data),e.data})}function c(t){return e.call("reports/uniqueName/"+encodeURIComponent(t),"GET",[],{}).then(function(e){return m(e.data),e.data})}function d(e){}function m(e){for(var t=e.data.definition.selected_filters,a=e.meta.available_filters,i=Object.keys(t),o=0;o<i.length;o++){var n=i[o],l=a[n].type;if("true"===a[n]["allow-multiple"]&&Array.isArray(t[n])&&t[n].length>0&&(t[n]=t[n][0]),"number_comparison"===l&&""!==t[n])if("<"===t[n].comparison)t[n].to=t[n].from,t[n].from=0;else if(">"===t[n].comparison){var r=parseInt(t[n].from,10);t[n].to=r>100?r:100}"date_comparison"===l&&""!==t[n]&&(t[n].from&&(t[n].from=new Date(moment.utc(t[n].from).format("l LT"))),t[n].to&&(t[n].to=new Date(moment.utc(t[n].to).format("l LT")))),"date"===l&&""!==t[n]&&t[n]&&(t[n]=new Date(moment.utc(t[n]).format("l LT")))}}function u(t){var a=[],i=[],o={};return o.filter={onlyReportNames:!0},e.call("reports/reportModule","GET",[],o).then(function(e){for(var o=0;o<e.data.data.length;o++){var n=e.data.data[o];n!==t&&(a.push(n),i.push(n.toLowerCase()))}return{existingReportNames:a,existingReportNamesLowerCased:i}})}function p(a,i,o){var n={};return n.uniqueName=i,e.call("reportsFolders","GET",[],n).then(function(e){var n=[],l=0,r=e.data.data.find(function(e){return e.id==a});r&&r.predefined&&!r.disabled&&"Other Reports"!==r.name&&(n.push(r),l=r.id);var s,c=i.split(".")[0];s="pim"===c?["Employee Management","Leave","Performance"]:"expense"===c||"expense_summary"===c?["Travel and Expense"]:[o];var d=e.data.data.filter(function(e){return s.includes(e.name)});_.forEach(d,function(e){e.id===l||e.disabled||n.push(e)}),r&&"Other Reports"===r.name&&n.push(r);for(var m=0;m<e.data.data.length;m++){var u=e.data.data[m];u.predefined||u.disabled||n.push(u)}return t.getEnumAndTitleMapForSelect(n,{value:"id",name:"name"})})}function f(e,t){return t&&("number_comparison"===e?t.comparison="BETWEEN":"date_comparison"===e?t.from||t.to?(t.comparison="BETWEEN",t.from=l("date")(t.from,"yyyy-MM-dd"),t.to=l("date")(t.to,"yyyy-MM-dd")):(t.from=null,t.to=null,t.comparison="BETWEEN"):"year_comparison"===e&&(t.comparison="BETWEEN")),t}function g(e,t,a){var i;return"date_comparison"===t?a.from||a.to?i={from:l("date")(a.from,"yyyy-MM-dd"),to:l("date")(a.to,"yyyy-MM-dd"),comparison:"BETWEEN"}:delete a.comparison:"number_comparison"===t?void 0!==a.from&&void 0!==a.to&&(i={from:a.from,to:a.to,comparison:"BETWEEN"}):"select"!==t&&"sub_unit"!==t||"employment_status"!=e&&"sub_unit"!=e?"year_comparison"===t?void 0!==a.from&&void 0!==a.to&&(i={from:a.from,to:a.to,comparison:"BETWEEN"}):i="date"===t?l("date")(a,"yyyy-MM-dd"):a:i=formatMultiselectFilter(a),i}function h(e,t,s,c,d){var m={};m.name=t.definition.name,m.id=t.definition.id,m.folderId=t.folder?t.folder:t.definition.folderId,e&&e.reportName&&(m.name=e.reportName,m.folderId=e.reportFolder,m.isPrivate=e.isPrivate,m.id=void 0),t.module&&(m.module=t.module),t.templateName&&(m.template=t.templateName),t.prefix&&(m.prefix=t.prefix),m.icon=t.definition.icon,m.uniqueName=t.reportUniqueName;for(var u={},p=0;p<t.selectedFilterNames.length;p++){var h=t.selectedFilterNames[p];u[h]=t.selectedFilters[h]}var C={};if(t.selectedIncludeNames&&t.selectedIncludeNames.length>0)for(var w=0;w<t.selectedIncludeNames.length;w++){var _=t.selectedIncludeNames[w];C[_]=t.selectedIncludeFields[_]}var S={};if(t.selectedGroupByNames&&t.selectedGroupByNames.length>0)for(var w=0;w<t.selectedGroupByNames.length;w++){var _=t.selectedGroupByNames[w];S[_]=t.selectedGroupByFields[_]}m.definition={selected_filters:u,selected_includes:C,selected_group_by:S,selected_display_fields:t.selectedDisplayFields,selected_display_groups:[]},t.summaryConfiguration&&(m.definition.summary_configuration=t.summaryConfiguration),t.selectedGroupingFields&&t.selectedGroupingFields.length>0&&(m.definition.selected_grouping_fields=t.selectedGroupingFields),t.groupingAvailable&&(m.definition.selected_grouping_fields=[],angular.forEach(t.availableGroupingFields,function(e,a){t.selectedGroupingFields.indexOf(a)!==-1&&m.definition.selected_grouping_fields.push(a)}));for(var D=Object.keys(t.displayGroups),x=0;x<D.length;x++){var F=t.displayGroups[D[x]];F.displayHeader&&m.definition.selected_display_groups.push(D[x])}for(var k=Object.keys(m.definition.selected_filters),E=0;E<k.length;E++){var h=k[E];if(t.availableFilters.hasOwnProperty(h)){var I=t.availableFilters[h],A=I.type,M=t.availableFilters[h]["allow-multiple"],L=m.definition.selected_filters[h];if("widget_group"===A){var P=L[h];if(I.dependents.hasOwnProperty(P)){var $,N=I.dependents[P];$=t.saveFromEditView?f(N.type,L[P]):g(N.type,L[P]),$&&(L={},L[h]=P,L[P]=$)}}else L=f(A,L);"true"===M&&(m.definition.selected_filters[h]=L),"date"===A&&(m.definition.selected_filters[h]=l("date")(L,"yyyy-MM-dd"))}}return delete m.editable,a.show(),y(m).then(function(e){c&&v(e.id,d);var a="report_view";if(("pim"===s||t.isOxd)&&(a="report_view_oxd"),void 0!=T[e.parentUniqueName]){var o=T[e.parentUniqueName];r.updateRegisteredListConfiguration({listName:o,formData:{new_report_id:e.id,report_id:t.previousReportId}})}var n=b(t,e,s);i.go(n.reportView,n.filters)},function(e){o("Failed to Save").then(function(e){n.error(e)})})["finally"](function(){a.hide()})}function v(t,a){var i=a;return delete i.addToEmployeeDashboard,e.call("reports/"+t+"/summary/"+i.summaryId,"PATCH",i,{})}function y(t){if(void 0===t.id)return e.call("reports","POST",t,{}).then(function(e){return e.data.data});var a=t.id;return delete t.id,e.call("reports/"+a,"PATCH",t,{}).then(function(e){return t.id=a,t})}function b(e,t,a){var i={},o="report_view";("pim"===a||e.isOxd)&&(o="report_view_oxd");var n={id:t.id,showSuccessToast:!0,module:e.module,templateName:e.templateName,dataGroup:e.dataGroup,prefix:e.prefix,filters:null};return void 0!=D[t.parentUniqueName]&&(o=D[t.parentUniqueName],n={id:t.id,showSuccessToast:!0},e.isSTLE&&(n.isSTLE=1)),i.reportView=o,i.filters=n,i}function C(e,t){var a={};for(var i in e)e.hasOwnProperty(i)&&Array.isArray(e[i].fields)&&(a[i]=e[i],a[i].fields=a[i].fields.filter(function(e){return t.indexOf(e.id)!==-1}),0==a[i].fields.length&&delete a[i]);return a}function w(e){if(0==e.length)return!1;for(var t in e[0])if(e[0].hasOwnProperty(t)){var a=e.filter(function(e){return 0===Number(e[t])||null===e[t]||""===e[t]||void 0===e[t]});if(a.length===e.length)return!1}return!0}var S={getReportDefinition:s,getReportDefinitionByUniqueName:c,saveReportDefinition:d,fetchReportNames:u,fetchReportFolders:p,saveAndSearch:h,getReportDisplayGroups:C,hasSummaryEnoughDataToPresent:w},D={Leave_Percentage_Report:"leave.percentage_report",Leave_Entitlements_and_Usage_Report_By_Employee:"leave.balance_report",Leave_Entitlements_and_Usage_Report_By_LeaveType:"leave.balance_report",Short_Term_Leave_Entitlements_and_Usage_Report_By_Employee:"leave.balance_report",Short_Term_Leave_Entitlements_and_Usage_Report_By_LeaveType:"leave.balance_report"},T={Leave_Entitlements_and_Usage_Report_By_Employee:"leaveUsageReportByEmployeeList",Leave_Entitlements_and_Usage_Report_By_LeaveType:"leaveUsageReportByLeaveTypeList",Short_Term_Leave_Entitlements_and_Usage_Report_By_Employee:"leaveUsageReportByEmployeeList",Short_Term_Leave_Entitlements_and_Usage_Report_By_LeaveType:"leaveUsageReportByLeaveTypeList"};return S}angular.module("blocks.report").factory("reportService",e),e.$inject=["webservice","formHelper","loader","$state","$translate","toast","$filter","listConfigurationService"]}(),function(){"use strict";function e(e,t,a){function i(e,i,n,l,r,s,c,d,m){function u(e,i){e.forEach(function(e){e.config.resolve=angular.extend(e.config.resolve||{},o.resolveAlways),t.state(e.state,e.config)}),i&&!S&&(S=!0,a.otherwise(i))}function p(){c.onError({},function(t){var a=t.$from(),i=t.$to(),o=t.error();if(!_){D.errors++,_=!0;var n=i&&(i.title||i.name||i.loadedTemplateUrl)||"unknown target",r="Error routing to "+n+". "+(o.data||"")+". <br/>"+(o.statusText||"")+": "+(o.status||"");l.warning(r,[i]),a.name===i.name&&a.params===i.params||e.path("/")}})}function f(){h(),p(),v(),y(),w(),b(),C()}function g(){return n.get()}function h(){c.onEnter({},function(e){var t=e.$from(),a=e.$to();t.name!==a.name&&(a.data?void 0==a.data.keepTooltip&&$(".material-tooltip").hide():$(".material-tooltip").hide(),s.remove())})}function v(){c.onSuccess({},function(e){var t=e.$from(),a=e.$to();D.changes++,_=!1,i.prevStateNoneCore="noncore"===t.name||"noncore.WithParams"===t.name;var o=!1;if(t.name!==a.name){var n=!1;if("noncore"!==a.name&&"noncore.WithParams"!==a.name||(n=m.showContentLoader(),n||(o=!0)),m.setNonCoreMode(o),i.showContentLoader=n,angular.isDefined(a.data)){angular.isDefined(a.data.title)&&r.setTitle(a.data.title);var l={title:!0,employeeSearch:!1,employeeProfile:!1};angular.isDefined(a.data.navbar)&&angular.extend(l,a.data.navbar),i.navbar=l}}})}function y(){c.onSuccess({},function(e){var t=e.$from(),a=e.$to();t.name!==a.name&&"noncore"!==a.name&&"noncore.WithParams"!==a.name&&(d.hide(),d.hideContentLoader())})}function b(){c.onSuccess({},function(e){var t=e.$to();t.data&&t.data.hideMainMenu?i.hideAllNavBars=!0:i.hideAllNavBars=!1})}function C(){c.onSuccess({},function(e){var t=e.$to();t.data&&t.data.hideLeftMenu?i.hideLeftMenu=!0:i.hideLeftMenu=!1})}function w(){c.onSuccess({},function(e){var t=e.$to();t.data&&t.data.oxd?i.oxd=!0:i.oxd=!1})}var _=!1,S=!1,D={errors:0,changes:0},T={configureStates:u,getStates:g,stateCounts:D};return f(),T}var o={docTitle:void 0,resolveAlways:{}};this.configure=function(e){angular.extend(o,e)},this.$get=i,i.$inject=["$location","$rootScope","$state","logger","titleService","toast","$transitions","loader","noncoreService"]}angular.module("blocks.router").provider("routerHelper",e),e.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"buzz",config:{"abstract":!0,url:"/buzz",template:"<ui-view/>"}},{state:"buzz.home",config:{url:"/home",views:{"":{controller:"VueController"}},data:{hideMainMenu:!0,oxd:!0,vueComponent:["buzz"]}}},{state:"buzz.profile",config:{url:"/profile/:empId",views:{"":{controller:"VueController"}},data:{hideMainMenu:!0,oxd:!0,vueComponent:["buzz"]},params:{empId:null}}}]}angular.module("app.buzz").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t){function a(e){return t.call("defaultAuthenticationSettings","GET").then(function(t){var a=t.data.data;return!(!a||!e)&&a[e]})}function i(){return t.call("defaultAuthenticationSettings","GET").then(function(e){return e.data.data})}var o={getConfigurations:i,getConfiguration:a};return o}angular.module("app.core").factory("authenticationConfigurationService",e),e.$inject=["$q","webservice"]}(),function(){"use strict";function e(e,t,a,i,o,n){i.resourceUrlWhitelist(["self","http://localhost/**","http://localhost/ui_improvements/symfony/web/core/getMainMenu"]),e.debugEnabled&&e.debugEnabled(!0),a.configure(r.appErrorPrefix),t.configure({docTitle:r.appTitle+": "}),n.parentSelector="#linear-progress",n.includeSpinner=!1,o.useAnchorScroll()}function t(e,t){e.useSanitizeValueStrategy("sanitizeParameters");var a={prefix:"../"+t.webRes+"/i18n/messages.",suffix:".json"};e.useStaticFilesLoader(a)}function a(e){e.interceptors.push(["$q","$window","LOGIN","$cookies",function(e,t,a,i){return{responseError:function(o){return 401==o.status&&"invalid_token"!=o.data.error&&"expired_token"!=o.data.error&&"token_user_not_matched"!=o.data.error&&"reauthentication_required"!=o.data.error&&(i.put("redirect_to_after_login",t.location.href,{secure:!0,path:"/"}),t.location.href=a.baseUrl+"auth/logout/seamless"),e.reject(o)}}}])}function i(e){e.debugInfoEnabled(!1)}function o(e){e.type("escapedJson",{encode:function(e){return encodeURIComponent(angular.toJson(e))},decode:function(e){return angular.fromJson(decodeURIComponent(e))},is:function(e){return angular.isObject(e)},equals:angular.equals,pattern:/[^\/]*/})}function n(e){function t(e,t){if(null===o){var a=angular.element(document.body).injector();o=a.get("$translate")}return o.instant(e,t)}function a(e){return function(a){return t(e)}}var i={"default":"Invalid",101:function(e){var a={minimum:e.schema.minimum};return t("Should be greater than {{minimum}}",a)},103:function(e){var a={maximum:e.schema.maximum};return t("Should be less than {{maximum}}",a)},105:"Should be a valid number",200:function(e){var a={minLength:e.schema.minLength};return t("Should have at least {{minLength}} characters",a)},201:function(e){var t=angular.element(document.body).injector().get("formValidationHelper");return t.textLengthExceedValidation.message(e.schema.maxLength)},302:"Required",fileSize:"Attachment size exceeded",fileType:"Attachment type invalid"};i[102]=i[101],i[104]=i[103],i.number=i[105],i.required=i[302],i.min=i[101],i.max=i[103],i.maxlength=i[201],i.minlength=i[200];for(var o=null,n=Object.keys(i),l=0;l<n.length;l++){var r=n[l],s=i[r];angular.isFunction(s)?e.setDefaultMessage(r,s):e.setDefaultMessage(r,a(s))}}var l=angular.module("app.core"),r={appErrorPrefix:"[orangeHrm Error] ",appTitle:"OrangeHRM"};l.value("config",r);var s=navigator.userAgent.indexOf("MSIE ")>-1||navigator.userAgent.indexOf("Trident/")>-1||navigator.userAgent.indexOf("Edge/")>-1,c=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,d={isIE:s,isFirefox:c};l.constant("browser",d),l.config(e),e.$inject=["$logProvider","routerHelperProvider","exceptionHandlerProvider","$sceDelegateProvider","$uiViewScrollProvider","cfpLoadingBarProvider"],l.config(t),t.$inject=["$translateProvider","LOGIN"],l.config(a),a.$inject=["$httpProvider"],l.config(i),i.$inject=["$compileProvider"],l.config(o),o.$inject=["$urlMatcherFactoryProvider"],l.config(n),n.$inject=["sfErrorMessageProvider"]}(),function(){"use strict";angular.module("app.core").constant("moment",moment).constant("VERSION","6.0-alpha.3").constant("HTTP_CACHE","httpCache"),angular.module("app.core").constant("LOGIN",{baseUrl:angular.element(document.querySelector("#linkSymfonyRoot")).attr("href"),clientBase:angular.element(document.querySelector("base")).attr("href"),webRes:angular.element(document.querySelector("#linkWebres ")).attr("href"),clientId:"public_rest_api_client"})}(),function(){"use strict";function e(e){var a=function(e,t){var a=e.get("$state"),i=t.path();if(0===i.indexOf("/route/")){var o=i.substr(7),n=o.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/);if(n&&4===n.length){var l,r=n[1];if(void 0!==n[3])try{l=JSON.parse(n[3])}catch(s){}return void a.go(r,l,{location:"replace"})}}else if(""===i)return void a.go("dashboard");a.go("404")};e.configureStates(t(),a)}function t(){return[{state:"404",config:{url:"/404",views:{"":{templateUrl:"app/core/404.html",title:"404",controller:"RestrictedAccessController"}},data:{title:"Page Not Found"}}},{state:"403",config:{url:"/403",views:{"":{templateUrl:"app/core/forbidden.html",title:"Forbidden",controller:"RestrictedAccessController"}},data:{title:"Forbidden"}}},{state:"report_view",config:{url:"/report/{module}/{templateName}/{prefix}/{dataGroup}/{id}",views:{"":{templateUrl:"app/core/reports/report-view.html",controller:"CoreReportViewController",controllerAs:"vm"}},params:{show_filters:!1,filters:null,chartConfig:null,showSuccessToast:!1,reportNameAsMenuPill:{value:!0,type:"bool"},menuSelector:null,breadCrumbs:null,initialState:"reports_and_analytics.catalogue",module:{value:null,inherit:!0,squash:!0},templateName:{value:null,inherit:!0,squash:!0},dataGroup:{value:null,inherit:!0,squash:!0},prefix:{value:null,inherit:!0,squash:!0},generate:{value:!1,inherit:!1}},data:{title:"Reports",paramsToMatchMenu:{id:!0},initialState:"reports"}}},{state:"report_view_oxd",config:{url:"/report/oxd/{module}/{templateName}/{prefix}/{dataGroup}/{id}",views:{"":{templateUrl:"app/core/reports/report-view-oxd.html",controller:"CoreReportViewController",controllerAs:"vm"}},params:{show_filters:!1,filters:null,chartConfig:null,showSuccessToast:!1,reportNameAsMenuPill:{value:!0,type:"bool"},menuSelector:null,breadCrumbs:null,initialState:"reports_and_analytics.catalogue",module:{value:null,inherit:!0,squash:!0},templateName:{value:null,inherit:!0,squash:!0},dataGroup:{value:null,inherit:!0,squash:!0},prefix:{value:null,inherit:!0,squash:!0},generate:{value:!1,inherit:!1}},data:{title:"",paramsToMatchMenu:{id:!0},initialState:"reports",oxd:!0,mainMenu:!1}}},{state:"report_view_with_persistence",config:{url:"/report/persisted/{id}/{filters:escapedJson}/{breadCrumbs:escapedJson}/{menuSelector}/{backButton:escapedJson}/{reportNameAsMenuPill}",views:{"":{templateUrl:"app/core/reports/report-view.html",controller:"CoreReportViewController",controllerAs:"vm"}},params:{show_filters:!1,filters:null,chartConfig:{showSummary:null,model:{chartType:"bar_chart",groupByFieldId:"",aggregateFieldId:"",aggregateType:"",showSummaryTable:!0,hideDetailedData:!1}},showSuccessToast:!1,reportNameAsMenuPill:{value:!0,type:"bool"},menuSelector:null,breadCrumbs:null,backButton:null,initialState:null},data:{title:"Reports",paramsToMatchMenu:{id:!0}}}},{state:"report_view_oxd_with_persistence",config:{url:"/report/oxd/persisted/{id}/{filters:escapedJson}/{breadCrumbs:escapedJson}/{menuSelector}/{backButton:escapedJson}/{reportNameAsMenuPill}",views:{"":{templateUrl:"app/core/reports/report-view-oxd.html",controller:"CoreReportViewController",controllerAs:"vm"}},params:{show_filters:!1,filters:null,chartConfig:{showSummary:null,model:{chartType:"bar_chart",groupByFieldId:"",aggregateFieldId:"",aggregateType:"",showSummaryTable:!0,hideDetailedData:!1}},showSuccessToast:!1,reportNameAsMenuPill:{value:!0,type:"bool"},menuSelector:null,breadCrumbs:null,backButton:null,initialState:null},data:{title:"Reports",paramsToMatchMenu:{id:!0},oxd:!0,mainMenu:!1}}},{state:"report_definition",config:{url:"/reports/definition/{module}/{templateName}/{prefix}/{id}",params:{step:void 0,module:null,templateName:null,dataGroup:null,prefix:null,folder:null},views:{"":{templateUrl:"app/core/reports/report-definition.html",controller:"CoreReportDefinitionController",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/core/reports/report_definition_top_ribbon.html",controller:"ReportDefinitionTopRibbonController",controllerAs:"vm"}},data:{paramsToMatchMenu:{module:!0},initialState:"reports",title:"Reports"}}},{state:"dashboard",config:{url:"/dashboard",views:{"":{templateUrl:"app/core/dashboard/dashboard.html",controller:"DashboardController",controllerAs:"vm"},params:{}},data:{title:"Dashboard",oxd:!0}}}]}angular.module("app.core").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,a,i){function o(e,a){return t.call("costCentres/"+e,"GET").then(function(e){return e.data.data})}function n(e){var e=e?"1":"0";return t.call("costCentres","GET",[],{includeDeleted:e}).then(function(e){return e.data.data})}var l={getCostCentreById:o,getCostCentreList:n};return l}angular.module("app.pim").factory("costCentreService",e),e.$inject=["$q","webservice","LOGIN","localizedMessages"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/core/crud-panel.html",scope:{panelinfo:"=panelinfo",objs:"=objs",listData:"=listdata",initialsortfield:"=initialsortfield",initialsortorder:"=initialsortorder",extracontroller:"=extracontroller"},controller:function(){},controllerAs:"panels"}}angular.module("app.directives").directive("crudPanel",e)}(),function(){"use strict";function e(e,t,a,i,o,n,l){function r(e,t,a,i){"select"!=e||i||(t[a]="")}function s(e,t,a,i){return e.required.indexOf(a)>-1&&(t[a]=i["enum"][0]),t}function c(){var e=t.getEnumAndTitleMapForSelect(a.countrylist,{value:"cou_name",name:"cou_name"});return e}function d(){var e=t.getEnumAndTitleMapForSelect(a.currencyTypes,{value:"currency_name",name:"currency_name"});return e}function m(e){var a=t.getEnumAndTitleMapForSelect(e,{value:"id",name:"name"},!0);String.prototype.replaceAll=function(e,t){var a=this;return a.split(e).join(t)};for(var i=0;a.titleMap.length>i;i++)a.titleMap[i].name=a.titleMap[i].name.replaceAll(/&nbsp;/,"");return a}function u(e,a){var i;return i=e==g("country")?c():e==g("currency")?d():e==g("advance")?m(a.extraData):t.getEnumAndTitleMapForSelect(a.extraData.sort(p))}function p(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0}function f(e,t,a,i,o){e.properties[a].items={},e.properties[a].items["enum"]=o["enum"],e.properties[a].items.type="string";var n=[];if(i)if(i.constructor===Array)n=i.filter(function(e){return o["enum"].indexOf(e)>-1}),t[a]=n;else{var l=i.split(",");n=l.filter(function(e){return o["enum"].indexOf(e)>-1}),t[a]=n}else t[a]=[]}function g(e){var t=_.filter(D,{name:e});return t&&Array.isArray(t)&&t[0]?t[0].id:0}function h(e){var t=_.filter(D,{id:e});return t&&Array.isArray(t)&&t[0]?t[0].name:""}function v(e,t){var a=e.value,l=e.effective_date,r=!e.hasOwnProperty("changed")||e.changed?"Will change to {{value}} effective from {{date}}":"Will be effective from {{date}}";return a=y(a,t,!0),i.getLocalizedCustomWithVariables(r,{value:a?n.escapeText(a):"---",date:o.toLocalizedDate(l)})}function y(e,t,a){switch(t){case"date":e=e instanceof Date?o.toStandardDate(e):e?e:null,e=a&&e?o.toLocalizedDate(e):e;break;case"pim-custom-field-attachment":e=a&&e&&e.hasOwnProperty("file_name")?e.file_name:e;break;case"checkboxes":case"checkbox":e=e&&Array.isArray(e)?e.join(","):e}return e}function b(e,t,a,i,o,n){if(t==g("attachment"))return i=i===!1?null:i,"old"===n?i:o&&o.hasOwnProperty("base64")?o:e.hasOwnProperty("deletedIds")&&$.inArray(a,e.deletedIds)!=-1?null:o?o:i;var l="old"===n?e[a]:o;return null===l?"":l}function C(e,t,a,i,o){if(t==g("attachment")&&o){var n=i[a];n&&n.hasOwnProperty("filename")?(e.extraData.attachmentFileName=n.filename,delete e.extraData.attachmentUrl):n&&n.hasOwnProperty("file_name")?(e.extraData.attachmentFileName=n.file_name,delete e.extraData.attachmentUrl):i.hasOwnProperty("deletedIds")&&$.inArray(a,i.deletedIds)!=-1&&(delete e.extraData.attachmentFileName,delete e.extraData.attachmentUrl)}return e}function w(e,t,a,i){var o,n=h(parseInt(a));switch(t=y(t,n),n){case"attachment":o=!!i||!(!e&&!t)&&e!==t;break;default:o=!(!e&&!t)&&e!==t}return o}function S(e,t,a){return e&&("select"===t||"radiobuttons"===t)&&a["enum"].indexOf(e)<0}var D=[{id:0,name:"text"},{id:1,name:"select"},{id:2,name:"number"},{id:3,name:"email"},{id:4,name:"textarea"},{id:5,name:"date"},{id:6,name:"checkbox"},{id:7,name:"radio"},{id:8,name:"attachment"},{id:9,name:"currency"},{id:10,name:"country"},{id:11,name:"advance"}];return{getFieldTypeIdByFieldTypeName:function(e){return g(e)},getFieldTypeNameForFieldTypeId:function(e){return h(e)},getFormattedValue:y,getCustomFieldModelValue:b,getUpdatedFormFieldForAttachment:C,resolveFieldTypes:function(e){var t;switch(e){case"text":t="string";break;case"select":t="string";break;case"checkboxes":t="array";break;case"radiobuttons":t="string";break;case"textarea":t="string";break;default:t=["null","object"]}return t},prepareTextField:function(e,t,a){e==g("text")&&(t.properties[a].maxLength=250)},prepareTextAreaField:function(e,t,a,i){return e==g("textarea")&&(t.properties[a].maxLength=1e3,i="textarea"),i},prepareNumberField:function(t,a,i,o){t==g("number")&&(o.$validators={number:e.numericWithDigits.validator,maxNumber:function(t){return e.numericMaxValidation.validator(t,1e9,1e9)},numericMaxFiveDecimalPlaces:function(t){return e.numericMaxFiveDecimalPlaces.validator(t)}},o.validationMessage={number:e.numericWithDigits.message,maxNumber:e.numericMaxValidation.message("1,000,000,000"),numericMaxFiveDecimalPlaces:e.numericMaxFiveDecimalPlaces.message()},a[i]||(a[i]=""))},prepareEmailField:function(t,a,i,o){t==g("email")&&(i.properties[o].maxLength=50,a.$validators={email:e.email.validator},a.validationMessage={email:e.email.message,201:e.textLengthExceedValidation.message(i.properties[o].maxLength)})},prepareDateField:function(e,t,a,i,n,l){"date"==t&&(l=l&&"function"==typeof l.getMonth?o.toStandardDate(l):l,i[n]=l?new Date(l):null,e.defaultDate=l?l:null,e.resetDefaultDate={reset:!1},a.properties[n].datePickerConfig={selectMonths:!0,selectYears:100})},addPromisesToQueueToGetFileUploadSettings:function(e,t){return e.fileUploadSettings={},t.push(l.getSetting("max_attachment_size").then(function(t){e.fileUploadSettings.maxAttachmentSize=t})),t.push(l.getSetting("attachmentFileTypes").then(function(t){e.fileUploadSettings.allowedFileTypes=t})),t.push(l.getSetting("max_attachment_size").then(function(t){e.fileUploadSettings.allowedFileTypesDisplayName=t})),t},prepareAttachmentField:function(e,t,a,o,n,l,r,s,c){e==g("attachment")&&(t.extraData.attachmentFileName&&(n.attachmentFileName=t.extraData.attachmentFileName,n.permissions=l,n.customFieldId=o,n.sequenceNumber=t.sequenceNumber,n.deleteCallback=r,n.attachmentUrl=t.extraData.attachmentUrl),n.maxSize=s.maxAttachmentSize,n.allowedFileTypes=s.allowedFileTypes,n.allowedFileTypesDisplayName=s.allowedFileTypesDisplayName,n.sectionIndex=c,n.onFileChange=function(e){a.filename=e,n.filename=e.filename},n.validationMessage={fileSize:i.getLocalizedCustom("Attachment size exceeded"),fileType:i.getLocalizedCustom("Attachment type invalid")})},prepareGroupedFields:function(e,t,a,i,o,n,l,c,d){if("select"==t||"radiobuttons"==t||"checkboxes"==t){"select"==t&&(l.ngModelOptions={allowInvalid:!0}),r(t,i,o,n);var m=u(e,c);S(n,t,m)&&(i[o]=""),"radiobuttons"!=t||n||(i=s(a,i,o,m)),l.titleMap=m.titleMap,"checkboxes"==t?f(a,i,o,n,m):a.properties[o]["enum"]=m["enum"],l.prefix=d}},prepareConditionalFields:function(e,t,a,i,o,n,l){(i||a.parentCustomFieldId&&"object"!=typeof a.parentCustomFieldId&&a.parentCustomFieldValue&&"object"!=typeof a.parentCustomFieldValue)&&(e.condition=function(){var e,r,s=!0;return a.parentCustomFieldId&&"object"!=typeof a.parentCustomFieldId&&a.parentCustomFieldValue&&"object"!=typeof a.parentCustomFieldValue&&(s=t[a.parentCustomFieldId]==a.parentCustomFieldValue||t[a.parentCustomFieldId].indexOf(a.parentCustomFieldValue)>-1),s&&i&&(e=y(t[o+"_old_value"],n),r=y(t[o],n),s=!t.changedFieldsOnly||0==t.changedFieldsOnly||!_.isEqual(r,e)||!r&&l),s})},setLocalizedRequiredMessage:function(e){e.validationMessage||(e.validationMessage={}),e.validationMessage[302]=i.getLocalizedCustom("Required")},setLocalizedLengthValidation:function(t,a,i,o){o.validationMessage||(o.validationMessage={}),t!=g("text")&&t!=g("textarea")||(o.validationMessage[201]=e.textLengthExceedValidation.message(a.properties[i].maxLength))},setLabelProperties:function(e,t,a,i,o){i&&(e.hideLabel=!0),!o&&a.hasOwnProperty(t)&&(e.labelIcon="ohrm_future_date",e.labelHint=v(a[t],e.type))},addDateRequiredValidation:function(t){t.$validators={dateRequiredValidation:function(t){return e.dateRequiredValidation.validator(t);
}},t.validationMessage={dateRequiredValidation:e.dateRequiredValidation.message}},addToRequiredFields:function(e,t,a){return(a.typeDetails.attributes.required||a.required)&&e.push(t),e},prepareParentField:function(e,t,a,i,o){for(var n in a)a[n]==t&&(e.onChange=function(e){void 0!==e&&"checkboxes"!=o&&i.$broadcast("schemaFormRedraw")})},getFormattedPostParams:function(e,t){var a=[],i=t.values;if(i)for(var n=0;n<i.length;n++){var l=e[i[n].customFieldId];if("date"==i[n].fieldType&&(l=l instanceof Date?o.toStandardDate(e[i[n].customFieldId]):null),"pim-custom-field-attachment"==i[n].fieldType){var r=i[n].customFieldId,s=e[r];if(s&&void 0===s.base64)continue}var c={custom_field_id:i[n].customFieldId,type:i[n].type,value:l,extra_data:i[n].unmodifiedExtraData};a.push(c)}var d=[{section:t.id,values:a}];return d},getModifiedCustomFields:function(e,t,a){var i=[],o=a?t.values:null;if(o)for(var n=0;n<o.length;n++){var l=o[n].customFieldId,r=e[l],s=o[n].value,c=o[n].type,d=e.hasOwnProperty("deletedIds")&&$.inArray(l,e.deletedIds)!=-1;w(s,r,c,d)&&i.push(o[n].customFieldId)}return i},considerFullLength:function(e,t){if("modal-sm"==t)return!0;var a=!1;switch(e){case"checkboxes":case"radiobuttons":case"pim-custom-field-attachment":a=!0;break;default:a=!1}return a},getEmptyRow:function(){return{type:"row",items:[]}}}}angular.module("app.core").factory("customFieldHelper",e),e.$inject=["formValidationHelper","formHelper","$rootScope","localizedMessages","dateService","pimHelper","settingsService"]}(),function(){"use strict";function e(e,t,a){function i(e){return _.filter(e,{embed_in_standard_section:!1})}function o(){return e.call("customFieldScreens","GET",[],{}).then(function(e){var a=t.getSortedObjectList(e.data.data,function(e){return e.DataGroup.DataGroup.MenuItem.menuTitle},"ASC");return a})}function n(e){for(var t=[],i=[],o=0;o<e.length;o++)t.push({value:e[o].id,name:a.getLocalizedCustom(e[o].DataGroup.DataGroup.MenuItem.menuTitle)}),i.push(e[o].id);return{titleMap:t,"enum":i}}function l(e,t){for(var a=_.filter(t,{id:e}),i=[],o=0;o<t.length;o++)t[o].embed_in_standard_section&&t[o].Screen.id==a[0].Screen.id&&i.push(t[o].id);return i}return{getCustomFieldScreensWhichUserAllowedToAddSections:i,getSortedCustomFieldScreens:o,getCustomFieldScreensForForm:n,filterStandardCustomFieldScreenIdsForScreenOfGivenCustomFieldScreenId:l}}angular.module("app.core").factory("customFieldSectionHelper",e),e.$inject=["webservice","formHelper","localizedMessages"]}(),function(){"use strict";function e(e){return{restrict:"E",templateUrl:"app/core/dashboard/charts/performanceTrackerFeedbackBarChart/performance-tracker-feedback-bar-chart.html",scope:{graphId:"=graphId",data:"=data",options:"=options"},controllerAs:"vm",bindToController:!0,controller:t,link:function(e,t,a,i){}}}function t(e,t,a,i,o){function n(e,a,i){var o,n=function(e,t,a,i){for(var o="<div style = 'width: 120px' class='multi-value-tooltip'><table class='multi-value-tooltip-table'>",n=0;n<e.length;n++){var l=e[n],r=sanitise(l.name),s=sanitise(l.value),c=i(l.id);o=o+"<tr><td><span class='indicator' style='background-color: "+c+"'></span></td><td class='title-container'><span class='title' style='word-break: break-word; overflow-wrap: break-word;'>"+r+"</span></td><td><span class='value'>"+s+"</span></td></tr>"}return o+"</table></div>"};t(function(){c3.chart.internal.fn.additionalConfig={oxd_styles:!0,bar_radiusAll:!1,bar_radius:l.options.barRadius},o=c3.generate({bindto:"#"+l.graphId,size:{height:l.options.height,width:225},color:{pattern:l.options.colorPattern},data:{x:l.options.labelKey,labels:!1,columns:a,type:"bar"},axis:{rotated:l.options.axisRotated,x:{show:!1,type:"category",tick:{multiline:!1}},y:{show:!1}},legend:{show:!1},tooltip:{contents:n,show:!0,position:function(e,t,a,i){var o=i.attributes.style&&i.attributes.style.value.indexOf("cursor: pointer;")!==-1;if(o){var n=$("#"+l.graphId).offset().left,r=$("#"+l.graphId).offset().top,s=d3.event.pageX-n+10,c=d3.event.pageY-r-a/2;0===e[0].x&&d3.event.pageY-r+35<a/2&&(c=-35),3===e[0].x&&$("#"+l.graphId).height()-(d3.event.pageY-r)<a/2&&(c=$("#"+l.graphId).height()-a),d3.event.pageX-n>$("#"+l.graphId).width()/2&&(s=d3.event.pageX-n-t-10)}else var s=-9999,c=-9999;return{top:c,left:s}}},bar:{width:{ratio:.6},spacing:10}})})}var l=this;n(l.id,l.data,l.options)}angular.module("app.core").directive("performanceTrackerFeedbackBarChart",e),e.$inject=["$translate"],t.$inject=["$scope","$timeout","localizedMessages","reportSummaryHelper","$rootScope"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s){var c=this;c.type=t.MAIN_DASHBOARD_ID,i.fetchWidgets(t.MAIN_DASHBOARD_ID).then(function(e){i.showSystemMessage(),c.widgets=e.data,l(function(){r.getPermissions()})}),s.$on("$destroy",function(){var e=document.activeElement;e&&e.blur()})}angular.module("app.core").controller("DashboardController",e),e.$inject=["$stateParams","dashboardConstants","$state","dashboardService","toast","localizedMessages","$timeout","datagroupPermissions","$scope"]}(),function(){"use strict";function e(e,t,a,i,o,n){function l(t,a){var i=[];return _.forEach(t,function(e){if(e.id===a){var t={id:e.id,userConfig:{isEnabled:!1}};i.push(t)}}),{mode:e.WIDGET_CONFIG_UPDATE,configurations:i}}function r(e,t){}var s={restrict:"E",templateUrl:"app/core/dashboard/directive/dashboard-layout.html",scope:{widgets:"=widgets",type:"=type"},controller:r,controllerAs:"vm",link:function(o){t.options(o,"bag",{isContainer:function(e){return!1},moves:function(e,t,a,i){return!0},accepts:function(e,t,a,i){return!0},invalid:function(e,t){return!1},copy:!1,copySortSource:!1,revertOnSpill:!0,removeOnSpill:!1,mirrorContainer:document.body,ignoreInputTextSelection:!0}),o.$on("bag.dragend",function(t,n){i(function(){var i=a.getChangedOrder(t.targetScope.widgets);if(_.keys(i).length>0){var n={typeId:o.type,mode:e.WIDGET_ORDER_UPDATE,order:i};a.updateConfiguredWidgets(n)}})}),o.$on("removeDashboardWidget",function(e,t){var i=l(angular.copy(o.widgets),t);i.typeId=o.type,a.updateConfiguredWidgets(i).then(function(e){n.successToast("Successfully Removed"),e=a.appendEmployeeDetails(e,o.widgets,o.type),o.widgets=e})})}};return r.$inject=["dashboardService","$scope"],s}angular.module("app.core").directive("dashboardLayout",e),e.$inject=["dashboardConstants","dragulaService","dashboardService","$timeout","ModalService","localizedMessages"]}(),function(){"use strict";function e(){function e(e){var t=this;t.getWidgetClasses=function(t){return e.getWidgetClasses(t)}}var t={restrict:"E",templateUrl:"app/core/dashboard/directive/widget-container.html",scope:{widgets:"=widgets"},controller:e,controllerAs:"vm",link:function(e){}};return e.$inject=["dashboardService"],t}angular.module("app.core").directive("widgetContainer",e),e.$inject=[]}(),function(){"use strict";angular.module("app.core").constant("dashboardConstants",{MAIN_DASHBOARD_ID:1,EMPLOYEE_PROFILE_ID:2,LAYOUT_BASE_PATH:"app/core/dashboard/layout",DASHBOARD_WIDGETS_KEY:"dashboard_widget_key",WIDGET_SIZE_A:"size_a",WIDGET_SIZE_B:"size_b",WIDGET_SIZE_C:"size_c",WIDGET_SIZE_D:"size_d",WIDGET_SIZE_E:"size_e",WIDGET_SIZE_F:"size_f",WIDGET_SIZE_G:"size_g",WIDGET_SIZE_H:"size_h",WIDGET_SIZE_I:"size_i",WIDGET_SIZE_J:"size_j",WIDGET_FETCH_ACTION_ADD:"add",WIDGET_FETCH_ACTION_VIEW:"view",WIDGET_ORDER_UPDATE:"order_update",WIDGET_CONFIG_UPDATE:"config_update"})}(),function(){"use strict";function e(e,t,a,i){function o(e){return a.call("dashboard/widgets","GET",[],{typeId:e}).then(function(e){return e.data})}function n(e,t){return a.call("dashboard/widgets","GET",[],{typeId:e,employeeId:t}).then(function(e){return e.data})}function l(e){for(var t={},a=0;a<e.length;a++)a+1!=e[a].order&&(t[e[a].id]=a+1,e[a].order=a+1);return t}function r(t){var a="";switch(t){case e.WIDGET_SIZE_A:a="col-12 rh-2";break;case e.WIDGET_SIZE_B:a="col-3 rh-2";break;case e.WIDGET_SIZE_C:a="col-4 rh-2";break;case e.WIDGET_SIZE_D:a="col-4 rh-3";break;case e.WIDGET_SIZE_E:a="col-4 rh-5";break;case e.WIDGET_SIZE_F:a="col-6 rh-3";break;case e.WIDGET_SIZE_G:a="col-8 rh-3";break;case e.WIDGET_SIZE_H:a="col-8 rh-5";break;case e.WIDGET_SIZE_I:a="col-5 rh-2";break;case e.WIDGET_SIZE_J:a="col-12 rh-3"}return a}function s(e){return a.call("dashboard/widgets","PATCH",e,{}).then(function(e){return e.data.data})}function c(e,t){return a.call("dashboard/widgets/"+e,"PATCH",t,{}).then(function(e){return i.showLocalizedToast("saveSuccess"),e.data.data})}function d(e,t,a){if(t&&t.widgetIcon)return a?t.widgetIcon:t.widgetIcon.replaceAll("-","_");var i;switch(e){case"buzz-posts-widget":i="monochrome_photos";break;case"employee-on-leave-widget":i="ohrm_exit";break;case"time-at-work-widget":i="timelapse";break;case"performance-tracker-quick-add-widget":i="ohrm_gauge";break;case"my-actions-widget":i="ohrm_brief_case";break;case"quick-access-widget":i="ohrm_thin_bolt";break;case"latest-news-widget":i="ohrm_newspaper";break;case"latest-documents-widget":i="ohrm_writing";break;default:i="people"}return i}function m(){if(OHRM.systemMessage&&i.onLocalizationLoaded().then(function(){toast.show(OHRM.systemMessage.severity,OHRM.systemMessage.message),delete OHRM.systemMessage}),null!==localStorage.getItem("dashboardToast")){var e=JSON.parse(localStorage.getItem("dashboardToast"));"success"==e.type?i.successToast(e.message):"error"===e.type?i.errorToast(e.message):i.warningToast(e.message),localStorage.removeItem("dashboardToast")}}function u(e,t,a){return e=e.map(function(e){var i=t.find(function(e){return angular.isObject(e.config.employee)}),o=t.some(function(t){return t.id===e.id&&t.config.employeeNumber});return 2==a&&(e.config.reportId||o)&&(e.config.employeeNumber=i.config.employeeNumber,e.config.employee=i.config.employee),e})}var p={getWidgetClasses:r,getChangedOrder:l,fetchWidgets:o,fetchWidgetsForEmployeeId:n,updateConfiguredWidgets:s,updateWidgetConfig:c,getWidgetIcon:d,showSystemMessage:m,appendEmployeeDetails:u};return p}angular.module("app.core").service("dashboardService",e),e.$inject=["dashboardConstants","$localStorage","webservice","localizedMessages"]}(),function(){"use strict";function e(e,a){var i={restrict:"E",templateUrl:"app/core/dashboard/widget/buzzPosts/buzz-posts-widget.html",scope:{id:"=widgetId",name:"=widgetName",widgetGlobalConfig:"=widgetGlobalConfig",config:"=config",title:"=widgetTitle"},controller:t,controllerAs:"vm",link:function(e){e.deleteWidget=function(){e.$emit("removeDashboardWidget",e.id)},e.getWidgetIcon=function(){return a.getWidgetIcon(e.name,e.widgetGlobalConfig,!1)}}};return i}function t(e,t,a,i){function o(e){e?401===e.status||403===e.status?n.allowed=!1:n.allowed=!0:a.reject(e)}var n=this;n.showLoader=!0,n.allowed=!1,n.posts=[],n.postClick=function(){window.open(n.buzzUrl,"_blank")},n.getFormattedDate=function(e){return i.localizeTimestamp(e)};var l={limit:5,include:"Employee"};t.call("buzz/shares","GET",[],l).then(function(e){n.allowed=!0,n.posts=e.data.data,n.buzzUrl=e.data.meta.buzzUrl},function(e){o(e)})["finally"](function(){n.showLoader=!1})}angular.module("app.core").directive("buzzPostsWidget",e),e.$inject=["$timeout","dashboardService"],t.$inject=["dashboardService","webservice","$q","dateService"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/core/dashboard/widget/common/article-tile.html",scope:{articleDetails:"=",config:"="},link:function(e,t,a,i){},controller:t,controllerAs:"vm"}}function t(e,t,i,o){function n(){t.config.fetch(c.articleId).then(function(e){t.articleDetails=l(e)})["finally"](function(){})}function l(e){var t=s(e.description),a={id:e.id,image:r(e.description),hasImage:t,topic:e.topic,date:i.toLocalizedDate(e.published_date)};return t||(a.colorClass=c.colorClass),a}function r(e){var t=document.createElement("div");t.innerHTML=o.sanitizeTinymceContent(e);var a=t.querySelector("img");if(a)return a.outerHTML}function s(e){var t=document.createElement("div");t.innerHTML=o.sanitizeTinymceContent(e);var a=t.querySelector("img");return!!a}var c=this;c.articleId=t.articleDetails.id,c.colorClass=t.articleDetails.colorClass,c.classPreceding=t.config.classPreceding,c.scope=t,c.articleClicked=a,n()}function a(e,t){t.scope.config.articleClicked(e)}angular.module("app.directives").directive("articleTile",e),e.$inject=[],t.$inject=["$rootScope","$scope","dateService","sanitizeService"]}(),function(){"use strict";function e(){var e={restrict:"A",template:"",scope:{id:"=id",name:"=name",title:"=widgetTitle",size:"=size",isWidgetActive:"=isWidgetActive",config:"=config",widgetGlobalConfig:"=widgetGlobalConfig"},controller:t,controllerAs:"widget"};return e}function t(e,t,a){function i(e,t){return e.startsWith(t)}var o;o=i(a.name,"report_chart_")?"report-chart-widget":i(a.name,"vue-")?"vue-dashboard-widget":a.name;var n="<"+o+' widget-name="name" widget-title="title" is-widget-active="isWidgetActive" config="config" widget-global-config="widgetGlobalConfig" widget-id="id"></'+o+">",l='<span class="dashboard-complete-widget"><span class="widget-content-container">'+n+"</span></span>",r=e(l)(a);t.append(r)}angular.module("app.core").directive("dashboardWidget",e),e.$inject=[],t.$inject=["$compile","$element","$scope"]}(),function(){"use strict";function e(e,t,a,i,o){function n(){l()}function l(){o&&(s.model=angular.copy(o.settings),s.headerConfig={type:"compact-widget-header",icon:o.widgetIcon,subHeading:o.widgetTitle,heading:"Configurations"},s.schema={type:"object",title:"Employees on Leave Configuration",properties:{onlyReportingEmployees:{title:"Only Show Employees Reporting To Me",type:"boolean"}},required:[]},s.form=[{type:"row",items:[{type:"checkbox",htmlClass:"col-12",key:"onlyReportingEmployees"}]}])}function r(){e(s.model)}var s=this;s.save=r,n()}angular.module("app.core").controller("ConfigureEmployeesOnLeaveController",e),e.$inject=["close","dashboardConstants","dashboardService","$timeout","modalInput"]}(),function(){"use strict";function e(e,a,i){var o={restrict:"E",templateUrl:"app/core/dashboard/widget/employeeOnLeave/employee-on-leave-widget.html",scope:{id:"=widgetId",name:"=widgetName",widgetGlobalConfig:"=widgetGlobalConfig",config:"=config",title:"=widgetTitle"},controller:t,controllerAs:"vm",link:function(e,t,o,n){function l(){a.showModal("app/core/dashboard/widget/employeeOnLeave/configure/configure-employees-on-leave.html","ConfigureEmployeesOnLeaveController","modal",{modalInput:{settings:e.config.settings,widgetIcon:e.getWidgetIcon(),widgetTitle:e.title}}).then(function(t){if(t){var a=r(t);i.updateWidgetConfig(e.id,a).then(function(t){e.config=t.config,n.activate()})}})}function r(e){var t=angular.copy(e);return{settings:t}}e.deleteWidget=function(){e.$emit("removeDashboardWidget",e.id)},e.getWidgetIcon=function(){return i.getWidgetIcon(e.name,e.widgetGlobalConfig,!1)},e.openConfigurations=function(){l()}}};return o}function t(e,t,a,i,o){function n(){c.showLoader=!0,c.allowed=!1;var e=moment().format("YYYY-MM-DD"),o=angular.copy(i.config),n=angular.copy(i.widgetGlobalConfig),m=l(d,n.excludedLeaveStatuses),u={end:e,start:e,includeSubordinates:!0,leaveStatus:m,onlyReportingEmployees:o.settings.onlyReportingEmployees};t.call("leaveEvents","GET",[],u).then(function(e){var t=e.data.data;a.getPhotos(t).then(function(e){c.allowed=!0,c.images=s(e),c.leaves=t},function(e){r(e)})["finally"](function(){c.showLoader=!1})},function(e){c.showLoader=!1,r(e)})}function l(e,t){var a=[],i=[-2];return _.forEach(t,function(e){a.push(e.toLowerCase())}),_.forEach(e,function(e,t){a.indexOf(e.toLowerCase())===-1&&i.push(t)}),i}function r(e){e?401===e.status||403===e.status?c.allowed=!1:c.allowed=!0:o.reject(e)}function s(e){for(var t=[],a=0;a<e.length;a++)t[e[a].id]=e[a];return t}var c=this;c.activate=n,c.showLoader=!0,c.allowed=!1,c.leavePeriodNotDefined=!1,c.leaves=[];var d=[],m={leavePeriod:t.call("leavePeriod","GET",{}),leaveStatusList:t.call("leaveStatusList","GET",[])};o.all(m).then(function(e){var t=e.leavePeriod.data.data;d=e.leaveStatusList.data.data,t.leavePeriodDefined?n():(c.leavePeriodNotDefined=!0,c.showLoader=!1,c.allowed=!1)},function(e){c.showLoader=!1,r(e)})}angular.module("app.core").directive("employeeOnLeaveWidget",e),e.$inject=["$timeout","modalHelperService","dashboardService"],t.$inject=["dashboardService","webservice","employeeService","$scope","$q"]}(),function(){"use strict";function e(e){var a={restrict:"E",templateUrl:"app/core/dashboard/widget/latestDocuments/latest-documents-widget.html",scope:{id:"=widgetId",name:"=widgetName",widgetGlobalConfig:"=widgetGlobalConfig",config:"=config",title:"=widgetTitle"},controller:t,controllerAs:"vm",link:function(t){t.deleteWidget=function(){t.$emit("removeDashboardWidget",t.id)},t.getWidgetIcon=function(){return e.getWidgetIcon(t.name,t.widgetGlobalConfig,!1)}}};return a}function t(e,t,a,i,o,n,l){function r(){p.documentConfig={fetch:function(e){var a={ids:[e]},i={include:"detailedDescription",filter:a};return t.call("documents/my","GET",[],i).then(function(e){return e.data.data[0]})},articleClicked:function(e){e.id&&window.open(i.clientBase+"#/noncore/news/viewDocumentArticle/type/documents/status/published/docId/"+e.id,"_self")},icon:"ohrm_writing",classPreceding:"documents"}}function s(e){e?401===e.status||403===e.status?p.allowed=!1:p.allowed=!0:o.reject(e)}function c(e){var t=e%5;return"item-color-"+(t+1)}function d(e){for(var t=[],a=0,i=0;i<e.length;i++){var o=u(e[i].description),l={id:e[i].id,image:m(e[i].description),hasImage:o,topic:e[i].topic,date:n.toLocalizedDate(e[i].published_date)};o||(l.colorClass=c(a),a++),t.push(l)}return t}function m(e){var t=document.createElement("div");t.innerHTML=l.sanitizeTinymceContent(e);var a=t.querySelector("img");if(a)return a.outerHTML}function u(e){var t=document.createElement("div");t.innerHTML=l.sanitizeTinymceContent(e);var a=t.querySelector("img");return!!a}var p=this;p.documents=[],p.showLoader=!0,p.allowed=!1;var f={filter:{acknowledgement:0,status:{0:2}},include:"summaryDescription"};t.call("documents/my","GET",[],f).then(function(e){p.documents=d(e.data.data),r(),p.allowed=!0},function(e){s(e)})["finally"](function(){p.showLoader=!1})}angular.module("app.core").directive("latestDocumentsWidget",e),e.$inject=["dashboardService"],t.$inject=["dashboardService","webservice","$state","LOGIN","$q","dateService","sanitizeService"]}(),function(){"use strict";function e(e){var a={restrict:"E",templateUrl:"app/core/dashboard/widget/latestNews/latest-news-widget.html",scope:{id:"=widgetId",name:"=widgetName",widgetGlobalConfig:"=widgetGlobalConfig",config:"=config",title:"=widgetTitle"},controller:t,controllerAs:"vm",link:function(t){t.deleteWidget=function(){t.$emit("removeDashboardWidget",t.id)},t.getWidgetIcon=function(){return e.getWidgetIcon(t.name,t.widgetGlobalConfig,!1)}}};return a}function t(e,t,a,i,o,n){function l(e){e?401===e.status||403===e.status?u.allowed=!1:u.allowed=!0:i.reject(e)}function r(){u.newsConfig={fetch:function(e){var a={ids:[e]},i={include:"detailedDescription",filter:a};return t.call("news/my","GET",[],i).then(function(e){return e.data.data[0]})},articleClicked:function(e){if(e.id){var t={newsId:e.id};a.go("news.news_list.news",t)}},icon:"ohrm_newspaper",classPreceding:"news"}}function s(e){var t=e%5;return"item-color-"+(t+1)}function c(e){for(var t=[],a=0,i=0;i<e.length;i++){var n=m(e[i].description),l={id:e[i].id,image:d(e[i].description),hasImage:n,topic:e[i].topic,date:o.toLocalizedDate(e[i].published_date)};n||(l.colorClass=s(a),a++),t.push(l)}return t}function d(e){var t=document.createElement("div");t.innerHTML=n.sanitizeTinymceContent(e);var a=t.querySelector("img");if(a)return a.outerHTML}function m(e){var t=document.createElement("div");t.innerHTML=n.sanitizeTinymceContent(e);var a=t.querySelector("img");return!!a}var u=this;u.title="Latest News",u.news=[],u.showLoader=!0,u.allowed=!1;var p={filter:{acknowledgement:0,status:{0:2}},include:"summaryDescription"};t.call("news/my","GET",[],p).then(function(e){u.news=c(e.data.data),r(),u.allowed=!0},function(e){l(e)})["finally"](function(){u.showLoader=!1})}angular.module("app.core").directive("latestNewsWidget",e),e.$inject=["dashboardService"],t.$inject=["dashboardService","webservice","$state","$q","dateService","sanitizeService"]}(),function(){"use strict";function e(e,t,a,i,o){function n(){l()}function l(){o&&(c.model=angular.copy(o.settings),c.permissions=o.permissions,c.widgetIcon=o.widgetIcon)}function r(){e(c.model)}function s(e){for(var t=!1,a=0;a<e.length;a++)if(c.permissions[e[a]]){t=!0;break}return t}var c=this;c.save=r,c.hasPermissions=s,n()}angular.module("app.core").controller("ConfigureMyActionsController",e),e.$inject=["close","dashboardConstants","dashboardService","$timeout","modalInput"]}(),function(){"use strict";function e(e){function t(e,t){var a=moment().format("YYYY-MM-DD"),i=(moment.utc().format("YYYY-MM-DD"),angular.copy(t));return i.date=a,i.timezone=moment.tz.guess(),i.widgetId=e,i}function a(t){return e.call("myActions","GET",[],t).then(function(e){return e.data})}function i(e){var t=angular.copy(e);return"summary"==t.pendingApprovalTimesheetView&&delete t.pendingApprovalTimesheetShowSubordinatesOnly,"summary"==t.pendingApprovalAttendanceSheetView&&delete t.pendingApprovalAttendanceSheetShowSubordinatesOnly,"summary"==t.pendingApprovalLeaveView&&delete t.pendingApprovalLeaveShowSubordinatesOnly,"summary"==t.pendingApprovalGoalView&&delete t.pendingApprovalGoalShowSubordinatesOnly,t.showPendingLeavesToApprove||(t.pendingApprovalLeaveView="summary"),t.showPendingTimesheetsToApprove||(t.pendingApprovalTimesheetView="summary"),t.showPendingAttendanceSheetsToApprove||(t.pendingApprovalAttendanceSheetView="summary"),t.showGoalsToApprove||(t.pendingApprovalGoalView="summary"),t.showPendingAppraisalReviews||(t.pendingAppraisalReviewView="summary"),{settings:t}}var o={getFormattedMyActionConfigToSave:i,fetchMyActions:a,getMyActionGetParameters:t};return o}angular.module("app.core").service("myActionWidgetHelper",e),e.$inject=["webservice"]}(),function(){"use strict";function e(e,a,i,o){var n={restrict:"E",templateUrl:"app/core/dashboard/widget/myActions/my-actions-widget.html",scope:{id:"=widgetId",name:"=widgetName",widgetGlobalConfig:"=widgetGlobalConfig",config:"=config",title:"=widgetTitle"},controller:t,controllerAs:"vm",link:function(e,t,n,l){function r(){a.showModal("app/core/dashboard/widget/myActions/configure/configure-my-actions.html","ConfigureMyActionsController","modal",{modalInput:{settings:e.config.settings,permissions:l.metaData.permissions,widgetIcon:e.getWidgetIcon()}}).then(function(t){if(t){var a=o.getFormattedMyActionConfigToSave(t);i.updateWidgetConfig(e.id,a).then(function(t){e.config=t.config,l.activate()})}})}e.deleteWidget=function(){e.$emit("removeDashboardWidget",e.id)},e.openConfigurations=function(){r()},e.getWidgetIcon=function(){return i.getWidgetIcon(e.name,e.widgetGlobalConfig,!1)}}};return n}function t(e,t,a,i,o,n,l,r,s,c,d,m){function u(){V.showLoader=!0,V.allowed=!1,V.hasActionsToPerform=!1;var e=r.getMyActionGetParameters(i.id,i.config),t={actions:r.fetchMyActions(e)};o.all(t).then(function(e){V.actionSections=e.actions.data,V.metaData=e.actions.meta,V.hasActionsToPerform=V.metaData.totalActionCount>0,V.allowed=!0},function(e){f(e)})["finally"](function(){V.showLoader=!1})}function p(){var e=V.metaData?V.metaData.permissions:void 0;return!(!e||!(e.appraisal_reviews_to_submit||e.employee_reviews_to_submit||e.goals_to_approve||e.interviews||e.leaves_to_approve||e.onboarding_events_and_tasks||e.self_reviews_to_submit||e.timesheets_to_approve||e.attendance_sheets_to_approve||e.trainings))}function f(e){e?401===e.status||403===e.status?V.allowed=!1:V.allowed=!0:o.reject(e)}function g(e,t){return e.category==t&&e.actions.length>0}function h(e){var t=!1;switch(e){case"actionWithoutDueDetailed":t=V.metaData.actionCountWithDue>0;break;case"actionWithoutDueSummary":t=V.metaData.actionCountWithDue>0||V.metaData.actionCountWithoutDueDetailed>0;break;default:t=!1}return t}function v(e){var t=null;switch(e){case"interviews":t="ohrm_interview";break;case"trainings":t="ohrm_training_cap";break;case"onboarding_events_and_tasks":t="ohrm_handshake";break;case"timesheets_to_approve":t="ohrm_clock_with_calendar";break;case"attendance_sheets_to_approve":t="check_list";break;case"leaves_to_approve":t="ohrm_clock_with_person";break;case"goals_to_approve":t="ohrm_bullseye";break;case"appraisal_reviews_to_submit":case"employee_reviews_to_submit":case"self_reviews_to_submit":t="ohrm_star_employee";break;default:t=null}return t}function y(e){var t="";switch(e.actionType){case"interviews":t=d.getLocalizedCustom(e.interviewName)+" - "+e.vacancyName;break;case"trainings":t=s.instant("Training");break;case"onboarding_events_and_tasks":t=d.getLocalizedCustom(e.category);break;case"timesheets_to_approve":t=s.instant("Timesheet");break;case"attendance_sheets_to_approve":t=s.instant("Attendance Sheet");break;case"leaves_to_approve":t=s.instant("Leave Request");break;case"goals_to_approve":t=s.instant("Goal - "+e.levelName),"objective"==e.category&&(t=s.instant("OKR - "+e.levelName));break;case"appraisal_reviews_to_submit":t=s.instant(b(e.evaluatorGroup)+" Review");break;default:t=""}return t}function b(e){var t=e;switch(e){case"Supervisors":case"Peers":case"Subordinates":t=e.slice(0,-1);break;default:t=e}return t}function C(e){var t="";switch(e.actionType){case"interviews":t=e.candidateName;break;case"trainings":t=e.trainingName+" ("+s.instant(e.type)+")";break;case"onboarding_events_and_tasks":t=e.eventName,e.participant&&(t+=" - "+e.participant);break;case"timesheets_to_approve":t=E(e,e);break;case"attendance_sheets_to_approve":t=E(e,e.AttendanceSheetPeriod);break;case"leaves_to_approve":t=I(e);break;case"goals_to_approve":t=s.instant(e.name)+" - "+e.empName;break;case"appraisal_reviews_to_submit":t=e.appraisalOwner;break;default:t=""}return t}function w(e){var t="";switch(e.actionType){case"interviews":t=k(e);break;case"trainings":t=L(e);break;case"onboarding_events_and_tasks":t=_(e);break;case"appraisal_reviews_to_submit":t=P(e);break;default:t=""}return t}function _(e){return D(e.dueDate)}function S(e){var t=s.instant("Today"),a=s.instant("Tomorrow"),i="";if(e){var o=moment(),n=moment().add(1,"days");i=e===moment(o).format("YYYY-MM-DD")?t:e===moment(n).format("YYYY-MM-DD")?a:s.instant(e.format("MMM"))+" "+s.instant(e.format("Do"))}return i}function D(e){var t=s.instant("Today"),a=s.instant("Tomorrow"),i="";if(e){var o=moment(),n=moment().add(1,"days"),l=moment(new Date(e));i=moment(l).format("YYYY-MM-DD")===moment(o).format("YYYY-MM-DD")?t:moment(l).format("YYYY-MM-DD")===moment(n).format("YYYY-MM-DD")?a:s.instant(moment(l).format("MMM"))+" "+s.instant(moment(l).format("Do"))}return i}function T(e){var t="";switch(e.actionType){case"employee_reviews_to_submit":t="Pending Appraisal Review"+x(e);break;case"self_reviews_to_submit":t="Pending Self Review"+x(e);break;case"leaves_to_approve":t="Leave Request"+x(e)+" to Approve";break;case"timesheets_to_approve":t="Timesheet"+x(e)+" to Approve";break;case"attendance_sheets_to_approve":t="Attendance Sheet"+x(e)+" to Approve";break;case"goals_to_approve":t="Goal"+x(e)+"/OKR"+x(e)+" to Approve";break;default:t=""}return t}function x(e){var t="";return e.recordCount>1&&(t="s"),t}function F(e){if("attendance_sheets_to_approve"==e.actionType){var t="1"===e.isDeletedPayPolicy?" ("+d.getLocalizedCustom("Deleted")+")":"";return e.payPolicyName+t}return""}function k(e){var t="",a=moment(),i=moment.utc(e.date).local(),o=i.format("YYYY-MM-DD");if(o!==a.format("YYYY-MM-DD"))t=S(o);else{var n=e.date;e.hasTimeZone&&(n=moment.utc(e.date)),t=moment(n).local().format("hh:mm A")}return t}function E(e,t){return e.empName+" ("+m.getDateRageTextInMonthDateFormat(t,s.instant("to"))+")"}function I(e){return e.empName+" ("+e.leaveType+")"}function A(e){var t;if(1==e.leaveCount){if(t=s.instant(moment(e.dateRange.from).format("MMM"))+" "+s.instant(moment(e.dateRange.from).format("Do")),e.dateRange.halfDay){e.dateRange.halfDayText&&(t+=" - "+s.instant(e.dateRange.halfDayText));var a=e.dateRange.time.split("-").map(function(e){return e.trim()});t+=" ("+M(a[0])+" "+s.instant("to")+" "+M(a[1])+")"}}else{var i=e.hourBased?"hour":"day";1!=parseFloat(e.leaveAmount)&&(i+="s"),t=s.instant(moment(e.dateRange.from).format("MMM"))+" "+s.instant(moment(e.dateRange.from).format("Do"))+" "+s.instant("to")+" "+s.instant(moment(e.dateRange.to).format("MMM"))+" "+s.instant(moment(e.dateRange.to).format("Do"))+" - "+e.leaveAmount+" "+s.instant(i)}return t}function M(e){return moment(e,"HH:mm").format("h:mm A")}function L(e){var t="";return t=e.startDate?s.instant(moment(e.startDate).format("MMM"))+" "+s.instant(moment(e.startDate).format("Do"))+" "+s.instant("to")+" "+s.instant(moment(e.dueDate).format("MMM"))+" "+s.instant(moment(e.dueDate).format("Do")):D(e.dueDate)}function P(e){return D(e.dueDate)}function $(e,t){var a,i,o="_self";a=t?N(e):O(e),e.openLinkInNewWindow&&(o="open_window",i="height=1600,width=1800,directories=no,titlebar=no,toolbar=no,location =0,status=no,menubar=no,resizable=yes,scrollbars=yes"),e.openLinkInNewTab&&(o="_blank"),a&&window.open(a,o,i)}function N(e){var t=null;switch(e.actionType){case"self_reviews_to_submit":case"employee_reviews_to_submit":t=z(e);break;case"leaves_to_approve":t=z(e);break;case"timesheets_to_approve":case"attendance_sheets_to_approve":t=z(e);break;case"goals_to_approve":var i=j(e.actionType);n[i]=e.filter,n.goalListCurrentTab=1,t=a.href(e.route,{},{location:"replace"});break;default:t=null}return t}function O(e){var t=null;switch(e.actionType){case"interviews":case"trainings":case"onboarding_events_and_tasks":case"appraisal_reviews_to_submit":t=e.link;break;case"timesheets_to_approve":t=R(e);break;case"attendance_sheets_to_approve":t=a.href(e.route,{sheetId:e.id,redirectedFrom:"attendance.attendance_sheets"},{location:"replace"});break;case"leaves_to_approve":t=a.href(e.route,{id:e.id},{location:"replace"});break;case"goals_to_approve":t=a.href(e.route,{goalId:e.id,category:e.category,listName:"performanceUnApprovedGoalsList"},{location:"replace"});break;default:t=null}return t}function R(e){var t;return t=e.link,"detailed"==e.type&&(t=a.href(e.route,{timesheetId:e.id},{location:"replace"})),t}function z(e){var t=j(e.actionType);return n[t]=e.filter,a.href(e.route,{},{location:"replace"})}function j(e){var t="";switch(e){case"timesheets_to_approve":t="time_employee_timesheets_list_last_search_filters";break;case"attendance_sheets_to_approve":t="pending_approval_attendance_sheets_last_search_filters";break;case"self_reviews_to_submit":t="my_appraisal_list_last_search_filters";break;case"employee_reviews_to_submit":t="performance_appraisal_list_last_search_filters";break;case"goals_to_approve":t="employee_goals_filter";break;case"leaves_to_approve":t="leave_list_search_filter";break;default:t=""}return t}var V=this;V.actions=[],V.activate=u,V.isSectionNeeded=g,V.isSectionBorderNeeded=h,V.getActionIcon=v,V.getActionDue=w,V.getActionTypeText=y,V.getActionDescription=C,V.getActionSubDescriptionForLeave=A,V.linkClicked=$,V.getSummaryDescription=T,V.showConfigurations=p,V.getSummarySubHeading=F,u()}angular.module("app.core").directive("myActionsWidget",e),e.$inject=["$timeout","modalHelperService","dashboardService","myActionWidgetHelper"],t.$inject=["dashboardService","webservice","$state","$scope","$q","$localStorage","datagroupPermissions","myActionWidgetHelper","$translate","performanceConstants","localizedMessages","attendanceService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){h.trackersData=s,h.feedbackTypes=c,h.feedbackTypeTitleMap=m.getEnumAndTitleMapForSelect(h.feedbackTypes,{name:"label",value:"id"}).titleMap,p()}function p(){h.model={type:h.feedbackTypeTitleMap[0].value},h.schema={type:"object",title:"Add Tracker Log",properties:{trackerId:{title:"Employee Tracker",type:"string"},log:{title:"Log",type:"string",maxLength:150},type:{title:"Performance",type:"string"},comment:{title:"Comment",
type:"string",maxLength:3e3}},required:["log","trackerId","comment"]},h.form=[{type:"row",items:[{type:"generic-auto-complete",htmlClass:"col-12",key:"trackerId","text-searching":"Searching...","text-no-results":"No results found",titleField:"name",searchFields:"name",fetchItemsCallback:function(e){return o(function(t,a){var i=_.filter(h.trackersData.titleMap,function(t){return(t.value+" - "+t.name.toLowerCase()).indexOf(e.toLowerCase())!==-1});t(i)})},onInputChange:function(e){e?l.$broadcast("schemaForm.error.trackerId","required",!1):(h.model.trackerId="",l.$broadcast("schemaForm.error.trackerId","required",!0))},objectSelectedCallback:function(e){e&&(h.model.trackerId=e.originalObject.value,l.$broadcast("schemaForm.error.trackerId","required",!0))},validationMessage:{302:r.getLocalizedCustom("Required"),required:r.getLocalizedCustom("Required")}}]},{type:"row",items:[{key:"log",type:"text",htmlClass:"col-12",validationMessage:{302:r.getLocalizedCustom("Required"),201:d.textLengthExceedValidation.message(h.schema.properties.log.maxLength)}}]},{type:"row",items:[{type:"radiobuttons",htmlClass:"col-12",key:"type",titleMap:h.feedbackTypeTitleMap}]},{type:"row",items:[{type:"textarea",htmlClass:"col-12",key:"comment",validationMessage:{302:r.getLocalizedCustom("Required"),201:d.textLengthExceedValidation.message(h.schema.properties.comment.maxLength)}}]}]}function f(t){if(l.$broadcast("schemaFormValidate"),t.$valid){var a=angular.copy(h.model);return n.call("performanceTrackerLogs","POST",a).then(function(t){r.showLocalizedToast("saveSuccess"),e(!0)},function(e){r.errorToast("Failed to Save")})}return o.when(!0)}function g(){e(!1)}var h=this;h.title="Add Tracker Log",h.save=f,h.cancel=g,u()}angular.module("app.core").controller("addTrackerFeedbackModalController",e),e.$inject=["close","dashboardConstants","dashboardService","$timeout","$q","webservice","$scope","localizedMessages","trackersData","feedbackTypes","formValidationHelper","formHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l){function r(){s()}function s(){o&&(d.model=angular.copy(o.settings),d.headerConfig={type:"compact-widget-header",icon:o.widgetIcon,subHeading:o.widgetTitle,heading:"Configurations"},d.schema={type:"object",title:"Quick Feedback Configuration",properties:{feedbackPeriod:{title:"Most Feedback During",type:"string","enum":["0","2","6","12"]}},required:["feedbackPeriod"]},d.form=[{type:"row",items:[{type:"select",htmlClass:"col-12",key:"feedbackPeriod",titleMap:[{value:"2",name:l.getLocalizedCustom("Last 2 Months")},{value:"6",name:l.getLocalizedCustom("Last 6 Months")},{value:"12",name:l.getLocalizedCustom("Last 12 Months")},{value:"0",name:l.getLocalizedCustom("All-Time")}]}]}])}function c(t){n.$broadcast("schemaFormValidate"),t.$valid&&e(d.model)}var d=this;d.save=c,r()}angular.module("app.core").controller("ConfigureQuickFeedbackController",e),e.$inject=["close","dashboardConstants","dashboardService","$timeout","modalInput","$scope","localizedMessages"]}(),function(){"use strict";function e(e,a){var i={restrict:"E",templateUrl:"app/core/dashboard/widget/performanceTrackerQuickAdd/performance-tracker-quick-add-widget.html",scope:{id:"=widgetId",config:"=config",name:"=widgetName",widgetGlobalConfig:"=widgetGlobalConfig",title:"=widgetTitle"},controller:t,controllerAs:"vm",link:function(t,i,o,n){function l(){function i(e){var t=angular.copy(e);return{settings:t}}a.showModal("app/core/dashboard/widget/performanceTrackerQuickAdd/configure/configure-quick-feedback.html","ConfigureQuickFeedbackController","modal",{modalInput:{settings:t.config.settings,widgetIcon:t.getWidgetIcon(),widgetTitle:t.title}}).then(function(a){if(a){var o=i(a);e.updateWidgetConfig(t.id,o).then(function(e){t.config=e.config,n.activate()})}})}t.deleteWidget=function(){t.$emit("removeDashboardWidget",t.id)},t.getWidgetIcon=function(){return e.getWidgetIcon(t.name,t.widgetGlobalConfig,!1)},t.openConfigurations=function(){l()}}};return i}function t(e,t,a,i,o,n,l,r){function s(){v.showLoader=!0,v.allowed=!1,v.graphDataLoaded=!1;var e={feedbackSummery:u(),trackers:m()};a.all(e).then(function(e){var t=e.feedbackSummery.data.data;v.allAvailableFeedbackTypes=e.feedbackSummery.data.meta&&e.feedbackSummery.data.meta.allRatingScales?e.feedbackSummery.data.meta.allRatingScales:[],v.feedbackTypes=v.allAvailableFeedbackTypes.slice(0,5),v.trackers=e.trackers.data.data,v.trackersData=l.getEnumAndTitleMapForSelect(v.trackers,{name:"name",value:"id"}),t.length>0?o.getPhotos(t).then(function(e){v.employeeData=p(e,t),v.performers=t,h(),v.allowed=!0},function(e){d(e)})["finally"](function(){v.showLoader=!1}):(v.allowed=!0,v.performers=t,v.graphDataLoaded=!0,v.showLoader=!1)},function(e){v.showLoader=!1,d(e)})}function c(){i.showModal("app/core/dashboard/widget/performanceTrackerQuickAdd/add/add-tracker-feedback-modal.html","addTrackerFeedbackModalController","modal",{trackersData:v.trackersData,feedbackTypes:v.allAvailableFeedbackTypes}).then(function(e){e&&s()})}function d(e){e?401===e.status||403===e.status?v.allowed=!1:v.allowed=!0:a.reject(e)}function m(){return t.call("performanceTrackers","GET",[],{})}function u(){var e={feedbackPeriod:n.config.settings.feedbackPeriod,limit:4};return t.call("performanceTracker/feedbackSummary","GET",[],e)}function p(e,t){var a=[],i=null;e=f(e);for(var o=0;o<t.length;o++)i=t[o].empNumber,a[i]={image:e[i],name:t[o].firstName};return a}function f(e){for(var t=[],a=0;a<e.length;a++)t[e[a].id]=e[a];return t}function g(e,t){var a=_.find(e,{id:t.id});return a?a:{count:0}}function h(){for(var e=["employees"],t=[],a=0;a<v.feedbackTypes.length;a++)t[a]=[r.getLocalizedCustom(v.feedbackTypes[a].label)];for(var i=0,o=[],a=0;a<v.performers.length;a++){for(var n=0;n<v.feedbackTypes.length;n++){var l=g(v.performers[a].feedback,v.feedbackTypes[n]);t[n].push(l.count)}e.push(v.performers[a].empNumber),o.push(v.employeeData[v.performers[a].empNumber]),i++}var s=75*i;v.graphData=[];for(var n=0;n<v.feedbackTypes.length;n++)v.graphData.push(t[n]);v.graphData.push(e),v.graphOptions={height:s,colorPattern:_.map(v.feedbackTypes,"color"),axisRotated:!0,labelKey:"employees",barRadius:10,employeeData:o},v.graphDataLoaded=!0}var v=this;v.trackers=[],v.performers=[],v.activate=s,v.addTrackerLog=c,s()}angular.module("app.core").directive("performanceTrackerQuickAddWidget",e),e.$inject=["dashboardService","modalHelperService"],t.$inject=["dashboardService","webservice","$q","modalHelperService","employeeService","$scope","formHelper","localizedMessages"]}(),function(){"use strict";function e(e){var a={restrict:"E",templateUrl:"app/core/dashboard/widget/quickAccess/quick-access-widget.html",scope:{id:"=widgetId",name:"=widgetName",widgetGlobalConfig:"=widgetGlobalConfig",config:"=config",title:"=widgetTitle"},controller:t,controllerAs:"vm",link:function(t){t.deleteWidget=function(){t.$emit("removeDashboardWidget",t.id)},t.getWidgetIcon=function(){return e.getWidgetIcon(t.name,t.widgetGlobalConfig,!1)}}};return a}function t(e,t,a,i,o,n){function l(){c.showLoader=!0,c.allowed=!1,n.fetchShortcuts().then(function(e){var t=n.getShortcutsToView(e.data.meta.defaultShortcuts,!0),a=e.data.data,i=a.concat(t);c.quickAccessItems=s(i),c.allowed=!0},function(e){r(e)})["finally"](function(){c.showLoader=!1})}function r(e){e?401==e.status||403==e.status?c.allowed=!1:c.allowed=!0:i.reject(e)}function s(e){for(var t=[],a=[],i=0;i<e.length;i++)a.push(n.getFormattedShortcut(e[i])),a.length===d&&(t.push(a),a=[]);return a.length>0&&t.push(a),t}var c=this;c.addedIcons={},c.quickAccessItems=[];var d=3;l(),c.quickAccessClicked=function(e){"default"==e.type?n.defaultShortcutItemClicked(e):n.userDefineShortcutItemClicked(e)},c.getShortcutTooltipClasses=function(e){return n.getShortcutTooltipClasses(e)}}angular.module("app.core").directive("quickAccessWidget",e),e.$inject=["dashboardService"],t.$inject=["dashboardService","webservice","$state","$q","localizedMessages","myShortcutService"]}(),function(){"use strict";function e(e){var a={restrict:"E",templateUrl:"app/core/dashboard/widget/reportChart/report-chart-widget.html",scope:{id:"=widgetId",name:"=widgetName",widgetGlobalConfig:"=widgetGlobalConfig",isWidgetActive:"=isWidgetActive",config:"=config",title:"=widgetTitle"},controller:t,controllerAs:"vm",link:function(t){t.deleteWidget=function(){t.$emit("removeDashboardWidget",t.id)},t.getWidgetIcon=function(){return e.getWidgetIcon(t.name,t.widgetGlobalConfig,!1)}}};return a}function t(e,t,a,i,o){function n(){l()}function l(){c.chartData=[],c.showLoader=!0,c.allowed=!1,c.summaries=[],c.shouldShowNoDataFound=!1,c.reportId=a.config.reportId;var e="reports/"+c.reportId+"/summary",i={};c.isEmployeeProfile&&(e="reports/"+c.reportId+"/summary?filter%5Bemployee_name%5D%5B"+c.employeeNumber+"%5D="+c.employeeName,i.fromEmployeeDashboard=!0),c.summaryDataRestrictedMessage="No Data to Generate the Chart",c.iswidgetActive&&t.call(e,"GET",[],i).then(function(e){if(e.data.messages.length>0)c.summaries=[],c.shouldShowNoDataFound=!0,c.summaryDataRestrictedMessage=e.data.messages[0];else if(c.summaries=s(e.data.data),c.summaries.length>0)for(var t=0;t<c.summaries.length;t++)c.shouldShowNoDataFound=!o.hasSummaryEnoughDataToPresent(c.summaries[t].data);c.filters=[],c.meta=e.data.meta,c.allowed=!0},function(e){r(e)})["finally"](function(){c.showLoader=!1})}function r(e){e?401==e.status||403==e.status?c.allowed=!1:c.allowed=!0:i.reject(e)}function s(e){for(var t=[],a=0;a<e.length;a++){for(var i=0;i<e[a].views.length;i++)"tabular"==e[a].views[i].type?delete e[a].views[i]:e[a].views[i].properties.chart_height=325;e[a].data&&e[a].data.length>0&&t.push(e[a])}return t}var c=this;a.$on("reloadChartWidget",function(e,t){a=t.updatedWidgets.filter(function(e){return e.id===a.id})[0],c.iswidgetActive=a.isEnabled&&a.isAvailable,l()}),c.isEmployeeProfile=a.config.hasOwnProperty("employeeNumber")&&a.config.employeeNumber,c.employeeNumber=c.isEmployeeProfile?a.config.employeeNumber:"",c.employeeName=c.isEmployeeProfile?a.config.employee.firstName+"+"+a.config.employee.lastName:"",c.iswidgetActive=a.isWidgetActive,n()}angular.module("app.core").directive("reportChartWidget",e),e.$inject=["dashboardService"],t.$inject=["dashboardService","webservice","$scope","$q","reportService"]}(),function(){"use strict";function e(e){var a={restrict:"E",templateUrl:"app/core/dashboard/widget/timeAtWork/time-at-work-widget.html",scope:{id:"=widgetId",name:"=widgetName",widgetGlobalConfig:"=widgetGlobalConfig",config:"=config",title:"=widgetTitle"},controller:t,controllerAs:"vm",link:function(t){t.deleteWidget=function(){t.$emit("removeDashboardWidget",t.id)},t.getWidgetIcon=function(){return e.getWidgetIcon(t.name,t.widgetGlobalConfig,!1)}}};return a}function t(e,t,a,i,o,n,l,r,s){function c(){var e={redirectedFrom:b.redirectedFrom,empNumber:b.empNumber};b.empNumber==n.emp_number?l.go("attendance.my_punch_in_out",e):(e.date=moment(new Date).format("YYYY-MM-DD"),l.go("attendance.punch_in_out",e))}function d(){var e={attendanceSheetToNavigate:h(),attendanceSheet:g(),lastPunchRecord:v(),employeeImages:r.getPhotos(_),attendanceSheetPermission:s.getPermission("attendance_sheets")};b.empNumber==n.emp_number?w=!0:e.attendanceSheetPermission=s.getPermission("attendance_sheets").then(function(e){w=Boolean(e.read)}),o.all(e).then(function(e){b.allowed=!0,e.employeeImages&&e.employeeImages[0]&&(b.emplpoyeeProfilePic=e.employeeImages[0]),b.attendanceSheet=e.attendanceSheet.data,b.attendanceSheetMeta=e.attendanceSheet.meta,b.lastPunchRecord=f(e.lastPunchRecord.data.data),b.attendanceSheetToNavigate=e.attendanceSheetToNavigate.data,b.canPunch=b.attendanceSheetMeta.canPunchForCurrentDate;var t=b.attendanceSheetMeta.totalForCurrentDate,a=b.attendanceSheetMeta.serverUtcDate,o=b.attendanceSheetMeta.serverUtcTime,n=0;b.workedTime=i.getTotalWorkedTimeInHoursAndMinutes(t,a,o,n),setInterval(function(){n++,b.workedTime=i.getTotalWorkedTimeInHoursAndMinutes(t,a,o,n)},6e4),p(),u()},function(e){m(e)})["finally"](function(){b.showLoader=!1})}function m(e){e?401==e.status||403==e.status?b.allowed=!1:(b.allowed=!0,b.noDataAvailable=!0):o.reject(e)}function u(){var e=b.attendanceSheetMeta.totalsForCurrentWeek;b.hasRecordsForWeek=e.total>0,b.workedHoursForWeek=i.secondsToHourMinuteFormat(e.total),b.currentWeek=i.getDateRageTextInMonthDateFormat(e,"-"),b.graphData=e.totalPerDay;var t=$("#timeAtWorkWidgetBody").offsetWidth+30;b.graphOptions={height:170*t/285,main:{width:t+10,color:"#ff7b1d",spacing:.75},shadow:{width:t,color:"#f6f5fb",spacing:.5}},b.graphDataLoaded=!0,n.$broadcast("updateBarChart")}function p(){if(b.action="Punch In",b.lastPunchRecord)if("PUNCHED IN"===b.lastPunchRecord.state){var e=moment(b.lastPunchRecord.punchInUserTime);b.lastPunch=i.formatPunchedTime(e,b.lastPunchRecord.punchInTimeOffset),b.punchedIn=!0,b.action="Punch Out"}else{var e=moment(b.lastPunchRecord.punchOutUserTime);b.lastPunch=i.formatPunchedTime(e,b.lastPunchRecord.punchOutTimeOffset),b.punchedIn=!1}else b.lastPunch=!1,b.punchedIn=!1}function f(e){return e.length>0&&e[0].id?e[0]:null}function g(){var e={empNumber:b.empNumber,fromDate:b.fromDate,toDate:b.toDate};return i.fetchAttendanceSheet(e)}function h(){var e={empNumber:b.empNumber,fromDate:b.fromDate,toDate:b.toDate,mode:"find"};return i.fetchAttendanceSheet(e)}function v(){var e=moment(new Date),t=e.format("YYYY-MM-DD"),a={include:"employee",filter:{empNumbers:[b.empNumber],onlyLastPunchRecord:"true",includeSelf:"true",toDate:t}};return i.fetchAttendanceEmployeeRecords(a)}function y(){b.attendanceSheetToNavigate.latestSheetId&&w?l.go("attendance.attendance_sheet",{sheetId:b.attendanceSheetToNavigate.latestSheetId,empNumber:null,fromDate:null,toDate:null,date:null,redirectedFrom:b.redirectedFrom}):l.go("attendance.attendance_sheet",{sheetId:null,empNumber:b.empNumber,fromDate:b.fromDate,toDate:b.toDate,date:null,redirectedFrom:b.redirectedFrom})}var b=this;b.punchedIn=!0,b.showLoader=!0,b.isEmployeeProfile=t.config.hasOwnProperty("employeeNumber")&&t.config.employeeNumber,b.empNumber=b.isEmployeeProfile?t.config.employeeNumber:n.emp_number;var C=moment(new Date);b.fromDate=C.startOf("week").format("YYYY-MM-DD"),b.toDate=C.endOf("week").format("YYYY-MM-DD"),b.allowed=!1,b.noDataAvailable=!1;var w=!1,_=[{empNumber:b.empNumber}];b.redirectedFrom=b.isEmployeeProfile?"employeeProfile":"dashboard",b.navigateToAttendanceSheet=y,b.punchInClicked=function(){$(".tooltip").remove(),c()},d()}angular.module("app.core").directive("timeAtWorkWidget",e),e.$inject=["dashboardService"],t.$inject=["dashboardService","$scope","webservice","attendanceService","$q","$rootScope","$state","employeeService","datagroupPermissions"]}(),function(){"use strict";function e(e,a,i){var o={restrict:"E",templateUrl:"app/core/dashboard/widget/vueWidget/vue-dashboard-widget.html",scope:{id:"=widgetId",name:"=widgetName",widgetGlobalConfig:"=widgetGlobalConfig",config:"=config",title:"=widgetTitle"},controller:t,controllerAs:"vm",link:function(e,t,a,i){t[0].addEventListener("removeVueDashboardWidget",function(t){e.$emit("removeDashboardWidget",t.detail.id)})}};return o}function t(e,t,a,i){function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function n(e){var t=e.split("-"),a=t.map(function(e){return o(e)});return a.join("")}var l=this;l.appSpecificConfig={id:t.id,empNumber:t.config.employeeNumber,widgetGlobalConfig:t.widgetGlobalConfig,config:t.config,title:t.title},t.config.employee&&(l.appSpecificConfig.employee=t.config.employee),l.generatedId="vueDashboardWidget"+t.id,l.widgetName=n(t.name.replace("vue-","")),i(function(){l.vueDashboardInstance=a.initiateVueAppAndReturnVueAppInstance(VueComponents["default"]["Dashboard"+l.widgetName],VueComponents["default"].toaster,VueComponents["default"].translate,VueComponents["default"].theme,"#"+l.generatedId,l.appSpecificConfig)}),t.$on("$destroy",function(){l.vueDashboardInstance.unmount()})}angular.module("app.core").directive("vueDashboardWidget",e),e.$inject=["$timeout","modalHelperService","dashboardService"],t.$inject=["$rootScope","$scope","vueService","$timeout"]}(),function(){"use strict";function e(e,t,a,i){function o(e){e.configurableWidgets=n(angular.copy(e.widgets)),e.configurableWidgetsInitial=n(angular.copy(e.widgets))}function n(e){return _.sortByOrder(e,function(e){var t=parseInt(e.id,10);return isNaN(t)?e.id:t},["asc"])}function l(e,t){var a=[];return _.forEach(t,function(t,i){var o=e[i],n={id:t.id,adminConfig:r(t.widgetGlobalConfig)};o.isEnabled!==t.isEnabled&&(n.userConfig={isEnabled:t.isEnabled}),a.push(n)}),{mode:i.WIDGET_CONFIG_UPDATE,configurations:a}}function r(e){return{isEnabled:e.isEnabled,availableTo:e.availableTo,defaultSelectedTo:e.defaultSelectedTo}}function s(e){return 2==e?"Employee Dashboard":"Dashboard"}function c(e){var t=[{key:"myConfig",title:"My Widgets",isCurrent:!e}];return e&&t.unshift({key:"adminConfig",title:"Admin Configurations",isCurrent:!0}),t}function d(e,t,a,i){var o=this;o.adminConfigAvailableSwitchClicked=function(e,t){e.widgetGlobalConfig.availableTo[t]||(e.widgetGlobalConfig.defaultSelectedTo[t]=!1)},o.adminConfigeDefaultSelectionSwitchClicked=function(e,t){e.widgetGlobalConfig.defaultSelectedTo[t]&&(e.widgetGlobalConfig.availableTo[t]=!0)}}var m={restrict:"E",templateUrl:"app/core/dashboard/widgetConfig/widget-config-panel.html",scope:{widgets:"=widgets",type:"=type"},controller:d,controllerAs:"vm",link:function(i,n,r,d){i.showConfig=!1,i.tabs=c(e.is_global_admin),i.currentTab=i.tabs[0].key,i.title=s(i.type),i.$watch("showConfig",function(e,t){e?$("body").addClass("config-panel-opened"):$("body").removeClass("config-panel-opened")}),i.getConfigurableWidgets=function(){return"undefined"==typeof i.configurableWidgets&&o(i),i.configurableWidgets},i.toggleConfig=function(){i.showConfig=!i.showConfig,i.showConfig&&o(i)},i.overlayClicked=function(){i.showConfig=!1},i.tabClicked=function(e){i.currentTab=e.key},i.cancel=function(){i.showConfig=!1},i.getWidgetIcon=function(e){return t.getWidgetIcon(e.name,e.widgetGlobalConfig,!1)},i.saveConfiguredWidgets=function(){i.showConfig=!1;var n=angular.copy(i.configurableWidgetsInitial),r=angular.copy(i.configurableWidgets),s=l(n,r);s.typeId=i.type,2==i.type&&r.length>0&&(r[0].config.employeeNumber&&(i.employeeId=r[0].config.employeeNumber),s.employeeId=i.employeeId),t.updateConfiguredWidgets(s).then(function(n){n=t.appendEmployeeDetails(n,r,i.type),i.widgets=n,o(i),e.$broadcast("reloadChartWidget",{updatedWidgets:i.widgets}),a.showLocalizedToast("saveSuccess")})}}};return d.$inject=["dashboardService","dashboardConstants","$scope","localizedMessages"],m}angular.module("app.core").directive("widgetConfigPanel",e),e.$inject=["$rootScope","dashboardService","localizedMessages","dashboardConstants"]}(),function(){"use strict";function e(e,t,a){var i={getPermissions:function(t,i,o,n,l){return e(function(e,r){var s;"undefined"==typeof t&&"undefined"==typeof i&&"undefined"==typeof o&&"undefined"==typeof n&&"undefined"==typeof l||(s={},"undefined"!=typeof t&&(s.self=t),"undefined"!=typeof i&&(s.entities=i),"undefined"!=typeof o&&(s.excludeSupervisorUserRolesAndHodUserRole=o),"undefined"!=typeof n&&(s.rolesToExclude=n),"undefined"!=typeof l&&(s.dataGroup=l)),a.call("permissions","GET",[],s,void 0,!0).then(function(t){e(t.data.data)})["catch"](function(e){r(e)})})},getPermission:function(t,a,o){return e(function(e,n){i.getPermissions(a,o).then(function(a){e(a[t])})["catch"](function(e){n(e)})})},getSinglePermission:function(t,a,o,n,l){return e(function(e,r){i.getPermissions(a,o,n,l,t).then(function(t){e(t)})["catch"](function(e){r(e)})})},getUserData:function(){return e.when(t.account)}};return i}angular.module("app.core").factory("datagroupPermissions",e),e.$inject=["$q","$rootScope","webservice"]}(),function(){"use strict";function e(e,t){function a(e,a){var i=!0;return a&&(i=!1),t.call("dataListSettings","GET",[],{list_name:e},void 0,i).then(function(e){return!!e.data.data.search_parameters&&JSON.parse(e.data.data.search_parameters)})}function i(e,a){return t.call("dataListSettings","PATCH",{parameters:JSON.stringify(a)},{list_name:e}).then(function(e){return e.data.data})}var o={getPersistedParameters:a,persistParameters:i};return o}angular.module("app.core").factory("dataListSettingsService",e),e.$inject=["$q","webservice"]}(),function(){"use strict";function e(e){return function(t){if("string"==typeof t){var a=t.replace(/ 00:00:00$/,"");return e.toLocalizedDate(a)}return e.toLocalizedDate(t)}}angular.module("app.core").filter("ohrmDateFilter",e),e.$inject=["dateService"]}(),function(){"use strict";function e(e,t,a,i,o,n){function l(){return E}function r(e){return moment(e,"YYYY-MM-DD",!0).isValid()}function s(){return I}function c(e){f(e)}function d(e){if(e){var t=e.slice(0,10),a=e.slice(10);return m(t)+a}return e}function m(e){return h(o("date")(e,E))}function u(e){var t=parseInt(e.getMonth(),10)+1,a=parseInt(e.getDate(),10);return t<10&&(t="0"+t),a<10&&(a="0"+a),e.getFullYear()+"-"+t+"-"+a}function p(e){var t=e.getMinutes(),a=e.getHours();return t<10&&(t="0"+t),a<10&&(a="0"+a),a+":"+t}function f(e){for(var t="",a="",i=e.length,o=0;o<i;o++)switch(e[o]){case"j":t+="d",a+="d";break;case"d":t+="dd",a+="dd";break;case"l":t+="EEEE",a+="dddd";break;case"D":t+="EEE",a+="ddd";break;case"n":t+="M",a+="m";break;case"m":t+="MM",a+="mm";break;case"M":t+="MMM",a+="mmm";break;case"F":t+="MMMM",a+="mmmm";break;case"Y":t+="yyyy",a+="yyyy";break;default:t+=e[o],a+=e[o]}E=t,I=a}function g(e,t){var a=!1;return e=e instanceof Date?new Date(u(e)):e?new Date(e):e,t=t instanceof Date?new Date(u(t)):t?new Date(t):t,e instanceof Date&&t instanceof Date?a=e.getTime()!==t.getTime():(e instanceof Date||t instanceof Date)&&(a=!0),a}function h(e){if(null==e)return e;if("yyyy-MMM-dd"==E){var t=e.split("-");return e.replace(t[1],n.getLocalizedCustom(t[1]))}if("EEEE, dd-MMM-yyyy"===E||"EEE, dd MMM yyyy"===E){var t=e.split(new RegExp([" ","-",", "].join("|"),"g"));return e.replace(t[0],n.getLocalizedCustom(t[0])).replace(t[2],n.getLocalizedCustom(t[2]))}return e}function v(e){return e.constructor===Date?e:e.constructor===Array?new Date(e[0],e[1],e[2]):e.constructor===Number?new Date(e):e.constructor===String?new Date(e):"object"==typeof e?new Date(e.year,e.month,e.date):NaN}function y(e,t){return isFinite(e=v(e).valueOf())&&isFinite(t=v(t).valueOf())?(e>t)-(e<t):NaN}function b(e,t,a){return isFinite(e=v(e).valueOf())&&isFinite(t=v(t).valueOf())&&isFinite(a=v(a).valueOf())?t<=e&&e<=a:NaN}function C(e,t){void 0===t&&(t=!0);var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t&&(a=n.getLocalizedCustom(a));var i=s();switch(i){case"yyyy-mm-dd":var o=e.split("-");return w(o[0],o[1]-1,o[2]);case"dd-mm-yyyy":var o=e.split("-");return w(o[2],o[1]-1,o[0]);case"mm-dd-yyyy":var o=e.split("-");return w(o[2],o[0]-1,o[1]);case"yyyy-dd-mm":var o=e.split("-");return w(o[0],o[2]-1,o[1]);case"mm-yyyy-dd":var o=e.split("-");return w(o[1],o[0]-1,o[2]);case"dd-yyyy-mm":var o=e.split("-");return w(o[1],o[2]-1,o[0]);case"yyyy/mm/dd":var o=e.split("/");return w(o[0],o[1]-1,o[2]);case"yyyy mm dd":var o=e.split(" ");return w(o[0],o[1]-1,o[2]);case"yyyy-mmm-dd":var o=e.split("-"),l=a.indexOf(o[1]);return w(o[0],l,o[2]);case"dddd, dd-mmm-yyyy":var o=e.split(",");o=o[1].trim(),o=o.split("-");var l=a.indexOf(o[1]);return w(o[2],l,o[0]);case"ddd, dd mmm yyyy":var o=e.split(",");o=o[1].trim(),o=o.split(" ");var l=a.indexOf(o[1]);return w(o[2],l,o[0])}}function w(e,t,a){return t<0?null:_(e,t,a)?new Date(e,t,a):null}function _(e,t,a){var i=new Date(e,t,a);return i.getFullYear()==e&&i.getMonth()==t&&i.getDate()==a}function S(e){var t,a=n.getLocalizedCustom(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),i=s();switch(i){case"yyyy-mm-dd":return t=e.split("-"),F(t[0],t[1]-1,t[2]);case"dd-mm-yyyy":return t=e.split("-"),F(t[2],t[1]-1,t[0]);case"mm-dd-yyyy":return t=e.split("-"),F(t[2],t[0]-1,t[1]);case"yyyy-dd-mm":return t=e.split("-"),F(t[0],t[2]-1,t[1]);case"mm-yyyy-dd":return t=e.split("-"),F(t[1],t[0]-1,t[2]);case"dd-yyyy-mm":return t=e.split("-"),F(t[1],t[2]-1,t[0]);case"yyyy/mm/dd":return t=e.split("/"),F(t[0],t[1]-1,t[2]);case"yyyy mm dd":return t=e.split(" "),F(t[0],t[1]-1,t[2]);case"yyyy-mmm-dd":return D(e,a);case"dddd, dd-mmm-yyyy":return T(e,a);case"ddd, dd mmm yyyy":return x(e,a);default:return!1}}function D(e,t){var a=e.split("-"),i=t.indexOf(a[1]);return F(a[0],i,a[2])}function T(e,t){var a=e.split(",");a=a[1].trim(),a=a.split("-");var i=t.indexOf(a[1]);return F(a[2],i,a[0])}function x(e,t){var a=e.split(",");a=a[1].trim(),a=a.split(" ");var i=t.indexOf(a[1]);return F(a[2],i,a[0])}function F(e,t,a){return{year:e,month:t,date:a}}function k(e){return"object"==typeof e&&(e=u(e)),e.match(/([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/)||(e=u(C(e))),e}var E,I,A="Y-m-d";f(A);var M={getAngularDateFilterFormat:l,getPickADateFormat:s,localizeTimestamp:d,setDateFormat:c,toLocalizedDate:m,toStandardDate:u,toStandardTime:p,isDateChanged:g,compare:y,inRange:b,stringToStandardDate:C,getDateComponents:S,convertDateToString:k,isStandardDateStringValidDate:r};return M}angular.module("app.core").factory("dateService",e),e.$inject=["$http","$q","exception","logger","$filter","localizedMessages"]}(),function(){"use strict";function e(e,t){function a(a,i){function o(){l()}var n=e.defer(),l=(i||t).$on(a,function(){o(),n.resolve()});return n.promise}var i={listenOnce:a};return i}angular.module("app.core").factory("eventHelperService",e),e.$inject=["$q","$rootScope"]}(),function(){"use strict";function e(e){return function(t,a){if("string"==typeof t){var i=t.split(" - ");return i[0]=e.instant(i[0]),i.join(" - ")}return t}}angular.module("app.core").filter("localizeCountryNameForLeaveType",e),e.$inject=["$translate"]}(),function(){"use strict";function e(){return{link:function(e,t){function a(){if(!i||!o){var e=t.get(0).querySelectorAll(n);e.length>0&&(i=e[0],o=e[e.length-1])}}var i,o,n='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';t.bind("keydown",function(e){var t="Tab"===e.key||9===e.keyCode;t&&(a(),i&&o?e.shiftKey?document.activeElement!==i&&i||(o.focus(),e.preventDefault()):document.activeElement!==o&&o||(i.focus(),e.preventDefault()):e.preventDefault())})}}}angular.module("app.core").directive("focusTrap",e),e.$inject=[]}(),function(){"use strict";function e(e,t){var a=function(a,i){e(function(){var e=t.document.getElementById(a);e&&e.focus()},i)};return a}angular.module("app.core").factory("focus",e),e.$inject=["$timeout","$window"]}(),function(){"use strict";function e(e,t){function a(e,t){var a=[];void 0===t&&(t="name");for(var i=0;i<e.length;i++)a.push({value:e[i],name:e[i][t]});return a}function i(e,t,a){var i=[];void 0===t&&(t="id"),void 0===a&&(a="name");for(var o=0;o<e.length;o++)i[e[o][t]]=e[o][a];return i}function o(e){var t={},a=[];for(var i in e)e[i]&&(e[i][0].country.name?a.push({key:i,name:e[i][0].country.name}):a.push({key:i,name:""}));a.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0});for(var o=0;o<a.length;o++)t[o]=a[o].key;return t}function n(){return{type:"section",htmlClass:"row requiredHelperText",items:[{type:"help",helpvalue:"<em>*</em> "+t.getLocalizedCustom("Required field")}]}}function l(e){e.push(n())}function r(e,t,a){function i(e,a){return e[t].toLowerCase()<a[t].toLowerCase()?-1:e[t].toLowerCase()>a[t].toLowerCase()?1:0}function o(e,a){return e[t].toLowerCase()<a[t].toLowerCase()?1:e[t].toLowerCase()>a[t].toLowerCase()?-1:0}function n(e,a){return t(e).toLowerCase()<t(a).toLowerCase()?-1:t(e).toLowerCase()>t(a).toLowerCase()?1:0}function l(e,a){return t(e).toLowerCase()<t(a).toLowerCase()?1:t(e).toLowerCase()>t(a).toLowerCase()?-1:0}return"ASC"==a?"function"==typeof t?e.sort(n):e.sort(i):"DESC"==a&&("function"==typeof t?e.sort(l):e.sort(o)),e}function s(e,t,a){a.forEach(function(a){m(e,t,a)})}function c(e,t,a){a.forEach(function(a){d(e,t,a)})}function d(e,t,a){e.required.push(a)}function m(e,t,a){delete e.properties[a],t.forEach(function(e){var t=_.findIndex(e.items,{key:a});t!==-1&&e.items.splice(t,1)})}function u(e){var e=e.map(function(e){return e.name=e.name.replace(Array(5*e.level+1).join(""),""),e.name=Array(5*e.level+1).join("")+e.name,e});return e}function p(e){for(var t=_.map(e,"country"),a=_.chain(t).pluck("name").unique().value().sort(),i=[],o=0;o<a.length;o++){var n=_.find(t,{name:a[o]}),l=_.filter(e,{country:n}),r=_.map(l,"id");void 0===n.code&&void 0!==n.cou_code&&(n.code=n.cou_code),n.id=n.code,n.parentId=null,n.children=r,i.push(n);for(var s=0;s<l.length;s++){var c=l[s];c.parentId=n.code,c.children=[],i.push(c)}}return b(i)}function f(e){e=h(e);for(var t=[],a=0;a<e.length;a++)if("1"!==e[a].id){for(var i=e[a],o=[],n=0;n<e.length;n++)parseInt(i.lft)<parseInt(e[n].lft)&&parseInt(i.rgt)>parseInt(e[n].rgt)&&o.push(e[n].id);i.children=o,t.push(i)}return t=v(t),b(t)}function g(e){var a=[],i=[];for(var o in e)e.hasOwnProperty(o)&&(a.push({id:o,name:t.getLocalizedCustom(e[o]),children:[],parentId:o}),i.push(o));return{titleMap:a,"enum":i}}function h(e){for(var t=[],a=0;a<e.length;a++)if("1"!==e[a].id){var i=e[a];if(1!==parseInt(i.level))for(var o=0;o<e.length;o++)parseInt(i.lft)>parseInt(e[o].lft)&&parseInt(i.rgt)<parseInt(e[o].rgt)&&parseInt(i.level)-parseInt(e[o].level)===1&&(i.parentId=e[o].id,t.push(i));else i.parentId=null,t.push(i)}return t}function v(e){for(var t=_.filter(e,{level:"1"}),a=[],i=0;i<t.length;i++){var o=t[i];a.push(o),a=y(a,o,e)}return a}function y(e,t,a){if(t.children.length>0)for(var i=t.children,o=0;o<i.length;o++){var n=_.find(a,{id:i[o]});void 0===_.find(e,{id:i[o]})&&(e.push(n),e=y(e,n,a))}return e}function b(e){return{"enum":_.pluck(e,"id"),titleMap:e}}return{getRequiredMessage:n,addRequiredMessage:l,getObjectTitleMap:a,getSortedObjectList:r,getSortedCountryList:o,removeFieldFromForm:m,removeFieldsFromForm:s,makeFieldMandatory:d,makeFieldsMandatory:c,formatSubunitsForMultiSelect:u,getKeyValueArrayFromObjectList:i,getLocationsListForHierarchicalMultiSelect:p,getSubunitsListForHierarchicalMultiSelect:f,getOptionListForSingleLevelHierarchicalMultiSelectFromObjects:g,getEnumAndTitleMapForSelect:function(e,a,i){"object"!=typeof a&&(a={name:"name",value:"id"});for(var o=[],n=[],l=0;l<e.length;l++){var r={value:e[l][a.value],name:i?e[l][a.name]:t.getLocalizedCustom(e[l][a.name])};void 0!==e[l].icon&&(r.icon=e[l].icon),o.push(r),n.push(e[l][a.value])}return{titleMap:o,"enum":n}},getEnumAndTitleMapForSelectWithActionText:function(e,a,i){"object"!=typeof a&&(a={name:"name",value:"id",actionText:"actionText",hasDetailedOption:"hasDetailedOption"});for(var o=[],n=[],l=0;l<e.length;l++){var r={value:e[l][a.value],name:i?e[l][a.name]:t.getLocalizedCustom(e[l][a.name])};if(a.actionText&&(r.actionText=e[l][a.actionText]),e[l].hasDetailedOption){r.hasDetailedOption=e[l][a.hasDetailedOption];var s=e[l].value_getters,c=[];if("string"==typeof s){var d=JSON.parse(s);d.isArray?o.detailedOptions=d:_.forOwn(d,function(e,t){e.key=t,c.push(e)})}r.detailedOptions=c}void 0!==e[l].icon&&(r.icon=e[l].icon),o.push(r),n.push(e[l][a.value])}return{titleMap:o,"enum":n}},getItemsForMultyselectAutocomplete:function(e,t,a){for(var i=[],o=0;o<e.length;o++){var n;if("object"==typeof t)0==Object.keys(t).length&&(t={id:"id",name:"name",employeeId:"employeeId"}),n={id:e[o][t.id],name:e[o][t.name],employeeId:e[o][t.employeeId]};else if("function"==typeof t){var l=t(e[o]);n={id:l.id,name:l.name,employeeId:l.employeeId},a&&(l.displayValue?n.displayValue=l.displayValue:n.displayValue=l.name)}else n=e[o];i.push(n)}return i},formatDates:function(t,a){for(var i=0;i<a.length;i++){var o=a[i];t[o]instanceof Date&&(t[o]=e.toStandardDate(t[o]))}return t},getFormSchemaType:function(e){var t;switch(e){case"text":t="string";break;case"select":t="string";break;case"checkboxes":t="array";break;case"radiobuttons":t="string";break;case"checkbox":t="boolean";break;case"radios-with-validators":t="string";break;case"textarea":t="string";break;default:t=["null","object"]}return t;
}}}angular.module("app.core").factory("formHelper",e),e.$inject=["dateService","localizedMessages"]}(),function(){"use strict";function e(e,t){return{phoneNumber:{message:function(){return e.getLocalizedCustom("Allows numbers and only + - / ( )")},validator:function(e){var t=/^[\s\(\)\+\-\/]*([0-9][\s\(\)\+\-\/]*)+$/;return!(e&&!e.match(t))}},numeric:{message:function(){return e.getLocalizedCustom("Should be a valid number")},validator:function(e){var t=/^[+-]?[0-9]{1,9}(?:\.[0-9]+)?$/;return!(e&&!e.match(t))}},numericMaxTwoDecimalPlaces:{message:function(){return e.getLocalizedCustom("Should be a number with at most 2 decimal places")},validator:function(e,t){var a=/^[+-]?[0-9]{1,9}(?:\.[0-9]{1,2})?$/;return!(e&&!e.match(a))}},numericTwoDecimalPlaces:{message:function(){return e.getLocalizedCustom("Should be a number with at most 2 decimal places")},validator:function(e,t){var a=/^[+-]?[0-9]*(?:\.[0-9]{1,2})?$/;return!(e&&!e.match(a))}},numericWithDigits:{message:function(){return e.getLocalizedCustom("Should be a number")},validator:function(e){var t=/^[+-]?[0-9]+([.][0-9]+)?$/;return!(e&&!e.match(t))}},positiveIntegerWithDigits:{message:function(){return e.getLocalizedCustom("Should be a positive number")},validator:function(e){var t=/^[0-9]+([.][0-9]+)?$/;return!(e&&!e.match(t))}},numericPositiveMaxTwoDecimalPlaces:{message:function(){return e.getLocalizedCustom("Should be a positive number with at most 2 decimal places")},validator:function(e){var t=/^[0-9]{1,13}(?:\.[0-9]{1,2})?$/;return!(e&&!e.match(t))}},numericPositiveMaxOneDecimalPlaces:{message:function(){return e.getLocalizedCustom("Should be a positive number with at most 1 decimal place(s)")},validator:function(e){var t=/^[0-9]{1,13}(?:\.[0-9]{1})?$/;return!(e&&!e.match(t))}},positiveInteger:{message:function(){return e.getLocalizedCustom("Should be a positive integer")},validator:function(e){var t=/^[0-9]*$/;return!(e&&!e.match(t))}},url:{message:function(){return e.getLocalizedCustom("Should be a valid url")},validator:function(e){var t=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i;return!(e&&!e.match(t))}},email:{message:function(){return e.getLocalizedCustom("Expected format: admin@example.com")},validator:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!(e&&!e.match(t))}},minDate:{message:function(){return e.getLocalizedCustom("Invalid Date")},validator:function(e,t){var a=new Date(e),i=new Date(t);return!e||a.getTime()>=i.getTime()}},toDate:{message:function(){return e.getLocalizedCustom("Invalid Date")},validator:function(e,t){var a=new Date(e),i=new Date(t);return!e||!t||a.getTime()>=i.getTime()}},fromDate:{message:function(){return e.getLocalizedCustom("Invalid Date")},validator:function(e,t){var a=new Date(e),i=new Date(t);return!e||!t||a.getTime()<=i.getTime()}},maxDate:{message:function(){return e.getLocalizedCustom("Invalid Date")},validator:function(e,t){var a=new Date(e),i=new Date(t);return!e||a.getTime()<=i.getTime()}},timeDuration:{message:function(){return e.getLocalizedCustom("Invalid")},validator:function(e,t){var a=moment(e,"HH:mm"),i=moment(t,"HH:mm");return!e||!t||a<=i}},required:{message:function(){return e.getLocalizedCustom("Required")},validator:function(e){return!("undefined"!=typeof e&&!e)}},requiredForDirty:{message:function(){return e.getLocalizedCustom("Required")},validator:function(e,t){return t?!!e:""!==e}},serverAddress:{message:function(){return e.getLocalizedCustom("Server address is invalid")},validator:function(e){var t=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^((([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9]))$/;return!(e&&!e.match(t))}},numericMaxValidation:{message:function(t){return e.getLocalizedCustomWithVariables("Should be less than {{maximum}}",{maximum:t})},validator:function(e,t,a){return!e||(e<t||!a&&e==t)}},numericMinValidation:{message:function(t){return e.getLocalizedCustomWithVariables("Should be greater than {{minimum}}",{minimum:t})},validator:function(e,t,a){return!e||(e>t||!a&&e==t)}},dateRequiredValidation:{message:function(){return e.getLocalizedCustom("Required")},validator:function(e){return!!e}},eeoReportIdValidation:{message:function(){return e.getLocalizedCustom("Alphabetical characters are not allowed")},validator:function(e){var t=/^(?=.*?[1-9])[0-9()-]+$/;return!(e&&!e.match(t))}},integers:{message:function(){return e.getLocalizedCustom("Should be a number with no decimal places")},validator:function(e){var t=/^[+-]?[0-9]*$/;return!(e&&!e.match(t))}},beforeDate:{message:function(){return e.getLocalizedCustom("From date should be before to date")},validator:function(e,t){if(!e||!t)return!0;if(e&&t){var a=new Date(e),i=new Date(t);return a<=i}return!1}},afterDate:{message:function(){return e.getLocalizedCustom("To date should be after from date")},validator:function(e,t){if(!e||!t)return!0;if(e&&t){var a=new Date(e),i=new Date(t);return i<=a}return!1}},beforeDateStrict:{message:function(){return e.getLocalizedCustom("From date should be before to date")},validator:function(e,t){if(!e||!t)return!0;if(e&&t){var a=new Date(e),i=new Date(t);return a<i}return!1}},afterDateStrict:{message:function(){return e.getLocalizedCustom("To date should be after from date")},validator:function(e,t){if(!e||!t)return!0;if(e&&t){var a=new Date(e),i=new Date(t);return i<a}return!1}},dueDate:{message:function(){return e.getLocalizedCustom("Due date should be after to date")},validator:function(e,t){if(!e||!t)return!0;if(e&&t){var a=new Date(e),i=new Date(t);return i<=a}return!1}},fileType:{message:function(){return e.getLocalizedCustom("Attachment type invalid")}},fileSize:{message:function(){return e.getLocalizedCustom("Attachment size exceeded")}},numericMinMaxValidation:{message:function(t,a){return a&&t?e.getLocalizedCustomWithVariables("Please enter a value between {{minimum}} and {{maximum}}",{minimum:t,maximum:a}):!t&&a?e.getLocalizedCustomWithVariables("Please enter a value less than or equal to {{maximum}}",{maximum:a}):t&&!a?e.getLocalizedCustomWithVariables("Please enter a value greater than or equal to {{minimum}}",{minimum:t}):void 0},validator:function(e,t,a,i){if(i)var o=parseFloat(e),n=parseFloat(t),l=parseFloat(a);else var o=parseInt(e,10),n=parseInt(t,10),l=parseInt(a,10);return!!isNaN(o)||(!isNaN(l)&&!isNaN(n)&&o<=l&&o>=n||(!!(!isNaN(l)&&isNaN(n)&&o<=l)||(!!(isNaN(l)&&!isNaN(n)&&o>=n)||!(!isNaN(l)||!isNaN(n)))))}},salaryComponentAmountValidation:{message:function(){return e.getLocalizedCustom("Invalid")},validator:function(e){var t=/^\d+(\.\d+)?$/;return!(e&&!e.match(t))}},timeFormat24HourMinuteValidation:{message:function(){return e.getLocalizedCustom("Invalid Time Format. Should Be HH:MM")},validator:function(e){var t=/^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/;return!(e&&!e.match(t))}},textLengthExceedValidation:{message:function(t){return e.getLocalizedCustomWithVariables("Should not exceed {{amount}} characters",{amount:t})}},numericLengthExceedValidation:{message:function(t){return e.getLocalizedCustomWithVariables("Should not exceed {{amount}} digits",{amount:t})}},alphanumeric:{message:function(){return e.getLocalizedCustom("Should only contain numbers and letters")},validator:function(e){var t=/^[a-zA-Z0-9]+$/;return!(e&&!e.match(t))}},numericOnly:{message:function(){return e.getLocalizedCustom("Should only contain numbers")},validator:function(e){var t=/^[0-9]+$/;return!(e&&!e.match(t))}},numberOfDigits:{message:function(t){return e.getLocalizedCustomWithVariables("Should be {{n}} digits",{n:t})},validator:function(e,t){var a=new RegExp("^.{"+t+"}$");return!(e&&!e.match(a))}},dateBetweenMonths:{message:function(t,a){function i(t){switch(t){case"1":return e.getLocalizedCustom("January");case"2":return e.getLocalizedCustom("February");case"3":return e.getLocalizedCustom("March");case"4":return e.getLocalizedCustom("April");case"5":return e.getLocalizedCustom("May");case"6":return e.getLocalizedCustom("June");case"7":return e.getLocalizedCustom("July");case"8":return e.getLocalizedCustom("August");case"9":return e.getLocalizedCustom("September");case"10":return e.getLocalizedCustom("October");case"11":return e.getLocalizedCustom("November");case"12":return e.getLocalizedCustom("December");default:return null}}return e.getLocalizedCustomWithVariables("Pay Period must be within the months of {{startMonthText}} and {{endMonthText}}",{startMonthText:i(t),endMonthText:i(a)})},validator:function(e,t,a){if(e){var i=new Date(e),o=i.getMonth();return t-1<=o&&o<=a-1}return!0}},numericMaxFiveDecimalPlaces:{message:function(){return e.getLocalizedCustom("Should be a number with at most 5 decimal places")},validator:function(e){var t=/^[+-]?[0-9]{1,13}(?:\.[0-9]{1,5})?$/;return!(e&&!e.match(t))}},ip:{message:function(){return e.getLocalizedCustom("Invalid IP Address")},validator:function(e){var t=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;return!(e&&!e.match(t))}},ipFrom:{message:function(){return e.getLocalizedCustom("IP Address From should be less than IP Address To")},validator:function(e,t){if(e&&t){var a=function(e){var t=e.split(".").map(function(e){return parseInt(e)});return(t[0]?t[0]<<24:0)+(t[1]?t[1]<<16:0)+(t[2]?t[2]<<8:0)+t[3]};return a(e)<=a(t)}return!0}},ipTo:{message:function(){return e.getLocalizedCustom("IP Address To should be greater than IP Address From")},validator:function(e,t){if(e&&t){var a=function(e){var t=e.split(".").map(function(e){return parseInt(e)});return(t[0]?t[0]<<24:0)+(t[1]?t[1]<<16:0)+(t[2]?t[2]<<8:0)+t[3]};return a(t)<=a(e)}return!0}},unique:{message:function(){return e.getLocalizedCustom("Already exists")},validator:function(e,t,a,i,o,n){if(e=e.trim(),""==e)return!0;var l;e=n?e:e.toLowerCase();for(var r in a)if(a.hasOwnProperty(r)&&(l=a[r][o].trim(),l=n?l:l.toLowerCase(),l==e&&(!t||t!=a[r][i])))return!1;return!0}},precision:{message:function(){return e.getLocalizedCustomWithVariables("Maximum precision exceeded")},validator:function(e,t,a){var i=new RegExp("^[-]?\\d{1,"+t+"}(\\.\\d{1,"+a+"})?$");return!(e&&!e.match(i))}},isValidUrl:{message:function(){return e.getLocalizedCustomWithVariables("Invalid URL format")},validator:function(e){var t=/^(https?:\/\/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9])(:?\d*)\/?([a-z_\/0-9\-#.]*)\??([a-z_\/0-9\-#=&]*)/;return!(e&&!e.match(t))}}}}angular.module("app.core").factory("formValidationHelper",e),e.$inject=["localizedMessages","webservice"]}(),function(){"use strict";function e(e,t,a,i){return{restrict:"E",templateUrl:"app/core/help-button.html",scope:{},controller:function(){function o(){var e=n.labelHelper.generateLabel(),i=a.url();t.open("/help/help?label="+e+"&referrer="+i)}var n=this;n.help=o,n.labelHelper=e,1!==OHRM.isHelpModuleEnabled&&(n.disableHelp=!0),i.onLocalizationLoaded().then(function(){n.localizedTextForHelp=i.getLocalizedCustom("Help")})},controllerAs:"help"}}angular.module("app.directives").directive("helpButton",e),e.$inject=["labelHelper","$window","$location","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i){return function(t){var o=e.defer(),n={lang:t.key};return a.call("localizationSettings","GET",[],n).then(function(e){o.resolve(e.data.data.translations),i.setDateFormat(e.data.data.dateFormat)}),o.promise}}angular.module("app.core").factory("i18nLoader",e),e.$inject=["$q","$timeout","webservice","dateService"]}(),function(){"use strict";function e(){return function(e,t){var a=e;return a}}angular.module("app.core").filter("leftPadSpaces",e)}(),function(){"use strict";function e(e,t){function a(){return t.call("employees/action/check-limits","GET",[],{}).then(function(e){return e.data.data})}function i(e,a){return t.call("systemUsers/action/check-limits","GET",[],{}).then(function(e){return e.data.data})}var o={checkEmployeeLimit:a,checkUserLimit:i};return o}angular.module("app.core").factory("licenseService",e),e.$inject=["$q","webservice"]}(),function(){"use strict";function e(){function e(e,t,a){var i=e.idGetter;this.removeItemFromList=function(e){for(var a=t.length-1;a>=0;a--){var o=e.indexOf(t[a][i]);o>-1&&(e.splice(o,1),t.splice(a,1))}},this.changeSelection=function(t){var a=t.obj;if(a.selected)e.selected.push(a[i]);else{var o=e.selected.indexOf(a[i]);o>-1&&e.selected.splice(o,1)}},this.updateListItem=function(e){for(var a=0;a<t.length;a++)if(t[a][i]==e[i]){angular.extend(t[a],e);break}},this.selectAllItems=function(o){e.selected=[];for(var n=0;n<t.length;n++)"function"==typeof e.isRowSelectable?e.isRowSelectable(t[n])&&(t[n].selected=!0,e.selected.push(t[n][i])):"undefined"!=typeof a?a.indexOf(t[n][i])===-1&&(t[n].selected=!0,e.selected.push(t[n][i])):(t[n].selected=!0,e.selected.push(t[n][i]))},this.deselectAllItems=function(a){e.selected=[];for(var i=0;i<t.length;i++)t[i].selected=!1},this.addListItem=function(e){t.unshift(e)}}return{list:e}}angular.module("app.pim").factory("listHelper",e)}(),function(){"use strict";function e(e,t){function a(){$("#content-preloader").addClass("loading")}function i(){$("#content-preloader.loading").removeClass("loading")}function o(e){c(),m(e)}function n(){u(),d()}function l(e){setTimeout(function(){u(),d()},e)}function r(){e.start()}function s(){e.complete()}function c(){t.showProfileLoader=!0}function d(){t.showProfileLoader=!1}function m(e){e||(e="#preloader"),$(e).addClass("loading")}function u(){$("#preloader.loading").removeClass("loading")}var p={show:o,hide:n,hideWithDelay:l,startProgress:r,completeProgress:s,showContentLoader:a,hideContentLoader:i,pageTransition:!0};return p}angular.module("app.core").factory("loader",e),e.$inject=["cfpLoadingBar","$rootScope"]}(),function(){"use strict";function e(e,t,a,i,o,n){function l(e){return a(C[e])}function r(e){if(!e)return e=n("sanitizebraces")(e),a.instant(e);if(e.constructor===Array){for(var t in e)t=n("sanitizebraces")(t),e[t]=a.instant(e[t]);return e}return e=n("sanitizebraces")(e),a.instant(e)}function s(e,t){return a.instant(e,t)}function c(e,t){var i=e.match(/\{\{(.*?)\}\}/g),o={},n={},l=1;i&&i.forEach(function(e){var a=e.match(/\{\{(.*?)\}\}/);a&&(o[a[1]]="#param_"+l+"#",n["#param_"+l+"#"]=t[a[1]],l++)});var r=a.instant(e,o);for(var s in n)n.hasOwnProperty(s)&&(r=r.replace(s,n[s]));return r}function d(e){null!=C[e]?a(C[e]).then(function(e){i.success(e)},function(t){i.success(C[e])}):i.success(e)}function m(e){g(e).then(function(e){i.success(e)})}function u(e){g(e).then(function(e){i.warning(e)})}function p(e){g(e).then(function(e){i.error(e)})}function f(e){g(e).then(function(e){i.info(e)})}function g(e){var t=void 0===C[e]?e:C[e];return o(function(e,i){a(t).then(function(t){e(t)},function(a){e(t)})})}function h(e){if(!e)return a.instant(e);for(var t in e)e[t].name=a.instant(e[t].name);return e}function v(e){var t=e.split(" and "),i=t[1];return"over"==i?t[0]+" "+a.instant("and over"):"under"==i?t[0]+" "+a.instant("and under"):a.instant(e)}function y(e,t,a){g(e).then(function(e){switch(t){case"success":i.success(e,a);break;case"info":i.info(e,a);break;case"warning":i.warning(e,a);break;case"error":i.error(e,a);break;default:i.info(e,a)}})}function b(e){function t(){"function"==typeof e&&e()}return o(function(e,i){a.isReady()?(t(),e(!0)):a.onReady(function(){t(),e(!0)})})}var C={saveSuccess:"Successfully Saved",updateSuccess:"Successfully Updated",deleteSuccess:"Successfully Deleted",testMailSentSuccess:"Test Email Sent",testMailSentFailed:"Test Email Not Sent",saveFailure:"Failed to Save"},w={getLocalized:l,getLocalizedCustom:r,showLocalizedToast:d,successToast:m,warningToast:u,errorToast:p,infoToast:f,getLocalizedCustomWithVariables:s,getLocalizedCustomWithVariablesWithoutEscaping:c,getLocalizedCustomObjectArray:h,getLocalizedCustomWithNumbers:v,showCustomizedToast:y,onLocalizationLoaded:b};return w}angular.module("app.core").factory("localizedMessages",e),e.$inject=["$rootScope","$window","$translate","toast","$q","$filter"]}(),function(){"use strict";function e(e){return function(t){if("string"==typeof t){var a=t.trim().split(" ");return 2==a.length?e.toLocalizedDate(a[0])+" "+a[1]:t}return t}}angular.module("app.core").filter("localizedDateTime",e),e.$inject=["dateService"]}(),function(){"use strict";function e(){function e(e){return function(e){function t(e,t,i){var o=e.indexOf(t);o===-1?e.push(t):e.splice(o,1),i.siblings("ul.dropdown-content").find("li").eq(t).toggleClass("active"),i.find("option").eq(t).prop("selected",!0),a(e,i)}function a(e,t){for(var a="",i=0,o=e.length;i<o;i++){var n=t.find("option").eq(e[i]).text();a+=0===i?n:", "+n}""===a&&(a=t.find("option:disabled").eq(0).text()),t.siblings("input.select-dropdown").val(a)}$(this).each(function(){var a=$(this);if(!a.hasClass("browser-default")){var i=!!a.attr("multiple"),o=a.data("select-id");if(o&&(a.parent().find("span.caret").remove(),a.parent().find("input").remove(),a.unwrap(),$("ul#select-options-"+o).remove()),"destroy"===e)return void a.data("select-id",null).removeClass("initialized");var n=Materialize.guid();a.data("select-id",n);var l=$('<div class="select-wrapper"></div>');l.addClass(a.attr("class"));var r=$('<ul id="select-options-'+n+'" class="dropdown-content select-dropdown '+(i?"multiple-select-dropdown":"")+'"></ul>'),s=a.children("option"),c=a.children("optgroup"),d=[],m=!1,u="";u=a.find("option:selected").length>0?a.find("option:selected"):s.first();var p=function(e,t,a){var i=t.is(":disabled")?"disabled ":"",o=t.data("icon"),n=t.attr("class");if(o){var l="";return n&&(l=' class="'+n+'"'),"multiple"===a?r.append($('<li class="'+i+'"><img src="'+o+'"'+l+'><span><input type="checkbox"'+i+"/><label></label>"+t.html()+"</span></li>")):r.append($('<li class="'+i+'"><img src="'+o+'"'+l+"><span>"+t.html()+"</span></li>")),!0}"multiple"===a?r.append($('<li class="'+i+'"><span><input type="checkbox"'+i+"/><label></label>"+t.html()+"</span></li>")):r.append($('<li class="'+i+'"><span>'+t.html()+"</span></li>"))};c.length?c.each(function(){s=$(this).children("option"),r.append($('<li class="optgroup"><span>'+$(this).attr("label")+"</span></li>")),s.each(function(){p(a,$(this))})}):s.each(function(){$(this).is(":disabled")?"disabled ":"";i?p(a,$(this),"multiple"):p(a,$(this))}),r.find("li:not(.optgroup)").each(function(o){var n=a;$(this).click(function(a){$(this).hasClass("disabled")||$(this).hasClass("optgroup")||(i?($('input[type="checkbox"]',this).prop("checked",function(e,t){return!t}),t(d,$(this).index(),n),h.trigger("focus")):(r.find("li").removeClass("active"),$(this).toggleClass("active"),n.siblings("input.select-dropdown").val($(this).text())),v(r,$(this)),n.find("option").eq(o).prop("selected",!0),n.trigger("change"),"undefined"!=typeof e&&e()),a.stopPropagation()})}),a.wrap(l);var f=$('<span class="caret">&#9660;</span>');a.is(":disabled")&&f.addClass("disabled");var g=u.html()&&u.html().replace(/"/g,"&quot;"),h=$('<input type="text" class="select-dropdown" readonly="true" '+(a.is(":disabled")?"disabled":"")+' data-activates="select-options-'+n+'" value="'+g+'"/>');a.before(h),h.before(f),h.after(r),a.is(":disabled")||h.dropdown({hover:!1,closeOnClick:!1}),a.attr("tabindex")&&$(h[0]).attr("tabindex",a.attr("tabindex")),a.addClass("initialized"),h.on({focus:function(){if($("ul.select-dropdown").not(r[0]).is(":visible")&&$("input.select-dropdown").trigger("close"),!r.is(":visible")){$(this).trigger("open",["focus"]);var e=$(this).val(),t=r.find("li").filter(function(){return $(this).text().toLowerCase()===e.toLowerCase()})[0];v(r,t)}},click:function(e){e.stopPropagation()}}),h.on("blur",function(){i||$(this).trigger("close"),r.find("li.selected").removeClass("selected")}),r.hover(function(){m=!0},function(){m=!1}),$(window).on({click:function(e){i&&(m||h.trigger("close"))}});var v=function(e,t){if(t){e.find("li.selected").removeClass("selected");var a=$(t);a.addClass("selected"),e.scrollTo(a)}},y=[],b=function(e){if(9==e.which)return void h.trigger("close");if(40==e.which&&!r.is(":visible"))return void h.trigger("open");if(13!=e.which||r.is(":visible")){e.preventDefault();var t=String.fromCharCode(e.which).toLowerCase(),a=[9,13,27,38,40];if(t&&a.indexOf(e.which)===-1){y.push(t);var o=y.join(""),n=r.find("li").filter(function(){return 0===$(this).text().trim().toLowerCase().indexOf(o)})[0];n&&v(r,n)}if(13==e.which){var l=r.find("li.selected:not(.disabled)")[0];l&&($(l).trigger("click"),i||h.trigger("close"))}40==e.which&&(n=r.find("li.selected").length?r.find("li.selected").next("li:not(.disabled)")[0]:r.find("li:not(.disabled)")[0],v(r,n)),27==e.which&&h.trigger("close"),38==e.which&&(n=r.find("li.selected").prev("li:not(.disabled)")[0],n&&v(r,n)),setTimeout(function(){y=[]},1e3)}};h.on("keydown",b)}})}}return{selectWithKeyPress:e}}angular.module("app.pim").factory("materializeSelectHelper",e)}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v){function y(){O.expireMessage=g.instant("This iCalendar feed will expire on {{date}}.",{date:a.toLocalizedDate(O.filtersToUse.to)})}function b(e,t,a){t.link&&t.status!=e.status&&w(),"1"==t.status&&"0"==e.status&&(I(),O.filtersToUse=O.savedFilters?O.savedFilters:m,T(O.filtersToUse),y()),t.link&&"0"==t.status&&"1"==e.status&&(O.isFiltersEqual=!O.savedFilters||x(O.savedFilters,m))}function C(){P(),O.loader=!0;var a={organizationDetails:e.call("organization","GET",[],{}),calendarFeedConfig:t.getCalendarFeedConfiguration(d)};h.all(a).then(function(e){D(e.calendarFeedConfig),S(e.organizationDetails)})}function w(){var e={feedUrl:O.feedLink,isEnabled:O.model.status?"1":"0",filters:O.model.status?O.filtersToUse:O.savedFilters};t.saveCalendarFeedConfiguration(e).then(function(e){f.successToast("Successfully Updated"),O.filterConfirmationShow=!1,O.filterHeaderMessage=R})}function _(){var e={feedUrl:O.feedLink,regenerate:!0};t.saveCalendarFeedConfiguration(e).then(function(e){f.successToast("Successfully Updated"),O.feedLink=e.data.data.url,O.model.link=V+j+e.data.data.url})}function S(e){O.organizationName=e.data.data.name,null!==O.organizationName&&(O.modalTitle=g.instant("iCalendar Feed - {{organizationName}} {{title}}",{organizationName:O.organizationName,title:O.title}),O.subHeaderLine1=g.instant("iCalendar Feed allows you to pull {{organizationName}} {{content}} into other calendars.",{organizationName:O.organizationName,content:O.content}))}function D(e){O.model.status="1"===e.data.data.isEnabled,V=e.data.meta.baseUrl,O.model.link=V+j+e.data.data.url,O.feedLink=e.data.data.url,O.savedFilters=e.data.data.filters,O.savedExpiredDate=e.data.data.filters?e.data.data.filters.to:"",O.expireDate=O.savedFilters?O.savedFilters.to:u,O.filtersToUse=O.savedFilters?O.savedFilters:m,O.isFiltersEqual=!O.savedFilters||x(O.savedFilters,m),T(O.filtersToUse),y()}function T(e){O.loader=!0,p(e).then(function(e){O.filtersForDisplay=e,O.loader=!1})}function x(e,t){return Object.prototype.toString.call(e)===Object.prototype.toString.call(t)&&("[object Object]"===Object.prototype.toString.call(e)||"[object Array]"===Object.prototype.toString.call(e)?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(function(a){return x(e[a],t[a])}):e===t)}function F(){navigator.clipboard.writeText(O.model.link),f.successToast("Link Copied")}function k(){O.regeneratingConfirmationShow=!0}function E(){_(),O.regeneratingConfirmationShow=!1}function I(){O.regeneratingConfirmationShow=!1}function A(){O.filtersToUse=m,O.filtersForDisplayBeforeUpdating=O.filtersForDisplay,T(O.filtersToUse),O.isFiltersEqual=!0,O.filterConfirmationShow=!0,O.filterHeaderMessage=z,y()}function M(){O.savedFilters=m,w(),y()}function L(){O.filtersToUse=O.savedFilters,y(),O.filtersForDisplay=O.filtersForDisplayBeforeUpdating,O.filterConfirmationShow=!1,O.filterHeaderMessage=R,O.isFiltersEqual=!1}function P(){O.model={status:!1,link:""},O.schema={type:"object",title:"Enable iCalendar Feed",properties:{status:{title:"Enable iCalendar Feed",type:"boolean"},link:{type:"input-with-button-actions"}},required:[]},O.form=[{type:"row",items:[{type:"switch",htmlClass:"col-4 icalender-enable-switch",key:"status"}]},{type:"row",items:[{type:"input-with-button-actions",htmlClass:"col-12",key:"link",condition:"model.status",readonly:!0,label:"Link to This Feed",primaryAction:F,primaryActionIcon:"oxd_filled_copy",primaryActionToolTip:"Copy to Clipboard",secondaryAction:k,secondaryActionIcon:"oxd_link_generate",secondaryActionText:"Get New Link",secondaryActionToolTip:"Get New Feed Link"}]}]}function $(){i(!0)}function N(){i(!1)}var O=this,R="The following filters are applied to the iCalendar feed.",z="The following filters will be applied to the iCalendar feed.",j="/api/calendarFeed?feedUrl=",V="";O.permissions={read:!0},O.confirm=$,O.cancel=N,O.expireDate=u,O.filtersForDisplay=[],O.filtersToUse=null,O.isFiltersEqual=!0,O.confirmationMessage="It may take a few hours for any changes to reflect on your calendar. Are you sure you want to continue?",O.filterHeaderMessage=R,C(),O.filterConfirmationShow=!1,O.regeneratingConfirmationShow=!1,O.savedFilters=[],O.savedExpiredDate=null,O.title=g.instant(r),O.content=g.instant(s),O.onSubmit=w,O.copyToClipBoard=F,O.updateFilters=A,O.confirmFilterUpdate=M,O.listFilters=m,O.feedType=d,O.cancelFilterUpdating=L,O.cancelLinkRegenerating=I,O.confirmGenerateNewLink=E,O.organizationName="",O.feedLink="",O.modalTitle=g.instant("iCalendar Feed - {{title}}",{title:O.title}),O.subHeaderLine1=g.instant("iCalendar Feed allows you to pull OrangeHRM {{content}} into other calendars.",{content:O.content}),O.subHeaderLine2=g.instant("(E.g: Google Calendar, Microsoft Outlook, MacOS Calendar, Etc...)"),O.subHeaderLine3=g.instant("Only the recent 1000 events will be synced to the external calendar."),O.filtersForDisplayBeforeUpdating=null,l.$watch("modal.model",b,!0)}angular.module("app.core").controller("CalendarFeedModalController",e),e.$inject=["webservice","calendarFeedService","dateService","close","toast","ModalService","$scope","title","content","modalHelperService","feedType","listFilters","expireDate","filterFormatter","localizedMessages","$translate","$q","loader"]}(),function(){"use strict";function e(e,t,a,i,o,n){function l(){t(!0)}function r(){t(!1)}var s=this;s.customMessage=a,s.successLabel=i,s.cancelLabel=o,s.confirm=l,s.cancel=r,s.message=n.getLocalizedCustomWithVariables(s.customMessage)}angular.module("app.core").controller("ConfirmationModalController",e),e.$inject=["$scope","close","customMessage","successLabel","cancelLabel","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r){function s(){c()}function c(){u.schema={type:"object",title:"System user",properties:{password:{title:"Password",type:"string"}},required:["password"]},u.form=[{type:"row",htmlClass:"col-12",items:[{type:"plain-password",strengthCheck:!1,htmlClass:"col-12",placeholder:t.getLocalizedCustom("Enter Password"),removePristine:u.removePristine,key:"password",ngModelOptions:{allowInvalid:!0,visibilityIcon:!0},$validators:{invalidPassword:function(e){return!u.passwordInvalid}},validationMessage:{302:t.getLocalizedCustom("Password cannot be empty"),invalidPassword:t.getLocalizedCustom("Invalid password")},onChange:m}]}],u.model={password:""}}function d(t){if(!u.saving){if(!u.removePristine&&!u.model.password)return u.removePristine=!0,void c();u.saving=!0,r.$broadcast("schemaFormValidate"),t.$valid&&u.model.password?e.call("verifyPassword","POST",{password:u.model.password},{}).then(function(e){e.data.data&&e.data.data.success?i(!0):(u.passwordInvalid=!0,r.$broadcast("schemaForm.error.password","invalidPassword",!1))})["finally"](function(){u.saving=!1}):u.saving=!1}}function m(){u.passwordInvalid=!1,r.$broadcast("schemaForm.error.password","invalidPassword",!0)}var u=this;u.save=d,u.model={},u.removePristine=!1,u.saving=!1,u.passwordInvalid=!0,o.close=i,s()}angular.module("app.core").controller("PasswordConfirmationModalController",e),e.$inject=["webservice","localizedMessages","$q","close","closeCallback","loader","toast","$scope"]}(),function(){"use strict";function e(){var e={restrict:"E",replace:!0,templateUrl:"app/core/modal/directives/generic-oxd-modal.html",scope:{modalTitle:"@",showCloseButton:"<?",showResetButton:"<?",showSaveButton:"<?",showFooter:"<?",showHeader:"<?",headerConfig:"<?",hideLoader:"<?",showLoader:"<?",modalSizeClass:"@?",modalContentClass:"@?",formSchema:"=",form:"=",model:"=",listDefinition:"=",listData:"=",saveButtonLabel:"@?",cancelButtonLabel:"@?",onCancel:"&?",onSave:"&",onReset:"&?",additionalButtons:"=",inlineAlert:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t){function a(e){return r.formSchema?r.onSave()(e):$q.when(!1)}function i(e){r.onReset()(e)}function o(){r.onCancel()}function n(){Object.keys(s).forEach(function(e){"undefined"==typeof r[e]&&(r[e]=s[e])})}function l(){var t="";return r.formSchema&&r.formSchema.required&&r.formSchema.required.length>0&&(t="* "+e.getLocalizedCustom("Required")),t}var r=this;r.save=a,r.reset=i,r.cancel=o,r.getRequiredMessage=l;var s={showCloseButton:!0,showResetButton:!1,showSaveButton:!0,showFooter:!0,showHeader:!0,headerConfig:!1,modalSizeClass:"modal-md",saveButtonLabel:"Save",cancelButtonLabel:"Cancel",showLoader:!1,onCancel:function(){},onReset:function(){}};n()}angular.module("app.core").directive("genericOxdModal",e),t.$inject=["localizedMessages","$scope"]}(),function(){"use strict";function e(){var e={restrict:"E",replace:!0,templateUrl:"app/core/modal/directives/oxd-modal-with-form.html",scope:{modalTitle:"@",showCloseButton:"<?",showResetButton:"<?",showSaveButton:"<?",showCancelButton:"<?",showFooter:"<?",showHeader:"<?",headerConfig:"<?",hideLoader:"<?",modalSizeClass:"@?",formSchema:"=",form:"=",model:"=",saveButtonLabel:"@?",cancelButtonLabel:"@?",onCancel:"&?",onSave:"&",onReset:"&?",additionalButtons:"=",inlineAlert:"=",footerNote:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t){function a(e){return r.formSchema?r.onSave()(e):t.when(!1)}function i(e){r.onReset()(e)}function o(){r.onCancel()}function n(){Object.keys(s).forEach(function(e){"undefined"==typeof r[e]&&(r[e]=s[e])})}function l(){var t="";return r.formSchema&&r.formSchema.required&&r.formSchema.required.length>0&&(t="* "+e.getLocalizedCustom("Required")),t}var r=this;r.save=a,r.reset=i,r.cancel=o,r.getRequiredMessage=l;var s={showCloseButton:!0,showResetButton:!1,showSaveButton:!0,showFooter:!0,showHeader:!0,headerConfig:!1,modalSizeClass:"modal-md",saveButtonLabel:"Save",cancelButtonLabel:"Cancel",onCancel:function(){},onReset:function(){}};n()}angular.module("app.core").directive("oxdModalWithForm",e),t.$inject=["localizedMessages","$q"]}(),function(){"use strict";function e(e){var t={link:function(t,a,i,o){var n=27;e(function(){a.on("keydown",function(e){e.which===n&&(a.modal("hide"),a.off("keydown"))})})}};return t}angular.module("app.core").directive("oxdProgressBar",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(){function e(e,t,a,i){}var a={restrict:"E",templateUrl:"app/core/modal/list-config-option.html",scope:{listName:"<",headerOfModal:"<",applyForAllEmployeesLabel:"<",conditionalFields:"<",specialMessagesForFields:"<",maxNoOfFields:"<",reportId:"<"},link:e,controller:t,controllerAs:"vm",bindToController:!0};return a}function t(e,t,a,i){function o(){i.showModal("app/core/modal/list-configuration.html","ListConfigurationModalController","modal",{
listName:l.listName,modalHeader:l.headerOfModal,applyForAllEmployeesLabel:l.applyForAllEmployeesLabel,conditionalFields:l.conditionalFields,specialMessagesForFields:l.specialMessagesForFields,maxNoOfFields:l.maxNoOfFields,reportId:l.reportId})}function n(){a.getPermission("list_configuration",!0).then(function(e){l.listConfigPermissions=e})}var l=this;l.configureList=o,n()}angular.module("app.core").directive("listConfigOption",e),t.$inject=["listConfigurationService","ModalService","datagroupPermissions","modalHelperService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(){w()}function h(){var e=0;return d.remove(),angular.forEach(_.model,function(t,a){"all_employees"==a||_.conditionalFields.hasOwnProperty(a)&&!_.conditionalFields[a]||t&&e++}),e>_.maxNoOfFields&&d.warning(m.getLocalizedCustomWithVariables("Maximum allowed field count has exceeded. Please select less than {{max}} fields.",{max:_.maxNoOfFields+1})),e}function v(){_.model=_.listFields,y(),_.schema={type:"object",title:"Configuration",properties:_.properties},_.form=[{type:"row",items:_.listSpecificFormElements},{type:"row",items:[{type:"checkbox",htmlClass:"col-12 remove-top-margin",key:"all_employees",condition:function(){return _.permissions.update}}]}]}function y(){_.properties={},_.listSpecificFormElements=[],angular.forEach(_.availableFields,function(e,t){_.properties[t]={title:e,type:"boolean",readonly:_.mandatoryFields.indexOf(t)!==-1};var a={type:"checkbox",htmlClass:"col-4 remove-top-margin",key:t,onChange:h,condition:function(){return!_.conditionalFields.hasOwnProperty(t)||_.conditionalFields[t]}};_.specialMessagesForFields[t]&&(a.additionalInfo={icon:"info",message:_.specialMessagesForFields[t]}),_.listSpecificFormElements.push(a)}),_.properties.all_employees={title:i,type:"boolean"}}function b(){e(!1)}function C(t){if(h()>_.maxNoOfFields)return p.when(!0);l.show();var a={};angular.forEach(_.model,function(e,t){e&&(_.conditionalFields.hasOwnProperty(t)&&!_.conditionalFields[t]||(a[t]=t))}),_.model.all_employees&&(a.all_employees="on"),_.reportId?a.report_id=_.reportId:delete a.report_id;var i={};return i.listName=_.listName,i.formData=a,o.updateRegisteredListConfiguration(i).then(function(t){e(!0),localStorage.setItem("listConfigurationToast","Successfully Configured"),n.location.reload()})}function w(){var e={configurationsForModal:o.getListConfigurationsForModal(_.listName,!0,_.reportId),permissions:r.getPermission("list_configuration",!1)};p.all(e).then(function(e){_.permissions=e.permissions;var t=angular.fromJson(e.configurationsForModal.data[0].meta_data);_.listConfigurations=t,_.availableFields=_.listConfigurations.availableFields,_.mandatoryFields=_.listConfigurations.mandatoryFields;var a=_.listConfigurations.listFields;angular.forEach(a,function(e,t){null!=t&&(_.listFields[t]=!0)}),angular.forEach(_.mandatoryFields,function(e){_.listFields[e]=!0}),v()})}var _=this;_.cancel=b,_.save=C,_.listName=t,_.modalHeader=a,_.listFields={},_.conditionalFields=s,_.specialMessagesForFields=c,_.calculateChecked=h,_.maxNoOfFields=u,_.reportId=f,_.maxFieldCount=0,_.model={},g()}angular.module("app.core").controller("ListConfigurationModalController",e),e.$inject=["close","listName","modalHeader","applyForAllEmployeesLabel","listConfigurationService","$window","loader","datagroupPermissions","conditionalFields","specialMessagesForFields","toast","localizedMessages","maxNoOfFields","$q","reportId"]}(),function(){"use strict";function e(e,t,a,i,o){function n(){l()}function l(){c.schema={type:"object",properties:{note:{title:"Comment",type:"string",maxLength:a.hasOwnProperty("maxLength")&&a.maxLength?a.maxLength:250}},required:[]},a.hasOwnProperty("required")&&a.required&&c.schema.required.push("note"),c.form=[{type:"row",items:[{type:"textarea",htmlClass:c.commentFieldHtmlClass,hideLabel:!c.canEdit,icon:"ohrm_comment_oxd",key:"note",readonly:!c.canEdit,validationMessage:{201:e.textLengthExceedValidation.message(c.schema.properties.note.maxLength)}}]}],c.model={note:t}}function r(){o(!1)}function s(e){e.$valid&&o(c.model.note)}var c=this;c.cancel=r,c.save=s,c.canEdit=a.hasOwnProperty("editable")&&a.editable,c.clickEvent=i,c.commentFieldHtmlClass=c.canEdit?"col-12":"col-12 no-bottom-margin",c.modalContentClass=c.canEdit?"":"comment-popover",n()}angular.module("app.attendance").controller("OxdCommentModalController",e),e.$inject=["formValidationHelper","comment","properties","clickEvent","close"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s){function c(){r?(u.loading=!0,s.disableClickOutside(p),r()["finally"](function(){t(!0),u.loading=!1,s.enableClickOutside(p)})):t(!0)}function d(e){p=e}function m(){t(!1)}var u=this;u.customMessage=i,u.successLabel=o,u.cancelLabel=n,u.successButton=l.success?l.success:"btn-secondary",u.cancelButton=l.cancel?l.cancel:"btn-ghost",u.title="Are you sure?",u.confirm=c,u.cancel=m,u.setElement=d,u.message=a.getLocalizedCustomWithVariables(u.customMessage),u.loading=!1;var p=null;l["success-icon"]&&(u.successButtonIcon=l["success-icon"]),l["header-icon"]&&(u.headerIcon=l["header-icon"])}angular.module("app.core").controller("OxdConfirmationModalController",e),e.$inject=["$scope","close","localizedMessages","customMessage","successLabel","cancelLabel","buttonConfig","callbackFn","modalHelperService"]}(),function(){"use strict";function e(e,t,a,i,o,n){var l=this;l.title=o,l.listData=a,l.listDefinition=i,l.modalSizeClass=n}angular.module("app.core").controller("OxdModalWithListController",e),e.$inject=["employeeService","dateService","listData","listDefinition","title","modalSizeClass"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){function m(){t().then(function(t){var a=l(t),i=r(t);null==t||t>=100||a||i?(i||(p.progress=100),clearInterval(f),s(function(){e(!1)},o)):p.progress=t})["catch"](function(e){})}function u(){p.title=c.getLocalizedCustom(a)}var p=this,f=null;p.progress=0,p.determinate=n,d.$on("$destroy",function(e){s.cancel(f)}),u(),m(),f=setInterval(function(){m()},i)}angular.module("app.core").controller("ProgressModalController",e),e.$inject=["close","progressCallback","title","pollInterval","closeDelay","determinate","forceCompletionCallback","forceCancellationCallback","$timeout","localizedMessages","$scope"]}(),function(){"use strict";function e(e,t,a,i,o){function n(){t(!0)}function l(){t(!1)}var r=this;r.customMessages=a,r.successLabel=i,r.cancelLabel=o,r.confirm=n,r.cancel=l}angular.module("app.core").controller("RoundedConfirmationModalController",e),e.$inject=["$scope","close","customMessages","successLabel","cancelLabel"]}(),function(){"use strict";function e(e,t,a,i,o){function n(t,i,o,n,l,r){return $(".material-tooltip").hide(),e.showModal({templateUrl:t,controller:i,controllerAs:o,inputs:n,bodyClass:"oxd-modal",appendElement:"#modal-holder",preClose:function(e){$(e.element).modal("hide")}}).then(function(t){var i=_.defaults(l||{},{show:!0});return $(document).on("focusin",function(e){$(e.target).closest(".mce-window").length&&e.stopImmediatePropagation()}),t.controller&&"function"==typeof t.controller.setElement&&t.controller.setElement(t.element),a(function(){$(t.element).modal(i).on("hidden.bs.modal",function(){$(t.element).remove(),$(".modal-backdrop").remove(),$(document.body).removeClass("modal-open oxd-modal"),$(document).off("focusin"),e.closeModals(!1)})}),r&&r.call(),t.close.then(function(e){return e})})}function l(e,t,a,i,o){var n=e?e:"You are about to delete data permanently. Are you sure you want to continue?",l=t?t:"Yes, Delete",s=a?a:"No, Cancel",c=angular.extend({success:"btn-text-danger",cancel:"btn-text","success-icon":"delete_forever"},i);return r(n,l,s,c,o)}function r(e,t,a,i,o){var l={customMessage:e?e:"Are you sure you want to continue?",successLabel:t?t:"OK",cancelLabel:a?a:"Cancel",buttonConfig:i?i:{},callbackFn:o};return n("app/core/modal/oxd_confirmation_modal.html","OxdConfirmationModalController","modal",l)}function s(e,t,a,i){var l={preventClose:!0,determinate:!0,closeDelay:1e3,pollInterval:1e3,progressCallback:function(){return o.call("progress","GET",[],{name:t}).then(function(e){return e.data.data})},forceCompletionCallback:function(e){return!1},forceCancellationCallback:function(e){return!1}},r=_.defaults(a,l),s={progressCallback:r.progressCallback,title:e,pollInterval:r.pollInterval,closeDelay:r.closeDelay,determinate:r.determinate,forceCompletionCallback:r.forceCompletionCallback,forceCancellationCallback:r.forceCancellationCallback};if(r.preventClose)var c={keyboard:!1,backdrop:"static"};return o.call("progress","POST",[],{name:t}).then(function(){return n("app/core/modal/oxd_progress_modal.html","ProgressModalController","modal",s,c,i).then(function(){o.call("progress","DELETE",[],{name:t})})})}function c(e,t){var a={preventClose:!0,closeDelay:0,forceCompletionCallback:function(e){return!1},forceCancellationCallback:function(e){return!1}},o=_.defaults(t,a),l={progressCallback:function(){return i.when(0)},title:e,pollInterval:1e3,closeDelay:o.closeDelay,determinate:!1,forceCompletionCallback:o.forceCompletionCallback,forceCancellationCallback:o.forceCancellationCallback};if(o.preventClose)var r={keyboard:!1,backdrop:"static"};return n("app/core/modal/oxd_progress_modal.html","ProgressModalController","modal",l,r)}function d(e){e.data("bs.modal")._config.keyboard=!1,e.data("bs.modal")._config.backdrop="static",e.off("keydown.dismiss.bs.modal")}function m(e){e.data("bs.modal")._config.keyboard=!0,e.data("bs.modal")._config.backdrop=!0,e.data("bs.modal").escape()}var u={showModal:n,showDeleteConfirmationModal:l,showConfirmationModal:r,showProgressModal:s,showIndeterminateProgressModal:c,enableClickOutside:m,disableClickOutside:d};return u}angular.module("app.core").service("modalHelperService",e),e.$inject=["ModalService","$templateRequest","$timeout","$q","webservice"]}(),function(){"use strict";function e(e,t,a,i,o){function n(){l.schema={type:"object",title:"",properties:{effectiveDate:{title:"Snapshot as Of",type:["null","object"]}},required:[]},l.form=[{type:"row",items:[{type:"date",htmlClass:"col-12",key:"effectiveDate",onChange:function(e){if(e){var o=a.toStandardDate(e);o!==l.effectiveDate&&(l.effectiveDate=o,t(e))}else l.model.effectiveDate=i}}]}]}var l=this;l.model={effectiveDate:i},l.clickEvent=o,l.resetDefaultDate={reset:!1},l.title="",l.effectiveDate=a.toStandardDate(l.model.effectiveDate),n()}angular.module("app.core").controller("SwitchToSnapshotController",e),e.$inject=["$state","close","dateService","defaultDate","clickEvent"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){d.showModal("app/blocks/myShortcuts/add_my_shortcuts.html","AddShortcutController","modal",{})}function f(e,t){m.$broadcast("ohrm.my.shortcuts.updated")}function g(e,t){m.$broadcast("ohrm.my.shortcuts.updated")}function h(e,t){for(var a=[],i=0;i<e.length;i++)t&&"OrangeBuzz"==e[i].name||(e[i].name=n.getLocalizedCustom(e[i].name),a.push(e[i]));return a}function v(){return r.call("myShortcuts","GET",[],{})}function y(e){var t,a=b(e.state);return t="default"!==a?C(a,e.id):e.image,{name:e.name,title:e.name,isTooltipNeeded:w(e.name),type:a,route:e.state,params:e.params,link:e.link,icon:t,target:e.target}}function b(e){var t="default";switch(e){case"pim.employees":t="employee_list";break;case"leave.calendar":t="leave_calendar";break;case"performance.view_appraisals_list":t="appraisals";break;case"performance.goals.approved":case"performance.goals.unapproved":t="goals";break;case"recruitment.candidates":t="candidates";break;default:t="default"}return t}function C(e,t){var a=5;"goals"==e&&(a=3);var i=t%a+1;return e+i+".png"}function w(e){return _(e)>75}function _(e,t){const a=_.canvas||(_.canvas=document.createElement("canvas")),i=a.getContext("2d");i.font=t||"normal 10px Nunito";const o=i.measureText(e);return o.width}function S(e){e.link&&($(".tooltip").remove(),window.open(e.link,e.target))}function D(e){if(e.route){var t={};e.params&&(t={filterParameters:JSON.parse(e.params),calledFromMyShortcuts:!0}),$(".tooltip").remove(),u.go(e.route,t)}}function T(e){var t,a=e.length;switch(!0){case a<50:t="tooltip-sm";break;default:t="tooltip-md"}return t}var x={openAddMyShortcutModal:p,addItemToMyShortcutDropDownList:f,deleteItemFromMyShortcutDropDownList:g,fetchShortcuts:v,getShortcutsToView:h,getFormattedShortcut:y,defaultShortcutItemClicked:S,userDefineShortcutItemClicked:D,getShortcutTooltipClasses:T};return x}angular.module("app.core").factory("myShortcutService",e),e.$inject=["$http","$q","exception","logger","$filter","localizedMessages","loader","webservice","toast","$compile","modalHelperService","$rootScope","$state"]}(),function(){"use strict";function e(e){e.scheduleAutoLog();$(window).one("beforeunload",e.flushOnPageUnload)}angular.module("app.core").run(e),e.$inject=["navigationService"]}(),function(){"use strict";function e(e,t,a,i,o){function n(){return i(function(){var e=Date.parse(localStorage.getItem("navigation_logged_time"));(!e||e&&new Date-e>y)&&l()},y/2)}function l(){s().then(function(e){if(e){localStorage.setItem("navigation_logged_time",new Date);var t=JSON.parse(localStorage.getItem("navigation_log"));Array.isArray(t)&&t.length>0&&d(t)}})}function r(e){s().then(function(t){if(t){var a=JSON.parse(localStorage.getItem("navigation_log"));Array.isArray(a)||(a=[]),a=g(a,e),localStorage.setItem("navigation_log",JSON.stringify(a))}})}function s(){return void 0===v?e.call("navigationLog","GET",{},{},void 0,!0).then(function(e){return v=e.data.meta.navigationEnabled}):o.when(v)}function c(){var e=[];localStorage.setItem("navigation_log",JSON.stringify(e)),localStorage.setItem("navigation_logged_time",new Date)}function d(t){return e.call("navigationLog","POST",t,{},void 0,!1).then(function(e){return c(),e.data.data})}function m(e){navigator.sendBeacon("/navigation/usageLog",JSON.stringify(e))&&c()}function u(){var e=a.get("navigation_log_latest_url");return a.remove("navigation_log_latest_url",{path:"/"}),e}function p(){var e=sessionStorage.getItem("navigation_log_latest");return e||(e=localStorage.getItem("navigation_log_latest")),!!e&&JSON.parse(e)}function f(e){sessionStorage.setItem("navigation_log_latest",JSON.stringify(e)),localStorage.setItem("navigation_log_latest",JSON.stringify(e))}function g(e,a){"undefined"==typeof a&&(a=t.url());var i=(new Date).toISOString().slice(0,19).replace("T"," "),o=sessionStorage.getItem("current_menu"),n=localStorage.getItem("clickedOn");void 0!==n&&null!==n||(n="other"),localStorage.removeItem("clickedOn");var l=u();if(l){var r={from:l,to:a,time:i,current_menu:o,clickedOn:n};e.push(r),f(r)}else{var s=p(),c=s.to,d=s.time;if(c!=a&&d!=i){var r={from:c,to:a,time:i,current_menu:o,clickedOn:n};e.push(r),f(r)}else if(e.length>0&&e[e.length-1].to!=a&&e[e.length-1].time==i){var r={from:e[e.length-1].from,to:a,time:i,current_menu:o,clickedOn:n};e[e.length-1]=r,f(r)}}return e}function h(){s().then(function(e){if(e){localStorage.setItem("navigation_logged_time",new Date);var t=JSON.parse(localStorage.getItem("navigation_log"));Array.isArray(t)&&t.length>0&&(navigator.sendBeacon?m(t):d(t))}})}var v,y=6e4,b={log:r,flush:l,scheduleAutoLog:n,flushOnPageUnload:h};return b}angular.module("app.core").factory("navigationService",e),e.$inject=["webservice","$location","$cookies","$interval","$q"]}(),function(){"use strict";function e(e){function t(){return e.call("generateOauthClientSecret","GET",[],{}).then(function(e){return e.data.data[a]})}var a="clientSecret";return{generateClientSecret:t}}angular.module("app.core").factory("oauthClientSecretAutoGenerateHelper",e),e.$inject=["webservice"]}(),function(){"use strict";function e(e){return{restrict:"A",scope:{callback:"&ohrmOnTopMenuItemVisibilityChange"},link:function(t,a){function i(e,t){if(!e)return!1;var a=e.getBoundingClientRect(),i=t.getBoundingClientRect();return a.left<=i.left&&a.right>=i.right&&a.top<=i.top&&a.bottom>=i.bottom}function o(){n.cancel(),n()}var n=_.debounce(function(){t.callback()(i($(a).parent()[0],a[0]),a[0])},500);o();var l=e.onSuccess({},function(){o()}),r=t.$on("toggleMainMenu",function(){o()});window.addEventListener("resize",o,!1),t.$on("$destroy",function(){window.removeEventListener("resize",o),r(),l()})}}}angular.module("app.directives").directive("ohrmOnTopMenuItemVisibilityChange",e),e.$inject=["$transitions"]}(),function(){"use strict";function e(e,a,i){return{restrict:"A",template:'<ng-include src="template"/>',scope:{data:"<",type:"=",listField:"=",extracontroller:"=",rowid:"=",name:"=",url:"=",obj:"="},link:function(e){function t(){return i.current.data&&i.current.data.oxd}var a="app/core/";"object"==typeof e.type&&null!=e.type.path&&null!=e.type.name?(a=e.type.path,e.template=a+"cell-"+e.type.name+".html"):null==e.type&&t()?e.template=a+"cell-oxd.html":null!=e.type||t()?e.template=a+"cell-"+e.type+".html":e.template=a+"cell.html"},controller:t,controllerAs:"cell"}}function t(e,t){function a(t){return void 0===t&&(t=e.data),_.isArray(t)}function i(e){return JSON.parse(e)}function o(e){return t.trustAsHtml(e)}var n=this;n.data=e.data,n.checkOnChange=function(){},n.extracontroller=e.extracontroller,n.isArray=a,n.parseJson=i,n.trustAsHtmlContent=o}angular.module("app.directives").directive("ohrmCell",e),e.$inject=["$translate","$timeout","$state"],t.$inject=["$scope","$sce"]}(),function(){"use strict";function e(e){var t={link:function(t,a,i,o){e(function(){a.dropdown({})})}};return t}angular.module("app.core").directive("ohrmDropdown",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e,t,a,i){var o={restrict:"A",compile:function(t,a){var o=e(a.ohrmSaveForm,null,!0);a.formName;return function(e,t){var a=!1;t.on("click",function(t){if(!a){a=!0;var n=function(){i.when(o(e,{$event:t}))["finally"](function(){a=!1})};e.$apply(n)}})}}};return o}angular.module("app.core").directive("ohrmSaveForm",e),e.$inject=["$parse","$animate","$timeout","$q"]}(),function(){"use strict";function e(e,t,a){var i={link:function(i,o,n,l){e(function(){o.material_select();var e=!1;if(n.notScrollable&&(e=!0),a.isIE&&!e){var i=function(e){(e.clientX>=e.target.clientWidth||e.clientY>=e.target.clientHeight)&&e.preventDefault()};o.siblings("input.select-dropdown").on("mousedown",i),o.siblings("ul.select-dropdown").find("li").on("click",function(){o.closest(".select-wrapper").find("input.select-dropdown").trigger("close")})}$.fn.material_select=t.selectWithKeyPress()})}};return i}angular.module("app.core").directive("ohrmSelect",e),e.$inject=["$timeout","materializeSelectHelper","browser"]}(),function(){"use strict";function e(e,t){return{restrict:"A",scope:{isTimelineCell:"="},link:function(a,i,o){a.isTimelineCell&&(i.empty(),i.html('<a class="timeline tooltipped" data-tooltip="'+e.instant("Show Timeline")+'"><i class="material-icons">history</i></a>'),t(i.contents())(a))}}}angular.module("app.directives").directive("ohrmTimelineCell",e),e.$inject=["$translate","$compile"]}(),function(){"use strict";function e(e,t){function a(){return c}function i(t){return t?e.getLocalizedCustom("Required minimum password strength is")+" "+e.getLocalizedCustom(c[t].toLowerCase()):e.getLocalizedCustom("Password is too weak")}function o(t){return t?t:e.getLocalizedCustom("Your password must contain a lower-case letter, an upper-case letter, a digit and a special character. Try a different password.")}function n(){return d}function l(e,t,a){return!t||!(a>e)}function r(e){return t.call("passwordStrength","POST",{password:e},{}).then(function(e){var t=e.data.data;return t?t.score:0})}function s(e){return t.call("passwordStrength","POST",{password:e},{}).then(function(e){return e.data.data})}var c={veryWeak:"Very Weak",weak:"Weak",better:"Better",medium:"Medium",strong:"Strong",strongest:"Strongest"},d=["veryWeak","weak","better","medium","strong","strongest"];return{getPasswordStrengthStrings:a,getPasswordStrengthEnforcedHint:i,getPasswordStrengths:n,hasRequiredMinimumPasswordStrength:l,getPasswordStrengthScore:r,getPasswordStrengthData:s,getPasswordStrengthValidationMessage:o}}angular.module("app.core").factory("passwordStrengthService",e),e.$inject=["localizedMessages","webservice"]}(),function(){"use strict";function e(){return function(e){return e.invalid_elements?e.invalid_elements.includes("embed")||(e.invalid_elements+=", embed"):e.invalid_elements="embed",e}}angular.module("app.core").filter("removeEmbedTagsFromTinyMce",e),e.$inject=[]}(),function(){"use strict";function e(){function e(e,t,a,i,o,n,l,r,s,c){function d(e,t){return m(e)&&m(t)}function m(e){return"undefined"==typeof e||""===e||null===e}function u(e){return e instanceof Date}function p(e){}function f(){return n.getLocalizedCustomWithVariables("Should not exceed {{amount}} characters",{amount:e.maxLengthForTextField})}function g(){if("employee"===e.filter.type){var i=e.value[e.filterName];i&&angular.isNumber(i)&&t.call("employees/"+i,"GET",[],{}).then(function(t){e.selectedEmployee=t.data.data,e.selectedEmployeeName=e.selectedEmployee.firstName+" "+e.selectedEmployee.middleName+" "+e.selectedEmployee.lastName}),"true"===e.filter["allow-multiple"]&&_()}else if("supervisor"===e.filter.type){var i=e.value[e.filterName];i&&angular.isNumber(i)&&t.call("employees/"+i,"GET",[],{}).then(function(t){e.selectedEmployee=t.data.data,e.selectedEmployeeName=e.selectedEmployee.firstName+" "+e.selectedEmployee.middleName+" "+e.selectedEmployee.lastName}),"true"===e.filter["allow-multiple"]&&S()}else if("date_comparison"===e.filter.type)e.defaultValue=[],e.selectYears=100,e.value[e.filterName]&&(e.defaultValue.to=o("date")(e.value[e.filterName].to,"yyyy-MM-dd"),e.defaultValue.from=o("date")(e.value[e.filterName].from,"yyyy-MM-dd"));else if("select"===e.filter.type&&"true"===e.filter["allow-multiple"])e.filter.selectVisited||h();else if("sub_unit"===e.filter.type&&"true"===e.filter["allow-multiple"])e.filter.subUnitVisited||(e.filter.choices=T(e.filter.choices),e.filter.subUnitVisited=!0);else if("select"===e.filter.type&&e.filter.hasOwnProperty("bind")){var i=e.value[e.filterName];if(i&&void 0!==i){var n=e.filter.sortedChoices[e.value[e.filter.bind]].filter(function(e){return e.value==i});e.entitySelected=n[0]}else e.entitySelecte=e.noValue}else if("year_comparison"===e.filter.type&&"false"===e.filter["allow-multiple"]){var i=e.value[e.filterName];e.filter.selectVisited||(v(e.filter.range,i.from,!0),v(e.filter.range,i.to,!1),e.filter.selectVisited=!0,e.filter.fileInputVisible=!0)}else"date"===e.filter.type?e.value[e.filterName]&&"1"!==e.value[e.filterName]&&(e.defaultValue=o("date")(e.value[e.filterName],"yyyy-MM-dd")):"widget_group"===e.filter.type&&"object"!=typeof e.value[e.filterName]&&(e.value[e.filterName]={});e.prependPrefix&&e.filter.prefix&&(e.filter.label=a.instant(e.filter.prefix)+" - "+a.instant(e.filter.label))}function h(){e.filter["localization-type"]&&(e.filter.choices=c.localizeReportSelectChoices(e.filter.choices,e.filter["localization-type"])),e.filter.choices=D(e.filter.choices),e.filter.selectVisited=!0}function v(t,a,i){var o={};if("undefined"==typeof a||""===a||null===a){var n=new Date;a=n.getFullYear()}for(var l=a+t/2,r=l-1*t;r<l+1*t;r++,l--)o[l]=l;i?e.filter.sortedChoicesFrom=o:e.filter.sortedChoicesTo=o,e.$broadcast("triggerYearRangeReset")}function y(t){void 0!==t.originalObject&&(e.value[e.filterName]=t.originalObject.empNumber)}function b(t){void 0!==t?e.value[e.filterName]=t.originalObject.value:e.value[e.filterName]=""}function C(e,a){var i={name:"userInputString",filter:{employee_name:e,is_supervisor:1,termination:"2"},fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId","page[offset]":"0","page[limit]":"10"};return t.call("employees","GET",[],i,a).then(function(e){for(var t=0;t<e.data.data.length;t++)e.data.data[t].termination_id&&(e.data.data[t].past_employee=I);return e.data.data})}function w(e,i){null===I&&(I=" ("+a.instant("Past Employee")+")");var o={name:"userInputString",filter:k({employee_name:e,termination:"2"}),fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId","page[offset]":"0","page[limit]":"10"};return t.call("employees","GET",[],o,i).then(function(e){for(var t=0;t<e.data.data.length;t++)e.data.data[t].termination_id&&(e.data.data[t].past_employee=I);return e.data.data})}function _(){var a=k({termination:2});return t.call("employees","GET",[],{filter:a,fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId"}).then(function(t){var a=t.data.data;e.employeesForMultiSelect=i.getItemsForMultyselectAutocomplete(a,function(e){return{id:e.empNumber,name:s.getFirstAndLastNameWithoutTags(e),employeeId:e.employeeId,displayValue:s.getFirstAndLastNameWithTags(e)}},!0)})}function S(){return t.call("employees","GET",[],{filter:{termination:2,is_supervisor:1},fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId"}).then(function(t){var a=t.data.data;e.supervisorsForMultiSelect=i.getItemsForMultyselectAutocomplete(a,function(e){return{id:e.empNumber,name:s.getFirstAndLastNameWithoutTags(e),employeeId:e.employeeId,displayValue:s.getFirstAndLastNameWithTags(e)}},!0)})}function D(e){var t=[];for(var a in e)a&&e[a]&&t.push({id:a,name:e[a]});return i.getItemsForMultyselectAutocomplete(t,{})}function T(e){var t=[];for(var a in e)t.push({id:e[a].value,name:e[a].label});return i.getItemsForMultyselectAutocomplete(t,{})}function x(t){return void 0!==e.filter.sortedChoices[t]?e.choices=e.filter.sortedChoices[t]:e.choices=e.noValue,e.choices}function F(e){t.call("employees/"+e,"GET",[],{}).then(function(e){return e.data.data?e.data.data:""})}function k(t){var a=e.filter.data_groups;if(a){var i={},o=a.split(",");o.forEach(function(e){i[e]={canRead:1}}),t.permissionType=[],t.permissionType[0]={type:"data_group",required_permissions:i}}return t}function E(e){return e.required&&"false"!==e.required}var I=null;e.slider={options:{floor:0,ceil:100,step:.1,precision:2,showTicksValues:!1,showTicks:!1,enforceStep:!1,noSwitching:!0}},e.employeesForMultiSelect=!1,e.supervisorsForMultiSelect=!1,e.selectedEmployeeName=null,e.fetchMatchingEmployees=w,e.fetchMatchingSupervisors=C,e.employeeSelected=y,e.selectedEntity=b,e.isDate=u,e.checkNumber=p,e.getSelectedEmployee=F,e.bothValuesEmpty=d,e.getDynamicOptions=x,e.redraw=v,e.isFilterRequired=E,e.choices=[],e.entitySelected=null,e.noValue=[{value:"",label:" "}],e.filterUpdating=!1,e.maxLengthForTextField=255,e.getTextFieldMaxLengthValidationMessage=f,g(),e.$watch("filter",function(t,a){if("object"==typeof t&&"object"==typeof a&&JSON.stringify(t)!=JSON.stringify(a)){if(e.filterUpdating=!0,"select"!=t.type||"false"!=t["allow-multiple"]||t.hasOwnProperty("bind")){if("select"==t.type&&"true"==t["allow-multiple"]&&!t.selectVisited){h();var i=e.filter.choices.map(function(e){return Number(e.id)});if("object"==typeof e.value[e.filterName])for(var o in e.value[e.filterName])e.value[e.filterName].hasOwnProperty(o)&&i.indexOf(Number(o))===-1&&delete e.value[e.filterName][o]}}else{var i=e.filter.sortedChoices.map(function(e){return Number(e.value)});e.value[e.filterName]&&i.indexOf(Number(e.value[e.filterName]))===-1&&(e.value[e.filterName]="")}r(function(){e.filterUpdating=!1})}},!0),e.$on("triggerYearRangeReset",function(){e.filter.fileInputVisible=!1,r(function(){e.filter.fileInputVisible=!0},0)})}var t={restrict:"EA",scope:{filter:"=",value:"=",filterName:"@",includeLabels:"@",prependPrefix:"@",formName:"="},controller:e,templateUrl:function(e,t){var a=t.template?t.template:"filter-field-directive.html";return"app/core/reports/"+a}};return e.$inject=["$scope","webservice","$translate","formHelper","$filter","localizedMessages","$element","$timeout","employeeService","reportLocalizationHelper"],t}angular.module("app.core").directive("reportFilterField",e)}(),function(){"use strict";function e(e,t,a){function i(e){t.$broadcast("stepChangeFromCustomTopRibbon",{step:e})}function o(e){return e.stepId<s.maxStepVisited}function n(e){return e.stepId>s.currentStepId}function l(e){return e.stepId===s.currentStepId}function r(e){return e.stepId<=s.maxStepVisited}var s=this;s.currentStepId=1,s.currentStep=null,s.steps=[],s.stepChange=i,s.maxStepVisited=1,s.itemIsDone=o,s.itemIsTodo=n,s.itemIsCurrent=l,s.itemIsVisited=r,t.$on("reportDefinitionWizardPageChanged",function(e,t){a(function(){s.currentStepId=t.currentStepId,s.steps=[],s.currentStep=null;for(var e=0;e<t.steps.length;e++){var a=e+1,i={stepId:a,title:t.steps[e]};a==s.currentStepId&&(s.currentStep=i),s.steps.push(i)}s.maxStepVisited=t.maxStepVisited})})}angular.module("app.core").controller("ReportDefinitionTopRibbonController",e),e.$inject=["$scope","$rootScope","$timeout"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){p()}function p(){var e=s.getEnumAndTitleMapForSelect(f(c,!0),{name:"name",value:"value"},!0),a=s.getEnumAndTitleMapForSelect(f(c,!1),{name:"name",value:"value"},!0);b.numericDisplayFieldNames=h(c),b.schema={type:"object",title:i.title,properties:{chartType:{title:"Chart Type",type:"string","enum":["bar_chart","pie_chart"]},groupByFieldId1:{title:"Group By",type:"string","enum":e["enum"]},groupByFieldId2:{title:"Group By",type:"string","enum":e["enum"]},groupByFieldId3:{title:"Group By",type:"string","enum":e["enum"]},aggregateFieldId:{title:"Aggregate",type:"string","enum":["-1"].concat(a["enum"])},aggregateType:{title:"Aggregate Type",type:"string","enum":["count","sum","avg"]},showSummaryTable:{title:"Show Summary Table",type:"boolean","default":!0},hideDetailedData:{title:"Hide Detailed Data",type:"boolean","default":!1},addToDashboard:{title:"Add To Dashboard",type:"boolean","default":!1},addToEmployeeDashboard:{title:"Add To Employee Dashboard",type:"boolean","default":!1}},required:["groupByFieldId1"]},b.form=[{type:"row",htmlClass:"col-12",items:[{type:"row",htmlClass:"col-12",items:[{type:"icon-select",icons:[{name:"bar_chart",label:"Bar Chart",value:"bar_chart"},{name:"pie_chart_2",label:"Pie Chart",value:"pie_chart"}],key:"chartType",htmlClass:"col-12"}]},{type:"row",htmlClass:"col-12",items:[{type:"subheading",title:t.getLocalizedCustom("Chart Settings"),htmlClass:"col-12"}]},{type:"row",htmlClass:"col-12",items:[{type:"select",htmlClass:"col-4",onChange:function(e){r.$broadcast("schemaForm.error.aggregateFieldId","invalidDisplayField",!0),r.$broadcast("schemaForm.error.groupByFieldId2","invalidGroupingField",!0),r.$broadcast("schemaForm.error.groupByFieldId3","invalidGroupingField",!0)},ngModelOptions:{allowInvalid:!0},key:"groupByFieldId1",titleMap:e.titleMap},{type:"select",htmlClass:"col-4",onChange:function(e){r.$broadcast("schemaForm.error.aggregateFieldId","invalidDisplayField",!0),r.$broadcast("schemaForm.error.groupByFieldId3","invalidGroupingField",!0)},ngModelOptions:{allowInvalid:!0},key:"groupByFieldId2",titleMap:e.titleMap,validationMessage:{invalidGroupingField:t.getLocalizedCustom("Cannot have the same group by field more than once")},$validators:{invalidGroupingField:function(e){return""==e||e!==b.model.groupByFieldId1}},condition:function(){return b.model.groupByFieldId1}},{type:"select",htmlClass:"col-4",onChange:function(e){r.$broadcast("schemaForm.error.aggregateFieldId","invalidDisplayField",!0)},ngModelOptions:{allowInvalid:!0},key:"groupByFieldId3",titleMap:e.titleMap,validationMessage:{invalidGroupingField:t.getLocalizedCustom("Cannot have the same group by field more than once")},$validators:{invalidGroupingField:function(e){return""==e||e!==b.model.groupByFieldId1&&e!==b.model.groupByFieldId2}},condition:function(){return b.model.groupByFieldId2}}]},{type:"row",htmlClass:"col-12",items:[{type:"select",emptyOption:!1,htmlClass:"col-4 remove-right-padding",onChange:function(e){b.numericDisplayFieldNames.indexOf(e)!==-1?b.model.aggregateType="sum":b.model.aggregateType="count"},ngModelOptions:{allowInvalid:!0},key:"aggregateFieldId",titleMap:[{name:t.getLocalizedCustom("Records"),value:"-1"}].concat(a.titleMap),validationMessage:{invalidDisplayField:t.getLocalizedCustom("Aggregate cannot be the same as the Group By")
},$validators:{invalidDisplayField:function(e){return""==e||e!==b.model.groupByFieldId1&&e!==b.model.groupByFieldId2&&e!==b.model.groupByFieldId3}}},{type:"select",emptyOption:!1,condition:function(){return b.numericDisplayFieldNames.indexOf(b.model.aggregateFieldId)===-1},htmlClass:"col-4",key:"aggregateType",titleMap:[{name:t.getLocalizedCustom("Count"),value:"count"}]},{type:"select",emptyOption:!1,condition:function(){return b.numericDisplayFieldNames.indexOf(b.model.aggregateFieldId)!==-1},htmlClass:"col-4",key:"aggregateType",titleMap:[{name:t.getLocalizedCustom("Count"),value:"count"},{name:t.getLocalizedCustom("Sum"),value:"sum"},{name:t.getLocalizedCustom("Average"),value:"avg"}]}]},{type:"row",htmlClass:"col-12",items:[{type:"checkbox",htmlClass:"col-4",key:"showSummaryTable"},{type:"checkbox",htmlClass:b.lastRowColumnWidth,key:"hideDetailedData"},{type:"checkbox",htmlClass:"col-4",key:"addToDashboard"},{type:"checkbox",htmlClass:b.lastRowColumnWidth,key:"addToEmployeeDashboard",condition:function(){return m}}]}]}],b.model=d}function f(e,a){var i=[],o=[],n="";for(var l in e)if(e.hasOwnProperty(l)){var r=e[l].fields.filter(function(e){return!(!e.id||a&&!e.canGroupBy)},0);r.length>0&&i.push({value:null,name:t.getLocalizedCustom(e[l].name)}),r.forEach(function(e){var a=t.getLocalizedCustom(e.label),l=o.filter(function(e){return e.trim()===a});l.length>0&&(a+=g(" ",l.length)),o.push(a),i.push({value:e.id,name:n+a})})}return i}function g(e,t){for(var a="",i=0;i<t;i++)a+=e;return a}function h(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&e[a].fields.forEach(function(e){e.numeric&&t.push(e.id)});return t}function v(e){r.$broadcast("schemaFormValidate"),e.$valid&&(b.model.addToDashboard||delete b.model.addToDashboard,b.model.addToEmployeeDashboard||delete b.model.addToEmployeeDashboard,o(b.model))}function y(){o(!1)}var b=this;b.modalProperties=i,b.save=v,b.cancel=y,b.model={},b.lastRowColumnWidth=m?"col-6":"col-4",u()}angular.module("app.core").controller("ConfigChartToReportController",e),e.$inject=["webservice","localizedMessages","$q","modalProperties","close","loader","toast","$scope","formHelper","displayGroups","model","addToEmployeeDashBoard"]}(),function(){"use strict";angular.module("app.core").constant("reportConstants",{HIDDEN_FIELD_FILL:"***"})}(),function(){"use strict";function e(e,t,a,i,o,n,l){function r(){s()}function s(){m.schema={type:"object",properties:{fillEmptyRows:{title:"Fill Empty Rows",type:"boolean"},formatCurrencyValues:{title:"Format Currency Values",type:"boolean"},includeFiltersInCsv:{title:"Include Filter Criteria",type:"boolean"}},required:[]},m.form=[{type:"row",items:[{type:"switch",htmlClass:"col-12",key:"fillEmptyRows",condition:function(){return i}},{type:"switch",htmlClass:"col-12",key:"formatCurrencyValues",condition:function(){return a}},{type:"switch",htmlClass:"col-12",key:"includeFiltersInCsv",condition:function(){return n}}]}],m.model={fillEmptyRows:o,formatCurrencyValues:!1,includeFiltersInCsv:n}}function c(){l(!1)}function d(){l(m.model)}var m=this;m.cancel=c,m.save=d,m.clickEvent=t,r()}angular.module("app.core").controller("ReportCsvExportModalController",e),e.$inject=["formValidationHelper","clickEvent","hasCurrencyFields","hasOneToManySections","fillEmptyRows","includeFiltersInCsv","close"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h){function v(){var e=Ie.dataGroup?Ie.dataGroup:Ie.module+"_reports";l.getSinglePermission(e).then(function(e){e.create&&(Ie.hasCreatePermission=!0),e.update&&(Ie.hasEditPermission=!0)})}function y(e,t,a,i){function o(e){var t=$(e).offset();return{top:t.top+30+"px",margin_left:t.left-230+"px"}}var n=!1,l=o(t.target);$(e.element).openModal({opacity:0,out_duration:0,in_duration:0,dynamic_position:!0,dp_top:l.top,dp_margin_left:l.margin_left,ready:function(){$("#multiSelectCheckBoxesModal").css("z-index",4),$(".lean-overlay").css("z-index",3)},complete:function(){n||e.controller.cancel()}}),e.close.then(function(e){n=!0})}function b(){o.$broadcast("addTopMenuBackButton",{uiSref:"reports_and_analytics.catalogue",tooltip:"Reports"})}function C(e,t,a,i){function o(e){var t=$(e).offset();return{top:t.top+30+"px",margin_left:t.left-230+"px"}}var n=!1,l=o(t.target);$(e.element).openModal({opacity:0,out_duration:0,in_duration:0,dynamic_position:!0,dp_top:l.top,dp_margin_left:l.margin_left,ready:function(){$("#multiSelectCheckBoxesModal").css("z-index",4),$(".lean-overlay").css("z-index",3)},complete:function(){n||e.controller.cancel()}}),e.close.then(function(e){n=!0})}function w(e,t,a){Ie.selectedSubDisplayFields[t]=e,a.forEach(function(t){e.indexOf(t)===-1&&Ie.selectedDisplayFields.indexOf(t)!==-1?Ie.selectedDisplayFields.splice(Ie.selectedDisplayFields.indexOf(t),1):e.indexOf(t)!==-1&&Ie.selectedDisplayFields.indexOf(t)===-1&&Ie.subDisplayFieldsToBeVisible.indexOf(t)===-1&&Ie.selectedDisplayFields.push(t),e.indexOf(t)===-1&&Ie.subDisplayFieldsToBeVisible.indexOf(t)!==-1?Ie.subDisplayFieldsToBeVisible.splice(Ie.subDisplayFieldsToBeVisible.indexOf(t),1):e.indexOf(t)!==-1&&Ie.subDisplayFieldsToBeVisible.indexOf(t)===-1&&Ie.subDisplayFieldsToBeVisible.push(t)})}function S(e,t,a){Ie.selectedSubFilterFields[t]=e,a.forEach(function(t){var a=Object.keys(Ie.selectedFilters).filter(function(e){return e===t})[0];e.indexOf(t)===-1&&"undefined"!=typeof a?(delete Ie.selectedFilters[a],Ie.selectedFilterNames.indexOf(t)!==-1&&Ie.selectedFilterNames.splice(Ie.selectedFilterNames.indexOf(t),1)):e.indexOf(t)!==-1&&"undefined"==typeof a&&Ie.subFilterFieldsToBeVisible.indexOf(t)===-1&&(Ie.selectedFilters[t]=Ie.availableFilters[t].default_value,Ie.selectedFilterNames.push(t)),e.indexOf(t)===-1&&Ie.subFilterFieldsToBeVisible.indexOf(t)!==-1?Ie.subFilterFieldsToBeVisible.splice(Ie.subFilterFieldsToBeVisible.indexOf(t),1):e.indexOf(t)!==-1&&Ie.subFilterFieldsToBeVisible.indexOf(t)===-1&&Ie.subFilterFieldsToBeVisible.push(t)})}function D(e){return"include"===e||"show_only_filtered_records"===e}function T(e,t){var a=e.fields.filter(function(e){var a=e.id.split(t.id+"_func_");return 2===a.length&&""===a[0]}).length;return a>0&&1===t.id.split("_func_").length}function x(e,t,a){var i=0;for(var o in e.fields)if(e.fields.hasOwnProperty(o)){var n=o.split(t+"_func_");2===n.length&&""===n[0]&&i++}return i>0&&1===t.split("_func_").length}function F(e){return e.filter(function(e){return Ie.subDisplayFieldsToBeVisible.indexOf(e.id)!==-1||(!(!xe(e.id)||!Ie.selectedSubDisplayFields[ke(e.id)]||Ie.selectedSubDisplayFields[ke(e.id)].indexOf(e.id)===-1)||!xe(e.id))})}function k(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(Ie.subFilterFieldsToBeVisible.indexOf(a)!==-1?t[a]=Ie.availableFilters[a]:Fe(a)&&Ie.selectedSubFilterFields[Ee(a)]&&Ie.selectedSubFilterFields[Ee(a)].indexOf(a)!==-1?t[a]=Ie.availableFilters[a]:Fe(a)||(t[a]=Ie.availableFilters[a]));return t}function E(){var a=Ie.id;b(),void 0===Ie.id||""===Ie.id?t.getReportDefinitionByUniqueName(Ie.templateName).then(function(e){a=e.data.id,P(a).then(function(e){I(e)})}):P(a).then(function(t){if(Ie.id&&v(),A(t),Ie.summaryConfiguration&&Ie.summaryConfiguration.addToEmployeeDashboard){Ie.summaryDataRestricted=!1;var a={};return e.call("reports/"+Ie.id+"/summary","GET",[],a).then(function(e){Ie.summaries=e.data.data,e.data.meta&&e.data.meta.summaryConfiguration&&"object"==typeof e.data.meta.summaryConfiguration&&(Ie.chartConfig=e.data.meta.summaryConfiguration)},function(e){"403"!=e.status||null==e.data&&void 0==e.data&&""==e.data||(m.error(s.instant(e.data),null),Ie.summaryDataRestricted=!0),Ie.summaries=[]})}})}function I(e){Ie.definition.name=null,delete Ie.definition.id,Ie.editable=!0,Ie.selectedFilters={},te(),L(),ce("include",null),Ie.availableFilters.hasOwnProperty("show_only_filtered_records")&&ce("show_only_filtered_records",null),""==Ie.selectedFilters.include&&(Ie.selectedFilters.include="1"),""==Ie.selectedFilters.show_only_filtered_records&&(Ie.selectedFilters.show_only_filtered_records=!0)}function A(e){te();var a={folderList:t.fetchReportFolders(Ie.definition.folderId,Ie.definition.uniqueName)};h.all(a).then(function(e){Ie.reportFolders=e.folderList}),L(),Ie.maxStepVisited=4,void 0!==r.step&&ae(Ie.groupingAvailable&&r.step>1?r.step+1:r.step)}function M(){var e=["Reports and Analytics","Reports",Ie.reportName];Ie.definition.name||e.push("Add"),n.setForcedTitle(e,null)}function L(){return t.fetchReportNames(Ie.id).then(function(e){Ie.existingReportNames=e.existingReportNames,Ie.existingReportNamesLowerCased=e.existingReportNamesLowerCased})["finally"](function(){if(Ie.reportNamesReady=!0,Ie.enableSaveAsButton=!0,Ie.definition.name&&Ie.pimReportDefinitionStep1Form){var e=Ie.existingReportNamesLowerCased.indexOf(Ie.definition.name.toLowerCase())===-1;Ie.pimReportDefinitionStep1Form.reportName.$setValidity("validateUnique",e)}})}function P(e){return a.show(),t.getReportDefinition(e).then(function(e){Ie.definition=e.data,Ie.availableGroupingFields=e.meta.available_grouping_fields,Ie.reportName=e.data.name,j(),Ie.availableFilters=O(we(e.meta.available_filters)),Ie.defaultFilterCount=Ie.availableFilters.hasOwnProperty("show_only_filtered_records")?Ie.defaultFilterCount+1:Ie.defaultFilterCount,Ie.availableFilterGroups=e.meta.available_filter_groups,Ie.definition.definition.selected_filters,Ie.reportUniqueName=e.data.uniqueName,Ie.selectedSubFilterFields={},Ie.selectedFilters=Ie.definition.definition.selected_filters;for(var t in Ie.selectedFilters)Ie.selectedFilters.hasOwnProperty(t)&&Fe(t)&&("undefined"==typeof Ie.selectedSubFilterFields[Ee(t)]&&(Ie.selectedSubFilterFields[Ee(t)]=[]),Ie.selectedSubFilterFields[Ee(t)].push(t),Ie.subFilterFieldsToBeVisible.push(t));Ie.selectedFilterNames=Object.keys(Ie.definition.definition.selected_filters),Ie.availableDisplayGroups=e.meta.available_display_groups,N(),Ie.selectedSubDisplayFields={},Ie.selectedDisplayFields=Ie.definition.definition.selected_display_fields,Ie.selectedDisplayFields.forEach(function(e){xe(e)&&("undefined"==typeof Ie.selectedSubDisplayFields[ke(e)]&&(Ie.selectedSubDisplayFields[ke(e)]=[]),Ie.selectedSubDisplayFields[ke(e)].push(e),Ie.subDisplayFieldsToBeVisible.push(e))}),Ie.selectedGroupingFields=Ie.definition.definition.selected_grouping_fields,Ie.filterGroupsAvailable=!_.isEmpty(Ie.availableFilterGroups),Ie.summaryConfiguration=Ie.definition.definition.summary_configuration,Ie.filterGroupsAvailable&&(R(),z()),G(),Ie.groupingAvailable&&V(),a.hide()})}function N(){Ie.displayFieldDependencies={};for(var e=Object.keys(Ie.availableDisplayGroups),t=0;t<e.length;t++)for(var a=e[t],i=Ie.availableDisplayGroups[a],o=i.fields,n=0;n<o.length;n++){var l=o[n];l.hasOwnProperty("dependentFieldIds")&&l.dependentFieldIds.length>0&&(Ie.displayFieldDependencies[l.id]=l.dependentFieldIds)}}function O(e){for(var t in e)if(e.hasOwnProperty(t)&&"widget_group"===e[t].type){var a={};for(var i in e[t].choices)e[t].choices.hasOwnProperty(i)&&(a[i]=e[i]);e[t].dependents=a}return e}function R(){var e=Object.keys(Ie.availableFilters),t=e.length;Ie.availableFiltersWithGroups=[];for(var a=0;a<Ie.availableFilterGroups.length;a++){for(var i=Ie.availableFilterGroups[a].id,o=Ie.availableFilterGroups[a].name,n="true"===Ie.availableFilterGroups[a].removable,l={},r={},s=0;s<t;s++)Ie.availableFilters[e[s]].group_id===i&&(l[e[s]]=Ie.availableFilters[e[s]]);r={fields:l,name:o,removable:n},Ie.availableFiltersWithGroups[i]=r,n||(Ie.availableFiltersWithGroups[i].selected=!0)}Ie.availableFiltersWithGroups=Ie.availableFiltersWithGroups.filter(function(e){return void 0!=e})}function z(){for(var e=[],t=0;t<Ie.selectedFilterNames.length;t++){var a=Ie.availableFilters[Ie.selectedFilterNames[t]].group_id;"undefined"!=typeof a&&e.indexOf(a)==-1&&e.push(Ie.availableFilters[Ie.selectedFilterNames[t]].group_id)}for(var t=0;t<Ie.availableFiltersWithGroups.length;t++)if(Object.keys(Ie.availableFiltersWithGroups[t].fields).length>0){var i=Ie.availableFiltersWithGroups[t].fields[Object.keys(Ie.availableFiltersWithGroups[t].fields)[0]].group_id;e.indexOf(i)!=-1&&(Ie.availableFiltersWithGroups[t].selected=!0)}}function j(){Ie.groupingAvailable=!_.isEmpty(Ie.availableGroupingFields),Ie.groupingAvailable&&(Ie.steps=["Report Name","Grouping Fields","Selection Criteria","Display Fields"]);var e=Object.keys(Ie.availableGroupingFields);e.length<Ie.maxGroupingFields&&(Ie.maxGroupingFields=new Array(e.length))}function V(){Ie.selectedGroupingFields.forEach(function(e,t){Ie.supportedDisplayFields[e]=Ie.availableGroupingFields[e].supportedDisplayFields,Ie.concatanatedSupportedDisplayFields=_.union(Ie.concatanatedSupportedDisplayFields,Ie.supportedDisplayFields[e])})}function G(){for(var e=Object.keys(Ie.availableDisplayGroups),t=0;t<e.length;t++){for(var a=e[t],i=Ie.availableDisplayGroups[a],o=!1,n=0;n<i.fields.length;n++)if(Ie.selectedDisplayFields.indexOf(i.fields[n].id)!==-1){o=!0;break}if(o){var l=Ie.definition.definition.selected_display_groups.indexOf(a)!==-1;i.displayHeader=l,i.selected=!0}}}function B(e,t){Ie.availableDisplayGroups[e].selected=t;for(var a=Ie.availableDisplayGroups[e].fields,i=0;i<a.length;i++){var o=a[i].id,n=Ie.selectedDisplayFields.indexOf(o);t===!1?(n>-1&&Ie.selectedDisplayFields.splice(n,1),ke(o)!==!1&&(Ie.selectedSubDisplayFields[ke(o)]=[]),Ie.subDisplayFieldsToBeVisible.indexOf(o)!==-1&&Ie.subDisplayFieldsToBeVisible.splice(Ie.subDisplayFieldsToBeVisible.indexOf(o),1)):a[i].selectByDefault&&n===-1&&Ie.selectedDisplayFields.push(o)}}function q(e,t){Ie.availableFiltersWithGroups[e].selected=t;var a=Ie.availableFiltersWithGroups[e].fields,i=Object.keys(a),o=i.length;if(t===!1)for(var n=0;n<o;n++){var l=i[n],r=Ie.selectedFilterNames.indexOf(l);r>-1&&Ie.selectedFilterNames.splice(r,1)}}function H(){var e=!1;if(angular.isObject(Ie.availableDisplayGroups)){Ie.displayGrouploaded=!0;for(var t=Object.keys(Ie.availableDisplayGroups),a=0;a<t.length;a++){var i=Ie.availableDisplayGroups[t[a]];if(!i.selected){e=!0;break}}}return e}function U(){var e=De();e.length>0||Ie.employeeNameFilterIsremoved?Q(e,!0):W()}function W(){g.showModal("app/core/reports/report-save-as-modal.html","SaveAsReportController","modal",{reportsNamesList:Ie.existingReportNames,reportName:Ie.definition.name,reportFolders:Ie.reportFolders,folderId:Ie.definition.folderId}).then(function(e){e.reportName&&(Ie.enableSaveAsButton=!1,K(e))})}function Y(){g.showModal("app/core/reports/report-move-modal.html","MoveReportController","modal",{reportsNamesList:Ie.existingReportNames,reportName:Ie.definition.name,reportFolders:Ie.reportFolders,folderId:Ie.definition.folderId}).then(function(e){e.reportName&&(Ie.folder=e.reportFolder,J())})}function J(){var e={};return e.id=Ie.definition.id,e.folderId=Ie.folder?Ie.folder:Ie.definition.folderId,e.module=Ie.module,a.show(),ee(e).then(function(e){s("Successfully Moved").then(function(e){m.success(e),Ie.definition.folderId=Ie.folder})},function(e){s("Failed to Move").then(function(e){m.error(e)})})["finally"](function(){a.hide()})}function K(e){return h(function(a,i){var o={definition:{name:Ie.definition.name,id:Ie.definition.id,folderId:Ie.definition.folderId,icon:Ie.definition.icon},folder:Ie.folder,module:Ie.module,templateName:Ie.templateName,prefix:Ie.prefix,dataGroup:Ie.dataGroup,reportUniqueName:Ie.reportUniqueName,selectedFilterNames:Ie.selectedFilterNames,selectedFilters:Ie.selectedFilters,selectedDisplayFields:Ie.selectedDisplayFields,summaryConfiguration:Ie.summaryConfiguration,groupingAvailable:Ie.groupingAvailable,availableGroupingFields:Ie.availableGroupingFields,selectedGroupingFields:Ie.selectedGroupingFields,displayGroups:Ie.availableDisplayGroups,availableFilters:Ie.availableFilters,saveFromEditView:!0};t.saveAndSearch(e,o,d.params.module,Ie.employeeNameFilterIsremoved&&!Ie.bothValidationFailed,Ie.chartConfig).then(function(){a()},function(e){i(e)})["finally"](function(){Ie.enableSaveAsButton=!0})})}function Z(){if(0==Ie.selectedDisplayFields.length)return m.warning(s.instant("At least one display field should be selected"),null),h.when(!0);var e=De();return e.length>0||Ie.employeeNameFilterIsremoved?Q(e,!1):K()}function Q(e,t){Ie.bothValidationFailed=!1;var a;if(e.length>0&&Ie.employeeNameFilterIsremoved){Ie.bothValidationFailed=!0;var i=e.map(function(e){return e.label}).join(", ");a=u.getLocalizedCustomWithVariablesWithoutEscaping("Display field(s) {{displayFieldSet}} and filter field Employee Name are used in the chart. Removing them will remove the chart from the report and the employee dashboard. Do you wish to continue?",{displayFieldSet:i})}else a=1==e.length?u.getLocalizedCustomWithVariablesWithoutEscaping("The display field {{displayField}} is used in the chart, removing this field will result in removing the chart. Do you wish to continue?",{displayField:e[0].label}):2==e.length?u.getLocalizedCustomWithVariablesWithoutEscaping("The display fields {{displayField1}} and {{displayField2}} are used in the chart, removing these fields will result in removing the chart. Do you wish to continue?",{displayField1:e[0].label,displayField2:e[1].label}):Ie.employeeNameFilterIsremoved?u.getLocalizedCustom("Removing Employee Name filter from the filter field(s) will remove the chart from the employee dashboard. Do you wish to continue?"):u.getLocalizedCustom("Some display fields to be removed are used in the chart, removing these field will result in removing the chart. Do you wish to continue?");var o={templateUrl:"app/core/modal/confirmation_modal.html",controller:"ConfirmationModalController",controllerAs:"modal",inputs:{customMessage:c("sanitizebraces")(a),successLabel:"Yes, Proceed",cancelLabel:"No, Cancel"}};return h(function(e){f.showModal(o).then(function(a){var i=!1;$(a.element).openModal({complete:function(){i||e()}}),a.close.then(function(a){i=!0,a===!0?t?W():(Ie.employeeNameFilterIsremoved&&!Ie.bothValidationFailed&&X(),K()["finally"](function(){e()})):e()})})})}function X(){var t=Ie.chartConfig;return delete t.addToEmployeeDashboard,e.call("reports/"+Ie.id+"/summary/"+t.summaryId,"PATCH",t,{})}function ee(t){if(void 0===t.id)return e.call("reports","POST",t,{}).then(function(e){return e.data.data});var a=t.id;return delete t.id,e.call("reports/"+a,"PATCH",t,{}).then(function(e){return t.id=a,t})}function te(){M();var e=Ie.current_step,t=Ie.maxStepVisited;!Ie.groupingAvailable&&e>1?(e--,t--):!Ie.groupingAvailable&&1==e&&t>1&&t--,o.$broadcast("reportDefinitionWizardPageChanged",{currentStepId:e,steps:Ie.steps,maxStepVisited:t}),Ie.loaded=!0}function ae(e){!Ie.groupingAvailable&&e>1?e+1<=Ie.maxStepVisited&&(Ie.current_step=e+1):e<=Ie.maxStepVisited&&(Ie.current_step=e),te()}function ie(){1===Ie.current_step?d.go("reports_and_analytics.catalogue",{}):(Ie.current_step--,Ie.groupingAvailable||2!==Ie.current_step||Ie.current_step--),te()}function oe(){return 2===Ie.current_step&&0==Ie.selectedGroupingFields.length?void m.warning(s.instant("At least one grouping field should be selected"),null):(Ie.current_step<Ie.steps.length+1&&(Ie.current_step++,Ie.groupingAvailable||2!==Ie.current_step||Ie.current_step++),Ie.current_step>Ie.maxStepVisited&&(Ie.maxStepVisited=Ie.current_step),void te())}function ne(e){return!Ie.groupingAvailable&&e+1>1?e+2<Ie.current_step:e+1<Ie.current_step}function le(e){return!Ie.groupingAvailable&&e+1>1?e+2>Ie.current_step:e+1>Ie.current_step}function re(e){return!Ie.groupingAvailable&&e+1>1?e+2===Ie.current_step:e+1===Ie.current_step}function se(e){return!Ie.groupingAvailable&&e+1>1?e+2<=Ie.maxStepVisited:e+1<=Ie.maxStepVisited}function ce(e,t){var a=Ie.selectedFilterNames.indexOf(e);if(a>-1)Ie.selectedFilterNames.splice(a,1);else{if(Ie.selectedFilterNames.push(e),null===t)var i=Ie.availableFilters[e];else var i=Ie.availableFiltersWithGroups[t].fields[e];if(!Ie.selectedFilters[e])switch(i.type){case"select":if(i["allow-multiple"]&&0==JSON.parse(i["allow-multiple"])){var o=i.default_value;Ie.selectedFilters[e]=Object.keys(i.choices).indexOf(o)<=-1?Object.keys(i.choices)[0].toString():o?o.toString():""}else Ie.selectedFilters[e]="";break;case"number_comparison":Ie.selectedFilters[e]={from:0,to:100};break;case"date_comparison":Ie.selectedFilters[e]={from:"",to:""};break;case"year_comparison":Ie.selectedFilters[e]={from:"",to:""};break;case"date":Ie.selectedFilters[e]=new Date(c("date")(new Date,"yyyy-MM-dd"));break;default:Ie.selectedFilters[e]=""}}}function de(e){var t=Ie.selectedDisplayFields.indexOf(e);t>-1?Ie.selectedDisplayFields.splice(t,1):(Ie.selectedDisplayFields.push(e),Ie.displayFieldDependencies.hasOwnProperty(e)&&Ie.displayFieldDependencies[e].forEach(function(e,a){t=Ie.selectedDisplayFields.indexOf(e),t<=-1&&de(e)}))}function me(e,t){Ie.concatanatedSupportedDisplayFields=[];var a=Ie.selectedGroupingFields.indexOf(e);a>-1?(Ie.selectedGroupingFields.splice(a,1),delete Ie.supportedDisplayFields[e]):(Ie.selectedGroupingFields.push(e),Ie.supportedDisplayFields[e]=t.supportedDisplayFields),Ie.selectedGroupingFields.forEach(function(e,t){Ie.concatanatedSupportedDisplayFields=_.union(Ie.concatanatedSupportedDisplayFields,Ie.supportedDisplayFields[e])}),Ie.selectedDisplayFields.forEach(function(e,t){Ie.concatanatedSupportedDisplayFields.indexOf(e)===-1&&Ie.selectedDisplayFields.splice(t,1)})}function ue(e,t){var a=!0;e.forEach(function(e){Ie.groupingAvailable?Ie.concatanatedSupportedDisplayFields.indexOf(e.id)!==-1&&Ie.selectedDisplayFields.indexOf(e.id)==-1&&(a=!1):Ie.selectedDisplayFields.indexOf(e.id)==-1&&(a=!1)}),Ie.displayFieldSelectAll[t]=!!a}function pe(e){if(Ie.groupingAvailable)for(var t=Ie.availableDisplayGroups[e],a=0;a<t.fields.length;a++){var i=t.fields[a].id;if(Ie.concatanatedSupportedDisplayFields.indexOf(i)==-1)return!1}return!0}function fe(e){if(Ie.groupingAvailable)for(var t=Ie.availableDisplayGroups[e],a=0;a<t.fields.length;a++){var i=t.fields[a].id;if(Ie.concatanatedSupportedDisplayFields.indexOf(i)==-1)return!1}return!0}function ge(e){for(var t=Ie.getSelectableDisplayFields(Ie.availableDisplayGroups[e].fields),a=0;a<t.length;a++){var i=t[a].id,o=Ie.selectedDisplayFields.indexOf(i);Ie.displayFieldSelectAll[e]?o===-1&&(Ie.groupingAvailable?Ie.concatanatedSupportedDisplayFields.indexOf(i)!==-1&&Ie.selectedDisplayFields.push(i):Ie.selectedDisplayFields.push(i)):o>-1&&Ie.selectedDisplayFields.splice(o,1)}}function he(e){void 0!==e.originalObject&&(Ie.selectedFilters.employee_name=e.originalObject.empNumber)}function ve(t,a){var i={name:"userInputString",filter:{employee_name:t},fields:"empNumber,firstName,middleName,lastName","page[offset]":"0","page[limit]":"10"};return e.call("employees","GET",[],i,a).then(function(e){for(var t=0;t<e.data.data.length;t++)e.data.data[t].empNumber==Ie.selectedEmpNumber&&(Ie.selectedEmployee=e.data.data[t]);return e.data.data})}function ye(){return p.textLengthExceedValidation.message(Ie.reportNameMaxLength)}function be(e){var t=Ie.availableFilters[e];return t.prefix?s.instant(t.prefix)+" - "+s.instant(t.label):s.instant(t.label)}function Ce(){Ie.showFilterSelection=!Ie.showFilterSelection}function we(e){return e.service_period&&(e.service_period.label=u.getLocalizedCustom(e.service_period.label)+" ("+u.getLocalizedCustom("Years")+") "),e.age_group&&(e.age_group.label=u.getLocalizedCustom(e.age_group.label)+" ("+u.getLocalizedCustom("Years")+") "),e}function _e(e){var t;switch(e){case"PIM_Snapshot_Report_template":t=75;break;case"EXPENSE_Report_template":t=75;break;case"Expense_summary_report_template":t=75;break;default:t=75}return t}function Se(){var e=[];return"object"==typeof Ie.summaryConfiguration&&null!==Ie.summaryConfiguration&&(Ie.summaryConfiguration.groupByFieldId&&Array.isArray(Ie.summaryConfiguration.groupByFieldId)?e=e.concat(Ie.summaryConfiguration.groupByFieldId):Ie.summaryConfiguration.groupByFieldId&&e.push(Ie.summaryConfiguration.groupByFieldId),Ie.summaryConfiguration.aggregateFieldId&&Ie.summaryConfiguration.aggregateFieldId!=-1&&e.push(Ie.summaryConfiguration.aggregateFieldId),Ie.summaryConfiguration.addToEmployeeDashboard&&(Ie.chartAvailableInDashboard=!0)),e}function De(){var e=[],t=Se();return Array.isArray(Ie.selectedDisplayFields)&&Ie.selectedDisplayFields.length>0&&t.forEach(function(t){Ie.selectedDisplayFields.indexOf(t)===-1&&e.push(t)}),Ie.chartAvailableInDashboard&&(Ie.employeeNameFilterIsremoved=Ie.selectedFilterNames.indexOf("employee_name")===-1),e=e.filter(function(e,t,a){return a.indexOf(e)===t}),Te(e)}function Te(e){var t=[];for(var a in Ie.availableDisplayGroups)Ie.availableDisplayGroups.hasOwnProperty(a)&&Ie.availableDisplayGroups[a].fields.forEach(function(a){e.indexOf(a.id)!==-1&&t.push(a)});return t}function xe(e){return 2===e.split("_func_").length}function Fe(e){return 2===e.split("_func_").length}function ke(e){return!!xe(e)&&e.split("_func_")[0]}function Ee(e){return!!Fe(e)&&e.split("_func_")[0]}var Ie=this;Ie.id=r.id,Ie.templateName=r.templateName,Ie.module=r.module,Ie.dataGroup=r.dataGroup,Ie.prefix=r.prefix,Ie.folder=r.folder,Ie.reportFolders=[],Ie.current_step=r.step?r.step+1:1,Ie.maxStepVisited=1,Ie.defaultFilterCount=1,Ie.steps=["Report Name","Selection Criteria","Display Fields"],Ie.groupingAvailable=!1,Ie.hasCreatePermission=!1,Ie.hasEditPermission=!1,Ie.enableSaveAsButton=!1,Ie.loaded=!1,Ie.displayGrouploaded=!1,Ie.chartAvailableInDashboard=!1,Ie.employeeNameFilterIsremoved=!1,Ie.prevStep=ie,Ie.nextStep=oe,Ie.currentStep=re,Ie.doneSteps=ne,Ie.todoSteps=le,Ie.stepsVisited=se,Ie.toggleFilters=ce,Ie.saveAndSearch=K,Ie.saveAsReport=W,Ie.validateSaveAs=U,Ie.moveReport=Y,Ie.toggleDisplayField=de,Ie.fetchMatchingEmployees=ve,Ie.employeeSelected=he,Ie.toggleSelectAllFields=ge,Ie.isAllSelected=ue,Ie.validateSaveAndSearch=Z,Ie.getSelectableDisplayFields=F,Ie.getSelectableFilterFields=k,Ie.subDisplayFieldsToBeVisible=[],Ie.subFilterFieldsToBeVisible=[],Ie.isFilterUndeletable=D,Ie.hasSubDisplayFields=T,Ie.hasSubFilterFields=x,Ie.toggleSelectedDisplayGroup=B,Ie.displayGroupsAvailable=H,Ie.gotoStep=ae,Ie.existingReportNames=[],Ie.existingReportNamesLowerCased=[],Ie.showFilterSelection=!0,Ie.selectedFilterNames=[],Ie.selectedFilters={},Ie.displayFieldSelectAll={},Ie.reportNameMaxLength=_e(Ie.templateName),Ie.getMaxLengthValidationMessage=ye,Ie.getPrefixedFilterName=be,Ie.toggleFilterSelection=Ce,Ie.toggleGroupingFields=me,Ie.showSelectAll=pe,Ie.showDisplayGroupHeader=fe,Ie.maxGroupingFields=new Array(5),Ie.supportedDisplayFields=[],Ie.filterGroupsAvailable=!1,Ie.toggleSelectedFilterGroup=q,Ie.reportNamesReady=!1,Ie.pimReportDefinitionStep1Form=null,Ie.storeStep1Form=function(e){Ie.pimReportDefinitionStep1Form=e},i.$on("stepChangeFromCustomTopRibbon",function(e,t){ae(t.step.stepId)}),Ie.openDisplayFieldConfig=function(e,t,a){a.preventDefault();var i=[],o=[];e.fields.forEach(function(e){xe(e.id)&&ke(e.id)===t.id&&(i.push(e.id),o.push({value:e.id,name:u.getLocalizedCustom(e.label)}))});var n=t.id;"undefined"==typeof Ie.selectedSubDisplayFields[n]&&(Ie.selectedSubDisplayFields[n]=[]);var l={options:{"enum":i,titleMap:o},config:{notSelectedOption:"None",includeAllOption:!1,mandatoryOptions:[],readonly:!1,onChange:function(e){w(e,n,i)}},model:Ie.selectedSubDisplayFields[n]};f.showModal({templateUrl:"app/directives/formWidgets/multi-select-checkboxes-modal.html",controller:"multiSelectCheckBoxesModalController",controllerAs:"modal",inputs:{options:l.options,model:l.model,config:l.config}}).then(function(e){y(e,a,n,i)})},Ie.openFilterFieldConfig=function(e,t,a){a.preventDefault();var i=[],o=[];for(var n in e.fields)e.fields.hasOwnProperty(n)&&Fe(n)&&Ee(n)===t&&(i.push(n),o.push({value:n,name:e.fields[n].label}));var l=t;"undefined"==typeof Ie.selectedSubFilterFields[l]&&(Ie.selectedSubFilterFields[l]=[]);var r={options:{"enum":i,titleMap:o},config:{notSelectedOption:"None",includeAllOption:!1,mandatoryOptions:[],readonly:!1,onChange:function(e){S(e,l,i)}},model:Ie.selectedSubFilterFields[l]};f.showModal({templateUrl:"app/directives/formWidgets/multi-select-checkboxes-modal.html",controller:"multiSelectCheckBoxesModalController",controllerAs:"modal",inputs:{options:r.options,model:r.model,config:r.config}}).then(function(e){C(e,a,l,i)})},E()}angular.module("app.core").controller("CoreReportDefinitionController",e),e.$inject=["webservice","reportService","loader","$scope","$rootScope","titleService","datagroupPermissions","$stateParams","$translate","$filter","$state","toast","localizedMessages","formValidationHelper","ModalService","modalHelperService","$q"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g){function h(){v()}function v(){C.schema={type:"object",title:"Reports",properties:{reportFolder:{title:"Select Folder",type:"string","enum":C.reportFolders["enum"]}},required:["reportFolder"]},C.form=[{type:"row",items:[{type:"select",htmlClass:"col-12",key:"reportFolder",titleMap:C.reportFolders.titleMap,validationMessage:{302:e.getLocalizedCustom("Required")}}]}],C.model={reportName:C.reportName,reportFolder:C.folderId}}function y(e){d.$broadcast("schemaFormValidate"),e.$valid&&r(C.model)}function b(){r(!1)}var C=this;C.title="Move Report",C.reportName=o,C.folderId=l,C.reportFolders=n,C.permission=!0,C.save=y,C.cancel=b,h()}angular.module("app.core").controller("MoveReportController",e),e.$inject=["localizedMessages","webservice","LOGIN","reportsNamesList","reportName","reportFolders","folderId","close","loader","toast","$scope","$q","settingsService","formValidationHelper","$state","formHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g){function h(){v()}function v(){S.schema={type:"object",title:"Reports",properties:{reportName:{title:"Report Name",type:"string",maxLength:75},reportFolder:{title:"Select Folder",type:"string","enum":S.reportFolders["enum"]},isPrivate:{title:"Make It Private",type:"boolean"}},required:["reportName","reportFolder"]},S.form=[{type:"row",items:[{type:"text",htmlClass:"col-12",key:"reportName",removePristine:!0,validationMessage:{duplicationReportName:e.getLocalizedCustom("Already exists"),302:e.getLocalizedCustom("Required"),201:p.textLengthExceedValidation.message(S.schema.properties.reportName.maxLength)},$validators:{duplicationReportName:C}},{type:"select",htmlClass:"col-6",key:"reportFolder",titleMap:S.reportFolders.titleMap,validationMessage:{302:e.getLocalizedCustom("Required")}},{type:"checkbox",htmlClass:"col-12 report-save-modal-check-box",key:"isPrivate"}]}],S.model={reportName:y(),reportFolder:S.folderId,isPrivate:S.isPrivate}}function y(e){if(e===S.reportName)return e;var t=S.reportName,a=S.existingReportNames.map(function(e){return e.toLowerCase()});a.indexOf(S.reportName.toLowerCase())===-1&&a.push(S.reportName.toLowerCase());var i=e?e:t,o=/\scopy \d+\s?$/i,n=!!e&&e.match(o);if(n){var l=/\d+\s?$/i,r=e?e.match(l):i.match(l),s=parseInt(r)+1;i=t+" Copy "+s}else i+=" Copy 1";if(i.length<=75&&a.indexOf(i.toLowerCase())===-1)return i;if(i.length>75){var c=7;n=i.match(o),n&&(c=n[0].length);var d=b(t,c);return d+=n[0],d.length<=75&&a.indexOf(d.toLowerCase())===-1?d:y(d)}return a.indexOf(i.toLowerCase())!==-1?y(i):void 0}function b(e,t){var a="";return e.length+t>75&&(a=e.substring(0,e.length-(e.length+t-75))),a.replace(/\s+$/,"")}function C(e){if(e=e.trim(),""==e)return!0;if(S.existingReportNames){S.existingReportNames.push(S.reportName);var t=S.existingReportNames.map(function(e){return e.toLowerCase()});return!(t.indexOf(e.toLowerCase())>-1)}}function w(e){d.$broadcast("schemaFormValidate"),e.$valid&&r(S.model)}function _(){r(!1)}var S=this;S.title="Save As",S.existingReportNames=i,S.reportName=o,S.folderId=l,S.reportFolders=n,S.permission=!0,S.isPrivate=!0,S.save=w,S.cancel=_,h()}angular.module("app.core").controller("SaveAsReportController",e),e.$inject=["localizedMessages","webservice","LOGIN","reportsNamesList","reportName","reportFolders","folderId","close","loader","toast","$scope","$q","settingsService","formValidationHelper","$state","formHelper"]}(),function(){"use strict";function e(e){return{restrict:"E",templateUrl:"app/core/reports/report-summary.html",scope:{summary:"=summary",filters:"=filters",reportid:"=reportid",
onSummaryLoad:"=",onSummaryUnload:"=",oxdStyles:"=oxdStyles",embedded:"=embedded"},controllerAs:"vm",bindToController:!0,controller:t}}function t(e,t,a,i,o,n){function l(e){var o=m.summary.drillDown;if(!m.drillDownInitiated&&void 0!==o&&e.drilldown!==!1&&"false"!==e.drilldown){m.drillDownInitiated=!0;var n=s(e),l=m.reportid+"_"+o.target_summary_id+"_"+JSON.stringify(n);if(l===m.drillDownStates.getCurrentState().stateIdentifier)return void(m.drillDownInitiated=!1);a.show(),c(m.reportid,o.target_summary_id,JSON.parse(JSON.stringify(n))).then(function(n){var r={};for(var s in o.additional_filter_params)r[o.additional_filter_params[s]]=e[s];var c=m.drillDownStates.getStates(),d={};c.forEach(function(e){d=angular.merge(d,e.extraFilters)}),r=angular.merge(d,r),m.drillDownStates.addState({summary:n,extraFilters:r,breadCrumb:t.getLocalizedCustomWithVariablesWithoutEscaping(o.name,e),stateIdentifier:l}),m.drillDownInitiated=!1,m.drillDownStates.goToState(m.drillDownStates.getStateCount()-1),i(function(){a.hide()})})}}function r(e){var t=m.summary.drillDown;if(!m.drillDownInitiated&&void 0!==t&&e.drilldown!==!1&&"false"!==e.drilldown){var a=s(e),i=m.reportid+"_"+t.target_summary_id+"_"+JSON.stringify(a);return i!==m.drillDownStates.getCurrentState().stateIdentifier}return!1}function s(e){var t=m.summary.drillDown,a={};m.filters?a.filter=angular.copy(m.filters):a.filter={},m.drillDownStates.getStates().forEach(function(e){a.filter=angular.extend(a.filter,e.extraFilters)});for(var i in t.additional_filter_params)a.filter[t.additional_filter_params[i]]=e[i];return a}function c(t,a,i){return e.call("reports/"+m.reportid+"/summary/"+a,"GET",[],i).then(function(e){return e.data.data})}function d(e){a.show(),m.drillDownStates.goToState(e),i(function(){a.hide()})}var m=this;m.drillDownInitiated=!1,m.filterSnapshot=angular.copy(m.filters),m.loadBreadcrumb=d,m.shouldShowNoDataFound=!1,o.$watch("vm.summary",function(e,t){"object"==typeof e&&(m.shouldShowNoDataFound=!n.hasSummaryEnoughDataToPresent(e.data),m.shouldShowNoDataFound&&m.onSummaryUnload(m.summary.id))}),m.drillDownStates={currentState:!1,states:[],addState:function(e){this.states.push(e)},goToState:function(e){var t=[],a=this;"object"==typeof a.currentState&&"function"==typeof m.onSummaryLoad&&m.onSummaryUnload(a.currentState.summary.id),this.states.forEach(function(i,o){o<=e&&t.push(a.states[o]),e==o&&(a.states=t,a.currentState=a.states[e])}),m.summary=this.currentState.summary,m.summary.data.length>0&&"function"==typeof m.onSummaryLoad&&m.onSummaryLoad(m.summary,this.currentState.extraFilters)},getCurrentState:function(){return this.currentState},getStateCount:function(){return this.states.length},getStates:function(){return this.states}},m.ondrilldown=l,m.drillDownAvailable=r;var u=m.summary.drillDown;if(u){var p=m.reportid+"_"+u.target_summary_id+"_"+JSON.stringify({filter:m.filters});m.drillDownStates.addState({summary:m.summary,extraFilters:{},breadCrumb:t.getLocalizedCustom(m.summary.name),stateIdentifier:p})}else m.drillDownStates.addState({summary:m.summary,extraFilters:{},breadCrumb:t.getLocalizedCustom(m.summary.name)});m.drillDownStates.goToState(0)}angular.module("app.core").directive("reportSummary",e),e.$inject=["$translate","webservice"],t.$inject=["webservice","localizedMessages","loader","$timeout","$scope","reportService"]}(),function(){"use strict";function e(e,t,a,i,o,n){return function(l,r){if(l===n.HIDDEN_FIELD_FILL)return l;if(void 0!==r.format)for(var s=r.format.split(","),c=0;c<s.length;c++)switch(s[c]){case"date":if("string"==typeof l){var d=l.replace(/ 00:00:00$/,"");moment(d).isValid()&&(l=t.toLocalizedDate(d))}break;case"date_range":if("string"==typeof l){var m=l.split(" - ");2===m.length&&moment(m[0]).isValid()&&moment(m[1]).isValid()&&(l=t.toLocalizedDate(m[0])+" - "+t.toLocalizedDate(m[1]))}break;case"timestamp":if("string"==typeof l){var m=l.split(" ");moment(m[0]).isValid()&&(l=t.toLocalizedDate(m[0]),m.shift(),l+=m.length?" "+m.join(" "):"")}break;case"localize":l=o("sanitizebraces")(l),l=e.instant(l);break;case"localize_past_employee_sufix":if("string"==typeof l){var u=e.instant("Past Employee");l=l.replace("Past Employee",u)}break;case"localize_event_name":if("string"==typeof l){var p="Past Event";l=l.replace(p,e.instant(p))}break;case"localize_deleted_suffix":if("string"==typeof l){var f="Deleted";l=l.replace(f,e.instant(f))}break;case"escape":break;case"ucwords":"string"==typeof l&&(l=l.toLowerCase().replace(/^[\u00C0-\u1FFF\u2C00-\uD7FF\w]|\s[\u00C0-\u1FFF\u2C00-\uD7FF\w]/g,function(e){return e.toUpperCase()}));break;case"currency":if(void 0!==r.metaData&&l)try{var g=JSON.parse(r.metaData),h=g.hasOwnProperty("decimals")&&g.decimals?g.decimals:2,v=g.hasOwnProperty("symbol")&&g.symbol?g.symbol:"";l=a.formatCurrencyValue(l,h,v)}catch(y){}break;case"remove_empty_fill":l="---"===l?"":l;break;case"duration_ymd":if("string"==typeof l){var b=l.split("_");3==b.length&&(l=b[0]+" "+e.instant("Year(s)")+" "+b[1]+" "+e.instant("Month(s)")+" "+b[2]+" "+e.instant("Day(s)"))}break;case"leave_hours":if("string"==typeof l){var C=i.getSettings();l=parseFloat(l).toFixed(C.hourDecimals)}break;default:try{l=o(s[c])(l,r);break}catch(w){l=l;break}}return l}}angular.module("app.core").filter("reportValue",e),e.$inject=["$translate","dateService","numberService","leaveService","$filter","reportConstants"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w,S,D){function T(){return 1==et.total?h.getLocalizedCustom("(1) Record Found"):h.getLocalizedCustomWithVariables("({{noOfRecords}}) Records Found",{noOfRecords:et.total})}function x(){et.showSearchFilters=!et.showSearchFilters,m(function(){e.$broadcast("rzSliderForceRender")},0,!1)}function F(e,t){var a=et.availableFilters;"include_fields"==t&&(a=et.availableIncludeFields),"group_by_fields"==t&&(a=et.availableGroupByFields);var i=et.isOxd?"col-3":"s6";if(!a.hasOwnProperty(e))return i;var o=a[e],n=o.type;if(["checkbox","age_comparison","date_comparison"].indexOf(n)>=0)i=et.isOxd?"col-6":"s12";else if(["date_comparison"].indexOf(n)>=0)i=et.isOxd?"col-6":"s6";else if("widget_group"===n){var l=et.selectedFilters[e];try{i="date_comparison"===o.dependents[l[e]].type?et.isOxd?"col-6":"s12":et.isOxd?"col-3":"s6"}catch(r){}}else o.hasOwnProperty("style_class")&&o.style_class.includes("filter-row")&&(i="boolean"===n?"col-12 report-row-check-box-filter-style":"col-12 report-row-filter-style");if(o.style_class){var s=o.style_class.replace("filter-row","");i=i+" "+s}return i}function k(e){I();var t=et.tabs.find(function(t){return t.id==e&&t.hasOwnProperty("display_columns")});return t}function E(e){var t=et.tabs.find(function(t){return t.id==e&&t.hasOwnProperty("display_columns")});return!(t&&t.hasOwnProperty("hide_second_column_on_default")&&t.hide_second_column_on_default)||et.showSecondColumn}function I(){v.vm.activeTabId&&(et.requiredFieldsValidations[v.vm.activeTabId]=v.pimReportFilterForm.$valid),et.allRequiredFieldsAreSet=Object.keys(et.requiredFieldsValidations).length>0&&!Object.values(et.requiredFieldsValidations).includes(!1)}function A(e){I();var t=et.tabs.find(function(t){return t.id==e&&t.hasOwnProperty("sub_heading")});return t?t.sub_heading:""}function M(e,t,a){if(void 0!==a.link.reload){for(var i=Object.keys(a.link.reload),o=0;o<i.length;o++){var n=i[o],l=a.link.reload[n];et.filters[n]=e[l]}r.go(r.current,{id:et.id,filters:et.filters,chartConfig:et.chartConfig},{reload:!0})}}function L(){var e=!et.tabsEnabled||et.allRequiredFieldsAreSet;!et.generateInProgress&&e&&(et.generateInProgress=!0,N()["finally"](function(){et.generateInProgress=!1}))}function P(){var e={filters:j(et.selectedFilters,et.availableFilters,"filters"),includes:{},groupBy:{}};return et.selectedIncludeFields&&et.availableIncludeFields&&(e.includes=j(et.selectedIncludeFields,et.availableIncludeFields,"includes")),et.selectedGroupByFields&&et.availableGroupByFields&&(e.groupBy=j(et.selectedGroupByFields,et.availableGroupByFields,"groupBy")),e}function N(){var e=n.defer();u.remove();var t=P();return et.isOxd?et.loaded?(et.filters=t.filters,et.includes=t.includes,et.groupBy=t.groupBy,et.page=1,ne(),n.all([re(et.page),ae()]).then(function(e){et.generate=!0})["finally"](function(){le(),e.resolve()})):e.resolve():r.go(r.current,{id:et.uniqueName?et.uniqueName:et.id,filters:t.filters,chartConfig:et.chartConfig,show_filters:!1,showSuccessToast:!1,generate:!0},{reload:!0})["finally"](function(){e.resolve()}),e.promise}function O(){et.saveAsInProgress||(et.saveAsInProgress=!0,w.showModal("app/core/reports/report-save-as-modal.html","SaveAsReportController","modal",{reportsNamesList:et.existingReportNames,reportName:et.definition.name,reportFolders:et.reportFolders,folderId:et.definition.folderId}).then(function(e){et.saveAsInProgress=!1,e.reportName&&(et.enableSaveAsButton=!1,et.chartConfig.model&&et.chartConfig.model.groupByFieldId?et.summaryConfiguration=et.chartConfig.model:et.ChartDeleted&&delete et.summaryConfiguration,a.saveAndSearch(e,et,r.params.module)["finally"](function(){et.enableSaveAsButton=!0}))}))}function R(e,t,a){var i;return"date_comparison"===t?a.from||a.to?i={from:f("date")(a.from,"yyyy-MM-dd"),to:f("date")(a.to,"yyyy-MM-dd"),comparison:"BETWEEN"}:et.availableFilters[e]&&et.availableFilters[e].default_value?i={}:delete a.comparison:"number_comparison"===t?"object"==typeof a&&(a.from=void 0!==a.to&&void 0===a.from?"":a.from,a.to=void 0!==a.from&&void 0===a.to?"":a.to,void 0!==a.from&&void 0!==a.to&&(i={from:a.from,to:a.to,comparison:"BETWEEN"})):"select"!==t&&"sub_unit"!==t||"employment_status"!=e&&"sub_unit"!=e?"year_comparison"===t?void 0!==a.from&&void 0!==a.to&&(i={from:a.from,to:a.to,comparison:"BETWEEN"}):i="date"===t?f("date")(a,"yyyy-MM-dd"):a:i=Ie(a),i}function z(e,t){var a=Object.keys(e);return"filters"===t?et.selectedFilterNames=a:"includes"===t?et.selectedIncludeNames=a:"groupBy"===t&&(et.selectedGroupByNames=a),a}function j(e,t,a){for(var i=z(e,a),o={},n=0;n<i.length;n++){var l=i[n],r=t[l];if(void 0!==r)if("widget_group"===r.type){o[l]={};var s=e[l][l];if(r.dependents.hasOwnProperty(s)){o[l][l]=s;var c=r.dependents[s],d=R(s,c.type,e[l][s]);d&&(o[l][s]=d)}}else{var m=R(l,r.type,e[l]);m&&(o[l]=m)}else o[l]=e[l]}return o}function V(e){for(var t in e){if(e.hasOwnProperty(t)&&"widget_group"===e[t].type){var a={};for(var i in e[t].choices)e[t].choices.hasOwnProperty(i)&&(a[i]=e[i]);e[t].dependents=a}e[t].hasOwnProperty("column")&&"1"==e[t].column&&et.filtersInFirstColumn.push(t),e[t].hide_on_default&&(e[t].visible=!1,et.hiddenFiltersOfFirstColumn.push(t))}return e}function G(e,t){for(var a=Object.keys(e),i=0;i<a.length;i++){var o=a[i];if("employee_name"===o&&"employee"===t.employee_name.type&&(et.employeeNameFilterFieldAvailable=!0),t[o].depends_on){et.modifyFiltersOnchange=!0;var n={};n[o]=t[o].depends_on,et.dependsOn=n}if(et.availableGroupByFields[o]&&et.availableGroupByFields[o].on_active_disable&&(et.disableFiltersOnActive=!0,et.onActiveDisable[o]=et.availableGroupByFields[o].on_active_disable),"object"==typeof t[o].parent_filters)for(var l in t[o].parent_filters)if(t[o].parent_filters.hasOwnProperty(l)){var r=t[o].parent_filters[l];Array.isArray(et.filterDependancyMap[r])||(et.filterDependancyMap[r]=[]),et.filterDependancyMap[r].push(o)}}if(Object.keys(et.onActiveDisable).length>0)for(var s in et.onActiveDisable)for(var c in et.onActiveDisable[s])et.disabledFilterMapping.hasOwnProperty(c)?et.disabledFilterMapping[c].push(s):et.disabledFilterMapping[c]=[s]}function B(e,t){var a=!1;if(void 0!==e.link)if(void 0!==e.link["if"])for(var i=Object.keys(e.link["if"]),o=0;o<i.length;o++){var n=i[o],l=e.link["if"][n];a=t[n]==l}else a=!0;return a}function q(e,t,a){a&&(et.hoverRow=a.seriesIndex)}function H(){return n(function(e,t){et.id?et.id==parseInt(et.id,10)?e():a.getReportDefinitionByUniqueName(et.id).then(function(t){et.uniqueName=et.id,et.id=t.data.id,e()},function(e){t(e)}):(r.go("404"),t({}))})}function U(){et.breadCrumbs&&(et.showSaveAsButton=!1),o.showSuccessToast&&m(function(){h.showLocalizedToast("saveSuccess")}),H().then(function(){return W().then(function(){return et.generate||"0"!=et.preloadResults&&!et.slowReport?n.all([re(et.page),ae()]).then(function(e){et.loaded=!0}):(et.showSearchFilters=!0,Le(),et.loaded=!0,void 0)})})["catch"](function(e){le(),403===e.status?r.go("403"):404===e.status?r.go("404"):500===e.status?u.error(h.getLocalizedCustom("An Internal Error Occurred. Please Contact Your System Administrator.")):e.data&&u.warning(e.data),et.loaded=!0})}function W(){return a.getReportDefinition(et.id).then(function(e){et.definition=e.data;var t={reportNamesList:a.fetchReportNames(et.reportName)};if(et.showSaveAsButton&&(t.folderList=a.fetchReportFolders(et.definition.folderId,et.definition.uniqueName,e.data.parentReportFolder)),n.all(t).then(function(e){et.existingReportNames=e.reportNamesList.existingReportNames,et.showSaveAsButton&&(et.reportFolders=e.folderList),et.enableSaveAsButton=!0}),et.pageSize=e.meta.pageLimit?e.meta.pageLimit:et.pageSize,et.fillEmptyRows=!!e.meta.fillEmptyRows&&e.meta.fillEmptyRows,et.includeFiltersInCsv=e.meta.include_filters_in_csv,et.summaryConfigurable=e.meta.chart_configurable,et.reportUniqueName=e.data.uniqueName,et.availableFilters=V(ke(xe(e.meta.available_filters))),et.availableIncludeFields=V(ke(xe(e.meta.available_include_fields))),et.availableGroupByFields=V(ke(xe(e.meta.available_group_by_fields))),et.selectedFilters=e.data.definition.selected_filters,et.selectedIncludeFields=e.data.definition.selected_include_fields,et.selectedGroupByFields=e.data.definition.selected_group_by_fields,Object.keys(e.meta.tabs).length>0&&(et.tabs=Ee(e.meta.tabs)),G(et.selectedFilters,et.availableFilters),et.selectedIncludeFields&&et.availableIncludeFields&&G(et.selectedIncludeFields,et.availableIncludeFields),et.selectedGroupByFields&&et.availableGroupByFields&&G(et.selectedGroupByFields,et.availableGroupByFields),et.showRequiredHelperText=X(et.availableFilters,et.selectedFilters),et.reportName=e.data.name,et.preloadResults=e.data.preloadResults,et.autoGenerateUponFilterChange=e.data.autoGenerateUponFilterChange,et.showGenerateButton=!et.autoGenerateUponFilterChange,et.reportIcon=e.data.icon,et.editable=e.data.editable,et.cretePermission=e.data.canCreate,et.slowReport=e.meta.slowReport,et.showReportProgress=et.slowReport,et.displayGroups=Q(e.meta.available_display_groups,e.data.definition.selected_display_fields,e.data.definition.selected_display_groups),et.summaryConfigurable){var i=e.data.definition.summary_configuration;"object"==typeof i&&i&&i.summaryId&&null===et.chartConfig.showSummary&&(et.chartConfig.showSummary=!0,et.chartConfig.model=i)}et.activeTabId="filter_fields";var o=Object.keys(et.filters);if(Y(),et.selectedDisplayFields=et.definition.definition.selected_display_fields,et.summaryConfiguration=et.definition.definition.summary_configuration,et.selectedGroupingFields=et.definition.definition.selected_grouping_fields,te(et.selectedFilters,!1),te(o,!0),et.selectedFilters.hasOwnProperty("show_only_filtered_records")){var l=et.selectedFilters.show_only_filtered_records;delete et.selectedFilters.show_only_filtered_records,e.meta.hasOwnProperty("show_only_filtered_records_available")&&e.meta.show_only_filtered_records_available&&(et.selectedFilters.show_only_filtered_records=l)}J(),K(),Z()})}function Y(){et.selectedFilterNames=Object.keys(et.definition.definition.selected_filters),et.definition.definition.selected_include_fields&&(et.selectedIncludeNames=Object.keys(et.definition.definition.selected_include_fields)),et.definition.definition.selected_group_by_fields&&(et.selectedGroupByNames=Object.keys(et.definition.definition.selected_group_by_fields))}function J(){o.backButton?e.$broadcast("addTopMenuBackButton",o.backButton):void 0===o.backButton&&e.$broadcast("addTopMenuBackButton",{uiSref:"reports_and_analytics.catalogue",tooltip:"Reports"})}function K(){o.reportNameAsMenuPill&&e.$broadcast("setForcedMenuPillName",{menuTitle:et.reportName})}function Z(){et.menuSelector&&""!=et.menuSelector?e.$broadcast("markMenuItemAsCurrent",{automationId:et.menuSelector}):o.initialState&&e.$broadcast("markMenuItemAsCurrent",{stateName:o.initialState})}function Q(e,t,a){var i={};for(var o in e)e.hasOwnProperty(o)&&Array.isArray(e[o].fields)&&(i[o]=e[o],i[o].fields=i[o].fields.filter(function(e){return t.indexOf(e.id)!==-1}),0==i[o].fields.length?delete i[o]:i[o].displayHeader=a&&a.indexOf(o)!==-1);return i}function X(e,t){for(var a=!1,i=_.keys(t),o=0;o<i.length;o++){var n=i[o];if(Ne().indexOf(e[n].type)!==-1&&"true"===e[n].required&&JSON.parse(e[n].required)){a=!0;break}}return a}function ee(e,t){if("Head Count Report (Per Sub Unit)"===t.name){for(var a in e)e[a].sub_unit=h.getLocalizedCustom(e[a].sub_unit);return e}return e}function te(e,t){for(var a=0;a<e.length;a++){var i=e[a],o=et.availableFilters[i];void 0!==o&&"date_comparison"===o.type?(et.selectedFilters[i]={},et.filters[i].from?et.selectedFilters[i].from=new Date(moment.utc(et.filters[i].from).format("l LT")):et.selectedFilters[i].from=null,et.filters[i].to?et.selectedFilters[i].to=new Date(moment.utc(et.filters[i].to).format("l LT")):et.selectedFilters[i].to=null):void 0!==o&&"date"===o.type?et.selectedFilters[i]=new Date(moment.utc(et.filters[i]).format("l LT")):t&&(et.selectedFilters[i]=et.filters[i])}}function ae(){et.summaryDataRestricted=!1,et.summaryDataRestrictedMessage="No Data to Show";var e={};return et.filters&&(e.filter=et.filters),et.summariesToPrint={},t.call("reports/"+et.id+"/summary","GET",[],e).then(function(e){e.data.messages.length>0?(et.summaries=[],et.summaryDataRestricted=!0,et.summaryDataRestrictedMessage=e.data.messages[0]):et.summaries=e.data.data,et.summaryAvailable()&&null===et.chartConfig.showSummary&&e.data.data.length>0&&(et.chartConfig.showSummary=!0),e.data.meta&&e.data.meta.summaryConfiguration&&"object"==typeof e.data.meta.summaryConfiguration&&(et.chartConfig.model=e.data.meta.summaryConfiguration)},function(e){"403"!=e.status||null==e.data&&void 0==e.data&&""==e.data||(u.error(p.instant(e.data),null),et.summaryDataRestricted=!0),et.summaries=[]})}function ie(){et.reportProgress=0;var e={progressCallback:oe,title:"Generating Report",pollInterval:100,closeDelay:0,determinate:!1,forceCompletionCallback:function(e){return!1},forceCancellationCallback:function(e){return!1}},t={keyboard:!1,backdrop:"static"};w.showModal("app/core/modal/oxd_progress_modal.html","ProgressModalController","modal",e,t).then(function(){console.log("modal completed")})}function oe(){return n.when(et.reportProgress)}function ne(){et.reportProgress=0,et.isOxd?et.showReportProgress?ie():et.showLoader=!0:i.show()}function le(){et.isOxd?et.showReportProgress?et.reportProgress=100:et.showLoader=!1:i.hide()}function re(e){ne(),et.maxNumOfRowsToDisplay=20,et.formattedResults=[],et.results=[];var a={"page[offset]":(e-1)*et.pageSize,"page[limit]":et.pageSize},i=!1;if(Object.keys(et.filters).length>0){for(var o in et.filters)("object"==typeof et.filters[o]&&!_.isEmpty(et.filters[o])||"object"!=typeof et.filters[o]&&""!==et.filters[o])&&(i=!0);i||(et.filters[Object.keys(et.filters)[0]]="")}return et.filters&&(a.filter=et.filters),et.includes&&(a.includeFields=et.includes),et.groupBy&&(a.groupBy=et.groupBy),t.call("reports/"+et.id,"GET",[],a).then(function(t){if(et.results=ee(t.data.data,t.data.meta),et.headers=me(t.data.meta),et.meta=t.data.meta,et.hideDetailResults=et.meta.hideDetailResults,et.reportName=et.meta.name,et.filterCriteriaSubHeading=et.meta.filterCriteriaSubHeading,Le(),et.total=et.meta.total,et.page=e,et.isOxd?et.showPaging=et.total>10:et.showPaging="-1"!==et.meta.pageLimit,et.editable=et.meta.editable,0==et.results.length&&(et.showSearchFilters=!0,u.info(p.instant("No Results Found"),null)),"Head Count Report (Per Sub Unit)"===et.meta.name){et.showChart=!0;for(var a=0;a<et.results.length;a++)if(a<et.results.length-et.meta.summaryRows){var i=et.chartColors[a%5];et.results[a].legendColor=i,et.chartData.push({label:et.results[a].sub_unit,data:et.results[a].emp_count,color:i})}et.chartOptions={series:{pie:{show:!0,radius:1,label:{show:!0,radius:2/3,formatter:function(e,t){var a=Math.round(t.percent);return"<div class='pie-chart-label'>"+a+"%</div>"},threshold:.05}}},grid:{hoverable:!0,clickable:!0},legend:{show:!1}}}else et.showChart=!1;pe(0,et.maxNumOfRowsToDisplay),v.$emit("triggerScroll"),le()},function(e){le(),400===e.status?u.error(h.getLocalizedCustom("Invalid Data")):r.go("403")})}function se(e){re(e).then(function(){de()})}function ce(e){be(e).then(function(){de()})}function de(){m(function(){$(".report-results-top-bar")[0].scrollIntoView()})}function me(e){et.lastFieldIndexesInGroups=[];for(var t={main:[],sub:[]},a=Object.keys(e.headers),i=!0,o=!0,n=1,l=0;l<a.length;l++){var r=a[l],s=e.headers[r],c=ue(r,s,e.headerInfo),d=" "!==s.groupHeader,m=l===a.length-1;d&&(t.main.push({label:s.groupHeader,rowSpan:1,colSpan:s.__fieldCount,isGroup:!0,firstGroup:o,lastGroup:m}),o=!1);for(var u=!0,p=0;p<c.length;p++){var f=c[p],g=p===c.length-1,h=m&&g;d?t.sub.push({label:f.label,rowSpan:1,colSpan:1,width:f.width,firstFieldInGroup:u,first:i,last:h,lastFieldInGroup:g,align:f.align}):(t.main.push({label:f.label,rowSpan:2,colSpan:1,width:f.width,firstFieldInGroup:u,first:i,last:h,lastFieldInGroup:g,align:f.align,firstGroup:o,lastGroup:m}),o=!1),g&&!m&&et.lastFieldIndexesInGroups.push(n),n++,u=!1,i=!1}}return t}function ue(e,t,a){var i=[],o=angular.copy(t);if(delete o.groupHeader,delete o.__fieldCount,void 0!==a[e]&&angular.isArray(a[e]))for(var n=a[e],l=0;l<n.length;l++){var r=o[l],s=n[l];"true"===s.display&&i.push({label:r,width:s.width,align:s.align})}else for(var c=Object.keys(o),d=0;d<c.length;d++){var m=c[d],r=o[m],u=a[m];u&&"true"===u.display&&i.push({name:m,label:r,width:u.width,align:u.align})}return i}function pe(e,t){if(et.meta&&"object"==typeof et.meta.headerInfo){var a=Object.keys(et.meta.headerInfo);et.results.length<t&&(t=et.results.length);for(var i=e;i<t;i++)for(var o=et.results[i],n=ye(o),l=0;l<n.length;l++){for(var r=0,s=n[l],c=[],d=0;d<a.length;d++){var m,u=a[d],p=et.meta.headerInfo[u];if(angular.isArray(p)){et.hasOneToManySections=!0;for(var g=0;g<p.length;g++){var h=p[g];"true"===h.display&&(r++,o[h.group][s]?(h=ge(h,o[h.group][s]),m=he(f("reportValue")(o[h.group][s][g],h),h,o[h.group][s],r)):m={format:"text",value:""},fe(m,r),c.push(m))}}else"true"===p.display&&(r++,0===s?(p=ge(p,o),m=he(f("reportValue")(o[u],p),p,o,r)):m={format:"text",value:""},fe(m,r),c.push(m))}et.formattedResults.push(c)}}}function fe(e,t){et.lastFieldIndexesInGroups.indexOf(t)!==-1&&(e.hasOwnProperty("cssClass")?e.cssClass+=" last_in_group":e.cssClass="last_in_group")}function ge(e,t){return e&&void 0!==e.metaData&&(e.metaData=ve(e.metaData,t)),e}function he(e,t,a){var i="text",o="left",n="";if(t&&void 0!==t.format){var l=t.format.split(",");l.indexOf("link")!==-1&&(i=ve(t.link.href,a,e)),l.indexOf("currency")!==-1&&(et.hasCurrencyFields=!0)}return t&&void 0!==t.align&&""!==t.align&&(o=t.align),t&&void 0!==t["class"]&&""!==t["class"]&&(n=t["class"]),"date"!=t.format&&"right"!=t.align||(n+=" show_full_content"),{format:i,align:o,value:e,cssClass:n}}function ve(e,t,a){for(var i,o=/\$P\{(.*?)\}/g;null!==(i=o.exec(e));)e=e.replace(i[0],t[i[1]]);return e}function ye(e){for(var t=1,a=Object.keys(e),i=0;i<a.length;i++){var o=e[a[i]];angular.isArray(o)&&o.length>t&&(t=o.length)}for(var n=[],l=0;l<t;l++)n.push(l);return n}function be(e){return e<et.total||et.pageSize<et.total?(et.pageSize=e,Ce(),et.page=1,re(et.page)):void(et.pageSize=e)}function Ce(){et.lastPage=Math.ceil(et.total/et.pageSize)}function we(e){var t={filters:0};if(void 0!==e&&(t.configs=e),Object.keys(et.filters).length>0&&et.meta&&!et.hideDetailResults)t.filters=et.filters,et.includes&&(t.includeFields=et.includes),et.groupBy&&(t.groupBy=et.groupBy);else if(1==$e("tabular").length&&et.hideDetailResults){var a=et.summariesToPrint[$e("tabular")[0]];if(t.summary=a.summary.id,Object.keys(a.extraFilters).length>0){var i=angular.extend({},et.filters,a.extraFilters);t.filters=i}else Object.keys(et.filters).length>0&&(t.filters=et.filters)}return c.baseUrl+"api/exportReport/"+et.id+"/csv?"+d(t)}function _e(e){var t=Object.keys(et.filters).length>0?et.filters:0,a={filters:t,clientDownloadId:e};return et.includes&&(a.includeFields=et.includes),et.groupBy&&(a.groupBy=et.groupBy),c.baseUrl+"api/exportReport/"+et.id+"/pdf?"+d(a)}function Se(e,t){et.summariesToPrint[e.id]={summary:e,extraFilters:t}}function De(e){delete et.summariesToPrint[e]}function Te(e){l.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(a){$(a.element).openModal(),a.close.then(function(a){if(a===!0)return t.call("reports","DELETE",{data:e},{}).then(function(e){r.go("pim.reports",{})})})})}function xe(e){for(var t in e){if("employment_status"==t){var a=Fe(e);e[t].choices[a]=h.getLocalizedCustom("All"),e[t].sortedChoices.unshift({value:a,label:h.getLocalizedCustom("All")})}if("sub_unit_all"==t&&e[t].choices.unshift({value:"1",label:h.getLocalizedCustom("All")}),"customer_all"==t){var a="";e[t].choices[a]=h.getLocalizedCustom("All"),e[t].sortedChoices.unshift({value:a,label:h.getLocalizedCustom("All")})}if("project_all"==t){var a="";e[t].choices[a]=h.getLocalizedCustom("All"),e[t].sortedChoices.unshift({value:a,label:h.getLocalizedCustom("All")})}if("activity_all"==t){var a="";e[t].choices[a]=h.getLocalizedCustom("All"),e[t].sortedChoices.unshift({value:a,label:h.getLocalizedCustom("All")})}}return e}function Fe(e){return"pim_canned.Head_Count_Report_1"===et.reportUniqueName||et.reportUniqueName.startsWith("pim_canned.Head_Count_Report_1_")?'""':et.reportUniqueName.startsWith("pim_canned.Head_Count_Report")||et.reportUniqueName.startsWith("Export_Timesheet_Data_As_CSV")?"":e.employment_status.default_value}function ke(e){return e.service_period&&(e.service_period.label=h.getLocalizedCustom(e.service_period.label)+" ("+h.getLocalizedCustom("Years")+") "),e.age_group&&(e.age_group.label=h.getLocalizedCustom(e.age_group.label)+" ("+h.getLocalizedCustom("Years")+") "),e}function Ee(e){var t=e.map(function(e){var t={id:e.id,label:e.label,icon:e.icon};return void 0!==e.columns&&(t.display_columns=e.columns),void 0!==e.sub_heading&&(t.sub_heading=e.sub_heading),void 0!==e.hideSecondColumnOnDefault&&(t.hide_second_column_on_default=e.hideSecondColumnOnDefault),t});return Object.keys(t).length>0&&(et.tabsEnabled=!0),t}function Ie(e){if("object"==typeof e)for(var t in e)if(e[t]==h.getLocalizedCustom("All"))return"";return e}function Ae(){var e=et.maxNumOfRowsToDisplay;e<et.pageSize&&et.results.length>0&&(et.maxNumOfRowsToDisplay+=tt,pe(e,et.maxNumOfRowsToDisplay))}function Me(){return et.fullScreenMode?".scroll-container":null}function Le(){var e={},t=[];if(et.breadCrumbs)for(var a=0;a<Object.keys(et.breadCrumbs).length;a++)t.push(et.breadCrumbs[a].name),et.breadCrumbs[a].state&&(e[a]={state:et.breadCrumbs[a].state,params:et.breadCrumbs[a].params});else t=["Reports and Analytics","Reports"];g.setForcedTitle(t,e)}function Pe(){var e=(et.generate||"0"!=et.preloadResults)&&(et.meta&&!et.hideDetailResults||(!et.editable||et.chartConfig.showSummary)&&1==$e("tabular").length);return e}function $e(e){var t=[];for(var a in et.summariesToPrint)if(et.summariesToPrint.hasOwnProperty(a)){var i=et.summariesToPrint[a].summary.views;for(var o in i)i.hasOwnProperty(o)&&i[o].type==e&&t.push(et.summariesToPrint[a].summary.id)}return t}function Ne(){return["timesheet_period","employee","date_comparison","date"]}function Oe(){null===et.chartConfig.showSummary?Re(!0):et.chartConfig.showSummary=!et.chartConfig.showSummary}function Re(e){function t(e){return e.groupByFieldId1="",e.groupByFieldId2="",e.groupByFieldId3="",Array.isArray(e.groupByFieldId)?(e.groupByFieldId.length>0&&(e.groupByFieldId1=e.groupByFieldId[0]),e.groupByFieldId.length>1&&(e.groupByFieldId2=e.groupByFieldId[1]),e.groupByFieldId.length>2&&(e.groupByFieldId3=e.groupByFieldId[2])):e.groupByFieldId1=e.groupByFieldId,delete e.groupByFieldId,e}u.remove();w.showModal("app/core/reports/report-config-chart-modal.html","ConfigChartToReportController","modal",{modalProperties:{title:h.getLocalizedCustom(e?"Add Chart":"Edit Chart")},displayGroups:et.displayGroups,model:t(angular.copy(et.chartConfig.model)),addToEmployeeDashBoard:et.employeeNameFilterFieldAvailable}).then(function(t){t&&(et.chartConfig.showSummary=!0,et.hideDetailResults=t.hideDetailedData,t.summaryId="dynamic_chart",ne(),et.chartConfig.model=t,Ve(t,e).then(function(){et.generate||"0"!=et.preloadResults?n.all([re(et.page),ae()]).then(function(e){h.showLocalizedToast("saveSuccess"),le()}):(h.showLocalizedToast("saveSuccess"),le())},function(e){404===e.status?u.error(p.instant("Report No longer Exists")):e.data&&e.data.details&&u.error(p.instant(e.data.details)),le()}))})}function ze(){u.remove(),w.showDeleteConfirmationModal().then(function(e){e===!0&&(ne(),je().then(function(){et.chartConfig=angular.copy(et.defaultChartConfig),et.hideDetailResults=!1,n.all([re(et.page),ae()]).then(function(e){h.showLocalizedToast("deleteSuccess"),le()})},function(e){404===e.status&&u.error(p.instant("Report No longer Exists")),le()}))})}function je(){return t.call("reports/"+et.id+"/summary/dynamic_chart","DELETE").then(function(){et.ChartDeleted=!0})}function Ve(e,a){function i(){var t=[];e.groupByFieldId1&&t.push(e.groupByFieldId1),e.groupByFieldId1&&e.groupByFieldId2&&t.push(e.groupByFieldId2),e.groupByFieldId1&&e.groupByFieldId2&&e.groupByFieldId3&&t.push(e.groupByFieldId3),delete e.groupByFieldId1,delete e.groupByFieldId2,delete e.groupByFieldId3,e.groupByFieldId=1===t.length?t[0]:t}i();var o,n;return a?(o="POST",n="reports/"+et.id+"/summary"):(o="PATCH",n="reports/"+et.id+"/summary/"+e.summaryId),t.call(n,o,e,{})}function Ge(){var e=!1;return et.summaries&&et.summaries.forEach(function(t){t.isChild||(e=!0)}),e}function Be(){var e="";return et.chartConfig.showSummary?e=h.getLocalizedCustom("Hide Chart"):et.chartConfig.showSummary===!1?e=h.getLocalizedCustom("Show Chart"):null===et.chartConfig.showSummary&&(e=h.getLocalizedCustom("Add Chart")),e}function qe(t){u.remove();var a=$(t.target).closest("#container-chart").find("div.chart-container svg");1===a.length&&(e.$broadcast("pieChart.showAllLegends"),e.$broadcast("barChart.showXLabel"),He(a).then(function(){m(function(){Ue(a)})}))}function He(e){var t=S.isFirefox?16383:65535,a=n.defer(),i=parseInt(e.attr("width"),10);if(i>t){var o="Too many values to generate an image. Please try with different filters as downloaded image may not contain all the information. Do you wish to Continue?",l="Download Anyway",r="Cancel",s={success:"btn-secondary",cancel:"btn-text","success-icon":"ohrm_download_icon_oxd","header-icon":"ohrm_delete_alert_warning"};w.showConfirmationModal(o,l,r,s).then(function(e){e===!0?a.resolve():a.reject()})}else a.resolve();return a.promise}function Ue(t){var a=S.isFirefox?16383:65535,i=document.createElement("canvas"),o=parseInt(t.attr("width"),10),n=parseInt(t.attr("height"),10);o>a&&(o=a),i.width=o,i.height=n;var l=(new XMLSerializer).serializeToString(t[0]),r=btoa(unescape(encodeURIComponent(l))),s="data:image/svg+xml;base64,",c=s+r,d=document.createElement("img");d.onload=function(){var t=i.getContext("2d");t.drawImage(d,0,0,o,n,0,0,o,n);var a=i.toDataURL("image/png"),l=window.document.createElement("a");l.href=a,l.download="chart.png",document.body.appendChild(l),l.click(),document.body.removeChild(l),e.$broadcast("pieChart.restoreLegends"),e.$broadcast("barChart.restoreXLabel")},d.src=c}function We(){if(!et.pdfExportInProgress){var e=!1,t=D.generateUUID();if(et.isOxd){et.pdfExportInProgress=!0;var a={closeDelay:0,preventClose:!0,determinate:et.total>100,forceCompletionCallback:function(){return e}};w.showProgressModal("Exporting Report to PDF",t,a)["finally"](function(){et.pdfExportInProgress=!1})}Ye(t)["finally"](function(){
et.pdfExportInProgress=!1,e=!0})}}function Ye(e){return et.isOxd||i.show(),m(function(){et.pdfExportData={summary:{},meta:{}},et.pdfExportData.meta.hasDetailedView=!et.hideDetailResults;var t=$e("tabular");return t.forEach(function(e){et.pdfExportData.summary[e]={},et.pdfExportData.summary[e].chart="",et.pdfExportData.summary[e].hasTabularView=!0,et.summariesToPrint[e].extraFilters&&(et.pdfExportData.summary[e].extraFilters=JSON.stringify(et.summariesToPrint[e].extraFilters))}),et.isOxd||(i.hide(),u.info(p.instant("Download Will Start Shortly"))),0===t.length?D.downloadFile(_e(e)):m(function(){var t=document.forms.pdfExportForm,a=new URL(t.action);return a.searchParams.set("clientDownloadId",e),D.downloadFileBySubmittingForm(t,a.toString())})})}function Je(t){u.info(p.instant("Download Will Start Shortly")),e.ohrmGlobals.downloadFile(we(t))}function Ke(e){et.csvExportInProgress||(et.csvExportInProgress=!0,et.hasCurrencyFields||et.hasOneToManySections||et.includeFiltersInCsv?w.showModal("app/core/reports/report-csv-export-modal.html","ReportCsvExportModalController","modal",{clickEvent:e,hasCurrencyFields:et.hasCurrencyFields,hasOneToManySections:et.hasOneToManySections,fillEmptyRows:et.fillEmptyRows,includeFiltersInCsv:et.includeFiltersInCsv}).then(function(e){e?(Je(e),et.csvExportInProgress=!1):et.csvExportInProgress=!1}):(Je(),et.csvExportInProgress=!1))}function Ze(){m(function(){et.fullScreenMode=!0,m(function(){v.$broadcast("recalculateReportHeaderWidths"),v.$broadcast("setReportDatasetHeightToMatchScreen")})})}function Qe(){m(function(){et.fullScreenMode=!1,m(function(){v.$broadcast("recalculateReportHeaderWidths"),v.$broadcast("resizeChart"),de()})})}function Xe(e){var t=e.views.map(function(e){return e.type});return 2===t.length&&"tabular"===t[1]&&"tabular"!==t[0]}var et=this;et.id=o.id,et.menuSelector=o.menuSelector,et.breadCrumbs=o.breadCrumbs,et.templateName=o.templateName,et.dataGroup=o.dataGroup,et.module=o.module,et.prefix=o.prefix,et.generate=o.generate,et.chartConfig=o.chartConfig,et.showPaging=!0,et.page=1,et.total=0,et.pageSize=50,et.filters={},et.editable=!1,et.appendRowsOnScorll=Ae,et.getResultScrollContainer=Me,et.formattedResults=[],et.requiredFieldsValidations={},et.hasCurrencyFields=!1,et.hasOneToManySections=!1,et.infiniteScrollDistance=3,et.onSummaryLoad=Se,et.onSummaryUnload=De,et.summariesToPrint={},et.isReportExportable=Pe,et.toggleChart=Oe,et.editChart=Re,et.summaryAvailable=Ge,et.shouldShowChartsSideBySide=Xe,et.getTooltipForChartToggleButton=Be,et.hideDetailResults=!1,et.showSecondColumn=!1,et.tabsEnabled=!1,et.summaryChartsToPdfExport={},et.fullScreenMode=!1,et.onEnterFullscreen=Ze,et.onExitFullscreen=Qe;var tt=5;et.showFilters=!0,et.summaryConfigSupported=!1,et.displayGroups=[],et.confirmChartDeletion=ze,et.autoGenerateUponFilterChange=!1,et.showGenerateButton=!1,et.showSaveAsButton=!0,et.modifyFiltersOnchange=!1,et.disableFiltersOnActive=!1,et.dependsOn={},et.onActiveDisable=[],et.filtersInFirstColumn=[],et.disabledFilterMapping=[],et.getNoOfRecordsMessage=T,et.reportProgress=0,et.activeTabId="",et.showReportProgress=!1,et.slowReport=!1,et.defaultChartConfig={showSummary:null,model:{chartType:"bar_chart",groupByFieldId:"",aggregateFieldId:"-1",aggregateType:"count",showSummaryTable:!0,hideDetailedData:!1}},et.exportChart=qe,et.exportPDF=We,et.handleCsvExport=_.debounce(Ke,500,!0),et.extraWidthReportContainer=!1,et.employeeNameFilterFieldAvailable=!1,et.allRequiredFieldsAreSet=!1,et.isOxd=r.current.data.oxd,et.disabledFilters=[],et.isOxd&&e.$on("toggleMainMenu",function(e,t){1==t.visibility?et.extraWidthReportContainer=!1:et.extraWidthReportContainer=!0,v.$broadcast("recalculateReportHeaderWidths")}),et.showFilterLoader=!1,et.showLoader=!1,et.loaded=!1,et.ChartDeleted=!1,o.filters&&(et.filters=o.filters),o.chartConfig?et.chartConfig=o.chartConfig:et.chartConfig=angular.copy(et.defaultChartConfig),v.$watch(function(){var e=et.selectedFilters;return et.currentTabSelectedFilters&&Object.keys(et.currentTabSelectedFilters).length>0&&(e=et.currentTabSelectedFilters),e},function(e,a){if(et.tabsEnabled)for(var i in v.pimReportFilterForm)"object"==typeof v.pimReportFilterForm[i]&&Object.keys(v.pimReportFilterForm[i]).length>0&&Object.keys(v.pimReportFilterForm[i]).includes("$error")&&void 0===v.pimReportFilterForm[i].$error.required&&(v.pimReportFilterForm[i].$dirty=!0);if(et.modifyFiltersOnchange)for(var l in et.dependsOn){var r=Object.keys(et.dependsOn[l])[0],s=Object.values(et.dependsOn[l])[0];et.availableFilters[l].visible=!(e.hasOwnProperty(r)&&e[r]===s)}if(et.filtersInFirstColumn.length>1)for(var c in et.filtersInFirstColumn)e[et.filtersInFirstColumn[c]]===!0&&et.disabledFilters.push(et.filtersInFirstColumn[c]),et.disabledFilters=_.uniq(et.disabledFilters),e[et.filtersInFirstColumn[c]]===!1&&(et.disabledFilters=et.disabledFilters.filter(function(e){return e!==et.filtersInFirstColumn[c]}));if(et.disableFiltersOnActive)for(var d in et.onActiveDisable){if(e[d]===!1){var m=et.onActiveDisable[d];for(var l in m)for(var u in et.disabledFilterMapping[l]){var p=et.disabledFilterMapping[l][u];if("2"!==et.availableGroupByFields[l].column||"1"!==et.availableGroupByFields[p].column||e[p]===!0||a[p]===!0){if(e[p]===!0)break;et.availableGroupByFields[l].disabled=!1}}}if(e[d]===!0){var f=et.onActiveDisable[d];for(var l in f)et.availableGroupByFields[l].disabled=!0,et.selectedGroupByFields[l]=f[l]}}if(et.showSecondColumn=et.disabledFilters.length>0,et.availableGroupByFields&&et.hiddenFiltersOfFirstColumn.length>0)for(var g in et.availableGroupByFields)et.hiddenFiltersOfFirstColumn.indexOf(g)!==-1&&(et.availableGroupByFields[g].visible=et.showSecondColumn);if("object"==typeof e){var h={};for(var l in e)e.hasOwnProperty(l)&&("object"==typeof a&&"object"==typeof e[l]&&"object"==typeof a[l]&&JSON.stringify(e[l])!=JSON.stringify(a[l])||"object"==typeof a&&("object"!=typeof e[l]||"object"!=typeof a[l])&&e[l]!=a[l]||l in e&&"object"!=typeof a)&&Array.isArray(et.filterDependancyMap[l])&&et.filterDependancyMap[l].forEach(function(e){h[e]=l});var y,b=[],C={};C.filter=j(et.selectedFilters,et.availableFilters,"filters");for(var l in h)h.hasOwnProperty(l)&&!function(a){if(h.hasOwnProperty(a)){var i=t.call("reports/"+et.id+"/filter/"+a,"GET",[],C).then(function(t){angular.toJson(et.availableFilters[a])!=angular.toJson(t.data.data)&&(et.availableFilters[a]=t.data.data,y=h[a],!t.data.data.hasOwnProperty("default_value")||!t.data.data.default_value||o.filters&&o.filters.hasOwnProperty(y)&&e[y]==o.filters[y]||"project_id"!==a&&(et.selectedFilters[a]=JSON.parse(t.data.data.default_value)))});b.push(i)}}(l);b.length>0?(ne(),n.all(b).then(function(){le()})):et.autoGenerateUponFilterChange&&"object"==typeof a&&L()}},!0),et.viewPage=re,et.viewPageAndFocus=se,et.viewSummary=ae,et.changePageSize=be,et.changePageSizeAndFocus=ce,et.deleteReport=Te,et.getFilterColumnWidthAndStyles=F,et.columnForFilterGroup=k,et.showHideSecondColumn=E,et.getSubHeading=A,et.toggleFilters=x,et.generateReport=L,et.getCSVExportUrl=we,et.getPDFExportUrl=_e,et.isArray=angular.isArray,et.filterDependancyMap={},et.generateInProgress=!1,et.pdfExportInProgress=!1,et.csvExportInProgress=!1,et.saveAsInProgress=!1,et.saveAsReport=_.debounce(O,500,!0),et.existingReportNames=[],et.hiddenFiltersOfFirstColumn=[],et.reportFolders=[],et.selectedFilterNames=[],et.selectedIncludeNames=[],et.selectedGroupByNames=[],et.currentTabAvailableFilters={},et.currentTabSelectedFilters={},et.enableSaveAsButton=!1,U(),et.showChart=!1,et.chartData=[],et.chartOptions={},et.chartColors=["#3A7570","#0C9F51","#BB410B","#1CDAF8","#F88400"],et.onChartHover=q,et.hoverRow=-1,et.followLink=M,et.showLink=B,et.getRows=ye,et.showSearchFilters=o.show_filters,v.$watch("vm.activeTabId",function(e,t){"filter_fields"==e&&(et.currentTabSelectedFilters=et.selectedFilters,et.currentTabAvailableFilters=et.availableFilters),"include_fields"==e&&(et.currentTabAvailableFilters=et.availableIncludeFields,et.currentTabSelectedFilters=et.selectedIncludeFields),"group_by_fields"==e&&(et.currentTabAvailableFilters=et.availableGroupByFields,et.currentTabSelectedFilters=et.selectedGroupByFields)})}angular.module("app.core").controller("CoreReportViewController",e),e.$inject=["$rootScope","webservice","reportService","loader","$stateParams","$q","ModalService","$state","$window","LOGIN","$httpParamSerializerJQLike","$timeout","toast","$translate","$filter","titleService","localizedMessages","$scope","$interval","reportLocalizationHelper","formHelper","modalHelperService","browser","utilService"]}(),function(){"use strict";function e(e){function t(e,t){var i={};for(var o in e)e.hasOwnProperty(o)&&"currency_with_code"===t&&(i[o]=a(e[o]));return i}function a(t){var a=" - ",i=t.split(a);return i[0]+a+e.instant(i[1])}return{localizeReportSelectChoices:t}}angular.module("app.core").factory("reportLocalizationHelper",e),e.$inject=["$translate"]}(),function(){"use strict";function e(e){function t(t,i,o,n){function l(e){return"string"==typeof e?e.replace(/,/g,""):e}if("sum"!==n&&"avg"!==n||t.length<=a+1)return t;t=angular.copy(t);for(var r=0;r<a;r++){var s=Number.NEGATIVE_INFINITY,c=null;t.forEach(function(e,t){var a=Number(l(e[o]));NaN!==a&&s<a&&!e.maxFlag&&(c=t,s=a)}),null!==c&&(t[c].maxFlag=!0)}var d,m=t.reduce(function(e,t){if(!t.maxFlag){var a=l(t[o]);isNaN(Number(a))||(e+=Number(a))}return e},0);if("avg"==n){var u=t.filter(function(e){return!e.maxFlag}).length;d=m/u}else"sum"==n&&(d=m);isNaN(d)||(d=Math.round(100*d)/100),t=t.filter(function(e){return e.maxFlag===!0});var p={};return p[i]=e.getLocalizedCustom("Other"),p[o]=d,p.drilldown=!1,t.push(p),t}var a=10;return{simplifySummaryDataWithOtherField:t}}angular.module("app.core").factory("reportSummaryHelper",e),e.$inject=["localizedMessages"]}(),function(){"use strict";function e(e,t){var a=this;a.title=t.current.data.title,e.setForcedTitle(a.title)}angular.module("app.core").controller("RestrictedAccessController",e),e.$inject=["titleService","$state"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){OHRM.angularInitialized=!0,e.ohrmLoader=t;var p=OHRM.loginAccount.account;a.settings=OHRM.settings,a.account=p,a.emp_number=p.emp_number,a.user_id=p.user_id,a.is_global_admin=p.is_global_admin,a.permissions=p.permissions,a.language=p.preferences.language,a.languageSettings=p.preferences.languageSettings,a.employeeTimeZone=p.preferences.employeeTimeZone,a.dateFormat=p.preferences.dateFormat,o.setDateFormat(p.preferences.dateFormat),p.preferences.language?i.use(p.preferences.language):i.use("en"),a.$state=n,a.$stateParams=l,a.ohrmGlobals=function(){function e(e){window.ohrmLoader.pageTransition=!1,window.location.href=e}return{downloadFile:e}}();var f="messages."+a.language.trim()+".json";$.getJSON("../"+d.webRes+"/i18n/"+f,function(e){a.languageContent=e,a.$broadcast("languageContentUpdate",a.languageContent)}).fail(function(){f="messages.en.json",$.getJSON("../"+d.webRes+"/i18n/"+f,function(e){a.languageContent=e,a.$broadcast("languageContentUpdate",a.languageContent)})}),r.onSuccess({},function(e){e.to().name.indexOf("noncore")===-1&&s.log()}),document.addEventListener("goToAngularRouteFromVue",function(e){n.go(e.detail.uisref,e.detail.params)}),c.baseURL=d.clientBase+"bower_components/tinymce",c.skin_url=d.clientBase+"styles/tinymce/skins/lightgray";m.createCache(u,{cacheFlushInterval:36e5})}angular.module("app.core").run(e),e.$inject=["$window","loader","$rootScope","$translate","dateService","$state","$stateParams","$transitions","navigationService","uiTinymceConfig","LOGIN","CacheFactory","HTTP_CACHE"]}(),function(e){var t=0,a=0,i=e.fn.closeModal,o=function(){return a++,"materialize-lean-overlay-"+a};e.fn.extend({openModal:function(a){var i=e("body"),n=i.innerWidth();i.width(n);var l={opacity:.5,in_duration:350,out_duration:250,ready:void 0,complete:void 0,dismissible:!0,starting_top:"4%",dynamic_position:!1,popup_over_modal:!1,dp_top:"10%",dp_margin_left:"unset"},r=e(this);if(a=e.extend(l,a),!r.hasClass("open"))if(a.popup_over_modal?i.css("overflow","hidden"):a.dynamic_position?i.css("overflow","inherit"):i.css("overflow","hidden"),overlayID=o(),$overlay=e('<div class="lean-overlay"></div>'),t<0&&(t=0),lStack=++t,$overlay.attr("id",overlayID).css("z-index",1e3+2*lStack),r.data("overlay-id",overlayID).css("z-index",1e3+2*lStack+1),r.addClass("open"),e("body").append($overlay),a.dismissible&&($overlay.click(function(){r.closeModal(a)}),e(document).on("keyup.leanModal"+overlayID,function(e){27===e.keyCode&&r.closeModal(a)})),r.find(".modal-close").on("click.close",function(e){r.closeModal(a)}),$overlay.css({display:"block",opacity:0}),r.css({display:"block",opacity:0}),$overlay.velocity({opacity:a.opacity},{duration:a.in_duration,queue:!1,ease:"easeOutCubic"}),r.data("associated-overlay",$overlay[0]),r.hasClass("bottom-sheet"))r.velocity({bottom:"0",opacity:1},{duration:a.in_duration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof a.ready&&a.ready()}});else{e.Velocity.hook(r,"scaleX",.7),r.css({top:a.starting_top});var s={top:"10%",opacity:1,scaleX:"1"};a.dynamic_position&&(s={top:a.dp_top,"margin-left":a.dp_margin_left,opacity:1,scaleX:"1"}),r.velocity(s,{duration:a.in_duration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof a.ready&&a.ready()}})}}}),e.fn.closeModal=function(a){i.apply(this,[a]),a&&a.popup_over_modal&&e("body").css("overflow","hidden"),t--}}(jQuery),function(){"use strict";function e(){return function(e){return"string"==typeof e?e.replace(/{{/g,"\\{\\{").replace(/}}/g,"\\}\\}"):e}}function t(){return function(e){return"string"==typeof e?e.replace(/{{/g,"\\\\{\\\\{").replace(/}}/g,"\\\\}\\\\}"):e}}function a(){return function(e){var t=document.createElement("div"),a=document.createTextNode(e);return t.appendChild(a),t.innerHTML}}function i(e){return function(t){return e("sanitizebraces")(e("sanitizehtml")(t))}}function o(e){return function(t){var a=e("sanitizehtml")(t),i=new RegExp('&lt;img class = "smileys" (.*?)&gt;',"g"),o=new RegExp("&lt;br /&gt;","g");return a=a.replace(i,function(e,t){return'<img class = "smileys" '+t+">"}),a=a.replace(o,"<br />")}}angular.module("app.core").filter("sanitize",i).filter("sanitizebraces",e).filter("sanitizebracesforqtip",t).filter("sanitizehtml",a).filter("sanitizesmileys",o),e.$inject=[],t.$inject=[],a.$inject=[],i.$inject=["$filter"],o.$inject=["$filter"]}(),function(){"use strict";function e(){function e(e){var t={invalid_elements:"embed"},a=new tinymce.html.Schema(t),i=new tinymce.html.DomParser(t,a).parse(e),o=(new tinymce.html.Serializer).serialize(i);return o}var t={sanitizeTinymceContent:e};return t}angular.module("app.core").factory("sanitizeService",e),e.$inject=[]}(),function(){"use strict";function e(e){function t(t){var a={feedType:t};return e.call(i,"GET",[],a)}function a(t){return e.call(i,"PATCH",t,{})}var i="calendarFeedConfig",o={getCalendarFeedConfiguration:t,saveCalendarFeedConfiguration:a};return o}angular.module("app.core").service("calendarFeedService",e),e.$inject=["webservice"]}(),function(){"use strict";function e(){function e(e){var t="",i=e.match(/\.([0-9a-z]+)(?:[\?#]|$)/i);if(i&&i.length>1){var o=i[1].toLowerCase();void 0!=a[o]&&(t=a[o])}return t}var t={detectType:e},a={gif:"image/gif",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",csv:"text/csv",pdf:"application/pdf"};return t}angular.module("app.core").service("fileTypeService",e),e.$inject=[]}(),function(){"use strict";function e(e,t,a){function i(t,a,i){var o={listName:t,includeUserDefinedSettings:a};return i&&(o.reportId=i),e.call("listConfiguration","GET",[],o).then(function(e){var t={},a=angular.fromJson(e.data[0].meta_data),i=a.mandatoryFields,o=a.listFields;return angular.forEach(o,function(e,a){null!=a&&(t[a]=!0)}),angular.forEach(i,function(e){t[e]=!0}),{listConfig:t,mandatoryFields:a.mandatoryFields,defaultFields:a.defaultFields,availableFields:a.availableFields,pageParams:a.pageParams}})}function o(t){return e.call("listConfiguration","PATCH",t,{})}function n(t,a,i){var o={listName:t,includeUserDefinedSettings:a};return i&&(o.reportId=i),e.call("listConfiguration","GET",[],o)}function l(e){var i={};"undefined"!=typeof e&&(e=a.isIE?2*e:e,i.timeOut=e),null!==localStorage.getItem("listConfigurationToast")&&(t.showCustomizedToast(localStorage.getItem("listConfigurationToast"),"success",i),localStorage.removeItem("listConfigurationToast"))}var r={getRegisteredListConfiguration:i,updateRegisteredListConfiguration:o,getListConfigurationsForModal:n,showListConfigurationSuccess:l};return r}angular.module("app.core").service("listConfigurationService",e),e.$inject=["webservice","localizedMessages","browser"]}(),function(){"use strict";function e(e){function t(t,a){e.$broadcast("addTopMenuBackButton",{uiSref:"pim.employees.profile.profile({empNumber: "+t+"})",tooltip:"Employee Profile",icon:"back_to_profile",keepExistingBackButton:a})}var a={addBackToProfileButton:t};return a}angular.module("app.core").service("menuService",e),e.$inject=["$rootScope"]}(),function(){"use strict";function e(e){function t(t,a,o){if(!i(t))return t;t=parseFloat(t);var n=e.languageSettings.decimal_separator,l=e.languageSettings.thousand_separator,r=e.languageSettings.is_currency_symbol_at_right;r="undefined"!=typeof r&&"1"===r,a="undefined"==typeof a||null===a||isNaN(a=Math.abs(a))?2:a,n="undefined"==typeof n||null===n?".":n,l="undefined"==typeof l||null===l?",":l;var s="\\d(?=(\\d{3})+"+(a>0?"\\D":"$")+")",c=t.toFixed(Math.max(0,~~a)),d=o&&!r?o:"",m=o&&r?o:"";return d+(n?c.replace(".",n):c).replace(new RegExp(s,"g"),"$&"+(l||","))+m}function a(e,t,a,i){e=e?e:0,a=a?a:1,i=i?i:1;for(var o,n=[],l=[],r=e;r<=t;r+=a){for(o=r.toString();o.length<i;)o="0"+o;l.push(o),n.push({value:o,name:o})}return{titleMap:n,"enum":l}}function i(e){return!isNaN(parseFloat(e))&&!isNaN(e-0)}function o(e,t){var a=Math.pow(10,t);return(parseInt(e*a,10)/a).toFixed(t)}var n={formatCurrencyValue:t,getNumberArrayForDropdown:a,isNumber:i,roundDown:o};return n}angular.module("app.core").service("numberService",e),e.$inject=["$rootScope"]}(),function(){"use strict";function e(e,t){function a(t){return e.call("leave/weekends","GET",[],t,void 0,!0)}var i={getWeekends:a};return i}angular.module("app.core").service("offDaysService",e),e.$inject=["webservice","$translate"]}(),function(){"use strict";function e(e,t,a){function i(){var i=$(document.body).hasClass("modal-open"),o=$(document.body).hasClass("oxd-modal"),n={close:function(e){}};return e.showModal({templateUrl:"app/core/modal/password_confirmation.html",controller:"PasswordConfirmationModalController",controllerAs:"modal",inputs:{closeCallback:n},bodyClass:"oxd-modal",appendElement:"#modal-holder",preClose:function(e){$(e.element).modal("hide")}}).then(function(e){var l=_.defaults({}||{},{show:!0});return t(function(){$(e.element).modal(l).on("hidden.bs.modal",function(){$(e.element).remove(),n.close(!1)})}),e.close.then(function(e){return i&&$(document.body).addClass("modal-open"),o&&$(document.body).addClass("oxd-modal"),!!e||a.reject({skipLogout:!0})})})}return{showModal:i}}angular.module("app.core").service("passwordConfirmationService",e),e.$inject=["ModalService","$timeout","$q"]}(),function(){"use strict";function e(e,t,a){function i(e){l.remove(e)}function o(e,t){return a.call("customSessionData/"+e,"PUT",{data:t},{}).then(function(a){l.put(e,t)})}function n(t){var i=l.get(t);return void 0===i?a.call("customSessionData/"+t,"GET",{},{}).then(function(e){return l.put(t,e.data.data),e.data.data}):e.when(i)}var l;t.get("sessionCache")||(l=t("sessionCache"));var r={put:o,get:n,clearLocalCache:i};return r}angular.module("app.core").service("sessionCacheService",e),e.$inject=["$q","CacheFactory","webservice"]}(),function(){"use strict";function e(e){function t(){if("object"==typeof crypto){if("function"==typeof crypto.randomUUID)return crypto.randomUUID();if("function"==typeof crypto.getRandomValues&&"function"==typeof Uint8Array){var e=function(e){var t=Number(e);return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)};return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e)}}var t=(new Date).getTime(),a="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var i=16*Math.random();return t>0?(i=(t+i)%16|0,t=Math.floor(t/16)):(i=(a+i)%16|0,a=Math.floor(a/16)),("x"===e?i:3&i|8).toString(16)})}function a(e,t,a){var o=t?t:e.action,n=a?a:e.method;n="POST"===n.toUpperCase()?"POST":"GET";var l=new FormData(e),r=new URLSearchParams(l),s={method:n,body:r};return i(o,s)}function i(t,a){var i=e.defer(),o="",n=a?a:{};return fetch(t,n).then(function(e){if(!e.ok)throw i.reject(),Error(e.statusText);var t=e.headers.get("Content-Disposition"),a=t.split(";");return o=a[1].split("=")[1].replaceAll('"',""),e.blob()}).then(function(e){if(null!=e){var t=window.URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=o,document.body.appendChild(a),a.click(),a.remove()}i.resolve()})["catch"](function(e){i.reject(),console.error(e)}),i.promise}var o={generateUUID:t,downloadFile:i,downloadFileBySubmittingForm:a};return o}angular.module("app.core").service("utilService",e),e.$inject=["$q"]}(),function(){"use strict";function e(e,t,a){function i(i){return i||!a.settings?t.call("settings","GET",[],{},void 0,!1).then(function(e){return e.data.data}):e.when(a.settings)}function o(e,t){return n.getSettings(t).then(function(t){return void 0!==t[e]?t[e]:null})}var n={getSetting:o,getSettings:i};return n}angular.module("app.core").factory("settingsService",e),e.$inject=["$q","webservice","$rootScope"]}(),function(){"use strict";function e(e){var t=VueComponents["default"].store(e);return t}angular.module("app.core").service("$store",e),e.$inject=["webservice"]}(),function(){"use strict";function e(e,t){function a(e){return t.call("subunits/"+e,"GET").then(function(e){return e.data.data})}var i={getSubunitById:a};return i}angular.module("app.pim").factory("subunitService",e),e.$inject=["$q","webservice"]}(),function(){"use strict";function e(){return function(e){return e=void 0===e||null===e?"":e,e.toString().toLowerCase().replace(/\b([a-z])/g,function(e){return e.toUpperCase()})}}angular.module("app.core").filter("titlecase",e)}(),function(){"use strict";function e(e,t){function a(e,t,a){switch(e){case"success":o(t,a);break;case"info":n(t,a);break;case"warning":l(t,a);break;case"error":r(t,a);break;default:n(t,a)}}function i(e,t,a){var i={iconClass:"default"};"undefined"!=typeof a&&angular.extend(i,a),toastr.info(e,c(t,"star_border"),d(!1,i))}function o(e,t){toastr.success(e,c("Success","oxd_check"),d(!1,t))}function n(e,t){toastr.info(e,c("Info","info_outline"),d(!1,t))}function l(e,t){toastr.warning(e,c("Warning","ohrm_delete_alert_warning"),d(!0,t))}function r(e,t){toastr.error(e,c("Error","error_outline"),d(!0,t))}function s(){toastr.remove()}function c(e,a){return m()?'<div class="icon-wrap"><i class="material-icons">'+a+"</i></div>"+t.instant(e):""}function d(e,t){var a={positionClass:"toast-top-right",target:"#right-side",timeOut:2e3};return m()?(a.positionClass="toast-bottom-left",a.target="#right-side",a.closeButton=!0):a.escapeHtml=!0,e&&(a.timeOut=0,a.extendedTimeOut=0,a.closeButton=!0),"undefined"!=typeof t&&angular.extend(a,t),a}function m(){return e.current.data&&e.current.data.oxd}var u={success:o,info:n,warning:l,error:r,remove:s,show:a,defaultToast:i};return u}angular.module("app.core").factory("toast",e),e.$inject=["$state","$translate"]}(),function(e){"use strict";function t(e){var t=e;return e&&(t=(e+"").replace(/,/g,"")),t}var a=function(e){return e=t(e),(isNaN(e)||""==e)&&(e=0),Big.call(this,e)};a.prototype=Object.create(Big.prototype),a.prototype.constructor=a,e.OhrmBig=a}(this),function(){"use strict";function e(e,t){function a(){return t.isLoggedIn()?e.emp_number:void t.login().then(function(t){return e.emp_number})}var i={getEmployeeId:a};return i}angular.module("app.core").factory("userService",e),e.$inject=["$rootScope","webservice"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(e,a,i,o){var n=!1;t.languageContent&&(v(e,a,i,o),n=!0),t.$on("languageContentUpdate",function(){n||(v(e,a,i,o),n=!0)})}function h(e,a,i,o,n,l){var r=!1;return t.languageContent&&(v(e,a,i,o,n,l),r=!0),t.$on("languageContentUpdate",function(){r||(v(e,a,i,o,n,l),r=!0)}),b}function v(i,o,m,g,h,v){const y={webservice:{call:function(e,t,i,o,n,l){return a.call(e,t,i,o,n,l)},get:function(e,t,i){return a.get(e,t,i)},logout:function(){return a.logout()}},$state:{go:function(e,t,a){return d(n.go(e,t,a))},href:function(e,t,a){return n.href(e,t,a)},currentState:{name:n.current.name,url:n.current.url}},$stateParams:r,$location:{url:function(e){return l.url(e)}},$q:{defer:s.defer},titleService:{setForcedTitle:function(e,t){c.setForcedTitle(e,t)}},$dateFormat:t.dateFormat,miscNgActionService:p};b=Vue.createApp(i).use(f).use(g).use(o,{duration:2500,persist:!1,animation:"oxd-toast-list",position:"bottom"}).use(m,{langugePack:t.languageContent,dateFormat:t.dateFormat}).provide("ngServices",y),b.config.globalProperties.baseUrl=e.baseUrl,b.config.globalProperties.isAdmin=t.account.isAdmin,b.config.globalProperties.account=t.account,b.config.globalProperties.empNo=t.emp_number,b.config.globalProperties.userName=t.account.first_name,b.config.globalProperties.ngServices=y,v&&b.provide("appSpecificData",v),b.provide("uiTinymceConfig",u),b.provide("languageSettings",t.languageSettings),h?b.mount(h.toString()):b.mount("#mount-vue-app")}function y(){b.unmount()}var b,C={initiateVueApp:g,initiateVueAppAndReturnVueAppInstance:h,unMountVueApp:y};return document.addEventListener("addTopMenuBackButton",function(e){var a={uiSref:e.detail.uisref,tooltip:e.detail.tooltip};e.detail.icon&&(a.icon=e.detail.icon),e.detail.href&&(a.href=e.detail.href),t.$broadcast("addTopMenuBackButton",a)}),document.addEventListener("angularToast",function(e){m.show(e.detail.messageType,e.detail.message)}),C}angular.module("app.core").factory("vueService",e),e.$inject=["LOGIN","$rootScope","webservice","$translate","dateService","$state","$location","$stateParams","$q","titleService","$timeout","toast","uiTinymceConfig","vueMiscNgActionService","$store"]}(),function(){"use strict";function e(e,t,a,i){var o=null,n=i.current.data.vueLayout,l=i.current.data.vueComponent,r=l.reduce(function(e,t){return e[t]},VueComponents["default"]);n&&(o=n.reduce(function(e,t){return e[t]},VueComponents["default"])),o&&(r={components:{layout:o,comp:r},template:"<layout><comp/></layout>"}),e.initiateVueApp(r,VueComponents["default"].toaster,VueComponents["default"].translate,VueComponents["default"].theme),a.$on("$destroy",function(){e.unMountVueApp()})}angular.module("app.core").controller("VueController",e),e.$inject=["vueService","$rootScope","$scope","$state"]}(),function(){"use strict";function e(e){function t(t){return e.showModal("app/recruitment/documentTemplates/document_templates_modal.html","RecruitmentEditDocumentTemplateController","modal",{documentTemplate:{},dataList:[],selectedData:t})}var a={addRecruitmentDocumentTemplate:t};return a}angular.module("app.core").factory("vueMiscNgActionService",e),e.$inject=["modalHelperService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p){function f(){return null!=I}function g(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(a+"="+encodeURIComponent(e[a]));return t.join("&")}function h(e,t,i){return L.login().then(function(){var o,r={useCache:!1,serverFetch:!0,timeout:!1};i=angular.extend(r,i);var s={method:"GET",url:n.baseUrl+"api/"+e,headers:{Authorization:"Bearer "+I,"Content-Type":"application/x-www-form-urlencoded"}};return void 0!==t&&(s.paramSerializer="$httpParamSerializerJQLike",s.params=t),i.timeout&&(s.timeout=timeout),i.useCache&&(s.cache=u.get(l)),i.serverFetch===!0?y(s).then(function(e){return e.fromCache=!1,e}):i.serverFetch===!1?i.useCache&&o.get(s.url)?y(s).then(function(e){return e.fromCache=!0,e}):a.reject(!1):a.when(i.serverFetch).then(function(){return y(s).then(function(e){return e.fromCache=!1,e})})},C)}function v(e,t,a,o,r,s){return L.login().then(function(){var i;"POST"===t||"DELETE"===t||"PATCH"===t||"PUT"===t?(i="application/json",a=JSON.stringify(a)):i="application/x-www-form-urlencoded";var c={method:t,url:n.baseUrl+"api/"+e,data:a,headers:{Authorization:"Bearer "+I,"Content-Type":i}};return void 0!==o&&(c.paramSerializer="$httpParamSerializerJQLike",c.params=o),void 0!==r&&(c.timeout=r),void 0!==s&&(c.cache=s===!0?u.get(l):s),y(c)},function(){m.put("redirect_to_after_login",i.location.href,{secure:!0,path:"/"}),i.location.href=n.baseUrl+"auth/logout/seamless"})}function y(e,i){return"undefined"==typeof i&&(i=!0),e.headers.Authorization="Bearer "+I,t(e).then(function(e){return e},function(t){return 401==t.status?b(t,e,i).then(function(t){return t&&t.checkedInSession&&(i=!1),y(e,i)},function(e){return e&&e.skipLogout||C(),a.reject(t)}):a.reject(t)})}function b(e,t,o){return 401==e.status&&"expired_token"===e.data.error?w().then(function(e){return e},function(e){return e&&400==e.status&&e.data&&"invalid_grant"===e.data.error&&o?S().then(function(e){return{checkedInSession:!0}}):a.reject()}):401==e.status&&"invalid_token"===e.data.error?o?S().then(function(e){return{checkedInSession:!0}}):a.reject():401==e.status&&"reauthentication_required"===e.data.error?p.showModal():401==e.status&&"token_user_not_matched"===e.data.error?(i.location.reload(),a.reject({skipLogout:!0})):a.reject({skipLogout:!0})}function C(){m.put("redirect_to_after_login",i.location.href,{secure:!0,path:"/"}),i.location.href=n.baseUrl+"auth/logout/seamless"}function w(){var e={method:"POST",url:n.baseUrl+"oauth/issueToken",data:{grant_type:"refresh_token",client_id:n.clientId,client_secret:"",refresh_token:A}};return t(e).then(function(e){return e.data.access_token?(I=e.data.access_token,void(A=e.data.refresh_token)):a.reject()})}function S(){var e={method:"GET",url:n.baseUrl+"core/getAccessToken"};return t(e).then(function(e){return e.data.access_token?(I=e.data.access_token,void(A=e.data.refresh_token)):a.reject()})}function D(e,t,i,o,n,l,s,c){v(i,o,n,l,s,c).then(function(i){_.isEqual(r["requestCache_"+t].data,i.data)||(r["requestCache_"+t]=angular.copy(i),"function"==typeof e.callback&&e.callback(a.when(i)))})}function T(t,i,o,n,l,c,d){var m=s.createHash(i+o+JSON.stringify(n)+JSON.stringify(l));return r["requestCache_"+m]?(t.hasOwnProperty("event")&&t.hasOwnProperty("callback")&&e.$on(t.event,function(e,a){D(t,m,i,o,n,l,c,d)}),a.when(angular.copy(r["requestCache_"+m]))):v(i,o,n,l,c,d).then(function(e){return r["requestCache_"+m]=angular.copy(e),a.when(e)})}function x(e,t){var a;a=n.baseUrl+"api/"+e,a+="undefined"==typeof t?"":"?"+g(t);var i=u.get(l);i.remove(a)}function F(e){for(var t=n.baseUrl+"api/"+e,a=u.get(l),i=a.keys(),o=0;o<i.length;o++)i[o].startsWith(t)&&a.remove(i[o])}function k(){var e=u.get(l);e.removeAll()}function E(){function e(e){var t=e.data.token;return I=t.access_token,A=t.refresh_token,M=null,r.$reset(),void 0!==I}function i(e){M=null,C()}if(void 0!==I)return a(function(e,t){e(!0)});if(null===M){var o={method:"GET",url:n.baseUrl+"core/getLoggedInAccountToken",headers:{"X-Requested-With":"XMLHttpRequest"}};M=t(o).then(e,i)}return M}var I,A,M=null,L={call:v,login:E,clearCache:x,clearAllCache:k,callBackground:T,clearMatchingKeysFromCache:F,get:h,objecttoParams:g,logout:C,isLoggedIn:f};return L}angular.module("app.core").factory("webservice",e),e.$inject=["$rootScope","$http","$q","$window","$translate","LOGIN","HTTP_CACHE","$sessionStorage","md5","$timeout","dateService","$cookies","CacheFactory","passwordConfirmationService"]}(),function(){"use strict";function e(e,t,a,i,o){function n(e,t){var a=[];t||a.push({name:o.getLocalizedCustom("All"),value:"",htmlClass:"dropDownGroupElements"});for(var i in e){a.push({name:i,value:l(e[i]),htmlClass:"dropDownGroupHeading"});var n=e[i];for(var r in n)a.push({
name:""+n[r],value:r,htmlClass:"dropDownGroupElements"})}return a}function l(e){var t="";for(var a in e)t=t+a.toString()+",";return t=t.substring(0,t.length-1)}var r={getOperationalCountryLocationDropDown:n};return r}angular.module("app.core").factory("widgetChoiceHelper",e),e.$inject=["$q","$window","$translate","webservice","localizedMessages"]}(),function(){"use strict";function e(e,t){var a={isActionAllowed:function(a,i,o){return e(function(e,n){var l;l={workflowName:a,workflowState:i,workflowAction:o},t.call("workflowPermissions","GET",[],l,void 0,!0).then(function(t){e(t.data.data)})["catch"](function(e){n(e)})})}};return a}angular.module("app.core").factory("workflowPermissions",e),e.$inject=["$q","webservice"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"corporate_directory",config:{"abstract":!0,url:"/corporate_directory",template:"<ui-view/>"},data:{oxd:!0}},{state:"corporate_directory.directory",config:{url:"/directory",views:{"":{templateUrl:"app/corporate_directory/directory/corporate-directory.directory.html",controller:"CorporateDirectoryController",controllerAs:"vm"}},data:{title:"Corporate Directory",oxd:!0}}}]}angular.module("app.corporate-directory").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g){function h(){g.isCostCenterEnabled({page:{limit:1,offset:0},include:"additionalEmployeeInformation"}).then(function(e){S.costCenterEnabled=e});var e={allLocations:"true"},t={jobTitles:a.call("jobTitles","GET",{}),subUnits:a.call("subunits","GET",[],{tree:!0}),locations:g.fetchOperationalCountryLocationHierarchy(e).then(function(e){S.operationalCountryLocations=p.getOperationalCountryLocationDropDown(e.data.data.options,!S.accessibleAllLocations)})};d.all(t).then(function(e){S.jobTitles=e.jobTitles.data.data,S.subUnits=e.subUnits.data.data,v(),y()})}function v(){S.formData={locations:t.getEnumAndTitleMapForSelect(S.operationalCountryLocations,{name:"name",value:"value"}),jobTitles:t.getEnumAndTitleMapForSelect(S.jobTitles,{name:"jobTitleName",value:"id"}),subUnits:t.getEnumAndTitleMapForSelect(_(S.subUnits),{value:"id",name:"name"},!0)},S.formData.jobTitles.titleMap.unshift({name:i.getLocalizedCustom("All"),value:""}),S.formData.jobTitles["enum"].unshift(""),S.formData.subUnits.titleMap.unshift({name:i.getLocalizedCustom("All"),value:""}),S.formData.subUnits["enum"].unshift("")}function y(){S.model.location=S.model.location?S.model.location:S.formData.locations["enum"][0],S.model.job_title=S.model.job_title?S.model.job_title:S.formData.jobTitles["enum"][0],S.model.sub_unit=S.model.sub_unit?S.model.sub_unit:S.formData.subUnits["enum"][0],S.schema={type:"object",title:"Filter",properties:{job_title:{title:"Job Title",type:"string","enum":S.formData.jobTitles["enum"]},location:{title:"Location",type:"string","enum":S.formData.locations["enum"]},sub_unit:{title:"Sub Unit",type:"string","enum":S.formData.subUnits["enum"]},costCentre:{title:"Cost Center",type:["object","null"],idsToSkip:[]}},required:[]},S.form=[{type:"row",items:[{type:"select",htmlClass:"col-6",key:"job_title",emptyOption:!1,titleMap:S.formData.jobTitles.titleMap,condition:function(){return S.formData.jobTitles.titleMap.length>0}},{type:"select",htmlClass:"col-6",key:"location",emptyOption:!1,titleMap:S.operationalCountryLocations}]},{type:"row",items:[{type:"select",htmlClass:"col-6",key:"sub_unit",emptyOption:!1,titleMap:S.formData.subUnits.titleMap,condition:function(){return S.formData.subUnits.titleMap.length>0}},{key:"costCentre",type:"cost-centre-auto-complete",htmlClass:"col-6",placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",condition:function(){return S.costCenterEnabled}}]}]}function b(e){n(S.model)}function C(){n(!1)}function w(){n(S.initialModel)}function _(e){var e=e.map(function(e){return e.name=Array(5*e.level+1).join("")+e.name,e});return e}var S=this;S.initialModel={location:null,job_title:null,sub_unit:null},S.clickEvent=f,S.accessibleAllLocations=!0,S.operationalCountryLocations=[],S.model=angular.copy(S.initialModel),angular.merge(S.model,u),S.title="",S.apply=b,S.reset=w,S.cancel=C,S.locations=[],S.jobTitles=[],S.subUnits=[],S.costCenterEnabled=!1,h()}angular.module("app.performance").controller("CorporateDirectoryFilterController",e),e.$inject=["$state","formHelper","webservice","localizedMessages","employeeService","close","loader","toast","$scope","$stateParams","$q","formValidationHelper","model","widgetChoiceHelper","clickEvent","corporateDirectoryService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l){function r(a,i){v.isProfile=!0,v.employeeEmails=a.employeeEmails?a.employeeEmails:{},v.employeeTelephones=a.employeeTelephones?a.employeeTelephones:{},v.employeeSocailMedia=a.employeeSocailMedia?a.employeeSocailMedia:{},v.selectedEmployee={Name:a.employeeFullName,employeeInfo:a.employeeInfo,id:a.employeeId,team:a.employeeSubUnit,jobTitle:a.employeeJobTitle,location:a.employeeLocation,profilePicture:a.employeePicture,mobileNumber:e.formatNumber(v.employeeTelephones.employeeMobile),workNumber:e.formatNumber(v.employeeTelephones.employeeWorkTelephone),homeNumber:e.formatNumber(v.employeeTelephones.employeeHomeTelephone),address:e.formatAddress(a),email:v.employeeEmails.employeeWorkEmail,otherEmail:v.employeeEmails.employeeOtherEmail,costCentre:a.employeeCostCentre,OpCountry:a.employeeOpCountry,socialmedia:{facebook:v.employeeSocailMedia.employeeFacebookContact,twitter:v.employeeSocailMedia.employeeTwitterContact,linkedin:v.employeeSocailMedia.employeeLinkedinContact,gmail:v.employeeEmails.employeeWorkEmail},employeeCustomFields:a.employeeCustomFields,socialMediaAvailable:!!p(v.employeeSocailMedia)||v.employeeEmails.employeeWorkEmail,isCustomFieldAvailable:f(a.employeeCustomFields)},a.employeeAddress&&void 0!=a.employeeAddress&&(a.employeeAddress.city&&(v.selectedEmployee.city=a.employeeAddress.city),a.employeeAddress.country&&(v.selectedEmployee.country=a.employeeAddress.country),a.employeeAddress.zipcode&&(v.selectedEmployee.zipCode=a.employeeAddress.zipcode)),n(function(){t.$broadcast("directoryRightPanelSelected"),$(i.target).closest(".employee-info-container").get(0)&&$(i.target).closest(".employee-info-container").get(0).scrollIntoView({block:"nearest"})})}function s(t){v.employeeSearchString=t,v.filter=null;var a={filter:{emp_name_or_id:t},page:{limit:"5",offset:"0"}};return e.getDirectoryEmployeesInformation(a).then(function(e){return e.map(function(e){return e.middleName?e.name=e.firstName+" "+e.middleName+" "+e.lastName:e.name=e.firstName+" "+e.lastName,e.terminated&&(e.name+=" ("+l.instant("Past Employee")+")"),e})})}function c(t){v.quickSearched=!0,v.offset=0,d(),t?("object"==typeof t?(t.originalObject&&t.originalObject.empNumber&&(v.employeeSearchString="",v.filters?v.filters.employee_id_list=[t.originalObject.empNumber]:v.filters={employee_id_list:[t.originalObject.empNumber]}),delete v.filters.emp_name_or_id):"string"==typeof t&&(v.employeeSearchString=t,v.filters?v.filters.emp_name_or_id=t:v.filters={emp_name_or_id:t},delete v.filters.employee_id_list),u()):(delete v.filters.employee_id_list,delete v.filters.emp_name_or_id,v.filters&&(y.filter=g()),e.getDirectoryEmployeesInformation(y).then(function(e){v.employees=e,v.stopInfiniteScroll=!1}))}function d(){v.isProfile=!1,t.$broadcast("directoryResetLeftPanel")}function m(e){i.showModal("app/corporate_directory/directory/corporate-directory-filter.html","CorporateDirectoryFilterController","modal",{model:v.filters,clickEvent:e}).then(function(e){"object"==typeof e&&(v.filters=e,v.quickSearched=!1,d(),u(),t.$broadcast("angucomplete-alt:clearInput"),t.$broadcast("clearListQuickSort"))})}function u(){v.offset=0,v.filters&&(y.filter=g()),e.getDirectoryEmployeesInformation(y).then(function(e){v.employees=e,v.isProfile=!1,v.stopInfiniteScroll=!1})}function p(e){for(var t in e)if(null!==e[t]&&""!=e[t])return!0;return!1}function f(e){for(var t in e)if(null!==e[t]&&""!=e[t])return!0;return!1}function g(){var e={};return v.filters&&(v.quickSearched?(v.filters.emp_name_or_id&&(e.emp_name_or_id=v.filters.emp_name_or_id),v.filters.employee_id_list&&(e.employee_id_list=v.filters.employee_id_list)):(v.filters.location&&(e.location=v.filters.location),v.filters.sub_unit&&(e.sub_unit=v.filters.sub_unit),v.filters.job_title&&(e.job_title=v.filters.job_title),v.filters.costCentre&&(e.cost_centre_id=v.filters.costCentre.id))),e}function h(){if(!v.busyLoadingData&&!v.stopInfiniteScroll){v.busyLoadingData=!0,v.showLoader=!0,0===v.offset&&(v.employees=[]);var t={page:{offset:v.offset,limit:v.limit},filter:g(),include:"additionalEmployeeInformation"};v.offset+=v.limit,e.getDirectoryEmployeesInformation(t).then(function(e){v.employees&&v.employees.length>0?e&&e.length>0?v.employees.push.apply(v.employees,e):v.stopInfiniteScroll=!0:v.employees=e,v.busyLoadingData=!1,v.showLoader=!1,v.loadFinish=!0})}}var v=this;v.isProfile=!1,v.employees=[],v.limit=50,v.offset=0,v.scrollCount=0,v.busyLoadingData=!1,v.loadFinish=!1,v.showProfile=r,v.hideProfile=d,v.onFilterOpen=m,v.fetchEmployees=h;var y={page:{limit:v.limit,offset:v.offset},include:"additionalEmployeeInformation"};v.quickSearch={remoteApiHandler:s,onSearch:c,type:"employee"},v.quickSearched=!1}angular.module("app.corporate-directory").controller("CorporateDirectoryController",e),e.$inject=["corporateDirectoryService","$scope","webservice","modalHelperService","loader","$timeout","$translate"]}(),function(){"use strict";function e(e,t){function a(e){return t.get("/directoryEmployees",e,{useCache:!1}).then(function(e){return e.data.data})}function i(e){return t.get("/directoryEmployees",e,{useCache:!1}).then(function(e){return e.data.meta.costCenterEnabled})}function o(e){return t.call("operationalCountryLocationHierarchy","GET",[],e)}function n(e){var t=[];return e&&e.employeeAddress&&(e.employeeAddress.street1&&t.push(e.employeeAddress.street1),e.employeeAddress.street2&&t.push(e.employeeAddress.street2),e.employeeAddress.city&&t.push(e.employeeAddress.city),e.employeeAddress.province&&t.push(e.employeeAddress.province),e.employeeAddress.country&&t.push(e.employeeAddress.country)),t.join(", ")}function l(e){var t=!1,a="BEGIN:VCARD\nVERSION:3.0\n";return e.Name&&!s(e.Name)?(a+="N:"+e.employeeInfo.lastName+";"+e.employeeInfo.firstName+";",a+=e.employeeInfo.middleName+";\n"):a+="N:;\n",e.mobileNumber&&(t=!0,a+="TEL;CELL:"+e.mobileNumber+"\n"),e.socialmedia&&e.socialmedia.gmail&&!s(e.socialmedia.gmail)&&(t=!0,a+="EMAIL;WORK;INTERNET:"+e.socialmedia.gmail+"\n"),a+="END:VCARD",t?a:""}function r(e){var t=[];return!!e&&(t.push(e.slice(0,e.length-6)),t.push(e.slice(e.length-6,e.length-3)),t.push(e.slice(e.length-3)),e.length<6?e:t.join(" "))}function s(e){for(var t=0;t<e.length;t++)if(e.charCodeAt(t)>127)return!0;return!1}var c={getDirectoryEmployeesInformation:a,fetchOperationalCountryLocationHierarchy:o,formatAddress:n,generateQR:l,formatNumber:r,isCostCenterEnabled:i};return c}angular.module("app.corporate-directory").factory("corporateDirectoryService",e),e.$inject=["$q","webservice"]}(),function(){"use strict";function e(e){return{restrict:"E",templateUrl:"app/corporate_directory/directory/directives/directory-employee-info.html",scope:{employeeObj:"=employeeObj",clickHandler:"=clickHandler"},link:function(t){function a(e){e.addClass(o)}var i=[],o="employee-info-card-active";$(".employee-info-card").on("click",function(){var t=$(this);e(function(){if(i.length>=1){var e;for(e=0;e<i.length;e++)i[e].removeClass(o);i.push(t),a(t)}else i.push(t),a(t)})}),t.$parent.$on("directoryResetLeftPanel",function(e,t){$(".corporate-directory-left-panel").css("height",""),$(".corporate-scroll-bar").css("height","")})},controller:t,controllerAs:"vm"}}function t(e){}angular.module("app.corporate-directory").directive("directoryEmployeeInfo",e),e.$inject=["$timeout"],t.$inject=["$scope"]}(),function(){"use strict";function e(e){return{restrict:"E",templateUrl:"app/corporate_directory/directory/directives/directory-search-filter.html",scope:{quickSearch:"=quickSearch",onFilterOpen:"=onFilterOpen"},link:function(e){},controller:t,controllerAs:"controller"}}function t(e){var t=this;t.onQuickSearchSelect=function(a){"object"==typeof a&&a.originalObject&&a.originalObject.empNumber&&(e.quickSearch.onSearch(a),t.quickSearchText=a)},t.updateQuickSearchText=function(e){t.quickSearchText=e}}angular.module("app.corporate-directory").directive("directorySearchFilter",e),e.$inject=["$timeout"],t.$inject=["$scope"]}(),function(){"use strict";function e(e){return{restrict:"E",templateUrl:"app/corporate_directory/directory/directives/directory-selected-employee-info.html",scope:{selectedEmployee:"=selectedEmployee",hideSelectedProfile:"=hideSelectedProfile"},link:function(e,t){var a=$(t).closest(".corporate-directory-panel-container").find(".corporate-directory-left-panel"),i=function(){var e=document.getElementById("#corporate-selected-profile-id");if(e){var t=e.clientHeight;$(".corporate-directory-left-panel").css("height",t-104),$(".corporate-scroll-bar").css("height",t-104)}};a.bind("transitionend",function(){e.$applyAsync(function(){i()})});var o=e.$parent.$on("directoryRightPanelSelected",function(){i()});e.$on("$destroy",function(){a.unbind("transitionend"),o()})},controller:t,controllerAs:"vm"}}function t(e,t,a){function i(e){var t=navigator.clipboard.writeText(e);return t}function o(e){return e.split(" ").join("")}var n=this;n.copyToClipboard=i,n.removeSpaces=o,e.$watch("selectedEmployee",function(e,t){n.qrcode=a.generateQR(e)})}angular.module("app.corporate-directory").directive("directorySelectedEmployeeInfo",e),e.$inject=["$timeout","corporateDirectoryService"],t.$inject=["$scope","$rootScope","corporateDirectoryService"]}(),function(){"use strict";angular.module("app.directives").directive("ohrmDisableAnimation",["$animate",function(e){return{restrict:"A",link:function(t,a){e.enabled(a,!1)}}}])}(),function(){"use strict";function e(){return{restrict:"A",templateUrl:"app/directives/article.html",scope:{newsId:"=",news:"=",config:"="},link:function(e,t,a){$(document).on("click",".tinymce-saved-content p>a",function(e){e.preventDefault();var t=$(this).attr("href");window.open(t,"_blank")})},controller:t,controllerAs:"vm"}}function t(e,t,a,i,o,n,l,r,s,c){function d(e){e==t.newsId&&r(function(){$("#articleId_"+e+" .collapsible-header").trigger("click"),$("html, body").animate({scrollTop:$("#articleId_"+e).position().top-50},"slow")})}function m(e){window.location.href="/api/news/downloadAttachments?id="+e+"&type=news"}function u(e){var t=!1;y.acknowledgeChecked=!0,i.showModal({templateUrl:"app/core/modal/confirmation_modal.html",controller:"ConfirmationModalController",controllerAs:"modal",inputs:{customMessage:o.getLocalizedCustom("Are you sure you want to acknowledge reading this news?"),successLabel:o.getLocalizedCustom("yes, acknowledge"),cancelLabel:o.getLocalizedCustom("No, Cancel")}}).then(function(i){$(i.element).openModal({complete:function(){t||i.controller.cancel()}}),i.close.then(function(i){if(t=!0,i===!0){n.show();var l={entityId:e.id,acknowledge:1,entityType:"news",employeeId:y.employeeId};a.call("news/acknowledgements","POST",l).then(function(t){e.acknowledgement.isAcknowledge=!0,e.acknowledgement.date=t.data.data.date,o.successToast("Successfully Acknowledged")},function(e){o.errorToast("Fail to Acknowledge")})["finally"](function(){n.hide()})}y.acknowledgeChecked=!1})})}function p(e){y.contentLoaded?f(e):(y.showLoader=!0,t.config.fetchItem(e).then(function(e){t.news=e,y.contentLoaded=!0,y.showLoader=!1})["finally"](function(){f(e)}))}function f(t){e.$broadcast("updateUnfold",{newsId:t}),"unfold_more"===$(".mdi-navigation-unfold-"+t).html()?(y.unfold="unfold_less",y.collapsable="Collapse",y.truncatableTopic=void 0):(y.unfold="unfold_more",y.collapsable="Expand",y.truncatableTopic="truncate")}function g(e,t){y.unfoldId=t.newsId}function h(e){return e?s.toLocalizedDate(e.slice(0,10)):null}function v(e){var t={invalid_elements:"embed"},a=new tinymce.html.Schema(t),i=new tinymce.html.DomParser(t,a).parse(e),o=(new tinymce.html.Serializer).serialize(i);return c.trustAsHtml(o)}var y=this;t.$on("updateUnfold",g),y.downloadAttachment=m,y.acknowledgeNews=u,y.checkUnfold=p,y.triggerClick=d,y.getLocalizedAcknowledgementDate=h,y.trustAsHtmlDescription=v,y.employeeId=l.getEmployeeId(),y.acknowledgeChecked=!1,y.unfoldId=void 0,y.unfold=void 0,y.collapsable=void 0,y.truncatableTopic=void 0,y.contentLoaded=!1,y.showLoader=!1}angular.module("app.directives").directive("article",e),e.$inject=[],t.$inject=["$rootScope","$scope","webservice","ModalService","localizedMessages","loader","userService","$timeout","dateService","$sce"]}(),function(){"use strict";function e(e){var t={restrict:"A",link:function(t,a,i,o){var n=!0,l="true"===i.autoFocusFirstElement;t.$watch(function(){return $("form:first *:input[type!=hidden]:first").length},function(t,a){n&&t>0&&l&&(e(function(){$("form:first *:input[type!=hidden]:first").focus()},500),n=!1)})}};return t}angular.module("app.directives").directive("autoFocusFirstElement",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e){return{restrict:"E",templateUrl:"app/directives/charts/ohrm-barchart.html",scope:{summary:"=summary",viewIndex:"=viewIndex",ondrilldown:"=",reportId:"=reportId",oxdStyles:"=oxdStyles",embedded:"=embedded"},controllerAs:"vm",bindToController:!0,controller:t}}function t(e,t,a,i,o){function n(){function n(e){return"string"==typeof e?e.replace(/,/g,""):e}d.view=d.summary.views[d.viewIndex];var s,m;for(var u in d.view.data_mapping)"x"==d.view.data_mapping[u]?s=u:"y"==d.view.data_mapping[u]&&(m=u);d.barChartId="barChart"+d.reportId;var p,f,g,h,v,y,b=d.summary.data;d.scrollBarNeeded=!1,d.view.properties&&d.view.properties.criteria_to_simplify_chart_with_other_field&&b.length>10&&(d.oxdStyles?d.scrollBarNeeded=!0:b=i.simplifySummaryDataWithOtherField(b,s,m,d.view.properties.criteria_to_simplify_chart_with_other_field)),p=b.map(function(e){return n(e[m])}),p.unshift(d.view.legend_y),f=b.map(function(e){var t=e[s];return!d.oxdStyles&&"string"==typeof t&&t.length>30&&(t=t.substring(0,30)+"..."),t}),v=b.map(function(e){return l(e,s)}),v.length>0&&v[0].length>0&&(y=v[0].length),g=b.reduce(function(e,t){return e<parseInt(n(t[m]),10)?parseInt(n(t[m]),10):e},0),h=b.reduce(function(e,t){return null===e?parseInt(n(t[m]),10):e>parseInt(n(t[m]),10)?parseInt(n(t[m]),10):e},null),h>0&&(h=0);var C,w={centered:!0},_=290;d.view.properties&&"vertical"==d.view.properties.x_label_angle?w={rotate:-90,multiline:!1}:d.view.properties&&"diagonal"==d.view.properties.x_label_angle&&(w={rotate:-60,multiline:!1}),d.view.properties&&!isNaN(d.view.properties.x_label_height)&&(C=parseInt(d.view.properties.x_label_height,10)),d.view.properties&&!isNaN(d.view.properties.chart_height)&&(_=parseInt(d.view.properties.chart_height,10));var S=!1,D=!1,T=a.getLocalizedCustom(d.view.legend_x);"string"==typeof T&&T.length>100&&(T=T.substring(0,100)+"...",S=!0);var x=a.getLocalizedCustom(d.view.legend_y);"string"==typeof x&&x.length>50&&(x=x.substring(0,50)+"...",D=!0),d.legendX=T,d.view.properties&&isNaN(d.view.properties.chart_height)&&S&&D&&(_=600);var F=["#b7d53e"],k=void 0,E=void 0;d.oxdStyles&&(F=r(),k=.35,E=function(e,t,a){var i=sanitise(t?t(e[[0]].x,e[0].index):e[0].x),o=sanitise(e[0].value?e[0].value:0);return"<div class='bar-chart-oxd-tooltip'><span class='title'>"+i+"</span><span class='value'>"+o+"</span></div>"},w.rotate=0,w.multiline=!0,y&&(w.multilineMax=y)),c&&c.destroy(),t(function(){c3.chart.internal.fn.additionalConfig={oxd_styles:d.oxdStyles,bar_radiusAll:!1,bar_radius:11.5},c=c3.generate({bindto:"#"+d.barChartId,size:{width:d.scrollBarNeeded?75*f.length:void 0,height:d.oxdStyles?300:void 0},color:{pattern:F},data:{columns:[p],type:"bar",onclick:function(e,t){d.ondrilldown(b[e.x])}},bar:{width:{ratio:k}},axis:{x:{label:{text:d.scrollBarNeeded?"":T,position:"outer-center"},type:"category",categories:f,tick:w,height:d.oxdStyles?65:50},y:{label:{text:x,position:"outer-middle"},max:g,min:h,padding:{top:0,bottom:0},tick:{format:function(e){return parseInt(e)==e?e:null}}}},legend:{show:!1},tooltip:{contents:E,format:{value:function(e){return e},name:function(e){return"string"==typeof e&&e.length>100?e.substring(0,100)+"...":e}}},onrendered:function(){function e(){$("#"+d.barChartId).find("g.c3-axis.c3-axis-x > g.tick > text").each(function(e,t){var a=$(t).find("tspan");if(a.length>0){var i=e<v.length?v[e]:[];i.length>0&&(a.each(function(e){0!==e&&$(this).remove()}),i.forEach(function(e,o){var n=e;if(i.length>1&&o<i.length-1,0===o)$(a[0]).text(n);else{var l=$(a[0]).clone();$(l).text(n.trim()),$(l).attr("dy",14),$(t).append(l)}}))}})}d.oxdStyles&&($("#"+d.barChartId).find("g.c3-axis.c3-axis-y").css("font-size","10px"),$("#"+d.barChartId).find("g.c3-axis.c3-axis-x").css("font-size","10px"),t(function(){e()}))}}),o.$on("toggleMainMenu",function(e,a){t(function(){c.resize({width:d.scrollBarNeeded?75*f.length:void 0,height:d.oxdStyles?300:void 0})})}),e.$on("resizeChart",function(e,a){t(function(){c.resize({width:d.scrollBarNeeded?75*f.length:void 0,height:d.oxdStyles?300:void 0})})}),o.$on("barChart.showXLabel",function(e,t){c.internal.config.axis_x_label.text=T,c.flush()}),o.$on("barChart.restoreXLabel",function(e,t){c.internal.config.axis_x_label.text=d.scrollBarNeeded?"":T})})}function l(e,t){for(var a=[],i=e[t],o=[],n=0;e.hasOwnProperty(t+""+n);){var l=e[t+""+n];o.push(l),n++}if(i===o.join(", "))var a=o.map(function(e){return e.length>10?e.substring(0,10)+"...":e});return a}function r(){var e=["#33A0FF","#FF414D","#5CC0FF","#28DAC6","#6EC885","#FFAA00","#93BE35"],t=s(),a=t%e.length;return[e[a]]}function s(){return"undefined"!=typeof o.dashboard_bar_chart_index?o.dashboard_bar_chart_index++:o.dashboard_bar_chart_index=0,o.dashboard_bar_chart_index}var c,d=this;n(),e.$watch("vm.summary",function(e,t){e&&t&&e!=t&&n()}),e.$on("$destroy",function(){c&&c.destroy()})}angular.module("app.core").directive("ohrmBarChart",e),e.$inject=["$translate"],t.$inject=["$scope","$timeout","localizedMessages","reportSummaryHelper","$rootScope"]}(),function(){"use strict";function e(e){return{restrict:"E",templateUrl:"app/directives/charts/ohrm-linechart.html",scope:{summary:"=summary",viewIndex:"=viewIndex",ondrilldown:"=",reportId:"=reportId"},controllerAs:"vm",bindToController:!0,controller:t}}function t(e,t,a,i){function o(){n.view=n.summary.views[n.viewIndex];var o,l,r;for(var s in n.view.data_mapping)"x"==n.view.data_mapping[s]?o=s:"y"==n.view.data_mapping[s]?l=s:"category"==n.view.data_mapping[s]&&(r=s);n.lineChartId="lineChart"+n.reportId;var c=angular.copy(n.summary.data),d=[],m=[];c.map(function(e){"undefined"==typeof d[e[r]]&&(d[e[r]]=[]),e[l]=e[l].replace(/,/g,""),d[e[r]].push(e),m.indexOf(e[o])===-1&&m.push(e[o])});var u=[];for(var s in d)if("undefined"!=typeof s){var p=[];m.forEach(function(e){var t=!1;d[s].forEach(function(a){e==a[o]&&(t=a[l])}),t===!1?p.push(0):p.push(t)});var f=p;f.unshift(s),u.push(f)}var g=c.reduce(function(e,t){return e<parseInt(t[l])?parseInt(t[l]):e},0),h=c.reduce(function(e,t){return null===e?parseInt(t[l]):g>parseInt(t[l])?parseInt(t[l]):e},null);h>0&&(h=0);var v={centered:!0},y=void 0,b=480;n.view.properties&&"vertical"==n.view.properties.x_label_angle?v={rotate:-90,multiline:!1}:n.view.properties&&"diagonal"==n.view.properties.x_label_angle&&(v={rotate:-60,multiline:!1}),n.view.properties&&!isNaN(n.view.properties.x_label_height)&&(y=parseInt(n.view.properties.x_label_height,10)),n.view.properties&&!isNaN(n.view.properties.chart_height)&&(b=parseInt(n.view.properties.chart_height,10));var C;t(function(){C=c3.generate({bindto:"#"+n.lineChartId,size:{height:b},title:{show:!1,position:"top-center",padding:{top:0,right:0,bottom:20,left:0}},data:{columns:u,type:"line",onclick:function(e,t){if(!n.drilledDown){var a=n.summary.data.filter(function(t){return t[r]==e.id&&t[o]==m[e.index]&&t[l]==e.value});n.ondrilldown(a[0]),n.drilledDown=!0}}},axis:{x:{label:{text:a.getLocalizedCustom(n.view.legend_x),position:"outer-center"},type:"category",categories:m,tick:v,height:y},y:{label:{text:a.getLocalizedCustom(n.view.legend_y),position:"outer-middle"},max:g,min:h,padding:{top:0,bottom:0}}},tooltip:{grouped:!1},color:{pattern:["#EA0034","#009543","#07B9FC","#FD4703","#8200AC","#0047BD","#9AF000","#00AB38","#FF1A1A","#FF822A","#B610BF","#2929A3","#FFB300","#0288D9","#CC72F5","#FFCE00","#00B300","#732673","#FFE63B"]}}),i.$on("toggleMainMenu",function(e,a){t(function(){C.resize()})}),e.$on("resizeChart",function(e,a){t(function(){C.resize()})})})}var n=this;n.drilledDown=!1,o(),e.$watch("vm.summary",function(e,t){e&&t&&e!=t&&o()})}angular.module("app.core").directive("ohrmLineChart",e),e.$inject=["$translate"],t.$inject=["$scope","$timeout","localizedMessages","$rootScope"]}(),function(){"use strict";function e(e,i){return{restrict:"E",templateUrl:"app/directives/charts/ohrm-radar-chart.html",scope:{data:"=data",options:"=options"},controllerAs:"vm",bindToController:!0,link:function(e,t,i,o){a("#radarChart",o.data,o.options)},controller:t}}function t(e,t,i){e.$on("reloadRadarChart",function(e,i,o){t(function(){a("#radarChart",i,o)})})}function a(e,t,a){function i(e,t,a){e.each(function(){for(var e,i=d3.select(this),o=i.text().split(/\s+/).reverse(),n=[],l=1,r=1.4,s=i.attr("y"),c=i.attr("x"),d=parseFloat(i.attr("dy")),m=i.text(null).append("tspan").attr("x",c).attr("y",s).attr("dy",d+"em");e=o.pop();)if(n.push(e),m.text(n.join(" ")),m.node().getComputedTextLength()>t){if(n.pop(),m.text(n.join(" ")),n=[e],++l,l>a){i.append("tspan").text(" ...");break}m=i.append("tspan").attr("x",c).attr("y",s).attr("dy",(l-1)*r+d+"em").text(e)}})}var o={w:600,h:600,margin:{top:20,right:20,bottom:20,left:20},levels:3,maxValue:0,labelFactor:1.25,wrapWidth:60,wrapMaxLines:2,opacityArea:.35,dotRadius:4,opacityCircles:.1,strokeWidth:2,roundStrokes:!1,color:d3.schemeCategory10,numberFormat:"%",mouseoverRadarAreaOpacity:.7};if("undefined"!=typeof a)for(var n in a)"undefined"!=typeof a[n]&&(o[n]=a[n]);var l=Math.max(o.maxValue,d3.max(t,function(e){return d3.max(e.map(function(e){return e.value}))})),r=t[0].map(function(e,t){return e.axis}),s=r.length,c=Math.min(o.w/2,o.h/2),d=d3.format(o.numberFormat),m=2*Math.PI/s,u=d3.scaleLinear().range([0,c]).domain([0,l]);d3.select(e).select("svg").remove();var p=d3.select(e).append("svg").attr("width",o.w+o.margin.left+o.margin.right).attr("height",o.h+o.margin.top+o.margin.bottom).attr("class","radar"+e),f=p.append("g").attr("transform","translate("+(o.w/2+o.margin.left)+","+(o.h/2+o.margin.top)+")"),g=f.append("defs").append("filter").attr("id","glow"),h=g.append("feMerge");g.append("feGaussianBlur").attr("stdDeviation","2.5").attr("result","coloredBlur"),h.append("feMergeNode").attr("in","coloredBlur"),h.append("feMergeNode").attr("in","SourceGraphic");var v=f.append("g").attr("class","axisWrapper");v.selectAll(".levels").data(d3.range(1,o.levels+1).reverse()).enter().append("circle").attr("class","gridCircle").attr("r",function(e,t){return c/o.levels*e}).style("fill","#EEEEEE").style("stroke","#EEEEEE").style("fill-opacity",o.opacityCircles),v.selectAll(".axisLabel").data(d3.range(1,o.levels+1).reverse()).enter().append("text").attr("class","axisLabel").attr("x",4).attr("y",function(e){return-e*c/o.levels}).attr("dy","0.4em").style("font-size","10px").attr("fill","#737373").text(function(e,t){return d(l*e/o.levels)});var y=v.selectAll(".axis").data(r).enter().append("g").attr("class","axis");y.append("line").attr("x1",0).attr("y1",0).attr("x2",function(e,t){return u(1.05*l)*Math.cos(m*t-Math.PI/2)}).attr("y2",function(e,t){return u(1.05*l)*Math.sin(m*t-Math.PI/2)}).attr("class","line").style("stroke","#EEEEEE").style("stroke-width","1px"),y.append("text").attr("class","legend").style("font-size","11px").attr("text-anchor","middle").attr("dy","0.35em").attr("fill","#6A6B6A").attr("x",function(e,t){return u(l*o.labelFactor)*Math.cos(m*t-Math.PI/2)}).attr("y",function(e,t){return u(l*o.labelFactor)*Math.sin(m*t-Math.PI/2)}).text(function(e){return e}).call(i,o.wrapWidth,o.wrapMaxLines);var b=d3.lineRadial().curve(d3.curveLinearClosed).radius(function(e){return u(e.value)}).angle(function(e,t){return t*m});o.roundStrokes&&b.interpolate("cardinal-closed");var C=f.selectAll(".radarWrapper").data(t).enter().append("g").attr("class","radarWrapper");C.append("path").attr("class","radarArea").attr("d",function(e,t){return b(e)}).style("fill",function(e,t){return o.color(t)}).style("fill-opacity",o.opacityArea).on("mouseover",function(e,t){d3.selectAll(".radarArea").transition().duration(200).style("fill-opacity",.1),d3.select(this).transition().duration(200).style("fill-opacity",o.mouseoverRadarAreaOpacity)}).on("mouseout",function(){d3.selectAll(".radarArea").transition().duration(200).style("fill-opacity",o.opacityArea)}),C.append("path").attr("class","radarStroke").attr("d",function(e,t){return b(e)}).style("stroke-width",o.strokeWidth+"px").style("stroke",function(e,t){return o.color(t)}).style("fill","none"),C.selectAll(".radarCircle").data(function(e,t){return e}).enter().append("circle").attr("class","radarCircle").attr("r",o.dotRadius).attr("cx",function(e,t){return u(e.value)*Math.cos(m*t-Math.PI/2)}).attr("cy",function(e,t){return u(e.value)*Math.sin(m*t-Math.PI/2)}).style("fill",function(e,t,a){return o.color(a)}).style("fill-opacity",1);var w=f.selectAll(".radarCircleWrapper").data(t).enter().append("g").attr("class","radarCircleWrapper"),_=f.append("text").attr("class","tooltip").style("opacity",0);w.selectAll(".radarInvisibleCircle").data(function(e,t){return e}).enter().append("circle").attr("class","radarInvisibleCircle").attr("r",1.5*o.dotRadius).attr("cx",function(e,t){return u(e.value)*Math.cos(m*t-Math.PI/2)}).attr("cy",function(e,t){return u(e.value)*Math.sin(m*t-Math.PI/2)}).style("fill","none").style("pointer-events","all").on("mouseover",function(e,t){var a=parseFloat(d3.select(this).attr("cx"))-10,i=parseFloat(d3.select(this).attr("cy"))-10;_.attr("x",a).attr("y",i).text(d(e.value)).transition().duration(200).style("opacity",1)}).on("mouseout",function(){_.transition().duration(200).style("opacity",0)})}angular.module("app.core").directive("ohrmRadarChart",e),e.$inject=["$translate","$timeout"],t.$inject=["$scope","$timeout","localizedMessages"]}(),function(){"use strict";function e(e){return{restrict:"E",templateUrl:"app/directives/charts/oxd-bar-chart.html",scope:{data:"=data",options:"=options"},controllerAs:"vm",bindToController:!0,controller:t,link:function(e,t,a,i){}}}function t(e,t){function a(){$(".oxd-bar-chart-container").html("");var e=100*d3.max(o.data,function(e){return e.value})/90;0==e&&(e=1);var t=[];angular.copy(o.data,t),_.forEach(t,function(t){_.set(t,"value",e)});var a=o.options.shadow?o.options.shadow:{},n={height:o.options.height,width:a.width?a.width:330,color:a.color?a.color:"#e8eaef",spacing:a.spacing?a.spacing:.4,isShadow:!0,"class":"shadowSvg"};i(t,n,e);var l=o.options.main?o.options.main:{};n={height:o.options.height,width:l.width?l.width:340,color:l.color?l.color:"#ff7b1d",spacing:l.spacing?l.spacing:.7,isShadow:!1,"class":"mainSvg"},i(o.data,n,e)}function i(e,a,i){t(function(){function t(e){if(!e.value)return"";var t=u.bandwidth()/2;return"M"+u(e.name)+","+(p(e.value)+t)+"a"+t+","+t+" 0 0 1 "+u.bandwidth()+", 0v"+(s-p(e.value)-t)+"a"+t+","+t+" 0 0 1 "+-u.bandwidth()+", 0Z"}var o={top:10,right:20,bottom:20,left:5},n=a.width?a.width:300,l=a.height?a.height:200,r=n-o.left-o.right,s=l-o.top-o.bottom,c=d3.select(".oxd-bar-chart-container").append("svg").attr("height",l).attr("width",n).attr("class",a["class"]),d=a.isShadow?o.left-15:o.left-20,m=c.append("g").attr("transform","translate("+d+", "+o.top/2+")"),u=d3.scaleBand().rangeRound([0,r]).domain(e.map(function(e){return e.name})).padding(a.spacing),p=d3.scaleLinear().range([s,0]).domain([0,100*i/95]).nice(),f=d3.axisBottom(u),g=d3.axisLeft(p).ticks(5);
a.isShadow||m.append("g").attr("class","xaxis").attr("transform","translate(0, "+(s+o.top/2)+")").call(f),m.append("g").attr("class","yaxis").call(g),m.selectAll(".bar").data(e).enter().append("path").attr("class","bar").style("fill",a.color).attr("d",function(e){return t(e)}),a.isShadow||m.selectAll("text.barLabel").data(e).enter().append("text").attr("class","barLabel").attr("text-anchor","middle").attr("x",function(e){return u(e.name)+u.bandwidth()/2}).attr("y",function(e){return p(e.value)-3}).text(function(e){return e.value?e.value.toFixed(2):""})})}var o=this;a(),e.$on("updateBarChart",function(){t(function(){a()})})}angular.module("app.core").directive("oxdBarChart",e),e.$inject=["$translate"],t.$inject=["$scope","$timeout"]}(),function(){"use strict";function e(e){return{restrict:"E",templateUrl:"app/directives/charts/ohrm-piechart.html",scope:{summary:"=summary",viewIndex:"=viewIndex",ondrilldown:"=",drillDownAvailable:"=",reportId:"=reportId",oxdStyles:"=oxdStyles",embedded:"=embedded"},controllerAs:"vm",bindToController:!0,controller:t}}function t(e,t,a,i,o,n){function l(){function e(e){return"string"==typeof e?e.replace(/,/g,""):e}p.view=p.summary.views[p.viewIndex];var a,l;for(var c in p.view.data_mapping)"x"==p.view.data_mapping[c]?a=c:"y"==p.view.data_mapping[c]&&(l=c);var d=p.summary.data;p.oxdStyles&&(d=d.filter(function(e){return 0!==e[l]&&"0"!==e[l]}));var m;if(p.view.properties&&p.view.properties.criteria_to_simplify_chart_with_other_field&&d.length>10){d=o.simplifySummaryDataWithOtherField(d,a,l,p.view.properties.criteria_to_simplify_chart_with_other_field);var f=d[d.length-1];f[a]==i.getLocalizedCustom("Other")&&(m={},m[d.length-1]="no-drilldown")}p.pieChartId="pieChart"+p.reportId;var g=0,h=d.map(function(t,a){return[a,e(t[l])]}),v={},y={};d.map(function(e,t){g+=String(e[a]).length,void 0!==e[a]&&null!==e[a]&&""!==e[a]&&(v[t]=e[a],"string"==typeof v[t]&&v[t].length>30&&(v[t]=v[t].substring(0,30)+"..."),y[v[t]]=e[a])});var b=360,C=15*parseInt((p.oxdStyles?3:g)/100,10);b+=C,p.view.properties&&!isNaN(p.view.properties.chart_height)&&(b=parseInt(p.view.properties.chart_height,10));var w=void 0,_=void 0,S=u();if(p.oxdStyles){var D=!0;r()&&(D=!1),w={show:D,item:{tile:{width:0}},padding:10},S=s(h),_=function(e,t,a,i){var o=e[0],n=sanitise(p.oxdStyles?y[o.name]:o.name),l=sanitise(o.value),r=sanitise("("+Math.round(1e4*o.ratio)/100+"%)"),s=i(o.id);return"<div class='bar-chart-oxd-tooltip'><span class='indicator' style='background-color: "+s+"'></span><span class='title'>"+n+"</span><span class='value'>"+l+"</span><span class='percentage'>"+r+"</span></div>"}}t(function(){c3.chart.internal.fn.additionalConfig={oxd_styles:p.oxdStyles},p.chart=c3.generate({bindto:"#"+p.pieChartId,size:{height:b},data:{columns:h,type:"pie",classes:m,names:v,onclick:function(e,t){"function"==typeof p.ondrilldown&&p.ondrilldown(d[e.id])},onmouseover:function(e,a){"function"==typeof p.drillDownAvailable&&t(p.drillDownAvailable(d[e.id])?function(){p.isDrillDownAvailable=!0}:function(){p.isDrillDownAvailable=!1})}},tooltip:{contents:_,format:{value:function(e,t,a,i){return e+" ("+Math.round(1e4*t)/100+"%)"}}},onrendered:function(){p.oxdStyles&&($("#"+p.pieChartId).find(".c3-legend-item-tile").css("stroke-linecap","round"),$("#"+p.pieChartId).find(".c3-legend-item > text").css("font-size","10px"),$("#"+p.pieChartId).find(".c3-legend-item > text").css("transform","translate(5px, -1px)"))},color:{pattern:S},legend:w}),n.$on("toggleMainMenu",function(e,a){t(function(){p.chart.resize()})}),n.$on("resizeChart",function(e,a){t(function(){p.chart.resize()})}),n.$on("pieChart.showAllLegends",function(e,t){p.chart.legend.show(),p.chart.resize()}),n.$on("pieChart.restoreLegends",function(e,t){r()?p.chart.legend.hide():p.chart.legend.show(),p.chart.resize()})})}function r(){return!!p.embedded}function s(e){for(var t=[],a=_.sortByOrder(e,"1","ASC"),i=m(),o=c(i),n=0;n<a.length;n++)t[a[n][0]]=i[o],o=(o+1)%i.length;return t}function c(e){var t=d();return t%e.length}function d(){return"undefined"!=typeof n.dashboard_pie_chart_index?n.dashboard_pie_chart_index++:n.dashboard_pie_chart_index=0,n.dashboard_pie_chart_index}function m(){return["#FB5255","#E64980","#BE4BDB","#7A50F2","#228BE6","#0FAAC0","#12B886","#81c91d","#FFAA00","#fe7d15","#ff4918"]}function u(){return["#EA0034","#009543","#07B9FC","#FD4703","#8200AC","#0047BD","#9AF000","#00AB38","#FF1A1A","#FF822A","#B610BF","#2929A3","#FFB300","#0288D9","#CC72F5","#FFCE00","#00B300","#732673","#FFE63B"]}var p=this;p.isDrillDownAvailable=!0,l(),e.$watch("vm.summary",function(e,t){e&&t&&e!=t&&l()})}angular.module("app.core").directive("ohrmPieChart",e),e.$inject=["$translate"],t.$inject=["$scope","$timeout","webservice","localizedMessages","reportSummaryHelper","$rootScope"]}(),function(){"use strict";function e(e){return{restrict:"E",templateUrl:"app/directives/charts/ohrm-tabularchart.html",scope:{summary:"=summary",viewIndex:"=viewIndex",ondrilldown:"=",drillDownAvailable:"=",reportId:"=reportId",oxdStyles:"=oxdStyles"},controllerAs:"vm",bindToController:!0,controller:t}}function t(e,t,a){function i(){n.view=n.summary.views[n.viewIndex];var e=[],t=0,i=[];"object"==typeof n.view.properties&&n.view.properties.include_sum_for_columns&&(i=n.view.properties.include_sum_for_columns.split(","),i=i.map(function(e){return Number(e)}));for(var o in n.view.data_mapping)if(n.view.data_mapping.hasOwnProperty(o)){t++;var l={name:o,lable:n.view.data_mapping[o],getter:o,truncateHeader:3};l.clickAction=n.summary.drillDown?"dodrilldown":null,i.indexOf(t)!=-1&&(l["class"]="sum-column"),e.push(l)}if(n.listData={summary:{selectable:!0,selected:[],idGetter:"_id",listFields:e,showColumnsAnyway:!0,listActions:[],pagination:!1,clickableCondition:function(e){return n.summary.drillDown&&n.drillDownAvailable(e)},listClass:n.oxdStyles?"classic-table table-fixed":"compact-table"}},n.summaryData=n.summary.data.map(function(e,t){var a=angular.copy(e);return a._id=t,a}),"object"==typeof n.view.properties&&i.length>0&&"object"==typeof n.view.sum&&(n.totalRowExists=!1,n.summaryData.length>0)){var r={};r[e[0].name]=a.getLocalizedCustom("Total"),r.unclickable=!0,i.forEach(function(t){t>0&&t<=Object.keys(n.view.data_mapping).length&&"undefined"!=typeof n.view.sum[e[t-1].name]&&(r[e[t-1].name]=n.view.sum[e[t-1].name])}),n.summaryData.push(r),n.totalRowExists=!0}n.listData.summary.columnWidths=[],e.forEach(function(t){n.listData.summary.columnWidths.push(100/e.length+"%")})}function o(e){e.unclickable||n.ondrilldown(e)}var n=this;n.show=!0,n.dodrilldown=o,i(),e.$watch("vm.summary",function(e,t){e&&t&&e!=t&&i()})}angular.module("app.core").directive("ohrmTabularChart",e),e.$inject=["$translate"],t.$inject=["$scope","$timeout","localizedMessages"]}(),function(){"use strict";angular.module("app.directives").directive("colorpicker",["$window","$timeout",function(e,t){return{restrict:"A",link:function(a,i,o){t(function(){e.jscolor.init()})}}}])}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/directives/comments.html",scope:{config:"=config"},link:function(e,t,a){},controller:t,controllerAs:"vm"}}function t(e,t,a,i,o,n,l){function r(){f(),a.config.fetch().then(function(e){g.comments=e})}function s(){return null!=g.comments&&g.comments.length>0}function c(e){g.model.comment&&g.model.comment.length>0&&(o.show(),a.config.save(g.model).then(function(e){g.comments.unshift(e),t.showLocalizedToast("saveSuccess"),g.model.comment="",a.$broadcast("schemaFormRedraw"),o.hide()},function(){o.hide()}))}function d(){return g.model.comment&&g.model.comment.length>0}function m(e){$(".material-tooltip").hide();var i={ids:[e]};o.show(),a.config["delete"](i).then(function(a){o.hide(),u(e),t.showLocalizedToast("deleteSuccess")},function(){o.hide(),n.error("Deletion Failed")})}function u(e){for(var t=g.comments.length-1;t>=0;t--)g.comments[t].id===e&&g.comments.splice(t,1)}function p(e){if(e){var t=moment(e,"YYYY-MM-DD HH:mm:ss"),a=e.slice(0,10),o=t.format("hh:mm A");return o+"  "+i.toLocalizedDate(a)}return e}function f(){g.model={comment:""},g.schema={type:"object",title:"Add Comment",name:"add_comment",properties:{comment:{title:"Comment",type:"string",maxLength:a.config.commentSize}}},g.form=[{type:"section",htmlClass:"row",items:[{type:"textarea",htmlClass:"input-field col s12 m12 l12",key:"comment",validationMessage:{302:t.getLocalizedCustom("Required"),201:l.textLengthExceedValidation.message(g.schema.properties.comment.maxLength)}}]}]}var g=this;g.onSubmit=c,g.isFormValid=d,g.deleteComment=m,g.localizeDateAndTime=p,g.hasComments=s,a.$on("reloadComments",function(){r()}),r()}angular.module("app.directives").directive("comments",e),e.$inject=[],t.$inject=["formHelper","localizedMessages","$scope","dateService","loader","toast","formValidationHelper"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/directives/confirmation-modal.html",scope:{data:"=data",extracontroller:"=extracontroller"}}}angular.module("app.directives").directive("confirmationModal",e)}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/directives/custom-fields.html",scope:{screen:"=",customFieldService:"=",employeeService:"=",permissions:"=",isStandardSection:"=",customFieldModel:"=",customFieldStandardSection:"=",customFieldStandardSectionDefined:"=",customFieldConfiguration:"=",validCustomFieldForm:"=",customFieldsPerRow:"=",wizardMode:"=",isConfirmationModal:"=",effectiveDate:"@",changedFieldsOnly:"="},bindToController:!0,controller:t,controllerAs:"customFieldsCtrl"}}function t(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g){function h(e){N.effectiveDate=e.hasOwnProperty("previousDate")&&e.previousDate?e.previousDate:N.effectiveDate,y().then(function(){v()})}function v(){c.$broadcast("standardCustomFieldSectionUpdated")}function y(e){if(N.permissions.read){N.prefix=N.confirmationModalView?"asOf":"";var t=b([],e);return t=m.addPromisesToQueueToGetFileUploadSettings(N,t),"countrylist"in c||t.push(i.getCountries().then(function(e){c.countrylist=e.data})),"currencyTypes"in c||t.push(i.getCurrencyTypes().then(function(e){c.currencyTypes=e.data})),d.all(t).then(function(){C(N.sectionData),_(e)})}}function b(e,t){var a={groupedBySection:!0,filter:{screen:N.screen}};return t?a.filter.historyId=t:N.effectiveDate&&(a.filter.asOfDate=N.effectiveDate),e.push(N.customFieldService.getCustomFieldValues(l.empNumber,a).then(function(e){N.customFieldConfiguration===!0?(N.sectionData=e.data,N.futureChanges=e.hasOwnProperty("meta")&&e.meta.hasOwnProperty("futureChanges")?e.meta.futureChanges:[]):N.customFieldConfiguration!==!1&&(N.sectionData=[],e.data.forEach(function(e){N.customFieldConfiguration[e.id]&&N.sectionData.push(e)}),N.futureChanges=e.hasOwnProperty("meta")&&e.meta.hasOwnProperty("futureChanges")?e.meta.futureChanges:[])})),e}function C(e){N.isStandardSection&&(N.customFieldStandardSection=e[0],e.length>0&&(N.customFieldStandardSectionDefined=!0))}function w(e){if(N.isStandardSection)return e.attachmentUrl=!1,e.attachmentFileName=!1,N.customFieldSections[e.sectionIndex].model.hasOwnProperty("deletedIds")||(N.customFieldSections[e.sectionIndex].model.deletedIds=[]),void N.customFieldSections[e.sectionIndex].model.deletedIds.push(e.customFieldId);P(!0,e.sectionIndex);var t="deleteSuccess",a="Failed to Deleted",i={custom_field_id:e.customFieldId,sequence_number:e.sequenceNumber};return N.wizardMode?(e.attachmentUrl=!1,e.attachmentFileName=!1,P(!1,e.sectionIndex),p.deleteCustomFieldAttachment(null,i)):void N.customFieldService.deleteCustomFieldAttachment(l.empNumber,i).then(function(i){P(!1,e.sectionIndex),i.data.success?(e.attachmentUrl=!1,e.attachmentFileName=!1,o.showLocalizedToast(t)):s.error(a)},function(t){P(!1,e.sectionIndex),s.error(t)})}function _(e){N.customFieldSections=[];for(var a=D(N.sectionData),i=0;i<N.sectionData.length;i++){var n={loading:!1},l=[];for(var r in N.sectionData[i].values){var s=N.sectionData[i].values[r];1==s.mandatory&&l.push(s.customFieldId)}n.schema={type:"object",name:N.isStandardSection?O:"customFieldsForm_"+i,index:i,title:N.sectionData[i].title,properties:{},required:l},N.permissions.update||(n.schema.readonly=!0),n.form=[],n.model=N.isStandardSection?N.customFieldModel:{},N.isStandardSection&&!e&&N.confirmationModalView&&(n.model.changedFieldsOnly=N.changedFieldsOnly),N.formData=N.sectionData[i].values;var c,d,p,f,h,v={};N.isOxd&&(v={type:"row",items:[]});for(var y=0;y<N.formData.length;y++){var b=N.formData[y].type,C=N.formData[y].fieldType,_=N.formData[y].mandatory,S=N.formData[y].customFieldId,T=N.formData[y].value,x=N.formData[y],F=N.formData[y].customFieldDisplayCondition,k=e?T:n.model[S];n.model[S]=m.getCustomFieldModelValue(n.model,b,S,T,k,"new"),c=n.model[S],x=m.getUpdatedFormFieldForAttachment(x,b,S,n.model,N.confirmationModalView&&!e),n.model[S]=T;var E=m.resolveFieldTypes(C);n.schema.properties[N.formData[y].customFieldId]={title:N.formData[y].lable,type:E},m.prepareTextField(b,n.schema,S),C=m.prepareTextAreaField(b,n.schema,S,C),e||N.isOxd||y%z!=0||(0!=y&&n.form.push(v),v={type:"section",htmlClass:"row",items:[]});var I=12/z,A={type:C,htmlClass:N.isOxd?"col-"+I:"col s12 m12 l"+I,key:S};N.confirmationModalView||n.model.hasOwnProperty("deletedIds")&&(n.model.deletedIds=[]),m.prepareNumberField(b,n.model,S,A),m.prepareAttachmentField(b,x,n.model,S,A,N.permissions,w,N.fileUploadSettings,i),m.prepareEmailField(b,A,n.schema,S),m.prepareGroupedFields(b,C,n.schema,n.model,S,T,A,x,N.prefix),m.prepareDateField(A,C,n.schema,n.model,S,T),m.prepareConditionalFields(A,n.model,F,N.confirmationModalView,S,C,_),m.prepareParentField(A,S,a,t,C),m.setLocalizedRequiredMessage(A),m.setLocalizedLengthValidation(b,n.schema,S,A),m.setLabelProperties(A,S,N.futureChanges,N.confirmationModalView,N.snapshotView),N.confirmationModalView&&!e&&(n.model[S+"_old_value"]=m.getCustomFieldModelValue(n.model,b,S,T,c,"old"),n.model[S]=N.updateValuesFromModifiedFields&&!N.modifiedFields.includes(S)?n.model[S+"_old_value"]:c,m.prepareDateField(A,C,n.schema,n.model,S,n.model[S]),h=o.getLocalizedCustom(N.formData[y].lable),h=_?h+" *":h,d=g.getNoteFormElement(h,"changed-field-name col-3"),m.prepareConditionalFields(d,n.model,F,N.confirmationModalView,S,C,_),p=g.getNoteFormElement(m.getFormattedValue(n.model[S+"_old_value"],C,!0),"old-value col-4"),m.prepareConditionalFields(p,n.model,F,N.confirmationModalView,S,C,_),f=g.getIconFormElement("ohrm_change","change-icon col-1"),m.prepareConditionalFields(f,n.model,F,N.confirmationModalView,S,C,_),v={type:"row",items:[d,p,f]}),v.items.push(A),e||!N.confirmationModalView&&y!=N.formData.length-1||n.form.push(v)}var M=m.getModifiedCustomFields(n.model,N.customFieldStandardSection,N.customFieldStandardSectionDefined);if(N.modifiedFields=e?M:N.modifiedFields.concat(M),e||n.form.push(u.getRequiredMessage()),N.permissions.update&&!N.isStandardSection&&!N.wizardMode){var L=N.isOxd?{"class":"btn btn-secondary",htmlClass:"remove-bottom-margin",type:"button",submit:!0,title:"Save"}:{htmlClass:"col s12 right-align",type:"submit",title:"Save"};v=N.isOxd?{type:"row",htmlRowClass:"form-buttons-row"}:{type:"section",htmlClass:"row form-buttons"},v.items=[L],n.form.push(v)}var P=N.sectionData[i].id;if(N.customFieldConfiguration[P]){var $=N.customFieldConfiguration[P];N.employeeService.updateFormFields(n.schema,n.form,$)}N.customFieldSections.push(n)}}function S(e,a){var i=!1,o=N.formScope[e][e];return t.$broadcast("schemaFormValidate",o.$name),o.$valid&&(i=T(a)),i}function D(e){var t=[];for(var a in e){var i=e[a].values;for(var o in i)"object"!=typeof i[o].customFieldDisplayCondition.parentCustomFieldId&&t.push(i[o].customFieldDisplayCondition.parentCustomFieldId)}return t}function T(e){P(!0,e);var t=N.customFieldSections[e].model,a=N.sectionData[e],i=m.getFormattedPostParams(t,a);return N.customFieldService.saveCustomFieldValues(l.empNumber,i).then(function(t){N.wizardMode||(x(),o.showLocalizedToast("updateSuccess")),P(!1,e)},function(t){P(!1,e),o.errorToast("saveFailure")})}function x(){var e={groupedBySection:!0,filter:{screen:N.screen}};N.customFieldService.getCustomFieldValues(l.empNumber,e).then(function(e){N.sectionData=e.data,N.futureChanges=e.hasOwnProperty("meta")&&e.meta.hasOwnProperty("futureChanges")?e.meta.futureChanges:[],C(e.data),_(),t.$broadcast("schemaFormRedraw")})}function F(e){n.showModal({templateUrl:"app/pim/attachment_modal.html",controller:"PimEditAttachmentController",controllerAs:"modal",inputs:{attachment:e,dataList:N.objs}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function k(t){var i=a.baseUrl+"pim/viewAttachment/empNumber/"+t.emp_number+"/attachId/"+t.attach_id;e.open(i)}function E(){var e=N.listData.selected.length;e>0&&(P(!0),N.employeeService.deleteAttachments(l.empNumber,N.listData.selected).then(function(t){P(!1),o.showLocalizedToast("deleteSuccess"),N.total-=e,I(N.listData.selected)},function(e){P(!1),s.success(e)}))}function I(e){for(var t=N.objs.length-1;t>=0;t--){var a=e.indexOf(N.objs[t].attach_id);a>-1&&(e.splice(a,1),N.objs.splice(t,1))}}function A(e){var t=e.obj;if(t.selected)N.listData.selected.push(t.attach_id);else{var a=N.listData.selected.indexOf(t.attach_id);a>-1&&N.listData.selected.splice(a,1)}}function M(e){N.listData.selected.length>0&&n.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&E()})})}function L(){var e={filename:"",description:"",screen:N.panelinfo.screen};n.showModal({templateUrl:"app/pim/attachment_modal.html",controller:"PimEditAttachmentController",controllerAs:"modal",inputs:{attachment:e,dataList:N.objs}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function P(e,t){N.isOxd?N.customFieldSections[t].loading=e:e?r.show():r.hide()}var N=this;N.formScope={},N.isOxd=f.current.data.oxd,N.confirmationModalView=N.isConfirmationModal,N.snapshotView=!1;var O="customFieldsForm_standard";N.editAttachment=F,N.addAttachments=L,N.deleteAttachment=E,N.changeSelection=A,N.deleteSelection=M,N.downloadAttachment=k,N.activate=y,N.saveCustomFieldsForm=T,N.onSubmit=S,N.updateValuesFromModifiedFields=!1,N.modifiedFields=[],N.futureChanges=[],t.$on("customFieldValidate",function(e,a){if(N.isStandardSection){var i=N.formScope[O][O];t.$broadcast("schemaFormValidate",i.$name),i.$valid?N.validCustomFieldForm=!0:N.validCustomFieldForm=!1}}),t.$on("pim.save",function(e,t){var a=[],i=!1;N.customFieldSections.forEach(function(e){var t=S(e.schema.name,e.schema.index);t?a.push(t):i=!0}),i?e.preventDefault():a.length>0&&(e.savePromise=a),p.valuesRetrieved=!1,p.attachmentsRetrieved=!1}),t.$on("pim.validate",function(e){var a=!1;N.customFieldSections.forEach(function(e){var i=e.schema.name,o=N.formScope[i][i];t.$broadcast("schemaFormValidate",o.$name),o.$valid||(a=!0)}),a&&e.preventDefault()}),t.$on("updateStandardCustomFieldSection",function(e,a){N.isStandardSection&&(a&&a.hasOwnProperty("changedFieldsOnly")&&(N.changedFieldsOnly=a.changedFieldsOnly,_(),t.$broadcast("schemaFormRedraw"),v()),a&&a.hasOwnProperty("effectiveDate")&&(N.snapshotView=a.hasOwnProperty("isSnapshotView")?a.isSnapshotView:N.snapshotView,N.effectiveDate=a.effectiveDate,N.updateValuesFromModifiedFields=a.hasOwnProperty("isDateChanged")&&a.isDateChanged,h(a)),a&&a.hasOwnProperty("historyId")&&(a.hasOwnProperty("isDateChanged")&&a.isDateChanged?(N.updateValuesFromModifiedFields=a.historyId>0,h(a)):y(a.historyId).then(function(e){h(a)})))}),N.setFormScope=function(e,t){N.formScope[e]=t};var R=[1,2,3,4,6,12],z=N.isOxd?3:2;R.indexOf(N.customFieldsPerRow)>-1&&(z=N.customFieldsPerRow),N.permissions||(N.permissions={read:!0,create:!0,update:!0,"delete":!0}),y()}angular.module("app.directives").directive("customFieldsPanel",e),t.$inject=["$window","$scope","LOGIN","adminService","localizedMessages","ModalService","$stateParams","loader","toast","$rootScope","$q","customFieldHelper","formHelper","wizardCustomFieldService","$state","pimHelper"]}(),function(){"use strict";function e(e){var t={restrict:"A",require:"ngModel",link:function(t,a,i,o){var n,l=e(i.datePickerTextInputSetDirtyAndValidationStatus)(t);n="undefined"==typeof l?"dateForm.dateHolder.$valid":l+".dateHolder.$valid",t.$on("schemaFormValidate",function(e){t.$applyAsync(function(){o.$setDirty()})}),t.$watch(n,function(e,i){t.$applyAsync(function(){var e=""!=$(a).closest(".input-field").find("span.help-block").text();e&&o.$setDirty()}),e?o.$setValidity("displayInputValidity",!0):o.$setValidity("displayInputValidity",!1)})}};return t}angular.module("app.directives").directive("datePickerTextInputSetDirtyAndValidationStatus",e),e.$inject=["$parse"]}(),function(){"use strict";function e(){return{restrict:"A",controller:t,controllerAs:"disableLabelController",scope:{disableInput:"="},link:function(e,t,a,i){e.disableInput&&t.addClass("disabled")}}}function t(e){}angular.module("app.directives").directive("disableLabel",e),e.$inject=[],t.$inject=["$scope"]}(),function(){"use strict";function employeeNominee(){return{restrict:"E",scope:{formModel:"=",modelKey:"@",form:"="},templateUrl:"app/directives/employee-nominee.html",controller:EmployeeNomineeController,controllerAs:"employeeNominee"}}function EmployeeNomineeController($scope,employeeNomineeDirectiveService,localizedMessages,formValidationHelper){var vm=this;if(vm.maxLimit=3,vm.employeeSelectedCallbackHolder={},vm.angucompleteInitTracker={},vm.maxNoteLength=250,vm.invalidTextLength=formValidationHelper.textLengthExceedValidation.message(vm.maxNoteLength),vm.invalidEmployeeText=localizedMessages.getLocalizedCustomWithVariables("Invalid"),vm.invalidEmployee={},vm.prepareEmployeeName=function(e){return employeeNomineeDirectiveService.prepareEmployeeName(e)},vm.employeeSelected=function(e,t){e&&e.originalObject&&null!=e.originalObject.purged_at?vm.invalidEmployee[t]=!0:vm.invalidEmployee[t]=!1,employeeNomineeDirectiveService.populateModelOnEmployeeSelectOrDeselect(e,t,$scope.formModel,$scope.modelKey,vm.angucompleteInitTracker)},0==Object.keys(vm.employeeSelectedCallbackHolder).length)for(var i=0;i<vm.maxLimit;i++)eval("vm.employeeSelectedCallbackHolder["+i+"] = function(value) { vm.employeeSelected(value, "+i+"); }").call(this);employeeNomineeDirectiveService.initializeModelIfEmpty($scope.formModel,$scope.modelKey,vm.maxLimit),vm.fetchMatchingEmployees=function(e,t){return employeeNomineeDirectiveService.fetchMatchingEmployeesExceptSelected($scope.formModel,$scope.modelKey,e,t)}}angular.module("app.directives").directive("employeeNominee",employeeNominee),EmployeeNomineeController.$inject=["$scope","employeeNomineeDirectiveService","localizedMessages","formValidationHelper"]}(),function(){"use strict";function e(){return{restrict:"E",scope:{actions:"=",addActionFn:"&"},templateUrl:"app/directives/floating-add-button.html",controller:t,controllerAs:"vm",replace:!0}}function t(e){var t=this;t.hasMultipleItems=Array.isArray(e.actions)&&e.actions.length>1,t.addButtonToolTip=t.hasMultipleItems?"":e.actions[0].toolTip,t.callAddAction=function(t){e.addActionFn()(t)}}angular.module("app.directives").directive("floatingAddButton",e),t.$inject=["$scope"]}(),function(){"use strict";function e(e){return{restrict:"A",link:function(t,a,i,o){var n=i.focusElement;if(n)var l=t.$watch(function(){return document.getElementById(n)},function(t,a){t&&(e(function(){t.focus()}),l())})}}}angular.module("app.directives").directive("focusElement",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(){return{link:function(e){e.$emit("formLocator")}}}angular.module("app.directives").directive("formLocator",e)}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/directives/form.html",scope:{schema:"=schema",form:"=form",model:"=model",name:"=ohrmformname"}}}angular.module("app.directives").directive("ohrmForm",e)}(),function(){"use strict";function e(e){var t={restrict:"A",require:"ngModel",scope:{currencyValue:"=",showSymbol:"="},link:function(t,a,i,o){o.$parsers.unshift(function(a){return e.getPlainValue(a,t.currencyValue)}),o.$formatters.unshift(function(a){var i=t.showSymbol;return e.formatSalaryValue(a,t.currencyValue,i)})}};return t}e.$inject=["salaryService"],angular.module("app.directives").directive("currencyValue",["salaryService",e])}(),function(){"use strict";angular.module("schemaForm").config(["schemaFormProvider","schemaFormDecoratorsProvider","sfPathProvider",function(e,t,a){var i="app/directives/formDecorators/materializecss/";t.createDecorator("materializecssDecorator",{textarea:i+"textarea.html",fieldset:i+"fieldset.html",array:i+"array.html",tabarray:i+"tabarray.html",tabs:i+"tabs.html",section:i+"section.html",conditional:i+"section.html",actions:i+"actions.html",select:i+"select.html","icon-select":i+"icon-select.html",checkbox:i+"checkbox.html",checkboxes:i+"checkboxes.html",number:i+"input.html",password:i+"password.html",submit:i+"submit.html",button:i+"submit.html","button-alt":i+"button.html",radios:i+"radios.html","radios-with-validators":i+"radios-with-validators.html","radios-inline":i+"radios-inline.html",radiobuttons:i+"radio-buttons.html",help:i+"help.html",text:i+"input.html",email:i+"input.html",date:i+"date.html","date-icon":i+"date-icon.html",file:i+"file.html","pim-custom-field-attachment":i+"pim_custom_field_attachment.html","photo-preview":i+"photo-preview.html","generic-auto-complete":i+"generic-auto-complete.html","auto-complete":i+"employee-auto-complete.html","auto-complete-with-deleted":i+"employee-auto-complete-with-deleted.html","maintenance-auto-complete-only-deleted-and-terminated":i+"maintenance-employee-auto-complete-only-deleted-and-terminated.html","auto-complete-audit-trail-affected-entity":i+"audit-trail-affected-entity-auto-complete.html",tinymce:i+"tinymce.html","auto-complete-supervisor":i+"supervisor-auto-complete.html","auto-complete-users":i+"users-auto-complete.html","autocomplete-multyselect":i+"autocomplete-multyselect.html","default":i+"default.html","custom-icon":i+"custom-icon.html",jobspec:i+"job-spec.html",jobSpecFile:i+"job-spec-file.html",attachmentWithModifyOptions:i+"attachment-with-modify-options.html",icon:i+"icon.html",readonly:i+"readonly.html","section-heading":i+"section-heading.html","pim-document-manager-button":i+"pim-document-manager-button.html",link:i+"link.html",label:i+"label.html","cost-centre-auto-complete":i+"cost-centre-auto-complete.html","employee-nominee-input-collection":i+"employee-nominee-input-collection.html","vacancy-auto-complete":i+"vacancy-auto-complete.html","generated-input":i+"generated-input.html","text-with-helptext":i+"input-with-helptext.html",timepicker:i+"timepicker.html","time-picker-work-week":i+"time-picker-work-week.html","horizontal-divided-section":i+"horizontal-divided-section.html","switch":i+"switch.html","tree-select":i+"tree-select.html","hierarchical-multyselect":i+"hierarchical-multyselect.html","structured-label-radios":i+"structured-label-radios.html","rounded-button":i+"rounded-button.html",separator:i+"separator.html",phone:i+"phone.html"},[function(e){if(e.readonly&&e.key&&"fieldset"!==e.type)return i+"readonly.html"}])}])}(),function(){"use strict";function e(e,a,i,o){return{restrict:"A",require:"ngModel",transclude:!0,link:function(t,a,o,n,l){function r(i,o,n){e(function(){$(a[0]).closest("form").find("#"+t.form.previewOn.key).closest("div.cropArea")}),t.form.previewOn.imageToPreview=i,t.form.previewOn.croppedImage=n.base64;var l=0;t.$watch("form.previewOn.croppedImage",function(e,t){e!=t&&0==e.indexOf("data")&&(l++,l>1&&(n.base64=e.split(",")[1]))})}var s={};t.form&&"string"==typeof t.form.filename&&e(function(){a.closest(".file-field").find("input.file-path").val(t.form.filename)},200),void 0!==t.form.maxSize&&(n.$validators.fileSize=function(e,a){var i=e||a;angular.isArray(i)||(i=[i]);for(var o=i.length-1;o>=0;o--)if(i[o]&&i[o].filesize&&i[o].filesize>parseInt(t.form.maxSize,10))return!1;return!0}),void 0!==t.form.allowedFileTypes&&(n.$validators.fileType=function(e,a){var i=e||a;angular.isArray(i)||(i=[i]);for(var o=i.length-1;o>=0;o--)if(i[o]&&i[o].filetype&&t.form.allowedFileTypes.indexOf(i[o].filetype)===-1||i[o]&&!i[o].filetype&&i[o].filename)return!1;if(void 0!==t.form.allowedFileTypesExtensions)for(var o=i.length-1;o>=0;o--)if(i[o]&&i[o].filename){var n=i[o].filename.split(".").pop();if(t.form.allowedFileTypesExtensions.indexOf(n.toLowerCase())===-1)return!1}return!0}),a.closest("div.btn").click(function(){a.click()}),a.click(function(e){e.stopPropagation()}),n.$viewChangeListeners.push(function(){if(t.form.previewOn)if(n.$modelValue){var e=new Image;e.src="data:"+n.$modelValue.filetype+";base64,"+n.$modelValue.base64,e.onload=function(){r(e.src,e,n.$modelValue)}}else t.form.previewOn.imageToPreview=null,t.form.previewOn.croppedImage=null}),a.bind("change",function(e){if(a[0].files&&a[0].files[0]){var o=new FileReader;o.onload=function(e){var o={filename:a[0].files[0].name,filetype:a[0].files[0].type,filesize:a[0].files[0].size,base64:e.target.result.split(",")[1]};""===o.filetype&&(o.filetype=i.detectType(o.filename)),s.filename!=o.filename&&(s=o,t.ngModel.$setViewValue(o),void 0!==t.form.onFileChange&&t.form.onFileChange(o))},o.readAsDataURL(a[0].files[0])}}),l(function(e){a.append(e)})},controller:t,controllerAs:"vm"}}function t(e,t,a){var i=this,o=a.current.data.wizardMode;i.showDeleteConfirmation=!1,i.deleteAttachment=function(e){return o?void e.deleteCallback(e,e.extraParamsForDeleteCallback):void(i.showDeleteConfirmation=!0)},i.confirmDeletion=function(e){e.deleteCallback(e,e.extraParamsForDeleteCallback),i.showDeleteConfirmation=!1},i.cancelDeletion=function(){i.showDeleteConfirmation=!1},i.getFileTypeDisplayString=function(){return angular.isDefined(e.form.allowedFileTypesDisplayName)&&void 0!=e.form.allowedFileTypesDisplayName&&""!=e.form.allowedFileTypesDisplayName?t.getLocalizedCustom("Accept only")+" "+e.form.allowedFileTypesDisplayName:""}}angular.module("app.directives").directive("customFieldAttachment",e),e.$inject=["$timeout","$rootScope","fileTypeService","modalHelperService"],t.$inject=["$scope","localizedMessages","$state"]}(),function(){"use strict";function e(e){return{restrict:"A",link:function(t,a,i){function o(e){var t=e.target,i=window.getComputedStyle(t),o=parseInt(i.getPropertyValue("border-top-width"),10)+parseInt(i.getPropertyValue("padding-top"),10)+parseInt(i.getPropertyValue("padding-bottom"),10)+parseInt(i.getPropertyValue("border-bottom-width"),10),l=parseInt($(a).css("line-height"),10),r=parseInt((t.scrollHeight-o)/l,10),s=n-1;r<n&&(s=r),t.scrollHeight>t.clientHeight&&r<n?t.style.height=t.scrollHeight+"px":t.clientHeight<s*l+o&&(t.style.height=s*l+o+"px")}var n=8;$(a).on({input:o}),e(function(){$(a).val()&&$(a).trigger("input")}),t.$watch(i.ngModel,function(t){e(function(){i.placeholder&&$("label[for='"+$(a[0]).attr("id")+"']").addClass("active"),t?a.trigger("change"):void 0===a.attr("placeholder")&&(a.is(":focus")||a.trigger("blur")),a.trigger("autoresize")})})}}}angular.module("app.directives").directive("oxdTextarea",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e,i,o){return{restrict:"E",replace:!0,template:"",require:"^ngModel",scope:{ngModel:"=",config:"="},controller:a,controllerAs:"vm",link:function(e,a,n,l){function r(t){var a=i.instant(e.config.insideText),o=t.value;OhrmBig(e.ngModel).gt(OhrmBig(t.options.max))&&(o=angular.copy(e.ngModel));var n="";if(e.config.allowedMax){var l=OhrmBig(o).gt(OhrmBig(e.config.allowedMax));l&&(o=e.config.allowedMax,e.config.indicateOverAllowedMax&&(n="<div class='over-max-container'><span class='over-max-text'>"+i.instant("over")+"</span><span class='material-icons over-max-icon'>add</span></div>"))}return n=n+o+"<span class='rs-tooltip-text rs-tooltip-appended rs-tooltip-suffix'>"+e.config.valueSuffix+"</span>",n+"<div class='rs-tooltip-text rs-tooltip-appended rs-tooltip-inside-text'>"+a+"<div>"}function s(e){
c(),d(e)}function c(){a.removeClass("over-default-percentage"),a.removeClass("over-half-max-percentage")}function d(t){OhrmBig(t).gt(OhrmBig(100))&&OhrmBig(t).gt(Math.ceil(e.config.allowedMax/2))?a.addClass("over-half-max-percentage"):OhrmBig(t).gt(OhrmBig(100))?a.addClass("over-default-percentage"):a.removeClass("over-default-percentage")}function m(e){f(e,b.includeIncrementSpinner),g(e),p(a,y.lazy,e),h(e),s(e)}function u(){a.attr("id",C+b.id)}function p(e,t,a){t?o(function(){e.roundSlider(b),h(a)}):(e.roundSlider(b),h(a))}function f(t,a){a&&OhrmBig(t).gt(OhrmBig(b.allowedMax))&&(e.ngModel=parseInt(b.allowedMax,10)),e.ngModel=parseInt(e.ngModel,10)}function g(t){(!t||t&&OhrmBig(t).lt(OhrmBig(b.min)))&&(e.ngModel=0)}function h(t){if(a.data("roundSlider"))if(e.config.overCompletionManualReset&&OhrmBig(t).lte(OhrmBig(e.config.allowedMax)))if(OhrmBig(t).gt(OhrmBig(100))){a.data("roundSlider").setValue(t);var i=a.find(".rs-tooltip").html();i&&a.find(".rs-tooltip").html(t+i.substring(i.indexOf("<")))}else a.data("roundSlider").setValue(t);else a.data("roundSlider").setValue(t)}e.value=e.ngModel?e.ngModel:0,s(e.value);var v=angular.copy(e.value),y={radius:75,sliderType:"min-range",startAngle:90,width:14,handleSize:"+14",editableTooltip:!1,showTooltip:!0,mouseScrollAction:!1,value:e.value,tooltipFormat:r,readOnly:!1,disabled:!1,animation:!0,borderWidth:0,lineCap:"round",handleShape:"round",min:0,max:100,widgetClass:!1,lazy:!0,includeIncrementSpinner:!1,overCompletionManualReset:!1,id:""},b=t(e.config,y),C="roundSlide";f(v),u(),p(a,y.lazy,v),b.includeIncrementSpinner&&(b.readOnly=!0,e.$watch("ngModel",function(e,t){if(/^\d*$/.test(e)){var a=parseInt(e,10);f(a,b.includeIncrementSpinner),g(a),h(a),s(a)}}));var w=null;b.widgetClass&&a.addClass(b.widgetClass),a.bind("drag",function(){e.$apply(function(){var t=a.data("roundSlider").getValue();null===w&&(w=t),w-t>50&&t<50?(a.data("roundSlider").setValue(b.max),e.value=b.max,e.ngModel=e.value.toString()):t-w>50&&t>50?(a.data("roundSlider").setValue(0),e.value=0,e.ngModel=e.value.toString()):(e.value=t,e.ngModel=e.value.toString(),w=t),s(e.value)})}),a.bind("change",function(){e.$apply(function(){e.value=a.data("roundSlider").getValue(),e.ngModel=e.value.toString(),s(e.value)})}),e.$on("updateRoundSlideValue",function(e,t,i){i?a.attr("id")===C+i&&m(t):m(t)}),e.$on("updateRoundSlideWidgetClass",function(e,t){t&&(a.removeClass(b.widgetClass),a.addClass(t),b.widgetClass=t)})}}}function t(e,t){return angular.extend(t,e)}function a(e){}angular.module("app.directives").directive("roundSlide",e),e.$inject=["$rootScope","$translate","$timeout"],a.$inject=["$translate"]}(),function(){"use strict";function e(e){return{restrict:"E",require:"ngModel",scope:{offLabel:"=",onLabel:"=",disabled:"="},link:function(t,a,i,o){function n(e){o.$setViewValue(e)}t.currentLabel=t.offLabel,t.isOn=!1,t.isClicked=!1,t.on=function(){t.disabled||(t.isClicked=!0,n(!0))},t.off=function(){t.disabled||(t.isClicked=!0,n(!1))};var l=t.$watch(function(){return o.$modelValue},function(a){a!==!0&&a!==!1||(t.isOn=a,a?t.currentLabel=e.instant(t.onLabel):t.currentLabel=e.instant(t.offLabel))});t.$on("$destroy",function(){l()})},templateUrl:"app/directives/formDecorators/oxd/oxd-button-switch/oxd-button-switch.html"}}angular.module("app.directives").directive("oxdButtonSwitch",e),e.$inject=["$translate"]}(),function(){"use strict";angular.module("schemaForm").config(["schemaFormProvider","schemaFormDecoratorsProvider","sfBuilderProvider",function(e,t,a){var i="app/directives/formDecorators/oxd/";t.createDecorator("oxdDecorator",{row:i+"row.html","switch-box":i+"switch-box.html",date:i+"date.html",select:i+"select.html","default":i+"default.html",jobspec:i+"job-spec.html","auto-complete-supervisor":i+"supervisor-auto-complete.html","auto-complete":i+"employee-auto-complete.html",checkbox:i+"checkbox.html","autocomplete-multiselect":i+"autocomplete-multiselect.html",text:i+"text.html",file:i+"file.html",textarea:i+"textarea.html",radiobuttons:i+"radio-buttons.html",subheading:i+"sub-heading.html","switch":i+"switch.html","pim-custom-field-attachment":i+"custom-field-attachment.html",checkboxes:i+"checkboxes.html","generic-auto-complete":i+"generic-auto-complete.html","tree-select":i+"tree-select.html","read-only-text":i+"read-only-text.html",button:i+"button.html",tinymce:i+"tinymce.html","selective-pills":i+"selective-pills.html","document-margin":i+"document-margin.html",password:i+"password.html","plain-password":i+"plain-password.html","photo-attachment-preview-file":i+"photo-attachment-preview-file.html","add-employee-photo-preview":i+"add-employee-photo-preview.html","employee-name":i+"employee-name.html","section-heading":i+"section-heading.html","password-help-text":i+"password-help-text.html",container:i+"container.html","dropdown-button":i+"dropdown-button.html",icon:i+"icon.html","icon-button":i+"icon-button.html","icon-select":i+"icon-select.html",deleteButton:i+"delete-button.html","round-slide":i+"round-slide.html",attachmentWithModifyOptions:i+"attachment-with-modify-options.html","button-switch":i+"button-switch.html","cost-centre-auto-complete":i+"cost-centre-auto-complete.html","link-with-button":i+"link-with-button.html","multiselect-dropdown-with-text":i+"multiselect-dropdown-with-text.html",divider:i+"divider.html",note:i+"note.html","icon-button-with-inline-label":i+"icon-button-with-inline-label.html","icon-button-with-text":i+"icon-button-with-text.html","input-with-button-actions":i+"input-with-button-actions.html","checkbox-with-number-selector":i+"checkbox-with-number-selector.html"},[])}])}(),function(){"use strict";function e(){return{restrict:"E",scope:{items:"=",onItemClickCallback:"=onItemClickCallback",doneClassCallback:"=doneClassCallback",todoClassCallback:"=todoClassCallback",currentClassCallback:"=currentClassCallback",visitedClassCallback:"=visitedClassCallback",tooltipProperty:"=tooltipProperty"},templateUrl:"app/directives/formDecorators/oxd/oxd-wizard-numeric-progress-bar/oxd-wizard-numeric-progress-bar.html"}}angular.module("app.directives").directive("oxdWizardNumericProgressBar",e),e.$inject=[]}(),function(){"use strict";function e(e,t,a){return{restrict:"E",require:"ngModel",scope:{itemsInput:"=items",sorting:"=sorting",key:"=key",placeholder:"=placeholder",showSearchIcon:"=showSearchIcon"},templateUrl:"app/directives/formWidgets/autocomplete-hierarchical.html",link:function(i,o,n,l){function r(e){var t=!1;for(var a in e)e[a].parentId&&(t=!0);return t}function s(e){var t=_.find(i.selectedParentItems,function(t){return t.id===e});if(void 0==t){var a=_.find(i.items,function(t){return t.id===e});i.selectedParentItems.push(a)}}function c(e){var t=_.find(i.items,function(t){return t.id===e}),a=t.parentId,o=_.find(i.selectedItems,function(e){return e.parentId===a});void 0==o&&i.selectedParentItems.splice(_.findIndex(i.selectedParentItems,function(e){return e.id===a}),1)}function d(e){if("string"!=typeof e)for(var t in e)if(e.hasOwnProperty(t)){var a=i.items.filter(function(e){return e.id===t})[0];if(f(t),"undefined"!=typeof a){var o={id:t,name:e[t]};"undefined"!=typeof a.employeeId&&(o.employeeId=a.employeeId),a.displayValue&&(o.displayValue=a.displayValue),i.selectedItems.push(o)}}}function m(){var e={};for(var t in i.selectedItems)e[i.selectedItems[t].id]={id:i.selectedItems[t].id,name:i.selectedItems[t].name,parentId:i.selectedItems[t].parentId,parentName:i.selectedItems[t].parentName};l.$setViewValue(e)}function u(e,t){return e&&(e=_.sortByAll(e,t)),e}function p(e,t){var a=t.filter(function(t){return t.id==e});return a[0]}function f(e){var t=g(e);t>-1&&i.items.splice(t,1)}function g(e){for(var t=0;t<i.items.length;t+=1)if(i.items[t].id===e)return t;return-1}u=i.sorting===!1?function(e){return e}:u,i.items=u(angular.copy(i.itemsInput),["parentName","name"]),i.selectedParentItems=[],i.defaultItems=angular.copy(i.items),i.currentInputValue="",i.noResultsFoundObject={id:"",name:t.instant("No results found")};var h=Math.random().toString(36).substring(7);i.dropDownId="dropdown-multyselect-"+h,o.find("input.multiselect-autocomplete").attr("data-activates","dropdown-multyselect-"+h),o.find("ul.dropdown-content").attr("id","dropdown-multyselect-"+h),e.ready(function(){o.find("input.multiselect-autocomplete").dropdown({inDuration:300,outDuration:225,constrain_width:!0,hover:!1,gutter:0,belowOrigin:!0,alignment:"left"}),i.$applyAsync(function(){$(".hierarchical-multiselect-element-container").mCustomScrollbar({theme:"ohrm-dark-thick",axis:"y",scrollInertia:0})})}),i.$watch("scope.itemsInput",function(e,t){}),i.preventBroadcastOverlap=!1,i.$parent.$on("schemaFormValidate",function(e,a){!i.preventBroadcastOverlap&&i.key&&i.key.length>0&&(i.preventBroadcastOverlap=!0,0==i.selectedItems.length&&""!=i.currentInputValue?i.$parent.$broadcast("schemaForm.error."+i.key[0],"invalidSearchString",t.instant("Invalid")):(i.$parent.$broadcast("schemaForm.error."+i.key[0],"invalidSearchString",!0),i.input_name="")),setTimeout(function(){i.preventBroadcastOverlap=!1},500)}),i.$watch(function(){return l.$modelValue},function(e){"object"==typeof e&&0==Object.keys(e).length&&(i.selectedItems=[])}),i.selectedItems=[],i.filteredList=[],l.$render=function(){d(l.$viewValue)},l.$isEmpty=function(){return 0==i.selectedItems.length},i.selectItem=function(e,t){if(t===i.noResultsFoundObject)return e.stopPropagation(),!1;var a=t.id,o=p(a,i.items);return"undefined"!=typeof o&&(i.selectedItems.push(o),s(o.parentId),f(a),i.input_name="",i.key&&i.key.length>0&&i.$parent.$broadcast("schemaForm.error."+i.key[0],"invalidSearchString",!0),void m())},i.removeItem=function(e){i.selectedItems=i.selectedItems.filter(function(t){return t.id!=e||(i.items.push(p(e,i.selectedItems)),i.items=u(i.items,["parentName","name"]),!1)}),c(e),m()},i.filterItems=function(e){var a=[],o=0;"undefined"==typeof e&&(e=""),i.currentInputValue=e;for(var n in i.items)if(i.items[n].name.toLowerCase().indexOf(e.toLowerCase())>=0?(a.push(i.items[n]),o++):"undefined"!=typeof i.items[n].employeeId&&i.items[n].employeeId.toLowerCase().indexOf(e.toLowerCase())>=0&&(a.push(i.items[n]),o++),50==o)break;r(a)||a.push(i.noResultsFoundObject),0==i.selectedItems.length&&""!=e&&i.key&&i.key.length>0&&i.$parent.$broadcast("schemaForm.error."+i.key[0],"invalidSearchString",t.instant("Invalid")),i.filteredList=a},i.getStyledName=function(e){var t=e.displayValue?e.displayValue:e.name;t=a("sanitizehtml")(t);var o="undefined"!=typeof e.parentName?a("sanitizehtml")(e.parentName):void 0;return e===i.noResultsFoundObject?'<div class="row hierarchical-multiselect-dropdown-item-row" style="padding-bottom: 0px; padding-top: 5px;"><div class="col l12 m12 s12 hierarchical-multiselect-dropdown-element">'+t+"</div></div>":"undefined"!=typeof o?'<div class="row hierarchical-multiselect-dropdown-item-row" style="padding-bottom: 0px; padding-top: 5px;"><div class="col l12 m12 s12 hierarchical-multiselect-dropdown-parent">'+o+'</div><div class="col l12 m12 s12 hierarchical-multiselect-dropdown-element">'+t+"</div></div>":t}}}}angular.module("app.widgets").directive("autocompleteHierarchical",e),e.$inject=["$document","$translate","$filter"]}(),function(){"use strict";function e(e,a){return{restrict:"E",scope:{id:"=",model:"=",ratingScale:"=",readonly:"="},link:function(e,t,i,o){a(function(){$(t[0]).find("select").barrating({theme:"bars-movie",showSelectedRating:!1,allowEmpty:!0,deselectable:!0,emptyValue:"0",initialRating:"0",readonly:e.readonly,onSelect:function(t,a,i){e.model=parseFloat(t),e.$emit("barRatingChanged",e.id,t)}}),$(".br-widget").find("a").each(function(t){var a=$(this).prev("a").attr("data-rating-value");void 0!==a&&a%1!==0&&($(this).css("margin-left","0px"),$(this).prev("a").css("margin-right","0px")),e.ratingScale.length>5&&$(this).css("width","15px")}),$(t[0]).find("select").barrating("set",parseFloat(e.model))})},controller:t,templateUrl:"app/directives/formWidgets/bar-rating.html",controllerAs:"vm"}}function t(e,t){}angular.module("app.directives").directive("barRating",e),e.$inject=["localizedMessages","$timeout"],t.$inject=["$scope","webservice"]}(),function(){"use strict";function e(e){return{restrict:"E",scope:{id:"=",model:"=",readonly:"=",range:"="},link:function(e,t,a,i){},controller:t,templateUrl:"app/directives/formWidgets/input-number-spinner.html",controllerAs:"vm"}}function t(e,t,a){function i(t){e.model=Number(e.model)-1,r.timeoout=a(function(){i(75)},t)}function o(t){e.model=Number(e.model)+1,r.timeoout=a(function(){o(75)},t)}function n(e){return""===e||l(e)}function l(t){var a=Math.floor(Number(t));return a!==1/0&&!isNaN(a)&&a==t&&a>=e.range.from&&a<=e.range.to}var r=this;e.$watch("model",function(t,a){n(t)?e.$emit("recalculateCompetencyWeights",e.id,t):e.model=a}),r.decrease=function(){i(500)},r.increase=function(){o(500)},r.clearAllTimeouts=function(){a.cancel(r.timeoout)}}angular.module("app.directives").directive("inputNumberSpinner",e),e.$inject=["localizedMessages"],t.$inject=["$scope","webservice","$timeout"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){function m(){u(),h()}function u(){w.model.options=angular.copy(s),p(),w.config.includeAllOption&&(w.allSelected=f())}function p(){_.each(w.config.mandatoryOptions,function(e){w.model.options.indexOf(e)===-1&&w.model.options.push(e)})}function f(){var e=w.model.options,t=g();return 0==_.difference(t,e).length}function g(){return S["enum"]}function h(){w.schema={type:"object",title:"Options",properties:{options:{type:"array",items:{"enum":S["enum"],type:"string"}}}},w.form=[{type:"section",htmlClass:"row",items:[{type:"checkboxes",htmlClass:"col s12 m12 l12 multi_select_checkboxes",key:"options",titleMap:S.titleMap,notitle:!0,onChange:w.checkBoxClicked,readonly:w.config.readonly,readonlyOptions:w.config.mandatoryOptions}]}]}function v(){i(w.model.options)}function y(){b(),h()}function b(){w.allSelected?w.model.options=angular.copy(S["enum"]):w.model.options=angular.copy(w.config.mandatoryOptions)}function C(){d(function(){w.config.includeAllOption&&(w.allSelected=f()),"function"==typeof c.onChange&&c.onChange(w.model.options)})}var w=this;w.cancel=v,w.model={},w.config=angular.copy(c);var S=angular.copy(r);w.optionsReadOnly=!1,w.allOptionClicked=y,w.checkBoxClicked=C,m()}angular.module("app.performance").controller("multiSelectCheckBoxesModalController",e),e.$inject=["$scope","logger","webservice","close","formHelper","localizedMessages","formValidationHelper","options","model","config","$timeout"]}(),function(){"use strict";function e(){return{restrict:"E",scope:{id:"=",model:"=",config:"=",options:"="},link:function(e,t,a,i){},controller:t,templateUrl:"app/directives/formWidgets/multi-select-checkboxes.html",controllerAs:"vm"}}function t(e,t,a,i,o,n){function l(){r()}function r(){m.visibleSelectedOption=e.config.notSelectedOption?e.config.notSelectedOption:n.getLocalizedCustom("None"),m.isHiddenSelectedOptionIndicatorNeeded=!1,m.hiddenSelectedOptionIndicator="";var t=_.filter(u,function(t){return e.model.indexOf(t.id)>-1});t.length>0&&(m.visibleSelectedOption=t[0].name),t.length>1&&(m.isHiddenSelectedOptionIndicatorNeeded=!0,m.hiddenSelectedOptionIndicator="+"+(t.length-1)),e.config.includeAllOption&&t.length===_.filter(u,"id").length&&(m.visibleSelectedOption=n.getLocalizedCustom("All"),m.isHiddenSelectedOptionIndicatorNeeded=!1,m.hiddenSelectedOptionIndicator="")}function s(){var t=d(e.options),a=!1;i.showModal({templateUrl:"app/directives/formWidgets/multi-select-checkboxes-modal.html",controller:"multiSelectCheckBoxesModalController",controllerAs:"modal",inputs:{options:t,model:e.model,config:e.config}}).then(function(t){var i=c();$(t.element).openModal({opacity:0,out_duration:0,in_duration:0,dynamic_position:!0,dp_top:i.top,dp_margin_left:i.margin_left,complete:function(){a||t.controller.cancel()}}),t.close.then(function(t){a=!0,e.model=t,r()})})}function c(){var t=$("#modal_indicator_"+e.id).offset();return{top:t.top+30+"px",margin_left:t.left-17+"px"}}function d(e){var t=[],a=[];for(var i in e)e.hasOwnProperty(i)&&(t.push({value:e[i].id,name:e[i].name}),a.push(e[i].id));return{titleMap:t,"enum":a}}var m=this,u=angular.copy(e.options);m.openSelectionModal=s,l()}angular.module("app.directives").directive("multiSelectCheckboxes",e),e.$inject=[],t.$inject=["$scope","webservice","employeeService","ModalService","$timeout","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c){function d(){var e={model:m.model,config:m.config};i(e)}var m=this;m.cancel=d,m.config=angular.copy(c),m.options=angular.copy(r),m.model=angular.copy(s)}angular.module("app.performance").controller("multiSelectTreeViewModalController",e),e.$inject=["$scope","logger","webservice","close","formHelper","localizedMessages","formValidationHelper","options","model","config"]}(),function(){"use strict";function e(e){return{restrict:"E",scope:{id:"=",model:"=",config:"=",options:"="},link:function(e,t,a,i){},controller:t,templateUrl:"app/directives/formWidgets/multi-select-tree-view-widget.html",controllerAs:"vm"}}function t(e,t,a,i,o){function n(){r(),l()}function l(){e.$applyAsync(function(){var e=$(".tree-view-table"),t={expandable:!0,column:1,stringExpand:"",stringCollapse:"",expanderTemplate:"<a class='material-icons'></a>"};e.treetable(t),$(".tree-view-table-container").mCustomScrollbar({theme:"ohrm-dark-thick",axis:"y",scrollInertia:0}),g.dataLoaded=!0})}function r(){for(var t=0;t<e.model.length;t++)g.selectedOptions[e.model[t]]=!0;e.config.allOptionCheckBox.includeAllOption&&(g.allSelected=s())}function s(){var e=c(),t=d();return 0==_.difference(t,e).length}function c(){var e=[];for(var t in g.selectedOptions)g.selectedOptions[t]&&e.push(t);return e}function d(){return _.map(e.options,"id")}function m(){if(e.config.allOptionCheckBox.includeAllOption&&g.allSelected)for(var t=0;t<e.options.length;t++)g.selectedOptions[e.options[t].id]=!0;else g.selectedOptions=[];e.model=c()}function u(t){f(t),e.config.allOptionCheckBox.includeAllOption&&(g.allSelected=s()),e.model=c()}function p(t){var a=t.id;t.readonly||e.config.readonly||(g.selectedOptions[a]=!g.selectedOptions[a],u(a))}function f(t){var a=_.find(e.options,function(e){return e.id===t});g.selectedOptions[t]?a.children.length>0&&a.children.forEach(function(t,a){_.find(e.options,function(e){return e.id===t}).readonly||(g.selectedOptions[t]=!0)}):a.children.length>0&&a.children.forEach(function(t,a){_.find(e.options,function(e){return e.id===t}).readonly||(g.selectedOptions[t]=!1)})}var g=this;g.selectedOptions=[],g.allOptionClicked=m,g.checkBoxClicked=u,g.labelClicked=p,n()}angular.module("app.directives").directive("multiSelectTreeViewWidget",e),e.$inject=["localizedMessages"],t.$inject=["$scope","webservice","employeeService","ModalService","$timeout"]}(),function(){"use strict";function e(e){return{restrict:"E",scope:{id:"=",model:"=",config:"=",options:"=",ngDisabled:"="},link:function(e,t,a,i){},controller:t,templateUrl:"app/directives/formWidgets/multi-select-tree-view.html",controllerAs:"vm"}}function t(e,t,a,i,o){function n(){l()}function l(){c.visibleSelectedOption=e.config.notSelectedOption?e.config.notSelectedOption:o.getLocalizedCustom("None"),c.isHiddenSelectedOptionIndicatorNeeded=!1,c.hiddenSelectedOptionIndicator="";var t=e.options.length>0&&0===_.difference(_.map(e.options,"id"),e.model).length;if(e.config.allOptionCheckBox.includeAllOption&&t)c.visibleSelectedOption=o.getLocalizedCustom("All"),c.isHiddenSelectedOptionIndicatorNeeded=!1,c.hiddenSelectedOptionIndicator="";else{var a=_.filter(d,function(t){return e.model.indexOf(t.id)>-1});a.length>0&&(c.visibleSelectedOption=a[0].name),a.length>1&&(c.isHiddenSelectedOptionIndicatorNeeded=!0,c.hiddenSelectedOptionIndicator="+"+(a.length-1))}}function r(){if(e.ngDisabled)return!1;var t=!1;i.showModal({templateUrl:"app/directives/formWidgets/multi-select-tree-view-modal.html",controller:"multiSelectTreeViewModalController",controllerAs:"modal",inputs:{options:e.options,model:e.model,config:e.config}}).then(function(a){var i=s();$(a.element).openModal({opacity:0,out_duration:0,in_duration:0,dynamic_position:!0,dp_top:i.top,dp_margin_left:i.margin_left,complete:function(){t||a.controller.cancel()}}),a.close.then(function(a){t=!0,e.model=a.model,e.config=a.config,l()})})}function s(){var t=$("#"+e.id+"ModalIndicator").offset();return{top:t.top+30+"px",margin_left:t.left-17+"px"}}var c=this,d=angular.copy(e.options);c.openSelectionModal=r,n()}angular.module("app.directives").directive("multiSelectTreeView",e),e.$inject=["localizedMessages"],t.$inject=["$scope","webservice","employeeService","ModalService","localizedMessages"]}(),function(){"use strict";function e(e){var a={restrict:"E",templateUrl:"app/directives/formWidgets/ohrmSwitch/ohrm-switch.html",scope:{key:"=key",label:"=label",readonly:"=readonly",model:"=model",icon:"=icon",iconClass:"=iconClass"},controller:t,controllerAs:"vm",link:function(e){}};return a}function t(e,t,a,i){}angular.module("app.core").directive("ohrmSwitch",e),e.$inject=["$timeout"],t.$inject=["dashboardService","webservice","$state","LOGIN"]}(),function(){"use strict";function e(e){return{restrict:"E",scope:{id:"=",model:"=",config:"=",options:"=",label:"=",onChange:"="},link:function(e,t,a,i){var o=$(t).find(".oxd-multi-select-tree-view-widget-done-button");o.bind("click",function(e){e.stopPropagation(),o.parent().parent().parent().parent().css("display","none"),$(t).closest(".tree-select-holder").find("input.oxd-multi-select-tree-view").removeClass("focus")})},controller:t,templateUrl:"app/directives/formWidgets/oxd-multi-select-tree-view-widget.html",controllerAs:"vm"}}function t(e,t,a,i,o){function n(){s(),l()}function l(){e.$applyAsync(function(){var e=$(".tree-view-table"),t={expandable:!0,column:1,stringExpand:"",stringCollapse:"",expanderTemplate:"<a class='material-icons'></a>"};e.treetable(t),C.dataLoaded=!0})}function r(){C.onlyParents=_.where(e.options,{parentId:null}),C.parentIds=_.map(C.onlyParents,"id"),C.onlyChildren=_.reject(e.options,{parentId:null})}function s(){if("undefined"!=typeof e.model){for(var t=0;t<e.model.length;t++)C.selectedOptions[e.model[t]]=!0;if(e.config.allOptionCheckBox.includeAllOption&&(C.allSelected=c()),C.controllerOptionForTwoLevels)if(C.allSelected)for(var t=0;t<e.options.length;t++)C.selectedOptions[e.options[t].id]=!0;else for(var t=0;t<e.options.length;t++)h(e.options[t].id)}}function c(){var e=d(),t=m();return 0==_.difference(t,e).length&&t.length>0}function d(){var e=[];for(var t in C.selectedOptions)C.selectedOptions[t]&&e.push(t);return C.controllerOptionForTwoLevels&&(e=_.difference(e,C.parentIds)),e}function m(){var t=_.map(e.options,"id");return C.controllerOptionForTwoLevels&&(t=_.difference(t,C.parentIds)),t}function u(){if(e.config.allOptionCheckBox.includeAllOption&&C.allSelected)for(var t=0;t<e.options.length;t++)C.selectedOptions[e.options[t].id]=!0;else C.selectedOptions=[];f(d())}function p(t){v(t),C.controllerOptionForTwoLevels&&h(t),e.config.allOptionCheckBox.includeAllOption&&(C.allSelected=c()),f(d())}function f(t){e.model=t,"function"==typeof e.onChange&&e.onChange(t)}function g(t){var a=t.id;t.readonly||e.config.readonly||(C.selectedOptions[a]=!C.selectedOptions[a],p(a))}function h(t){var a=_.find(e.options,function(e){return e.id===t}),i=a.parentId;if(null!==i){var o=_.filter(e.options,{parentId:i});C.selectedOptions[t]?(C.selectedOptions[i]=!0,o.forEach(function(e,t){C.selectedOptions[parseInt(e.id)]!==!0&&(C.selectedOptions[i]=!1)})):C.selectedOptions[i]=!1}}function v(t){var a=_.find(e.options,function(e){return e.id===t});C.selectedOptions[t]?a.children.length>0&&a.children.forEach(function(t,a){_.find(e.options,function(e){return e.id===t}).readonly||(C.selectedOptions[t]=!0)}):a.children.length>0&&a.children.forEach(function(t,a){_.find(e.options,function(e){return e.id===t}).readonly||(C.selectedOptions[t]=!1)})}function y(t){var a=_.find(e.options,function(e){return e.id===t}),i=e.model||[],o=_.intersection(a.children,i);return o.length>0}function b(t){var a=e.model||[];return _.includes(a,t)}var C=this;C.selectedOptions=[],C.allOptionClicked=u,C.checkBoxClicked=p,C.labelClicked=g,C.isChildSelected=y,C.isSelfSelected=b,C.id=e.id,C.config=e.config,C.controllerOptionForTwoLevels=C.config.controllerOptionForTwoLevels,r(),n(),e.$watch("model",function(e,t,a){(!e||Array.isArray(e)&&0==e.length)&&(C.selectedOptions=[])})}angular.module("app.directives").directive("oxdMultiSelectTreeViewWidget",e),e.$inject=["localizedMessages"],t.$inject=["$scope","webservice","employeeService","ModalService","$timeout"]}(),function(){"use strict";function e(e){return{restrict:"E",scope:{id:"=",model:"=",config:"=",options:"=",label:"=",ngDisabled:"=",onChange:"="},link:function(e,t,a,i){function o(){var e=$(t).find("oxd-multi-select-tree-view-widget");$(t).find("input.oxd-multi-select-tree-view").bind("click",function(a){e.toggle(),n(),$(t).find("input.oxd-multi-select-tree-view").addClass("focus")}),$(t).find(".input-group-append-container").bind("click",function(a){e.toggle(),n(),$(t).find("input.oxd-multi-select-tree-view").addClass("focus")}),$(document).on("click show.bs.dropdown ohrm.oxd.date.picker.open",function(a){$.contains(t[0],a.target)||(e.css("display","none"),$(t).find("input.oxd-multi-select-tree-view").removeClass("focus"))})}function n(){var t=$("oxd-multi-select-tree-view-widget").filter(function(t){return!$(this).hasClass(e.id)});_.forEach(t,function(e){$(e).css("display","none")})}o()},controller:t,templateUrl:"app/directives/formWidgets/oxd-multi-select-tree-view.html",controllerAs:"vm"}}function t(e,t,a,i,o,n,l,r){var s=this;s.widgetOptions=angular.copy(e.options),s.config=angular.copy(e.config),s.label=s.config.notSelectedOption,s.labelCount=0,e.$watch("model",function(t,a,i){if("undefined"!=typeof t)if(t.length>0){var o=_.map(s.widgetOptions,function(e){if(t.includes(e.id))return e}),n=o.filter(function(e){if(null!==e||void 0!==e)return e});s.label=n[0].name,t.length>1?(s.label=s.label+",",s.labelCount=t.length-1):s.labelCount=0}else s.labelCount=0,s.label=s.config.notSelectedOption,e.model=void 0},!0)}angular.module("app.directives").directive("oxdMultiSelectTreeView",e),e.$inject=["localizedMessages"],t.$inject=["$scope","webservice","employeeService","ModalService","localizedMessages","$rootScope","$element","$timeout"]}(),function(){"use strict";function e(e){return{restrict:"E",scope:{targetElementSelector:"@",onEnter:"=",onExit:"="},link:function(t,a){function i(e){e.target===n&&(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement?(t.isFullScreen=!0,"function"==typeof t.onEnter&&t.onEnter()):(t.isFullScreen=!1,"function"==typeof t.onExit&&t.onExit()))}function o(){document.fullscreenElement===n&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen())}t.isFullScreen=!1;var n=$(t.targetElementSelector)[0];t.onBtnClick=function(){document.fullscreenElement!==n&&document.webkitFullscreenElement!==n&&document.msFullscreenElement!==n?n.requestFullscreen?n.requestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.msRequestFullscreen&&n.msRequestFullscreen():o()},n.addEventListener&&(n.addEventListener("fullscreenchange",i,!1),n.addEventListener("mozfullscreenchange",i,!1),n.addEventListener("MSFullscreenChange",i,!1),n.addEventListener("webkitfullscreenchange",i,!1),t.$on("$destroy",function(){n.removeEventListener("fullscreenchange",i),n.removeEventListener("mozfullscreenchange",i),n.removeEventListener("MSFullscreenChange",i),n.removeEventListener("webkitfullscreenchange",i)}));var l=e.onExit({},function(e){l(),o()})},templateUrl:"app/directives/full-screen-toggle-button.html"}}angular.module("app.directives").directive("fullScreenToggleButton",e),e.$inject=["$transitions"]}(),function(){"use strict";function e(e){var t={restrict:"A",link:function(e,t,a,i){e.$watch(function(){return $(".form-group:has(*)").length},function(e,a){t.find(".form-group:not(:has(*))").hide(),t.find(".form-group:has(*)").show()})}};return t}angular.module("app.directives").directive("hideEmptyFormElements",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e){return{restrict:"E",scope:{floatOnScreen:"="},templateUrl:"app/directives/horizontal-scroll-floating-button.html",link:function(t,a){function i(){var e=l[0].scrollLeft+parseInt(.5*l.width(),10);l[0].scrollLeft=e}function o(){l[0].scrollLeft=0}function n(){var e=l[0].getBoundingClientRect(),a=Math.max(document.documentElement.clientHeight,window.innerHeight);t.isElementVisible=!(e.bottom<0||e.top-a>=0)}t.scrollableToRight=!0;var l=$(a).parent();l.css("scroll-behavior","smooth"),t.isScrollable=function(){return l[0].clientWidth<l[0].scrollWidth},t.scroll=function(){t.scrollableToRight?i():o()},l.scroll(function(){e(function(){t.scrollableToRight=!(l[0].scrollLeft+5>=l[0].scrollWidth-l[0].offsetWidth)})}),t.floatOnScreen?(t.isElementVisible=!1,$(document).scroll(function(){e(function(){n()})})):t.isElementVisible=!0}}}angular.module("app.directives").directive("horizontalScrollFloatingButton",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,t,a){a.$observe("iframeSrc",function(e){e&&a.$set("src",e)})}}}angular.module("app.directives").directive("iframeSrc",e)}(),function(){"use strict";function e(e,t,a,i){return{restrict:"A",link:function(o,n,l){function r(e,t){var i=null===t?a.instant("Not Defined"):t,o=e.children(),n=e.find("div#job-spec-attachment-name");n.text(i),n.removeAttr("data-original-title"),e.append(o);var l=e.children("i");null===t?l.hide():(l.show(),n.attr("data-original-title",i))}var s=this;s.url=void 0;var c=o.form.jobTitleField;o.download=function(){s.url&&i.ohrmGlobals.downloadFile(s.url)},o.$watch(function(){return o.model[c]},function(a,i){r(n,null),""!==a&&e.call("jobSpecificationAttachment","GET",[],{id:a}).then(function(e){e.data.data.attachmentId?(s.url=t.baseUrl+"admin/viewJobSpec/attachId/"+e.data.data.attachmentId,r(n,e.data.data.fileName)):r(n,null)})})}}}angular.module("app.directives").directive("jobSpecLink",e),e.$inject=["webservice","LOGIN","$translate","$rootScope"]}(),function(){"use strict";function e(e,a,i,o,n,l){function r(){return a.current.data&&a.current.data.oxd}var s=0;return{restrict:"E",templateUrl:function(e,t){var a=r()?"oxd-list.html":"list.html",i=t.template?t.template:a;return"app/directives/"+i},scope:{objs:"=objs",listData:"=listdata",sortField:"=initialsortfield",initialSortOrder:"=initialsortorder",extracontroller:"=extracontroller"},link:function(t,a){function r(){var e=t.listData.listFields;for(var a in e)if(e[a].name==t.sortField)return e[a].sortAction}function c(e){e.subItems=[],e.expandedNodes=[],e.$applyAsync(function(){var t=$("#"+e.listData.tableId);p(t,e);var a=[],n={indent:30,expandable:!0,column:u(e),expanderTemplate:"<a class='material-icons'></a>",stringCollapse:i.instant("Collapse"),stringExpand:i.instant("Expand"),onNodeCollapse:function(){var t=this,a=e.expandedNodes.indexOf(t.id);a>-1&&e.expandedNodes.splice(a,1),h(this,e)},onNodeExpand:function(){var i=this;m(i),e.expandedNodes.push(i.id);var n=i.id.toString().split("."),r=n[0];n[2===n.length?1:0];"undefined"!=typeof e.loadedSubItemsRows[i.id]?(h(i,e),t.treetable("expandNode",i.id)):(e.loadedSubItemsRows[i.id]=[],t.treetable("unloadBranch",i),e.extracontroller[e.listData.loadChildNodeData](r).then(function(n){var r='<tr oxd-list-row node-id="'+i.id+'" obj="SUBITEM" list="list" list-data="listData" extracontroller="extracontroller" class="sub-row" ng-mouseover="listData.onHoverRow(SUBITEM)" ng-class="{\'grey\':SUBITEM.selected ,\'lighten-5\':SUBITEM.selected}"></tr>';a=$();for(var s=0;s<n.length;s++){var c="subItem"+n[s].id,d=r.replace(/SUBITEM/g,c);e[c]=n[s];
var m=l(d)(e);a=a.add(m)}o(function(){e.loadedSubItemsRows[i.id]=a,t.treetable("loadBranch",i,a),h(i,e),g(),e.$broadcast("tree-branch-loaded"),e.subItems=[]})}))}};t.treetable(n),e.collapseAll(),f(t),g(),e.$on("updateLoadedSubRowElements",d)})}function d(e,a){a&&(t["subItem"+a.id]=a)}function m(e){if(e&&t.listData.tableExpand&&t.listData.columnWidths){var a=u(t),i=t.listData.columnWidths[a],n=t.listData.tableExpand.maxLevelsBeforeExpand-2;t.maxLevel=t.maxLevel?t.maxLevel:n;var l=t.listData.tableExpand.expandPercentageMultiplier;if(!i||!n||!l)return;var r=e.level();if(r>t.maxLevel){t.maxLevel=r;var s=(r-n)*l,c=(r-n)*l/2;$("#goalList").css("width","calc(100% + "+s+"%)"),$("#goalList colgroup col:nth-child("+(a+1)+")").css("width","calc("+i+" + "+c+"%)"),o(function(){t.autoScrollEnabled=!0})}}}function u(e){var t=_.findIndex(e.listData.listFields,"name",e.listData.expandableField);return e.listData.listTopBar&&e.listData.selectable&&(e.listData.showSelectableAlways||"function"==typeof e.listData.listTopBar.getBulkActionButtons||"function"==typeof e.listData.listTopBar.onBulkDelete)&&(t+=1),t}function p(e,t){if(t.loadedSubItemsRows.length>0){e.treetable("collapseAll");var a;for(var i in t.loadedSubItemsRows)t.loadedSubItemsRows.hasOwnProperty(i)&&(a=e.treetable("node",i),a&&e.treetable("unloadBranch",a),t.loadedSubItemsRows[i]=void 0)}e.treetable("destroy"),e.find("tr td span.indenter").remove()}function f(e){e.find("tr.branch").each(function(){"false"==$(this).attr("data-tt-branch")&&$(this).find("span.indenter a.material-icons").remove()})}function g(){$(".tooltipped").tooltip("remove"),$(".tooltipped").tooltip()}function h(e,t){var a=e.treeCell[0],i=$(a).find("span.indenter a.tooltipped")[0],o=$(i).attr("data-tooltip");$(i).attr("data-tooltip",v(o,t))}function v(e,t){var a;return a=e==t.collapseString?t.expandString:t.collapseString}var y="StorageKeyForIsCompact";void 0!==t.listData&&void 0===t.listData.name&&(t.listData.name="list"+s++),t.$watch("objs",function(){void 0!==t.listData&&t.listData.expandable&&(t.collapseString=i.instant("Collapse"),t.expandString=i.instant("Expand"),t.loadedSubItemsRows=[],c(t))}),t.scrollableToRight=!0,t.autoScrollButtonClicked=function(){var e=$("#"+t.listData.tableId),a=$(".table-container"),i=0;0===a.scrollLeft()?(t.scrollableToRight=!1,i=e.width()-a.width()):t.scrollableToRight=!0,a.animate({scrollLeft:i},300)},t.collapseAll=function(){var e=$("#"+t.listData.tableId);e.css("width","100%");var a=u(t),i=t.listData.columnWidths[a];i&&(e.find("colgroup col:nth-child("+(a+1)+")").css("width",i+""),e.treetable("collapseAll"),t.maxLevel=void 0,o(function(){t.autoScrollEnabled=!1}))},t.toggleLeftMenu=function(e){e.isCompact=!e.isCompact,e.toggleable&&(n[t.listData.tableId+y]=e.isCompact),e.toggleCallback&&angular.isFunction(e.toggleCallback)&&e.toggleCallback(e.isCompact)},t.isLeftMenuCompact=function(e){return e.toggleable&&"undefined"!=typeof n[t.listData.tableId+y]?n[t.listData.tableId+y]:e.isCompact},t.showCollapseAll=function(e){return!!(t.listData&&t.listData.expandable&&e&&e.name==t.listData.expandableField&&t.expandedNodes&&t.expandedNodes.length>0)},t.isExpandable=function(e){return!!(t.listData&&t.listData.expandable&&e&&e.name==t.listData.expandableField)},t.getFieldValue=function(t,a,i,o,n){var l="";if($.isArray(a)){if(l=t[a[0]],"object"==typeof l)for(var r=1;r<a.length;r++)l=l[a[r]]}else l=t[a];return""==a&&(l=t),"function"==typeof i&&(l=i(l,t)),"function"==typeof n&&(l=n(l,t)),o&&o.forEach(function(t){if(t.name){var a=[];a=a.concat(l),t.params&&(a=a.concat(t.params)),l=e(t.name).apply(null,a)}}),l},t.getStyle=function(e,t){var a="";return a="function"==typeof t?t(e):t},t.sortField&&void 0!==t.listData&&!t.listData.pagination&&t.list.setPaginationParameters(t.sortField,r(),"ASC")},controller:t,controllerAs:"list"}}function t(e,t,a,i,o,n,l,r){function s(t){if(e.listData&&e.listData.listTopBar.listConfigData&&e.listData.persistPagination){var a={};a.listName=e.listData.listTopBar.listConfigData.listName,a.mode="pageParamUpdate",a.formData={pageSize:t},i.updateRegisteredListConfiguration(a)}}function c(t,a,i){t||(a=null),"undefined"==typeof i?e.extracontroller[m.sortAction](t,a):e.extracontroller[m.sortAction](t,a,i)}function d(e){var t,a;return e.mainActionButton?e.title&&!(e.quickSearch||e.onFilterOpen||e.configurable)?(t="col-9",a="col-0"):(t="col-5",a="col-4"):(t="col-7",a="col-5"),{bulkActionPanelClass:t,searchPanelClass:a}}var m=this;m.browserType=window.chrome&&window.chrome.webstore?"chromeClass":"",m.field=null,m.sortAction=null,m.sorting=!1,m.pagination=!1,m.order="ASC",m.sizes=["10","20","50","100"],m.sortField=e.sortField,m.initialSortOrder=e.initialSortOrder,m.initialSortOrderSet=!1,m.listSpecificInitialSort=!1,m.bulkActionButtons=[],m.quickSearchText="";"string"!=typeof m.sortField;m.sortableFields={},m.noRecordMessageBeingShown=!1,m.getFieldValue=function(){return e.getFieldValue.apply(e,arguments)},e.listData&&(m.clickableCondition=e.listData.clickableCondition,m.listSpecificInitialSort=e.listData.listSpecificInitialSort);var u=angular.copy(m.sortField);e.$on("resetSortField",function(){m.sortField=u}),e.$on("clearListQuickSort",function(){m.quickSearchText=""}),l.current.data&&l.current.data.oxd?e.$watch("objs",function(a,i){if(e.listData&&e.listData.noRecordFoundMessage!==!1&&""!==e.listData.noRecordFoundMessage&&null===i&&Array.isArray(a)&&0===a.length){var o="No Records Found";"string"==typeof e.listData.noRecordFoundMessage&&(o=e.listData.noRecordFoundMessage),m.noRecordMessageBeingShown||(m.noRecordMessageBeingShown=!0,t.showCustomizedToast(o,"info",{onHidden:function(){m.noRecordMessageBeingShown=!1}}))}m.pageSize=e.extracontroller.pageSize?e.extracontroller.pageSize.toString():"50"}):m.pageSize=e.extracontroller.pageSize?e.extracontroller.pageSize.toString():"50",m.isItemSelectable=function(t){var a=!0;if("function"==typeof e.listData.isRowSelectable)a=e.listData.isRowSelectable(t);else if(void 0!==e.listData.unselectableIds){var i=m.itemTracker(t,e.listData.idGetter);a=e.listData.unselectableIds.indexOf(i)===-1}return a},m.typeOf=function(e){return typeof e},m.getTDTooltip=function(e,t){return"function"==typeof e?e(t):e},m.runAction=function(t,a,i,o){void 0!==t&&"function"==typeof e.extracontroller[t]&&("undefined"==typeof a||null===a?e.extracontroller[t]():e.extracontroller[t](a,i,o))},m.getContextListItemClass=function(e,t){return void 0===t?{}:"function"==typeof t?t(e):void 0},m.itemTracker=function(e,t){var a="";if($.isArray(t)){a=e[t[0]];for(var i=1;i<t.length;i++)a=a+"_"+e[t[i]]}else a=e[t];return a},m.hasPermissions=function(t){if("object"==typeof e.listData&&(e.listData.showSelectableAlways||"object"==typeof e.listData.listTopBar&&"function"==typeof e.listData.listTopBar.getBulkActionButtons||"object"==typeof e.listData.listTopBar&&"function"==typeof e.listData.listTopBar.onBulkDelete))return!0;var a=!1;if("undefined"==typeof t||t.length<0)a=!1;else for(var i=0;i<t.length;i++)if(t[i].actionPermission){a=!0;break}return a},m.AddSortableFields=function(e){m.sortableFields[e]||(m.sortField==e&&"DESC"==m.initialSortOrder?m.sortableFields[e]="-"+e:m.sortableFields[e]=e)},m.fetchData=function(e,t,a,i,o){m.setPaginationParameters(e,t,a,i,o),t&&a&&(m.sortField=e,m.pagination?m.fetchBy():m.sorting&&m.sortBy())},m.fetchBy=function(){m.updatePageSize(),c(m.sortField,m.order,e.extracontroller.page)},m.sortBy=function(){c(m.sortField,m.order)},m.getSortIcon=function(e){return m.listSpecificInitialSort&&"undefined"==typeof m.sortField?"":e===m.sortableFields[e]?"arrow_upward":"-"+e===m.sortableFields[e]?"arrow_downward":""},m.onSortClick=function(){$(document).trigger("click.oxdMultiselectDismiss")},m.nextPage=function(){$("html, body").animate({scrollTop:0},0),c(m.sortField,m.order,e.extracontroller.page+1)},m.prevPage=function(){e.extracontroller.page>1&&($("html, body").animate({scrollTop:0},0),c(m.sortField,m.order,e.extracontroller.page-1))},m.gotoPage=function(e){$("html, body").animate({scrollTop:0},0),c(m.sortField,m.order,e)},m.changePageSize=function(t){s(t),e.extracontroller.pageSize=t,m.pageSize=t,m.gotoPage(1)},m.isActivePage=function(t){return t==e.extracontroller.page},a.bindTo(e).add({combo:"n",description:"Next Page",callback:m.nextPage}).add({combo:"p",description:"Previous Page",callback:m.prevPage}),m.isPaginationNeed=function(){return e.extracontroller.totalDataCount>e.extracontroller.pageSize},m.isPrevPageNeed=function(){return e.extracontroller.page>1},m.isNextPageNeed=function(){return e.extracontroller.page<e.extracontroller.lastPage},m.getPageNumbers=function(){for(var t=[e.extracontroller.page],a=1;a<5;a++)e.extracontroller.page-a>0&&t.length<5&&t.push(e.extracontroller.page-a),e.extracontroller.page+a<=e.extracontroller.lastPage&&t.length<5&&t.push(e.extracontroller.page+a);return t.sort(function(e,t){return e-t})},m.getCurrentPageText=function(){var a=(e.extracontroller.page-1)*e.extracontroller.pageSize+1,i=a+e.extracontroller.dataInCurruntPage-1,o=e.extracontroller.totalDataCount;return 0==o&&(a=0,i=0),a+" - "+i+" "+t.getLocalizedCustom("of")+" "+e.extracontroller.totalDataCount},m.setPaginationValues=function(e,t,a,i){m.sorting&&m.pagination&&m.field&&m.sortAction||m.setPaginationParameters(e,t,a,i)},m.setPaginationParameters=function(e,t,a,i,o){a&&(m.sorting=a),i&&(m.pagination=i),e&&(m.field=e),t&&(m.sortAction=t,"undefined"==typeof m.sortField?m.listSpecificInitialSort&&!m.listInitiationSortCompleted?(m.sortableFields[e]="-"+e,m.order=o?o:"DESC",m.listInitiationSortCompleted=!0):(m.sortableFields[e]=e,m.order=o?o:"ASC",m.sortField=e):m.sortField===e?m.sortableFields[e]===e?(m.sortableFields[e]="-"+e,m.order=o?o:"DESC"):m.sortableFields[e]==="-"+e?(m.sortableFields[e]=e,m.order=o?o:"ASC"):(m.sortableFields[e]=e,m.order=o?o:"ASC"):(m.sortableFields[e]=e,m.order=o?o:"ASC"))},m.getOxdSortIcon=function(e){return e==m.sortField?(m.initialSortOrder&&!m.initialSortOrderSet&&(m.order=m.initialSortOrder,m.initialSortOrderSet=!0),"ASC"==m.order?"sort_asc_oxd":"DESC"==m.order?"sort_desc_oxd":"sort_oxd"):"sort_oxd"},m.getSelectedRowCount=function(){return m.getSelectedRows().length},m.getSelectedRows=function(){return e.objs?e.objs.filter(function(e){return e.selected}):[]},m.getSelectedIds=function(){return m.getSelectedRows().map(function(t){return t[e.listData.idGetter]})},m.updateBulkActionButtons=function(){e.listData.listTopBar&&"function"==typeof e.listData.listTopBar.getBulkActionButtons?m.bulkActionButtons=e.listData.listTopBar.getBulkActionButtons(m.getSelectedRows()):m.bulkActionButtons=[]},m.allRowsSelected=function(){if(!e.objs)return!1;var t=e.objs.filter(function(e){return m.isItemSelectable(e)});return t.length>0&&t.length==m.getSelectedRowCount()},m.toggleSelectAll=function(){m.allRowsSelected()?e.objs.forEach(function(t){m.isItemSelectable(t)&&(t.selected=!1,m.runAction("changeSelection",{obj:t,name:e.listData.name}))}):e.objs.forEach(function(t){m.isItemSelectable(t)&&(t.selected=!0,m.runAction("changeSelection",{obj:t,name:e.listData.name}))})},m.updatePageSize=function(){$("html, body").animate({scrollTop:0},0),e.extracontroller.pageSize=Number(m.pageSize),e.extracontroller.page=1,e.extracontroller.dataInCurruntPage=Number(m.pageSize),e.extracontroller.lastPage=Math.ceil(e.extracontroller.totalDataCount/Number(m.pageSize))},m.saveData=function(t){e.extracontroller.save(t)},m.updateQuickSearchText=function(e){m.quickSearchText=e},m.onQuickSearchSelect=function(t){"object"!=typeof t||_.isEmpty(t)||_.isEmpty(t.originalObject)||(m.quickSearchText=t.originalObject.name,e.listData.listTopBar.quickSearch.onSearch(t))},m.listConfigOptionDirectiveController=function(e){function t(){r.showModal("app/core/modal/list-configuration.html","ListConfigurationModalController","modal",{listName:e.listName,modalHeader:e.modalHeader,applyForAllEmployeesLabel:e.applyForAllEmployeesLabel,conditionalFields:e.conditionalFields,specialMessagesForFields:e.specialMessagesForFields,maxNoOfFields:e.maxNoOfFields,reportId:null})}t()},m.getDeleteSelectedMessage=function(){return"object"==typeof e.listData.listTopBar&&"string"==typeof e.listData.listTopBar.deleteSelectedMessage?e.listData.listTopBar.deleteSelectedMessage:"object"==typeof e.listData.listTopBar&&"function"==typeof e.listData.listTopBar.deleteSelectedMessage?e.listData.listTopBar.deleteSelectedMessage():t.getLocalizedCustom("Delete Selected")},m.isRowClickable=function(t){return"string"==typeof e.listData.clickableCondition?t[e.listData.clickableCondition]:"function"==typeof e.listData.clickableCondition&&e.listData.clickableCondition(t)},m.getTopBarPanelClasses=function(e){return e.panelClasses?e.panelClasses:d(e)}}angular.module("app.directives").directive("list",e),e.$inject=["$filter","$state","$translate","$timeout","$localStorage","$compile"],t.$inject=["$scope","localizedMessages","hotkeys","listConfigurationService","ModalService","datagroupPermissions","$state","modalHelperService"]}(),function(){"use strict";function e(e,a){return{restrict:"A",link:function(e,t,a){void 0!==e.form.onChange?e.selectedEntity=e.form.onChange:e.selectedEntity=function(t){t?(e.model.selectedEntity=t.originalObject,e.model.selectedDescription=t.title):(e.model.selectedEntity=void 0,e.model.selectedDescription=void 0)}},controller:t,controllerAs:"autocomplete"}}function t(e,t,a){var i=this;i.fetchMatchingEntities=function(a,i){return t.call("auditModuleLoadAffectedEntityList/"+e.form.section()+"/"+a,"GET",[],{},i).then(function(e){for(var t=[],a=0;a<e.data.data.length;a++)t.push(e.data.data[a]);return t})}}angular.module("app.directives").directive("materializecssAuditTrailAffectedEntityAutoComplete",e),e.$inject=["localizedMessages","employeeService"],t.$inject=["$scope","webservice","employeeService"]}(),function(){"use strict";angular.module("app.directives").directive("closeModalOnTransition",["$rootScope",function(e){return{restrict:"A",link:function(t,a){var i=e.$on("$locationChangeStart",function(){$(a[0]).closeModal(),i()})}}}])}(),function(){"use strict";angular.module("app.directives").directive("closeModalOnClick",["$compile","$timeout",function(){return{restrict:"A",link:function(e,t,a){$(t[0]).on("click",function(){e.$eval(a.closeModalOnClick)===!0?$(t[0]).closest(".modal").closeModal():e.$eval(a.closeModalOnClick)===!1||e.$eval(a.closeModalOnClick)&&e.$eval(a.closeModalOnClick).$valid&&$(t[0]).closest(".modal").closeModal()})}}}])}(),function(){"use strict";function e(e){return{restrict:"A",link:function(t,a,i){function o(a,i){var o=!0,n=!0,l=!0;a?t.model.costCentre=a.originalObject:i&&t.form.requireSelection?(o=e.getLocalizedCustom("Invalid"),n=!1):t.form.required?l=!1:t.model.costCentre=void 0,t.$broadcast("schemaForm.error."+t.form.key,"required",l),t.$broadcast("schemaForm.error."+t.form.key,"invalid",o),t.$emit("invalidCostCenter",n)}t.onInputChange=function(e){o(void 0,e)},t.form&&void 0!==t.form.onChange?t.costCentreSelected=t.form.onChange:t.costCentreSelected=function(e){e?t.model.costCentre=e.originalObject:t.model.costCentre=void 0,o(e,this.searchStr)}},controller:t,controllerAs:"autocomplete"}}function t(e,t){var a=this;a.fetchMatchingCostCentres=function(e,a){var i={userInputString:e,offset:"0",limit:"50"};return t.call("costCentres","GET",[],i,a).then(function(e){return e.data.data.map(function(e){return e.name="- "+e.name,e})})}}angular.module("app.directives").directive("materializecssCostCentreAutoComplete",e),e.$inject=["localizedMessages"],t.$inject=["$scope","webservice"]}(),function(){"use strict";function e(e,t,a,i,o,n,l){return{restrict:"A",require:"^ngModel",link:function(n,l,r,s){function c(){$(l).parent().find("i.date-picker-open-icon").bind("click",function(e){e.stopPropagation(),L.open(),C=!0})}function d(e){if(!e.hasClass("initialized")&&!e.is(":disabled")){e.removeClass("browser-default").material_select(function(){e.siblings("input.select-dropdown").trigger("close")});var t=function(e){(e.clientX>=e.target.clientWidth||e.clientY>=e.target.clientHeight)&&e.preventDefault()},a=function(){if($(this).closest("div.select-wrapper").length){var e=$(this).closest("div.select-wrapper").find("ul.select-dropdown");e.find("li:nth-child("+parseInt(e.find("li").length/2+1)+")")[0].scrollIntoView()}};e.siblings("input.select-dropdown").on("click",a),e.siblings("input.select-dropdown").on("mousedown",t)}}function m(){n.form&&n.form.required&&(n.dateText||s.$modelValue||s.$viewValue?n.errorRequired=!1:n.errorRequired=!0)}function u(){n.dateText&&!p(n.dateText)&&(s.$setValidity("invalid",!1),n.errorMessageDateOfBirth=n.errorMessage,n.errorDateOfBirth=!0)}function p(t){var a=e.getDateComponents(t);return!(a.year&&a.month&&a.date)||f(a)}function f(e){var t=[3,5,8,10];return!(t.indexOf(e.month)!=-1&&e.date>30)&&(1!==e.month||!g(e)&&!h(e))}function g(e){return e.year%4==0&&e.date>29}function h(e){return e.year%4!=0&&e.date>28}function v(e){var t=L.$root.find("select.picker__select--year").val();void 0===t&&(t=L.$root.find("div.picker__year").html());var a=parseInt(L.$root.find("select.picker__select--month").val(),10)+1;a<10&&(a="0"+a),null!=e&&_.forEach(e,function(e,i){if(e.date.indexOf(t+" "+a)!==-1){var o="pickadate--"+e.type;4==e.duration&&(o+="-half"),$("[data-pick="+moment(e.date,"YYYY MM DD").toDate().getTime()+"]").addClass(o)}})}function y(e){if(e instanceof Date)L.set("select",e);else if(null!=e&&"Invalid Date"!=e&&""!=e){var t=new Date(moment.utc(e).format("l LT"));L.set("select",t)}}function b(e){return e.today=i.getLocalizedCustom("Today"),e.clear=i.getLocalizedCustom("Clear"),e.close=i.getLocalizedCustom("Close"),e.labelMonthNext=i.getLocalizedCustom("Next month"),e.labelMonthPrev=i.getLocalizedCustom("Previous month"),e.labelMonthSelect=i.getLocalizedCustom("Select a month"),e.labelYearSelect=i.getLocalizedCustom("Select a year"),e.monthsFull=i.getLocalizedCustom(["January","February","March","April","May","June","July","August","September","October","November","December"]),e.weekdaysFull=i.getLocalizedCustom(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]),e.monthsShort=i.getLocalizedCustom(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),e.weekdaysShort=i.getLocalizedCustom(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),e.showMonthsShort=void 0,e.showWeekdaysFull=void 0,e}n.maxDate=n.form?n.form.maximumDate:null;var C=!1,w=!0,S=e.getPickADateFormat(),D=i.getLocalizedCustom(["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]),T=i.getLocalizedCustom(["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]),x=i.getLocalizedCustom(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]);if(n.submitAttempted=!1,n.errorDateOfBirth=!1,n.errorRequired=!1,n.errorMessageRequired="Required",s.$parsers.unshift(function(t){return t?e.toStandardDate(L.get("select").obj):t}),l.bind("click",function(e){e.stopPropagation(),L.open(),C=!0}),"undefined"!=typeof n.form?n.form.readonly||c():c(),n.$on("schemaFormValidate",function(e,t){n.submitAttempted=!0,m(),n.dateForm.$$parentForm.$name==t&&n.$broadcast("schemaFormValidate","dateForm")}),n.textClicked=function(t){n.errorDateOfBirth=!1,s.$setValidity("invalid",!0);var a;w=!1,!n.dateText&&s.$modelValue&&(L.clear(),n.ngModel.$setViewValue(void 0),n.submitAttempted&&n.$broadcast("schemaFormValidate")),n.dateText&&(a=e.stringToStandardDate(n.dateText),n.form.maximumDate&&a>n.form.maximumDate&&(n.errorMessageDateOfBirth="Should be on or before today",n.errorDateOfBirth=!0)),m(),a instanceof Date&&"Invalid Date"!=a&&!n.errorDateOfBirth?(y(a),w=!0):u()},n.datePickerUpdated=function(t){void 0!=s.$modelValue?(n.dateText=e.toLocalizedDate(s.$modelValue),n.errorDateOfBirth=!1):(n.dateText=void 0,n.errorDateOfBirth=!1),m(),n.$broadcast("schemaFormValidate","dateForm")},"yyyy-mm-dd"==S){var F=/^(19|20)\d\d[-](0[1-9]|1[012])[-](0[1-9]|[12][0-9]|3[01])$/;n.errorMessage=i.getLocalizedCustom("Expected format")+": yyyy-mm-dd"}else if("dd-mm-yyyy"==S){var F=/^(0[1-9]|[12][0-9]|3[01])[-](0[1-9]|1[012])[-](19|20)\d\d$/;n.errorMessage=i.getLocalizedCustom("Expected format")+": dd-mm-yyyy"}else if("mm-dd-yyyy"==S){var F=/^(0[1-9]|1[012])[-](0[1-9]|[12][0-9]|3[01])[-](19|20)\d\d$/;n.errorMessage=i.getLocalizedCustom("Expected format")+": mm-dd-yyyy"}else if("yyyy-dd-mm"==S){var F=/^(19|20)\d\d[-](0[1-9]|[12][0-9]|3[01])[-](0[1-9]|1[012])$/;n.errorMessage=i.getLocalizedCustom("Expected format")+": yyyy-dd-mm"}else if("mm-yyyy-dd"==S){var F=/^(0[1-9]|1[012])[-](19|20)\d\d[-](0[1-9]|[12][0-9]|3[01])$/;n.errorMessage=i.getLocalizedCustom("Expected format")+": mm-yyyy-dd"}else if("dd-yyyy-mm"==S){var F=/^(0[1-9]|[12][0-9]|3[01])[-](19|20)\d\d[-](0[1-9]|1[012])$/;n.errorMessage=i.getLocalizedCustom("Expected format")+": dd-yyyy-mm"}else if("yyyy/mm/dd"==S){var F=/^(19|20)\d\d(\/)(0[1-9]|1[012])(\/)(0[1-9]|[12][0-9]|3[01])$/;n.errorMessage=i.getLocalizedCustom("Expected format")+": yyyy/mm/dd"}else if("yyyy mm dd"==S){var F=/^(19|20)\d\d[\s](0[1-9]|1[012])[\s](0[1-9]|[12][0-9]|3[01])$/;n.errorMessage=i.getLocalizedCustom("Expected format")+": yyyy mm dd"}else if("yyyy-mmm-dd"==S){var k="^(19|20)\\d\\d[-]("+x[0]+"|"+x[1]+"|"+x[2]+"|"+x[3]+"|"+x[4]+"|"+x[5]+"|"+x[6]+"|"+x[7]+"|"+x[8]+"|"+x[9]+"|"+x[10]+"|"+x[11]+")[-](0[1-9]|[12][0-9]|3[01])$",F=new RegExp(k);n.errorMessage=i.getLocalizedCustom("Expected format")+": yyyy-M-dd"}else if("dddd, dd-mmm-yyyy"==S){var k="^("+D[0]+"|"+D[1]+"|"+D[2]+"|"+D[3]+"|"+D[4]+"|"+D[5]+"|"+D[6]+"), \\d\\d-("+x[0]+"|"+x[1]+"|"+x[2]+"|"+x[3]+"|"+x[4]+"|"+x[5]+"|"+x[6]+"|"+x[7]+"|"+x[8]+"|"+x[9]+"|"+x[10]+"|"+x[11]+")-(19|20)\\d\\d$",F=new RegExp(k);n.errorMessage=i.getLocalizedCustom("Expected format")+": DD, dd-M-yyyy"}else if("ddd, dd mmm yyyy"==S){var k="^("+T[0]+"|"+T[1]+"|"+T[2]+"|"+T[3]+"|"+T[4]+"|"+T[5]+"|"+T[6]+"), \\d\\d ("+x[0]+"|"+x[1]+"|"+x[2]+"|"+x[3]+"|"+x[4]+"|"+x[5]+"|"+x[6]+"|"+x[7]+"|"+x[8]+"|"+x[9]+"|"+x[10]+"|"+x[11]+") (19|20)\\d\\d$",F=new RegExp(k);n.errorMessage=i.getLocalizedCustom("Expected format")+": D, dd M yyyy"}n.datePattern=F;var E=0,I=null,A={onOpen:function(){!C&&o&&o.isIE&&L.close(),this.$root.mouseup(function(e){var t=$(this).find(".select-dropdown");t.each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||$(this).siblings("input.select-dropdown").trigger("close")})}),d(this.$root.find(".picker__select--year")),d(this.$root.find(".picker__select--month")),E=0,$(l[0]).addClass("active_datepicker"),s.$modelValue?n.form?y(n.form.defaultDate):r.defaultDate?y(r.defaultDate):E++:E++,$(".picker__clear").css("display","block"),0!=A.clearButtonAvailable&&"false"!==r.clearButtonAvailable||$(".picker__clear").css("display","none")},onClose:function(){$(l[0]).removeClass("active_datepicker"),L.get("value")||n.$applyAsync(function(){n.dateText=""}),$(".datepicker").blur(),$(".picker").blur(),C=!1,$(l[0]).closest(".input-field").find("input[name='dateTextInput']").focus()},onSet:function(a){if(r.onSet){var i=t(r.onSet)(n);"function"==typeof i&&i(a)}E++,a.select&&E>1&&L.close(),n.form?n.form.defaultDate=s.$modelValue:r.defaultDate=s.$modelValue,$(".picker__clear").css("display","block"),0!=A.clearButtonAvailable&&"false"!==r.clearButtonAvailable||$(".picker__clear").css("display","none"),w&&(n.dateText=e.toLocalizedDate(s.$modelValue))},onRender:function(){var e=this.$root.find(".picker__select--year"),t=this.$root.find(".picker__select--month");d(e),d(t);var i=(e.val(),{filter:{year:e.val()}});r.employeeId&&(i.filter.employeeId=r.employeeId),a.getWeekends(i).then(function(e){I=e.data,v(I)})}};A=void 0!==n.form&&void 0!==n.form.schema&&"object"==typeof n.form.schema.datePickerConfig?angular.merge(A,n.form.schema.datePickerConfig):angular.merge(A,{selectMonths:!0,selectYears:r.selectYears?r.selectYears:40}),void 0===A.format&&(A.format=e.getPickADateFormat()),A=b(A);var M=$(l[0]).pickadate(A),L=M.pickadate("picker");n.$on("clearDatePickers",function(e){L.clear()}),n.$watch(s.$modelValue,function(e,t){s.$modelValue&&"Invalid Date"!=s.$modelValue&&n.form&&y(s.$modelValue)}),n.form?null!=n.form.defaultDate&&"Invalid Date"!=n.form.defaultDate&&(n.form.resetDefaultDate?n.form.resetDefaultDate.reset&&(n.form.defaultDate=new Date(moment.utc(n.form.defaultDate).format("l LT"))):n.form.defaultDate=new Date(moment.utc(n.form.defaultDate).format("l LT")),y(n.form.defaultDate)):r.defaultDate&&y(r.defaultDate),n.$watch(r.ngModel,function(e,t){s.$viewValue?$(l[0]).siblings("label").addClass("active"):$(l[0]).siblings("label").removeClass("active")}),n.$watch(r.ngDisabled,function(e,t){e?l.closest("div.input-field").find("label").addClass("disabled"):l.closest("div.input-field").find("label").removeClass("disabled")})}}}angular.module("app.directives").directive("materializecssDate",e),e.$inject=["dateService","$parse","offDaysService","localizedMessages","browser","$timeout","$rootScope"]}(),function(){"use strict";angular.module("app.directives").directive("dropdownButton",["$timeout",function(e){return{restrict:"CA",link:function(t,a,i){e(function(){a.hasClass("dropdown-button")&&a.dropdown({inDuration:300,outDuration:225,constrain_width:!1,hover:!1,belowOrigin:!1})})}}}])}(),function(){"use strict";function e(e,a){return{restrict:"A",link:function(t,a,i){function o(a,i){var o=!0,n=!0;a?(t.model.selectedEmployee=a.originalObject,t.model.employee_name=a.title):i&&t.form.requireSelection?o=e.getLocalizedCustom("Invalid"):t.form.required?n=!1:(t.model.selectedEmployee=void 0,t.model.employee_name=void 0),t.$broadcast("schemaForm.error."+t.form.key,"required",n),t.$broadcast("schemaForm.error."+t.form.key,"invalid",o)}t.onInputChange=function(e){o(void 0,e)},void 0!==t.form.onChange?t.employeeSelected=t.form.onChange:t.employeeSelected=function(e){e?(t.model.selectedEmployee=e.originalObject,t.model.employee_name=e.title):(t.model.selectedEmployee=void 0,t.model.employee_name=void 0),o(e,this.searchStr)}},controller:t,controllerAs:"autocomplete"}}function t(e,t,a){var i=this;i.fetchMatchingEmployees=function(i,o){var n,n={name:"userInputString",filter:{employee_name_or_id:i},fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId","page[offset]":"0","page[limit]":"50",sort:"fullName"};return"undefined"!=typeof e.form.permissionType&&(n.filter.permissionType=e.form.permissionType),"undefined"!=typeof e.form.includePast&&(n.filter.termination=2),e.form.includeSelf&&(n.includeSelf=!0),t.call("employees","GET",[],n,o).then(function(t){var i=[];if(void 0!==e.form.schema.idsToSkip&&e.form.schema.idsToSkip.length>0){console.error(t.data.data);for(var o=0;o<t.data.data.length;o++)e.form.schema.idsToSkip.indexOf(t.data.data[o].empNumber)===-1&&(t.data.data[o].fullName=a.getFullNameWithDeleted(t.data.data[o]),i.push(t.data.data[o]));return i}for(var o=0;o<t.data.data.length;o++)t.data.data[o].fullName=a.getFullNameWithDeleted(t.data.data[o]),i.push(t.data.data[o]);return i})}}angular.module("app.directives").directive("materializecssEmployeeAutoCompleteWithDeleted",e),e.$inject=["localizedMessages","employeeService"],t.$inject=["$scope","webservice","employeeService"]}(),function(){"use strict";function e(e,a){return{restrict:"A",link:function(t,a,i){function o(a,i){var o=!0,n=!0;a?(t.model[t.form.key]=a.originalObject,t.model.selectedEmployee=a.originalObject,t.model.employee_name=a.title):i&&t.form.requireSelection?(o=e.getLocalizedCustom("Invalid"),n=!0):t.form.required?n=!1:(t.model[t.form.key]=void 0,t.model.selectedEmployee=void 0,t.model.employee_name=void 0),t.form.setEmployeeNamePartialString&&(t.model.employee_name=i),t.$emit("schemaForm.error."+t.form.key,"invalid",o),t.$emit("schemaForm.error."+t.form.key,"tv4-302",n)}t.onInputChange=function(e){o(void 0,e)},void 0!==t.form.onChange?t.employeeSelected=t.form.onChange:t.employeeSelected=function(e){e?(t.model[t.form.key]=e.originalObject,t.model.selectedEmployee=e.originalObject,t.model.employee_name=e.title):(t.model[t.form.key]=void 0,t.model.selectedEmployee=void 0,t.model.employee_name=void 0),o(e,this.searchStr)}},controller:t,controllerAs:"autocomplete"}}function t(e,t,a){var i=this;e.form.employeeDataProvider?i.fetchMatchingEmployees=e.form.employeeDataProvider:i.fetchMatchingEmployees=function(i,o){var n={name:"userInputString",filter:{employee_name_or_id:i},fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId","page[offset]":"0","page[limit]":"50",sort:"fullName"};return"undefined"!=typeof e.form.permissionType&&(n.filter.permissionType=e.form.permissionType),"undefined"!=typeof e.form.includePast&&(n.filter.termination=2),"undefined"!=typeof e.form.has_work_email&&(n.filter.has_work_email=1),e.form.includeSelf&&(n.includeSelf=!0),e.form.includeSelf===!1&&(n.includeSelf=!1),t.call("employees","GET",[],n,o).then(function(t){var i=[];if(void 0!==e.form.schema.idsToSkip&&e.form.schema.idsToSkip.length>0){for(var o=0;o<t.data.data.length;o++)e.form.schema.idsToSkip.indexOf(t.data.data[o].empNumber)===-1&&(t.data.data[o].fullName=a.getFullName(t.data.data[o]),i.push(t.data.data[o]));return i}for(var o=0;o<t.data.data.length;o++)t.data.data[o].fullName=a.getFullName(t.data.data[o]),i.push(t.data.data[o]);return i})}}angular.module("app.directives").directive("materializecssEmployeeAutoComplete",e),e.$inject=["localizedMessages","employeeService"],t.$inject=["$scope","webservice","employeeService"]}(),function(){"use strict";function e(e,a,i){return{restrict:"A",require:"ngModel",transclude:!0,link:function(t,a,o,n){function l(i,o,n){e(function(){$(a[0]).closest("form").find("#"+t.form.previewOn.key).closest("div.cropArea")}),t.form.previewOn.imageToPreview=i,t.form.previewOn.croppedImage=n.base64;var l=0;t.$watch("form.previewOn.croppedImage",function(e,t){e!=t&&0==e.indexOf("data")&&(l++,l>1&&(n.base64=e.split(",")[1]))})}var r={};t.form&&"string"==typeof t.form.filename&&e(function(){a.closest(".file-field").find("input.file-path").val(t.form.filename)},200),void 0!==t.form.maxSize&&(n.$validators.fileSize=function(e,a){var i=e||a;angular.isArray(i)||(i=[i]);for(var o=i.length-1;o>=0;o--)if(i[o]&&i[o].filesize&&i[o].filesize>parseInt(t.form.maxSize,10))return!1;return!0}),void 0!==t.form.allowedFileTypes&&(n.$validators.fileType=function(e,a){var i=e||a;angular.isArray(i)||(i=[i]);for(var o=i.length-1;o>=0;o--)if(i[o]&&i[o].filetype&&t.form.allowedFileTypes.indexOf(i[o].filetype)===-1||i[o]&&!i[o].filetype&&i[o].filename)return!1;if(void 0!==t.form.allowedFileTypesExtensions)for(var o=i.length-1;o>=0;o--)if(i[o]&&i[o].filename){var n=i[o].filename.split(".").pop();if(t.form.allowedFileTypesExtensions.indexOf(n.toLowerCase())===-1)return!1}return!0}),a.closest("div.btn").click(function(){a.click()}),a.click(function(e){e.stopPropagation()}),n.$viewChangeListeners.push(function(){if(t.form.previewOn)if(n.$modelValue){var e=new Image;e.src="data:"+n.$modelValue.filetype+";base64,"+n.$modelValue.base64,e.onload=function(){l(e.src,e,n.$modelValue)}}else t.form.previewOn.imageToPreview=null,t.form.previewOn.croppedImage=null}),a.bind("change",function(e){if(a[0].files&&a[0].files[0]){var o=new FileReader;o.onload=function(e){var o={filename:a[0].files[0].name,filetype:a[0].files[0].type,filesize:a[0].files[0].size,base64:e.target.result.split(",")[1]};""===o.filetype&&(o.filetype=i.detectType(o.filename)),r.filename!=o.filename&&(r=o,t.ngModel.$setViewValue(o),void 0!==t.form.onFileChange&&t.form.onFileChange(o))},o.readAsDataURL(a[0].files[0])}else t.ngModel.$setViewValue("")})},controller:t,controllerAs:"fileController"}}function t(e,t){var a=this;a.getFileTypeDisplayString=function(){return angular.isDefined(e.form.allowedFileTypesDisplayName)&&void 0!=e.form.allowedFileTypesDisplayName&&""!=e.form.allowedFileTypesDisplayName?t.getLocalizedCustom("Accept only")+" "+e.form.allowedFileTypesDisplayName:""}}angular.module("app.directives").directive("materializecssFile",e),e.$inject=["$timeout","$rootScope","fileTypeService"],t.$inject=["$scope","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i){function o(e,a,i,o){
e.$eval(i.icons);t(function(){$(a).find("i.select-icon").click(function(){$(a).find("i.select-icon").removeClass("highlight"),$(this).addClass("highlight");var t=$(this).text();e.value=e.icons.reduce(function(e,a){return a.name==t?a.value:e},void 0),o.$setViewValue(e.value)})})}var n={restrict:"A",require:"ngModel",scope:{icons:"="},link:o};return n}angular.module("app.directives").directive("materializecssIconSelect",e),e.$inject=["$compile","$timeout","localizedMessages","browser"]}(),function(){"use strict";function e(e){return{restrict:"A",link:function(t,a,i){t.$watch(i.ngModel,function(t,o){e(function(){i.placeholder&&$("label[for='"+$(a[0]).attr("id")+"']").addClass("active"),t instanceof Array&&o instanceof Array&&t.length==o.length||(t?a.trigger("change"):void 0===a.attr("placeholder")&&(a.is(":focus")||a.trigger("blur")),a.trigger("autoresize"))})})}}}angular.module("app.directives").directive("materializecssInput",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e,a){return{restrict:"A",link:function(t,a,i){function o(a,i){var o=!0,n=!0;a?(t.model.selectedEmployee=a.originalObject,t.model.employee_name=a.title):i&&t.form.requireSelection?o=e.getLocalizedCustom("Invalid"):t.form.required?n=!1:(t.model.selectedEmployee=void 0,t.model.employee_name=void 0),t.$broadcast("schemaForm.error."+t.form.key,"required",n),t.$broadcast("schemaForm.error."+t.form.key,"invalid",o)}t.onInputChange=function(e){o(void 0,e)},void 0!==t.form.onChange?t.employeeSelected=t.form.onChange:t.employeeSelected=function(e){e?(t.model.selectedEmployee=e.originalObject,t.model.employee_name=e.title):(t.model.selectedEmployee=void 0,t.model.employee_name=void 0),o(e,this.searchStr)}},controller:t,controllerAs:"autocomplete"}}function t(e,t,a,i){function o(e){var t="";return e.firstName&&e.lastName&&(t=""!=e.middleName?e.firstName+" "+e.middleName+" "+e.lastName:e.firstName+" "+e.lastName,e.termination_id>0&&!e.deletedEmployee&&(t+=" ("+i.getLocalizedCustom("Terminated")+")"),e.deletedEmployee&&(t+=" ("+i.getLocalizedCustom("Deleted")+")")),t}var n=this;n.fetchMatchingEmployees=function(a,i){var n={name:"userInputString",filter:{employee_name_or_id:a,onlyDeletedOrTerminated:1,includeDeleted:1,termination:2},"page[offset]":"0","page[limit]":"50",sort:"fullName"};return"undefined"!=typeof e.form.permissionType&&(n.filter.permissionType=e.form.permissionType),"undefined"!=typeof e.form.includePast&&(n.filter.termination=2),e.form.includeSelf&&(n.includeSelf=!0),t.call("maintenanceEmployees","GET",[],n,i).then(function(t){var a=[];if(void 0!==e.form.schema.idsToSkip&&e.form.schema.idsToSkip.length>0){console.error(t.data.data);for(var i=0;i<t.data.data.length;i++)e.form.schema.idsToSkip.indexOf(t.data.data[i].empNumber)===-1&&(t.data.data[i].fullName=o(t.data.data[i]),a.push(t.data.data[i]));return a}for(var i=0;i<t.data.data.length;i++)t.data.data[i].fullName=o(t.data.data[i]),a.push(t.data.data[i]);return a})}}angular.module("app.directives").directive("materializecssMaintenanceEmployeeAutoCompleteOnlyDeletedAndTerminated",e),e.$inject=["localizedMessages","employeeService"],t.$inject=["$scope","webservice","employeeService","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r){return{restrict:"A",require:"ngModel",link:function(e,a,n,r){e.$parent.$watch(n.ngModel,function(e,i){t(function(){n.placeholder&&$("label[for='"+$(a[0]).attr("id")+"']").addClass("active"),e instanceof Array&&i instanceof Array&&e.length==i.length||(e?a.trigger("change"):void 0===a.attr("placeholder")&&(a.is(":focus")||a.trigger("blur")))})});var s=[];s.push(l.call("defaultAuthenticationSettings","GET",[])),o.all(s).then(function(a){e.passwordStrengthEnforced=a[0].data.data.enforcePasswordStrength,e.defaultScore=a[0].data.data.defaultRequiredPasswordStrength,e.passwordRequired=a[0].data.meta.passwordRequired,e.defaultScoreIndex=i.getPasswordStrengths().indexOf(e.defaultScore),e.form.strengthCheck&&(r.$asyncValidators["tv4-passwordStrength"]=function(a){var n=o.defer();return e.form.toggleSave(!1),e.passwordRequired||a?i.getPasswordStrengthData(a).then(function(t){var a=t.score?t.score:0;e.form.validationMessage.passwordStrength=i.getPasswordStrengthValidationMessage(t.validationMsg),e.passwordScore=a,e.form.toggleSave(!0),i.hasRequiredMinimumPasswordStrength(a,e.passwordStrengthEnforced,e.defaultScoreIndex)?n.resolve():n.reject()},function(){n.reject()}):t(function(){n.resolve(),e.form.toggleSave(!0)}),n.promise})})}}}angular.module("app.directives").directive("materializecssPassword",e),e.$inject=["dateService","$timeout","authenticationConfigurationService","passwordStrengthService","$q","ldapAuthenticationService","webservice","openIdProviderService"]}(),function(){"use strict";function e(e,t,a,i){function o(o,n,l){function r(e){o.$applyAsync(function(){var t=e.target,a=$(t).closest("div.select-wrapper").find("input.select-dropdown");a&&a.val()&&a.val(a.val().replace(/\u00A0/g,""))})}function s(){n.siblings(".caret").remove(),n.find("option").each(function(){"object:null"==angular.element(this).val()&&$(this).attr("disabled","disabled")}),o.$evalAsync(function(){c()})}function c(){i.isIE?n.each(function(){$(this).material_select();var e=$(this).siblings("input.select-dropdown"),t=$(this).siblings("ul.dropdown-content");e.off("blur"),$(document).click(function(){e.trigger("close")}),t.click(function(e){e.stopPropagation()}),t.find("li").click(function(t){e.trigger("close")})}):n.material_select(),"form"in o&&"removeIndentation"in o.form&&o.form.removeIndentation&&t(function(){$(n).trigger("change")})}"form"in o&&"removeIndentation"in o.form&&o.form.removeIndentation&&t(function(){$(n).change(function(e){r(e)})}),n.closest("div").bind("keydown",function(e){var t,a=n.closest("div").find("ul"),i=function(e,t){if(t){e.find("li.selected").removeClass("selected");var i=$(t);i.addClass("selected"),a.scrollTo(i)}};40==e.which&&a.find("li.selected").length&&(t=a.find("li.selected").next("li.disabled")[0],i(a,t)),38==e.which&&(t=a.find("li.selected").prev("li.disabled")[0],t&&i(a,t))}),o.$watch(function(){return n.closest("div.input-field").find("span.help-block").text()},function(e){setTimeout(function(){e?$(n).siblings("input.select-dropdown").addClass("ng-invalid"):$(n).siblings("input.select-dropdown").removeClass("ng-invalid")},100)}),"undefined"!=typeof o.form&&("undefined"==typeof o.form.emptyOption||o.form.emptyOption)&&(o.form.titleMap.length>0&&o.form.titleMap[0].name!="-- "+a.getLocalizedCustom("Select")+" --"||0==o.form.titleMap.length)&&("string"==typeof o.form.emptyOption?o.form.titleMap.length>0?o.form.titleMap[0].name!=a.getLocalizedCustom(o.form.emptyOption)&&o.form.titleMap.splice(0,0,{value:"",name:a.getLocalizedCustom(o.form.emptyOption)}):o.form.titleMap.splice(0,0,{value:"",name:a.getLocalizedCustom(o.form.emptyOption)}):o.form.titleMap.splice(0,0,{value:"",name:"-- "+a.getLocalizedCustom("Select")+" --"})),"undefined"!=typeof o.form&&o.form.classDirective&&(n.addClass(o.form.classDirective),o.form.classDirective=!1,o.form.emptyOption=!1,e(n)(o)),t(s),l.ngModel&&o.$watch(l.ngModel,s),"watch"in l&&o.$watch(function(){return n[0].innerHTML},function(e,a){e!==a&&t(s)})}var n={restrict:"A",link:o};return n}angular.module("app.directives").directive("materializecssSelect",e),e.$inject=["$compile","$timeout","localizedMessages","browser"]}(),function(){"use strict";function e(e,t){var a=this;"function"==typeof e.form["remote-api-handler"]?a.fetchMatchingEmployees=e.form["remote-api-handler"]:a.fetchMatchingEmployees=function(e,a){var i,i={name:"userInputString",filter:{employee_name_or_id:e,is_supervisor:1},fields:"empNumber,firstName,middleName,lastName,employeeId","page[offset]":"0","page[limit]":"10"};return t.call("employees","GET",[],i,a).then(function(e){return e.data.data})}}angular.module("app.directives").directive("materializecssSupervisorAutoComplete",function(){return{restrict:"A",link:function(e,t,a){void 0!==e.form.onChange?e.employeeSelected=e.form.onChange:e.employeeSelected=function(t){t?(e.model.selectedSupervisor=t.originalObject,e.model.supervisor_name=t.title):(e.model.selectedSupervisor=void 0,e.model.supervisor_name=void 0)}},controller:e,controllerAs:"autocomplete"}}),e.$inject=["$scope","webservice"]}(),function(){function e(e,t){return{restrict:"A",require:"^ngModel",link:function(a,i,o,n){a.form.markAsDirty&&n.$setDirty(),a.shiftType=a.form.workShiftType?a.form.workShiftType:null,a.leaveDurationStType=a.form.key?a.form.key:null,a.errorMessageTimeTextRequired="Required",a.errorMessage="","start_time"==a.shiftType&&(a.timeText=a.model.start_time),"end_time"==a.shiftType&&(a.timeText=a.model.end_time);var l={"default":"now",fromnow:0,twelvehour:!1,donetext:t.instant("OK"),cleartext:"Clear",canceltext:"Cancel",autoclose:!1,ampmclickable:!0,aftershow:function(){}};a.picker=$(i[0]).pickatime(l),a.form&&(a.shiftType||($(i[0]).val(a.form.defaultTime),a.timeText=a.form.defaultTime,"undefined"!=typeof a.ngModel&&(a.ngModel.$setViewValue(a.timeText),a.ngModel.$render()))),$(i[0]).parent().find("i.time-picker-open-icon").bind("click",function(e){if(!a.form.readOnly){for(var t=document.getElementsByClassName("timepickerText"),i=0;i<t.length;i++)t[i].classList.add("active");e.stopPropagation(),$(this).parent().find(".timepicker").click()}}),a.timePickerUpdated=function(){a.timeText=n.$modelValue},a.timeTextChanged=function(){a.timePattern=/^(?:[01]\d|2[0-3]):(?:[0-5]\d)$/,a.errorMessage="Expected format: HH:MM",a.$emit("timeTextChanged",a),void 0!=a.timeText&&5==a.timeText.length&&(a.ngModel.$setViewValue(a.timeText),a.ngModel.$render(),a.shiftType&&("start_time"==a.shiftType?a.model.start_time=a.timeText:a.model.end_time=a.timeText,a.$emit("workShiftChanged",{})),a.leaveDurationStType&&("partial_all_st_from"==a.leaveDurationStType&&(a.model.partial_all_st_from=a.timeText,a.model.partial_all_st_length=e.calculateShiftLength(a.model.partial_all_st_from,a.model.partial_all_st_to,a.model.start_date_lunch_from,a.model.start_date_lunch_end)),"partial_all_st_to"==a.leaveDurationStType&&(a.model.partial_all_st_to=a.timeText,a.model.partial_all_st_length=e.calculateShiftLength(a.model.partial_all_st_from,a.model.partial_all_st_to,a.model.start_date_lunch_from,a.model.start_date_lunch_end)),"partial_start_st_from"==a.leaveDurationStType&&(a.model.partial_start_st_from=a.timeText,a.model.partial_start_st_length=e.calculateShiftLength(a.model.partial_start_st_from,a.model.partial_start_st_to,a.model.start_date_lunch_from,a.model.start_date_lunch_end)),"partial_start_st_to"==a.leaveDurationStType&&(a.model.partial_start_st_to=a.timeText,a.model.partial_start_st_length=e.calculateShiftLength(a.model.partial_start_st_from,a.model.partial_start_st_to,a.model.start_date_lunch_from,a.model.start_date_lunch_end)),"partial_end_st_from"==a.leaveDurationStType&&(a.model.partial_end_st_from=a.timeText,a.model.partial_end_st_length=e.calculateShiftLength(a.model.partial_end_st_from,a.model.partial_end_st_to,a.model.end_date_lunch_from,a.model.end_date_lunch_end)),"partial_end_st_to"==a.leaveDurationStType&&(a.model.partial_end_st_to=a.timeText,a.model.partial_end_st_length=e.calculateShiftLength(a.model.partial_end_st_from,a.model.partial_end_st_to,a.model.end_date_lunch_from,a.model.end_date_lunch_end)),"duration_st_from"==a.leaveDurationStType&&(a.model.duration_st_from=a.timeText,a.model.duration_st_length=e.calculateShiftLength(a.model.duration_st_from,a.model.duration_st_to,a.model.start_date_lunch_from,a.model.start_date_lunch_end)),"duration_st_to"==a.leaveDurationStType&&(a.model.duration_st_to=a.timeText,a.model.duration_st_length=e.calculateShiftLength(a.model.duration_st_from,a.model.duration_st_to,a.model.start_date_lunch_from,a.model.start_date_lunch_end))))}}}}angular.module("app.directives").directive("materializecssTimepicker",e),e.$inject=["leaveApplicationService","$translate"]}(),function(){"use strict";angular.module("app.directives").directive("tooltipped",function(){return{restrict:"C",link:function(e,t,a){t.tooltip({delay:50,position:"left"})}}})}(),function(){"use strict";function e(e,t){var a=this;a.fetchMatchingUsers=function(e,a){var i={include:"Employee",filter:{userOrEmpNamePartial:e},"page[offset]":0,"page[limit]":10};return t.call("systemUsers","GET",[],i,a).then(function(e){for(var t=[],a=0;a<e.data.data.length;a++){var i=e.data.data[a],o=i.user_name;if(null!==i.emp_number){if(i.Employee.hasOwnProperty("purged_at")&&i.Employee.purged_at)continue;o+=" ("+i.Employee.firstName+" "+i.Employee.lastName+")"}i.title=o,t.push(i)}return t})}}angular.module("app.directives").directive("materializecssUsersAutoComplete",function(){return{restrict:"A",link:function(e,t,a){e.selectedUser=function(t){t?(e.model.selectedUser=t.originalObject,e.model.userName=t.title):e.model.selectedUser=null}},controller:e,controllerAs:"autocomplete"}}),e.$inject=["$scope","webservice"]}(),function(){"use strict";function e(e){return{restrict:"A",link:function(t,a,i){function o(a,i){var o=!0,n=!0,l=!0;a?t.model.selectedVacancy=a.originalObject:i&&t.form.requireSelection?(o=e.getLocalizedCustom("Invalid"),n=!1):t.form.required?l=!1:t.model.selectedVacancy=void 0,t.$broadcast("schemaForm.error."+t.form.key,"required",l)}t.onInputChange=function(e){o(void 0,e)},t.form&&void 0!==t.form.onChange?t.vacancySelected=t.form.onChange:t.vacancySelected=function(e){e?t.model.selectedVacancy=e.originalObject:t.model.selectedVacancy=void 0,o(e,this.searchStr)}},controller:t,controllerAs:"autocomplete"}}function t(e,t){var a=this;a.fetchMatchingVacancies=function(e,a){var i={userInputString:e,offset:"0",limit:"50"};return t.call("maintenanceVacancies","GET",[],i,a).then(function(e){return e.data.data.map(function(e){return e})})}}angular.module("app.directives").directive("materializecssVacancyAutoComplete",e),e.$inject=["localizedMessages"],t.$inject=["$scope","webservice"]}(),function(){"use strict";function e(e){var t={restrict:"A",require:"ngModel",scope:{maxDateIsValid:"=",maximumDate:"=",minDateIsValid:"=?",minimumDate:"=?"},link:function(t,a,i,o){t.$watch("maxDateIsValid",function(){if(o.$viewValue){var a=new Date(moment.utc(e.convertDateToString(e.stringToStandardDate(o.$viewValue))).format("LL")),i=t.maximumDate?new Date(moment.utc(t.maximumDate).format("LL")):null;o.$setValidity("dateRange",!i||a<=i)}else o.$setValidity("dateRange",!0)}),t.$watch("minDateIsValid",function(){if(o.$viewValue){var a=new Date(moment.utc(e.convertDateToString(e.stringToStandardDate(o.$viewValue))).format("LL")),i=t.minimumDate?new Date(moment.utc(t.minimumDate).format("LL")):null;o.$setValidity("dateRange",!i||a>=i)}else o.$setValidity("dateRange",!0)})}};return t}angular.module("app.directives").directive("minMaxDateValidator",e),e.$inject=["dateService"]}(),function(){"use strict";function e(e){return{restrict:"A",link:function(t,a,i){$(a[0]).on("click",function(t){var a=JSON.parse(i.params),o=e.params.filterParameters,n=JSON.stringify(a)!==JSON.stringify(o);e.go(i.state,{filterParameters:a,calledFromMyShortcuts:!0},{reload:n}),t.preventDefault()})}}}angular.module("app.directives").directive("myShortcut",e),e.$inject=["$state"]}(),function(){"use strict";function e(e,a){return{restrict:"E",templateUrl:"app/directives/nine-box-employee-list.html",scope:{modelKey:"=",modelFilter:"="},controller:t,controllerAs:"nineBoxEmployeeListCtrl",replace:!0,link:function(e,t,a,i){function o(t,a){e.nineBoxEmployeeListCtrl.setData(t,e.modelFilter)}e.$watch("modelKey",o,!0),e.$on("nineBoxModelKeyChange",function(t,a){var i=a[0];e.modelKey=i})}}}function t(e,t,a,i,o,n,l){function r(e,t){var a=$("div.nb-popover.nb-more-popover div.nb-body.nb-widget-content"),i=$(".nb-popover.nb-more-popover .nb-event-container");i.empty(),$('<div class="progress eventsPopoverProgress"><div class="indeterminate"></div></div>').appendTo(i),u.categoryId=e,u.filter=t,a.attr("page",1),u.lastParam.page=1,u.lastParam.noOfRecords=20,u.lastParam.filter=n.getFormattedParametersForSearch(u.filter),null!==u.categoryId&&o.call("nineBoxMatrix/category/"+u.categoryId+"/employees","GET",[],u.lastParam).then(function(e){var t=e.data.meta;u.eventTitle=t.categoryDisplayName;var n=e.data.data;$(".eventsPopoverProgress").remove(),c(n,i),i.addClass("show"),a.mCustomScrollbar({axis:"y",scrollInertia:75,theme:"ohrm",callbacks:{onTotalScroll:function(){if(!u.pendingEventFetch){a.attr("page")||a.attr("page",1);var e=a.attr("page");u.lastParam.page=++e,u.pendingEventFetch=!0,$('<div class="progress eventsPopoverProgress"><div class="indeterminate"></div></div>').appendTo(i),o.call("nineBoxMatrix/category/"+u.categoryId+"/employees","GET",[],u.lastParam).then(function(t){var o=t.data.data;o.length>0&&a.attr("page",e),$(".eventsPopoverProgress").remove(),c(o,i),u.pendingEventFetch=!1},function(){$(".eventsPopoverProgress").remove(),u.pendingEventFetch=!1})}}}})})}function s(e){return l("sanitizebracesforqtip")(l("sanitizehtml")(e))}function c(o,n){for(var r=0;r<o.length;r++){var s=o[r],c='<a class="nb-grid-event nb-h-event nb-event nb-start nb-end nb-draggable bn-resizable moreEvent"  style="border-color: '+s.backgroundColor+'"><div style="background-color: '+s.backgroundColor+'" class="eventState"></div><div class="nb-content"><div class="nb-image-section col s2 m2 l2"><div class="circle image-container"><img class="circle calendar-tooltip-photo small-avatar mCS_img_loaded"  src="'+a.baseUrl+"leave/viewPhoto/empNumber/"+s.empNumber+'/size/small"></div></div><div class="nb-title-section col s8 m8 l8"><span class="nb-title">'+l("sanitize")(s.empName)+'</span></div><div class="nb-description-section row col s2 m2 l2"><div class="nb-description-sub-section col s12 m12 l12"><span class="nb-icon"><i class="material-icons"><img  class="performance-icon" ng-src="images/performance/Performance-icon.svg"></i></span><span class="nb-description"">'+s.performanceRating+'</span></div><div class="nb-description-sub-section col s12 m12 l12"><span class="nb-icon"><i class="material-icons"><img  class="potential-icon" ng-src="images/performance/Potential-icon.svg"></i></span><span class="nb-description">'+s.potentialRating+'</span></div></div></div><div class="fc-resizer fc-end-resizer"></div></a>',m=$(c);d(s,t,a,m),m.appendTo(n),m.qtip(),i(m)(e)}}function d(e,t,a,i){var o="";null!==e.appraisalCycle&&(o='<span class="nineBox-qtip-appraisal-cycle-description">'+t.instant("Appraisal Cycle")+": "+s(e.appraisalCycle)+"</span>");var n='<div class="row event-description-holder valign-wrapper"><div class="col s2 m2 l2 image-container valign-wrapper" style="margin-top: -14px;"><span class="helper"></span><img class="circle nineBox-tooltip-photo" src="'+a.baseUrl+"leave/viewPhoto/empNumber/"+e.empNumber+'/size/small"></div><div class="col s6 m6 l6 description-container" style="margin-left: 5px;"><span class="nineBox-qtip-title">'+s(e.empName)+'</span><br><br><span class="nineBox-qtip-description">'+t.instant("Job Title")+'</span><span class="nineBox-qtip-description-value">: '+s(e.jobTitle)+'</span><br><span class="nineBox-qtip-description">'+t.instant("Sub Unit")+'</span><span class="nineBox-qtip-description-value">: '+s(e.subunit)+'</span><br><span class="nineBox-qtip-description">'+t.instant("Location")+'</span><span class="nineBox-qtip-description-value">: '+s(e.location)+'</span><br><br></div><div class="row col s4 m4 l4 description-container"><div class="row col s12 m12 l12 nineBox-qtip-description-rating-section" style="margin-bottom: 3px;"><div class="nb-description-sub-section rating-icons-section col s12 m12 l12" ><span><span class="nb-icon"><i class="material-icons"><img  class="performance-icon" ng-src="images/performance/Performance-icon.svg"></i></span><span class="nb-description">'+s(e.performanceRating)+'</span></span></div><div class="nb-description-sub-section col s12 m12 l12" style="padding: 0px; text-align: center"><span class="nineBox-qtip-description-rating">'+t.instant("Performance Rating")+'</span></div></div><div class="row col s12 m12 l12 nineBox-qtip-description-rating-section" style="margin-bottom: 3px;"><div class="nb-description-sub-section rating-icons-section col s12 m12 l12"><span><span class="nb-icon"><i class="material-icons"><img  class="potential-icon" ng-src="images/performance/Potential-icon.svg"></i></span><span class="nb-description">'+s(e.potentialRating)+'</span></span></div><div class="nb-description-sub-section col s12 m12 l12" style="padding: 0px; text-align: center"><span class="nineBox-qtip-description-rating">'+t.instant("Potential Rating")+'</span></div></div><div class="col s12 m12 l12 nineBox-qtip-description-appraisal-cycle-section" >'+o+"</div></div></div>";i.attr("qtip",n),i.attr("qtip-class","nineBox-qtip z-depth-2"),i.attr("qtip-my","right center"),i.attr("qtip-at","left center")}function m(){u.categoryId=null,$(".no-hover-change.matrix-cell").removeClass("active-cell"),e.$broadcast("nineBoxModelKeyChange",[u.categoryId])}var u=this;u.setData=r,u.closeEvent=m,u.eventTitle="",u.lastParam={}}angular.module("app.directives").directive("nineBoxEmployeeList",e),e.$inject=["$rootScope","$translate"],t.$inject=["$scope","$translate","LOGIN","$compile","webservice","NineBoxMatrixHelperService","$filter"]}(),function(){"use strict";function e(){return{restrict:"A",scope:{asyncAction:"&ohrmClickAndWait"},link:function(e,t){t.bind("click",function(){t.prop("disabled")||(t.prop("disabled",!0),e.$apply(function(){e.asyncAction()["finally"](function(){t.prop("disabled",!1)})}))})}}}angular.module("app.directives").directive("ohrmClickAndWait",e)}(),function(){"use strict";function e(e){return{restrict:"A",scope:{ohrmClickOutside:"&",uniqueName:"="},link:function(t,a,i){e.on("click."+t.uniqueName,function(e){a===e.target||a[0].contains(e.target)||t.$applyAsync(function(){t.$evalAsync(t.ohrmClickOutside)})}),t.$on("$destroy",function(){e.off("click."+t.uniqueName)})}}}angular.module("app.directives").directive("ohrmClickOutside",e),e.$inject=["$document"]}(),function(){"use strict";function e(){return{restrict:"AC",require:"ngModel",scope:{ohrmMakeElementNonPristine:"="},link:function(e,t,a,i){e.ohrmMakeElementNonPristine&&(i.$setTouched(),i.$setDirty())}}}angular.module("app.directives").directive("ohrmMakeElementNonPristine",e)}(),function(){"use strict";angular.module("app.directives").directive("ohrmIframeOnLoad",function(){return{restrict:"A",scope:{callback:"&ohrmIframeOnLoad"},link:function(e,t,a){t.on("load",function(t){t.state="load",e.callback({event:t})})}}})}(),function(){"use strict";function e(e){var t={restrict:"A",scope:{onClickClickAnother:"@"},link:function(t,a,i,o){t.onClickClickAnother&&a.bind("click",function(a){e(function(){angular.element(a.target).parent().find(t.onClickClickAnother).click()})})}};return t}angular.module("app.directives").directive("onClickClickAnother",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/directives/attachments.html",scope:{panelinfo:"=panelinfo",objs:"=objs",listData:"=listdata",extracontroller:"=extracontroller"},bindToController:!0,link:function(e,t,a){e.$watch(e.panelinfo,function(t,a){e.attachmentsCtrl.setData(t)})},controller:t,controllerAs:"attachmentsCtrl"}}function t(e,t,a,i,o,n,l,r){function s(e){o.showModal({templateUrl:"app/pim/attachment_modal.html",controller:"PimEditAttachmentController",controllerAs:"modal",inputs:{attachment:e,dataList:g.objs}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function c(a){var i=t.baseUrl+"pim/viewAttachment/empNumber/"+a.emp_number+"/attachId/"+a.attach_id;e.open(i)}function d(){if(g.listData.selected.length>0){var e=g.listData.selected.length;l.show(),a.call("employees/"+n.empNumber+"/employeeAttachments","DELETE",{data:g.listData.selected},{}).then(function(t){l.hide();var a="deleteSuccess";i.showLocalizedToast(a),g.total-=e,m(g.listData.selected)},function(e){l.hide(),r.success(e)})}}function m(e){for(var t=g.objs.length-1;t>=0;t--){var a=e.indexOf(g.objs[t].attach_id);a>-1&&(e.splice(a,1),g.objs.splice(t,1))}}function u(e){var t=e.obj;if(t.selected)g.listData.selected.push(t.attach_id);else{var a=g.listData.selected.indexOf(t.attach_id);a>-1&&g.listData.selected.splice(a,1)}}function p(e){g.listData.selected.length>0&&o.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&d()})})}function f(){var e={filename:"",description:"",screen:g.panelinfo.screen};o.showModal({templateUrl:"app/pim/attachment_modal.html",controller:"PimEditAttachmentController",controllerAs:"modal",inputs:{attachment:e,dataList:g.objs}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}var g=this;g.editAttachment=s,g.addAttachments=f,g.deleteAttachment=d,g.changeSelection=u,g.deleteSelection=p,g.downloadAttachment=c,g.setData=function(){}}angular.module("app.directives").directive("attachmentsPanel",e),t.$inject=["$window","LOGIN","webservice","localizedMessages","ModalService","$stateParams","loader","toast"]}(),function(){"use strict";function e(e){return{restrict:"A",link:function(t){$(document).on("click",function(a){e(function(){t.form.croppedImage&&"photo-preview-lable"!=a.target.id&&"canvas"!=a.target.localName&&(t.form.croppedResult=!0)})});var a="",i=!1,o=$("#photo-preview-lable");o.mousedown(function(){"{{form.for}}"!==o.attr("for")&&""===a&&(a=o.attr("for")),i=!1}).mousemove(function(){i=!0}).mouseup(function(){var e=i;i=!1,e?o.attr("for",""):o.attr("for",a)})}}}angular.module("app.directives").directive("oxdAddEmployeePhotoPreview",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/directives/oxd-alert-section.html",scope:{message:"=",icon:"=",type:"=",clickHandler:"&clickHandler",clickable:"="}}}angular.module("app.directives").directive("oxdAlertSection",e)}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h){function v(){y(),D(),x=u.fetch().then(function(e){T.comments=e.data})}function y(){T.schema={type:"object",title:"Attachment",properties:{file:{title:"Upload",type:"object"}},required:u.isRequired?["file"]:[]},T.form=[{type:"row",items:[{type:"file",htmlClass:"col-12",key:"file",maxSize:u.maxAttachmentSize,allowedFileTypes:u.attachmentFileTypes,validationMessage:{fileSize:o.getLocalizedCustom("Attachment size exceeded"),302:o.getLocalizedCustom("Required"),fileType:o.getLocalizedCustom("Invalid Attachment Type")}}]}],T.model={}}function b(e){s.$broadcast("schemaFormValidate"),void 0===T.model.file||T.submitInProgress||(T.submitInProgress=!0,T.attachmentsLocalCopy=T.attachments,T.attachments=null,x.then(function(){u.save(T.model).then(function(e){T.attachmentsLocalCopy.unshift(e),T.model.file=void 0,T.attachments=T.attachmentsLocalCopy,s.$broadcast("schemaFormRedraw"),o.showLocalizedToast("saveSuccess"),T.submitInProgress=!1},function(){T.attachments=T.attachmentsLocalCopy,o.errorToast("Failed to Save"),T.submitInProgress=!1})}))}function C(){s.$broadcast("schemaFormRedraw"),t(T.attachments)}function w(e){x.then(function(){var t={ids:[e]};u["delete"](t).then(function(t){_(e),o.showLocalizedToast("deleteSuccess")},function(){r.error("Deletion Failed")})})}function _(e){for(var t=T.attachments.length-1;t>=0;t--)T.attachments[t].id===e&&T.attachments.splice(t,1)}function S(e){if(T.readOnly)return!1;for(var t=T.attachments.length-1;t>=0;t--)if(T.attachments[t].id===e)return T.attachments[t].canDelete;return!1}function D(){var e,t=[{name:"name",lable:"",getter:"name",width:"80%","class":"break-word"},{name:"action",lable:"",getter:"id","class":"text-center",width:"20%",type:"oxd-action-button-panel",iconButtons:[{id:"delete-button",classes:"btn-list",text:"Delete",tooltip:{text:"Delete"},clickAction:function(e,t,a,i){w(a)},icon:"ohrm_delete",displayCondition:function(e,t){return S(e)}},{id:"download-button",classes:"btn-list",text:"Download",tooltip:{text:"Download"},clickAction:function(e,t,a,i){u.download(a)},icon:"ohrm_download_icon_oxd",displayCondition:function(e,t){return!0}}]}],a=null;T.permissions={read:!0},T.listData={name:"leaveBalance",selectable:!1,selected:[],idGetter:"id",listFields:t,extraTH:a,extraTD:e,showColumnsAnyway:!0,permission:T.permissions,listActions:{},unselectableIds:{},columnWidths:["80%","20%","33%"],pagination:!1,roundedRows:!1,listClass:"classic-table",showLoader:!0}}var T=this;T.clickEvent=p,T.onCancel=C,T.onSubmit=b,T.cancelButtonLabel="Cancel",T.submitButtonLabel="Save",T.readOnly=u.readOnly,T.isEdit=!1,T.attachments=f,T.attachmentsLocalCopy=T.attachments,T.disabled="disabled";var x=null;T.submitInProgress=!1,v()}angular.module("app.performance").controller("oxdAttachmentsModal",e),e.$inject=["$state","close","formHelper","webservice","localizedMessages","employeeService","loader","toast","$scope","$stateParams","$q","formValidationHelper","config","clickEvent","attachments","$rootScope","LOGIN"]}(),function(){"use strict";function e(e,t){return{restrict:"E",templateUrl:"app/directives/oxd-attachments.html",scope:{title:"=title",label:"=label",config:"=config"},link:function(e,a){function i(){return e.config.fetch().then(function(t){return e.attachments=t.data,t.data})}var o=i();e.attachmentButtonClicked=function(a){o.then(function(){t.showModal("app/directives/oxd-attachments-modal.html","oxdAttachmentsModal","modal",{config:e.config,clickEvent:a,attachments:e.attachments}).then(function(t){t?e.attachments=t:o=i()})})}}}}angular.module("app.directives").directive("oxdAttachments",e),e.$inject=["$translate","modalHelperService"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/directives/oxd-button-loader.html",link:function(e,t,a,i){}}}angular.module("app.directives").directive("oxdButtonLoader",e),e.$inject=[]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/directives/oxd-button-panel.html",scope:{data:"=",panelId:"=",obj:"="},link:function(e){}}}angular.module("app.directives").directive("oxdButtonPanel",e),e.$inject=[]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v){function y(){b(),x=u.fetch().then(function(e){T.comments=f=e.data,T.ownerData=g=e.meta.ownerData})}function b(){T.model={comment:""},T.schema={type:"object",title:"Add Comment",name:"add_comment",properties:{comment:{title:"Comment",type:"string",maxLength:u.commentSize}}},T.form=[{type:"row",items:[{type:"textarea",htmlClass:"col-12",key:"comment",validationMessage:{302:o.getLocalizedCustom("Required"),201:m.textLengthExceedValidation.message(u.commentSize)}}]}]}function C(e){T.model.comment&&T.model.comment.length>0&&!T.submitInProgress&&(T.submitInProgress=!0,x.then(function(){u.save(T.model).then(function(e){T.comments.unshift(e),o.showLocalizedToast("saveSuccess"),T.model.comment="",s.$broadcast("schemaFormRedraw"),T.submitInProgress=!1},function(){o.showLocalizedToast("saveFailure"),T.submitInProgress=!1})}))}function w(){s.$broadcast("schemaFormRedraw"),t(T.comments)}function _(e){x.then(function(){var t={ids:[e]};u["delete"](t).then(function(t){S(e),o.showLocalizedToast("deleteSuccess")},function(){r.error("Deletion Failed")})})}function S(e){for(var t=T.comments.length-1;t>=0;t--)T.comments[t].id===e&&T.comments.splice(t,1)}function D(e){if(e){var t=moment(e,"YYYY-MM-DD HH:mm:ss"),a=e.slice(0,10),i=t.format("hh:mm A");return v.toLocalizedDate(a)+" - "+i}return e}var T=this;T.clickEvent=p,T.dataLoaded=!1,T.onCancel=w,T.localizeDateAndTime=D,T.onSubmit=C,T.deleteComment=_,T.cancelButtonLabel="Cancel",T.submitButtonLabel="Save",T.readOnly=u.readOnly,T.title=u.title,T.comments=f,T.ownerData=g;var x=null;T.submitInProgress=!1,y()}angular.module("app.performance").controller("OxdCommentList",e),e.$inject=["$state","close","formHelper","webservice","localizedMessages","employeeService","loader","toast","$scope","$stateParams","$q","formValidationHelper","config","clickEvent","comments","ownerData","goalService","dateService"];
}(),function(){"use strict";function e(e,t){return{restrict:"E",templateUrl:"app/directives/oxd-comments.html",scope:{title:"=title",label:"=label",goalId:"=goalId",config:"=config"},link:function(e,a){function i(){return e.config.fetch().then(function(t){return e.comments=t.data,e.ownerData=t.meta.ownerData,t.data})}var o=i();e.commentButtonClicked=function(a){o.then(function(){t.showModal("app/directives/oxd-comment-list.html","OxdCommentList","modal",{config:e.config,clickEvent:a,comments:e.comments,ownerData:e.ownerData}).then(function(t){t?e.comments=t:o=i()})})}}}}angular.module("app.directives").directive("oxdComments",e),e.$inject=["$translate","modalHelperService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l){return{restrict:"A",require:"^ngModel",link:function(o,n,l,r){function s(){var e=$(n).parent().find("button.date-picker-button");e.bind("click",function(e){e.stopPropagation(),$(".bootstrap-select.show > select").selectpicker("toggle"),$(document).trigger("ohrm.oxd.date.picker.open"),b.open(),C=!0})}function c(e){if(!e.hasClass("initialized")&&!e.is(":disabled")){e.addClass("selectpicker").attr("data-display","static");var t={style:"",size:10,dropupAuto:!1};e.removeClass("browser-default").selectpicker(t).addClass("initialized"),e.siblings("button.dropdown-toggle").bootstrapDropdown()}}function d(){o.form&&o.form.required&&(o.dateText||r.$modelValue||r.$viewValue?o.errorRequired=!1:o.errorRequired=!0)}function m(){o.dateText&&!u(o.dateText)&&(r.$setValidity("invalid",!1),o.errorMessageDate=i.getLocalizedCustom("Invalid Date"),o.errorDate=!0)}function u(t){var a=e.getDateComponents(t);return!(a.year&&a.month&&a.date)||p(a)}function p(e){var t=[3,5,8,10];return!(e.date>31||t.indexOf(e.month)!==-1&&e.date>30)&&(1!==e.month||!f(e)&&!g(e))}function f(e){return e.year%4==0&&e.date>29}function g(e){return e.year%4!=0&&e.date>28}function h(e){var t=b.$root.find("select.picker__select--year").val();void 0===t&&(t=b.$root.find("div.picker__year").html());var a=parseInt(b.$root.find("select.picker__select--month").val(),10)+1;if(a<10&&(a="0"+a),null!=e){_.forEach(e,function(e,i){if(e.date.indexOf(t+" "+a)!==-1){var o="pickadate--"+e.type;4==e.duration&&(o+="-half"),$("[data-pick="+moment(e.date,"YYYY MM DD").toDate().getTime()+"]").addClass(o).parent("td").addClass(o)}});for(var i=b.$root.find("table.picker__table"),o=1;o<=7;o++){var n=i.find("tr:first-child > td:nth-child("+o+")"),l=i.find("tr:nth-child(2) > td:nth-child("+o+")"),r=i.find("tr:last-child > td:nth-child("+o+")"),s=i.find("tr:nth-last-child(2) > td:nth-child("+o+")"),c=i.find("tr:nth-last-child(3) > td:nth-child("+o+")");n.find("div").hasClass("picker__day--outfocus")&&l.hasClass("pickadate--weekend")&&l.addClass("pickadate--firstweekendday"),r.find("div").hasClass("picker__day--outfocus")&&(s.hasClass("pickadate--weekend")?s.addClass("pickadate--lastweekendday"):s.find("div").hasClass("picker__day--outfocus")&&c.hasClass("pickadate--weekend")&&c.addClass("pickadate--lastweekendday"))}}}function v(e){if(e instanceof Date)b.set("select",e);else if(null!=e&&"Invalid Date"!==e&&""!==e){var t=new Date(moment.utc(e).format("l LT"));b.set("select",t)}}function y(e){return e.today=i.getLocalizedCustom("Today"),e.clear=i.getLocalizedCustom("Clear"),e.close=i.getLocalizedCustom("Close"),e.labelMonthNext=i.getLocalizedCustom("Next month"),e.labelMonthPrev=i.getLocalizedCustom("Previous month"),e.labelMonthSelect=i.getLocalizedCustom("Select a month"),e.labelYearSelect=i.getLocalizedCustom("Select a year"),e.monthsFull=i.getLocalizedCustom(["January","February","March","April","May","June","July","August","September","October","November","December"]),e.weekdaysFull=i.getLocalizedCustom(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]),e.monthsShort=i.getLocalizedCustom(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),e.weekdaysShort=i.getLocalizedCustom(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),e.showMonthsShort=void 0,e.showWeekdaysFull=void 0,e}o.maxDate=o.form?o.form.maximumDate:null,o.minDate=o.form?o.form.minimumDate:null;var b=null,C=!1,w=!0,S=e.getPickADateFormat(),D=i.getLocalizedCustom(["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]),T=i.getLocalizedCustom(["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]),x=i.getLocalizedCustom(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]);o.submitAttempted=!1,o.errorDate=!1,o.errorMaxDate=!1,o.errorMinDate=!1,o.errorRequired=!1,o.errorMessageRequired="Required",r.$parsers.unshift(function(t){return t?e.toStandardDate(b.get("select").obj):t}),n.bind("click",function(e){e.stopPropagation(),$(document).trigger("ohrm.oxd.date.picker.open"),b.open(),C=!0}),"undefined"!=typeof o.form?o.form.readonly||s():s(),$("div.picker__box").bind("keydown",function(e){38!=e.which&&40!=e.which&&9!=e.which||$("ul.dropdown-menu.show").find("li.active").length&&$("ul.dropdown-menu.show").find("li.active").get(0).scrollIntoView()}),o.$on("schemaFormValidate",function(e,t){o.submitAttempted=!0,d(),"object"==typeof o.dateForm&&o.dateForm.$$parentForm.$name===t&&o.$broadcast("schemaFormValidate","dateForm")}),o.textClicked=function(t){o.errorDate=!1,o.errorMaxDate=!1,o.errorMinDate=!1,r.$setValidity("invalid",!0);var a,n;if(w=!1,!o.dateText&&r.$modelValue&&(b.clear(),o.ngModel&&o.ngModel.$setViewValue(void 0),o.submitAttempted&&o.$broadcast("schemaFormValidate")),o.dateText&&(a=new Date(moment.utc(e.convertDateToString(e.stringToStandardDate(o.dateText))).format("LL")),n=new Date(moment.utc(new Date).format("LL")),"undefined"!=typeof o.form)){var l=o.form.maximumDate?new Date(moment.utc(o.form.maximumDate).format("LL")):null,s=o.form.minimumDate?new Date(moment.utc(o.form.minimumDate).format("LL")):null;l&&a>l&&(o.errorMessageDate=n>l||n<l?i.getLocalizedCustomWithVariables("Should be on or before {{date}}",{date:e.toLocalizedDate(e.convertDateToString(l))}):i.getLocalizedCustom("Should be on or before today"),o.errorMaxDate=!0),s&&a<s&&(o.errorMessageDate=n>s||n<s?i.getLocalizedCustomWithVariables("Should be on or after {{date}}",{date:e.toLocalizedDate(e.convertDateToString(s))}):i.getLocalizedCustom("Should be on or after today"),o.errorMinDate=!0)}d(),a instanceof Date&&!o.errorDate&&!o.errorMaxDate&&!o.errorMinDate?(v(a),w=!0):o.datePattern.test(o.dateText)&&m()},o.datePickerUpdated=function(t){o.dateText=void 0!=r.$modelValue?e.toLocalizedDate(r.$modelValue):void 0,o.errorDate=!1,o.errorMaxDate=!1,o.errorMinDate=!1,d(),o.$broadcast("schemaFormValidate","dateForm")};var F,k,E=!1;"yyyy-mm-dd"===S?(F=/^(19|20)\d\d[-](0[1-9]|1[012])[-](0[1-9]|[12][0-9]|3[01])$/,o.errorMessage=i.getLocalizedCustom("Expected format")+": yyyy-mm-dd"):"dd-mm-yyyy"===S?(F=/^(0[1-9]|[12][0-9]|3[01])[-](0[1-9]|1[012])[-](19|20)\d\d$/,o.errorMessage=i.getLocalizedCustom("Expected format")+": dd-mm-yyyy"):"mm-dd-yyyy"===S?(F=/^(0[1-9]|1[012])[-](0[1-9]|[12][0-9]|3[01])[-](19|20)\d\d$/,o.errorMessage=i.getLocalizedCustom("Expected format")+": mm-dd-yyyy"):"yyyy-dd-mm"===S?(F=/^(19|20)\d\d[-](0[1-9]|[12][0-9]|3[01])[-](0[1-9]|1[012])$/,o.errorMessage=i.getLocalizedCustom("Expected format")+": yyyy-dd-mm"):"mm-yyyy-dd"===S?(F=/^(0[1-9]|1[012])[-](19|20)\d\d[-](0[1-9]|[12][0-9]|3[01])$/,o.errorMessage=i.getLocalizedCustom("Expected format")+": mm-yyyy-dd"):"dd-yyyy-mm"===S?(F=/^(0[1-9]|[12][0-9]|3[01])[-](19|20)\d\d[-](0[1-9]|1[012])$/,o.errorMessage=i.getLocalizedCustom("Expected format")+": dd-yyyy-mm"):"yyyy/mm/dd"===S?(F=/^(19|20)\d\d(\/)(0[1-9]|1[012])(\/)(0[1-9]|[12][0-9]|3[01])$/,o.errorMessage=i.getLocalizedCustom("Expected format")+": yyyy/mm/dd"):"yyyy mm dd"===S?(F=/^(19|20)\d\d[\s](0[1-9]|1[012])[\s](0[1-9]|[12][0-9]|3[01])$/,o.errorMessage=i.getLocalizedCustom("Expected format")+": yyyy mm dd"):"yyyy-mmm-dd"===S?(k="^(19|20)\\d\\d[-]("+x[0]+"|"+x[1]+"|"+x[2]+"|"+x[3]+"|"+x[4]+"|"+x[5]+"|"+x[6]+"|"+x[7]+"|"+x[8]+"|"+x[9]+"|"+x[10]+"|"+x[11]+")[-](0[1-9]|[12][0-9]|3[01])$",F=new RegExp(k),o.errorMessage=i.getLocalizedCustom("Expected format")+": yyyy-M-dd"):"dddd, dd-mmm-yyyy"===S?(E=!0,k="^("+D[0]+"|"+D[1]+"|"+D[2]+"|"+D[3]+"|"+D[4]+"|"+D[5]+"|"+D[6]+"), \\d\\d-("+x[0]+"|"+x[1]+"|"+x[2]+"|"+x[3]+"|"+x[4]+"|"+x[5]+"|"+x[6]+"|"+x[7]+"|"+x[8]+"|"+x[9]+"|"+x[10]+"|"+x[11]+")-(19|20)\\d\\d$",F=new RegExp(k),o.errorMessage=i.getLocalizedCustom("Expected format")+": DD, dd-M-yyyy"):"ddd, dd mmm yyyy"===S&&(E=!0,k="^("+T[0]+"|"+T[1]+"|"+T[2]+"|"+T[3]+"|"+T[4]+"|"+T[5]+"|"+T[6]+"), \\d\\d ("+x[0]+"|"+x[1]+"|"+x[2]+"|"+x[3]+"|"+x[4]+"|"+x[5]+"|"+x[6]+"|"+x[7]+"|"+x[8]+"|"+x[9]+"|"+x[10]+"|"+x[11]+") (19|20)\\d\\d$",F=new RegExp(k),o.errorMessage=i.getLocalizedCustom("Expected format")+": D, dd M yyyy"),o.datePattern=F,o.longDateFormat=E;var I=0,A=null,M={onOpen:function(){var e=this.$root.find(".picker__select--year"),t=this.$root.find(".picker__select--month");c(e),c(t);var a=this.$root;this.$root.mouseup(function(e){var t=a.find("div.dropdown.bootstrap-select.picker__select--month"),i=t.find("div.dropdown-menu"),o=a.find("div.dropdown.bootstrap-select.picker__select--year"),n=o.find("div.dropdown-menu");e.target===t.get(0)||t.get(0).contains(e.target)||(t.removeClass("show"),i.removeClass("show")),e.target===o.get(0)||o.get(0).contains(e.target)||(o.removeClass("show"),n.removeClass("show"))}),I=0;var i=$(n[0]).closest(".form-date").find("input[name='dateTextInput']");i.addClass("focus");var s=i.get(0).getBoundingClientRect(),d=93,m=s.top-d,u=s.top,p=window.innerHeight-s.bottom,f=this.$root.find(".picker__frame"),g=369;f.removeClass("date-picker-offset-top-nav"),u>g&&p<g?(f.addClass("popup"),m<g&&f.addClass("date-picker-offset-top-nav")):f.removeClass("popup"),r.$modelValue?o.form?v(o.form.defaultDate):l.defaultDate?v(l.defaultDate):I++:I++,$(".picker__clear").css("display","block"),0!=M.clearButtonAvailable&&"false"!==l.clearButtonAvailable||$(".picker__clear").css("display","none")},onClose:function(){var e=$(n[0]).closest(".form-date").find("input[name='dateTextInput']");e.removeClass("focus"),b.get("value")||o.$applyAsync(function(){o.dateText=""}),C=!1,e.focus()},onSet:function(a){if(l.onSet){var i=t(l.onSet)(o);"function"==typeof i&&i(a)}I++,a.select&&I>1&&b.close(!0),o.form?o.form.defaultDate=r.$modelValue:l.defaultDate=r.$modelValue,$(".picker__clear").css("display","block"),0!=M.clearButtonAvailable&&"false"!==l.clearButtonAvailable||$(".picker__clear").css("display","none"),w&&(o.dateText=e.toLocalizedDate(r.$modelValue))},onRender:function(){var e=this.$root.find(".picker__frame"),t=this.$root.find(".picker__table > tbody > tr:last-child > td:first-child > div");t.hasClass("picker__day--outfocus")?e.removeClass("long-month"):e.addClass("long-month");var i=this.$root.find(".picker__select--year"),o=this.$root.find(".picker__select--month");c(i),c(o);var n=(i.val(),{filter:{year:i.val()}});l.employeeId&&(n.filter.employeeId=l.employeeId),a.getWeekends(n).then(function(e){A=e.data,h(A)})}};M.container=$(n).closest(".input-group.form-date"),M=void 0!==o.form&&void 0!==o.form.schema&&"object"==typeof o.form.schema.datePickerConfig?angular.merge(M,o.form.schema.datePickerConfig):angular.merge(M,{selectMonths:!0,selectYears:l.selectYears?l.selectYears:40}),void 0===M.format&&(M.format=e.getPickADateFormat()),M=y(M);var L=$(n[0]).pickadate(M);b=L.pickadate("picker"),o.$on("clearDatePickers",function(e){b.clear()}),o.$watch(r.$modelValue,function(e,t){r.$modelValue&&"Invalid Date"!==r.$modelValue&&o.form&&v(r.$modelValue)}),o.form?null!=o.form.defaultDate&&"Invalid Date"!==o.form.defaultDate&&(o.form.resetDefaultDate?o.form.resetDefaultDate.reset&&(o.form.defaultDate=new Date(moment.utc(o.form.defaultDate).format("l LT"))):o.form.defaultDate=new Date(moment.utc(o.form.defaultDate).format("l LT")),v(o.form.defaultDate)):l.defaultDate&&v(l.defaultDate),o.$watch(l.ngModel,function(e,t){r.$viewValue?$(n[0]).siblings("label").addClass("active"):$(n[0]).siblings("label").removeClass("active")}),o.$watch(l.ngDisabled,function(e,t){e?n.closest("div.input-field").find("label").addClass("disabled"):n.closest("div.input-field").find("label").removeClass("disabled")})}}}angular.module("app.directives").directive("oxdDate",e),e.$inject=["dateService","$parse","offDaysService","localizedMessages","browser","$timeout","$rootScope"]}(),function(){"use strict";function e(e,t){function a(a){a.validation={margin_left:!0,margin_right:!0,margin_top:!0,margin_bottom:!0};var i=!0,o=function(o){return function(n){a.validation[o]=e.numericMaxTwoDecimalPlaces.validator(n),i=a.validation.margin_left&&a.validation.margin_right&&a.validation.margin_top&&a.validation.margin_bottom,t(function(){a.$emit("schemaForm.error.document_margin","number",i)})}};a.$watch("ngModel.margin_left",o("margin_left")),a.$watch("ngModel.margin_top",o("margin_top")),a.$watch("ngModel.margin_right",o("margin_right")),a.$watch("ngModel.margin_bottom",o("margin_bottom"))}var i={restrict:"E",require:"^ngModel",scope:{ngModel:"=",usedForm:"="},templateUrl:"app/directives/formDecorators/oxd/document-margin-selector.html",link:a};return i}angular.module("app.directives").directive("oxdDocumentMarginSelector",e),e.$inject=["formValidationHelper","$timeout"]}(),function(){"use strict";function e(e,t){function a(a){function i(e){return e.length<=a.usedForm.maxLength}var o=!0,n=!0,l=!0,r=!0,s=!0,c=0,d=0,m=0,u=document.getElementById("first-name-box"),p=document.getElementById("middle-name-box"),f=document.getElementById("last-name-box");$("#modal-save-button").on("click",function(){""!=a.ngModel.firstName&&""!=a.ngModel.lastName||(""==a.ngModel.firstName&&$(u).addClass("ng-invalid ng-dirty"),""==a.ngModel.lastName&&$(f).addClass("ng-invalid ng-dirty"),a.$emit("schemaForm.error.employeeFullName","tv4-302",!1),m++)}),a.$watch("ngModel",function(g,h){return _.isEqual(g.firstName,h.firstName)||c++,_.isEqual(g.lastName,h.lastName)||d++,r=e.required.validator(g.firstName),s=e.required.validator(g.lastName),o=i(g.firstName),n=i(g.middleName),l=i(g.lastName),t(function(){$(u).removeClass("ng-invalid ng-dirty"),$(p).removeClass("ng-invalid ng-dirty"),$(f).removeClass("ng-invalid ng-dirty"),a.$emit("schemaForm.error.employeeFullName","tv4-201",!0)}),r&&s&&t(function(){$(u).removeClass("ng-invalid ng-dirty"),$(f).removeClass("ng-invalid ng-dirty"),a.$emit("schemaForm.error.employeeFullName","tv4-302",!0)}),m>0&&t(function(){c>0&&!s?($(f).addClass("ng-invalid ng-dirty"),a.$emit("schemaForm.error.employeeFullName","tv4-302",!1)):d>0&&!r&&($(u).addClass("ng-invalid ng-dirty"),a.$emit("schemaForm.error.employeeFullName","tv4-302",!1)),n||r||($(u).addClass("ng-invalid ng-dirty"),a.$emit("schemaForm.error.employeeFullName","tv4-201",!0),a.$emit("schemaForm.error.employeeFullName","tv4-302",!1)),n||s||($(f).addClass("ng-invalid ng-dirty"),a.$emit("schemaForm.error.employeeFullName","tv4-201",!0),a.$emit("schemaForm.error.employeeFullName","tv4-302",!1)),o||a.$emit("schemaForm.error.employeeFullName","tv4-201",!1),l||a.$emit("schemaForm.error.employeeFullName","tv4-201",!1)}),_.isEqual(g,h)||r&&s?void(_.isEqual(g,h)||o&&n&&l||t(function(){o?$(u).removeClass("ng-invalid ng-dirty"):$(u).addClass("ng-invalid ng-dirty"),n?$(p).removeClass("ng-invalid ng-dirty"):$(p).addClass("ng-invalid ng-dirty"),l?$(f).removeClass("ng-invalid ng-dirty"):$(f).addClass("ng-invalid ng-dirty"),a.$emit("schemaForm.error.employeeFullName","tv4-201",!1)})):void t(function(){!r&&c>0||!o?($(u).addClass("ng-invalid ng-dirty"),r?o||a.$emit("schemaForm.error.employeeFullName","tv4-201",!1):a.$emit("schemaForm.error.employeeFullName","tv4-302",!1),s||0!==d||a.$emit("schemaForm.error.employeeFullName","tv4-302",!0)):c>0&&$(u).removeClass("ng-invalid ng-dirty"),!s&&d>0||!l?($(f).addClass("ng-invalid ng-dirty"),s?l||a.$emit("schemaForm.error.employeeFullName","tv4-201",!1):a.$emit("schemaForm.error.employeeFullName","tv4-302",!1),r||0!==c||a.$emit("schemaForm.error.employeeFullName","tv4-302",!0)):d>0&&$(f).removeClass("ng-invalid ng-dirty"),n?(!s&&d>0&&($(f).addClass("ng-invalid ng-dirty"),a.$emit("schemaForm.error.employeeFullName","tv4-302",!1)),!r&&c>0&&($(u).addClass("ng-invalid ng-dirty"),a.$emit("schemaForm.error.employeeFullName","tv4-302",!1)),$(p).removeClass("ng-invalid ng-dirty")):(!s&&d>0?($(f).addClass("ng-invalid ng-dirty"),a.$emit("schemaForm.error.employeeFullName","tv4-302",!1)):s&&!r&&0===c&&a.$emit("schemaForm.error.employeeFullName","tv4-302",!0),!r&&c>0?($(u).addClass("ng-invalid ng-dirty"),a.$emit("schemaForm.error.employeeFullName","tv4-302",!1)):r&&!s&&0===d&&a.$emit("schemaForm.error.employeeFullName","tv4-302",!0),$(p).addClass("ng-invalid ng-dirty"),a.$emit("schemaForm.error.employeeFullName","tv4-201",!1))})},!0)}var i={restrict:"E",scope:{ngModel:"=",usedForm:"="},templateUrl:"app/directives/formDecorators/oxd/employee-name-input.html",link:a};return i}angular.module("app.directives").directive("oxdEmployeeNameInput",e),e.$inject=["formValidationHelper","$timeout"]}(),function(){"use strict";function e(e,a,i){return{restrict:"A",require:"ngModel",transclude:!0,link:function(t,a,o,n){function l(i,o,n){e(function(){$(a[0]).closest("form").find("#"+t.form.previewOn.key).closest("div.cropArea");$(a).prop("value",null)}),t.form.previewOn.imageToPreview=i,t.form.previewOn.croppedImage=n.base64,t.form.previewOn.croppedResult=!1;var l=0;t.$watch("form.previewOn.croppedImage",function(e,t){e!=t&&0==e.indexOf("data")&&(l++,l>1&&(n.base64=e.split(",")[1]))})}var r={};t.form&&"string"==typeof t.form.filename&&e(function(){a.closest(".file-field").find("input.file-path").val(t.form.filename)},200),void 0!==t.form.maxSize&&(n.$validators.fileSize=function(e,a){var i=e||a;angular.isArray(i)||(i=[i]);for(var o=i.length-1;o>=0;o--)if(i[o]&&i[o].filesize&&i[o].filesize>parseInt(t.form.maxSize,10))return!1;return!0}),void 0!==t.form.allowedFileTypes&&(n.$validators.fileType=function(e,a){var i=e||a;angular.isArray(i)||(i=[i]);for(var o=i.length-1;o>=0;o--)if(i[o]&&i[o].filetype&&t.form.allowedFileTypes.indexOf(i[o].filetype)===-1||i[o]&&!i[o].filetype&&i[o].filename)return!1;if(void 0!==t.form.allowedFileTypesExtensions)for(var o=i.length-1;o>=0;o--)if(i[o]&&i[o].filename){var n=i[o].filename.split(".").pop();if(t.form.allowedFileTypesExtensions.indexOf(n.toLowerCase())===-1)return!1}return!0}),a.closest("div.btn").click(function(){a.click()}),a.click(function(e){e.stopPropagation()}),n.$viewChangeListeners.push(function(){if(t.form.previewOn)if(n.$modelValue){var e=new Image;e.src="data:"+n.$modelValue.filetype+";base64,"+n.$modelValue.base64,e.onload=function(){l(e.src,e,n.$modelValue)}}else t.form.previewOn.imageToPreview=null,t.form.previewOn.croppedImage=null}),a.bind("change",function(e){if(a[0].files&&a[0].files[0]){var o=new FileReader;o.onload=function(e){var o={filename:a[0].files[0].name,filetype:a[0].files[0].type,filesize:a[0].files[0].size,base64:e.target.result.split(",")[1]};""===o.filetype&&(o.filetype=i.detectType(o.filename)),(r.filename!=o.filename||t.form.previewOn)&&(r=o,t.ngModel.$setViewValue(o),void 0!==t.form.onFileChange&&t.form.onFileChange(o))},o.readAsDataURL(a[0].files[0])}})},controller:t,controllerAs:"fileController"}}function t(e,t){var a=this;a.getFileTypeDisplayString=function(){return angular.isDefined(e.form.allowedFileTypesDisplayName)&&void 0!=e.form.allowedFileTypesDisplayName&&""!=e.form.allowedFileTypesDisplayName?t.getLocalizedCustom("Accept only")+" "+e.form.allowedFileTypesDisplayName:""}}angular.module("app.directives").directive("oxdFile",e),e.$inject=["$timeout","$rootScope","fileTypeService"],t.$inject=["$scope","localizedMessages"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/directives/oxd-hint.html",scope:{hint:"@",icon:"@",inline:"@",disableHtmlEscaping:"@",atPosition:"@",myPosition:"@"},link:function(e){},controllerAs:"vm",bindToController:!0,controller:t}}function t(e,t,a){function i(e){var t={invalid_elements:"embed"},i=new tinymce.html.Schema(t),o=new tinymce.html.DomParser(t,i).parse(e),n=(new tinymce.html.Serializer).serialize(o);return a.trustAsHtml(n)}var o=this;o.atPosition=o.atPosition?o.atPosition:"center",o.myPosition=o.myPosition?o.myPosition:"top left",o.options={events:{show:function(){e.find(".oxd-hint-icon").addClass("active")},hidden:function(){e.find(".oxd-hint-icon").removeClass("active")}}},"true"!==o.disableHtmlEscaping&&(o.hint=t("sanitizehtml")(o.hint)),o.hint="<div ng-non-bindable>"+i(o.hint)+"</div>"}angular.module("app.directives").directive("oxdHint",e),e.$inject=[],t.$inject=["$element","$filter","$sce"]}(),function(){"use strict";function e(e){var t={restrict:"A",link:function(e,t,a,i){var o=e.$eval(a.oxdListCellTruncate),n=a.tooltipContainer,l=o===!0?1:parseInt(o);l>0&&(t.css("-webkit-line-clamp",l.toString()),t.one("mouseenter",function(){if(1==t.length&&t[0].offsetHeight<t[0].scrollHeight&&!t.attr("data-original-title")){var a=e.data;"undefined"==typeof a&&(a=t.text());var i,o=$("body > .oxd");i=n&&t.closest(n).length>0?t.closest(n)[0]:o.length>0?o.get(0):"body",t.bootstrapTooltip({container:i,boundary:"window",placement:"bottom",title:a}),t.bootstrapTooltip("show"),$(t[0]).on("click",function(e){$(".tooltip").remove()})}}))}};return t}angular.module("app.directives").directive("oxdListCellTruncate",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e,a,i,o,n,l,r){return{restrict:"A",templateUrl:"app/directives/oxd-list-row.html",scope:{obj:"=",nodeId:"@",list:"=",listData:"=",extracontroller:"="},link:function(e,t){t.data("ttParentId",e.nodeId),t.data("ttId",e.obj.id+"."+e.nodeId),t.data("ttBranch",e.obj.isBranch)},controller:t,controllerAs:"row"}}function t(){}angular.module("app.directives").directive("oxdListRow",e),e.$inject=["$filter","$state","$translate","$timeout","$localStorage","$compile","$templateCache"],t.$inject=[]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/directives/oxd-list-shortcuts.html",scope:{shortcuts:"=shortcuts",compact:"=compact",activeId:"=activeId"},link:function(e){function t(t){e.activeId=t.id}e.getNumericIndicatorClass=function(e){if(e&&e.matchingCount)return"num-size-"+e.matchingCount.toString().length},e.onClick=function(e,a){e.onClick&&e.onClick(e,a),t(e,a)}}}}angular.module("app.directives").directive("oxdListShortcuts",e),e.$inject=[]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/directives/oxd-loader.html",link:function(e,t,a,i){}}}angular.module("app.directives").directive("oxdLoader",e),e.$inject=[]}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/directives/oxd-modal-table-item-delete-alert.html",scope:{alertContent:"="},controller:t,controllerAs:"vm",bindToController:!0,link:function(e,t,a,i){var o=i.alertContent,n="You are about to delete data permanently. Are you sure you want to continue?",l="Yes, Delete",r="No, Cancel";o?e.alertContent={alertMessage:o.alertMessage?o.alertMessage:n,deleteButtonLabel:o.deleteButtonLabel?o.deleteButtonLabel:l,cancelButtonLabel:o.cancelButtonLabel?o.cancelButtonLabel:r}:e.alertContent={alertMessage:n,deleteButtonLabel:l,cancelButtonLabel:r}}};return e}function t(e,t){function a(){t.$emit("deleteJobHistoryRecords"),o.showDeleteConfirmationAlert=!1}function i(){t.$emit("hideDeleteConfirmationAlert"),o.showDeleteConfirmationAlert=!1}var o=this;o.cancel=i,o.deleteSelected=a,o.showDeleteConfirmationAlert=!1,t.$on("showTableItemDeleteAlert",function(){o.showDeleteConfirmationAlert=!0})}angular.module("app.directives").directive("oxdModalTableItemDeleteAlert",e),t.$inject=["localizedMessages","$scope"]}(),function(){"use strict";function e(e){return{restrict:"E",templateUrl:"app/directives/oxd-pagination.html",scope:{count:"@",page:"@",pageSize:"@",changePageSize:"&",changePage:"&"},link:function(e){},controllerAs:"vm",bindToController:!0,controller:t}}function t(e,t,a){function i(){for(var e=Math.ceil(o.count/o.pageSize),t=parseInt(o.page),a=[t],i=1;i<5;i++)t-i>0&&a.length<5&&a.push(t-i),t+i<=e&&a.length<5&&a.push(t+i);return a.sort(function(e,t){return e-t})}var o=this;o.sizes=["10","20","50","100"],o.getPageNumbers=i,o.isPrevPageNeed=function(){return o.page>1},o.isNextPageNeed=function(){var e=Math.ceil(o.count/o.pageSize);return o.page<e},o.updatePageSize=function(e){$("html, body").animate({scrollTop:0},0),o.changePageSize()(Number(e))},o.nextPage=function(){var e=Math.ceil(o.count/o.pageSize);o.page<e&&($("html, body").animate({scrollTop:0},0),o.changePage()(Number(o.page)+1))},o.prevPage=function(){o.page>1&&($("html, body").animate({scrollTop:0},0),o.changePage()(Number(o.page)-1))},o.gotoPage=function(e){o.page!=e&&($("html, body").animate({scrollTop:0},0),o.changePage()(e))},o.isActivePage=function(e){return o.page==e},t.bindTo(e).add({combo:"n",description:"Next Page",callback:o.nextPage}).add({combo:"p",description:"Previous Page",callback:o.prevPage})}angular.module("app.directives").directive("oxdPagination",e),e.$inject=["$translate"],t.$inject=["$scope","hotkeys","$localStorage"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r){return{restrict:"A",require:"ngModel",link:function(e,a,n,r){function s(t,a){e.passwordStrength=t,e.passwordStrengthMessage=a}e.$parent.$watch(n.ngModel,function(e,i){t(function(){n.placeholder&&$("label[for='"+$(a[0]).attr("id")+"']").addClass("active"),e instanceof Array&&i instanceof Array&&e.length==i.length||(e?a.trigger("change"):void 0===a.attr("placeholder")&&(a.is(":focus")||a.trigger("blur")))})});var c=[];e.togglePasswordVisibility=function(){e.passwordVisible=!e.passwordVisible,e.passwordVisible?$(a).attr("type","text"):$(a).attr("type","password")},c.push(l.call("defaultAuthenticationSettings","GET",[])),o.all(c).then(function(a){e.passwordStrengthEnforced=a[0].data.data.enforcePasswordStrength,e.defaultScore=a[0].data.data.defaultRequiredPasswordStrength,e.passwordRequired=a[0].data.meta.passwordRequired,e.defaultScoreIndex=i.getPasswordStrengths().indexOf(e.defaultScore),e.form.strengthCheck&&(r.$asyncValidators["tv4-passwordStrength"]=function(a){var n=o.defer();return e.form.toggleSave(!1),e.passwordRequired||a?i.getPasswordStrengthData(a).then(function(t){var a=t.score?t.score:0;if(e.form.validationMessage.passwordStrength=i.getPasswordStrengthValidationMessage(t.validationMsg),e.passwordScore=a,e.form.strengthCheck)switch(e.passwordScore){case 0:s("veryWeak","Very Weak");break;case 1:s("weak","Weak");break;case 2:s("better","Better");break;case 3:s("medium","Medium");break;case 4:s("strong","Strong");break;case 5:s("strongest","Strongest")}e.form.toggleSave(!0),i.hasRequiredMinimumPasswordStrength(a,e.passwordStrengthEnforced,e.defaultScoreIndex)?(e.hasMinimumPasswordStrength=!0,n.resolve()):(e.hasMinimumPasswordStrength=!1,n.reject())},function(){n.reject()}):t(function(){n.resolve(),e.form.toggleSave(!0)}),n.promise})}),e.passwordVisible=!1}}}angular.module("app.directives").directive("oxdPassword",e),e.$inject=["dateService","$timeout","authenticationConfigurationService","passwordStrengthService","$q","ldapAuthenticationService","webservice","openIdProviderService"]}(),function(){"use strict";function e(e,t){var a={restrict:"A",link:function(e,a,i,o){a.mouseover(function(){a.data("toolTipAttached")||(1==a.length&&a[0].offsetHeight<a[0].scrollHeight&&a.qtip({content:t("sanitizehtml")(a.text()),style:{classes:"oxd-hint with-normal-font-size left-align-text",tip:{corner:!1}},position:{my:"top left",at:"bottom center",effect:!1,target:"event",viewport:$(window),container:a.closest(".report-results")},events:{show:function(e,t){$(t.elements.tooltip).css("visibility","hidden")},visible:function(e,t){function a(e){for(var t=e.offsetLeft,a=e.offsetWidth;e.offsetParent;)e=e.offsetParent,t+=e.offsetLeft;return!(t>=window.pageXOffset&&t+a<=window.pageXOffset+window.innerWidth)}function i(e){for(var t=e.offsetTop,a=e.offsetHeight;e.offsetParent;)e=e.offsetParent,t+=e.offsetTop;return!(t>=window.pageYOffset&&t+a<=window.pageYOffset+window.innerHeight)}a(t.elements.tooltip[0])&&$(t.elements.tooltip).find(".qtip-content").css("word-break","break-all"),i(t.elements.tooltip[0])&&$(t.elements.tooltip).css("top",t.elements.tooltip[0].offsetTop-t.elements.tooltip[0].offsetHeight+"px"),$(t.elements.tooltip).css("visibility","")},hidden:function(e,t){$(t.elements.tooltip).find(".qtip-content").css("word-break","")}}}),a.data("toolTipAttached",!0),a.trigger("mouseover"))})}};return a}angular.module("app.directives").directive("oxdReportCellQtip",e),e.$inject=["$timeout","$filter"]}(),function(){"use strict";function e(e){}angular.module("app.directives").directive("oxdReportDateComparisonFromField",[function(){return{restrict:"E",scope:{filterName:"=",value:"=",defaultValue:"=",filter:"=",formName:"="},link:function(e,t,a){e.hasErrors=function(){return"object"==typeof e.formName[e.filterName+"-from"].$error&&Object.keys(e.formName[e.filterName+"-from"].$error).filter(function(e){return"displayInputValidity"!=e}).length>0}},replace:!0,controller:e,templateUrl:"app/directives/oxd-report-date-comparison-from-field.html"}}]),e.$inject=["$scope"]}(),function(){"use strict";function e(e){}angular.module("app.directives").directive("oxdReportDateComparisonToField",[function(){return{restrict:"E",scope:{filterName:"=",value:"=",defaultValue:"=",filter:"=",formName:"=",form:"="},link:function(e,t,a){e.hasErrors=function(){return"object"==typeof e.formName[e.filterName+"-to"].$error&&Object.keys(e.formName[e.filterName+"-to"].$error).filter(function(e){return"displayInputValidity"!=e}).length>0}},replace:!0,controller:e,templateUrl:"app/directives/oxd-report-date-comparison-to-field.html"}}]),e.$inject=["$scope"]}(),function(){"use strict";function e(e,t,a,i,o){function n(n,l,r){function s(){l.find("option").each(function(){var e=$(this).text(),t=e.replace(/\u00A0/g,""),a=e.length-t.length;if(a>0){var i=a/5;$(this).css("padding-left",i+"rem"),$(this).text(t),$(this).attr("label",t)}if("object:null"==angular.element(this).val()&&$(this).attr("disabled","disabled"),void 0!==n.form){var o=_.findWhere(n.form.titleMap,{value:$(this).val().split(":")[1]});void 0!==o&&void 0!==o.icon&&$(this).attr("data-icon",o.icon)}})}function c(){l.siblings(".caret").remove(),n.$evalAsync(function(){d()})}function d(){var e={style:"",size:6,noneSelectedText:""};s(),i.isIE?l.each(function(){$(this).selectpicker(e);var t=$(this).siblings("input.select-dropdown"),a=$(this).siblings("ul.dropdown-content");t.off("blur"),$(document).click(function(){t.trigger("close")}),a.click(function(e){e.stopPropagation()}),a.find("li").click(function(e){t.trigger("close")})}):l.selectpicker(e);var t=l.closest(".input-group.form-select").find(".dropdown.bootstrap-select > button");t.prop("disabled",!0),l.on("loaded.bs.select",function(e){t.prop("disabled",!1),l.next("button.dropdown-toggle").removeAttr("title");var a=l.closest(".form-group").find(".input-group-append > .btn");a.unbind("click").bind("click",function(e){return e.stopPropagation(),l.selectpicker("toggle"),!1})}),l.on("show.bs.select",function(e){t.prop("disabled",!1),l.next("button.dropdown-toggle").removeAttr("title"),$("input.multiselect-autocomplete").trigger("close"),$(document).trigger("click.oxdMultiselectDismiss");var a=$(this).next().next().find("li");a.each(function(){if(1===$(this).find("a").find("span").not(".text").length&&0===$(this).find("div.oxd-select-item-icon").length){var e=$(this).find("a").find("span").not(".text").attr("class").trim(),t='<i class="material-icons">'+e+"</i>",a=$(document.createElement("div")).addClass("oxd-select-item-icon");a.append(t),$(this).find("a").append(a),$(this).find("a").css("display","inline-block")}}),o.$broadcast("openDropdown")}),l.on("changed.bs.select",function(e){t.prop("disabled",!1),l.next("button.dropdown-toggle").removeAttr("title")})}l.closest("div").bind("keydown",function(e){var t,a=l.closest("div").find("ul"),i=function(e,t){if(t){e.find("li.selected").removeClass("selected");var i=$(t);i.addClass("selected"),a.scrollTo(i);
}};40==e.which&&a.find("li.selected").length&&(t=a.find("li.selected").next("li.disabled")[0],i(a,t)),38==e.which&&(t=a.find("li.selected").prev("li.disabled")[0],t&&i(a,t))}),n.$watch(function(){return l.closest("div.input-field").find("span.help-block").text()},function(e){setTimeout(function(){e?$(l).siblings("input.select-dropdown").addClass("ng-invalid"):$(l).siblings("input.select-dropdown").removeClass("ng-invalid")},100)}),n.$parent.$watch(r.ngModel,function(e,a){var i;if(a===e&&c(),"undefined"!=typeof n.form&&(i=_.findWhere(n.form.titleMap,{value:e})),void 0!==i)if(t(function(){$(l).selectpicker("refresh")}),void 0!==i.icon){var o=l.parent().parent().find("div.input-group-append-container").find("i.selected-item-icon")[0];o.innerText=i.icon}else{var o=l.parent().parent().find("div.input-group-append-container").find("i.selected-item-icon")[0];void 0!==o&&(o.innerText="")}}),"undefined"!=typeof n.form&&("undefined"==typeof n.form.emptyOption||n.form.emptyOption)&&(n.form.titleMap.length>0&&n.form.titleMap[0].name!="-- "+a.getLocalizedCustom("Select")+" --"||0==n.form.titleMap.length)&&("string"==typeof n.form.emptyOption?n.form.titleMap.length>0?n.form.titleMap[0].name!=a.getLocalizedCustom(n.form.emptyOption)&&n.form.titleMap.splice(0,0,{value:"",name:a.getLocalizedCustom(n.form.emptyOption)}):n.form.titleMap.splice(0,0,{value:"",name:a.getLocalizedCustom(n.form.emptyOption)}):n.form.titleMap.splice(0,0,{value:"",name:"-- "+a.getLocalizedCustom("Select")+" --"})),"undefined"!=typeof n.form&&n.form.classDirective&&(l.addClass(n.form.classDirective),n.form.classDirective=!1,n.form.emptyOption=!1,e(l)(n)),t(c),"watch"in r&&n.$watch(function(){return l[0].innerHTML},function(e,a){e!==a&&t(c)})}var l={restrict:"A",link:n};return l}angular.module("app.directives").directive("oxdSelect",e),e.$inject=["$compile","$timeout","localizedMessages","browser","$rootScope"]}(),function(){"use strict";function e(e,t){function a(e){function a(t){t.removeClass(o),e.ngModel=""}function i(t,a){t.addClass(o),e.ngModel=a}var o="selective-pills-area-inner-active";e.ngDisabled||($(".selective-pills-area-inner").hover(function(){$(this).addClass("selective-pills-area-inner-hover")},function(){$(this).removeClass("selective-pills-area-inner-hover")}),$(".selective-pills-area-inner").on("click",function(){var o=$(this),n=$(o).data("value");e.ngModel==n?1!=e.preventUnselect&&t(function(){a(o)}):t(function(){i(o,n)})}))}var i={restrict:"A",scope:{ngModel:"=",ngDisabled:"=",preventUnselect:"="},link:a};return i}angular.module("app.directives").directive("oxdSelectivePills",e),e.$inject=["$compile","$timeout"]}(),function(){"use strict";function e(e){return{restrict:"E",scope:{model:"=",min:"=",max:"=",readonly:"="},link:function(t,a,i,o){function n(e){var a=e;return void 0!==t.min&&t.min>e&&(a=t.min),void 0!==t.max&&t.max<e&&(a=t.max),a}function l(a){t.model=n(Number(t.model)-1),t.timeoout=e(function(){l(75)},a)}function r(a){t.model=n(Number(t.model)+1),t.timeoout=e(function(){r(75)},a)}!function(e){e.fn.inputFilter=function(e){return this.on("input keydown keyup mousedown mouseup select contextmenu drop",function(){e(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")?(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd)):this.value=""})}}(jQuery),$("#spinnerInput").inputFilter(function(e){return/^\d*$/.test(e)&&n(e)===e}),t.decrease=function(){l(500)},t.increase=function(){r(500)},t.clearAllTimeouts=function(){e.cancel(t.timeoout)}},templateUrl:"app/directives/oxd-spinner.html",controllerAs:"vm"}}angular.module("app.directives").directive("oxdSpinner",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/directives/oxd-step-progress-with-title.html",scope:{states:"=states",currentStateId:"=currentStateId"},link:function(e){}}}angular.module("app.directives").directive("oxdStepProgressWithTitle",e),e.$inject=[]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/directives/oxd-tabs.html",scope:{data:"=",currentTabKey:"=",onClick:"="},link:function(e){}}}angular.module("app.directives").directive("oxdTabs",e),e.$inject=[]}(),function(){"use strict";function e(e){var t={restrict:"A",link:function(t,a,i,o){e(function(){var e=$("body > .oxd"),t=e.length>0?e.get(0):"body";a.bootstrapTooltip({container:t}),i.$observe("title",function(e){a.attr("data-original-title",e)}),a.on("$destroy",function(){a.bootstrapTooltip("dispose"),delete i.$$observers.title})})}};return t}angular.module("app.directives").directive("oxdTooltip",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e){return{restrict:"E",templateUrl:"app/directives/pagination.html",scope:{count:"@",page:"@",pageSize:"@",changePageSize:"&",changePage:"&"},link:function(e){},controllerAs:"vm",bindToController:!0,controller:t}}function t(e,t){function a(){i.start=(i.page-1)*i.pageSize+1;var e=i.start-1+Number(i.pageSize);e>i.count&&(e=i.count),i.end=e,i.lastPage=Math.ceil(i.count/i.pageSize)}var i=this;i.sizes=["10","20","50","100"],e.$watchGroup(["vm.start","vm.page","vm.pageSize","vm.count"],a),i.nextPage=function(){var e=Math.ceil(i.count/i.pageSize);i.page<e&&($("html, body").animate({scrollTop:0},0),i.changePage()(Number(i.page)+1))},i.prevPage=function(){i.page>1&&($("html, body").animate({scrollTop:0},0),i.changePage()(Number(i.page)-1))},i.updatePageSize=function(e){$("html, body").animate({scrollTop:0},0),i.changePageSize()(Number(e))},t.bindTo(e).add({combo:"n",description:"Next Page",callback:i.nextPage}).add({combo:"p",description:"Previous Page",callback:i.prevPage})}angular.module("app.directives").directive("ohrmPagination",e),e.$inject=["$translate"],t.$inject=["$scope","hotkeys"]}(),function(){"use strict";function e(e){return{restrict:"A",require:"ngModel",transclude:!0,controller:t,link:function(t,i,o,n,l){function r(e,a,o){var n=$(i[0]).closest("form").find("#"+t.form.previewOn).scope();$timeout(function(){var e=$(i[0]).closest("form").find("#"+t.form.previewOn).closest("div.cropArea");e.css("width",a.width+"px"),e.css("height",a.height+"px");var o=$(i[0]).closest("form").find("#"+t.form.previewOn+" canvas");o[0].width=a.width,o[0].height=a.height}),n.imageToPreview=e,n.croppedImage=o.base64;var l=0;n.$watch("croppedImage",function(e,t){e!=t&&0==e.indexOf("data")&&(l++,l>1&&(o.base64=e.split(",")[1]))})}t.deleteAttachment=function(t){return a?void t.deleteCallback(t,t.extraParamsForDeleteCallback):void e.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&t.deleteCallback(t,t.extraParamsForDeleteCallback)})})},void 0!==t.form.maxSize&&(n.$validators.fileSize=function(e,a){var i=e||a;angular.isArray(i)||(i=[i]);for(var o=i.length-1;o>=0;o--)if(i[o]&&i[o].filesize&&i[o].filesize>parseInt(t.form.maxSize,10))return!1;return!0}),void 0!==t.form.allowedFileTypes&&(n.$validators.fileType=function(e,a){var i=e||a;angular.isArray(i)||(i=[i]);for(var o=i.length-1;o>=0;o--)if(i[o]&&i[o].filetype&&t.form.allowedFileTypes.indexOf(i[o].filetype)===-1)return!1;return!0}),i.bind("change",function(e){if(i[0].files&&i[0].files[0]){var a=new FileReader;a.onload=function(e){var a={filename:i[0].files[0].name,filetype:i[0].files[0].type,filesize:i[0].files[0].size,base64:e.target.result.split(",")[1]};if(""===a.filetype&&(a.filetype=fileTypeService.detectType(a.filename)),latestFile.filename!=a.filename&&(latestFile=a,t.ngModel.$setViewValue(a),void 0!==t.form.onFileChange&&t.form.onFileChange(a),t.form.previewOn)){var o=new Image;o.src=e.target.result,o.onload=function(){r(e.target.result,o,a)}}},a.readAsDataURL(i[0].files[0])}}),l(function(e){i.append(e)})}}}function t(e,t){a=e.current.data.wizardMode}angular.module("app.directives").directive("pimCustomFieldAttachment",e),e.$inject=["ModalService","fileTypeService"];var a=!1;t.$inject=["$state","$stateParams"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/directives/pim_document_manager_button.html",scope:{datagroupName:"@",employeeNumber:"=",documentTemplateDetails:"=",employeeService:"="},bindToController:!0,link:function(e,t,a){},controller:t,controllerAs:"vm"}}function t(e,t,a,i,o){function n(){var e=[];l.documentTemplateDetails?l.data=l.documentTemplateDetails:e.push(l.employeeService.getDocumentTemplates(l.datagroupName).then(function(e){l.data=e})),t.all(e).then(function(){return l.templates=l.data.templates,l.templates.length?(l.visible=!0,l.templateDownloadUrl=l.data.templateDownloadUrl,void(l.templateDownloadUrlDoc=l.data.templateDownloadUrl)):void(l.visible=!1)})}var l=this;l.templates=[],l.visible=!1,l.isOxd=o.current.data.oxd,n(),i.showDocumentModal=function(){a.showModal("app/pim/document/document_modal.html","PimDocumentController","modal",{templates:l.templates,visible:l.visible,datagroupName:l.datagroupName,employeeNumber:l.employeeNumber,employeeService:l.employeeService})}}angular.module("app.directives").directive("pimDocumentManagerButton",e),t.$inject=["webservice","$q","modalHelperService","$scope","$state"]}(),function(){"use strict";function e(){return{restrict:"A",require:"ngModel",link:function(e,t){e.togglePasswordVisibility=function(){e.passwordVisible=!e.passwordVisible,e.passwordVisible?$(t).attr("type","text"):$(t).attr("type","password")},e.checkToggleVisiblity=function(t){var a="Enter"===t.key||13===t.keyCode;a&&e.togglePasswordVisibility()},e.passwordVisible=!1}}}angular.module("app.directives").directive("plainPassword",e),e.$inject=[]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g){function h(){y.schema={type:"object",title:"",properties:{name:{title:"Name",type:"string"}},required:[]},y.form=[{type:"row",items:[{type:"round-slide",htmlClass:"col s12 m12 l12",key:"name",config:{radius:50,valueSuffix:y.config.valueSuffix,insideText:y.config.insideText,width:15,handleSize:"15",readOnly:!1,animation:!1,widgetClass:y.config.widgetClass,allowedMax:y.config.allowedMax,includeIncrementSpinner:!0}}]}]}function v(){f.saveCallback(y.model.name,g),n(y.model.name)}var y=this;y.clickEvent=u,y.config=p,y.model={name:m},y.title=f.title,y.clickEvent=u,y.save=v,h()}angular.module("app.performance").controller("ProgressIndicatorExpandPopoverController",e),e.$inject=["$state","formHelper","webservice","localizedMessages","employeeService","close","loader","toast","$scope","$stateParams","$q","value","clickEvent","config","progressParams","object"]}(),function(){"use strict";function e(e,a){return{restrict:"E",templateUrl:"app/directives/progress-indicator.html",scope:{progressParams:"=",object:"="},controller:t,controllerAs:"vm",link:function(e,t,a,i){e.value=e.object[e.progressParams.key],e.config={radius:17,valueSuffix:"%",insideText:"",width:5,handleSize:"5",readOnly:!0,animation:!1,widgetClass:e.progressParams.widgetClass(e.object),lazy:!1,allowedMax:e.progressParams.goalMaxCompletionPercentage(e.object),overCompletionManualReset:!0},e.$on("updateProgressIndicatorClass",function(t,a,i){a&&i&&e.object.id===a&&(e.$broadcast("updateRoundSlideWidgetClass",i),e.config.widgetClass=i)}),e.$on("updateProgressIndicatorValue",function(t,a,i){a&&e.object.id===a&&void 0!==i&&i!==!1&&e.$broadcast("updateRoundSlideValue",i)}),e.$on("tree-branch-loaded",function(){$("tr.sub-row round-slide .rs-tooltip").each(function(){var e=$(this),t=e.text(),a=-7,i=-3.5-2*t.length;e.css("margin-top",a+"px"),e.css("margin-left",i+"px")})})}}}function t(e,t){var a=this;a.showExpandedView=function(a){e.showModal("app/directives/progress-indicator-expand-popover.html","ProgressIndicatorExpandPopoverController","modal",{value:t.value,config:t.config,progressParams:t.progressParams,clickEvent:a,object:t.object}).then(function(e){"undefined"!=typeof e&&e!==!1&&(t.value=e,t.$broadcast("updateRoundSlideValue",e))})}}angular.module("app.directives").directive("progressIndicator",e),e.$inject=["$rootScope","$translate"],t.$inject=["modalHelperService","$scope"]}(),function(){"use strict";function e(e){return{restrict:"A",link:function(e,t){e.fileInputVisible=!0,e.$on("triggerFileClean",function(){e.fileInputVisible=!1,e.$applyAsync(function(){e.fileInputVisible=!0})})}}}angular.module("app.directives").directive("redrawFileOnClean",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e){return{restrict:"A",link:function(t,a,i,o){function n(){e(function(){a.css("overflow-y","scroll");var t=l[0].offsetWidth-l[0].clientWidth;a.css("overflow-y",""),a.addClass("right-border-scroll-width"),a.css("border-right-width",t+"px");var i=[],o=l.find("thead").width(),n=$(a).find("thead").width();o&&n&&e(function(){l.find("thead tr").each(function(e,t){$(t).find("td").each(function(e,t){i.push($(t).outerWidth())})}),$(a).find("thead tr").each(function(e,t){$(t).find("td").each(function(e,t){var a=i.shift();$(t).css("min-width",a+"px"),$(t).width(a)})})})})}var l=$(a).closest(".report-results").find(".scroll-container");l.length&&e(function(){l.scroll(function(){$(a).scrollLeft(l.scrollLeft())}),n()}),t.$on("recalculateReportHeaderWidths",n)}}}angular.module("app.directives").directive("scrollableReportHeader",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/directives/select-employees.html",scope:{heading:"=heading",employeeGetter:"=employeeGetter",onEmployeeSelect:"=onEmployeeSelect",employeeSelectButtonLabel:"=employeeSelectButtonLabel",onBackButtonClick:"=onBackButtonClick",onCancelButtonClick:"=onCancelButtonClick",locationFormData:"=locationFormData",subunitFormData:"=subunitFormData",jobTitleFormData:"=jobTitleFormData",employeeStatusFormData:"=employeeStatusFormData",noSelectableRows:"=noSelectableRows",multiselectPlaceholder:"=multiselectPlaceholder",searchCriteriaModelValues:"=searchCriteriaModelValues"},link:function(e){},controller:t,controllerAs:"vm"}}function t(e,t,a,i,o,n,l,r,s){function c(){var t={};e.locationFormData?k.formData.locations=e.locationFormData:t.locations=S(),e.subunitFormData?k.formData.subunits=e.subunitFormData:t.subunits=D(),e.jobTitleFormData?k.formData.jobTitles=e.jobTitleFormData:t.jobTitles=T(),e.employeeStatusFormData?k.formData.employmentStatus=e.employeeStatusFormData:t.employmentStatus=x(),l.all(t).then(function(e){if(e.locations){var t=e.locations.data.data;k.formData.locations=n.getLocationsListForHierarchicalMultiSelect(t)}if(e.subunits){var a=e.subunits.data.data;k.formData.subunits=n.getSubunitsListForHierarchicalMultiSelect(a)}if(e.jobTitles){var i=e.jobTitles.data.data;k.formData.jobTitles=n.getItemsForMultyselectAutocomplete(i,{name:"jobTitleName",id:"id"})}if(e.employmentStatus){var o=e.employmentStatus.data.data;k.formData.employmentStatus=n.getItemsForMultyselectAutocomplete(o)}w(),m(),g()})}function d(e){if(e.obj.selected)k.selectedEmpNumbers.indexOf(e.obj.empNumber)===-1&&k.selectedEmpNumbers.push(e.obj.empNumber);else{var t=k.selectedEmpNumbers.indexOf(e.obj.empNumber);t!==-1&&k.selectedEmpNumbers.splice(t,1)}}function m(){var e=[{name:"employeeId",lable:"Id",getter:"employeeId",sortable:!0,sortAction:"sortAction",truncate:!0},{name:"lastName",lable:"Employee Name",getter:"lastName",sortable:!0,sortAction:"sortAction",formatter:function(e,t){return t.firstName+" "+t.lastName}},{name:"jobTitle",lable:"Job Title",getter:"jobTitle",sortable:!0,sortAction:"sortAction",formatter:function(e){return e.jobTitleName}},{name:"subDivision",lable:"Sub Unit",getter:"subDivision",sortable:!0,sortAction:"sortAction",formatter:function(e){return e.name}},{name:"empLocation",lable:"Location",getter:"locations",sortable:!0,sortAction:"sortAction",formatter:function(e){return e[0].name}}],t=[],a=k.selectable?"selectable":"unselectable";k.listDefinition={name:"Appraisal Cycles - Add Employees",listClass:"classic-table hover table-fixed "+a,selectable:k.selectable,selected:[],idGetter:"empNumber",listFields:e,extraTH:[],extraTD:[],showColumnsAnyway:!0,permission:{read:!0,update:!0,create:!0,"delete":!0},listActions:t,showSelectableAlways:!0,showLoader:!0,pagination:!0,listSpecificInitialSort:!0,listTopBar:{getMessageForNoOfItemsFound:function(e){return 0==k.selectedEmpNumbers.length?"undefined"!=typeof k.totalDataCount?o.getLocalizedCustomWithVariables("({{number}}) Employee"+(1==k.totalDataCount?"":"s")+" Found",{number:k.totalDataCount}):"":(e=k.selectedEmpNumbers.length,e?o.getLocalizedCustomWithVariables("({{number}}) Employee"+(1==e?"":"s")+" Selected",{number:e}):"")},getMessageForNoOfItemsSelected:function(e){return e=k.selectedEmpNumbers.length,e?o.getLocalizedCustomWithVariables("({{number}}) Employee"+(1==e?"":"s")+" Selected",{number:e}):""},quickSearch:{remoteApiHandler:v,onSearch:u,type:"employee"}}}}function u(e){"string"==typeof e?(k.filters={employee_name_or_id:e},k.page=1,g()):"object"==typeof e&&(k.filters={employee_id_list:[e.originalObject.empNumber]},k.page=1,g())}function p(e,t,a){k.orderField=e,k.page=a,"DESC"==t&&(k.orderField="-"+k.orderField),g()}function f(){k.page=1,delete k.filters.employee_name_or_id,delete k.filters.employee_id_list,e.$broadcast("angucomplete-alt:clearInput"),e.$broadcast("clearListQuickSort"),g()}function g(){return k.listData=null,y(b()).then(function(e){e.data.forEach(function(e){k.selectedEmpNumbers.indexOf(e.empNumber)!=-1&&(e.selected=!0)}),k.listData=e.data,k.totalDataCount=e.total,k.searchEnabled=!e.hasOwnProperty("searchEnabled")||e.searchEnabled,k.lastPage=h(),i.scrollTo(0,0),t.hide()})}function h(){return Math.ceil(k.totalDataCount/k.pageSize)}function v(e){var t=b();return delete t.filter.employee_id_list,t.filter.employee_name_or_id=e,t.page={offset:"0",limit:"5"},y(t).then(function(e){return e.data.map(function(e){return{name:e.middleName?e.firstName+" "+e.middleName+" "+e.lastName:e.firstName+" "+e.lastName,empNumber:e.empNumber,employeeId:e.employeeId}})})}function y(t){return"function"==typeof e.employeeGetter?e.employeeGetter(t):a.call("employees","GET",[],t).then(function(e){return{data:e.data.data,total:e.data.meta.total}})}function b(){var e={include:"jobTitle,subDivision,locations",filter:k.filters};return k.model&&Array.isArray(k.model.location)&&(e.filter.location=k.model.location.join()),k.model&&"object"==typeof k.model.jobTitle&&(e.filter.job_title_list=Object.keys(k.model.jobTitle)),k.model&&Array.isArray(k.model.subunit)&&(e.filter.sub_unit_list_exact_match=k.model.subunit),k.model&&"object"==typeof k.model.employmentStatus&&(e.filter.employee_status_list=Object.keys(k.model.employmentStatus)),e.page={limit:k.pageSize,offset:k.pageSize*(k.page-1)},e.sort=k.orderField,e}function C(){return"function"==typeof e.employeeSelectButtonLabel?e.employeeSelectButtonLabel(k.selectedEmpNumbers.length):"string"==typeof e.employeeSelectButtonLabel?e.employeeSelectButtonLabel:o.getLocalizedCustom("Select Employees")}function w(){k.schema={type:"object",title:"Filter Employees",properties:{},required:[]};var t=e.multiselectPlaceholder?o.getLocalizedCustom(e.multiselectPlaceholder):"-- "+o.getLocalizedCustom("Select")+" --";k.form=[{type:"row",items:[]}],Array.isArray(k.formData.locations["enum"])&&k.formData.locations["enum"].length>0&&(k.schema.properties.location={title:"Location",type:"array",items:{"enum":k.formData.locations["enum"],type:"string"}},k.form[0].items.push({type:"tree-select",htmlClass:"col-12",key:"location",options:k.formData.locations.titleMap,config:{allOptionCheckBox:{includeAllOption:!0,readonly:!1},notSelectedOption:t,controllerOptionForTwoLevels:!0},onChange:function(e){k.model.location=e,f()}})),Array.isArray(k.formData.subunits["enum"])&&k.formData.subunits["enum"].length>0&&(k.schema.properties.subunit={title:"Sub Unit",type:"array",items:{"enum":k.formData.subunits["enum"],type:"string"}},k.form[0].items.push({type:"tree-select",htmlClass:"col-12",key:"subunit",options:k.formData.subunits.titleMap,config:{allOptionCheckBox:{includeAllOption:!0,readonly:!1},notSelectedOption:t,controllerOptionForTwoLevels:!1},onChange:function(e){k.model.subunit=e,f()}})),Array.isArray(k.formData.jobTitles)&&k.formData.jobTitles.length>0&&(k.schema.properties.jobTitle={title:o.getLocalizedCustom("Job Title"),type:"object"},k.form[0].items.push({type:"autocomplete-multiselect",htmlClass:"col-12",key:"jobTitle",choices:k.formData.jobTitles,onChange:function(){f()}})),Array.isArray(k.formData.employmentStatus)&&k.formData.employmentStatus.length>0&&(k.schema.properties.employmentStatus={title:o.getLocalizedCustom("Employment Status"),type:"object"},k.form[0].items.push({type:"autocomplete-multiselect",htmlClass:"col-12",key:"employmentStatus",choices:k.formData.employmentStatus,onChange:function(){f()}})),k.model=_(!0)}function _(t){var a={location:[],subunit:[],jobTitle:{},employmentStatus:{}};return t&&e.searchCriteriaModelValues&&angular.copy(e.searchCriteriaModelValues,a),a}function S(){return a.call("employees/locations","GET",[],{})}function D(){return a.call("subunits","GET",[],{})}function T(){return a.call("jobTitles","GET",[],{})}function x(){return a.call("employmentStatus","GET",[],{})}function F(){k.model=_(!1),f(),e.$broadcast("schemaFormRedraw")}var k=this;k.pageSize=50,k.page=1,k.orderField="lastName",k.orderBy="ASC",k.listData=[],k.formData={},k.getEmployeeSelectButtonLabel=C,k.selectedIds=[],k.sortAction=p,k.resetFilters=F,k.selectedEmployeeInQuickSearch=void 0,k.filters={},k.employeeFilterFormHeading="Mid Year 2020 Dev Team",k.employmentStatus=[],k.changeSelection=d,k.selectedEmpNumbers=[],k.selectable=!e.noSelectableRows,c(),k.isEmployeeSelectButtonDisabled=function(){return k.selectable&&0==k.selectedEmpNumbers.length||!k.selectable&&!k.searchEnabled}}angular.module("app.directives").directive("selectEmployees",e),e.$inject=[],t.$inject=["$scope","loader","webservice","$window","localizedMessages","formHelper","$q","$timeout","widgetChoiceHelper"]}(),function(){"use strict";function e(e,t,a){function i(e){return e&&e.termination_id&&e.fullName.indexOf(s)==-1&&(e.fullName+=s),e}function o(e,t,a){if(!e[t]){e[t]={};for(var i=0;i<a;i++)e[t][i]={employee:null,empNumber:null,note:null}}}function n(e,t,a,i,o){e?a[i][t]={empNumber:e.originalObject.empNumber,employee:e.originalObject,note:a[i][t].note}:void 0==e&&o[t]&&(a[i][t]={empNumber:null,employee:null,note:a[i][t].note}),o[t]=!0}function l(a,i,o,n){var l={filter:{employee_name:o},"page[offset]":"0","page[limit]":"50",sort:"fullName"},r=[];return a.employeeId&&r.push(a.employeeId),_.map(a[i],function(e,t){return!!e.empNumber&&e.empNumber}).forEach(function(e,t,a){e&&r.push(e)}),t.call("employeeAutoComplete","GET",[],l,n).then(function(t){var a=[];if(void 0!==r&&r.length>0){for(var i=0;i<t.data.data.length;i++)r.indexOf(t.data.data[i].empNumber)===-1&&(t.data.data[i].fullName=e.getFullName(t.data.data[i]),a.push(t.data.data[i]));return a}for(var i=0;i<t.data.data.length;i++)t.data.data[i].fullName=e.getFullName(t.data.data[i]),a.push(t.data.data[i]);return a})}var r={initializeModelIfEmpty:o,populateModelOnEmployeeSelectOrDeselect:n,fetchMatchingEmployeesExceptSelected:l,prepareEmployeeName:i},s=" ("+a.getLocalizedCustom("Past Employee")+")";return r}angular.module("app.leave").service("employeeNomineeDirectiveService",e),e.$inject=["employeeService","webservice","localizedMessages"]}(),function(){"use strict";function e(){var e={restrict:"A",require:"ngModel",scope:{setFieldValidity:"="},link:function(e,t,a,i){e.$on("schemaFormValidate",function(t){e.$applyAsync(function(){i.$setDirty()})});var o=e.$watch("setFieldValidity",function(t,a){"function"==typeof t&&(e.$watch(e.setFieldValidity,function(e,t){e?i.$setValidity("displayInputValidity",!1):i.$setValidity("displayInputValidity",!0)}),o())})}};return e}angular.module("app.directives").directive("setFieldValidity",e)}(),function(){"use strict";function e(e){var t={restrict:"A",link:function(t,a,i,o){function n(){e(function(){var e=$(a).parent().find(".header-container").height();$(a).css("max-height","calc(100vh - "+(114+e)+"px)")})}t.$on("setReportDatasetHeightToMatchScreen",n),n()}};return t}angular.module("app.directives").directive("setReportDatasetHeightToMatchScreen",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e){return{restrict:"A",scope:{showModalAsPopover:"=showModalAsPopover",position:"=position",verticalOffset:"=verticalOffset",horizontalOffset:"=horizontalOffset"},link:function(t,a,i){function o(){l()?c():r()?s():c()}function n(t,a){u=a.currentTarget,$(t).css("z-index",4),g.css("position","absolute"),g.css("margin","0"),e(function(){p=g.height(),o(),f=g.outerWidth();var e=u.getBoundingClientRect();d(e),g.css("visibility","visible")},200)}function l(){var e=u.getBoundingClientRect().top+u.getBoundingClientRect().height+5,t=e+p;return t<=$(window).height()}function r(){var e=55,t=u.getBoundingClientRect().top-e;return t>p}function s(){g.css("top",u.getBoundingClientRect().top-p-5+m(t.verticalOffset)),$(document).scroll(function(){var e=u.getBoundingClientRect();d(e),g.css("top",e.top-p-5+m(t.verticalOffset))})}function c(){g.css("top",u.getBoundingClientRect().top+u.getBoundingClientRect().height+5+m(t.verticalOffset)),$(document).scroll(function(){var e=u.getBoundingClientRect();d(e),g.css("top",e.top+e.height+5+m(t.verticalOffset))})}function d(e){var a=e.left+e.width-f+m(t.horizontalOffset);t.position&&"right"===t.position&&(a+=f),g.css("left",a)}function m(e){return void 0===e?0:e}var u,p,f;$(document.body).addClass("pop-up"),t.$on("$destroy",function(){$(document.body).removeClass("pop-up")});var g=!1,h=t.$watch(function(){return $(a).find("div.modal-dialog")},function(e,i){g===!1&&e&&e.length>0&&(g=e,h(),$(a).on("hidden.bs.modal",function(){$(document.body).removeClass("pop-up")}),n(a,t.showModalAsPopover))})}}}angular.module("app.directives").directive("showModalAsPopover",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e){return{restrict:"E",scope:{targetScrollElementSelector:"@",tableHeaderSelector:"@"},templateUrl:"app/directives/table-column-horizontal-scroll-buttons.html",link:function(t,a){function i(){var e=[];$(t.tableHeaderSelector).find("tr").each(function(){$(this).find("td").each(function(){e.push(this)})}),e.sort(function(e,t){return e.offsetLeft>t.offsetLeft?1:-1});var a=[];return e.forEach(function(t,i){0==i?a.push(t):i>0&&e[i-1].offsetLeft!==t.offsetLeft&&a.push(t)}),a}t.scrollableToLeft=!1,t.scrollableToRight=!0;var o=$(t.targetScrollElementSelector);o.css("scroll-behavior","smooth"),t.isScrollable=function(){return o[0].clientWidth<o[0].scrollWidth},o.scroll(function(){e(function(){0==o[0].scrollLeft?(t.scrollableToLeft=!1,t.scrollableToRight=!0):o[0].scrollLeft>=o[0].scrollWidth-o[0].offsetWidth?(t.scrollableToLeft=!0,t.scrollableToRight=!1):(t.scrollableToLeft=!0,t.scrollableToRight=!0)})}),t.scrollRight=function(){var e=o[0].scrollLeft,t=!1;i().forEach(function(a){a.offsetLeft>e+5&&!t&&(o[0].scrollLeft=a.offsetLeft,t=!0)})},t.scrollLeft=function(){var e=o[0].scrollLeft,t=!1;i().reverse().forEach(function(a){a.offsetLeft<e&&!t&&(o[0].scrollLeft=a.offsetLeft,t=!0)})}}}}angular.module("app.directives").directive("tableColumnHorizontalScrollButtons",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e){var t={restrict:"A",require:"ngModel",link:function(e,t,a,i){e.$on("schemaFormValidate",function(t){e.$applyAsync(function(){i.$setDirty()})}),e.$watch("timeForm.timeHolder.$valid",function(a,o){e.$applyAsync(function(){var e=""!=$(t).closest(".input-field").find("span.help-block").text();e&&i.$setDirty()}),a?i.$setValidity("displayInputValidity",!0):i.$setValidity("displayInputValidity",!1)})}};return t}angular.module("app.directives").directive("timePickerTextInputSetDirtyAndValidationStatus",e),e.$inject=["$rootScope"]}(),function(){function e(e){return{restrict:"E",templateUrl:"app/directives/formDecorators/materializecss/time-picker-work-week.html",require:"^ngModel",scope:{ngModel:"=",duration:"=",dependtime:"=",minvalue:"=",maxvalue:"=",lunchPart:"=",lunch:"=",validationMsg:"=",formName:"=",elementPrefix:"=",day:"="},transclude:!0,link:function(t,a,i,o){var n=$(a[0]).find(".timepicker");t.timeText=t.ngModel?t.ngModel:null;var l={"default":"now",fromnow:0,twelvehour:!1,donetext:e.instant("OK"),cleartext:"Close",canceltext:"Cancel",autoclose:!1,ampmclickable:!0,aftershow:function(){}};$(n).pickatime(l),$(n).parent().find("i.time-picker-open-icon").bind("click",function(e){e.stopPropagation(),$(this).parent().find(".timepicker").click()}),t.workWeekTimePickerUpdated=function(){t.timeText=t.ngModel},t.workWeekTimeTextChanged=function(){void 0!=t.timeText&&5==t.timeText.length?($(n).val(t.timeText),t.ngModel=t.timeText):t.ngModel=""}}}}angular.module("app.directives").directive("timePickerWorkWeek",e),e.$inject=["$translate"]}(),function(){"use strict";function e(){return{restrict:"E",scope:{allowedActions:"=",actionCallback:"="},templateUrl:"app/directives/timesheet-actions.html",controller:t,controllerAs:"vm",replace:!0}}function t(e,t,a,i,o,n){}angular.module("app.directives").directive("timesheetActions",e),t.$inject=["formHelper","localizedMessages","$scope","$rootScope","toast","ModalService"]}(),function(){"use strict";function e(){return{restrict:"E",scope:{timesheetItems:"=",startDate:"=",endDate:"=",projects:"=",projectActivities:"=",commonActivities:"=",actionCallback:"=",timesheetMeta:"=",breakTypeCommonActivities:"=",dayOffStatus:"="},templateUrl:"app/directives/timesheet-container.html",controller:t,controllerAs:"vm"}}function t(e,t,a,i,o,n){function l(){for(var e=moment(a.startDate),t=moment(a.endDate);e<=t;)r.dates.push(moment(e).format("YYYY-MM-DD")),e=moment(e).add(1,"days")}var r=this;r.dates=[],l(),r.isReadOnly=function(){var e=Object.keys(a.timesheetMeta.AllowedWorkflowActions).map(function(e){return a.timesheetMeta.AllowedWorkflowActions[e]});return e.indexOf("Save")==-1},r.isFullDayOff=function(e){var t=a.dayOffStatus[e];return!!t&&t.fullDayoff},r.isPartialDayOff=function(e){var t=a.dayOffStatus[e];return!!t&&t.partialDayoff}}angular.module("app.directives").directive("timesheetContainer",e),t.$inject=["formHelper","localizedMessages","$scope","$rootScope","toast","ModalService"]}(),function(){"use strict";function e(){return{restrict:"E",scope:{timesheetItem:"=",projects:"@",projectActivities:"=",commonActivities:"=",copyTimesheetItemCallback:"=",removeTimesheetItemCallback:"=",timeOverlappingValidator:"=",timeOverlapped:"=",readOnly:"="},templateUrl:"app/directives/timesheet-item.html",controller:t,controllerAs:"vm"}}function t(e,t,a,i,o,n,l,r,s,c,d){function m(e,t){if(!e||!t)return!0;var a=moment.utc(e,"HH:mm"),i=moment.utc(t,"HH:mm");return a.isBefore(i)}function u(){D.projects=JSON.parse(a.projects),D.projectActivities=a.projectActivities,a.timesheetItem.projectId&&a.timesheetItem.isCopy?f(!1):b(),p()&&D.makeCurrentTimesheetFormActive()}function p(){return!(a.timesheetItem.projectId||a.timesheetItem.activityId||a.timesheetItem.startTime||a.timesheetItem.endTime||a.timesheetItem.comment)}function f(e){a.timesheetItem.projectId&&(c.show(),r.fetchProjectActivitiesByProjectId(a.timesheetItem.projectId).then(function(i){var o=i.data.data,n=_(a.commonActivities).flatten().filter(function(e){return 1!=e.preset}).filter(function(e){return 0==e.is_deleted||a.timesheetItem.activityId==e.activityId}).valueOf();o=_.filter(o,function(e){return 0==e.is_deleted||a.timesheetItem.activityId==e.activityId}),o=o.concat(n),D.activityEnumAndTitleMap=w(o,{name:"name",value:"activityId"}),D.activityEnumAndTitleMap["enum"].unshift(""),D.activityEnumAndTitleMap.titleMap.unshift({value:"",name:"-- "+t.getLocalizedCustom("Select")+" --"}),h(),a.$applyAsync(function(){e&&(a.timesheetItem.activityId="")})})["finally"](function(){c.hide()}))}function g(){if(a.timesheetItem.duration="00:00",a.timesheetItem.startTime&&a.timesheetItem.endTime){var e=moment.utc(a.timesheetItem.startTime,"HH:mm"),t=moment.utc(a.timesheetItem.endTime,"HH:mm");
if(t.isBefore(e))a.timesheetItem.duration="00:00";else{var i=moment.duration(t.diff(e));a.timesheetItem.duration=moment.utc(+i).format("HH:mm")}}}function h(){if(D.timesheetItemSchema={type:"object",readOnly:a.readOnly,properties:{projectId:{type:"string"},activityId:{type:"string","enum":D.activityEnumAndTitleMap["enum"]},startTime:{type:"string"},endTime:{type:"string"},duration:{type:"string",readOnly:!0}},required:["activityId"]},null!=a.timesheetItem.projectId&&0==_(D.projects).where({projectId:a.timesheetItem.projectId}).valueOf().length){var e=_(D.projectActivities).where({projectId:a.timesheetItem.projectId}).valueOf();0!=e.length&&D.projects.push(e[0])}D.timesheetItemForm=[{type:"generic-auto-complete",key:"projectId",hideLabel:!0,disable:a.readOnly,emptyOption:t.getLocalizedCustom("Project"),placeholder:"Project",ngModelOptions:{allowInvalid:!0},searchFields:"name,Customer.name",titleField:"titleField","text-searching":"Searching...","text-no-results":"No results found",initialValue:y(),fetchItemsCallback:function(e,t){var a=s.defer(),i=_.filter(D.projects,function(t){return 1==t.status&&0==t.is_deleted&&(t.name.toLowerCase().indexOf(e.toLowerCase())!==-1||t.Customer.name.toLowerCase().indexOf(e.toLowerCase())!==-1)});i.forEach(function(e){e.titleField=e.Customer.name+" - "+e.name});var o=_.sortByOrder(i,[function(e){return _.get(e,"titleField").toLowerCase()}],"asc");return a.resolve(o),a.promise},onInputChange:function(e){""==e&&(a.timesheetItem.projectId="",C(),v(a.timesheetItem.activityId)||(a.timesheetItem.activityId=""))},objectSelectedCallback:function(e){e&&a.timesheetItem.projectId!=e.originalObject.projectId&&(a.timesheetItem.projectId=e.originalObject.projectId,f(!0))}},{type:"select",key:"activityId",hideLabel:!0,emptyOption:"-- "+t.getLocalizedCustom("Select")+" --",titleMap:D.activityEnumAndTitleMap.titleMap,ngModelOptions:{allowInvalid:!0},removeIndentation:!0,onChange:function(e){e&&o.remove()},validationMessage:{invalid:t.getLocalizedCustom("Required")},$validators:{invalid:function(e){return""!=e}}},{type:"timepicker",defaultTime:a.timesheetItem.startTime,key:"startTime",hideLabel:!0,readOnly:a.readOnly,markAsDirty:a.timesheetItem.startTime||a.timesheetItem.endTime,onChange:function(e){g(),a.timeOverlappingValidator(),a.timesheetItem.startTime&&a.timesheetItem.endTime&&a.$broadcast("schemaForm.error.endTime","afterStartTime",m(a.timesheetItem.startTime,a.timesheetItem.endTime))},ngModelOptions:{allowInvalid:!0},validationMessage:{requiredForDirty:d.requiredForDirty.message,beforeEndTime:t.getLocalizedCustom(D.validationMessages.beforeEndTime),timeOverlap:t.getLocalizedCustom(D.validationMessages.overlapping)},$validators:{requiredForDirty:function(e){var t=!D.validationInitStartTime||d.requiredForDirty.validator(e,!1);return D.validationInitStartTime=!0,t},beforeEndTime:function(e){return m(e,a.timesheetItem.endTime)},timeOverlap:function(){return!a.timesheetItem.overlapping}}},{type:"timepicker",defaultTime:a.timesheetItem.endTime,key:"endTime",hideLabel:!0,readOnly:a.readOnly,markAsDirty:a.timesheetItem.startTime||a.timesheetItem.endTime,onChange:function(e){g(),a.timeOverlappingValidator(),a.timesheetItem.startTime&&a.timesheetItem.endTime&&a.$broadcast("schemaForm.error.startTime","beforeEndTime",m(a.timesheetItem.startTime,a.timesheetItem.endTime))},ngModelOptions:{allowInvalid:!0},validationMessage:{requiredForDirty:d.requiredForDirty.message,afterStartTime:t.getLocalizedCustom(D.validationMessages.afterStartTime),timeOverlap:t.getLocalizedCustom(D.validationMessages.overlapping)},$validators:{requiredForDirty:function(e){var t=!D.validationInitEndTime||d.requiredForDirty.validator(e,!1);return D.validationInitEndTime=!0,t},afterStartTime:function(e){return m(a.timesheetItem.startTime,e)},timeOverlap:function(){return!a.timesheetItem.overlapping}}},{type:"text",hideLabel:!0,key:"duration"}]}function v(e){var t=_(a.commonActivities).where({activityId:e}).valueOf();return t.length>0}function y(){var e=_(D.projects).where({projectId:a.timesheetItem.projectId}).valueOf();return 0==e.length&&(e=_(D.projectActivities).where({projectId:a.timesheetItem.projectId}).valueOf()),e.forEach(function(e){e.titleField=e.Customer.name+" - "+e.name}),e.length?e[0]:null}function b(){var e=[];a.timesheetItem.projectId&&""!=a.timesheetItem.projectId&&(e=_(a.projectActivities).where({projectId:a.timesheetItem.projectId}).pluck("JobActivity").flatten().filter(function(e){return 0==e.is_deleted||a.timesheetItem.activityId==e.activityId}).valueOf());var i=_(a.commonActivities).flatten().filter(function(e){return!a.timesheetItem.projectId||1!=e.preset}).filter(function(e){return 0==e.is_deleted||a.timesheetItem.activityId==e.activityId}).valueOf();e=e.concat(i),D.activityEnumAndTitleMap=w(e,{name:"name",value:"activityId"}),D.activityEnumAndTitleMap["enum"].unshift(""),D.activityEnumAndTitleMap.titleMap.unshift({value:"",name:"-- "+t.getLocalizedCustom("Select")+" --"}),h()}function C(){var e=_(a.commonActivities).flatten().valueOf();D.activityEnumAndTitleMap=w(e,{name:"name",value:"activityId"}),D.activityEnumAndTitleMap["enum"].unshift(""),D.activityEnumAndTitleMap.titleMap.unshift({value:"",name:"-- "+t.getLocalizedCustom("Select")+" --"}),h()}function w(e,t){for(var a=[],i=[],o=0;o<e.length;o++)a.push({value:e[o][t.value],name:e[o][t.name]}),i.push(e[o][t.value]);return{titleMap:a,"enum":i}}function S(){if(!a.timesheetItem.projectId)return!0;var e=JSON.parse(a.projects),t=e.map(function(e){return e.projectId}),i=Array.isArray(t)&&t.indexOf(a.timesheetItem.projectId)!==-1,o="1"==_.result(_.find(e,function(e){return e.projectId==a.timesheetItem.projectId}),"status");return!(!o||!i)}var D=this;D.timeDiffText="00:00",D.activitityGroup=[],D.formAvailable=!1,D.isItemCopyAllowed=S,D.validationMessages={afterStartTime:"To time should be after from time",overlapping:"Overlapping",beforeEndTime:"From time should be before to time",required:"Required"},a.$on("timeTextChanged",function(e,t){t.timeText||(t.leaveDurationStType&&"startTime"===t.leaveDurationStType[0]&&!a.timesheetItem.startTime?a.$broadcast("schemaForm.error.startTime","requiredForDirty",!1):t.leaveDurationStType&&"endTime"===t.leaveDurationStType[0]&&!a.timesheetItem.endTime&&a.$broadcast("schemaForm.error.endTime","requiredForDirty",!1))}),D.isActivityRequiredValid=function(){return!!a.timesheetItem.activityId},D.isStartTimeRequiredValid=function(){return!!a.timesheetItem.startTime},D.isEndTimeRequiredValid=function(){return!!a.timesheetItem.endTime},D.isStartTimeBeforeEndTimeValid=function(){return m(a.timesheetItem.startTime,a.timesheetItem.endTime)},D.isTimesheetDataValid=function(){return D.isActivityRequiredValid()&&D.isStartTimeRequiredValid()&&D.isEndTimeRequiredValid()&&D.isStartTimeBeforeEndTimeValid()&&!D.isOverlapping()},D.isOverlapping=function(){return a.timesheetItem.overlapping},D.makeCurrentTimesheetFormActive=function(){l(function(){a.readOnly||(h(),D.formAvailable=!0)})},D.deactivateTimesheetForm=function(){D.isTimesheetDataValid()&&(D.formAvailable=!1)},a.$on("resetTimesheetRowFormActivation",function(){D.deactivateTimesheetForm()}),D.getProjectName=function(e){var a=t.getLocalizedCustom("Project");if(e){var i=_(D.projects).where({projectId:e}).first();void 0==i&&(i=_(D.projectActivities).where({projectId:e}).first()),i=i.valueOf(),i&&(a=i.Customer.name+" - "+i.name)}return a},D.getActivityName=function(e){var t="---";return e&&D.activityEnumAndTitleMap&&D.activityEnumAndTitleMap.titleMap&&(t=_(D.activityEnumAndTitleMap.titleMap).where({value:e}).pluck("name").first().valueOf()),t},a.$on("validateTimesheetItems",function(e,t){a.timesheetItem.startTime||a.$broadcast("schemaForm.error.startTime","requiredForDirty",!1),a.timesheetItem.endTime||a.$broadcast("schemaForm.error.endTime","requiredForDirty",!1),a.timeOverlappingValidator(),a.$broadcast("schemaFormValidate"),!a.timesheetItem.overlapping&&D.isTimesheetDataValid()||(t.valid=!1)}),a.$watch("timesheetItem.overlapping",function(){var e=!1;a.timesheetItem.overlapping&&(e=!0),e&&D.makeCurrentTimesheetFormActive(),a.$broadcast("schemaForm.error.startTime","timeOverlap",!e),a.$broadcast("schemaForm.error.endTime","timeOverlap",!e)}),u(),g(),D.copyTimesheetItem=function(e){S()&&a.copyTimesheetItemCallback(e)},D.removeTimesheetItem=function(e){a.removeTimesheetItemCallback(e)},D.showComment=function(e){return e.activityId?void n.showModal({templateUrl:"app/time/detailedTimesheet/timesheet_item_comment.html",controller:"TimeTimesheetItemCommentController",controllerAs:"vm",inputs:{timesheetItem:e,readOnly:a.readOnly}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})}):void o.warning(t.getLocalizedCustom("Select an Activity"))}}angular.module("app.directives").directive("timesheetItem",e),t.$inject=["formHelper","localizedMessages","$scope","$rootScope","toast","ModalService","$timeout","timeService","$q","loader","formValidationHelper"]}(),function(){"use strict";function e(){return{restrict:"E",scope:{timesheetItems:"=",date:"=",projects:"=",projectActivities:"=",commonActivities:"=",readOnly:"=",breakTypeCommonActivities:"=",dayOffStatus:"="},templateUrl:"app/directives/timesheet-items-day.html",controller:t,controllerAs:"vm"}}function t(e,t,a,i,o,n,l,r){function s(e){var t=new Date,a=t.getMonth(),i=t.getDate(),o=t.getFullYear(),n=e.split(":");return new Date(o,a,i,n[0],n[1])}var c=this;c.breakTypeActivityIds=_(a.breakTypeCommonActivities).flatten().pluck("activityId").valueOf(),c.day=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date(a.date).getUTCDay()],c.addTimesheetItem=function(e){var t={uuid:r.uuid(),date:new Date(e),projectId:"",activityId:"",startTime:"",endTime:"",duration:"00:00",comment:null};a.timesheetItems.push(t)},c.orderByFromTime=function(e){return e.startTime?e.startTime:"00:00"},c.totalDayTime=function(e,t){var a=t,i=_.transform(a,function(t,a){return"00:00"!=a.duration&&a.date.toISOString().split("T")[0]==e&&c.breakTypeActivityIds.indexOf(a.activityId)==-1&&t.push(a.duration),!0},[]);return i.length?_.reduce(i,function(e,t){var a=e.split(":"),i=t.split(":"),o=parseInt(a[0])+parseInt(i[0]),n=parseInt(a[1])+parseInt(i[1]),l=60*o+n,r=l%60,s=parseInt(l/60);return 1==(r+"").length&&(r="0"+r),1==(s+"").length&&(s="0"+s),s+":"+r},"00:00"):"00:00"},c.moreThan24Hours=function(e,t){var a=t,i=_.transform(a,function(t,a){return"00:00"!=a.duration&&a.date.toISOString().split("T")[0]==e&&c.breakTypeActivityIds.indexOf(a.activityId)==-1&&t.push(a.duration),!0},[]);if(i.length){var o=_.reduce(i,function(e,t){var a=t.split(":"),i=parseInt(a[0]),o=parseInt(a[1]),n=60*i+o;return parseInt(e)+n},"0");return o>1440}return!1},c.copyTimesheetItem=function(e){var t=_.clone(e);t.overlapping=!1,t.uuid=r.uuid(),t.isCopy=!0,t.startTime=void 0,t.endTime=void 0,delete t.timesheetItemId,a.timesheetItems.push(t)},c.removeTimesheetItem=function(e){_.remove(a.timesheetItems,function(t){return t.uuid==e.uuid}),c.validateTimeOverlapping(),a.$applyAsync(function(){$(".material-tooltip").hide()})},c.validateTimeOverlapping=function(){for(var e=_(a.timesheetItems).filter(function(e){return"00:00"!=e.duration&&e.date.toISOString().split("T")[0]==new Date(a.date).toISOString().split("T")[0]}).valueOf(),t=0;t<e.length;t++)e[t].overlapping=!1;for(var t=0;t<e.length;t++)for(var i=t+1;i<e.length;i++){var o=s(e[t].startTime),n=s(e[t].endTime),l=s(e[i].startTime),r=s(e[i].endTime);o<r&&n>l&&(e[t].overlapping=!0,e[i].overlapping=!0)}},c.getDayOffStatus=function(){var e=a.dayOffStatus[a.date],t="";return e&&(e.leave&&(t+="L"),e.holiday&&(t+="H"),e.weekend&&(t+="W")),t},c.isFullDayOff=function(){var e=a.dayOffStatus[a.date];return!!e&&e.fullDayoff},c.isPartialDayOff=function(){var e=a.dayOffStatus[a.date];return!!e&&e.partialDayoff}}angular.module("app.directives").directive("timesheetItemsDay",e),t.$inject=["formHelper","localizedMessages","$scope","$rootScope","toast","ModalService","$timeout","timeService"]}(),function(){"use strict";function e(e,a){function i(e){e.subItems=[],e.$applyAsync(function(){var t=$("#"+e.listData.tableId);n(t,e);var a=[],i={expandable:!0,column:o(e),expanderTemplate:"<a class='material-icons tooltipped' data-position='bottom' data-tooltip="+e.expandString+"></a>",stringExpand:"",stringCollapse:"",onNodeCollapse:function(){s(this,e)},onNodeExpand:function(){var i=this,o=i.id.toString().split("."),n=o[0],l=o[2===o.length?1:0];"undefined"!=typeof e.loadedSubItemsRows[i.id]?(s(i,e),t.treetable("expandNode",i.id)):(e.loadedSubItemsRows[i.id]=[],e.extracontroller[e.listData.loadChildNodeData](n).then(function(o){e.subItems=o,e.$applyAsync(function(){a=angular.copy($("#"+e.listData.tableId+"SubItems tbody tr").filter("tr")),a.each(function(){var e=$(this);e.data("ttParentId")!=l&&e.data("ttParentId",e.data("ttParentId")+"."+l),e.data("ttId",e.data("ttId")+"."+l)}),e.loadedSubItemsRows[i.id]=a,t.treetable("loadBranch",i,a),s(i,e),r()})}))}};t.treetable(i),l(t),r()})}function o(e){var t=_.findIndex(e.listData.listFields,"name",e.listData.expandableField);return e.listData.selectable&&(e.list.hasPermissions(e.listData.listActions)||e.listData.configurable)&&(t+=1),t}function n(e,t){if(t.loadedSubItemsRows.length>0){e.treetable("collapseAll");var a;for(var i in t.loadedSubItemsRows)t.loadedSubItemsRows.hasOwnProperty(i)&&(a=e.treetable("node",i),a&&e.treetable("unloadBranch",a),t.loadedSubItemsRows[i]=void 0)}e.treetable("destroy"),e.find("tr td span.indenter").remove()}function l(e){e.find("tr.branch").each(function(){"false"==$(this).attr("data-tt-branch")&&$(this).find("span.indenter a.material-icons").remove()})}function r(){$(".tooltipped").tooltip("remove"),$(".tooltipped").tooltip()}function s(e,t){var a=e.treeCell[0],i=$(a).find("span.indenter a.tooltipped")[0],o=$(i).attr("data-tooltip");$(i).attr("data-tooltip",c(o,t))}function c(e,t){var a;return a=e==t.collapseString?t.expandString:t.collapseString}var d=0;return{restrict:"E",templateUrl:"app/directives/tree-table.html",scope:{objs:"=objs",listData:"=listdata",extracontroller:"=extracontroller"},link:function(t,o,n){function l(){var e=t.listData.listFields;for(var a in e)if(e.hasOwnProperty(a)&&e[a].name===t.listData.initialSortField)return e[a].sortAction}t.collapseString=a.instant("Collapse"),t.expandString=a.instant("Expand"),t.loadedSubItemsRows=[],t.$watch("objs",function(){i(t)}),void 0!==t.listData&&void 0===t.listData.name&&(t.listData.name="list"+d++),t.getFieldValue=function(t,a,i,o,n){var l="";if($.isArray(a)){if(l=t[a[0]],"object"==typeof l)for(var r=1;r<a.length;r++)l=l[a[r]]}else l=t[a];return""==a&&(l=t),"function"==typeof i&&(l=i(l,t)),"function"==typeof n&&(l=n(l,t)),o&&o.forEach(function(t){if(t.name){var a=[];a=a.concat(l),t.params&&(a=a.concat(t.params)),l=e(t.name).apply(null,a)}}),l},t.listData.initialSortField&&!t.listData.pagination&&t.list.setPaginationParameters(t.listData.initialSortField,l(),"ASC")},controller:t,controllerAs:"list"}}function t(e,t,a,i,o,n){function l(t,a,i){t||(a=null),"undefined"==typeof i?e.extracontroller[r.sortAction](t,a):e.extracontroller[r.sortAction](t,a,i)}var r=this;r.browserType=window.chrome&&window.chrome.webstore?"chromeClass":"",r.field=null,r.sortAction=null,r.sorting=!1,r.pagination=!1,r.order="ASC",r.sizes=["10","20","50","100"],r.pageSize=e.extracontroller.pageSize?e.extracontroller.pageSize.toString():"50",r.listSpecificInitialSort=!1;"string"!=typeof r.sortField;r.sortableFields={},r.sortField=e.listData.initialSortField,e.listData&&(r.clickableCondition=e.listData.clickableCondition,r.listSpecificInitialSort=e.listData.listSpecificInitialSort);var s=angular.copy(r.sortField);e.$on("resetSortField",function(){r.sortField=s}),r.isItemSelectable=function(t){var a=!0;if("function"==typeof e.listData.isRowSelectable)a=e.listData.isRowSelectable(t);else if(void 0!==e.listData.unselectableIds){var i=r.itemTracker(t,e.listData.idGetter);a=e.listData.unselectableIds.indexOf(i)===-1}return a},r.typeOf=function(e){return typeof e},r.getTDTooltip=function(e,t){return"function"==typeof e?e(t):e},r.runAction=function(t,a,i){void 0!==t&&("undefined"==typeof a||null===a?e.extracontroller[t]():e.extracontroller[t](a,i))},r.itemTracker=function(e,t){var a="";if($.isArray(t)){a=e[t[0]];for(var i=1;i<t.length;i++)a=a+"_"+e[t[i]]}else a=e[t];return a},r.hasPermissions=function(e){var t=!1;if(0===e.length)t=!1;else for(var a=0;a<e.length;a++)if(e[a].actionPermission){t=!0;break}return t},r.AddSortableFields=function(e){r.sortableFields[e]||(r.sortableFields[e]=e)},r.fetchData=function(e,t,a,i){r.setPaginationParameters(e,t,a,i),t&&a&&(r.sortField=e,r.pagination?r.fetchBy():r.sorting&&r.sortBy())},r.fetchBy=function(){r.updatePageSize(),l(r.sortField,r.order,e.extracontroller.page)},r.sortBy=function(){l(r.sortField,r.order)},r.getSortIcon=function(e){return r.listSpecificInitialSort&&"undefined"==typeof r.sortField?"":e===r.sortableFields[e]?"arrow_upward":"-"+e===r.sortableFields[e]?"arrow_downward":""},r.nextPage=function(){$("html, body").animate({scrollTop:0},0),l(r.sortField,r.order,e.extracontroller.page+1)},r.prevPage=function(){e.extracontroller.page>1&&($("html, body").animate({scrollTop:0},0),l(r.sortField,r.order,e.extracontroller.page-1))},a.bindTo(e).add({combo:"n",description:"Next Page",callback:r.nextPage}).add({combo:"p",description:"Previous Page",callback:r.prevPage}),r.isPaginationNeed=function(){return e.extracontroller.totalDataCount>e.extracontroller.pageSize},r.isPrevPageNeed=function(){return e.extracontroller.page>1},r.isNextPageNeed=function(){return e.extracontroller.page<e.extracontroller.lastPage},r.getCurrentPageText=function(){var a=(e.extracontroller.page-1)*e.extracontroller.pageSize+1,i=a+e.extracontroller.dataInCurruntPage-1,o=e.extracontroller.totalDataCount;return 0==o&&(a=0,i=0),a+" - "+i+" "+t.getLocalizedCustom("of")+" "+e.extracontroller.totalDataCount},r.setPaginationValues=function(e,t,a,i){r.sorting&&r.pagination&&r.field&&r.sortAction||r.setPaginationParameters(e,t,a,i)},r.setPaginationParameters=function(e,t,a,i){a&&(r.sorting=a),i&&(r.pagination=i),e&&(r.field=e),t&&(r.sortAction=t,"undefined"==typeof r.sortField?r.listSpecificInitialSort&&!r.listInitiationSortCompleted?(r.sortableFields[e]="-"+e,r.order="DESC",r.listInitiationSortCompleted=!0):(r.sortableFields[e]=e,r.order="ASC",r.sortField=e):r.sortField===e?r.sortableFields[e]===e?(r.sortableFields[e]="-"+e,r.order="DESC"):r.sortableFields[e]==="-"+e?(r.sortableFields[e]=e,r.order="ASC"):(r.sortableFields[e]=e,r.order="ASC"):(r.sortableFields[e]=e,r.order="ASC"))},r.updatePageSize=function(){$("html, body").animate({scrollTop:0},0),e.extracontroller.pageSize=Number(r.pageSize),e.extracontroller.page=1,e.extracontroller.dataInCurruntPage=Number(r.pageSize),e.extracontroller.lastPage=Math.ceil(e.extracontroller.totalDataCount/Number(r.pageSize))},r.saveData=function(t){e.extracontroller.save(t)},r.listConfigOptionDirectiveController=function(e){function t(){var t=!1,a={close:function(){}};o.showModal({templateUrl:"app/core/modal/list-configuration.html",controller:"ListConfigurationModalController",controllerAs:"listConfigModal",inputs:{listName:e.listName,modalHeader:e.modalHeader,applyForAllEmployeesLabel:e.applyForAllEmployeesLabel,conditionalFields:e.conditionalFields,specialMessagesForFields:e.specialMessagesForFields,maxNoOfFields:e.maxNoOfFields,modalFunctions:e.modalFunctions}}).then(function(e){$(e.element).openModal({complete:function(){t||a.close()}}),e.close.then(function(e){t=!0})})}t()},r.callAddAction=function(t){t&&$(".tooltipped").tooltip("remove"),e.extracontroller[t]()}}angular.module("app.directives").directive("treeTable",e),e.$inject=["$filter","$translate"],t.$inject=["$scope","localizedMessages","hotkeys","listConfigurationService","ModalService","datagroupPermissions"]}(),function(){"use strict";function e(){var e={scope:{from:"=",to:"=",filterName:"@",form:"="},link:function(e,t,a,i){function o(){var t,a=e.from,i=e.to,o=!1,n=!1,l=null,r=null;null!==a&&(t=Date.parse(a),isNaN(t)===!1&&(l=new Date(a))),null!==i&&(t=Date.parse(i),isNaN(t)===!1&&(r=new Date(i))),null===l&&null===r&&(o=!0),null!==l&&null!==r&&l>r&&(n=!0),e.form[e.filterName+"-from"].$setValidity("endBeforeStart",!n),e.form[e.filterName+"-from"].$setValidity("required",!o),e.form[e.filterName+"-to"].$setValidity("endBeforeStart",!n),e.form[e.filterName+"-to"].$setValidity("required",!o)}e.$watch("from",o),e.$watch("to",o)}};return e}angular.module("app.directives").directive("dateRangeValidator",e)}(),function(){"use strict";function e(){var e={restrict:"A",require:"ngModel",scope:{endDate:"=",endDateFormField:"=",equalAllowed:"@",notAllowFutureDates:"@"},link:function(e,t,a,i){function o(e){var t=null;if(null!==e){var a=Date.parse(e);isNaN(a)===!1&&(t=new Date(e),t.setHours(0,0,0,0))}return t}function n(t,a){var n=!0,r=!0,s=o(t),c=o(a);if(null!==s&&null!==c&&(n=l?s<=c:s<c),i.$setValidity("dateRange",n),n&&e.notAllowFutureDates&&"true"===e.notAllowFutureDates){var d=new Date;d.setHours(0,0,0,0),null!==s&&null!==c&&(s>d||c>d)&&(r=!1),i.$setValidity("futureDate",r)}e.endDateFormField&&(e.endDateFormField.$setValidity("dateRange",n),e.endDateFormField.$setValidity("futureDate",r))}var l=void 0!==e.equalAllowed&&"false"!==e.equalAllowed;e.$watch("endDate",function(){n(i.$modelValue,e.endDate)}),i.$parsers.unshift(function(t){return n(t,e.endDate),t})}};return e}angular.module("app.directives").directive("validateDateRange",e)}(),function(){"use strict";function e(){var e={restrict:"A",require:"ngModel",link:function(e,t,a,i){e.$watch(a.validateMax,function(){i.$validate()});var o=function(e){return angular.isUndefined(e)||""===e||null===e};i.$validators.validateMax=function(t,i){var n=!o(i)&&i.endsWith("%")?1e3:e.$eval(a.validateMax)||1/0;return!(!o(t)&&parseFloat(t)>parseFloat(n))}}};return e}angular.module("app.directives").directive("validateMax",e)}(),function(){"use strict";function e(){var e={restrict:"A",require:"ngModel",link:function(e,t,a,i){e.$watch(a.validateMin,function(){i.$validate()});var o=function(e){return angular.isUndefined(e)||""===e||null===e};i.$validators.validateMin=function(t,i){var n=e.$eval(a.validateMin)||0;return!(!o(t)&&parseFloat(t)<parseFloat(n))}}};return e}angular.module("app.directives").directive("validateMin",e)}(),function(){"use strict";function e(){var e={restrict:"A",require:"ngModel",scope:{endNumber:"=",endNumberFormField:"=",equalAllowed:"@"},link:function(e,t,a,i){function o(e,t){if("undefined"!=typeof e&&null!==e){var a=Number(e);return isNaN(a)===!1?(t.$setValidity("validateType",!0),a):(t.$setValidity("validateType",!1),null)}return null}function n(t,a){var n=!0,r=o(t,i),s=""===a,c=o(a,e.endNumberFormField);c=s?null:c,null!==r&&null!==c&&(n=l?r<=c:r<c),i.$setValidity("numberRange",n),e.endNumberFormField.$setValidity("numberRange",n)}var l=void 0!==e.equalAllowed&&"false"!==e.equalAllowed;e.$watch("endNumber",function(){n(i.$viewValue,e.endNumber)}),i.$parsers.unshift(function(t){return n(t,e.endNumber),t})}};return e}angular.module("app.directives").directive("validateNumberRange",e)}(),function(){"use strict";function e(){function e(e){var a=t[e];if(!a)return!1;var i=Object.keys(a);return i.every(function(e){return"isRequired"===e||!a[e]})}var t={};return{restrict:"A",require:"?ngModel",link:function(a,i,o,n){function l(){c.isRequired?n.$setValidity("required",!1):n.$setValidity("required",!0)}function r(t){return c[a.$id]=!n.$isEmpty(t),c.isRequired=e(s),l(),c.isRequired?void 0:t}if(n&&o.requireAny){var s=o.requireAny;void 0===t[s]&&(t[s]={isRequired:!0});var c=a.group=t[s];a.$on("$destroy",function(){delete c[a.$id],Object.keys(c).length<=1&&delete t[s]}),n.$formatters.push(r),n.$parsers.unshift(r),a.$watch("group.isRequired",l)}}}}angular.module("app.directives").directive("requireAny",e)}(),function(){"use strict";function e(){var e={restrict:"A",require:"ngModel",scope:{validateUnique:"="},link:function(e,t,a,i){i.$parsers.unshift(function(t){var a=e.validateUnique.indexOf(t.toLowerCase())===-1;return i.$setValidity("validateUnique",a),a?t:void 0}),i.$formatters.unshift(function(t){if(null!==t&&void 0!==t){var a=e.validateUnique.indexOf(t.toLowerCase())===-1;i.$setValidity("validateUnique",a)}return t})}};return e}angular.module("app.directives").directive("validateUnique",e)}(),function(){"use strict";function e(){var e={restrict:"A",require:"ngModel",scope:{endNumber:"=",endNumberFormField:"=",equalAllowed:"@",singleValueAllowed:"@"},link:function(e,t,a,i){function o(e,t){if("undefined"!=typeof e&&null!==e){var a=Number(e);return isNaN(a)===!1?(t.$setValidity("validateType",!0),a):(t.$setValidity("validateType",!1),null)}return null}function n(t,a){var n=!0,r=o(t,i),s=o(a,e.endNumberFormField);null!==r&&null!==s&&0!==s&&(n=l?r<=s:r<s),i.$setValidity("numberRange",n),e.endNumberFormField.$setValidity("numberRange",n)}var l=void 0!==e.equalAllowed&&"false"!==e.equalAllowed;e.$watch("endNumber",function(){n(i.$viewValue,e.endNumber)}),i.$parsers.unshift(function(t){return n(t,e.endNumber),t})}};return e}angular.module("app.directives").directive("validateYearRange",e)}(),function(){"use strict";function e(e,t){function a(){var t="";return"noncore"===e.router.globals.current.name||"noncore.WithParams"===e.router.globals.current.name?t=e.router.globals.params.module+"_"+e.router.globals.params.action:(t=e.router.globals.current.name,t=t.replace(/\./g,"_")),t}return{generateLabel:a}}angular.module("app.help").factory("labelHelper",e),e.$inject=["$state","$window"]}(),function(){"use strict";function e(e){return{restrict:"E",templateUrl:"app/layout/external-link.html",link:function(t){e.onLocalizationLoaded().then(function(){t.localizedExternalLinksText=e.getLocalizedCustom("External Links")}),t.externalLinkArray=JSON.parse($(".external-link-data-holder").attr("data-external-link-info")),t.opened=!1,t.togglePanel=function(){t.opened=!t.opened},t.closePanel=function(){t.opened=!1}}}}angular.module("app.layout").directive("externalLink",e),e.$inject=["localizedMessages"]}(),function(){"use strict";function e(e){return{restrict:"E",scope:{children:"=children",direction:"=direction",isVisible:"=isVisible",maxLevels:"=maxLevels",trackBy:"=trackBy",idPrefix:"=?idPrefix"},templateUrl:"app/layout/menu-items/sub-menu-container.html",link:function(t,a){t.subMenuVisible=[],t.showSubmenu=function(i){t.subMenuVisible=[],t.subMenuVisible[i]=!0,e(function(){var e=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);_.forEach(a.find(".opened > .sub-menu-container"),function(t,a){var i=t.getBoundingClientRect();if(i.top+t.offsetHeight-20>=e){var o=e-i.top-20;$(t).css({"max-height":o+"px"}),$(t).addClass("scrollable-sub-menu")}})})},t.hideSubmenu=function(e){t.subMenuVisible[e]=!1}}}}angular.module("app.directives").directive("subMenuContainer",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e,t){return{restrict:"E",scope:{menuTitle:"=menuTitle",children:"=children",target:"=?target",sref:"=?sref",href:"=?href",expandIcon:"@expandIcon",nestedChildrenDirection:"@nestedChildrenDirection",maxLevels:"=maxLevels",visibilityState:"=?visibilityState",htmlId:"=?htmlId",automationId:"@?automationId",currentItemState:"=?currentItemState",trackBy:"=trackBy",menuTooltip:"=menuTooltip",idPrefix:"=?idPrefix",menuItemClass:"=?menuItemClass"},templateUrl:"app/layout/menu-items/top-level-menu-item.html",link:function(a,i){function o(e,t){if(!e)return!1;var a=e.getBoundingClientRect(),i=t.getBoundingClientRect();return a.left<=i.left&&a.top<=i.top&&a.bottom>=i.bottom}t.onLocalizationLoaded().then(function(){a.localizedMenuTitle=t.getLocalizedCustom(a.menuTitle)}),a.uniqueName=(Math.random()+1).toString(36).substring(10),a.showSubmenu=!1,a.toggleShowSubmenu=function(){a.showSubmenu=!a.showSubmenu},a.hideSubmenu=function(){a.showSubmenu=!1};var n=setInterval(function(){void 0!=a.visibilityState&&a.$applyAsync(function(){a.visibilityState=o($(i).parent()[0],i[0]),a.currentItemState=$(i).find(".top-level-menu-item-container > a.active").length>0})},2e3),l=e.onSuccess({},a.hideSubmenu),r=a.$on("toggleMainMenu",a.hideSubmenu);window.addEventListener("resize",a.hideSubmenu,!1),a.$on("$destroy",function(){l(),r(),window.removeEventListener("resize",a.hideSubmenu),clearInterval(n)})}}}angular.module("app.directives").directive("topLevelMenuItem",e),e.$inject=["$transitions","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n){return{restrict:"E",templateUrl:"app/layout/my-shortcut.html",link:function(e){function l(){i.fetchShortcuts().then(function(t){var a=i.getShortcutsToView(t.data.meta.defaultShortcuts),o=t.data.data;e.showConfigIcon=0!==o.length;var n=o.concat(a);e.quickAccessItems=r(n)})}function r(e){for(var t=[],a=0;a<e.length;a++)t.push(i.getFormattedShortcut(e[a]));return t}function s(t){e.opened=!1,"default"==t.type?i.defaultShortcutItemClicked(t):i.userDefineShortcutItemClicked(t)}function c(){i.openAddMyShortcutModal()}e.quickAccessClicked=s,e.addNewShortcut=c,e.quickAccessItems=[],e.opened=!1,e.showConfigIcon=!1,a.onLocalizationLoaded().then(function(){e.localizedTextForMyShortcuts=a.getLocalizedCustom("My Shortcuts")}),e.canAddShortcut=t.current.hasOwnProperty("data")&&t.current.data.hasOwnProperty("addShortcut")&&t.current.data.addShortcut,e.togglePanel=function(){e.opened=!e.opened},e.closePanel=function(){e.opened=!1},e.configure=function(){t.go("pim.configure_my_shortcuts"),e.opened=!1},e.getShortcutTooltipClasses=function(e){return i.getShortcutTooltipClasses(e)},l(),o.onSuccess({},function(t){var a=t.$to();e.canAddShortcut=a.hasOwnProperty("data")&&a.data instanceof Object&&a.data.hasOwnProperty("addShortcut")&&a.data.addShortcut}),n.$on("ohrm.my.shortcuts.updated",function(){l()})}}}angular.module("app.layout").directive("myShortcut",e),e.$inject=["webservice","$state","localizedMessages","myShortcutService","$transitions","$rootScope"]}(),function(){"use strict";function e(e){return{restrict:"E",scope:{side:"@"},link:function(t,a,i){function o(){l.empty()}var n="nav.topNav div ul.left";"secondary"===t.side&&(n="nav.subNav div ul.right");var l=angular.element(e[0].querySelector(n));l.empty();var r=angular.element(a.html());a.empty(),angular.forEach(r,function(e,t){if(void 0!==e.tagName){var a=angular.element("<li></li>").append(e);l.append(a)}});var s=a.scope(),c=angular.element(document.querySelector("body")),d=c.injector(),m=d.get("$compile");m(l)(s),t.$on("$destroy",function(){o()})}}}angular.module("app.layout").directive("ohrmTopNavButtons",e),e.$inject=["$document"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){return{restrict:"A",scope:{menuContent:"="},link:function(e,t,i){function o(e){var t=e.find("#menu-content > ul > li");x=[],t.each(function(e){var t=$(this),a=t.attr("data-level");if("2"===a){var i=t.children("a").first(),o={title:i.find("span").text(),id:t.attr("data-menu-id"),htmlId:t.attr("id"),parentId:null,level:t.attr("data-level"),uiSref:i.attr("ui-sref")};try{var n=JSON.parse(t.attr("data-submenu-items"));o.parent=!0,o.children=[];for(var l=0;l<n.length;l++)o.children[l]=T(n[l])}catch(r){o.parent=!1}x.push(o)}})}function n(e,t){return f("uiSref",e,t)}function u(e,t){return f("href",e,t)}function p(e,t){return f("automationId",e,t)}function f(e,t,a){for(var i=[],o=0;o<a.length;o++){var n=a[o];if(n[e]&&n[e].startsWith(t)&&i.push(n),n.parent&&n.children){var l=f(e,t,n.children);l.length>0&&(i=i.concat(l))}}var r;return i.forEach(function(a){a[e]===t&&(!r||a.level>r.level)&&(r=a)}),r?[_.cloneDeep(r)]:_.cloneDeep(i)}function g(e,t){for(var a=0;a<t.length;a++){var i=t[a];if(i.id==e)return _.cloneDeep(i);if(i.parent&&i.children){var o=g(e,i.children);if(o)return _.cloneDeep(o)}}return null}function h(e,t){var a=!1,i=e.match(/\((.*)\)/);if(i)try{var o=JSON.parse(i[1]),n=Object.keys(o);a=!0;for(var l=0;l<n.length;l++){var s=n[l],c=o[s];if((!t||t[s])&&(void 0===r[s]||r[s]!=c)){a=!1;break}}}catch(d){a=!1}return a}function v(e){$("#menu-content,#top-ribbon-menu").find(".active").removeClass("active");
var t,i,o,n,l,r,c=parseInt(e.level,10),m=e.id,u=e.parentId,p=[];switch(c){case 1:break;case 2:t=e,r=[t.title];break;case 3:i=e,t=g(u,x),r=[t.title];break;case 4:o=e,i=g(u,x),t=g(i.parentId,x),r=[t.title,i.title];break;case 5:n=e,o=g(u,x),i=g(o.parentId,x),t=g(i.parentId,x),r=[t.title,i.title,o.title]}p=t.children,t&&$("li#left_menu_item_"+t.id).children("a").addClass("active"),a(function(){i&&$("#top_level_menu_item_"+i.htmlId).children("a").addClass("active"),o&&$("#top_level_menu_item_"+o.htmlId).children("a").addClass("active"),n&&$("#top_level_menu_item_"+n.htmlId).children("a").addClass("active")}),o&&(l=S(p,s.current_menu_id),p=w(p,i.id),l&&(p=D(p,l))),n&&(l=S(p,s.current_menu_id),p=w(p,o.id),l&&(p=D(p,l))),s.current_menu_id=m,s.current_menu_level=c,s.submenu=p,d.setForcedTitle(r),sessionStorage.setItem("current_menu",y(r,e))}function y(e,t){var a=angular.copy(e);return t.title&&Array.isArray(a)?a.push(t.title):a=[t.title],a.join(" > ")}function b(){for(var e,t=l.$current,a=!1;t&&t.name&&!a;){if(0===t.name.indexOf("noncore")){var i=m.getAngularUrl();e=u(i,x)}else e=n(t.name,x);if(1==e.length)v(e[0]),a=!0;else if(e.length>1)for(var o=0;o<e.length;o++){var c=e[o];if(c.level>2&&(a=t.data&&t.data.paramsToMatchMenu?h(c.uiSref,t.data.paramsToMatchMenu):h(c.uiSref))){v(c);break}}a||(t=t.data&&t.data.initialState?l.get(t.data.initialState):void 0===t.parent?void 0:""===t.parent.name&&"report_view"===t.name?l.get("pim.reports"):"pim.employees.profile"===t.parent.name&&r.empNumber==s.emp_number?l.get("pim.my_info"):t.parent)}}function C(){b()}function w(e,t){for(var a=0;a<e.length;a++)if(e[a].id==t)return e[a].children;return null}function S(e,t){for(var a,i=0;i<e.length;i++){if(e[i].id==t)return e[i];a||e[i].parent||(a=e[i])}return a}function D(e,t){return e.unshift({id:t.id+"_back",title:t.title,tooltip:t.title,icon:"arrow_back",uiSref:t.uiSref,"class":"go-back-menu-item"}),e}function T(e){var t={title:e.menuTitle,id:e.id,htmlId:"menu_item_"+e.id,parentId:e.parentId,level:e.level,order_hint:e.order_hint};if(e.linkAttributes){if(e.linkAttributes["ui-sref"]?t.uiSref=e.linkAttributes["ui-sref"]:e.api_request_url?t.href=e.api_request_url:e.linkAttributes.href&&(t.href=e.linkAttributes.href),e.linkAttributes.target){var a=e.linkAttributes.target;"_parent"!==a&&(t.target=e.linkAttributes.target)}e.linkAttributes["data-automation-id"]&&(t.automationId=e.linkAttributes["data-automation-id"])}if(e.subMenuItems){t.parent=!0,t.children=[];for(var i=0;i<e.subMenuItems.length;i++)t.children[i]=T(e.subMenuItems[i])}else t.parent=!1;return t}var x=[];o(t),c.onSuccess({},C),s.$on("unmarkCurrentMenuItem",function(){$("#menu-content,#top-ribbon-menu").find(".active").removeClass("active")}),s.$on("markMenuItemAsCurrent",function(e,t){var a=[],i=[];if("undefined"!=typeof t.stateName?a=$("#menu-content,#top-ribbon-menu").find("a[ui-sref^='"+t.stateName+"']"):"undefined"!=typeof t.href&&(a=$("#menu-content,#top-ribbon-menu").find('a[href*="'+t.href+'"]')),a.length){var o=a.first().attr("ui-sref");i=n(o,x),0===i.length&&"undefined"!=typeof t.href&&(i=u(t.href,x))}else"undefined"!=typeof t.automationId?i=p(t.automationId,x):("undefined"!=typeof t.stateName&&(i=n(t.stateName,x)),0===i.length&&"undefined"!=typeof t.href&&(i=u(t.href,x)));i.length&&v(i[0])})}}}angular.module("app.layout").directive("ohrmMainMenu",e),e.$inject=["$compile","$parse","$timeout","$http","exception","LOGIN","$state","$stateParams","$rootScope","$transitions","titleService","noncoreService"]}(),function(){"use strict";function e(){function e(e,t,a,i,o,n,l,r){function s(e){h.title.redirectStates&&h.title.redirectStates[e]&&(h.title.redirectStates[e].state?t.go(h.title.redirectStates[e].state,h.title.redirectStates[e].params):t.go(h.title.redirectStates[e]))}function c(e){return!!h.title.redirectStates&&!!h.title.redirectStates[e]}function d(){a.$broadcast("filter",[])}function m(e){l.showModal("app/layout/user-profile-popover.html","UserProfilePopoverController","modal",{name:h.name,jobTitle:h.jobTitle,photo:h.photo,clickEvent:e}).then(function(e){})}function u(){o.location.href=h.logoutUrl}function p(){g(),o.location.href=logoutAllUrl}function f(){h.logoutOptionsVisible=!h.logoutOptionsVisible}function g(){h.logoutOptionsVisible=!1}var h=this;h.title=e,h.hasFilter=i.ohrmnavbar.hasFilter,h.logoutOptionsVisible=!1,r.onLocalizationLoaded().then(function(){h.localizedLogoutText=r.getLocalizedCustom("Log Out"),h.localizedLogoutAllText=r.getLocalizedCustom("Logout from all browsers")}),h.tabs=[];var v=JSON.parse($(".external-link-data-holder").attr("data-external-link-info"));h.haveExternalLinks=v.length>0,h.logoutUrl=n.baseUrl+"auth/logout",h.logoutAllUrl=n.baseUrl+"auth/logout/all",h.titleClicked=s,h.isClickableTitle=c,h.filter=d,h.showProfile=m,h.logout=u,h.logoutFromAllBrowsers=p,h.toggleLogoutOptions=f,h.closeLogoutOptions=g,h.isArray=function(e){h.title.isArray}}var t={bindToController:!0,controller:e,controllerAs:"ohrmnavbar",restrict:"EA",scope:{name:"@",photo:"@",jobTitle:"@",navline:"=",hasFilter:"=",showHelp:"="},templateUrl:"app/layout/ohrm.navbar.html"};return e.$inject=["titleService","$state","$rootScope","$scope","$window","LOGIN","modalHelperService","localizedMessages"],t}angular.module("app.layout").directive("ohrmNavbar",e)}(),function(){"use strict";function e(){function e(e,t){function a(e){l.title.redirectStates&&l.title.redirectStates[e]&&(l.title.redirectStates[e].state?t.go(l.title.redirectStates[e].state,l.title.redirectStates[e].params):t.go(l.title.redirectStates[e]))}function i(e){return!!l.title.redirectStates&&!!l.title.redirectStates[e]}function o(){window.top.history.back()}function n(){return window.top.history.length>1}var l=this;l.title=e,l.titleClicked=a,l.isClickableTitle=i,l.goBack=o,l.isBackButtonVisible=n,l.isArray=function(e){l.title.isArray}}var t={bindToController:!0,controller:e,controllerAs:"ohrmtruncatedtitlenavbar",restrict:"EA",scope:{navline:"=",hideHelp:"=",showBackButton:"="},templateUrl:"app/layout/ohrm.truncated.title.navbar.html"};return e.$inject=["titleService","$state"],t}angular.module("app.layout").directive("ohrmTruncatedTitleNavbar",e)}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(t,a){w.showMenu=!w.showMenu,S=!(!t||w.showMenu),i(function(){e.$broadcast("toggleMainMenu",{visibility:w.showMenu}),$(window).trigger("mainMenuClosed")})}function p(){var e=w.labelHelper.generateLabel(),t=c.url();r.open("/help/help?label="+e+"&referrer="+t)}function f(){_||(_=!0,g()["finally"](function(){_=!1}))}function g(){var e;return e=w.sidebarProfile&&w.navbarProfile?"both":w.navbarProfile?"navbar":"sidebar",m.showModal("app/layout/ui-settings_modal.html","UiSettingsController","modal",{profilePicture:e,iconScheme:w.iconScheme}).then(function(e){if(e)switch(w.iconScheme=e.icon_scheme,h(),e.profile_picture){case"both":w.sidebarProfile=!0,w.navbarProfile=!0;break;case"sidebar":w.sidebarProfile=!0,w.navbarProfile=!1;break;case"navbar":w.sidebarProfile=!1,w.navbarProfile=!0}})}function h(){var e,t="images/menu_"+w.iconScheme+"/",a=!1;"glass"===w.iconScheme?(e="png",a="width: 32px"):e="svg",$(".sidebar-search img,.menu-level-2 img").each(function(i,o){var n=$(o).attr("src"),l=n.split(/\//g).pop(),r=l.split(".").pop(),s=l.replace(r,e),c=t+s;$(o).attr("src",c),a?$(o).attr("style",a):$(o).removeAttr("style")})}function v(){y(),C()}function y(){i(function(){e.showSplash=!1},1e3)}function b(e){l.use(e)}function C(){window.self!==window.top&&window.top.location.replace(window.location.href)}var w=this;w.busyMessage="Please wait ...",w.isBusy=!0,w.footerData={version:"7.10",prodName:"OrangeHRM",copyrightYear:(new Date).getFullYear()},w.showMenu=!0,d.onSuccess({},function(e){var t=e.$from(),a=e.$to();a.data&&a.data.mainMenu===!1&&w.showMenu===!0?w.toggleMainMenu():!t.data||t.data.mainMenu!==!1||w.showMenu!==!1||a.data&&a.data.mainMenu===!1||S||w.toggleMainMenu()}),w.navline={title:o.appTitle,text:"Created by John Papa",link:"http://twitter.com/john_papa"},w.currentLanguage="en",w.changeLanguage=b,w.languages=[{ID:"en",Title:"English"},{ID:"de",Title:"German"},{ID:"es",Title:"Spanish"}],w.toggleMainMenu=u,w.help=p,w.clickLogo=f,w.labelHelper=s,w.sidebarProfile=!0,w.navbarProfile=!1,w.iconScheme="line";var _=!1,S=!1;v()}angular.module("app.layout").controller("ShellController",e),e.$inject=["$rootScope","$scope","$state","$timeout","config","logger","$translate","$window","labelHelper","$location","$transitions","modalHelperService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l){function r(){}var s=this;s.clickEvent=l,s.shortcuts=[],r()}angular.module("app.layout").controller("ShortcutPopoverController",e),e.$inject=["$state","LOGIN","$window","close","loader","myShortcutService","clickEvent"]}(),function(){"use strict";function e(){function e(e,t){}var t={bindToController:!0,controller:e,controllerAs:"vm",restrict:"EA",scope:{},templateUrl:"app/layout/sidebar-search.html"};return e.$inject=["$window","$rootScope"],t}angular.module("app.layout").directive("sidebarSearch",e)}(),function(){"use strict";function e(e){var t=this;t.menuItem=null,e.$on("SingleMenuItemTopRibbonControllerMenuChanged",function(e,a){t.menuItem=a.menuItem})}angular.module("app.layout").controller("SingleMenuItemTopRibbonController",e),e.$inject=["$rootScope"]}(),function(){"use strict";function e(e,t,a){var i="",o=function(){return i};return o.isArray=!1,o.redirectStates=null,o.setForcedTitle=function(e,a){i=e,o.isArray=Array.isArray(e),o.isArray?t.title=i.slice(-1).pop():t.title=i,a&&(o.redirectStates=a)},o.setTitle=function(e,t){},o}angular.module("app.layout").factory("titleService",e),e.$inject=["$translate","$rootScope","$q"]}(),function(){"use strict";function e(){function e(e,t,a,i,o,n,l){function r(e){e?(u.menu=e,u.showMoreMenu=!1,c(),u.initialStateCheck||(u.initialStateCheck=!0,m(n.current))):u.menu=[],u.hasBackMenuItem=t.current_menu_level>3}function s(){e.history.back()}function c(){u.visibilityMap={},u.currentItemMap={},_.forEach(u.menu,function(e){u.visibilityMap[e.id]=!0,u.currentItemMap[e.id]=!1})}function d(e){var t={};return _.isEqual(u.lastVisibilityMap,u.visibilityMap)||(angular.copy(u.visibilityMap,u.lastVisibilityMap),_.forEach(e,function(e){u.visibilityMap[e.id]||"go-back-menu-item"==e["class"]||u.currentItemMap[e.id]||(t[e.id]=e)}),i.$applyAsync(function(){Object.keys(t).length>0?u.showMoreMenu=!0:u.showMoreMenu=!1}),u.lastFilteredMenus=_.sortBy(t,function(e){return parseInt(e.order_hint,10)})),u.lastFilteredMenus}function m(e){var t=!1,a=!1;u.forcedBackButton=void 0,u.additionalForcedBackButton=void 0,u.forcedMenuPillName=void 0,u.backButtonIcon="arrow_back",u.additionalBackButtonIcon="arrow_back",u.keepExistingBackButton=!0,(e.views&&e.views.hasOwnProperty("customTopRibbon@")||e.parent&&e.parent.views&&e.parent.views.hasOwnProperty("customTopRibbon@"))&&(t=!0),(e.views&&e.views.hasOwnProperty("navbar@")||e.parent&&e.parent.views&&e.parent.views.hasOwnProperty("navbar@"))&&(a=!0),i.$applyAsync(function(){u.customTopRibbon=t,u.navBar=a})}var u=this;u.goBack=s,u.getHiddenMenuItems=d,u.visibilityMap={},u.currentItemMap={},u.showMoreMenu=!1,u.hasBackMenuItem=!1,u.customTopRibbon=!1,u.navBar=!1,u.forcedBackButton=void 0,u.additionalForcedBackButton=void 0,u.backButtonIcon="arrow_back",u.additionalBackButtonIcon="arrow_back",u.menu=[],l.onLocalizationLoaded().then(function(){u.localizedTextForHome=l.getLocalizedCustom("Home")}),u.lastFilteredMenus={},u.lastVisibilityMap={},u.initialStateCheck=!1,u.keepExistingBackButton=!0,r(t.submenu),t.$watch("submenu",function(e,t){r(e)});var p=t.$on("addTopMenuBackButton",function(e,t){i.$applyAsync(function(){if(u.keepExistingBackButton=t.keepExistingBackButton,t.href)u.forcedBackButton={href:t.href,tooltip:t.tooltip};else if(t.uiSref){var e=t.uiSref;t.params&&(e+="("+JSON.stringify(t.params)+")"),u.forcedBackButton={uiSref:e,tooltip:t.tooltip}}else t.callback&&(u.forcedBackButton={callback:t.callback,tooltip:t.tooltip});t.icon&&(u.backButtonIcon=t.icon)})}),f=t.$on("addAdditionalTopMenuBackButton",function(e,t){i.$applyAsync(function(){if(t.href)u.additionalForcedBackButton={href:t.href,tooltip:t.tooltip};else if(t.uiSref){var e=t.uiSref;t.params&&(e+="("+JSON.stringify(t.params)+")"),u.additionalForcedBackButton={uiSref:e,tooltip:t.tooltip}}else t.callback&&(u.additionalForcedBackButton={callback:t.callback,tooltip:t.tooltip});t.icon&&(u.additionalBackButtonIcon=t.icon)})}),g=t.$on("setForcedMenuPillName",function(e,t){i.$applyAsync(function(){t.menuTitle&&(u.forcedMenuPillName=t.menuTitle)})});o.onSuccess({},function(e){u.initialStateCheck=!0;var t=e.$to();m(t)}),o.onBefore({},function(){u.showMoreMenu=!1}),i.$on("$destroy",function(){p(),f(),g()}),$(window).on("scroll",function(){$(".tooltipped").tooltip("remove"),$(".tooltipped").tooltip()})}var t={bindToController:!0,controller:e,controllerAs:"vm",restrict:"EA",scope:{},templateUrl:"app/layout/top-menu.html"};return e.$inject=["$window","$rootScope","modalHelperService","$scope","$transitions","$state","localizedMessages"],t}angular.module("app.layout").directive("topMenu",e)}(),function(){"use strict";function e(e,t,a){function i(){o()}function o(){r.model={profile_picture:e,icon_scheme:t},r.schema={type:"object",title:r.title,properties:{profile_picture:{title:"Show profile picture in",type:"string"},icon_scheme:{title:"Icon Scheme",type:"string"},required:["profile_picture","icon_scheme"]}},r.form=[{type:"row",items:[{type:"radiobuttons",htmlClass:"col-12",key:"profile_picture",titleMap:[{value:"both",name:"Sidebar and Navbar"},{value:"sidebar",name:"Sidebar only"},{value:"navbar",name:"Navbar only"}]}]},{type:"row",items:[{type:"radiobuttons",htmlClass:"col-12",key:"icon_scheme",titleMap:[{value:"solid",name:"Solid Icons (Gray)"},{value:"line",name:"Line Icons"},{value:"glass",name:"Glass Icons"}]}]}]}function n(){a(r.model)}function l(){a(!1)}var r=this;r.title="UI Settings (Temporary Modal)",r.save=n,r.cancel=l,i()}angular.module("app.pim").controller("UiSettingsController",e),e.$inject=["profilePicture","iconScheme","close"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s){function c(){}function d(){e.go("admin.change_user_password")}function m(){a.location.href=t.baseUrl+"auth/logout"}function u(){e.go("pim.my_info")}var p=this;p.clickEvent=s,p.changePassword=d,p.logout=m,p.viewProfile=u,p.name=n,p.jobTitle=l,p.photo=r,c()}angular.module("app.layout").controller("UserProfilePopoverController",e),e.$inject=["$state","LOGIN","$window","close","loader","name","jobTitle","photo","clickEvent"]}(),function(){"use strict";function e(e,t,a,i,o){function n(){u.employeeList=a.$parent.vm.model.employeeList,o.remove(),o.info(i.getLocalizedCustom("Bulk Assign in Progress")),m(),s()}function l(e,a){return t.getFullName(a)}function r(){var e=[],t=_.chunk(u.employeeList,c(u.employeeList.length));return _.forEach(t,function(t){var a=[];_.forEach(t,function(e){a.push(e.empNumber)}),e.push(a)}),e}function s(){var t=r();angular.forEach(t,function(n){var l=a.$parent.vm.getParameters();l.employeeIds=n,e.bulkAssign(l).then(function(e){if(u.statusList=_.merge(u.statusList,e.data),m(),u.progress=u.progress+1,t.length==u.progress){var a=u.statusList.filter(function(e){return 0==e.success});o.remove(),0==a.length?o.success(i.getLocalizedCustom("Bulk Assign Successfully Completed")):Object.keys(u.statusList).length==a.length?o.error(i.getLocalizedCustom("Bulk Assign Failed")):(1==a.length?o.warning(i.getLocalizedCustomWithVariables("Bulk Assign Failed for {{failedCount}} Employee",{failedCount:a.length})):o.warning(i.getLocalizedCustomWithVariables("Bulk Assign Failed for {{failedCount}} Employees",{failedCount:a.length})),Object.keys(u.statusList).length-a.length==1?o.success(i.getLocalizedCustomWithVariables("Bulk Assign Successfully Completed for {{successCount}} Employee",{successCount:Object.keys(u.statusList).length-a.length})):o.success(i.getLocalizedCustomWithVariables("Bulk Assign Successfully Completed for {{successCount}} Employees",{successCount:Object.keys(u.statusList).length-a.length})))}})})}function c(e){return e<=100?10:e<=1e3?100:500}function d(e){return u.statusList.length>0&&"undefined"!=typeof u.statusList[e]?u.statusList[e]:"N/A"}function m(){var e,t=[{name:"name",lable:"Employee Name",getter:"firstName",formatter:l,width:"50%"},{name:"from",lable:"Status",getter:"empNumber",type:"bulk-assign-status",formatter:d,width:"50%"}],a=null;u.listData={name:"leaveStatus",selectable:!1,selected:[],idGetter:"empNumber",listFields:t,extraTH:a,extraTD:e,showColumnsAnyway:!0,permission:u.permissions,listActions:{},unselectableIds:{},columnWidths:["50%","50%"],pagination:!1}}var u=this;u.permissions={read:!0},u.employeeList=[],u.statusList=[],u.progress=0,n()}angular.module("app.leave").controller("BulkAssignResultController",e),e.$inject=["leaveApplicationService","employeeService","$scope","localizedMessages","toast"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C){function w(){l.show();var e={permissions:b.getPermissions(),subunits:t.fetchSubunit({tree:!0}),locations:t.fetchLocation({}),leaveType:i.fetch({filter:{leaveBulkAssign:!0}}),workSchedule:a.getWorkSchedule()};s.all(e).then(function(e){S(e.permissions),e.leaveType.data.data.length>0?(Z.showform=!0,Z.subunitOptions=t.getSubunitEnumAndTitleMap(e.subunits.data.data),Z.locationOptions=t.getLocationEnumAndTitleMap(e.locations.data.data),Z.leaveTypeOptions=v.getObjectTitleMap(e.leaveType.data.data),Z.workSchedule=e.workSchedule.data,T(),H(),Z.resetDefaultDate.reset=!1,R(),G(),l.hide()):(l.hide(),r.remove(),r.warning(C.getLocalizedCustom("No Leave Type Defined")))})}function S(e){Z.permissions=e.bulk_assign,Z.permissions.update||(l.hide(),p.go("403"))}function D(){Z.employeeItems=v.getItemsForMultyselectAutocomplete(Z.additionalEmployees,function(e){var t=o.getFullName(e);return{id:e.empNumber,name:t,employeeId:e.employeeId}})}function T(){Z.model.duration_st_from=x(Z.workSchedule.duration.start_time),Z.model.duration_st_to=x(Z.workSchedule.duration.end_time),Z.model.partial_all_st_from=x(Z.workSchedule.duration.start_time),Z.model.partial_all_st_to=x(Z.workSchedule.duration.end_time),Z.model.partial_start_st_from=x(Z.workSchedule.duration.start_time),Z.model.partial_start_st_to=x(Z.workSchedule.duration.end_time),Z.model.partial_end_st_from=x(Z.workSchedule.duration.start_time),Z.model.partial_end_st_to=x(Z.workSchedule.duration.end_time),Z.model.duration_st_length=a.calculateShiftLength(Z.model.duration_st_from,Z.model.duration_st_to),Z.model.partial_all_st_length=a.calculateShiftLength(Z.model.partial_all_st_from,Z.model.partial_all_st_to),Z.model.partial_start_st_length=a.calculateShiftLength(Z.model.partial_start_st_from,Z.model.partial_start_st_to),Z.model.partial_end_st_length=a.calculateShiftLength(Z.model.partial_end_st_from,Z.model.partial_end_st_to)}function x(e){return moment(e,"HH:mm:ss").format("HH:mm")}function F(e){null==Z.model.to&&(Z.model.to=e,H())}function k(e){null==Z.model.from&&(Z.model.from=e,H())}function E(e){if(f.$broadcast("schemaFormValidate"),e.$valid)if(M(),0==Z.model.employeeList.length)r.warning(C.getLocalizedCustom("No Matching Employees"));else if(Z.model.leaveType.leaveRules.attachmentMandatory){var t={templateUrl:"app/leave/application/bulkAssign/attachment_mandatory_confirmation.html",controller:"LeaveBulkAssignGenericConfirmationController",controllerAs:"modal"};c.showModal(t).then(function(e){$(e.element).openModal(),e.close.then(function(t){t===!0&&(e.element.closeModal(),I())})})}else I()}function I(){var e=n.toStandardDate(Z.model.from)!=n.toStandardDate(Z.model.to);Z.showWorkweekConfirmation&&A(e)?c.showModal({templateUrl:"app/leave/application/bulkAssign/workweek_confirmation.html",controller:"LeaveBulkAssignGenericConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&p.go("leave.bulk_assign.result")})}):p.go("leave.bulk_assign.result")}function A(e){return!e&&"specify_time"==Z.model.duration||e&&"all"==Z.model.partial_day&&"specify_time"==Z.model.partial_all_duration||e&&"start"==Z.model.partial_day&&"specify_time"==Z.model.partial_start_duration||e&&"end"==Z.model.partial_day&&"specify_time"==Z.model.partial_end_duration||e&&"start_end"==Z.model.partial_day&&("specify_time"==Z.model.partial_end_duration||"specify_time"==Z.model.partial_start_duration)}function M(){var e=[],t=[];_.forEach(Z.model.employeeList,function(t){e.push(t.empNumber),t.hasWorkweek&&(Z.showWorkweekConfirmation=!0)}),_.forEach(Z.model.employees,function(a,i){_.includes(e,i)||t.push(i)}),t.length>0&&_.forEach(Z.additionalEmployees,function(e){_.includes(t,e.empNumber)&&(Z.model.employeeList.push(e),e.hasWorkweek&&(Z.showWorkweekConfirmation=!0))})}function L(){f.$broadcast("schemaForm.error.attachment","tv4-302",!0)}function P(e){var t=N();l.show(),a.checkRestrictions(t).then(function(e){var t=e.data.data.metaData;Z.excludeOptions=t&&t.hasOwnProperty("exclude_options")?t.exclude_options:[],Z.model=a.getModifiedModelForExcludeOptions(Z.model,Z.excludeOptions),O(!0)})}function N(){var e=q();return e.employeeId=null,e.type="bulk_assign",e}function O(a){var i,o={};o.country=Z.model.leaveType.OperationalCountry.country_code,e.call("employees/locations","GET",{},{filter:o}).then(function(e){Z.locationOptions=t.getLocationEnumAndTitleMap(e.data.data),""!=Z.model.leaveType&&(Z.model.location=Z.locationOptions["enum"][0]),R(),a?(i=z(Z.locationOptions),G(i),Q!=i&&(Z.model.employees={}),Q=angular.copy(i)):G(),H()})}function R(){var t={};return null!=Z.model.subunit&&(t.sub_unit=Z.model.subunit),""!=Z.model.location?t.location=Z.model.location:""!=Z.model.leaveType?t.location=Z.locationOptions["enum"][0]:t.location="",e.call("employees","GET",[],{filter:t,include:"workweek"}).then(function(e){Z.model.employeeList=e.data.data,H()})}function z(e){return e["enum"]?e["enum"][0]:null}function j(e){Z.model.location=e,R()}function V(e){Z.model.subunit=e,R()}function G(t){var a={};return t&&(a.location=t),e.call("employees","GET",[],{filter:a}).then(function(e){Z.additionalEmployees=e.data.data,D(),H(),l.hide()})}function B(){return C.getLocalizedCustomWithVariables("Matches {{count}} employee(s)",{count:Z.model.employeeList.length})}function q(){var e={};e="all"==Z.model.partial_day?{duration:Z.model.partial_all_duration,halfday:Z.model.partial_all_halfday,time:{from:Z.model.partial_all_st_from,to:Z.model.partial_all_st_to}}:{duration:Z.model.partial_start_duration,halfday:Z.model.partial_start_halfday,time:{from:Z.model.partial_start_st_from,to:Z.model.partial_start_st_to}};var t={leaveTypeId:Z.model.leaveType.id,comment:Z.model.comment,workShiftLength:Z.workSchedule.length,partialDays:Z.model.partial_day,duration:{duration:Z.model.duration,halfday:Z.model.duration_halfday,time:{from:Z.model.duration_st_from,to:Z.model.duration_st_to}},start:e,end:{duration:Z.model.partial_end_duration,halfday:Z.model.partial_end_halfday,time:{from:Z.model.partial_end_st_from,to:Z.model.partial_end_st_to}}};return Z.model.from&&(t.from=n.toStandardDate(Z.model.from)),Z.model.to&&(t.to=n.toStandardDate(Z.model.to)),t}function H(){Z.schema={type:"object",title:"Add Leave Entitlement",properties:{leaveType:{title:"Leave Type",type:"object"},from:{title:"From Date",type:["null","object"]},to:{title:"To Date",type:["null","object"]},comment:{title:"Comment",type:"string",maxLength:250},duration:{title:"Duration",type:"string"},partial_day:{title:"Partial Days",type:"string"},duration_st_from:{title:"From",type:"string"},duration_st_to:{title:"To",type:"string"},duration_st_length:{title:"Duration",type:"string"},partial_all_duration:{title:"Duration",type:"string"},partial_all_st_from:{title:"From",type:"string"},partial_all_st_to:{title:"To",type:"string"},partial_all_st_length:{title:"Duration",type:"string"},partial_start_duration:{title:"Start Day",type:"string"},partial_start_st_from:{title:"From",type:"string"},partial_start_st_to:{title:"To",type:"string"},partial_start_st_length:{title:"Duration",type:"string"},partial_end_duration:{title:"End Day",type:"string"},partial_end_st_from:{title:"From",type:"string"},partial_end_st_to:{title:"To",type:"string"},partial_end_st_length:{title:"Duration",type:"string"},attachment:{title:"Attachment",type:"object"},location:{title:"Location",type:"string"},subunit:{title:"Subunit",type:"string"},employees:{title:C.getLocalizedCustom("Additional Employees to Include"),type:"object"}},required:["leaveType","from","to","duration_st_from","duration_st_to","partial_all_st_from","partial_all_st_to","partial_start_st_from","partial_start_st_to","partial_end_st_from","partial_end_st_to"]},Z.form=[{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"leaveType",titleMap:Z.leaveTypeOptions,validationMessage:{302:C.getLocalizedCustom("Required")},onChange:function(e){P(e)}}]},{type:"section",htmlClass:"row",items:[{type:"date",htmlClass:"col s12 m12 l6",key:"from",required:!0,defaultDate:Z.model.from,resetDefaultDate:Z.resetDefaultDate,ngModelOptions:{allowInvalid:!0},readonly:Z.disabledCalendar,onChange:function(e){F(e),f.$broadcast("schemaForm.error.to","minDate",y.minDate.validator(Z.model.to,Z.model.from))},validationMessage:{dateRequired:y.dateRequiredValidation.message,302:C.getLocalizedCustom("Required"),maxDate:C.getLocalizedCustom("From date should be before to date")},$validators:{maxDate:function(e){return y.maxDate.validator(e,Z.model.to)},dateRequired:function(e){return y.dateRequiredValidation.validator(e)}}},{type:"date",htmlClass:"col s12 m12 l6",key:"to",defaultDate:Z.model.to,resetDefaultDate:Z.resetDefaultDate,readonly:Z.disabledCalendar,ngModelOptions:{allowInvalid:!0},onChange:function(e){k(e),f.$broadcast("schemaForm.error.from","maxDate",y.maxDate.validator(Z.model.from,Z.model.to))},validationMessage:{minDate:C.getLocalizedCustom("To date should be after from date"),dateRequired:y.dateRequiredValidation.message},$validators:{minDate:function(e){return y.minDate.validator(e,Z.model.from)},dateRequired:function(e){return y.dateRequiredValidation.validator(e)}}}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l3",key:"duration",titleMap:a.getDurationOptions(!1,Z.isLeaveWorkWeekEnabled,Z.excludeOptions),emptyOption:!1,condition:"model.from != null && model.from.toString() == model.to.toString()",validationMessage:{shiftLength:C.getLocalizedCustom("Duration should be less than work shift length")}},{type:"select",htmlClass:"col s12 m12 l4",key:"duration_halfday",titleMap:a.getHalfDayOptions(),emptyOption:!1,condition:"(model.from.toString() == model.to.toString()) && model.duration == 'half_day'"},{type:"timepicker",htmlClass:"col s12 m12 l3",key:"duration_st_from",defaultTime:Z.model.duration_st_from,titleMap:a.getTimeRange(),emptyOption:!1,condition:"(model.from.toString() == model.to.toString()) && model.duration == 'specify_time'",onChange:function(){U()},ngModelOptions:{allowInvalid:!0},required:!0,validationMessage:{302:y.required.message()}},{type:"timepicker",htmlClass:"col s12 m12 l3",key:"duration_st_to",defaultTime:Z.model.duration_st_to,titleMap:a.getTimeRange(),emptyOption:!1,condition:"(model.from.toString() == model.to.toString()) && model.duration == 'specify_time'",onChange:function(){U()},ngModelOptions:{allowInvalid:!0},required:!0,validationMessage:{302:y.required.message()}},{type:"text",htmlClass:"col s12 m12 l3",key:"duration_st_length",condition:"(model.from.toString() == model.to.toString()) && model.duration == 'specify_time'",readonly:!0}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l4",key:"partial_day",titleMap:a.getPartialDaysOptions(Z.excludeOptions),emptyOption:!1,condition:"model.from.toString() != model.to.toString()"}]},{type:"section",htmlClass:"row",condition:"model.from.toString() != model.to.toString()",items:[{type:"select",htmlClass:"col s12 m12 l3",key:"partial_all_duration",titleMap:a.getDurationOptions(!0,Z.isLeaveWorkWeekEnabled,Z.excludeOptions),emptyOption:!1,condition:"model.partial_day == 'all'",validationMessage:{shiftLength:C.getLocalizedCustom("Duration should be less than work shift length")}},{type:"select",htmlClass:"col s12 m12 l4",key:"partial_all_halfday",titleMap:a.getHalfDayOptions(),emptyOption:!1,condition:"model.partial_day == 'all' && model.partial_all_duration=='half_day'"},{type:"timepicker",htmlClass:"col s12 m12 l3",key:"partial_all_st_from",defaultTime:Z.model.partial_all_st_from,titleMap:a.getTimeRange(),emptyOption:!1,condition:"model.partial_day == 'all' && model.partial_all_duration == 'specify_time'",onChange:function(){Y()},ngModelOptions:{allowInvalid:!0},required:!0,validationMessage:{302:y.required.message()}},{type:"timepicker",htmlClass:"col s12 m12 l3",key:"partial_all_st_to",defaultTime:Z.model.partial_all_st_to,titleMap:a.getTimeRange(),emptyOption:!1,condition:"model.partial_day == 'all' && model.partial_all_duration == 'specify_time'",onChange:function(){Y()},ngModelOptions:{allowInvalid:!0},required:!0,validationMessage:{302:y.required.message()}},{type:"text",htmlClass:"col s12 m12 l3",key:"partial_all_st_length",condition:"model.partial_day == 'all' && model.partial_all_duration == 'specify_time'",readonly:!0}]},{type:"section",htmlClass:"row",condition:"model.from.toString() != model.to.toString()",items:[{type:"select",htmlClass:"col s12 m12 l3",key:"partial_start_duration",titleMap:a.getDurationOptions(!0,Z.isLeaveWorkWeekEnabled,Z.excludeOptions),emptyOption:!1,condition:"model.partial_day == 'start' || model.partial_day =='start_end'",validationMessage:{shiftLength:C.getLocalizedCustom("Duration should be less than work shift length")}},{type:"select",htmlClass:"col s12 m12 l4",key:"partial_start_halfday",titleMap:a.getHalfDayOptions(),emptyOption:!1,condition:"(model.partial_day == 'start' || model.partial_day =='start_end') && model.partial_start_duration=='half_day'"},{type:"timepicker",htmlClass:"col s12 m12 l3",key:"partial_start_st_from",defaultTime:Z.model.partial_start_st_from,titleMap:a.getTimeRange(),emptyOption:!1,condition:"(model.partial_day == 'start' || model.partial_day =='start_end') && model.partial_start_duration == 'specify_time'",onChange:function(){J()},ngModelOptions:{allowInvalid:!0},required:!0,validationMessage:{302:y.required.message()}},{type:"timepicker",htmlClass:"col s12 m12 l3",key:"partial_start_st_to",defaultTime:Z.model.partial_start_st_to,titleMap:a.getTimeRange(),emptyOption:!1,condition:"(model.partial_day == 'start' || model.partial_day =='start_end') && model.partial_start_duration == 'specify_time'",onChange:function(){J()},ngModelOptions:{allowInvalid:!0},required:!0,validationMessage:{302:y.required.message()}},{type:"text",htmlClass:"col s12 m12 l3",key:"partial_start_st_length",condition:"(model.partial_day == 'start' || model.partial_day =='start_end') && model.partial_start_duration == 'specify_time'",readonly:!0}]},{type:"section",htmlClass:"row",condition:"model.from.toString() != model.to.toString()",items:[{type:"select",htmlClass:"col s12 m12 l3",key:"partial_end_duration",titleMap:a.getDurationOptions(!0,Z.isLeaveWorkWeekEnabled,Z.excludeOptions),emptyOption:!1,condition:"model.partial_day == 'end' || model.partial_day =='start_end'",validationMessage:{shiftLength:C.getLocalizedCustom("Duration should be less than work shift length")}},{type:"select",htmlClass:"col s12 m12 l4",key:"partial_end_halfday",titleMap:a.getHalfDayOptions(),emptyOption:!1,condition:"(model.partial_day == 'end' || model.partial_day =='start_end') && model.partial_end_duration=='half_day'"},{type:"timepicker",htmlClass:"col s12 m12 l3",key:"partial_end_st_from",defaultTime:Z.model.partial_end_st_from,titleMap:a.getTimeRange(),emptyOption:!1,condition:"(model.partial_day == 'end' || model.partial_day =='start_end') && model.partial_end_duration == 'specify_time'",onChange:function(){W()},ngModelOptions:{
allowInvalid:!0},required:!0,validationMessage:{302:y.required.message()}},{type:"timepicker",htmlClass:"col s12 m12 l3",key:"partial_end_st_to",defaultTime:Z.model.partial_end_st_to,titleMap:a.getTimeRange(),emptyOption:!1,condition:"(model.partial_day == 'end' || model.partial_day =='start_end') && model.partial_end_duration == 'specify_time'",onChange:function(){W()},ngModelOptions:{allowInvalid:!0},required:!0,validationMessage:{302:y.required.message()}},{type:"text",htmlClass:"col s12 m12 l3",key:"partial_end_st_length",condition:"(model.partial_day == 'end' || model.partial_day =='start_end') && model.partial_end_duration == 'specify_time'",readonly:!0}]},{type:"section",htmlClass:"row",items:[{type:"textarea",htmlClass:"col s12 m12 l12",key:"comment"}]},{type:"section",htmlClass:"row",items:[{type:"file",htmlClass:"col s12 m12 l6",key:"attachment",onFileChange:L,maxSize:Z.maxAttachmentSize,condition:"vm.leaveTypeSettings.attachment",required:!1,filename:Z.model.attachment?Z.model.attachment.filename:""}]},{type:"section",htmlClass:"row section-heading",items:[{type:"section-heading",htmlClass:"col s12",text:C.getLocalizedCustom("Employee Selection")}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m6 l4",key:"location",titleMap:Z.locationOptions.titleMap,emptyOption:"All",onChange:function(e){j(e)}},{type:"select",htmlClass:"col s12 m6 l4",key:"subunit",titleMap:Z.subunitOptions.titleMap,emptyOption:"All",onChange:function(e){V(e)}},{type:"label",htmlClass:"col s12 m6 l4",key:"matchEmployee",text:B()}]},{type:"section",htmlClass:"row",items:[{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l8",key:"employees",choices:Z.employeeItems}]}];for(var e=Object.keys(Z.extraFields),t=0;t<e.length;t++){var i=e[t];Z.schema.properties[i]=Z.extraFields[i].schema,Z.schema.required.push(i);var o=Z.extraFields[i].formField;o.htmlClass="col s12 m12 l6",o.key=i,Z.form.push({type:"section",htmlClass:"row",items:[o]})}Z.form.push(v.getRequiredMessage())}function U(){f.$applyAsync(function(){Z.model.duration_st_length=K("duration_st_from","duration_st_to",Z.model.start_date_lunch_from,Z.model.start_date_lunch_end)})}function W(){f.$applyAsync(function(){Z.model.partial_end_st_length=K("partial_end_st_from","partial_end_st_to",Z.model.start_date_lunch_from,Z.model.start_date_lunch_end)})}function Y(){f.$applyAsync(function(){Z.model.partial_all_st_length=K("partial_all_st_from","partial_all_st_to",Z.model.start_date_lunch_from,Z.model.start_date_lunch_end)})}function J(){f.$applyAsync(function(){Z.model.partial_start_st_length=K("partial_start_st_from","partial_start_st_to",Z.model.start_date_lunch_from,Z.model.start_date_lunch_end)})}function K(e,t,i,o){var n=C.getLocalizedCustom("Invalid"),l=C.getLocalizedCustom("From time should be before to time"),r=C.getLocalizedCustom("To time should be after from time"),s=y.timeDuration.validator(Z.model[e],Z.model[t]);return s&&(l=!0,r=!0,n=a.calculateShiftLength(Z.model[e],Z.model[t],i,o)),f.$broadcast("schemaForm.error."+e,"timeDuration",l),f.$broadcast("schemaForm.error."+t,"timeDuration",r),n}var Z=this;Z.title="Bulk Assign Leave",Z.model={},Z.model.employeeList=[],Z.model.additionalEmployeeList=[],Z.leaveTypeOptions={titleMap:[],"enum":[]},Z.locationOptions={titleMap:[],"enum":[]},Z.subunitOptions={titleMap:[],"enum":[]},Z.leaveTypeChangeComplete=!1,Z.leaveTypeSettings,Z.workSchedule={},Z.model.leaveType="",Z.model.from=null,Z.model.to=null,Z.model.partial_day="",Z.model.duration="full_day",Z.model.duration_halfday="AM",Z.model.partial_all_duration="half_day",Z.model.partial_all_halfday="AM",Z.model.partial_start_duration="half_day",Z.model.partial_start_halfday="AM",Z.model.partial_end_duration="half_day",Z.model.partial_end_halfday="AM",Z.model.location="",Z.model.subunit="",Z.onSubmit=E,Z.showform=!1,Z.datePickerConfig={},Z.extraFields={},Z.excludeOptions=[],Z.submitInProgress=!1,Z.restricted=!1,Z.formOptionDefaults={destroyStrategy:"retain"},Z.state=p,Z.additionalEmployees=[],Z.getParameters=q,Z.resetDefaultDate={reset:!1},Z.showWorkweekConfirmation=!1;var Q=null;w(),f.$on("timeTextChanged",function(e,t){!t.leaveDurationStType[0]||t.timeText&&t.timeText.match(t.timePattern)||f.$broadcast("schemaForm.error."+t.leaveDurationStType[0],"timeDuration",!0)})}angular.module("app.leave").controller("BulkAssignController",e),e.$inject=["webservice","leaveEmployeeService","leaveApplicationService","leaveTypeService","employeeService","dateService","loader","toast","$q","ModalService","$rootScope","$timeout","$filter","$state","$scope","leaveBalanceService","$stateParams","formHelper","formValidationHelper","datagroupPermissions","localizedMessages"]}(),function(){"use strict";function e(e,t){function a(){t(!0)}function i(){t(!1)}var o=this;o.confirm=a,o.cancel=i}angular.module("app.leave").controller("LeaveBulkAssignGenericConfirmationController",e),e.$inject=["$scope","close"]}(),function(){"use strict";function e(e){e.go("leave.calendar",{filterParameters:{formModel:{employmentStatus:"",year:"current-year",month:"current-month",location:"",employees:{},subunits:{},leaveTypes:{},leaveStatus:{},includeSubordinates:!0,hide_leave_of_team_or_supervisor:!1},view:"month"},calledFromMyShortcuts:!0})}angular.module("app.leave").controller("LeaveCalendarShortCut",e),e.$inject=["$state"]}(),function(){"use strict";function e(e,t,a,i,o,n,l){function r(){c.mode="edit"}function s(){o.call("leaveCalendarLegendColors","PATCH",c.legendColors,{}).then(function(e){n.success("Successfully Updated"),a("refetchEvents")})}var c=this;c.mode=e,c.editLegend=r,c.legendData=t,c.leaveTypeTextList=_.map(t.leaveTypeTextList,function(e,t){return{shortName:t,name:e}}),c.legendColors={},c.showLegendEditLink=i,c.legendColors=_.values(t.leaveTypeColorList),c.save=s,l(function(){$("#calendarLegendModal .modal-content").mCustomScrollbar({theme:"ohrm",scrollInertia:0,axis:"y"})},0)}angular.module("app.leave").controller("LeaveCalendarLegendController",e),e.$inject=["mode","legendData","fullCalendar","showLegendEditLink","webservice","toast","$timeout"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w,_){function S(){b.getPersistedParameters(le).then(function(e){e?(oe.persistedFilters={},angular.copy(e.formModel,oe.persistedFilters),oe.persistedFilters.is_persisted=!0):(oe.persistedFilters={},oe.persistedFilters.employmentStatus="",oe.persistedFilters.year="current-year",oe.persistedFilters.month="current-month",oe.persistedFilters.location="",oe.persistedFilters.employees={},oe.persistedFilters.selectedEmployee=void 0,oe.persistedFilters.subunits={},oe.persistedFilters.leaveTypes={},oe.persistedFilters.leaveStatus={},oe.persistedFilters.includePastEmployees=!1,oe.persistedFilters.hide_leave_of_team_or_supervisor=!1,oe.persistedFilters.is_persisted=!0);var t=C[oe.sessionStorageKeyLastSearchFilters];y.calledFromMyShortcuts&&y.filterParameters&&y.filterParameters.view?(oe.defaultView=y.filterParameters.view,e=y.filterParameters):t&&t.view?(e=t,oe.defaultView=t.view):e&&e.view?oe.defaultView=e.view:oe.defaultView="month",oe.currentViewName=oe.defaultView,oe.defaultViewIsDefined=!0,D(e)})}function D(e){return e&&e.formModel?(oe.formModel=e.formModel,oe.formModel.is_persisted=e.formModel.is_persisted):(oe.formModel={employmentStatus:"",year:"current-year",month:"current-month",location:"",employees:{},subunits:{},leaveTypes:{},leaveStatus:{},selectedEmployee:void 0,includeSubordinates:!0,is_persisted:!0,hide_leave_of_team_or_supervisor:!1,includePastEmployees:!1},oe.showFilter=!0,oe.initialAccessWithNoPersistedFilters=!0,t.$emit("initialAccessWithNoPersistedFilters",{value:!0})),M()}function T(){$(".fc-other-month-hidden-cell").removeClass("fc-other-month-hidden-cell"),"year"==oe.currentViewName&&$(".dateCell").each(function(e,t){var a=$(this).index(),i=a+1,o=$(this).closest(".fc-bg").parent().find(".fc-content-skeleton table thead tr td:nth-child("+i+")");$(o).hasClass("fc-other-month")&&($(o).closest("table").find("tbody tr td:nth-child("+i+")").addClass("fc-other-month-hidden-cell"),$(this).addClass("fc-other-month-hidden-cell"))})}function x(){oe.header=K("getDate").format(" YYYY"),oe.formModel.selectedEmployee&&""!=oe.formModel.selectedEmployee.firstName&&""!=oe.formModel.selectedEmployee.lastName&&(oe.header=oe.header+" ("+oe.formModel.selectedEmployee.firstName+" "+oe.formModel.selectedEmployee.lastName+")")}function F(){var e=K("getDate"),t=e.format("YYYY"),a=t+"-01-01",i=t+"-12-31";if(oe.formModel.selectedEmployee)var o=oe.formModel.selectedEmployee.empNumber;else var o=h.getEmployeeId();var l=[],r={startDate:a,endDate:i,withLength:!0,view:oe.currentViewName,viewAsEmployee:o};l.push(d.call("holidayDates","GET",[],r,void 0));var r={year:t,view:oe.currentViewName,viewAsEmployee:o,withLength:!0};l.push(d.call("weekendDates","GET",[],r,void 0)),n.all(l).then(function(e){var t=e[0].data.data,a=e[1].data.data,i=[],o=[];t[0]&&t[0].length&&(i=i.concat(t[0])),t[4]&&t[4].length&&(o=t[4]),$(".dateCell").removeClass("fullDayLeaveCell halfDayLeaveCell weekEndFullDayCell weekEndHalfDayCell"),$(".dateCell").each(function(e,t){if(i.indexOf($(t).data("date"))>-1&&$(t).addClass("fullDayLeaveCell"),o.indexOf($(t).data("date"))>-1&&$(t).addClass("halfDayLeaveCell"),Object.keys(a).indexOf($(t).data("date"))>-1){var n=a[$(t).data("date")];4==n?$(t).addClass("weekEndHalfDayCell"):$(t).addClass("weekEndFullDayCell")}})})}function k(){var e=K("getDate"),t=e.format("YYYY"),a=t+"-01-01",i=t+"-12-31",o=[],l={startDate:a,endDate:i,withLength:!0};o.push(d.call("holidayDates","GET",[],l,void 0)),n.all(o).then(function(e){var t=e[0].data.data,a=[],i=[];t[0]&&t[0].length&&(a=a.concat(t[0])),t[4]&&t[4].length&&(i=t[4]),$(".dateCell").removeClass("fullDayLeaveCell halfDayLeaveCell weekEndFullDayCell weekEndHalfDayCell"),$(".dateCell").each(function(e,t){a.indexOf($(t).data("date"))>-1&&$(t).addClass("fullDayLeaveCell"),i.indexOf($(t).data("date"))>-1&&$(t).addClass("halfDayLeaveCell")})})}function E(){if("year"==oe.currentViewName)oe.form=[{type:"section",htmlClass:"row leaveCalendarSearchFilterFirstRow",name:"test_name",items:[{type:"auto-complete",condition:"!vm.userdata.hasEssRoleOnly",htmlClass:"col s12 m12 l4",key:"selectedEmployee",placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",idsToSkip:[],includeSelf:!0,permissionType:"leaveCalendar",includePast:1,validationMessage:{yearEmployeeRequired:g.getLocalizedCustom("Required")},$validators:{yearEmployeeRequired:function(e,t){return!(!e||!oe.formModel.selectedEmployee)}},ngModelOptions:{allowInvalid:!0}},{type:"select",htmlClass:"col s12 m12 l2",key:"year",titleMap:oe.yearList.titleMap,emptyOption:!1},{type:"checkbox",htmlClass:"col s12 m12 l4 centred_checkboxes",key:"is_persisted"}]},{type:"section",htmlClass:"row",condition:"!vm.userdata.hasEssRoleOnly",name:"test_name",items:[{type:"section",htmlClass:"row requiredHelperText",items:[{type:"help",helpvalue:"<em>*</em> "+g.getLocalizedCustom("Required field")}]}]}];else{var e="( (vm.userdata.isSupervisor || vm.userdata.isDepartmentHead) && vm.currentViewName != 'year')";oe.form=[{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l4 centred_checkboxes",key:"includePastEmployees",condition:"!vm.userdata.hasEssRoleOnly && vm.currentViewName != 'year'"},{type:"checkbox",htmlClass:"col s12 m12 l4 centred_checkboxes",key:"includeSubordinates",condition:e},{type:"checkbox",htmlClass:"col s12 m12 l4 centred_checkboxes",key:"hide_leave_of_team_or_supervisor"}]},{type:"section",htmlClass:"row",name:"test_name",items:[{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l4",key:"employees",choices:oe.employeeItems,condition:"!vm.userdata.hasEssRoleOnly"},{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l4",key:"subunits",treeStructure:!0,choices:oe.subunitItems,condition:"!vm.userdata.hasEssRoleOnly && vm.currentViewName != 'year'"},{type:"select",htmlClass:"col s12 m12 l2",key:"year",titleMap:oe.yearList.titleMap,emptyOption:!1},{type:"select",htmlClass:"col s12 m12 l2",key:"month",emptyOption:!1,titleMap:[{value:"current-month",name:o.instant("This Month")},{value:"01",name:o.instant("Jan")},{value:"02",name:o.instant("Feb")},{value:"03",name:o.instant("Mar")},{value:"04",name:o.instant("Apr")},{value:"05",name:o.instant("May")},{value:"06",name:o.instant("Jun")},{value:"07",name:o.instant("Jul")},{value:"08",name:o.instant("Aug")},{value:"09",name:o.instant("Sep")},{value:"10",name:o.instant("Oct")},{value:"11",name:o.instant("Nov")},{value:"12",name:o.instant("Dec")}],condition:"vm.currentViewName != 'year'"}]},{type:"section",htmlClass:"row",name:"test_name",items:[{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l4",key:"leaveTypes",choices:oe.leaveTypeItems,condition:"vm.currentViewName != 'year' && model.hide_leave_of_team_or_supervisor"},{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l4",key:"leaveStatus",choices:oe.leaveStatusItems,condition:"vm.currentViewName != 'year' && model.hide_leave_of_team_or_supervisor"},{type:"select",htmlClass:"col s12 m12 l4",key:"employmentStatus",emptyOption:"All",titleMap:oe.employmentStatusEnumTitleMap.titleMap,condition:"!vm.userdata.hasEssRoleOnly && vm.currentViewName != 'year'"}]},{type:"section",htmlClass:"row",name:"test_name",items:[{type:"select",htmlClass:"col s12 m12 l4",key:"location",emptyOption:"All",titleMap:oe.locationEnumTitleMap.titleMap,condition:"vm.currentViewName != 'year'"},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l4 centred_checkboxes",key:"is_persisted",condition:"!"+e}]}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l4 centred_checkboxes",key:"is_persisted",condition:e}]}]}oe.formLoaded=!0}function I(a,i){for(var n=0;n<a.length;n++){var l=a[n],r=$('<a class="fc-day-grid-event fc-h-event fc-event fc-start fc-end fc-draggable fc-resizable moreEvent" style="border-color: #'+l.backgroundColor+'" ><div style="background-color: #'+l.backgroundColor+'" class="eventState"><span id="stateText">'+l.status+'</span></div><div class="fc-content"><img class="circle calendar-tooltip-photo small-avatar" src="'+c.baseUrl+"leave/viewPhoto/empNumber/"+l.empNumber+'/size/small"><span class="fc-title">'+l.title+'</span></div><div class="fc-resizer fc-end-resizer"></div></a>');A(l,oe,o,c,r),r.appendTo(i),r.qtip(),e(r)(t)}}function A(e,t,a,i,o){var n="",l="";""!==e.status&&void 0!==t.legendData.leaveTypeTextList[e.status]?n="<span id=stateTextQtip>"+a.instant(t.legendData.leaveTypeTextList[e.status])+"</span></div>":" "==e.status&&(n="<span id=stateTextQtip>"+a.instant("On Leave")+"</span></div>"),"undefined"!=typeof e.employeeId&&""!==e.employeeId&&(l='<span">'+e.employeeId+"</span><br>");var r='<div class="row event-description-holder valign-wrapper"><div class="col s4 image-container valign-wrapper"><span class="helper"></span><img class="circle calendar-tooltip-photo" src="'+i.baseUrl+"leave/viewPhoto/empNumber/"+e.empNumber+'/size/small"></div><div class="col s8 description-container"><span class="leave-event-title">'+e.title+'</span><br><span class="leave-event-type">'+l+'</span><span class="leave-event-type">'+e.leaveTypeName+'</span><br><span class="leave-event-hours">'+e.hours+' Hr(s)</span><br><span class="leave-event-status">'+n+"</span></div></div>",s='<div style="background-color:#'+e.backgroundColor+'" class=eventState><span  id=stateText>'+e.status+"</span></div>";o.css("border-color","#"+e.backgroundColor),o.attr("qtip",r),o.attr("qtip-class","leave-calendar-qtip z-depth-2"),o.attr("qtip-my","right center"),o.attr("qtip-at","left center"),o.prepend(s)}function M(){return $(".leave-calendar-tabs ul.tabs a").show(),u.getUserData().then(function(e){oe.userdata=e,oe.showLegendEditLink=!1;var t=[];return oe.userdata.hasEssRoleOnly||(t[0]=d.call("employees","GET",[],{filter:{termination:2,permissionType:"leaveCalendar"},fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId",includeSelf:!0})),t[1]=d.call("subunits","GET",[],{tree:!0}),t[2]=f.fetchUnfilteredLocation(),t[3]=d.call("employmentStatus","GET",[]),t[4]=d.call("leaveTypes","GET",[],{calendar:!0}),t[5]=d.call("leaveStatusList","GET",[]),t[5]=d.call("leaveStatusList","GET",[]),t[6]=w.fetchLeaveCalendarConfigurations(),t[7]=u.getPermission("leave_calendar_configuration"),s.show(),n.all(t).then(function(e){var t=n.defer();oe.defaultDate=te(oe.formModel.year)+"-"+ae(oe.formModel.month)+"-"+ie(),P(),oe.calendarConfigured=!0,oe.userdata.hasEssRoleOnly||(oe.employeeItems=m.getItemsForMultyselectAutocomplete(e[0].data.data,function(e){var t=e.firstName+" "+e.lastName;return e.termination_id&&(t+=" ("+o.instant("Past Employee")+")"),{id:e.empNumber,name:t,employeeId:e.employeeId}})),oe.subunitItems=m.getItemsForMultyselectAutocomplete(X(e[1].data.data),{id:"order",name:"name"}),oe.locationEnumTitleMap=f.getLocationEnumAndTitleMap(e[2].data.data),oe.employmentStatusEnumTitleMap=m.getEnumAndTitleMapForSelect(e[3].data.data),oe.leaveTypeItems=m.getItemsForMultyselectAutocomplete(e[4].data.data,{id:"id",name:"name"}),oe.leaveStatusItemsTemp=e[5].data.data,oe.leaveStatusItems=[];for(var a in oe.leaveStatusItemsTemp)oe.leaveStatusItems.push({id:a,name:o.instant(oe.leaveStatusItemsTemp[a])});return oe.leaveStatusItems=m.getItemsForMultyselectAutocomplete(oe.leaveStatusItems,{}),oe.yearList=m.getEnumAndTitleMapForSelect(N()),oe.leaveCalendarConfiguration=e[6].data.data,oe.showLegendEditLink=e[7].update,L(),s.hide(),t.resolve(),t.promise},function(){s.hide()})})}function L(){oe.formSchema={type:"object",title:"Filter By",name:"filter_by",properties:{employees:{title:o.instant("Employee Name"),type:"object"},selectedEmployee:{title:o.instant("Employee Name"),type:"object"},subunits:{title:o.instant("Sub Unit"),type:"object"},year:{title:o.instant("Year"),type:"string","enum":oe.yearList["enum"]},month:{title:o.instant("Month"),type:"string","enum":["current-month","01","02","03","04","05","06","07","08","09","10","11","12"]},leaveTypes:{title:o.instant("Leave Type"),type:"object"},leaveStatus:{title:o.instant("Leave Status"),type:"object"},employmentStatus:{title:o.instant("Employment Status"),type:"string","enum":oe.employmentStatusEnumTitleMap["enum"]},location:{title:o.instant("Location"),type:"string","enum":oe.locationEnumTitleMap["enum"]},includeSubordinates:{title:o.instant("Include Subordinates"),type:"boolean"},includePastEmployees:{title:o.instant("Include Past Employees"),type:"boolean"},is_persisted:{title:o.instant("Make Filter Default"),type:"boolean"},hide_leave_of_team_or_supervisor:{title:oe.leaveCalendarConfiguration.ess_see_supervisor?o.instant("Hide Leave of Team and Supervisor(s)"):o.instant("Hide Leave of Team"),type:"boolean"}},required:[]},E()}function P(){oe.uiConfig={calendar:{defaultDate:oe.defaultDate,height:1e3,editable:!1,header:{left:"",center:"",right:""},eventLimitText:function(e){return o.instant("More")+"..."},loading:function(e,t){e?s.show():s.hide()},dayNamesShort:re,monthNamesShort:se,monthNames:ce,dayNames:de,buttonText:{today:o.instant("Today"),month:o.instant("Month"),week:o.instant("Week"),day:o.instant("Day")},businessHours:!1,lazyFetching:!1,eventLimit:!0,eventClick:oe.alertOnEventClick,eventRender:oe.eventRender,viewRender:oe.viewRender,dayRender:oe.dayRender,dayClick:oe.dayClick,eventAfterAllRender:function(e){oe.addFormattingToDateHeaders(),T()},eventLimitClick:function(e,t){return clearInterval(oe.eventLimitClickInterval),oe.eventLimitClickInterval=setInterval(function(){var t=$("div.fc-popover.fc-more-popover div.fc-body.fc-widget-content"),a=$(".fc-popover.fc-more-popover .fc-event-container");t.length&&a.length&&!oe.pendingLeaveFetch&&($("html, body").animate({scrollTop:t.parent().offset().top-100},800),t.attr("page",1),oe.lastParam.page=1,oe.lastParam.start=oe.lastParam.end=e.date.format("YYYY-MM-DD"),a.parent().find(".eventsPopoverProgress").length||$('<div class="progress eventsPopoverProgress"><div class="indeterminate"></div></div>').appendTo(a.parent()),oe.pendingLeaveFetch=!0,d.call("leaveEvents","GET",[],oe.lastParam).then(function(i){$(".eventsPopoverProgress").remove();var o=i.data.data;a.html(""),I(o,a),a.addClass("show"),t.mCustomScrollbar({theme:"ohrm",scrollInertia:0,axis:"y",callbacks:{onTotalScroll:function(){if(!oe.pendingLeaveFetch){t.attr("page")||t.attr("page",1);var i=t.attr("page");oe.lastParam.page=++i,oe.lastParam.start=oe.lastParam.end=e.date.format("YYYY-MM-DD"),oe.pendingLeaveFetch=!0,$('<div class="progress eventsPopoverProgress"><div class="indeterminate"></div></div>').appendTo(a),d.call("leaveEvents","GET",[],oe.lastParam).then(function(e){var o=e.data.data;o.length>0&&t.attr("page",i),$(".eventsPopoverProgress").remove(),I(o,a),oe.pendingLeaveFetch=!1},function(){$(".eventsPopoverProgress").remove(),oe.pendingLeaveFetch=!1})}}}}),clearInterval(oe.eventLimitClickInterval),oe.pendingLeaveFetch=!1},function(){$(".eventsPopoverProgress").remove(),oe.pendingLeaveFetch=!1}))},1e3),"popover"},views:{day:{eventLimit:!1},year:{yearColumns:3,fixedWeekCount:6}},defaultView:oe.defaultView}}}function N(){var e=(new Date).getFullYear()+1,t=[];t.push({id:"current-year",name:o.instant("This Year")});for(var a=e;a>e-10;a--)t.push({id:a.toString(),name:a.toString()});return t}function O(){oe.showFilter=!oe.showFilter}function R(){oe.filterUpdated=!1,r.calendars.leaveCalendar.fullCalendar("next"),Q()}function z(){oe.filterUpdated=!1,r.calendars.leaveCalendar.fullCalendar("prev"),Q()}function j(){var e=K("getView").name;if(oe.currentViewName=e,"month"==e)oe.header=o.instant(K("getDate").format("MMMM"))+K("getDate").format(" YYYY");else if("basicWeek"==e){var t=Z(),a=moment(t.start),i=moment(t.end).subtract(1,"d");oe.header=o.instant(a.format("MMM"))+" "+a.format("D")+" - "+o.instant(i.format("MMM"))+" "+i.format("D")}else"year"==e&&(oe.header=K("getDate").format(" YYYY"),oe.formModel.selectedEmployee&&""!=oe.formModel.selectedEmployee.firstName&&""!=oe.formModel.selectedEmployee.lastName&&(oe.header=oe.header+" ("+oe.formModel.selectedEmployee.firstName+" "+oe.formModel.selectedEmployee.lastName+")"))}function V(){oe.showCalendar=!0,oe.hideYearViewCalendar=!1;var e=K("getView").name;K("changeView","month"),i(function(){"year"==e&&(E(),k())}),oe.formSchema&&!oe.formSchema.required&&(oe.formSchema.required=[]),j()}function G(){oe.hideYearViewCalendar=!1,oe.showCalendar=!0;var e=K("getView").name;K("changeView","basicWeek"),i(function(){"year"==e&&(E(),k())}),oe.formSchema&&!oe.formSchema.required&&(oe.formSchema.required=[]),j()}function B(){oe.skipTabAction?oe.skipTabAction=!1:(oe.formModel&&oe.formModel.selectedEmployee||oe.userdata&&oe.userdata.hasEssRoleOnly?oe.hideYearViewCalendar=!1:(oe.hideYearViewCalendar=!0,oe.showFilter=!0),K("changeView","year"),i(function(){E(),oe.formSchema&&!oe.formSchema.required&&(oe.formSchema.required=[]),oe.formSchema.required.push("selectedEmployee"),j(),oe.userdata&&oe.userdata.hasEssRoleOnly&&F()}))}function q(){$(".fc-basicWeek-view table thead tr th.fc-day-header.fc-widget-header").each(function(){var e=$(this).html(),t=e.split(" ");$(this).html(t[0]+' <span class="dateAndMonth">'+t[1]+"</span>")})}function H(){l.showModal({templateUrl:"app/leave/calendar/calendar_legend.html",controller:"LeaveCalendarLegendController",controllerAs:"modal",inputs:{mode:"show",legendData:oe.legendData,fullCalendar:K,showLegendEditLink:oe.showLegendEditLink}}).then(function(e){$(e.element).openModal()})}function U(){l.showModal({templateUrl:"app/leave/calendar/calendar_legend.html",controller:"LeaveCalendarLegendController",controllerAs:"modal",inputs:{mode:"edit",legendData:oe.legendData,fullCalendar:K,showLegendEditLink:oe.showLegendEditLink}}).then(function(e){$(e.element).openModal()})}function W(e){t.$broadcast("schemaFormValidate"),e.$valid&&(i(function(){oe.hideYearViewCalendar=!1,oe.showCalendar=!0,K("gotoDate",te(oe.formModel.year)+"-"+ae(oe.formModel.month)+"-"+ie()),oe.filterUpdated=!0,"year"==oe.currentViewName&&F();var e=oe.formModel.is_persisted,a={formModel:oe.formModel,view:oe.currentViewName};if(v.go(v.current.name,{filterParameters:a}),e){var i={};angular.copy(a.formModel,i),oe.persistedFilters=i,b.persistParameters(le,a)}oe.initialAccessWithNoPersistedFilters=!1,t.$emit("initialAccessWithNoPersistedFilters",{value:!1}),C[oe.sessionStorageKeyLastSearchFilters]=a,t.$emit("changeCalledFromMyShortcutsVariable"),K("refetchEvents")}),"year"==oe.currentViewName&&x())}function Y(){t.$broadcast("schemaFormRedraw"),oe.filterUpdated=!0,oe.formModel.employmentStatus=oe.persistedFilters.employmentStatus,oe.formModel.year=oe.persistedFilters.year,oe.formModel.month=oe.persistedFilters.month,K("gotoDate",te(oe.formModel.year)+"-"+ae(oe.formModel.month)+"-"+ie()),oe.formModel.location=oe.persistedFilters.location,oe.formModel.employees=oe.persistedFilters.employees,oe.formModel.selectedEmployee=oe.persistedFilters.selectedEmployee?oe.persistedFilters.selectedEmployee:void 0,oe.formModel.subunits=oe.persistedFilters.subunits,oe.formModel.leaveTypes=oe.persistedFilters.leaveTypes,oe.formModel.leaveStatus=oe.persistedFilters.leaveStatus,oe.formModel.includePastEmployees=oe.persistedFilters.includePastEmployees,oe.formModel.hide_leave_of_team_or_supervisor=oe.persistedFilters.hide_leave_of_team_or_supervisor,oe.formModel.is_persisted=oe.persistedFilters.is_persisted,i(function(){K("refetchEvents"),oe.formModel.is_persisted=oe.persistedFilters.is_persisted})}function J(e){var t=e.getMonth()+1;return t>9?""+t:"0"+t}function K(e,t){return r.calendars.leaveCalendar.fullCalendar(e,t)}function Z(){var e=K("getCalendar"),t=e.getView(),a=t.start._d,i=t.end._d,o={start:a,end:i};return o}function Q(){var e=K("getDate");oe.formModel.year=e.format("YYYY"),oe.formModel.month=e.format("MM")}function X(e){var e=e.map(function(e){for(var t=1;t<e.level;t++)e.name=""+e.name;return e.order=oe.orderToIdMap.length.toString(),oe.orderToIdMap.push(e.id),e});return e}function ee(e){var t=e.map(function(e){return o.instant(e)});return t}function te(e){var t=new Date;return"current-year"===e?t.getFullYear().toString():e}function ae(e){var t=new Date;return"current-month"===e?J(t):e}function ie(){return"current-year"===oe.formModel.year&&"current-month"===oe.formModel.month?moment().format("DD"):"01"}var oe=this;oe.showFilter=!1,oe.next=R,oe.prev=z,oe.toggleFilter=O,oe.showMonthView=V,oe.showWeekView=G,oe.showYearView=B,oe.showLegend=H,oe.editLegend=U,oe.skipTabAction=!1,oe.eventRequestCount=0,oe.shotcutSearchComplete=!1,oe.currentViewName,oe.lastParam,oe.pendingLeaveFetch=!1,oe.orderToIdMap=[],oe.filterUpdated=!1,oe.legendData="",oe.showCalendar=!0,oe.leaveCalendarDayDescription={isWorkingDay:!1},oe.dayDescriptionLoading=!0,oe.reset=Y,oe.filter=W,oe.addFormattingToDateHeaders=q;var ne=new Date,le=(ne.getDate(),ne.getMonth(),ne.getFullYear(),"leave_calender");oe.eventLimitClickInterval,oe.initialAccessWithNoPersistedFilters=!1,oe.formModel={employmentStatus:"",year:"current-year",month:"current-month",location:"",employees:{},subunits:{},leaveTypes:{},leaveStatus:{},selectedEmployee:void 0,includeSubordinates:!0,hide_leave_of_team_or_supervisor:!1,includePastEmployees:!1},oe.formLoaded=!1,oe.defaultViewIsDefined=!1,oe.sessionStorageKeyLastSearchFilters="leave_calendar_last_search_filters",oe.hideYearViewCalendar=!1,oe.calendarConfigured=!1;var re=ee(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),se=ee(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),ce=ee(["January","February","March","April","May","June","July","August","September","October","November","December"]),de=ee(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]);t.$watch("vm.formModel",function(e,t){function a(e){var t={};for(var a in e)""===e[a]?t[a]=null:"is_persisted"!==a&&"employee_name"!==a&&(t[a]=e[a]);return t}if("object"==typeof e&&"object"==typeof t&&Object.keys(e).length>0&&Object.keys(t).length>0&&e.is_persisted===t.is_persisted){var i=a(e),o=a(t);JSON.stringify(i)!=JSON.stringify(o)&&(oe.formModel.is_persisted=!1)}},!0),S(),oe.events=function(e,t,a,i){var o={},n=C[oe.sessionStorageKeyLastSearchFilters];n&&!y.filterParameters&&n.formModel&&(oe.formModel=n.formModel),angular.copy(oe.formModel,o),"year"==oe.currentViewName?(o={},o.year=oe.formModel.year,o.includePastEmployees=!0,o.includeSubordinates=!0,o.employees=[],oe.formModel.selectedEmployee?o.employees.push(oe.formModel.selectedEmployee.empNumber):oe.userdata&&oe.userdata.hasEssRoleOnly&&(o.employees.push(h.getEmployeeId()),d.call("employees","GET",[],{employee_id_list:[h.getEmployeeId()],fields:"empNumber,firstName,middleName,lastName",includeSelf:!0}).then(function(e){for(var t=e.data.data,a=0;a<t.length;a++)if(t[a].empNumber==h.getEmployeeId()){oe.formModel.selectedEmployee=t[a];break}x()}),oe.showCalendar=!0)):(o.employees=Object.keys(o.employees),o.subunits=Object.keys(o.subunits).map(function(e){return oe.orderToIdMap[e]}),1==oe.formModel.hide_leave_of_team_or_supervisor?(o.leaveTypes=Object.keys(o.leaveTypes),o.leaveStatus=Object.keys(o.leaveStatus)):(delete o.leaveTypes,delete o.leaveStatus)),o.start=e.format("YYYY-MM-DD"),o.end=t.format("YYYY-MM-DD"),o.view=oe.currentViewName,o.selectedEmployee&&delete o.selectedEmployee,d.call("leaveEvents","GET",[],o).then(function(e){delete o.view,oe.lastParam=o,oe.legendData=e.data.meta.legend,i(e.data.data),j(),F()})},oe.addRemoveEventSource=function(e,t){var a=0;angular.forEach(e,function(i,o){e[o]===t&&(e.splice(o,1),a=1)}),0===a&&e.push(t)},oe.remove=function(e){oe.events.splice(e,1)},oe.changeView=function(e,t){r.calendars[t].fullCalendar("changeView",e)},oe.renderCalender=function(e){r.calendars[e]&&r.calendars[e].fullCalendar("render")},oe.viewRender=function(e,t){oe.currentViewName=e.name,$(".fc-year-monthly-name a").off("click"),$(".fc-year-monthly-name a").unbind("click"),$(".fc-year-week-days .fc-day-header.fc-year-weekly-head , .fc-year-monthly-name a").each(function(e,t){$(t).text(o.instant($(t).text()))})},oe.dayClick=function(a,i,o){if("year"!=oe.currentViewName||!$(this).hasClass("fc-other-month-hidden-cell")){var n={};angular.copy(oe.formModel,n),n.date=a.format("YYYY-MM-DD"),n.subunits=Object.keys(n.subunits).map(function(e){return oe.orderToIdMap[e]}),n.employees=Object.keys(n.employees),"year"==oe.currentViewName&&n.selectedEmployee&&n.selectedEmployee.empNumber&&(n.viewAsEmployee=n.selectedEmployee.empNumber),n.view=oe.currentViewName,n.leaveTypes=Object.keys(n.leaveTypes),n.leaveStatus=Object.keys(n.leaveStatus),n.leavecalendar_showSubOradinate=!0,oe.leaveCalendarDayDescription={isWorkingDay:!1},oe.dayDescriptionLoading=!0,d.call("holidayLeaveInfo","GET",[],n,3e4,!1).then(function(e){oe.leaveCalendarDayDescription=e.data,e.data.weekendFullDays&&0==e.data.weekendFullDays.length&&e.data.weekendHalfDays&&0==e.data.weekendHalfDays.length&&e.data.holidayFullDays&&0==e.data.holidayFullDays.length&&e.data.holidayHalfDays&&0==e.data.holidayHalfDays.length?oe.leaveCalendarDayDescription.isWorkingDay=!0:oe.leaveCalendarDayDescription.isWorkingDay=!1,oe.dayDescriptionLoading=!1},function(){oe.dayDescriptionLoading=!1});var l=angular.element(i.target);l.attr("qtip",""),l.attr("qtip-template","app/leave/calendar/day-description.html"),l.attr("qtip-template-object","{leaveCalendarDayDescription : vm.leaveCalendarDayDescription, dayDescriptionLoading : vm.dayDescriptionLoading}"),l.attr("qtip-class","leave-calendar-qtip z-depth-2"),l.attr("qtip-show","{event: 'click'}"),l.attr("qtip-my","bottom center"),l.attr("qtip-at","top left"),l.addClass("qtipEventDate"),e(l)(t)}},oe.dayRender=function(e,t){var a=K("getDate"),i=a.format("YYYY"),o=i+"-01-01",l=i+"-12-31";if(oe.formModel.selectedEmployee)var r=oe.formModel.selectedEmployee.empNumber;else var r=h.getEmployeeId();var s=[],c={startDate:o,endDate:l,withLength:!0,view:oe.currentViewName,viewAsEmployee:r};s.push(d.call("holidayDates","GET",[],c,void 0,!0)),
n.all(s).then(function(a){var i=a[0].data.data,o=[],n=[];i[0]&&i[0].length&&(o=o.concat(i[0])),i[4]&&i[4].length&&(n=i[4]),o.indexOf(e.format("YYYY-MM-DD"))>-1?$(t).addClass("fullDayLeaveCell"):n.indexOf(e.format("YYYY-MM-DD"))>-1&&$(t).addClass("halfDayLeaveCell"),$(t).data("date",e.format("YYYY-MM-DD")),$(t).addClass("dateCell")})},oe.eventRender=function(a,i,n){A(a,oe,o,c,i),e(i)(t)},oe.eventSources=[oe.events]}angular.module("app.leave").controller("MonthlyLeaveCalendar",e),e.$inject=["$compile","$scope","$rootScope","$timeout","$translate","$q","ModalService","uiCalendarConfig","loader","LOGIN","webservice","formHelper","datagroupPermissions","$window","leaveEmployeeService","localizedMessages","userService","$state","$stateParams","dataListSettingsService","$localStorage","leaveCalendarConfigurationService","numberService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c){function d(){i.show(),a.getPermissions().then(function(e){e.leave_calendar_configuration&&e.leave_calendar_configuration.read?(p.permissions=e.leave_calendar_configuration,o.fetchLeaveCalendarConfigurations().then(function(e){var t=e.data.data,a=l.getEnumAndTitleMapForSelect(e.data.meta.ess_see_ess_options),i={leaveTypes:r.get("leave/types",{filter:{type:"leaveList"}},{}),leaveStatus:r.get("leave/status",{},{})};s.all(i).then(function(e){p.leaveTypes=o.getLeaveTypesForMultiSelectAutoComplete(e.leaveTypes.data.data),p.leaveStatus=o.getLeaveStatusForMultiSelectAutoComplete(e.leaveStatus.data),u(t,a)})})):t.go("403")})["finally"](function(){i.hide()})}function m(t){if(e.$broadcast("schemaFormValidate"),t.$valid&&p.permissions.update){i.show();var a=_.clone(p.model);a.ess_see_ess_exclude_leave_status=o.getKeys(a.ess_see_ess_exclude_leave_status),a.ess_see_supervisor_exclude_leave_status=o.getKeys(a.ess_see_supervisor_exclude_leave_status),a.supervisor_see_ess_exclude_leave_status=o.getKeys(a.supervisor_see_ess_exclude_leave_status),a.admin_see_ess_exclude_leave_status=o.getKeys(a.admin_see_ess_exclude_leave_status),a.exclude_leave_type=o.getKeys(a.exclude_leave_type),o.updateLeaveCalendarConfigurations(a).then(function(e){var t=e.data.success;t?n.showLocalizedToast("saveSuccess"):n.errorToast("Failed to Save")},function(e){n.errorToast("Failed to Save")})["finally"](function(){i.hide()})}}function u(e,t){p.schema={type:"object",readonly:!0,properties:{ess_see_ess:{title:c.instant("Show Employee, Leave of Employees of"),type:"number","enum":t["enum"]},ess_see_ess_exclude_leave_status:{title:c.instant("Hide Leave with Status"),type:"object"},ess_see_supervisor:{title:"Show Employee, Leave of Supervisor(s)",type:"boolean"},ess_see_supervisor_exclude_leave_status:{title:c.instant("Hide Leave with Status"),type:"object"},supervisor_see_ess:{title:"Show Supervisors, Leave of Subordinates",type:"boolean"},supervisor_see_ess_exclude_leave_status:{title:c.instant("Hide Leave with Status"),type:"object"},admin_see_ess:{title:"Show Admins, Leave of Employees in their Administrative Region",type:"boolean"},admin_see_ess_exclude_leave_status:{title:c.instant("Hide Leave with Status"),type:"object"},exclude_leave_type:{title:c.instant("Exclude Leave Having: Leave Type"),type:"object"}}},p.form=[{type:"section",htmlClass:"row",items:[{htmlClass:"col s12 m12 l6",type:"select",key:"ess_see_ess",emptyOption:!1,titleMap:t.titleMap},{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l6",key:"ess_see_ess_exclude_leave_status",choices:p.leaveStatus}]},{type:"horizontal-divided-section",htmlClass:"row",items:[{htmlClass:"col s12 m12 l6 centred_checkboxes",type:"checkbox",key:"ess_see_supervisor"},{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l6",key:"ess_see_supervisor_exclude_leave_status",choices:p.leaveStatus}]},{type:"horizontal-divided-section",htmlClass:"row",items:[{htmlClass:"col s12 m12 l6 centred_checkboxes",type:"checkbox",key:"supervisor_see_ess",readonly:!0},{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l6",key:"supervisor_see_ess_exclude_leave_status",choices:p.leaveStatus}]},{type:"horizontal-divided-section",htmlClass:"row",items:[{htmlClass:"col s12 m12 l6 centred_checkboxes",type:"checkbox",key:"admin_see_ess",readonly:!0},{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l6",key:"admin_see_ess_exclude_leave_status",choices:p.leaveStatus}]},{type:"horizontal-divided-section",htmlClass:"row",items:[{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l6",key:"exclude_leave_type",choices:p.leaveTypes}]}],p.model={ess_see_ess:e.ess_see_ess,ess_see_ess_exclude_leave_status:o.filterActiveOptions(p.leaveStatus,e.ess_see_ess_exclude_leave_status),ess_see_supervisor:e.ess_see_supervisor,ess_see_supervisor_exclude_leave_status:o.filterActiveOptions(p.leaveStatus,e.ess_see_supervisor_exclude_leave_status),supervisor_see_ess:e.supervisor_see_ess,supervisor_see_ess_exclude_leave_status:o.filterActiveOptions(p.leaveStatus,e.supervisor_see_ess_exclude_leave_status),admin_see_ess:e.admin_see_ess,admin_see_ess_exclude_leave_status:o.filterActiveOptions(p.leaveStatus,e.admin_see_ess_exclude_leave_status),exclude_leave_type:o.filterActiveOptions(p.leaveTypes,e.exclude_leave_type)},p.permissions.update&&(p.schema.readonly=!1)}var p=this;p.permissions={read:!1},p.leaveTypes=[],p.leaveStatus=[],p.onSubmit=m,d()}angular.module("app.leave").controller("LeaveCalendarConfigurationController",e),e.$inject=["$scope","$state","datagroupPermissions","loader","leaveCalendarConfigurationService","localizedMessages","formHelper","webservice","$q","$translate"]}(),function(){"use strict";function e(e,t,a,i,o,n){var l=this;l.valueOfUnused=e,l.valueOfOverdrawn=t,l.valueOfNetBalance=a,l.overdrawnLeaveLink=i,l.isLink=function(e){return!!l.overdrawnLeaveLink&&0!==parseFloat(e)},n.close=o}angular.module("app.leave").controller("netBalanceBreakdownModalController",e),e.$inject=["valueOfUnused","valueOfOverdrawn","valueOfNetBalance","overdrawnLeaveLink","close","modalFunctions"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c){function d(e){v.formModel=angular.extend(v.formModel,e),v.editable=e.editable,v.formModel.cmbStartMonth&&p(v.formModel.cmbStartMonth),f()}function m(){t.show();var a={leavePeriod:e.call("leavePeriod","GET",{}),permissions:n.getPermissions()};l.all(a).then(function(e){var a=[{value:"1",name:o.getLocalizedCustom("January")},{value:"2",name:o.getLocalizedCustom("February")},{value:"3",name:o.getLocalizedCustom("March")},{value:"4",name:o.getLocalizedCustom("April")},{value:"5",name:o.getLocalizedCustom("May")},{value:"6",name:o.getLocalizedCustom("June")},{value:"7",name:o.getLocalizedCustom("July")},{value:"8",name:o.getLocalizedCustom("August")},{value:"9",name:o.getLocalizedCustom("September")},{value:"10",name:o.getLocalizedCustom("October")},{value:"11",name:o.getLocalizedCustom("November")},{value:"12",name:o.getLocalizedCustom("December")}];v.startMonths=s.getEnumAndTitleMapForSelect(a,{name:"name",value:"value"},!0);var i=e.leavePeriod.data.data;u(e.permissions,i),d(i),g(),t.hide(),null!==localStorage.getItem("toast")&&(o.showLocalizedToast(localStorage.getItem("toast")),localStorage.removeItem("toast"))})}function u(e,a){v.permissions=e.leave_period,v.permissions.read||(t.hide(),r.go("403")),a.leavePeriodDefined||v.permissions.update||(t.hide(),r.go("leave.leave-period-not-defined"))}function p(e){var t=s.getEnumAndTitleMapForSelect(c.getLeavePeriodDatesOfMonth(e),{name:"name",value:"value"});angular.copy(t["enum"],v.enumForFormForStartDate),angular.copy(t.titleMap,v.titleMapForFormForStartDate),i.$broadcast("schemaFormRedraw")}function f(){if(v.formModel.cmbStartMonth&&v.formModel.cmbStartDate){var e=new Date((new Date).getFullYear(),v.formModel.cmbStartMonth-1,v.formModel.cmbStartDate),t=angular.copy(e);t.setYear(t.getFullYear()+1),t.setDate(t.getDate()-1);var a=["January","February","March","April","May","June","July","August","September","October","November","December"],i=""+o.getLocalizedCustom(a[t.getMonth()])+" "+t.getDate();e.getFullYear()<t.getFullYear()&&(i+=" ("+o.getLocalizedCustom("Following Year")+")"),v.formModel.cmbEndDate=i}}function g(){v.schema={type:"object",title:"Define Timesheet Period",properties:{cmbStartMonth:{title:"Start Month",type:"string","enum":v.startMonths["enum"]},cmbStartDate:{title:"Start Date",type:"string","enum":v.enumForFormForStartDate},cmbEndDate:{title:"End Date",type:"string"},currentLeavePeriod:{title:"Current Leave Period",type:"string"}},required:["cmbStartMonth","cmbStartDate"]},v.form=[{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"cmbStartMonth",titleMap:v.startMonths.titleMap,onChange:function(e,t){e&&p(e),v.formModel.cmbStartDate="",v.formModel.cmbEndDate=""},readonly:!v.editable,validationMessage:{requiredValidation:o.getLocalizedCustom("Required")}},{type:"select",htmlClass:"col s12 m12 l6",key:"cmbStartDate",titleMap:v.titleMapForFormForStartDate,onChange:function(e,t){e?f():v.formModel.cmbEndDate=""},readonly:!v.editable,validationMessage:{requiredValidation:o.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l6",key:"cmbEndDate",readonly:!0},{type:"text",htmlClass:"col s12 m12 l6",key:"currentLeavePeriod",readonly:!0,condition:"model.leavePeriodDefined"}]}],v.editable&&(s.addRequiredMessage(v.form),v.form.push({type:"section",htmlClass:"row form-buttons",items:[{htmlClass:"col s12 right-align",type:"submit",title:"Save"}]}))}function h(){var i="leavePeriod",n="PATCH",l="updateSuccess",r="Failed to Save",s={cmbStartMonth:v.formModel.cmbStartMonth,cmbStartDate:v.formModel.cmbStartDate},c=angular.copy(v.formModel.leavePeriodDefined);e.call(i,n,s).then(function(e){t.show(),1==e.data.data.success?(d(e.data.data.leavePeriodInfo),t.hide(),c?o.showLocalizedToast(l):(location.reload(),localStorage.setItem("toast","saveSuccess"))):(t.hide(),a.warning(r))},function(e){t.hide(),a.warning(e)})}var v=this;v.formModel={},v.formModel.cmbStartMonth="",v.formModel.cmbStartDate="",v.formModel.cmbEndDate="",v.formModel.currentLeavePeriod="",v.formModel.leavePeriodDefined=!1,v.editable,v.titleMapForFormForStartDate=[],v.enumForFormForStartDate=[],m(),v.onSubmit=function(e){i.$broadcast("schemaFormValidate"),e.$valid&&h()}}angular.module("app.leave").controller("LeaveDefineLeavePeriodController",e),e.$inject=["webservice","loader","toast","$scope","localizedMessages","datagroupPermissions","$q","$state","formHelper","leavePeriodService"]}(),function(){"use strict";function e(e,t,a){var i="Leave Period Not Defined";e.warning(t.getLocalizedCustom(i)),a.setForcedTitle(["Leave Period"])}angular.module("app.leave").controller("LeavePeriodNotDefinedController",e),e.$inject=["toast","localizedMessages","titleService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){u.getPermission("leave_types").then(function(e){self.permissions=e,self.fetchLeaveTypeRule()})}function f(){r.call("leaveTypeRule/id/"+self.id,"GET",[]).then(function(e){e=e.data.data,Object.assign(self.leavePeriodHistory,e.leavePeriod),self.leaveTypeRule=e,self.form=g(),self.schema=h(),self.model=v(self.defaultConfiguration,e)})}function g(){return{}}function h(){return[]}function v(e,t){return Object.assign({},e,t)}function y(){self.model=v(self.defaultConfiguration,self.leaveTypeRule)}function b(e){o.$broadcast("schemaFormValidate"),e.$valid&&C()}function C(){}var w=this;w.title="Apply Restriction",self.id=l.id,self.init=p,self.fetchLeaveTypeRule=f,self.getModel=v,self.setFormDefaults=y,self.onSubmit=b,w.defaultConfiguration={},w.model={},p()}angular.module("app.leave").controller("LeaveDefineLeaveTypeRuleApplyRestrictionController",e),e.$inject=["localizedMessages","logger","$q","$rootScope","$scope","$window","$stateParams","webservice","$timeout","toast","pimHelper","ModalService","datagroupPermissions"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y){function b(){var t={permissions:p.getPermission("leave_types"),leaveTypeRule:s.call("leaveTypeRule/id/"+P.id,"GET",[]),settings:s.call("settings","GET",{}),leaveTypes:s.call("leaveTypes","GET",{})};a.all(t).then(function(t){if($=f.getEnumAndTitleMapForSelect(g.getLeavePeriodPossibleStartMonths(),{name:"name",value:"value"}),O=[{value:"1",name:e.getLocalizedCustom("1 Year")},{value:"2",name:e.getLocalizedCustom("2 Year")},{value:"3",name:e.getLocalizedCustom("3 Year")},{value:"4",name:e.getLocalizedCustom("4 Year")},{value:"5",name:e.getLocalizedCustom("5 Year")}],R=f.getEnumAndTitleMapForSelect(O,{name:"name",value:"value"}),P.currentLeaveType=_.find(t.leaveTypes.data.data,{id:P.id}),P.currentLeaveType?(y.setForcedTitle(["Leave","Configure",P.currentLeaveType.name]),P.currentLeaveType.is_short_term?P.defaultConfiguration.defaultEntitlementValidity="":(P.defaultConfiguration.leavePeriodType="",P.defaultConfiguration.leavePeriodDuration="",P.defaultConfiguration.leavePeriodStartMonth="",P.defaultConfiguration.leavePeriodStartDay="")):y.setForcedTitle(["Leave","Configure"]),i.$broadcast("addTopMenuBackButton",{uiSref:"vueleave.leave_type_list",tooltip:"Leave Types"}),P.permissions=C(t.permissions),P.permissions){P.leaveTypeRule=t.leaveTypeRule.data.data;var a=t.settings.data.data;P.settings={enableLeaveTypeLeavePeriod:a.leave.enable_leave_type_leave_period},P.model=k(P.defaultConfiguration,P.leaveTypeRule,P.settings),D(P.leaveTypeRule.leavePeriodStartMonth,!0),P.schema=w(),P.form=S(),P.permissions.update&&f.addRequiredMessage(P.form)}})}function C(e){return e.read?e:void h.go("403")}function w(){return{type:"object",title:"General",readonly:!P.permissions.update||!P.leaveTypeRule.modifiable,properties:{leavePeriodType:{title:"Leave Period",type:"string","enum":["1","2","3"]},leavePeriodStartDay:{title:"Start Date",type:"string","enum":N["enum"]},leavePeriodStartMonth:{title:"Start Month",type:"string","enum":$["enum"]},leavePeriodDuration:{title:"Duration",type:"string","enum":R["enum"]},defaultEntitlementValidity:{title:"Default Entitlement Validity (Days)",type:"string",minimum:1,maximum:365},canEssApply:{title:"Employees can apply for this leave type",type:"boolean"},canAdminAssign:{title:"Admin can assign leave to employees",type:"boolean"},canSupervisorAssign:{title:"Supervisor and Head of Department can assign leave to employees",type:"boolean"},canAdminAdjust:{title:"Admin can add and adjust leave entitlements",type:"boolean"},isLeaveAccrueEnabled:{title:"Enable leave accrue",type:"boolean"},isCarryForwardEnabled:{title:"Enable leave carried forward",type:"boolean"},showWarningUponInsufficientBalance:{title:"Show warning if balance is not sufficient when allowed to apply/assign more than the leave balance",type:"boolean"},showProjectedBalance:{title:"Show projected balance when applying/assigning",type:"boolean"},isAttachmentEnabled:{title:"Enable attachment",type:"boolean"},attachmentOption:{title:" ",type:"string","enum":P.attachmentOptions["enum"]},holidaysAsWorkingDay:{title:"Consider holidays as working days",type:"boolean"},weekendsAsWorkingDay:{title:"Consider weekends as working days",type:"boolean"}},required:["leavePeriodType","leavePeriodStartDay","leavePeriodStartMonth","leavePeriodDuration","defaultEntitlementValidity"]}}function S(){return[{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"leavePeriodType",titleMap:[{value:"1",name:e.getLocalizedCustom("Default")},{value:"2",name:e.getLocalizedCustom("Hire Date Base Leave Period")},{value:"3",name:e.getLocalizedCustom("Custom Leave Period")}],onChange:function(e,t){e&&(o.$broadcast("schemaFormRedraw"),D(e,!1,!0))},condition:function(){return P.model.enableLeaveTypeLeavePeriod&&!P.currentLeaveType.is_short_term},readonly:P.model.isUsedLeaveType,validationMessage:{requiredValidation:e.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"leavePeriodStartMonth",titleMap:$.titleMap,onChange:function(e){D(e,!1,!0)},condition:"model.leavePeriodType == 3",validationMessage:{requiredValidation:e.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"leavePeriodStartDay",titleMap:N.titleMap,condition:"model.leavePeriodType == 3",validationMessage:{requiredValidation:e.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"leavePeriodDuration",titleMap:R.titleMap,condition:"model.leavePeriodType == 2 ||model.leavePeriodType == 3",validationMessage:{requiredValidation:e.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l6",key:"defaultEntitlementValidity",condition:function(){return P.currentLeaveType.is_short_term},validationMessage:{numberValidation:r.positiveInteger.message,numericMinMaxValidation:r.numericMinMaxValidation.message(P.schema.properties.defaultEntitlementValidity.minimum,P.schema.properties.defaultEntitlementValidity.maximum)},$validators:{numberValidation:r.positiveInteger.validator,numericMinMaxValidation:function(e){return r.numericMinMaxValidation.validator(e,P.schema.properties.defaultEntitlementValidity.minimum,P.schema.properties.defaultEntitlementValidity.maximum,!1)}}}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l6",key:"canEssApply",validationMessage:{atLeastOneNeedApply:e.getLocalizedCustom("Please select at least one of the 'Employee can apply..' and 'Admin can assign..' or 'Supervisor can assign..' options")},onChange:T,$validators:{atLeastOneNeedApply:F}}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l6",key:"canAdminAssign",onChange:T}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l6",key:"canSupervisorAssign",onChange:T}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l6",key:"canAdminAdjust"}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l6",key:"isLeaveAccrueEnabled",readonly:P.currentLeaveType.is_short_term}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l6",key:"isCarryForwardEnabled",readonly:P.currentLeaveType.is_short_term}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l6",key:"showWarningUponInsufficientBalance",condition:function(){return!P.currentLeaveType.is_short_term}}]},{type:"section",htmlClass:"row",condition:"!model.isCarryForwardEnabled && !model.isLeaveAccrueEnabled",items:[{type:"checkbox",htmlClass:"col s12 m12 l6",key:"showProjectedBalance",readonly:!0}]},{type:"section",htmlClass:"row",condition:"model.isCarryForwardEnabled || model.isLeaveAccrueEnabled",items:[{type:"checkbox",htmlClass:"col s12 m12 l6",key:"showProjectedBalance"}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l6 leave-attachment-is-enabled",key:"isAttachmentEnabled",onChange:x}]},{type:"section",htmlClass:"row reduce-height-10-px",condition:"model.isAttachmentEnabled",items:[{type:"radiobuttons",htmlClass:"col-12 leave-attachment-status",key:"attachmentOption",titleMap:P.attachmentOptions.titleMap}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l6 holidays-as-working-day",key:"holidaysAsWorkingDay"}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l6",key:"weekendsAsWorkingDay"}]}]}function D(e,t,a){if(""!=e&&e){var i=f.getEnumAndTitleMapForSelect(g.getLeavePeriodDatesOfMonth(e),{name:"name",value:"value"});angular.copy(i["enum"],N["enum"]),angular.copy(i.titleMap,N.titleMap),t||o.$broadcast("schemaFormRedraw"),a&&(P.model.leavePeriodStartDay="",P.model.leavePeriodDuration="")}}function T(){P.model.canAdminAssign||P.model.canSupervisorAssign||P.model.canEssApply?o.$broadcast("schemaForm.error.canEssApply","atLeastOneNeedApply",!0):o.$broadcast("schemaForm.error.canEssApply","atLeastOneNeedApply",!1)}function x(e){P.model.attachmentOption=0}function F(e){return!!(P.model.canAdminAssign||P.model.canSupervisorAssign||e)}function k(e,t,a){var i=angular.extend({},e,t,a);return i.isAttachmentMandatory?i.attachmentOption=1:i.sendAttachmentNotification?i.attachmentOption=2:i.attachmentOption=0,delete i.isAttachmentMandatory,delete i.sendAttachmentNotification,i}function E(){P.model=k(P.defaultConfiguration,P.leaveTypeRule,P.settings)}function I(e){T(),o.$broadcast("schemaFormValidate"),e.$valid&&A()}function A(){var t=_.pick(P.model,_.keys(P.defaultConfiguration));t=M(t),s.call("leaveTypeRule/id/"+P.id,"PATCH",t,{}).then(function(e){o.$emit("TabChange"),L(e)})["catch"](function(t){d.error(e.getLocalizedCustom("Failed to Save"))})}function M(e){if(P.attachmentOptions["enum"].includes(e.attachmentOption))switch(e.attachmentOption){case 1:e.isAttachmentMandatory=!0,e.sendAttachmentNotification=!1;break;case 2:e.isAttachmentMandatory=!1,e.sendAttachmentNotification=!0;break;case 0:e.isAttachmentMandatory=!1,e.sendAttachmentNotification=!1}else e.isAttachmentMandatory=!1,e.sendAttachmentNotification=!1;return delete e.attachmentOption,e}function L(t){t.data.redirectToAccrual?(localStorage.setItem("redirectToAccrualMessage",e.getLocalizedCustom(t.data.messages.accrualRedirectMessage)),localStorage.setItem("updateSuccess",e.getLocalizedCustom("Successfully Updated")),window.location=v.clientBase+"#/noncore/leave/defineLeaveTypeRuleAccrualRule/id/"+P.id):e.showLocalizedToast("updateSuccess")}var P=this;P.title="General",P.id=l.id,P.activate=b,P.getModel=k,P.setFormDefaults=E,P.onSubmit=I,P.submitGeneralLeaveTypeRule=A;var $,N={};N.titleMap=[],N["enum"]=[];var O,R;P.currentLeaveType=null,P.defaultConfiguration={isUsedLeaveType:!0,enableLeaveTypeLeavePeriod:!1,canEssApply:!1,canAdminAssign:!1,canSupervisorAssign:!1,canAdminAdjust:!1,isLeaveAccrueEnabled:!1,isCarryForwardEnabled:!1,showWarningUponInsufficientBalance:!1,showProjectedBalance:!1,isAttachmentEnabled:!1,attachmentOption:0,holidaysAsWorkingDay:!1,weekendsAsWorkingDay:!1},P.leaveTypeRule={},P.schema={},P.form=[],P.model={},P.attachmentOptions=f.getEnumAndTitleMapForSelect([{id:0,name:e.getLocalizedCustom("Attachment is optional")},{id:2,name:e.getLocalizedCustom("Attachment is optional with a reminder")},{id:1,name:e.getLocalizedCustom("Attachment is mandatory")}],{name:"name",value:"id"}),b()}angular.module("app.leave").controller("LeaveDefineLeaveTypeRuleGeneralController",e),e.$inject=["localizedMessages","logger","$q","$rootScope","$scope","$window","$stateParams","formValidationHelper","webservice","$timeout","toast","pimHelper","ModalService","datagroupPermissions","formHelper","leavePeriodService","$state","LOGIN","titleService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){var e={leaveTypes:n.call("leaveTypes","GET",[],{}),leaveTypeRule:n.call("leaveTypeRule/id/"+h.id,"GET",[]),settings:m.getSetting("leave")};a.all(e).then(function(e){h.leaveTypeRule=e.leaveTypeRule.data.data,h.leaveSettings=e.settings,p(),f()})}function p(){h.tabs=[],h.tabs.push({id:1,title:c.getLocalizedCustom("General"),uiSref:"leave.define_leave_type_rule_general({ id: "+h.id+" })",automationId:"menu_leave_define_leave_type_rule_general"}),(h.leaveTypeRule.isLeaveAccrueEnabled||h.leaveTypeRule.isCarryForwardEnabled||h.leaveSettings.use_apply_restrictions)&&h.tabs.push({id:2,title:c.getLocalizedCustom("Employee Groups"),uiSref:null,href:s.clientBase+"#/noncore/leave/defineLeaveTypeRuleEmployeeGroups/id/"+h.id,automationId:"menu_leave_define_leave_type_rule_employee_groups"}),h.tabs.push({id:3,title:c.getLocalizedCustom("Who Can Apply"),uiSref:null,href:s.clientBase+"#/noncore/leave/defineLeaveTypeRuleWhoCanApply/id/"+h.id,automationId:"menu_leave_define_leave_type_rule_who_can_apply"}),h.leaveSettings.use_apply_restrictions&&(h.leaveTypeRule.canAdminAssign||h.leaveTypeRule.canEssApply||h.leaveTypeRule.canSupervisorAssign)&&h.tabs.push({id:4,title:c.getLocalizedCustom("Apply/Assign Restrictions"),uiSref:null,href:s.clientBase+"#/noncore/leave/defineLeaveTypeRuleApplyRestriction/id/"+h.id,automationId:"menu_leave_define_leave_type_rule_apply_restriction"}),h.leaveTypeRule.isLeaveAccrueEnabled&&h.tabs.push({id:5,title:c.getLocalizedCustom("Accrual Rules"),uiSref:null,href:s.clientBase+"#/noncore/leave/defineLeaveTypeRuleAccrualRule/id/"+h.id,automationId:"menu_leave_define_leave_type_rule_accrual_rule"}),h.leaveTypeRule.isCarryForwardEnabled&&h.tabs.push({id:6,title:c.getLocalizedCustom("Carry Forward Rules"),uiSref:null,href:s.clientBase+"#/noncore/leave/defineLeaveTypeCarryForwardRule/id/"+h.id,automationId:"menu_leave_define_leave_type_carry_forward_rule"})}function f(){h.visibilityMap={},h.currentItemMap={},_.forEach(h.tabs,function(e){h.visibilityMap[e.id]=!0,h.currentItemMap[e.id]=!1})}function g(e){var a={};return _.isEqual(h.lastVisibilityMap,h.visibilityMap)||(angular.copy(h.visibilityMap,h.lastVisibilityMap),_.forEach(e,function(e){h.visibilityMap[e.id]||h.currentItemMap[e.id]||(a[e.id]=e)}),t.$applyAsync(function(){Object.keys(a).length>0?h.showMoreMenu=!0:h.showMoreMenu=!1}),h.lastFilteredMenus=a),h.lastFilteredMenus}var h=this;h.tabs=[],h.id=d.id,h.visibilityMap={},h.currentItemMap={},h.lastFilteredMenus={},h.lastVisibilityMap={},h.showMoreMenu=!1,h.getHiddenMenuItems=g,u(),e.$on("TabChange",u)}angular.module("app.leave").controller("LeaveDefineLeaveTypeRuleCustomTopRibbonController",e),e.$inject=["$rootScope","$scope","$q","$translate","$state","webservice","ModalService","focus","LOGIN","localizedMessages","$stateParams","settingsService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){u.getPermission("leave_types").then(function(e){self.permissions=e,self.fetchLeaveTypeRule()})}function f(){r.call("leaveTypeRule/id/"+self.id,"GET",[]).then(function(e){e=e.data.data,Object.assign(self.leavePeriodHistory,e.leavePeriod),self.leaveTypeRule=e,self.form=g(),self.schema=h(),self.model=v(self.defaultConfiguration,e)})}function g(){return{}}function h(){return[]}function v(e,t){return Object.assign({},e,t)}function y(){self.model=v(self.defaultConfiguration,self.leaveTypeRule)}function b(e){o.$broadcast("schemaFormValidate"),e.$valid&&C()}function C(){}var w=this;w.title="Who Can Apply",self.id=l.id,self.init=p,self.fetchLeaveTypeRule=f,self.getModel=v,self.setFormDefaults=y,self.onSubmit=b,w.defaultConfiguration={},w.model={},p()}angular.module("app.leave").controller("LeaveDefineLeaveTypeRuleWhoCanApplyController",e),e.$inject=["localizedMessages","logger","$q","$rootScope","$scope","$window","$stateParams","webservice","$timeout","toast","pimHelper","ModalService","datagroupPermissions"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){function m(){t.show();var a={settings:e.call("settings","GET",{}),permissions:n.getPermissions(),workWeek:e.call("workWeek","GET",{countryId:null}),regions:e.call("user_regions_workweek","GET",[],{})};o.all(a).then(function(e){b=c.getEnumAndTitleMapForSelect(C,{name:"name",value:"value"}),u(e.permissions),v.countryBasedEnabled=e.settings.data.data.is_country_based_enabled,y=e.workWeek.data.data,g(e.workWeek.data.data),v.regions=c.getEnumAndTitleMapForSelect(e.regions.data.data,{name:"name",value:"operationalCountryId"}),h(),t.hide(),e.regions.data.data.length>0&&f(e.regions.data.data[0].operationalCountryId)},function(e){t.hide(),s.go("403")})}function u(e){v.permissions=e.work_week,v.permissions.read||(t.hide(),s.go("403"))}function p(t){var i="workWeek",n="PATCH",r="updateSuccess",s="Failed to Save",c={updateFinished:!1,updateCancelled:!1},m={forceCompletionCallback:function(e){return 1==c.updateFinished},forceCancellationCallback:function(e){return 1==c.updateCancelled}},u={progressModal:d.showProgressModal("Updating Work Week","edit_leave_work_week",m),workWeek:e.call(i,n,t).then(function(e){return c.updateFinished=!0,e})};o.all(u).then(function(e){1==e.workWeek.data.success?l.showLocalizedToast(r):a.warning(s)},function(e){c.updateCancelled=!0,a.warning(s)})}function f(t){e.call("workWeek","GET",[],{countryId:t}).then(function(e){g(e.data.data),i.$broadcast("schemaFormRedraw")})}function g(e){v.formModel.id=e.id?e.id:null,v.formModel.operational_country_id=e.operational_country_id?e.operational_country_id:"",v.formModel.mon=e.mon?e.mon:y.mon,v.formModel.tue=e.tue?e.tue:y.tue,v.formModel.wed=e.wed?e.wed:y.wed,v.formModel.thu=e.thu?e.thu:y.thu,v.formModel.fri=e.fri?e.fri:y.fri,v.formModel.sat=e.sat?e.sat:y.sat,v.formModel.sun=e.sun?e.sun:y.sun}function h(){v.schema={type:"object",title:"Work Week",properties:{operational_country_id:{title:"Country",type:"string","enum":v.regions["enum"]},mon:{title:"Monday",type:"string","enum":b["enum"]},tue:{title:"Tuesday",type:"string","enum":b["enum"]},wed:{title:"Wednesday",type:"string","enum":b["enum"]},thu:{title:"Thursday",type:"string","enum":b["enum"]},fri:{title:"Friday",type:"string","enum":b["enum"]},sat:{title:"Saturday",type:"string","enum":b["enum"]},sun:{title:"Sunday",type:"string","enum":b["enum"]}},required:["mon","tue","wed","thu","fri","sat","sun","operational_country_id"]},v.form=[{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"operational_country_id",condition:!v.countryBasedEnabled,titleMap:v.regions.titleMap,onChange:function(e){f(e)}}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"mon",titleMap:b.titleMap,readonly:!v.permissions.update},{type:"select",htmlClass:"col s12 m12 l6",key:"tue",titleMap:b.titleMap,readonly:!v.permissions.update}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"wed",titleMap:b.titleMap,readonly:!v.permissions.update},{type:"select",htmlClass:"col s12 m12 l6",key:"thu",titleMap:b.titleMap,readonly:!v.permissions.update}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"fri",titleMap:b.titleMap,readonly:!v.permissions.update},{type:"select",htmlClass:"col s12 m12 l6",key:"sat",titleMap:b.titleMap,readonly:!v.permissions.update}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"sun",titleMap:b.titleMap,readonly:!v.permissions.update}]}]}],v.permissions.update&&(c.addRequiredMessage(v.form),v.form.push({type:"section",htmlClass:"row form-buttons",items:[{htmlClass:"col s12 right-align",type:"submit",title:"Save"}]}))}var v=this;v.model={},v.permissions,v.formModel={},v.countryBasedEnabled=!0;var y,b,C=[{value:"0",name:"Full Day"},{value:"4",name:"Half Day"},{value:"8",name:"Non-working Day"}];m(),v.onSubmit=function(e){i.$broadcast("schemaFormValidate"),e.$valid&&p(v.formModel)}}angular.module("app.leave").controller("LeaveDefineWorkWeekController",e),e.$inject=["webservice","loader","toast","$scope","$q","datagroupPermissions","localizedMessages","formValidationHelper","$state","formHelper","modalHelperService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w,S,D,T){function x(){return{updateFinished:!1,total:de.model.employeeList.length,getProgressPercentage:function(e){return e?parseInt(e/de.model.employeeList.length*100):0}}}function F(){l.show(),de.model.fromDate=moment(new Date),de.model.toDate=moment(new Date);var e={permissions:b.getPermissions(),leaveTypes:o.getLeaveTypes(),operationalCountryIds:k()};s.all(e).then(function(e){E(e.permissions),de.leaveTypeOptions=a.getFormatEnumAndTitleMap(e.leaveTypes.data.data),de.leaveTypeList=e.leaveTypes.data.data,0==e.leaveTypes.data.data.length?r.warning(C.getLocalizedCustom("No Leave Type Defined")):N(e.leaveTypes.data.data),de.operationalCountryIds=e.operationalCountryIds,le(),l.hide()})}function k(){return e.call("user_regions_leave_entitlements","GET",[],{}).then(function(e){var t=[];return angular.forEach(e.data.data,function(e){t.push(e.id)}),t.join()})}function E(e){de.permissions=e.leave_entitlements,de.permissions.create||(l.hide(),p.go("403"));
}function I(){var e={filter:{empNumber:de.model.employeeId,leaveTypeId:de.model.leaveType,from:de.model.date.from,to:de.model.date.to}};return e}function A(){var e=new Date;de.model.fromDate=moment(new Date);var t=e.setDate(e.getDate()+parseInt(de.defaultEntitlementValidityDays)-1);de.model.toDate=new Date(t),M()}function M(){var e=o.getDurationInDays(de.model.fromDate,de.model.toDate);de.model.stleValidityDurationLabel=e>0?C.getLocalizedCustomWithVariables("Valid for {{durationInDays}} Day(s)",{durationInDays:e}):""}function L(){M(),y.afterDate.validator(de.model.toDate,de.model.fromDate)&&(f.$broadcast("schemaForm.error.fromDate","beforeDate",!0),f.$broadcast("schemaForm.error.toDate","afterDate",!0))}function P(e){var t=e?"5":"1";de.model.entitlementTypeLocalized=o.getLocalizedTypeById(t),de.model.entitlementType=o.getTypeById(t)}function N(e){var t=_.find(e,{id:de.model.leaveType});t||(t=e[0]),de.model.leaveType=t.id,de.isStleLeaveType=t.is_short_term,de.defaultEntitlementValidityDays=t.defaultEntitlementValidityDays,P(de.isStleLeaveType),de.isStleLeaveType&&null!=de.defaultEntitlementValidityDays&&A(),O(de.model.leaveType);var a=q();i.getLeavePeriodsForLeaveTypeAndEmployee(de.model.leaveType,a,void 0,de.model,void 0).then(function(e){de.leavePeriodOptions=e.leavePeriodOptions,de.model.leavePeriod=e.leavePeriod,le()},function(e){de.leavePeriodOptions={titleMap:[],"enum":[]},de.model.leaveType&&(de.model.multipleEmployees||de.model.employeeId)&&G("leavePeriod",e?e.data:C.getLocalizedCustom("Leave period does not exist")),le()})}function O(e){angular.forEach(de.leaveTypeList,function(t,a){t.id==e&&(de.model.hourBased!==t.hour_based&&(de.model.entitlementAmount="",de.model.entitlementHours=""),de.model.hourBased=t.hour_based)})}function R(){var e=""==de.model.employeeId||de.model.multipleEmployees?null:de.model.employeeId;o.getLeaveTypes(e).then(function(e){de.leaveTypeList=e.data.data,de.leaveTypeOptions=a.getFormatEnumAndTitleMap(e.data.data),e.data.data&&0!=e.data.data.length?N(e.data.data):r.warning(C.getLocalizedCustom("No Leave Type Defined")),le()})}function z(){var t={};return null!=de.model.subunit&&(t.sub_unit=de.model.subunit),""!=de.model.location?t.location=de.model.location:"undefined"!=typeof de.locationOptions["enum"][0]?t.location=de.locationOptions["enum"][0]:ae(de.model.leaveType)&&(t.country_list=ae(de.model.leaveType)),t.permissionType="add_entitlements",l.show(),e.call("employees","GET",[],{filter:t}).then(function(e){de.lastEmployeeFilters=t,de.model.employeeList=e.data.data,le(),l.hide()})}function j(){var a={};a.country=ae(de.model.leaveType);var i={data_group:{name:"leave_entitlements",permissions:{canCreate:1}}};e.call("employees/locations","GET",{},{filter:a,required_permissions:i}).then(function(e){de.locationOptions=t.getLocationEnumAndTitleMap(e.data.data),z(),le()})}function V(){t.fetchSubunit({tree:!0}).then(function(e){de.subunitOptions=t.getSubunitEnumAndTitleMap(e.data.data),le()})}function G(e,t){m(function(){f.$broadcast("schemaForm.error."+e,t,t),null})}function B(e){if(e&&(de.model.multipleEmployees||de.model.employeeId)){var t=q();i.getLeavePeriodsForLeaveTypeAndEmployee(e,t,void 0,de.model,void 0).then(function(e){de.leavePeriodOptions=e.leavePeriodOptions,de.model.leavePeriod=e.leavePeriod,le()},function(e){de.leavePeriodOptions={titleMap:[],"enum":[]},G("leavePeriod",e?e.data:C.getLocalizedCustom("Leave period does not exist")),le()})}}function q(){var e=de.model.employeeId?de.model.employeeId:void 0,t={filter:{empNumber:de.model.multipleEmployees?void 0:e}};return t}function H(){de.leaveTypeOptions={titleMap:[],"enum":[]},de.leavePeriodOptions={titleMap:[],"enum":[]}}function U(e){B(e),O(e),de.model.multipleEmployees&&j()}function W(e){e?de.selectedEmployeeId!==e.originalObject.empNumber&&(de.selectedEmployeeId=e.originalObject.empNumber,de.model.employeeId=e.originalObject.empNumber,de.model.employee=e.originalObject,H(),R()):(de.selectedEmployeeId=null,de.model.employeeId=null,de.model.employee="",f.$broadcast("schemaForm.error.employee","required",!0))}function Y(e){H(),e?(de.model.multipleEmployees=!0,o.getLeaveTypesForBulkAdd().then(function(e){0==e.data.data.length?r.warning(C.getLocalizedCustom("No Leave Type Defined")):(de.leaveTypeList=e.data.data,de.leaveTypeOptions=a.getEnumAndTitleMap(e.data.data),N(e.data.data)),j(),V(),le()})):(de.model.multipleEmployees=!1,R())}function J(e){de.model.location=e,z()}function K(e){de.model.subunit=e,z()}function Z(e){var t=C.getLocalizedCustom("Successfully Saved"),a=C.getLocalizedCustom("Failed to Save"),i=ce(e);o.save(i).then(function(e){if(l.show(),1==e.data.success)if(de.progressModalInput&&(de.progressModalInput.updateFinished=!0),l.hide(),de.model.multipleEmployees)p.go("leave.view_leave_entitlement",{}).then(function(e){r.success(C.getLocalizedCustomWithVariables("Entitlements Added to {{empCount}} Employees(s)",{empCount:de.model.employeeList.length}))});else{var i={id:e.data.data.id,employeeId:e.data.data.emp_number,leaveTypeId:e.data.data.leave_type_id,from:e.data.data.from_date.replace(/ \d{2}:\d{2}:\d{2}$/,""),to:e.data.data.to_date.replace(/ \d{2}:\d{2}:\d{2}$/,"")};p.go("leave.view_leave_entitlement",i,{reload:!0}).then(function(e){r.success(t)})}else l.hide(),r.warning(a)},function(e){l.hide();var t=e.data&&e.data.title?e.data.title:e;r.error(C.getLocalizedCustom(t))})}function Q(){c.showModal({templateUrl:"app/leave/entitlement/add/entitlement-bulk-confirmation.html",controller:"LeaveEntitlementBulkConfirmationController",controllerAs:"modal",inputs:{employeeList:de.model.employeeList,from:de.model.date.from,to:de.model.date.to,leaveTypeId:de.model.leaveType,lastEmployeeFilters:de.lastEmployeeFilters,entitlementAmount:de.model.entitlementAmount,hourBased:de.model.hourBased}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){de.progressModalInput=x(),e===!0&&X(de.progressModalInput).then(function(){Z(de.model)})})})}function X(t){return s(function(a,i){de.model.multipleEmployees?c.showModal({templateUrl:"app/leave/entitlement/add/progress_modal.html",controller:"EntitlementAddProgressController",controllerAs:"modal",inputs:{modalInput:t}}).then(function(t){e.call("progress","POST",[],{name:"bulkEntitlement"}).then(function(){$(t.element).openModal(),a(),t.close.then(function(){$(t.element).closeModal(),e.call("progress","DELETE",[],{name:"bulkEntitlement"})})})}):a()})}function ee(e){var t=!1,a={close:function(){}};S.openEntitlementAdjustConfirmationModal(C.getLocalizedCustom("Do you want to adjust the already carried forward values accordingly, in addition to updating the entitlement?"),de,a).then(function(e){$(e.element).openModal({complete:function(){t||a.close(!1)}}),e.close.then(function(e){t=!0,"adjust"===de.adjustType?de.model.adjustCarriedForward=!0:"update"===de.adjustType&&(de.model.adjustCarriedForward=!1),"update"!==de.adjustType&&"adjust"!==de.adjustType||Z(de.model),de.submitInProgress=!1})})}function te(e){var t=parseFloat(e.total)+parseFloat(de.model.entitlementAmount);de.model.projectedAmount=t;var a=!1,i={close:function(){}},n=_.find(de.leaveTypeOptions.titleMap,{value:de.model.leaveType});S.openEntitlementConfirmationModal(C.getLocalizedCustomWithVariables("Total Entitlement for the Leave Type {{LEAVE_TYPE}} will be increased from {{OLD_VALUE}} to {{NEW_VALUE}}",{OLD_VALUE:o.formatEntitlement(e.total,de.model.hourBased,de.settings),NEW_VALUE:o.formatEntitlement(t,de.model.hourBased,de.settings),LEAVE_TYPE:n.name.trim()}),de,i).then(function(e){$(e.element).openModal({complete:function(){a||i.close(!1)}}),e.close.then(function(e){a=!0,e===!0&&Z(de.model),de.submitInProgress=!1})})}function ae(e){var t=null;return angular.forEach(de.leaveTypeList,function(a,i){a.id==e&&(t=a.OperationalCountry.country_code)}),t}function ie(e){if(f.$broadcast("schemaFormValidate"),e.$valid&&!de.submitInProgress){var t=de.isStleLeaveType;if(t){var a=moment(de.model.fromDate),i=moment(de.model.toDate);de.model.date={from:a.format("YYYY-MM-DD"),to:i.format("YYYY-MM-DD")},delete de.model.leavePeriod}else{var n=de.model.leavePeriod.split("$$");de.model.date={from:n[0],to:n[1]}}delete de.model.adjustCarriedForward,de.model.multipleEmployees?(de.model.employeeId=oe().toString(),de.model.employeeId?Q():r.warning(w.instant("No Matching Employees Found"))):(de.submitInProgress=!0,o.isCarryForwardAdjustmentRequired(de.model.leaveType,de.model.employeeId,de.model.date.to).then(function(e){o.fetchTotals(I()).then(function(t){var a=_.find(t.data.data,{empNumber:de.model.employeeId});a?e?ee(t.data):te(a):e?ee(null):(Z(de.model),de.submitInProgress=!1)})}))}}function oe(){var e=[];return angular.forEach(de.model.employeeList,function(t,a){e.push(t.empNumber)}),e}function ne(){return de.model.multipleEmployees?"("+C.getLocalizedCustomWithVariables("Matches {{count}} employee(s)",{count:de.model.employeeList.length})+")":""}function le(){de.schema={type:"object",title:"Add Leave Entitlement",properties:{employee:{title:"Employee",type:"object"},leaveType:{title:"Leave Type",type:"string"},multipleEmployees:{title:C.getLocalizedCustom("Add to Multiple Employees")+" "+ne(),type:"boolean"},location:{title:"Location",type:"string"},subunit:{title:"Subunit",type:"string"},leavePeriod:{title:"Leave Period",type:"string"},fromDate:{title:"Valid From",type:["null","object"]},toDate:{title:"Valid To",type:["null","object"]},entitlementAmount:{title:"Entitlements (Days)",type:"string"},entitlementHours:{title:"Entitlements (Hours)",type:"string"},comment:{title:"Comment",type:"string",maxLength:255},entitlementTypeLocalized:{title:"Entitlement Type",type:"string"}},required:["employee","leaveType","leavePeriod","entitlementAmount","entitlementHours","fromDate","toDate"]};var t=de.model.fromDate?new Date(de.model.fromDate):null,a=de.model.toDate?new Date(de.model.toDate):null;de.form=[{type:"section",htmlClass:"row",items:[{type:"auto-complete",htmlClass:"col s12 m12 l6",key:"employee",idsToSkip:[],placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",onChange:function(e){W(e)},validationMessage:{302:C.getLocalizedCustom("Required")},condition:"!model.multipleEmployees",employeeDataProvider:function(t,a){var i={fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId",name:"userInputString",filter:{employee_name_or_id:t,permissionType:"add_entitlements",country_list:de.operationalCountryIds},page:{limit:50,offset:0},sort:"fullName"};return e.call("employees","GET",[],i,a).then(function(e){for(var t=[],a=0;a<e.data.data.length;a++)e.data.data[a].fullName=D.getFullName(e.data.data[a]),t.push(e.data.data[a]);return t})}},{type:"select",htmlClass:"col s12 m12 l6",key:"leaveType",titleMap:de.leaveTypeOptions.titleMap,emptyOption:!1,validationMessage:{302:C.getLocalizedCustom("Required")},onChange:function(e){var t=_.filter(de.leaveTypeList,{id:e});de.isStleLeaveType=t[0].is_short_term,de.defaultEntitlementValidityDays=t[0].defaultEntitlementValidityDays,de.isStleLeaveType&&null!=de.defaultEntitlementValidityDays&&(de.defaultEntitlementValidityDays=t[0].defaultEntitlementValidityDays,A()),U(e),P(de.isStleLeaveType),le()}}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l12",key:"multipleEmployees",onChange:function(e){Y(e)}}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"location",titleMap:de.locationOptions.titleMap,condition:"model.multipleEmployees",emptyOption:"All",onChange:function(e){J(e)}},{type:"select",htmlClass:"col s12 m12 l6",key:"subunit",titleMap:de.subunitOptions.titleMap,condition:"model.multipleEmployees",emptyOption:"All",onChange:function(e){K(e)}}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"leavePeriod",titleMap:de.leavePeriodOptions.titleMap,validationMessage:{302:C.getLocalizedCustom("Required")},emptyOption:!1,condition:function(){return!de.isStleLeaveType}},{type:"date",htmlClass:"col s12 m12 l3",key:"fromDate",validationMessage:{beforeDate:C.getLocalizedCustom("From date should be on or before to date")},$validators:{beforeDate:function(e){return y.beforeDate.validator(e,de.model.toDate)},dateRequired:function(e){return y.dateRequiredValidation.validator(e)}},onChange:L,defaultDate:t,resetDefaultDate:de.resetDefaultDate,ngModelOptions:{allowInvalid:!0},condition:function(){return de.isStleLeaveType}},{type:"date",htmlClass:"col s12 m12 l3",key:"toDate",validationMessage:{afterDate:C.getLocalizedCustom("To date should be on or after from date")},$validators:{afterDate:function(e){return y.afterDate.validator(e,de.model.fromDate)},dateRequired:function(e){return y.dateRequiredValidation.validator(e)}},onChange:L,defaultDate:a,resetDefaultDate:de.resetDefaultDate,ngModelOptions:{allowInvalid:!0},condition:function(){return de.isStleLeaveType}},{type:"text",htmlClass:"col s6 m6 l3",key:"entitlementAmount",condition:"model.hourBased === false",validationMessage:{positiveInteger:o.getPositiveDayBasedEntitlementValidationMessage(de.settings.dayDecimals),302:C.getLocalizedCustom("Required")},$validators:{positiveInteger:re}},{type:"text",htmlClass:"col s6 m6 l3",key:"entitlementHours",condition:"model.hourBased === true",placeholder:"HH:MM",validationMessage:{validEntitlementHours:o.getHourBasedEntitlementValidationMessage(de.settings.hourDecimals),302:C.getLocalizedCustom("Required")},$validators:{validEntitlementHours:se},onChange:function(e){de.model.entitlementAmount=o.getNormalizedEntitlementValue(e)}},{type:"text",htmlClass:"col s12 m6 l3 custom_valid_days",key:"stleValidityDurationLabel",text:de.model.stleValidityDurationLabel,readonly:!0,condition:function(){return de.isStleLeaveType}}]},{type:"section",htmlClass:"row",items:[{type:"textarea",htmlClass:"col s12 m12 l12",key:"comment",validationMessage:{201:y.textLengthExceedValidation.message(de.schema.properties.comment.maxLength)}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"entitlementTypeLocalized",readonly:!0}]},v.getRequiredMessage(),{type:"section",htmlClass:"row form-buttons",items:[{htmlClass:"col s12 right-align",type:"submit",title:"Save"}]}]}function re(e){return de.settings.allowNegative=!1,o.validateEntitlementDays(e,de.settings)}function se(e){return de.settings.allowNegative=!1,o.validateEntitlementHours(e,de.settings)}function ce(e){var t=Object.assign({},e);return delete t.toDate,delete t.fromDate,delete t.stleValidityDurationLabel,t}var de=this;de.title="Add Leave Entitlement",de.model={employeeId:"",employee:"",leaveType:null,location:"",subunit:"",entitlementAmount:"",leavePeriod:null,adjustCarriedForward:!1,entitlementType:"",entitlementTypeLocalized:"",multipleEmployees:!1,hourBased:!1,employeeList:[],entitlementId:null,projectedAmount:null,fromDate:null,toDate:null,stleValidityDurationLabel:null},de.permissions,de.settings=T.getSettings(),de.leaveTypeOptions={titleMap:[],"enum":[]},de.locationOptions={titleMap:[],"enum":[]},de.subunitOptions={titleMap:[],"enum":[]},de.leavePeriodOptions={titleMap:[],"enum":[]},de.isCountryBased=!1,de.leaveTypeList={},de.adjustType=null,de.lastEmployeeFilters=null,de.submitInProgress=!1,de.operationalCountryIds=void 0,de.onSubmit=ie,de.progressModalInput,de.isStleLeaveType=!1,de.defaultEntitlementValidityDays=90,de.copiedModal,F(),de.resetDefaultDate={reset:!1}}angular.module("app.leave").controller("LeaveAddLeaveEntitlementController",e),e.$inject=["webservice","leaveEmployeeService","leaveTypeService","leavePeriodService","leaveEntitlementService","leaveTypeRuleService","loader","toast","$q","ModalService","$rootScope","$timeout","$filter","$state","$scope","reportService","$stateParams","formHelper","formValidationHelper","datagroupPermissions","localizedMessages","$translate","entitlementConfirmationModalService","employeeService","leaveService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){var t={};t.leaveTypeId=v.leaveType,t.from=v.from,t.to=v.to,t.employeeFilters=angular.copy(m),delete t.employeeFilters.permissionType,c.show(),e.fetchTotals({filter:t}).then(function(t){var a=t.data.data;angular.forEach(v.employeeList,function(t,i){var o=_.find(a,{empNumber:t.empNumber}),n=e.formatEntitlement(0,v.hourBased,v.settings),l=p(0);o&&(n=e.formatEntitlement(o.total,v.hourBased,v.settings),l=p(o.total)),v.entitlementList.push({id:t.empNumber,name:t.firstName+" "+t.lastName,oldEntitlement:n,newEntitlement:l})}),c.hide()})}function p(t){return e.formatEntitlement(parseFloat(v.entitlementAmount)+parseFloat(t),v.hourBased,v.settings)}function f(){a(!0)}function g(){a(!1)}function h(){var e=v.hourBased===!0?" (Hours)":" (Days)";return[{name:"Name",lable:"Employee Name",getter:"name"},{name:"oldEntitlement",lable:"Existing Entitlement"+e,getter:"oldEntitlement"},{name:"newEntitlement",lable:"New Entitlement"+e,getter:"newEntitlement"}]}var v=this;v.confirm=f,v.cancel=g,v.employeeList=i,v.hourBased=s,v.leaveType=l,v.from=o,v.to=n,v.entitlementAmount=r,v.entitlementList=[],v.listData={bulkEntitlement:{idGetter:"id",listFields:h(),showColumnsAnyway:!0}},v.settings=d.getSettings(),u()}angular.module("app.leave").controller("LeaveEntitlementBulkConfirmationController",e),e.$inject=["leaveEntitlementService","$scope","close","employeeList","from","to","leaveTypeId","entitlementAmount","hourBased","loader","leaveService","lastEmployeeFilters"]}(),function(){"use strict";function e(e,t,a,i,o,n){function l(){t(!0)}function r(){t(!1)}function s(){d.parentVm.adjustType="update",t(s)}function c(){d.parentVm.adjustType="adjust",t(c)}var d=this;n.close=t,d.msg=a,d.type=i,d.parentVm=o,d.confirm=l,d.cancel=r,d.update=s,d.adjust=c}angular.module("app.leave").controller("LeaveEntitlementConfirmationController",e),e.$inject=["$scope","close","msg","type","parentVm","modalFunctions"]}(),function(){"use strict";function e(e,t,a,i,o){function n(){l.progressModalTitle=o.getLocalizedCustom("Updating data"),1==t.total?l.progressModalTitle=o.getLocalizedCustomWithVariables("Updating {{count}} Employee Record",{count:1}):t.total>1&&(l.progressModalTitle=o.getLocalizedCustomWithVariables("Updating {{count}} Employee Records",{count:t.total})),a.call("progress","GET",[],{name:"bulkEntitlement"}).then(function(a){var o=a.data.data;l.tempProgressPercentage=parseInt(t.getProgressPercentage(o)),l.tempProgressPercentage>l.latestProgress&&l.tempProgressPercentage<100&&(l.latestProgress=l.progressPercentage||l.tempProgressPercentage,l.progressPercentage=l.tempProgressPercentage,l.progress=l.progressPercentage+"%"),t.updateFinished?(l.progress="100%",i(function(){e(!1)},500)):i(function(){n()},1e3)})}var l=this;l.latestProgress=0,n()}angular.module("app.leave").controller("EntitlementAddProgressController",e),e.$inject=["close","modalInput","webservice","$timeout","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w){function S(){U.model.entitlementId=g.id;var t={filter:{id:U.model.entitlementId},include:"leaveType,leave"};k()&&(U.model.type="adjustment"),U.model.fromDate=moment(new Date),U.model.toDate=moment(new Date),i.fetch(t).then(function(t){var o=t.data.data[0];U.entitlement=o,U.model.hourBased=o.LeaveType.hour_based;var n=o.emp_number;if(U.leaveType=o.LeaveType.name,U.leavePeriod=a.getPeriodText(o.from_date,o.to_date),U.entitlementType=i.getLocalizedTypeById(o.entitlement_type),U.creditedDate=m("ohrmDateFilter")(o.credited_date),U.isStleLeaveType=o.LeaveType.is_short_term,U.usedLeaveAmount=o.used,U.isStleLeaveType&&(U.initialValueFromDate=new Date(o.from_date),V(o),o.Leave.length)){var l=[];o.Leave.filter(function(e){l.push(e.date)}),U.lastLeaveTakenDate=i.getMostRecentDate(l)}var s={permissions:y.getPermissions(),employee:e.call("employees/"+n,"GET",[],{})};k()||(s.comments=i.fetchComments(o.id)),2==U.entitlement.entitlement_type&&(s.maxCap=i.fetchMaxCap(U.entitlement.id)),r.all(s).then(function(e){var t=i.formatEntitlement(o.length,U.model.hourBased,U.settings);U.model.hourBased===!0?(U.model.entitlementHours=t,D(U.model.entitlementHours)):U.model.entitlementAmount=t;var a=e.employee.data.data;U.employeeName=a.firstName+" "+a.lastName,k()||(U.commentList=e.comments.data),2==U.entitlement.entitlement_type&&null!==e.maxCap.data.data.cap?(U.maxCap=e.maxCap.data.data.cap,U.maxCapConfigValue=e.maxCap.data.data.maxValue):U.maxCap=null,H(),U.form[1].items[0].label=x(U.entitlementTypeId),T()})})}function D(e){U.model.entitlementAmount="",U.model.entitlementAmount=i.getNormalizedEntitlementValue(e)}function T(){c.$broadcast("markMenuItemAsCurrent",{stateName:"leave.view_leave_entitlement"})}function x(e){return"4"==e?"Valid Period":"Leave Period"}function F(e){var t=b.getLocalizedCustom("Successfully Updated"),a=b.getLocalizedCustom("Failed to Save"),o=q(e);i.update(o).then(function(e){if(n.show(),1==e.data.success){l.success(t),n.hide();var i={id:e.data.data.id,employeeId:e.data.data.emp_number,leaveTypeId:e.data.data.leave_type_id,from:g.filterFrom?g.filterFrom:e.data.data.from_date?e.data.data.from_date.replace(/ \d{2}:\d{2}:\d{2}$/,""):void 0,to:g.filterTo?g.filterTo:e.data.data.to_date?e.data.data.to_date.replace(/ \d{2}:\d{2}:\d{2}$/,""):void 0};U.entitlement&&"1"==U.entitlement.LeaveType.deleted&&(i={id:e.data.data.id,employeeId:e.data.data.emp_number}),u.go("leave.view_leave_entitlement",i,{reload:!0}).then(function(e){l.success(t)})}else n.hide(),l.warning(a)},function(e){n.hide();var t=e.data&&e.data.msg?e.data.msg:e;l.error(t)})}function k(){return _.includes(U.model.entitlementId,"a")}function E(){var e=!1,t={close:function(){}};C.openEntitlementAdjustConfirmationModal(b.getLocalizedCustom("Do you want to adjust the already carried forward values accordingly, in addition to updating the entitlement?"),U,t).then(function(a){$(a.element).openModal({complete:function(){e||t.close(!1)}}),a.close.then(function(t){e=!0,"adjust"===U.adjustType?U.model.adjustCarriedForward=!0:"update"===U.adjustType&&(U.model.adjustCarriedForward=!1),"update"!==U.adjustType&&"adjust"!==U.adjustType||F(U.model)})})}function I(e){p.$broadcast("schemaFormValidate"),e.$valid&&(delete U.model.adjustCarriedForward,U.model.projectedAmount=U.model.entitlementAmount,i.isCarryForwardAdjustmentRequired(U.entitlement.leave_type_id,U.entitlement.emp_number,U.entitlement.to_date).then(function(e){e?E():F(U.model)}))}function A(e){return i.validateMaxCap(U.entitlement.entitlement_type,U.maxCap,U.entitlement.length,e,U.model.hourBased)}function M(){var e=0;U.maxCap>0&&(e=U.maxCap);var t=parseFloat(U.entitlement.length)+parseFloat(e);return i.formatEntitlement(t,U.model.hourBased,U.settings)}function L(e){var t={maxCap:A};return e?t.validEntitlementHours="entitlement"==U.model.type?j:z:"entitlement"==U.model.type?t.positiveInteger=R:t.numeric=O,U.isStleLeaveType&&(t.moreThanUsedAmount=P),t}function P(e){return i.moreThanUsedAmount(e,U.usedLeaveAmount,U.model.hourBased)}function N(e){var t=moment(e).format("YYYY-MM-DD");return U.usedLeaveAmount<=0||!U.lastLeaveTakenDate||t>=U.lastLeaveTakenDate}function O(e){return U.settings.allowNegative=!0,i.validateEntitlementDays(e,U.settings)}function R(e){return U.settings.allowNegative=!1,i.validateEntitlementDays(e,U.settings)}function z(e){return U.settings.allowNegative=!0,i.validateEntitlementHours(e,U.settings)}function j(e){return U.settings.allowNegative=!1,i.validateEntitlementHours(e,U.settings)}function V(e){U.model.toDate=new Date(e.to_date),U.model.fromDate=new Date(e.from_date),G()}function G(){var e=i.getDurationInDays(U.model.fromDate,U.model.toDate);U.model.stleValidityDurationLabel=e>0?b.getLocalizedCustomWithVariables("Valid for {{durationInDays}} Day(s)",{durationInDays:e}):""}function B(){G(),v.afterDate.validator(U.model.toDate,U.model.fromDate)&&(p.$broadcast("schemaForm.error.fromDate","beforeDateStrict",!0),p.$broadcast("schemaForm.error.toDate","afterDateStrict",!0))}function q(e){var t=Object.assign({},e);return U.isStleLeaveType?(U.usedLeaveAmount>0?delete t.fromDate:t.fromDate=moment(e.fromDate).format("YYYY-MM-DD"),t.toDate=moment(e.toDate).format("YYYY-MM-DD")):(delete t.fromDate,delete t.toDate),delete t.stleValidityDurationLabel,t}function H(){U.schema={type:"object",title:"Edit Leave Entitlement",properties:{entitlementAmount:{title:"Entitlements (Days)",type:"string"},entitlementHours:{title:"Entitlements (Hours)",type:"string"},comment:{title:"Comment",type:"string",maxLength:255},entitlementType:{title:"Entitlement Type",type:"string"},creditedDate:{title:"Credited On",type:"string"},fromDate:{title:"Valid From",type:["null","object"]},toDate:{title:"Valid To",type:["null","object"]}},required:["entitlementAmount","entitlementHours","fromDate","toDate"]};var e=U.model.fromDate?new Date(U.model.fromDate):null,t=U.model.toDate?new Date(U.model.toDate):null;U.form=[{type:"section",htmlClass:"row",items:[{type:"readonly",label:"Employee",htmlClass:"col s12 m12 l6",value:U.employeeName},{type:"readonly",label:"Leave Type",htmlClass:"col s12 m12 l6",value:U.leaveType}]},{type:"section",htmlClass:"row",items:[{type:"readonly",label:"Valid Period",htmlClass:"col s12 m12 l6",value:U.leavePeriod,condition:function(){return!U.isStleLeaveType}},{type:"readonly",label:"Entitlement Type",htmlClass:"col s6 m6 l3",value:U.entitlementType},{type:"readonly",label:"Credited On",htmlClass:"col s6 m6 l3",value:U.creditedDate}]},{type:"section",htmlClass:"row",items:[{type:"date",htmlClass:"col s12 m12 l3",key:"fromDate",validationMessage:{beforeDate:b.getLocalizedCustom("From date should be on or before to date")},$validators:{beforeDate:function(e){return v.beforeDate.validator(e,U.model.toDate)},dateRequired:function(e){return v.dateRequiredValidation.validator(e)}},onChange:B,defaultDate:e,resetDefaultDate:U.resetDefaultDate,ngModelOptions:{allowInvalid:!0},readonly:U.isStleLeaveType&&U.usedLeaveAmount>0,condition:function(){return U.isStleLeaveType}},{type:"date",htmlClass:"col s12 m12 l3",key:"toDate",validationMessage:{afterDate:b.getLocalizedCustom("To date should be on or after from date"),minDate:b.getLocalizedCustom("To date should be after the last entitlement used date")},$validators:{afterDate:function(e){return v.afterDate.validator(e,U.model.fromDate)},dateRequired:function(e){return v.dateRequiredValidation.validator(e)},minDate:function(e){return N(e)}},onChange:B,defaultDate:t,resetDefaultDate:U.resetDefaultDate,ngModelOptions:{allowInvalid:!0},condition:function(){return U.isStleLeaveType}},{type:"text",htmlClass:"col s6 m6 l3",key:"entitlementAmount",condition:"model.hourBased === false",validationMessage:{positiveInteger:i.getPositiveDayBasedEntitlementValidationMessage(U.settings.dayDecimals),numeric:i.getDayBasedEntitlementValidationMessage(U.settings.dayDecimals),maxCap:b.getLocalizedCustomWithVariables("Limited to {{amount}} due to accrual max limit",{amount:M()}),moreThanUsedAmount:b.getLocalizedCustom("Cannot decrease entitlements beyond used value"),302:b.getLocalizedCustom("Required")},$validators:L(!1)},{type:"text",htmlClass:"col s6 m6 l3",key:"entitlementHours",placeholder:"HH:MM",condition:"model.hourBased === true",validationMessage:{validEntitlementHours:i.getHourBasedEntitlementValidationMessage(U.settings.hourDecimals),maxCap:b.getLocalizedCustomWithVariables("Limited to {{amount}} due to accrual max limit",{amount:M()}),moreThanUsedAmount:b.getLocalizedCustom("Cannot decrease entitlements beyond used value"),302:b.getLocalizedCustom("Required")},$validators:L(!0),onChange:function(e){D(e)}},{type:"text",htmlClass:"col s12 m6 l3 custom_valid_days",key:"stleValidityDurationLabel",value:U.model.stleValidityDurationLabel,readonly:!0,condition:function(){return U.isStleLeaveType}}]},{type:"section",htmlClass:"row",items:[{type:"textarea",htmlClass:"col s12 m12 l12",key:"comment",condition:"(model.type == 'entitlement')",validationMessage:{201:v.textLengthExceedValidation.message(U.schema.properties.comment.maxLength)}}]},h.getRequiredMessage(),{type:"section",htmlClass:"row form-buttons",items:[{htmlClass:"col s12 right-align",type:"submit",title:"Save"}]}]}var U=this;U.model={fromDate:null,toDate:null,stleValidityDurationLabel:null,entitlementAmount:0,entitlementId:0,projectedAmount:0,type:"entitlement",hourBased:!1},U.settings=w.getSettings(),U.title="Edit Leave Entitlement",U.commentList=[],U.employeeName="",U.leaveType="",U.leavePeriod="",U.entitlementType="",U.creditedDate="",U.commentTitle="Comments",U.onSubmit=I,U.entitlement={},U.maxCap=0,U.maxCapConfigValue=0,U.adjustType=null,U.isStleLeaveType=!1,U.defaultEntitlementValidityDays=90,U.usedLeaveAmount=0,U.lastLeaveTakenDate=null,U.initialValueFromDate=null,U.resetDefaultDate={reset:!1},S()}angular.module("app.leave").controller("EditLeaveEntitlementController",e),e.$inject=["webservice","leaveTypeService","leavePeriodService","leaveEntitlementService","leaveTypeRuleService","loader","toast","$q","ModalService","$rootScope","$timeout","$filter","$state","$scope","reportService","$stateParams","formHelper","formValidationHelper","datagroupPermissions","localizedMessages","entitlementConfirmationModalService","leaveService"]}(),function(){"use strict";function e(e){function t(t,a,i){return e.showModal({templateUrl:"app/leave/entitlement/add/entitlement-adjust-confirmation.html",controller:"LeaveEntitlementConfirmationController",controllerAs:"modal",inputs:{msg:t,type:"adjust",parentVm:a,modalFunctions:i}})}function a(t,a,i){return e.showModal({templateUrl:"app/leave/entitlement/add/entitlement-confirmation.html",controller:"LeaveEntitlementConfirmationController",controllerAs:"modal",inputs:{msg:t,type:"confirm",parentVm:a,modalFunctions:i}})}var i={openEntitlementAdjustConfirmationModal:t,openEntitlementConfirmationModal:a};return i}angular.module("app.leave").service("entitlementConfirmationModalService",e),e.$inject=["ModalService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w){function S(){if(n.show(),null!=g.id)T();else{var a={settings:e.call("settings","GET",{}),permissions:y.getPermissions(),leaveTypes:t.fetch({filter:{type:"entitlement"}})};r.all(a).then(function(e){K.leaveTypeList=e.leaveTypes.data.data,k(e.permissions),K.isCountryBased=e.settings.data.data.is_country_based_enabled,K.leaveTypeOptions=t.getFormatEnumAndTitleMap(e.leaveTypes.data.data),0==e.leaveTypes.data.data.length&&l.warning(b.getLocalizedCustom("No Leave Type Defined")),U(),D(),n.hide()})}}function D(){c.$broadcast("markMenuItemAsCurrent",{stateName:"leave.view_leave_entitlement"})}function T(){K.skipHandleEmployeeChange=!0,y.getPermissions().then(function(e){k(e),K.showResult=!0;var o={};g.employeeId?(o={filter:{employeeId:g.employeeId,leaveTypeId:g.leaveTypeId?g.leaveTypeId:void 0,from:g.from?g.from:void 0,to:g.to?g.to:void 0}},o=L(o)):o={filter:{id:g.id},include:"leaveType,leavePeriod"},i.fetch(o).then(function(e){var o,s,c;K.leaveEntitlement=e.data.data,K.durationUnit=i.getDurationUnitForEntitlementList(K.leaveEntitlement);var d=i.getExpiredCount(e.data.data,B(K.isStleLeaveType));K.durationUnit&&(K.totalEntitlement=i.formatEntitlement(e.data.meta.total-d,"hours"===K.durationUnit,K.settings)),K.unselectdIds=P(e.data.meta.deleteIds),K.editableIds=e.data.meta.updateIds,q(),H(),0==K.leaveEntitlement.length?(o=g.employeeId,s=g.leaveTypeId,c=g.from,l.info(b.getLocalizedCustom("No Records Found"))):(o=K.leaveEntitlement[0].emp_number,s=K.leaveEntitlement[0].leave_type_id,c=K.leaveEntitlement[0].from_date);var m={filter:{empNumber:o,leaveTypeId:s}},u={leavePeriod:a.fetch(s,m),employee:x(o),leaveTypes:t.fetch({filter:{type:"entitlement"}})};r.all(u).then(function(e){var i=e.employee.data.data;K.leaveTypeList=e.leaveTypes.data.data;var o=_.filter(K.leaveTypeList,{id:s});if(K.isStleLeaveType=o.length>0&&o[0].is_short_term,K.leaveTypeOptions=t.getFormatEnumAndTitleMap(e.leaveTypes.data.data),K.leavePeriodOptions=a.getEnumAndTitleMap(e.leavePeriod.data.data.leavePeriodList),K.model.leavePeriod=a.getLeavePeriodForDate(K.leavePeriodOptions["enum"],c),
K.model.selectedEmployee=i,K.model.selectedEmployee.fullName=C.getFullName(K.model.selectedEmployee),K.model.leaveType=s?s:"",K.showLeavePeriod=o.length>0&&!!s,K.isStleLeaveType){var l=B(!1);K.model.fromDate=g.from?g.from:l[0],K.model.toDate=g.to?g.to:l[1]}U(),A(),D(),n.hide()})})})}function x(t){return e.call("employees/"+t,"GET",[],{})}function F(){K.showSearchFilters=!K.showSearchFilters}function k(e){K.permissions=e.leave_entitlements,K.permissions.read||u.go("404")}function E(){return{filter:{employeeId:K.searchFilters.employeeId,leaveTypeId:K.searchFilters.leaveTypeId,from:K.searchFilters.date.from,to:K.searchFilters.date.to}}}function I(e,t){d(function(){p.$broadcast("schemaForm.error."+e,t,t),null})}function A(){var e=B(K.isStleLeaveType);if(K.isStleLeaveType){var t=moment(K.model.fromDate),a=moment(K.model.toDate);K.model.date={from:t.format("YYYY-MM-DD"),to:a.format("YYYY-MM-DD")}}else K.model.date={from:e[0],to:e[1]};K.searchFilters={employeeId:K.model.selectedEmployee.empNumber,leaveTypeId:K.model.leaveType,date:{from:K.model.date.from,to:K.model.date.to}}}function M(){var e=E(),t=L(e);return i.fetch(t).then(function(e){if(K.leaveEntitlement=e.data.data,0==K.leaveEntitlement.length)l.info(b.getLocalizedCustom("No Records Found"));else{K.durationUnit=i.getDurationUnitForEntitlementList(K.leaveEntitlement);var t=i.getExpiredCount(e.data.data,B(K.isStleLeaveType));K.durationUnit&&(K.totalEntitlement=i.formatEntitlement(e.data.meta.total-t,"hours"===K.durationUnit,K.settings))}K.unselectdIds=P(e.data.meta.deleteIds),K.editableIds=e.data.meta.updateIds,q(),H()})}function L(e){var t={filter:{employeeId:e.filter.employeeId},include:"leaveType,leavePeriod"};return e.filter.leaveTypeId&&e.filter.from&&e.filter.to&&(t.filter.leaveTypeId=e.filter.leaveTypeId,t.filter.from=e.filter.from,t.filter.to=e.filter.to),t}function P(e){return i.getNonDeletedIds(K.leaveEntitlement,e)}function N(){K.listData.selected.length>0&&s.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){if(e===!0){n.show();var t=K.listData.selected;i.remove(t).then(function(){M().then(function(){n.hide(),_.intersection(t,K.unselectdIds).length>0?l.error("Failed to Delete"):b.showLocalizedToast("deleteSuccess")})})}})})}function O(e){if(K.isStleLeaveType){var t=moment(K.model.fromDate).format("YYYY-MM-DD"),a=moment(K.model.toDate).format("YYYY-MM-DD");u.go("leave.edit_leave_entitlement",{id:e.id,filterFrom:t,filterTo:a})}else u.go("leave.edit_leave_entitlement",{id:e.id})}function R(e,t){return i.getExpiredAmount(t,B(K.isStleLeaveType),K.settings)}function z(e,t){var a=e.replace(/ \d{2}:\d{2}:\d{2}$/,"");return m("ohrmDateFilter")(a)}function j(e,t){return i.getAmount(t,B(K.isStleLeaveType),K.settings)}function V(e){return i.getUnitText(e)}function G(e,t){return R(e,t)?i.getUnitText(t.LeaveType.hour_based):null}function B(e){var t=[];return t=K.model.leaveType&&K.model.leavePeriod&&!e?K.model.leavePeriod.split("$$"):["",""]}function q(){var e=[{name:"leaveType",lable:"Leave Type",getter:"LeaveType",formatter:t.formatName},{name:"entitlementType",lable:"Entitlement Type",getter:"entitlement_type",formatter:i.getLocalizedTypeById},{name:"creditedDate",lable:"Credited On",getter:"credited_date",formatter:z},{name:"validFrom",lable:"Valid From",getter:"from_date",filters:[{name:"ohrmDateFilter"}]},{name:"validTo",lable:"Valid To",getter:"to_date",filters:[{name:"ohrmDateFilter"}]},{name:"expired",lable:"Expired",getter:"used","class":"right-align",headerColspan:2,formatter:R},{name:"expiredUnit",lable:"",getter:"used","class":"unit-column",hideHeader:!0,formatter:G},{name:"length",lable:"Leave Entitlement",getter:"length","class":"right-align",headerColspan:2,formatter:j},{name:"unit",lable:"",getter:["LeaveType","hour_based"],"class":"unit-column",hideHeader:!0,formatter:V}],a=null,o=null;K.permissions.update&&K.editableIds.length>0&&(a=[{"class":"edit_item",clickAction:"editEntitlement",tooltip:"Edit",hideIf:function(e){return _.includes(K.editableIds,e.id)}}],o=[{colspan:1}]);var n=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:K.permissions["delete"]}],l=K.permissions["delete"]?7:6,r=[{"class":"table-footer",colspan:1,data:b.getLocalizedCustom("Total")},{"class":"table-footer",colspan:l},{"class":"table-footer right-align",colspan:1,data:K.totalEntitlement},{"class":"table-footer unit-column",colspan:1,data:i.getUnitText("hours"===K.durationUnit)}];K.permissions.update&&r.push({"class":"table-footer",colspan:1}),K.listData={name:"viewLeaveEntitlement",selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:o,extraTD:a,showColumnsAnyway:!0,permission:K.permissions,listActions:n,unselectableIds:K.unselectdIds,pagination:!1,showFooter:!!K.durationUnit,footerList:r},K.permissions["delete"]&&K.permissions.update?K.listData.columnWidths=["5%","21%","11%","11%","11%","11%","6%","4%","9%","6%","5%"]:K.permissions["delete"]?K.listData.columnWidths=["5%","22%","11%","11%","11%","11%","7%","5%","10%","7%"]:K.permissions.update?K.listData.columnWidths=["22%","11%","11%","11%","11%","7%","5%","10%","7%","5%"]:K.listData.columnWidths=["23%","12%","12%","12%","12%","7%","5%","10%","7%"]}function H(){K.viewEntitlementHelper=new o.list(K.listData,K.leaveEntitlement,K.unselectdIds),K.selectAll=K.viewEntitlementHelper.selectAllItems,K.deselectAll=K.viewEntitlementHelper.deselectAllItems,K.changeSelection=K.viewEntitlementHelper.changeSelection}function U(){K.schema={type:"object",title:"Search Leave Entitlement",properties:{selectedEmployee:{title:"Employee",type:"object"},leaveType:{title:"Leave Type",type:"string"},leavePeriod:{title:"Leave Period",type:"string","enum":K.leavePeriodOptions["enum"]},fromDate:{title:"Valid From",type:["null","object"]},toDate:{title:"Valid To",type:["null","object"]}},required:["selectedEmployee","fromDate","toDate"]};var e=K.model.fromDate?new Date(K.model.fromDate):null,t=K.model.toDate?new Date(K.model.toDate):null;K.form=[{type:"section",htmlClass:"row",items:[{type:"auto-complete",htmlClass:"col s12 m12 l6",key:"selectedEmployee",idsToSkip:[],placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",validationMessage:{302:b.getLocalizedCustom("Required")},permissionType:"entitlement",onChange:function(e){K.skipHandleEmployeeChange?K.skipHandleEmployeeChange=!1:Y(e)}},{type:"select",htmlClass:"col s12 m12 l6",key:"leaveType",emptyOption:b.getLocalizedCustom("All"),titleMap:K.leaveTypeOptions.titleMap,onChange:function(e){J(e)}}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"leavePeriod",titleMap:K.leavePeriodOptions.titleMap,condition:function(){return!K.isStleLeaveType&&!!K.showLeavePeriod},emptyOption:!1},{type:"date",htmlClass:"col s12 m12 l6",key:"fromDate",validationMessage:{beforeDate:b.getLocalizedCustom("From date should be on or before to date")},$validators:{beforeDate:function(e){return v.beforeDate.validator(e,K.model.toDate)},dateRequired:function(e){return v.dateRequiredValidation.validator(e)}},onChange:W,defaultDate:e,resetDefaultDate:K.resetDefaultDate,ngModelOptions:{allowInvalid:!0},condition:function(){return K.isStleLeaveType}},{type:"date",htmlClass:"col s12 m12 l6",key:"toDate",validationMessage:{afterDate:b.getLocalizedCustom("To date should be on or after from date")},$validators:{afterDate:function(e){return v.afterDate.validator(e,K.model.fromDate)},dateRequired:function(e){return v.dateRequiredValidation.validator(e)}},onChange:W,defaultDate:t,resetDefaultDate:K.resetDefaultDate,ngModelOptions:{allowInvalid:!0},condition:function(){return K.isStleLeaveType}}]},h.getRequiredMessage(),{type:"section",htmlClass:"row form-buttons",items:[{htmlClass:"col s12 right-align",type:"submit",title:"Search"}]}]}function W(){v.afterDate.validator(K.model.toDate,K.model.fromDate)&&(p.$broadcast("schemaForm.error.fromDate","beforeDate",!0),p.$broadcast("schemaForm.error.toDate","afterDate",!0))}function Y(e){e?K.selectedEmployeeId!==e.originalObject.empNumber&&(K.selectedEmployeeId=e.originalObject.empNumber,K.model.selectedEmployee=e.originalObject,J()):(K.selectedEmployeeId=null,K.model.selectedEmployee=void 0)}function J(e){if(e||(e=K.model.leaveType),e){var t=_.filter(K.leaveTypeList,{id:e});K.isStleLeaveType=0!==t.length&&t[0].is_short_term,K.showLeavePeriod=!K.isStleLeaveType;var i={filter:{empNumber:K.model.selectedEmployee?K.model.selectedEmployee.empNumber:void 0}};n.show(),a.getLeavePeriodsForLeaveTypeAndEmployee(e,i,void 0,K.model,void 0).then(function(e){if(K.isStleLeaveType){var t=e.leavePeriod.split("$$");K.model.fromDate=t[0],K.model.toDate=t[1]}K.leavePeriodOptions=e.leavePeriodOptions,K.model.leavePeriod=e.leavePeriod,U(),n.hide()},function(e){K.leavePeriodOptions={titleMap:[],"enum":[]},I("leavePeriod",e?e.data:b.getLocalizedCustom("Leave period does not exist")),U(),n.hide()})}else K.showLeavePeriod=!1,K.isStleLeaveType=!1,U()}var K=this;K.title="Leave Entitlements",K.model={selectedEmployee:void 0,leaveType:"",leavePeriod:"",fromDate:null,toDate:null,date:{from:"",to:""}},K.selectedEmployeeId=null,K.leaveEntitlement=[],K.leaveTypeOptions={titleMap:[],"enum":[]},K.leavePeriodOptions={titleMap:[],"enum":[]},K.panelInfo={icon:"images/pim/icon_work.svg"},K.permissions={},K.showResult=!1,K.showSearchFilters=!0,K.toggleFilters=F,K.totalEntitlement=0,K.showLeavePeriod=!1,K.isStleLeaveType=!1,K.deleteSelection=N,K.selected=[],K.unselectdIds=[],K.editableIds=[],K.editEntitlement=O,K.getExpiredAmount=R,K.searchFilters={},K.leaveTypeList={},K.model.fromDate=moment(new Date),K.model.toDate=moment(new Date),K.settings=w.getSettings(),S(),K.resetDefaultDate={reset:!1},K.onSubmit=function(e){p.$broadcast("schemaFormValidate"),e.$valid&&(K.leaveEntitlement=[],K.showResult=!0,A(),M())}}angular.module("app.leave").controller("LeaveViewLeaveEntitlementController",e),e.$inject=["webservice","leaveTypeService","leavePeriodService","leaveEntitlementService","listHelper","loader","toast","$q","ModalService","$rootScope","$timeout","$filter","$state","$scope","reportService","$stateParams","formHelper","formValidationHelper","datagroupPermissions","localizedMessages","employeeService","leaveService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){void 0===C.model.leaveTypeOptions?e.fetch({filter:{empNumber:i.emp_number}},!1).then(function(t){C.leaveTypeList=t.data.data,C.model.leaveTypeOptions=e.getFormatEnumAndTitleMap(t.data.data),C.model.employeeId=i.emp_number,C.dataFetchPromise=p(C.model.leaveType,!0).then(function(){b()})}):b()}function p(e,a){if(""==e)return C.model.showLeavePeriod=!1,C.isStleLeaveType=!1,n.when([]);var i=_.filter(C.leaveTypeList,{id:e});C.isStleLeaveType=i[0].is_short_term;var l={filter:{empNumber:C.model.employeeId?C.model.employeeId:void 0}};return t.getLeavePeriodsForLeaveTypeAndEmployee(e,l,a,C.model,!1).then(function(t){if(C.model.showLeavePeriod=!!e,C.isStleLeaveType){var a=t.leavePeriod.split("$$");C.model.fromDate=a[0],C.model.toDate=a[1]}C.model.leavePeriodOptions=t.leavePeriodOptions,C.model.leavePeriod=t.leavePeriod,b()},function(e){C.model.leavePeriodOptions={titleMap:[],"enum":[]},f("leavePeriod",e?e.data:o.getLocalizedCustom("Leave period does not exist")),b()})}function f(e,t){d(function(){a.$broadcast("schemaForm.error."+e,t,t),null})}function g(e){a.$broadcast("schemaFormValidate"),e.$valid&&(C.dataFetchPromise===!1?h():C.dataFetchPromise.then(function(){h()}))}function h(){if(C.isStleLeaveType){var e=moment(C.model.fromDate),a=moment(C.model.toDate);C.model.date={from:e.format("YYYY-MM-DD"),to:a.format("YYYY-MM-DD")}}else C.model.date=t.getPeriod(C.model.leavePeriod);r(C.model)}function v(){r(!1)}function y(){m.afterDate.validator(C.model.toDate,C.model.fromDate)&&(a.$broadcast("schemaForm.error.fromDate","beforeDate",!0),a.$broadcast("schemaForm.error.toDate","afterDate",!0))}function b(){C.schema={type:"object",title:"Search Leave Entitlement",properties:{leaveType:{title:"Leave Type",type:"string"},leavePeriod:{title:"Leave Period",type:"string","enum":C.model.leavePeriodOptions["enum"]},fromDate:{title:"Valid From",type:["null","object"]},toDate:{title:"Valid To",type:["null","object"]}},required:["fromDate","toDate"]};var e=C.model.fromDate?new Date(C.model.fromDate):null,t=C.model.toDate?new Date(C.model.toDate):null;C.form=[{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"leaveType",titleMap:C.model.leaveTypeOptions.titleMap,emptyOption:o.getLocalizedCustom("All"),onChange:function(e){C.dataFetchPromise=p(e).then(function(){b()})}},{type:"select",htmlClass:"col s12 m12 l6",key:"leavePeriod",titleMap:C.model.leavePeriodOptions.titleMap,condition:function(){return!C.isStleLeaveType&&C.model.showLeavePeriod},emptyOption:!1}]},{type:"section",htmlClass:"row",items:[{type:"date",htmlClass:"col s12 m12 l6",key:"fromDate",validationMessage:{beforeDate:o.getLocalizedCustom("From date should be on or before to date")},$validators:{beforeDate:function(e){return m.beforeDate.validator(e,C.model.toDate)},dateRequired:function(e){return m.dateRequiredValidation.validator(e)}},onChange:y,defaultDate:e,resetDefaultDate:C.resetDefaultDate,ngModelOptions:{allowInvalid:!0},condition:function(){return C.isStleLeaveType}},{type:"date",htmlClass:"col s12 m12 l6",key:"toDate",validationMessage:{afterDate:o.getLocalizedCustom("To date should be on or after from date")},$validators:{afterDate:function(e){return m.afterDate.validator(e,C.model.fromDate)},dateRequired:function(e){return m.dateRequiredValidation.validator(e)}},onChange:y,defaultDate:t,resetDefaultDate:C.resetDefaultDate,ngModelOptions:{allowInvalid:!0},condition:function(){return C.isStleLeaveType}}]}]}var C=this;c.close=r,C.title="My Leave Entitlements",C.model={fromDate:null,toDate:null},Object.keys(s).length>0&&(C.model=s),C.model.employeeId=C.model.employeeId?C.model.employeeId:"",C.model.leaveType=C.model.leaveType?C.model.leaveType:"",C.model.leavePeriod=C.model.leavePeriod?C.model.leavePeriod:"",C.model.date=C.model.date?C.model.date:{},C.model.leavePeriodOptions=C.model.leavePeriodOptions?C.model.leavePeriodOptions:{titleMap:[],"enum":[]},C.model.showLeavePeriod=!1,C.dataFetchPromise=!1,C.leaveTypeList={},C.isStleLeaveType=!1,C.model.fromDate=moment(new Date),C.model.toDate=moment(new Date),C.search=g,C.cancel=v,u(),C.resetDefaultDate={reset:!1}}angular.module("app.leave").controller("LeaveViewMyLeaveEntitlementSearchController",e),e.$inject=["leaveTypeService","leavePeriodService","$scope","$rootScope","localizedMessages","$q","logger","close","currentFilter","modalFunctions","$timeout","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r){function s(){e.$broadcast("filter",[])}var c=this;c.filter=s,c.title="My Leave Entitlements",c.employee=!1}angular.module("app.leave").controller("LeaveViewMyLeaveEntitlementNavbarController",e),e.$inject=["$rootScope","$scope","$document","$translate","$state","webservice","ModalService","focus"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y){function b(){w(),v.show();var e={filter:{employeeId:c.employeeId?c.employeeId:i.emp_number,leaveTypeId:c.leaveTypeId?c.leaveTypeId:void 0,from:c.from?c.from:void 0,to:c.to?c.to:void 0}};x(e);var a=T(e);t.fetch(a).then(function(e){if(L.leaveEntitlement=e.data.data,0==L.leaveEntitlement.length)f.info(p.getLocalizedCustom("No Records Found"));else{L.durationUnit=t.getDurationUnitForEntitlementList(L.leaveEntitlement);var a=t.getExpiredCount(e.data.data,C());L.durationUnit&&(L.totalEntitlement=t.formatEntitlement(e.data.meta.total-a,"hours"===L.durationUnit,L.settings))}F(),v.hide()})}function C(){var e=[];return e=L.searchFilters.leaveType&&L.searchFilters.date.from&&L.searchFilters.date.to?[L.searchFilters.date.from,L.searchFilters.date.to]:["",""]}function w(){null==i.emp_number&&l.go("403")}function _(){var e={close:function(){}};a.showModal({templateUrl:"app/leave/entitlement/viewMy/view-my-leave-entitlement-filter.html",controller:"LeaveViewMyLeaveEntitlementSearchController",controllerAs:"modal",inputs:{currentFilter:L.searchFilters,modalFunctions:e}}).then(function(t){var a=angular.copy(L.searchFilters);$(t.element).openModal({complete:function(){e.close(!1)}}),t.close.then(function(e){$(t.element).closeModal(),e===!1?L.searchFilters=a:S(e)})})}function S(e){v.show();var a=D(e);x(a);var i=T(a);t.fetch(i).then(function(e){if(L.leaveEntitlement=e.data.data,0==L.leaveEntitlement.length)f.info(p.getLocalizedCustom("No Records Found"));else{L.durationUnit=t.getDurationUnitForEntitlementList(L.leaveEntitlement);var a=t.getExpiredCount(e.data.data,C());L.durationUnit&&(L.totalEntitlement=t.formatEntitlement(e.data.meta.total-a,"hours"===L.durationUnit,L.settings))}F(),v.hide()})}function D(e){return{filter:{employeeId:e.employeeId,leaveTypeId:e.leaveType,from:e.date.from,to:e.date.to}}}function T(e){var t={filter:{employeeId:e.filter.employeeId?e.filter.employeeId:i.emp_number},include:"leaveType,leavePeriod"};return e.filter.leaveTypeId&&e.filter.from&&e.filter.to&&(t.filter.leaveTypeId=e.filter.leaveTypeId,t.filter.from=e.filter.from,t.filter.to=e.filter.to),t}function x(e){L.searchFilters={employeeId:e.filter.employeeId,leaveType:e.filter.leaveTypeId,date:{from:e.filter.from,to:e.filter.to}}}function F(){var e=[{name:"leaveType",lable:"Leave Type",getter:"LeaveType",formatter:g.formatName},{name:"entitlementType",lable:"Entitlement Type",getter:"entitlement_type",formatter:t.getLocalizedTypeById},{name:"creditedDate",lable:"Credited On",getter:"credited_date",formatter:M},{name:"validFrom",lable:"Valid From",getter:"from_date",formatter:t.formatDate},{name:"validTo",lable:"Valid To",getter:"to_date",formatter:t.formatDate},{name:"expired",lable:"Expired",getter:"used","class":"balance-column right-align",headerColspan:2,formatter:k},{name:"expiredUnit",lable:"",getter:"used","class":"unit-column",hideHeader:!0,formatter:A},{name:"length",lable:"Leave Entitlement",getter:"length","class":"balance-column right-align",headerColspan:2,formatter:E},{name:"unit",lable:"",getter:["LeaveType","hour_based"],"class":"unit-column",hideHeader:!0,formatter:I}],a=[{"class":"table-footer",colspan:1,data:p.getLocalizedCustom("Total")},{"class":"table-footer",colspan:6},{"class":"table-footer right-align",colspan:1,data:L.totalEntitlement},{"class":"table-footer unit-column",colspan:1,data:t.getUnitText("hours"===L.durationUnit)}];L.listData={selectable:!1,selected:[],idGetter:"id",listFields:e,showColumnsAnyway:!0,permission:L.permissions,pagination:!1,showFooter:!!L.durationUnit,footerList:a}}function k(e,a){return t.getExpiredAmount(a,C(),L.settings)}function E(e,a){return t.getAmount(a,C(),L.settings)}function I(e){return t.getUnitText(e)}function A(e,a){return k(e,a)?t.getUnitText(a.LeaveType.hour_based):null}function M(e,t){var a=e.replace(/ \d{2}:\d{2}:\d{2}$/,"");return n("ohrmDateFilter")(a)}var L=this;L.title="My Leave Entitlements",L.model={},L.model.employeeId=null,L.leaveEntitlement=[],L.panelInfo={},L.permissions={read:!0,"delete":!0},L.showFilter=_,L.totalEntitlement=0,L.searchFilters={},L.settings=y.getSettings(),r.$on("filter",_),e.isLoggedIn()?b():e.login().then(function(e){b()})}angular.module("app.leave").controller("LeaveViewMyLeaveEntitlementController",e),e.$inject=["webservice","leaveEntitlementService","ModalService","$rootScope","$timeout","$filter","$state","$scope","reportService","$stateParams","formHelper","formValidationHelper","datagroupPermissions","localizedMessages","toast","leaveTypeService","leavePeriodService","loader","leaveService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w){function _(){S(),N.form[0].items[1].title=D(N.model.recurring)}function S(){N.model={recurring:"1"==N.holiday.recurring,description:N.holiday.description,date:N.holiday.date,length:N.holiday.length,operational_country_id:N.holiday.operational_country_id},N.schema={type:"object",title:"holidays",properties:{description:{title:"Name",type:"string",maxLength:200},date:{title:"Date",type:["null","object"]},recurring:{title:"Repeats Annually",type:"boolean"},length:{title:"Full Day/Half Day",type:"string","enum":u.getEnumAndTitleMapForSelect(R,{name:"name",value:"value"})["enum"]},operational_country_id:{title:"Country",type:"string","enum":u.getEnumAndTitleMapForSelect(n,{name:"name",value:"value"})["enum"]}},required:["description","date","length","operational_country_id"]},N.dateField={type:"date",htmlClass:"col s12 m12 l6",key:"date",title:"Date",defaultDate:N.model.date,onChange:function(e){N.form[1].items[1].title=L(e)},validationMessage:{302:t.getLocalizedCustom("Required")}},N.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l6",key:"description",validationMessage:{302:t.getLocalizedCustom("Required"),201:y.textLengthExceedValidation.message(N.schema.properties.description.maxLength)}},N.dateField]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"length",titleMap:u.getEnumAndTitleMapForSelect(R,{name:"name",value:"value"}).titleMap,validationMessage:{302:t.getLocalizedCustom("Required")}},{htmlClass:"col s12 m12 l6 recurringCheckbox",key:"recurring",title:"Repeats Annually",onChange:function(e){N.form[0].items[1].title=D(e)}}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"operational_country_id",titleMap:u.getEnumAndTitleMapForSelect(n,{name:"name",value:"value"}).titleMap,onChange:E,validationMessage:{302:t.getLocalizedCustom("Required")}}]}],N.model.operational_country_id&&I()}function D(e){return e?"Start Date":"Date"}function T(t){if(m.$broadcast("schemaFormValidate"),t.$valid){s.show();var a={date:p.toStandardDate(N.model.date),country:N.model.operational_country_id,location:A(N.model.location),recurring:N.model.recurring?"on":"off"};e.call("holidays/has-editable-leave","GET",[],a).then(function(e){s.hide();var t=e.data.data;x(t,a)},function(e){s.hide(),c.error(e)})}}function x(e,t){angular.extend(N.holiday,N.model);var a=N.holiday.id,i=angular.copy(N.model);if(i.date=t.date,i.location=t.location,i.recurring=t.recurring,e){var o={templateUrl:"app/core/modal/confirmation_modal.html",controller:"ConfirmationModalController",controllerAs:"modal",inputs:{customMessage:"Would you like to adjust leave already applied? This will cancel any leaves that are no longer necessary",successLabel:"Yes",cancelLabel:"No"}};b.showModal(o).then(function(e){$(e.element).openModal(),e.close.then(function(e){i.adjustLeave=e,F(i,a)})})}else i.adjustLeave=!1,F(i,a)}function F(t,a){var i="POST",o="holidays",n="saveSuccess";a&&(i="PATCH",o+="/"+a,n="updateSuccess");var l={updateFinished:!1,updateCancelled:!1},s={forceCompletionCallback:function(e){return 1==l.updateFinished},forceCancellationCallback:function(e){return 1==l.updateCancelled}},m={progressModal:C.showProgressModal("Saving Holiday","edit_holiday",s),holidays:e.call(o,i,t,{}).then(function(e){return l.updateFinished=!0,e})};w.all(m).then(function(e){d.$broadcast("holiday-saved",n)},function(e){l.updateCancelled=!0,c.success(e)}),r({success:!0,toast:n})}function k(){r(!1)}function E(){N.model.location={};var e=N.locationList[N.model.operational_country_id];for(var t in e)N.model.location[t]=!0}function I(){N.model.location={};var e=N.holiday.location;for(var t in e)e[t]&&(N.model.location[t]=!0)}function A(e){var t=[];for(var a in e)e[a]&&t.push(a);return t}function M(e,t){if("1"!=e.recurring||!e.refId)return e;for(var a in t)if(t[a].id==e.refId)return t[a]}function L(e){var t=h.instant("Repeats Annually");if(e instanceof Date){var a=e.getMonth();t=t+" "+h.instant("on")+" "+z[a];var e=("0"+e.getDate()).slice(-2);t=t+" "+e}return t}function P(e){var t=e.map(function(e){return h.instant(e)});return t}var N=this;v.close=r,N.modalProperties=i;var O={};a=M(a,o),angular.copy(a,O),N.holiday=O,N.checkLeaveOnHoliday=T,N.cancel=k;var R=[{value:"0",name:"Full Day"},{value:"4",name:"Half Day"}],z=P(["January","February","March","April","May","June","July","August","September","October","November","December"]),n=n;N.locationList=l,_()}angular.module("app.leave").controller("LeaveEditHolidayController",e),e.$inject=["webservice","localizedMessages","holiday","modalProperties","dataList","countryList","locationList","close","loader","toast","$rootScope","$scope","formHelper","dateService","visualList","editableIdList","$translate","modalFunctions","formValidationHelper","ModalService","modalHelperService","$q"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s){function c(){e.$broadcast("filter",[])}var d=this;d.filter=c,d.title=o.current.data.title,s.getPermissions().then(function(e){d.permissions=e.holidays})}angular.module("app.leave").controller("LeaveHolidaysNavbarController",e),e.$inject=["$rootScope","$scope","$document","$translate","$state","webservice","ModalService","focus","datagroupPermissions"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){m.fetchDefault().then(function(e){C=e.data.data,f(),p()})}function p(){b.schema={type:"object",title:"holidays",properties:{startDate:{title:"From",type:["null","object"]},endDate:{title:"To",type:["null","object"]},operationalCountryId:{title:"Country",type:"string","enum":n.getEnumAndTitleMapForSelect(s,{name:"name",value:"value"})["enum"]}},required:[]},b.form=[{type:"section",htmlClass:"row",items:[{type:"date",htmlClass:"col s12 m12 l6",key:"startDate",defaultDate:b.filters.startDate},{type:"date",htmlClass:"col s12 m12 l6",key:"endDate",defaultDate:b.filters.endDate}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"operationalCountryId",titleMap:n.getEnumAndTitleMapForSelect(s,{name:"name",value:"value"}).titleMap,onChange:v}]}]}function f(){b.filters={startDate:new Date(C.currentStartDate),endDate:new Date(C.currentEndDate),operationalCountryId:""},d&&(b.filters={startDate:d.startDate,endDate:d.endDate,operationalCountryId:null==d.operationalCountryId?"":d.operationalCountryId},y(d.locations))}function g(){o(b.filters)}function h(){o(!1)}function v(){b.filters.location={};var e=b.locationList[b.filters.operationalCountryId];for(var t in e)b.filters.location[t]=!0}function y(e){b.filters.location={},_.isArray(e)&&e.forEach(function(e){b.filters.location[e]=!0})}var b=this;b.search=g,b.cancel=h;var C,s=s;b.locationList=c,u()}angular.module("app.leave").controller("LeaveHolidaySearchController",e),e.$inject=["$q","$scope","logger","webservice","close","formHelper","widgetChoiceHelper","$translate","countryList","locationList","oldFilter","leavePeriodService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v){function y(){s.show();var e={settings:n.call("settings","GET",{}),permissions:d.getPermission("holidays"),operationalCountries:g.fetchOperationalCountriesForLocations(),defaultLeavePeriod:f.fetchDefault(),allLocations:g.fetchUnfilteredLocation(),accessibleLocation:g.fetchLocation(),pageSize:h.getSetting("page_size")};i.all(e).then(function(e){Z.permissions=b(e.permissions),Z.isCountryBasedEnabled=e.settings.data.data.is_country_based_enabled,Q=O(e.operationalCountries.data.data),X=R(e.allLocations.data.data),ee=z(e.operationalCountries.data.data),te=j(e.accessibleLocation.data.data,e.operationalCountries.data.data),ae=e.defaultLeavePeriod.data.data,Z.filters.startDate=ae.currentStartDate,Z.filters.endDate=ae.currentEndDate,Z.filters.operationalCountryId="",Z.pageSize=e.pageSize,C("date","DESC",1)}),p.$on("holiday-saved",function(e,t){l.showLocalizedToast(t),C("date","DESC",1)})}function b(e){return e.read?e:(s.hide(),void m.go("403"))}function C(e,t,a){var o={paginationParameters:{offset:(a-1)*Z.pageSize,limit:Z.pageSize,sortingField:Z.sortingListFields[e],sortingOrder:t},searchParameters:Z.filters},r=[];r.push(n.call("holidays","GET",[],o)),i.all(r).then(function(e){Z.readOnlyIds=e[0].data.readOnlyIdList,Z.editableIds=e[0].data.editableIdList,Z.cleanedData=angular.copy(G(e[0].data.data)),Z.allHolidays=B(G(e[0].data.data)),Z.totalDataCount=Z.allHolidays.length,Z.holidays=H(Z.allHolidays,o.paginationParameters,a),S(),Z.dataInCurruntPage=Z.holidays.length,Z.page=a,Z.lastPage=Math.ceil(Z.totalDataCount/Z.pageSize),w(),s.hide(),0==Z.allHolidays.length&&l.infoToast("No Records Found")})}function w(){Z.holidaysListHelper=new t.list(Z.listData.holidays,Z.holidays,Z.readOnlyIds),Z.selectAll=Z.holidaysListHelper.selectAllItems,Z.deselectAll=Z.holidaysListHelper.deselectAllItems}function S(){Z.panelInfo={holidaysInfo:{}},D()}function D(){var e=[{name:"description",lable:"Name",getter:"description",sortable:!0,sortAction:"fetchHolidays",formatter:function(e){return l.getLocalizedCustom(e)}},{name:"date",lable:"Date",getter:"date",sortable:!0,sortAction:"fetchHolidays",formatter:function(e){if(e)return e=e.slice(0,10),u.toLocalizedDate(e)}},{name:"length",lable:"Full Day/ Half Day",getter:"length",formatter:function(e){return l.getLocalizedCustom(ie[e])}},{name:"recurring",lable:"Repeats Annually",getter:"recurring",formatter:function(e){return l.getLocalizedCustom(oe[e])}},{name:"operational_country_id",lable:"Country",getter:"operational_country_id",sortable:!0,sortAction:"fetchHolidays",formatter:function(e){return l.getLocalizedCustom(Q[e])}},{name:"location",lable:"Location",getter:"location",formatter:function(e){var t="";for(var a in e)t=t+X[a]+", ";return t.substring(0,t.length-2)}}],t=[{colspan:3}],a=[{"class":"edit_item",clickAction:"confirmEditHoliday",tooltip:"Edit",hideIf:function(e){return _.includes(Z.editableIds,e.id)}}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:Z.permissions["delete"]}];Z.listData={holidays:{selectable:!0,selected:[],idGetter:"id",listFields:e,showColumnsAnyway:!0,permission:Z.permissions,listActions:i,pagination:!0,unselectableIds:Z.readOnlyIds}},Z.permissions.update&&(Z.listData.holidays.extraTH=t,Z.listData.holidays.extraTD=a,Z.listData.holidays.columnWidths=["5%","25%","10%","10%","5%","10%","25%","5%"]),Z.permissions.update||Z.permissions["delete"]||(Z.listData.holidays.columnWidths=["30%","10%","10%","5%","10%","30%"]),Z.permissions.update&&!Z.permissions["delete"]&&(Z.listData.holidays.columnWidths=["25%","10%","10%","5%","10%","30%","5%"]),!Z.permissions.update&&Z.permissions["delete"]&&(Z.listData.holidays.columnWidths=["5%","25%","10%","10%","5%","10%","30%"])}function T(){Z.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function x(e){if("1"==e.recurring){var t={templateUrl:"app/core/modal/confirmation_modal.html",controller:"ConfirmationModalController",controllerAs:"modal",inputs:{customMessage:"This holiday repeats annually. Altering this record will change all holidays in the sequence. Are you sure you want to continue?",successLabel:"Yes, Edit",cancelLabel:"No, Cancel"}};o.showModal(t).then(function(t){$(t.element).openModal(),t.close.then(function(a){a===!0&&(t.element.closeModal(),F(e))})})}else F(e)}function F(e){var t={close:function(){}};o.showModal({templateUrl:"app/leave/holidays/edit/leave-edit-holiday-modal.html",controller:"LeaveEditHolidayController",controllerAs:"modal",inputs:{holiday:e,dataList:Z.cleanedData,visualList:Z.holidays,modalProperties:{title:"Edit Holiday"},countryList:ee,locationList:te,editableIdList:Z.editableIds,modalFunctions:t}}).then(function(e){$(e.element).openModal({complete:function(){t.close(!1)}}),e.close.then(function(e){e.success})})}function k(){if(Z.listData.holidays.selected.length>0){var e={updateFinished:!1,updateCancelled:!1},t={forceCompletionCallback:function(t){return 1==e.updateFinished},forceCancellationCallback:function(t){return 1==e.updateCancelled;
}},a={progressModal:v.showProgressModal("Deleting Holiday(s)","delete_holiday",t),holidaysDelete:n.call("holidays","DELETE",{data:Z.listData.holidays.selected},{}).then(function(t){return e.updateFinished=!0,t})};i.all(a).then(function(e){l.showLocalizedToast("deleteSuccess"),C("date","DESC",1)},function(t){e.updateCancelled=!0,c.success(t)})}}function E(e){var t=e.obj;if(t.selected)Z.listData.holidays.selected.push(t.id);else{var a=Z.listData.holidays.selected.indexOf(t.id);a>-1&&Z.listData.holidays.selected.splice(a,1)}}function I(){if(Z.listData.holidays.selected.length>0){for(var e=!1,t=0;t<Z.listData.holidays.selected.length&&!(e=Z.holidays.some(function(e){return e.id===Z.listData.holidays.selected[t]&&"1"===e.recurring}));t++);var a={};a=e?{templateUrl:"app/core/modal/confirmation_modal.html",controller:"ConfirmationModalController",controllerAs:"modal",inputs:{customMessage:"These holiday(s) repeat annually. Deleting these records will remove all holiday(s) in the sequence. Are you sure you want to continue?",successLabel:"Yes, Delete",cancelLabel:"No, Cancel"}}:{templateUrl:"app/core/modal/confirmation_modal.html",controller:"ConfirmationModalController",controllerAs:"modal",inputs:{customMessage:"You are about to delete data permanently. Are you sure you want to continue?",successLabel:"Yes, Delete",cancelLabel:"No, Cancel"}},o.showModal(a).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&(k(),M(Z.listData.holidays.selected.length))})})}}function A(){var e={recurring:"",description:"",date:null,length:"",operational_country_id:"",location:[]},t={close:function(){}};o.showModal({templateUrl:"app/leave/holidays/edit/leave-edit-holiday-modal.html",controller:"LeaveEditHolidayController",controllerAs:"modal",inputs:{holiday:e,dataList:Z.cleanedData,visualList:Z.holidays,modalProperties:{title:"Add Holiday"},countryList:ee,locationList:te,editableIdList:Z.editableIds,modalFunctions:t}}).then(function(e){$(e.element).openModal({complete:function(){t.close(!1)}}),e.close.then(function(e){e.success})})}function M(e){Z.totalDataCount=Z.totalDataCount-e,Z.dataInCurruntPage=Z.dataInCurruntPage-e}function L(){close(!0)}function P(){close(!1)}function N(){o.showModal({templateUrl:"app/leave/holidays/search/leave-holiday-search.html",controller:"LeaveHolidaySearchController",controllerAs:"modal",inputs:{oldFilter:Z.filters,countryList:ee,locationList:te}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e&&(Z.filters.startDate=u.toStandardDate(e.startDate),Z.filters.endDate=u.toStandardDate(e.endDate),Z.filters.operationalCountryId=""==e.operationalCountryId?null:e.operationalCountryId,Z.filters.locations=V(e.location),C("date","DESC",1))})})}function O(e){var t=[];for(var a in e)t[e[a].id]=e[a].Country.cou_name;return t}function R(e){var t=[];for(var a in e)t[e[a].id]=e[a].name;return t}function z(e){var t=[];for(var a in e){var i={};i.name=e[a].Country.cou_name,i.value=e[a].id,t.push(i)}return t}function j(e,t){var a={};for(var i in t){var o={},n=t[i].id;for(var l in e)t[i].country_code==e[l].country.code&&(o[e[l].id]=e[l].name);a[n]=o}return a}function V(e){var t=[];for(var a in e)e[a]&&t.push(a);return t}function G(e){for(var t in e)if(e[t].HolidayLocation){var a=e[t].HolidayLocation,i={};for(var o in a)i[a[o].location_id]=!0;e[t].location=i}return e}function B(e){var t=Z.filters.startDate,a=Z.filters.endDate,i=[];for(var o in e)if("1"==e[o].recurring){var n=new Date(t.substring(0,4)+""+e[o].date.substring(4,e[o].date.length)),l=new Date(a.substring(0,4)+""+e[o].date.substring(4,e[o].date.length)),r=new Date(e[o].date).getFullYear(),s=new Date(t).getFullYear(),c=new Date(a).getFullYear(),d=s;r>s&&(d=r),u.compare(n,t)<0&&(d+=1),u.compare(a,l)<0&&(c-=1);for(var m=d;m<=c;m++){var p=angular.copy(e[o]);p.refId=p.id,p.id=p.id+"-"+m,p.date=m+""+p.date.substring(4,p.date.length),q(p.date)&&(_.includes(Z.readOnlyIds,p.refId)&&Z.readOnlyIds.push(p.id),_.includes(Z.editableIds,p.refId)&&Z.editableIds.push(p.id),i.push(p))}}else i.push(e[o]);return i}function q(e){var t=moment(e);return t.isValid()}function H(e,t,a){var i=U(e,t.sortingField,t.sortingOrder),o=Y(i,a);return W(),o}function U(e,t,a){return Z.field="description",e.sort(J),Z.field=Z.sortingListFields[t],"ASC"==a?e.sort(J):"DESC"==a&&e.sort(K),e}function W(){Z.page==Z.lastPage?Z.dataInCurruntPage=Z.totalDataCount-Z.pageSize*Math.floor(Z.totalDataCount/Z.pageSize):Z.dataInCurruntPage=Z.pageSize}function Y(e,t){var a;Z.page=t;var i=(t-1)*Z.pageSize;return a=t==Z.lastPage?e.slice(i,Z.totalDataCount):e.slice(i,i+Z.pageSize)}function J(e,t){return e[Z.field]<t[Z.field]?-1:e[Z.field]>t[Z.field]?1:0}function K(e,t){return e[Z.field]<t[Z.field]?1:e[Z.field]>t[Z.field]?-1:0}var Z=this;Z.holidays="",Z.editHolidays=F,Z.confirmEditHoliday=x,Z.deleteHolidays=k,Z.changeSelection=E,Z.deleteSelection=I,Z.addHoliday=A,Z.confirm=L,Z.cancel=P,Z.filters={};var Q,X,ee,te,ae,ie={0:"Full Day",4:"Half Day"},oe={0:"No",1:"Yes"};Z.fetchHolidays=C,Z.sortingListFields={description:"description",date:"date",operational_country_id:"operational_country_id"},Z.pageSize=50,Z.page=1,Z.lastPage=0,Z.totalDataCount=0,Z.dataInCurruntPage=0,y(),T(),p.$on("filter",N)}angular.module("app.leave").controller("LeaveHolidaysController",e),e.$inject=["logger","listHelper","$window","$q","ModalService","webservice","localizedMessages","$rootScope","loader","toast","datagroupPermissions","$state","dateService","$scope","leavePeriodService","leaveEmployeeService","settingsService","modalHelperService"]}(),function(){"use strict";angular.module("app.leave").constant("leaveConstant",{ATTACHMENT_DISABLED_STATUS_ID:0,ATTACHMENT_ENABLED_STATUS_ID:1,ATTACHMENT_MANDATORY_STATUS_ID:2,ATTACHMENT_OPTIONAL_WITH_REMINDER_STATUS_ID:3})}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"leave",config:{"abstract":!0,url:"/leave",template:"<ui-view/>"}},{state:"vueleave",config:{"abstract":!0,url:"/leave",template:"<ui-view/>"}},{state:"leave.calendar",config:{url:"/calendar",views:{"":{templateUrl:"app/leave/calendar/monthly_calendar.html",controller:"MonthlyLeaveCalendar",controllerAs:"vm"}},data:{title:"Leave Calendar",addShortcut:!0},params:{filterParameters:{dynamic:!0,value:null},calledFromMyShortcuts:null}}},{state:"leave.calendar_configuration",config:{url:"/calendar_configuration",views:{"":{templateUrl:"app/leave/calendarConfiguration/calendar-configuration.html",controller:"LeaveCalendarConfigurationController",controllerAs:"vm"}},data:{title:"Leave Calendar Configuration"}}},{state:"leave.calendar_shortcut",config:{url:"/calendar_shortcut",views:{"":{controller:"LeaveCalendarShortCut",controllerAs:"vm"}},data:{initialState:"leave.calendar"}}},{state:"leave.define_leave_period",config:{url:"/define_leave_period",views:{"":{templateUrl:"app/leave/defineLeavePeriod/leave-define-leave-period.html",controller:"LeaveDefineLeavePeriodController",controllerAs:"defineLeavePeriodCtrl"}},data:{title:"Leave Period"}}},{state:"leave.percentage_report",config:{url:"/percentage_report/{id}?{filters:escapedJson}",views:{"":{templateUrl:"app/leave/reports/percentageReport/leave-percentage-report.html",controller:"LeaveLeavePercentageReportController",controllerAs:"leavePercentageReportCtrl"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:"SingleMenuItemTopRibbonController",controllerAs:"vm"}},params:{show_filters:!1,showSuccessToast:!1,page_reGenerate:!1},data:{title:"Leave Percentage Report",initialState:"reports_and_analytics.catalogue"}}},{state:"vueleave.leave_type_list",config:{url:"/leave_type_list",views:{"":{controller:"VueController"}},data:{oxd:!0,vueComponent:["leave","leaveTypes"]}}},{state:"leave.define_work_week",config:{url:"/define_work_week",views:{"":{templateUrl:"app/leave/defineWorkWeek/leave-define-work-week.html",controller:"LeaveDefineWorkWeekController",controllerAs:"defineWorkWeekCtrl"}},data:{title:"Work Week"}}},{state:"leave.add_leave_entitlement",config:{url:"/add_leave_entitlement",views:{"":{templateUrl:"app/leave/entitlement/add/add-leave-entitlement.html",controller:"LeaveAddLeaveEntitlementController",controllerAs:"vm"}},data:{title:"Add Leave Entitlement"}}},{state:"leave.edit_leave_entitlement",config:{url:"/edit_leave_entitlement/:id/:filterFrom/:filterTo",params:{filterFrom:{value:null,squash:!0},filterTo:{value:null,squash:!0}},views:{"":{templateUrl:"app/leave/entitlement/edit/edit-leave-entitlement.html",controller:"EditLeaveEntitlementController",controllerAs:"vm"}},data:{title:"Edit Leave Entitlement",initialState:"leave.view_leave_entitlement"}}},{state:"leave.view_leave_entitlement",config:{url:"/view_leave_entitlement/:id/:employeeId/:leaveTypeId/:from/:to",params:{id:{value:null,squash:!0},employeeId:{value:null,squash:!0},leaveTypeId:{value:null,squash:!0},from:{value:null,squash:!0},to:{value:null,squash:!0}},views:{"":{templateUrl:"app/leave/entitlement/view/view-leave-entitlement.html",controller:"LeaveViewLeaveEntitlementController",controllerAs:"vm"}},data:{title:"Leave Entitlements"}}},{state:"leave.view_my_leave_entitlement",config:{url:"/view_my_leave_entitlement",views:{"":{templateUrl:"app/leave/entitlement/viewMy/view-my-leave-entitlement.html",controller:"LeaveViewMyLeaveEntitlementController",controllerAs:"vm"},"navbar@":{templateUrl:"app/leave/entitlement/viewMy/view-my-entitlement-navbar.html",controller:"LeaveViewMyLeaveEntitlementNavbarController",controllerAs:"navbar"}},data:{title:"My Leave Entitlements"}}},{state:"leave.define_leave_type_rule_general",config:{url:"/define_leave_type_rule/{id}",views:{"":{templateUrl:"app/leave/defineLeaveTypeRule/general/leave.define-leave-type-rule-general.html",controller:"LeaveDefineLeaveTypeRuleGeneralController",controllerAs:"leaveTypeRuleGeneralCtrl"},"customTopRibbon@":{templateUrl:"app/leave/defineLeaveTypeRule/leave_define_leave_type_rule_custom_top_ribbon.html",controller:"LeaveDefineLeaveTypeRuleCustomTopRibbonController",controllerAs:"vm"}},data:{title:"General",initialState:"leave_type_list"},params:{id:null,name:""}}},{state:"leave.define_leave_type_rule_who_can_apply",config:{url:"/define_leave_type_rule_who_can_apply/{id}",views:{"":{templateUrl:"app/leave/defineLeaveTypeRule/whoCanApply/leave.define_leave_type_rule_who_can_apply.html",controller:"LeaveDefineLeaveTypeRuleWhoCanApplyController",controllerAs:"leaveTypeRuleWhoCanApplyCtrl"},"navbar@":{templateUrl:"app/leave/defineLeaveTypeRule/leave.define-leave-type-rule-tab-navbar.html",controller:"LeaveDefineLeaveTypeRuleTabNavBarController",controllerAs:"vm"}},data:{title:"Who Can Apply",initialState:"leave_type_list"}}},{state:"leave.define_leave_type_rule_apply_restriction",config:{url:"/define_leave_type_rule_apply_restriction/{id}",views:{"":{templateUrl:"app/leave/defineLeaveTypeRule/applyRestriction/leave.define_leave_type_rule_apply_restriction.html",controller:"LeaveDefineLeaveTypeRuleApplyRestrictionController",controllerAs:"leaveTypeRuleApplyRestrictionCtrl"},"navbar@":{templateUrl:"app/leave/defineLeaveTypeRule/leave.define-leave-type-rule-tab-navbar.html",controller:"LeaveDefineLeaveTypeRuleTabNavBarController",controllerAs:"vm"}},data:{title:"Apply Restriction",initialState:"leave_type_list"}}},{state:"leave.view_leave_list",config:{url:"/view_leave_list/:filter",params:{filter:{value:null,squash:!0},redirectedFrom:{value:null,squash:!0}},views:{"":{templateUrl:"app/leave/leaveList/view/view-leave-list.html",controller:"ViewLeaveListController",controllerAs:"vm"}},data:{title:"Leave List",keepTooltip:!0}}},{state:"leave.view_my_leave_list",config:{url:"/view_my_leave_list",params:{filter:{value:null,squash:!0},redirectedFrom:{value:null,squash:!0}},views:{"":{templateUrl:"app/leave/leaveList/viewMy/view-my-leave-list.html",controller:"ViewMyLeaveListController",controllerAs:"vm"}},data:{title:"My Leave List",keepTooltip:!0}}},{state:"leave.view_my_leave_list.detail",config:{url:"/detail/:id/:mode",params:{id:{value:null,squash:!0},mode:{value:null,squash:!0},redirectedFrom:{value:null,squash:!0}},views:{"":{templateUrl:"app/leave/leaveList/viewDetail/view-leave-list-detail.html",controller:"ViewLeaveListDetailController",controllerAs:"vmDetail"}},data:{title:"Leave Request Details"}}},{state:"leave.view_leave_list.detail",config:{url:"/detail/:id/:mode",params:{id:{value:null,squash:!0},mode:{value:null,squash:!0},redirectedFrom:{value:null,squash:!0}},views:{"":{templateUrl:"app/leave/leaveList/viewDetail/view-leave-list-detail.html",controller:"ViewLeaveListDetailController",controllerAs:"vmDetail"}},data:{title:"Leave Request Details"}}},{state:"vueleave.holidays",config:{url:"/holidays",views:{"":{controller:"VueController"}},data:{oxd:!0,vueComponent:["leave","holidaysList"]}}},{state:"vueleave.leave_apply",config:{url:"/apply",views:{"":{controller:"VueController"}},data:{oxd:!0,vueComponent:["leave","applyLeave"]},params:{leaveType:null}}},{state:"vueleave.leave_assign",config:{url:"/assign",views:{"":{controller:"VueController"}},data:{oxd:!0,vueComponent:["leave","assignLeave"]},params:{employeeId:null,leaveType:null}}},{state:"leave.notifications",config:{url:"/notifications",views:{"":{templateUrl:"app/leave/notifications/leave-notifications.html",controller:"LeaveNotificationsController",controllerAs:"notificationsCtrl"}},data:{title:"Leave Notification List"}}},{state:"leave.balance_report",config:{url:"/balance_report/{id}?{isShortTerm}",views:{"":{templateUrl:"app/leave/reports/balanceReport/leave-balance-report.html",controller:"LeaveBalanceReportController",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:"SingleMenuItemTopRibbonController",controllerAs:"vm"}},params:{show_filters:!1,showSuccessToast:!1},data:{title:"Leave Entitlements and Usage Report",initialState:"reports_and_analytics.catalogue"}}},{state:"leave.balance_report.timeline",config:{url:"/timeline/:employeeId/:leaveTypeId/:listConfigName",views:{"":{templateUrl:"app/leave/reports/timelineReport/leave-timeline-report.html",controller:"LeaveTimelineReportController",controllerAs:"vm"}},params:{show_filters:!1,employeeId:{value:null,squash:!0},leaveTypeId:{value:null,squash:!0},listConfigName:{value:null,squash:!0}},data:{title:"Leave Entitlements and Usage Report"}}},{state:"leave.balance_report.view_leave_entitlement",config:{url:"/view_leave_entitlement/:id/:employeeId/:leaveTypeId/:from/:to/:report_name",params:{id:{value:null,squash:!0},employeeId:{value:null,squash:!0},leaveTypeId:{value:null,squash:!0},from:{value:null,squash:!0},to:{value:null,squash:!0},report_name:{value:null,squash:!0}},views:{"":{templateUrl:"app/leave/entitlement/view/view-leave-entitlement.html",controller:"LeaveViewLeaveEntitlementController",controllerAs:"vm"}},data:{title:"Leave Entitlements"}}},{state:"leave.balance_report.view_leave_list",config:{url:"/view_leave_list/:filter",params:{filter:{value:null,squash:!0},hideListConfig:{value:!0,squash:!0},showOverdrawn:{value:!0,squash:!0},skipFullyOverdrawn:{value:!0,squash:!0},hideEmployeeColumn:{value:!1,squash:!0}},views:{"":{templateUrl:"app/leave/leaveList/view/view-leave-list.html",controller:"ViewLeaveListController",controllerAs:"vm"}},data:{title:"Leave List"}}},{state:"leave.balance_report.view_leave_list.detail",config:{url:"/detail/:id/:mode",params:{id:{value:null,squash:!0},mode:{value:null,squash:!0}},views:{"":{templateUrl:"app/leave/leaveList/viewDetail/view-leave-list-detail.html",controller:"ViewLeaveListDetailController",controllerAs:"vmDetail"}},data:{title:"Leave Request Details"}}},{state:"leave.my_balance_report",config:{url:"/my_balance_report",views:{"":{templateUrl:"app/leave/reports/balanceReport/leave-balance-report.html",controller:"LeaveBalanceReportController",controllerAs:"vm"}},params:{show_filters:!1,myLeaveBalance:!0},data:{title:"My Leave Entitlements and Usage Report"}}},{state:"leave.my_balance_report.timeline",config:{url:"/timeline/:employeeId/:leaveTypeId/:listConfigName",views:{"":{templateUrl:"app/leave/reports/timelineReport/leave-timeline-report.html",controller:"LeaveTimelineReportController",controllerAs:"vm"}},params:{show_filters:!1,employeeId:{value:null,squash:!0},leaveTypeId:{value:null,squash:!0},listConfigName:{value:null,squash:!0}},data:{title:"My Leave Entitlements and Usage Report"}}},{state:"leave.my_balance_report.view_leave_entitlement",config:{url:"/view_my_leave_entitlement/:id/:employeeId/:leaveTypeId/:from/:to",params:{id:{value:null,squash:!0},employeeId:{value:null,squash:!0},leaveTypeId:{value:null,squash:!0},from:{value:null,squash:!0},to:{value:null,squash:!0}},views:{"":{templateUrl:"app/leave/entitlement/viewMy/view-my-leave-entitlement.html",controller:"LeaveViewMyLeaveEntitlementController",controllerAs:"vm"},"navbar@":{templateUrl:"app/leave/entitlement/viewMy/view-my-entitlement-navbar.html",controller:"LeaveViewMyLeaveEntitlementNavbarController",controllerAs:"navbar"}},data:{title:"My Leave Entitlements"}}},{state:"leave.my_balance_report.view_leave_list",config:{url:"/view_my_leave_list/:filter",params:{filter:{value:null,squash:!0},skipFullyOverdrawn:{value:!0,squash:!0},showOverdrawn:{value:!0,squash:!0},hideEmployeeColumn:{value:!0,squash:!0}},views:{"":{templateUrl:"app/leave/leaveList/viewMy/view-my-leave-list.html",controller:"ViewMyLeaveListController",controllerAs:"vm"}},data:{title:"My Leave List"}}},{state:"leave.my_balance_report.view_leave_list.detail",config:{url:"/detail/:id/:mode",params:{id:{value:null,squash:!0},mode:{value:null,squash:!0}},views:{"":{templateUrl:"app/leave/leaveList/viewDetail/view-leave-list-detail.html",controller:"ViewLeaveListDetailController",controllerAs:"vmDetail"}},data:{title:"Leave Request Details"}}},{state:"leave.bulk_assign",config:{url:"/bulk-assign",views:{"":{templateUrl:"app/leave/application/bulkAssign/bulk-assign.html",controller:"BulkAssignController",controllerAs:"vm"}},data:{title:"Bulk Assign Leave"}}},{state:"leave.bulk_assign.result",config:{url:"/result",views:{"":{templateUrl:"app/leave/application/bulkAssign/bulk-assign-result.html",controller:"BulkAssignResultController",controllerAs:"vm"}},data:{title:"Bulk Assign Leave"}}},{state:"leave.leave-period-not-defined",config:{url:"/leave-period-not-defined",views:{"":{templateUrl:"app/leave/defineLeavePeriod/leavePeriodNotDefined/leave-period-not-defined.html",controller:"LeavePeriodNotDefinedController",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:function(){this.menuItem="Leave Period"},controllerAs:"vm"}},data:{title:"Leave Period"}}}]}angular.module("app.leave").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C){function w(){C.allow_admins_past_period_changes_without_adjust?D.cancelText="No":D.cancelText="Cancel"}function _(){D.extraController.carriedForwardModel[D.id]=!0,b(!0)}function S(e){!C.allow_admins_past_period_changes_without_adjust||e?(delete D.extraController.listModel[D.id],D.extraController.setListData(),b(!1)):b(!0)}var D=this;D.title="Brought Forward - Confirmation Required",D.id=v,D.extraController=y,D.settings={},D.confirm=_,D.cancel=S,w()}angular.module("app.leave").controller("LeaveListBroughtForwardConfirmationModalController",e),e.$inject=["webservice","employeeService","loader","toast","$q","ModalService","$rootScope","$timeout","$filter","$state","$scope","reportService","$stateParams","formHelper","formValidationHelper","datagroupPermissions","localizedMessages","id","extraController","close","settings"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w){function S(){I.employeeName=t.getFullName(I.leaveRequest.Employee),D()}function D(){var t={permissions:g.getPermissions()};null!=I.leave?t.leaveComments=e.fetchLeaveComments(I.leaveRequest.id,I.leave.id):t.leaveComments=e.fetchComments(I.leaveRequest.id),o.all(t).then(function(e){I.createComment=e.leaveComments.data.create,I.noPermissionForComment=!I.createComment,I.commentList=T(e.leaveComments.data.data),E()})}function T(e){var t=[];return _.forEach(e,function(e){var a=moment(e.created,"YYYY-MM-DD HH:mm:ss");t.push({id:e.id,created_by_name:e.created_by_name+(e.Employee&&e.Employee.purged_at?" "+I.pastEmployeeText:""),comments:e.comments,created:e.created,date:v.toStandardDate(a.toDate()),time:v.toStandardTime(a.toDate())})}),t}function x(t){if(d.$broadcast("schemaFormValidate"),t.$valid){var a={comment:I.model.comment};null!=I.leave?(e.saveRequestItemComments(I.leaveRequest.id,I.leave.id,a),i.success(h.getLocalizedCustom("Successfully Saved")),k(),F(a)):e.saveRequestComments(I.leaveRequest.id,a).then(function(e){i.success(h.getLocalizedCustom("Successfully Saved")),F(a)})}}function F(e){I.leaveRequest.recentlyAddedLeaveRequestComment||(I.leaveRequest.recentlyAddedLeaveRequestComment=[]),I.leaveRequest.recentlyAddedLeaveRequestComment.push(e)}function k(){_.forEach(I.extraController.leaveList,function(e,t){e.id==I.leave.id&&(I.extraController.leaveList[t].comment=I.model.comment)})}function E(){I.schema={type:"object",title:"Search Leave List",properties:{comment:{title:"Comment",type:"string",maxLength:255}},required:["comment"]},I.form=[{type:"section",htmlClass:"row",items:[{type:"textarea",htmlClass:"col s12 m12 l12",key:"comment",validationMessage:{302:h.getLocalizedCustom("Required"),201:f.textLengthExceedValidation.message(I.schema.properties.comment.maxLength)}}]},p.getRequiredMessage()]}var I=this;I.model={},I.commentList=[],I.commentTitle="Comments",I.leaveRequest=y,I.leave=b,I.mode=C,I.extraController=w,I.employeeName="",I.title="Leave Request Comments",I.save=x,I.createComment=!1,I.noPermissionForComment=!1,I.pastEmployeeText="("+h.getLocalizedCustom("Past Employee")+")",S()}angular.module("app.leave").controller("LeaveListCommentModalController",e),e.$inject=["leaveRequestService","employeeService","loader","toast","$q","ModalService","$rootScope","$timeout","$filter","$state","$scope","reportService","$stateParams","formHelper","formValidationHelper","datagroupPermissions","localizedMessages","dateService","leaveRequest","leave","mode","extraController"]}(),function(){"use strict";function e(e,t,a,i,o,n){function l(){0==m.employeeNominees.length&&m.canEdit&&s(),r()}function r(){m.schema={type:"object",title:"Search Leave List",properties:{EmployeeNominee:{title:"Employee Nominee",type:"object",maxLength:255}}},m.form=[{type:"section",htmlClass:"row",items:[{type:"employee-nominee-input-collection",htmlClass:"col s12 m12 l12",key:"EmployeeNominee",placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found"}]}],m.model.EmployeeNominee=m.employeeNomineesCleand}function s(){m.isEditMode=!m.isEditMode}function c(){t(!1)}function d(){var a={};return!n.havePurgedNominees(m.employeeNomineesCleand)&&(a.employeeNominees=m.employeeNomineesCleand,void n.updateLeaveRequestEmployeeNominees(m.leaveRequest.id,a).then(function(a){n.fetchLeaveRequestEmployeeNominees(m.leaveRequest.id).then(function(a){var n=a.data.data;e.LeaveRequestEmployeeNominee=n,i.success(o.getLocalizedCustom("Successfully Saved")),t(!0)})}))}var m=this;m.leaveRequest=e,m.employeeNominees=e.LeaveRequestEmployeeNominee,m.canEdit=e.employeeNomineeEditable,m.isEditMode=!1,m.editModeSwitch=s,m.cancel=c,m.save=d,m.model={},m.model.employeeId=m.leaveRequest.emp_number,m.employeeNomineesCleand=n.prepareEmployeeNomineesModel(m.employeeNominees),l()}angular.module("app.leave").controller("LeaveListNomineeModalController",e),e.$inject=["leaveRequest","close","leaveRequestService","toast","localizedMessages","leaveEmployeeNomineeService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w){function _(e,t){if(t){var a=t.balance,i=t.net_balance,o=t.balance-t.net_balance;o=b.formatBalance(o,S.hourBased,S.settings);var l=$(e.target).offset(),r={top:l.top+30+"px",margin_left:l.left-0+"px"},s={close:function(){}};n.showModal({templateUrl:"app/leave/commonModals/netBalanceBreakdown/net-balance-breakdown-modal.html",controller:"netBalanceBreakdownModalController",controllerAs:"modal",inputs:{valueOfUnused:a,valueOfOverdrawn:o,valueOfNetBalance:i,overdrawnLeaveLink:!1,modalFunctions:s}}).then(function(e){$(e.element).openModal({opacity:0,out_duration:0,in_duration:0,dynamic_position:!0,popup_over_modal:!0,dp_top:r.top,dp_margin_left:r.margin_left,complete:function(){s.close()}})})}}var S=this;S.data=C,S.hourBased=w,S.durationUnit=v.getDurationUnitText({hour_based:S.hourBased}),S.title="Leave Balance Details",S.showNetBalanceBreakDown=_,S.settings=y.getSettings()}angular.module("app.leave").controller("LeaveListOverlapBalanceModalController",e),e.$inject=["leaveRequestService","employeeService","loader","toast","$q","ModalService","$rootScope","$timeout","$filter","$state","$scope","reportService","$stateParams","formHelper","formValidationHelper","datagroupPermissions","localizedMessages","leaveTypeService","leaveService","leaveBalanceService","data","hourBased"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){function m(){u(),p()}function u(){t.getBreakdown(i.id,n,b.leavePeriodOffset).then(function(e){b.balanceBreakdown=e.data.data,b.period=a.toLocalizedDate(e.data.meta.period.from)+" - "+a.toLocalizedDate(e.data.meta.period.to);for(var t=0;t<b.balanceBreakdown.length;t++){b.balanceBreakdown[t].id=t;var i=l?b.balanceBreakdown[t].projected:b.balanceBreakdown[t].balance;b.balanceBreakdown[t].amount=c.appendUnitToAmount(c.formatEntitlement(i,b.balanceBreakdown[t].hour_based,b.settings),b.balanceBreakdown[t].hour_based)}})}function p(){var e,t=[{name:"amount",lable:"Available Balance",getter:"amount","class":"numeric",width:"15%"},{name:"from",lable:"From",getter:"from",filters:[{name:"ohrmDateFilter"}],width:"20%"},{name:"to",lable:"To",getter:"to",filters:[{name:"ohrmDateFilter"}],width:"20%"},{name:"note",lable:"Note",getter:"note",width:"45%"}],a=null;b.listData={name:"leaveBalance",selectable:!1,selected:[],idGetter:"id",listFields:t,extraTH:a,extraTD:e,showColumnsAnyway:!0,permission:b.permissions,listActions:{},unselectableIds:{},columnWidths:["25%","15%","15%","45%"],pagination:!1}}function f(){o(!0)}function g(){o(!1)}function h(){b.leavePeriodOffset<r&&(b.leavePeriodOffset++,y(),u())}function v(){b.leavePeriodOffset>-r&&(b.leavePeriodOffset--,y(),u())}function y(){b.showNext=b.leavePeriodOffset<r,b.showPrev=b.leavePeriodOffset>-r}var b=this;b.leaveType=i,b.period="",b.leavePeriodOffset=0,b.showNext=b.showPrev=r>0,b.permissions={read:!0},b.settings=d.getSettings(),b.confirm=f,b.cancel=g,b.nextPeriod=h,b.prevPeriod=v,m()}angular.module("app.leave").controller("LeaveShowBalanceModalController",e),e.$inject=["webservice","leaveBalanceService","dateService","leaveType","close","empNumber","showProjectedBalance","allowedLeavePeriodOffset","localizedMessages","leaveEntitlementService","leaveService"]}(),function(){"use strict";function e(){function e(e,t,a,i){}var a={restrict:"E",templateUrl:"app/leave/leaveList/view/leave-list.html",scope:{requests:"=",pageInfo:"=",balance:"<",selectedActions:"=",hideEmployeeColumn:"<",showOverdrawn:"<",viewDetail:"&",fetch:"&",onChangeAction:"&",showComments:"&",costCenterEnabled:"<"},link:e,controller:t,controllerAs:"vm",bindToController:!0};return a}function t(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h){function v(e,t){a(function(){$("td.action-wrapper > div.select-wrapper > select").material_select()})}function y(){if(0===P.requests.length)return void(P.showResults=!1);P.list=[];for(var e=0;e<P.requests.length;e++){var t=P.requests[e],a=l.getDurationUnitText(t.data.LeaveType);P.list.push({id:t.id,emp_number:t.data.emp_number,emp_id:t.data.emp_id,employee:n.getFullName(t.data.Employee),jobTitle:_(t),employmentStatus:o.getLocalizedCustom(t.data.employmentStatus),subUnit:t.data.employeeSubunit,location:t.data.employeeLocation,jobCategory:o.getLocalizedCustom(t.data.jobCategory),workShift:o.getLocalizedCustom(t.data.workShift),costCentre:t.data.cost_code?t.data.cost_code+" - "+t.data.cost_centre_name:t.data.cost_code,appliedDate:r("ohrmDateFilter")(t.data.date_applied),dateRange:w(t.leave.dateRange),leaveType:l.formatName(t.data.LeaveType),balance:"",hourBased:t.data.LeaveType.hour_based,durationUnit:a,requestedDuration:t.leave.leaveAmount,overdrawnAmount:t.leave.overdrawnAmount,status:b(t.leave.breakdown,a),allowedActions:t.leave.allowedActions,obj:t,showActions:C(t.leave.breakdown,t.leave.allowedActions)})}P.showResults=!0}function b(e,t){for(var a=[],i=0;i<e.length;i++){var n=e[i];a.push(o.getLocalizedCustom(n.status)+"("+n.amount+" "+t+")")}return a.join(",<br>")}function C(e,t){return 1==e.length&&t.length>0}function w(e){var t=r("ohrmDateFilter")(e.from);return e.from!=e.to?t+="<br>"+P.translations.to+" "+r("ohrmDateFilter")(e.to):e.halfDay&&(t+="("+e.time+")",e.halfDayText&&(t+=" "+s.instant(e.halfDayText))),t}function _(e){var t=e.data.jobTitle;return"1"==e.data.jobTitleIsDeleted&&t&&(t=t+" ("+o.getLocalizedCustom("Deleted")+")"),t}function S(e){c.ohrmGlobals.downloadFile(i.baseUrl+"leave/viewLeaveRequestAttachment/attachmentId/"+e)}function D(e){e===P.pageInfo.sortField?P.pageInfo.sortOrder="ASC"===P.pageInfo.sortOrder?"DESC":"ASC":P.pageInfo.sortOrder="ASC",P.pageInfo.sortField=e,T()}function T(){P.fetch()}function x(e){return e===P.pageInfo.sortField?"ASC"===P.pageInfo.sortOrder?"arrow_upward":"arrow_downward":""}function F(e){P.pageInfo.page=e,T()}function k(e){P.pageInfo.size=e,P.pageInfo.page=1,T()}function E(e,t){d.showModal({templateUrl:"app/leave/leaveList/modal/leave-list-overlap-balance.html",controller:"LeaveListOverlapBalanceModalController",controllerAs:"modal",inputs:{data:e,hourBased:t}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function I(e){e.LeaveType.id&&p.fetch(e.LeaveType.id).then(function(t){if(t.data.data[e.LeaveType.id]){var a=t.data.data[e.LeaveType.id];f.getSetting("leave").then(function(t){var i=t.periods_admins_assign_outside_current;d.showModal({templateUrl:"app/leave/leaveList/modal/show-balance.html",controller:"LeaveShowBalanceModalController",controllerAs:"modal",inputs:{leaveType:e.LeaveType,showProjectedBalance:a.showProjectedBalance,allowedLeavePeriodOffset:i,empNumber:e.Employee.empNumber}}).then(function(e){e.element.openModal(),e.close.then(function(t){$(e.element).closeModal()})})})}})}function A(e){d.showModal({templateUrl:"app/leave/leaveList/modal/leave-list-nomenee.html",controller:"LeaveListNomineeModalController",controllerAs:"modal",inputs:{leaveRequest:e}}).then(function(e){e.element.openModal(),e.close.then(function(t){e.element.closeModal()})})}function M(e){var t=e.balance_data;return g.hasNetBalanceBreakdown(t.balance,void 0,t.net_balance)}function L(e,t,a){if(M(t)){var i=t.balance_data;if(i){var o=i.balance,n=i.net_balance,l=i.balance-i.net_balance;l=g.formatBalance(l,a,P.settings);var r=$(e.target).offset(),s={top:r.top+30+"px",margin_left:r.left-0+"px"},c={close:function(){}};d.showModal({templateUrl:"app/leave/commonModals/netBalanceBreakdown/net-balance-breakdown-modal.html",controller:"netBalanceBreakdownModalController",controllerAs:"modal",inputs:{valueOfUnused:o,valueOfOverdrawn:l,valueOfNetBalance:n,overdrawnLeaveLink:!1,modalFunctions:c}}).then(function(e){$(e.element).openModal({opacity:0,out_duration:0,in_duration:0,dynamic_position:!0,dp_top:s.top,dp_margin_left:s.margin_left,complete:function(){c.close()}})})}}}var P=this;P.settings=h.getSettings(),e.$on("redrawLeaveListAction",v),P.translations={to:s.instant("to")},P.showResults=!0,P.downloadAttachment=S,P.sortBy=D,P.getSortIcon=x,P.changePageSize=k,P.changePage=F,P.isArray=angular.isArray,P.showOverlapBalance=E,P.showNominee=A,P.showBalance=I,P.showNetBalanceBreakDown=L,P.isNetBalanceLink=M,P.listName="leaveList",P.listConfig={},m.getRegisteredListConfiguration(P.listName,!0).then(function(e){
P.listConfig=e.listConfig}),e.$watch("vm.requests",y)}angular.module("app.leave").directive("leaveList",e),t.$inject=["$scope","$window","$timeout","LOGIN","localizedMessages","employeeService","leaveTypeService","$filter","$translate","$rootScope","ModalService","listConfigurationService","datagroupPermissions","leaveTypeRuleService","settingsService","leaveBalanceService","leaveService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w,S,D,T,x,F,k,E,I,A,M,L,P,N){function O(){var t={useCache:!0,serverFetch:ve.promise};x.get("leave/status",{},t).then(function(e){ge.configStatus=e.data,V(),se()}),ve.promise.then(function(){C.getPermissions().then(function(e){j(e)})}),B(),ge.hideListConfig=v.hideListConfig===!0,null!=v.filter?(ae(ge.pageInfo.sortField,ge.pageInfo.sortOrder,ge.pageInfo.page).then(function(){ve.resolve()}),"leave.view_leave_list"===f.$current.name&&(R(t),m.$broadcast("markMenuItemAsCurrent",{stateName:"leave.view_leave_list"}),u(function(){m.$broadcast("markMenuItemAsCurrent",{stateName:"leave.view_leave_list"})})),e.fetch({filter:{type:"leaveList"}}).then(function(e){ge.leaveTypes=e.data.data})):(ge.showSearch=!0,ae(ge.pageInfo.sortField,ge.pageInfo.sortOrder,ge.pageInfo.page).then(function(){ge.showResult=!0,ve.resolve()}),R())}function R(t){var a={leaveTypes:x.get("leave/types",{filter:{type:"leaveList"}},t),locations:x.get("leave/request/locations",{},t),subunits:x.get("subunits",{tree:!0},t),organizationInformation:x.get("organization",{},t),isCalendarFeedEnabled:L.getCalendarFeedGlobalConfiguration(),jobTitles:x.get("jobTitles",[],{}),employmentStatus:x.get("employmentStatus","GET",[],{}),jobCategories:x.get("jobCategories",[],{}),workShifts:x.get("workShifts",[],{})};c.all(a).then(function(t){ge.leaveTypes=t.leaveTypes.data.data,ge.leaveTypeOptions=e.getFormatEnumAndTitleMap(ge.leaveTypes),ge.subunitOptions=o.getSubunitEnumAndTitleMap(t.subunits.data.data),ge.locationOptions=o.getLocationEnumAndTitleMap(t.locations.data.data),ge.costCenterEnabled=t.organizationInformation.data.data.costCenterEnabled,ge.isCalendarFeedEnabled="1"===t.isCalendarFeedEnabled.data.data.isEnabled,ge.jobTitlesOptions=y.getEnumAndTitleMapForSelect(t.jobTitles.data.data,{value:"id",name:"jobTitleName"},!0),ge.employmentStatusOptions=y.getEnumAndTitleMapForSelect(t.employmentStatus.data.data,{value:"id",name:"name"}),ge.jobCategoriesOptions=y.getEnumAndTitleMapForSelect(t.jobCategories.data.data,{value:"id",name:"name"}),ge.workshiftsOptions=y.getEnumAndTitleMapForSelect(t.workShifts.data.data,{value:"id",name:"name"}),ge.attachmentStatusOptions=y.getEnumAndTitleMapForSelect(ge.attachmentStatuses,{value:"id",name:"name"}),se(),0==t.leaveTypes.data.data.length&&s.warning(w.getLocalizedCustom("No Leave Type Defined"))})}function z(){"leave.balance_report.view_leave_list"!==ge.state.current.name&&"leave.balance_report.view_leave_list.detail"!==ge.state.current.name||g.$parent.vm.generateReport()}function j(e){ge.permissions=e.leave_list,ge.permissions.read||f.go("403")}function V(){if(!ge.filterLoaded&&void 0!==ge.filter&&void 0!==ge.filter.status&&ge.filter.status.length>0){var e=!0;_.forEach(ge.configStatus,function(t,a){var i=_.snakeCase(t);_.includes(ge.filter.status,a)?ge.model[i]=!0:(ge.model[i]=!1,e=!1)}),ge.model.statusAll=e,delete ge.model.pendingReviewOnly,ge.filterLoaded=!0}else _.forEach(ge.configStatus,function(e){var t=_.snakeCase(e);_.startsWith(t,"pending_approval")?ge.model[t]=!0:ge.model[t]=!1}),ge.model.statusAll=!1,delete ge.model.pendingReviewOnly}function G(){ge.showSearchFilters=!ge.showSearchFilters}function B(){if(void 0==ge.model.from&&void 0==ge.model.to){var e=new Date,t=e.getFullYear()+1;ge.model.from=new Date(moment.utc(e.getFullYear()+"-01-01").format("l LT")),ge.model.to=new Date(moment.utc(t+"-12-31").format("l LT"))}}function q(){ge.filter=void 0,ge.model.selectedEmployee=void 0,ge.model.employee="",ge.model.subunit="",ge.model.location="",ge.model.leaveType="",ge.model.jobTitle="",ge.model.employmentStatus="",ge.model.jobCategory="",ge.model.attachmentStatus="",ge.model.workShift="",ge.model.to=void 0,ge.model.from=void 0,ge.model.pastEmployee=!1,ge.model.costCentre=null,V(),B(),se(),ae(ge.pageInfo.sortField,ge.pageInfo.sortOrder,ge.pageInfo.page)}function H(){var e=X(),t=l.toStandardDate(new Date(moment(new Date))),a=T({filters:e,asAtDate:t});w.infoToast("Download Will Start Shortly"),m.ohrmGlobals.downloadFile(D.baseUrl+"api/leave/request/export/summary?"+a)}function U(e){m.ohrmGlobals.downloadFile(D.baseUrl+"leave/viewLeaveRequestAttachment/attachmentId/"+e)}function W(){var e=X(),t=l.toStandardDate(new Date(moment(new Date))),a=T({filters:e,asAtDate:t});w.infoToast("Download Will Start Shortly"),m.ohrmGlobals.downloadFile(D.baseUrl+"api/leave/request/export/detail?"+a)}function Y(e){ge.history=ge,"leave.balance_report.view_leave_list"===ge.state.current.name?f.go("leave.balance_report.view_leave_list.detail",{id:e}):f.go("leave.view_leave_list.detail",{id:e})}function J(e,t){d.showModal({templateUrl:"app/leave/leaveList/modal/leave-list-overlap-balance.html",controller:"LeaveListOverlapBalanceModalController",controllerAs:"modal",inputs:{data:e,hourBased:t}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function K(e,t){d.showModal({templateUrl:"app/leave/leaveList/modal/leave-list-comment.html",controller:"LeaveListCommentModalController",controllerAs:"modal",inputs:{leaveRequest:e,leave:t,mode:!1,extraController:ge}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function Z(){_.forEach(ge.configStatus,function(e){var t=_.snakeCase(e);ge.model.statusAll?ge.model[t]=!0:ge.model[t]=!1})}function Q(e){var t=!1;e?(_.forEach(ge.configStatus,function(e){var a=_.snakeCase(e);ge.model[a]||(t=!0)}),t?ge.model.statusAll=!1:ge.model.statusAll=!0):ge.model.statusAll=!1}function X(){var e={};return E[he]?(e=E[he],ge.model.from=e.from,ge.model.to=e.to,ge.model.subunit="",ge.model.location="",ge.model.jobTitle="",ge.model.employmentStatus="",ge.model.jobCategory="",ge.model.attachmentStatus="",ge.model.workShift="",delete E[he]):null!=v.filter?"leave.view_leave_list"===f.$current.name?(ge.showSearch=!0,ge.filterLoaded?e=ee(e):(ge.filter=JSON.parse(v.filter),void 0!==ge.filter.from&&(ge.model.from=new Date(moment.utc(ge.filter.from).format("l LT")),e.from=l.toStandardDate(ge.model.from)),void 0!==ge.filter.to&&(ge.model.to=new Date(moment.utc(ge.filter.to).format("l LT")),e.to=l.toStandardDate(ge.model.to)),void 0!==ge.filter.status&&(e.status=ge.filter.status),void 0!==ge.filter.empNumber&&n.getEmployee(ge.filter.empNumber).then(function(e){ge.model.selectedEmployee={empNumber:e.empNumber,employeeId:e.employeeId,firstName:e.firstName,fullName:n.getFullName(e),lastName:e.lastName,middleName:e.middleName,termination_id:e.termination_id}},function(e){ge.model.selectedEmployee=void 0}),e.empNumber=ge.filter.empNumber,e.withTerminated=ge.filter.pastEmployee,ge.model.pastEmployee=ge.filter.pastEmployee,"employeeProfile"==ge.redirectedFrom&&P.addBackToProfileButton(ge.filter.empNumber),ge.showSearch=!0)):(e.requestIds=v.filter.split(","),e.withTerminated=!0):e=ee(e),e}function ee(e){var t=[];return null!=ge.model.from&&(e.from=l.toStandardDate(ge.model.from)),null!=ge.model.to&&(e.to=l.toStandardDate(ge.model.to)),e.leaveTypeId=ge.model.leaveType,e.subUnitId=ge.model.subunit,e.locations=ge.model.location,e.withTerminated=ge.model.pastEmployee,ge.model.jobTitle&&(e.jobTitles=[ge.model.jobTitle]),e.employmentStatus=ge.model.employmentStatus,e.jobCategory=ge.model.jobCategory,e.workShift=ge.model.workShift,e.attachmentStatus=ge.model.attachmentStatus,void 0!=ge.model.selectedEmployee&&(e.empNumber=ge.model.selectedEmployee.empNumber),ge.model.costCentre?e.costCentre=ge.model.costCentre.id:e.costCentre=null,_.forEach(ge.configStatus,function(e,a){var i=_.snakeCase(e);ge.model[i]&&t.push(a)}),e.status=t,0===t.length&&ge.model.pendingReviewOnly&&(e.pendingReviewOnly=1),e}function te(){ae(ge.pageInfo.sortField,ge.pageInfo.sortOrder,ge.pageInfo.page)}function ae(e,t,i,o){r.startProgress();var l=X();return l.sortField=ge.sortingFields[e],l.sortOrder=t,l.page=i,l.pageSize=ge.pageInfo.size,l.includeEmployee=!0,l.includeLeaveType=!0,l.includeAttachmentConfiguration=!0,v.skipFullyOverdrawn&&(l.skipFullyOverdrawn=1),l.includeOverdrawn=ge.showOverdrawn?1:0,ge.requestList=[],a.fetch({filter:l}).then(function(t){if(ge.showResult=!0,ge.requestList=a.getRequests(t),ge.meta=a.getMeta(t),ge.pageInfo.total=ge.meta.record_count,ge.dataInCurruntPage=ge.requestList.length,ge.pageInfo.page=i,ge.pageInfo.sortField=e,ge.lastPage=Math.ceil(ge.pageInfo.total/ge.pageInfo.size),z(),ge.requestList.length>0){ge.showResult=!0;var l=a.getBalanceFilterByRequests(ge.requestList),r=[];angular.forEach(l,function(e){r.push(a.fetchBalance({filter:{list:e}}).then(function(e){ge.balance=_.merge(ge.balance,e.data)}))}),c.all(r)["finally"](function(){m.$broadcast("leaveListLoaded")}),ge.empName=n.getFullName(ge.requestList[0].data.Employee)}else ge.showResult=!1,o||s.info(w.getLocalizedCustom("No Records Found"))})["finally"](function(){F.showListConfigurationSuccess(),r.completeProgress()})}function ie(e){if(g.$broadcast("schemaFormValidate"),e.$valid){var t=X();if("undefined"!=typeof t&&Array.isArray(t.status)&&0==t.status.length)return ge.requestList=[],ge.showResult=!1,void s.info(w.getLocalizedCustom("No Records Found"));ae("employeeName","ASC",1)}}function oe(){if(_.isEmpty(ge.listModel))s.warning(w.getLocalizedCustom("Select Action"));else{var e={};e.type="change_leave_request",e.status=ge.listModel,e.carriedForward=ge.carriedForwardModel,a.changeStatus(e).then(function(e){e.data.success?(ge.listModel={},ge.carriedForwardModel={},s.success(w.getLocalizedCustom("Successfully Updated")),ae(ge.pageInfo.sortField,ge.pageInfo.sortOrder,ge.pageInfo.page)):s.error(w.getLocalizedCustom("Failed To Updated"))},function(e){var t=e.data.msg?e.data.msg:e.data;s.error(w.getLocalizedCustom(t))})}}function ne(e){var t=e.id,a=e.leave.isPastLeave,i=e.leave.isAccessibleAsAdmin,o=e.data.leave_type_id;_.forEach(ge.requestList,function(e,t){ge.listModel[e.id]>0?ge.requestList[t].selected=!0:ge.requestList[t].selected=!1});var n=le(o);if(a&&n.leaveRules.isCarryForward&&ge.listModel[t]>0)if(i){var l=!1;k.getSetting("leave").then(function(e){d.showModal({templateUrl:"app/leave/leaveList/modal/leave-list-brought-forward-confirmation.html",controller:"LeaveListBroughtForwardConfirmationModalController",controllerAs:"modal",inputs:{id:t,extraController:ge,settings:e}}).then(function(e){e.element.openModal({complete:function(){l||e.controller.cancel(!0)}}),e.close.then(function(t){l=!0,t||g.$broadcast("redrawLeaveListAction"),e.element.closeModal()})})})}else ge.carriedForwardModel[t]=!0}function le(e){return _.find(ge.leaveTypes,{id:e})}function re(e){}function se(){var e={type:"section",htmlClass:"row ",items:[{type:"checkbox",htmlClass:"col s12 m12 l1",key:"statusAll",onChange:Z}]},t={properties:{}};_.forEach(ge.configStatus,function(a){var i=_.snakeCase(a);t.properties[i]={title:a,type:"boolean"};var o="col s12 m12 l2";_.startsWith(i,"pending_approval")&&(o="col s12 m12 l3"),e.items.push({type:"checkbox",htmlClass:o,key:i,onChange:Q})});var a={type:"object",title:"Search Leave List",properties:{from:{title:"From",type:["null","object"]},to:{title:"To",type:["null","object"]},selectedEmployee:{title:"Employee",type:"object"},location:{title:"Location",type:"string"},subunit:{title:"Sub Unit",type:"string"},leaveType:{title:"Leave Type",type:"string"},jobTitle:{title:"Job Title",type:"string"},employmentStatus:{title:"Employment Status",type:"string"},jobCategory:{title:"Job Category",type:"string"},workShift:{title:"Work Shift",type:"string"},costCentreAutoComplete:{title:"Cost Center",type:["object","null"],idsToSkip:[]},attachmentStatus:{title:"Attachment Status",type:"string"},pastEmployee:{title:"Include Past Employees",type:"boolean"},statusAll:{title:"All",type:"boolean"}},required:[]};ge.schema=_.merge(a,t),ge.form=[{type:"section",htmlClass:"row",items:[{type:"date",htmlClass:"col s12 m12 l4",key:"from",defaultDate:ge.model.from,resetDefaultDate:ge.resetDefaultDate,ngModelOptions:{allowInvalid:!0},onChange:function(e){ce(e),g.$broadcast("schemaForm.error.to","minDate",b.minDate.validator(ge.model.to,ge.model.from))},validationMessage:{maxDate:w.getLocalizedCustom("From date should be before to date")},$validators:{maxDate:function(e){return b.maxDate.validator(e,ge.model.to)}}},{type:"date",htmlClass:"col s12 m12 l4",key:"to",defaultDate:ge.model.to,resetDefaultDate:ge.resetDefaultDate,ngModelOptions:{allowInvalid:!0},onChange:function(e){de(e),g.$broadcast("schemaForm.error.from","maxDate",b.maxDate.validator(ge.model.from,ge.model.to))},validationMessage:{minDate:w.getLocalizedCustom("To date should be after from date")},$validators:{minDate:function(e){return b.minDate.validator(e,ge.model.from)}}},{type:"auto-complete",htmlClass:"col s12 m12 l4",key:"selectedEmployee",idsToSkip:[],placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found","input-changed":function(){ge.model.selectedEmployee=void 0},permissionType:"leaveList",includePast:1}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l4",key:"subunit",titleMap:ge.subunitOptions.titleMap,emptyOption:"All"},{type:"select",htmlClass:"col s12 m12 l4",key:"location",titleMap:ge.locationOptions.titleMap,emptyOption:"All"},{type:"select",htmlClass:"col s12 m12 l4",key:"leaveType",titleMap:ge.leaveTypeOptions.titleMap,emptyOption:"All",onChange:function(e){re(e)}}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l4",key:"jobTitle",titleMap:ge.jobTitlesOptions.titleMap,emptyOption:"All"},{type:"select",htmlClass:"col s12 m12 l4",key:"employmentStatus",titleMap:ge.employmentStatusOptions.titleMap,emptyOption:"All"},{type:"select",htmlClass:"col s12 m12 l4",key:"jobCategory",titleMap:ge.jobCategoriesOptions.titleMap,emptyOption:"All"}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l4",key:"workShift",titleMap:ge.workshiftsOptions.titleMap,emptyOption:"All"},{key:"costCentreAutoComplete",type:"cost-centre-auto-complete",htmlClass:"col s12 m12 l4",placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",requireSelection:!0,condition:"vm.costCenterEnabled"},{type:"select",htmlClass:"col s12 m12 l4",key:"attachmentStatus",titleMap:ge.attachmentStatusOptions.titleMap,emptyOption:"All"}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l12",key:"pastEmployee"}]},{type:"section",htmlClass:"row section-heading",items:[{type:"section-heading",htmlClass:"col s12",text:w.getLocalizedCustom("Show Leave with Status")}]}],ge.form.push(e)}function ce(e){null==ge.model.to&&(ge.model.to=e,se())}function de(e){null==ge.model.from&&(ge.model.from=e,se())}function me(){for(var e=!1,t=0;t<ge.requestList.length;t++)if(ue(ge.requestList[t].leave.breakdown,ge.requestList[t].leave.allowedActions)){e=!0;break}return e}function ue(e,t){return 1===e.length&&t.length>0}function pe(){var e=X(),t=e.to?e.to:null;I.showModal("app/core/modal/calendar-feed-modal.html","CalendarFeedModalController","modal",{title:"Leave List",content:"Leave Information",feedType:"leave_list",listFilters:e,expireDate:t,filterFormatter:fe})}function fe(e){var t=c.defer(),a={},i=A.instant("All"),o=i;e.empNumber&&(ge.model.selectedEmployee&&e.empNumber===ge.model.selectedEmployee.empNumber?o=ge.model.selectedEmployee.fullName:a.employee=n.getEmployee(e.empNumber).then(function(e){o=n.getFullName(e)},function(e){o="-"}));var r=i;if(e.subUnitId){var s=_.find(ge.subunitOptions.titleMap,{value:e.subUnitId});s&&(r=s.name.trim())}var d=i;if(e.locations){var m=_.find(ge.locationOptions.titleMap,{value:e.locations});m&&(d=m.name.trim())}var u=i;if(e.leaveTypeId){var p=_.find(ge.leaveTypes,{id:e.leaveTypeId});p&&(u=p.name)}var f=e.withTerminated?A.instant("Yes"):A.instant("No"),g=[];e.status.forEach(function(e){ge.configStatus[e]&&g.push(A.instant(ge.configStatus[e]))});var h=i;ge.costCenterEnabled&&e.costCentre&&(ge.model.costCentre&&e.costCentre==ge.model.costCentre.id?h=ge.model.costCentre.cost_code+ge.model.costCentre.name:a.costCentre=M.getCostCentreById(e.costCentre).then(function(e){h=e.cost_code+"- "+e.name}));var v=i;if(e.jobTitles){var y=_.find(ge.jobTitlesOptions.titleMap,function(t){return t.value==e.jobTitles});y&&(v=y.name)}var b=i;if(e.employmentStatus){var C=_.find(ge.employmentStatusOptions.titleMap,function(t){return t.value==e.employmentStatus});C&&(b=C.name)}var w=i;if(e.jobCategory){var S=_.find(ge.jobCategoriesOptions.titleMap,function(t){return t.value==e.jobCategory});S&&(w=S.name)}var D=i;if(e.workShift){var T=_.find(ge.workshiftsOptions.titleMap,function(t){return t.value==e.workShift});T&&(D=T.name)}var x=i;if(e.attachmentStatus){var F=_.find(ge.attachmentStatusOptions.titleMap,function(t){return t.value==e.attachmentStatus});F&&(x=F.name)}var k=g.join(", ");return c.all(a).then(function(a){var i=[{name:"Employee",value:o},{name:"Sub Unit",value:r},{name:"Location",value:d},{name:"Leave Type",value:u},{name:"Include Past Employees",value:f},{name:"Job Title",value:v},{name:"Employment Status",value:b},{name:"Job Category",value:w},{name:"Work Shift",value:D},{name:"Attachment Status",value:x},{name:"Status",value:k}];e.from&&e.to&&i.unshift({name:"Start",value:l.toLocalizedDate(e.from)}),ge.costCenterEnabled&&i.push({name:"Cost Center",value:h}),t.resolve(i)}),t.promise}var ge=this;ge.title="Leave List";var he="leave_list_search_filter";ge.sortingFields={emp_number:"emp_number",employee:"employeeName",costCentre:"costCentre",leaveType:"leaveType",date:"date",emp_id:"emp_id",date_applied:"date_applied"},ge.pageInfo={size:50,page:1,total:0,sortField:"",sortOrder:"DESC"},ge.model={},ge.listModel={},ge.carriedForwardModel={},ge.model.selectedEmployee=void 0,ge.model.costCentre=null,ge.model.subunit="",ge.model.location="",ge.model.leaveType="",ge.model.jobTitle="",ge.model.employmentStatus="",ge.model.jobCategory="",ge.model.attachmentStatus="",ge.model.workShift="",ge.model.pendingReviewOnly=!0,ge.showSearchFilters=!0,ge.toggleFilters=G,ge.locationOptions={titleMap:[]},ge.subunitOptions={titleMap:[]},ge.leaveTypeOptions={titleMap:[]},ge.jobTitlesOptions={titleMap:[]},ge.jobCategoriesOptions={titleMap:[]},ge.employmentStatusOptions={titleMap:[]},ge.workshiftsOptions={titleMap:[]},ge.attachmentStatuses=[{id:"1",name:"Available"},{id:"2",name:"Pending"}],ge.attachmentStatusOptions={titleMap:[]},ge.leaveTypes=[],ge.goToDetail=Y,ge.showComments=K,ge.onSubmit=ie,ge.requestList=[],ge.showResult=!0,ge.showSearch=!1,ge.hideListConfig=!1,ge.balance=[],ge.updateList=te,ge.fetchLeaveList=ae,ge.saveStatus=oe,ge.resetSearch=q,ge.state=f,ge.exportSummary=H,ge.exportDetail=W,ge.downloadAttachment=U,ge.configStatus={},ge.showOverlapBalance=J,ge.actionOnChange=ne,ge.defaultPeriod=null,ge.hasPerformableActions=me,ge.showCalendarFeedModal=pe,ge.empName="",ge.hideEmployeeColumn=v.hideEmployeeColumn,ge.showOverdrawn=v.showOverdrawn,ge.resetDefaultDate={reset:!1},ge.listName="leaveList",ge.modalHeader="Leave List Configuration",ge.applyForAllEmployeesLabel="Apply for All Employees",ge.conditionalFields={},ge.specialMessagesForFields={costCentre:"Shown only if Cost Center is enabled"},ge.maxNoOfFields=8,ge.isCalendarFeedEnabled=!1,ge.filter=void 0,ge.filterLoaded=!1,ge.redirectedFrom=v.redirectedFrom;var ve=c.defer();O()}angular.module("app.leave").controller("ViewLeaveListController",e),e.$inject=["leaveTypeService","leavePeriodService","leaveRequestService","leaveTypeRuleService","leaveEmployeeService","employeeService","dateService","loader","toast","$q","ModalService","$rootScope","$timeout","$filter","$state","$scope","reportService","$stateParams","formHelper","formValidationHelper","datagroupPermissions","localizedMessages","$window","LOGIN","$httpParamSerializerJQLike","webservice","listConfigurationService","settingsService","$localStorage","modalHelperService","$translate","costCentreService","calendarFeedGlobalConfigService","menuService","titleService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w,S,D,T,x,F){function k(){Z.model.id=f.id,Z.mode=f.mode,Z.redirectedFrom=f.redirectedFrom;var i={permissions:v.getPermissions(),leaveRequest:t.fetch({filter:{requestIds:Z.model.id,withTerminated:!0,includeEmployee:!0,includeLeaveType:!0,mode:Z.mode}}),leave:t.fetchLeaveDetail(Z.model.id,{mode:Z.mode}),attachmentSize:C.getSetting("max_attachment_size")};l.all(i).then(function(i){P(i.permissions),Z.maxAttachmentSize=i.attachmentSize,Z.leaveRequest=t.getRequests(i.leaveRequest)[0],E(i.leave.data),Z.empNumber=Z.leaveRequest.data.Employee.empNumber,"employeeProfile"==Z.redirectedFrom&&D.addBackToProfileButton(Z.empNumber),Z.employeeName=e.getFullName(Z.leaveRequest.data.Employee),Z.dateRange=N(Z.leaveRequest.leave.dateRange),I(),W(),a.fetch(Z.leaveRequest.data.leave_type_id).then(function(e){Z.leaveRule=e.data.data[Z.leaveRequest.data.leave_type_id],Z.attachmentConfiguration=Z.leaveRequest.data.attachment_config,Z.attachmentConfiguration!=F.ATTACHMENT_DISABLED_STATUS_ID?(Z.attachmentDisabled=!1,Z.attachmentConfiguration!=F.ATTACHMENT_MANDATORY_STATUS_ID&&Z.attachemntOption.push({value:"deleteCurrent",name:"Delete Current"}),void 0===Z.leaveRequest.leave.attachment?Z.leaveRequest.leave.attachment={}:Z.attachmentFileName=Z.leaveRequest.leave.attachment.fileName,Z.attachmentFileName=Z.leaveRequest.leave.attachment&&Z.leaveRequest.leave.attachment.hasOwnProperty("fileName")?Z.leaveRequest.leave.attachment.fileName:null,U()):Z.attachmentDisabled=!0})},function(e){403==e.status?m.go("403"):404==e.status&&m.go("404")})}function E(e){Z.leaveList=[],Z.performableActions=!1;var t=x.getDurationUnitText(Z.leaveRequest.data.LeaveType);_.forEach(e,function(e,a){e.actions&&e.actions.length>0&&(Z.performableActions=!0),e.durationUnit=t,Z.leaveList[a]=e})}function I(){var e=Z.leaveRequest.data.date_applied;"0000-00-00"==e?Z.leaveRequest.data.date_applied=y.getLocalizedCustom("Not Available"):Z.leaveRequest.data.date_applied=i.toLocalizedDate(e)}function A(){"replaceCurrent"!=Z.model.currentLeaveAttachment&&"keepCurrent"!=Z.model.currentLeaveAttachment||t.saveAttachment(Z.model.id,Z.model).then(function(e){e.data.success?(Z.leaveRequest.leave.attachment.id=e.data.data.id,Z.attachmentFileName=Z.model.leaveAttachment.filename,Z.model.currentLeaveAttachment="keepCurrent",U(),M(),n.success(y.getLocalizedCustom("Successfully Saved"))):n.error(y.getLocalizedCustom("Fail to save"))}),"deleteCurrent"==Z.model.currentLeaveAttachment&&t.deleteAttachment(Z.model.id,Z.model).then(function(e){e.data.success?(Z.attachmentFileName=null,Z.model.currentLeaveAttachment="keepCurrent",U(),M(),n.success(y.getLocalizedCustom("Successfully Deleted"))):n.error(y.getLocalizedCustom("Fail to delete"))})}function M(){var e=m.current;"leave.view_leave_list.detail"==e.name||"leave.balance_report.view_leave_list.detail"==e.name?u.$parent.vm.fetchLeaveList(u.$parent.vm.pageInfo.sortField,u.$parent.vm.pageInfo.sortOrder,u.$parent.vm.pageInfo.page,!0):"leave.view_my_leave_list.detail"!=e.name&&"leave.my_balance_report.view_leave_list.detail"!=e.name||u.$parent.vm.fetchLeaveList(u.$parent.vm.field,u.$parent.vm.order,u.$parent.vm.page,!0)}function L(e,t){r.showModal({templateUrl:"app/leave/leaveList/modal/leave-list-comment.html",controller:"LeaveListCommentModalController",controllerAs:"modal",inputs:{leaveRequest:e,leave:t,mode:Z.mode,extraController:Z}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function P(e){"my"==Z.mode?Z.permissions={read:!0}:Z.permissions=e.leave_list,Z.permissions.read||m.go("403")}function N(e){return e.from==e.to?e.halfDay?void 0!=e.halfDayText?i.toLocalizedDate(new Date(moment.utc(e.from).format("l LT")))+" ("+e.time+") "+y.getLocalizedCustom(e.halfDayText):i.toLocalizedDate(new Date(moment.utc(e.from).format("l LT")))+" ("+e.time+") ":i.toLocalizedDate(new Date(moment.utc(e.from).format("l LT"))):i.toLocalizedDate(new Date(moment.utc(e.from).format("l LT")))+" "+y.getLocalizedCustom("to")+" "+i.toLocalizedDate(new Date(moment.utc(e.to).format("l LT")))}function O(e,t){return R(t.status)?"":parseFloat(e/60).toFixed(Z.settings.hourDecimals)}function R(e){return"WEEKEND"==e||"HOLIDAY"==e}function z(e,t){return R(t.status)?"":Z.leaveRequest.data.LeaveType.name}function j(e,t){e.length>0&&!Z.performableActions&&(Z.performableActions=!0);var a=e;return a.options=e,angular.forEach(a.options,function(e,t){a.options[t].name=y.getLocalizedCustom(e.name)}),a.name=t.id,a.isPastLeave=Z.leaveRequest.leave.isPastLeave,a.leaveTypeId=Z.leaveRequest.data.leave_type_id,a.emptyOption=y.getLocalizedCustom("Select Action"),a}function V(){return Z.performableActions}function G(){if(_.isEmpty(Z.listModel))n.warning(y.getLocalizedCustom("Select Action"));else{var e={};e.type="change_leave",e.status=Z.listModel,e.carriedForward=Z.carriedForwardModel,t.changeStatus(e).then(function(e){e.data.success&&(n.success(y.getLocalizedCustom("Successfully Updated")),t.fetchLeaveDetail(Z.model.id,{mode:Z.mode}).then(function(e){Z.listModel={},Z.carriedForwardModel={},E(e.data),W()}),M())},function(e){var t=e.data.msg?e.data.msg:e.data;n.error(y.getLocalizedCustom(t))})}}function B(e,t,a){if(_.forEach(Z.leaveList,function(e,t){Z.listModel[e.id]>0?Z.leaveList[t].selected=!0:Z.leaveList[t].selected=!1}),t&&Z.leaveRule.isCarryForward&&Z.listModel[e]>0)if(Z.leaveRequest.leave.isAccessibleAsAdmin){var i=!1;C.getSetting("leave").then(function(t){r.showModal({templateUrl:"app/leave/leaveList/modal/leave-list-brought-forward-confirmation.html",controller:"LeaveListBroughtForwardConfirmationModalController",controllerAs:"modal",inputs:{id:e,extraController:Z,settings:t}}).then(function(e){e.element.openModal({complete:function(){i||e.controller.cancel(!0)}}),e.close.then(function(t){i=!0,e.element.closeModal()})})})}else Z.carriedForwardModel[e]=!0}function q(){Z.attachmentFileName=Z.model.leaveAttachment.filename,Z.model.currentLeaveAttachment="replaceCurrent"}function H(e,t){var e=e,a=_.trunc(t.comment,{length:20,separator:" "});return e.isOffDay=R(t.status),e.comment=a,e.data=e,e}function U(){Z.attachmentSchema={type:"object",title:"Attachment",properties:{currentLeaveAttachment:{title:"Attachment",type:"string","enum":["keepCurrent","deleteCurrent","replaceCurrent"]},leaveAttachment:{title:"File attachment",type:"object"}}},Z.attachmentForm=[{type:"section",htmlClass:"row",items:[]}],null!=Z.attachmentFileName?(Z.attachmentForm[0].items.push({type:"attachmentWithModifyOptions",htmlClass:"col s12 m12 l12",titleMap:Z.attachemntOption,key:"currentLeaveAttachment",link:b.baseUrl+"leave/viewLeaveRequestAttachment/attachmentId/"+Z.leaveRequest.leave.attachment.id,fileName:Z.attachmentFileName}),Z.attachmentForm[0].items.push({type:"file",htmlClass:"col s12 m12 l6",key:"leaveAttachment",onFileChange:q,maxSize:Z.maxAttachmentSize,validationMessage:{fileSize:y.getLocalizedCustom("Attachment size exceeded"),fileType:y.getLocalizedCustom("Attachment type invalid")},condition:"model.currentLeaveAttachment=='replaceCurrent'"})):Z.attachmentForm[0].items.push({type:"file",htmlClass:"col s12 m12 l6",key:"leaveAttachment",onFileChange:q,maxSize:Z.maxAttachmentSize,validationMessage:{fileSize:y.getLocalizedCustom("Attachment size exceeded"),fileType:y.getLocalizedCustom("Attachment type invalid")}}),Z.attachmentForm[0].items.push({htmlClass:"col s12 m12 l12 right-align",type:"submit",title:"Save",condition:"model.currentLeaveAttachment!='keepCurrent' || (model.currentLeaveAttachment!='keepCurrent' && model.leaveAttachment.filename != null)"})}function W(){var e,t=[{name:"date",lable:"Date",getter:"dateRange",type:"leave-list-date-range"},{name:"leaveType",lable:"Leave Type",getter:"id",formatter:z},{name:"leaveBalance",lable:"Net Leave Balance",type:"leave-list-detail-balance",getter:"",headerColspan:"2","class":"balance-column right-align"},{name:"leaveBalanceUnit",lable:"",getter:"",type:"leave-list-detail-unit","class":"unit-column",hideHeader:!0},{name:"duration",lable:"Duration(Hours)",getter:["data","length_minutes"],formatter:O,"class":"numeric"},{name:"status",lable:"Status",getter:"textStatus"},{name:"comment",lable:"Comments",getter:"data",type:"leave-list-detail-comment",formatter:H},{name:"action-select",lable:"Actions",getter:"actions","class":"action-wrapper",formatter:j,type:"leave-list-detail-actions"}],a=null;Z.listData={name:"viewLeaveList",selectable:!0,selected:[],idGetter:"id",listFields:t,extraTH:a,extraTD:e,showColumnsAnyway:!0,permission:Z.permissions,listActions:{},unselectableIds:{},pagination:!1,withForm:!0,formName:"viewLeaveList"}}function Y(e){e.data&&e.data.leave_type_id&&a.fetch(e.data.leave_type_id).then(function(t){if(t.data.data[e.data.leave_type_id]){var a=t.data.data[e.data.leave_type_id];C.getSetting("leave").then(function(t){var i={id:e.data.leave_type_id},o=t.periods_admins_assign_outside_current;r.showModal({templateUrl:"app/leave/leaveList/modal/show-balance.html",controller:"LeaveShowBalanceModalController",controllerAs:"modal",inputs:{leaveType:i,showProjectedBalance:a.showProjectedBalance,allowedLeavePeriodOffset:o,empNumber:e.data.emp_number}}).then(function(e){e.element.openModal(),e.close.then(function(t){$(e.element).closeModal()})})})}})}function J(e){return S.hasNetBalanceBreakdown(e.balance,void 0,e.netBalance)}function K(e,t){if(t&&J(t)){var a=t.balance,i=t.netBalance,o=t.balance-t.netBalance;o=S.formatBalance(o,Z.leaveRequest.data.LeaveType.hour_based,Z.settings);var n=$(e.target).offset(),l={top:n.top+30+"px",margin_left:n.left-0+"px"},s={close:function(){}};r.showModal({templateUrl:"app/leave/commonModals/netBalanceBreakdown/net-balance-breakdown-modal.html",controller:"netBalanceBreakdownModalController",controllerAs:"modal",inputs:{valueOfUnused:a,valueOfOverdrawn:o,valueOfNetBalance:i,overdrawnLeaveLink:!1,modalFunctions:s}}).then(function(e){$(e.element).openModal({opacity:0,out_duration:0,in_duration:0,dynamic_position:!0,dp_top:l.top,dp_margin_left:l.margin_left,complete:function(){s.close()}})})}}var Z=this;Z.title="Leave List Detail",Z.model={},Z.listModel={},Z.carriedForwardModel={},Z.leaveRequest=null,Z.leaveList=[],Z.balance=null,Z.employeeName="",Z.dateRange="",Z.saveStatus=G,Z.showComments=L,Z.leaveRule=null,Z.attachemntOption=[{value:"keepCurrent",name:"Keep Current"},{value:"replaceCurrent",name:"Replace Current"}],Z.attachmentConfiguration=null,Z.attachmentDisabled=!0,Z.model.currentLeaveAttachment="keepCurrent",Z.saveAttachment=A,Z.attachmentFileName=null,Z.actionOnChange=B,Z.mode=null,Z.settings=T.getSettings(),Z.setListData=W,Z.showBalance=Y,Z.performableActions=!1,Z.hasPerformableActions=V,Z.isNetBalanceLink=J,Z.showNetBalanceBreakDown=K,k()}angular.module("app.leave").controller("ViewLeaveListDetailController",e),e.$inject=["employeeService","leaveRequestService","leaveTypeRuleService","dateService","loader","toast","$q","ModalService","$rootScope","$timeout","$filter","$state","$scope","reportService","$stateParams","formHelper","formValidationHelper","datagroupPermissions","localizedMessages","LOGIN","settingsService","numberService","leaveBalanceService","menuService","leaveService","leaveTypeService","leaveConstant"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w,S,D,T,x,F,k,E,I,A,M,L,P){function N(){C.getPermissions().then(function(e){R(e),"leave.my_balance_report.view_leave_list"!=we.state.current.name&&(we.showSearch=!0);var t={status:a.fetchStatus(void 0,"my_leave_list"),pageSize:x.getSetting("page_size"),isCalendarFeedEnabled:A.getCalendarFeedGlobalConfiguration()};c.all(t).then(function(e){we.configStatus=e.status.data,we.pageSize=e.pageSize,we.isCalendarFeedEnabled="1"===e.isCalendarFeedEnabled.data.data.isEnabled,
B(),G(!1),j(!1),de(),we.resetDefaultDate.reset=!1,te(we.field,we.order,we.page)})})}function O(){"leave.my_balance_report.view_leave_list"!==we.state.current.name&&"leave.my_balance_report.view_leave_list.detail"!==we.state.current.name||g.$parent.vm.generateReport()}function R(e){we.permissions={read:!0}}function z(){var e=[];return _.forEach(we.requestList,function(t){_.includes(e,t.data.leave_type_id)||e.push(t.data.leave_type_id)}),e}function j(e){(e||void 0===we.filter||void 0!==we.filter&&void 0===we.filter.status)&&(_.forEach(we.configStatus,function(e){var t=_.snakeCase(e);we.model[t]=!0}),we.model.statusAll=!0)}function V(){we.showSearchFilters=!we.showSearchFilters}function G(e){if(e||void 0===we.model.from||void 0===we.model.to){var t=new Date,a=t.getFullYear()+1;we.model.from=new Date(moment.utc(t.getFullYear()+"-01-01").format("l LT")),we.model.to=new Date(moment.utc(a+"-12-31").format("l LT"))}}function B(){if(null!=v.filter&&"leave.view_my_leave_list"===f.$current.name){if(we.filter=JSON.parse(v.filter),void 0!==we.filter.from&&(we.model.from=new Date(moment.utc(we.filter.from).format("l LT"))),void 0!==we.filter.to&&(we.model.to=new Date(moment.utc(we.filter.to).format("l LT"))),!we.filterLoaded&&void 0!==we.filter&&void 0!==we.filter.status&&we.filter.status.length>0){var e=!0;_.forEach(we.configStatus,function(t,a){var i=_.snakeCase(t);_.includes(we.filter.status,a)?we.model[i]=!0:(we.model[i]=!1,e=!1)}),we.model.statusAll=e,we.filterLoaded=!0}"employeeProfile"==we.redirectedFrom&&M.addBackToProfileButton(we.filter.empNumber)}}function q(){j(!0),G(!0),de(),te(we.field,we.order,we.page)}function H(e){m.ohrmGlobals.downloadFile(D.baseUrl+"leave/viewLeaveRequestAttachment/attachmentId/"+e)}function U(e){e&&e.id&&W(e.id)}function W(e){we.history=we,"leave.my_balance_report.view_leave_list"===we.state.current.name?f.go("leave.my_balance_report.view_leave_list.detail",{id:e,mode:"my"}):f.go("leave.view_my_leave_list.detail",{id:e,mode:"my"})}function Y(e,t){d.showModal({templateUrl:"app/leave/leaveList/modal/leave-list-overlap-balance.html",controller:"LeaveListOverlapBalanceModalController",controllerAs:"modal",inputs:{data:e,hourBased:t.LeaveType.hour_based}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function J(e){e.LeaveType.id&&i.fetch(e.LeaveType.id).then(function(t){if(t.data.data[e.LeaveType.id]){var a=t.data.data[e.LeaveType.id];x.getSetting("leave").then(function(t){var i=t.periods_admins_assign_outside_current;d.showModal({templateUrl:"app/leave/leaveList/modal/show-balance.html",controller:"LeaveShowBalanceModalController",controllerAs:"modal",inputs:{leaveType:e.LeaveType,showProjectedBalance:a.showProjectedBalance,allowedLeavePeriodOffset:i,empNumber:e.Employee.empNumber}}).then(function(e){e.element.openModal(),e.close.then(function(t){$(e.element).closeModal()})})})}})}function K(e,t){d.showModal({templateUrl:"app/leave/leaveList/modal/leave-list-comment.html",controller:"LeaveListCommentModalController",controllerAs:"modal",inputs:{leaveRequest:e,leave:t,mode:"my",extraController:we}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function Z(){_.forEach(we.configStatus,function(e){var t=_.snakeCase(e);we.model.statusAll?we.model[t]=!0:we.model[t]=!1})}function Q(e){var t=!1;e?(_.forEach(we.configStatus,function(e){var a=_.snakeCase(e);we.model[a]||(t=!0)}),t?we.model.statusAll=!1:we.model.statusAll=!0):we.model.statusAll=!1}function X(){var e={};return e.mode="my",null!=v.filter?"leave.view_my_leave_list"===f.$current.name?e=ee(e):e.requestIds=v.filter.split(","):e=ee(e),e}function ee(e){var t=[];return null!=we.model.from&&(e.from=l.toStandardDate(we.model.from)),null!=we.model.to&&(e.to=l.toStandardDate(we.model.to)),e.empNumber=m.emp_number,_.forEach(we.configStatus,function(e,a){var i=_.snakeCase(e);we.model[i]&&t.push(a)}),e.status=t,e}function te(e,t,o,n){var l=X();l.includeOverdrawn=v.showOverdrawn?1:0,l.sortField=we.sortingFields[e],l.sortOrder=t,l.page=o,l.pageSize=we.pageSize,l.includeEmployee=!0,l.includeLeaveType=!0,l.includeAttachmentConfiguration=!0,v.skipFullyOverdrawn&&(l.skipFullyOverdrawn=1),a.fetch({filter:l}).then(function(t){if(he(a.getRequests(t)),we.meta=a.getMeta(t),we.totalDataCount=we.meta.record_count,we.dataInCurruntPage=we.requestList.length,we.page=o,we.field=e,we.lastPage=Math.ceil(we.totalDataCount/we.pageSize),O(),ce(),we.requestList.length>0){we.showResult=!0;var l=a.getBalanceFilterByRequests(we.requestList);angular.forEach(l,function(e){a.fetchBalance({filter:{list:e}}).then(function(e){we.balance=_.merge(we.balance,e.data),i.fetch(z()).then(function(e){we.leaveRules=e.data.data,ae(),ce()})})})}else we.showResult=!1,n||s.info(w.getLocalizedCustom("No Records Found"));de()})}function ae(){for(var e=0;e<we.requestList.length;e++){var t=we.requestList[e].data.LeaveType.id;we.requestList[e].data.LeaveType.rules=we.leaveRules[t]}}function ie(e){if(g.$broadcast("schemaFormValidate"),e.$valid){var t=X();if("undefined"!=typeof t&&Array.isArray(t.status)&&0==t.status.length)return we.requestList=[],we.showResult=!1,void s.info(w.getLocalizedCustom("No Records Found"));te("employeeName","ASC",1)}}function oe(e){return we.balance.length>0&&"undefined"!=typeof we.balance[e]?we.balance[e]:"N/A"}function ne(e,t){var a=e.allowedActions,i=e.breakdown,o=a;return o.options=a,o.showActions=le(i,a),o.name=t.id,o.isPastLeave=t.leave.isPastLeave,o.leaveTypeId=t.data.leave_type_id,o.emptyOption=w.getLocalizedCustom("Select Action"),o}function le(e,t){return 1==e.length&&t.length>0}function re(){if(_.isEmpty(we.listModel))s.warning(w.getLocalizedCustom("Select Action"));else{var e={};e.type="change_leave_request",e.status=we.listModel,e.carriedForward=we.carriedForwardModel,a.changeStatus(e).then(function(e){e.data.success&&(we.listModel={},we.carriedForwardModel={},s.success(w.getLocalizedCustom("Successfully Updated")),te(we.field,we.order,we.page))})}}function se(e,t,a){_.forEach(we.requestList,function(e,t){we.listModel[e.id]>0?we.requestList[t].selected=!0:we.requestList[t].selected=!1});var i=we.leaveRules[a],o=_.find(we.requestList,function(t){return t.id===e}),n=o.leave.isAccessibleAsAdmin;if(t&&i.isCarryForward&&we.listModel[e]>0)if(n){var l=!1;x.getSetting("leave").then(function(t){d.showModal({templateUrl:"app/leave/leaveList/modal/leave-list-brought-forward-confirmation.html",controller:"LeaveListBroughtForwardConfirmationModalController",controllerAs:"modal",inputs:{id:e,extraController:we,settings:t}}).then(function(e){e.element.openModal({complete:function(){l||e.controller.cancel(!0)}}),e.close.then(function(t){l=!0,e.element.closeModal()})})})}else we.carriedForwardModel[e]=!0}function ce(){var t=[];v.hideEmployeeColumn||t.push({name:"employee",lable:"Employee",getter:["data","Employee"],formatter:n.getFullName,sortable:!0,sortAction:"fetchLeaveList",clickAction:"redirectToDetail"}),t.push({name:"date",lable:"Date",getter:["leave","dateRange"],type:"leave-list-date-range",sortable:!0,sortAction:"fetchLeaveList",clickAction:"redirectToDetail"},{name:"date_applied",lable:"Applied On",getter:["data","date_applied"],sortable:!0,sortAction:"fetchLeaveList",hideField:!we.listConfig.appliedDate,clickAction:"redirectToDetail"},{name:"leaveType",lable:"Leave Type",getter:["data","LeaveType"],formatter:e.formatName,sortable:!0,sortAction:"fetchLeaveList",clickAction:"redirectToDetail"},{name:"leaveBalance",lable:"Net Leave Balance",getter:["data"],type:"leave-list-balance","class":"balance-column right-align",headerColspan:"2",hideField:!we.listConfig.balance},{name:"leaveBalanceUnit",lable:"",getter:["data"],type:"leave-list-unit","class":"unit-column",hideField:!we.listConfig.balance,hideHeader:!0},{name:"leaveBalance",lable:"Requested Duration",getter:["leave","leaveAmount"],"class":"balance-column right-align",headerColspan:"2",hideField:!we.listConfig.requestedDuration,clickAction:"redirectToDetail"},{name:"leaveBalanceUnit",lable:"",getter:["data","LeaveType","durationUnit"],"class":"unit-column",hideField:!we.listConfig.requestedDuration,clickAction:"redirectToDetail",hideHeader:!0}),v.showOverdrawn&&(t.push({name:"leaveOverdrawnAmount",lable:"Overdrawn",getter:["leave","overdrawnAmount"],"class":"balance-column right-align",headerColspan:"2",clickAction:"redirectToDetail"}),t.push({name:"leaveOverdrawnUnit",lable:"Overdrawn",getter:["data","LeaveType","durationUnit"],"class":"unit-column",clickAction:"redirectToDetail",hideHeader:!0})),t=t.concat([{name:"status",lable:"Status",getter:["leave","breakdown"],type:"lines",hideField:!we.listConfig.status,clickAction:"redirectToDetail"},{name:"action-select",lable:"Actions",getter:["leave"],"class":"action-wrapper valign-middle",formatter:ne,type:"leave-list-actions"},{name:"action",lable:"",getter:"","class":"valign-middle",type:"leave-list-action-panel"}]);var a,i=null;we.listData={name:"viewLeaveList",selectable:!1,selected:[],idGetter:"id",listFields:t,extraTH:i,extraTD:a,showColumnsAnyway:!0,permission:we.permissions,listActions:{},unselectableIds:{},pagination:!0}}function de(){var e={type:"section",htmlClass:"row ",items:[{type:"checkbox",htmlClass:"col s12 m12 l1",key:"statusAll",onChange:Z}]},t={properties:{}};_.forEach(we.configStatus,function(a){var i=_.snakeCase(a);t.properties[i]={title:a,type:"boolean"};var o="col s12 m12 l2";_.startsWith(i,"pending_approval")&&(o="col s12 m12 l3"),e.items.push({type:"checkbox",htmlClass:o,key:i,onChange:Q})});var a={type:"object",title:"Search Leave List",properties:{from:{title:"From",type:["null","object"]},to:{title:"To",type:["null","object"]},statusAll:{title:"All",type:"boolean"}},required:[]};we.schema=_.merge(a,t),we.form=[{type:"section",htmlClass:"row",items:[{type:"date",htmlClass:"col s12 m12 l4",key:"from",defaultDate:we.model.from,resetDefaultDate:we.resetDefaultDate,ngModelOptions:{allowInvalid:!0},onChange:function(e){me(e),g.$broadcast("schemaForm.error.to","minDate",b.minDate.validator(we.model.to,we.model.from))},validationMessage:{maxDate:w.getLocalizedCustom("From date should be before to date")},$validators:{maxDate:function(e){return b.maxDate.validator(e,we.model.to)}}},{type:"date",htmlClass:"col s12 m12 l4",key:"to",defaultDate:we.model.to,resetDefaultDate:we.resetDefaultDate,ngModelOptions:{allowInvalid:!0},onChange:function(e){ue(e),g.$broadcast("schemaForm.error.from","maxDate",b.maxDate.validator(we.model.from,we.model.to))},validationMessage:{minDate:w.getLocalizedCustom("To date should be after from date")},$validators:{minDate:function(e){return b.minDate.validator(e,we.model.from)}}}]},{type:"section",htmlClass:"row section-heading",items:[{type:"section-heading",htmlClass:"col s12",text:w.getLocalizedCustom("Show Leave with Status")}]}],we.form.push(e)}function me(e){null==we.model.to&&(we.model.to=e,de())}function ue(e){null==we.model.from&&(we.model.from=e,de())}function pe(e){d.showModal({templateUrl:"app/leave/leaveList/modal/leave-list-nomenee.html",controller:"LeaveListNomineeModalController",controllerAs:"modal",inputs:{leaveRequest:e}}).then(function(e){e.element.openModal(),e.close.then(function(t){e.element.closeModal()})})}function fe(e){var t=e.balance_data;return k.hasNetBalanceBreakdown(t.balance,void 0,t.net_balance)}function ge(e,t){var a=oe(t.id);if(fe(a)){var i=a.balance_data;if(i){var o=i.balance,n=i.net_balance,l=i.balance-i.net_balance;l=k.formatBalance(l,t.LeaveType.hour_based,we.settings);var r=$(e.target).offset(),s={top:r.top+30+"px",margin_left:r.left-0+"px"},c={close:function(){}};d.showModal({templateUrl:"app/leave/commonModals/netBalanceBreakdown/net-balance-breakdown-modal.html",controller:"netBalanceBreakdownModalController",controllerAs:"modal",inputs:{valueOfUnused:o,valueOfOverdrawn:l,valueOfNetBalance:n,overdrawnLeaveLink:!1,modalFunctions:c}}).then(function(e){$(e.element).openModal({opacity:0,out_duration:0,in_duration:0,dynamic_position:!0,dp_top:s.top,dp_margin_left:s.margin_left,complete:function(){c.close()}})})}}}function he(t){we.requestList=[],we.performableActions=!1,_.forEach(t,function(t,a){le(t.leave.breakdown,t.leave.allowedActions)&&(we.performableActions=!0),t.data.LeaveType.durationUnit=e.getDurationUnitText(t.data.LeaveType);for(var i=[],o=0;o<t.leave.breakdown.length;o++){var n=t.leave.breakdown[o];i.push(w.getLocalizedCustom(n.status)+"("+n.amount+" "+t.data.LeaveType.durationUnit+")")}t.leave.breakdown=i,we.requestList[a]=t})}function ve(){return we.performableActions}function ye(){var e=X(),t=e.to?e.to:null;E.showModal("app/core/modal/calendar-feed-modal.html","CalendarFeedModalController","modal",{title:"My Leave",content:"Leave Information",feedType:"my_leave",listFilters:e,expireDate:t,filterFormatter:Ce})}function be(e){for(var t=c.defer(),i=!0,o=0;o<e.length;o++)if(!we.configStatus[e[o]]){i=!1;break}return i?t.resolve(we.configStatus):a.getLeaveStatusList().then(function(e){t.resolve(e.data.data)}),t.promise}function Ce(e){return be(e.status).then(function(t){var a=[];e.status.forEach(function(e){t[e]&&a.push(I.instant(t[e]))});var i=a.join(", "),o=[{name:"Status",value:i}];return e.from&&e.to&&o.unshift({name:"Start",value:l.toLocalizedDate(e.from)}),o})}var we=this;we.sortingFields={employee:"employeeName",leaveType:"leaveType",date:"date"},we.pageSize=50,we.model={},we.listModel={},we.carriedForwardModel={},we.model.selectedEmployee=void 0,we.model.subunit="",we.model.location="",we.model.leaveType="",we.showSearchFilters=!0,we.toggleFilters=V,we.locationOptions={titleMap:[]},we.subunitOptions={titleMap:[]},we.leaveTypeOptions={titleMap:[]},we.goToDetail=W,we.redirectToDetail=U,we.showComments=K,we.onSubmit=ie,we.showNominee=pe,we.requestList=[],we.showResult=!1,we.showSearch=!1,we.balance=[],we.fetchLeaveList=te,we.saveStatus=re,we.page=1,we.field="employeeName",we.order="ASC",we.resetSearch=q,we.state=f,we.downloadAttachment=H,we.configStatus={},we.leaveRules=[],we.showOverlapBalance=Y,we.showBalance=J,we.formatBalance=oe,we.actionOnChange=se,we.showNetBalanceBreakDown=ge,we.isNetBalanceLink=fe,we.performableActions=!1,we.hasPerformableActions=ve,we.showCalendarFeedModal=ye,we.defaultPeriod=null,we.resetDefaultDate={reset:!1},we.listConfig={},we.isCalendarFeedEnabled=!1,F.getRegisteredListConfiguration("leaveList",!0).then(function(e){we.listConfig=e.listConfig}),we.filter=void 0,we.filterLoaded=!1,we.redirectedFrom=v.redirectedFrom,we.settings=P.getSettings(),N()}angular.module("app.leave").controller("ViewMyLeaveListController",e),e.$inject=["leaveTypeService","leavePeriodService","leaveRequestService","leaveTypeRuleService","leaveEmployeeService","employeeService","dateService","loader","toast","$q","ModalService","$rootScope","$timeout","$filter","$state","$scope","reportService","$stateParams","formHelper","formValidationHelper","datagroupPermissions","localizedMessages","$window","LOGIN","$httpParamSerializerJQLike","settingsService","listConfigurationService","leaveBalanceService","modalHelperService","$translate","calendarFeedGlobalConfigService","menuService","leaveEntitlementService","leaveService"]}(),function(){"use strict";function e(e,t){function a(){t(!0)}function i(){t(!1)}var o=this;o.confirm=a,o.cancel=i}angular.module("app.leave").controller("LeaveTypeExposureConfirmationController",e),e.$inject=["$scope","close"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){f()}function f(){C.model={name:C.notification.name?C.notification.name:"",sendOn:C.notification.sendOn?C.notification.sendOn:"",onNext:C.notification.onNext?C.notification.onNext:"",mailSubject:C.notification.mailSubject?C.notification.mailSubject:"",includeLeaveTypeAcknowledge:!0,notifiedToJobTitleId:C.notification.notifiedToJobTitleId?C.notification.notifiedToJobTitleId:"",notifiedToSubUnitId:C.notification.notifiedToSubUnitId?C.notification.notifiedToSubUnitId:"",notifiedToLocationId:C.notification.notifiedToLocationId?C.notification.notifiedToLocationId:"",applicableToJobTitleId:C.notification.applicableToJobTitleId?C.notification.applicableToJobTitleId:"",applicableToSubUnitId:C.notification.applicableToSubUnitId?C.notification.applicableToSubUnitId:"",applicableToLocationId:C.notification.applicableToLocationId?C.notification.applicableToLocationId:""},C.schema={type:"object",title:"notifications",properties:{name:{title:"Notification Name",type:"string",maxLength:100},sendOn:{title:"Send on",type:"string","enum":F["enum"]},onNext:{title:"Leave for next",type:"string","enum":k["enum"]},mailSubject:{title:"Mail Subject",type:"string",maxLength:100},includeLeaveTypeAcknowledge:{title:"Include Leave Type",type:"boolean"},notifiedToJobTitleId:{title:"Job Title",type:"string","enum":D["enum"]},notifiedToSubUnitId:{title:"Sub Unit",type:"string","enum":T["enum"]},notifiedToLocationId:{title:"Location",type:"string","enum":x["enum"]},applicableToJobTitleId:{title:"Job Title",type:"string","enum":D["enum"]},applicableToSubUnitId:{title:"Sub Unit",type:"string","enum":T["enum"]},applicableToLocationId:{title:"Location",type:"string","enum":x["enum"]}},required:["name","sendOn","onNext","mailSubject"]},C.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l6",key:"name",validationMessage:{302:t.getLocalizedCustom("Required"),201:u.textLengthExceedValidation.message(C.schema.properties.name.maxLength)}},{type:"select",htmlClass:"col s12 m12 l6",key:"sendOn",titleMap:F.titleMap,validationMessage:{302:t.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l4",key:"onNext",titleMap:k.titleMap,validationMessage:{302:t.getLocalizedCustom("Required")}},{type:"help",htmlClass:"col s12 m12 l2 helpTextForNextOn",helpvalue:t.getLocalizedCustom("days")},{type:"text",htmlClass:"col s12 m12 l6",key:"mailSubject",validationMessage:{302:t.getLocalizedCustom("Required"),201:u.textLengthExceedValidation.message(C.schema.properties.mailSubject.maxLength)}}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l12",key:"includeLeaveTypeAcknowledge",readonly:!0}]},{type:"section",htmlClass:"row",items:[{type:"help",htmlClass:"col s12 m12 l12",helpvalue:"<br><h6 class='leaveNotificationSub'>"+t.getLocalizedCustom("Send to Employees with")+"</h6>"}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"notifiedToJobTitleId",titleMap:D.titleMap,emptyOption:t.getLocalizedCustom("All")},{type:"select",htmlClass:"col s12 m12 l6",key:"notifiedToSubUnitId",titleMap:T.titleMap,emptyOption:t.getLocalizedCustom("All")}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"notifiedToLocationId",titleMap:x.titleMap,emptyOption:t.getLocalizedCustom("All")}]},{type:"section",htmlClass:"row",items:[{type:"help",htmlClass:"col s12 m12 l12",helpvalue:"<br><h6 class='leaveNotificationSub'>"+t.getLocalizedCustom("Include Leave of Employees with")+"</h6>"}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"applicableToJobTitleId",titleMap:D.titleMap,emptyOption:t.getLocalizedCustom("All")},{type:"select",htmlClass:"col s12 m12 l6",key:"applicableToSubUnitId",titleMap:T.titleMap,emptyOption:t.getLocalizedCustom("All")}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"applicableToLocationId",titleMap:x.titleMap,emptyOption:t.getLocalizedCustom("All")}]}]}function g(e){s.$broadcast("schemaFormValidate"),e.$valid&&m.showModal({templateUrl:"app/leave/notifications/leave_type_exposure_confirmation_modal.html",controller:"LeaveTypeExposureConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&h()})})}function h(){angular.extend(C.notification,C.model);var a=C.notification.id,i="POST",l="leaveNotifications",s="saveSuccess";a?(i="PATCH",l+="/"+a,s="updateSuccess"):(i="POST",s="saveSuccess"),delete C.model.includeLeaveTypeAcknowledge,e.call(l,i,C.model,{}).then(function(e){"POST"===i?o.unshift(e.data.data):"PATCH"===i&&v(C.notification),t.showLocalizedToast(s),n(!0)},function(e){r.success(e),n(!0)})}function v(e){for(var t=0;t<o.length;t++)if(o[t].id==e.id){angular.extend(o[t],e);break}}function y(){n(!1)}function b(e){var e=e.map(function(e){return e.name=Array(5*e.level+1).join("")+e.name,e});return e}var C=this;C.modalProperties=i;var w={};a=a,angular.copy(a,w),C.notification=w,C.onSubmit=g,C.cancel=y;var _=[{name:"Each day",value:"0"},{name:"Monday",value:"1"},{name:"Tuesday",value:"2"},{name:"Wednesday",value:"3"},{name:"Thursday",value:"4"},{name:"Friday",value:"5"},{name:"Saturday",value:"6"},{name:"Sunday",value:"7"}],S=function(){for(var e=[],t=0;t<30;t++)e.push({name:(t+1).toString(),value:t.toString()});return e},D=c.getEnumAndTitleMapForSelect(C.modalProperties.jobTitles,{name:"jobTitleName",value:"id"}),T=c.getEnumAndTitleMapForSelect(b(C.modalProperties.subUnits),{name:"name",value:"id"},!0),x=c.getEnumAndTitleMapForSelect(C.modalProperties.locations,{name:"name",value:"id"}),F=c.getEnumAndTitleMapForSelect(_,{name:"name",value:"value"}),k=c.getEnumAndTitleMapForSelect(S(),{name:"name",value:"value"});p()}angular.module("app.leave").controller("LeaveEditNotificationController",e),e.$inject=["webservice","localizedMessages","notification","modalProperties","dataList","close","loader","toast","$scope","formHelper","dateService","ModalService","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g){function h(){s.show();var e={permissions:d.getPermissions(),jobTitles:n.call("jobTitles","GET",{}),subUnits:n.call("subunits","GET",[],{tree:!0}),locations:n.call("accessibleLocation","GET",{})};i.all(e).then(function(e){I.permissions=e.permissions.leave_notifications,A=e.jobTitles.data.data,M=e.subUnits.data.data,L=e.locations.data,I.permissions.read?I.fetchNotifications():(s.hide(),m.go("403"))})}function v(){var e=[];e.push(n.call("leaveNotifications","GET",[],{})),i.all(e).then(function(e){b(),I.notifications=e[0].data.data,y(),s.hide(),0==I.notifications.length&&l.infoToast("No Records Found")})}function y(){I.notificationsListHelper=new t.list(I.listData.notifications,I.notifications),I.selectAll=I.notificationsListHelper.selectAllItems,I.deselectAll=I.notificationsListHelper.deselectAllItems}function b(){I.panelInfo={notificationsInfo:{}},C()}function C(){var e=[{name:"name",lable:"Name",getter:"name"},{name:"mailSubject",lable:"Subject",getter:"mailSubject"}],t=[{colspan:3}],a=[{"class":"edit_item",clickAction:"editNotifications",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:I.permissions["delete"]}];I.listData={notifications:{selectable:!0,selected:[],idGetter:"id",listFields:e,showColumnsAnyway:!0,permission:I.permissions,listActions:i,columnWidths:["5%","45%","45%","5%"],pagination:!1}},I.permissions.update&&(I.listData.notifications.extraTH=t,I.listData.notifications.extraTD=a,I.listData.notifications.columnWidths=["5%","45%","45%","5%"]),I.permissions.update||I.permissions["delete"]||(I.listData.notifications.columnWidths=["50%","50%"]),I.permissions.update&&!I.permissions["delete"]&&(I.listData.notifications.columnWidths=["45%","50%","5%"]),!I.permissions.update&&I.permissions["delete"]&&(I.listData.notifications.columnWidths=["5%","45%","50%"])}function w(){I.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function _(e){o.showModal({templateUrl:"app/leave/notifications/leave-edit-notification-modal.html",controller:"LeaveEditNotificationController",controllerAs:"modal",inputs:{notification:e,dataList:I.notifications,modalProperties:{title:"Edit Notification",jobTitles:A,subUnits:M,locations:L}}}).then(function(e){$(e.element).openModal(),e.close.then(function(t){e.element.closeModal()})})}function S(){if(I.listData.notifications.selected.length>0){var e=I.listData.notifications.selected.length;n.call("leaveNotifications","DELETE",{data:I.listData.notifications.selected},{}).then(function(t){l.showLocalizedToast("deleteSuccess"),I.total-=e,D(I.listData.notifications.selected)},function(e){c.success(e)})}}function D(e){for(var t=I.notifications.length-1;t>=0;t--){var a=e.indexOf(I.notifications[t].id);a>-1&&(e.splice(a,1),I.notifications.splice(t,1))}}function T(e){var t=e.obj;if(t.selected)I.listData.notifications.selected.push(t.id);else{var a=I.listData.notifications.selected.indexOf(t.id);a>-1&&I.listData.notifications.selected.splice(a,1)}}function x(){I.listData.notifications.selected.length>0&&o.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&S()})})}function F(){var e={name:"",sendOn:"",onNext:"",mailSubject:"",notifiedToJobTitleId:"",notifiedToSubUnitId:"",notifiedToLocationId:"",applicableToJobTitleId:"",applicableToSubUnitId:"",applicableToLocationId:""};o.showModal({templateUrl:"app/leave/notifications/leave-edit-notification-modal.html",controller:"LeaveEditNotificationController",controllerAs:"modal",inputs:{notification:e,dataList:I.notifications,modalProperties:{title:"Add Notification",jobTitles:A,subUnits:M,locations:L}}}).then(function(e){$(e.element).openModal(),e.close.then(function(t){t&&e.element.closeModal()})})}function k(){close(!0)}function E(){close(!1)}var I=this;I.notifications="",I.editNotifications=_,I.deleteNotifications=S,I.changeSelection=T,I.deleteSelection=x,I.addNotification=F,I.confirm=k,I.cancel=E;var A,M,L;I.fetchNotifications=v,I.pageSize=50,I.page=1,I.lastPage=0,I.totalDataCount=0,I.dataInCurruntPage=0,h(),w()}angular.module("app.leave").controller("LeaveNotificationsController",e),e.$inject=["logger","listHelper","$window","$q","ModalService","webservice","localizedMessages","$rootScope","loader","toast","datagroupPermissions","$state","dateService","$scope","leavePeriodService","leaveEmployeeService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w,_,S,D,T,x,F,k){function E(){me.page=1,me.csvExport?(me.csvExport=!1,M()):(me.model.period_offset=0,L(),I())}function I(){if(A())return me.model.page_no=me.page,P()}function A(){return me.noLeaveTypeDefined?(a.warning(C.getLocalizedCustom("No Leave Type Defined")),!1):(c.$broadcast("schemaFormValidate"),!(!m.myLeaveBalance&&!me.submitForm.$valid))}function M(){if(A()){var e=me.model;m.myLeaveBalance&&(e.myLeaveBalance=!0);var t=v.baseUrl+"api/leaveBalanceReportCSV?"+g(e);C.infoToast("Download Will Start Shortly"),n.ohrmGlobals.downloadFile(t)}}function L(){me.model.period_offset==-1?me.periodTitle="Previous Period":0==me.model.period_offset?me.periodTitle="Current Period":1==me.model.period_offset&&(me.periodTitle="Next Period")}function P(){t.show();var o=me.model,l=me.sort;o.report_id=me.reportId,me.sort.indexOf("-")>-1?o.orderBy="DESC":o.orderBy="ASC",o.orderField=me.sort.replace("-",""),o.is_stle=me.isSTLE?"1":"0",m.myLeaveBalance&&delete o.is_stle;var r={};return ae(me.model.report_type)?r.reportColumnConfig=te():me.sort=l,me.listConfigPermissions||(r.listConfigPermissions=ee()),r.report=e.call("leave/leaveBalanceReport","GET",[],o),i.all(r).then(function(e){var i=e.report;me.results=Y(i.data.data),me.meta=i.data.meta,me.headers=q(i.data.meta),me.reportName=me.meta.name,me.total=me.meta.total,me.showPaging="-1"!==me.meta.pageLimit,me.editable=me.meta.editable,me.formattedResults=U(),0==me.results.length&&(me.showSearchFilters=!0,a.info(f.instant("No Results Found"),null)),me.isCopiedReport||(x[me.sessionStorageKey]=angular.copy(me.model)),t.hide()})["finally"](function(){n.$broadcast("leaveBalanceReportLoaded")})}function N(e){e.then(function(e){me.subunitEnumAndTitleMap=b.getSubunitEnumAndTitleMap(e.data.data),c.$broadcast("schemaFormRedraw")})}function O(e){e.then(function(e){me.locationEnumAndTitleMap=b.getLocationEnumAndTitleMap(e.data.data),c.$broadcast("schemaFormRedraw")})}function R(){m.showSuccessToast&&k(function(){C.showLocalizedToast("saveSuccess")});var o=!1;return m.myLeaveBalance?(z(!1),P()):l.getPermissions().then(function(n){j(n),me.reportId=m.id,me.isSTLE=m.isShortTerm&&"1"===m.isShortTerm,me.generateTypeEnumAndTitleMap=u.getEnumAndTitleMapForSelect(u.getSortedObjectList(me.report_type,"name","ASC"),void 0,!0);var r={event:"leaveBalanceReportLoaded",callback:O},s={event:"leaveBalanceReportLoaded",callback:N};return d.getReportDefinition(me.reportId).then(function(n){me.folderId=n.data.folderId,me.reportName=n.data.name,me.reportToSave.definition=n.data.definition,me.reportToSave.definition.folderId=n.data.folderId,me.reportToSave.displayGroups=d.getReportDisplayGroups(n.meta.available_display_groups,[]),me.isCopiedReport=!!n.data.parentReportId,me.selectedFilters=me.reportToSave.definition.selected_filters,o=z(me.isCopiedReport)||me.isCopiedReport&&me.selectedFilters&&Object.keys(me.selectedFilters).length>0;var c={};return c.leaveList=y.fetch({filter:{type:"leaveList"}}),c.jobTitles=e.call("jobTitles","GET",[],{}),c.location=w.fetchRequestLocations(r),c.subunit=b.fetchSubunit({tree:!0},s),c.pageSize=S.getSetting("page_size"),c.userData=l.getUserData(),c.reportNames=d.fetchReportNames(me.reportId),c.reportFolders=d.fetchReportFolders(me.folderId,n.data.uniqueName,n.data.parentReportFolder),i.all(c).then(function(e){me.userData=e.userData,e.leaveList.data.data.length||(me.noLeaveTypeDefined=!0,a.warning(C.getLocalizedCustom("No Leave Type Defined"))),me.leaveTypeEnumAndTitleMap=y.getFormatEnumAndTitleMap(e.leaveList.data.data,!0,me.isSTLE),me.leaveTypeEnumAndTitleMap["enum"].unshift("-1");var n=C.getLocalizedCustom("All Leave Types Having the Default Leave Period");return me.isSTLE&&(n=C.getLocalizedCustom("All Leave Types having STLE Enabled")),me.leaveTypeEnumAndTitleMap.titleMap.unshift({value:"-1",name:n}),""===me.model.leave_type&&(me.model.leave_type=me.leaveTypeEnumAndTitleMap["enum"][0]),me.jobTitleEnumAndTitleMap=u.getEnumAndTitleMapForSelect(e.jobTitles.data.data,{value:"id",name:"jobTitleName"}),me.locationEnumAndTitleMap=b.getLocationEnumAndTitleMap(e.location.data.data),me.subunitEnumAndTitleMap=b.getSubunitEnumAndTitleMap(e.subunit.data.data),me.model.items_per_page=e.pageSize,me.pageSize=e.pageSize,me.existingReportNames=e.reportNames.existingReportNames,me.reportFolders=e.reportFolders,V(),o?P():(t.hide(),i.when(!0))})})})}function z(e){return!!x[me.sessionStorageKey]&&(e||(me.model=angular.copy(x[me.sessionStorageKey])),L(),!e)}function j(e){me.permissions=e.leave_entitlements_usage_report,me.permissions.read||s.go("403")}function V(){ce(me.selectedFilters),me.schema={type:"object",title:"Leave Entitlements and Usage Report",properties:{report_type:{title:"Generate For",type:"string","enum":me.generateTypeEnumAndTitleMap["enum"]},leave_type:{title:"Leave Type",type:"string","enum":me.leaveTypeEnumAndTitleMap["enum"]},job_title:{title:"Job Title",type:"string","enum":me.jobTitleEnumAndTitleMap["enum"]},location:{title:"Location",type:"string","enum":me.locationEnumAndTitleMap["enum"]},sub_unit:{title:"Sub Unit",type:"string","enum":me.subunitEnumAndTitleMap["enum"]},include_terminated:{title:"Include Past Employees",type:"boolean"},eligible_employees_only:{title:"Eligible Employees Only",type:"boolean"},selectedEmployee:{title:"Employee Name",type:"object"}},required:["report_type","leave_type","selectedEmployee"]},me.form=[{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l3",titleMap:me.generateTypeEnumAndTitleMap.titleMap,key:"report_type",translate:!0,ngModelOptions:{allowInvalid:!0},onChange:function(e){me.showList="",c.$broadcast("schemaFormRedraw")}},{type:"select",htmlClass:"col s12 m12 l3",titleMap:me.jobTitleEnumAndTitleMap.titleMap,key:"job_title",emptyOption:"All",condition:"vm.model.report_type == 'leavetype'"
},{type:"select",htmlClass:"col s12 m12 l3",titleMap:me.locationEnumAndTitleMap.titleMap,key:"location",emptyOption:"All",condition:"vm.model.report_type == 'leavetype'"},{type:"auto-complete",htmlClass:"col s12 m12 l3",key:"selectedEmployee",idsToSkip:[],placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",requireSelection:!0,permissionType:"leave_entitlements_usage_report",includePast:1,condition:"vm.model.report_type == 'employee'",validationMessage:{employeeRequired:f.instant("Required"),302:f.instant("Required")},$validators:{employeeRequired:function(e,t){return!(!e||!me.model.selectedEmployee)}},ngModelOptions:{allowInvalid:!0}},{type:"select",htmlClass:"col s12 m12 l3",titleMap:me.subunitEnumAndTitleMap.titleMap,key:"sub_unit",emptyOption:"All",condition:"vm.model.report_type == 'leavetype'"},{type:"select",htmlClass:"col s12 m12 l6 leaveTypeSelector",titleMap:me.leaveTypeEnumAndTitleMap.titleMap,key:"leave_type",condition:"vm.model.report_type == 'leavetype'",emptyOption:!1,validationMessage:{302:f.instant("Required")}}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l3 filterCheckbox",key:"include_terminated",condition:"vm.model.report_type == 'leavetype'"},{type:"checkbox",htmlClass:"col s12 m12 l3 filterCheckbox",key:"eligible_employees_only",condition:"vm.model.report_type == 'leavetype'"}]},{type:"section",htmlClass:"row requiredHelperText",items:[{type:"help",helpvalue:"<em>*</em> "+C.getLocalizedCustom("Required field")}],condition:"vm.model.report_type != ''"},{type:"section",htmlClass:"row report-filter-row",items:[{htmlClass:"form-buttons",type:"section",items:[{htmlClass:"right",type:"submit",style:"primary-btn",title:"View"},{htmlClass:"right",style:"primary-btn",type:"button",title:"Save As",onClick:function(){le()}},{htmlClass:"right",style:"secondary-btn",type:"submit",title:"Export To CSV",onClick:function(){me.csvExport=!0}}]}],condition:"vm.model.report_type != ''"}]}function G(){me.showSearchFilters=!me.showSearchFilters}function B(e){for(var t=1,a=Object.keys(e),i=0;i<a.length;i++){var o=e[a[i]];angular.isArray(o)&&o.length>t&&(t=o.length)}for(var n=[],l=0;l<t;l++)n.push(l);return n}function q(e){for(var t={main:[],sub:[]},a=Object.keys(e.headers),i=!0,o=0;o<a.length;o++){for(var n=a[o],l=e.headers[n],r=H(n,l,e.headerInfo),s=o===a.length-1,c=0,d=0;d<r.length;d++){var m=r[d],u=s&&d===r.length-1,p=K(m.fieldName);p&&c++,t.sub.push({label:m.label,rowSpan:1,colSpan:1,width:m.width,first:i,last:u,fieldName:m.fieldName,align:m.align,sortField:m.sortField,selectedToBeVisible:p}),i=!1}t.main.push({label:l.groupHeader,rowSpan:1,colSpan:c,isGroup:!0})}return t}function H(e,t,a){var i=[],o=angular.copy(t);delete o.groupHeader,delete o.__fieldCount;for(var n=Object.keys(o),l=0;l<n.length;l++){var r=n[l],s=o[r],c=a[r],d=c.align,m=c.sortField;"true"===c.display&&i.push({label:s,width:c.width,fieldName:r,align:d,sortField:m})}return i}function U(){for(var e=[],t=Object.keys(me.meta.headerInfo),a=0;a<me.results.length;a++)for(var i=me.results[a],o=(i.uisref,B(i)),n=0;n<o.length;n++){for(var l=o[n],s={values:[],uisref:[],visibleIndexes:[]},c=0;c<t.length;c++){var d=t[c],u=me.meta.headerInfo[d];if("true"===u.display)if(0===l){if(i.uisref[d]){var p=i.uisref[d];m.myLeaveBalance&&(p=p.replace(/balance_report/gi,"my_balance_report")),p=W(p),s.uisref.push(p)}else s.uisref.push("");s.values.push(r("reportValue")(i[d],u)),K(d)&&s.visibleIndexes.push(s.values.length-1)}else s.values.push(""),s.uisref.push("")}e.push(s)}return e}function W(e){var t=e.lastIndexOf("}");if(t!==-1&&e.startsWith("leave.balance_report.view_leave_entitlement")){var a=e.slice(0,t),i=encodeURIComponent(me.reportName);a+=',report_name:"'+i+'"'+e.slice(t),e=a}return e}function Y(e){for(var t=0;t<e.length;t++){if(J(e[t]),!("current"in e[t]))return e;e[t].current=e[t].current.replace(/-/g,"")}return e}function J(e){delete e.status}function K(e){return me.listConfigurations.listConfig.hasOwnProperty(e)||"timeline"===e||"carried_forward"===e}function Z(){L(),I(me.submitForm)}function Q(e){var t=e.fieldName;return t===me.sort?"arrow_upward":"-"+t===me.sort?"arrow_downward":""}function X(e){var t=e.fieldName;me.sort===t?me.sort="-"+t:me.sort==="-"+t?me.sort=t:me.sort=t,I()}function ee(){return l.getPermission("list_configuration",!0).then(function(e){me.listConfigPermissions=e})}function te(){return D.getRegisteredListConfiguration(me.listConfigurationParams.listName,!0,me.reportId).then(function(e){me.listConfigurations=e,me.listConfigurationParams.maxNoOfFields=Object.keys(e.availableFields).length})}function ae(e){var t=me.listConfigurationParams.listName;return"leavetype"===e?(me.sort="employeeName",me.listConfigurationParams.listName="leaveUsageReportByLeaveTypeList",me.listConfigurationParams.modalHeader="List Configuration - Leave Type"):(me.sort="leaveType",me.listConfigurationParams.listName="leaveUsageReportByEmployeeList",me.listConfigurationParams.modalHeader="List Configuration - Employee"),t!==me.listConfigurationParams.listName}function ie(){return oe()&&ne()&&!m.myLeaveBalance}function oe(){return me.listConfigPermissions&&me.listConfigPermissions.update}function ne(){return me.userData.isAdmin||me.userData.isSupervisor||me.userData.isDepartmentHead}function le(){if(A()){var e=se();me.reportToSave.selectedFilterNames=Object.keys(e),me.reportToSave.selectedFilters=e,me.reportToSave.availableFilters=re(),me.reportToSave.reportUniqueName=de(),me.reportToSave.previousReportId=me.reportId,F.showModal("app/core/reports/report-save-as-modal.html","SaveAsReportController","modal",{reportsNamesList:me.existingReportNames,reportName:me.reportName,reportFolders:me.reportFolders,folderId:me.folderId}).then(function(e){e.reportName&&d.saveAndSearch(e,me.reportToSave,s.params.module)})}}function re(){return{empNumber:{type:"employee","allow-multiple":"false"},eligible_employees:{type:"boolean","allow-multiple":"false"},terminated:{type:"boolean","allow-multiple":"false"},sub_unit:{type:"sub_unit","allow-multiple":"false"},location:{type:"select","allow-multiple":"false"},job_title:{type:"select","allow-multiple":"false"},leaveType:{type:"select","allow-multiple":"false"},report_type:{type:"select","allow-multiple":"false"},fromDate:{type:"text","allow-multiple":"false"},toDate:{type:"text","allow-multiple":"false"},asOfDate:{type:"text","allow-multiple":"false"},emp_numbers:{type:"text","allow-multiple":"false"},emp_status:{type:"text","allow-multiple":"false"},eligible_leave_types:{type:"text","allow-multiple":"false"}}}function se(){var e=me.model;return e.leaveType=me.model.leave_type,e.job_title=me.model.job_title,e.location=me.model.location,e.sub_unit=me.model.sub_unit,e.terminated=me.model.include_terminated,e.eligible_employees=me.model.eligible_employees_only,e.empNumber=me.model.selectedEmployee,e.fromDate="",e.toDate="",e.asOfDate="",e.emp_numbers="",e.emp_status="",e.eligible_leave_types="",e}function ce(e){e&&Object.keys(e).length>0&&(e.empNumber&&e.empNumber.hasOwnProperty("empNumber")?(me.model.report_type="employee",me.model.selectedEmployee=e.empNumber):(me.model.report_type="leavetype",me.model.leave_type=e.leaveType,me.model.job_title=e.job_title,me.model.location=e.location,me.model.sub_unit=e.sub_unit,me.model.include_terminated=e.terminated,me.model.eligible_employees_only=e.eligible_employees),me.model.period_offset=e.hasOwnProperty("period_offset")?e.period_offset:0,L())}function de(){var e=me.isSTLE?"Short_Term_":"",t="leavetype"==me.model.report_type?"LeaveType":"Employee";return e+"Leave_Entitlements_and_Usage_Report_By_"+t}var me=this;me.showSearchFilters=!0,me.toggleFilters=G,me.onSubmit=E,me.showListConfig=ie,me.report_type=[{id:"leavetype",name:"Leave Type"},{id:"employee",name:"Employee"}],me.results={},me.page=1,me.total=0,me.generateReport=P,me.pageSize=50,me.state=s,me.showList="",me.submitForm=void 0,me.periodTitle="Current Period",me.noLeaveTypeDefined=!1,me.isCopiedReport=!1,me.model={report_type:"",leave_type:"",job_title:"",location:"",sub_unit:"",include_terminated:!1,eligible_employees_only:!1,selectedEmployee:void 0,period_offset:0,page_no:0,items_per_page:50},me.sort="leaveType",me.sortBy=X,me.getSortIcon=Q,me.listConfigurationParams={listName:null,modalHeader:null,applyForAllEmployeesLabel:"Apply for All Employees",conditionalFields:{},specialMessagesForFields:{},maxNoOfFields:null},me.userData={isAdmin:!1,isSupervisor:!1},me.listConfigurations=null,me.listConfigPermissions=null,me.csvExport=!1,me.sessionStorageKey="leave_balance_report",me.existingReportNames=[],me.reportFolders=[],me.reportToSave={},m.myLeaveBalance&&(me.model.myLeaveBalance=!0,me.sessionStorageKey="my_leave_balance_report"),"1"===m.isShortTerm&&(me.sessionStorageKey="stle_leave_balance_report"),t.show(),R()["finally"](function(){if(!m.myLeaveBalance){var e=me.reportName;m.report_name?(me.reportName=decodeURIComponent(m.report_name),n.$broadcast("addTopMenuBackButton",{callback:function(){window.top.history.back()},tooltip:me.reportName}),e="Entitlement List"):n.$broadcast("addTopMenuBackButton",{uiSref:"reports_and_analytics.catalogue",tooltip:"Reports"}),n.$broadcast("SingleMenuItemTopRibbonControllerMenuChanged",{menuItem:e}),p.setForcedTitle(["Reports and Analytics","Reports"],null)}D.showListConfigurationSuccess()}),me.isRightAlign=function(e){return"right"==me.headers.sub[e].align},me.isLeaveLink=function(e,t,a){var i=["entitlement_total","pending","scheduled","taken","overdrawn","netBalance"];return!!me.isNetBalanceLink(e,t,a)||i.indexOf(me.headers.sub[t].fieldName)>-1&&0!==parseFloat(e)},me.getSubHeaderIndexFromFieldName=function(e){var t=!1;return me.headers.sub.forEach(function(a,i){a.fieldName==e&&(t=i)}),t},me.isNetBalanceLink=function(e,t,a){var i=["netBalance"];if(i.indexOf(me.headers.sub[t].fieldName)>-1){var o=a[me.getSubHeaderIndexFromFieldName("overdrawn")],n=a[me.getSubHeaderIndexFromFieldName("unused")];return T.hasNetBalanceBreakdown(n,o)}return!1},me.isVisibleCell=function(e,t){return e.visibleIndexes.indexOf(t)>=0},me.isColGroupApplicable=function(e){return K(e)},me.showNetBalanceBreakDown=function(e,t,a){for(var i=0,n=0,l=0,r=0;r<me.headers.sub.length;r++){var s=me.headers.sub[r];"unused"===s.fieldName&&(i=r),"overdrawn"===s.fieldName&&(n=r),"netBalance"===s.fieldName&&(l=r)}var c=t.values[i],d=t.values[n],m=t.values[l],u=me.getUiSref(d,n,a),p=$(e.target).offset(),f={top:p.top+30+"px",margin_left:p.left-53+"px"},g={close:function(){}};o.showModal({templateUrl:"app/leave/commonModals/netBalanceBreakdown/net-balance-breakdown-modal.html",controller:"netBalanceBreakdownModalController",controllerAs:"modal",inputs:{valueOfUnused:c,valueOfOverdrawn:d,valueOfNetBalance:m,overdrawnLeaveLink:u,modalFunctions:g}}).then(function(e){$(e.element).openModal({opacity:0,out_duration:0,in_duration:0,dynamic_position:!0,dp_top:f.top,dp_margin_left:f.margin_left,complete:function(){g.close(!1)}})})},me.isMarkedLink=function(e,t){var a=["overdrawn"];return a.indexOf(me.headers.sub[t].fieldName)>-1&&0!==parseFloat(e)},me.isTimelineCell=function(e,t){return!("timeline"!=me.headers.sub[e].fieldName||!t)},me.getUiSref=function(e,t,a){var i=me.formattedResults[a].uisref[t];return i&&0!==parseFloat(e)?i:"."},me.prevPeriod=function(){c.$broadcast("schemaFormValidate"),(m.myLeaveBalance||me.submitForm.$valid)&&me.model.period_offset>-1&&(me.model.period_offset=--me.model.period_offset,me.page=1,Z())},me.nextPeriod=function(){c.$broadcast("schemaFormValidate"),(m.myLeaveBalance||me.submitForm.$valid)&&me.model.period_offset<1&&(me.model.period_offset=++me.model.period_offset,me.page=1,Z())},me.changePageSize=function(e){me.page=1,me.model.items_per_page=e,I(me.submitForm)},me.changePage=function(e){me.page=e,I(me.submitForm)}}angular.module("app.leave").controller("LeaveBalanceReportController",e),e.$inject=["webservice","loader","toast","$q","ModalService","$rootScope","datagroupPermissions","$filter","$state","$scope","reportService","$stateParams","formHelper","titleService","$translate","$httpParamSerializerJQLike","$window","LOGIN","leaveTypeService","leaveEmployeeService","localizedMessages","leaveRequestService","$sessionStorage","settingsService","listConfigurationService","leaveBalanceService","$localStorage","modalHelperService","$timeout"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w){function _(){return d.getReportDefinition(A.reportId).then(function(e){A.folderId=e.data.folderId;var t={reportsNameList:d.fetchReportNames(e.data.name),reportFolders:d.fetchReportFolders(A.folderId,e.data.uniqueName,e.data.parentReportFolder)};i.all(t).then(function(e){A.existingReportNames=e.reportsNameList.existingReportNames,A.reportFolders=e.reportFolders,A.enableSaveAsButton=!0}),A.availableFilters=e.meta.available_filters,A.selectedFilters=e.data.definition.selected_filters,A.reportToSave.definition=e.data.definition,A.reportToSave.definition.folderId=e.data.folderId,A.reportToSave.reportUniqueName=e.data.uniqueName,A.reportToSave.selectedFilterNames=Object.keys(A.selectedFilters),A.reportToSave.selectedFilters=A.selectedFilters,A.showSearchFilters&&(A.reportToSave.selectedFilterNames=Object.keys(A.filters),A.reportToSave.selectedFilters=A.filters),A.reportToSave.availableFilters=e.meta.available_filters,A.reportToSave.displayGroups=d.getReportDisplayGroups(e.meta.available_display_groups,[]),e.data.parentReportId&&!A.page_reGenerate&&(A.filters=A.selectedFilters,""===A.selectedFilters.leave_period&&(A.filters.leave_period={},A.filters.leave_period.to="",A.filters.leave_period.from=""),A.showSearchFilters=!0);for(var a=Object.keys(A.filters),o=0;o<a.length;o++){var n=a[o],l=A.availableFilters[n];"date_range"===l.type?(A.filters[n].from?A.model.leave_date_from=new Date(A.filters[n].from):A.model.leave_date_from=null,A.filters[n].to?A.model.leave_date_to=new Date(A.filters[n].to):A.model.leave_date_to=null):"leave_type"===l.type&&(A.model.leave_types=A.filters[n])}D()})}function S(){m.showSuccessToast&&l(function(){y.showLocalizedToast("saveSuccess")});var a={leaveTypes:e.call("leaveTypes","GET",[]),pageSize:C.getSetting("page_size")};n.$broadcast("addTopMenuBackButton",{uiSref:"reports_and_analytics.catalogue",tooltip:"Reports"}),p.setForcedTitle(["Reports and Analytics","Reports"],null),i.all(a).then(function(e){A.leaveTypes=u.getItemsForMultyselectAutocomplete(e.leaveTypes.data.data,{}),A.pageSize=e.pageSize,_().then(function(){return A.viewPage(A.page).then(function(){p.setTitle([A.reportName]),n.$broadcast("SingleMenuItemTopRibbonControllerMenuChanged",{menuItem:A.reportName})})})},function(e){t.hide(),s.go("403")})}function D(){A.schema={type:"object",title:"Leave Percentage Report",properties:{leave_types:{title:y.getLocalizedCustom("Leave Type"),type:"object"},leave_date_from:{type:["null","object"]},leave_date_to:{type:["null","object"]}},required:[]},A.form=[{type:"section",htmlClass:"row",items:[{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l6",key:"leave_types",choices:A.leaveTypes},{type:"date",htmlClass:"col s12 m12 l3",key:"leave_date_from",title:"From Date",defaultDate:A.model.leave_date_from,validationMessage:{beforeToDate:y.getLocalizedCustom("From date should be before to date")},$validators:{beforeToDate:x}},{type:"date",htmlClass:"col s12 m12 l3",key:"leave_date_to",title:"To Date",defaultDate:A.model.leave_date_to,validationMessage:{afterFromDate:y.getLocalizedCustom("To date should be after from date")},$validators:{afterFromDate:F}}]}]}function T(){A.showSearchFilters=!A.showSearchFilters,l(function(){n.$broadcast("rzSliderForceRender")},0,!1)}function x(e){if(!e||!A.model.leave_date_to)return!0;if(e&&A.model.leave_date_to){var t=new Date(e),a=new Date(A.model.leave_date_to);return t<=a}return!1}function F(e){if(!e||!A.model.leave_date_from)return!0;if(e&&A.model.leave_date_from){var t=new Date(e),a=new Date(A.model.leave_date_from);return a<=t}return!1}function k(e){n.ohrmGlobals.downloadFile(e)}function E(){I(),k(A.getExportUrl("CSV"))}function I(){a.info(f.instant("Download Will Start Shortly"))}var A=this;A.showSearchFilters=m.show_filters,A.page_reGenerate=m.page_reGenerate,A.filters={},A.filters.leave_period={},A.filters.leave_types={},A.leaveTypes={},A.model={},A.model.leave_types={},A.selectedFilters={},A.page=1,A.pageSize=50,A.reportId=m.id,A.results={},A.total=0,A.validationActive=!1,A.toggleFilters=T,A.downloadFile=k,A.downloadCSV=E,A.showDownloadStartToast=I,A.existingReportNames=[],A.reportFolders=[],A.reportToSave={},A.enableSaveAsButton=!1,m.filters&&(A.filters=m.filters),S(),A.onSubmit=function(e){if(c.$broadcast("schemaFormValidate"),e.$valid){for(var t=Object.keys(A.selectedFilters),a={},i=0;i<t.length;i++){var o=t[i],n=A.availableFilters[o];"date_range"===n.type?(a[o]={from:A.model.leave_date_from?b.toStandardDate(A.model.leave_date_from):"",to:A.model.leave_date_to?b.toStandardDate(A.model.leave_date_to):""},a[o].to||(a[o].to=""),a[o].from||(a[o].from="")):"leave_type"===n.type&&(a[o]=A.model.leave_types)}A.reportToSave.selectedFilterNames=t,A.reportToSave.selectedFilters=a,s.go(s.current,{filters:a,show_filters:!0,showSuccessToast:!1,page_reGenerate:!0},{reload:!0})}},A.viewPage=function(i){t.show();var o={"page[offset]":(i-1)*A.pageSize,"page[limit]":A.pageSize,filter:{}};return A.showSearchFilters||(A.filters.leave_period.to="",A.filters.leave_period.from="",A.filters.leave_types={}),A.filters&&(o.filter.leave_period=A.filters.leave_period,A.filters.leave_period.to||(o.filter.leave_period.to=""),A.filters.leave_period.from||(o.filter.leave_period.from=""),o.filter.leave_types=A.filters.leave_types),e.call("reports/"+A.reportId,"GET",[],o).then(function(e){A.results=e.data.data,A.meta=e.data.meta,A.reportName=A.meta.name,A.total=A.meta.total,A.page=i,A.showPaging="-1"!==A.meta.pageLimit,A.editable=A.meta.editable,0==A.results.length&&(A.showSearchFilters=!0,a.info(f.instant("No Results Found"),null)),t.hide()},function(e){t.hide(),s.go("403")})},A.getExportUrl=function(e){var t="filters=0";if(Object.keys(A.filters).length>0){var a={};a.leave_types=A.model.leave_types,a.leave_period={},a.leave_period.to=A.model.leave_date_to,a.leave_period.to?a.leave_period.to=b.toStandardDate(a.leave_period.to):a.leave_period.to="",a.leave_period.from=A.model.leave_date_from,a.leave_period.from?a.leave_period.from=b.toStandardDate(a.leave_period.from):a.leave_period.from="",t=g({filters:a}),A.reportToSave.selectedFilterNames=Object.keys(a),A.reportToSave.selectedFilters=a}return"CSV"===e?v.baseUrl+"api/exportReport/"+A.reportId+"/csv?"+t:"PDF"===e?v.baseUrl+"api/exportReport/"+A.reportId+"/pdf?"+t:void 0},A.changePageSize=function(e){A.pageSize=e,A.viewPage(A.page)},A.saveAsReport=function(){w.showModal("app/core/reports/report-save-as-modal.html","SaveAsReportController","modal",{reportsNamesList:A.existingReportNames,reportName:A.reportName,reportFolders:A.reportFolders,folderId:A.folderId}).then(function(e){e.reportName&&d.saveAndSearch(e,A.reportToSave,s.params.module)})}}angular.module("app.leave").controller("LeaveLeavePercentageReportController",e),e.$inject=["webservice","loader","toast","$q","ModalService","$rootScope","$timeout","$filter","$state","$scope","reportService","$stateParams","formHelper","titleService","$translate","$httpParamSerializerJQLike","$window","LOGIN","localizedMessages","dateService","settingsService","modalHelperService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s){function c(){var t={};t.timeline=e.call("timeline","GET",[],{empNumber:n.employeeId,leaveTypeId:n.leaveTypeId}),t.listConfiguration=l.getRegisteredListConfiguration(n.listConfigName,!0),a.all(t).then(function(e){var t=e.timeline.data.data;p.employeeName=t.employeeName,p.employeeNumber=n.employeeId,p.leaveTypeId=n.leaveTypeId,p.leaveType=t.leaveTypeName,p.leaveUnit=s.getLocalizedCustom(t.leaveUnit),p.results=t.results,p.listConfigurations=e.listConfiguration,p.headers={current:"Leave Period",entitlement_total:s.getLocalizedCustom("Entitlements")+" ("+p.leaveUnit+")",pending:s.getLocalizedCustom("Pending Approval")+" ("+p.leaveUnit+")",scheduled:s.getLocalizedCustom("Scheduled")+" ("+p.leaveUnit+")",taken:s.getLocalizedCustom("Taken")+" ("+p.leaveUnit+")",unused:s.getLocalizedCustom("Available Balance")+" ("+p.leaveUnit+")",overdrawn:s.getLocalizedCustom("Total Overdrawn")+" ("+p.leaveUnit+")",netBalance:s.getLocalizedCustom("Net Balance")+" ("+p.leaveUnit+")"}},m)}function d(e){var t;return t="leave.my_balance_report.timeline"==p.state.current.name?"leave.my_balance_report.view_leave_entitlement({id:0,employeeId:"+p.employeeNumber+",leaveTypeId:"+p.leaveTypeId+",from: '"+e.fromDate+"',to: '"+e.toDate+"'})":"leave.balance_report.view_leave_entitlement({id:0,employeeId:"+p.employeeNumber+",leaveTypeId:"+p.leaveTypeId+",from: '"+e.fromDate+"',to: '"+e.toDate+"'})"}function m(e){t.hide(),403===e.status&&o.go("403")}function u(e){return p.listConfigurations.listConfig.hasOwnProperty(e)}var p=this;p.employeeName="",p.leaveType="",p.results={},p.state=o,p.listConfigurations={listConfig:{}},p.isFieldVisible=u,c(),p.getUiSref=function(e,t){var a=d(e);return a&&0!==parseFloat(t)?a:"."},p.isEntitlementLink=function(e){return 0!==parseFloat(e)},p.isNetBalanceLink=function(e){return r.hasNetBalanceBreakdown(void 0,e.overdrawn,e.netBalance)},p.showNetBalanceBreakDown=function(e,t){var a=t.available,o=t.overdrawn,n=t.netBalance,l=$(e.target).offset(),r={top:l.top+30+"px",margin_left:l.left-148+"px"},s={close:function(){}};i.showModal({templateUrl:"app/leave/commonModals/netBalanceBreakdown/net-balance-breakdown-modal.html",controller:"netBalanceBreakdownModalController",controllerAs:"modal",inputs:{valueOfUnused:a,valueOfOverdrawn:o,valueOfNetBalance:n,overdrawnLeaveLink:!1,modalFunctions:s}}).then(function(e){$(e.element).openModal({opacity:0,out_duration:0,in_duration:0,dynamic_position:!0,dp_top:r.top,dp_margin_left:r.margin_left,complete:function(){s.close(!1)}})})}}angular.module("app.leave").controller("LeaveTimelineReportController",e),e.$inject=["webservice","loader","$q","ModalService","$state","$stateParams","listConfigurationService","leaveBalanceService","localizedMessages"]}(),function(){"use strict";function e(e,t){function a(t){return e.call("leave/application/"+t+"/eligible-type","GET",[],{})}function i(t){return e.call("leave/application/"+t+"/assignable-type","GET",[],{})}function o(e){var a=[];return a.push({value:"",name:t.getLocalizedCustom("None")}),e.includes("half_day")&&e.includes("specify_time")||(a.push({value:"all",name:t.getLocalizedCustom("All Days")}),a.push({value:"start",name:t.getLocalizedCustom("Start Day Only")}),a.push({value:"end",name:t.getLocalizedCustom("End Day Only")}),a.push({value:"start_end",name:t.getLocalizedCustom("Start and End Day")})),a}function n(e,a,i){var o=[];return"undefined"!=typeof e&&e!==!1||o.push({value:"full_day",name:t.getLocalizedCustom("Full Day")}),i.includes("half_day")||o.push({value:"half_day",name:t.getLocalizedCustom("Half Day")}),a||i.includes("specify_time")||o.push({value:"specify_time",name:t.getLocalizedCustom("Specify Time")}),o}function l(){var e=[];return e.push({value:"AM",name:t.getLocalizedCustom("Morning")}),e.push({value:"PM",name:t.getLocalizedCustom("Afternoon")}),e}function r(){for(var e=[],t=moment("2016-01-01 00:00","YYYY-MM-DD HH:mm"),a=moment("2016-01-02 00:00","YYYY-MM-DD HH:mm");t<a;)e.push({value:t.format("HH:mm"),name:t.format("HH:mm")}),t=t.add("minutes",15);return e}function s(t){return e.call("leave/application","POST",t)}function c(t){return e.call("leave/application/assign","POST",t)}function d(t){return e.call("leave/application/bulk-assign","POST",t)}function m(t,a){var i;return"undefined"!=typeof t?(i="employee/"+t+"/work-schedule","undefined"!=typeof a&&(i+="/date/"+a.replace(/-/g,""))):i="leave/default-work-schedule",e.call(i,"GET",[],{})}function u(t){return e.call("leave/application/"+t+"/work-week","GET",[],{})}function p(e,a,i,o){var n=moment(e,"HH:mm"),l=moment(a,"HH:mm"),r=moment.duration(l.diff(n));if(i&&o){var s=moment(i,"HH:mm"),c=moment(o,"HH:mm");if(n>s&&(s=n),l<c&&(c=l),c>s){var d=moment.duration(c.diff(s));r=r.subtract(d)}}var m=moment(r._data);return m.isValid()?m.format("HH:mm"):t.getLocalizedCustom("Invalid")}function f(t){return e.call("leave/application/check-restrictions","GET",[],t)}function g(e,t){var a=moment(e.currentLeavePeriod[0],"YYYY-MM-DD"),i=moment(e.currentLeavePeriod[1],"YYYY-MM-DD"),o=moment.duration(i.diff(a)),n=parseInt(moment(o._data).format("Y"),10)+parseInt(moment(o._data).format("MM")/12,10),l=a.add(-(t*n),"years"),r=i.add(t*n,"years"),s=r.format("YYYY")-l.format("YYYY");return{start:l.toDate(),end:r.toDate(),duration:s+1}}function h(){return e.call("employees","GET",[],{filter:{},fields:"empNumber,firstName,middleName,lastName,termination_id"})}function v(t){return e.call("leave/applyAssignAllowedLeavePeriodOffset","GET",[],{empNumber:t}).then(function(e){return e.data.data.offset})}function y(e,t){return e.duration&&t.includes(e.duration)&&(e.duration="full_day"),t.includes("half_day")&&t.includes("specify_time")?e.partial_day="":t.includes("half_day")?(e.partial_all_duration="specify_time",e.partial_start_duration="specify_time",e.partial_end_duration="specify_time"):t.includes("specify_time")&&(e.partial_all_duration="half_day",e.partial_start_duration="half_day",e.partial_end_duration="half_day"),e}var b={checkRestrictions:f,getEligibleLeaveType:a,getAssignableLeaveType:i,getPartialDaysOptions:o,getDurationOptions:n,getHalfDayOptions:l,getTimeRange:r,apply:s,assign:c,bulkAssign:d,calculateShiftLength:p,getWorkSchedule:m,getBoundaryDates:g,fetchAssignableEmployees:h,isLeaveWorkWeekEnabled:u,getAllowedLeavePeriodOffset:v,getModifiedModelForExcludeOptions:y};return b}angular.module("app.leave").service("leaveApplicationService",e),e.$inject=["webservice","localizedMessages"]}(),function(){"use strict";function e(e){function t(t,a,i){var o={filter:{periodOffset:i}},n="/leave/type/"+t+"/employee/"+a+"/balance";return e.call(n,"GET",[],o)}function a(e,t,a){return t===!0?parseFloat(e).toFixed(a.hourDecimals):parseFloat(e).toFixed(a.dayDecimals)}function i(e,t,a){var i=!isNaN(e)&&0!==parseFloat(e),o=!isNaN(t)&&0!==parseFloat(t),n=!isNaN(a)&&0!==parseFloat(a);return i||o||n}var o={formatBalance:a,getBreakdown:t,hasNetBalanceBreakdown:i};return o}angular.module("app.leave").service("leaveBalanceService",e),e.$inject=["webservice"]}(),function(){"use strict";function e(e,t){function a(t){return e.call("leaveCalendarConfigurations","PATCH",t)}function i(){return e.call("leaveCalendarConfigurations","GET",[],{})}function o(e){var t=_.transform(e,function(e,t,a){e.push({id:t.id,name:t.name})},[]);return t}function n(e){var a=_.transform(e,function(e,a,i){e.push({id:i,name:t.instant(a)})},[]);return a}function l(e,a){return _.chain(e).filter(function(e){return a.indexOf(parseInt(e.id))!=-1}).transform(function(e,a,i){e[a.id]=t.instant(a.name)},{}).value()}function r(e){return _.chain(e).keys().map(function(e){return parseInt(e)}).value()}var s={fetchLeaveCalendarConfigurations:i,updateLeaveCalendarConfigurations:a,getLeaveTypesForMultiSelectAutoComplete:o,getLeaveStatusForMultiSelectAutoComplete:n,filterActiveOptions:l,getKeys:r};return s}angular.module("app.leave").service("leaveCalendarConfigurationService",e),e.$inject=["webservice","$translate"]}(),function(){"use strict";function e(e){function t(e){for(var t={},a=0;a<3;a++)t[a]={employee:null,empNumber:null,note:null};for(var a=0;a<e.length;a++)t[a]={empNumber:e[a].empNumber,employee:{empNumber:e[a].Employee.empNumber,firstName:e[a].Employee.firstName,lastName:e[a].Employee.lastName,termination_id:e[a].Employee.termination_id,employeeId:e[a].Employee.employeeId,purged_at:e[a].Employee.purged_at,fullName:e[a].Employee.firstName+" "+e[a].Employee.lastName},note:e[a].note};return t}function a(e){var t=!1;return _.forEach(e,function(e){e&&e.employee&&e.employee.purged_at&&(t=!0)}),t}function i(t,a){return e.call("leave/request/"+t+"/employee_nominee","PATCH",a)}function o(t){return e.call("leave/request/"+t+"/employee_nominee","GET",[],{})}var n={updateLeaveRequestEmployeeNominees:i,fetchLeaveRequestEmployeeNominees:o,prepareEmployeeNomineesModel:t,havePurgedNominees:a};return n}angular.module("app.leave").service("leaveEmployeeNomineeService",e),e.$inject=["webservice","localizedMessages","dateService"]}(),function(){"use strict";function e(e,t,a){function i(t){return e.call("employees/locations","GET",{},t)}function o(t){return"undefined"==typeof t&&(t={}),t.unfiltered=!0,e.call("employees/locations","GET",{},t)}function n(t,a){return"undefined"==typeof a?e.call("subunits","GET",[],t):e.callBackground(a,"subunits","GET",[],t)}function l(){return e.call("operationalCountries","GET",{})}function r(e){var e=e.map(function(e){return e.name=Array(5*e.level+1).join("")+e.name,e});return e}function s(e){for(var i={},o={},n="",l=0;l<e.length;l++)e[l].country.code in i||(i[e[l].country.code]=[],o[e[l].country.code]=a.getLocalizedCustom(e[l].country.name)),i[e[l].country.code].push(e[l]);var r=t.getSortedCountryList(i),s=[];for(var c in r){var d=r[c];i[d].sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0});for(var m="",l=0;l<i[d].length;l++)m+=","+i[d][l].id;s.push({value:m.replace(/^,/,""),name:n+o[d]});for(var l=0;l<i[d].length;l++)s.push({value:i[d][l].id,name:n+n+i[d][l].name})}return s}function c(e){e=s(e);var t=[],a=[];return angular.forEach(e,function(e,i){var o={value:e.value,name:e.name};t.push(o),a.push(e.value)}),{titleMap:t,"enum":a}}function d(e){return t.getEnumAndTitleMapForSelect(r(e),{value:"id",name:"name"},!0)}var m={fetchLocation:i,fetchSubunit:n,getLocationEnumAndTitleMap:c,getSubunitEnumAndTitleMap:d,fetchUnfilteredLocation:o,fetchOperationalCountriesForLocations:l};return m}angular.module("app.leave").service("leaveEmployeeService",e),e.$inject=["webservice","formHelper","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n){function l(e){var t=e?"hour(s)":"day(s)";return o.getLocalizedCustom(t)}function r(e,t){return e?e+" "+l(t):null}function s(t){return e.call("leave/entitlements","GET",[],t)}function c(t){return e.call("leave/entitlements/total","GET",[],t)}function d(e){var t=["entitlementTypeLocalized","entitlementHours","hourBased"];return angular.forEach(t,function(t){e.hasOwnProperty(t)&&delete e[t]}),e}function m(t){return e.call("leave/entitlements","POST",d(t))}function u(t){return e.call("leaveEntitlement","PATCH",d(t))}function p(t){return e.call("leave/entitlement/"+t+"/comments","GET",[],{})}function f(t){return e.call("leave/entitlements/exists/"+t,"GET",[],{})}function g(t){return e.call("leave/entitlements/adjust/"+t,"GET",[],{})}function h(t,a){return e.call("leave/entitlements/adjust/"+t,"PATCH",a)}function v(e,t){var a=["4","5"];if(!a.includes(e.entitlement_type))return!1;var i=moment(e.to_date.replace(/ 00:00:00$/,"")).format("YYYY-MM-DD"),o=_.isEmpty(t[1])?i:moment(t[1].replace(/ 00:00:00$/,"")).format("YYYY-MM-DD"),n=moment(new Date).format("YYYY-MM-DD");return i<o&&i<n}function y(e,t,a){var i=S(e,t);if(v(e,i)){var o=e.length-e.used;if(o>0)return E(o,e.LeaveType.hour_based,a)}return null}function b(e,t){var a=0;return angular.forEach(e,function(e){var i=S(e,t);if(v(e,i)){var o=e.length-e.used;a+=o}}),a}function C(e){if(void 0===e)return"";var t=e.trim();if(""==t)return t;var a=t.split(":"),i=NaN,o=NaN,n=NaN,l=1;return 1===a.length?i=parseFloat(t):2==a.length&&(i=parseFloat(a[0]),o=parseFloat(a[1])),0===a[0].indexOf("-")&&(l=-1),isNaN(i)?isNaN(o)||(n=l*o):(n=60*i,isNaN(o)||(n+=l*o)),n}function w(e,t,a){var i=S(e,t);if(v(e,i)){var o=e.length-e.used;return E(e.length-o,e.LeaveType.hour_based,a)}return E(e.length,e.LeaveType.hour_based,a)}function S(e,t){if(t[0]||t[1])return t;if(e.LeavePeriod)return[e.LeavePeriod.startDate,e.LeavePeriod.endDate];var a=moment(e.from_date).format("YYYY-MM-DD"),i=moment(e.to_date).format("YYYY-MM-DD");
return[a,i]}function D(t){return e.call("leaveEntitlement","DELETE",{ids:t},{})}function T(e,t){var a=k(e);return a?o.getLocalizedCustom(a):a}function x(t,a,i){var o=i.replace(/ 00:00:00$/,""),n="leave/type/"+t+"/employee/"+a+"/date/"+o+"/carry-forward-status";return e.call(n,"GET",[],{}).then(function(e){return e.data.data.adjustCarryForward})}function F(e){var t={};angular.forEach(e,function(e){var a=e.LeaveType.hour_based?"hours":"days";t[a]=e.id});var a=Object.keys(t);return 1===a.length?a[0]:null}function k(e,t){var a;switch(e){case"1":a="Added";break;case"2":a="Accrual";break;case"3":a="Carried Forward";break;case"4":a="Brought Forward";break;case"5":a="Added with Expiry"}return a}function E(e,t,a){return t===!0?parseFloat(e/60).toFixed(a.hourDecimals):parseFloat(e).toFixed(a.dayDecimals)}function I(e){var t=moment(e);return n.toLocalizedDate(t.format("YYYY-MM-DD"))}function A(e,t){var a=[];return angular.forEach(e,function(e){a.push(e.id)}),_.difference(a,t)}function M(e){return e>0?o.getLocalizedCustomWithVariables("Should be a positive number with at most {{noOfDecimalPlaces}} decimal place(s)",{noOfDecimalPlaces:e}):o.getLocalizedCustom("Should be a positive integer")}function L(e){return e>0?o.getLocalizedCustomWithVariables("Should be a number with at most {{noOfDecimalPlaces}} decimal place(s)",{noOfDecimalPlaces:e}):o.getLocalizedCustom("Should be an integer")}function P(e){return e>0?o.getLocalizedCustomWithVariables("Enter a duration in HH:MM or hours with upto {{decimal}} decimal places",{decimal:e}):o.getLocalizedCustom("Should be a positive integer or a duration in HH:MM format")}function $(t){return e.call("leave/entitlement/"+t+"/max-cap","GET",[],{})}function N(e){var t=[],o=[];return angular.forEach(e,function(e){_.includes(t,e.LeaveType.id)||t.push(e.LeaveType.id)}),t.length>0?a.fetch(t).then(function(t){return angular.forEach(e,function(e){var n=e.LeaveType.id,l=a.getDetail(t,n);if(4==e.entitlement_type){var r=i.isPastPeriod([e.from_date,e.to_date]);r&&o.push(e.id),l.carryForward.allowModifyBFAmount||o.push(e.id)}}),o}):[]}function O(e,t){if(void 0===e)return!0;var a=e.trim();if(""===a)return!0;var i=t.hasOwnProperty("allowNegative")&&t.allowNegative,o=a.split(":"),n=!1;if(2===o.length){var l=i?/^-?\d+$/:/^\d+$/,r=/^[0-5][0-9]$/;n=l.test(o[0])&&r.test(o[1])}else if(1===o.length){var s=z(t.hourDecimals,i);n=s.test(o[0])}return n}function R(e,t){var a=t.hasOwnProperty("allowNegative")&&t.allowNegative,i=z(t.dayDecimals,a);return!e||i.test(e)}function z(e,t){var a=t?"^-?":"^",i=e>0?"(\\.\\d{1,"+e+"})?":"";return new RegExp(a+"\\d{1,9}"+i+"$")}function j(e,t,a,i,o){if(2!=e||null===t)return!0;o&&(i=C(i));var n=parseFloat(i)-parseFloat(a);return!(n>t&&n>0)}function V(e,t,a){if("number"!=typeof e&&isNaN(e))return!0;var i=a?C(e):e;return parseFloat(t)<=parseFloat(i)}function G(e,t){if(!e||!t)return 0;var a=moment(e),i=moment(t).add(1,"days");return i.diff(a,"days")}function B(e){var t=e[0],a=new Date(e[0]);return e.forEach(function(e,i){new Date(e)>a&&(t=e,a=new Date(e))}),t}function q(t){var a={};return t&&(a.filter={empNumber:t}),e.get("leave/entitlements/leave-types",a)}function H(){return e.get("leave/entitlements/leave-types",{filter:{leavePeriodTypes:[1,3]}})}var U={appendUnitToAmount:r,fetch:s,fetchTotals:c,save:m,update:u,getDurationUnitForEntitlementList:F,getTypeById:k,getExpiredAmount:y,getUnitText:l,formatEntitlement:E,formatDate:I,remove:D,getAmount:w,getExpiredCount:b,getNormalizedEntitlementValue:C,fetchComments:p,getNonDeletedIds:A,getPositiveDayBasedEntitlementValidationMessage:M,getDayBasedEntitlementValidationMessage:L,getHourBasedEntitlementValidationMessage:P,filterUpdateIds:N,fetchMaxCap:$,hasEntitlements:f,getAdjustableEntitlements:g,adjustEntitlements:h,getLocalizedTypeById:T,isCarryForwardAdjustmentRequired:x,validateEntitlementHours:O,validateEntitlementDays:R,validateMaxCap:j,moreThanUsedAmount:V,getDurationInDays:G,getMostRecentDate:B,getLeaveTypes:q,getLeaveTypesForBulkAdd:H};return U}angular.module("app.leave").service("leaveEntitlementService",e),e.$inject=["webservice","leaveService","leaveTypeRuleService","leavePeriodService","localizedMessages","dateService"]}(),function(){"use strict";function e(e,t,a,i){function o(t,a,i){var o=i===!1;return e.call("leave/type/"+t+"/periods","GET",[],a,void 0,o)}function n(){return e.call("leave/period","GET",[],{})}function l(e,t){for(var i=[],o=[],n=0;n<e.length;n++){var l=e[n][0]+"$$"+e[n][1];i.push({value:l,name:a.toLocalizedDate(e[n][0])+" - "+a.toLocalizedDate(e[n][1])}),o.push(l)}return{titleMap:i,"enum":o}}function r(e){if("currentLeavePeriod"in e)return e.currentLeavePeriod[0]+"$$"+e.currentLeavePeriod[1]}function s(e,t){return a.toLocalizedDate(e.replace(/ 00:00:00$/,""))+" - "+a.toLocalizedDate(t.replace(/ 00:00:00$/,""))}function c(e){var t=e.split("$$");return{from:t[0],to:t[1]}}function d(e){var t=new Date,a=new Date(e[1].replace(/ 00:00:00$/,""));return a<t}function m(){var e=[{value:"1",name:"January"},{value:"2",name:"February"},{value:"3",name:"March"},{value:"4",name:"April"},{value:"5",name:"May"},{value:"6",name:"June"},{value:"7",name:"July"},{value:"8",name:"August"},{value:"9",name:"September"},{value:"10",name:"October"},{value:"11",name:"November"},{value:"12",name:"December"}];return e}function u(e){var t=new Date((new Date).getFullYear(),e,0).getDate(),a=new Array(t).join().split(",").map(function(e,t){var a=++t;return{value:a.toString(),name:a.toString()}});if("2"==e)for(var i in a)"29"==a[i].value&&a.splice(i,1);return a}function p(e,t){for(var a=null,t=moment(t,"YYYY-MM-DD HH:mm"),i=0;i<e.length;i++){var o=c(e[i]),n=moment(o.from,"YYYY-MM-DD HH:mm"),l=moment(o.to,"YYYY-MM-DD HH:mm");if(n<=t&&l>=t){a=e[i];break}}return a}function f(e,t,a,n,r){var s=i.defer(),c={};return o(e,t,r).then(function(e){var t=e.data.data;"leavePeriodList"in t&&(c.leavePeriodOptions=l(t.leavePeriodList),a?(c.leavePeriod=n.date.from+"$$"+n.date.to,s.resolve(c)):"currentLeavePeriod"in t&&Array.isArray(t.currentLeavePeriod)?(c.leavePeriod=t.currentLeavePeriod[0]+"$$"+t.currentLeavePeriod[1],s.resolve(c)):Array.isArray(t.leavePeriodList[0])?(c.leavePeriod=t.leavePeriodList[0][0]+"$$"+t.leavePeriodList[0][1],s.resolve(c)):s.reject())},function(e){s.reject(e)}),s.promise}var g={fetch:o,fetchDefault:n,getEnumAndTitleMap:l,getPeriod:c,isPastPeriod:d,getCurrentPeriod:r,getPeriodText:s,getLeavePeriodForDate:p,getLeavePeriodPossibleStartMonths:m,getLeavePeriodDatesOfMonth:u,getLeavePeriodsForLeaveTypeAndEmployee:f};return g}angular.module("app.leave").service("leavePeriodService",e),e.$inject=["webservice","$translate","dateService","$q"]}(),function(){"use strict";function e(e,t,a){function i(t){return e.call("leave/requests","GET",[],t)}function o(t){return t.asAtDate=a.toStandardDate(new Date(moment(new Date))),e.call("leave/request/export/summary","GET",[],t)}function n(t,a){var i={};return"undefined"!=typeof a&&(i={filter:{type:"my_leave_list"}}),"undefined"==typeof t?e.call("leave/status","GET",[],i):e.callBackground(t,"leave/status","GET",[],i)}function l(){return e.get("leaveStatusList")}function r(e){return e.data.list}function s(e){return e.data.meta}function c(t){return t.asAtDate=a.toStandardDate(new Date(moment(new Date))),e.call("leave/balance","GET",[],t)}function d(t,a){return e.call("leave/request/"+t+"/attachment","PATCH",a)}function m(t,a){return e.call("leave/request/"+t+"/attachment","DELETE",a)}function u(e){var t=[],i={};return _.forEach(e,function(o,n){var l=a.toStandardDate(new Date(o.leave.dateRange.from)),r=a.toStandardDate(new Date(o.leave.dateRange.to));i[o.id]={empId:o.data.emp_number,leaveId:o.data.leave_type_id,sDate:l,eDate:r},(_.includes([25,50,75],n)||n==e.length-1)&&(t.push(i),i={})}),t}function p(t){return e.call("leave/request/action/change-status","PATCH",t)}function f(t,i){return i.asAtDate=a.toStandardDate(new Date(moment(new Date))),e.call("leave/request/"+t+"/detail","GET",[],i)}function g(t){return e.call("leave/request/"+t+"/comments","GET",[],{})}function h(t,a){return e.call("leave/request/"+t+"/item/"+a+"/comments","GET",[],{})}function v(t,a){return e.call("leave/request/"+t+"/comments","POST",a)}function y(t,a,i){return e.call("leave/request/"+t+"/item/"+a+"/comments","POST",i)}function b(t){return"undefined"==typeof t?e.call("leave/request/locations","GET",[],{}):e.callBackground(t,"leave/request/locations","GET",[],{})}var C={fetch:i,getRequests:r,fetchBalance:c,fetchStatus:n,getLeaveStatusList:l,getBalanceFilterByRequests:u,getMeta:s,changeStatus:p,fetchLeaveDetail:f,fetchComments:g,saveRequestComments:v,fetchLeaveComments:h,saveRequestItemComments:y,exportSummary:o,saveAttachment:d,deleteAttachment:m,fetchRequestLocations:b};return C}angular.module("app.leave").service("leaveRequestService",e),e.$inject=["webservice","localizedMessages","dateService"]}(),function(){"use strict";function e(e,t){function a(){var e=t.settings.leave.leave_amount_formatting_configs,a=2,i=2,o=2,n="HH:MM";return"object"==typeof e&&(void 0!==e.edit_mode_format&&e.edit_mode_format&&(n=e.edit_mode_format),void 0!==e.hour_decimals&&e.hour_decimals&&(i=e.hour_decimals),void 0!==e.minute_decimals&&e.minute_decimals&&(a=e.minute_decimals),void 0!==e.day_decimals&&e.day_decimals&&(o=e.day_decimals)),{hourDecimals:i,minuteDecimals:a,dayDecimals:o,editModeFormat:n}}return{getSettings:a}}angular.module("app.leave").service("leaveService",e),e.$inject=["webservice","$rootScope"]}(),function(){"use strict";function e(e,t){function a(t){var a=t;return t instanceof Array&&(a=t.toString()),e.call("leave/type/"+a+"/rule","GET",[],{})}function i(e,t){return e.data.data[t]}function o(t,a){return e.call("leave/type/"+t+"/accrual-group","GET",[],{filter:a})}var n={fetch:a,getDetail:i,fetchAccruedGroups:o};return n}angular.module("app.leave").service("leaveTypeRuleService",e),e.$inject=["webservice","$translate"]}(),function(){"use strict";function e(e,t){function a(t,a){var i=a===!1;return e.call("leave/types","GET",[],t,void 0,i)}function i(e,a,i){var o=[],n=[],l={},r="";return angular.forEach(e,function(e){a&&Boolean(i)!==Boolean(e.is_short_term)||(e.OperationalCountry.Country.cou_name in l||(l[e.OperationalCountry.Country.cou_name]=[]),l[e.OperationalCountry.Country.cou_name].push(e))}),angular.forEach(l,function(e,a){o.push({value:null,name:t.getLocalizedCustom(a)}),angular.forEach(e,function(e){o.push({value:e.id,name:r+e.name}),n.push(e.id)})}),{titleMap:o,"enum":n}}function o(e){var a=e.hour_based===!0?"hour(s)":"day(s)";return t.getLocalizedCustom(a)}function n(e){var a=[],i=[];return angular.forEach(e,function(e){var o={value:e.id,name:e.name};o.group=t.getLocalizedCustom(e.OperationalCountry.Country.cou_name),a.push(o),i.push(e.id)}),{titleMap:a,"enum":i}}function l(e){return"1"==e.deleted?e.name+"("+t.getLocalizedCustom("Deleted")+")":e.name}var r={fetch:a,getDurationUnitText:o,getEnumAndTitleMap:n,formatName:l,getFormatEnumAndTitleMap:i};return r}angular.module("app.leave").service("leaveTypeService",e),e.$inject=["webservice","localizedMessages"]}(),function(e){function t(e,t){var a,i,o,n,l=0,r=function(){l=+new Date,a=null,n=e.apply(i,o),a||(i=o=null)},s=function(){var s=+new Date,c=t-(s-l);return i=this,o=arguments,c<=0||c>t?(a&&(clearTimeout(a),a=null),l=s,n=e.apply(i,o),a||(i=o=null)):a||(a=setTimeout(r,c)),n};return s.cancel=function(){clearTimeout(a),l=0,a=i=o=null},s}var a;e.module("ui.materialize",["ui.materialize.ngModel","ui.materialize.collapsible","ui.materialize.toast","ui.materialize.sidenav","ui.materialize.material_select","ui.materialize.dropdown","ui.materialize.inputfield","ui.materialize.input_date","ui.materialize.tabs","ui.materialize.pagination","ui.materialize.pushpin","ui.materialize.scrollspy","ui.materialize.parallax","ui.materialize.modal","ui.materialize.tooltipped","ui.materialize.slider","ui.materialize.materialboxed","ui.materialize.scrollFire","ui.materialize.nouislider","ui.materialize.input_clock"]),e.module("ui.materialize.scrollFire",[]).directive("scrollFire",["$compile","$timeout",function(a,i){return{restrict:"A",scope:{offset:"@",scrollFire:"&"},link:function(a,i,o){function n(){$(window).off("scroll resize blur focus",s)}var l=a.offset;e.isDefined(a.offset)||(l=0),l=Number(l)||0;var r=!1,s=t(function(){if(!r){var e=window.pageYOffset+window.innerHeight,t=i[0].getBoundingClientRect().top+window.pageYOffset;e>t+l&&(r=!0,a.scrollFire({}),n())}},100);$(window).on("scroll resize blur focus",s),s(),a.$on("$destroy",n)}}}]),e.module("ui.materialize.ngModel",[]).directive("ngModel",["$timeout",function(e){return{restrict:"A",priority:-1,link:function(e,t,a){}}}]),e.module("ui.materialize.slider",[]).directive("slider",["$timeout",function(t){return{restrict:"A",scope:{height:"=",transition:"=",interval:"=",indicators:"="},link:function(a,i,o){i.addClass("slider"),t(function(){i.slider({height:e.isDefined(a.height)?a.height:400,transition:e.isDefined(a.transition)?a.transition:500,interval:e.isDefined(a.interval)?a.interval:6e3,indicators:!e.isDefined(a.indicators)||a.indicators})})}}}]),e.module("ui.materialize.collapsible",[]).directive("collapsible",["$timeout",function(e){return{link:function(t,a,i){e(function(){a.collapsible()}),"watch"in i&&t.$watch(function(){return a[0].innerHTML},function(t,i){t!==i&&e(function(){a.collapsible()})})}}}]),e.module("ui.materialize.parallax",[]).directive("parallax",["$timeout",function(e){return{link:function(t,a,i){e(function(){a.parallax()})}}}]),e.module("ui.materialize.toast",[]).constant("toastConfig",{duration:3e3}).directive("toast",["toastConfig",function(t){return{scope:{message:"@",duration:"@",callback:"&"},link:function(a,i,o){i.bind(o.toast,function(){var i=e.isDefined(a.message)?a.message:"",n=e.isDefined(o.toastclass)?o.toastclass:"";Materialize.toast(i,a.duration?a.duration:t.duration,n,a.callback)})}}}]),e.module("ui.materialize.pushpin",[]).directive("pushpin",[function(){return{restrict:"AE",require:["?pushpinTop","?pushpinOffset","?pushpinBottom"],link:function(e,t,a){var i=a.pushpinTop||0,o=a.pushpinOffset||0,n=a.pushpinBottom||1/0;setTimeout(function(){t.pushpin({top:i,offset:o,bottom:n})},0)}}}]),e.module("ui.materialize.scrollspy",[]).directive("scrollspy",["$timeout",function(e){return{restrict:"A",link:function(t,a,i){a.addClass("scrollspy"),e(function(){a.scrollSpy()})}}}]),e.module("ui.materialize.tabs",[]).directive("tabs",["$timeout",function(e){return{scope:{reload:"="},link:function(t,a,i){a.addClass("tabs"),e(function(){a.tabs()}),t.$watch("reload",function(e){e===!0&&(a.tabs(),t.reload=!1)})}}}]),e.module("ui.materialize.sidenav",[]).directive("sidenav",[function(){return{scope:{menuwidth:"@",closeonclick:"@"},link:function(t,i,o){i.sideNav({menuWidth:e.isDefined(t.menuwidth)?parseInt(t.menuwidth,10):a,edge:o.sidenav?o.sidenav:"left",closeOnClick:e.isDefined(t.closeonclick)?"true"==t.closeonclick:a})}}}]),e.module("ui.materialize.material_select",[]).directive("materialSelect",["$compile","$timeout",function(t,i){return{link:function(t,o,n){function l(e,i){if(n.multiple){if(i!==a&&e!==a&&i.length===e.length)return;var l=o.siblings("ul.active");if(e!==a&&l.length){var r=l.children("li.active").length;if(r==e.length)return}}else if(e==o.val())return;o.siblings(".caret").remove(),t.$evalAsync(function(){o.material_select(function(){n.multiple||$("input.select-dropdown").trigger("close")});var e=function(e){(e.clientX>=e.target.clientWidth||e.clientY>=e.target.clientHeight)&&e.preventDefault()};o.siblings("input.select-dropdown").on("mousedown",e)})}if(o.is("select")){if(i(l),n.ngModel)if(n.ngModel&&!e.isDefined(t.$eval(n.ngModel))){var r=!1;t.$watch(n.ngModel,function(a,i){!r&&e.isDefined(t.$eval(n.ngModel))?(r=!0,l()):l(a,i)})}else t.$watch(n.ngModel,l);"watch"in n&&t.$watch(function(){return o[0].innerHTML},function(e,t){e!==t&&i(l)})}}}}]),e.module("ui.materialize.dropdown",[]).directive("dropdown",["$timeout",function(t){return{scope:{inDuration:"@",outDuration:"@",constrainWidth:"@",hover:"@",alignment:"@",gutter:"@",belowOrigin:"@"},link:function(i,o,n){t(function(){o.dropdown({inDuration:e.isDefined(i.inDuration)?i.inDuration:a,outDuration:e.isDefined(i.outDuration)?i.outDuration:a,constrain_width:e.isDefined(i.constrainWidth)?i.constrainWidth:a,hover:e.isDefined(i.hover)?i.hover:a,alignment:e.isDefined(i.alignment)?i.alignment:a,gutter:e.isDefined(i.gutter)?i.gutter:a,belowOrigin:e.isDefined(i.belowOrigin)?i.belowOrigin:a})})}}}]),e.module("ui.materialize.inputfield",[]).directive("inputField",["$timeout",function(t){return{transclude:!0,scope:{},link:function(a,i){t(function(){Materialize.updateTextFields(),i.find("> > .materialize-textarea").each(function(){var e=$(this);e.addClass("materialize-textarea"),e.trigger("autoresize");var i=e.attr("ng-model");i&&a.$parent.$watch(i,function(a,i){a!==i&&t(function(){e.trigger("autoresize")})})}),i.find("> > .materialize-textarea, > > input").each(function(t,a){a=e.element(a),a.siblings('span[class="character-counter"]').length||a.characterCounter()})})},template:'<div ng-transclude class="input-field"></div>'}}]),e.module("ui.materialize.input_date",[]).directive("inputDate",["$compile","$timeout",function(t,i){var o=$("<style>#inputCreated_root {outline: none;}</style>");$("html > head").append(o);var n=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,i=/[^-+\dA-Z]/g,o=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e};return function(l,r,s){var c=n;if(1!==arguments.length||"[object String]"!=Object.prototype.toString.call(l)||/\d/.test(l)||(r=l,l=a),l=l?new Date(l):new Date,isNaN(l))throw SyntaxError("invalid date");r=String(c.masks[r]||r||c.masks["default"]),"UTC:"==r.slice(0,4)&&(r=r.slice(4),s=!0);var d=s?"getUTC":"get",m=l[d+"Date"](),u=l[d+"Day"](),p=l[d+"Month"](),f=l[d+"FullYear"](),g=l[d+"Hours"](),h=l[d+"Minutes"](),v=l[d+"Seconds"](),y=l[d+"Milliseconds"](),b=s?0:l.getTimezoneOffset(),C={d:m,dd:o(m),ddd:c.i18n.dayNames[u],dddd:c.i18n.dayNames[u+7],m:p+1,mm:o(p+1),mmm:c.i18n.monthNames[p],mmmm:c.i18n.monthNames[p+12],yy:String(f).slice(2),yyyy:f,h:g%12||12,hh:o(g%12||12),H:g,HH:o(g),M:h,MM:o(h),s:v,ss:o(v),l:o(y,3),L:o(y>99?Math.round(y/10):y),t:g<12?"a":"p",tt:g<12?"am":"pm",T:g<12?"A":"P",TT:g<12?"AM":"PM",Z:s?"UTC":(String(l).match(t)||[""]).pop().replace(i,""),o:(b>0?"-":"+")+o(100*Math.floor(Math.abs(b)/60)+Math.abs(b)%60,4),S:["th","st","nd","rd"][m%10>3?0:(m%100-m%10!=10)*m%10]};return r.replace(e,function(e){return e in C?C[e]:e.slice(1,e.length-1)})}}();n.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},n.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(e,t){return n(this,e,t)};var l=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())};return{require:"ngModel",scope:{container:"@",format:"@",formatSubmit:"@",monthsFull:"@",monthsShort:"@",weekdaysFull:"@",weekdaysShort:"@",weekdaysLetter:"@",firstDay:"=",disable:"=",today:"=",clear:"=",close:"=",selectYears:"=",onStart:"&",onRender:"&",onOpen:"&",onClose:"&",onSet:"&",onStop:"&",ngReadonly:"=?",max:"@",min:"@"},link:function(o,n,r,s){s.$formatters.unshift(function(t){if(t){var a=new Date(t);return e.isDefined(o.format)?a.format(o.format):a.format("d mmmm, yyyy")}return null});var c=e.isDefined(o.monthsFull)?o.$eval(o.monthsFull):a,d=e.isDefined(o.monthsShort)?o.$eval(o.monthsShort):a,m=e.isDefined(o.weekdaysFull)?o.$eval(o.weekdaysFull):a,u=e.isDefined(o.weekdaysShort)?o.$eval(o.weekdaysShort):a,p=e.isDefined(o.weekdaysLetter)?o.$eval(o.weekdaysLetter):a;t(n.contents())(o),o.ngReadonly||i(function(){var t={container:o.container,format:e.isDefined(o.format)?o.format:a,formatSubmit:e.isDefined(o.formatSubmit)?o.formatSubmit:a,monthsFull:e.isDefined(c)?c:a,monthsShort:e.isDefined(d)?d:a,weekdaysFull:e.isDefined(m)?m:a,weekdaysShort:e.isDefined(u)?u:a,weekdaysLetter:e.isDefined(p)?p:a,firstDay:e.isDefined(o.firstDay)?o.firstDay:0,disable:e.isDefined(o.disable)?o.disable:a,today:e.isDefined(o.today)?o.today:a,clear:e.isDefined(o.clear)?o.clear:a,close:e.isDefined(o.close)?o.close:a,selectYears:e.isDefined(o.selectYears)?o.selectYears:a,onStart:e.isDefined(o.onStart)?function(){o.onStart()}:a,onRender:e.isDefined(o.onRender)?function(){o.onRender()}:a,onOpen:e.isDefined(o.onOpen)?function(){o.onOpen()}:a,onClose:e.isDefined(o.onClose)?function(){o.onClose()}:a,onSet:e.isDefined(o.onSet)?function(){o.onSet()}:a,onStop:e.isDefined(o.onStop)?function(){o.onStop()}:a};o.container||delete t.container;var i=n.pickadate(t),r=i.pickadate("picker");o.$watch("max",function(e){if(r){var t=new Date(e);r.set({max:!!l(t)&&t})}}),o.$watch("min",function(e){if(r){var t=new Date(e);r.set({min:!!l(t)&&t})}}),o.$watch("disable",function(t){if(r){var a=!(!e.isDefined(t)||!e.isArray(t))&&t;r.set({disable:a})}})})}}}]),e.module("ui.materialize.input_clock",[]).directive("inputClock",[function(){return{restrict:"A",scope:{"default":"@",fromnow:"=?",donetext:"@",autoclose:"=?",ampmclickable:"=?",darktheme:"=?",twelvehour:"=?",vibrate:"=?"},link:function(t,a){$(a).addClass("timepicker"),t.ngReadonly||a.clockpicker({"default":e.isDefined(t["default"])?t["default"]:"",fromnow:e.isDefined(t.fromnow)?t.fromnow:0,donetext:e.isDefined(t.donetext)?t.donetext:"Done",autoclose:!!e.isDefined(t.autoclose)&&t.autoclose,ampmclickable:!!e.isDefined(t.ampmclickable)&&t.ampmclickable,darktheme:!!e.isDefined(t.darktheme)&&t.darktheme,twelvehour:!e.isDefined(t.twelvehour)||t.twelvehour,vibrate:!e.isDefined(t.vibrate)||t.vibrate})}}}]),e.module("ui.materialize.pagination",[]).directive("pagination",["$sce",function(e){function t(e,t){e.List=[],e.Hide=!1,e.page=parseInt(e.page)||1,e.total=parseInt(e.total)||0,e.dots=e.dots||"...",e.ulClass=e.ulClass||t.ulClass||"pagination",e.adjacent=parseInt(e.adjacent)||2,e.activeClass="active",e.disabledClass="disabled",e.scrollTop=e.$eval(t.scrollTop),e.hideIfEmpty=e.$eval(t.hideIfEmpty),e.showPrevNext=e.$eval(t.showPrevNext),e.useSimplePrevNext=e.$eval(t.useSimplePrevNext)}function a(e,t){e.page>t&&(e.page=t),e.page<=0&&(e.page=1),e.adjacent<=0&&(e.adjacent=2),t<=1&&(e.Hide=e.hideIfEmpty)}function i(e,t){t=t.valueOf(),e.page!=t&&(e.page=t,e.paginationAction({page:t}),e.scrollTop&&scrollTo(0,0))}function o(t,a,o){var n=0;for(n=t;n<=a;n++){var l={value:e.trustAsHtml(n.toString()),liClass:o.page==n?o.activeClass:"waves-effect",action:function(){i(o,this.value)}};o.List.push(l)}}function n(t){t.List.push({value:e.trustAsHtml(t.dots)})}function l(e,t){o(1,2,e),3!=t&&n(e)}function r(t,a,o){if(t.showPrevNext&&!(a<1)){var n,l,r;if("prev"===o){n=t.page-1<=0;var s=t.page-1<=0?1:t.page-1;t.useSimplePrevNext?(l={value:"<<",title:"First Page",page:1},r={value:"<",title:"Previous Page",page:s}):(l={value:'<i class="material-icons">first_page</i>',title:"First Page",page:1},r={value:'<i class="material-icons">chevron_left</i>',title:"Previous Page",page:s})}else{n=t.page+1>a;var c=t.page+1>=a?a:t.page+1;t.useSimplePrevNext?(l={value:">",title:"Next Page",page:c},r={value:">>",title:"Last Page",page:a}):(l={value:'<i class="material-icons">chevron_right</i>',title:"Next Page",page:c},r={value:'<i class="material-icons">last_page</i>',title:"Last Page",page:a})}var d=function(a,o){t.List.push({value:e.trustAsHtml(a.value),title:a.title,liClass:o?t.disabledClass:"",action:function(){o||i(t,a.page)}})};d(l,n),d(r,n)}}function s(e,t,a){a!=e-2&&n(t),o(e-1,e,t)}function c(e,i){if(e.pageSize&&!(e.pageSize<0)){t(e,i);var n,c=2*e.adjacent,d=Math.ceil(e.total/e.pageSize);if(a(e,d),r(e,d,"prev"),d<5+c)n=1,o(n,d,e);else{var m;e.page<=1+c?(n=1,m=2+c+(e.adjacent-1),o(n,m,e),s(d,e,m)):d-c>e.page&&e.page>c?(n=e.page-e.adjacent,m=e.page+e.adjacent,l(e,n),o(n,m,e),s(d,e,m)):(n=d-(1+c+(e.adjacent-1)),m=d,l(e,n),o(n,m,e))}r(e,d,"next")}}return{restrict:"EA",scope:{page:"=",pageSize:"=",total:"=",dots:"@",hideIfEmpty:"@",adjacent:"@",scrollTop:"@",showPrevNext:"@",useSimplePrevNext:"@",paginationAction:"&",ulClass:"=?"},template:'<ul ng-hide="Hide" ng-class="ulClass"> <li ng-class="Item.liClass" ng-click="Item.action()" ng-repeat="Item in List"> <a href> <span ng-bind-html="Item.value"></span> </a></ul>',link:function(e,t,a){e.$watchCollection("[page, total, pageSize]",function(){c(e,a)})}}}]),e.module("ui.materialize.modal",[]).directive("modal",["$compile","$timeout",function(t,i){return{scope:{dismissible:"=",opacity:"@",inDuration:"@",outDuration:"@",ready:"&?",complete:"&?",open:"=?",enableTabs:"@?"},link:function(o,n,l){i(function(){var i=$(l.href?l.href:"#"+l.target);t(n.contents())(o);var r=function(){e.isFunction(o.complete)&&o.$eval(o.complete()),o.open=!1,o.$apply()},s=function(){e.isFunction(o.ready)&&o.$eval(o.ready()),o.enableTabs&&i.find("ul.tabs").tabs()},c={dismissible:e.isDefined(o.dismissible)?o.dismissible:a,opacity:e.isDefined(o.opacity)?o.opacity:a,in_duration:e.isDefined(o.inDuration)?o.inDuration:a,out_duration:e.isDefined(o.outDuration)?o.outDuration:a,ready:s,complete:r};n.leanModal(c),e.isDefined(l.open)&&i.length>0&&o.$watch("open",function(t,a){e.isDefined(t)&&(t===!0?i.openModal(c):i.closeModal())})})}}}]),e.module("ui.materialize.tooltipped",[]).directive("tooltipped",["$compile","$timeout",function(e,t){return{restrict:"EA",scope:!0,link:function(a,i,o){i.addClass("tooltipped"),e(i.contents())(a),t(function(){i.tooltip()}),a.$on("$destroy",function(){i.tooltip("remove")})}}}]),e.module("ui.materialize.materialboxed",[]).directive("materialboxed",["$timeout",function(e){return{restrict:"A",link:function(t,a,i){e(function(){a.materialbox()})}}}]),e.module("ui.materialize.nouislider",[]).directive("nouislider",["$timeout",function(t){return{restrict:"A",scope:{ngModel:"=",min:"@",max:"@",step:"@?",connect:"@?",tooltips:"@?"},link:function(i,o,n){t(function(){noUiSlider.create(o[0],{start:i.ngModel||0,step:parseFloat(i.step||1),tooltips:e.isDefined(i.connect)?i.tooltips:a,connect:e.isDefined(i.connect)?i.connect:"lower",range:{min:parseFloat(i.min||0),max:parseFloat(i.max||100)},format:{to:function(e){return Math.round(100*e)/100},from:function(e){return Number(e)}}}),o[0].noUiSlider.on("update",function(e,t){i.ngModel=parseInt(e[0],10),i.$apply()})})}}}])}(angular),String.prototype.padEnd&&String.prototype.propertyIsEnumerable("padEnd")&&Object.defineProperty(String.prototype,"padEnd",{enumerable:!1,value:String.prototype.padEnd}),c3.chart.internal.fn.generateDrawBar=function(e,t){var a=this,i=a.config,o=a.generateGetBarPoints(e,t);return function(e,t){var a=o(e,t),n=i.data_groups,l="",r=i.axis_rotated?1:0,s=i.axis_rotated?0:1,c=i.bar_radius,d=i.bar_radiusAll;if(i.oxd_styles)if(n&&n.length>0){var m=[];if(n.forEach(function(e){m.push(e[e.length-1])}),a[0][1]===a[1][1]&&a[1][1]===a[2][1]&&a[2][1]===a[3][1]||a[0][0]===a[1][0]&&a[1][0]===a[2][0]&&a[2][0]===a[3][0])return l="M "+a[0][r]+","+a[0][s]+" L"+a[1][r]+","+a[1][s]+" L"+a[2][r]+","+a[2][s]+" L"+a[3][r]+","+a[3][s]+" z";l=m.indexOf(e.id)>-1&&null===i.data_order?i.axis_rotated?"M "+a[0][r]+","+a[0][s]+" L"+(a[1][r]-c)+","+a[1][s]+" Q"+a[1][r]+","+a[1][s]+" "+a[1][r]+","+(a[1][s]+c)+" L"+a[2][r]+","+(a[2][s]-c)+" Q"+a[2][r]+","+a[2][s]+" "+(a[2][r]-c)+","+a[2][s]+" L"+a[3][r]+","+a[3][s]+" z":"M "+a[0][r]+","+a[0][s]+" L"+a[1][r]+","+(a[1][s]+c)+" Q"+a[1][r]+","+a[1][s]+" "+(a[1][r]+c)+","+a[1][s]+" L"+(a[2][r]-c)+","+a[2][s]+" Q"+a[2][r]+","+a[2][s]+" "+a[2][r]+","+(a[2][s]+c)+" L"+a[3][r]+","+a[3][s]+" z":d?"M "+a[0][r]+","+a[0][s]+" L"+(a[1][r]+c)+","+a[1][s]+" Q"+a[1][r]+","+a[1][s]+" "+a[1][r]+","+(a[1][s]+c)+" L"+a[2][r]+","+(a[2][s]-c)+" Q"+a[2][r]+","+a[2][s]+" "+(a[2][r]+c)+","+a[2][s]+" L"+a[3][r]+","+a[3][s]+" z":"M "+a[0][r]+","+a[0][s]+" L"+a[1][r]+","+a[1][s]+" L"+a[2][r]+","+a[2][s]+" L"+a[3][r]+","+a[3][s]+" z"}else l=i.axis_rotated?"M "+a[0][r]+","+a[0][s]+" L"+(a[1][r]-c)+","+a[1][s]+" Q"+a[1][r]+","+a[1][s]+" "+a[1][r]+","+(a[1][s]+c)+" L"+a[2][r]+","+(a[2][s]-c)+" Q"+a[2][r]+","+a[2][s]+" "+(a[2][r]-c)+","+a[2][s]+" L"+a[3][r]+","+a[3][s]+" z":"M "+a[0][r]+","+a[0][s]+" L"+a[1][r]+","+(a[1][s]+c)+" Q"+a[1][r]+","+a[1][s]+" "+(a[1][r]+c)+","+a[1][s]+" L"+(a[2][r]-c)+","+a[2][s]+" Q"+a[2][r]+","+a[2][s]+" "+a[2][r]+","+(a[2][s]+c)+" L"+a[3][r]+","+a[3][s]+" z";else l="M "+a[0][r]+","+a[0][s]+" L"+a[1][r]+","+a[1][s]+" L"+a[2][r]+","+a[2][s]+" L"+a[3][r]+","+a[3][s]+" z";return l}},c3.chart.internal.fn.updateRadius=function(){var e=this,t=e.config,a=t.gauge_width||t.donut_width,i=e.filterTargetsToShow(e.data.targets).length*e.config.gauge_arcs_minWidth;e.radiusExpanded=Math.min(e.arcWidth,e.arcHeight)/2*(e.hasType("gauge")?.85:1),e.radius=.95*e.radiusExpanded,e.innerRadiusRatio=a?(e.radius-a)/e.radius:.6,e.innerRadius=e.hasType("donut")||e.hasType("gauge")?e.radius*e.innerRadiusRatio:0,t.oxd_styles&&e.hasType("pie")&&(e.innerRadius=7.5),e.gaugeArcWidth=a?a:i<=e.radius-e.innerRadius?e.radius-e.innerRadius:i<=e.radius?i:e.radius},c3.chart.internal.axis.internal.fn.ellipsify=function(e,t){if(e.length<=t)return e;for(var a=e.slice(0,t),i=3,o=t-1;o>=0;o--){var n=a[o].length;if(a[o]=a[o]+"...",i-=n,i<=0)break}return a};var sanitise=function(e){return"string"==typeof e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;"):e};!function(e,t,a){function i(e,t){return typeof e===t}function o(){var e,t,a,o,n,l,r;for(var s in b)if(b.hasOwnProperty(s)){if(e=[],t=b[s],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(a=0;a<t.options.aliases.length;a++)e.push(t.options.aliases[a].toLowerCase());for(o=i(t.fn,"function")?t.fn():t.fn,n=0;n<e.length;n++)l=e[n],r=l.split("."),1===r.length?w[r[0]]=o:(!w[r[0]]||w[r[0]]instanceof Boolean||(w[r[0]]=new Boolean(w[r[0]])),w[r[0]][r[1]]=o),y.push((o?"":"no-")+r.join("-"))}}function n(e){var t=_.className,a=w._config.classPrefix||"";if(S&&(t=t.baseVal),w._config.enableJSClass){var i=new RegExp("(^|\\s)"+a+"no-js(\\s|$)");t=t.replace(i,"$1"+a+"js$2")}w._config.enableClasses&&(t+=" "+a+e.join(" "+a),S?_.className.baseVal=t:_.className=t)}function l(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):S?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function r(e,t){return!!~(""+e).indexOf(t)}function s(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,a){return t+a.toUpperCase()}).replace(/^-/,"")}function c(e,t){return function(){return e.apply(t,arguments)}}function d(e,t,a){var o;for(var n in e)if(e[n]in t)return a===!1?e[n]:(o=t[e[n]],i(o,"function")?c(o,a||t):o);return!1}function m(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function u(){var e=t.body;return e||(e=l(S?"svg":"body"),e.fake=!0),e}function p(e,a,i,o){var n,r,s,c,d="modernizr",m=l("div"),p=u();if(parseInt(i,10))for(;i--;)s=l("div"),s.id=o?o[i]:d+(i+1),m.appendChild(s);return n=l("style"),n.type="text/css",n.id="s"+d,(p.fake?p:m).appendChild(n),p.appendChild(m),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(t.createTextNode(e)),m.id=d,p.fake&&(p.style.background="",p.style.overflow="hidden",c=_.style.overflow,_.style.overflow="hidden",_.appendChild(p)),r=a(m,e),p.fake?(p.parentNode.removeChild(p),_.style.overflow=c,_.offsetHeight):m.parentNode.removeChild(m),!!r}function f(t,i){var o=t.length;if("CSS"in e&&"supports"in e.CSS){for(;o--;)if(e.CSS.supports(m(t[o]),i))return!0;
return!1}if("CSSSupportsRule"in e){for(var n=[];o--;)n.push("("+m(t[o])+":"+i+")");return n=n.join(" or "),p("@supports ("+n+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return a}function g(e,t,o,n){function c(){m&&(delete A.style,delete A.modElem)}if(n=!i(n,"undefined")&&n,!i(o,"undefined")){var d=f(e,o);if(!i(d,"undefined"))return d}for(var m,u,p,g,h,v=["modernizr","tspan","samp"];!A.style&&v.length;)m=!0,A.modElem=l(v.shift()),A.style=A.modElem.style;for(p=e.length,u=0;p>u;u++)if(g=e[u],h=A.style[g],r(g,"-")&&(g=s(g)),A.style[g]!==a){if(n||i(o,"undefined"))return c(),"pfx"!=t||g;try{A.style[g]=o}catch(y){}if(A.style[g]!=h)return c(),"pfx"!=t||g}return c(),!1}function h(e,t,a,o,n){var l=e.charAt(0).toUpperCase()+e.slice(1),r=(e+" "+k.join(l+" ")+l).split(" ");return i(t,"string")||i(t,"undefined")?g(r,t,o,n):(r=(e+" "+E.join(l+" ")+l).split(" "),d(r,t,a))}function v(e,t,i){return h(e,a,a,t,i)}var y=[],b=[],C={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var a=this;setTimeout(function(){t(a[e])},0)},addTest:function(e,t,a){b.push({name:e,fn:t,options:a})},addAsyncTest:function(e){b.push({name:null,fn:e})}},w=function(){};w.prototype=C,w=new w;var _=t.documentElement,S="svg"===_.nodeName.toLowerCase(),D=C._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];C._prefixes=D;var T="CSS"in e&&"supports"in e.CSS,x="supportsCSS"in e;w.addTest("supports",T||x);var F="Moz O ms Webkit",k=C._config.usePrefixes?F.split(" "):[];C._cssomPrefixes=k;var E=C._config.usePrefixes?F.toLowerCase().split(" "):[];C._domPrefixes=E;var I={elem:l("modernizr")};w._q.push(function(){delete I.elem});var A={style:I.elem.style};w._q.unshift(function(){delete A.style}),C.testAllProps=h,C.testAllProps=v,w.addTest("cssfilters",function(){if(w.supports)return v("filter","blur(2px)");var e=l("a");return e.style.cssText=D.join("filter:blur(2px); "),!!e.style.length&&(t.documentMode===a||t.documentMode>9)}),o(),n(y),delete C.addTest,delete C.addAsyncTest;for(var M=0;M<w._q.length;M++)w._q[M]();e.Modernizr=w}(window,document),function(){"use strict";function e(e,t,a,i,o,n){function l(){i.show(),a.getPermissions().then(function(e){e.maintenance_configuration&&e.maintenance_configuration.read?(c.permissions=e.maintenance_configuration,o.fetchMaintenanceConfigurations().then(function(e){var t=e.data.data;s(t)})):t.go("403")})["finally"](function(){i.hide(),null!==localStorage.getItem("toast")&&"saveSuccess"==localStorage.getItem("toast")&&(n.showLocalizedToast("saveSuccess"),localStorage.removeItem("toast"))})}function r(t){e.$broadcast("schemaFormValidate"),t.$valid&&c.permissions.update&&(i.show(),o.updateMaintenanceConfigurations(c.model).then(function(e){var t=e.data.success;e.data.data;t&&(localStorage.setItem("toast","saveSuccess"),location.reload())},function(e){n.errorToast("Failed to Save")})["finally"](function(){i.hide()}))}function s(e){if(c.schema={type:"object",readonly:!0,properties:{enableMaintenanceModule:{title:"Enable Purging of Records",type:"boolean"}}},c.form=[{type:"section",htmlClass:"row",items:[{htmlClass:"col s12 m12 l12",type:"checkbox",key:"enableMaintenanceModule"}]}],c.model={enableMaintenanceModule:e.enableMaintenanceModule},c.permissions.update){c.schema.readonly=!1;var t={type:"section",htmlClass:"row form-buttons",items:[{htmlClass:"right",type:"submit",title:"Save"}]};c.form.push(t)}}var c=this;c.permissions={read:!1},c.onSubmit=r,l()}angular.module("app.maintenance").controller("MaintenanceConfigurationController",e),e.$inject=["$scope","$state","datagroupPermissions","loader","maintenanceConfigurationService","localizedMessages"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"maintenance",config:{"abstract":!0,url:"/maintenance",template:"<ui-view/>"}},{state:"maintenance.configuration",config:{url:"/configuration",views:{"":{templateUrl:"app/maintenance/configuration/configuration.html",controller:"MaintenanceConfigurationController",controllerAs:"vm"}},data:{title:"Maintenance Configuration"}}},{state:"maintenance.purge_employee_records",config:{url:"/purge_employee_records",views:{"":{templateUrl:"app/maintenance/purge_employee_records/purge_employee_records.html",controller:"MaintenanceEmployeeRecordsController",controllerAs:"vm"}},data:{title:"Purge Employee Records"}}},{state:"maintenance.purge_candidate_records",config:{url:"/purge_candidate_records",views:{"":{templateUrl:"app/maintenance/purge_candidate_records/purge_candidate_records.html",controller:"MaintenanceCandidateRecordsController",controllerAs:"vm"}},data:{title:"Purge Candidate Records"}}}]}angular.module("app.maintenance").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(){i.show(),e.$on("invalidVacancy",function(t,a){a?e.$broadcast("schemaForm.error.vacancy","invalid",!0):e.$broadcast("schemaForm.error.vacancy","invalid","Invalid")}),a.getPermissions().then(function(e){e.maintenance_purge_candidate_records&&e.maintenance_purge_candidate_records.read?r.call("defaultAuthenticationSettings","GET",[]).then(function(t){T.authenticationSettings=t.data.meta,T.permissions=e.maintenance_purge_candidate_records,w(),i.hide()}):(i.hide(),t.go("403"))})}function h(t){e.$broadcast("schemaFormValidate")}function v(e,t,a){T.field=e,T.order=t,T.page=a;var o={offset:(a-1)*T.pageSize,limit:T.pageSize,sortingFeild:T.SortingListFields[e],sortingOrder:t,vacancyId:T.model.selectedVacancy.id};i.show(),r.call("maintenanceCandidate","GET",[],o).then(function(e){T.candidateList=e.data.data,T.candidateList.length>0||n.warningToast("No candidates found for this vacancy with no consent to keep their data for later processing"),T.dataInCurruntPage=e.data.meta.dataInCurruntPage,T.totalDataCount=e.data.meta.totalCount,T.purgableIdList=e.data.meta.idList,T.lastPage=Math.ceil(T.totalDataCount/T.pageSize),T.candidateList.length>0?(T.showList=!0,_()):T.showList=!1},function(e){})["finally"](function(){i.hide()})}function y(t){e.$broadcast("schemaFormValidate"),T.currentVacancy=null,t.$valid&&T.permissions.read&&(i.show(),d.verifyPassword(T.verifyPasswordModel).then(function(e){var t=e.data.success;t?(T.verified=!0,r.call("maintenanceVacancies","GET",[],{}).then(function(e){var t=e.data.data;b({vacancies:m.getEnumAndTitleMapForSelect(t,{value:"id",name:"name"})})})):(n.errorToast("Incorrect password"),T.verified=!1)})["finally"](function(){i.hide()}))}function b(e){T.schema={type:"object",readonly:!0,properties:{selectedVacancy:{title:"Vacancy",type:["object","null"],idsToSkip:[]}},required:["selectedVacancy"]},T.form=[{type:"section",htmlClass:"row",items:[{key:"selectedVacancy",type:"vacancy-auto-complete",htmlClass:"col s12 m12 l4",placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",requireSelection:!0,onChange:function(e){e?(T.model.selectedVacancy=e.originalObject,C()):T.model.selectedVacancy=void 0},validationMessage:{302:n.getLocalizedCustom("Required")}}]}],T.model={selectedVacancy:""},T.permissions.read&&(T.schema.readonly=!1)}function C(){v(T.field,T.order,T.page)}function w(){T.verifyPasswordSchema={type:"object",properties:{consent:{title:"I understand that purging records will delete data permanently",type:"boolean"},currentPassword:{title:"Password",type:"string"}},required:["consent","currentPassword"]},T.verifyPasswordForm=[{type:"section",htmlClass:"row",items:[{htmlClass:"col s12 m12 l12",type:"checkbox",key:"consent",onChange:function(e){T.confirmButtonClass=e?"":"disabled",w()}},{key:"currentPassword",type:"password",htmlClass:"col s12 m12 l12",condition:"!vm.authenticationSettings.samlEnabled && !vm.authenticationSettings.openIdEnabled",validationMessage:{302:n.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row form-buttons",items:[{htmlClass:"right",type:"submit",title:"Confirm",style:T.confirmButtonClass}]}]}function _(){var e=[];e.push({name:"name",lable:"Name",getter:"name",sortable:!0,sortAction:"fetchCandidates"},{name:"status",lable:"Status",getter:"status",sortable:!1,formatter:function(e){return n.getLocalizedCustom(e)}},{name:"dateOfApplication",lable:"Applied Date",getter:"dateOfApplication",sortable:!1,filters:[{name:"ohrmDateFilter"}]});var t=[{action:"purgeCandidates",lable:"Purge",actionPermission:!0}];T.unselectableIds=[],T.listData={candidates:{name:"viewLeaveList",selectable:!1,selected:[],idGetter:"id",listFields:e,listActions:t,showColumnsAnyway:!0,permission:{read:!0},unselectableIds:T.unselectableIds,pagination:!0}}}function S(){s.showModal({templateUrl:"app/maintenance/purge_candidate_records/purge_confirmation.html",controller:"MaintenancePurgeCandidateConfirmationController",controllerAs:"modal",inputs:{length:T.totalDataCount}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&D()})})}function D(){var t={updateFinished:!1,total:T.totalDataCount,fieldCount:1,getProgressPercentage:function(e){var t=Math.floor(11*Math.random())+5;return Math.max(t,parseInt(100*e/this.total))},getSuccessMessage:function(e){return n.getLocalizedCustomWithVariables("Successfully Purged ({{updateCount}} Candidates)",{updateCount:e})}};o.openPurgeProgressModal(t).then(function(a){o.purgeCandidatesById(T.purgableIdList).then(function(e){var a=e.data.success;t.updateFinished=!0,a?n.successToast("Successfully Purged"):n.errorToast("Failed to Purge")})["finally"](function(){T.model.selectedVacancy="",e.$broadcast("schemaFormRedraw")})})}var T=this;T.field="name",T.order="ASC",T.pageSize=50,T.page=1,T.lastPage=0,T.totalDataCount=0,T.dataInCurruntPage=0,T.purgeCandidates=S,T.permissions={read:!1},T.candidateList=[],T.verified=!1,T.showList=!1,T.currentVacancy=null,T.onSubmit=h,T.submitPassword=y,T.fetchCandidates=v,T.deleteCandidates=D,T.fetchCandidatesForVacancy=C,T.confirmButtonClass="disabled",T.SortingListFields={name:"first_name",userroles:"display_name",employeeName:"e.lastName",status:"status"},T.verifyPasswordModel={consent:!1,currentPassword:""},g()}angular.module("app.maintenance").controller("MaintenanceCandidateRecordsController",e),e.$inject=["$scope","$state","datagroupPermissions","loader","maintenancePurgeCandidateService","localizedMessages","employeeService","webservice","ModalService","$sessionStorage","maintenanceVerifyPasswordService","formHelper","toast","$translate"]}(),function(){"use strict";function e(e,t,a,i,o){function n(){l.progressModalTitle=o.getLocalizedCustom("Purging candidates"),1==t.total?l.progressModalTitle=o.getLocalizedCustomWithVariables("Purging {{count}} Candidates",{count:1}):t.total>1&&(l.progressModalTitle=o.getLocalizedCustomWithVariables("Purging {{count}} Candidates",{count:t.total})),a.call("progress","GET",[],{name:"candidatePurge"}).then(function(a){var o=a.data.data;l.tempProgressPercentage=parseInt(t.getProgressPercentage(o)),l.tempProgressPercentage>l.latestProgress&&l.tempProgressPercentage<100&&(l.latestProgress=l.progressPercentage||l.tempProgressPercentage,l.progressPercentage=l.tempProgressPercentage,l.progress=l.progressPercentage+"%"),t.updateFinished?(l.progress="100%",i(function(){e(!1)},500)):i(function(){n()},1e3)})}var l=this;l.latestProgress=0,n()}angular.module("app.maintenance").controller("MaintenancePurgeProgressController",e),e.$inject=["close","modalInput","webservice","$timeout","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i){function o(){t(!0)}function n(){t(!1)}var l=this;l.length=a,l.confirm=o,l.cancel=n,l.message=i.getLocalizedCustomWithVariables("You are about to purge {{length}} candidate(s) permanently. Are you sure you want to continue ? This operation cannot be undone.",{length:l.length})}angular.module("app.pim").controller("MaintenancePurgeCandidateConfirmationController",e),e.$inject=["$scope","close","length","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){i.show(),a.getPermissions().then(function(e){e.maintenance_purge_employee_records&&e.maintenance_purge_employee_records.read?r.call("defaultAuthenticationSettings","GET",[]).then(function(t){b.authenticationSettings=t.data.meta,b.permissions=e.maintenance_purge_employee_records,h(),g(),i.hide()}):(i.hide(),t.go("403"))})}function p(t){if(e.$broadcast("schemaFormValidate"),b.currentEmployee=null,b.currentEmployeePhoto=null,t.$valid&&b.permissions.read&&b.model.selectedEmployee){var a={filter:{id:[b.model.selectedEmployee.empNumber],size:"big"}};i.show(),r.call("employeePhotos","GET",[],a).then(function(e){var t=e.data.data[0];v(b.model.selectedEmployee),b.currentEmployeePhoto=t,b.currentEmployee=b.model.selectedEmployee})["finally"](function(){i.hide()})}}function f(t){e.$broadcast("schemaFormValidate"),b.currentEmployee=null,b.currentEmployeePhoto=null,t.$valid&&b.permissions.read&&(i.show(),m.verifyPassword(b.verifyPasswordModel).then(function(e){var t=e.data.success;t?b.verified=!0:n.errorToast("Incorrect password")})["finally"](function(){i.hide()}))}function g(){if(b.schema={type:"object",readonly:!0,properties:{selectedEmployee:{title:"Past Employee",type:"object",idsToSkip:[]}}},b.form=[{type:"section",htmlClass:"row",items:[{key:"selectedEmployee",type:"maintenance-auto-complete-only-deleted-and-terminated",htmlClass:"col s12 m5 l5",placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",requireSelection:!0,includePast:!0}]}],b.model={selectedEmployee:null},b.permissions.read){b.schema.readonly=!1;var e={type:"section",htmlClass:"row form-buttons",items:[{htmlClass:"right",type:"submit",title:"Search"}]};b.form.push(e)}}function h(){b.verifyPasswordSchema={type:"object",properties:{consent:{title:"I understand that purging records will delete data permanently",type:"boolean"},currentPassword:{title:"Password",type:"string"}},required:["consent","currentPassword"]},b.verifyPasswordForm=[{type:"section",htmlClass:"row",items:[{htmlClass:"col s12 m12 l12",type:"checkbox",key:"consent",onChange:function(e){b.confirmButtonClass=e?"":"disabled",h()}},{key:"currentPassword",type:"password",htmlClass:"col s12 m12 l12",condition:"!vm.authenticationSettings.samlEnabled && !vm.authenticationSettings.openIdEnabled",validationMessage:{302:n.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row form-buttons",items:[{htmlClass:"right",type:"submit",title:"Confirm",style:b.confirmButtonClass}]}]}function v(e){if(b.currentEmployeeSchema={type:"object",readonly:!1,properties:{first_name:{title:"First Name",type:"string"},middle_name:{title:"Middle Name",type:"string"},last_name:{title:"Last Name",type:"string"},employee_id:{title:"Employee Id",type:"string"}}},b.currentEmployeeForm=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l4",key:"first_name",readonly:!0},{type:"text",htmlClass:"col s12 m12 l4",key:"middle_name",readonly:!0},{type:"text",htmlClass:"col s12 m12 l4",key:"last_name",readonly:!0},{type:"text",htmlClass:"col s12 m12 l4",key:"employee_id",readonly:!0}]}],b.currentEmployeeModel={first_name:e.firstName,middle_name:e.middleName,last_name:e.lastName,employee_id:e.employeeId},b.permissions["delete"]){var t={type:"section",htmlClass:"row form-buttons",items:[{htmlClass:"right",type:"submit",title:"Purge"}]};b.currentEmployeeForm.push(t)}}function y(a){a&&s.showModal({templateUrl:"app/maintenance/purge_employee_records/purge_confirmation.html",controller:"MaintenancePurgeConfirmationController",controllerAs:"modal"}).then(function(o){$(o.element).openModal(),o.close.then(function(o){o===!0&&(i.show(),c.purgeEmployeeByEmpNumber(a.empNumber).then(function(t){var a=t.data.success;a?(n.successToast("Successfully Purged"),b.currentEmployee=null,b.currentEmployeePhoto=null,b.model.selectedEmployee={},e.$broadcast("angucomplete-alt-with-employee-id:clearInput")):n.errorToast("Failed to Purge")},function(e){t.go("403")})["finally"](function(){i.hide()}))})})}var b=this;b.purgeEmployee=y,b.permissions={read:!1},b.verified=!1,b.currentEmployee=null,b.currentEmployeePhoto=null,b.onSubmit=p,b.submitPassword=f,b.confirmButtonClass="disabled",b.verifyPasswordModel={consent:!1,currentPassword:""},u()}angular.module("app.maintenance").controller("MaintenanceEmployeeRecordsController",e),e.$inject=["$scope","$state","datagroupPermissions","loader","maintenanceConfigurationService","localizedMessages","employeeService","webservice","ModalService","maintenancePurgeEmployeeService","$sessionStorage","maintenanceVerifyPasswordService"]}(),function(){"use strict";function e(e,t){function a(){t(!0)}function i(){t(!1)}var o=this;o.confirm=a,o.cancel=i}angular.module("app.pim").controller("MaintenancePurgeConfirmationController",e),e.$inject=["$scope","close"]}(),function(){"use strict";function e(e){function t(t){return e.call("maintenanceConfigurations","PATCH",t)}function a(){return e.call("maintenanceConfigurations","GET",[],{})}var i={fetchMaintenanceConfigurations:a,updateMaintenanceConfigurations:t};return i}angular.module("app.maintenance").service("maintenanceConfigurationService",e),e.$inject=["webservice"]}(),function(){"use strict";function e(e,t,a,i){function o(e){return t.call("maintenancePurgeEmployee/"+e,"DELETE",[],{})}function n(e){var a={ids:e};return t.call("maintenancePurgeCandidate","DELETE",a,{})}function l(i){return e(function(e,o){a.showModal({templateUrl:"app/pim/bulkUpdate/progress_modal.html",controller:"MaintenancePurgeProgressController",controllerAs:"modal",inputs:{modalInput:i}}).then(function(a){t.call("progress","POST",[],{name:"candidatePurge"}).then(function(){$(a.element).openModal({dismissible:!1}),e(),a.close.then(function(){$(a.element).closeModal(),t.call("progress","DELETE",[],{name:"candidatePurge"})})})})})}var r={purgeEmployeeByEmpNumber:o,purgeCandidatesById:n,openPurgeProgressModal:l};return r}angular.module("app.maintenance").service("maintenancePurgeCandidateService",e),e.$inject=["$q","webservice","ModalService","loader"]}(),function(){"use strict";function e(e){function t(t){return e.call("maintenancePurgeEmployee/"+t,"DELETE",[],{})}var a={purgeEmployeeByEmpNumber:t};return a}angular.module("app.maintenance").service("maintenancePurgeEmployeeService",e),e.$inject=["webservice"]}(),function(){"use strict";function e(e){function t(t){return e.call("maintenanceVerifyPassword","PATCH",t,{})}var a={verifyPassword:t};return a}angular.module("app.maintenance").service("maintenanceVerifyPasswordService",e),e.$inject=["webservice"]}(),function(){"use strict";function e(){return function(e){if(e){var t=e.split(":");return t[0]+":"+t[1]}return e}}angular.module("app.management-tools").filter("hourAndMinuteFilter",e),e.$inject=[]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){function m(){return c.$broadcast("markMenuItemAsCurrent",{href:"/client/#/noncore/managementtool_notship/viewScheduledCronTasks"}),l.getPermissions().then(function(e){return a.show(),e.test_emulator&&e.test_emulator.read?(y.permissions=e.test_emulator,u()):void t.go("403")})["finally"](function(){a.hide()})}function u(){var e=[];return e.push(i.call("countryBasedLeaveAccrualSchedule","GET",[])),o.all(e).then(function(e){s.setForcedTitle(["Management Tools","Scheduled Tasks","Country Based Accrual Schedule"]),c.$broadcast("addTopMenuBackButton",{href:d.clientBase+"#/noncore/managementtool_notship/viewScheduledCronTasks",tooltip:"Scheduled Tasks"}),y.accrualScheduleData=e[0].data.data,y.serverTimeZone=e[0].data.meta.server_time_zone,v(),0===y.accrualScheduleData.length&&n.infoToast("No Records Found")})}function p(e){return r.showModal("app/management_tools/leave_accrual_schedule/management-tools.edit-country-based-accrual-schedule-modal.html","EditCountryBasedAccrualScheduleController","modal",{countryBasedLeaveAccrualSchedule:e,serverTimeZone:y.serverTimeZone}).then(function(t){t&&(e.schedule_id=t.id,e.accrual_time=t.accrual_time,e.carry_forward_time=t.carry_forward_time)})}function f(e){if(e.schedule_id){var t="You are about to delete the accrual schedule. Are you sure you want to continue?";r.showDeleteConfirmationModal(t).then(function(t){t===!0&&g(e.schedule_id)})}}function g(e){var t={data:[e]};return a.show(),i.call("countryBasedLeaveAccrualSchedule","DELETE",t,{}).then(function(t){n.showLocalizedToast("deleteSuccess"),h(e)},function(){n.errorToast("Failed to Delete")})["finally"](function(){a.hide()})}function h(e){var t=_.find(y.accrualScheduleData,{schedule_id:e});t.schedule_id=null,t.accrual_time=null,t.carry_forward_time=null}function v(){var e=[{name:"country",lable:"Country",getter:"country_name",style:function(e){var t="";return null===e.schedule_id&&(t={color:"red"}),t}},{name:"scheduledTime",lable:n.getLocalizedCustom("Accrual Time"),getter:"accrual_time",filters:[{name:"hourAndMinuteFilter"}],"class":"right-align"},{name:"carryForwardTime",lable:n.getLocalizedCustom("Carry Forward Time"),getter:"carry_forward_time",filters:[{name:"hourAndMinuteFilter"}],"class":"right-align"}],t=[{},{}],a=[{"class":"edit_item center-align",icon:"ohrm_edit",clickAction:"editAccrualSchedules",tooltip:"Edit"},{"class":"left-align",icon:"clear",clickAction:"deleteAccrualSchedule",tooltip:"Delete Accrual Schedule",hideIf:function(e){return e.schedule_id}}];y.listData={accrualSchedule:{selectable:!1,selected:[],idGetter:"country_code",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:y.permissions,listActions:[],pagination:!1,columnWidths:["40%","25%","25%","5%","5%"]}}}var y=this;y.pageSize=50,y.page=1,y.lastPage=0,y.totalDataCount=0,y.dataInCurruntPage=0,y.serverTimeZone="",y.editAccrualSchedules=p,y.deleteAccrualSchedule=f,m()}angular.module("app.management-tools").controller("CountryBasedAccrualScheduleController",e),e.$inject=["$scope","$state","loader","webservice","$q","localizedMessages","datagroupPermissions","modalHelperService","titleService","$rootScope","LOGIN"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){g(r)}function f(t){if(e.$broadcast("schemaFormValidate"),t.$valid){a.show();var o,n=b.model.schedule_id,l={},r="countryBasedLeaveAccrualSchedule",s="saveSuccess";b.model.accrual_carryforward_sametime&&(b.model.carry_forward_time=b.model.accrual_time),n?(o="PATCH",r+="/"+n,s="updateSuccess",l={accrual_time:b.model.accrual_time,carry_forward_time:b.model.carry_forward_time}):(o="POST",s="saveSuccess",l={country_code:b.model.country_code,accrual_time:b.model.accrual_time,carry_forward_time:b.model.carry_forward_time}),i.call(r,o,l,{}).then(function(e){a.hide(),m.showLocalizedToast(s),u(e.data.data)},function(){a.hide(),d.error("Failed to Save"),u(!1)})["finally"](function(){a.hide()})}}function g(e){b.schema={type:"object",title:"countryBasedLeaveAccrualSchedule",properties:{country_name:{title:"Country Name",type:"string",readOnly:!0},accrual_time:{title:"Accrual Time",type:["null","string"]},accrual_carryforward_sametime:{title:"Process carry forward immediately after accrual",type:"boolean"},carry_forward_time:{title:"Carry Forward Time",type:["null","string"]}},required:[]},b.schema.required.push("accrual_time"),b.schema.required.push("carry_forward_time"),b.form=[{type:"row",items:[{type:"text",htmlClass:"col-12",key:"country_name",readOnly:!0},{type:"checkbox",htmlClass:"col-12",key:"accrual_carryforward_sametime",onChange:function(){h()}},{type:"text",htmlClass:"col-6",key:"accrual_time",onChange:function(){h()},readOnly:!0,validationMessage:{timeFormat24HourMinuteValidation:m.getLocalizedCustom("Should be a valid time in HH:MM format")},$validators:{timeFormat24HourMinuteValidation:c.timeFormat24HourMinuteValidation.validator}},{type:"text",htmlClass:"col-6",key:"carry_forward_time",onChange:function(){h()},readOnly:!0,condition:"!model.accrual_carryforward_sametime",validationMessage:{timeFormat24HourMinuteValidation:m.getLocalizedCustom("Should be a valid time in HH:MM format"),carryForwardShouldBeOneHourAfterAccrual:m.getLocalizedCustom("Carry Forward Time should be at least one hour later than the Accrual Time")},$validators:{timeFormat24HourMinuteValidation:c.timeFormat24HourMinuteValidation.validator}}]}],b.schema.required.length>0&&l.addRequiredMessage(b.form),b.model={country_code:e.country_code,country_name:e.country_name,schedule_id:e.schedule_id,accrual_time:v(e.accrual_time),carry_forward_time:v(e.carry_forward_time)},b.model.accrual_carryforward_sametime=b.model.accrual_time===b.model.carry_forward_time}function h(){var t=b.model.accrual_time,a=b.model.carry_forward_time;b.model.accrual_carryforward_sametime;e.$broadcast("schemaForm.error.carry_forward_time","carryForwardShouldBeOneHourAfterAccrual",!0),n(function(){if(!b.model.accrual_carryforward_sametime&&"undefined"!=typeof t&&"undefined"!=typeof a){var i=t.split(":"),o=moment().hours(i[0]).minutes(i[1]).seconds(0).milliseconds(0),n=a.split(":"),l=moment(o).hours(n[0]).minutes(n[1]),r=moment.duration(l.diff(o)).asHours();r<1&&e.$broadcast("schemaForm.error.carry_forward_time","carryForwardShouldBeOneHourAfterAccrual",!1)}})}function v(e){if(!e)return e;var t=e.split(":");return t[0]+":"+t[1]}function y(){u(!1)}var b=this;b.save=f,b.cancel=y,b.serverTimeZone=s,b.schema={},b.form=[],b.model={},p()}angular.module("app.management-tools").controller("EditCountryBasedAccrualScheduleController",e),e.$inject=["$scope","$state","loader","webservice","$q","$timeout","formHelper","countryBasedLeaveAccrualSchedule","serverTimeZone","formValidationHelper","toast","localizedMessages","close"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"management_tools",config:{"abstract":!0,url:"/management_tools",template:"<ui-view/>"}},{state:"management_tools.country_based_accrual_schedule",config:{url:"/country_based_accrual_schedule",views:{"":{templateUrl:"app/management_tools/leave_accrual_schedule/management-tools.country-based-accrual-schedule.html",controller:"CountryBasedAccrualScheduleController",controllerAs:"vm"}},data:{}}}]}angular.module("app.management-tools").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"news",config:{"abstract":!0,url:"/news",template:"<ui-view/>"}},{state:"news.news_list",config:{url:"/news_list",views:{"":{templateUrl:"app/news/newsList/news_list.html",controller:"NewsListController",controllerAs:"vm"},"navbar@":{templateUrl:"app/news/newsList/news_list_navbar.html",controller:"NewsListNavbarController",controllerAs:"navbar"}}}},{state:"news.news_list.news",config:{url:"/:newsId",params:{newsId:null}}}]}angular.module("app.news").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e){function t(){e.$broadcast("filter",[])}var a=this;a.filter=t}angular.module("app.admin").controller("NewsListNavbarController",e),e.$inject=["$rootScope"]}(),function(){"use strict";function e(e,t,a,i){function o(){n()}function n(){c.schema={type:"object",properties:{status:{title:0==a?"Show Archived":"Show Published",type:"boolean"},acknowledgement:{title:"Acknowledgement Status",type:"integer","enum":d.acknowledgement["enum"]}}},c.form=[{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l6 input-field",key:"status"},{type:"select",htmlClass:"col s12 m12 l6",key:"acknowledgement",emptyOption:!1,titleMap:d.acknowledgement.titleMap}]}]}function l(){e(c.filter)}function r(){e(!1)}function s(){c.filter={},l()}var c=this;c.search=l,c.cancel=r,c.reset=s;var d={acknowledgement:t.getEnumAndTitleMapForSelect([{name:"All",value:0},{name:"Acknowledged",value:1},{name:"Pending Acknowledgement",value:2}],{name:"name",value:"value"})};c.filter={status:!1,acknowledgement:i},o()}angular.module("app.news").controller("NewsSearchController",e),e.$inject=["close","formHelper","archievedScreen","currentAcknowledgement"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s){function c(e){n.show(),g.page=e,g.newsId=void 0;var a={include:"attachments,acknowledgement,summaryDescription",filter:g.filter,"page[page]":g.page,"page[limit]":g.pageSize};return g.newsConfiguration={fetchItem:function(e){var a={ids:[e]},i={include:"attachments,acknowledgement,detailedDescription",filter:a};return t.call("news/my","GET",[],i).then(function(e){return e.data.data[0]})}},t.call("news/my","GET",[],a).then(function(e){g.newsList=e.data.data,0==g.newsList.length&&o.infoToast("No Records Found"),g.total=e.data.meta.total,n.hide()})}function d(e){g.pageSize=e,c(1)}function m(e){c(e)}function u(){var e=!1;a.showModal({templateUrl:"app/news/newsList/news_search.html",controller:"NewsSearchController",controllerAs:"searchModal",inputs:{archievedScreen:g.archievedScreen,currentAcknowledgement:g.filter.acknowledgement}}).then(function(t){$(t.element).openModal({complete:function(){e||t.controller.cancel()}}),t.close.then(function(t){e=!0,t!==!1&&(p(t),c(1))})})}function p(e){void 0===e.status&&void 0===e.acknowledgement?(g.filter={status:{0:2},acknowledgement:0},g.archievedScreen=!1,i.setForcedTitle("Published News")):g.filter={status:{0:f(e.status)},acknowledgement:e.acknowledgement}}function f(e){var t=null;return 1==g.archievedScreen&&1==e?(g.archievedScreen=!1,t=2,i.setForcedTitle("Published News")):1==g.archievedScreen&&0==e?(t=3,i.setForcedTitle("Archived News")):0==g.archievedScreen&&1==e?(g.archievedScreen=!0,t=3,i.setForcedTitle("Archived News")):0==g.archievedScreen&&0==e&&(t=2,i.setForcedTitle("Published News")),t}var g=this;e.$on("filter",u),g.changePageSize=d,g.viewPage=m,g.pageSize=50,g.page=1,g.total=0,g.newsList=[],g.filter={status:{0:2},acknowledgement:0},g.archievedScreen=!1,g.newsId=void 0,s.getSetting("page_size").then(function(e){i.setForcedTitle(["Employee Management","Announcements"]),e&&(g.pageSize=e),c(1).then(function(){l.newsId&&(g.newsList.some(function(e){return e.id===l.newsId})?g.newsId=l.newsId:r.go("404"))})})}angular.module("app.news").controller("NewsListController",e),e.$inject=["$scope","webservice","ModalService","titleService","localizedMessages","loader","$stateParams","$state","settingsService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p){function f(t,a){var i=t.location.href.toString().replace("index.php/","");if(i.indexOf("client/#/")===-1){var n,s=o.baseUrl.replace("index.php/","");n="/"==s?i.replace("https://","").replace("http://","").split(/\/(.+)/):i.split(s);var c=e.location.href.toString(),d=c.split("client/#/"),m=d[0]+"client/#/noncore/"+n[1];a?(e.history.replaceState({url:"/noncore/"+n[1]},e.document.title,e.location.href.toString()),r.$applyAsync(function(){l.title=t.document.title})):c.indexOf(m)==-1&&e.history.pushState({url:"/noncore/"+n[1]},t.document.title,m)}}function g(){r.$evalAsync(function(){l.showContentLoader?(v.showIframe=!1,u.setNonCoreMode(!1),s.showContentLoader()):(u.setNonCoreMode(!0),v.showIframe=!0,s.show())})}function h(){r.$evalAsync(function(){var e=[];$("#noncoreIframe").contents().find("#topbar .topbar-title .page-title > div").each(function(){e.push($(this).text())}),e.length>0&&p.setForcedTitle(e),v.showIframe=!0,s.hideContentLoader(),s.hide()}),u.isNonCoreMode()||m(function(){u.setNonCoreMode(!0)},100)}var v=this;v.showIframe=!1;var y=u.getIframeUrl();g(),v.url=i.trustAsResourceUrl(y);var b=0;v.onIframeLoad=function(e){if(g(),b++,l.noneCoreStateForceReload)return l.noneCoreStateForceReload=void 0,void h();var t=e.currentTarget.contentWindow;f(t,1==b);var a=t.preloaderOption;$(t).on("beforeunload",function(){l.showContentLoader=u.showContentLoaderForUrlPath(t.location.pathname),!l.showContentLoader||a&&a.pageTransition===!1?(r.$evalAsync(function(){u.setNonCoreMode(!0)}),a&&("undefined"==typeof a.pageTransition||a.pageTransition)&&g()):g()}),"function"==typeof t.afterLoadingAsIframe&&t.afterLoadingAsIframe(),l.$apply(),h()},e.onpopstate=function(e){e.state&&e.state.url?angular.forEach(a.get(),function(t){var i=t.$$state(),o=i.url.exec(e.state.url);o&&(l.noneCoreStateForceReload=!0,
a.go(t.name,o,{reload:l.prevStateNoneCore,location:!1}))}):t.path()!="/noncore"+i.valueOf(v.url)&&angular.forEach(a.get(),function(e){var i=e.$$state(),o=i.url.exec(t.path());!o||"noncore"!=e.name&&"noncore.WithParams"!=e.name||(l.noneCoreStateForceReload=!0,m(function(){a.go(e.name,o,{reload:!0,location:!1})}))})}}angular.module("app.noncore").controller("NonCoreController",e),e.$inject=["$window","$location","$state","$sce","LOGIN","$stateParams","$rootScope","$scope","loader","datagroupPermissions","settingsService","$timeout","noncoreService","titleService"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"noncore",config:{url:"/noncore/{module}/{action}",templateUrl:"app/noncore/nonecore.html",controller:"NonCoreController",controllerAs:"vm",params:{module:{dynamic:!0},action:{dynamic:!0}}}},{state:"noncore.WithParams",config:{url:"/{urlExtras:.*}",templateUrl:"app/noncore/nonecore.html",controller:"NonCoreController",controllerAs:"vm",params:{urlExtras:{dynamic:!0}}}}]}angular.module("app.noncore").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,a,i){function o(){return i.noncore}function n(e){e?("noncore"===a.current.name||"noncore.WithParams"===a.current.name)&&t.module&&t.action&&(i.noncore=!0):i.noncore=!1}function l(){return e.baseUrl+s()}function r(){return e.baseUrl+"client/#/noncore/"+s()}function s(){var e=t.module+"/"+t.action;return t.urlExtras&&("/"!=e.substr(e.length-1)&&"/"!=t.urlExtras.substr(0,1)&&(e+="/"),e+=t.urlExtras),e}function c(){return m.indexOf(t.module)!=-1}function d(t){var a=new RegExp("^"+e.baseUrl+"/*"),i=t.replace(a,""),o=i.split("/");if(o.length>0){var n=o[0];return m.indexOf(n)!=-1}return!1}var m=["recruitment"],u={isNonCoreMode:o,setNonCoreMode:n,getIframeUrl:l,getAngularUrl:r,showContentLoader:c,showContentLoaderForUrlPath:d};return u}angular.module("app.noncore").factory("noncoreService",e),e.$inject=["LOGIN","$stateParams","$state","$rootScope"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h){function v(){u(function(){o.show()});var e={appraisalCycle:b(),appraisalCycleEmployees:i.call("appraisalCycle/"+p.appraisalCycleId+"/employees","GET",[],{})};r.all(e).then(function(e){x.appraisalCycle=e.appraisalCycle,x.appraisalCycleEmployees=e.appraisalCycleEmployees.data.data,"object"!=typeof x.appraisalCycle&&a.go("performance.appraisal_cycles"),y(),o.hide(),w()},function(e){o.hide(),a.go("403")})}function y(){t.$broadcast("markMenuItemAsCurrent",{stateName:"performance.appraisal_cycles"}),m.setForcedTitle(["Performance","Appraisals","Appraisal Cycles",x.appraisalCycle.name]),t.$broadcast("addTopMenuBackButton",{uiSref:"performance.manage_appraisal_cycle({appraisalCycleId: "+p.appraisalCycleId+", warningMsg: null})",tooltip:"Manage Appraisal Cycle"})}function b(){var e={include:"location"};return i.call("appraisalCycle/"+p.appraisalCycleId,"GET",[],e).then(function(e){var t=h.getWorkflowManager(e.data.meta.allowedActions,e.data.meta.states);return t.isActionAllowed(e.data.data.stateId,"Save")||a.go("403"),e.data.data})}function C(){var e={required_permissions:{data_group:{name:"Appraisal Cycle",permissions:{canRead:1}}}};return i.call("employees/locations","GET",[],e)}function w(){var e=!1,t={locations:C()};r.all(t).then(function(t){e=f.getLocationsListForHierarchicalMultiSelect(t.locations.data.data),x.locationFormData=e["enum"].length>0&&e})}function _(){a.go("performance.manage_appraisal_cycle",{appraisalCycleId:p.appraisalCycleId,warningMsg:null})}function S(e){return c.getLocalizedCustom("Add Selected to Cycle")}function D(e){return o.show(),i.call("appraisalCycle/"+x.appraisalCycle.id+"/employees","POST",{ids:e},{}).then(function(e){e.data.success?(o.hide(),c.successToast("Successfully Saved"),a.go("performance.manage_appraisal_cycle",{appraisalCycleId:x.appraisalCycle.id,warningMsg:null})):(o.hide(),a.go("performance.manage_appraisal_cycle",{appraisalCycleId:x.appraisalCycle.id,warningMsg:e.data.messages.error}))},function(e){o.hide(),c.errorToast("Failed to Save")})}function T(e){return i.call("appraisalCycle/"+p.appraisalCycleId+"/includibleEmployees","GET",[],e).then(function(e){return{data:e.data.data,total:e.data.meta.total}})}p.appraisalCycleId||a.go("performance.appraisal_cycles");var x=this;m.setTitle("Appraisal Cycles - Add Employees"),x.appraisalCycle=null,x.onCancel=_,x.onEmployeeSelect=D,x.getEmployeeSelectButtonLabel=S,x.submitButtonLabel="Add Selected to Cycle",x.cancelButtonLabel="Cancel",x.employeeGetter=T,v()}angular.module("app.performance").controller("AddAppraisalCycleEmployeesController",e),e.$inject=["$scope","$rootScope","$state","webservice","loader","settingsService","datagroupPermissions","$q","modalHelperService","localizedMessages","$window","titleService","$timeout","$stateParams","formHelper","widgetChoiceHelper","performanceAppraisalCycleService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v){function y(){var e={checkDataGroupPermissions:P(),operationalCountryLocationHierarchy:N(),reportingMethods:O(),appraisalTemplates:R(),performanceEvaluatorGroups:z()};p?e.appraisalCycle=$():(e.loggedInEmployee=j(),e.finalRatingSource=V()),a.all(e).then(function(e){p?B.appraisalCycle=e.appraisalCycle:(b(),B.loggedInEmployee=e.loggedInEmployee,B.finalRatingSource=e.finalRatingSource),B.reportingMethods=e.reportingMethods.data.data,B.appraisalTemplates=e.appraisalTemplates.data.data,B.accessibleAllLocations=e.operationalCountryLocationHierarchy.data.meta.accessibleAllOptions,B.operationalCountryLocations=g.getOperationalCountryLocationDropDown(e.operationalCountryLocationHierarchy.data.data.options,!B.accessibleAllLocations),B.hasMainEvaluator=C(e.performanceEvaluatorGroups.data.data),w(),S()},function(e){t.go("403")})["finally"](function(){m(function(){B.isPageLoaded=!0},1e3)})}function b(){p||(o.$broadcast("markMenuItemAsCurrent",{stateName:"performance.appraisal_cycles"}),h.setForcedTitle(["Performance","Appraisals","Appraisal Cycles"]),o.$broadcast("addTopMenuBackButton",{uiSref:"performance.appraisal_cycles",tooltip:"Appraisal Cycles"}))}function C(e){for(var t in e)if(e.hasOwnProperty(t)&&"1"===t)return!0;return!1}function w(){if(B.formData={locations:c.getEnumAndTitleMapForSelect(B.operationalCountryLocations,{name:"name",value:"value"}),mainEvaluatorSource:c.getEnumAndTitleMapForSelect([{name:"Name",value:"1"},{name:"Supervisor with Reporting Method",value:"2"}],{name:"name",value:"value"}),reportingMethods:c.getEnumAndTitleMapForSelect(B.reportingMethods,{name:"name",value:"id"}),appraisalTemplates:c.getEnumAndTitleMapForSelect(B.appraisalTemplates,{name:"name",value:"id"})},p)B.appraisalCycle&&B.appraisalCycle.templateId&&D(B.appraisalCycle.templateId)&&(H=!0,0!=B.appraisalCycle.stateId&&B.formData.appraisalTemplates["enum"].push(B.appraisalCycle.templateId));else{var e=_.find(B.appraisalTemplates,{isDefault:!0});e&&(q=e.id)}}function S(){B.model=T(),B.schema={type:"object",title:"Add Appraisal Cycle",properties:{cycleName:{title:"Cycle Name",type:"string",maxLength:255},location:{title:"Location",type:"string","enum":B.formData.locations["enum"]},fromDate:{title:"From Date",type:["null","object"],datePickerConfig:{selectMonths:!0,selectYears:10}},toDate:{title:"To Date",type:["null","object"],datePickerConfig:{selectMonths:!0,selectYears:10}},dueDate:{title:"Due Date",type:["null","object"],datePickerConfig:{selectMonths:!0,selectYears:10}},mainEvaluatorSource:{title:"Select Main Evaluator By",type:"string","enum":B.formData.mainEvaluatorSource["enum"]},mainEvaluator:{title:"Main Evaluator Name",type:"object"},reportingMethod:{title:"Reporting Method",type:"string","enum":B.formData.reportingMethods["enum"]},appraisalTemplate:{title:"Template",type:"string","enum":B.formData.appraisalTemplates["enum"]}},required:["cycleName","fromDate","toDate","dueDate","appraisalTemplate"]},B.finalRatingSource===B.mainEvaluatorsConfigValue&&(B.schema.required.push("mainEvaluator"),B.schema.required.push("reportingMethod")),B.form=[{type:"row",items:[{type:"text",htmlClass:"col-6",key:"cycleName",placeholder:l.getLocalizedCustom("Cycle Name"),removePristine:B.isPageLoaded,$validators:{requiredForDirty:function(e){return r.requiredForDirty.validator(B.isPageLoaded?e:void 0,!1)}},validationMessage:{requiredForDirty:r.requiredForDirty.message,201:r.textLengthExceedValidation.message(B.schema.properties.cycleName.maxLength)}},{type:"select",htmlClass:"col-6",key:"location",emptyOption:!1,titleMap:B.operationalCountryLocations,condition:function(){var e=B.operationalCountryLocations.length>0;return p?e&&B.appraisalCycle.createdByAdmin:e}}]},{type:"row",items:[{type:"date",htmlClass:"col-3",key:"fromDate",placeholder:l.getLocalizedCustom("From Date"),onChange:function(t){t&&B.model.toDate&&(t.getTime()<=B.model.toDate.getTime()?(e.$broadcast("schemaForm.error.toDate","toDate",!0),e.$broadcast("schemaForm.error.toDate","schemaForm",!0)):e.$broadcast("schemaForm.error.toDate","toDate",!1))},defaultDate:B.model.fromDate,ngModelOptions:{allowInvalid:!0},resetDefaultDate:B.resetDefaultDate,$validators:{fromDate:function(e){return r.beforeDate.validator(e,B.model.toDate)}},validationMessage:{fromDate:r.beforeDate.message}},{type:"date",htmlClass:"col-3",key:"toDate",placeholder:l.getLocalizedCustom("To Date"),onChange:function(t){t&&B.model.fromDate&&(B.model.fromDate.getTime()<=t.getTime()?(e.$broadcast("schemaForm.error.fromDate","fromDate",!0),e.$broadcast("schemaForm.error.fromDate","schemaForm",!0)):e.$broadcast("schemaForm.error.fromDate","fromDate",!1)),t&&B.model.dueDate&&(t.getTime()<=B.model.dueDate.getTime()?(e.$broadcast("schemaForm.error.dueDate","dueDate",!0),e.$broadcast("schemaForm.error.dueDate","schemaForm",!0)):e.$broadcast("schemaForm.error.dueDate","dueDate",!1))},defaultDate:B.model.toDate,ngModelOptions:{allowInvalid:!0},resetDefaultDate:B.resetDefaultDate,$validators:{toDate:function(e){return r.toDate.validator(e,B.model.fromDate)}},validationMessage:{toDate:r.afterDate.message}},{type:"date",htmlClass:"col-3",key:"dueDate",placeholder:l.getLocalizedCustom("Due Date"),defaultDate:B.model.dueDate,ngModelOptions:{allowInvalid:!0},resetDefaultDate:B.resetDefaultDate,$validators:{dueDate:function(e){return r.toDate.validator(e,B.model.toDate)}},validationMessage:{dueDate:l.getLocalizedCustom("Due date should be after to date")}}]},{type:"row",items:[{type:"row",htmlClass:"col-9 radiobuttons-group",condition:function(){return B.hasMainEvaluator},items:[{type:"radiobuttons",htmlClass:"col-12 mainEvaluatorSourceDiv",key:"mainEvaluatorSource",titleMap:B.formData.mainEvaluatorSource.titleMap,onChange:function(e){B.model.mainEvaluator=void 0,B.model.reportingMethod=""},condition:function(){return B.hasMainEvaluator}},{key:"mainEvaluator",type:"auto-complete",htmlClass:"col-6",placeholder:l.getLocalizedCustom("Select Main Evaluator"),"text-searching":"Searching...","text-no-results":"No results found",employeeDataProvider:G,"input-changed":function(){B.model.mainEvaluator=void 0},removePristine:B.isPageLoaded,condition:function(){return B.hasMainEvaluator&&"1"===B.model.mainEvaluatorSource},$validators:{requiredForDirty:function(e){return r.requiredForDirty.validator(B.isPageLoaded?e:void 0,!1)}},validationMessage:{requiredForDirty:r.requiredForDirty.message}},{type:"select",htmlClass:"col-6",key:"reportingMethod",titleMap:B.formData.reportingMethods.titleMap,removePristine:B.isPageLoaded,ngModelOptions:{allowInvalid:!0},condition:function(){return B.hasMainEvaluator&&"2"===B.model.mainEvaluatorSource},$validators:{requiredForDirty:function(e){return r.requiredForDirty.validator(B.isPageLoaded?e:void 0,!1)}},validationMessage:{requiredForDirty:r.requiredForDirty.message}}]}]},{type:"row",items:[{type:"select",htmlClass:"col-6",key:"appraisalTemplate",readonly:p&&0!=B.appraisalCycle.stateId,emptyOption:!p&&!q||H,titleMap:B.formData.appraisalTemplates.titleMap,removePristine:B.isPageLoaded,$validators:{requiredForDirty:function(e){return r.requiredForDirty.validator(B.isPageLoaded?e:void 0,!1)}},validationMessage:{requiredForDirty:r.requiredForDirty.message}}]}];var t={type:"row",htmlRowClass:"form-buttons-row",items:[{"class":"btn btn-ghost",type:"button",title:B.cancelButtonLabel,onClick:B.onCancel},{"class":"btn btn-secondary",type:"button",title:B.submitButtonLabel,onClick:function(){B.onSubmit()}}]};p||B.form.push(t)}function D(e){return!isNaN(e)&&0==B.appraisalTemplates.filter(function(t){return e===t.id}).length}function T(){return p?(B.appraisalCycle.mainEvaluator.fullName=u.getFullName(B.appraisalCycle.mainEvaluator),{cycleName:B.appraisalCycle.name,location:x(),fromDate:new Date(B.appraisalCycle.fromDate+"T00:00"),toDate:new Date(B.appraisalCycle.toDate+"T00:00"),dueDate:new Date(B.appraisalCycle.dueDate+"T00:00"),mainEvaluatorSource:B.appraisalCycle.reportingMethodId?"2":"1",mainEvaluator:B.appraisalCycle.mainEvaluator&&B.appraisalCycle.mainEvaluator.empNumber?B.appraisalCycle.mainEvaluator:void 0,reportingMethod:B.appraisalCycle.reportingMethodId,appraisalTemplate:!B.appraisalCycle.templateId||D(B.appraisalCycle.templateId)&&0==B.appraisalCycle.stateId?"":B.appraisalCycle.templateId}):{location:B.formData.locations["enum"][0],mainEvaluatorSource:"1",mainEvaluator:o.emp_number?B.loggedInEmployee:void 0,reportingMethod:"",appraisalTemplate:q?q:""}}function x(){var e;return e=B.appraisalCycle.locationId?B.appraisalCycle.locationId:B.appraisalCycle.countryCode?B.formData.locations.titleMap.filter(function(e){return e.name===l.getLocalizedCustom(B.appraisalCycle.country.name)})[0].value:B.formData.locations["enum"][0]}function F(t){k(),e.$broadcast("schemaFormValidate");var a=!1;if(a=p?t.$valid:B.addAppraisalCyclesForm.$valid,a&&(p&&B.permissions.update||!p&&B.permissions.create)){if(E(),p){var i=A();return f(!0),i}return I()}}function k(){r.requiredForDirty.validator(B.model.cycleName,!0)?e.$broadcast("schemaForm.error.cycleName","requiredForDirty",!0):(B.model.cycleName="",e.$broadcast("schemaForm.error.cycleName","requiredForDirty",!1)),B.finalRatingSource!==B.mainEvaluatorsConfigValue||r.requiredForDirty.validator(B.model.mainEvaluator,!0)?e.$broadcast("schemaForm.error.mainEvaluator","requiredForDirty",!0):(B.model.mainEvaluator=void 0,e.$broadcast("schemaForm.error.mainEvaluator","requiredForDirty",!1)),B.finalRatingSource!==B.mainEvaluatorsConfigValue||r.requiredForDirty.validator(B.model.reportingMethod,!0)?e.$broadcast("schemaForm.error.reportingMethod","requiredForDirty",!0):(B.model.reportingMethod=void 0,e.$broadcast("schemaForm.error.reportingMethod","requiredForDirty",!1)),r.requiredForDirty.validator(B.model.appraisalTemplate,!0)?e.$broadcast("schemaForm.error.appraisalTemplate","requiredForDirty",!0):(B.model.appraisalTemplate="",e.$broadcast("schemaForm.error.appraisalTemplate","requiredForDirty",!1))}function E(){B.submittedValues={cycleName:B.model.cycleName,location:B.model.location,fromDate:B.model.fromDate,toDate:B.model.toDate,dueDate:B.model.dueDate,mainEvaluatorSource:B.model.mainEvaluatorSource,mainEvaluator:B.model.mainEvaluator,reportingMethod:B.model.reportingMethod,appraisalTemplate:B.model.appraisalTemplate}}function I(){i.show();var e=M();return s.call("appraisalCycles","POST",e,{}).then(function(e){if(e.data.success){var a=e.data.data.id;return s.call("appraisalCycle/"+a,"GET",[],{}).then(function(o){m(function(){l.successToast("Successfully Saved")});var n=v.getWorkflowManager(o.data.meta.allowedActions,o.data.meta.states);B.permissions.update&&n.isActionAllowed(e.data.data.stateId,"Save")?t.go("performance.add_appraisal_cycle_employees",{appraisalCycleId:a}).then(function(){i.hide()}):t.go("performance.manage_appraisal_cycle",{appraisalCycleId:a,warningMsg:null}).then(function(){i.hide()})})}l.errorToast("Failed to Save"),i.hide()},function(e){l.errorToast("Failed to Save"),i.hide()})}function A(){var e=M();e.action="Save",s.call("appraisalCycle/"+B.appraisalCycle.id,"PATCH",e,{}).then(function(e){e.data.success?l.successToast("Successfully Saved"):l.errorToast("Failed to Save")},function(e){l.errorToast("Failed to Save")})}function M(){var e={name:B.model.cycleName,location:B.model.location?B.model.location:void 0,fromDate:d.convertDateToString(B.model.fromDate),toDate:d.convertDateToString(B.model.toDate),dueDate:d.convertDateToString(B.model.dueDate),mainEvaluatorSource:B.model.mainEvaluatorSource,templateId:B.model.appraisalTemplate};return"1"===B.model.mainEvaluatorSource?(e.mainEvaluatorId=B.model.mainEvaluator?B.model.mainEvaluator.empNumber:void 0,e.reportingMethodId=void 0):"2"===B.model.mainEvaluatorSource&&(e.mainEvaluatorId=void 0,e.reportingMethodId=B.model.reportingMethod?B.model.reportingMethod:void 0),e}function L(){p?f(!1):t.go("performance.appraisal_cycles")}function P(){return n.getPermissions().then(function(e){B.permissions=e["Appraisal Cycle"],(p&&!B.permissions.update||!p&&!B.permissions.create)&&(i.hide(),t.go("403"))})}function $(){var e={include:"location,mainEvaluator"};return s.call("appraisalCycle/"+p,"GET",[],e).then(function(e){return B.finalRatingSource=e.data.meta.finalRatingSource,e.data.data})}function N(){var e={preventSupervisorLocations:"true",preventHODLocations:"true",permissionType:[{type:"data_group",required_permissions:{"Appraisal Cycle":{canRead:1,canCreate:0,canUpdate:0,canDelete:0}}}]};return s.call("operationalCountryLocationHierarchy","GET",[],e)}function O(){return s.call("employeeReportingMethods","GET",[],{})}function R(){return s.call("appraisalTemplates","GET",[],{})}function z(){return s.call("performanceEvaluatorGroups","GET",[],{})}function j(){return o.emp_number?u.getEmployee(o.emp_number).then(function(e){return e.fullName=u.getFullName(e),e}):a.when()}function V(){return s.call("appraisalCycles","GET",[],{limit:1,offset:0}).then(function(e){return e.data.meta.finalRatingSource})}function G(e){var t={employee_name_or_id:e,termination:1},a={filter:t,"page[offset]":0,"page[limit]":50,sort:"fullName"};return s.call("employeeAutoComplete","GET",[],a).then(function(e){for(var t=[],a=0;a<e.data.data.length;a++)e.data.data[a].fullName=u.getFullName(e.data.data[a]),t.push(e.data.data[a]);return t})}var B=this;"function"==typeof p&&(p=p()),B.onSubmit=F,B.onCancel=L,B.editAppraisalCycleDetailsModalTitle="Appraisal Cycles - Edit Cycle Details",B.mainEvaluatorsConfigValue="mainEvaluators",B.model={},B.appraisalCycle={},B.formData={},B.permissions={},B.submittedValues={},B.reportingMethods=[],B.appraisalTemplates=[],B.isPageLoaded=!1,B.accessibleAllLocations=!0,B.operationalCountryLocations=[],B.loggedInEmployee={},B.submitButtonLabel="Save",B.cancelButtonLabel="Cancel",B.addAppraisalCyclesHeading="Appraisal Cycle Details",B.hasMainEvaluator=!0,B.resetDefaultDate={reset:!1},B.addAppraisalCyclesForm=void 0;var q,H=!1;y()}angular.module("app.performance").controller("AddEditAppraisalCycleController",e),e.$inject=["$scope","$state","$q","loader","$rootScope","datagroupPermissions","localizedMessages","formValidationHelper","webservice","formHelper","dateService","$timeout","employeeService","appraisalCycleId","close","widgetChoiceHelper","titleService","performanceAppraisalCycleService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h){function v(){m(function(){o.show()});var e={checkDataGroupPermissions:k(),pageSize:n.getSetting("page_size"),appraisalTemplates:i.call("appraisalTemplates","GET",[],{}),operationalCountryLocationHierarchy:y(),appraisalBulkDownloadLimit:h.fetchAppraisalBulkDownloadLimit()};r.all(e).then(function(e){H.pageSize=e.pageSize,H.appraisalTemplates=e.appraisalTemplates.data.data,H.operationalCountryLocationHierarchyData=e.operationalCountryLocationHierarchy.data,H.downloadAppraisalMaxLimit=e.appraisalBulkDownloadLimit,E(function(){C(),o.hide()})},function(e){o.hide(),a.go("403")})}function y(){var e={preventSupervisorLocations:"true",preventHODLocations:"true",permissionType:[{type:"data_group",required_permissions:{"Appraisal Cycle":{canRead:1,canCreate:0,canUpdate:0,canDelete:0}}}]};return i.call("operationalCountryLocationHierarchy","GET",[],e)}function b(e,t,a){H.orderField=e,H.orderBy=t,H.page=a,E()}function C(){var e,t=[{name:"name",lable:"Appraisal Cycle Name",getter:"name",sortable:!0,sortAction:"sortAction",clickAction:"onClickAppraisalCycle"},{name:"dueDate",lable:"Due Date",getter:"dueDate",sortable:!0,sortAction:"sortAction",clickAction:"onClickAppraisalCycle",formatter:function(e){return p.toLocalizedDate(e)}},{name:"state",lable:"Status",getter:"stateId",type:"oxd-status",sortable:!0,sortAction:"sortAction",formatter:function(e){return H.stateMap[e].state},clickAction:"onClickAppraisalCycle"},{name:"action",lable:"Actions",getter:"stateId",type:"oxd-action-button",allowedActionGetter:function(e){return H.cycleWorkflowManager.getAllowedActions(e,!0)},onPerformListRowAction:j,isDisabled:function(e){return V(e)||B(e)||q(e)},isVisible:function(e){return H.unEditableIds.indexOf(e.id)===-1}},{name:"actionButtons",lable:"",getter:"id","class":"text-center",width:"20%",type:"oxd-action-button-panel",iconButtons:[{id:"delete-button",classes:"btn-list",text:"Delete",tooltip:{text:"Delete"},clickAction:function(e,t,a){N(a)},icon:"ohrm_delete",displayCondition:function(e,t){return H.unDeletableIds&&H.unDeletableIds.indexOf(t.id)===-1}},{id:"download-button",classes:"btn-list",text:"Download",tooltip:{text:"Download Appraisals"},clickAction:function(e,t,a){w(a)},icon:"ohrm_download_icon_oxd",displayCondition:function(e,t){return t.stateId>1}},{id:"edit-button",classes:"btn-list",text:"Edit",tooltip:{text:"Edit"},clickAction:function(e,t,a){R(a)},icon:"edit",iconSize:"1rem",displayCondition:function(e,t){return H.unEditableIds&&H.unEditableIds.indexOf(t.id)===-1&&H.cycleWorkflowManager.isActionAllowed(t.stateId,"Save")}}]}],a=[];e=H.permissions["delete"]?["3%","31%","15%","23%","21%","7%"]:["34%","15%","23%","21%","7%"],H.listDefinition={tableId:"appraisalCycleList_",name:"Appraisal Cycles",listClass:"classic-table hover selectable",selectable:!0,selected:[],idGetter:"id",listFields:t,showColumnsAnyway:!0,permission:H.permissions,columnWidths:e,listActions:a,showSelectableAlways:!1,showLoader:!0,pagination:!0,listSpecificInitialSort:!0,clickableCondition:"id",unselectableIds:_.intersection(H.unDeletableIds,H.unEditableIds),listTopBar:{getMessageForNoOfItemsFound:function(e){return"undefined"!=typeof H.totalDataCount?c.getLocalizedCustomWithVariables("({{number}}) Appraisal Cycle"+(1==H.totalDataCount?"":"s")+" Found",{number:H.totalDataCount}):""},getMessageForNoOfItemsSelected:function(e){return e?c.getLocalizedCustomWithVariables("({{number}}) Appraisal Cycle"+(e>1?"s":"")+" Selected",{number:e}):""},quickSearch:{remoteApiHandler:D,onSearch:T},onFilterOpen:x},leftPanel:{isCompact:!1,toggleable:!1,data:function(){return H.leftPanelData},addButton:{isPermitted:H.permissions&&H.permissions.create,callback:H.onAdd,text:"Create Appraisal Cycle"},activeId:function(){return H.activatedShortcutId}}},H.permissions["delete"]&&(H.listDefinition.listTopBar.onBulkDelete=function(e){$(e)},H.listDefinition.listTopBar.isBulkDeletable=function(e){return 0==_.intersection(e,H.unDeletableIds).length})}function w(e){i.call("appraisalCycle/"+e+"/employees","GET",[],{}).then(function(e){e.data.meta.appraisalIds.length>H.downloadAppraisalMaxLimit?c.warningToast(c.getLocalizedCustomWithVariables("Only {{downloadAppraisalMaxLimit}} appraisals are allowed per download",{downloadAppraisalMaxLimit:H.downloadAppraisalMaxLimit})):g.openAppraisalDownloadModal(!0,e.data.meta.appraisalIds)})}function S(){return Math.ceil(H.totalDataCount/H.pageSize)}function D(e,t){H.cycleSearchString=e;var a={filter:{name:e},offset:"0",limit:"5"};return i.call("appraisalCycles","GET",[],a,t).then(function(e){return e.data.data})}function T(e){"string"==typeof e?(H.filters={name:e},H.cycleSearchString=e,H.activatedShortcutId=1,E()):"object"==typeof e&&(H.filters={id:e.originalObject.id},H.activatedShortcutId=1,E())}function x(t){s.showModal("app/performance/appraisal_cycles/cycle_list/filter-appraisal-cycle.html","FilterAppraisalCycleController","modal",{model:H.filters,appraisalTemplates:H.appraisalTemplates,operationalCountryLocationHierarchyData:H.operationalCountryLocationHierarchyData,clickEvent:t}).then(function(t){"object"==typeof t&&(H.filters=t,H.activePageNo=1,delete H.filters.name,delete H.filters.id,e.$broadcast("angucomplete-alt-oxd:clearInput"),e.$broadcast("clearListQuickSort"),E())})}function F(){var e={filter:{},include:"employeeCount,incompleteAppraisalCount,employeeCountWithoutRequiredEvaluators"};if(H.filters.location&&(e.filter.location=H.filters.location),H.filters.fromDate){var t=p.convertDateToString(H.filters.fromDate);e.filter.fromDate=t}if(H.filters.toDate){var a=p.convertDateToString(H.filters.toDate);e.filter.toDate=a}if(H.filters.mainEvaluator&&(e.filter.mainEvaluatorIds=[H.filters.mainEvaluator.empNumber]),H.filters.template&&(e.filter.templateIds=[H.filters.template]),H.filters.name&&(e.filter.name=H.filters.name),H.filters.id&&(e.filter.ids=[H.filters.id]),H.filters.stateIds){var i=[];H.filters.stateIds.forEach(function(e){i.push(H.stateIds[e])}),e.filter.stateIds=i}return H.orderBy&&H.orderField&&(e.orderBy=H.orderBy,e.orderField=H.orderField),e.limit=H.pageSize,e.offset=H.pageSize*(H.page-1),e}function k(){return l.getPermissions().then(function(e){H.permissions=e["Appraisal Cycle"],H.permissions.read||(o.hide(),a.go("403"))})}function E(e){return H.listData=null,i.call("appraisalCycles","GET",[],F()).then(function(t){H.listData=t.data.data,H.unDeletableIds=t.data.meta.undeletableIds,H.unEditableIds=t.data.meta.uneditableIds,H.finalRatingSource=t.data.meta.finalRatingSource;var a=t.data.meta;H.totalDataCount=a.total,H.lastPage=S(),H.stateIds={},a.states.forEach(function(e){H.stateIds[e.name]=e.stateId}),H.statesWithCount=a.statesWithCount,H.cycleWorkflowManager=f.getWorkflowManager(a.allowedActions,a.states),I(),d.scrollTo(0,0),"function"==typeof e&&e()})}function I(){var e=1,t=0,a=function(e){H.activateShortcut(e.id,e.states),H.activatedShortcutId=e.id};H.leftPanelData=[{id:e,matchingCount:H.totalDataCount,label:"All",classes:"cycle_all_states",states:Object.keys(H.statesWithCount),onClick:a}],Object.keys(H.statesWithCount).forEach(function(i){switch(e++,t+=parseInt(H.statesWithCount[i]),i){case"CREATED":H.leftPanelData.push({id:e,matchingCount:H.statesWithCount[i],label:"Created",classes:"cycle_created_state",states:[i],onClick:a});break;case"APPRAISALS CREATED":H.leftPanelData.push({id:e,matchingCount:H.statesWithCount[i],label:"Appraisals Created",classes:"cycle_appraisal_created_state",states:[i],onClick:a});break;case"ACTIVATED":H.leftPanelData.push({id:e,matchingCount:H.statesWithCount[i],label:"Activated",classes:"cycle_activated_state",states:[i],onClick:a});break;case"CLOSED":H.leftPanelData.push({id:e,matchingCount:H.statesWithCount[i],label:"Closed",classes:"cycle_closed_state",states:[i],onClick:a});break;case"REOPENED":H.leftPanelData.push({id:e,matchingCount:H.statesWithCount[i],label:"Reopened",classes:"cycle_reopened_state",states:[i],onClick:a})}}),H.leftPanelData[0].matchingCount=t}function A(e,t){H.activePageNo=1,H.filters.stateIds=t,H.listData=[],H.selectedIds=[],H.activatedShortcutId=e,E()}function M(){a.go("performance.add_appraisal_cycles")}function L(e,t,a){var n={progressModal:P(a),appraisalCycleUpdate:i.call("appraisalCycle/"+t,"PATCH",{action:e},{}).then(function(e){return e.data.success?a.updateFinished=!0:a.updateCancelled=!0,e})};r.all(n).then(function(t){t.appraisalCycleUpdate.data.success?(H.listData=[],E(),"Create Appraisals"===e?c.successToast("Successfully Created"):"Activate"===e?c.successToast("Successfully Activated"):"Close"===e?c.successToast("Successfully Closed"):"Reopen"===e?c.successToast("Successfully Reopened"):c.successToast("Successfully Updated")):(o.hide(),c.errorToast(t.appraisalCycleUpdate.data.messages.error))},function(e){a.updateCancelled=!0,o.hide(),c.errorToast("Failed to Save")})}function P(e){var t=e.progressModalTitle?e.progressModalTitle:c.getLocalizedCustom("Appraisal Cycle Bulk Update in Progress ..."),a={closeDelay:500,forceCompletionCallback:function(t){return 1==e.updateFinished},forceCancellationCallback:function(t){return 1==e.updateCancelled}};return s.showProgressModal(t,"appraisalCycleStateChange",a)}function $(e){e.length>0&&s.showDeleteConfirmationModal(c.getLocalizedCustom("The selected appraisal cycle(s) will be permanently deleted. Are you sure you want to continue?")).then(function(t){t===!0&&z(e)})}function N(e){s.showDeleteConfirmationModal(c.getLocalizedCustom("The selected appraisal cycle will be permanently deleted. Are you sure you want to continue?")).then(function(t){t===!0&&z([e])})}function O(e){"object"==typeof e&&(e=e.id),a.go("performance.manage_appraisal_cycle",{appraisalCycleId:e,warningMsg:null})}function R(e){"object"==typeof e&&(e=e.id),G(e)}function z(e){e=e?e:H.selectedIds;var t=H.listData;H.listData=null,i.call("appraisalCycles","DELETE",{ids:e},{}).then(function(e){e.data.success?(E(),c.successToast("Successfully Deleted")):(H.listData=t,c.errorToast("Failed to Delete"))},function(e){H.listData=t,c.errorToast("Failed to Delete")})}function j(e,t,a){var i={updateFinished:!1,updateCancelled:!1};if("Create Appraisals"===a){if(V(e))return void c.warningToast("No employees selected to the cycle");if(B(e))return void c.warningToast("Main Evaluator not set for Some Employees");if(q(e))return void c.warningToast("Appraisal cycle template is not set");i.progressModalTitle=c.getLocalizedCustom("Appraisal Creation in Progress ...")}else"Activate"===a?i.progressModalTitle=c.getLocalizedCustom("Appraisal Activation in Progress ..."):"Close"===a?i.progressModalTitle=c.getLocalizedCustom("Closing Appraisal Cycle in Progress ..."):"Reopen"===a?i.progressModalTitle=c.getLocalizedCustom("Reopening Appraisal Cycle in Progress ..."):i.progressModalTitle=c.getLocalizedCustom("Appraisal Bulk Action in Progress ...");return"Close"===a&&e.incompleteAppraisalCount>0?void s.showConfirmationModal(c.getLocalizedCustomWithVariables("The Appraisal Cycle has {{incomplete_count}} incomplete appraisal"+(1==e.incompleteAppraisalCount?"":"s")+". Are you sure you want to close the Appraisal Cycle?",{incomplete_count:e.incompleteAppraisalCount})).then(function(t){t&&L(a,e.id,i)}):L(a,e.id,i)}function V(e){return 0==e.stateId&&0==e.employeeCount}function G(e){s.showModal("app/performance/appraisal_cycles/add_edit_appraisal_cycles/edit-appraisal-cycle.html","AddEditAppraisalCycleController","modal",{appraisalCycleId:e}).then(function(e){e!==!1&&a.go("performance.appraisal_cycles",{},{reload:!0})})}function B(e){return"mainEvaluators"==H.finalRatingSource&&0==e.stateId&&e.employeeCountWithoutRequiredEvaluators>0}function q(e){return 0==e.stateId&&0==H.appraisalTemplates.filter(function(t){return e.templateId===t.id}).length}var H=this;H.onAdd=M,H.onClickAppraisalCycle=O,H.activateShortcut=A,H.downloadAppraisals=w,H.appraisalTemplates=[],H.operationalCountryLocationHierarchyData=[],H.total=0,H.pageSize=50,H.page=1,H.activePageNo=1,H.orderField="dueDate",H.orderBy="DESC",H.cycleSearchString="",H.listDefinition={},H.sortAction=b,H.activatedShortcutId=1,H.downloadAppraisalMaxLimit=100,H.filters={},H.listData=[],H.selectedIds=[],H.leftPanelData=[],H.stateMap=[{state:"Created",action:"Create Appraisals"},{state:"Appraisals Created",action:"Activate"},{state:"Activated",action:"Close"},{state:"Closed",action:"Reopen"},{state:"Reopened",action:"Close"}],H.statesWithCount={CREATED:0,"APPRAISALS CREATED":0,ACTIVATED:0,CLOSED:0,REOPENED:0},H.cycleWorkflowManager={},v()}angular.module("app.performance").controller("PerformanceViewAppraisalCycleListController",e),e.$inject=["$scope","$rootScope","$state","webservice","loader","settingsService","datagroupPermissions","$q","modalHelperService","localizedMessages","$window","$timeout","ModalService","dateService","performanceAppraisalCycleService","AppraisalHelperService","performanceConfigService"];
}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v){function y(){D.accessibleAllLocations=g.meta.accessibleAllOptions,D.operationalCountryLocations=h.getOperationalCountryLocationDropDown(g.data.options,!D.accessibleAllLocations),b(),C()}function b(){D.formData={locations:t.getEnumAndTitleMapForSelect(D.operationalCountryLocations,{name:"name",value:"value"}),templates:t.getEnumAndTitleMapForSelect(f)}}function C(){D.model.location=D.model.location?D.model.location:D.formData.locations["enum"][0],D.schema={type:"object",title:"Filter",properties:{location:{title:"Location",type:"string","enum":D.formData.locations["enum"]},mainEvaluator:{title:"Main Evaluator",type:"object"},fromDate:{title:"Appraisal Period From",type:["null","object"]},toDate:{title:"Appraisal Period To",type:["null","object"]},template:{title:"Template",type:"string","enum":D.formData.templates["enum"]}},required:[]},D.form=[{type:"row",items:[{type:"select",htmlClass:"col-6",key:"location",emptyOption:!1,titleMap:D.operationalCountryLocations,condition:function(){return D.operationalCountryLocations.length>0}},{key:"mainEvaluator",type:"auto-complete",htmlClass:"col-6",placeholder:i.getLocalizedCustom("Select Main Evaluator"),"text-searching":"Searching...","text-no-results":"No results found","input-changed":function(){D.model.mainEvaluator=void 0}}]},{type:"row",items:[{type:"date",htmlClass:"col-6",key:"fromDate",placeholder:i.getLocalizedCustom("From")},{type:"date",htmlClass:"col-6",key:"toDate",placeholder:i.getLocalizedCustom("To"),validationMessage:{toDate:i.getLocalizedCustom("To date should be after From date")},$validators:{toDate:function(e){return u.toDate.validator(e,D.model.fromDate)}}}]},{type:"row",items:[{type:"select",htmlClass:"col-6",key:"template",emptyOption:"All",titleMap:D.formData.templates.titleMap}]}]}function w(e){n(D.model)}function _(){n(!1)}function S(){for(var e in D.initialModel)D.model[e]=D.initialModel[e];n(D.model)}var D=this;D.initialModel={location:null,fromDate:null,toDate:null,mainEvaluator:null,template:""},D.clickEvent=v,D.accessibleAllLocations=!0,D.operationalCountryLocations=[],D.model=angular.copy(D.initialModel),angular.merge(D.model,p),D.title="Filter Appraisal Cycles By",D.apply=w,D.cancel=_,D.reset=S,y()}angular.module("app.performance").controller("FilterAppraisalCycleController",e),e.$inject=["$state","formHelper","webservice","localizedMessages","employeeService","close","loader","toast","$rootScope","$scope","$stateParams","$q","formValidationHelper","model","appraisalTemplates","operationalCountryLocationHierarchyData","widgetChoiceHelper","clickEvent"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(){v.schema={type:"object",title:"",properties:{mainEvaluator:{title:"Main Evaluator",type:"object"},saveButton:{title:i.getLocalizedCustom("Save"),type:"object"}},required:[]},v.finalRatingSource===v.mainEvaluatorsConfigValue&&v.schema.required.push("mainEvaluator"),v.form=[{type:"row",items:[{key:"mainEvaluator",type:"auto-complete",htmlClass:"col-8",placeholder:i.getLocalizedCustom("Select Main Evaluator"),"text-searching":"Searching...","text-no-results":"No results found",employeeDataProvider:h,"input-changed":function(){v.model.mainEvaluator=void 0}},{key:"saveButton",type:"button","class":"btn btn-secondary main-evaluator-save-btn",onClick:function(e){c.$broadcast("schemaFormValidate"),(v.finalRatingSource!==v.mainEvaluatorsConfigValue||v.model.mainEvaluator)&&n({mainEvaluator:v.model.mainEvaluator})}}]}]}function h(e){var t={employee_name_or_id:e,termination:1},i={filter:t,"page[offset]":0,"page[limit]":50,sort:"fullName"};return a.call("employeeAutoComplete","GET",[],i).then(function(e){for(var t=[],a=0;a<e.data.data.length;a++)e.data.data[a].fullName=o.getFullName(e.data.data[a]),t.push(e.data.data[a]);return t})}var v=this;v.clickEvent=p,v.model={};var u=angular.copy(u);u&&u.empNumber&&(u.fullName=u.firstName+" "+u.lastName,u.termination_id&&(u.fullName+=" ("+i.getLocalizedCustom("Past Employee")+")"),v.model.mainEvaluator=u),v.title="",v.mainEvaluatorsConfigValue="mainEvaluators",v.finalRatingSource=f,g()}angular.module("app.performance").controller("ChangeMainEvaluatorController",e),e.$inject=["$state","formHelper","webservice","localizedMessages","employeeService","close","loader","toast","$rootScope","$scope","$stateParams","$q","mainEvaluator","clickEvent","finalRatingSource"]}(),function(){"use strict";function e(e,t,a,i,o){function n(e){a.$broadcast("manageAppraisalCycleAction",{action:e})}function l(e){return e.id-1<m.appraisalCycle.stateId}function r(e){return e.id>m.appraisalCycle.stateId}function s(e){return e.id-1==m.appraisalCycle.stateId}function c(e){return e.id<=m.appraisalCycle.stateId}function d(){return m.windowWidth<1920}var m=this;m.performAction=n,m.itemIsDone=l,m.itemIsTodo=r,m.itemIsCurrent=s,m.itemIsVisited=c,m.showProgressTruncated=d,m.windowWidth=o.innerWidth,window.addEventListener("resize",function(){i(function(){m.windowWidth=o.innerWidth})},!1),a.$on("manageAppraisalCycleNavbarUpdate",function(t,a){i(function(){m.currentState=e.getLocalizedCustom(a.currentState),m.states=a.states,m.appraisalCycle=a.appraisalCycle,m.readOnly=a.readOnly,m.allowedActions=a.allowedActions,m.disableAppraisalActionButton=a.disableAppraisalActionButton})})}angular.module("app.admin").controller("ManageAppraisalCycleTopRibbonController",e),e.$inject=["localizedMessages","$scope","$rootScope","$timeout","$window"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w){function _(){var e={appraisalCycle:z(),appraisalTemplates:L(),operationalCountryLocationHierarchy:$(),performanceEvaluatorGroups:P()};u(function(){o.show()}),r.all(e).then(function(e){ue.appraisalCycle=e.appraisalCycle.data.data,ue.readOnly=e.appraisalCycle.data.meta.uneditableIds.indexOf(ue.appraisalCycle.id)>-1,ue.operationalCountryLocations=e.operationalCountryLocationHierarchy.data.data.options,ue.finalRatingSource=e.appraisalCycle.data.meta.finalRatingSource,"object"!=typeof ue.appraisalCycle&&a.go("performance.appraisal_cycles"),x(),ue.states=e.appraisalCycle.data.meta.states,ue.cycleWorkflowManager=b.getWorkflowManager(e.appraisalCycle.data.meta.allowedActions,ue.states),ue.states.forEach(function(e){e.name=M(e.name)}),ue.appraisalTemplates=e.appraisalTemplates.data.data,ue.hasMainEvaluator=S(e.performanceEvaluatorGroups.data.data),G(),k(),O(),F(),D(),t.$broadcast("addTopMenuBackButton",{uiSref:"performance.appraisal_cycles",tooltip:"Appraisal Cycles"}),o.hide()},function(e){o.hide(),a.go("403")})}function S(e){for(var t in e)if(e.hasOwnProperty(t)&&"1"===t)return!0;return!1}function D(){t.$broadcast("manageAppraisalCycleNavbarUpdate",{currentState:I(),states:ue.states,appraisalCycle:ue.appraisalCycle,allowedActions:ue.cycleWorkflowManager.getAllowedActions(ue.appraisalCycle.stateId,!0),disableAppraisalActionButton:T,readOnly:ue.readOnly})}function T(){return ue.shouldAddEmployeesBeforeProceeding()||ue.shouldAssignMainEvaluatorsBeforeProceeding()||ue.shouldUpdateTemplateBeforeProceeding()}function x(){t.$broadcast("markMenuItemAsCurrent",{stateName:"performance.appraisal_cycles"}),w.setForcedTitle(["Performance","Appraisals","Appraisal Cycles"]),t.$broadcast("addTopMenuBackButton",{uiSref:"performance.appraisal_cycles",tooltip:"Appraisal Cycles"})}function F(){var e={};null!=ue.appraisalCycle.locationId&&(e.location=ue.appraisalCycle.locationId),null!=ue.appraisalCycle.countryCode&&(e.country_list=ue.appraisalCycle.countryCode),i.call("appraisalCycle/"+p.appraisalCycleId+"/includibleEmployees","GET",[]).then(function(e){0==e.data.data.length?ue.allEmployeesAdded=!0:ue.allEmployeesAdded=!1})}function k(){ue.schema1={type:"object",title:"Add Appraisal Cycle",properties:{name:{title:"Appraisal Cycle Name",type:"string"}}},ue.form1=[{type:"row",items:[{type:"read-only-text",htmlClass:"col-12",hideLabel:!0,key:"name"}]}],0==ue.appraisalCycle.stateId&&!ue.readOnly&&ue.cycleWorkflowManager.isActionAllowed(ue.appraisalCycle.stateId,"Save")&&ue.form1[0].items.push({type:"subheading",htmlClass:"col-12"}),ue.model1={name:ue.appraisalCycle.name},ue.schema2={type:"object",title:"Add Appraisal Cycle",properties:{location:{title:"Location",type:"string"},fromDate:{title:"From Date",type:"string"},toDate:{title:"To Date",type:"string"},dueDate:{title:"Due Date",type:"string"},mainEvaluator:{title:"Main Evaluator",type:"string"},appraisalTemplate:{title:"Template",type:"string"}}},ue.form2=[{type:"row",items:[{type:"subheading",htmlClass:"col-12"},{type:"subheading",htmlClass:"col-12 cycle-details-sub-heading",title:c.getLocalizedCustom("Cycle Details")},{type:"read-only-text",icon:"location_on",htmlClass:"col-12",key:"location",condition:function(){return null!=ue.operationalCountryLocations&&ue.appraisalCycle.createdByAdmin}},{type:"read-only-text",icon:"date_range",htmlClass:"col-12",key:"fromDate"},{type:"read-only-text",icon:"date_range",htmlClass:"col-12",key:"toDate"},{type:"read-only-text",icon:"date_range",htmlClass:"col-12",key:"dueDate"},{type:"read-only-text",icon:"person",htmlClass:"col-12",key:"mainEvaluator",condition:function(){return ue.hasMainEvaluator}},{type:"read-only-text",icon:"wallpaper",htmlClass:"col-12",key:"appraisalTemplate"},{type:"subheading",htmlClass:"col-12"}]}];var e=ue.appraisalTemplates.filter(function(e){return e.id==ue.appraisalCycle.templateId});ue.model2={location:E(),fromDate:m.toLocalizedDate(ue.appraisalCycle.fromDate),toDate:m.toLocalizedDate(ue.appraisalCycle.toDate),dueDate:m.toLocalizedDate(ue.appraisalCycle.dueDate),mainEvaluator:A(),appraisalTemplate:e.length>0?c.getLocalizedCustom(e[0].name):""},ue.schema3={type:"object",title:"Add Appraisal Cycle",properties:{evaluatorWarning:{title:"Appraisal Cycle Warning Message",type:"string"}}},ue.form3=[{type:"row",items:[{type:"subheading",htmlClass:"col-12"},{type:"read-only-text",htmlClass:"col-12",hideLabel:!0,key:"evaluatorWarning"}]}],ue.model3={evaluatorWarning:c.getLocalizedCustom("Employees without proper evaluators")}}function E(){return"object"==typeof ue.appraisalCycle.location&&null!==ue.appraisalCycle.location?ue.appraisalCycle.location.name:"object"==typeof ue.appraisalCycle.country&&null!==ue.appraisalCycle.country?ue.appraisalCycle.country.name:c.getLocalizedCustom("All")}function I(){for(var e in ue.states)if(ue.states.hasOwnProperty(e)&&e==ue.appraisalCycle.stateId)return ue.states[e].name;return""}function A(){return ue.appraisalCycle.mainEvaluatorId?ue.appraisalCycle.mainEvaluator.firstName+" "+ue.appraisalCycle.mainEvaluator.lastName:ue.appraisalCycle.reportingMethodId?c.getLocalizedCustom("Supervisor")+" - "+c.getLocalizedCustom(ue.appraisalCycle.reportingMethod.name):""}function M(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function L(){return i.call("appraisalTemplates","GET",[],{})}function P(){return i.call("performanceEvaluatorGroups","GET",[],{})}function $(){var e={preventSupervisorLocations:"true",preventHODLocations:"true",permissionType:[{type:"data_group",required_permissions:{"Appraisal Cycle":{canRead:1,canCreate:0,canUpdate:0,canDelete:0}}}]};return i.call("operationalCountryLocationHierarchy","GET",[],e)}function N(e,t,a){ue.orderField=e,ue.orderBy=t,ue.page=a,O(ue.latestFilters)}function O(e){var t={include:"appraisals",page:{}};return"object"==typeof e&&(ue.latestFilters=e,t.filter=e),t.page.limit=ue.pageSize,t.page.offset=ue.pageSize*(ue.page-1),ue.appraisalCycleEmployees=null,i.call("appraisalCycle/"+p.appraisalCycleId+"/employees","GET",[],t).then(function(e){var t=j(e.data.data);ue.employeesWithoutFinalRatingSource=e.data.meta.employeesWithoutFinalRatingSource.employeeIds,ue.appraisalCycleEmployees=t.map(function(e){return ue.employeesWithoutFinalRatingSource.indexOf(e.empNumber)!==-1&&(e.highlight=!0),e}),ue.totalDataCount=e.data.meta.total,ue.lastPage=R(),ue.appraisalCycle&&F(),o.hide()})}function R(){return Math.ceil(ue.totalDataCount/ue.pageSize)}function z(){var e={include:"mainEvaluator,reportingMethod,state,location,incompleteAppraisalCount"};return i.call("appraisalCycle/"+p.appraisalCycleId,"GET",[],e).then(function(e){return ue.appraisalCycle=e.data.data,e})}function j(e){return e.map(function(e){return Array.isArray(e.appraisals)&&e.appraisals.length>0&&(e.isReview=e.appraisals[0].appraisalInfo.isReview),e})}function V(){a.go("performance.appraisal_cycles")}function G(){var e=[],t={name:"name",lable:"Employee Name",getter:"firstName",sortable:!1,sortAction:"sortAction",formatter:function(e,t){return B(e+" "+t.lastName,t.termination_id)},clickAction:"onAppraisalClick"};e.push(t);var a;0==ue.appraisalCycle.stateId&&!ue.readOnly&&ue.hasMainEvaluator&&ue.cycleWorkflowManager.isActionAllowed(0,"Save")?a={name:"mainEvaluator",lable:"Main Evaluator",getter:"appraisals",type:"oxd-action-button",hasDropdownIcon:!0,allowedActionGetter:function(e){return e[0].mainEvaluator&&e[0].mainEvaluator.empNumber?[B(e[0].mainEvaluator.firstName+" "+e[0].mainEvaluator.lastName,e[0].mainEvaluator.termination_id)]:["-- "+c.getLocalizedCustom("Select")+" --"]},isDisabled:function(e){return!q(e)},onPerformListRowAction:le,errorMessageGetter:function(e){return!(!se()||!e.appraisals[0].mainEvaluator||"undefined"!=typeof e.appraisals[0].mainEvaluator.empNumber)&&c.getLocalizedCustom("Required")},clickAction:"onAppraisalClick"}:ue.hasMainEvaluator&&(a={name:"mainEvaluator",lable:"Main Evaluator",getter:"appraisals",formatter:function(e){return e[0].mainEvaluator.empNumber?B(e[0].mainEvaluator.firstName+" "+e[0].mainEvaluator.lastName,e[0].mainEvaluator.termination_id):""},clickAction:"onAppraisalClick"}),ue.hasMainEvaluator&&e.push(a);var i={name:"evaluators",lable:"Evaluators",getter:"appraisals",type:"oxd-multiple-values",formatter:function(e){var t=e[0].evaluators.map(function(e){return B(e.firstName+" "+e.lastName,e.termination_id)});return JSON.stringify(t)},clickAction:"onAppraisalClick"};e.push(i);var o={name:"state",lable:"Status",getter:"appraisals",type:"oxd-status",formatter:function(e){return M(e[0].state.name)},clickAction:"onAppraisalClick"};e.push(o);var n=[],l=H();e=[].concat(e,l.extraColumns),ue.listDefinition={tableId:"appraisalCycleList_",name:"Appraisal Cycles",listClass:"classic-table hover selectable",selectable:!ue.readOnly&&0==ue.appraisalCycle.stateId&&ue.cycleWorkflowManager.isActionAllowed(ue.appraisalCycle.stateId,"Save"),idGetter:"empNumber",listFields:e,extraTH:l.extraTH,extraTD:l.extraTD,showColumnsAnyway:!0,permission:{read:!0,update:!0,create:!0,"delete":!0},columnWidths:l.columnWidths,listActions:n,showSelectableAlways:!1,isRowSelectable:function(e){return q(e)},showLoader:!0,pagination:!0,listSpecificInitialSort:!0,clickableCondition:function(e){return!!(Array.isArray(e.appraisals)&&e.appraisals.length>0&&"object"==typeof e.appraisals[0].appraisalInfo)&&e.appraisals[0].appraisalInfo.isClickable},listTopBar:{getMessageForNoOfItemsFound:function(e){return e=ue.totalDataCount,null===ue.appraisalCycleEmployees?"":0==ue.appraisalCycle.stateId?"undefined"!=typeof e?c.getLocalizedCustomWithVariables("({{number}}) Employee"+(1==e?"":"s")+" in this Cycle",{number:e}):"":"undefined"!=typeof e?c.getLocalizedCustomWithVariables("({{number}}) Appraisal"+(1==e?"":"s")+" in this Cycle",{number:e}):""},getMessageForNoOfItemsSelected:function(e){return e?c.getLocalizedCustomWithVariables("({{number}}) Employee"+(e>1?"s":"")+" Selected",{number:e}):""},quickSearch:{remoteApiHandler:U,onSearch:W,type:"employee"}}},0==ue.appraisalCycle.stateId&&!ue.readOnly&&ue.cycleWorkflowManager.isActionAllowed(ue.appraisalCycle.stateId,"Save")&&(ue.listDefinition.listTopBar.onBulkDelete=function(e){J(e)},ue.listDefinition.listTopBar.deleteSelectedMessage=c.getLocalizedCustom("Remove Selected"),e.push({name:"actionButtons",lable:"",getter:"id","class":"text-center",width:"20%",type:"oxd-action-button-panel",iconButtons:[{id:"delete-button",classes:"btn-list",text:"Delete",tooltip:{text:"Delete"},clickAction:function(e,t,a,i){i[ue.listDefinition.idGetter]&&s.showDeleteConfirmationModal(c.getLocalizedCustom("The employee will be removed from the appraisal cycle. Are you sure you want to continue?"),"Yes, Remove").then(function(e){e===!0&&K([i[ue.listDefinition.idGetter]])})},icon:"ohrm_delete",displayCondition:function(e,t){return!0}}]}),ue.listDefinition.isSingleRowDeletable=function(e){return q(e)},ue.listDefinition.deleteIconTooltip="Remove")}function B(e,t){return t?e+" ("+c.getLocalizedCustom("Past Employee")+")":e}function q(e){return Array.isArray(e.appraisals)&&e.appraisals.length>0&&null===e.appraisals[0].id}function H(){var e,t=ue.appraisalCycle.stateId>0,a=[],i=[],o=[];return t?(e=ue.hasMainEvaluator?ue.readOnly||0!=ue.appraisalCycle.stateId?0==ue.appraisalCycle.stateId?["20%","24%","32%","20%","2%","2%","2%","2%"]:["20%","24%","30%","20%","2%","2%","2%"]:["3%","22%","23%","28%","20%","1%","1%","1%","1%"]:!ue.readOnly&&ue.cycleWorkflowManager.isActionAllowed(ue.appraisalCycle.stateId,"Save")&&0==ue.appraisalCycle.stateId?["3%","27%","46%","20%","1%","1%","1%","1%"]:0==ue.appraisalCycle.stateId?["25%","47%","20%","2%","2%","2%","2%"]:["25%","49%","20%","2%","2%","2%"],o.push({name:"actionButtons",lable:"",getter:"empNumber","class":"text-center",width:"20%",type:"oxd-action-button-panel",iconButtons:[{id:"review-button",classes:"btn-list appraisal_cycle_review_link",text:"Review",tooltip:{text:"Review"},clickAction:function(e,t,a,i){oe(i)},icon:"ohrm_contract",iconSize:"1rem",displayCondition:function(e,t){return t.appraisals[0].appraisalInfo.isReview}},{id:"settings-button",classes:"btn-list appraisal_cycle_edit_form_design_link",text:"Settings",tooltip:{text:"Settings"},clickAction:function(e,t,a,i){ie(i)},icon:"settings",iconSize:"1rem",displayCondition:function(e,t){return t.appraisals[0].appraisalInfo.canManage}},{id:"download-button",classes:"btn-list appraisal_cycle_download_link",text:"Download",tooltip:{text:"Download"},clickAction:function(e,t,a,i){ne(i)},icon:"ohrm_download_icon_oxd",displayCondition:function(e,t){return t.appraisals[0].appraisalInfo.isDownload}}]})):e=ue.hasMainEvaluator?!ue.readOnly&&ue.cycleWorkflowManager.isActionAllowed(ue.appraisalCycle.stateId,"Save")&&0==ue.appraisalCycle.stateId?["3%","22%","24%","30%","20%","1%"]:0==ue.appraisalCycle.stateId?["20%","24%","34%","20%","2%"]:["20%","24%","36%","20%"]:!ue.readOnly&&ue.cycleWorkflowManager.isActionAllowed(ue.appraisalCycle.stateId,"Save")&&0==ue.appraisalCycle.stateId?["3%","27%","49%","20%","1%"]:0==ue.appraisalCycle.stateId?["25%","53%","20%","2%"]:["25%","55%","20%"],{extraTD:i,extraTH:a,columnWidths:e,extraColumns:o}}function U(e){ue.employeeSearchString=e;var t={filter:{employee_name_or_id:e},page:{offset:"0",limit:"5"}};return i.call("appraisalCycle/"+p.appraisalCycleId+"/employees","GET",[],t).then(function(e){return e.data.data.map(function(e){return e.name=C.getFullName(e),e})})}function W(e){"string"==typeof e?(ue.page=1,O({employee_name_or_id:e})):"object"==typeof e&&(ue.page=1,O({employee_id_list:[e.originalObject.empNumber]}))}function Y(){s.showModal("app/performance/appraisal_cycles/add_edit_appraisal_cycles/edit-appraisal-cycle.html","AddEditAppraisalCycleController","modal",{appraisalCycleId:ue.appraisalCycle.id}).then(function(e){e!==!1&&a.go("performance.manage_appraisal_cycle",{appraisalCycleId:ue.appraisalCycle.id,warningMsg:null},{reload:!0})})}function J(e){e.length>0&&s.showDeleteConfirmationModal(c.getLocalizedCustom("The selected employees will be removed from the appraisal cycle. Are you sure you want to continue?"),"Yes, Remove").then(function(t){t===!0&&K(e)})}function K(e){ue.appraisalCycleEmployees=null,i.call("appraisalCycle/"+p.appraisalCycleId+"/employees","DELETE",{ids:e}).then(function(e){ue.page=1,O()})}function Z(e){var t={updateFinished:!1,updateCancelled:!1};if("Create Appraisals"===e){if(ue.shouldAddEmployeesBeforeProceeding())return void c.warningToast("No employees selected to the cycle");if(ue.shouldAssignMainEvaluatorsBeforeProceeding())return void c.warningToast("Main Evaluator not set for Some Employees");if(ue.shouldUpdateTemplateBeforeProceeding())return void c.warningToast("Appraisal cycle template is not set");t.progressModalTitle=c.getLocalizedCustom("Appraisal Creation in Progress ...")}else"Activate"===e?t.progressModalTitle=c.getLocalizedCustom("Appraisal Activation in Progress ..."):"Close"===e?t.progressModalTitle=c.getLocalizedCustom("Closing Appraisal Cycle in Progress ..."):"Reopen"===e?t.progressModalTitle=c.getLocalizedCustom("Reopening Appraisal Cycle in Progress ..."):t.progressModalTitle=c.getLocalizedCustom("Appraisal Bulk Action in Progress ...");var a=ue.appraisalCycle.incompleteAppraisalCount;return"Close"===e&&a>0?s.showConfirmationModal(c.getLocalizedCustomWithVariables("The Appraisal Cycle has {{incomplete_count}} incomplete appraisal"+(1==a?"":"s")+". Are you sure you want to close the Appraisal Cycle?",{incomplete_count:a})).then(function(a){a&&te(e,t)}):void te(e,t)}function Q(e,t){var a=e.progressModalTitle?e.progressModalTitle:c.getLocalizedCustom("Appraisal Cycle Bulk Update in Progress ..."),i={closeDelay:500,forceCompletionCallback:function(t){return 1==e.updateFinished},forceCancellationCallback:function(t){return 1==e.updateCancelled}};return"Create Appraisals"===t&&(pe=0,i.progressCallback=function(){return r.resolve(100*(pe/ue.totalDataCount))}),s.showProgressModal(a,"appraisalCycleStateChange",i)}function X(e){return"Create Appraisals"===e?ee():i.call("appraisalCycle/"+p.appraisalCycleId,"PATCH",{action:e},{})}function ee(){var e=10,t={action:"Create Appraisals",batchSize:e};return i.call("appraisalCycle/"+p.appraisalCycleId,"PATCH",t,{}).then(function(e){if("object"==typeof e.data.meta){var t=e.data.meta.createdCount,a=e.data.meta.remainingCount;return pe+=t,a>0?ee():e}return e})}function te(e,t){var a={progressModal:Q(t,e),makeApiCallForAction:X(e).then(function(e){return e.data.success?t.updateFinished=!0:t.updateCancelled=!0,e})};r.all(a).then(function(t){t.makeApiCallForAction.data.success?(O(),z().then(function(){G(),k(),D()}),u(function(){"Create Appraisals"===e?c.successToast("Successfully Created"):"Activate"===e?c.successToast("Successfully Activated"):"Close"===e?c.successToast("Successfully Closed"):"Reopen"===e?c.successToast("Successfully Reopened"):c.successToast("Successfully Updated")})):(o.hide(),c.errorToast(t.makeApiCallForAction.data.messages.error))},function(e){t.updateCancelled=!0,o.hide(),c.errorToast("Failed to Save")})}function ae(){ue.allEmployeesAdded?c.warningToast("All matching employees are in the cycle"):a.go("performance.add_appraisal_cycle_employees",{appraisalCycleId:ue.appraisalCycle.id})}function ie(e){var t=e.appraisals[0].appraisalInfo;t&&t.canManage&&(d.location.href=h.clientBase+"#/noncore/performance/addEmployeeAppraisal/id/"+e.appraisals[0].id+"/mode/evaluatorView/fromAppraisalCycle/"+p.appraisalCycleId+"/redirectedFrom/appraisalCycle")}function oe(e){var a=e.appraisals[0].appraisalInfo;if(a&&a.isReview){var i=0;if(null!=t.emp_number){if(v.employeeHasAnEvaluationForAppraisal(t.emp_number,a))i=t.emp_number;else for(var o=0;o<a.evaluators.length;o++)if(a.evaluators[o].AppraisalEvaluatorGroup.groupName==a.final_rating_source){i=a.evaluators[o].evaluatorId;break}}else for(var o=0;o<a.evaluators.length;o++)if(a.evaluators[o].AppraisalEvaluatorGroup.groupName==a.final_rating_source){i=a.evaluators[o].evaluatorId;break}d.location.href=h.clientBase+"#/noncore/performance/previewAppraisalQuestionForm/questionFormId/"+a.question_form_id+"/appraisalId/"+a.id+"/mode/adminView/evalId/"+i+"//fromAppraisalCycle/"+p.appraisalCycleId+"/redirectedFrom/appraisalCycle"}}function ne(e){var t=e.appraisals[0].appraisalInfo;t&&t.isDownload&&v.openAppraisalDownloadModal(!1,[e.appraisals[0].id])}function le(e,t,a,o){q(e)&&s.showModal("app/performance/appraisal_cycles/manage_appraisal_cycle/change-main-evaluator.html","ChangeMainEvaluatorController","modal",{mainEvaluator:t[0].mainEvaluator,finalRatingSource:ue.finalRatingSource,clickEvent:o}).then(function(a){if("object"==typeof a){var o=a.mainEvaluator;i.call("appraisalCycle/"+p.appraisalCycleId+"/employee/"+e.empNumber,"PATCH",{mainEvaluatorId:o?o.empNumber:void 0},{}).then(function(a){i.call("appraisalCycle/"+p.appraisalCycleId+"/employees","GET",[],{include:"appraisals",filter:{employee_id_list:[e.empNumber]}}).then(function(a){"mainEvaluators"===ue.finalRatingSource&&delete e.highlight,t[0].mainEvaluator=a.data.data[0].appraisals[0].mainEvaluator,t[0].evaluators=a.data.data[0].appraisals[0].evaluators,c.successToast("Successfully Updated")})},function(e){c.errorToast("Failed to Save")})}})}function re(){return 0==ue.appraisalCycle.stateId&&(!ue.appraisalCycleEmployees||0==ue.appraisalCycleEmployees.length)}function se(){return"mainEvaluators"==ue.finalRatingSource&&0==ue.appraisalCycle.stateId&&de().length>0}function ce(){return 0==ue.appraisalCycle.stateId&&0==ue.appraisalTemplates.filter(function(e){return ue.appraisalCycle.templateId===e.id}).length}function de(){return ue.appraisalCycleEmployees?ue.appraisalCycleEmployees.filter(function(e){return"undefined"==typeof e.appraisals[0].mainEvaluator.empNumber}):[]}function me(e){e.appraisals[0].appraisalInfo.isClickable&&(d.location.href=h.clientBase+"#/noncore/performance/defaultView/appraisalId/"+e.appraisals[0].id)}var ue=this;ue.readOnly=!1,ue.appraisalCycle=void 0,ue.cycleWorkflowManager={},ue.states=[],ue.goToAppraisalCycleList=V,ue.employeeSearchString="",ue.appraisalCycleEmployees=[],ue.performAction=Z,ue.reviewAppraisal=oe,ue.downloadAppraisalFile=ne,ue.addMoreEmployees=ae,ue.showAppraisalCycleDetailsModal=Y,ue.viewAppraisalSettings=ie,ue.changeMainEvaluator=le,ue.allEmployeesAdded=!1,ue.employeesWithoutFinalRatingSource=[],ue.onAppraisalClick=me,ue.shouldAddEmployeesBeforeProceeding=re,ue.shouldAssignMainEvaluatorsBeforeProceeding=se,ue.shouldUpdateTemplateBeforeProceeding=ce,ue.totalDataCount=0,ue.pageSize=50,ue.page=1,ue.activePageNo=1,ue.sortAction=N,ue.hasMainEvaluator=!0;var pe=0;p.appraisalCycleId||a.go("performance.appraisal_cycles"),p.warningMsg&&c.warningToast(p.warningMsg),e.$on("manageAppraisalCycleAction",function(e,t){Z(t.action)}),_()}angular.module("app.performance").controller("ManageAppraisalCycleController",e),e.$inject=["$scope","$rootScope","$state","webservice","loader","settingsService","datagroupPermissions","$q","modalHelperService","localizedMessages","$window","dateService","$timeout","$stateParams","formHelper","ModalService","LOGIN","AppraisalHelperService","$transitions","performanceAppraisalCycleService","employeeService","titleService"]}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/performance/appraisals/addAppraisal/appraisal-add-button.html",scope:{permissions:"=",employeeNameList:"=",appraisalList:"=",totalDataCount:"=",dataInCurruntPage:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t,a){function i(){window.location=a.clientBase+"#/noncore/performance/addEmployeeAppraisal"}var o=this;o.redirectToAddAppraisal=i,o.loadedDefer=t.defer(),o.loaded=o.loadedDefer.promise}angular.module("app.performance").directive("appraisalAddButton",e),t.$inject=["ModalService","$q","LOGIN"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s){function c(){l.show(),t.call("bulkAppraisalArchiveStatus/"+a.file_identity,"GET",[],{}).then(function(e){var t=e.data;t.exists&&t.authorized?(p.message="Your download will start in a few seconds. If not, please click here.",p.type="success",p.icon="ohrm_shield",p.clickable=!0,m()):t.authorized?(p.message="Sorry, the link has expired.",p.type="danger",p.icon="ohrm_delete_alert_warning"):(p.message="Sorry, you don't have permission to access this link.",p.type="warning",p.icon="ohrm_delete_alert_warning")})["finally"](function(){l.hide()})}function d(){t.call("bulkAppraisalArchiveStatus/"+a.file_identity,"GET",[],{}).then(function(e){var t=e.data;t.exists&&t.authorized?m():location.reload()})}function m(){o.ohrmGlobals.downloadFile(n.baseUrl+"api/bulkDownloadAppraisalLink/"+a.file_identity)}function u(){s.getUserData().then(function(e){"ESS"==e.usertype?o.$broadcast("markMenuItemAsCurrent",{stateName:"performance.view_my_appraisals"}):o.$broadcast("markMenuItemAsCurrent",{stateName:"performance.view_appraisals_list"}),r.setForcedTitle(["Performance","Download"])})}var p=this;p.message="",p.type="",p.clickable=!1,p.linkClickHandler=d,c(),u()}angular.module("app.admin").controller("AppraisalArchiveDownloadController",e),e.$inject=["$scope","webservice","$stateParams","$state","$rootScope","LOGIN","loader","titleService","datagroupPermissions"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){function m(){f.model.email="",t.$broadcast("schemaFormRedraw")}function u(i){if(t.$broadcast("schemaFormValidate"),i.$valid){var o={appraisalIds:n,type:l,email:f.model.email};return r.show(),e.call("bulkDownloadAppraisal","POST",o).then(function(i){a(!0),t.$applyAsync(function(){i&&(c.showModal("app/performance/appraisals/appraisalsDownload/appraisal-download-started.html","AppraisalDownloadStartedController","modal",{message:{email:i.data.email}}),e.call("bulkAppraisalArchiveStatus","GET",[]))})})["catch"](function(e){d.showBulkDownloadAppraisalRequestFailureErrorToast(e)})["finally"](function(){r.hide()})}return $q.when(!0)}function p(){a(!1)}var f=this;f.reset=m,f.send=u,f.close=a,f.cancel=p,f.model={email:""},f.schema={type:"object",title:"Email for the Downloadable Link",properties:{email:{title:"Please enter an email address to send the downloadable link",type:"string",maxLength:255}},required:["email"]},f.form=[{type:"row",items:[{key:"email",type:"text",htmlClass:"col-12",validationMessage:{email:i.getLocalizedCustom("Expected format: admin@example.com")},$validators:{email:s.email.validator}}]}]}angular.module("app.directives").controller("AppraisalDownloadEmailPromptController",e),e.$inject=["webservice","$scope","close","localizedMessages","isBulk","selectedItems","fileType","loader","formValidationHelper","modalHelperService","AppraisalHelperService"]}(),function(){"use strict";function e(e,t,a,i,o,n){function l(){i(!1)}var r=this;r.cancel=l,r.message=n.getLocalizedCustomWithVariables("The download link for the selected files will be sent to {{email}} in a few minutes. Please check your email.",{email:o.email})}angular.module("app.directives").controller("AppraisalDownloadStartedController",e),e.$inject=["webservice","$q","$scope","close","message","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c){function d(){m()}function m(){var e=[{name:"pdf",onPerformListRowAction:p,type:"oxd-action-button",formatter:function(){return v.documentMap[1].type},allowedActionGetter:function(){return[v.documentMap[1].type]},icon:"ohrm_file_pdf",downloadFileType:"PDF"},{name:"docx",onPerformListRowAction:f,type:"oxd-action-button",formatter:function(){return v.documentMap[0].type},allowedActionGetter:function(){return[v.documentMap[0].type]},icon:"ohrm_docx_file_oxd",downloadFileType:"Docx"}],t=[],a=["50%","50%"];v.listDefinition={tableId:"AppraisalDownload",name:"",selectable:!0,selected:[],idGetter:"id",listFields:e,showColumnsAnyway:!0,columnWidths:a,listActions:t,listSpecificInitialSort:!0,clickableCondition:"id",showLoader:!0,listClass:"",staticHeader:!0,hideHeader:!0}}function u(){a(!1)}function p(e){i?h(e,"pdf"):g(_.head(l),"pdf")}function f(e){i?h(e,"docx"):g(_.head(l),"docx")}function g(e,t){var i=n.baseUrl+"api/downloadAppraisal?appraisalId="+e+"&type="+t;o.ohrmGlobals.downloadFile(i),a(!0)}function h(o,n){var d={appraisalIds:l,type:n};s.show(),e.call("bulkDownloadAppraisal","POST",d).then(function(i){a(i),t.$applyAsync(function(){i&&(r.showModal("app/performance/appraisals/appraisalsDownload/appraisal-download-started.html","AppraisalDownloadStartedController","modal",{message:{email:i.data.email
}}),e.call("bulkAppraisalArchiveStatus","GET",[]))})})["catch"](function(e){a(!1),400===e.status?t.$applyAsync(function(){r.showModal("app/performance/appraisals/appraisalsDownload/appraisal-download-email-prompt.html","AppraisalDownloadEmailPromptController","modal",{isBulk:i,selectedItems:l,fileType:n})}):c.showBulkDownloadAppraisalRequestFailureErrorToast(e)})["finally"](function(){s.hide()})}var v=this;v.selectedItems=l,v.showEmailInput=!1,v.items=[{id:1}],v.cancel=u,v.downloadPdf=p,v.downloadDocx=f,v.documentMap=[{type:"DOCX"},{type:"PDF"}],d()}angular.module("app.directives").controller("AppraisalDownloadController",e),e.$inject=["webservice","$scope","close","isBulk","$rootScope","LOGIN","selectedItems","modalHelperService","loader","AppraisalHelperService"]}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/performance/appraisals/appraisalsList/appraisal-list-content.html",scope:{permissions:"=",appraisalsList:"=",appraisalStatusList:"=",appraisalCyclesList:"=",appraisalWorkflowListMainAppraisal:"=",employeeNameList:"=",userData:"=",config:"=",page:"=",totalDataCount:"=",pageSize:"=",lastPage:"=",currentPage:"="},controller:t,controllerAs:"vm",bindToController:!0,link:function(e){}};return e}function t(e,t,a,i,o,n,l,r,s,c,d,m){function u(){null!==localStorage.getItem("toast")&&(n.showLocalizedToast(localStorage.getItem("toast")),localStorage.removeItem("toast")),p()}function p(){F.panelInfo={appraisalsInfo:{title:"",icon:""}},F.listFields=[{name:"employeeName",lable:"Employee Name",sortable:!1,sortAction:"sortAction",clickAction:"viewAppraisal",formatter:function(e,t){if(!t.hasOwnProperty("employee"))return"";if(t.employee.firstName&&t.employee.lastName){var a=t.employee.firstName+" "+t.employee.lastName;return t.employee.termination_id&&(a+=" ("+$translate.instant("Past Employee")+")"),a}},"class":"valign-middle"},{name:"fromDate",lable:"From",getter:"from_date","class":"valign-middle",sortable:!1,sortAction:"sortAction",clickAction:"viewAppraisal",formatter:function(e){return e?(e=e.slice(0,10),r.toLocalizedDate(e)):e}},{name:"toDate",lable:"To",getter:"to_date","class":"valign-middle",sortable:!1,sortAction:"sortAction",clickAction:"viewAppraisal",formatter:function(e){return e?(e=e.slice(0,10),r.toLocalizedDate(e)):e}},{name:"dueDate",lable:"Due Date",getter:"due_date","class":"valign-middle",sortable:!1,sortAction:"sortAction",clickAction:"viewAppraisal",formatter:function(e){return e?(e=e.slice(0,10),r.toLocalizedDate(e)):e}},{name:"description",lable:"Description",getter:"description","class":"valign-middle",sortable:!1,sortAction:"sortAction",clickAction:"viewAppraisal",formatter:function(e,t){if(t.appraisal_cycle_id)for(var a=0;a<F.appraisalCyclesList.length;a++)if(F.appraisalCyclesList[a].id==t.appraisal_cycle_id)return e=F.appraisalCyclesList[a].name+" - "+e;return e},tooltip:"Show Details"},{name:"appraisalStatus",lable:"Appraisal Status",getter:"state_id",sortable:!1,sortAction:"sortAction",clickAction:"viewAppraisal",formatter:g,"class":"valign-middle"}],F.listFields.push({name:"completion",lable:"Review Progress",getter:"",type:"view-appraisals-completion-panel",sortable:!1,sortAction:"sortAction",clickAction:"emptyAction"}),void 0!=F.config&&"Yes"==F.config.final_rating_for_appraisal&&F.listFields.push({name:"final_rating",lable:"Final Rating",getter:"final_rating",sortable:!1,sortAction:"sortAction",clickAction:"viewAppraisal","class":"valign-middle",formatter:function(e){return"-1"==e?"":e}}),F.listFields.push({name:"action",lable:"",getter:"","class":"",sortable:!1,sortAction:"sortAction",clickAction:"emptyAction",type:"view-appraisals-action-panel"});var e=null;e=void 0!=F.config&&"Yes"==F.config.final_rating_for_appraisal?["2%","15%","15%","15%","15%","25%","5%","5%","2%","10%"]:["2%","15%","15%","15%","15%","25%","5%","2%","10%"],F.permissions["delete"]||(e=e.splice(1,e.length-1));var t,a=null,i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:F.permissions["delete"]}];F.listData={appraisals:{name:"EmployeeAppraisalsList",selectable:!0,selected:[],idGetter:"id",listFields:F.listFields,extraTH:t,extraTD:a,permission:F.permissions,showColumnsAnyway:!0,listActions:i,pagination:!0,columnWidths:e,clickableCondition:"isClickable",staticHeader:!0,staticBody:!0,staticFooter:!0}},f(F.appraisalsList)}function f(e){void 0!=F.listData&&(F.appraisalsListHelper=new a.list(F.listData.appraisals,e),F.selectAll=F.appraisalsListHelper.selectAllItems,F.deselectAll=F.appraisalsListHelper.deselectAllItems,F.changeSelection=F.appraisalsListHelper.changeSelection)}function g(e){return n.getLocalizedCustom(F.appraisalStatusList[e].name)}function h(e){1==e.isReviewClickable&&i.showModal({templateUrl:"app/performance/appraisals/appraisalStatus/appraisal-status-modal.html",controller:"PerformanceAppraisalStatusController",controllerAs:"modal",inputs:{title:"Appraisal Detail Status",appraisal:e,appraisalStatusList:F.appraisalStatusList,permissions:F.permissions,config:F.config,userData:F.userData}}).then(function(e){$(e.element).openModal()})}function v(){F.listData.appraisals.selected.length>0&&i.showModal({templateUrl:"app/performance/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&(y(),C(F.listData.appraisals.selected.length))})})}function y(){if(F.listData.appraisals.selected.length>0){var e=F.listData.appraisals.selected.length;o.show(),l.call("appraisal","DELETE",{data:F.listData.appraisals.selected},{}).then(function(t){o.hide();var a="deleteSuccess";n.showLocalizedToast(a),F.total-=e,b(F.listData.appraisals.selected)},function(e){o.hide(),s.success(e)})}}function b(e){for(var t=F.appraisalsList.length-1;t>=0;t--){var a=e.indexOf(F.appraisalsList[t].id);a>-1&&(e.splice(a,1),F.appraisalsList.splice(t,1))}}function C(e){F.totalDataCount=F.totalDataCount-e,F.dataInCurruntPage=F.dataInCurruntPage-e}function w(e,t,a){c.$broadcast("sort",{page:a,pageSize:F.pageSize})}function _(e){window.location=m.clientBase+"#/noncore/performance/defaultView/appraisalId/"+e.id}function S(e){window.location=m.clientBase+"#/noncore/performance/addEmployeeAppraisal/id/"+e.id+"/mode/evaluatorView"}function D(e){var t=0;if(null!=c.emp_number){if(d.employeeHasAnEvaluationForAppraisal(c.emp_number,e))t=c.emp_number;else for(var a=0;a<e.evaluators.length;a++)if("1"==e.evaluators[a].groupId){t=e.evaluators[a].evaluatorId;break}}else for(var a=0;a<e.evaluators.length;a++)if("1"==e.evaluators[a].groupId){t=e.evaluators[a].evaluatorId;break}window.location=m.clientBase+"#/noncore/performance/previewAppraisalQuestionForm/questionFormId/"+e.question_form_id+"/appraisalId/"+e.id+"/mode/adminView/evalId/"+t+"/"}function T(e){var t=m.baseUrl+"performance/download/appraisalId/"+e.id+"/clickedAction/download";c.ohrmGlobals.downloadFile(t)}function x(){}var F=this;F.dataInCurruntPage=F.currentPage,F.getAppraisalStatus=g,F.deleteSelection=v,F.showAppraisalStatus=h,F.sortAction=w,F.viewAppraisal=_,F.viewAppraisalSettings=S,F.reviewAppraisalAction=D,F.downloadAppraisalFile=T,F.emptyAction=x,F.setListHelper=f,e.$on("setListHelper",function(e,t){f(t.list)}),u()}angular.module("app.performance").directive("appraisalListContent",e),t.$inject=["$scope","$state","listHelper","ModalService","loader","localizedMessages","webservice","dateService","toast","$rootScope","AppraisalHelperService","LOGIN"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w,S){function D(){return v.getRegisteredListConfiguration(fe.listName,!0).then(function(e){fe.listConfigurations=e,fe.listConfig=fe.listConfigurations.listConfig,fe.availableFields=fe.listConfigurations.availableFields,fe.mandatoryFields=fe.listConfigurations.mandatoryFields,fe.defaultFields=fe.listConfigurations.defaultFields})}function T(){fe.resetPagination&&x()}function x(){y[fe.localStorageKeyPagination]=JSON.stringify({paginationOffset:0,pageSize:fe.pageSize,page:1,sortOrder:"",sortField:""}),fe.paginationOffset=0,fe.page=1,fe.sortOrder="",fe.sortField=""}function F(){var e=y[fe.localStorageKeyPagination],t=e?JSON.parse(e):{};t.page?fe.page=parseInt(t.page):fe.page=1}function k(){return u.getSetting("page_size",!1).then(function(e){var t=y[fe.localStorageKeyPagination],a=t?JSON.parse(t):void 0;a&&(fe.pageSize=parseInt(a.pageSize),fe.paginationOffset=parseInt(a.paginationOffset))})}function E(){return d.getUserData().then(function(e){fe.userData=e})}function I(){var e;return e=fe.myAppraisalList?d.getSinglePermission("my_appraisals",!0,{Employee:t.emp_number}):d.getSinglePermission("employee_appraisals"),e.then(function(e){fe.permissions=e})}function A(){return fe.myAppraisalList?O():N()}function M(){return r.call("performanceConfig","GET",[],{configs:["esign","incognito","final_rating_for_appraisal","appraisal_cycle_on","appraisal_bulk_download_limit","show_final_rating_as_percentage"]},null,!0).then(function(e){fe.downloadAppraisalMaxLimit=e.data.data.appraisal_bulk_download_limit,fe.showFinalRatingAsPercentage=e.data.data.show_final_rating_as_percentage,fe.config=e.data.data})}function L(e){var t={};angular.copy(m,t),t.filterParameters=e,m=t}function P(){fe.filters=m.filterParameters,fe.calledFromMyShortcuts=m.calledFromMyShortcuts,"employeeProfile"==fe.redirectedFrom&&(S.addBackToProfileButton(fe.empNo),fe.filters&&!fe.myAppraisalList&&(fe.filters.termination=ge)),fe.calledFromMyShortcuts&&x(),B(fe.page),null!==localStorage.getItem("toast")&&(s.showLocalizedToast(localStorage.getItem("toast")),localStorage.removeItem("toast"))}function N(){return m.filterParameters?l.when():y[fe.sessionStorageKeyLastSearchFilters]&&"performance.view_appraisals_list"===fe.currentState?(L(y[fe.sessionStorageKeyLastSearchFilters]),fe.empNo&&!fe.myAppraisalList&&(y[fe.sessionStorageKeyLastSearchFilters].employee={empNumber:fe.empNo,firstName:"",lastName:"",middleName:"",employeeId:fe.employeeId,fullName:fe.empName},y[fe.sessionStorageKeyLastSearchFilters].employeeId=fe.empNo),l.when()):"performance.view_appraisals_list"===fe.currentState?b.getPersistedParameters(fe.listNameForPersistingFilters).then(function(e){e?(L(e),y[fe.sessionStorageKeyLastSearchFilters]=e,fe.empNo&&!fe.myAppraisalList&&(y[fe.sessionStorageKeyLastSearchFilters].employee={empNumber:fe.empNo,firstName:"",lastName:"",middleName:"",employeeId:fe.employeeId,fullName:fe.empName},y[fe.sessionStorageKeyLastSearchFilters].employeeId=fe.empNo)):L(null)}):(L(null),l.when())}function O(){return y[fe.sessionStorageKeyLastSearchMyAppraisalFilters]&&(L(y[fe.sessionStorageKeyLastSearchMyAppraisalFilters]),delete y[fe.sessionStorageKeyLastSearchMyAppraisalFilters]),l.when()}function R(){fe.panelInfo={appraisalsInfo:{title:"",icon:""}},fe.listFields=[{name:"empId",lable:"Employee Id",sortable:!0,sortAction:"sortAction",clickAction:"viewAppraisal",formatter:function(e,t){return t.hasOwnProperty("employee")?t.employee.empId:""},hideField:!fe.listConfig.empId||fe.myAppraisalList},{name:"employeeName",lable:"Employee Name",sortable:!0,sortAction:"sortAction",clickAction:"viewAppraisal",formatter:function(e,t){if(!t.hasOwnProperty("employee"))return"";if(t.employee.firstName&&t.employee.lastName){if(""!==t.employee.middleName)var a=t.employee.firstName+" "+t.employee.middleName+" "+t.employee.lastName;else var a=t.employee.firstName+" "+t.employee.lastName;return t.employee.termination_id&&(a+=" ("+h.instant("Past Employee")+")"),a}},"class":"valign-middle word-break",hideField:!fe.listConfig.employeeName},{name:"jobTitle",lable:"Job Title",sortable:!1,clickAction:"viewAppraisal",formatter:function(e,t){return t.hasOwnProperty("employee")?t.employee.jobTitle:""},hideField:!fe.listConfig.jobTitle||fe.myAppraisalList},{name:"subUnit",lable:"Sub Unit",sortable:!1,clickAction:"viewAppraisal",formatter:function(e,t){return t.hasOwnProperty("employee")?t.employee.subUnit:""},hideField:!fe.listConfig.subUnit||fe.myAppraisalList},{name:"location",lable:"Location",sortable:!1,clickAction:"viewAppraisal",formatter:function(e,t){return t.hasOwnProperty("employee")?t.employee.location:""},hideField:!fe.listConfig.location||fe.myAppraisalList},{name:"fromDate",lable:"From",getter:"from_date","class":"valign-middle",sortable:!1,sortAction:"sortAction",clickAction:"viewAppraisal",formatter:function(e){return e?(e=e.slice(0,10),f.toLocalizedDate(e)):e},hideField:!fe.listConfig.fromDate},{name:"toDate",lable:"To",getter:"to_date","class":"valign-middle",sortable:!1,sortAction:"sortAction",clickAction:"viewAppraisal",formatter:function(e){return e?(e=e.slice(0,10),f.toLocalizedDate(e)):e},hideField:!fe.listConfig.toDate},{name:"dueDate",lable:"Due Date",getter:"due_date","class":"valign-middle",sortable:!0,sortAction:"sortAction",clickAction:"viewAppraisal",formatter:function(e){return e?(e=e.slice(0,10),f.toLocalizedDate(e)):e},hideField:!fe.listConfig.dueDate},{name:"description",lable:"Description",getter:"description","class":"valign-middle word-break",sortable:!1,sortAction:"sortAction",clickAction:"viewAppraisal",tooltip:"Show Details",hideField:!fe.listConfig.description},{name:"appraisalStatus",lable:"Appraisal Status",getter:"state_id",sortable:!0,sortAction:"sortAction",clickAction:"viewAppraisal",formatter:J,"class":"valign-middle word-break",hideField:!fe.listConfig.appraisalStatus}],fe.listFields.push({name:"completion",lable:"Review Progress",getter:"",type:"view-appraisals-completion-panel",sortable:!1,sortAction:"sortAction",clickAction:"emptyAction",hideField:!fe.listConfig.completion}),void 0!=fe.config&&"Yes"==fe.config.final_rating_for_appraisal&&fe.listFields.push({name:"final_rating",lable:"Final Rating",getter:"on"==fe.showFinalRatingAsPercentage?"final_rating_percentage":"final_rating",sortable:!1,sortAction:"sortAction",clickAction:"viewAppraisal","class":"valign-middle",formatter:function(e){return"-1"==e?"":e},hideField:!fe.listConfig.final_rating}),fe.listFields.push({name:"action",lable:"",getter:"","class":"",sortable:!1,sortAction:"sortAction",clickAction:"emptyAction",type:"view-appraisals-action-panel"}),fe.columnSizes={empId:6,employeeName:15,fromDate:12,toDate:12,dueDate:12,description:22,appraisalStatus:11,completion:5,final_rating:2},fe.totalLength=0,fe.listConfigurable||fe.permissions.read?fe.sizesArray=["2%"]:fe.sizesArray=[],G("calculateTotalLength"),G("calculateIndividualLengths");var e,t=null,a=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:fe.permissions["delete"]},{action:"downloadSelected",lable:"Download Selected",actionPermission:fe.permissions.read,classHandler:function(){if(fe.listData.appraisals.selected.length>0){var e=X();if(e.length>0&&e.length<=fe.downloadAppraisalMaxLimit)return{}}return{"disabled-context-list-item":!0}}}];fe.listData={appraisals:{name:"EmployeeAppraisalsList",selectable:!0,configurable:fe.listConfigurable,selected:[],idGetter:"id",listFields:fe.listFields,extraTH:e,extraTD:t,permission:fe.permissions,showColumnsAnyway:!0,listActions:a,pagination:!0,columnWidths:fe.sizesArray,clickableCondition:"isClickable",staticHeader:!0,staticBody:!0,staticFooter:!0,listConfigData:fe.listConfigData,listSpecificInitialSort:!0}},Y(fe.appraisalsList)}function z(e){fe.totalLength+=fe.columnSizes[e]}function j(e){var t=0;t=fe.myAppraisalList?fe.columnSizes[e]/fe.totalLength*89:fe.columnSizes[e]/fe.totalLength*97,fe.sizesArray.push(t+"%")}function V(e,t){switch(e){case"calculateTotalLength":z(t);break;case"calculateIndividualLengths":j(t)}}function G(e){angular.forEach(fe.availableFields,function(t,a){fe.listConfig[a]&&("final_rating"===a?void 0!==fe.config&&"Yes"===fe.config.final_rating_for_appraisal&&V(e,a):"empId"===a?fe.myAppraisalList||V(e,a):V(e,a))})}function B(e,i,n){var l={filter:{cycleId:""},offset:fe.paginationOffset,limit:fe.pageSize,state:a.current.name,sortField:fe.sortField,sortOrder:fe.sortOrder};if(fe.myAppraisalList||(l.filter.hideAppraisalsDueDateOlderThan=q(60),l.filter.termination=he),fe.filters&&(l.filter=angular.copy(fe.filters)),o.show(),fe.showLoader=!0,fe.myAppraisalList)l.empId=t.emp_number;else if("ESS"==fe.userData.usertype&&(fe.permissions.create=!1),fe.filters&&(fe.filters.evaluatorId&&(l.evalId=fe.filters.evaluatorId),fe.filters.employeeId&&(l.empId=fe.filters.employeeId),void 0!==l.filter&&void 0!==fe.filters.hideAppraisalsDueDateOlderThan)){var r=parseInt(fe.filters.hideAppraisalsDueDateOlderThan);Number.isInteger(r)&&r>-1?l.filter.hideAppraisalsDueDateOlderThan=q(r):delete l.filter.hideAppraisalsDueDateOlderThan}fe.empNo&&!fe.myAppraisalList&&(l.empId=fe.empNo),W(l,e)}function q(e){var t=new Date;return t.setDate(t.getDate()-e),H(t)||(t=new Date,t.setDate(t.getDate()-60)),f.toStandardDate(t)}function H(e){return e instanceof Date&&!isNaN(e)}function U(e,t,a,i){y[fe.localStorageKeyPagination]=JSON.stringify({paginationOffset:t,pageSize:fe.pageSize,page:e,sortOrder:a,sortField:i}),fe.paginationOffset=t,fe.pageSize=fe.pageSize,fe.sortOrder=a,fe.sortField=i}function W(e,i){if(fe.permissions.read){var m=[];m.push(r.call("appraisal","GET",[],e)),m.push(r.call("appraisalStatus","GET",[],{},null,!0)),m.push(r.call("appraisalWorkflow","GET",[],{workflow:"MAIN APPRAISAL"},null,!0)),m.push(r.call("appraisalWorkflow","GET",[],{workflow:"REVIEWS"},null,!0)),m.push(d.getSinglePermission("list_configuration",!0)),l.all(m).then(function(e){fe.listsLoaded=!1,fe.appraisalsList=e[0].data.data,fe.cyclesOfAvailableAppraisals=e[0].data.meta.cyclesOfAvailableAppraisals,fe.appraisalStatusList=e[1].data.data,fe.appraisalWorkflowListMainAppraisal=e[2].data.data,fe.appraisalWorkflowListReviews=e[3].data.data,fe.listConfigurationPermissions=e[4],fe.totalDataCount=e[0].data.meta.total,fe.dataInCurruntPage=Object.keys(e[0].data.data).length,fe.page=i,fe.lastPage=Math.ceil(fe.totalDataCount/fe.pageSize),o.show(),fe.showLoader=!0,fe.appraisalsList=c.setAppraisalDetails(fe.appraisalsList,fe.appraisalWorkflowListMainAppraisal,fe.appraisalWorkflowListReviews,t.emp_number,fe.userData,fe.config,fe.permissions,"performance.view_my_appraisals"==a.current.name),fe.listsLoaded=!0,o.hide(),fe.showLoader=!1,0==fe.appraisalsList.length&&s.infoToast("No Records Found"),fe.listConfigurable=!fe.myAppraisalList&&(fe.userData.isAdmin||fe.userData.isSupervisor)&&fe.listConfigurationPermissions.update,fe.myAppraisalList||pe(),Y(fe.appraisalsList),R(),v.showListConfigurationSuccess(6e3)},function(e){o.hide(),n.warning(s.getLocalizedCustom(e.statusText,null))})}else a.go("403"),o.hide()}function Y(e){void 0!=fe.listData&&(fe.appraisalsListHelper=new p.list(fe.listData.appraisals,e),fe.selectAll=fe.appraisalsListHelper.selectAllItems,fe.deselectAll=fe.appraisalsListHelper.deselectAllItems,fe.changeSelection=fe.appraisalsListHelper.changeSelection)}function J(e){return s.getLocalizedCustom(fe.appraisalStatusList[e].name)}function K(e){1==e.isReviewClickable&&i.showModal({templateUrl:"app/performance/appraisals/appraisalStatus/appraisal-status-modal.html",controller:"PerformanceAppraisalStatusController",controllerAs:"modal",inputs:{title:"Appraisal Detail Status",appraisal:e,appraisalStatusList:fe.appraisalStatusList,permissions:fe.permissions,config:fe.config,userData:fe.userData}}).then(function(e){$(e.element).openModal()})}function Z(){fe.listData.appraisals.selected.length>0&&i.showModal({templateUrl:"app/performance/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&(Q(),ae(fe.listData.appraisals.selected.length))})})}function Q(){if(fe.listData.appraisals.selected.length>0){var e=fe.listData.appraisals.selected.length;o.show(),fe.showLoader=!0,r.call("appraisal","DELETE",{data:fe.listData.appraisals.selected},{}).then(function(){o.hide(),fe.showLoader=!1;var t="deleteSuccess";s.showLocalizedToast(t),fe.total-=e,te(fe.listData.appraisals.selected)},function(e){o.hide(),fe.showLoader=!1,n.success(e)})}}function X(){return _.intersection(fe.listData.appraisals.selected,_.pluck(_.filter(fe.appraisalsList,{isDownload:!0}),"id"))}function ee(){if(fe.listData.appraisals.selected.length>0){var e=X();e.length>0&&e.length<=fe.downloadAppraisalMaxLimit&&c.openAppraisalDownloadModal(!0,e)}}function te(e){for(var t=fe.appraisalsList.length-1;t>=0;t--){var a=e.indexOf(fe.appraisalsList[t].id);a>-1&&(e.splice(a,1),fe.appraisalsList.splice(t,1))}}function ae(e){fe.totalDataCount=fe.totalDataCount-e,fe.dataInCurruntPage=fe.dataInCurruntPage-e}function ie(e,t,a){U(a,(a-1)*fe.pageSize,t,e),B(a,e,t)}function oe(e){window.location=g.clientBase+"#/noncore/performance/defaultView/appraisalId/"+e.id}function ne(e){window.location=g.clientBase+"#/noncore/performance/addEmployeeAppraisal/id/"+e.id+"/mode/evaluatorView"}function le(e){var a=0;if(null!=t.emp_number){if(c.employeeHasAnEvaluationForAppraisal(t.emp_number,e))a=t.emp_number;else for(var i=0;i<e.evaluators.length;i++)if(e.evaluators[i].AppraisalEvaluatorGroup.groupName==e.final_rating_source){a=e.evaluators[i].evaluatorId;break}}else for(var i=0;i<e.evaluators.length;i++)if(e.evaluators[i].AppraisalEvaluatorGroup.groupName==e.final_rating_source){a=e.evaluators[i].evaluatorId;break}window.location=g.clientBase+"#/noncore/performance/previewAppraisalQuestionForm/questionFormId/"+e.question_form_id+"/appraisalId/"+e.id+"/mode/adminView/evalId/"+a+"/"}function re(e){var a=0;if(null!=t.emp_number){if(c.employeeHasAnEvaluationForAppraisal(t.emp_number,e))a=t.emp_number;else for(var i=0;i<e.evaluators.length;i++)if(e.evaluators[i].AppraisalEvaluatorGroup.groupName==e.final_rating_source){a=e.evaluators[i].evaluatorId;break}}else for(var i=0;i<e.evaluators.length;i++)if(e.evaluators[i].AppraisalEvaluatorGroup.groupName==e.final_rating_source){a=e.evaluators[i].evaluatorId;break}window.location=g.clientBase+"#/noncore/performance/getSignedFinalReview/mode/adminView/actionName/Sign/appraisalId/"+e.id+"/evalId/"+a+"/questionFormId/"+e.question_form_id+"/redirect/singleView/"}function se(e){var t=e.acknowledgeEvalId;window.location=g.clientBase+"#/noncore/performance/getAcknowledgedFinalReview/mode/adminView/actionName/Acknowledge/appraisalId/"+e.id+"/evalId/"+t+"/questionFormId/"+e.question_form_id+"/redirect/singleView/"}function ce(e){c.openAppraisalDownloadModal(!1,[e.id])}function de(){}function me(){var i={close:function(){}};fe.empNo&&!fe.myAppraisalList&&void 0!=fe.filters?fe.filters.employeeId=fe.empNo:fe.empNo&&!fe.myAppraisalList&&(fe.filters={},fe.filters.employee={empNumber:fe.empNo,firstName:"",lastName:"",middleName:"",employeeId:fe.employeeId,fullName:fe.empName},fe.filters.employeeId=fe.empNo),C.showModal("app/performance/appraisals/filterAppraisals/appraisal-search.html","AppraisalSearchController","vm",{title:"Filter Appraisals By",currentFilter:fe.filters,userType:fe.userData.usertype,currentState:fe.currentState,config:fe.config,cyclesOfAvailableAppraisals:fe.cyclesOfAvailableAppraisals,modalFunctions:i}).then(function(i){i!==!1&&(fe.filters=i,fe.oldFilter=fe.filters,a.go(a.current.name,{filterParameters:fe.filters},{notify:!1}),e.$emit("changeCalledFromMyShortcutsVariable"),fe.empNo=null,x()),null!==fe.filters&&fe.filters.employee&&(e.$emit("changeCalledFromFilterFieldValueChange",fe.filters.employee),fe.empNo=null),i!==!1&&(fe.empNo=null,B(1),t.$broadcast("appraisal-filter-closed"),e.$broadcast("resetSortField"))})}function ue(t,i){x(),i.name||i.id?(fe.filters={},"termination"in i?fe.filters.termination=i.termination:fe.filters.termination=ge,"name"in i&&(fe.filters.empName=i.name),"id"in i&&(fe.filters.employeeId=i.id),"employee"in i&&(fe.filters.employee=i.employee),a.go(a.current.name,{filterParameters:fe.filters}),e.$emit("changeCalledFromMyShortcutsVariable"),fe.empNo=null,B(1)):b.getPersistedParameters("performanceAppraisalsList").then(function(t){t&&(fe.filters=t,a.go(a.current.name,{filterParameters:fe.filters}),e.$emit("changeCalledFromMyShortcutsVariable"),B(1))})}function pe(){fe.modalHeader="Appraisal/My Appraisals List Configuration",fe.applyForAllEmployeesLabel="Apply for All Users",fe.conditionalFields={final_rating:void 0!==fe.config&&"Yes"===fe.config.final_rating_for_appraisal},fe.specialMessagesForFields={},fe.maxNoOfFields=10,fe.listConfigData={availableFields:fe.availableFields,mandatoryFields:fe.mandatoryFields,defaultFields:fe.defaultFields,listName:fe.listName,modalHeader:fe.modalHeader,applyForAllEmployeesLabel:fe.applyForAllEmployeesLabel,conditionalFields:fe.conditionalFields,specialMessagesForFields:fe.specialMessagesForFields,maxNoOfFields:fe.maxNoOfFields}}var fe=this;fe.appraisalsList=[],fe.appraisalStatusList=[],fe.appraisalEvaluatorsList=[],fe.appraisalWorkflowList=[],fe.listsLoaded=!1,fe.showLoader=!1,fe.lastPage=0,fe.dataInCurrentPage=0,fe.pageSize=50,fe.paginationOffset=0,fe.totalDataCount=0,fe.sortOrder="",fe.sortField="",fe.employeeNameList=[],fe.oldFilter=!1,fe.currentState=a.current.name,fe.cyclesOfAvailableAppraisals=[],fe.downloadAppraisalMaxLimit=100,fe.redirectedFrom=m.redirectedFrom,fe.empNo=m.empNo,fe.employeeId=m.employeeId,fe.empName=m.empName,fe.resetPagination=m.resetPagination,fe.getAppraisalStatus=J,fe.deleteSelection=Z,fe.downloadSelected=ee,fe.showAppraisalStatus=K,fe.sortAction=ie,fe.viewAppraisal=oe,fe.viewAppraisalSettings=ne,fe.reviewAppraisalAction=le,fe.signAppraisalAction=re,fe.acknowledgeAppraisalAction=se,fe.downloadAppraisalFile=ce,fe.emptyAction=de,fe.setListHelper=Y,e.$on("filter",me),e.$on("fetch",B),e.$on("search",ue),fe.fetchAppraisalData=B,fe.setDefaultPagination=T,fe.localStorageSetPaginationParams=U,fe.filterAppraisals=me,fe.searchEmployees=ue,fe.myAppraisalList=m.isMyAppraisalList,fe.listName="performanceAppraisalsList",fe.listNameForPersistingFilters="performanceAppraisalsList",fe.listConfig={},fe.sessionStorageKeyLastSearchFilters="performance_appraisal_list_last_search_filters",fe.sessionStorageKeyLastSearchMyAppraisalFilters="my_appraisal_list_last_search_filters",fe.localStorageKeyPagination="performance_appraisal_list_pagination";var ge="2",he="1";fe.searchFilters={},fe.listConfigurable=!1;var ve=[D(),T(),F(),k(),E(),I(),M(),A()];fe.showLoader=!0,l.all(ve)["finally"](function(){P()})}angular.module("app.performance").controller("PerformanceViewAppraisalsListController",e),e.$inject=["$scope","$rootScope","$state","ModalService","loader","toast","$q","webservice","localizedMessages","AppraisalHelperService","datagroupPermissions","$stateParams","settingsService","listHelper","dateService","LOGIN","$translate","listConfigurationService","$localStorage","dataListSettingsService","modalHelperService","performanceConfigService","menuService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c){function d(){m(a.id)}function m(e){var t={appraisalId:e},a=[];a.push(l.call("appraisalStatus","GET",[],t)),r.all(a).then(function(e){f.deferredObject.resolve(),u(),f.statusList=e[0].data.data})}function u(){f.panelInfo={appraisalDetailStatusInfo:{title:"",icon:"images/pim/icon_work.svg"}};var e,t=[{name:"employeeName",lable:"Evaluator",getter:"evaluatorFullname","class":"valign-middle"},{name:"evaluatorType",lable:"Type",getter:"groupName","class":"valign-middle",formatter:function(e){return e?c.getLocalizedCustom(e):e}},{name:"appraisalStatus",lable:"Status",getter:"statusName","class":"valign-middle",formatter:function(e){return e?c.getLocalizedCustom(e):e}}],a=null,o=[];f.listData={appraisalDetailStatus:{name:"AppraisalDetailStatusList",idGetter:"id",listFields:t,extraTH:e,extraTD:a,permission:i,showColumnsAnyway:!0,listActions:o}}}function p(){e(!1)}var f=this;f.cancel=p,f.setListData=u,f.title=t,f.config=o,f.statusList=[],f.deferredObject=r.defer(),f.loaded=f.deferredObject.promise,d()}angular.module("app.performance").controller("PerformanceAppraisalStatusController",e),e.$inject=["close","title","appraisal","permissions","config","userData","webservice","$q","AppraisalHelperService","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y){function b(){$.userType=a,$.currentState=o,$.config=n,$.currentFilter=l,$.isAdmin=!1,$.isEss=!1,$.isSupervisor=!1,$.essMyAppraisalsView=!1,$.MyAppraisalsView=!1,"Admin"==$.userType?$.isAdmin=!0:"ESS"==$.userType?$.isEss=!0:"Supervisor"==$.userType&&($.isSupervisor=!0),"performance.view_my_appraisals"==$.currentState&&1==$.isEss&&($.essMyAppraisalsView=!0),"performance.view_my_appraisals"==$.currentState&&($.MyAppraisalsView=!0),$.MyAppraisalsView?($.modalWidgetLength="col-6",$.modalSize="modal-md"):($.modalWidgetLength="col-4",$.modalSize="modal-lg"),$.currentFilter&&Object.keys($.currentFilter).length>0&&($.currentFilter.fromDate?$.filters.fromDate=L($.currentFilter.fromDate):$.filters.fromDate="",$.currentFilter.toDate?$.filters.toDate=L($.currentFilter.toDate):$.filters.toDate="",$.currentFilter.appraisal_status?$.filters.appraisal_status=$.currentFilter.appraisal_status:$.filters.appraisal_status="",$.currentFilter.locations?$.filters.locations=$.currentFilter.locations:$.filters.locations=[],$.currentFilter.jobTitles?$.filters.jobTitles=$.currentFilter.jobTitles:$.filters.jobTitles="",$.currentFilter.subUnits?$.filters.subUnits=$.currentFilter.subUnits:$.filters.subUnits=[],$.currentFilter.employmentStatus?$.filters.employmentStatus=$.currentFilter.employmentStatus:$.filters.employmentStatus="",$.currentFilter.supervisors?$.filters.supervisors=$.currentFilter.supervisors:$.filters.supervisors="",$.currentFilter.review_status?$.filters.review_status=$.currentFilter.review_status:$.filters.review_status="",$.currentFilter.termination&&($.filters.termination=$.currentFilter.termination),$.currentFilter.hideAppraisalsDueDateOlderThan&&($.filters.hideAppraisalsDueDateOlderThan=$.currentFilter.hideAppraisalsDueDateOlderThan),$.currentFilter.cycleId?$.filters.cycleId=$.currentFilter.cycleId:$.filters.cycleId="",$.currentFilter.employeeId?($.filters.employeeId=$.currentFilter.employeeId,void 0!=$.currentFilter.employee.originalObject?($.filters.employee=$.currentFilter.employee.originalObject,$.filters.employee.fullName=m.getFullName($.filters.employee)):$.filters.employee=$.currentFilter.employee):($.filters.employeeId="",$.filters.employee=""),$.currentFilter.evaluatorId?($.filters.evaluatorId=$.currentFilter.evaluatorId,$.filters.evaluator=$.currentFilter.evaluator):($.filters.evaluatorId="",$.filters.evaluator=""),$.currentFilter.is_persisted?$.filters.is_persisted=$.currentFilter.is_persisted:$.filters.is_persisted=!1),w()}function C(e){var t="1";$.filters.cycleId&&(t=$.filters.cycleId==-1?"2":""==$.filters.cycleId?"1":String(parseInt($.filters.cycleId)+2)),$.model={employee:$.filters.employee,evaluator:$.filters.evaluator,locations:$.filters.locations,jobTitles:$.filters.jobTitles,subUnits:$.filters.subUnits,employmentStatus:$.filters.employmentStatus,supervisors:$.filters.supervisors,fromDate:$.filters.fromDate,toDate:$.filters.toDate,appraisalStatus:$.filters.appraisal_status,reviewStatus:$.filters.review_status,hideAppraisalsDueDateOlderThan:{selected:!N||""!==$.filters.hideAppraisalsDueDateOlderThan,value:$.filters.hideAppraisalsDueDateOlderThan},termination:$.filters.termination,appraisalCycleId:t,isPersisted:$.filters.is_persisted},$.schema={type:"object",title:"Appraisal",properties:{employee:{title:"Name",type:"object"},jobTitles:{title:r.getLocalizedCustom("Job Title"),type:"object"},locations:{title:r.getLocalizedCustom("Location"),type:"array",items:{"enum":$.locationsTree["enum"],type:"string"}},subUnits:{title:r.getLocalizedCustom("Sub Unit"),type:"array",items:{"enum":$.subunitsTree["enum"],type:"string"}},employmentStatus:{title:r.getLocalizedCustom("Employment Status"),type:"object"},supervisors:{title:r.getLocalizedCustom("Supervisor Name"),type:"object"},appraisalDetails:{title:"Appraisal",type:"string",maxLength:30},evaluator:{title:"Evaluator Name",type:"object"},fromDate:{title:"From",type:["null","object"]},toDate:{title:"To",type:["null","object"]},appraisalCycleId:{
title:"Appraisal Cycle",type:"string"},hideAppraisalsDueDateOlderThan:{title:"Hide Appraisals With Due Date Older Than",type:"object"},termination:{title:r.getLocalizedCustom("Include"),type:"string","enum":$.terminationEnumAndTitleMap["enum"]},appraisalStatus:{title:r.getLocalizedCustom("Appraisal Status"),type:"object"},reviewStatus:{title:r.getLocalizedCustom("Review Status"),type:"object"},isPersisted:{title:"Make Filter Default",type:"boolean"}},required:[]},$.form=[{type:"row",condition:$.MyAppraisalsView,items:[{key:"employee",type:"auto-complete",htmlClass:$.modalWidgetLength,placeholder:r.getLocalizedCustom("Employee Name"),"text-searching":"Searching...","text-no-results":"No results found","input-changed":function(){$.model.selectedEmployee=void 0},validationMessage:{invalid:r.getLocalizedCustom("Invalid")},$validators:{invalid:function(e){return!(e&&e.hasOwnProperty("purged_at")&&e.purged_at)}},employeeDataProvider:function(e,t){return D(e,t)}},{type:"autocomplete-multiselect",htmlClass:$.modalWidgetLength,key:"jobTitles",choices:$.jobTitleChoices},{type:"tree-select",htmlClass:$.modalWidgetLength,key:"locations",options:$.locationsTree.titleMap,condition:0===$.locations.length,config:{allOptionCheckBox:{includeAllOption:!0,readonly:!1},notSelectedOption:"-- "+r.getLocalizedCustom("Select")+" --",controllerOptionForTwoLevels:!0}},{type:"tree-select",htmlClass:$.modalWidgetLength,key:"subUnits",options:$.subunitsTree.titleMap,config:{allOptionCheckBox:{includeAllOption:!0,readonly:!1},notSelectedOption:"-- "+r.getLocalizedCustom("Select")+" --",controllerOptionForTwoLevels:!1}},{type:"autocomplete-multiselect",htmlClass:$.modalWidgetLength,key:"employmentStatus",choices:$.employmentStatusChoices},{type:"autocomplete-multiselect",htmlClass:$.modalWidgetLength+" appraisal_supervisor_filter",key:"supervisors",choices:$.supervisorChoices},{type:"select",htmlClass:$.modalWidgetLength,key:"termination",emptyOption:!1,titleMap:$.terminationEnumAndTitleMap.titleMap}]},{type:"row",condition:$.MyAppraisalsView,items:[{type:"subheading",htmlClass:"col-12 ",key:"appraisalDetails"}]},{type:"row",items:[{key:"evaluator",type:"auto-complete",htmlClass:$.modalWidgetLength,placeholder:r.getLocalizedCustom("Evaluator Name"),"text-searching":"Searching...","text-no-results":"No results found","input-changed":function(){$.model.selectedEmployee=void 0},validationMessage:{invalid:r.getLocalizedCustom("Invalid")},$validators:{invalid:function(e){return!(e&&e.hasOwnProperty("purged_at")&&e.purged_at)}},employeeDataProvider:function(e,t){return x(e,t)},condition:$.MyAppraisalsView},{type:"date",htmlClass:$.modalWidgetLength,key:"fromDate",ngModelOptions:{allowInvalid:!0},onChange:function(e,t){e&&$.model.to_date?$.model.toDate.getTime()>=e.getTime()?(f.$broadcast("schemaForm.error.toDate","toDate",!0),f.$broadcast("schemaForm.error.toDate","schemaForm",!0)):f.$broadcast("schemaForm.error.toDate","toDate",!1):(f.$broadcast("schemaForm.error.toDate","toDate",!0),f.$broadcast("schemaForm.error.toDate","schemaForm",!0))},validationMessage:{maxDate:p.beforeDate.message},$validators:{maxDate:function(e){return p.beforeDate.validator(e,$.model.toDate)}}},{type:"date",htmlClass:$.modalWidgetLength,key:"toDate",onChange:function(e,t){e&&$.model.fromDate?(f.$broadcast("schemaForm.error.fromDate","fromDate",!0),$.model.fromDate.getTime()<=e.getTime()?(f.$broadcast("schemaForm.error.fromDate","maxDate",!0),f.$broadcast("schemaForm.error.fromDate","schemaForm",!0)):f.$broadcast("schemaForm.error.fromDate","maxDate",!1)):(f.$broadcast("schemaForm.error.fromDate","maxDate",!0),f.$broadcast("schemaForm.error.fromDate","schemaForm",!0))},ngModelOptions:{allowInvalid:!0},validationMessage:{toDate:r.getLocalizedCustom("To date should be after From date")},$validators:{toDate:function(e){return p.toDate.validator(e,$.model.fromDate)}}}]},{type:"row",condition:!("on"==$.config.appraisal_cycle_on),items:[{type:"select",htmlClass:$.modalWidgetLength,key:"appraisalCycleId",titleMap:e.appraisalCycles.titleMap,emptyOption:!1},{type:"autocomplete-multiselect",htmlClass:$.modalWidgetLength,key:"appraisalStatus",choices:$.appraisalStatusChoices},{type:"autocomplete-multiselect",htmlClass:$.modalWidgetLength,key:"reviewStatus",choices:$.reviewStatusChoices,condition:$.MyAppraisalsView}]},{type:"row",condition:$.MyAppraisalsView,items:[{type:"checkbox-with-number-selector",htmlClass:"col-12",key:"hideAppraisalsDueDateOlderThan",condition:$.MyAppraisalsView,titleSuffix:"Days",selectedChanged:function(){$.model.hideAppraisalsDueDateOlderThan&&$.model.hideAppraisalsDueDateOlderThan.selected&&""===$.model.hideAppraisalsDueDateOlderThan.value&&($.model.hideAppraisalsDueDateOlderThan=O)}}]},{type:"row",condition:$.MyAppraisalsView,items:[{type:"checkbox",htmlClass:$.modalWidgetLength+" remove-top-margin",key:"isPersisted",condition:$.MyAppraisalsView}]}],$.formLoaded=!0,$.model.hideAppraisalsDueDateOlderThan&&!$.model.hideAppraisalsDueDateOlderThan.selected&&($.model.hideAppraisalsDueDateOlderThan.value="60")}function w(){var e={fields:["empNumber","firstName","middleName","lastName","termination_id","employeeId"]},a={required_permissions:{data_group:{name:"employee_appraisals",permissions:{canRead:1}}}},o={appraisalCycles:S(),locations:u.call("employees/locations","GET",[],a),jobTitles:u.call("jobTitles","GET",[],{}),subunits:u.call("subunits","GET",[],{}),employmentStatus:u.call("employmentStatus","GET",[],{}),supervisors:u.call("supervisors","GET",[],e),reviewStatus:t.getApppraisalReviewStatusNamesList(),appraisalStatus:t.getApppraisalStatusNamesList(),setDefaultFilter:P()};i.all(o).then(function(e){var a=e.appraisalCycles;if($.cyclesOfAvailableAppraisals){for(var i=0;$.cyclesOfAvailableAppraisals.length>i;i++){var o=_.where(a,{id:$.cyclesOfAvailableAppraisals[i].id});o.length||null===$.cyclesOfAvailableAppraisals[i].id||a.push($.cyclesOfAvailableAppraisals[i])}a=_.sortBy(a,"id")}$.jobTitle=e.jobTitles.data.data,$.jobTitleChoices=d.getItemsForMultyselectAutocomplete($.jobTitle,function(e){return{id:e.id,name:e.jobTitleName}}),$.locations=e.locations.data.data,$.subunits=e.subunits.data.data,$.subunitsTree=d.getSubunitsListForHierarchicalMultiSelect($.subunits),$.locationsTree=d.getLocationsListForHierarchicalMultiSelect($.locations),$.employmentStatus=e.employmentStatus.data.data,$.employmentStatusChoices=d.getItemsForMultyselectAutocomplete($.employmentStatus,{}),$.supervisors=e.supervisors.data.data,$.supervisorChoices=d.getItemsForMultyselectAutocomplete($.supervisors,function(e){var t=m.getFullName(e);return{id:e.empNumber,name:t,employeeId:e.employeeId}}),$.reviewStatusChoices=e.reviewStatus,$.appraisalStatusChoices=e.appraisalStatus,$.terminationEnumAndTitleMap=d.getEnumAndTitleMapForSelect($.terminationList,{value:"id",name:"name"},!1),C({appraisalCycles:t.getAppraisalCycleListForForm(a)})})}function S(){var e=i.defer();return u.call("appraisalCycles","GET",[],{}).then(function(t){e.resolve(t.data.data)},function(t){e.resolve([])}),e.promise}function D(e,t){$.employeeNameInputString=e;var a={name:"userInputString",includeSelf:!1,filter:{employee_name_or_id:e,termination:"2"},fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId","page[offset]":"0","page[limit]":"10"};return T(a,t)}function T(e,t){return null===$.pastEmployeeSuffix&&($.pastEmployeeSuffix=" ("+$translate.instant("Past Employee")+")"),u.call("appraisalAccessibleEmployees","GET",[],e,t).then(function(e){for(var t=0;t<e.data.data.length;t++)e.data.data[t].fullName=m.getFullName(e.data.data[t]),e.data.data[t].termination_id&&(e.data.data[t].past_employee=$.pastEmployeeSuffix);return e.data.data})}function x(e,t){$.evaluatorNameInputString=e;var a={name:"userInputString",filter:{employee_name_or_id:e,termination:"2"},fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId","page[offset]":"0","page[limit]":"10"};return F(a,t)}function F(e,t){return null===$.pastEmployeeSuffix&&($.pastEmployeeSuffix=" ("+$translate.instant("Past Employee")+")"),u.call("appraisalAccessibleEvaluators","GET",[],e,t).then(function(e){for(var t=0;t<e.data.data.length;t++)e.data.data[t].fullName=m.getFullName(e.data.data[t]),e.data.data[t].termination_id&&(e.data.data[t].past_employee=$.pastEmployeeSuffix);return e.data.data})}function k(e){f.$broadcast("schemaFormValidate"),e.$valid&&($.filters={},$.model.employee&&($.filters.employeeId=$.model.employee.empNumber,$.filters.employee=$.model.employee),$.model.evaluator&&($.filters.evaluatorId=$.model.evaluator.empNumber,$.filters.evaluator=$.model.evaluator),$.model.appraisalCycleId&&(2==$.model.appraisalCycleId?$.filters.cycleId=-1:1==$.model.appraisalCycleId?$.filters.cycleId="":$.filters.cycleId=$.model.appraisalCycleId-2),$.model.fromDate&&($.filters.fromDate=$.model.fromDate),$.model.toDate&&($.filters.toDate=$.model.toDate),$.model.appraisalStatus&&($.filters.appraisal_status=$.model.appraisalStatus),$.model.locations&&($.filters.locations=$.model.locations),$.model.jobTitles&&($.filters.jobTitles=$.model.jobTitles),$.model.subUnits&&($.filters.subUnits=$.model.subUnits),$.model.employmentStatus&&($.filters.employmentStatus=$.model.employmentStatus),$.model.supervisors&&($.filters.supervisors=$.model.supervisors),$.model.reviewStatus&&($.filters.review_status=$.model.reviewStatus),$.model.hideAppraisalsDueDateOlderThan&&$.model.hideAppraisalsDueDateOlderThan.selected&&(""===$.model.hideAppraisalsDueDateOlderThan.value?$.filters.hideAppraisalsDueDateOlderThan="0":$.filters.hideAppraisalsDueDateOlderThan=$.model.hideAppraisalsDueDateOlderThan.value),$.model.termination&&($.filters.termination=$.model.termination),$.model.isPersisted&&($.filters.is_persisted=$.model.isPersisted),"performance.view_appraisals_list"===$.currentState&&A($.filters),$.close($.filters))}function E(){$.close(!1)}function I(e){h.getPersistedParameters($.listNameForPersistingFilters,!0).then(function(t){!$.MyAppraisalsView&&t?(t.appraisal_status&&(t.appraisalStatus=t.appraisal_status),t.review_status&&(t.reviewStatus=t.review_status),t.hideAppraisalsDueDateOlderThan?t.hideAppraisalsDueDateOlderThan={selected:!0,value:t.hideAppraisalsDueDateOlderThan}:t.hideAppraisalsDueDateOlderThan={selected:!1,value:""},t.cycleId&&(t.cycleId==-1?t.appraisalCycleId=2:""==t.cycleId?t.appraisalCycleId=1:t.appraisalCycleId=t.cycleId+2),$.model=t,$.model.isPersisted=!0):$.model={employee:"",locations:"",jobTitles:"",subUnits:"",employmentStatus:"",supervisors:"",evaluator:"",fromDate:"",toDate:"",appraisalStatus:"",reviewStatus:"",hideAppraisalsDueDateOlderThan:O,termination:R,appraisalCycleId:"1",isPersisted:!1},f.$broadcast("schemaFormRedraw"),k(e),y.$broadcast("angucomplete-alt-with-employee-id:clearInput")})}function A(e){var t=M($.filters);e.is_persisted&&h.persistParameters($.listNameForPersistingFilters,t),g[$.sessionStorageKeyLastSearchFilters]=t}function M(e){return"object"==typeof e.fromDate&&(e.fromDate=v.toStandardDate(e.fromDate)),"object"==typeof e.toDate&&(e.toDate=v.toStandardDate(e.toDate)),e}function L(e){return"string"==typeof e&&e&&(e=new Date(e)),e}function P(){return h.getPersistedParameters($.listNameForPersistingFilters,!0).then(function(e){!$.MyAppraisalsView&&e&&($.persistedFilter=e)})}C.$inject=["formData"];var $=this;$.listNameForPersistingFilters="performanceAppraisalsList",$.sessionStorageKeyLastSearchFilters="performance_appraisal_list_last_search_filters",$.close=e,$.search=k,$.cancel=E,$.reset=I,c.close=e;var N=l&&Object.keys(l).length>0,O={selected:!0,value:"60"},R="1";$.cyclesOfAvailableAppraisals=s,$.employeeNameInputString="",$.evaluatorNameInputString="",$.employeeName="",$.modalWidgetLength="col-4",$.modalSize="modal-lg",$.persistedFilter=!1,$.terminationList=[{id:"1",name:r.getLocalizedCustom("Current Employees Only")},{id:"2",name:r.getLocalizedCustom("Current and Past Employees")},{id:"3",name:r.getLocalizedCustom("Past Employees Only")}],$.filters={employee:"",locations:[],jobTitles:"",subUnits:[],employmentStatus:"",supervisors:"",evaluator:"",fromDate:"",toDate:"",appraisal_status:"",review_status:"",cycleId:"",termination:N?"2":R,hideAppraisalsDueDateOlderThan:N?"":O.value,is_persisted:!1},b(),f.$watch("vm.model",function(e,t){function a(e){var t={};if(e.employee&&(t.employee=e.employee),e.jobTitles&&(t.jobTitles=e.jobTitles),e.locations&&e.locations.length>0&&(t.locations=e.locations),e.subUnits&&e.subUnits.length>0&&(t.subUnits=e.subUnits),e.employmentStatus&&(t.employmentStatus=e.employmentStatus),e.supervisors&&(t.supervisors=e.supervisors),e.evaluator&&(t.evaluator=e.evaluator),e.fromDate&&(t.fromDate="object"==typeof e.fromDate?v.toStandardDate(e.fromDate):e.fromDate),e.toDate&&(t.toDate="object"==typeof e.toDate?v.toStandardDate(e.toDate):e.toDate),e.cycleId===-1)t.appraisalCycleId="2";else if(e.cycleId){var a=e.cycleId+2;t.appraisalCycleId=a.toString()}else t.appraisalCycleId="1";return e.appraisalCycleId&&(t.appraisalCycleId=e.appraisalCycleId),e.appraisalStatus&&(t.appraisalStatus=e.appraisalStatus),e.appraisal_status&&(t.appraisalStatus=e.appraisal_status),e.reviewStatus&&(t.reviewStatus=e.reviewStatus),e.hideAppraisalsDueDateOlderThan&&("object"==typeof e.hideAppraisalsDueDateOlderThan?e.hideAppraisalsDueDateOlderThan.selected&&(t.hideAppraisalsDueDateOlderThan=e.hideAppraisalsDueDateOlderThan.value):t.hideAppraisalsDueDateOlderThan=e.hideAppraisalsDueDateOlderThan),e.termination&&(t.termination=e.termination),e.review_status&&(t.reviewStatus=e.review_status),t}if("object"==typeof e&&"object"==typeof t&&Object.keys(e).length>0&&Object.keys(t).length>0&&e.isPersisted===t.isPersisted){var i=a(e),o=a(t),n=$.persistedFilter?a($.persistedFilter):{};!$.persistedFilter||JSON.stringify(i)===JSON.stringify(o)&&JSON.stringify(i)===JSON.stringify(n)?$.model.isPersisted=!0:$.model.isPersisted=!1}},!0)}angular.module("app.performance").controller("AppraisalSearchController",e),e.$inject=["close","AppraisalHelperService","userType","$q","currentState","config","currentFilter","localizedMessages","cyclesOfAvailableAppraisals","modalFunctions","formHelper","employeeService","webservice","formValidationHelper","$scope","$localStorage","dataListSettingsService","dateService","$rootScope"]}(),function(){"use strict";function e(e,t,a,i,o){function n(e,t){for(var a=!1,i=0;i<t.evaluators.length;i++)if(t.evaluators[i].evaluatorId==e.toString()){a=!0;break}return a}function l(e,t){for(var a=[],i=0;i<t.length;i++){var o=!1;if(t[i].empNumber==e.toString())for(var n=0;n<t[i].evaluators.length;n++)if("2"==t[i].evaluators[n].groupId&&t[i].evaluators[n].evaluatorId==e.toString()){o=!0;break}o||a.push(t[i])}return a}function r(e,t,a){return void 0!=e.incognito[t]}function s(e){for(var t=[],a=0;a<e.length;a++)null!=e[a]&&"1"==e[a].stateId&&1==e[a].isReview&&(t.push(e[a]),e[a]=null);for(var a=0;a<e.length;a++)null!=e[a]&&1==e[a].isReview&&(t.push(e[a]),e[a]=null);for(var a=0;a<e.length;a++)null!=e[a]&&"1"==e[a].stateId&&(t.push(e[a]),e[a]=null);for(var a=0;a<e.length;a++)null!=e[a]&&"2"!=e[a].stateId&&(t.push(e[a]),e[a]=null);for(var a=0;a<e.length;a++)null!=e[a]&&"2"==e[a].stateId&&(t.push(e[a]),e[a]=null);return t}function c(e){for(var t=[{value:"1",name:a.getLocalizedCustom("All Open Appraisal Cycles")},{value:"2",name:a.getLocalizedCustom("All Appraisal Cycles")}],i=["1","2"],o=0;o<e.length;o++)t.push({value:(parseInt(e[o].id)+2).toString(),name:e[o].name}),i.push((parseInt(e[o].id)+2).toString());var n={titleMap:t,"enum":i};return n}function d(e){for(var t=[],a=[],i=0;i<e.length;i++)3!=e[i].stateId&&(t.push({value:e[i].id,name:e[i].name}),a.push(e[i].id));var o={titleMap:t,"enum":a};return o}function m(e){for(var t=[],a=[],i=0;i<e.length;i++)t.push({value:e[i].id,name:e[i].name}),a.push(e[i].id);return{titleMap:t,"enum":a}}function u(e){for(var t=[],a=0;a<e.length;a++)t[a]=e[a].toLowerCase();return t}function p(){return e.call("appraisalStatus","GET",[],{}).then(function(e){e=e.data.data;for(var t=[],a=0;a<e.length;a++)t.push(e[a].name);return t})}function f(){return e.call("appraisalStatus","GET",[],{}).then(function(e){for(var t=e.data.data,a=0;a<t.length;a++)delete t[a].description,t[a].id=t[a].stateId,delete t[a].stateId;return t})}function g(){return e.call("appraisalReviewStatus","GET",[],{}).then(function(e){for(var t=e.data.data,a=0;a<t.length;a++)delete t[a].description,t[a].id=t[a].stateId,delete t[a].stateId;return t})}function h(){return e.call("employees/locations","GET",[],{}).then(function(e){return e.data.data})}function v(){return e.call("jobTitles","GET",[],{}).then(function(e){for(var t=e.data.data,a=0;a<t.length;a++)t[a].name=t[a].jobTitleName;return t})}function y(){return e.call("subunits","GET",[],{}).then(function(e){return e.data.data})}function b(){return e.call("employmentStatus","GET",[],{}).then(function(e){return e.data.data})}function C(){var t={fields:["empNumber","firstName","middleName","lastName","termination_id","employeeId"]};return e.call("supervisors","GET",[],t).then(function(e){for(var t=0;t<e.data.data.length;t++)e.data.data[t].termination_id&&(e.data.data[t].terminationStatus="("+a.getLocalizedCustom("Past Employee")+")");return e.data.data})}function w(e,t){var a=!1;if(null==e)return a;"string"!=typeof e&&(e=e.toString());for(var i=0;i<t.evaluators.length;i++)if(e==t.evaluators[i].evaluatorId&&"1"==t.evaluators[i].groupId){a=!0;break}return a}function _(e,t){for(var a=0;a<t.evaluators.length;a++)if(e==t.evaluators[a].evaluatorId)switch(t.evaluators[a].groupId){case"1":return"MAIN_EVALUATOR";case"2":return"SELF_EVALUATOR";case"3":return"SUPERVISOR_EVALUATOR";case"4":return"PEER_EVALUATOR";case"5":return"SUBORDINATE_EVALUATOR"}return""}function S(e,a,i,o,n,l,r,s){for(var c=parseInt(Object.keys(e)[0]),d=c;d<Object.keys(e).length+c;d++){var m=w(o,e[d]);if(e[d].isMyAppraisal=s,e[d].canManage?e[d].isSettings=!0:e[d].isSettings=!1,$(e[d])){if(e[d].isReviewProgress=!0,e[d].isReviewClickable=!1,"performance.view_appraisals_list"==t.current.name){var u="";(m||1==n.isAdmin)&&(e[d].isReviewClickable=!0,u="pointer")}var p={cursorType:u?u:"default"};e[d].completion.options=p}else e[d].isReviewProgress=!1,e[d].isReviewClickable=!1}return e}function D(e,t,a,i){var o=!1;""!=_(e,t)&&(i="EVALUATOR"),w(e,t)&&(i="MAIN-EVALUATOR");for(var n=0;n<a.length;n++)if(a[n].role.toUpperCase()==i.toUpperCase()&&"Download"==a[n].action&&P(t).toUpperCase()==a[n].state){o=!0;break}return o}function T(e){for(var t=0;t<e.evaluators.length;t++)if(6==e.evaluators[t].status)return!1;return!0}function x(e,t){for(var a=0;a<e.length;a++)if(e[a].role==t)return!0;return!1}function F(e){for(var t=!1,a=0;a<e.evaluators.length;a++)if("1"==e.evaluators[a].status||"2"==e.evaluators[a].status||"6"==e.evaluators[a].status){t=!0;break}return t}function k(e){for(var t=!1,a=0;a<e.evaluators.length;a++)if("1"==e.evaluators[a].groupId&&("1"==e.evaluators[a].status||"2"==e.evaluators[a].status||"6"==e.evaluators[a].status)){t=!0;break}return t}function E(e,t){var a=!1;"string"!=typeof emp_number&&(e=e.toString());for(var i=0;i<t.evaluators.length;i++)if(e==t.evaluators[i].evaluatorId&&"3"==t.evaluators[i].groupId&&("1"==t.evaluators[i].status||"2"==t.evaluators[i].status||"6"==t.evaluators[i].status)){a=!0;break}return a}function I(e,t){var a=!1;"string"!=typeof emp_number&&(e=e.toString());for(var i=0;i<t.evaluators.length;i++)if(e==t.evaluators[i].evaluatorId&&"2"==t.evaluators[i].groupId&&("1"==t.evaluators[i].status||"2"==t.evaluators[i].status||"6"==t.evaluators[i].status)){a=!0;break}return a}function A(e,t){var a=!1;"string"!=typeof emp_number&&(e=e.toString());for(var i=0;i<t.evaluators.length;i++)if(e==t.evaluators[i].evaluatorId&&"4"==t.evaluators[i].groupId&&("1"==t.evaluators[i].status||"2"==t.evaluators[i].status||"6"==t.evaluators[i].status)){a=!0;break}return a}function M(e,t){var a=!1;"string"!=typeof emp_number&&(e=e.toString());for(var i=0;i<t.evaluators.length;i++)if(e==t.evaluators[i].evaluatorId&&"5"==t.evaluators[i].groupId&&("1"==t.evaluators[i].status||"2"==t.evaluators[i].status||"6"==t.evaluators[i].status)){a=!0;break}return a}function L(e,t,a,i){var o=!1;""!=_(e,t)&&(i="EVALUATOR"),w(e,t)&&(i="MAIN-EVALUATOR");for(var n=0;n<a.length;n++)if(a[n].role.toUpperCase()==i.toUpperCase()&&"View"==a[n].action){o=!0;break}return o}function P(e){for(var t=0;t<e.evaluators.length;t++)if("1"==e.evaluators[t].groupId)return"3"==e.evaluators[t].status?"SUBMITTED":"8"==e.evaluators[t].status?"EMPLOYEE ACKNOWLEDGED":"";return""}function $(e){return"2"!=e.state_id&&"5"!=e.state_id}function N(t,a){t?(o.show(),e.call("bulkAppraisalArchiveStatus","GET",[]).then(function(e){e.data.processing?z():O(a).then(function(e){e?G(t,a):j()})})["finally"](function(){o.hide()})):G(t,a)}function O(t){var a={appraisalIds:t};return e.call("bulkDownloadAppraisal","POST",a).then(function(e){return!0},function(e){return 403!=e.status||"Appraisal ids are not authorized"!=e.data})}function R(e){403==e.status&&"Bulk appraisal download is processing"==e.data?z():403==e.status&&"Appraisal ids are not authorized"==e.data?j():V()}function z(){a.warningToast("Another download is already processing. Please try again later.")}function j(){a.warningToast("Sorry, you dont have the permission to download some of the appraisals in this cycle.")}function V(){a.warningToast("Failed to generate file(s). Please contact Admin.")}function G(e,t){i.showModal("app/performance/appraisals/appraisalsDownload/appraisal-download.html","AppraisalDownloadController","modal",{isBulk:e,selectedItems:t}).then(function(t){t&&e&&i.showModal("app/performance/appraisals/appraisalsDownload/appraisal-download-started.html","AppraisalDownloadStartedController","modal",{message:{email:t.data.email}})})}var B={getAppraisalCycleListForForm:c,getAppraisalCycleListForFormNewAppraisal:d,getAppraisalHeaderListForForm:m,convertToLower:u,getApppraisalStatusList:p,getApppraisalStatusNamesList:f,getApppraisalReviewStatusNamesList:g,isMainEvaluator:w,canEnableMainEvaluatorReviewOption:F,canEnableSupervisorEvaluatorReviewOption:E,canEnableSelfReviewReviewOption:I,canEnablePeerEvaluatorReviewOption:A,canEnableSubordinateEvaluatorReviewOption:M,canEnableFinalReviewReviewOption:k,getEvaluatorType:_,canReviewProgressBeDisplayed:$,setAppraisalDetails:S,isEnabledForUserByWorkflowPermissions:L,sortAppraisalsList:s,anonymousReviewEnabled:r,removeSelfEvaluatorAppraisals:l,hasWorkflowReviewPermissions:x,noRejectedEvaluations:T,downloadButtonIsEnabledByWorkflow:D,getFinalReviewStatus:P,employeeHasAnEvaluationForAppraisal:n,getLocationsList:h,getJobTitleList:v,getSubUnitList:y,getEmploymentStatusList:b,getSupervisorList:C,openAppraisalDownloadModal:N,showBulkDownloadAppraisalRequestFailureErrorToast:R};return B}angular.module("app.performance").service("AppraisalHelperService",e),e.$inject=["webservice","$state","localizedMessages","modalHelperService","loader"]}(),function(){"use strict";function e(e,t,a,i,o,n){function l(){i.getUserData().then(function(e){m.isEss="ESS"==e.usertype}),e.$on("changeCalledFromMyShortcutsVariable",function(){m.calledFromMyShortcuts=!1}),e.$on("changeCalledFromFilterFieldValueChange",function(e,t){m.selectedEmployee=t})}function r(){e.$broadcast("filter",[])}function s(e,t){m.employeeSearchString=e;var a={name:"userInputString",filter:{employee_name_or_id:e},fields:"empNumber,firstName,middleName,lastName,employeeId","page[offset]":"0","page[limit]":"50",includeSelf:!1,sort:"fullName"};return o.call("appraisalAccessibleEmployees","GET",[],a,t).then(function(e){return e.data.data})}function c(){e.$broadcast("search",{name:m.employeeSearchString,termination:1})}function d(t){"undefined"!=typeof t&&(m.employeeSearchString=t.title,e.$broadcast("search",{id:t.originalObject.empNumber,termination:"1",employee:t}))}var m=this;m.calledFromMyShortcuts=a.params.calledFromMyShortcuts,m.title=a.current.data.title,m.currentState=a.current.name,m.isEss=!0,m.employeeSearchString="",m.pastEmployeeSuffix=null,m.selectedEmployee=null,m.searchAllowed=!0,m.filter=r,m.search=c,m.employeeSelected=d,m.fetchMatchingEmployees=s,t.$on("appraisal-filter-closed",function(){m.searchAllowed=!1,n(function(){m.searchAllowed=!0})}),"performance.view_appraisals_list"==a.current.name?m.isViewAppraisalsList=!0:m.isViewAppraisalsList=!1,l()}angular.module("app.performance").controller("AppraisalsListNavbarController",e),e.$inject=["$rootScope","$scope","$state","datagroupPermissions","webservice","$timeout"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(){h();var e={permission:u.getPermission("competency_profiles").then(function(e){return e.create?e:l.reject({statusText:"Forbidden"})}),selectableJobTitles:d.fetchCompetencyProfileSelectableJobTitles(),selectableSubunits:d.fetchCompetencyProfileSelectableSubunits({})};l.all(e).then(function(e){k.selectableJobTitles=e.selectableJobTitles,k.subunits=C(e.selectableSubunits.data),k.hasProfilesWithAutoApplyToNewSubunitsEnabled=!1,k.mappedSubunitsExists=!1,y(),v(),k.dataLoaded=!0,f.$broadcast("addTopMenuBackButton",{uiSref:"performance.competency_profiles",tooltip:"Competency Profiles"})},function(){i.hide(),m.go("403")})}function h(){f.$broadcast("markMenuItemAsCurrent",{stateName:"performance.competency_profiles"}),p.setForcedTitle(["Performance","Competency Profiles"])}function v(){k.schema={type:"object",title:"Add Competency Profile",properties:{jobTitle:{title:"Job Title",type:"string"},subunits:{title:c.instant("Sub Units"),type:"array",items:{"enum":k.subunits["enum"],type:"string"}}},required:["jobTitle","subunits"]},k.form=[{type:"section",htmlClass:"row",items:[{type:"generic-auto-complete",key:"jobTitle",htmlClass:"col s12 m12 l12",hideLabel:!1,placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No Eligible Job Titles Found",ngModelOptions:{allowInvalid:!0},titleField:"titleField",initialValue:S(),fetchItemsCallback:function(e){var t=l.defer(),a=_.filter(k.selectableJobTitles,function(t){return t.name.toLowerCase().indexOf(e.toLowerCase())!==-1});return a.forEach(function(e){e.titleField=e.name}),t.resolve(a),t.promise},onInputChange:function(t){""===t?(k.model.jobTitle="",k.selectedJobTitle={},n.$broadcast("schemaForm.error.jobTitle","invalid",!0)):n.$broadcast("schemaForm.error.jobTitle","invalid",e.getLocalizedCustom("Invalid"))},objectSelectedCallback:function(e){if(e){var t=!1;k.model.jobTitle!==e.originalObject.id&&(t=!0),k.model.jobTitle=e.originalObject.id,k.selectedJobTitle=e.originalObject,n.$broadcast("schemaForm.error.jobTitle","invalid",!0),t&&b()}}}]},{type:"section",htmlClass:"row",items:[{type:"tree-select",htmlClass:"col s12 m12 l12 competency-subtitle-checkboxes",key:"subunits",options:k.subunits.titleMap,disabled:""===k.model.jobTitle,config:{allOptionCheckBox:{includeAllOption:!0,readonly:k.mappedSubunitsExists},notSelectedOption:e.getLocalizedCustom("None"),additionalCheckBoxes:[{key:"autoApplyToNewSubunits",model:k.model.autoApplyToNewSubunits,readonly:k.hasProfilesWithAutoApplyToNewSubunitsEnabled,label:"Auto Apply to New Sub Units",onChange:function(e){k.model.autoApplyToNewSubunits=e}}]}}]}],s.addRequiredMessage(k.form);var t={type:"section",htmlClass:"row form-buttons",items:[{htmlClass:"right",type:"submit",title:"Next"},{htmlClass:"right",type:"button",title:"Cancel",style:"secondary-btn",onClick:x}]};k.form.push(t)}function y(){k.model={jobTitle:"",subunits:[],autoApplyToNewSubunits:!0}}function b(){var e={};k.model.jobTitle&&(e.jobTitleId=k.model.jobTitle),i.show(),d.fetchCompetencyProfileSelectableSubunits(e).then(function(e){k.subunits=C(e.data),k.model.subunits=w(e.data),k.mappedSubunitsExists=_.filter(e.data,{readonly:!0}).length>0,k.hasProfilesWithAutoApplyToNewSubunitsEnabled=d.hasProfilesWithAutoApplyToNewSubunitsEnabled(e),k.model.autoApplyToNewSubunits=!k.hasProfilesWithAutoApplyToNewSubunitsEnabled,v(),i.hide()})}function C(e){return{"enum":_.pluck(e,"id"),titleMap:e}}function w(e){return _.pluck(_.filter(e,{readonly:!1}),"id")}function S(){var e=_(k.selectableJobTitles).where({id:k.model.jobTitle}).valueOf();return e.forEach(function(e){e.titleField=e.name}),e.length>0?e[0]:null}function D(a){n.$broadcast("schemaFormValidate"),a.$valid&&t.call("competencyProfiles","POST",T()).then(function(t){i.hide(),t.data&&t.data.success?(localStorage.setItem("toast","saveSuccess"),F(t.data.data.id)):e.errorToast("Failed to Save")},function(t){i.hide(),e.errorToast(d.getCompetencyProfileFailedToSaveErrorMessage(t))})}function T(){return{jobTitle:k.model.jobTitle,subunits:k.model.subunits,autoApplyToNewSubunits:k.model.autoApplyToNewSubunits}}function x(){m.go("performance.competency_profiles")}function F(e){m.go("performance.competency_profile_grid",{competencyProfileId:e})}var k=this;k.title="Profile Details",k.onSubmit=D,k.cancel=x,g()}angular.module("app.performance").controller("PerformanceAddCompetencyProfileController",e),e.$inject=["localizedMessages","webservice","LOGIN","loader","toast","$scope","$q","settingsService","formHelper","$translate","competencyProfileService","$state","datagroupPermissions","titleService","$rootScope"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){function m(){var e={competencyProfileId:v.competencyProfileId};s.fetchCompetencyProfileSelectableJobTitlesForCopy(e).then(function(e){v.selectableJobTitlesForCopy=o.getItemsForMultyselectAutocomplete(e,{}),h(),u()})}function u(){v.schema={type:"object",title:"copyCompetencyProfiles",properties:{jobTitles:{title:n.instant("Copy for Job Titles"),type:["object","null"]}},required:["jobTitles"]},v.form=[{type:"section",htmlClass:"row",items:[{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l12",key:"jobTitles",choices:v.selectableJobTitlesForCopy,noSearchResultFoundText:"No Eligible Job Titles Found"}]}]}function p(t){e.$broadcast("schemaFormValidate"),t.$valid&&(d.show(),s.copyCompetencyProfiles(f()).then(function(e){d.hide(),e.success?(l.showLocalizedToast("Successfully Saved"),i(e.data)):l.errorToast("Failed to Save")},function(e){d.hide(),l.errorToast(s.getCompetencyProfileFailedToSaveErrorMessage(e))}))}function f(){var e={competencyProfileId:v.competencyProfileId,jobTitleIds:_.keys(v.model.jobTitles)};return e}function g(){i(!1)}function h(){v.model={},v.model.jobTitles={}}var v=this;v.competencyProfileId=c,v.copyProfile=p,v.cancel=g,m()}angular.module("app.performance").controller("CopyCompetencyProfileModalController",e),e.$inject=["$scope","logger","webservice","close","formHelper","$translate","localizedMessages","formValidationHelper","competencyProfileService","competencyProfileId","loader"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c){function d(){t(!1)}function m(){r.fetchCompetencyProfileSelectableCompetencies().then(function(e){g.competencyList=u(e,s),p()})}function u(e,t){var i=[];for(var o in e)t.indexOf(e[o].id)===-1&&(e[o].parentName&&(e[o].parentName=a.getLocalizedCustom(e[o].parentName)),i.push(e[o]));return i}function p(){var e=c?"hierarchical-multyselect":"autocomplete-multyselect";g.schema={type:"object",title:"Add Competencies",properties:{competencies:{title:" ",type:"object"}}},g.form=[{type:"section",htmlClass:"row",items:[{type:e,htmlClass:"col s12 m12 l12",key:"competencies",choices:g.competencyList,placeholder:"Search for Competencies",showSearchIcon:!0}]}]}function f(a){e.$broadcast("schemaFormValidate"),a.$valid&&t(g.model.competencies)}var g=this;g.add=f,g.cancel=d,g.model={},m()}angular.module("app.core").controller("AddCompetenciesModalController",e),e.$inject=["$scope","close","localizedMessages","webservice","$q","formHelper","$translate","competencyProfileService","selectedCompetencyIds","isCompetencyGroupsAllowed"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w,S,D){function T(){if(me.competencyProfileId){r.show();var e={selectedCompetencyProfileId:me.competencyProfileId},t={permission:c.getPermission("competency_profiles").then(function(e){return e.read?e:d.reject({statusText:"Forbidden",
status:403})}),subunits:D.fetchCompetencyProfileSelectableSubunits(e),evaluatorGroups:D.fetchPerformanceEvaluatorGroups(),performanceRatingScale:D.fetchPerformanceRatingScale(),competencyProfile:D.fetchCompetencyProfile(me.competencyProfileId),competencyGroupsAllowed:D.isCompetencyGroupsAllowed()};d.all(t).then(function(e){w.$broadcast("addTopMenuBackButton",{uiSref:"performance.competency_profiles",tooltip:"Competency Profiles"}),I(),me.isCompetencyGroupsAllowed=e.competencyGroupsAllowed,me.permission=e.permission,me.readonly=!me.permission.update,me.model=k(e.competencyProfile),F(),me.model.competencyList=[],Y(me.model.competencyListData,!0),me.subunitsOptions=e.subunits.data,me.performanceRatingScale=E(e.performanceRatingScale.data),me.mappedSubunitsExists=_.filter(e.subunits.data,{readonly:!0}).length>0,me.hasProfilesWithAutoApplyToNewSubunitsEnabled=D.hasProfilesWithAutoApplyToNewSubunitsEnabled(e.subunits),me.evaluatorOptionsArray=e.evaluatorGroups.data,me.evaluatorOptions=D.getEvaluatorGroupOptionsForCompetencyProfile(me.evaluatorOptionsArray);var t=e.evaluatorGroups.meta;t&&t.finalRatingSourceGroupId&&(me.mandatoryEvaluatorOptions=[t.finalRatingSourceGroupId]),A(),me.dataLoaded=!0,r.hide()},ce)}x()}function x(){w.$broadcast("markMenuItemAsCurrent",{stateName:"performance.competency_profiles"}),o.setForcedTitle(["Performance","Competency Profiles"])}function F(){ee()?me.isCorrupted=!1:me.isCorrupted=!0}function k(e){var t=e.subunits.indexOf("1");return t>-1&&e.subunits.splice(t,1),e}function E(e){return _.map(e,function(e){return parseFloat(e.key)})}function I(){null!==localStorage.getItem("toast")&&(i.showLocalizedToast(localStorage.getItem("toast")),localStorage.removeItem("toast"))}function A(){M(),N(),R(),O()}function M(){me.allCompetencyValues=L(me.model.competencyList),me.competencyValuesForChart=D.getFilteredCompetencyValuesForGraph(me.allCompetencyValues),me.competencyValuesForChart.length&&(me.showGraph=!0,P())}function L(e){var t=[],a=0;for(var i in e)e[i].isGroup||(a++,t.push({id:e[i].id,axis:e[i].name,value:parseFloat(e[i].proficiency,10),weight:parseInt(e[i].weight),sort:a}));return t}function P(){var e=_.max(me.performanceRatingScale),t={top:100,right:100,bottom:100,left:100},a=Math.min(450,window.innerWidth-10)-t.left-t.right,i=Math.min(a,window.innerHeight-t.top-t.bottom-20),o=d3.scaleOrdinal().range(["#66b61d"]);me.radarChartOptions={w:a,h:i,margin:t,maxValue:parseInt(e,10),levels:5,roundStrokes:!1,color:o,opacityArea:0,numberFormat:".3",mouseoverRadarAreaOpacity:0,dotRadius:6,opacityCircles:0,strokeWidth:3,wrapWidth:95,legends:["Proficiency"]}}function N(){S(function(){$(".competency-data-panel-body").mCustomScrollbar({theme:"ohrm-dark-thick",axis:"y",scrollInertia:0})})}function O(){me.inputNumberSpinnerRange={from:0,to:100},e.$on("recalculateCompetencyWeights",function(e,t,a){me.model.competencyList=D.recalculateCompetencyWeights(me.model.competencyList),j(t,a),V()})}function R(){me.subunitSelectionWidgetId="subunitSelection",me.subunitConfig={readonly:me.readonly,allOptionCheckBox:{includeAllOption:!0,readonly:me.mappedSubunitsExists},notSelectedOption:i.getLocalizedCustom("None"),additionalCheckBoxes:[{key:"autoApplyToNewSubunits",model:me.model.autoApplyToNewSubunits,readonly:me.hasProfilesWithAutoApplyToNewSubunitsEnabled,label:"Auto Apply to New Sub Units",onChange:function(e){me.model.autoApplyToNewSubunits=e}}]},me.evaluatedByConfig={includeAllOption:!0,notSelectedOption:i.getLocalizedCustom("None"),readonly:me.readonly||me.isCorrupted,mandatoryOptions:me.mandatoryEvaluatorOptions}}function z(e,t){for(var a in me.allCompetencyValues)me.allCompetencyValues[a].id===e&&(me.allCompetencyValues[a].value=t);me.competencyValuesForChart=D.getFilteredCompetencyValuesForGraph(me.allCompetencyValues)}function j(e,t){for(var a in me.allCompetencyValues)me.allCompetencyValues[a].id===e&&(me.allCompetencyValues[a].weight=t);me.competencyValuesForChart=D.getFilteredCompetencyValuesForGraph(me.allCompetencyValues)}function V(){e.$broadcast("reloadRadarChart",me.competencyValuesForChart,me.radarChartOptions)}function G(){var e=!1,t=B();v.showModal({templateUrl:"app/performance/competency_profiles/grid/add/add-competencies-modal.html",controller:"AddCompetenciesModalController",controllerAs:"modal",inputs:{selectedCompetencyIds:t,isCompetencyGroupsAllowed:me.isCompetencyGroupsAllowed}}).then(function(t){$(t.element).openModal({complete:function(){e||t.controller.cancel()}}),t.close.then(function(t){e=!0,t&&q(t)})})}function B(){var e=angular.copy(me.model.competencyList),t=[];for(var a in e)e[a].isGroup||t.push(e[a].id);return t}function q(e){if(r.show(),e){me.isCompetencyGroupsAllowed||(e=H(e));var t=W(e);D.addCompetencyProfileCompetencies(me.competencyProfileId,t).then(function(t){if(r.hide(),t&&t.success){var a=U(e,t.data);Y(a),M(),V(),i.successToast("Successfully Added")}else i.errorToast("Failed to Save")},function(e){r.hide(),i.errorToast("Failed to Save")})}}function H(e){var t={},a=_.keys(e);return _.forEach(a,function(a){a&&(t[a]={id:a,name:e[a]})}),t}function U(e,t){for(var a in e)e[a].competencyProfileCompetencyId=t[a].id,e[a].weight=t[a].weight,e[a].proficiency=t[a].proficiency,e[a].evaluators=t[a].evaluators;return e}function W(e){var t={};return t.competencyIds=_.pluck(e,"id"),t}function Y(e,t){me.isCompetencyGroupsAllowed?K(e,t):J(e)}function J(e){for(var t in e)e.hasOwnProperty(t)&&me.model.competencyList.push(e[t]);me.model.competencyList=_.sortBy(me.model.competencyList,function(e){return e.name.toLowerCase()},["asc"])}function K(e,t){var a=me.model.competencyList.filter(function(e){return e.isGroup===!0}).map(function(e){return e.name});for(var i in e)if(e.hasOwnProperty(i)){var o=_.findIndex(me.model.competencyList,function(t){return t.id===e[i].parentId});if(o>-1){var n=e[i];Q(n,o)}else Z(e,t,i,a)}}function Z(e,t,a,o){var n={id:e[a].parentId,name:e[a].parentName,isGroup:!0},l=e[a],r=o.indexOf(o.slice(-1).pop());o.push(e[a].parentName);var s=i.getLocalizedCustom("Miscellaneous").toLowerCase();o.sort(function(e,t){if(e&&t){var a=e.toLowerCase(),i=t.toLowerCase();return"miscellaneous"===a||a===s?1:"miscellaneous"===i||i===s?-1:a.localeCompare(i)}return 0});var c=o.indexOf(e[a].parentName);if(c>r)me.model.competencyList.push(n),me.model.competencyList.push(l);else if(0==c)me.model.competencyList.unshift(n,l);else{var d=o[c+1],m=_.findIndex(me.model.competencyList,function(e){return e.name===d});me.model.competencyList.splice(m,0,n,e[a])}}function Q(e,t){for(var a=t+1;a<=me.model.competencyList.length;a++){if(a==me.model.competencyList.length){me.model.competencyList.push(e);break}if(me.model.competencyList[a].isGroup){me.model.competencyList.splice(a,0,e);break}if(e.name.toLowerCase()<me.model.competencyList[a].name.toLowerCase()){me.model.competencyList.splice(a,0,e);break}}}function X(){ee()&&(r.show(),D.updateCompetencyProfile(me.competencyProfileId,te()).then(function(e){r.hide(),e&&e.success?me.isCorrupted?(localStorage.setItem("toast","saveSuccess"),T()):i.showLocalizedToast("saveSuccess"):i.errorToast("Failed to Save")},function(e){r.hide(),i.errorToast(D.getCompetencyProfileFailedToSaveErrorMessage(e))}))}function ee(){return 0!==me.model.subunits.length||(i.errorToast("At Least One Sub Unit Needs to Be Selected for a Profile"),!1)}function te(){var e={subunits:me.model.subunits,autoApplyToNewSubunits:me.model.autoApplyToNewSubunits,competencyList:ae()};return e}function ae(){var e=[];for(var t in me.model.competencyList)me.model.competencyList[t].isGroup||e.push({id:me.model.competencyList[t].competencyProfileCompetencyId,evaluators:ie(me.model.competencyList[t].evaluators),weight:me.model.competencyList[t].weight,proficiency:me.model.competencyList[t].proficiency});return e}function ie(e){var t=[];for(var a in e)me.evaluatorOptionsArray.hasOwnProperty(e[a])&&t.push(e[a]);return t}function oe(){return me.model.competencyList.length>0}function ne(e){e&&v.showModal({templateUrl:"app/core/modal/rounded_confirmation_modal.html",controller:"RoundedConfirmationModalController",controllerAs:"modal",inputs:{customMessages:["You are about to remove a Competency from the Competency Profile."," Are you sure you want to continue?"],successLabel:"Yes, Remove",cancelLabel:"No, Cancel"}}).then(function(t){$(t.element).openModal(),t.close.then(function(t){t===!0&&le(e)})})}function le(e){r.show();var t={competencyProfileCompetencyIds:[e.competencyProfileCompetencyId]};D.deleteCompetencyProfileCompetencies(me.competencyProfileId,t).then(function(){r.hide();var t=re(e);t.push(e.id),se(t),me.model.competencyList=D.recalculateCompetencyWeights(me.model.competencyList),M(),V(),i.successToast("Successfully Removed")},function(){r.hide(),i.errorToast("Failed to Remove")})}function re(e){var t=[],a=_.filter(me.model.competencyList,"parentId",e.parentId);return a.length<=1&&t.push(e.parentId),t}function se(e){for(var t=me.model.competencyList.length-1;t>=0;t--){var a=e.indexOf(me.model.competencyList[t].id);a>-1&&(e.splice(a,1),me.model.competencyList.splice(t,1))}}function ce(e){r.hide(),403===e.status&&t.go("403")}function de(){t.go("performance.competency_profiles")}var me=this;me.dataLoaded=!1,me.addCompetency=G,me.saveProfile=X,me.goBack=de,me.showCompetencySection=oe,me.deleteCompetencyFromProfile=ne,me.competencyProfileId=a.competencyProfileId,T(),e.$on("barRatingChanged",function(e,t,a){z(t,a),V()})}angular.module("app.performance").controller("PerformanceCompetencyProfileGridController",e),e.$inject=["$scope","$state","$stateParams","localizedMessages","titleService","webservice","toast","loader","formHelper","datagroupPermissions","$q","employeeService","$translate","$window","settingsService","dateService","listHelper","ModalService","performanceConstants","$filter","idpService","$rootScope","$timeout","competencyProfileService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g){function h(e,a,i){var n={offset:(i-1)*P.pageSize,limit:P.pageSize,orderField:P.sortingListFields[e],orderBy:a};"undefined"!=typeof P.filters&&(n.filter=P.filters),d.show(),g.fetchCompetencyProfiles(n).then(function(e){w(),P.competencyProfiles=e.data,y(),P.total=e.meta.total,P.totalDataCount=P.total,P.dataInCurruntPage=e.data.length,P.meta=e.meta,P.page=i,P.lastPage=Math.ceil(P.total/P.pageSize),P.competencyProfilesHelper=new t.list(P.listData.competencyProfiles,P.competencyProfiles),P.selectAll=P.competencyProfilesHelper.selectAllItems,P.deselectAll=P.competencyProfilesHelper.deselectAllItems,d.hide(),0===P.competencyProfiles.length&&s.infoToast("No Records Found")},function(){d.hide(),o.go("403")})}function v(){d.show();var e={permission:u.getPermission("competency_profiles").then(function(e){return e.read?e:n.reject({statusText:"Forbidden"})}),pageSize:f.getSetting("page_size")};n.all(e).then(function(e){P.permissions=e.permission,P.pageSize=e.pageSize,P.fetchCompetencyProfiles("jobTitle","ASC",P.page)},function(){d.hide(),o.go("403")})}function y(){_.forEach(P.competencyProfiles,function(e){e.subUnitListViewData=b(e)})}function b(e){var t="",a="";if(e.allSubunitsSelected)a=s.getLocalizedCustom("All Sub Units");else{var i=e.subUnits.splice(0,N);if(t=i.join(", "),e.subUnits.length>0){var o=e.subUnits.length>1?s.getLocalizedCustomWithVariables("+{{subunitCount}} Sub Units",{subunitCount:e.subUnits.length}):s.getLocalizedCustom("+1 Sub Unit");a=" "+o}}return e.autoApplyToNewSubunits&&(a+=" ("+s.getLocalizedCustom("Auto applied to new Sub Units")+")"),[{value:t,"class":"subunit-main-part"},{value:a,"class":"subunit-sub-part"}]}function C(){o.go("performance.add_competency_profile")}function w(){P.panelInfo={competencyProfileInfo:{}},S()}function S(){var e=[{name:"jobTitle",lable:"Job Title",getter:"jobTitle",sortable:!0,sortAction:"fetchCompetencyProfiles",clickAction:"editCompetencyProfile"},{name:"subUnits",lable:"Sub Units",getter:"subUnitListViewData",clickAction:"editCompetencyProfile",type:"text-array"},{name:"state",getter:"",type:"competency-profile-list-chip"}],t=[],a=[],i=[];P.permissions.create&&(t=[{colspan:5}],a=[{"class":"copy-competency-profile-icon",clickAction:"copyCompetencyProfile",icon:function(e){return!(e&&e.state&&e.state.isCorrupted)&&"content_copy"},tooltip:function(e){return!(e&&e.state&&e.state.isCorrupted)&&"Copy Competency Profile"}}]),P.permissions["delete"]&&(i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:P.permissions["delete"]}]);var o=D();P.listData={competencyProfiles:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:P.permissions,listActions:i,pagination:!0,columnWidths:o}}}function D(){var e=[];return e=P.permissions.create?P.permissions["delete"]?["5%","20%","60%","10%","5%"]:["20%","65%","10%","5%"]:P.permissions["delete"]?["5%","20%","65%","10%"]:["20%","70%","10%"]}function T(){if(P.listData.competencyProfiles.selected.length>0){var e=P.listData.competencyProfiles.selected.length;d.show(),g.deleteCompetencyProfiles({ids:P.listData.competencyProfiles.selected}).then(function(){d.hide(),s.showLocalizedToast("deleteSuccess"),P.total-=e,x(P.listData.competencyProfiles.selected)},function(e){d.hide(),m.error(s.getLocalizedCustom(e.data.details))})}}function x(e){for(var t=P.competencyProfiles.length-1;t>=0;t--){var a=e.indexOf(P.competencyProfiles[t].id);a>-1&&(e.splice(a,1),P.competencyProfiles.splice(t,1))}}function F(e){var t=e.obj;if(t.selected)P.listData.competencyProfiles.selected.push(t.id);else{var a=P.listData.competencyProfiles.selected.indexOf(t.id);a>-1&&P.listData.competencyProfiles.selected.splice(a,1)}}function k(){P.listData.competencyProfiles.selected.length>0&&l.showModal({templateUrl:"app/core/modal/confirmation_modal.html",controller:"ConfirmationModalController",controllerAs:"modal",inputs:{customMessage:"Delete selected competency profile(s)?",successLabel:"Yes, Delete",cancelLabel:"No, Cancel"}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&(T(),E(P.listData.competencyProfiles.selected.length))})})}function E(e){P.totalDataCount=P.totalDataCount-e,P.dataInCurruntPage=P.dataInCurruntPage-e}function I(e){A(e.id)}function A(e){o.go("performance.competency_profile_grid",{competencyProfileId:e})}function M(e){if(e&&e.state&&e.state.isCorrupted)return!1;var t=!1;l.showModal({templateUrl:"app/performance/competency_profiles/copy/copy-competency-profile-modal.html",controller:"CopyCompetencyProfileModalController",controllerAs:"modal",inputs:{competencyProfileId:e.id}}).then(function(e){$(e.element).openModal({complete:function(){t||e.controller.cancel()}}),e.close.then(function(e){e&&(_.forEach(e,function(e){e.subUnitListViewData=b(e),P.competencyProfiles.unshift(e)}),L(e.length)),t=!0})})}function L(e){P.totalDataCount=P.totalDataCount+e,P.dataInCurruntPage=P.dataInCurruntPage+e}var P=this,N=4;P.pageSize=50,P.page=1,P.total=0,P.totalDataCount=0,P.dataInCurruntPage=0,P.competencyProfiles="",P.sort="",P.sortingListFields={jobTitle:"jobTitle"},P.fetchCompetencyProfiles=h,P.changeSelection=F,P.deleteSelection=k,P.addCompetencyProfile=C,P.editCompetencyProfile=I,P.copyCompetencyProfile=M,P.selected=[],P.oldFilter=!1,P.competencyProfiles||v()}angular.module("app.admin").controller("PerformanceCompetencyProfilesController",e),e.$inject=["$scope","listHelper","logger","$window","$state","$q","ModalService","webservice","localizedMessages","$rootScope","loader","toast","datagroupPermissions","formHelper","settingsService","competencyProfileService"]}(),function(){"use strict";function e(e,t){function a(t){return e.call("competencyProfiles","GET",[],t).then(function(e){return e.data})}function i(t){return e.call("competencyProfiles","DELETE",t,{})}function o(t){return e.call("competencyProfile/"+t,"GET",[],{}).then(function(e){return e.data.data})}function n(){return e.call("competencyProfileSelectableJobTitles","GET",[]).then(function(e){return e.data.data})}function l(t){return e.call("competencyProfileSelectableJobTitles/copy","GET",[],t).then(function(e){return e.data.data})}function r(t){return e.call("competencyProfileSelectableSubunits","GET",[],t).then(function(e){return e.data})}function s(){return e.call("performanceEvaluatorGroups","GET",[],{}).then(function(e){return e.data})}function c(){return e.call("performanceRatingScale","GET",[],{}).then(function(e){return e.data})}function d(t,a){return e.call("competencyProfile/"+t+"/competencies","POST",a).then(function(e){return e.data})}function m(t,a){return e.call("competencyProfile/"+t+"/competencies","DELETE",a)}function u(e){return e.meta&&e.meta.hasProfilesWithAutoApplyToNewSubunitsEnabled}function p(t,a){return e.call("competencyProfile/"+t,"PATCH",a).then(function(e){return e.data})}function f(){return e.call("competencyProfileSelectableCompetencies","GET",[],{}).then(function(e){return e.data.data})}function g(e){var a=[];for(var i in e)e.hasOwnProperty(i)&&a.push({id:i,name:t.getLocalizedCustom(e[i])});return a}function h(e){var t=_.sum(e,function(e){return e.weight?e.weight:0});for(var a in e)t?e[a].percentage=_.round(100*e[a].weight/t,2).toFixed(2):e[a].percentage=0;return e}function v(e){var t="Failed to Save";return 400===e.status&&e.data&&e.data.details&&(e.data.details.includes("duplicate_mapping_validation_failed")?t="Competency Profile Already Exists for the selected Job Title, and Sub-Unit(s)":e.data.details.includes("duplicate_auto_apply_to_new_subunit_validation_failed")?t="Competency Profile Already Exists for the selected Job Title, with Auto Apply to New Sub Units Option Enabled":e.data.details.includes("duplicate_mapping_for_bulk_copy_validation_failed")?t="Competency Profile Already Exists for Some selected Job Title(s)":e.data.details.includes("duplicate_auto_apply_to_new_subunit_for_bulk_copy_validation_failed")&&(t="Competency Profile Already Exists for Some selected Job Title(s), with Auto Apply to New Sub Units Option Enabled")),t}function y(t){return e.call("copyCompetencyProfile","POST",t).then(function(e){return e.data})}function b(){return e.call("competencyGroupsAllowed","GET",[],{}).then(function(e){return e.data.isCompetencyGroupsAllowed})}function C(e){var t,a=10;return e.length>a?(e.sort(function(e,t){return e.weight==t.weight?e.value==t.value?e.sort==t.sort?0:e.sort<t.sort?-1:1:e.value<t.value?1:-1:e.weight<t.weight?1:-1}),t=e.slice(0,a),t.sort(function(e,t){return e.sort-t.sort})):t=e,[t]}return{fetchCompetencyProfiles:a,deleteCompetencyProfiles:i,fetchCompetencyProfileSelectableJobTitles:n,fetchCompetencyProfileSelectableJobTitlesForCopy:l,fetchCompetencyProfileSelectableSubunits:r,hasProfilesWithAutoApplyToNewSubunitsEnabled:u,fetchPerformanceEvaluatorGroups:s,fetchPerformanceRatingScale:c,getEvaluatorGroupOptionsForCompetencyProfile:g,recalculateCompetencyWeights:h,getFilteredCompetencyValuesForGraph:C,fetchCompetencyProfile:o,addCompetencyProfileCompetencies:d,deleteCompetencyProfileCompetencies:m,updateCompetencyProfile:p,fetchCompetencyProfileSelectableCompetencies:f,getCompetencyProfileFailedToSaveErrorMessage:v,copyCompetencyProfiles:y,isCompetencyGroupsAllowed:b}}angular.module("app.performance").service("competencyProfileService",e),e.$inject=["webservice","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w,S,D,T,x,F,k,E){function I(){A(),Ze.referrer&&_.endsWith(Ze.referrer,"idp_view/")&&O(),f.getSettings().then(function(e){M(),Ze.goalMaxCompletionPercentage=e.performance.goal_max_completion_percentage,Je(e),L(),T.$broadcast("SingleMenuItemTopRibbonControllerMenuChanged",{menuItem:Ze.pageTitle})})}function A(){var e;e="development_plan_view"===Ze.redirectFrom?Ze.referrer&&"singleView"===Ze.referrer.split("/").pop()?{stateName:"performance.view_appraisals_list"}:{stateName:"succession_and_development.list_idp"}:"appraisalForm"===Ze.redirectFrom?{stateName:"performance.view_appraisals_list"}:{stateName:"performance."+("my_goals"===Ze.listType?"goals.my":"goals.approved")},k(function(){T.$broadcast("markMenuItemAsCurrent",e)})}function M(){null!==localStorage.getItem("toast")&&(i.showLocalizedToast(localStorage.getItem("toast")),localStorage.removeItem("toast"))}function L(){null!==Ze.goalId?o.call(R(Ze.goalId,Ze.goalVersion),"GET",[],{}).then(function(e){Ze.performanceGoal=e.data.data;var a=e.data.meta;return Ze.ownGoal=a.ownGoal,Ze.goalOwnerHasWorkEmail=a.hasWorkEmail,Ze.readOnly=a.readOnly,Ze.goalLevel=Ze.performanceGoal.goalLevel,Ze.parentGoalId=Ze.performanceGoal.parentGoal,200===e.status&&e.data.meta.accessibility?void(Ze.readOnly?V(Ze.ownGoal,"read"):V(Ze.ownGoal,"update")):(l.hide(),void t.go("403"))},function(e){403===e.status&&(l.hide(),t.go("403"))}):(Ze.ownGoal="my_goals"===Ze.listType,null!==Ze.parentGoalLevel?Ze.goalLevel=Ze.parentGoalLevel:Ze.goalLevel=Ze.individualGoalsLevelId,Ze.goalPriority=Ze.mediumGoalPriorityId,V(Ze.ownGoal,"create"))}function P(){Ze.reminderButton=u.getIndividualSendReminderButton(Ze.goalOwnerHasWorkEmail,ee)}function N(){return!Ze.disableAllFields&&!Ze.ownGoal&&Ze.goalId&&Ze.reminderButton&&Qe.showSendReminderBasedOnWorkflowStatus(Ze.performanceGoal,Ze.parentGoal)&&Ze.performanceGoal.selectedEmployee&&!Ze.performanceGoal.selectedEmployee.termination_id}function O(){var e=Ze.referrer.split("/")[5],a={idpDetails:D.getIdpDetails(e),userData:s.getUserData()};c.all(a).then(function(e){var a=e.idpDetails.data,i=e.idpDetails.meta.isClosed,n=e.userData&&e.userData.emp_number===a.owner.empNumber;s.getPermission("individual_development_plan",n).then(function(e){var n={Employee:a.owner.empNumber};s.getPermission("development_goals",Ze.self,n).then(function(a){var n=!1;null!==Ze.goalId?o.call(R(Ze.goalId,Ze.goalVersion),"GET",[],{}).then(function(t){var o=t.data.meta.readOnly;n=o?!a.read:!(e.update&&a.update&&!Ze.self&&!i)}):e.update&&a.create&&!Ze.self&&!i||(n=!0),n&&t.go("403")})})})}function R(e,t){var a="goal/"+e;return null!=t&&""!=t&&(a=a+"/version/"+t),a}function z(){var e=null;e=Ze.goalId&&Ze.performanceGoal?Ze.performanceGoal.goalPurpose:null!=a.purpose&&void 0!=a.purpose&&""!=a.purpose?a.purpose:Qe.getDefaultGoalPurpose(),Ze.goalPurpose=""==e||null==e?null:e}function j(e){var t,a=parseInt(Ze.goalPurpose,10);if(a===b.DEVELOPMENT_GOAL_PURPOSE_ID)t=b.DEVELOPMENT_GOAL_DATAGROUP;else{if(a!==b.PERFORMANCE_GOAL_PURPOSE_ID)return c.when({});t=b.PERFORMANCE_GOAL_DATAGROUP}return s.getSinglePermission(t,e)}function V(e,a){z(),j(e).then(function(e){Ze.permission=e,Ze.canPeformKeyResultsActions=!Ze.readOnly,Ze.permission[a]?G():Ze.parentGoalId&&parseInt(Ze.goalCategoryId,10)===b.KEY_RESULT_CATEGORY_ID?o.call(R(Ze.parentGoalId,null),"GET",[],{}).then(function(e){var a=e.data.meta.readOnly,i=e.data.meta.accessibility;i?(a?Ze.permission={read:!0,"delete":!1,update:!1,create:!1}:Ze.permission={read:!0,"delete":!0,update:!0,create:!0},G()):(l.hide(),t.go("403"))}):(l.hide(),t.go("403"))})}function G(){var e={isGoalAddPermittedByWorkflow:u.isGoalAddPermittedByWorkflow("my_goals"===Ze.listType),userData:s.getUserData()};c.all(e).then(function(e){var t=e.userData;Ze.permission.create=Ze.permission.create&&e.isGoalAddPermittedByWorkflow,Ze.isEss="ESS"==t.usertype,Ze.isAdmin=t.isAdmin,Ze.is_global_admin=t.is_global_admin,Ze.isSupervisor=t.isSupervisor,Ze.isDepartmentHead=t.isDepartmentHead,Ze.hasEssRoleOnly=t.hasEssRoleOnly,Ze.emp_number=t.emp_number,null!==Ze.goalId,B()})}function B(){var e={},t=null!==Ze.goalId,a=Ze.ownGoal||null!=Ze.emp_number&&Ze.emp_number==Ze.empNmber;z(),e.goalWorkflowStatuses=o.call("goalWorkflowStatuses","GET",[],{goalId:Ze.goalId,isOwnGoal:a,goalPurposeId:Ze.goalPurpose},void 0,!0),Ze.parentGoalId&&(parseInt(Qe.getCategoryId(),10)===b.GOAL_CATEGORY_ID&&Ze.performanceGoal&&Ze.performanceGoal.parentGoalData?Ze.parentGoal=Ze.performanceGoal.parentGoalData:e.parentGoal=o.call("goal/"+Ze.parentGoalId,"GET",[],{}).then(function(e){return e.data}));var i={required_permissions:{data_group:{name:"Goals",permissions:{canCreate:1}}}};e.goalMetricNumberFormats=o.call("goalMetricNumberFormats","GET",[],{},void 0,!0).then(function(e){return e.data.data}),e.performanceMetricNumberStrategyService=S.init(),e.goalLevels=u.fetchGoalLevels(),e.goalPriorities=u.fetchGoalPriorities(),e.goalStatuses=Qe.getGoalStatuses(),e.goalTemplates=q({}),e.locations=u.fetchLocations(i,t),e.jobTitles=u.fetchJobTitles(t),e.subunits=u.fetchSubunits(t),e.performanceEvaluatorGroups=u.fetchEvaluatorGroups(),e.goalNames=H();var n={model:{goalLevel:Ze.goalLevel},goalCategoryId:Qe.getCategoryId(),goalId:null},s={permissionType:w.getPermissionType(n),goalPurpose:Ze.goalPurpose};if(e.additionalEmployees=o.call("goalAssignableEmployees","GET",[],{filter:s,includeSelf:!1,sort:"fullName"},void 0,!0),Ze.ownGoal||null!==Ze.empNmber&&null!==Ze.redirectFrom){var m=Ze.emp_number;null!==Ze.empNmber&&(m=Ze.empNmber),e.employee=u.getGoalDefaultAssignableEmployee(m).then(function(e){e&&(e.fullName=d.getFullName(e),Ze.employee=e)})}e.maxAttachmentSize=f.getSetting("max_attachment_size"),e.attachmentFileTypes=f.getSetting("attachmentFileTypes"),Qe.fetchGoalChildren(Ze.goalId).then(function(e){Ze.childGoals=e.data,Ze.unDeletableIds=_.map(e.meta.notDeletableIds,function(e){return e.toString()}),Qe.setGoalChildrenList(Ze)}),l.show(),c.all(e).then(function(e){var t=e.additionalEmployees.data.data;Ze.additionalEmployeesChoices=r.getItemsForMultyselectAutocomplete(t,function(e){var t=d.getFullName(e);return{id:e.empNumber,name:t,employeeId:e.employeeId}}),Ze.goalWorkflowStatuses=e.goalWorkflowStatuses.data.data,Ze.goalWorkflowStatus=e.goalWorkflowStatuses.data.meta.status,Ze.goalLevels=r.getEnumAndTitleMapForSelect(e.goalLevels);var a=_.sortBy(e.goalPriorities,"viewOrder");Ze.goalPriorities=r.getEnumAndTitleMapForSelect(a),Ze.goalStatus=Q(e.goalStatuses),Ze.goalTemplates=r.getEnumAndTitleMapForSelect(e.goalTemplates.data),Ze.locations=r.getLocationsListForHierarchicalMultiSelect(e.locations),Ze.jobTitles=Y(r.getItemsForMultyselectAutocomplete(e.jobTitles,function(e){return{id:e.id,name:e.jobTitleName}})),Ze.subunits=r.getSubunitsListForHierarchicalMultiSelect(e.subunits),Ze.performanceEvaluatorGroups=r.getOptionListForSingleLevelHierarchicalMultiSelectFromObjects(e.performanceEvaluatorGroups),Ze.goalNames=e.goalNames,Ze.goalState="0",null!==Ze.goalId&&(Ze.goalState=Ze.performanceGoal.status),Ze.ownGoalReadOnly=!0,Ze.parentGoalId&&parseInt(Qe.getCategoryId(),10)!==b.GOAL_CATEGORY_ID?Ze.ownGoalReadOnly=Qe.isOwnGoalReadOnly(e.parentGoal.meta):Ze.ownGoalReadOnly=Qe.isOwnGoalReadOnly(),e.parentGoal&&(Ze.parentGoal=e.parentGoal.data),Ze.goalMetricNumberFormatsEnumAndTitleMap=r.getEnumAndTitleMapForSelect(e.goalMetricNumberFormats,{name:"format",value:"id"}),Ze.maxAttachmentSize=e.maxAttachmentSize,Ze.attachmentFileTypes=e.attachmentFileTypes,U(),Ye()})}function q(e){return(Ze.permission.update||Ze.permission.create)&&Qe.getCategoryId()!==b.KEY_RESULT_CATEGORY_ID?u.fetchGoalTemplates(e):c.when({data:[]})}function H(e){var t=[],a=void 0!=Ze.performanceGoal&&void 0!=Ze.performanceGoal.parentGoal?Ze.performanceGoal.parentGoal:null,i=[a];Ze.parentGoalId&&i.push(Ze.parentGoalId);var o={level:Ze.goalLevel,category:Qe.getCategoryId(),purposeIds:[Qe.getDefaultGoalPurpose()],additionalGoalIds:i};return e&&(o.name=e),Ze.hasEssRoleOnly||t.push("employeeName"),Qe.getCategoryId()!==b.KEY_RESULT_CATEGORY_ID?u.fetchGoalNamesFormatted({filter:o,include:t,goalIdToExcludeChildren:Ze.goalId,limit:10}).then(function(e){return _.remove(e,function(e){return e.id===Ze.goalId}),Ze.goalNames=e,e}):c.when([])}function U(){if(Ze.model=Qe.initModel({goalId:Ze.goalId,model:Ze.model,performanceGoal:Ze.performanceGoal,performanceEvaluatorGroups:Ze.performanceEvaluatorGroups,pageTitle:Ze.pageTitle,empNmber:Ze.empNmber,ownGoal:Ze.ownGoal,redirectFrom:Ze.redirectFrom,employee:Ze.employee,goalLevel:Ze.goalLevel,goalPriority:Ze.goalPriority,keyResults:Ze.childGoals,parentGoal:Ze.parentGoal,goalState:Ze.goalState,addingSubGoal:Ze.addingSubGoal}),null!==Ze.goalId){Ze.bulkAssignDisabled=!0,Ze.disableAllFields=Ze.performanceGoal.readOnly&&Ze.ownGoal||Ze.model.goalLevel==Ze.businessGoalsLevelId&&!Ze.isAdmin||Ze.readOnly,Ze.statusDisabled=!1,Ze.submitButttonText="Update",J(),K(),P();var t=_.filter(Ze.goalTemplates.titleMap,function(e){return e.name==Ze.performanceGoal.name});t.length>0?Ze.templateId=t[0].value:Ze.templateId=null,"my_goals"===Ze.listType&&Ze.goalLevel===Ze.businessGoalsLevelId&&(Ze.canAddKeyResults=!1)}else Ze.statusDisabled=!0,Ze.submitButttonText="Save";Ze.requiredArray=["name","dueDate","selectedEmployee"],Ze.dataLoaded=!0,Ze.ownGoal?W():X();var a=Qe.getNavbarParameters(Ze);Qe.initNavbar(a),T.$broadcast("SingleMenuItemTopRibbonControllerMenuChanged",{menuItem:Ze.pageTitle}),l.hide(),n.remove(),e.$applyAsync(function(){$(".material-tooltip").hide()}),Ze.submitInProgress=!1,z(),Ze.dataLoadedForWatchers=!0}function W(){var e={businessGoalsLevelId:Ze.businessGoalsLevelId,goalId:Ze.goalId,goalPurpose:Ze.goalPurpose,goalCategoryId:Ze.goalCategoryId,model:Ze.model};return w.getEmployeeListForWidget(null,e,!0,null).then(function(e){1==e.length&&(Ze.ownGoalReadOnly=!0),X()})}function Y(e){return e.unshift({id:0,name:" All",displayValue:m.instant("All")}),e}function J(){Ze.commentConfiguration={title:Z(),save:function(e){return u.saveComment(Ze.goalId,e)},fetch:function(){return u.fetchComments(Ze.goalId,Ze.goalVersion)},"delete":function(e){return u.deleteComments(Ze.goalId,e)},commentSize:2048,readOnly:Ze.disableAllFields},Ze.goalCommentConfigurationLoaded=!0}function K(){Ze.attachmentConfiguration={title:"Attachments",maxAttachmentSize:Ze.maxAttachmentSize,attachmentFileTypes:Ze.attachmentFileTypes,attachmentFileTypesDisplayName:Ze.attachmentFileTypesDisplayName,isRequired:!0,save:function(e){var t={fileName:e.file.filename,fileSize:e.file.filesize,fileType:e.file.filetype,file:e.file.base64};return u.saveAttachment(Ze.goalId,t)},fetch:function(){return u.fetchAttachments(Ze.goalId,Ze.goalVersion)},"delete":function(e){return u.deleteAttachments(Ze.goalId,e)},download:function(e){u.downloadAttachments(Ze.goalId,Ze.goalVersion,e)},commentSize:2048,readOnly:Ze.disableAllFields},Ze.goalAttachmentConfigurationLoaded=!0}function Z(){var e=Qe.getCategoryId(),t="";switch(e){case b.GOAL_CATEGORY_ID:t="Goal";break;case b.OBJECTIVE_CATEGORY_ID:t="Objective";break;case b.KEY_RESULT_CATEGORY_ID:t="Key Result"}return t+" Comments"}function Q(e){var t=[],a=[];for(var o in e)e.hasOwnProperty(o)&&(t.push({value:e[o].id,name:i.getLocalizedCustom(e[o].name),displayOrder:e[o].displayOrder}),a.push(e[o].id));return{titleMap:t,"enum":a}}function X(){Ze.employeeIdsToSkip=[],Ze.goalLevel===Ze.businessGoalsLevelId&&(Ze.employeeIdsToSkip=[Ze.emp_number]),void 0!==Ze.model.selectedEmployee&&Ze.emp_number==Ze.model.selectedEmployee.empNumber&&(Ze.model.readOnly=!1);var e=Ke();Ze.schema=Qe.initSchema({schema:Ze.schema,model:Ze.model,requiredArray:Ze.requiredArray,employeeIdsToSkip:Ze.employeeIdsToSkip,performanceEvaluatorGroups:Ze.performanceEvaluatorGroups,goalMetricNumberFormatsEnumAndTitleMap:Ze.goalMetricNumberFormatsEnumAndTitleMap,goalLevels:Ze.goalLevels,goalPriorities:Ze.goalPriorities,locations:Ze.locations,subunits:Ze.subunits}),Ze.form=Qe.initForm({tinyMceEditor:e,form:Ze.form,model:Ze.model,jobTitles:Ze.jobTitles,locations:Ze.locations,subunits:Ze.subunits,resetDefaultDate:Ze.resetDefaultDate,businessGoalsLevelId:Ze.businessGoalsLevelId,goalId:Ze.goalId,performanceEvaluatorGroups:Ze.performanceEvaluatorGroups,goalStatus:Ze.goalStatus,goalMetricNumberFormatsEnumAndTitleMap:Ze.goalMetricNumberFormatsEnumAndTitleMap,submitButttonText:Ze.submitButttonText,parentGoalIdInUrl:Ze.parentGoalIdInUrl,listType:Ze.listType,listName:Ze.listName,templateId:Ze.templateId,validateGoalNameLength:Ze.validateGoalNameLength,selectedGoalName:Ze.selectedGoalName,selectedEmployeeReadOnly:u.getFormFieldRestrictions("selectedEmployee",Ze).readOnly,statusReadOnly:u.getFormFieldRestrictions("status",Ze).readOnly,statusVisible:u.getFormFieldRestrictions("status",Ze).visible,
evaluatorsReadOnly:u.getFormFieldRestrictions("evaluators",Ze).readOnly,goalLevelReadOnly:u.getFormFieldRestrictions("goalLevel",Ze).readOnly,goalPriorityReadOnly:u.getFormFieldRestrictions("goalPriority",Ze).readOnly,dueDateReadOnly:u.getFormFieldRestrictions("dueDate",Ze).readOnly,addToLibraryReadOnly:u.getFormFieldRestrictions("addToLibrary",Ze).readOnly,goalNameReadOnly:u.getFormFieldRestrictions("name",Ze).readOnly,ratingReadOnly:u.getFormFieldRestrictions("rating",Ze).readOnly,parentGoalReadOnly:u.getFormFieldRestrictions("parentGoal",Ze).readOnly,metricNameReadOnly:u.getFormFieldRestrictions("metricUnitOfMeasurement",Ze).readOnly,metricEnabledReadOnly:u.getFormFieldRestrictions("metricEnabled",Ze).readOnly,metricReadOnly:u.getFormFieldRestrictions("metric",Ze).readOnly,readOnlyForAssigneeReadOnly:u.getFormFieldRestrictions("readOnly",Ze).readOnly,schema:Ze.schema,goalLevels:Ze.goalLevels,goalPriorities:Ze.goalPriorities,goalLevelOnChange:Ze.goalLevelOnChange,cancelAddGoal:Ze.cancelAddGoal,getInitialName:Ze.getInitialName,getInitialParentGoal:Ze.getInitialParentGoal,getFormattedNamesBasedOnGoalCategory:Ze.getFormattedNamesBasedOnGoalCategory,selectedParentGoal:Ze.selectedParentGoal,isEmployeeSelectionFilterSelected:Ze.isEmployeeSelectionFilterSelected,goalWorkflowStatus:Ze.goalWorkflowStatus,goalWorkflowStatuses:Ze.goalWorkflowStatuses,goalState:Ze.goalState,removePristine:Ze.removePristine,goalPurpose:Ze.goalPurpose,goalCategoryId:Ze.goalCategoryId,individualGoalsLevelId:Ze.individualGoalsLevelId,goalMaxCompletionPercentage:Ze.goalMaxCompletionPercentage,additionalEmployeesChoices:Ze.additionalEmployeesChoices,isAddGoal:!Ze.goalId,workflowStatusObject:Ze.performanceGoal&&Ze.performanceGoal.goalWorkflowStatus?Ze.performanceGoal.goalWorkflowStatus:void 0}),Ze.iconButtons=Qe.getActionableApproveRejectWorkflowActionButtons({goalWorkflowStatus:Ze.goalWorkflowStatus,goalWorkflowStatuses:Ze.goalWorkflowStatuses})}function ee(){if(Ze.submitInProgress)return!1;var e={ids:[Ze.goalId]};u.sendReminders(e)}function te(e){t.go(".",{listType:Ze.listType,category:b.KEY_RESULT_CATEGORY_NAME,goalId:e.id,parentGoalId:Ze.goalId},{notify:!0})}function ae(e,t){if(void 0!==Ze.model.status&&void 0!==t&&u.isGoalInAnApprovedStatus(Ze.model)&&Ze.dataLoadedForWatchers){void 0===e&&(e=0),OhrmBig(e).gt(OhrmBig(Ze.goalMaxCompletionPercentage))&&(e=angular.copy(Ze.goalMaxCompletionPercentage));var a=Qe.getStatusIdBasedOnCompletion(e,Ze.model.status),i=a.toString();i!==Ze.model.status&&(Ze.model.status=i)}}function ie(t,a){var i=0;if(Ze.dataLoadedForWatchers&&oe()&&ne()&&(i=Qe.getGetCompletionBasedOnMetricValues(Ze.model.metricNumberFormat,Ze.model.metricStartValue,Ze.model.metricTargetValue,Ze.model.metricCurrentValue),Ze.model.rating.toString()!==i.toString())){Ze.model.rating=i,e.$broadcast("updateRoundSlideValue",Ze.model.rating,Ze.goalId);var o=Qe.getStatusIdBasedOnCompletion(i,Ze.model.status),n=o.toString();n!==Ze.model.status&&(Ze.model.status=n)}}function oe(){return void 0!==Ze.model.metricNumberFormat&&""!==Ze.model.metricNumberFormat}function ne(){return void 0!==Ze.model.metricStartValue&&""!==Ze.model.metricStartValue&&void 0!==Ze.model.metricTargetValue&&""!==Ze.model.metricTargetValue&&void 0!==Ze.model.metricCurrentValue&&""!==Ze.model.metricCurrentValue}function le(t,a){void 0!==t&&t!==a&&!Ze.model.metricEnabled&&Ze.dataLoadedForWatchers&&(Ze.model.rating=Qe.getCompletionBasedOnStatusId(t,Ze.model.rating),e.$broadcast("updateRoundSlideValue",Ze.model.rating,Ze.goalId))}function re(t,a){void 0===t||void 0===a||t||t===a||(Ze.model.rating=0,e.$broadcast("updateRoundSlideValue",Ze.model.rating,Ze.goalId))}function se(){Ze.model.name&&Ze.model.name.length>Ze.schema.properties.name.maxLength?e.$broadcast("schemaForm.error.name","tv4-201",!1):e.$broadcast("schemaForm.error.name","tv4-201",!0)}function ce(e,t){var a=!1;e!==t&&(e?(Ze.model.selectedEmployee=void 0,Ze.model.employee_name=""):(Ze.model.jobTitles={},Ze.model.locations={},Ze.model.subunits={}),null===Ze.goalId&&(a=ge())),a&&he()}function de(e,t){var a=!1,i=!1;e!==t&&null===Ze.goalId&&(a=fe(),i=ge()),(a||i)&&he()}function me(e,t){var a=!1;e!==t&&null===Ze.goalId&&(a=ge()),a&&Qe.getCategoryId()!==b.KEY_RESULT_CATEGORY_ID&&he()}function ue(e,t){var a=e&&e.empNumber||null,i=Ze.ownGoal||void 0!==Ze.model.selectedEmployee&&Ze.emp_number==Ze.model.selectedEmployee.empNumber;z();var n={goalId:Ze.goalId,isOwnGoal:i,goalPurposeId:Ze.goalPurpose};a&&(n.employeeNumber=a),Ze.ownGoal||Qe.getCategoryId()===b.KEY_RESULT_CATEGORY_ID||o.call("goalWorkflowStatuses","GET",[],n,void 0,!0).then(function(e){Ze.goalWorkflowStatuses=e.data.data,he()})}function pe(){!Ze.removePristine&&Ze.dataLoaded&&Qe.getCategoryId()==b.KEY_RESULT_CATEGORY_ID&&he()}function fe(){var e=!1;return Ze.model.addToLibrary?Ze.requiredArray.indexOf("selectedEmployee")!==-1&&(Ze.requiredArray.splice(Ze.requiredArray.indexOf("selectedEmployee"),1),e=!0):Ze.requiredArray.indexOf("selectedEmployee")===-1&&(Ze.requiredArray.push("selectedEmployee"),e=!0),e}function ge(){var e=!1;return Ze.model.addToLibrary&&"undefined"==typeof Ze.model.selectedEmployee&&!Ze.model.bulkAssign?"undefined"!=typeof Ze.model.selectedEmployee||Ze.model.employee_name||Ze.requiredArray.indexOf("dueDate")!==-1&&(Ze.requiredArray.splice(Ze.requiredArray.indexOf("dueDate"),1),e=!0):Ze.requiredArray.indexOf("dueDate")===-1&&(Ze.requiredArray.push("dueDate"),e=!0),e}function he(){Ze.dataLoaded&&X()}function ve(t){if(Ze.goalLevel=t,t!==Ze.individualGoalsLevelId&&(Ze.model.readOnly=!1,Ze.model.bulkAssign=!1,Ze.model.jobTitles={},Ze.model.locations={},Ze.model.subunits={}),Ze.model.parentGoal=null,Ze.selectedParentGoal=null,he(),Ze.model.selectedEmployee&&Ze.model.selectedEmployee.fullName){var a={businessGoalsLevelId:Ze.businessGoalsLevelId,goalId:Ze.goalId,goalPurpose:Ze.goalPurpose,goalCategoryId:Ze.goalCategoryId,model:Ze.model};w.getEmployeeListForWidget(Ze.model.selectedEmployee.fullName,a,!0,null).then(function(t){0===t.length&&e.$broadcast("schemaForm.error.selectedEmployee","invalid",m.instant("Invalid"))})}var a={filter:{name:Ze.model.name,level:Ze.model.goalLevel}},i={};i.goalTemplates=q(a),c.all(i).then(function(e){Ze.templateId=null,Ze.model.templateId=null,e.goalTemplates.data.forEach(function(e){e.name===Ze.model.name&&(Ze.templateId=e.id,Ze.model.templateId=e.id)})})}function ye(){var e=_(Ze.goalNames).where({id:Ze.model.parentGoal}).valueOf();return e.forEach(function(e){e.titleField=e.name}),e.length?e[0]:null}function be(){var e={};return e.titleField=Ze.model.name}function Ce(){if(Ze.parentGoalIdInUrl&&(Ze.addingSubGoal||Ze.addingKeyResult))window.top.history.back();else if(null!==Ze.empNmber&&null!==Ze.redirectFrom&&"employeeProfile"!==Ze.redirectFrom)p.location.href=Ze.referrer;else switch(Ze.listName){case"performanceGoalsList":t.go("performance.goals.approved");break;case"performanceUnApprovedGoalsList":t.go("performance.goals.unapproved");break;case"performanceMyGoalsList":t.go("performance.goals.my");break;case"performanceUnApprovedMyGoalsList":t.go("performance.goals.my_unapproved")}}function we(e,a){Ze.addingGoal||Ze.addingObjective?t.go(".",{listType:Ze.listType,category:Qe.getCategoryName(),goalId:e,parentGoalId:null,action:null},{notify:!0,location:"replace"}):Ze.parentGoalIdInUrl&&(Ze.addingSubGoal||Ze.addingKeyResult)?window.top.history.back():a()}function _e(t,a){if(!Ze.removePristine&&Qe.getCategoryId()==b.KEY_RESULT_CATEGORY_ID)return Ze.removePristine=!0,he(),k(function(){_e(t,a)}),!0;if(Qe.doExtraValidations(Ze.model,!1,null,{goalMaxCompletionPercentage:Ze.goalMaxCompletionPercentage}),e.$broadcast("schemaFormValidate",t.$name),De(),Te(),void 0!==Ze.model.selectedEmployee&&void 0!==Ze.model.selectedEmployee.purged_at&&null!==Ze.model.selectedEmployee.purged_at&&e.$broadcast("schemaForm.error.selectedEmployee","invalid",m.instant("Invalid")),t.$valid&&!Ze.submitInProgress)if(n.remove(),Ze.submitInProgress=!0,Ze.goalId){var l=Ae();Qe.update({filteredModel:l,parentGoal:Ze.parentGoal,model:Ze.model,categorySpecificParams:Ze.categorySpecificParams}).then(function(t){200==t.status?(e.$emit("refreshGoalList",!0),Ze.goalId=t.data.data.id,null!==Ze.empNmber&&null!==Ze.redirectFrom&&"employeeProfile"!==Ze.redirectFrom?(Ze.submitInProgress=!1,localStorage.setItem("toast",i.getLocalizedCustom("Successfully Updated")),p.location.href=Ze.referrer):(i.successToast(i.getLocalizedCustom(t.data.messages.success)),l.actionComment&&(Ze.actionComment=null,e.$broadcast("reloadComments")),xe())):Fe()},function(e){i.errorToast(i.getLocalizedCustom(e.data.title)),Ze.submitInProgress=!1})}else if(Ze.model.bulkAssign){var l=Ee(),r={updateFinished:!1},s={progressModal:u.openProgressModal(r),bulkAssign:o.call("goals/bulkAssign","POST",l,{}).then(function(e){return r.updateFinished=!0,e})};c.all(s).then(function(t){e.$emit("refreshGoalList",!0);var a=t.bulkAssign.data.messages.success,o=t.bulkAssign.data.data.lastGoalId;t.bulkAssign.data.data.count>0?(Ze.goalId=parseInt(o,10),a?(localStorage.setItem("toast",i.getLocalizedCustom(a)),we(Ze.goalId,xe)):(i.errorToast("Failed to Save"),Ze.submitInProgress=!1)):(i.warningToast("No Matching Employees for the Selected Criteria"),Ze.submitInProgress=!1,Fe())},function(e){Ze.submitInProgress=!1,r.updateFinished=!0,e&&e.data&&e.data.details&&i.errorToast(e.data.details)})}else{var l=ke();Qe.create({filteredModel:l,parentGoal:Ze.parentGoal,model:Ze.model,categorySpecificParams:Ze.categorySpecificParams}).then(function(t){t.data.success?(e.$emit("refreshGoalList",!0),Ze.goalId=t.data.data.id,localStorage.setItem("toast",i.getLocalizedCustom("Successfully Saved")),null!==Ze.empNmber&&null!==Ze.redirectFrom&&"employeeProfile"!==Ze.redirectFrom?(Ze.submitInProgress=!1,p.location.href=Ze.referrer):we(Ze.goalId,xe)):(i.warningToast(t.data.messages.warning),i.successToast(t.data.messages.success),Fe())})}}function Se(){return Ze.model.locations&&Ze.model.locations.length>0||Ze.model.subunits&&Ze.model.subunits.length>0||_.keys(Ze.model.jobTitles).length>0||_.keys(Ze.model.additionalEmployees).length>0}function De(){Ze.model.bulkAssign?Se()?e.$broadcast("schemaForm.error.bulkAssign","selectionCriteriaRequired",!0):e.$broadcast("schemaForm.error.bulkAssign","selectionCriteriaRequired",i.getLocalizedCustom("Please select bulk assign criteria")):e.$broadcast("schemaForm.error.bulkAssign","selectionCriteriaRequired",!0)}function Te(){Ze.model.bulkAssign||Ze.model.addToLibrary||Ze.model.selectedEmployee||e.$broadcast("schemaForm.error.selectedEmployee","tv4-302",!0)}function xe(){var e={};e.goal=o.call("goal/"+Ze.goalId,"GET",[],{});var t=Ze.ownGoal||null!=Ze.emp_number&&Ze.emp_number==Ze.empNmber||null!=Ze.emp_number&&void 0!==Ze.model&&void 0!==Ze.model.selectedEmployee&&void 0!==Ze.model.selectedEmployee.empNumber&&Ze.emp_number==Ze.model.selectedEmployee.empNumber;e.goalWorkflowStatuses=o.call("goalWorkflowStatuses","GET",[],{goalId:Ze.goalId,isOwnGoal:t,goalPurposeId:Ze.goalPurpose},void 0,!0),c.all(e).then(function(e){Ze.goalWorkflowStatuses=e.goalWorkflowStatuses.data.data,Ze.goalWorkflowStatus=e.goalWorkflowStatuses.data.meta.status,Ze.performanceGoal=e.goal.data.data,Ze.goalState=Ze.performanceGoal.status;var t=e.goal.data.meta;Ze.readOnly=t.readOnly,Ze.goalOwnerHasWorkEmail=t.hasWorkEmail,Ze.ownGoal=t.ownGoal,J(),Ze.goalLevel=Ze.performanceGoal.goalLevel;var a={},i={level:Ze.model.goalLevel};a.filter=i,q(a).then(function(e){Ze.goalTemplates=r.getEnumAndTitleMapForSelect(e.data);var t=_.filter(Ze.goalTemplates.titleMap,function(e){return e.name==Ze.model.name});t.length>0?(Ze.templateId=t[0].value,Ze.model.addToLibrary=!1):Ze.templateId=null,Qe.setGoalChildrenList(Ze),U(),Ze.pageTitle=Qe.getPageTitle(Ze)})})}function Fe(){var e={},t={level:Ze.model.goalLevel};e.filter=t,u.fetchGoalTemplates(e).then(function(e){Ze.goalTemplates=r.getEnumAndTitleMapForSelect(e.data);var t=_.filter(Ze.goalTemplates.titleMap,function(e){return e.name==Ze.model.name});t.length>0?(Ze.templateId=t[0].value,Ze.model.addToLibrary=!1):Ze.templateId=null,he(),Ze.submitInProgress=!1})}function ke(){var e={};if(!Ze.model.bulkAssign){var t=null;if(Ze.model.selectedEmployee)var t=Ze.model.selectedEmployee.empNumber;e={templateId:void 0===Ze.model.templateId?null:Ze.model.templateId,name:Ze.model.name,description:Ze.model.description,goalLevel:Ze.model.goalLevel,goalPriority:Ze.model.goalPriority,dueDate:Me(),rating:Qe.getRatingToSave(Ze.model),parentGoal:void 0===Ze.model.parentGoal?null:Ze.model.parentGoal,assignTo:t,status:Ze.model.status,readOnly:Ze.model.readOnly,evaluators:Ze.model.evaluators,addToLibrary:Ze.model.addToLibrary,bulkAssign:Ze.model.bulkAssign,action:Ze.performedAction,goalPurpose:Ze.goalPurpose}}return e}function Ee(){var e={};if(Ze.model.bulkAssign&&(e={templateId:void 0===Ze.model.templateId?null:Ze.model.templateId,name:Ze.model.name,description:Ze.model.description,goalLevel:Ze.model.goalLevel,goalPriority:Ze.model.goalPriority,dueDate:Me(),rating:Ze.model.rating.toString(),parentGoal:void 0===Ze.model.parentGoal?null:Ze.model.parentGoal,status:Ze.model.status,readOnly:Ze.model.readOnly,evaluators:Ze.model.evaluators,addToLibrary:Ze.model.addToLibrary,bulkAssign:Ze.model.bulkAssign,locations:[],jobTitles:[],subunits:[],additionalEmployees:[],action:Ze.performedAction,category:Qe.getCategoryId(),goalPurpose:Ze.goalPurpose}),Ze.model.jobTitles&&Object.keys(Ze.model.jobTitles).length)for(var t in Ze.model.jobTitles)Ze.model.jobTitles.hasOwnProperty(t)&&e.jobTitles.push(t);if(Ze.model.locations&&Ze.model.locations.length>0&&(e.locations=angular.copy(Ze.model.locations)),Ze.model.subunits&&Ze.model.subunits.length>0&&(e.subunits=angular.copy(Ze.model.subunits)),Ze.model.additionalEmployees&&Object.keys(Ze.model.additionalEmployees).length>0)for(var t in Ze.model.additionalEmployees)Ze.model.additionalEmployees.hasOwnProperty(t)&&e.additionalEmployees.push(t);return e}function Ie(){return!Ze.ownGoal&&(Ze.isAdmin||Ze.isSupervisor||Ze.isDepartmentHead)}function Ae(){var e=null;Ze.model.selectedEmployee&&(e=Ze.model.selectedEmployee.empNumber);var t={templateId:void 0===Ze.model.templateId?null:Ze.model.templateId,name:Ze.model.name,description:Ze.model.description,goalLevel:Ze.model.goalLevel,goalPriority:Ze.model.goalPriority,dueDate:Me(),rating:Qe.getRatingToSave(Ze.model),parentGoal:void 0===Ze.model.parentGoal?null:Ze.model.parentGoal,assignTo:e,status:Ze.model.status,evaluators:Ze.model.evaluators,addToLibrary:Ze.model.addToLibrary,action:Ze.performedAction,goalPurpose:Ze.goalPurpose};return"2"===Ze.model.goalLevel&&Ie()&&(t.readOnly=Ze.model.readOnly),Ze.actionComment&&(t.actionComment=Ze.actionComment),t}function Me(){return Ze.model.dueDate?g.toStandardDate(Ze.model.dueDate):null}function Le(e){return e===b.GOAL_WORKFLOW_APPROVE_ACTION||e===b.GOAL_WORKFLOW_REJECT_ACTION}function Pe(e){F.showModal("app/performance/goals/approvalConfirmation/approve-reject-confirmation-modal.html","GoalsApproveRejectConfirmationModalController","modal",{title:$e()+" "+Ne(e)+" Confirmation",action:e}).then(function(e){e&&e.action&&(Ze.performedAction=e.action,Ze.actionComment=e.note,Ze.onSubmit(Ze.scope.addGoalForm))})}function $e(){var e="";switch(Qe.getCategoryId()){case b.GOAL_CATEGORY_ID:e="Goal";break;case b.OBJECTIVE_CATEGORY_ID:e="Objective"}return e}function Ne(e){var t="";switch(e){case b.GOAL_WORKFLOW_APPROVE_ACTION:t="Approval";break;case b.GOAL_WORKFLOW_REJECT_ACTION:t="Rejection"}return t}function Oe(){t.go(".",{listType:Ze.listType,category:b.KEY_RESULT_CATEGORY_NAME,goalId:null,parentGoalId:Ze.goalId,parentGoalLevel:Ze.goalLevel,action:"add_key_result",redirectFrom:Ze.redirectFrom})}function Re(){return!Ze.submitInProgress&&void t.go(".",{listType:Ze.listType,category:Qe.getCategoryName(),goalId:null,parentGoalId:Ze.goalId,parentGoalLevel:Ze.goalLevel,action:"add_sub_goal"})}function ze(e,t){e.length>0&&F.showDeleteConfirmationModal(i.getLocalizedCustom("The selected "+t+"(s) will be permanently deleted. Are you sure you want to continue?")).then(function(t){t===!0&&je(e)})}function je(t){t.length>0&&(l.show(),u.deleteGoals({ids:t,listType:Ze.listType},Ze.goalCategoryId).then(function(){l.hide(),i.showLocalizedToast("deleteSuccess");var t={};t.childGoals=Qe.fetchGoalChildren(Ze.goalId),t.goal=o.call("goal/"+Ze.goalId,"GET",[],{}).then(function(e){return e.data.data}),c.all(t).then(function(t){Ze.model.rating=t.goal.rating,Ve(t.goal.status),Ze.model.status=t.goal.status,Ze.performanceGoal=t.goal,e.$broadcast("updateRoundSlideValue",Ze.model.rating,Ze.goalId),Ze.childGoals=t.childGoals.data,Ze.unDeletableIds=_.map(t.childGoals.meta.notDeletableIds,function(e){return e.toString()}),e.$emit("refreshGoalList",!0),Qe.setGoalChildrenList(Ze),X(),e.$broadcast("schemaFormRedraw")})["finally"](function(){l.hide()})},function(e){l.hide(),n.error(i.getLocalizedCustom(e.data.details))}))}function Ve(e){Ze.model.status!==e&&(Ze.dataLoaded=!1,k(function(){Ze.dataLoaded=!0}))}function Ge(){Ze.showSummary=!Ze.showSummary}function Be(){return!(!Ze.goalId||!Ze.hasSummaryView)}function qe(){return Ze.goalId&&Ze.hasSummaryView?void(Ze.showSummary=!0):void(Ze.showSummary=!1)}function He(){return Ze.showSummary}function Ue(){return Ze.showSummary?"More Details":"Hide Details"}function We(){return Ze.showSummary?"keyboard_arrow_down":"keyboard_arrow_up"}function Ye(){Ze.summaryMasterData={evalGroups:Ze.performanceEvaluatorGroups.titleMap,levels:Ze.goalLevels.titleMap,priorities:Ze.goalPriorities.titleMap,statuses:Ze.goalStatus.titleMap,statusVisible:"true"===u.getFormFieldRestrictions("status",Ze).visible,goalMaxCompletionPercentage:Ze.goalMaxCompletionPercentage,includeIncrementSpinner:Qe.getCategoryId!==b.OBJECTIVE_CATEGORY_ID&&Qe.getCategoryId!=b.KEY_RESULT_CATEGORY_ID}}function Je(e){tinymce&&(Ze.attachmentSizeInMb=e.max_attachment_size/1048576,tinymce.image_type_error=function(){n.error(i.getLocalizedCustom("File Type Not Allowed"))},tinymce.image_size_error=function(){n.warning(i.getLocalizedCustomWithVariables("File Size Should Be Less than {{maxSize}}MB",{maxSize:Ze.attachmentSizeInMb}))},tinymce.max_image_size_=function(){return e.max_attachment_size},tinymce.allowed_file_types=function(){return e.allowed_image_types})}function Ke(){var e={type:"tinymce",htmlClass:"col-12",tinymceOptions:{selector:".tinymce-heading",branding:!1,autoresize_bottom_margin:0,autoresize_min_height:160,autoresize_max_height:160,forced_root_block_attrs:{style:"color: #818181; font-family: Arial, Roboto, Helvetica, sans-serif; font-size: 14px;"},menubar:!1},key:"description"};return u.getFormFieldRestrictions("description",Ze).readOnly?(e.tinymceOptions.readonly=1,e.tinymceOptions.toolbar=!1):(e.tinymceOptions.toolbar1="toggleToolbar |  fontselect fontsizeselect | bold italic underline | bullist numlist outdent indent ",e.tinymceOptions.toolbar2="undo redo | link image image-upload  | alignleft aligncenter alignright alignjustify | forecolor backcolor ",e.maxImageSizeValidationMessage="*"+i.getLocalizedCustomWithVariables("File size should be less than {{maxSize}}MB",{maxSize:Ze.attachmentSizeInMb}),e.validationMessage={characterLengthValidation:x.textLengthExceedValidation.message(1e4),lengthValidation:i.getLocalizedCustom("Allowed content size exceeded")},e.$validators={characterLengthValidation:function(){return!tinyMCE.activeEditor||tinyMCE.activeEditor.getBody().innerText.length<=1e4},lengthValidation:function(){return!tinyMCE.activeEditor||tinyMCE.activeEditor.getContent().length<=16e6}}),e}var Ze=this,Qe=h(a.category);Ze.scope=e,Qe.setScope(Ze),Ze.categorySpecificParams=Qe.getCategorySpecificParameters(a),Ze.goalCategoryId=Qe.getCategoryId(),Ze.goalPurpose=null,Ze.businessGoalsLevelId="1",Ze.individualGoalsLevelId="2",Ze.mediumGoalPriorityId="2",Ze.dataLoaded=!1,Ze.dataLoadedForWatchers=!1,Ze.onSubmit=_e,Ze.cancelAddGoal=Ce,Ze.editKeyResult=te,Ze.addKeyResult=Oe,Ze.addSubGoal=Re,Ze.deleteSelection=ze,Ze.goalId=a.goalId,Ze.goalVersion=a.version,Ze.listType=a.listType,Ze.empNmber=a.empNumber,Ze.redirectFrom=a.redirectFrom,Ze.referrer=a.referrer?decodeURIComponent(a.referrer):null,Ze.parentGoalLevel=a.parentGoalLevel,Ze.addingGoal="add_goal"==a.action,Ze.addingSubGoal="add_sub_goal"==a.action,Ze.addingObjective="add_objective"==a.action,Ze.addingKeyResult="add_key_result"==a.action,Ze.bulkAssignDisabled=!1,Ze.isAdmin=!1,Ze.isSupervisor=!1,Ze.hasEssRoleOnly=!0,Ze.templateId=null,Ze.model={},Ze.submitInProgress=!1,Ze.attachmentSizeInMb=1,Ze.resetDefaultDate={reset:!1},Ze.performedAction=null,Ze.showGoalChildren=Qe.showGoalChildren(),Ze.parentGoalId=a.parentGoalId,Ze.parentGoalIdInUrl=a.parentGoalId,Ze.parentGoal=null,Ze.goalMetricNumberFormatsEnumAndTitleMap={},Ze.childGoals=[],Ze.schema={},Ze.form=[],Ze.canAddKeyResults=!0,Ze.removePristine=!1,Ze.canPeformKeyResultsActions=!1,Ze.validateGoalNameLength=se,Ze.getInitialName=be,Ze.goalLevelOnChange=ve,Ze.isEmployeeSelectionFilterSelected=Se,Ze.getInitialParentGoal=ye,Ze.getFormattedNamesBasedOnGoalCategory=H,Ze.listName=a.listName,Ze.pageTitle=Qe.getPageTitle(Ze),Ze.isKeyResultEditMode=Qe.isKeyResultEditMode(Ze),Ze.categoryIcon=Qe.getCategoryIcon(Ze),Ze.hasSummaryView=Qe.hasSummary(),Ze.detailButtonClicked=Ge,Ze.showActionPanel=Be,Ze.getShowSummary=He,Ze.getDetailedButtonText=Ue,Ze.getDetailedButtonIcon=We,Ze.deleteSelection=ze,Ze.showSendReminder=N,qe(),I(),e.$watch("vm.model.rating",ae),e.$watch("vm.model.metricStartValue",ie),e.$watch("vm.model.metricTargetValue",ie),e.$watch("vm.model.metricCurrentValue",ie),e.$watch("vm.model.status",le),e.$watch("vm.model.metricEnabled",re),e.$watch("vm.model.bulkAssign",ce,!0),e.$watch("vm.model.addToLibrary",de,!0),e.$watch("vm.model.selectedEmployee",me,!0),e.$watch("vm.model.selectedEmployee",ue,!0),e.$watch("vm.model.employee_name",me,!0),e.$on("goalWorkflowIdChange",function(e,t){var a=t[0];Le(a)?Pe(a):(Ze.performedAction=a,Ze.onSubmit(Ze.scope.addGoalForm))}),e.$on("saveGoal",function(e,t){Ze.onSubmit(Ze.scope.addGoalForm)}),e.$on("redrawFormWithUpdatedSchema",function(){X(),e.$broadcast("schemaFormRedraw")}),e.$on("metricNumberFormatChanged",function(){pe()})}angular.module("app.performance").controller("PerformanceAddGoalController",e),e.$inject=["$scope","$state","$stateParams","localizedMessages","webservice","toast","loader","formHelper","datagroupPermissions","$q","employeeService","$translate","goalService","$window","settingsService","dateService","goalCategoryServiceFactory","listHelper","ModalService","performanceConstants","$filter","performanceGoalCategoryFormService","performanceMetricNumberStrategyService","idpService","$rootScope","formValidationHelper","modalHelperService","$timeout","titleService"]}(),function(){"use strict";function e(e){return{restrict:"E",templateUrl:"app/performance/goals/add/goalSummary/goal-summary.html",scope:{goal:"=",masterData:"="},link:function(e){},controllerAs:"vm",bindToController:!0,controller:t}}function t(e,t,a,i,o,n){function l(){var e="";return y.goal&&(void 0!==y.goal.status&&(e=" "+n.RATING_INDICATOR_STATUS_CLASS_PREFIX+y.goal.status),y.masterData.statusVisible||!y.goal.goalWorkflowStatus||y.goal.goalWorkflowStatus.considerAsApproved||(e=" "+n.RATING_INDICATOR_WORKFLOW_STATUS_CLASS_PREFIX+y.goal.goalWorkflowStatus.id)),e}function r(){return y.goal&&y.goal.selectedEmployee?t.getFullName(y.goal.selectedEmployee):""}function s(){return y.goal&&y.goal.dueDate?a.toLocalizedDate(y.goal.dueDate):""}function c(){if(y.goal&&y.goal.evaluators&&y.goal.evaluators.length>0&&y.masterData&&y.masterData.evalGroups){var e=_.find(y.masterData.evalGroups,"id",y.goal.evaluators[0]);if(e)return e.name}return""}function d(){if(y.goal&&y.goal.evaluators&&y.goal.evaluators.length>0){var e=y.goal.evaluators.length-1;if(e>0)return e}return 0}function m(){if(y.goal&&y.goal.goalLevel&&y.masterData&&y.masterData.levels){var e=_.find(y.masterData.levels,"value",y.goal.goalLevel);if(e)return e.name}return""}function u(){if(y.goal&&y.goal.goalPriority&&y.masterData&&y.masterData.priorities){var e=_.find(y.masterData.priorities,"value",y.goal.goalPriority);if(e)return e.name}return""}function p(){var e="";if(y.goal)if(y.masterData.statusVisible&&void 0!==y.goal.status&&y.masterData&&y.masterData.statuses){var t=_.find(y.masterData.statuses,"value",y.goal.status);t&&(e=t.name)}else y.goal.goalWorkflowStatus&&(e=o.getLocalizedCustom(y.goal.goalWorkflowStatus.displayName));return e}function f(){return y.masterData&&y.masterData.statusVisible?"Status":"Workflow Status"}function g(){var e="";return y.goal&&y.goal.goalLevel&&(e=i.getGoalLevelIcon(y.goal.goalLevel)),e}function h(){var e="";return y.goal&&y.goal.description&&(e=y.goal.description),v(e.replace(/(<((img|a)[^>]+)>)/gi,"")).replace(/\n/g,"<br />")}function v(e){var t=document.createElement("span");return t.innerHTML=e,t.textContent||t.innerText}var y=this;y.getEmployeeName=r,y.getDueDate=s,y.getFirstEvaluatorName=c,y.getEvaluatorGroupCountToShow=d,y.getGoalLevelName=m,y.getGoalPriorityName=u,y.getGoalStatusName=p,y.getGoalLevelIcon=g,y.getGoalDescription=h,y.getGoalStatusLabel=f,y.roundSlideConfig={radius:50,valueSuffix:"%",insideText:"",width:15,handleSize:"15",readOnly:!0,animation:!1,widgetClass:"large-rating"+l(),lazy:!0,allowedMax:y.masterData.goalMaxCompletionPercentage,includeIncrementSpinner:y.masterData.includeIncrementSpinner}}angular.module("app.directives").directive("goalSummary",e),e.$inject=["$translate"],t.$inject=["$scope","employeeService","dateService","goalService","localizedMessages","performanceConstants"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p){function f(){y.schema={type:"object",title:"",properties:{note:{title:g(),type:"string"}}},y.form=[{type:"row",items:[{type:"textarea",htmlClass:"col-12",key:"note"}]}];var e=[];e.push({buttonLabel:i.getLocalizedCustom("Cancel"),"class":"btn btn-tool",onClick:v}),u===p.GOAL_WORKFLOW_APPROVE_ACTION&&e.push({buttonLabel:i.getLocalizedCustom("Approve"),"class":"btn btn-label success",onClick:h,icon:"ohrm_like"}),u===p.GOAL_WORKFLOW_REJECT_ACTION&&e.push({buttonLabel:i.getLocalizedCustom("Reject"),"class":"btn btn-label danger",onClick:h,icon:"ohrm_dislike"}),y.additionalButtons=e}function g(){var e="";switch(u){case p.GOAL_WORKFLOW_APPROVE_ACTION:e="Approval Note";break;case p.GOAL_WORKFLOW_REJECT_ACTION:e="Rejection Note"}return e}function h(){n(y.model)}function v(){n(!1)}var y=this;y.title=m,y.performAction=h,y.cancel=v,y.model={note:"",action:u},f()}angular.module("app.performance").controller("GoalsApproveRejectConfirmationModalController",e),e.$inject=["$state","formHelper","webservice","localizedMessages","employeeService","close","loader","toast","$scope","$stateParams","$q","title","action","performanceConstants"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w){function S(){var e={userData:g.getUserData(),goalPriorities:h.fetchGoalPriorities(),goalStatuses:h.fetchGoalStatuses(),performanceEvaluatorGroups:h.fetchEvaluatorGroups(),settings:y.getSettings(),employees:E(),goalDescendantPermissions:w.fetchGoalDescendantPermissions(u)};d.all(e).then(function(e){W=e.userData.emp_number;var a=_.sortBy(e.goalPriorities,"viewOrder");q.goalPriorities=t.getEnumAndTitleMapForSelect(a),q.performanceEvaluatorGroups=t.getOptionListForSingleLevelHierarchicalMultiSelectFromObjects(e.performanceEvaluatorGroups),q.goalMaxCompletionPercentage=e.settings.performance.goal_max_completion_percentage,Y=e.employees,G(e.goalDescendantPermissions),T()})}function D(){q.model.goalPriority="",q.model.evaluators=[],q.model.assignTo=""}function T(){q.model={assignTo:"",dueDate:"",goalPriority:"",evaluators:[],rating:0,includeSubGoals:!1,otherDetailChangeTitle:!1},q.schema={type:"object",title:"Copy Goal",name:"copy_goal",properties:{assignTo:{title:i.getLocalizedCustom("Assigned To"),type:"object"},dueDate:{title:"Due Date",type:["null","object"]},goalPriority:{title:"Priority",type:"string","enum":q.goalPriorities["enum"]},evaluators:{title:v.instant("Evaluator Groups"),type:"array",items:{"enum":q.performanceEvaluatorGroups["enum"],type:"string"}},rating:{title:"Completion",type:"string"},includeSubGoals:{title:q.includeChildrenLabel,type:"boolean"},changeOtherDetails:{title:K,type:"boolean"},helpNote:{title:U,type:"string"}},required:["dueDate","rating"]},q.form=[{type:"row",items:[{type:"container",htmlClass:"col-2",condition:function(){return x()},items:[M()]},P()]},{type:"divider"},{type:"row",items:[N()]},{type:"row",condition:function(){return q.model.changeOtherDetails},items:[{type:"container",htmlClass:"col-12 shift-margin-top",items:[{type:"row",items:[k(),F(),L()]},{type:"row",items:[{type:"note",key:"helpNote",htmlClass:"col-12"}]}]}]},{type:"row",items:[$()]}]}function x(){return p===m.GOAL_CATEGORY_ID}function F(){return{type:"select",htmlClass:"col-4",key:"goalPriority",titleMap:q.goalPriorities.titleMap}}function k(){return{type:"autocomplete-multiselect",htmlClass:"col-4",key:"assignTo",choices:Y}}function E(){var e={permissionType:I(),goalPurpose:q.goalPurpose},i={filter:e,sort:"fullName",includeSelf:!0};return a.call("goalAssignableEmployees","GET",[],i).then(function(e){return t.getItemsForMultyselectAutocomplete(e.data.data,function(e){var t=o.getFullName(e);return{id:e.empNumber,name:t,employeeId:e.employeeId}})})}function I(){var e=A();return e+"_goal_add"}function A(){return B()?"business":"individual"}function M(){var e={radius:55,valueSuffix:"%",insideText:"",width:17,handleSize:"17",readOnly:!1,animation:!1,widgetClass:"large-rating",allowedMax:q.goalMaxCompletionPercentage,includeIncrementSpinner:!0};return{type:"round-slide",key:"rating",config:e,showLabel:!0}}function L(){return{type:"tree-select",htmlClass:"col-4",key:"evaluators",options:q.performanceEvaluatorGroups.titleMap,config:{allOptionCheckBox:{includeAllOption:!0},notSelectedOption:"-- "+i.getLocalizedCustom("Select")+" --",controllerOptionForTwoLevels:!1,singleLevelWidget:!0}}}function P(){return{type:"date",htmlClass:x()?"col-4 center-align-vertical":"col-4",key:"dueDate"}}function $(){return{type:"checkbox",htmlClass:"col-12",key:"includeSubGoals",readonly:!q.subGoalsAllowedToCopy}}function N(){return{type:"checkbox",htmlClass:"col-12 no-margin-bottom",key:"changeOtherDetails",onChange:function(e){D()}}}function O(e){s.$broadcast("schemaFormValidate"),e.$valid&&n(R(q.model))}function R(e){var t={};if(t.idsToCopy=u,t.category=p,t.goalPurpose=q.goalPurpose,t.includeSubGoals=e.includeSubGoals,t.dueDate=b.toStandardDate(e.dueDate),e.changeOtherDetails){if(e.assignTo&&Object.keys(e.assignTo).length){t.assignTo=[];for(var a in e.assignTo)e.assignTo.hasOwnProperty(a)&&t.assignTo.push(a)}e.evaluators&&(t.evaluators=e.evaluators),e.goalPriority&&(t.goalPriority=e.goalPriority)}return p==m.GOAL_CATEGORY_ID?(t.rating=e.rating,t.status=H.getStatusIdBasedOnCompletion(e.rating,m.PENDING_GOAL_STATUS_ID)):t.status=m.PENDING_GOAL_STATUS_ID,t}function z(){n(!1)}function j(){p===m.GOAL_CATEGORY_ID?(q.title="Copy and Create Goal(s)",q.saveButtonLabel="Create Goals",q.includeChildrenLabel="Include Sub-Goals",J="sub-goals",H=C(m.GOAL_CATEGORY_NAME),K="Change Other Details of Selected Goal(s)"):p===m.OBJECTIVE_CATEGORY_ID&&(q.title="Copy and Create OKR(s)",q.saveButtonLabel="Create OKRs",q.includeChildrenLabel="Include Key Results",J="key results",K="Change Other Details of Selected OKR(s)")}function V(e,t){if(q.goalLevel=m.INDIVIDUAL_GOAL_LEVEL_ID,e){var a=_.find(t,{id:e[0]});a.levelId===m.BUSINESS_GOAL_LEVEL_ID&&(q.goalLevel=m.BUSINESS_GOAL_LEVEL_ID)}}function G(e){var t="";e.hasPermissionToCopyDescendants?e.hasOnlyApprovedDescendants||(q.subGoalsAllowedToCopy=!1,t="Some of the "+J+" are not approved"):(q.subGoalsAllowedToCopy=!1,t="You don't have the permission to copy & create some of the "+J),q.alert={type:"warning",message:t,icon:"ohrm_delete_alert_warning",clickable:!1,condition:function(){return!q.subGoalsAllowedToCopy}}}function B(){return q.goalLevel===m.BUSINESS_GOAL_LEVEL_ID}var q=this;
q.save=O,q.cancel=z;var H=null;q.goalLevel=m.INDIVIDUAL_GOAL_LEVEL_ID,q.goalPurpose=m.PERFORMANCE_GOAL_PURPOSE_ID,q.subGoalsAllowedToCopy=!0;var U="Note: If you don't need to change the copied data, keep the non-mandatory fields empty.",W=null,Y=[],J="",K="";j(),V(u,f),S()}angular.module("app.performance").controller("CopyGoalsModalController",e),e.$inject=["$state","formHelper","webservice","localizedMessages","employeeService","close","loader","toast","$scope","$stateParams","$q","performanceConstants","selectedIds","categoryId","goals","datagroupPermissions","goalService","$translate","settingsService","dateService","goalCategoryServiceFactory","goalCopyService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s){function c(){f(),"undefined"!=typeof i&&(g.model=i),d()}function d(){g.schema={type:"object",title:"Goals",properties:{name:{title:"Name",type:"string"},level:{title:"Level",type:"string","enum":h["enum"]}}},g.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m6 l6",key:"name"},{type:"select",htmlClass:"col s12 m6 l6",titleMap:h.titleMap,key:"level",emptyOption:l.getLocalizedCustom("All")}]}]}function m(t){e.$broadcast("schemaFormValidate"),t.$valid&&o(g.model)}function u(){o(!1)}function p(e){f(),m(e)}function f(){g.model={level:"",name:""}}var g=this;g.search=m,g.cancel=u,g.reset=p;var h=n.getEnumAndTitleMapForSelect(s);c()}angular.module("app.performance").controller("GoalLibraryFilterController",e),e.$inject=["$scope","logger","webservice","currentFilter","close","formHelper","localizedMessages","formValidationHelper","goalLevels"]}(),function(){"use strict";function e(e,t,a,i,o){function n(){e.$broadcast("filter",[])}var l=this;l.filter=n,l.title=o.current.data.title}angular.module("app.performance").controller("GoalLibraryNavbarController",e),e.$inject=["$rootScope","$scope","$document","$translate","$state"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g){function h(e,a,i){var n={offset:(i-1)*x.pageSize,limit:x.pageSize,orderField:x.SortingListFields[e],orderBy:a};"undefined"!=typeof x.filters&&(n.filter=x.filters),d.show(),g.fetchGoalTemplates(n).then(function(e){b(),x.goalTemplates=e.data,x.total=e.meta.total,x.totalDataCount=x.total,x.dataInCurruntPage=e.data.length,x.meta=e.meta,x.page=i,x.lastPage=Math.ceil(x.total/x.pageSize),x.goalTemplatesListHelper=new t.list(x.listData.goalTemplates,x.goalTemplates),x.selectAll=x.goalTemplatesListHelper.selectAllItems,x.deselectAll=x.goalTemplatesListHelper.deselectAllItems,d.hide(),0===x.goalTemplates.length&&s.infoToast("No Records Found")},function(){d.hide(),o.go("403")})}function v(){d.show();var e={permission:u.getPermission("goal_library").then(function(e){return e.read?e:n.reject({statusText:"Forbidden"})}),pageSize:f.getSetting("page_size"),goalLevels:g.fetchGoalLevels()};n.all(e).then(function(e){x.permissions=e.permission,x.pageSize=e.pageSize,x.goalLevels=e.goalLevels,x.fetchGoalTemplates("name","ASC",x.page)},function(){d.hide(),o.go("403")})}function y(){var e=!1;l.showModal({templateUrl:"app/performance/goals/goalLibrary/goal_library_filter.html",controller:"GoalLibraryFilterController",controllerAs:"modal",inputs:{currentFilter:x.filters,goalLevels:x.goalLevels}}).then(function(t){$(t.element).openModal({complete:function(){e||t.controller.cancel()}}),t.close.then(function(t){e=!0,t!==!1&&(x.filters=t,x.fetchGoalTemplates("name","ASC",1))})})}function b(){x.panelInfo={goalsInfo:{}},C()}function C(){var e=[{name:"name",lable:"Goal Name",getter:"name",sortable:!0,sortAction:"fetchGoalTemplates"},{name:"level",lable:"Level",getter:"level",sortable:!0,sortAction:"fetchGoalTemplates",formatter:function(e){return s.getLocalizedCustom(e)}}],t=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:x.permissions["delete"]}];x.listData={goalTemplates:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:[],extraTD:[],showColumnsAnyway:!0,permission:x.permissions,listActions:t,pagination:!0}}}function w(){if(x.listData.goalTemplates.selected.length>0){var e=x.listData.goalTemplates.selected.length;d.show(),g.deleteGoalTemplates({ids:x.listData.goalTemplates.selected}).then(function(){d.hide(),s.showLocalizedToast("deleteSuccess"),x.total-=e,_(x.listData.goalTemplates.selected)},function(e){d.hide(),m.error(s.getLocalizedCustom(e.data.details))})}}function _(e){for(var t=x.goalTemplates.length-1;t>=0;t--){var a=e.indexOf(x.goalTemplates[t].id);a>-1&&(e.splice(a,1),x.goalTemplates.splice(t,1))}}function S(e){var t=e.obj;if(t.selected)x.listData.goalTemplates.selected.push(t.id);else{var a=x.listData.goalTemplates.selected.indexOf(t.id);a>-1&&x.listData.goalTemplates.selected.splice(a,1)}}function D(){x.listData.goalTemplates.selected.length>0&&l.showModal({templateUrl:"app/core/modal/confirmation_modal.html",controller:"ConfirmationModalController",controllerAs:"modal",inputs:{customMessage:"Delete selected goal(s) from the library?",successLabel:"Yes, Delete",cancelLabel:"No, Cancel"}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&(w(),T(x.listData.goalTemplates.selected.length))})})}function T(e){x.totalDataCount=x.totalDataCount-e,x.dataInCurruntPage=x.dataInCurruntPage-e}var x=this;x.pageSize=50,x.page=1,x.total=0,x.totalDataCount=0,x.dataInCurruntPage=0,x.goalTemplates="",x.sort="",x.SortingListFields={name:"name",level:"level"},x.fetchGoalTemplates=h,x.changeSelection=S,x.deleteSelection=D,x.state=o,x.selected=[],x.oldFilter=!1,x.goalTemplates||v(),e.$on("filter",y)}angular.module("app.admin").controller("PerformanceGoalLibraryController",e),e.$inject=["$scope","listHelper","logger","$window","$state","$q","ModalService","webservice","localizedMessages","$rootScope","loader","toast","datagroupPermissions","formHelper","settingsService","goalService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(){y.schema={type:"object",title:"",properties:{category:{title:i.getLocalizedCustom(b),type:"array",items:{"enum":[1,2],type:"string"}}}},y.form=[{type:"row",items:[{type:"checkboxes",htmlClass:"col-12",key:"category",titleMap:[{value:1,name:i.getLocalizedCustom("Goals")},{value:2,name:i.getLocalizedCustom("OKRs")}],readonlyOptions:w}]}]}function h(){n(v(y.model.category))}function v(e){var t=[];return e.indexOf(1)>-1&&t.push(f.GOAL_CATEGORY_ID),e.indexOf(2)>-1&&t.push(f.OBJECTIVE_CATEGORY_ID,f.KEY_RESULT_CATEGORY_ID),t}var y=this;y.clickEvent=p;var b="Download PDF";"csv"===m&&(b="Download CSV");var C=[2],w=[2];u===f.GOAL_CATEGORY_ID&&(C=[1],w=[1]),y.model={category:C},y.clickEvent=p,y.save=h,g()}angular.module("app.performance").controller("ExportConfirmationPopoverController",e),e.$inject=["$state","formHelper","webservice","localizedMessages","employeeService","close","loader","toast","$scope","$stateParams","$q","type","currentTab","clickEvent","performanceConstants"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w,_,S,D){function T(){M(),"undefined"!=typeof i&&($.model=i,$.model.dueDateFrom=x(i.dueDateFrom),$.model.dueDateTo=x(i.dueDateTo)),F()}function x(e){return"string"==typeof e&&e&&(e=new Date(e)),e}function F(){$.schema={type:"object",title:"Goals",properties:{goalLevel:{title:"Goal Level",type:"string","enum":N["enum"]},goalPriority:{title:"Goal Priority",type:"string","enum":O["enum"]},selectedEmployee:{title:"Goal Owner",type:["null","object"]},jobTitle:{title:r.getLocalizedCustom("Job Title"),type:"object"},location:{title:r.getLocalizedCustom("Location"),type:"array",items:{"enum":b["enum"],type:"string"}},subunit:{title:r.getLocalizedCustom("Sub Unit"),type:"array",items:{"enum":C["enum"],type:"string"}},employmentStatus:{title:r.getLocalizedCustom("Employment Status"),type:"object"},selectedSupervisor:{title:r.getLocalizedCustom("Supervisors"),type:"object"},goalDetails:{title:"Goal",type:"string"},withAchievedGoals:{title:"Show Achieved Goals",type:"boolean"},dueDateFrom:{title:"Due Date From",type:["null","object"]},dueDateTo:{title:"Due Date To",type:["null","object"]},includeDevelopmentGoals:{title:"Show Development Goals",type:"boolean"},include:{title:"Include",type:"string","enum":v["enum"]},isPersisted:{title:"Make Filter Default",type:"boolean"}}},$.form=[{type:"row",condition:!$.isEmployeeGoalList,items:[{key:"selectedEmployee",type:"auto-complete",htmlClass:$.formWidthClass,placeholder:r.getLocalizedCustom("Type for hints..."),"text-searching":"Searching...","text-no-results":"No results found",includePast:!0,employeeDataProvider:k},{type:"autocomplete-multiselect",htmlClass:$.formWidthClass,key:"jobTitle",choices:y},{type:"tree-select",htmlClass:$.formWidthClass,key:"location",options:b.titleMap,config:{allOptionCheckBox:{includeAllOption:!0,readonly:!1},notSelectedOption:"-- "+r.getLocalizedCustom("Select")+" --",controllerOptionForTwoLevels:!0}}]},{type:"row",condition:!$.isEmployeeGoalList,items:[{type:"tree-select",htmlClass:$.formWidthClass,key:"subunit",options:C.titleMap,config:{allOptionCheckBox:{includeAllOption:!0,readonly:!1},notSelectedOption:"-- "+r.getLocalizedCustom("Select")+" --",controllerOptionForTwoLevels:!1}},{type:"autocomplete-multiselect",htmlClass:$.formWidthClass,key:"employmentStatus",choices:w},{type:"autocomplete-multiselect",htmlClass:$.formWidthClass,key:"selectedSupervisor",choices:_}]},{type:"row",condition:!$.isEmployeeGoalList,items:[{type:"select",htmlClass:$.formWidthClass,key:"include",emptyOption:!1,titleMap:v.titleMap,onChange:function(e,t){}}]},{type:"row",condition:!$.isEmployeeGoalList,items:[{type:"subheading",htmlClass:"col-12 ",key:"goalDetails"}]},{type:"row",items:[{type:"select",htmlClass:$.formWidthClass,titleMap:N.titleMap,key:"goalLevel",emptyOption:r.getLocalizedCustom("All")},{type:"select",htmlClass:$.formWidthClass,titleMap:O.titleMap,key:"goalPriority",emptyOption:r.getLocalizedCustom("All")}]},{type:"row",items:[{type:"date",htmlClass:$.formWidthClass,key:"dueDateFrom",defaultDate:$.model.dueDateFrom,validationMessage:{beforeToDate:r.getLocalizedCustom("From date should be before to date")},$validators:{beforeToDate:L}},{type:"date",htmlClass:$.formWidthClass,key:"dueDateTo",defaultDate:$.model.dueDateTo,validationMessage:{afterFromDate:r.getLocalizedCustom("To date should be after from date")},$validators:{afterFromDate:P}}]},{type:"row",items:[{type:"checkbox",htmlClass:$.formWidthClass+" remove-top-margin",key:"withAchievedGoals",condition:function(){return!$.unapprovedGoals&&S}},{type:"checkbox",htmlClass:$.formWidthClass+" remove-top-margin",key:"includeDevelopmentGoals",condition:function(){return $.includeDevelopmentGoalsFilter}},{type:"checkbox",htmlClass:$.formWidthClass+" remove-top-margin",key:"isPersisted",condition:function(){return $.isEmployeeGoalList}}]}]}function k(e,t){var i={employee_name_or_id:e,permissionType:[{excludedUserRoles:["MainEvaluator","AppraisalSupervisorReviewer"]},{type:"data_group",required_permissions:{Goals:{canRead:1,canCreate:0,canUpdate:0,canDelete:0}}}],termination:"1"==$.model.include?1:2},o={name:"userInputString",filter:i,fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId","page[offset]":"0","page[limit]":"50",sort:"fullName"};return a.call("employees","GET",[],o,t).then(function(i){for(var o=[],n=i.data.data.map(function(e){return e.empNumber}),l=0;l<i.data.data.length;l++)i.data.data[l].fullName=g.getFullName(i.data.data[l]),o.push(i.data.data[l]);var r={employee_name_or_id:e,permissionType:[{excludedUserRoles:["MainEvaluator","AppraisalSupervisorReviewer"]},{type:"data_group",required_permissions:{development_goals:{canRead:1,canCreate:0,canUpdate:0,canDelete:0}}}],termination:"1"==$.model.include?1:2},s={name:"userInputString",filter:r,fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId","page[offset]":"0","page[limit]":"50",sort:"fullName"};return a.call("employees","GET",[],s,t).then(function(e){for(var t=0;t<e.data.data.length;t++)n.indexOf(e.data.data[t].empNumber)==-1&&(e.data.data[t].fullName=g.getFullName(e.data.data[t]),o.push(e.data.data[t]));var a=o.sort(function(e,t){return e.lastName.toLowerCase()<t.lastName.toLowerCase()?-1:e.lastName.toLowerCase()>t.lastName.toLowerCase()?1:0});return a})})}function E(t){if(e.$broadcast("schemaFormValidate"),t.$valid){var a=angular.copy($.model);$.model.dueDateFrom instanceof Date&&(a.dueDateFrom=f.toStandardDate(new Date($.model.dueDateFrom))),$.model.dueDateTo instanceof Date&&(a.dueDateTo=f.toStandardDate(new Date($.model.dueDateTo))),n(a)}}function I(){n(!1)}function A(t){return $.isEmployeeGoalList?D.getPersistedParameters("performanceGoalsList").then(function(a){a?$.model=a:M(),e.$broadcast("schemaFormRedraw"),E(t)}):(e.$broadcast("schemaFormRedraw"),void E(t))}function M(){$.model=angular.copy(o),$.model.dueDateFrom=new Date($.model.dueDateFrom),$.model.dueDateTo=new Date($.model.dueDateTo)}function L(e){if(!e||!$.model.dueDateTo)return!0;if(e&&$.model.dueDateTo){var t=new Date(e),a=new Date($.model.dueDateTo);return t<=a}return!1}function P(e){if(!e||!$.model.dueDateFrom)return!0;if(e&&$.model.dueDateFrom){var t=new Date(e),a=new Date($.model.dueDateFrom);return a<=t}return!1}var $=this;$.search=E,$.cancel=I,$.reset=A;var N=l.getEnumAndTitleMapForSelect(d),O=l.getEnumAndTitleMapForSelect(m);$.isEmployeeGoalList=c,$.unapprovedGoals=u,$.includeDevelopmentGoalsFilter=p,$.isEmployeeGoalList?($.widgetWidthClass="modal-lg",$.formWidthClass="col-4"):($.widgetWidthClass="modal-md",$.formWidthClass="col-6"),T()}angular.module("app.performance").controller("GoalListFilterController",e),e.$inject=["$scope","logger","webservice","currentFilter","defaultFilterModel","close","formHelper","localizedMessages","formValidationHelper","isEmployeeGoalList","goalLevels","goalPriorities","unapprovedGoals","includeDevelopmentGoalsFilter","dateService","employeeService","$translate","employeeStatus","jobTitleChoices","locationChoices","subUnitChoices","employmentStatusChoices","supervisorChoices","showAchievedFilter","dataListSettingsService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w,S,D,T,x,F,k,E,I,A){function M(){Je(),m(function(){o.show()});var e={listConfig:y.getRegisteredListConfiguration("performanceGoalsList",!0),permission:L(),settings:n.getSettings(),isGoalAddPermittedByWorkflow:v.isGoalAddPermittedByWorkflow("my_goals"===Ze.listType),goalStatuses:T.getGoalStatuses(),defaultFilters:z()};r.all(e).then(function(e){Ze.goalMaxCompletionPercentage=e.settings.performance.goal_max_completion_percentage,Ze.listConfigurations=e.listConfig,Ze.listConfig=Ze.listConfigurations.listConfig,Ze.availableFields=Ze.listConfigurations.availableFields,Ze.mandatoryFields=Ze.listConfigurations.mandatoryFields,Ze.defaultFields=Ze.listConfigurations.defaultFields,Me(),Ze.permissions=e.permission,P(e.settings.page_size,Ze.listConfigurations.pageParams),Ze.permissions.create=Ze.permissions.create&&e.isGoalAddPermittedByWorkflow,Ze.goalStatuses=e.goalStatuses,Qe=pe(e.goalStatuses),ge(),Ze.addButtonText="Create "+de(),he(function(){H(),o.hide(),N(),$(),Ke(),be(),Ne(g.calledFromMyShortcuts)},!0)},function(){o.hide(),a.go("403")})}function L(){var e=!Ze.isEmployeeGoalList;return l.getSinglePermission([C.PERFORMANCE_GOAL_DATAGROUP],e).then(function(t){return t.read&&t.update&&t["delete"]?t:l.getSinglePermission([C.DEVELOPMENT_GOAL_DATAGROUP],e).then(function(e){var a={read:t.read||e.read,create:t.create,update:t.update||e.update,"delete":t["delete"]||e["delete"]};return a.read?a:r.reject({statusText:"Forbidden"})})})}function P(e,t){t&&t.pageSize?Ze.pageSize=t.pageSize:Ze.pageSize=e}function $(){var e={fields:["empNumber","firstName","middleName","lastName","termination_id","employeeId"]},t={required_permissions:{data_group:{name:"Goals",permissions:{canRead:1}}}},a={goalLevels:v.fetchGoalLevels(),locations:v.fetchLocations(t),subunits:v.fetchSubunits(),jobTitles:v.fetchJobTitles(),employmentStatus:i.call("employmentStatus","GET",[],{},void 0,!0),supervisors:i.call("supervisors","GET",[],e,void 0,!0),goalPriorities:v.fetchGoalPriorities(),performanceEvaluatorGroups:v.fetchEvaluatorGroups(),modules:E.getModules("succession & development",1),hasDevelopmentGoalPermissions:l.getSinglePermission(C.DEVELOPMENT_GOAL_DATAGROUP,!Ze.isEmployeeGoalList,void 0,void 0,["MainEvaluator","AppraisalSupervisorReviewer"]).then(function(e){return!!e.read})};r.all(a).then(function(e){Ze.goalLevels=e.goalLevels;var t=_.sortBy(e.goalPriorities,"viewOrder");Ze.goalPriorities=t,Ze.employeeStatus=w.getEnumAndTitleMapForSelect(Ze.employeeStatusList,{value:"id",name:"name"},!1),Ze.jobTitles=e.jobTitles,Ze.jobTitleChoices=w.getItemsForMultyselectAutocomplete(Ze.jobTitles,function(e){return{id:e.id,name:e.jobTitleName}}),Ze.locations=e.locations,Ze.locationChoices=w.getLocationsListForHierarchicalMultiSelect(Ze.locations),Ze.subunits=e.subunits,Ze.subUnitChoices=w.getSubunitsListForHierarchicalMultiSelect(Ze.subunits),Ze.employmentStatus=e.employmentStatus.data.data,Ze.employmentStatusChoices=w.getItemsForMultyselectAutocomplete(Ze.employmentStatus,{}),Ze.supervisors=e.supervisors.data.data,Ze.supervisorChoices=w.getItemsForMultyselectAutocomplete(Ze.supervisors,function(e){var t=S.getFullName(e);return{id:e.empNumber,name:t,employeeId:e.employeeId}}),Ze.includeDevelopmentGoalsFilter=!Ze.unapprovedGoals&&e.modules.data.data.length&&e.hasDevelopmentGoalPermissions,st=!0})}function N(){Ze.exportPanelButtons=[{id:"pdfExport",text:"PDF",icon:"ohrm_download_doc_oxd",classes:" btn-feedback export-btn",clickAction:ze,type:"pdf",displayCondition:function(e,t){return!0}},{id:"csvExport",text:"CSV",icon:"ohrm_download_doc_oxd",classes:" btn-feedback export-btn",clickAction:ze,type:"csv",displayCondition:function(e,t){return!0}}]}function O(){R()&&"undefined"!=typeof b[nt]&&b[nt].currentTabKey?(Ze.currentTabKey=b[nt].currentTabKey,b[et]=b[nt].currentTabKey):"undefined"!=typeof b[et]?Ze.currentTabKey=b[et]:"undefined"!=typeof b[nt]&&b[nt].currentTabKey?Ze.currentTabKey=b[nt].currentTabKey:Ze.currentTabKey=C.GOAL_CATEGORY_ID}function R(){return g.calledFromMyShortcuts||g.useFiltersFromFilterParams}function z(){Ze.params={},Ze.params.listType=Ze.listType,Ze.params.mode=Ze.goalsLevel;var e={};return R()&&g.filterParameters&&j(g.filterParameters)?(e=g.filterParameters,b[nt]=e):e=b[nt],Ze.empNo&&"undefined"!=typeof e?(e.selectedEmployee={empNumber:Ze.empNo,firstName:"",lastName:"",middleName:"",employeeId:Ze.employeeId,fullName:Ze.empName},b[nt]=e):Ze.empNo&&(Ke(),e=ct,e.selectedEmployee={empNumber:Ze.empNo,firstName:"",lastName:"",middleName:"",employeeId:Ze.employeeId,fullName:Ze.empName},b[nt]=e),null!=Ze.include&&(e.include=Ze.include),O(),"undefined"!=typeof e&&j(e)?(Ze.params.filter=G(e),r.when()):"employee_goals"===Ze.listType?D.getPersistedParameters(Ze.listNameForPersistingFilters).then(function(e){e?(b[nt]=e,O(),Ze.params.filter=G(e)):(Ze.params.filter=V(),b[nt]=void 0)}):(Ze.params.filter=V(),b[nt]=void 0,r.when())}function j(e){var t=_.keys(e);return 0===_.difference(t,rt).length}function V(){var e={};return e.dueDateFrom=p.toStandardDate(new Date(moment().subtract(1,"y").format("YYYY-MM-DD"))),e.dueDateTo=p.toStandardDate(new Date(moment().add(1,"y").format("YYYY-MM-DD"))),e.workflowState="",e.category=[Ze.currentTabKey],e.includeDevelopmentGoals="No",e.withAchievedGoals="No",e}function G(e){var t={};t.goalLevel=e.goalLevel,t.goalPriority=e.goalPriority,t.goalName=e.goalName,t.ownerEmployeeNumber=null,e.selectedEmployee&&(t.ownerEmployeeNumber=e.selectedEmployee.empNumber),e.selectedSupervisor&&(t.selectedSupervisor=e.selectedSupervisor.empNumber),t.withAchievedGoals="No",e.withAchievedGoals&&(t.withAchievedGoals="Yes"),t.includeDevelopmentGoals="No",e.includeDevelopmentGoals&&(t.includeDevelopmentGoals="Yes");var a=B(e.dueDateFrom);a&&(t.dueDateFrom=a);var i=B(e.dueDateTo);return i&&(t.dueDateTo=i),""!==e.location&&void 0!==e.location&&(t.location=e.location),""!==e.subunit&&void 0!==e.subunit&&(t.subunit=e.subunit),""!==e.jobTitle&&void 0!==e.jobTitle&&(t.jobTitle=_.keys(e.jobTitle)),""!==e.employmentStatus&&void 0!==e.employmentStatus&&(t.employmentStatus=_.keys(e.employmentStatus)),""!==e.selectedSupervisor&&void 0!==e.selectedSupervisor&&(t.selectedSupervisor=_.keys(e.selectedSupervisor)),t.include=e.include,t.category=[Ze.currentTabKey],t}function B(e){var t;return t=e instanceof Date?p.toStandardDate(e):e?p.toStandardDate(new Date(e)):null}function q(e,t,a){Ze.orderField=e,Ze.orderBy=t,Ze.page=a,ge(),he(void 0,!0)}function H(){var e=U(),t=[{name:"name",lable:de()+" Name",getter:"",type:"goal-name-hierarchical",sortable:!0,sortAction:"sortAction","class":"indent-tree-cell",listType:Ze.listType,showLogo:function(e){return"key_result"===e.category},showIcon:function(e){return e.purposeId==C.DEVELOPMENT_GOAL_PURPOSE_ID},iconImageName:"succession_and_development",iconTooltip:"Development Goal",logoClass:"performanceGoalCategoryLogo",logoText:"KR",getState:function(e,t,i){var o=t.category;t.purposeId==C.DEVELOPMENT_GOAL_PURPOSE_ID&&(o=C.DEVELOPMENT_GOAL_CATEGORY_NAME);var n=i?t.immediateParent.id:t.id,l={listType:e.listType,goalId:n,category:o,listName:Ze.listName};return"employeeProfile"==Ze.redirectedFrom&&(l.redirectFrom="employeeProfile",l.empNumber=Ze.empNo),a.current.name+".add("+JSON.stringify(l)+")"},hideField:!e.goalName,progressParams:{key:"goalPercentageCompletion",title:"Change Completion",saveCallback:Y,widgetClass:function(e){return v.getRatingWidgetClass(e,Ze.goalWorkflowEnabled)},progressEditable:function(e){return e.categoryId==C.GOAL_CATEGORY_ID&&Ze.unapprovedGoals!==!0&&e.allowedToEdit},goalMaxCompletionPercentage:function(){return Ze.goalMaxCompletionPercentage}}},{name:"levelName",lable:"Level",type:"icon",getter:"levelName",sortable:!0,sortAction:"sortAction",formatter:function(e,t){return t.categoryId==C.KEY_RESULT_CATEGORY_ID?"":v.getGoalLevelIcon(t.levelId)},tooltip:{position:"bottom",tooltipText:function(e){return e.levelName}},hideField:!e.level},{name:"empId",lable:"Employee Id",getter:"empId",hideField:!e.empId},{name:"empName",lable:"Owner",getter:"empName",sortable:Ze.isEmployeeGoalList,sortAction:"sortAction",hideField:!e.employeeName},{name:"empJobTitle",lable:"Job Title",getter:"empJobTitle",hideField:!e.jobTitle},{name:"empLocation",lable:"Location",getter:"empLocation",hideField:!e.location},{name:"empSubUnit",lable:"Sub Unit",getter:"empSubunit",hideField:!e.subUnit},{name:"dueDate",lable:"Due Date",getter:"dueDate",sortable:!0,sortAction:"sortAction",formatter:function(e){return e?(e=e.slice(0,10),p.toLocalizedDate(e)):e},hideField:!e.dueDate},{name:"goalStatusName",lable:"Status",getter:"",sortable:!0,type:"oxd-select",sortAction:"sortAction",formatter:function(e){return v.getGoalStatusName(e,Ze.goalWorkflowEnabled)},hideField:!e.status,readonly:function(e){return 1==Ze.unapprovedGoals||e.categoryId==C.KEY_RESULT_CATEGORY_ID||!e.allowedToEdit},allowedOptionGetter:function(e){return Qe},onOptionSelect:function(e,t){t.key!==e.goalStateId&&W(e,void 0,t.key).then(function(){J(e,t.key),c.successToast("Successfully Updated")})}},{name:"priority",lable:"Priority",getter:"",type:"colored-pill",sortable:!0,hideField:!e.priority,sortAction:"sortAction"}],i=[],o="name";ce(e);var n=ue(e);Ze.listDefinition={tableId:"goalList",name:"Goals",listContainerClass:"header-and-first-column-fixed",listClass:"classic-table hover selectable header-and-first-column-fixed",selectable:!0,selected:[],idGetter:"id",listFields:t,extraTH:[],extraTD:[],showColumnsAnyway:!0,permission:Ze.permissions,columnWidths:n,listActions:i,showSelectableAlways:!1,showLoader:!0,pagination:!0,persistPagination:!0,listSpecificInitialSort:!0,clickableCondition:"id",onHoverRow:Ie,isRowSelectable:function(e){var t=!1;return Ze.unapprovedGoals&&Ze.permissions.update&&e.allowedToEdit&&e.allowedWorkflowActions.indexOf("Approve")!==-1&&(t=!0),Ze.unDeletableIds.indexOf(e.id)===-1&&(t=!0),"employee_goals"!==Ze.listType||Ze.unapprovedGoals||(t=!0),t},isSingleRowDeletable:function(e){return Ze.unDeletableIds&&Ze.unDeletableIds.indexOf(e.id)===-1},listTopBar:{getMessageForNoOfItemsFound:function(e){return"undefined"!=typeof Ze.totalDataCount?c.getLocalizedCustomWithVariables("({{number}}) "+de()+(1==Ze.totalDataCount?"":"s")+" Found",{number:Ze.totalDataCount}):""},getMessageForNoOfItemsSelected:function(e){return e?c.getLocalizedCustomWithVariables("({{number}}) "+de()+(e>1?"s":"")+" Selected",{number:e}):""},configurable:Ze.listConfigurable,listConfigData:Ze.listConfigData,onFilterOpen:$e,quickSearch:{subTitleField:"empName",remoteApiHandler:re,onSearch:le}},expandable:!0,expandableField:o,loadChildNodeData:"fetchChildGoals",tableExpand:{maxLevelsBeforeExpand:5,expandPercentageMultiplier:5},leftPanel:{isCompact:Ze.compactLeftPanel,toggleable:Ze.showLeftPanelToggleOption,data:function(){return Ze.leftPanelData},addButton:{isPermitted:Ze.permissions&&Ze.permissions.create,callback:Ze.add,text:Ze.addButtonText},activeId:function(){return Ze.activatedShortcutId},toggleCallback:function(){ye()}}},Ze.listDefinition.listTopBar.getBulkActionButtons=Z,Ze.permissions["delete"]&&(Ze.listDefinition.listTopBar.onBulkDelete=function(e){Fe(e)},Ze.listDefinition.listTopBar.isBulkDeletable=function(e){return 0==_.intersection(e,Ze.unDeletableIds).length})}function U(){var e=angular.copy(Ze.listConfig);return delete e.all_employees,"my_goals"===Ze.listType&&(e.empId&&delete e.empId,e.jobTitle&&delete e.jobTitle,e.location&&delete e.location,e.subUnit&&delete e.subUnit),e}function W(e,t,a){var i={partialUpdate:[]};if(void 0!==t&&(i.partialUpdate.push("rating"),i.rating=t),void 0!==a&&(i.partialUpdate.push("status"),i.status=a),i.partialUpdate.length){var o=F(e.category);return o.partialUpdate(e.id,i)}return r.when()}function Y(e,t){if(e!=t.goalPercentageCompletion){var a=F(t.category),i=t.goalStateId,o=t.goalPercentageCompletion;t.goalPercentageCompletion=e;var n=a.getStatusIdBasedOnCompletion(e,t.goalStateId);n=n.toString();var l=void 0;n!=t.goalStateId?(l=n,J(t,l)):(K(t),Ye()),W(t,e,l).then(function(){v.fetchGoal(t.id).then(function(e){if(e&&e.data&&e.data.data.status){var a=e.data.data.status;a!==t.goalStateId&&J(t,a),c.successToast("Successfully Updated")}})},function(e){t.goalPercentageCompletion=o,J(t,i)})}}function J(t,a){var i=_.find(Qe,{key:a});Ye(),e.$broadcast("updateProgressIndicatorClass",t.id,Xe+i.key),Ze.statusesWithCount[t.goalStateId]=parseInt(Ze.statusesWithCount[t.goalStateId],10)-1,Ze.statusesWithCount[i.key]=parseInt(Ze.statusesWithCount[i.key],10)+1,t.goalStatusName=i.value,t.goalStateId=i.key,K(t),ye()}function K(t){var a=angular.copy(t);a.allowedToEdit=!1,e.$broadcast("updateLoadedSubRowElements",a),e.$broadcast("updateProgressIndicatorValue",a.id,a.goalPercentageCompletion)}function Z(e){for(var t=!0,a=!Ze.unapprovedGoals&&"employee_goals"===Ze.listType,i=[],o=[],n=0;n<e.length;n++)o.push(e[n].id),Ze.unapprovedGoals&&Ze.permissions.update&&e[n].allowedWorkflowActions.indexOf("Approve")!==-1&&e[n].allowedToEdit||(t=!1);t&&i.push({label:c.getLocalizedCustom("Approve"),icon:"ohrm_like",onClick:X});var l={categoryId:Ze.currentTabKey,hasGoalCreatePermission:Ze.permissions&&Ze.permissions.create,hasOrganizationGoalCreatePermission:Ze.organizationGoalPermissions&&Ze.organizationGoalPermissions.create};return a&&(i.push(I.getCopyButton(e,ee,l)),i.push(v.getBulkSendReminderButton(e,Q,o))),i}function Q(e){var t={ids:e};v.sendReminders(t)}function X(e){s.showModal("app/performance/goals/approvalConfirmation/approve-reject-confirmation-modal.html","GoalsApproveRejectConfirmationModalController","modal",{title:de()+" Approval Confirmation",action:C.GOAL_WORKFLOW_APPROVE_ACTION}).then(function(t){t&&t.action&&ne(e,t.action,t.note)})}function ee(e){var t=angular.copy(Ze.listData),a=angular.copy(e),i=angular.copy(Ze.currentTabKey);s.showModal("app/performance/goals/copy/copy-goals-modal.html","CopyGoalsModalController","modal",{selectedIds:a,goals:t,categoryId:i}).then(function(e){if(e){var t={updateFinished:!1},a=te(i),o={progressModal:I.openProgressModalForCopy(t,a),copyGoals:I.copyGoals(e).then(function(e){return t.updateFinished=!0,e})};r.all(o).then(function(e){c.successToast(ae(e.copyGoals.data.data.idsByCategory,i)),he(void 0,!0)},function(e){t.updateCancelled=!0,c.errorToast("Failed to Save")})}})}function te(e){var t="Creating Goals";return e===C.OBJECTIVE_CATEGORY_ID&&(t="Creating OKRs"),t}function ae(e,t){var a="{{count}} ",i=0;t===C.GOAL_CATEGORY_ID?(i=ie(e,C.GOAL_CATEGORY_ID),a+="Goal"):t===C.OBJECTIVE_CATEGORY_ID&&(i=ie(e,C.OBJECTIVE_CATEGORY_ID),a+="Objective");var o=i>1;return o&&(a+="s"),t===C.OBJECTIVE_CATEGORY_ID&&oe(e)&&(a+=" with Key Results"),a+=o?" Were":" Was",a+=" Created Successfully",c.getLocalizedCustomWithVariables(a,{count:i})}function ie(e,t){return e[t]?e[t].length:0}function oe(e){return e[C.KEY_RESULT_CATEGORY_ID]&&e[C.KEY_RESULT_CATEGORY_ID].length>0}function ne(e,t,a){var i={ids:e,action:t};a&&(i.actionComment=a),v.performBulkAction(i).then(function(){c.successToast("Successfully Approved"),Ze.page=1,ge(),he(void 0,!0)})}function le(e){Ze.params.filter=se(),"string"==typeof e?Ze.params.filter.goalName=e:"object"==typeof e&&e.originalObject&&(Ze.params.filter.goalIds=[e.originalObject.id]),Ze.activatedShortcutId=1,Ze.page=1,ge(),he(void 0,!0)}function re(e,t){var a=angular.copy(Ze.params);return a.filter=se(),a.filter.goalName=e,a.limit=5,a.offset=0,v.fetchGoalData(a,t,!0).then(function(e){return e.data})}function se(){var e=V();return e.dueDateFrom=null,e.dueDateTo=null,e.includeDevelopmentGoals="Yes",e.withAchievedGoals="Yes",e}function ce(e){_.size(e)<=at?Ze.compactLeftPanel=!1:Ze.compactLeftPanel=!0,_.size(e)===at&&(Ze.showLeftPanelToggleOption=!0)}function de(){var e="";return Ze.currentTabKey===C.GOAL_CATEGORY_ID?e="Goal":Ze.currentTabKey===C.OBJECTIVE_CATEGORY_ID&&(e="Objective"),e}function me(e){var t="25%";switch(e){case 2:case 3:t="60%";break;case 4:t="55%";break;case 5:t="45%";break;case 6:case 7:case 8:t="30%"}return t}function ue(e){var t,a=_.size(e);return t=Ze.permissions["delete"]||Ze.unapprovedGoals&&Ze.permissions.update||"employee_goals"===Ze.listType&&!Ze.unapprovedGoals?["2%"]:[],t.push(me(a)),e.level&&t.push("9%"),e.empId&&t.push("8%"),2==a?t.push("30%"):t.push("17%"),e.jobTitle&&t.push("10%"),e.location&&t.push("10%"),e.subUnit&&t.push("10%"),e.dueDate&&t.push("12%"),e.status&&t.push("12%"),e.priority&&t.push("10%"),t}function pe(e){for(var t=_.map(w.getSortedObjectList(e,"displayOrder","ASC"),function(e){return _.omit(e,["displayOrder"])}),a=[],i=0;i<t.length;i++){var o={key:e[i].id,value:e[i].name};a.push(o)}return a}function fe(){return Math.ceil(Ze.totalDataCount/Ze.pageSize)}function ge(){Ze.orderBy&&Ze.orderField&&(Ze.params.orderBy=Ze.orderBy,Ze.params.orderField=Ze.orderField),Ze.params.limit=Ze.pageSize,Ze.params.offset=Ze.pageSize*(Ze.page-1)}function he(e,a){return Ze.listData=null,a&&Ye(),v.fetchGoalData(ve(Ze.params),void 0,!0).then(function(i){var o=i.meta;Ze.organizationGoalPermissions=o.organizationGoalPermissions,Ze.unDeletableIds=_.map(o.notDeletableIds,function(e){return e.toString()}),Ze.listData=i.data,Ze.totalDataCount=o.total,Ze.statusesWithCount=o.statusesWithCount,Ze.lastPage=fe(),Ze.stateIds={},"on"==o.goalWorkflowStatus?(Ze.unapprovedCount=o.unapprovedCount,Ze.goalWorkflowEnabled=!0,t.$broadcast("unapprovedGoalCount",[o.unapprovedCount])):Ze.goalWorkflowEnabled=!1,He(),Ze.workflowChoices=o.workflowChoices,ye(),"function"==typeof e&&e(),Se(a)})["finally"](function(){y.showListConfigurationSuccess()})}function ve(e){var t=angular.copy(e);return Ze.unapprovedGoals&&"goalStatusName"===t.orderField&&(t.orderField="goalWorkflowStatusName"),t&&t.filter&&void 0!==t.filter.status&&(t.filter.withAchievedGoals="Yes"),t}function ye(){var e=1,t=0,a=function(e){_e(e.id,e.status),Ze.activatedShortcutId=e.id};Ze.leftPanelData=[{id:e,matchingCount:Ze.totalDataCount,label:"All",classes:"goal-all-state",status:"",
onClick:a}],Object.keys(Ze.statusesWithCount).forEach(function(i){e++,("No"!==Ze.params.filter.withAchievedGoals||i!=C.ACHIEVED_GOAL_STATUS_ID||Ze.unapprovedGoals)&&(t+=parseInt(Ze.statusesWithCount[i]));var o={id:e,matchingCount:Ze.statusesWithCount[i],label:Ze.unapprovedGoals?Ze.workflowChoices[i]:_.find(Ze.goalStatuses,{id:i}).name,classes:Ze.unapprovedGoals?Ce(i):we(i),status:i,onClick:a};Ze.leftPanelData.push(o)}),Ze.leftPanelData[0].matchingCount=t}function be(){if(g.calledFromMyShortcuts&&"undefined"!=typeof b[nt]&&"undefined"!=typeof b[nt][lt]){var e=_.find(Ze.leftPanelData,{status:b[nt][lt]});Ze.activatedShortcutId!==e.id&&(_e(e.id,e.status,!0),Ze.activatedShortcutId=e.id)}}function Ce(e){var t;switch(e){case"2":t="goal-saved-workflow-state";break;case"3":t="goal-pending-approval-workflow-state";break;case"5":t="goal-rejected-workflow-state";break;default:t="goal-custom-state"}return t}function we(e){var t;switch(e){case"0":t="goal-pending-state";break;case"1":t="goal-in-progress-state";break;case"2":t="goal-achieved-state";break;case"3":t="goal-not-achieved-state";break;case"4":t="goal-on-hold-state";break;default:t="goal-custom-state"}return t}function _e(t,a,i){a?Ze.params.filter[lt]=a:delete Ze.params.filter[lt],Ze.activePageNo=1,Ze.listData=null,Ze.selectedIds=[],e.$broadcast("angucomplete-alt:clearInput"),Ze.page=1,Ne(i),ge(),he()}function Se(e){var t={};e&&Ye(),Object.keys(Ze.statusesWithCount).forEach(function(e){var a=angular.copy(Ze.params);a.filter[lt]=e,t[e]=v.fetchGoalData(ve(a),void 0,!0)});var a=angular.copy(Ze.params);delete a.filter[lt],t[-1]=v.fetchGoalData(ve(a),void 0,!0),r.all(t)}function De(){Ze.currentTabKey==C.GOAL_CATEGORY_ID?Te():xe()}function Te(){var e={listType:Ze.listType,listName:Ze.listName,action:"add_goal"};"employeeProfile"==Ze.redirectedFrom&&(e.redirectFrom="employeeProfile",e.empNumber=Ze.empNo),a.go(".add",e)}function xe(){var e={listType:Ze.listType,category:C.OBJECTIVE_CATEGORY_NAME,listName:Ze.listName,action:"add_objective"};"employeeProfile"==Ze.redirectedFrom&&(e.redirectFrom="employeeProfile",e.empNumber=Ze.empNo),a.go(".add",e)}function Fe(e){e.length>0&&s.showDeleteConfirmationModal(c.getLocalizedCustom("The selected "+de()+"(s) will be permanently deleted. Are you sure you want to continue?")).then(function(t){t===!0&&Ee(e)})}function ke(e){"object"==typeof e&&(e=e.id),a.go(".add",{goalId:e,listName:Ze.listName})}function Ee(e){e=e?e:Ze.selectedIds;var t=Ze.listData;Ze.listData=null,v.deleteGoals({ids:e,listType:Ze.listType},Ze.params.filter.category[0]).then(function(){he(void 0,!0),c.successToast("Successfully Deleted")},function(e){Ze.listData=t,x.error(c.getLocalizedCustom(e.data.details))})}function Ie(e){e.isBranch&&!tt.hasOwnProperty(e.id)&&(tt[e.id]=Ae(e.id))}function Ae(e){var t=tt.hasOwnProperty(e)?tt[e]:r.when();return t.then(function(){return v.fetchChildGoals(e).then(function(e){for(var t=0;t<e.length;t++)e[t].allowedToEdit=!1;return e})})}function Me(){Ze.modalHeader="Goals/My Goals List Configuration",Ze.applyForAllEmployeesLabel="Apply for All Users",Ze.specialMessagesForFields={},Ze.conditionalFields={},Ze.maxNoOfFields=8,Ze.listConfigData={availableFields:Ze.availableFields,mandatoryFields:Ze.mandatoryFields,defaultFields:Ze.defaultFields,listName:"performanceGoalsList",modalHeader:Ze.modalHeader,applyForAllEmployeesLabel:Ze.applyForAllEmployeesLabel,specialMessagesForFields:Ze.specialMessagesForFields,conditionalFields:Ze.conditionalFields,maxNoOfFields:Ze.maxNoOfFields}}function Le(){var e=[{key:C.GOAL_CATEGORY_ID,title:"Goals",icon:"ohrm_bullseye_strong",isCurrent:!0},{key:C.OBJECTIVE_CATEGORY_ID,title:"OKRs",icon:"ohrm_target",isCurrent:!1}];return e}function Pe(e){e&&e.key!==Ze.currentTabKey&&(Ze.params.filter.category=[e.key],Ze.page=1,ge(),he(function(){Ze.currentTabKey=e.key,Ne(),b[et]=Ze.currentTabKey,Ze.addButtonText="Create "+de(),H(),o.hide()},!0))}function $e(){if(st){var t=angular.copy(b[nt]);s.showModal("app/performance/goals/goalList/goal_list_filter.html","GoalListFilterController","modal",{title:"Filter Goals By",currentFilter:t,defaultFilterModel:ct,isEmployeeGoalList:Ze.isEmployeeGoalList,goalLevels:Ze.goalLevels,goalPriorities:Ze.goalPriorities,unapprovedGoals:Ze.unapprovedGoals,includeDevelopmentGoalsFilter:Ze.includeDevelopmentGoalsFilter,employeeStatus:Ze.employeeStatus,jobTitleChoices:Ze.jobTitleChoices,locationChoices:Ze.locationChoices,subUnitChoices:Ze.subUnitChoices,employmentStatusChoices:Ze.employmentStatusChoices,supervisorChoices:Ze.supervisorChoices,showAchievedFilter:void 0===Ze.params.filter.status}).then(function(t){if(t){var a=angular.copy(t);a.currentTabKey=Ze.currentTabKey,Oe(a),Ne(),e.$broadcast("angucomplete-alt-oxd:clearInput");var i=Ze.params.filter.status,o=Ze.params.filter.workflowState;Ze.params.filter=G(a),void 0!==i&&(Ze.params.filter.status=i),void 0!==o&&(Ze.params.filter.workflowState=o),Ze.page=1,ge(),he(void 0,!0)}})}}function Ne(t){t||e.$emit("changeCalledFromMyShortcutsVariable");var i=b[nt];i||(i=ct),i.currentTabKey=Ze.currentTabKey,Ze.params&&Ze.params.filter[lt]?i[lt]=Ze.params.filter[lt]:delete i[lt],a.go(a.current.name,{filterParameters:i},{notify:!1}),m(function(){"employeeProfile"!=Ze.redirectedFrom||a.$current.name.endsWith(".add")||a.$current.name.endsWith(".unapproved")||a.$current.name.endsWith(".my_unapproved")||A.addBackToProfileButton(Ze.empNo,!0)})}function Oe(e){var t=angular.copy(e);t.isPersisted&&(delete t[lt],D.persistParameters(Ze.listNameForPersistingFilters,t)),b[nt]=e}function Re(e){s.showProgressModal("Exporting Goals to CSV","goalListCSV",{preventClose:!0,determinate:!1,closeDelay:0},function(){Be("csv",e)})}function ze(e,t){s.showModal("app/performance/goals/goalList/exportConfirmation/export-confirmation-popover.html","ExportConfirmationPopoverController","modal",{type:t.type,currentTab:Ze.currentTabKey,clickEvent:e}).then(function(e){e&&("pdf"===t.type?je(e):Re(e))})}function je(e){Ge().then(function(t){t===!0&&s.showProgressModal("Exporting Goals to PDF","goalListPDF",{preventClose:!0,determinate:Ze.total>100,progressCallback:Ve()},function(){Be("pdf",e)})})}function Ve(){var e=Ze.total,t=e/10;t<100&&(t=100,t>e&&(t=e));var a=.1911962*e+.1464345,o=t/(e+a)*100,n=0,l=25e3,r=l/1e3*t,s=(new Date,0),c=new Date,d=0,m=d+o;return function(){return i.call("progress","GET",[],{name:"goalListPDF"}).then(function(e){var t=e.data.data;if(null==t)return null;var a=new Date;if(t===s){var i=a-c,l=m-d,u=i/r*o,p=s+u,f=d+l/2,g=p>f?f:p;g>d&&(d=g)}else if(t>d){var h=a-c;n++,r=1===n?h:(r*(n-1)+h)/n,c=a,s=t,d=t,m=d+o,m>100&&(m=100)}return d})}}function Ge(){if(Ze.total>ot){var e=c.getLocalizedCustomWithVariables("You Have Exceeded the Maximum Limit of {{maximum}} Records Allowed for the PDF Export. Please Try Again.",{maximum:ot});return x.warning(e),r.when(!1)}if(Ze.total>it){var t=c.getLocalizedCustomWithVariables("Current filter matches {{count}} goals, PDF generation may take some time. Are you sure you want to continue?",{count:Ze.total});return s.showConfirmationModal(t,"Yes, Proceed","No, Cancel")}return r.when(!0)}function Be(e,t){var a={filter:Ze.params.filter,listType:Ze.listType,mode:Ze.goalsLevel,format:e};a.filter.category=t,v.exportGoals(a)}function qe(){for(var e=a.current.name,t=["performance.goals.approved","performance.goals.unapproved","performance.goals.my","performance.goals.my_unapproved"],i=0;i<t.length;i++)if(e.startsWith(t[i]+"."))return!0;return!1}function He(){"performance.goals.approved"!==a.current.name&&"performance.goals.my"!==a.current.name||!Ze.goalWorkflowEnabled?Ze.showGoalNotifications=!1:Ze.showGoalNotifications=!0}function Ue(){if("employeeProfile"==Ze.redirectedFrom){var e={redirectedFrom:"employeeProfile",empNo:Ze.empNo};Ze.employeeId&&(e.employeeId=Ze.employeeId),Ze.empName&&(e.empName=Ze.empName)}"performance.goals.approved"===a.current.name?a.go("performance.goals.unapproved",e,{reload:!1}):"performance.goals.my"===a.current.name&&a.go("performance.goals.my_unapproved",e,{reload:!1})}function We(){return"Unapproved "+de()+"s"}function Ye(){tt={},v.clearFetchGoalDataCache()}function Je(){var t=a.current.name,i=k.onSuccess({},function(e){e.$to().name===t&&(v.initNavbar(),He())});e.$on("$destroy",function(){i()})}function Ke(){ct={goalLevel:"",goalPriority:"",selectedEmployee:null,selectedSupervisor:"",goalName:"",dueDateFrom:p.toStandardDate(new Date(moment().subtract(1,"y").format("YYYY-MM-DD"))),dueDateTo:p.toStandardDate(new Date(moment().add(1,"y").format("YYYY-MM-DD"))),withAchievedGoals:!1,includeDevelopmentGoals:!1,jobTitle:"",location:"",subunit:"",employmentStatus:"",include:"1",currentTabKey:Ze.currentTabKey}}var Ze=this;Ze.add=De,Ze.editGoal=ke,Ze.fetchChildGoals=Ae,Ze.filterGoals=$e,Ze.redirectToUnApproved=Ue,Ze.getUnapprovedListTooltip=We,Ze.appraisalTemplates=[],Ze.operationalCountryLocationHierarchyData=[],Ze.total=0,Ze.page=1,Ze.activePageNo=1,Ze.orderField="dueDate",Ze.orderBy="ASC",Ze.cycleSearchString="",Ze.sortAction=q,Ze.activatedShortcutId=1,Ze.tabs=Le(),Ze.tabClicked=Pe,Ze.goalsLevel="approved",Ze.unapprovedGoals=!1,Ze.listName=g.listName;var Qe=[],Xe=C.RATING_INDICATOR_STATUS_CLASS_PREFIX,et="goalListCurrentTab",tt={};Ze.unapprovedCount=0,Ze.filters={},Ze.listData=[],Ze.selectedIds=[],Ze.leftPanelData=[];var at=6,it=1e3,ot=5e3;if(Ze.redirectedFrom=g.redirectedFrom,Ze.empNo=g.empNo,Ze.employeeId=g.employeeId,Ze.empName=g.empName,Ze.include=g.include,Ze.isListChildState=qe,g.goalsLevel&&(Ze.goalsLevel=g.goalsLevel,Ze.unapprovedGoals="unapproved"==Ze.goalsLevel),g.listType){Ze.listType=g.listType;var nt=Ze.listType+"_filter";Ze.isEmployeeGoalList="employee_goals"===Ze.listType}Ze.employeeStatusList=[{id:"1",name:h.instant("Current Employees Only")},{id:"2",name:h.instant("Current and Past Employees")},{id:"3",name:h.instant("Past Employees Only")}];var lt="status";Ze.listNameForPersistingFilters="performanceGoalsList",Ze.unapprovedGoals&&(lt="workflowState"),"employee_goals"!==Ze.listType||Ze.unapprovedGoals?Ze.listConfigurable=!1:Ze.listConfigurable=!0,Ze.listConfig={};var rt=["goalLevel","goalPriority","selectedEmployee","goalName","dueDateFrom","dueDateTo","withAchievedGoals","includeDevelopmentGoals","employee_name","include","location","subunit","selectedSupervisor","supervisor_name","jobTitle","employmentStatus","isPersisted","currentTabKey",lt];v.initNavbar();var st=!1,ct={};M(),e.$on("refreshGoalList",function(){he(void 0,!0)})}angular.module("app.performance").controller("PerformanceGoalsController",e),e.$inject=["$scope","$rootScope","$state","webservice","loader","settingsService","datagroupPermissions","$q","modalHelperService","localizedMessages","$window","$timeout","ModalService","dateService","performanceAppraisalCycleService","$stateParams","$translate","goalService","listConfigurationService","$localStorage","performanceConstants","formHelper","employeeService","dataListSettingsService","performanceGoalService","toast","goalCategoryServiceFactory","$transitions","adminService","goalCopyService","menuService"]}(),function(){"use strict";function e(e,t,a,i,o){function n(t,a,i){var o="",n=l(t,i);return n&&(o="disabled"),{label:e.getLocalizedCustom("Copy Selected"),icon:"content_copy","class":"btn-label btn-feedback "+o,tooltip:r(n,i.categoryId),onClick:n?function(){}:a}}function l(e,a){for(var i=0,o=0,n=!0,l=!1,r=[],s=0;s<e.length;s++)e[s].allowedToCopy||o++,n&&e[s].purposeId==t.DEVELOPMENT_GOAL_PURPOSE_ID&&(n=!1),r.indexOf(e[s].levelId)<0&&r.push(e[s].levelId),l||e[s].levelId!=t.BUSINESS_GOAL_LEVEL_ID||(l=!0);return a.hasGoalCreatePermission?n?!a.hasOrganizationGoalCreatePermission&&l?i=3:r.length>1?i=4:e.length===o?i=5:o>0&&(i=6):i=2:i=1,i}function r(e,t){var a=s(t),i="";switch(e){case 1:i="You don't have the permissions to add "+a+"s from this view";break;case 2:i="You don't have the permissions to add development "+a+"s from this view";break;case 3:i="You don't have the permissions to add organizational "+a+"s";break;case 4:i="You don't have the permissions to copy both organizational and individual "+a+"s together";break;case 5:i="You don't have the permissions to add "+a+"s to the selected "+a+" owners";break;case 6:i="You don't have the permissions to add "+a+"s to some of the selected "+a+" owners"}return i}function s(e){var a="";return e===t.GOAL_CATEGORY_ID?a="goal":e===t.OBJECTIVE_CATEGORY_ID&&(a="objective"),a}function c(e){return e.category===t.GOAL_CATEGORY_ID?o.dispatch("performance/goals/dropGoalData"):e.category===t.OBJECTIVE_CATEGORY_ID&&o.dispatch("performance/objectives/dropObjectiveData"),a.call("goals/copy","POST",e,{})}function d(e){return a.call("goals/descendantPermissions","GET",[],{ids:e}).then(function(e){return e.data.data})}function m(e,t){var a={closeDelay:500,forceCompletionCallback:function(t){return 1==e.updateFinished},forceCancellationCallback:function(t){return 1==e.updateCancelled}};return i.showProgressModal(t,"goalCopy",a)}return{getCopyButton:n,copyGoals:c,openProgressModalForCopy:m,fetchGoalDescendantPermissions:d}}angular.module("app.performance").service("goalCopyService",e),e.$inject=["localizedMessages","performanceConstants","webservice","modalHelperService","$store"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(t,a,i){var o;return t.filter.category[0]===n.GOAL_CATEGORY_ID?o=m.getters["performance/goals/getGoalDataByParams"](t):t.filter.category[0]===n.OBJECTIVE_CATEGORY_ID&&(o=m.getters["performance/objectives/getObjectiveDataByParams"](t)),o?Promise.resolve(o):e.call("goals","GET",[],t,a,i).then(function(e){return t.filter.category[0]===n.GOAL_CATEGORY_ID?(m.dispatch("performance/goals/storeGoalParams",t),m.dispatch("performance/goals/storeGoalData",e.data)):t.filter.category[0]===n.OBJECTIVE_CATEGORY_ID&&(m.dispatch("performance/objectives/storeObjectiveParams",t),m.dispatch("performance/objectives/storeObjectiveData",e.data)),e.data})}function p(t){var a=m.getters["performance/goals/getFormattedGoalDataByParams"](t);return a?Promise.resolve(a):e.call("goals/formattedNames","GET",[],t,void 0,!1).then(function(e){return m.dispatch("performance/goals/storeFormattedGoalParams",t),m.dispatch("performance/goals/storeFormattedGoalData",e.data.data),e.data.data})}function f(t,a){return a===n.GOAL_CATEGORY_ID?m.dispatch("performance/goals/dropGoalData"):a===n.OBJECTIVE_CATEGORY_ID&&m.dispatch("performance/objectives/dropObjectiveData"),e.call("goals","DELETE",t,{}).then(function(e){return e.data.data})}function g(){e.clearMatchingKeysFromCache("goals")}function h(t){return e.call("goalChildren/"+t,"GET",[],{},void 0,!0).then(function(e){return e.data.data})}function v(t){return e.call("goalChildren/"+t,"GET",[],{}).then(function(e){return e.data})}function y(){return e.call("goalLevels","GET",[],{},void 0,!0).then(function(e){return e.data.data})}function b(){return e.call("performanceEvaluatorGroups","GET",[],{},void 0,!0).then(function(e){return e.data.data})}function C(t,i){i&&a.when([]);var o=m.getters["core/locations/getLocationDataByParams"](t);return o?Promise.resolve(o):e.call("employees/locations","GET",[],t,void 0,!1).then(function(e){return m.dispatch("core/locations/storeLocationParams",t),m.dispatch("core/locations/storeLocationData",e.data.data),e.data.data})}function w(t){t&&a.when([]);var i=m.getters["core/jobTitles/getJobTitles"];return i?Promise.resolve(i):e.call("jobTitles","GET",[],{},void 0,!1).then(function(e){return m.dispatch("core/jobTitles/storeJobTitleData",e.data.data),e.data.data})}function S(t){t&&a.when([]);var i=m.getters["core/subunits/getSubunits"];return i?Promise.resolve(i):e.call("subunits","GET",[],{},void 0,!1).then(function(e){return m.dispatch("core/subunits/storeSubunitData",e.data.data),e.data.data})}function D(){return e.call("goalPriorities","GET",[],{},void 0,!0).then(function(e){return e.data.data})}function T(){return e.call("goalStatuses","GET",[],{},void 0,!0).then(function(e){return e.data.data})}function x(t,a){var i="goal/"+t+"/comments";return null!=a&&""!=a&&(i=i+"/version/"+a),e.call(i,"GET",[],{}).then(function(e){return e.data})}function F(t,a){return e.call("goal/"+t+"/comments","POST",a,{}).then(function(e){return e.data.data})}function k(t,a){return e.call("goal/"+t+"/comments","DELETE",a,{})}function E(e,t){var a={readOnly:!1,visible:!0};return a=I(e,t,a),a=A(e,t,a)}function I(e,t,a){switch(e){case"name":case"description":case"dueDate":case"evaluators":case"addToLibrary":case"metric":case"metricUnitOfMeasurement":case"metricEnabled":case"goalPriority":case"readOnly":a.readOnly=t.disableAllFields;break;case"parentGoal":a.readOnly=t.disableAllFields||t.addingSubGoal;break;case"rating":a.readOnly=t.disableAllFields||!M(t)&&!L(t);break;case"goalLevel":a.readOnly=t.disableAllFields||!t.isAdmin||t.ownGoal||t.addingSubGoal;break;case"status":a.readOnly=t.disableAllFields||t.statusDisabled||0==M(t);break;case"selectedEmployee":a.readOnly=t.disableAllFields||t.ownGoal&&t.ownGoalReadOnly||null!==t.empNmber&&null!==t.redirectFrom}return a}function A(e,t,a){switch(e){case"status":t.goalCategoryId!=n.KEY_RESULT_CATEGORY_ID&&"on"==t.goalWorkflowStatus&&(null==t.goalId||t.performanceGoal&&t.performanceGoal.goalWorkflowStatus&&0==t.performanceGoal.goalWorkflowStatus.considerAsApproved)?a.visible="false":a.visible="true"}return a}function M(e){return"on"!=e.goalWorkflowStatus||!(null==e.goalId||e.performanceGoal&&e.performanceGoal.goalWorkflowStatus&&0==e.performanceGoal.goalWorkflowStatus.considerAsApproved)}function L(e){if("on"==e.goalWorkflowStatus&&null==e.goalId&&e.goalWorkflowStatuses&&Array.isArray(e.goalWorkflowStatuses))for(var t=0;t<e.goalWorkflowStatuses.length;t++){var a=e.goalWorkflowStatuses[t];if(a.resultingGoalStatus&&a.resultingGoalStatus.considerAsApproved)return!0}return!1}function P(e){var t={closeDelay:500,forceCompletionCallback:function(t){return 1==e.updateFinished},forceCancellationCallback:function(t){return 1==e.updateCancelled}};return s.showProgressModal("Bulk Assigning Goals","goalBulkAssign",t)}function $(t){return e.call("goalTemplates","GET",[],t,void 0,!0).then(function(e){return e.data})}function N(t){return e.call("goalTemplates","DELETE",t,{})}function O(){return["1","2","3"]}function R(){return!0}function z(){return!0}function j(){o.setTitle("Goals")}function V(t){return e.call("goalDefaultAssignableEmployee/"+t,"GET",[],{}).then(function(e){return e.data.data})}function G(e,t){var a={},i=parseInt(t,10);return i===n.DEVELOPMENT_GOAL_PURPOSE_ID?a=e.development_goals:i===n.PERFORMANCE_GOAL_PURPOSE_ID&&(a=e.Goals),a}function B(t){var a=!0,i={isOwnGoal:t,goalPurposeId:n.PERFORMANCE_GOAL_PURPOSE_ID},o=[n.GOAL_WORKFLOW_SAVE_ACTION,n.GOAL_WORKFLOW_SUBMIT_ACTION],l=m.getters["performance/goals/getGoalStatusesDataByParams"](i);return l?Promise.resolve(l):e.call("goalWorkflowStatuses","GET",[],i,void 0,!1).then(function(e){var t=e.data.meta;if("on"===t.status){var n=e.data.data,l=_.filter(n,function(e){return o.indexOf(e.label)>-1});a=l&&l.length>0}return m.dispatch("performance/goals/storeGoalStatusesParams",i),m.dispatch("performance/goals/storeGoalStatusesData",a),a})}function q(e){var a=l(e),i=t.baseUrl+"api/goals/export?"+a;r.ohrmGlobals.downloadFile(i)}function H(t){return m.dispatch("performance/goals/dropGoalData"),m.dispatch("performance/objectives/dropObjectiveData"),e.call("goals/bulkAction","POST",t,{}).then(function(e){return e})}function U(e){var t="";switch(e){case"1":t="ohrm_organization";break;case"2":t="ohrm_individual";break;case"3":t="ohrm_team"}return t}function W(t,a){var i="goal/"+t;return null!=a&&""!=a&&(i=i+"/version/"+a),e.call(i,"GET",[],{})}function Y(e,t){var a="";return a=t&&e.categoryId!=n.KEY_RESULT_CATEGORY_ID&&e.goalWorkflowStatus&&0==e.goalWorkflowStatus.considerAsApproved?n.RATING_INDICATOR_WORKFLOW_STATUS_CLASS_PREFIX+e.goalWorkflowStatus.id:n.RATING_INDICATOR_STATUS_CLASS_PREFIX+e.goalStateId}function J(e,t){var a=e.goalStatusName;return t&&e.categoryId!=n.KEY_RESULT_CATEGORY_ID&&e.goalWorkflowStatus&&0==e.goalWorkflowStatus.considerAsApproved&&(a=e.goalWorkflowStatus.displayName),c.getLocalizedCustom(a)}function K(t,a){return e.call("goal/"+t+"/attachments","POST",a,{}).then(function(e){return e.data.data})}function Z(t,a){var i="goal/"+t+"/attachments";return null!=a&&""!=a&&(i=i+"/version/"+a),e.call(i,"GET",[],{}).then(function(e){return e.data})}function Q(t,a){return e.call("goal/"+t+"/attachments","DELETE",a,{})}function X(e,a,i){var o=t.baseUrl+"api/goal/"+e+"/attachment/"+i;null!=a&&""!=a&&(o=o+"/version/"+a),r.ohrmGlobals.downloadFile(o)}function ee(t){return d.show(),e.call("goalManualReminders","PATCH",t,{}).then(function(e){d.hide(),e.data.success?c.successToast(c.getLocalizedCustom("Successfully Sent")):c.errorToast(c.getLocalizedCustom("Failed to Send"))},function(e){d.hide(),c.errorToast(c.getLocalizedCustom("Failed to Send"))})}function te(e,t,a){var i="",o=oe(e);"restrict"===o.restrictionType&&(i=" disabled");var n=ne(o),l=ae(o.invalidSelection,a);return{label:c.getLocalizedCustom("Send Reminder"),icon:"ohrm_bell","class":"btn-label-feedback-warning send-reminder-btn"+i,onClick:function(){if("restrict"!==o.restrictionType){if("proceed-with-confirmation"!==o.restrictionType)return t(l);ie(n).then(function(e){if(e===!0)return t(l)})}},tooltip:"restrict"===o.restrictionType?n:""}}function ae(e,t){var a=_.pluck(e,"id");return _.difference(t,a)}function ie(e){return s.showConfirmationModal(e,"Yes, Proceed","No, Cancel")}function oe(e){for(var t=[],a=[],i=[],o=0,n="none",l=0;l<e.length;l++)e[l].allowedToEdit&&e[l].empNumber!=r.emp_number&&!e[l].empTerminated||t.push(e[l]),e[l].empHasWorkEmail||a.push(e[l]);var s=_.pluck(e,"id"),c=_.pluck(a,"id"),d=_.pluck(t,"id");return d.length>0&&0===c.length&&0===_.difference(s,d).length?(o=1,i=t,n="restrict"):c.length>0&&0===d.length&&0===_.difference(s,c).length?(o=2,i=a,n="restrict"):c.length>0&&d.length>0&&0===_.difference(s,_.union(c,d)).length?(o=3,i=_.union(a,t),n="restrict"):t.length>0&&0===a.length?(o=4,i=t,n="proceed-with-confirmation"):a.length>0&&0===t.length?(o=5,i=a,n="proceed-with-confirmation"):a.length>0&&t.length>0&&(o=6,i=_.union(a,t),n="proceed-with-confirmation"),{invalidSelectionType:o,invalidSelection:i,restrictionType:n}}function ne(e){var t="";switch(e.invalidSelectionType){case 1:t="Reminders can be sent only to the active goal owners of permitted goals. You can't send reminders to the selected employees.";break;case 2:t="Reminders can be sent only to the employees who have the work email. You can't send reminders to the selected employees.";break;case 3:t="Reminders can be sent only to the active goal owners of permitted goals who have the work email. You can't send reminders to the selected employees.";break;case 4:t=c.getLocalizedCustomWithVariables("Reminders will be sent only to the active goal owners of permitted goals. {{employeeSelection}} will not get the reminder with your selection. Are you sure you want to continue?",{employeeSelection:le(e.invalidSelection)});break;case 5:t=c.getLocalizedCustomWithVariables("Reminders will be sent only to the employees who have the work email. {{employeeSelection}} will not get the reminder. Are you sure you want to continue?",{employeeSelection:le(e.invalidSelection)});break;case 6:t=c.getLocalizedCustomWithVariables("Reminders will be sent only to the active goal owners of permitted goals who have the work email. {{employeeSelection}} will not get the reminder with your selection. Are you sure you want to continue?",{employeeSelection:le(e.invalidSelection)})}return t}function le(e){for(var t=3,a=[],i=[],o="",n=0;n<e.length;n++)i.indexOf(e[n].empNumber)===-1&&(a.push(e[n].empName),i.push(e[n].empNumber));if(a=a.sort(),1===a.length)o=a[0];else if(a.length<=t)o=a.slice(0,a.length-1).join(", "),o+=" "+c.getLocalizedCustom("and"),o+=" "+a[a.length-1];else if(a.length>t){o=a.slice(0,t).join(", "),o+=" "+c.getLocalizedCustom("and");var l=a.length-t;o+=" "+l,o+=l>1?" "+c.getLocalizedCustom("other employees"):" "+c.getLocalizedCustom("other employee")}return o}function re(e,t){var a="",i="";return e||(a=" disabled",i="You can't send a reminder, since this employees work email is not set."),{label:c.getLocalizedCustom("Send Reminder"),icon:"ohrm_bell","class":"btn btn-label-feedback-warning send-reminder-btn btn-sm"+a,onClick:function(){if(e)return t()},tooltip:i}}return{fetchChildGoals:h,getChildGoalsWithMetaData:v,fetchGoalData:u,fetchGoalLevels:y,fetchComments:x,saveComment:F,deleteComments:k,getFormFieldRestrictions:E,openProgressModal:P,fetchGoalTemplates:$,deleteGoalTemplates:N,getDefaultSelectedEvaluatorGroupIds:O,areGoalsEnabled:R,areObjectivesEnabled:z,initNavbar:j,getGoalDefaultAssignableEmployee:V,getGoalPermissionsByPurpose:G,isGoalAddPermittedByWorkflow:B,exportGoals:q,fetchGoalPriorities:D,performBulkAction:H,getGoalLevelIcon:U,fetchGoalStatuses:T,fetchLocations:C,fetchJobTitles:w,fetchSubunits:S,fetchEvaluatorGroups:b,clearFetchGoalDataCache:g,fetchGoal:W,isGoalInAnApprovedStatus:M,getRatingWidgetClass:Y,getGoalStatusName:J,saveAttachment:K,fetchAttachments:Z,deleteAttachments:Q,downloadAttachments:X,sendReminders:ee,getBulkSendReminderButton:te,getIndividualSendReminderButton:re,fetchGoalNamesFormatted:p,deleteGoals:f}}angular.module("app.performance").service("goalService",e),e.$inject=["webservice","LOGIN","$q","ModalService","titleService","performanceConstants","$httpParamSerializerJQLike","$rootScope","modalHelperService","localizedMessages","loader","$store"]}(),function(){"use strict";function e(e,t){var a=angular.copy(e);return a.initNavbar=function(){t.setTitle("My Goals")},a}angular.module("app.performance").service("myGoalService",e),e.$inject=["goalService","titleService"]}(),function(){"use strict";function e(e,t,a,i,o,n){var l=angular.copy(e);return l.initNavbar=function(){var e="performance.goals.approved";"employeeProfile"==o.redirectedFrom&&(e="performance.goals.approved({empNo: "+o.empNo+" , redirectedFrom:'employeeProfile'})",o.employeeId&&(e="performance.goals.approved({empNo: "+o.empNo+" , redirectedFrom:'employeeProfile', employeeId: '"+o.employeeId+"'})"),o.empName&&(e="performance.goals.approved({empNo: "+o.empNo+" , redirectedFrom:'employeeProfile', employeeId: '"+o.employeeId+"', empName: '"+o.empName+"'})")),i(function(){t.setForcedTitle(["Performance","Goals","Goal List"],{2:{state:"performance.goals.approved"}}),a.$broadcast("SingleMenuItemTopRibbonControllerMenuChanged",{menuItem:"Unapproved"}),a.$broadcast("addTopMenuBackButton",{uiSref:e,tooltip:"Goal List"}),"employeeProfile"===o.redirectedFrom&&a.$broadcast("addAdditionalTopMenuBackButton",{uiSref:"pim.employees.profile.profile({empNumber: "+o.empNo+"})",tooltip:"Employee Profile",icon:"back_to_profile"})})},l}angular.module("app.performance").service("unapprovedGoalService",e),e.$inject=["goalService","titleService","$rootScope","$timeout","$stateParams","menuService"]}(),function(){"use strict";function e(e,t,a,i,o){var n=angular.copy(e);return n.initNavbar=function(){var e="performance.goals.my";"employeeProfile"==o.redirectedFrom&&(e="performance.goals.my({empNo: "+o.empNo+" , redirectedFrom:'employeeProfile'})"),i(function(){t.setForcedTitle(["Performance","Goals","My Goals"],{2:{state:"performance.goals.my"}}),a.$broadcast("SingleMenuItemTopRibbonControllerMenuChanged",{menuItem:"Unapproved"}),a.$broadcast("addTopMenuBackButton",{uiSref:e,tooltip:"My Goals"}),"employeeProfile"===o.redirectedFrom&&a.$broadcast("addAdditionalTopMenuBackButton",{uiSref:"pim.employees.profile.profile({empNumber: "+o.empNo+"})",tooltip:"Employee Profile",icon:"back_to_profile"})})},n}angular.module("app.performance").service("unapprovedMyGoalService",e),e.$inject=["goalService","titleService","$rootScope","$timeout","$stateParams"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){var e={"":{templateUrl:"app/performance/goals/goalList/goal_list.html",controller:"PerformanceGoalsController",controllerAs:"vm"}},t={"":{templateUrl:"app/performance/goals/goalList/goal_list.html",controller:"PerformanceGoalsController",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:"SingleMenuItemTopRibbonController",controllerAs:"vm"}},a={url:"/{category}/{goalId}/redirectedFrom/{listType}/redirectedList/{listName}/parentGoalId/{parentGoalId}/action/{action}/redirectFrom/{redirectFrom}",views:{"":{templateUrl:"app/performance/goals/add/add-goal.html",controller:"PerformanceAddGoalController",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:"SingleMenuItemTopRibbonController",controllerAs:"vm"}},data:{oxd:!0},params:{goalId:null,listType:"employee_goals",redirectFrom:null,referrer:null,empNumber:null,category:"goal",parentGoalId:null,parentGoalLevel:null,listName:null,idpId:null,targetedRole:null,version:null,action:null}},i={url:"/{category}/{goalId}/redirectedFrom/{listType}/redirectedList/{listName}/parent/{parentGoalId}",views:{"":{templateUrl:"app/performance/goals/add/add-goal.html",controller:"PerformanceAddGoalController",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:"SingleMenuItemTopRibbonController",controllerAs:"vm"}},data:{oxd:!0},params:{goalId:null,listType:"employee_goals",redirectFrom:null,referrer:null,empNumber:null,category:"goal",parentGoalId:null,parentGoalLevel:null,listName:null,idpId:null,targetedRole:null,version:null,action:null}};return[{state:"performance",config:{"abstract":!0,url:"/performance",template:"<ui-view/>"}},{state:"performance.view_appraisals_list",config:{url:"/appraisals_list?empNo?employeeId?empName?redirectedFrom",views:{"":{templateUrl:"app/performance/appraisals/appraisalsList/appraisal-list.html",controller:"PerformanceViewAppraisalsListController",controllerAs:"vm"},"navbar@":{templateUrl:"app/performance/appraisals/navbar/appraisal-list-navbar.html",controller:"AppraisalsListNavbarController",controllerAs:"vm"}},data:{title:"Employee Appraisals",addShortcut:!0,paramsToMatchMenu:!0},params:{filterParameters:{dynamic:!0,value:null},calledFromMyShortcuts:null,isMyAppraisalList:!1,redirectedFrom:{value:null,squash:!0},empNo:null,employeeId:null,empName:null,resetPagination:!1}}},{state:"performance.view_my_appraisals",config:{url:"/my_appraisals?redirectedFrom?empNo",views:{"":{templateUrl:"app/performance/appraisals/appraisalsList/appraisal-list.html",controller:"PerformanceViewAppraisalsListController",controllerAs:"vm"},"navbar@":{templateUrl:"app/performance/appraisals/navbar/appraisal-list-navbar.html",controller:"AppraisalsListNavbarController",controllerAs:"vm"}},data:{title:"My Appraisals",addShortcut:!1,paramsToMatchMenu:!0},params:{isMyAppraisalList:!0,empNo:null,redirectedFrom:{value:null,squash:!0},resetPagination:!1}}},{state:"performance.multiple_view",config:{url:"/multiple_view",views:{"":{templateUrl:"app/performance/view/multipleView/multiple-view.html",controller:"MultipleViewController",controllerAs:"vm"}},data:{title:"Multiple View"}}},{state:"performance.single_view",config:{url:"/single_view",views:{"":{templateUrl:"app/performance/view/singleView/single-view.html",controller:"SingleViewController",controllerAs:"vm"}},data:{title:"Single View"}}},{state:"performance.export_results",config:{url:"/export_results/:reportId",views:{"":{templateUrl:"app/performance/report/resultsExport/results-export.html",controller:"resultsExportController",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:"SingleMenuItemTopRibbonController",controllerAs:"vm"}},data:{title:"Export Performance Data",initialState:"reports_and_analytics.catalogue"},params:{reportId:null}}},{state:"performance.goals",config:{"abstract":!0,url:"/goals"}},{state:"performance.goals.approved",config:{url:"/approved?empNo?employeeId?empName?redirectedFrom?include",views:angular.copy(e),params:{listType:"employee_goals",goalsLevel:"approved",
listName:"performanceGoalsList",filterParameters:{dynamic:!0,value:null},calledFromMyShortcuts:null,useFiltersFromFilterParams:null,redirectedFrom:{value:null,squash:!0},empNo:null,employeeId:null,empName:null,include:null},resolve:{goalService:"goalService"},data:{initialState:"performance.goals.approved",oxd:!0,title:"Goals",addShortcut:!0}}},{state:"performance.goals.unapproved",config:{url:"/unapproved?empNo?employeeId?empName?redirectedFrom",views:angular.copy(t),params:{listType:"employee_goals",goalsLevel:"unapproved",listName:"performanceUnApprovedGoalsList",filterParameters:{dynamic:!0,value:null},calledFromMyShortcuts:null,useFiltersFromFilterParams:null,redirectedFrom:{value:null,squash:!0},empNo:null,employeeId:null,empName:null},resolve:{goalService:"unapprovedGoalService"},data:{initialState:"performance.goals.approved",oxd:!0,addShortcut:!0}}},{state:"performance.goals.my",config:{url:"/my?redirectedFrom?empNo",views:angular.copy(e),params:{listType:"my_goals",goalsLevel:"approved",listName:"performanceMyGoalsList",calledFromMyShortcuts:null,useFiltersFromFilterParams:null,empNo:null,redirectedFrom:{value:null,squash:!0},filterParameters:{dynamic:!0,value:null}},resolve:{goalService:"myGoalService"},data:{oxd:!0,title:"My Goals",addShortcut:!1}}},{state:"performance.goals.my_unapproved",config:{url:"/my_unapproved?empNo?employeeId?empName?redirectedFrom",views:angular.copy(t),params:{listType:"my_goals",goalsLevel:"unapproved",listName:"performanceUnApprovedMyGoalsList",calledFromMyShortcuts:null,useFiltersFromFilterParams:null,redirectedFrom:{value:null,squash:!0},empNo:null,employeeId:null,empName:null},resolve:{goalService:"unapprovedMyGoalService"},data:{oxd:!0,initialState:"performance.goals.my",addShortcut:!1}}},{state:"performance.goals.approved.add",config:angular.copy(a)},{state:"performance.goals.unapproved.add",config:angular.copy(a)},{state:"performance.goals.my.add",config:angular.copy(a)},{state:"performance.goals.my_unapproved.add",config:angular.copy(a)},{state:"performance.add_goal",config:angular.copy(a)},{state:"performance.add_goal_legacy",config:angular.copy(i)},{state:"performance.goal_library",config:{url:"/goal_library",views:{"":{templateUrl:"app/performance/goals/goalLibrary/goal_library.html",controller:"PerformanceGoalLibraryController",controllerAs:"vm"},"navbar@":{templateUrl:"app/performance/goals/goalLibrary/goal_library_navbar.html",controller:"GoalLibraryNavbarController",controllerAs:"navbar"}},data:{title:"Goal Library"}}},{state:"performance.competency_profile_grid",config:{url:"/competency_profile_grid/{competencyProfileId}",views:{"":{templateUrl:"app/performance/competency_profiles/grid/competency-profile-grid.html",controller:"PerformanceCompetencyProfileGridController",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:function(){this.menuItem="Competency Profile"},controllerAs:"vm"}},data:{},params:{competencyProfileId:null}}},{state:"performance.competency_profiles",config:{url:"/competency_profiles",views:{"":{templateUrl:"app/performance/competency_profiles/list/competency-profiles.html",controller:"PerformanceCompetencyProfilesController",controllerAs:"vm"}},data:{title:"Competency Profiles"}}},{state:"performance.add_competency_profile",config:{url:"/add_competency_profile",views:{"":{templateUrl:"app/performance/competency_profiles/add/add-competency-profile.html",controller:"PerformanceAddCompetencyProfileController",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:function(){this.menuItem="Add Competency Profile"},controllerAs:"vm"}},data:{title:"Add Competency Profile"}}},{state:"performance.appraisal_cycles",config:{url:"/appraisal_cycles",views:{"":{templateUrl:"app/performance/appraisal_cycles/cycle_list/appraisal-cycle-list.html",controller:"PerformanceViewAppraisalCycleListController",controllerAs:"vm"}},data:{title:"Appraisal Cycles",oxd:!0}}},{state:"performance.add_appraisal_cycles",config:{url:"/add_appraisal_cycles",views:{"":{templateUrl:"app/performance/appraisal_cycles/add_edit_appraisal_cycles/add_appraisal_cycles.html",controller:"AddEditAppraisalCycleController",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:function(){this.menuItem="Create Appraisal Cycle"},controllerAs:"vm"}},data:{oxd:!0},resolve:{close:function(){return!1},appraisalCycleId:function(){return!1}}}},{state:"performance.add_appraisal_cycle_employees",config:{url:"/appraisal_cycle/{appraisalCycleId}/add_employees",views:{"":{templateUrl:"app/performance/appraisal_cycles/add_appraisal_cycle_employees/add_appraisal_cycle_employees.html",controller:"AddAppraisalCycleEmployeesController",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:function(){this.menuItem="Add Employees"},controllerAs:"vm"}},data:{oxd:!0,initialState:"performance.appraisal_cycles"},params:{appraisalCycleId:null}}},{state:"performance.manage_appraisal_cycle",config:{url:"/appraisal_cycle/{appraisalCycleId}/manage",views:{"":{templateUrl:"app/performance/appraisal_cycles/manage_appraisal_cycle/manage-appraisal-cycle.html",controller:"ManageAppraisalCycleController",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/performance/appraisal_cycles/manage_appraisal_cycle/manage_appraisal_cycle_custom_top_ribbon.html",controller:"ManageAppraisalCycleTopRibbonController",controllerAs:"vm"}},data:{oxd:!0,title:"Appraisal Cycles",initialState:"performance.appraisal_cycles"},params:{appraisalCycleId:null,warningMsg:null}}},{state:"performance.appraisal_archive_download",config:{url:"/appraisal_archive_download/{file_identity}",views:{"":{templateUrl:"app/performance/appraisals/appraisalArchiveDownload/appraisal-archive-download.html",controller:"AppraisalArchiveDownloadController",controllerAs:"vm"}},data:{title:"Download",oxd:!0},params:{file_identity:null}}}]}angular.module("app.performance").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e){function t(){e(!0)}function a(){e(!1)}var i=this;i.confirm=t,i.cancel=a}angular.module("app.performance").controller("PerformanceDeleteConfirmationController",e),e.$inject=["close"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h){function v(){var t={};t.subunits=a.call("subunits","GET",[],{tree:!0});var o={pageNo:1,limit:S.pageSize};t.reportExportHistory=a.call("reportExportHistory/"+S.reportId,"GET",[],o),i.show(),l.all(t).then(function(e){S.subunits=r.getEnumAndTitleMapForSelect(b(e.subunits.data.data),{value:"id",name:"name"},!0),S.reportExportHistory=e.reportExportHistory.data.data,S.dataInCurruntPage=e.reportExportHistory.data.data.length,S.totalDataCount=e.reportExportHistory.data.meta.count,S.lastPage=Math.ceil(S.totalDataCount/S.pageSize),C(),y(),i.hide()}),e.$broadcast("SingleMenuItemTopRibbonControllerMenuChanged",{menuItem:"Performance Result Export"}),e.$broadcast("addTopMenuBackButton",{uiSref:"reports_and_analytics.catalogue",tooltip:"Reports"}),h.setForcedTitle(["Reports and Analytics","Reports"],null)}function y(){S.panelInfo={reportExportHistory:{title:"Export History"}};var e=[{name:"file_name",lable:"File Name",getter:"file_name",sortable:!1,sortAction:"fetchReportExportHistoryData"},{name:"createdBy",lable:"Created By",getter:"SystemUser",formatter:function(e,t){return e.Employee?e.Employee.firstName+" "+e.Employee.lastName+" ["+e.user_name+"]":"["+e.user_name+"]"}},{name:"created_at",lable:"Created At",getter:"created_at",formatter:function(e,t){if(e){var a=e.slice(0,10),i=e.slice(10);return u.toLocalizedDate(a)+i}return e}}];S.listData={reportExportHistory:{selectable:!1,selected:[],idGetter:"id",listFields:e,showColumnsAnyway:!0,permission:S.permisssions.Performance_Reports,listActions:[],unselectableIds:[],pagination:!0,columnWidths:["40%","30%","30%"]}}}function b(e){var e=e.map(function(e){return e.name=Array(5*e.level+1).join("")+e.name,e});return e}function C(){S.schema={type:"object",title:"Export Performance Data",properties:{subUnit:{title:"Sub Unit","enum":S.subunits["enum"],type:"string"},fromDate:{title:"Appraisal From Date",type:["null","object"]},toDate:{title:"Appraisal To Date",type:["null","object"]},fileName:{title:"File Name",type:"string",maxLength:100}},required:["fileName","fromDate","toDate"]},S.form=[{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m6 l4",titleMap:S.subunits.titleMap,key:"subUnit",emptyOption:n.getLocalizedCustom("All")},{type:"date",format:"yyyy-mm-dd",htmlClass:"col s12 m6 l4",key:"fromDate",defaultDate:null,ngModelOptions:{allowInvalid:!0},onChange:function(e){p.$broadcast("schemaForm.error.toDate","toDate",f.toDate.validator(S.model.toDate,S.model.fromDate))},validationMessage:{dateRequired:f.dateRequiredValidation.message,fromDate:n.getLocalizedCustom("From date should be before to date")},$validators:{fromDate:function(e){return f.fromDate.validator(e,S.model.toDate)},dateRequired:function(e){return f.dateRequiredValidation.validator(e)}}},{type:"date",format:"yyyy-mm-dd",htmlClass:"col s12 m6 l4",key:"toDate",defaultDate:null,ngModelOptions:{allowInvalid:!0},onChange:function(e){p.$broadcast("schemaForm.error.fromDate","fromDate",f.fromDate.validator(S.model.fromDate,S.model.toDate))},validationMessage:{dateRequired:f.dateRequiredValidation.message,302:n.getLocalizedCustom("Required"),toDate:n.getLocalizedCustom("To date should be after from date")},$validators:{toDate:function(e){return f.toDate.validator(e,S.model.fromDate)},dateRequired:function(e){return f.dateRequiredValidation.validator(e)}}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m6 l4",key:"fileName",validationMessage:{201:f.textLengthExceedValidation.message(100),302:n.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row form-buttons",items:[{htmlClass:"right",type:"submit",title:"Export Performance Data"}]}];var e=r.getRequiredMessage();S.form.splice(S.form.length-1,0,e),S.model={subUnit:"",fromDate:null,toDate:null,fileName:"Performance_Results_Export"}}function w(e,t,o){var n={pageNo:o,limit:S.pageSize};S.page=o,i.show(),a.call("reportExportHistory/"+S.reportId,"GET",[],n).then(function(e){S.reportExportHistory=e.data.data,S.dataInCurruntPage=e.data.data.length,S.totalDataCount=e.data.meta.count,S.lastPage=Math.ceil(S.totalDataCount/S.pageSize),y(),i.hide()})}function _(t){if(p.$broadcast("schemaFormValidate"),t.$valid){var a="filters=0";if(Object.keys(S.model).length>0){var i={};S.model.subUnit&&(i.sub_unit=S.model.subUnit),S.model.fromDate&&(i.appraisal_from_date=moment(S.model.fromDate).format("YYYY-MM-DD")),S.model.toDate&&(i.appraisal_to_date=moment(S.model.toDate).format("YYYY-MM-DD")),a=s({filters:i,fileName:S.model.fileName})}o.info(g.instant("Download Will Start Shortly")),e.ohrmGlobals.downloadFile(c.baseUrl+"api/exportReport/"+S.reportId+"/csv?"+a),setTimeout(function(){w(null,null,1)},3e3)}}var S=this;S.scope=t,S.reportId=d.reportId,S.subunits={},S.reportExportHistory=null,S.permisssions={},S.fetchReportExportHistoryData=w,S.pageSize=10,S.page=1,S.lastPage=0,S.totalDataCount=0,S.dataInCurruntPage=0,S.lastPage=0,S.onSubmit=_,S.hasPermissions=!0,S.noPermissionMessage="You do not have permission to access",S.noPermissionMessageRequiredDataGroups="",m.getPermissions().then(function(e){return S.permisssions=e,S.permisssions.Performance_Reports.read?void(S.permisssions.employee_appraisals.read&&S.permisssions.salary_history_details.read?(S.hasPermissions=!0,v()):(S.permisssions.salary_history_details.read||(S.noPermissionMessageRequiredDataGroups+=" Salary Information"),S.permisssions.employee_appraisals.read||(""!=S.noPermissionMessageRequiredDataGroups&&(S.noPermissionMessageRequiredDataGroups+=" and"),S.noPermissionMessageRequiredDataGroups+=" Employee Appraisal Information"),S.noPermissionMessage+=S.noPermissionMessageRequiredDataGroups,S.noPermissionMessage+=".",S.hasPermissions=!1)):void t.go("403")})}angular.module("app.performance").controller("resultsExportController",e),e.$inject=["$rootScope","$state","webservice","loader","toast","localizedMessages","$q","formHelper","$httpParamSerializerJQLike","LOGIN","$stateParams","datagroupPermissions","dateService","$scope","formValidationHelper","$translate","titleService"]}(),function(){"use strict";function e(e,t,a,i,o){function n(e){return i.addThousandSeparators(OhrmBig(e).toFixed(2))}function l(e){return i.addThousandSeparators(OhrmBig(e.currentValue).toFixed(2))+" "+e.unitOfMeasurement}function r(e){return i.stripComma(e)}function s(e){return e.form.items.push({type:"text",htmlClass:"col-4",key:"metricStartValue",condition:"vm.model.metricNumberFormat == "+m(),removePristine:e.parameters.removePristine,title:t.getLocalizedCustom("Start Value"),validationMessage:{numberFormat:t.getLocalizedCustom("Should be a Valid Number"),cannotBeSameAsTarget:t.getLocalizedCustom("Value Cannot be Same as Target Value"),precision:a.precision.message},$validators:{numberFormat:u,cannotBeSameAsTarget:function(t){return!(t&&e.model.metricTargetValue&&OhrmBig(t).eq(OhrmBig(e.model.metricTargetValue)))},precision:function(e){return a.precision.validator(i.stripComma(e),50,15)}},onChange:function(){e.doExtraValidations(e.model,!0,null,e.parameters)},ngModelOptions:{allowInvalid:!0},readonly:e.metricStartValueReadonly}),e.form.items.push({type:"text",htmlClass:"col-4",key:"metricTargetValue",condition:"vm.model.metricNumberFormat == "+m(),removePristine:e.parameters.removePristine,title:t.getLocalizedCustom("Target Value"),validationMessage:{numberFormat:t.getLocalizedCustom("Should be a Valid Number"),cannotBeSameAsStart:t.getLocalizedCustom("Value Cannot be Same as Start Value"),precision:a.precision.message},$validators:{numberFormat:u,cannotBeSameAsStart:function(t){return!(t&&e.model.metricStartValue&&OhrmBig(t).eq(OhrmBig(e.model.metricStartValue)))},precision:function(e){return a.precision.validator(i.stripComma(e),50,15)}},onChange:function(){e.doExtraValidations(e.model,!0,null,e.parameters)},ngModelOptions:{allowInvalid:!0},readonly:e.metricTargetValueReadonly}),e.form.items.push({type:"text",htmlClass:"col-4",key:"metricCurrentValue",condition:"vm.model.metricNumberFormat == "+m(),removePristine:e.parameters.removePristine,title:t.getLocalizedCustom("Current Value"),validationMessage:{numberFormat:t.getLocalizedCustom("Should be a Valid Number"),precision:a.precision.message},$validators:{numberFormat:u,precision:function(e){return a.precision.validator(i.stripComma(e),50,15)}},onChange:function(){e.doExtraValidations(e.model,!0,"metricCurrentValue",e.parameters)},ngModelOptions:{allowInvalid:!0},readonly:e.metricCurrentValueReadonly}),e.form}function c(){return"decimalNumber"}function d(e){f=e}function m(){return f}function u(e){var t=/^[-]?([0-9]{1,3},([0-9]{3},)*[0-9]{3}|[0-9]+)([.][0-9]+)?$/;return!(e&&!e.match(t))}function p(e,t,a){return o.getCompletionPercentage(e,t,a)}var f,g={formattedValue:n,formattedValueForList:l,cleanValue:r,modifyForm:s,name:c,setId:d,getId:m,getCompletionPercentage:p};return g}angular.module("app.performance").service("performanceDecimalNumberStrategyService",e),e.$inject=["$filter","localizedMessages","formValidationHelper","performanceCommonNumberModifiersService","performanceCommonNumberFormatService"]}(),function(){"use strict";function e(e,t,a,i,o){function n(e){return i.addThousandSeparators(OhrmBig(e).toFixed(0))}function l(e){return i.addThousandSeparators(OhrmBig(e.currentValue).toFixed(0))+" "+e.unitOfMeasurement}function r(e){return OhrmBig(e).toFixed(0)}function s(e){return e.form.items.push({type:"text",htmlClass:"col-4",key:"metricStartValue",condition:"vm.model.metricNumberFormat == "+m(),removePristine:e.parameters.removePristine,title:t.getLocalizedCustom("Start Value"),validationMessage:{numberFormat:t.getLocalizedCustom("Should be a Valid Number"),noDecimalNumberFormatValidation:t.getLocalizedCustom("The selected format doesn't allow decimal places"),cannotBeSameAsTarget:t.getLocalizedCustom("Value Cannot be Same as Target Value"),precision:a.precision.message},$validators:{numberFormat:u,noDecimalNumberFormatValidation:p,cannotBeSameAsTarget:function(t){return!(t&&e.model.metricTargetValue&&OhrmBig(t).eq(OhrmBig(e.model.metricTargetValue)))},precision:function(e){return a.precision.validator(i.stripComma(e),50,15)}},onChange:function(){e.doExtraValidations(e.model,!0,null,e.parameters)},ngModelOptions:{allowInvalid:!0},readonly:e.metricStartValueReadonly}),e.form.items.push({type:"text",htmlClass:"col-4",key:"metricTargetValue",condition:"vm.model.metricNumberFormat == "+m(),removePristine:e.parameters.removePristine,title:t.getLocalizedCustom("Target Value"),validationMessage:{numberFormat:t.getLocalizedCustom("Should be a Valid Number"),noDecimalNumberFormatValidation:t.getLocalizedCustom("The selected format doesn't allow decimal places"),cannotBeSameAsStart:t.getLocalizedCustom("Value Cannot be Same as Start Value"),precision:a.precision.message},$validators:{numberFormat:u,noDecimalNumberFormatValidation:p,cannotBeSameAsStart:function(t){return!(t&&e.model.metricStartValue&&OhrmBig(t).eq(OhrmBig(e.model.metricStartValue)))},precision:function(e){return a.precision.validator(i.stripComma(e),50,15)}},onChange:function(){e.doExtraValidations(e.model,!0,null,e.parameters)},ngModelOptions:{allowInvalid:!0},readonly:e.metricTargetValueReadonly}),e.form.items.push({type:"text",htmlClass:"col-4",key:"metricCurrentValue",condition:"vm.model.metricNumberFormat == "+m(),removePristine:e.parameters.removePristine,title:t.getLocalizedCustom("Current Value"),validationMessage:{numberFormat:t.getLocalizedCustom("Should be a Valid Number"),noDecimalNumberFormatValidation:t.getLocalizedCustom("The selected format doesn't allow decimal places"),precision:a.precision.message},$validators:{numberFormat:u,noDecimalNumberFormatValidation:p,precision:function(e){return a.precision.validator(i.stripComma(e),50,15)}},onChange:function(){e.doExtraValidations(e.model,!0,"metricCurrentValue",e.parameters)},ngModelOptions:{allowInvalid:!0},readonly:e.metricCurrentValueReadonly}),e.form}function c(){return"integerNumber"}function d(e){g=e}function m(){return g}function u(e){var t=/^[-]?([0-9]{1,3},([0-9]{3},)*[0-9]{3}|[0-9]+)([.][0-9]+)?$/;return!(e&&!e.match(t))}function p(e){var t=/^[-]?([0-9]{1,3},([0-9]{3},)*[0-9]{3}|[0-9]+)$/;return!(e&&!e.match(t))}function f(e,t,a){return o.getCompletionPercentage(e,t,a)}var g,h={formattedValue:n,formattedValueForList:l,cleanValue:r,modifyForm:s,name:c,setId:d,getId:m,getCompletionPercentage:f};return h}angular.module("app.performance").service("performanceIntegerNumberStrategyService",e),e.$inject=["$filter","localizedMessages","formValidationHelper","performanceCommonNumberModifiersService","performanceCommonNumberFormatService"]}(),function(){"use strict";function e(e,t,a,i){function o(){return a.call("goalMetricNumberFormats","GET",[],{},void 0,!0).then(function(e){var t=e.data.data;_.forEach(t,function(e){r[e.id]=e.strategy})})}function n(e){var t=r[e];t=t.charAt(0).toUpperCase()+t.substr(1);var a=i.get("performance"+t+"StrategyService");return a.setId(e),a}function l(){var e=[];return _.forEach(Object.keys(r),function(t){e.push(n(t))}),e}var r={};o();var s={init:o,getStrategy:n,getStrategyArray:l};return s}angular.module("app.performance").factory("performanceMetricNumberStrategyService",e),e.$inject=["performanceDecimalNumberStrategyService","performancePercentageNumberStrategyService","webservice","$injector"]}(),function(){"use strict";function e(e,t,a,i){function o(e){return a.stripComma(e)}function n(e){return OhrmBig(e.currentValue).toFixed(2)+"% "+e.unitOfMeasurement}function l(e){return a.stripComma(e)}function r(i){return i.form.items.push({type:"text",htmlClass:"col-4",key:"metricStartValue",condition:"vm.model.metricNumberFormat == "+d(),removePristine:i.parameters.removePristine,helpText:"%",helpTextClass:"input-percentage-suffix",title:t.getLocalizedCustom("Start Value"),validationMessage:{numericWithDigits:t.getLocalizedCustom("Should be a Valid Percentage"),cannotBeSameAsTarget:t.getLocalizedCustom("Value Cannot be Same as Target Value"),precision:e.precision.message},$validators:{numericWithDigits:e.numericWithDigits.validator,cannotBeSameAsTarget:function(e){return!(e&&i.model.metricTargetValue&&OhrmBig(e).eq(OhrmBig(i.model.metricTargetValue)))},precision:function(t){return e.precision.validator(a.stripComma(t),50,15)}},onChange:function(){i.doExtraValidations(i.model,!0,null,i.parameters)},ngModelOptions:{allowInvalid:!0},readonly:i.metricStartValueReadonly}),i.form.items.push({type:"text",htmlClass:"col-4",key:"metricTargetValue",condition:"vm.model.metricNumberFormat == "+d(),removePristine:i.parameters.removePristine,helpText:"%",helpTextClass:"input-percentage-suffix",title:t.getLocalizedCustom("Target Value"),validationMessage:{numericWithDigits:t.getLocalizedCustom("Should be a Valid Percentage"),cannotBeSameAsStart:t.getLocalizedCustom("Value Cannot be Same as Start Value"),precision:e.precision.message},$validators:{numericWithDigits:e.numericWithDigits.validator,cannotBeSameAsStart:function(e){return!(e&&i.model.metricStartValue&&OhrmBig(e).eq(OhrmBig(i.model.metricStartValue)))},precision:function(t){return e.precision.validator(a.stripComma(t),50,15)}},onChange:function(){i.doExtraValidations(i.model,!0,null,i.parameters)},ngModelOptions:{allowInvalid:!0},readonly:i.metricTargetValueReadonly}),i.form.items.push({type:"text",htmlClass:"col-4",key:"metricCurrentValue",condition:"vm.model.metricNumberFormat == "+d(),removePristine:i.parameters.removePristine,helpText:"%",helpTextClass:"input-percentage-suffix",title:t.getLocalizedCustom("Current Value"),validationMessage:{numericWithDigits:t.getLocalizedCustom("Should be a Valid Percentage"),precision:e.precision.message},$validators:{numericWithDigits:e.numericWithDigits.validator,precision:function(t){return e.precision.validator(a.stripComma(t),50,15)}},onChange:function(){i.doExtraValidations(i.model,!0,"metricCurrentValue",i.parameters)},ngModelOptions:{allowInvalid:!0},readonly:i.metricCurrentValueReadonly}),i.form}function s(){return"percentageNumber"}function c(e){u=e}function d(){return u}function m(e,t,a){return i.getCompletionPercentage(e,t,a)}var u,p={formattedValue:o,formattedValueForList:n,cleanValue:l,modifyForm:r,name:s,setId:c,getId:d,getCompletionPercentage:m};return p}angular.module("app.performance").service("performancePercentageNumberStrategyService",e),e.$inject=["formValidationHelper","localizedMessages","performanceCommonNumberModifiersService","performanceCommonNumberFormatService"]}(),function(){"use strict";function e(){function e(e,t){var a={},i={};t.forEach(function(e){i[e.name]=e.stateId});for(var o in e)e.hasOwnProperty(o)&&(a[i[o]]=[],e[o].forEach(function(e){a[i[o]].push(e)}));return{getAllowedActions:function(e,t){var i=[];return Array.isArray(a[e])&&a[e].forEach(function(e){t&&"Save"===e||i.push(e)}),i},isActionAllowed:function(e,t){return a[e].indexOf(t)!==-1}}}var t={getWorkflowManager:e};return t}angular.module("app.performance").service("performanceAppraisalCycleService",e),e.$inject=[]}(),function(){"use strict";function e(){function e(e,t,a){var i=OhrmBig(a).minus(OhrmBig(e)),o=OhrmBig(t).minus(OhrmBig(e)),n=OhrmBig(i).div(OhrmBig(o));return n=OhrmBig(n).times(100),n.toFixed(0)}return{getCompletionPercentage:e}}angular.module("app.performance").service("performanceCommonNumberFormatService",e)}(),function(){"use strict";function e(){function e(e){var t=e;return e&&(t=(e+"").replace(/,/g,"")),t}function t(e){if(e){var t=e.split(".");return t[0]=t[0].split("").reverse().join("").match(/.{1,3}/g).join(",").split("").reverse().join(""),t.join(".")}return e}return{stripComma:e,addThousandSeparators:t}}angular.module("app.performance").service("performanceCommonNumberModifiersService",e)}(),function(){"use strict";function e(e){function t(){return e.call("performanceConfig","GET",[],{configs:["goal_workflow"]},null,!0).then(function(e){return e.data.data&&"on"==e.data.data.goal_workflow})}function a(){return e.call("performanceConfig","GET",[],{configs:["appraisal_bulk_download_limit"]},null,!0).then(function(e){return parseInt(e.data.data.appraisal_bulk_download_limit,10)})}var i={fetchGoalWorkflowEnabled:t,fetchAppraisalBulkDownloadLimit:a};return i}angular.module("app.core").service("performanceConfigService",e),e.$inject=["webservice"]}(),function(){"use strict";angular.module("app.performance").constant("performanceConstants",{GOAL_CATEGORY_NAME:"goal",OBJECTIVE_CATEGORY_NAME:"objective",KEY_RESULT_CATEGORY_NAME:"key_result",DEVELOPMENT_GOAL_CATEGORY_NAME:"development_goal",GOAL_CATEGORY_ID:1,OBJECTIVE_CATEGORY_ID:2,KEY_RESULT_CATEGORY_ID:3,PERFORMANCE_GOAL_PURPOSE_NAME:"Performance",DEVELOPMENT_GOAL_PURPOSE_NAME:"Development",PERFORMANCE_GOAL_PURPOSE_ID:1,DEVELOPMENT_GOAL_PURPOSE_ID:2,DEVELOPMENT_GOAL_DATAGROUP:"development_goals",PERFORMANCE_GOAL_DATAGROUP:"Goals",GOAL_WORKFLOW_APPROVE_ACTION:"Approve",GOAL_WORKFLOW_REJECT_ACTION:"Reject",GOAL_WORKFLOW_SAVE_ACTION:"Save",GOAL_WORKFLOW_SUBMIT_ACTION:"Submit",RATING_INDICATOR_STATUS_CLASS_PREFIX:"indicator-status-",RATING_INDICATOR_WORKFLOW_STATUS_CLASS_PREFIX:"indicator-workflow-status-",UNAPPROVED_GOAL_STATUS_ID:-1,PENDING_GOAL_STATUS_ID:0,IN_PROGRESS_GOAL_STATUS_ID:1,ACHIEVED_GOAL_STATUS_ID:2,NOT_ACHIEVED_GOAL_STATUS_ID:3,ON_HOLD_GOAL_STATUS_ID:4,BUSINESS_GOAL_LEVEL_ID:"1",INDIVIDUAL_GOAL_LEVEL_ID:"2"})}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(e){q=e.scope,d.setScope(q)}function h(e){if(e.idpId){s.setForcedTitle(["Career Development","Individual Development Plans","Individual Development Plan"],{2:{state:"succession_and_development.idp.idp_view",params:{idpId:e.idpId}}});var t="succession_and_development.idp.idp_view({idpId: "+e.idpId+"})";p.$broadcast("addTopMenuBackButton",{uiSref:t,tooltip:"Individual Development Plan"})}else p.$broadcast("addTopMenuBackButton",{uiSref:"performance.goals.approved",tooltip:"Goal List"}),v(e)}function v(e){var t="performance.goals.approved";"my_goals"===e.listType&&(t="performance.goals.my"),f(function(){p.$broadcast("markMenuItemAsCurrent",{stateName:t})})}function y(e){var t=e.categorySpecificParams?e.categorySpecificParams.idpId:void 0;return{goalId:e.goalId,idpId:t}}function b(e){var t="Add Goal";return e.goalId&&(t="Goal Details"),t}function C(){return"ohrm_bullseye_strong"}function w(){return!0}function _(e){return d.goalModel(e)}function S(e){e.goalId&&(e.selectedEmployeeReadOnly=!0),e.goalLevelReadOnly=!0,e.form=[{type:"row",items:[{type:"container",htmlClass:"col-9",items:[{type:"row",items:[d.goalName(e)]},{type:"row",htmlClass:"goalTinyMceRow",items:[e.tinyMceEditor]}]},{type:"container",htmlClass:"col-3",items:[{type:"row",items:[d.goalLevel(e)]},{type:"row",items:[d.goalPriority(e)]},{type:"row",items:[d.goalStatus(e)]}]}]},{type:"row",items:[{type:"container",htmlClass:"col-10",items:[{type:"row",items:[d.goalDueDate(e),d.goalEvaluators(e)]},{type:"container",htmlClass:"grouped-form-group-container",items:[{type:"row",items:[d.goalReadOnly(e)]},{type:"row",items:[d.goalAssignedEmployee(e,!0)]}]}]},{type:"container",htmlClass:"col-2",items:[{type:"row",htmlClass:"align-content-center",items:[d.goalRating(e)]}]}]}],t.addRequiredMessage(e.form);var a={type:"row",htmlRowClass:"form-buttons-row",items:d.goalActionButtons(e)};return e.form.push(a),e.form}function D(e){return d.getActionableApproveRejectWorkflowActionButtons(e)}function T(e){return d.developmentGoalSchema(e)}function x(t){return t.filteredModel.category=c.GOAL_CATEGORY_ID,t.categorySpecificParams&&(t.categorySpecificParams.targetedRole&&(t.filteredModel.targetedRole=t.categorySpecificParams.targetedRole),t.categorySpecificParams.idpId&&(t.filteredModel.developmentPlan=t.categorySpecificParams.idpId)),e.call("goals","POST",t.filteredModel,{})}function F(t){return t.filteredModel.category=c.GOAL_CATEGORY_ID,t.categorySpecificParams&&(t.categorySpecificParams.targetedRole&&(t.filteredModel.targetedRole=t.categorySpecificParams.targetedRole),t.categorySpecificParams.idpId&&(t.filteredModel.developmentPlan=t.categorySpecificParams.idpId)),e.call("goal/"+t.model.id,"PATCH",t.filteredModel,{})}function k(){return!1}function E(){return c.GOAL_CATEGORY_ID}function I(){return c.DEVELOPMENT_GOAL_CATEGORY_NAME}function A(e){return d.fetchGoalChildren(e)}function M(){}function L(e){d.setSubGoalList(e)}function P(){return i.fetchGoalStatuses()}function $(){return c.DEVELOPMENT_GOAL_PURPOSE_ID}function N(e){return{idpId:e.idpId,targetedRole:e.targetedRole}}function O(){return!0}function R(e){return!1}function z(e,t){return u.getStatusIdBasedOnCompletion(e,t)}function j(e,t){return t}function V(e,t,a,i){return null}function G(e){return e.rating.toString()}function B(e,t){return e&&e.goalWorkflowStatus&&e.goalWorkflowStatus.considerAsApproved}var q,H={setScope:g,initNavbar:h,initModel:_,initForm:S,initSchema:T,create:x,update:F,showGoalChildren:k,getCategoryId:E,getCategoryName:I,fetchGoalChildren:A,doExtraValidations:M,setGoalChildrenList:L,getGoalStatuses:P,getDefaultGoalPurpose:$,getCategorySpecificParameters:N,getNavbarParameters:y,getPageTitle:b,getCategoryIcon:C,hasSummary:w,isOwnGoalReadOnly:O,isKeyResultEditMode:R,getActionableApproveRejectWorkflowActionButtons:D,getStatusIdBasedOnCompletion:z,getCompletionBasedOnStatusId:j,getGetCompletionBasedOnMetricValues:V,getRatingToSave:G,showSendReminderBasedOnWorkflowStatus:B};return H}angular.module("app.performance").service("performanceDevelopmentGoalService",e),e.$inject=["webservice","formHelper","localizedMessages","goalService","$translate","employeeService","$q","$window","titleService","performanceConstants","performanceGoalCategoryFormService","listHelper","performanceGoalService","$rootScope","$timeout"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g){function h(e){_e=e}function v(t){return{type:"generic-auto-complete",key:"name",htmlClass:"col-12",hideLabel:!1,placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":!1,ngModelOptions:{allowInvalid:!0},searchFields:"name,Customer.name",titleField:"titleField",disable:t.goalNameReadOnly,initialValue:t.getInitialName(),fetchItemsCallback:function(a,i){var o={filter:{name:a,level:t.model.goalLevel}};return e.call("goalTemplates","GET",[],o,i).then(function(e){var t=l.defer(),a=_.filter(e.data.data,function(e){return e});return a.forEach(function(e){e.titleField=e.name}),t.resolve(a),t.promise})},onInputChange:function(e){t.model.name=e,t.validateGoalNameLength(),t.model.templateId=null,_e.vm.model.templateId=null,t.selectedGoalName=e,t.templateId=null,_e.vm.templateId=null},objectSelectedCallback:function(e){e&&(t.model.name=e.title,t.model.templateId=e.originalObject.id,_e.vm.model.templateId=e.originalObject.id,t.selectedGoalName=e.title)},validationMessage:{201:m.textLengthExceedValidation.message(t.schema.properties.name.maxLength)}}}function y(e){return{type:"select",htmlClass:"col-12",key:"goalLevel",titleMap:t.getSortedObjectList(e.goalLevels.titleMap,"name","ASC"),onChange:e.goalLevelOnChange,readonly:e.goalLevelReadOnly,emptyOption:!1}}function b(e){return{type:"select",htmlClass:"col-12",key:"goalPriority",titleMap:e.goalPriorities.titleMap,readonly:e.goalPriorityReadOnly,emptyOption:!1}}function C(e){var t={radius:55,valueSuffix:"%",insideText:"",width:17,handleSize:"17",readOnly:e.ratingReadOnly,animation:!1,widgetClass:"large-rating"+w(e),allowedMax:e.goalMaxCompletionPercentage,includeIncrementSpinner:!0};return e.goalId&&(t.id=e.goalId),{type:"round-slide",key:"rating",config:t,showLabel:!0}}function w(e){var t="";return e.model&&void 0!==e.model.status&&(t=" "+c.RATING_INDICATOR_STATUS_CLASS_PREFIX+e.model.status),"on"==e.goalWorkflowStatus&&"false"===e.statusVisible&&e.workflowStatusObject&&!e.workflowStatusObject.considerAsApproved&&(t=" "+c.RATING_INDICATOR_WORKFLOW_STATUS_CLASS_PREFIX+e.workflowStatusObject.id),
e.goalId||"on"!=e.goalWorkflowStatus||"false"!==e.statusVisible||(t=""),t}function S(e){var t={radius:55,valueSuffix:"%",insideText:"",width:17,handleSize:"17",readOnly:!0,animation:!1,widgetClass:"large-rating"+w(e),allowedMax:e.goalMaxCompletionPercentage,includeIncrementSpinner:!1};return e.goalId&&(t.id=e.goalId),{type:"round-slide",key:"rating",config:t,showLabel:!0}}function D(e){var t={radius:55,valueSuffix:"%",insideText:"",width:17,handleSize:"17",readOnly:!0,animation:!1,widgetClass:"large-rating"+w(e),allowedMax:e.goalMaxCompletionPercentage,indicateOverAllowedMax:!0};return e.goalId&&(t.id=e.goalId),{type:"round-slide",key:"rating",config:t,showLabel:!0}}function T(e){return{type:"generic-auto-complete",key:"parentGoal",htmlClass:"col-4",hideLabel:!1,placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",ngModelOptions:{allowInvalid:!0,debounce:100},searchFields:"name,Customer.name",titleField:"titleField",tooltip:e.parentGoalReadOnly&&null!=e.getInitialParentGoal()&&e.getInitialParentGoal().titleField.length>=30?e.getInitialParentGoal().titleField:"",disable:e.parentGoalReadOnly,initialValue:e.getInitialParentGoal(),fetchItemsCallback:function(t){var a=l.defer();return e.getFormattedNamesBasedOnGoalCategory(t).then(function(e){var i=_.filter(e,function(e){return e.name.toLowerCase().indexOf(t.toLowerCase())!==-1});i.forEach(function(e){e.titleField=e.name}),a.resolve(i)}),a.promise},onInputChange:function(t){""===t?(e.model.parentGoal=null,e.selectedParentGoal={},_e.$broadcast("schemaForm.error.parentGoal","invalid",!0)):_e.$broadcast("schemaForm.error.parentGoal","invalid",a.getLocalizedCustom("Invalid"))},objectSelectedCallback:function(t){t&&(e.model.parentGoal=t.originalObject.id,e.selectedParentGoal=t.originalObject,_e.$broadcast("schemaForm.error.parentGoal","invalid",!0))}}}function x(e){return{type:"text",key:"parentGoal",htmlClass:"col-4",readOnly:!0,tooltip:e.model.parentGoal&&e.model.parentGoal.length>=30?e.model.parentGoal:""}}function F(e){return{type:"date",htmlClass:"col-4",key:"dueDate",defaultDate:e.model.dueDate,resetDefaultDate:e.resetDefaultDate,readonly:e.dueDateReadOnly,validationMessage:{302:a.getLocalizedCustom("Required")}}}function k(e,t){return{type:"auto-complete",htmlClass:"col-6",key:"selectedEmployee",placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",condition:"!vm.model.bulkAssign",disable:e.selectedEmployeeReadOnly,requireSelection:!0,setEmployeeNamePartialString:!0,employeeDataProvider:function(a,i){return E(a,e,t,i)}}}function E(t,a,i,o){var l={permissionType:ee(a),goalId:a.goalId,goalPurpose:a.goalPurpose};null!==t&&(l.employee_name_or_id=t);var r={filter:l,"page[offset]":"0","page[limit]":"50",sort:"fullName",includeSelf:i};return e.call("goalAssignableEmployees","GET",[],r,o).then(function(e){for(var t=[],a=0;a<e.data.data.length;a++)e.data.data[a].fullName=n.getFullName(e.data.data[a]),t.push(e.data.data[a]);return t})}function I(e){return{type:"select",htmlClass:"col-12",key:"status",readonly:e.statusReadOnly,condition:e.statusVisible,titleMap:_.map(t.getSortedObjectList(e.goalStatus.titleMap,"displayOrder","ASC"),function(e){return _.omit(e,["displayOrder"])}),emptyOption:!1}}function A(e){if(e.evaluatorsReadOnly)for(var t=0;t<e.performanceEvaluatorGroups.titleMap.length;t++)e.performanceEvaluatorGroups.titleMap[t].readonly=!0;return{type:"tree-select",htmlClass:"col-4",key:"evaluators",readonly:e.evaluatorsReadOnly,options:e.performanceEvaluatorGroups.titleMap,config:{allOptionCheckBox:{includeAllOption:!0,readonly:e.evaluatorsReadOnly},notSelectedOption:"-- "+a.getLocalizedCustom("Select")+" --",controllerOptionForTwoLevels:!1,singleLevelWidget:!0}}}function M(e){return{type:"checkbox",htmlClass:"col-3",key:"readOnly",readonly:e.readOnlyForAssigneeReadOnly,condition:"vm.model.goalLevel == '2' && !vm.ownGoal && (vm.isAdmin || vm.isSupervisor || vm.isDepartmentHead) && ((vm.emp_number == null) || (vm.model.selectedEmployee.empNumber != vm.emp_number))"}}function L(e){return{type:"button-switch",offLabel:"Single Assign",onLabel:"Bulk Assign",htmlClass:"col-6",key:"bulkAssign",condition:"vm.model.goalLevel == '2' && !vm.bulkAssignDisabled && !vm.ownGoal && !vm.hasEssRoleOnly && (vm.empNmber === null) && (vm.redirectFrom === null)",ngModelOptions:{allowInvalid:!0},onChange:function(){ie(e)}}}function P(e){return{type:"autocomplete-multiselect",htmlClass:"col-4",key:"jobTitles",choices:e.jobTitles,condition:"vm.model.bulkAssign && !vm.bulkAssignDisabled && !vm.hasEssRoleOnly",onChange:function(){ie(e)}}}function $(e){return{type:"tree-select",htmlClass:"col-4",key:"locations",options:e.locations.titleMap,config:{allOptionCheckBox:{includeAllOption:!0,readonly:!1},notSelectedOption:"-- "+a.getLocalizedCustom("Select")+" --",controllerOptionForTwoLevels:!0},onChange:function(){d(function(){ie(e)})}}}function N(e){return{type:"tree-select",htmlClass:"col-4",key:"subunits",options:e.subunits.titleMap,config:{allOptionCheckBox:{includeAllOption:!0,readonly:!1},notSelectedOption:"-- "+a.getLocalizedCustom("Select")+" --",controllerOptionForTwoLevels:!1},onChange:function(){d(function(){ie(e)})}}}function O(e){return{type:"autocomplete-multiselect",htmlClass:"col-4",key:"additionalEmployees",choices:e.additionalEmployeesChoices,onChange:function(){ie(e)},condition:"vm.model.bulkAssign && !vm.bulkAssignDisabled && !vm.hasEssRoleOnly"}}function R(e){return{htmlClass:"col-3",type:"checkbox",key:"addToLibrary",readonly:e.addToLibraryReadOnly,condition:"!vm.ownGoal && vm.isAdmin && (vm.model.templateId == null) && (vm.templateId  == null)"}}function z(e){var t=ne(e);return e.isAddGoal&&t.unshift({"class":"btn btn-ghost",type:"button",title:"Cancel",onClick:e.cancelAddGoal}),t}function j(e){var t=[],a=void 0,i=void 0;return"on"==e.goalWorkflowStatus&&(angular.forEach(e.goalWorkflowStatuses,function(e,o){if(e.label===c.GOAL_WORKFLOW_APPROVE_ACTION||e.label===c.GOAL_WORKFLOW_REJECT_ACTION){var n={id:e.label+"Button",classes:"btn-list",text:e.label,tooltip:{text:e.label},clickAction:function(){_e.$broadcast("goalWorkflowIdChange",[e.label])},displayCondition:function(e,t){return!0}},l=e.label,r=le(l);r&&(n.icon=r);var s=re(l);s&&(n.classes=n.classes+s),e.label===c.GOAL_WORKFLOW_APPROVE_ACTION?a=n:e.label===c.GOAL_WORKFLOW_REJECT_ACTION?i=n:t.push(n)}}),a&&t.push(a),i&&t.unshift(i)),t}function V(e){var t=[];return t.push({"class":"btn btn-ghost",type:"button",title:"Back",onClick:function(){if(e.parentGoalIdInUrl)u.go(".",{listType:e.listType,category:c.OBJECTIVE_CATEGORY_NAME,goalId:e.parentGoalIdInUrl,parentGoalId:null},{notify:!0});else switch(e.listName){case"performanceGoalsList":u.go("performance.goals.approved",{},{notify:!0});break;case"performanceUnApprovedGoalsList":u.go("performance.goals.unapproved",{},{notify:!0});break;case"performanceMyGoalsList":u.go("performance.goals.my",{},{notify:!0});break;case"performanceUnApprovedMyGoalsList":u.go("performance.goals.my_unapproved",{},{notify:!0})}}}),t.push({"class":"btn btn-secondary",type:"button",title:e.submitButttonText,condition:"!vm.disableAllFields",onClick:function(e){_e.$broadcast("saveGoal")}}),t}function G(e){return{type:"text",key:"name",htmlClass:"col-12",autocompleteOff:"off",readonly:e.metricNameReadOnly}}function B(e){return{type:"checkbox",htmlClass:"col-4",key:"metricEnabled",onChange:function(t){t===!1?(Se={metricCurrentValue:e.model.metricCurrentValue,metricStartValue:e.model.metricStartValue,metricTargetValue:e.model.metricTargetValue,metricUnitOfMeasurement:e.model.metricUnitOfMeasurement},e.model.metricCurrentValue="",e.model.metricStartValue="",e.model.metricTargetValue="",e.model.metricUnitOfMeasurement=""):t===!0&&"object"==typeof Se&&(e.model.metricCurrentValue=Se.metricCurrentValue,e.model.metricStartValue=Se.metricStartValue,e.model.metricTargetValue=Se.metricTargetValue,e.model.metricUnitOfMeasurement=Se.metricUnitOfMeasurement),_e.$applyAsync(function(){_e.$broadcast("redrawFormWithUpdatedSchema"),d(function(){se(e.model,!1,null,e.parameters)})})},readonly:e.metricEnabledReadOnly}}function q(e){return{type:"select",htmlClass:"col-4 keyResultNumberFormatDropDown",key:"metricNumberFormat",titleMap:e.goalMetricNumberFormatsEnumAndTitleMap.titleMap,emptyOption:!1,onChange:function(){H(e.model),_e.$broadcast("metricNumberFormatChanged"),d(function(){se(e.model,!0,null,e.parameters)})},readonly:e.metricReadOnly||e.schema.properties.metricNumberFormat.readOnly}}function H(e){var t=p.getStrategy(e.metricNumberFormat);(e.metricStartValue||e.metricTargetValue||e.metricCurrentValue)&&(e.metricStartValue=t.formattedValue(e.metricStartValue),e.metricTargetValue=t.formattedValue(e.metricTargetValue),e.metricCurrentValue=t.formattedValue(e.metricCurrentValue))}function U(e){return{type:"text",htmlClass:"col-4 keyResultMetricName",key:"metricUnitOfMeasurement",readonly:e.metricReadOnly||e.schema.properties.metricUnitOfMeasurement.readOnly,validationMessage:{201:m.textLengthExceedValidation.message(e.schema.properties.metricUnitOfMeasurement.maxLength)},ngModelOptions:{allowInvalid:!0},removePristine:e.removePristine}}function W(e){var t={type:"row",items:[]},a=p.getStrategyArray();return _.forEach(a,function(a){t=a.modifyForm({form:t,model:e.model,scope:_e,doExtraValidations:se,metricStartValueReadonly:e.metricReadOnly||e.schema.properties.metricStartValue.readOnly,metricTargetValueReadonly:e.metricReadOnly||e.schema.properties.metricTargetValue.readOnly,metricCurrentValueReadonly:e.metricReadOnly||e.schema.properties.metricCurrentValue.readOnly,parameters:e})}),t}function Y(e){return e.schema={type:"object",title:"Add Goal",name:"add_goal",properties:{name:{title:"Goal Name",type:"string",maxLength:500},goalLevel:{title:"Level",type:"string","enum":e.goalLevels["enum"]},goalPriority:{title:"Priority",type:"string","enum":e.goalPriorities["enum"]},description:{type:"string"},rating:{title:"Completion",type:"string"},parentGoal:{title:"Parent Goal",type:["null","string"]},dueDate:{title:"Due Date",type:["null","object"]},selectedEmployee:{title:"Assigned To",type:"object",idsToSkip:e.employeeIdsToSkip},status:{title:"Status",type:"string"},evaluators:{title:o.instant("Evaluator Groups"),type:"array",items:{"enum":e.performanceEvaluatorGroups["enum"],type:"string"}},readOnly:{title:"Read Only (for Assignee)",type:"boolean"},bulkAssign:{title:"Bulk Assign",type:"boolean"},jobTitles:{title:o.instant("Employees Having Job Titles"),type:"object"},locations:{title:o.instant("Employees In Location"),type:"array",items:{"enum":e.locations["enum"],type:"string"}},subunits:{title:o.instant("Employees In Sub-units"),type:"array",items:{"enum":e.subunits["enum"],type:"string"}},addToLibrary:{title:o.instant("Add To Library"),type:"boolean"},additionalEmployees:{title:a.getLocalizedCustom("Additional Employees"),type:"object"}},required:e.requiredArray},e.schema}function J(e){return e.schema=Y(e),e.schema.properties.goalLevel.readOnly=!0,e.schema.properties.name.title="Objective Name",e.schema}function K(e){return e.schema=Y(e),e.schema}function Z(e){return e.schema=Y(e),e.schema.title="Add Key Result",delete e.schema.properties.goalLevel,delete e.schema.properties.readOnly,delete e.schema.properties.bulkAssign,delete e.schema.properties.jobTitles,delete e.schema.properties.locations,delete e.schema.properties.subunits,delete e.schema.properties.addToLibrary,e.schema.properties.name.title="Key Result Name",e.schema.properties.metricEnabled={title:"Use Metric",type:"boolean"},e.schema.properties.parentGoal={title:"Objective",type:"string",readOnly:!0},e.schema.properties.metricUnitOfMeasurement={title:"Unit of Measurement",type:"string",maxLength:255},e.schema.properties.metricNumberFormat={title:"Format",type:"string","enum":e.goalMetricNumberFormatsEnumAndTitleMap["enum"]},e.schema.properties.metricStartValue={title:"Start Value",type:"string"},e.schema.properties.metricTargetValue={title:"Target Value",type:"string"},e.schema.properties.metricCurrentValue={title:"Current Value",type:"string"},e.model.metricEnabled?(delete e.schema.properties.metricUnitOfMeasurement.readOnly,delete e.schema.properties.metricNumberFormat.readOnly,delete e.schema.properties.metricStartValue.readOnly,delete e.schema.properties.metricTargetValue.readOnly,delete e.schema.properties.metricCurrentValue.readOnly,e.schema.required.push("metricUnitOfMeasurement"),e.schema.required.push("metricNumberFormat"),e.schema.required.push("metricStartValue"),e.schema.required.push("metricTargetValue"),e.schema.required.push("metricCurrentValue")):(e.schema.properties.metricUnitOfMeasurement.readOnly=!0,e.schema.properties.metricNumberFormat.readOnly=!0,e.schema.properties.metricStartValue.readOnly=!0,e.schema.properties.metricTargetValue.readOnly=!0,e.schema.properties.metricCurrentValue.readOnly=!0,_.remove(e.schema.required,function(e){return _.includes(["metricUnitOfMeasurement","metricNumberFormat","metricStartValue","metricTargetValue","metricCurrentValue"],e)})),e.schema}function Q(e){if(null!==e.goalId){var t=e.performanceGoal.dueDate;!t||t instanceof Date||(t=new Date(moment.utc(t).format("l LT")));var a=e.performanceGoal.rating;a=a?parseInt(a,10):0,e.model={id:e.performanceGoal.id,name:e.performanceGoal.name,description:e.performanceGoal.description,goalLevel:e.performanceGoal.goalLevel,goalPriority:e.performanceGoal.goalPriority,rating:a,parentGoal:e.performanceGoal.parentGoal,dueDate:t,selectedEmployee:e.performanceGoal.selectedEmployee,employee_name:e.performanceGoal.selectedEmployee.fullname,status:e.performanceGoal.status,readOnly:e.performanceGoal.readOnly,evaluators:_.intersection(e.performanceGoal.evaluators,e.performanceEvaluatorGroups["enum"]),addToLibrary:!1},e.model.selectedEmployee.fullName=n.getFullName(e.model.selectedEmployee),e.pageTitle="Edit Goal"}else e.model={id:null,rating:0,status:e.goalState,addToLibrary:!1,bulkAssign:!1,description:""},(e.ownGoal||null!==e.empNmber&&null!==e.redirectFrom)&&(e.model.selectedEmployee=e.employee),e.model.goalLevel=e.goalLevel,e.model.goalPriority=e.goalPriority,e.model.evaluators=_.intersection(i.getDefaultSelectedEvaluatorGroupIds(),e.performanceEvaluatorGroups["enum"]),e.pageTitle="Add Goal",e.addingSubGoal&&e.parentGoal&&(e.model.parentGoal=e.parentGoal.id,e.model.goalLevel=e.parentGoal.goalLevel),e.parentGoal&&e.parentGoal.selectedEmployee&&(e.model.selectedEmployee=e.parentGoal.selectedEmployee,e.model.employee_name=e.parentGoal.selectedEmployee.fullname,e.model.selectedEmployee.fullName=n.getFullName(e.model.selectedEmployee));return e.model}function X(e){if(e.model=Q(e),null!==e.goalId){if(e.model.parentGoal=e.parentGoal.name,delete e.model.readOnly,delete e.model.addToLibrary,e.performanceGoal.metric&&e.performanceGoal.metric.id){e.model.metricEnabled=!0,e.model.metricUnitOfMeasurement=e.performanceGoal.metric.unitOfMeasurement,e.model.metricNumberFormat=e.performanceGoal.metric.numberFormatId;var t=p.getStrategy(e.performanceGoal.metric.numberFormatId);e.model.metricStartValue=t.formattedValue(e.performanceGoal.metric.startValue),e.model.metricTargetValue=t.formattedValue(e.performanceGoal.metric.targetValue),e.model.metricCurrentValue=t.formattedValue(e.performanceGoal.metric.currentValue)}else e.model.metricEnabled=!1,e.model.metricUnitOfMeasurement="",e.model.metricNumberFormat="1",e.model.metricStartValue="",e.model.metricTargetValue="",e.model.metricCurrentValue="";e.pageTitle="Edit Key Result"}else delete e.model.bulkAssign,e.model.metricEnabled=!0,e.model.metricUnitOfMeasurement="",e.model.metricNumberFormat="1",e.model.metricStartValue="",e.model.metricTargetValue="",e.model.metricCurrentValue="",e.model.parentGoal=e.parentGoal.name,e.parentGoal&&e.parentGoal.selectedEmployee&&(e.model.selectedEmployee=e.parentGoal.selectedEmployee,e.model.employee_name=e.parentGoal.selectedEmployee.fullname,e.model.selectedEmployee.fullName=n.getFullName(e.model.selectedEmployee)),e.pageTitle="Add Key Result";return e.model}function ee(e){var t=te(e),a=ae(e);return t+"_goal_"+a}function te(e){return e.model.goalLevel===e.businessGoalsLevelId?"business":"individual"}function ae(e){return null!==e.goalId||e.goalCategoryId===c.KEY_RESULT_CATEGORY_ID?"update":"add"}function ie(e){(e.model.bulkAssign===!1||e.isEmployeeSelectionFilterSelected())&&_e.$broadcast("schemaForm.error.bulkAssign","selectionCriteriaRequired",!0)}function oe(e,t){var a="";return a=e.goalWorkflowStatuses&&e.goalWorkflowStatuses.length==t?"btn btn-secondary":"btn btn-ghost"}function ne(e){var t=[],a=void 0,i=void 0;if("on"==e.goalWorkflowStatus){var o=0;angular.forEach(e.goalWorkflowStatuses,function(n,l){o++;var r={"class":oe(e,o),type:"button",title:n.label,condition:"!vm.disableAllFields",onClick:function(e){_e.$broadcast("goalWorkflowIdChange",[n.label])}},s=n.label,d=le(s);d&&(r.icon=d);var m=re(s);m&&(r["class"]="btn btn-label"+m),n.label===c.GOAL_WORKFLOW_APPROVE_ACTION?a=r:n.label===c.GOAL_WORKFLOW_REJECT_ACTION?i=r:t.push(r)}),a&&t.push(a),i&&t.unshift(i)}else t.push({"class":"btn btn-secondary",type:"button",title:e.submitButttonText,condition:"!vm.disableAllFields",onClick:function(e){_e.$broadcast("saveGoal")}});return t}function le(e){var t="";switch(e){case c.GOAL_WORKFLOW_APPROVE_ACTION:t="ohrm_like";break;case c.GOAL_WORKFLOW_REJECT_ACTION:t="ohrm_dislike"}return t}function re(e){var t="";switch(e){case c.GOAL_WORKFLOW_APPROVE_ACTION:t+=" success";break;case c.GOAL_WORKFLOW_REJECT_ACTION:t+=" danger"}return t}function se(e,t,a,i){t?_e.$applyAsync(function(){ve(e,a,i)}):ve(e,a,i)}function ce(e,t,a){return void 0!==e&&void 0!==t&&void 0!==a}function de(e,t,a){return e.lt(t)&&a.gte(e)}function me(e,t,a){return e.gt(t)&&e.gte(a)}function ue(e,t,i,o){var n="Please enter a value greater than or equal to Start Value";e.lt(t)?n="Please enter a value less than or equal to Start Value":ge(i.metricStartValue,i.metricTargetValue,i.metricCurrentValue,o)||(n="This value exceeded the maximum completion percentage"),_e.$broadcast("schemaForm.error.metricCurrentValue","minMaxValidation",a.getLocalizedCustom(n))}function pe(e){var t=ye(e.metricStartValue),a=ye(e.metricTargetValue),i=ye(e.metricCurrentValue),o=t==a,n=isNaN(t)||isNaN(a)||isNaN(i),l=""==t||""==a;return l||o||n}function fe(e,t,a){return ce(e,t,a)&&(de(e,a,t)||me(e,a,t))}function ge(e,t,a,i){return OhrmBig(g.getCompletionPercentage(e,t,a)).lte(OhrmBig(i.goalMaxCompletionPercentage))}function he(e,t){return""===ye(e.metricCurrentValue)&&"metricCurrentValue"==t}function ve(e,t,a){var i=OhrmBig(ye(e.metricStartValue)),o=OhrmBig(ye(e.metricTargetValue)),n=OhrmBig(ye(e.metricCurrentValue));return""===ye(e.metricStartValue)||""===ye(e.metricTargetValue)||i.eq(o)||(_e.$broadcast("schemaForm.error.metricStartValue","tv4-302",!0),_e.$broadcast("schemaForm.error.metricTargetValue","tv4-302",!0)),(""!==ye(e.metricCurrentValue)||"metricCurrentValue"===t)&&(he(e,t)||pe(e)||fe(i,n,o)&&ge(e.metricStartValue,e.metricTargetValue,e.metricCurrentValue,a)?_e.$broadcast("schemaForm.error.metricCurrentValue","minMaxValidation",!0):ue(o,i,e,a),!0)}function ye(e){var t=e;return e&&(t=(e+"").replace(/,/g,"")),t}function be(e){var t=[{name:"name",lable:"Name",getter:"",listType:e.listType,type:"sub-goal-name",getState:function(t,a,i){var o=a.category;return a.purposeId==c.DEVELOPMENT_GOAL_PURPOSE_ID&&(o=c.DEVELOPMENT_GOAL_CATEGORY_NAME),"({listType:'"+t.listType+"',goalId:"+a.id+",category:'"+o+"', listName: '"+e.listName+"', parentGoalId: '"+e.goalId+"'})"},progressParams:{key:"goalPercentageCompletion",title:"Change Completion",widgetClass:function(t){var a="on"==e.goalWorkflowStatus;return i.getRatingWidgetClass(t,a)},progressEditable:function(){return!1},goalMaxCompletionPercentage:function(){return e.goalMaxCompletionPercentage}}},{name:"empName",lable:"Owner",getter:"empName"},{name:"metric",lable:"Metric",getter:["metric"],formatter:function(e,t){return e&&e.id?p.getStrategy(e.numberFormatId).formattedValueForList(e):"100"===t.goalPercentageCompletion?a.getLocalizedCustom("Completed"):a.getLocalizedCustom("Not Completed")}},{name:"dueDate",lable:"Due Date",getter:"dueDate",formatter:function(e){return e?(e=e.slice(0,10),f.toLocalizedDate(e)):e}},{name:"goalStatusName",lable:"Status",getter:"",type:"oxd-select",formatter:function(t,a){var o="on"==e.goalWorkflowStatus;return i.getGoalStatusName(a,o)},readonly:function(e){return!0}},{name:"priority",lable:"Priority",getter:"",type:"colored-pill"}],o=e.canPeformKeyResultsActions&&e.canAddKeyResults,n=[];n=o?["20px","35%","15%","12%","12%","10%","10%"]:["35%","15%","12%","12%","12%","12%"];var l=[],r={create:o,update:o,"delete":o,read:o};e.listDefinition={tableId:"subGoalList",name:"Sub Goals",listClass:"rounded-edge-table hover selectable",selectable:!0,selected:[],idGetter:"id",listFields:t,extraTH:[],extraTD:[],showColumnsAnyway:!0,permission:r,columnWidths:n,listActions:l,showSelectableAlways:!1,showLoader:!0,clickableCondition:"id",unselectableIds:[],isSingleRowDeletable:function(e){return o},listTopBar:{getMessageForNoOfItemsFound:function(t){return"undefined"!=typeof e.childGoals?a.getLocalizedCustomWithVariables("({{number}}) Key Result"+(1==e.childGoals.length?"":"s")+" Found",{number:e.childGoals.length}):""},getMessageForNoOfItemsSelected:function(e){return e?a.getLocalizedCustomWithVariables("({{number}}) Key Result"+(e>1?"s":"")+" Selected",{number:e}):""},title:{name:"Key Results"}}},r["delete"]&&(e.listDefinition.listTopBar.onBulkDelete=function(t){e.deleteSelection(t,"Key Result")},e.listDefinition.listTopBar.isBulkDeletable=function(e){return o},e.listDefinition.listTopBar.mainActionButton={id:"addKeyResultButton",label:"Add Key Result",onClick:e.addKeyResult,icon:"add",classes:"btn-label btn-sm"})}function Ce(e){var t=[{name:"name",lable:"Name",getter:"",listType:e.listType,type:"sub-goal-name",getState:function(t,a,i){var o=a.category;return a.purposeId==c.DEVELOPMENT_GOAL_PURPOSE_ID&&(o=c.DEVELOPMENT_GOAL_CATEGORY_NAME),"({listType:'"+t.listType+"',goalId:"+a.id+",category:'"+o+"', listName: '"+e.listName+"', parentGoalId: '"+e.goalId+"'})"},progressParams:{key:"goalPercentageCompletion",title:"Change Completion",widgetClass:function(t){var a="on"==e.goalWorkflowStatus;return i.getRatingWidgetClass(t,a)},progressEditable:function(){return!1},goalMaxCompletionPercentage:function(){return e.goalMaxCompletionPercentage}}},{name:"levelName",lable:"Level",type:"icon",getter:"levelName",formatter:function(e,t){return t.categoryId==c.KEY_RESULT_CATEGORY_ID?"":i.getGoalLevelIcon(t.levelId)},tooltip:{position:"bottom",tooltipText:function(e){return e.levelName}}},{name:"empName",lable:"Owner",getter:"empName"},{name:"dueDate",lable:"Due Date",getter:"dueDate",formatter:function(e){return e?(e=e.slice(0,10),f.toLocalizedDate(e)):e}},{name:"goalStatusName",lable:"Status",getter:"",type:"oxd-select",formatter:function(t){var a="on"==e.goalWorkflowStatus;return i.getGoalStatusName(t,a)},readonly:function(e){return!0}},{name:"priority",lable:"Priority",getter:"",type:"colored-pill"}],o=[];o=e.permission["delete"]?["20px","35%","8%","15%","15%","13%","12%"]:["35%","10%","15%","15%","13%","12%"];var n=[];e.listDefinition={tableId:"subGoalList",name:"Sub Goals",listClass:"rounded-edge-table hover selectable",selectable:!0,selected:[],idGetter:"id",listFields:t,extraTH:[],extraTD:[],showColumnsAnyway:!0,permission:e.permission,columnWidths:o,listActions:n,showSelectableAlways:!1,showLoader:!0,clickableCondition:"id",unselectableIds:e.unDeletableIds,isSingleRowDeletable:function(t){return e.unDeletableIds&&e.unDeletableIds.indexOf(t.id)===-1},listTopBar:{getMessageForNoOfItemsFound:function(t){return"undefined"!=typeof e.childGoals?a.getLocalizedCustomWithVariables("({{number}}) Sub Goal"+(1==e.childGoals.length?"":"s")+" Found",{number:e.childGoals.length}):""},getMessageForNoOfItemsSelected:function(e){return e?a.getLocalizedCustomWithVariables("({{number}}) Sub Goal"+(e>1?"s":"")+" Selected",{number:e}):""},title:{name:"Sub Goals"}}},e.permission["delete"]&&(e.listDefinition.listTopBar.onBulkDelete=function(t){e.deleteSelection(t,"Sub Goal")},e.listDefinition.listTopBar.isBulkDeletable=function(t){return 0==_.intersection(t,e.unDeletableIds).length}),e.permission.create&&e.performanceGoal&&e.performanceGoal.status!=c.ACHIEVED_GOAL_STATUS_ID&&(e.listDefinition.listTopBar.mainActionButton={id:"addKeyResultButton",label:"Add Sub Goal",onClick:e.addSubGoal,icon:"add",classes:"btn-label btn-sm"})}function we(e){return e?i.getChildGoalsWithMetaData(e):l.when({data:[],meta:{}})}var _e,Se,De={setScope:h,goalName:v,keyResultName:G,goalLevel:y,goalPriority:b,goalRating:C,objectiveRating:S,keyResultRating:D,keyResultMetricName:U,keyResultMetricValues:W,goalParentGoal:T,keyResultParentGoal:x,goalDueDate:F,goalAssignedEmployee:k,goalStatus:I,goalEvaluators:A,goalReadOnly:M,goalBulkAssign:L,goalBulkAssignJobTitle:P,goalBulkAssignLocation:$,goalBulkAssignSubunit:N,goalAddToLibrary:R,goalActionButtons:z,getActionableApproveRejectWorkflowActionButtons:j,keyResultActionButtons:V,keyResultMetricEnabledCheckBox:B,keyResultNumberFormatDropDown:q,goalSchema:Y,objectiveSchema:J,keyResultSchema:Z,developmentGoalSchema:K,goalModel:Q,keyResultModel:X,doExtraValidations:se,getPermissionType:ee,getEmployeeListForWidget:E,goalBulkAssignAdditionalEmployees:O,setKeyResultList:be,setSubGoalList:Ce,fetchGoalChildren:we};return De}angular.module("app.performance").service("performanceGoalCategoryFormService",e),e.$inject=["webservice","formHelper","localizedMessages","goalService","$translate","employeeService","$q","$window","titleService","performanceConstants","$timeout","formValidationHelper","$state","performanceMetricNumberStrategyService","dateService","performanceCommonNumberFormatService"]}(),function(){"use strict";function e(e,t,a,i,o){return function(n){var l;switch(n){case o.OBJECTIVE_CATEGORY_NAME:l=e;break;case o.KEY_RESULT_CATEGORY_NAME:l=a;break;case o.DEVELOPMENT_GOAL_CATEGORY_NAME:l=i;break;default:l=t}return l}}angular.module("app.performance").factory("goalCategoryServiceFactory",e),e.$inject=["performanceObjectiveService","performanceGoalService","performanceKeyResultService","performanceDevelopmentGoalService","performanceConstants"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p){function f(e){q=e.scope,d.setScope(q)}function g(t){if(t.parentGoal){var a=["Performance","Goals","Goal List",t.parentGoal.name,"Sub Goals"];s.setForcedTitle(a),e.call("goal/"+t.parentGoal.id,"GET",[],{}).then(function(e){var i=e.data.meta,o=e.data.data.parentGoal;i.accessibility&&s.setForcedTitle(a,{3:{state:".",params:{listType:t.listType,category:I(),goalId:t.parentGoal.id,parentGoalId:o,action:null}}})})}else{var i="Goal List";"my_goals"===t.listType&&(i="My Goals"),s.setForcedTitle(["Performance","Goals",i])}t.parentGoal?m.$broadcast("addTopMenuBackButton",{callback:function(){window.top.history.back()},tooltip:"Goal Details"}):"my_goals"===t.listType?m.$broadcast("addTopMenuBackButton",{uiSref:"performance.goals.my({category: "+c.GOAL_CATEGORY_ID+"})",tooltip:"My Goals"}):m.$broadcast("addTopMenuBackButton",{uiSref:"performance.goals.approved({category: "+c.GOAL_CATEGORY_ID+"})",tooltip:"Goal List"}),"employeeProfile"===t.redirectedFrom&&m.$broadcast("addAdditionalTopMenuBackButton",{uiSref:"pim.employees.profile.profile({empNumber: "+t.empNumber+"})",tooltip:"Employee Profile",icon:"back_to_profile"}),h(t)}function h(e){var t="performance.goals.approved";"my_goals"===e.listType&&(t="performance.goals.my"),u(function(){m.$broadcast("markMenuItemAsCurrent",{stateName:t})})}function v(e){var t="Add Goal";return e.goalId&&(t="Goal Details"),t}function y(){return"ohrm_bullseye_strong"}function b(){return!0}function C(e){return{parentGoal:e.parentGoal,goalId:e.goalId,listType:e.listType,redirectedFrom:e.redirectFrom,empNumber:e.empNmber}}function w(e){return d.goalModel(e)}function _(e){e.form=[{type:"row",items:[{type:"container",htmlClass:"col-9",items:[{type:"row",items:[d.goalName(e)]},{type:"row",htmlClass:"goalTinyMceRow",items:[e.tinyMceEditor]}]},{type:"container",htmlClass:"col-3",items:[{type:"row",items:[d.goalLevel(e)]},{type:"row",items:[d.goalPriority(e)]},{type:"row",items:[d.goalStatus(e)]}]}]},{type:"row",items:[{type:"container",htmlClass:"col-10",items:[{type:"row",items:[d.goalParentGoal(e),d.goalDueDate(e),d.goalEvaluators(e)]},{type:"container",htmlClass:"grouped-form-group-container",items:[{type:"row",items:[d.goalBulkAssign(e),d.goalAddToLibrary(e),d.goalReadOnly(e)]},{type:"row",items:[d.goalAssignedEmployee(e,!0)]},{type:"row",condition:"vm.model.bulkAssign && !vm.bulkAssignDisabled && !vm.hasEssRoleOnly",items:[d.goalBulkAssignSubunit(e),d.goalBulkAssignLocation(e),d.goalBulkAssignJobTitle(e)]},{type:"row",items:[d.goalBulkAssignAdditionalEmployees(e)]}]}]},{type:"container",htmlClass:"col-2",items:[{type:"row",htmlClass:"align-content-center",items:[d.goalRating(e)]}]}]}],t.addRequiredMessage(e.form);var a={type:"row",htmlRowClass:"form-buttons-row",items:d.goalActionButtons(e)};return e.form.push(a),e.form}function S(e){return d.getActionableApproveRejectWorkflowActionButtons(e)}function D(e){return d.goalSchema(e)}function T(t){return p.dispatch("performance/goals/dropGoalData"),p.dispatch("performance/goals/dropFormattedGoalData"),t.filteredModel.category=c.GOAL_CATEGORY_ID,e.call("goals","POST",t.filteredModel,{})}function x(t){return p.dispatch("performance/goals/dropGoalData"),p.dispatch("performance/goals/dropFormattedGoalData"),t.filteredModel.category=c.GOAL_CATEGORY_ID,e.call("goal/"+t.model.id,"PATCH",t.filteredModel,{})}function F(t,a){return p.dispatch("performance/goals/dropGoalData"),p.dispatch("performance/goals/dropFormattedGoalData"),e.call("goal/"+t,"PATCH",a,{})}function k(){return!0}function E(){return c.GOAL_CATEGORY_ID}function I(){return c.GOAL_CATEGORY_NAME}function A(e){return d.fetchGoalChildren(e)}function M(){}function L(e){d.setSubGoalList(e)}function P(){return i.fetchGoalStatuses()}function $(){return c.PERFORMANCE_GOAL_PURPOSE_ID}function N(e){return null}function O(){return!0}function R(e){return!1}function z(e,t){var a=t;return a!=c.NOT_ACHIEVED_GOAL_STATUS_ID&&a!=c.ON_HOLD_GOAL_STATUS_ID&&(e=parseInt(e,10),e>0&&e<100?a=c.IN_PROGRESS_GOAL_STATUS_ID:e>=100?a=c.ACHIEVED_GOAL_STATUS_ID:0==e&&(a=c.PENDING_GOAL_STATUS_ID)),a}function j(e,t){return t}function V(e,t,a,i){return null}function G(e){return e.rating.toString()}function B(e,t){return e&&e.goalWorkflowStatus&&e.goalWorkflowStatus.considerAsApproved}var q,H={setScope:f,initNavbar:g,initModel:w,initForm:_,initSchema:D,create:T,update:x,partialUpdate:F,showGoalChildren:k,getCategoryId:E,getCategoryName:I,fetchGoalChildren:A,doExtraValidations:M,setGoalChildrenList:L,getGoalStatuses:P,getDefaultGoalPurpose:$,getCategorySpecificParameters:N,getNavbarParameters:C,getPageTitle:v,getCategoryIcon:y,hasSummary:b,isOwnGoalReadOnly:O,isKeyResultEditMode:R,getActionableApproveRejectWorkflowActionButtons:S,getStatusIdBasedOnCompletion:z,getCompletionBasedOnStatusId:j,getGetCompletionBasedOnMetricValues:V,getRatingToSave:G,showSendReminderBasedOnWorkflowStatus:B};return H}angular.module("app.performance").service("performanceGoalService",e),e.$inject=["webservice","formHelper","localizedMessages","goalService","$translate","employeeService","$q","$window","titleService","performanceConstants","performanceGoalCategoryFormService","$rootScope","$timeout","$store"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h){function v(e){U=e.scope,p.setScope(U)}function y(t){var a=["Performance","Goals","Goal List",t.parentGoal.name+" "];s.setForcedTitle(a),e.call("goal/"+t.parentGoal.id,"GET",[],{}).then(function(e){var i=e.data.meta;i.accessibility&&s.setForcedTitle(a,{3:{state:".",params:{listType:t.listType,category:"objective",goalId:t.parentGoal.id}}})}),h.$broadcast("addTopMenuBackButton",{callback:function(){
window.top.history.back()},tooltip:"Objective Details"}),"employeeProfile"===t.redirectedFrom&&h.$broadcast("addAdditionalTopMenuBackButton",{uiSref:"pim.employees.profile.profile({empNumber: "+t.empNumber+"})",tooltip:"Employee Profile",icon:"back_to_profile"}),b(t)}function b(e){var t="performance.goals.approved";"my_goals"===e.listType&&(t="performance.goals.my"),u(function(){h.$broadcast("markMenuItemAsCurrent",{stateName:t})})}function C(e){return{listType:e.listType,parentGoal:e.parentGoal,goalId:e.goalId,redirectedFrom:e.redirectFrom,empNumber:e.empNmber}}function w(e){var t="Add Key Result";return e.goalId&&(t="Edit Key Result"),t}function _(){return""}function S(){return!1}function D(e){return p.keyResultModel(e)}function T(e){e.form=[{type:"row",items:[{type:"container",htmlClass:"col-9",items:[{type:"row",items:[p.keyResultName(e)]},{type:"row",htmlClass:"goalTinyMceRow",items:[e.tinyMceEditor]}]},{type:"container",htmlClass:"col-3",items:[{type:"row",items:[p.goalPriority(e)]},{type:"row",items:[p.goalStatus(e)]}]}]},{type:"row",items:[{type:"container",htmlClass:"col-10",items:[{type:"row",items:[p.keyResultParentGoal(e),p.goalDueDate(e),p.goalEvaluators(e)]},{type:"container",htmlClass:"grouped-form-group-container",items:[{type:"row",items:[p.keyResultMetricEnabledCheckBox(e),p.keyResultNumberFormatDropDown(e),p.keyResultMetricName(e)]},p.keyResultMetricValues(e)]},{type:"row",items:[p.goalAssignedEmployee(e,!0)]}]},{type:"container",htmlClass:"col-2",items:[{type:"row",htmlClass:"align-content-center",items:[p.keyResultRating(e)]}]}]}],t.addRequiredMessage(e.form);var a={type:"row",htmlRowClass:"form-buttons-row",items:p.keyResultActionButtons(e)};return e.form.push(a),e.form}function x(e){return[]}function F(e){return p.keyResultSchema(e)}function k(t){if(t.filteredModel.category=c.KEY_RESULT_CATEGORY_ID,t.filteredModel.goalLevel=null,t.filteredModel.parentGoal=t.parentGoal.id,t.filteredModel.readOnly=!1,t.filteredModel.addToLibrary=!1,t.filteredModel.bulkAssign=!1,t.model.metricEnabled){var a=f.getStrategy(t.model.metricNumberFormat);t.filteredModel.metric={unitOfMeasurement:t.model.metricUnitOfMeasurement,startValue:a.cleanValue(t.model.metricStartValue),targetValue:a.cleanValue(t.model.metricTargetValue),currentValue:a.cleanValue(t.model.metricCurrentValue),format:t.model.metricNumberFormat}}return e.call("goals","POST",t.filteredModel,{})}function E(t){if(t.filteredModel.id=t.model.goalId,t.filteredModel.category=c.KEY_RESULT_CATEGORY_ID,t.filteredModel.goalLevel=null,t.filteredModel.parentGoal=t.parentGoal.id,t.model.metricEnabled){var a=f.getStrategy(t.model.metricNumberFormat);t.filteredModel.metric={unitOfMeasurement:t.model.metricUnitOfMeasurement,startValue:a.cleanValue(t.model.metricStartValue),targetValue:a.cleanValue(t.model.metricTargetValue),currentValue:a.cleanValue(t.model.metricCurrentValue),format:t.model.metricNumberFormat}}else t.filteredModel.metric=null;return e.call("goal/"+t.model.id,"PATCH",t.filteredModel,{})}function I(){return!1}function A(){return c.KEY_RESULT_CATEGORY_ID}function M(){return c.KEY_RESULT_CATEGORY_NAME}function L(){return l.when([])}function P(e,t,a,i){p.setScope(U),p.doExtraValidations(e,t,a,i)}function $(){}function N(){return i.fetchGoalStatuses()}function O(){return c.PERFORMANCE_GOAL_PURPOSE_ID}function R(e){return null}function z(e){return"undefined"!=typeof e&&(!e.accessibility||!!e.readOnly)}function j(e){return!!e.goalId}function V(e,t){return g.getStatusIdBasedOnCompletion(e,t)}function G(e,t){return t=e===c.ACHIEVED_GOAL_STATUS_ID.toString()?100:0}function B(e,t,a,i){var o=f.getStrategy(e),n=o.getCompletionPercentage(t,a,i);return n}function q(e){return"0"}function H(e,t){return e&&e.goalWorkflowStatus&&e.goalWorkflowStatus.considerAsApproved&&t&&t.goalWorkflowStatus&&t.goalWorkflowStatus.considerAsApproved}var U,W={setScope:v,initNavbar:y,initModel:D,initForm:T,initSchema:F,create:k,update:E,showGoalChildren:I,getCategoryId:A,getCategoryName:M,fetchGoalChildren:L,doExtraValidations:P,setGoalChildrenList:$,getGoalStatuses:N,getDefaultGoalPurpose:O,getCategorySpecificParameters:R,getNavbarParameters:C,getPageTitle:w,getCategoryIcon:_,hasSummary:S,isOwnGoalReadOnly:z,isKeyResultEditMode:j,getActionableApproveRejectWorkflowActionButtons:x,getStatusIdBasedOnCompletion:V,getCompletionBasedOnStatusId:G,getGetCompletionBasedOnMetricValues:B,getRatingToSave:q,showSendReminderBasedOnWorkflowStatus:H};return W}angular.module("app.performance").service("performanceKeyResultService",e),e.$inject=["webservice","formHelper","localizedMessages","goalService","$translate","employeeService","$q","$window","titleService","performanceConstants","formValidationHelper","$state","$timeout","performanceGoalCategoryFormService","performanceMetricNumberStrategyService","performanceGoalService","$rootScope"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(e){H=e.scope,d.setScope(H)}function h(e){var t="Goal List";"my_goals"===e.listType&&(t="My Goals");var a=["Performance","Goals",t];s.setForcedTitle(a),"my_goals"===e.listType?u.$broadcast("addTopMenuBackButton",{uiSref:"performance.goals.my({category: "+c.OBJECTIVE_CATEGORY_ID+"})",tooltip:"My Goals"}):u.$broadcast("addTopMenuBackButton",{uiSref:"performance.goals.approved({category: "+c.OBJECTIVE_CATEGORY_ID+"})",tooltip:"Goal List"}),"employeeProfile"===e.redirectedFrom&&u.$broadcast("addAdditionalTopMenuBackButton",{uiSref:"pim.employees.profile.profile({empNumber: "+e.empNumber+"})",tooltip:"Employee Profile",icon:"back_to_profile"}),v(e)}function v(e){var t="performance.goals.approved";"my_goals"===e.listType&&(t="performance.goals.my"),p(function(){u.$broadcast("markMenuItemAsCurrent",{stateName:t})})}function y(e){var t="Add Objective";return e.goalId&&(t="Objective Details"),t}function b(){return"ohrm_target"}function C(){return!0}function w(e){return{goalId:e.goalId,listType:e.listType,redirectedFrom:e.redirectFrom,empNumber:e.empNmber}}function _(e){return d.goalModel(e)}function S(e){e.form=[{type:"row",items:[{type:"container",htmlClass:"col-9",items:[{type:"row",items:[d.goalName(e)]},{type:"row",htmlClass:"goalTinyMceRow",items:[e.tinyMceEditor]}]},{type:"container",htmlClass:"col-3",items:[{type:"row",items:[d.goalLevel(e)]},{type:"row",items:[d.goalPriority(e)]},{type:"row",items:[d.goalStatus(e)]}]}]},{type:"row",items:[{type:"container",htmlClass:"col-10",items:[{type:"row",items:[d.goalDueDate(e),d.goalEvaluators(e)]},{type:"container",htmlClass:"grouped-form-group-container",items:[{type:"row",items:[d.goalBulkAssign(e),d.goalAddToLibrary(e),d.goalReadOnly(e)]},{type:"row",items:[d.goalAssignedEmployee(e,!0)]},{type:"row",condition:"vm.model.bulkAssign && !vm.bulkAssignDisabled && !vm.hasEssRoleOnly",items:[d.goalBulkAssignSubunit(e),d.goalBulkAssignLocation(e),d.goalBulkAssignJobTitle(e)]},{type:"row",items:[d.goalBulkAssignAdditionalEmployees(e)]}]}]},{type:"container",htmlClass:"col-2",items:[{type:"row",htmlClass:"align-content-center",items:[d.objectiveRating(e)]}]}]}],t.addRequiredMessage(e.form);var a={type:"row",htmlRowClass:"form-buttons-row",items:d.goalActionButtons(e)};return e.form.push(a),e.form}function D(e){return d.getActionableApproveRejectWorkflowActionButtons(e)}function T(e){return d.objectiveSchema(e)}function x(t){return f.dispatch("performance/objectives/dropObjectiveData"),f.dispatch("performance/goals/dropFormattedGoalData"),t.filteredModel.category=c.OBJECTIVE_CATEGORY_ID,t.filteredModel.rating=null,e.call("goals","POST",t.filteredModel,{})}function F(t){return f.dispatch("performance/objectives/dropObjectiveData"),f.dispatch("performance/goals/dropFormattedGoalData"),t.filteredModel.category=c.OBJECTIVE_CATEGORY_ID,t.filteredModel.rating=null,e.call("goal/"+t.model.id,"PATCH",t.filteredModel,{})}function k(t,a){return f.dispatch("performance/objectives/dropObjectiveData"),f.dispatch("performance/goals/dropFormattedGoalData"),e.call("goal/"+t,"PATCH",a,{})}function E(){return!0}function I(){return c.OBJECTIVE_CATEGORY_ID}function A(){return c.OBJECTIVE_CATEGORY_NAME}function M(e){return d.fetchGoalChildren(e)}function L(){}function P(e){d.setKeyResultList(e)}function $(){return i.fetchGoalStatuses()}function N(){return c.PERFORMANCE_GOAL_PURPOSE_ID}function O(e){return null}function R(){return!0}function z(e){return!1}function j(e,t){return t}function V(e,t){return t}function G(e,t,a,i){return null}function B(e){return e.rating.toString()}function q(e,t){return e&&e.goalWorkflowStatus&&e.goalWorkflowStatus.considerAsApproved}var H,U={setScope:g,initNavbar:h,initModel:_,initForm:S,initSchema:T,create:x,update:F,partialUpdate:k,showGoalChildren:E,getCategoryId:I,getCategoryName:A,fetchGoalChildren:M,doExtraValidations:L,setGoalChildrenList:P,getGoalStatuses:$,getDefaultGoalPurpose:N,getCategorySpecificParameters:O,getNavbarParameters:w,getPageTitle:y,getCategoryIcon:b,hasSummary:C,isOwnGoalReadOnly:R,isKeyResultEditMode:z,getActionableApproveRejectWorkflowActionButtons:D,getStatusIdBasedOnCompletion:j,getCompletionBasedOnStatusId:V,getGetCompletionBasedOnMetricValues:G,getRatingToSave:B,showSendReminderBasedOnWorkflowStatus:q};return U}angular.module("app.performance").service("performanceObjectiveService",e),e.$inject=["webservice","formHelper","localizedMessages","goalService","$translate","employeeService","$q","$window","titleService","performanceConstants","performanceGoalCategoryFormService","listHelper","$rootScope","$timeout","$store"]}(),function(){"use strict";function e(){}angular.module("app.performance").controller("MultipleViewController",e),e.$inject=[]}(),function(){"use strict";function e(){}angular.module("app.performance").controller("SingleViewController",e),e.$inject=[]}(),function(){"use strict";function e(e,t,a,i){function o(e){for(var t=0;t<e.length;t++)e[t].name=e[t].name.replace(/`/g,"");return e}var n="job_standard_other_job_details",l={},r=["work_shift","location","job_title","sub_unit","joined_date","probation_end_date","job_category","employment_status","permanency_date"],s=function(){return a.call("bulkUpdateField","GET",[],void 0,void 0,!0).then(function(e){for(var t=e.data.data.filter(function(e){return!!e.updatePermission}),a=0;a<t.length;a++)0===t[a].name.lastIndexOf(n,0)&&(l[t[a].name]=t[a],r.push(t[a].name));return t})},c=function(){return r},d=function(){return["work_shift","location","job_title","sub_unit","joined_date","probation_end_date","job_category","employment_status","permanency_date"]},m=function(e){for(var a=[],i=0;i<e.options.length;i++)e.options[i].id&&a.push(e.options[i]);return t.getItemsForMultyselectAutocomplete(a,function(e){return{id:e.id,name:e.value}})},u=function(e){function t(e,t){if("direct_supervisor"!==t.key[0]){"joined_date"!==t.key[0]&&"probation_end_date"!==t.key[0]&&"permanency_date"!==t.key[0]||("probation_end_date"!==t.key[0]&&"permanency_date"!==t.key[0]||!e?"joined_date"!==t.key[0]||e||(l.permanency_date=e,l.probation_end_date=e):l.joined_date=e);var a=!1;if(s[t.key[0]]&&e)a=!0;else{for(var i=0;i<r.length;i++)if(l[r[i]]===!0&&!s[r[i]]){a=!0;break}i===r.length&&(a=!0,s[t.key[0]]&&!e&&(a=!1))}for(var o in s)l[o]=a}}for(var a=!1,o={type:"object",title:"searchForm",properties:{},required:[]},n=[],l={},s={},c=0;c<e.length;c++){if(o.properties[e[c].name]={title:i.getLocalizedCustom(e[c].label),type:"boolean"},e[c].disabled&&(o.properties[e[c].name].title+=" **"),e[c].properties.mandatory&&(s[e[c].name]=e[c]),c%4==0){0!=c&&n.push(d);var d={type:"section",htmlClass:"row",items:[]}}var m={type:"checkbox",htmlClass:"col s6 m4 l3",key:e[c].name,onChange:t};e[c].disabled&&(m.readonly=!0,a=!0),l[e[c].name]="",d.items.push(m),c==e.length-1&&n.push(d)}return a&&n.push({type:"section",htmlClass:"row",items:[{type:"help",htmlClass:"col s12 m12 l12",helpvalue:"**"+i.getLocalizedCustom('Field is disabled since "Direct" reporting method is deleted.')}]}),{schema:o,form:n,model:l,requiredFields:s}},p=function(e,a){function n(){if(!this.updateField.properties.mandatory){delete r.properties[this.fieldName],delete c[this.fieldName];for(var t=0;t<s.length;t++)if(s[t].items[0].key[0]==this.fieldName){s.splice(t,1);break}for(var t=0;t<e.length;t++)e[t].name==this.fieldName&&e.splice(t,1);if("joined_date"===this.fieldName){delete r.properties.probation_end_date,delete c.probation_end_date,delete r.properties.permanency_date,delete c.permanency_date;for(var i=s.length;i--;)if(s.hasOwnProperty(i)&&s[i].items[0].hasOwnProperty("key")){var o=s[i].items[0].key[0];"probation_end_date"!=o&&"permanency_date"!=o||s.splice(i,1)}for(var n=s.length;n--;)if(e.hasOwnProperty(n)&&e[n].hasOwnProperty("name")){var l=e[n].name;"probation_end_date"!=l&&"permanency_date"!=l||e.splice(n,1)}}a.formRedraw()}}for(var l=!1,r={type:"object",title:"searchForm",properties:{},required:["location","work_shift","joined_date"]},s=[],c={},d=0;d<e.length;d++){r.properties[e[d].name]={title:e[d].label,type:"date"===e[d].type?["null","object"]:"string"},e[d].properties.mandatory&&r.required.push(e[d].name);var u={type:"section",htmlClass:"row",items:[{type:e[d].type,placeholder:e[d].placeholder,htmlClass:"col s10 m10 l10",key:e[d].name,validationMessage:{302:i.getLocalizedCustom("Required")}},{type:"custom-icon",htmlClass:"col offset-s1 s1 m1 l1 right-align customIcon bulkUpdateDeleteBin",icon:"delete",updateField:e[d],key:e[d].name,fieldName:e[d].name,onClick:n}]};if("select"==e[d].type){var p=e[d]&&e[d].options?t.getEnumAndTitleMapForSelect(e[d].options,{name:"value",value:"id"}):{titleMap:[],"enum":[]};u.items[0].titleMap=o(p.titleMap),r.properties[e[d].name]["enum"]=p["enum"]}_.includes(["location","joined_date","work_shift"],e[d].name)&&(l=!0),"direct_supervisor"==e[d].name?(u.items[0].choices=a.employeeItems,c[e[d].name]={},r.properties[e[d].name].type="object",u.items.push({key:"remove_existing_supervisors",type:"checkbox",htmlClass:"col s12 m12 l12"}),r.properties.remove_existing_supervisors={title:i.getLocalizedCustom("Remove Existing Supervisors"),type:"boolean"},c.remove_existing_supervisors={}):"autocomplete-multyselect"==e[d].type&&(u.items[0].choices=m(e[d]),c[e[d].name]={},r.properties[e[d].name].type="object"),s.push(u),c[e[d].name]=""}return l&&t.addRequiredMessage(s),{schema:r,form:s,model:c}};return{getFields:s,getJobRelatedFieldNames:c,getJobOnlyRelatedFieldNames:d,getFieldSelectionForm:u,getFieldUpdateForm:p,getMultiSelectOptionsForField:m,otherJobDetailsCustomFieldNamePrefix:n,otherJobDetailsFields:l}}angular.module("app.core").factory("bulkupdateFeilds",e),e.$inject=["$stateParams","formHelper","webservice","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n,l){function r(e){var t;return t=e.name in s?s[e.name]:e.type in s&&s[e.type]}var s={select:i,date:a,employee_name_search:n,supervisor_name_search:o,"autocomplete-multyselect":l},c=function(){return t.call("bulkUpdateSearchForm","GET",[],void 0,void 0,!0).then(function(e){return e.data.data})},d=function(e,t){function a(e,t,a,i){if((0===n.length||3===n[n.length-1].items.length)&&a||i){var r={type:"section",htmlClass:"row",items:[]};n.push(r)}for(var s in e.properties)o.properties[s]=e.properties[s];a?n[n.length-1].items.push(e.formFields):n.push(e.formFields);for(var s in e.modelValues)l[s]=e.modelValues[s]}for(var i,o={type:"object",title:"searchForm",properties:{},required:[]},n=[],l={},s=0,c=!1,d=0;d<e.length;d++)i=r(e[d]),"date"===e[d].type?(a(i.getWidgetData(e[d],t),s,!1,c),c=!0):(a(i.getWidgetData(e[d],t),s,!0,c),c=!1,s++);return{schema:o,form:n,model:l}},m=function(a,i,o,n){return e(function(e,l){var r={"page[offset]":(a-1)*i,"page[limit]":i,sort:o,include:"supervisors,jobTitle,subDivision,locations,employeeStatus,workShift,jobCategory,JobRecord,CustomFieldValues",permissionData:"JobRecord,supervisors"};return n&&(r.filter=n),t.call("employees","GET",[],r).then(function(t){e(t.data)},function(){l()})})};return{getSearchFields:c,fetchEmployees:m,getSearchForm:d}}angular.module("app.core").factory("bulkupdateSearch",e),e.$inject=["$q","webservice","bulkupdateSearchDate","bulkupdateSearchSelect","bulkupdateSearchAutoCompleteSupervisor","bulkupdateSearchEmployeeName","bulkUpdateSearchAutoCompleteMultiSelectWidget"]}(),function(){"use strict";function e(e,t,a,i){function o(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return JSON.stringify(e)===JSON.stringify({})}var n=function(t,i,o){return e(function(e,n){a.showModal({templateUrl:"app/pim/bulkUpdate/effective_date_modal.html",controller:"PimBulkUpdateEffectiveDateController",controllerAs:"modal",inputs:{modalInput:{recordCount:t,fieldSectionTypesToBeUpdated:i,selectedJoinedDate:o}}}).then(function(t){$(t.element).openModal(),t.close.then(function(t){e(t)})})})},l=function(t,i){return e(function(e,o){a.showModal({templateUrl:"app/pim/bulkUpdate/error_modal.html",controller:"PimBulkUpdateErrorModalController",controllerAs:"modal",inputs:{modalInput:{errorRecords:t,employees:i}}}).then(function(t){$(t.element).openModal(),t.close.then(function(t){e(t)})})})},r=function(t){return e(function(e,i){a.showModal({templateUrl:"app/pim/bulkUpdate/inline_edit_confirmation_modal.html",controller:"PimBulkUpdateInlineEditConfirmationModalController",controllerAs:"modal",inputs:{modalInput:{recordCount:t}}}).then(function(t){$(t.element).openModal(),t.close.then(function(t){e(t)})})})},s=function(i){return e(function(e,o){a.showModal({templateUrl:"app/pim/bulkUpdate/progress_modal.html",controller:"PimBulkUpdateProgressController",controllerAs:"modal",inputs:{modalInput:i}}).then(function(a){t.call("progress","POST",[],{name:"bulkupdate"}).then(function(){$(a.element).openModal(),e(),a.close.then(function(){$(a.element).closeModal(),t.call("progress","DELETE",[],{name:"bulkupdate"})})})})})},c=function(e){return t.call("bulkUpdate","PATCH",e,{})};return{getEffectiveDate:n,openProgressModal:s,showErrorModal:l,getConfirmationToUpdate:r,updateValues:c,isObjectEmpty:o}}angular.module("app.core").factory("bulkupdateUpdate",e),e.$inject=["$q","webservice","ModalService","loader"]}(),function(){"use strict";function e(e,t,a,i,o){function n(){r(),l()}function l(){d.schema={type:"object",title:"Dependent",properties:{field:{title:"Field to add",type:"string","enum":d.enumForFormFieldList}},required:["field"]},d.form=[{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12",key:"field",titleMap:d.titleMapForFormFieldList,validationMessage:{302:o.getLocalizedCustom("Required")}}]}],i.addRequiredMessage(d.form),d.model={field:""}}function r(){d.titleMapForFormFieldList=[],d.enumForFormFieldList=[];for(var t=0;t<e.updateFields.length;t++)e.updateFields[t].name in e.updateSchema.properties||e.updateFields[t].disabled||(d.titleMapForFormFieldList.push({value:e.updateFields[t].name,name:e.updateFields[t].label}),d.enumForFormFieldList.push(e.updateFields[t].name))}function s(t){a.$broadcast("schemaFormValidate"),t.$valid&&e.addField(d.model.field)}function c(){t(!1)}var d=this;d.add=s,d.cancel=c,n()}angular.module("app.pim").controller("PimAddNewFieldToBulkUpdateController",e),e.$inject=["data","close","$scope","formHelper","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i){function o(){l.employeeErrors=[];for(var e=0;e<l.errorRecords.length;e++){var t=l.employees.filter(function(t){return t.empNumber==l.errorRecords[e].emp_number});t&&(t=t[0],l.employeeErrors.push({emp_number:t.empNumber,emp_name:t.firstName+" "+t.middleName+" "+t.lastName,error_message:l.errorRecords[e].message}))}}function n(){t(!1)}var l=this;l.cancel=n,l.errorRecords=a.errorRecords,l.employees=a.employees,l.modalTitle=i.getLocalizedCustom("Invalid Data Submitted"),o()}angular.module("app.pim").controller("PimBulkUpdateErrorModalController",e),e.$inject=["$scope","close","modalInput","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h){function v(){var e=b(Se.page),a=[];return a.push(e),a.push(o.call("jobTitles","GET",[],{})),a.push(o.call("employmentStatus","GET",[],{})),a.push(o.call("subunits","GET",[],{})),a.push(o.call("locations","GET",[],{})),a.push(u.getFields()),t.all(a).then(function(e){Se.employmentStatus=e[1].data.data,Se.subunits=e[2].data.data,Se.locations=e[3].data.data;var t=e[5];Se.otherJobDetailsFields=[],Se.otherJobDetailsFieldsByName={};for(var a=0;a<t.length;a++){var i=t[a];0===i.name.lastIndexOf("job_standard_other_job_details_",0)&&(Se.otherJobDetailsFields.push(i),Se.otherJobDetailsFieldsByName[i.name]=i)}}),e}function y(){Se.selectedJobTitle="",Se.selectedWorkShift="",Se.selectedSubUnit="",Se.selectedLocation="",Se.selecedJoinedDate="",Se.selecedProbationEndDate="",Se.selecedPermanencyDate="",Se.selecedSupervisors="",Se.selectedJobCategory="",Se.selectedEmploymentStatus="",Se.selectedOtherJobDetailsValues={}}function b(e){return Se.showLoaderWhenFetchingEmployees&&n.show(),a.fetchEmployees(e,Se.pageSize,Se.sort,Se.filters).then(function(t){Se.employees=t.data,Se.untochedEmployees=angular.copy(Se.employees),C(Se.employees),Se.total=t.meta.total,Se.page=e,Se.lastPage=Math.ceil(Se.total/Se.pageSize),Se.selected=[],Se.updateValuesModel={work_shift:{},location:{},job_title:{},sub_unit:{},joined_date:{},probation_end_date:{},permanency_date:{},direct_supervisor:{},job_category:{},employment_status:{},other_job_details:{}},y(),n.hide(),Se.showLoaderWhenFetchingEmployees=!0,0==Se.employees.length&&h.infoToast("No Records Found")})}function C(e){for(var t={},a=[],i=0;i<e.length;i++){a=e[i].CustomFieldValues;var o;t[e[i].empNumber]={};for(var n=0;n<a.length;n++)a[n].value_type_field&&(o=a[n].CustomField.unique_name.replace(/-/g,"_").replace(/\./g,"_"),t[e[i].empNumber][o+"_update"]=a[n][a[n].value_type_field])}Se.otherJobDetailsValueMap=t,Se.otherJobDetailsValueMapForUntouchedEmployees=angular.copy(Se.otherJobDetailsValueMap)}function w(e){var t,a=e.CustomFieldValues;Se.otherJobDetailsValueMap[e.empNumber]={};for(var i=0;i<a.length;i++)a[i].value_type_field&&(t=a[i].CustomField.unique_name.replace(/-/g,"_").replace(/\./g,"_"),Se.otherJobDetailsValueMap[e.empNumber][t+"_update"]=a[i][a[i].value_type_field])}function _(e,t){return Se.otherJobDetailsValueMap[e.empNumber][t]}function S(e,t){var a=_(e,t.name);return a?"date"===t.type&&(a=be(a)):a="date"===t.type?h.getLocalizedCustom("Select")+" "+t.label:"-"+h.getLocalizedCustom("Select")+"-",a}function D(e,t){var a=_(e,t.name);return a&&a!=Se.otherJobDetailsValueMapForUntouchedEmployees[e.empNumber][t.name]}function T(e,t){return!_(e,t.name)&&"date"!==t.type}function x(e,t){"date"===t.type?("undefined"==typeof e||e.permissionData.JobRecord.update)&&p(function(){angular.element("#"+t.name+"_date_picker_single").trigger("click")}):"autocomplete-multyselect"===t.type&&fe(e,t)}function F(e,t,a,i,o){var n;n="object"!=typeof i?Se.recentlySelectedEmployee.empNumber:i.empNumber;var l=Se.otherJobDetailsFieldsByName[e];if(Se.updateValuesModel.other_job_details[n]||(Se.updateValuesModel.other_job_details[n]={}),"date"===l.type){var r=a?re(a):"";Se.updateValuesModel.other_job_details[n][e]={custom_field_id:l.properties.id,type:l.properties.type,value:r,extra_data:""},Se.otherJobDetailsValueMap[n][e]=r}else if("autocomplete-multyselect"!==l.type||o&&o.removeExistingMultiChoices)Se.updateValuesModel.other_job_details[n][e]={custom_field_id:l.properties.id,type:l.properties.type,value:t,extra_data:l.properties.extra_data},Se.otherJobDetailsValueMap[n][e]=a;else{var s=[];Se.otherJobDetailsValueMap[n]&&Se.otherJobDetailsValueMap[n][e]?("undefined"==typeof Se.updateValuesModel.other_job_details[n][e]&&(Se.updateValuesModel.other_job_details[n][e]={custom_field_id:l.properties.id,type:l.properties.type,value:he(Se.otherJobDetailsValueMap[n][e]),extra_data:""}),s=Se.updateValuesModel.other_job_details[n][e].value,Se.updateValuesModel.other_job_details[n][e].value=s.concat(t).filter(function(e,t,a){return a.indexOf(e)===t})):Se.updateValuesModel.other_job_details[n][e]={custom_field_id:l.properties.id,type:l.properties.type,value:t,extra_data:l.properties.extra_data},Se.otherJobDetailsValueMap[n][e]=ge(Se.updateValuesModel.other_job_details[n][e].value,"csv")}J()}function k(e){for(var t=0;t<Se.selectedUpdateFields.length;t++)if(Se.selectedUpdateFields[t].name==e)return!0;return!1}function E(e){for(var t=0;t<Se.selectedUpdateFields.length;t++)if(Se.selectedUpdateFields[t].name==e)return Se.selectedUpdateFields[t];return!1}function I(e){return!0}function A(){ce()?de(function(e){e?K(function(){b(Se.page+1)}):b(Se.page+1)}):b(Se.page+1)}function M(){Se.page>1&&(ce()?de(function(e){e?K(function(){b(Se.page-1)}):b(Se.page-1)}):b(Se.page-1))}function L(){Se.pageSize=Number(Se.pageSizeString)}function P(){var e=(Se.page-1)*Se.pageSize+1,t=e+Se.employees.length-1,a=e+" - "+t+" of "+Se.total;return a}function N(e){return e===Se.sort?"arrow_upward":"-"+e===Se.sort?"arrow_downward":""}function O(e){var t=function(){Se.sort===e?Se.sort="-"+e:Se.sort==="-"+e?Se.sort=e:Se.sort=e,b(Se.page)};ce()?de(function(e){e?K(t):t()}):t()}function R(e,t){function a(e){return e&&"LABEL"==e.target.tagName}function i(e){return e&&("A"==e.target.tagName&&"TD"==e.target.parentNode.tagName||"TD"==e.target.tagName||"TR"==e.target.tagName)}function o(e){return e&&("A"==e.target.tagName&&"LI"==e.target.parentNode.tagName||"LI"==e.target.tagName)}if(z(e)){if(a(t))return void t.stopPropagation();if(i(t))e.selected=!0;else if(o(t))return;e.selected?(Se.recentlySelectedEmployee=e,Se.selected.indexOf(e.empNumber)==-1&&Se.selected.push(e.empNumber)):(Se.selected=Se.selected.filter(function(t){return t!=e.empNumber}),H(e.empNumber)),J()}}function z(e){if(e&&"object"==typeof e.permissionData)for(var t in e.permissionData)if(e.permissionData[t].update)return!0;return!1}function j(e,t,a,i){if(Se.selected.length>0)for(var o in Se.employees)Se.selected.indexOf(Se.employees[o].empNumber)>-1&&B(e,t,a,Se.employees[o],i);else we()}function V(e,t,a,i){if(Se.selected.length>0)for(var o in Se.employees)Se.selected.indexOf(Se.employees[o].empNumber)>-1&&F(e,t,a,Se.employees[o],i);else we()}function G(e){for(var t=0;t<e.length;t++)e[t].value=e[t].value.replace(/`/g,"");return e}function B(e,t,a,i,o){var n;switch("object"!=typeof i?(i=Se.recentlySelectedEmployee,n=Se.recentlySelectedEmployee.empNumber):n=i.empNumber,e){case"work_shift":i.workShift.id=t,i.workShift.workShiftName=a,Se.updateValuesModel.work_shift[n]=t;break;case"location":null!==t&&(0==i.locations.length&&(i.locations[0]={}),i.locations[0].id=t,i.locations[0].name="string"==typeof a?a.trim():a,Se.updateValuesModel.location[n]=t);break;case"job_title":i.jobTitle.id=t,i.jobTitle.jobTitleName=a,i.job_title_code=t,Se.updateValuesModel.job_title[n]=t;break;case"sub_unit":i.subDivision.id=t,i.subDivision.name="string"==typeof a?a.trim():a,Se.updateValuesModel.sub_unit[n]=t;break;case"joined_date":i.joinedDate=a?re(a):"",Se.updateValuesModel.joined_date[n]=a?re(a):null;break;case"probation_end_date":i.JobRecord.probation_end_date=a?re(a):"",Se.updateValuesModel.probation_end_date[n]=a?re(a):null;break;case"permanency_date":i.JobRecord.date_of_permanency=a?re(a):"",Se.updateValuesModel.permanency_date[n]=a?re(a):null;break;case"direct_supervisor":i.supervisors=o.removeExisting?[]:i.supervisors;var l=i.supervisors.filter(function(e){return e.id});for(var r in o.supervisors)l.indexOf(r)==-1&&i.supervisors.push({fullName:o.supervisors[r],id:r});var s={};for(var r in i.supervisors)s[i.supervisors[r].id]=!0;Se.updateValuesModel.direct_supervisor[n]=s;break;case"job_category":i.jobCategory.id=t,i.jobCategory.jobCategoryName=a,Se.updateValuesModel.job_category[n]=t;break;case"employment_status":i.employeeStatus.id=t,i.employeeStatus.name=a,Se.updateValuesModel.employment_status[n]=t}J()}function q(e,a){var i,o={},n=e&&a;for(var l in Se.updateValuesModel)if(i=Se.updateValuesModel[l],!f.isObjectEmpty(i))for(var r in i)o[r]="undefined"==typeof o[r]?{}:o[r],o[r].emp_number=r,o[r][l]="undefined"==typeof i[r]||""===i[r]?null:i[r],n&&(o[r].effective_date="joined_date"==l&&o[r][l]?o[r][l]:re(e),o[r].event_id=a);if(!f.isObjectEmpty(o))return t.all([f.updateValues(o)])}function H(e){for(var t=0;t<Se.employees.length;t++)if(Se.employees[t].empNumber==e)return Se.employees[t]=angular.copy(Se.untochedEmployees[t]),e in Se.updateValuesModel.work_shift&&delete Se.updateValuesModel.work_shift[e],e in Se.updateValuesModel.location&&delete Se.updateValuesModel.location[e],e in Se.updateValuesModel.job_title&&delete Se.updateValuesModel.job_title[e],e in Se.updateValuesModel.sub_unit&&delete Se.updateValuesModel.sub_unit[e],e in Se.updateValuesModel.joined_date&&delete Se.updateValuesModel.joined_date[e],e in Se.updateValuesModel.direct_supervisor&&delete Se.updateValuesModel.direct_supervisor[e],e in Se.updateValuesModel.probation_end_date&&delete Se.updateValuesModel.probation_end_date[e],e in Se.updateValuesModel.permanency_date&&delete Se.updateValuesModel.permanency_date[e],e in Se.updateValuesModel.job_category&&delete Se.updateValuesModel.job_category[e],e in Se.updateValuesModel.employment_status&&delete Se.updateValuesModel.employment_status[e],void(e in Se.updateValuesModel.other_job_details&&(w(Se.employees[t]),delete Se.updateValuesModel.other_job_details[e]))}function U(){Se.employees=angular.copy(Se.untochedEmployees),Se.selected=[],Se.updateValuesModel={work_shift:{},location:{},job_title:{},sub_unit:{},joined_date:{},probation_end_date:{},permanency_date:{},direct_supervisor:{},job_category:{},employment_status:{},other_job_details:{}};for(var e=0;e<Se.employees.length;e++)w(Se.employees[e])}function W(){Se.selected=[];for(var e=0;e<Se.employees.length;e++)z(Se.employees[e])&&(Se.employees[e].selected=!0,Se.selected.push(Se.employees[e].empNumber))}function Y(){U()}function J(){var e=Se.updateValuesModel.other_job_details;Se.invalidFields={};for(var t=0;t<Se.selectedUpdateFields.length;t++){var a=Se.selectedUpdateFields[t];if(a.properties.mandatory)for(var i=0;i<Se.selected.length;i++){var o=e[Se.selected[i]],n=Se.otherJobDetailsValueMap[Se.selected[i]][a.name];n||o&&o[a.name]&&!f.isObjectEmpty(o[a.name])||(Se.invalidFields[Se.selected[i]]||(Se.invalidFields[Se.selected[i]]={}),Se.invalidFields[Se.selected[i]][a.name]=!0)}}return f.isObjectEmpty(Se.invalidFields)}function K(e){var t=J();if(t){Se.showLoaderWhenFetchingEmployees=!1,"function"!=typeof e&&(e=function(){b(Se.page)});var a={updateFinished:!1,total:Se.selected.length,fieldCount:le(),getProgressPercentage:function(e){var t=100*e/me();return parseInt(t,10)},getSuccessMessage:function(e){return h.getLocalizedCustomWithVariables("Successfully updated {{updateCount}} record(s)",{updateCount:e})},getWarningMessage:function(e){return h.getLocalizedCustomWithVariables("Update failed. Errors in {{updateCount}} record(s)",{updateCount:e})}},i=ne();i.job||i.other_job_details?f.getEffectiveDate(Se.selected.length,i,Se.selectedJoinedDate).then(function(t){"object"==typeof t&&f.openProgressModal(a).then(function(){q(t.effectiveDate,t.event).then(function(t){if(a.updateFinished=!0,t[0].data.messages.success){for(var i=0,o=0;o<t.length;o++)i=t[o].data.updateResult.success.count>i?t[o].data.updateResult.success.count:i;l.success(a.getSuccessMessage(i),null)}e()},function(t){a.updateFinished=!0,t.data.messages.error&&(l.error(a.getWarningMessage(t.data.updateResult.error.count),null),f.showErrorModal(t.data.updateResult.error.data,Se.employees)),e()})})}):f.getConfirmationToUpdate(Se.selected.length).then(function(t){t&&f.openProgressModal(a).then(function(){q(!1,!1).then(function(t){if(a.updateFinished=!0,t[0].data.messages.success){for(var i=0,o=0;o<t.length;o++)i=t[o].data.updateResult.success.count>i?t[o].data.updateResult.success.count:i;l.success(a.getSuccessMessage(i),null)}e()},function(t){a.updateFinished=!0,t.data.messages.error&&(l.error(a.getWarningMessage(t.data.updateResult.error.count),null),f.showErrorModal(t.data.updateResult.error.data,Se.employees)),e()})})})}}function Z(e){if(!_e(e)){var t=e.select?new Date(e.select):"";j("joined_date",t,t),
s.$apply()}}function Q(e){Se.selecedJoinedDateForCell=void 0;var t=e.select?new Date(e.select):"";B("joined_date",t,t),s.$apply()}function X(e){if(!_e(e)){var t=e.select?new Date(e.select):"";j("probation_end_date",t,t),s.$apply()}}function ee(e){Se.selecedProbationEndDateForCell=void 0;var t=e.select?new Date(e.select):"";B("probation_end_date",t,t),s.$apply()}function te(e){if(!_e(e)){var t=e.select?new Date(e.select):"";j("permanency_date",t,t),s.$apply()}}function ae(e){Se.selecedPermanencyDateForCell=void 0;var t=e.select?new Date(e.select):"";B("permanency_date",t,t),s.$apply()}function ie(e){return function(t){if(!_e(t)){var a=t.select?new Date(t.select):"";V(e,a,a),s.$apply()}}}function oe(e){return function(t){var a=t.select?new Date(t.select):"";F(e,a,a),s.$apply()}}function ne(){Se.selectedJoinedDate=!1;var e={job:!1,other_job_details:!1},t=u.getJobRelatedFieldNames();Object.keys(Se.updateValuesModel.other_job_details).length>0&&(e.other_job_details=!0);for(var a in Se.updateValuesModel)Object.keys(Se.updateValuesModel[a]).length>0&&t.indexOf(a)!=-1&&(e.job=!0,"joined_date"==a&&(Se.selectedJoinedDate=!0));return e}function le(){var e=0,t=u.getJobRelatedFieldNames();for(var a in Se.updateValuesModel)Object.keys(Se.updateValuesModel[a]).length>0&&t.indexOf(a)!=-1&&e++;return e}function re(e){var t=new Date(e),a=""+(t.getMonth()+1),i=""+t.getDate(),o=t.getFullYear();return a.length<2&&(a="0"+a),i.length<2&&(i="0"+i),[o,a,i].join("-")}function se(e,t){("undefined"==typeof e||e.permissionData.JobRecord.update)&&p(function(){angular.element(t).trigger("click")})}function ce(){for(var e in Se.updateValuesModel)if(Object.keys(Se.updateValuesModel[e]).length>0)return!0;return!1}function de(e){Se.selected.length>0&&m.showModal({templateUrl:"app/pim/bulkUpdate/inline_edit_discard_confirmation.html",controller:"PimInlineEditDiscardConfirmationController",controllerAs:"modal"}).then(function(t){$(t.element).openModal(),t.close.then(function(t){e(t)})})}function me(){var e,t=[];for(var a in Se.updateValuesModel){e=Object.keys(Se.updateValuesModel[a]);for(var i in e)t.indexOf(i)===-1&&t.push(i)}return t.length}function ue(e){var t="";if(e)for(var a=0;a<e.length;a++)t+=e[a].fullName?e[a].fullName:e[a].firstName+" "+e[a].lastName,a<e.length-1&&(t+=", ");return t}function pe(e){return 0===Se.selected.length&&"undefined"==typeof e?void we():void(("undefined"==typeof e||e.permissionData.supervisors.update)&&m.showModal({templateUrl:"app/pim/bulkUpdate/supervisor_modal.html",controller:"PimBulkUpdateSupervisorModalController",controllerAs:"modal",inputs:{modalInput:{employee:e,employeeItems:d.data.employeeItems,removeExistingCheckbox:"object"!=typeof e}}}).then(function(t){$(t.element).openModal(),t.close.then(function(t){if(t!==!1)if("object"==typeof e){var a={supervisors:t.supervisors,removeExisting:!0};B("direct_supervisor",void 0,void 0,e,a)}else{var a={supervisors:t.supervisors,removeExisting:t.removeExisting};j("direct_supervisor",void 0,void 0,a);var i=[];for(var o in t.supervisors)i.push({fullName:t.supervisors[o]});Se.selecedSupervisors=ue(i)}})}))}function fe(e,t){return 0!==Se.selected.length||e?void(e&&!e.permissionData.JobRecord.update||m.showModal({templateUrl:"app/pim/bulkUpdate/select_multi_choices_modal.html",controller:"PimBulkUpdateSelectMultiChoicesModalController",controllerAs:"modal",inputs:{modalInput:{employee:e,formField:t,existingChoices:e?he(_(e,t.name)):[],removeExistingCheckbox:"object"!=typeof e}}}).then(function(a){$(a.element).openModal(),a.close.then(function(a){a!==!1&&("object"==typeof e?F(t.name,ge(a.multiChoices),ge(a.multiChoices,"csv"),e,{removeExistingMultiChoices:!0}):(V(t.name,ge(a.multiChoices),ge(a.multiChoices,"csv"),{removeExistingMultiChoices:a.removeExistingMultiChoices}),Se.selectedOtherJobDetailsValues[t.name]=ge(a.multiChoices,"csv")))})})):void we()}function ge(e,t){var a=[];for(var i in e)e.hasOwnProperty(i)&&a.push(e[i]);return"csv"===t?a.join(","):a}function he(e){return e?e.split(","):""}function ve(e,t){var a=e.supervisors,i=t.supervisors;if(a.length!=i.length)return!0;for(var o in a){var n=a[o].fullName?a[o].fullName:a[o].firstName+" "+a[o].lastName,l=!1;for(var r in i){var s=i[r].fullName?i[r].fullName:i[r].firstName+" "+i[r].lastName;n==s&&(l=!0)}if(!l)return!0}return!1}function ye(e){"TD"==e.target.tagName&&p(function(){angular.element(e.target).children("a").trigger("click")})}function be(e){return e?(e=e.slice(0,10),g.toLocalizedDate(e)):e}function Ce(){var e=!1;for(var t in Se.updateValuesModel)if(!f.isObjectEmpty(Se.updateValuesModel[t])){e=!0;break}return e}function we(){h.warningToast("Please Select an Employee First")}function _e(e){return!(!e||!("undefined"==typeof e.select||e.select instanceof Date)||0!==Se.selected.length)}var Se=this;return Se.title="Inline Bulk Update",Se.pageSize=50,Se.pageSizeString=Se.pageSize+"",Se.page=1,Se.total=0,Se.sort="lastName",Se.showLoaderWhenFetchingEmployees=!0,Se.isFieldToBeUpdated=k,Se.getField=E,Se.sortBy=O,Se.getSortIcon=N,Se.hasPermissionsToUpdate=I,Se.setHiararchy=G,Se.changeCellValue=B,Se.changeOtherJobDetailsCellValue=F,Se.resetInlineEditList=U,Se.getSupervisorList=ue,Se.isSupervisorModified=ve,Se.getModifiedEmployeeCount=me,Se.onJoinedDateSetBulk=Z,Se.onJoinedDateSetSingle=Q,Se.onProbationEndDateSetBulk=X,Se.onProbationEndDateSetSingle=ee,Se.onPermanencyDateSetBulk=te,Se.onPermanencyDateSetSingle=ae,Se.getOtherJobDetailsSetBulkDateFunctionForField=ie,Se.update=q,Se.hasDataChange=Ce,Se.isPickerInitializationWithEmployeeNotSelected=_e,Se.triggerCellClick=ye,Se.updateValuesModel={work_shift:{},location:{},job_title:{},sub_unit:{},joined_date:{},probation_end_date:{},permanency_date:{},direct_supervisor:{},job_category:{},employment_status:{},other_job_details:{}},Se.save=K,Se.getCurrentPageText=P,Se.pageSizes=["10","25","50","100"],Se.fetchEmployees=b,Se.updatePageSize=L,Se.nextPage=A,Se.prevPage=M,Se.changeSelection=R,Se.changeBulkSelection=j,Se.changeOtherJobDetailsBulkSelection=V,Se.openDatePickerForSingleCell=se,Se.hasPermissionToEditAtLeastOneCell=z,Se.addSupervisors=pe,Se.selectMultiChoices=fe,Se.selectAll=W,Se.deselectAll=Y,Se.convertToLocalizedDateFormat=be,Se.getEmployeeOtherJobDetailValueByFieldName=_,Se.getEmployeeOtherJobDetailCellValue=S,Se.isEmployeeOtherJobDetailCellValueDirty=D,Se.shouldShowSpanTag=T,Se.triggerOtherJobDetailsCellClick=x,Se.getOtherJobDetailsSetSingleDateFunctionForField=oe,Se.isInlineEditValid=J,Se.selected=[],Se.otherJobDetailsValueMap={},Se.otherJobDetailsValueMapForUntouchedEmployees={},Se.invalidFields={},y(),d.filters?(Se.filters=d.filters,Se.selectedUpdateFields=d.selectedUpdateFields,void v()):(Se.selectedUpdateFields=[],void c.go("pim.bulk_update"))}angular.module("app.pim").controller("PimBulkUpdateInlineEditController",e),e.$inject=["formHelper","$q","bulkupdateSearch","logger","webservice","loader","toast","$rootScope","$scope","$state","$stateParams","ModalService","bulkupdateFeilds","$timeout","bulkupdateUpdate","dateService","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(){h(),_(),D()}function h(){k.updateSchema={type:"object",title:"Immigration",properties:{dummy:{title:"form is not working without a dummy",type:"string"}},required:[]},k.updateForm=[],k.updateModel={};for(var e=0;e<k.updateFields.length;e++)k.updateFieldsByName[k.updateFields[e].name]=k.updateFields[e]}function v(e){return f.getLocalizedCustomWithVariables("Bulk Update ({{total}} matches)",{total:e})}function y(){k.updateForm.length!=k.updateFields.length&&d.showModal({templateUrl:"app/pim/bulkUpdate/add_field_to_bulkUpdate_modal.html",controller:"PimAddNewFieldToBulkUpdateController",controllerAs:"modal",inputs:{data:{updateSchema:k.updateSchema,updateForm:k.updateForm,updateModel:k.updateModel,updateFields:k.updateFields,addField:T,scope:n}}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function b(e){if(n.$broadcast("schemaFormValidate"),e.$valid){if(!k.formEnabled)return;if(k.total<=0)return void f.warningToast("No Matching Employees for the Selected Criteria");var t={updateFinished:!1,total:k.total,fieldCount:k.updateForm.length,getProgressPercentage:function(e){return parseInt(100*e/this.total,10)},getSuccessMessage:function(e){return f.getLocalizedCustomWithVariables("Successfully updated {{updateCount}} record(s)",{updateCount:e})},getWarningMessage:function(e){return f.getLocalizedCustomWithVariables("Update failed. Errors in {{updateCount}} record(s)",{updateCount:e})}},a=F();a.job||a.other_job_details?p.getEffectiveDate(t.total,a,k.selectedJoinedDate).then(function(e){"object"==typeof e&&p.openProgressModal(t).then(function(){C(e.effectiveDate,e.event).then(function(e){if(t.updateFinished=!0,e[0].data.messages.success){for(var a=0,o=0;o<e.length;o++)a=e[o].data.updateResult.success.count>a?e[o].data.updateResult.success.count:a;i.success(t.getSuccessMessage(a),null)}},function(e){t.updateFinished=!0,e.data.messages.error&&(i.error(t.getWarningMessage(e.data.updateResult.error.count),null),p.showErrorModal(e.data.updateResult.error.data,k.employees))})})}):p.getConfirmationToUpdate(t.total).then(function(e){e&&p.openProgressModal(t).then(function(){C(!1,!1).then(function(e){if(t.updateFinished=!0,e[0].data.messages.success){for(var a=0,o=0;o<e.length;o++)a=e[o].data.updateResult.success.count>a?e[o].data.updateResult.success.count:a;i.success(t.getSuccessMessage(a),null)}},function(e){t.updateFinished=!0,e.data.messages.error&&(i.error(t.getWarningMessage(e.data.updateResult.error.count),null),p.showErrorModal(e.data.updateResult.error.data,k.employees))})})})}}function C(e,t){for(var a,i,o={},n=e&&t,l={},r=0;r<k.updateFields.length;r++)l[k.updateFields[r].name]=k.updateFields[r];for(var c in k.updateModel)if("selectedEmployee"!==c&&"employee_name"!==c&&"remove_existing_supervisors"!==c&&(i=k.updateModel[c],null!==i&&!p.isObjectEmpty(i)))for(var d=0;d<k.employees.length;d++){if(a=k.employees[d].empNumber,o[a]="undefined"==typeof o[a]?{}:o[a],o[a].emp_number=a,i&&"date"===l[c].type&&(i=x(i)),"direct_supervisor"===c&&""===i)o[a][c]={},k.updateModel.remove_existing_supervisors===!0?o[a].remove_existing_supervisors=!0:o[a].remove_existing_supervisors=!1;else if(0===c.lastIndexOf(u.otherJobDetailsCustomFieldNamePrefix,0)){var m=l[c];o[a].other_job_details||(o[a].other_job_details={}),o[a].other_job_details[c]={custom_field_id:m.properties.id,type:m.properties.type,value:i,extra_data:""},"date"!==m.type&&(o[a].other_job_details[c].extra_data=m.properties.extra_data)}else o[a][c]="undefined"==typeof i||""===i?null:i,"direct_supervisor"===c&&(k.updateModel.remove_existing_supervisors===!0?o[a].remove_existing_supervisors=!0:o[a].remove_existing_supervisors=!1);n&&(o[a].effective_date=x(e),o[a].event_id=t)}if(!p.isObjectEmpty(o))return s.all([p.updateValues(o)])}function w(){"function"==typeof r.returnCallback&&r.returnCallback(),l.go("pim.bulk_update")}function _(){var e={fields:"empNumber,firstName,lastName,middleName"};return k.filters&&(e.filter=k.filters),a.show(),t.call("employees","GET",[],e).then(function(e){k.employees=e.data.data,k.showBulkUpdate=!0,k.total=e.data.meta.total,a.hide()})}function S(){var e=k.updateSchema.properties;k.updateFieldsByName.remove_existing_supervisors={label:f.getLocalizedCustom("Remove Existing Supervisors"),name:"remove_existing_supervisors",type:"checkbox",properties:{}};for(var t in e)if(e.hasOwnProperty(t)&&"direct_supervisor"!==k.updateFieldsByName[t].name&&!k.updateFieldsByName[t].properties.mandatory){"probation_end_date"!==t&&"permanency_date"!==t||T("joined_date");for(var a in k.updateFieldsByName)k.updateFieldsByName[a].properties.mandatory&&T(a)}}function D(){var e=function(){n.$broadcast("schemaFormRedraw"),S()},t=u.getFieldUpdateForm(k.selectedUpdateFields,{employeeItems:r.data.employeeItems,formRedraw:e});k.updateSchema=t.schema,k.updateForm=t.form,k.updateModel=t.model,k.formEnabled=k.updateForm.length>0,n.$broadcast("schemaFormRedraw"),S()}function T(e){if(!k.updateSchema.properties[e])for(var t=0;t<k.updateFields.length;t++)k.updateFields[t].name==e&&(k.selectedUpdateFields.unshift(k.updateFields[t]),D())}function x(e){var t=new Date(e),a=""+(t.getMonth()+1),i=""+t.getDate(),o=t.getFullYear();return a.length<2&&(a="0"+a),i.length<2&&(i="0"+i),[o,a,i].join("-")}function F(){k.selectedJoinedDate=!1;var e={job:!1,other_job_details:!1};for(var t in k.updateModel)u.getJobOnlyRelatedFieldNames().indexOf(t)!==-1&&(e.job=!0),0===t.lastIndexOf(u.otherJobDetailsCustomFieldNamePrefix,0)&&(e.other_job_details=!0),"joined_date"==t&&(k.selectedJoinedDate=k.updateModel[t]);return e}var k=this;return k.title="",r.filters&&r.updateFields&&r.selectedUpdateFields?(k.filters=r.filters,k.updateFields=r.updateFields,k.selectedUpdateFields=r.selectedUpdateFields,k.formEnabled=k.selectedUpdateFields.length>0,k.getBulkUpdateTitle=v,k.addFields=y,k.cancelUpdate=w,k.update=C,k.save=b,k.updateFieldsByName={},void g()):void l.go("pim.bulk_update")}angular.module("app.pim").controller("PimBulkUpdateQuickUpdateController",e),e.$inject=["logger","webservice","loader","toast","$rootScope","$scope","$state","$stateParams","$q","$timeout","ModalService","formHelper","bulkupdateFeilds","bulkupdateUpdate","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n){function l(){r()}function r(){if(d.formSchema={type:"object",title:a.formField.label,name:"multiChoicesForm",properties:{multiChoices:{title:a.formField.label,type:"object"},removeExistingMultiChoices:{title:i.getLocalizedCustom("Remove Existing Choices"),type:"boolean"}},required:[]},d.form=[{type:"section",htmlClass:"row",items:[{key:"multiChoices",type:"autocomplete-multyselect",htmlClass:"col s12 m12 l12",choices:o.getMultiSelectOptionsForField(a.formField)}]},{type:"section",htmlClass:"row",items:[{key:"removeExistingMultiChoices",type:"checkbox",htmlClass:"col s12 m12 l12",condition:"modal.removeExistingCheckbox"}]}],a.formField.properties.mandatory&&(d.formSchema.required.push("multiChoices"),n.addRequiredMessage(d.form)),d.formModel={},a.existingChoices&&a.existingChoices.length>0){for(var e=a.existingChoices,t={},l=0;l<e.length;l++)t[e[l]]=e[l];d.formModel.multiChoices=t}}function s(a){e.$broadcast("schemaFormValidate"),a.$valid&&t(d.formModel)}function c(){t(!1)}var d=this;d.modifyButtonTitle="Select",d.title=i.getLocalizedCustom("Select Options"),d.modifyMultiChoices=s,d.existingChoices=a.existingChoices,d.removeExistingCheckbox=a.removeExistingCheckbox,d.cancel=c,l()}angular.module("app.pim").controller("PimBulkUpdateSelectMultiChoicesModalController",e),e.$inject=["$scope","close","modalInput","localizedMessages","bulkupdateFeilds","formHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){function m(){var e=[];n.show(),o.clearCache("bulkUpdateField",void 0),e.push(r.getSearchFields()),e.push(s.getFields()),e.push(c.getPermission("pim_bulk_update")),e.push(o.call("employees","GET",[],{filter:{termination:2},fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId"})),e.push(o.call("jobTitles","GET",[],{})),e.push(o.call("employmentStatus","GET",[],{})),e.push(o.call("subunits","GET",[],{})),e.push(o.call("locations","GET",[],{})),e.push(o.call("jobCategories","GET",[],{})),a.all(e).then(function(e){D.searchFields=e[0],D.updateFields=e[1],D.permissions=e[2];var a=e[3].data.data.filter(function(e){return null==e.termination_id});D.employeeItemsWithTerminatedEmployees=d.getItemsForMultyselectAutocomplete(e[3].data.data,function(e){var a=null!=e.termination_id?" ("+t.getLocalizedCustom("Past Employee")+")":"";return{id:e.empNumber,name:e.firstName+" "+e.lastName+a,employeeId:e.employeeId}}),D.employeeItems=d.getItemsForMultyselectAutocomplete(a,function(e){return{id:e.empNumber,name:e.firstName+" "+e.lastName}}),D.quickupdateData={},D.inlineEditData={},u(D.quickupdateData,{employeeItems:D.employeeItems}),u(D.inlineEditData,{employeeItems:D.employeeItems}),p(),f(),n.hide()},function(e){n.hide(),i.go("403")})}function u(e,t){for(var a in t)e[a]=t[a]}function p(){var t=r.getSearchForm(D.searchFields,{employeeItemsWithTerminatedEmployees:D.employeeItemsWithTerminatedEmployees,controllerScope:e});D.searchForm.schema=t.schema,D.searchForm.form=t.form,D.searchForm.model=t.model}function f(){var e=s.getFieldSelectionForm(D.updateFields);D.fieldSelectionForm.schema=e.schema,D.fieldSelectionForm.form=e.form,D.fieldSelectionForm.model=e.model}function g(){return D.oldFilter=D.searchForm.model,D.filters={},""!=D.searchForm.model.termination_search&&(D.filters.termination=D.searchForm.model.termination_search),D.filters.employee_id_list=Object.keys(D.searchForm.model.employee_name_search),D.filters.supervisor_name=D.searchForm.model.supervisor_name,D.filters.supervisor_name_or_id=D.searchForm.model.supervisor_name,"undefined"!=typeof D.searchForm.model.selectedSupervisor&&(D.filters.supervisorId=D.searchForm.model.selectedSupervisor.empNumber),D.filters.employee_status=D.searchForm.model.employee_status_search,D.filters.sub_unit=D.searchForm.model.sub_unit_search,D.filters.job_title=D.searchForm.model.job_title_search,D.filters.work_shift=D.searchForm.model.work_shift_search,D.filters.location=D.searchForm.model.location_search,D.filters.job_category=D.searchForm.model.job_category_search,D.filters.joined_date=_(D.searchForm.model.joined_date_search,D.searchForm.model.joined_date_search_from,D.searchForm.model.joined_date_search_to,D.searchForm.model.joined_date_search_date),D.filters.probation_end_date=_(D.searchForm.model.probation_end_date_search,D.searchForm.model.probation_end_date_search_from,D.searchForm.model.probation_end_date_search_to,D.searchForm.model.probation_end_date_search_date),D.filters.permanency_date=_(D.searchForm.model.permanency_date_search,D.searchForm.model.permanency_date_search_from,D.searchForm.model.permanency_date_search_to,D.searchForm.model.permanency_date_search_date),h(),D.filters}function h(){var e;D.filters[T]={};for(var t=0;t<D.searchFields.length;t++)e=D.searchFields[t],0===e.name.lastIndexOf(s.otherJobDetailsCustomFieldNamePrefix,0)&&("date"===e.type?D.filters[T][e.properties.unique_name]=_(D.searchForm.model[e.name],D.searchForm.model[e.name+"_from"],D.searchForm.model[e.name+"_to"],D.searchForm.model[e.name+"_date"]):D.filters[T][e.properties.unique_name]=D.searchForm.model[e.name])}function v(){for(var e=[],t=0;t<D.updateFields.length;t++)D.fieldSelectionForm.model[D.updateFields[t].name]&&e.push(D.updateFields[t]);return e}function y(){return Object.keys(D.fieldSelectionForm.model).filter(function(e){return D.fieldSelectionForm.model[e]}).length}function b(){var e=!0;for(var t in D.searchFormValidations)if(D.searchFormValidations[t]===!1){e=!1;break}return e}function C(){D.formCollapsed=!0;var e=function(){D.formCollapsed=!1};i.go("pim.bulk_update.inline_edit",{filters:g(),updateFields:D.updateFields,selectedUpdateFields:v(),returnCallback:e,data:D.quickupdateData})}function w(){D.formCollapsed=!0;var e=function(){D.formCollapsed=!1};i.go("pim.bulk_update.update",{filters:g(),updateFields:D.updateFields,selectedUpdateFields:v(),data:D.quickupdateData,returnCallback:e})}function _(e,t,a,i){return"from"==e?{from:S(i),to:"",equal:0}:"to"==e?{from:"",to:S(i),equal:0}:"fromto"==e?{from:S(t),to:S(a),equal:0}:e}function S(e){var t=new Date(e),a=""+(t.getMonth()+1),i=""+t.getDate(),o=t.getFullYear();return a.length<2&&(a="0"+a),i.length<2&&(i="0"+i),[o,a,i].join("-")}var D=this;D.formCollapsed=!1,D.inlineEdit=C,D.quickUpdate=w,D.getSelectedUpdateFieldCount=y,D.isSearchFormValid=b,D.searchForm={},D.fieldSelectionForm={},D.searchFormValidations={},D.state=i;var T="customFieldValues";m()}angular.module("app.pim").controller("PimBulkUpdateController",e),e.$inject=["$scope","localizedMessages","$q","$state","webservice","loader","toast","bulkupdateSearch","bulkupdateFeilds","datagroupPermissions","formHelper"]}(),function(){"use strict";function e(e,t,a,i,o){function n(){var e=i.getLocalizedCustom("Multiple records will be updated. Are you sure?");return m.recordCount&&(e=m.recordCount>1?i.getLocalizedCustomWithVariables("{{updatedRecordNumber}} records will be updated. Are you sure?",{updatedRecordNumber:m.recordCount}):i.getLocalizedCustomWithVariables("{{updatedRecordNumber}} record will be updated. Are you sure?",{updatedRecordNumber:m.recordCount})),e}function l(){o.call("pimHistoryEvents","GET",[],{filter:{type:m.jobEventTypeId}},void 0).then(function(e){r(s(e.data.data))})}function r(e){m.formModel={event:m.selectedJoinedDate?m.joinedEventId:"",effectiveDate:m.selectedJoinedDate&&m.selectedJoinedDate!==!0?m.selectedJoinedDate:new Date};var t=m.selectedJoinedDate===!0?" (If the joined date is not changed)":"";m.formSchema={type:"object",title:"Add Effective Date",name:"effectiveDateForm",properties:{event:{title:i.getLocalizedCustom("Job Event"),type:"string","enum":e["enum"]},effectiveDate:{title:"Effective Date"+t,type:["null","object"]}},required:["event","effectiveDate","description"]},m.form=[{type:"section",htmlClass:"row",items:[{key:"event",type:"select",htmlClass:"col s12 m12 l12",titleMap:e.titleMap,validationMessage:{302:i.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row",name:"effectiveDateForm",items:[{type:"date",htmlClass:"col s12",key:"effectiveDate",defaultDate:m.formModel.effectiveDate,readonly:m.selectedJoinedDate&&m.selectedJoinedDate!==!0,resetDefaultDate:m.resetDefaultDate,validationMessage:{302:i.getLocalizedCustom("Required")}}]}]}function s(e){for(var t=[],a=[],o=0;o<e.length;o++)if(!m.selectedJoinedDate||e[o].id==m.joinedEventId){var n={value:e[o].id,name:i.getLocalizedCustom(e[o].name)};t.push(n),a.push(e[o].id)}return{titleMap:t,"enum":a}}function c(a){e.$broadcast("schemaFormValidate"),a.$valid&&t(m.formModel)}function d(){t(!1)}r.$inject=["eventData"];var m=this;m.jobEventTypeId=1,m.joinedEventId="1",m.save=c,m.cancel=d,m.recordCount=a.recordCount,m.fieldSectionTypesToBeUpdated=a.fieldSectionTypesToBeUpdated,m.selectedJoinedDate=a.selectedJoinedDate,m.confirmationMessage=n(),m.resetDefaultDate={reset:!1},l()}angular.module("app.pim").controller("PimBulkUpdateEffectiveDateController",e),e.$inject=["$scope","close","modalInput","localizedMessages","webservice"]}(),function(){"use strict";function e(e,t,a,i){function o(){var e=i.getLocalizedCustom("Multiple records will be updated. Are you sure?");return r.recordCount&&(e=r.recordCount>1?i.getLocalizedCustomWithVariables("{{updatedRecordNumber}} records will be updated. Are you sure?",{updatedRecordNumber:r.recordCount}):i.getLocalizedCustomWithVariables("{{updatedRecordNumber}} record will be updated. Are you sure?",{updatedRecordNumber:r.recordCount})),e}function n(){t(!0)}function l(){t(!1)}var r=this;r.cancel=l,r.confirm=n,r.recordCount=a.recordCount,r.confirmationMessage=o()}angular.module("app.pim").controller("PimBulkUpdateInlineEditConfirmationModalController",e),e.$inject=["$scope","close","modalInput","localizedMessages"]}(),function(){"use strict";function e(e,t){function a(){t(!0)}function i(){t(!1)}var o=this;o.cancel=i,o.confirm=a}angular.module("app.pim").controller("PimInlineEditRecoveryConfirmationModalController",e),e.$inject=["$scope","close"]}(),function(){"use strict";function e(e,t){function a(){t(!1)}function i(){t(!0)}var o=this;o.discardChangesAndProceed=a,o.saveChangesAndProceed=i}angular.module("app.pim").controller("PimInlineEditDiscardConfirmationController",e),e.$inject=["$scope","close"]}(),function(){"use strict";function e(e,t,a,i,o){function n(){l.progressModalTitle=o.getLocalizedCustom("Updating data"),1==t.total?l.progressModalTitle=o.getLocalizedCustomWithVariables("Updating {{count}} Employee Record",{count:1}):t.total>1&&(l.progressModalTitle=o.getLocalizedCustomWithVariables("Updating {{count}} Employee Records",{count:t.total})),a.call("progress","GET",[],{name:"bulkupdate"}).then(function(a){var o=a.data.data;l.tempProgressPercentage=parseInt(t.getProgressPercentage(o)),l.tempProgressPercentage>l.latestProgress&&l.tempProgressPercentage<100&&(l.latestProgress=l.progressPercentage||l.tempProgressPercentage,l.progressPercentage=l.tempProgressPercentage,l.progress=l.progressPercentage+"%"),t.updateFinished?(l.progress="100%",i(function(){e(!1)},500)):i(function(){n()},1e3)})}var l=this;l.latestProgress=0,n()}angular.module("app.pim").controller("PimBulkUpdateProgressController",e),e.$inject=["close","modalInput","webservice","$timeout","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o){function n(){l()}function l(){if(c.formSchema={type:"object",title:"Supervisors",name:"supervisorsForm",properties:{supervisors:{title:i.getLocalizedCustom("Supervisors"),type:"object"},removeExisting:{title:i.getLocalizedCustom("Remove Existing Supervisors"),type:"boolean"}},required:[]},c.form=[{type:"section",htmlClass:"row",items:[{key:"supervisors",type:"autocomplete-multyselect",htmlClass:"col s12 m12 l12",choices:a.employeeItems}]},{type:"section",htmlClass:"row",items:[{key:"removeExisting",type:"checkbox",htmlClass:"col s12 m12 l12",condition:"modal.removeExistingCheckbox"}]}],o.addRequiredMessage(c.form),c.formModel={},a.employee&&a.employee.supervisors&&a.employee.supervisors.length>0){for(var e=a.employee.supervisors,t={},n=0;n<e.length;n++)t[e[n].id]=e[n].fullName?e[n].fullName:e[n].firstName+" "+e[n].lastName;c.formModel.supervisors=t}}function r(a){e.$broadcast("schemaFormValidate"),a.$valid&&t(c.formModel)}function s(){t(!1)}var c=this;c.modifyButtonTitle="Add",c.title=i.getLocalizedCustom("Add Supervisors"),c.modifySupervisors=r,c.removeExistingCheckbox=a.removeExistingCheckbox,c.cancel=s,n()}angular.module("app.pim").controller("PimBulkUpdateSupervisorModalController",e),e.$inject=["$scope","close","modalInput","localizedMessages","formHelper"]}(),function(){"use strict";function e(e,t,a,i){var o=function(e){var t={};return t[e.name]={title:e.label,type:"object"},t},n=function(e){return{type:"autocomplete-multyselect",choices:i.getMultiSelectOptionsForField(e),sorting:!1,htmlClass:"col s4",key:e.name,placeholder:a.getLocalizedCustom(e.placeholder)}},l=function(e){var t={};return t[e.name]="",t};return{getWidgetData:function(e){return{properties:o(e),formFields:n(e),modelValues:l(e)}}}}angular.module("app.core").factory("bulkUpdateSearchAutoCompleteMultiSelectWidget",e),e.$inject=["formHelper","webservice","localizedMessages","bulkupdateFeilds"]}(),function(){"use strict";function e(e,t,a){function i(e,i){var o={name:"userInputString",filter:{employee_name_or_id:e,is_supervisor:1,termination:2},fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId","page[offset]":"0","page[limit]":"10"};return t.call("employees","GET",[],o,i).then(function(e){return e.data.data.filter(function(e){return null!=e.termination_id&&(e.terminationStatus="("+a.getLocalizedCustom("Past Employee")+")"),e})})}var o=function(e){var t={};return t[e.name]={title:e.label,type:"string"},t},n=function(e){return{type:"auto-complete-supervisor",htmlClass:"col s4",key:e.name,"remote-api-handler":i,placeholder:a.getLocalizedCustom("Type for hints")+"..."}},l=function(e){var t={};return t[e.name]="",t};return{getWidgetData:function(e){return{properties:o(e),formFields:n(e),modelValues:l(e)}}}}angular.module("app.core").factory("bulkupdateSearchAutoCompleteSupervisor",e),e.$inject=["formHelper","webservice","localizedMessages"]}(),function(){"use strict";function e(e,t,a){function i(e){var t={};return t[e.name]={title:e.label,type:"string","enum":["-1","pim_undefined","from","to","fromto"]},t[e.name+"_from"]={title:"From",type:["null","object"]},t[e.name+"_to"]={title:"To",type:["null","object"]},t[e.name+"_date"]={title:"Date",type:["null","object"]},t}function o(e,i){return{type:"section",htmlClass:"row",items:[{type:"select",emptyOption:!1,htmlClass:"col s4",key:e.name,titleMap:[{value:"-1",name:t.getLocalizedCustom("All")},{value:"pim_undefined",name:t.getLocalizedCustom("Undefined")},{value:"from",name:t.getLocalizedCustom("After")},{value:"to",name:t.getLocalizedCustom("Before")},{value:"fromto",name:t.getLocalizedCustom("In Between")}]},{type:"date",htmlClass:"col s4",key:e.name+"_from",validationMessage:{maxDate:t.getLocalizedCustom("From Date should be less than To Date")},$validators:{maxDate:function(t){var o=a.minDate.validator(i.controllerScope.bulkupdate.searchForm.model[e.name+"_to"],t);return i.controllerScope.bulkupdate.searchFormValidations[e.name+"_to"]=o,o}},condition:"model."+e.name+" == 'fromto'"},{type:"date",htmlClass:"col s4",key:e.name+"_to",validationMessage:{minDate:t.getLocalizedCustom("To Date should be greater than From Date")},$validators:{minDate:function(t){var o=a.minDate.validator(t,i.controllerScope.bulkupdate.searchForm.model[e.name+"_from"]);return i.controllerScope.bulkupdate.searchFormValidations[e.name+"_from"]=o,o}},condition:"model."+e.name+" == 'fromto'"},{type:"date",htmlClass:"col s4",key:e.name+"_date",condition:"model."+e.name+" == 'from' || model."+e.name+" == 'to'"}]}}function n(e){var t={};return t[e.name]="-1",t[e.name+"_from"]=null,t[e.name+"_to"]=null,t[e.name+"_date"]=null,t}return{getWidgetData:function(e,t){return{properties:i(e),formFields:o(e,t),modelValues:n(e)}}}}angular.module("app.core").factory("bulkupdateSearchDate",e),e.$inject=["$rootScope","localizedMessages","formValidationHelper"]}(),function(){"use strict";function e(){var e=function(e){var t={};return t[e.name]={title:e.label,type:"object"},t},t=function(e,t){return{type:e.type,htmlClass:"col s4",key:e.name,choices:t.employeeItemsWithTerminatedEmployees}},a=function(e){var t={};return t[e.name]={},t};return{getWidgetData:function(i,o){return{properties:e(i),formFields:t(i,o),modelValues:a(i)}}}}angular.module("app.core").factory("bulkupdateSearchEmployeeName",e),e.$inject=[]}(),function(){"use strict";function e(e){function t(t){return t.options?e.getEnumAndTitleMapForSelect(t.options,{name:"value",value:"id"}):{titleMap:[],"enum":[]}}function a(e){for(var t=0;t<e.length;t++)e[t].name=e[t].name.replace(/`/g,"");return e}var i=function(e){var a={},i=t(e);return a[e.name]={title:e.label,type:"string","enum":i["enum"]},a},o=function(e){var i=t(e);return{type:"select",emptyOption:!1,htmlClass:"col s4",key:e.name,titleMap:a(i.titleMap),placeholder:e.placeholder}},n=function(e){var a=t(e),i={};return i[e.name]=a["enum"][0],i};return{getWidgetData:function(e){return{properties:i(e),formFields:o(e),modelValues:n(e)}}}}angular.module("app.core").factory("bulkupdateSearchSelect",e),e.$inject=["formHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(){s.show();var a=!1;null!=t.emp_number&&t.emp_number==o.empNumber&&(a=!0);var n=["contact_details","contact_attachment","contact_details_documents","contact_custom_fields"];m.getDatagroupPermissions(I.employeeNumber,n,a).then(function(t){return I.attachmentPermission=t.contact_attachment,I.customFieldsPermission=t.contact_custom_fields,t.contact_details.read||I.attachmentPermission.read||I.customFieldsPermission.read?(I.tempEmpNo=o.empNumber,u.getEmployee(!0).then(function(a){I.employee=a;var o={documentTemplateDetails:m.getDocumentTemplates("contact_details_documents"),customFieldConfiguration:m.getCustomFieldConfigurationByRoute(i.current.name,I.employee.locationId)};I.wizardMode&&(o.fieldConfiguration=m.getFieldConfigurationByRoute(i.current.name,"PimContactDetails",I.employee.locationId)),e.all(o).then(function(e){I.documentTemplateDetails=e.documentTemplateDetails,I.customFieldConfiguration=e.customFieldConfiguration,I.wizardMode&&(I.fieldConfiguration=e.fieldConfiguration,0===I.fieldConfiguration.length&&(t.contact_details={read:!1,create:!1,update:!1,"delete":!1})),I.permissions=t,k(),s.hide()})})):(s.hide(),void i.go("403"))})}function h(e){var t=!1;return I.form.forEach(function(a){var i=_.findIndex(a.items,function(e){return e.key&&("province"===e.key||"province"===e.key[0])});if(i!==-1){var o=a.items[i].type,n="US"===e?"select":"text";
o!==n&&(t=!0,a.items[i].type=n,"select"===n?(I.formSchema.properties.province["enum"]=I.provinces["enum"],a.items[i].titleMap=b(I.provinces.titleMap)):(delete I.formSchema.properties.province["enum"],delete a.items[i].titleMap))}}),t}function v(){I.formSchema={type:"object",title:"Contact Details",readonly:!1,properties:{street1:{title:"Address Street 1",type:"string",maxLength:70},street2:{title:"Address Street 2",type:"string",maxLength:70},city:{title:"City",type:"string",maxLength:70},province:{title:"State/Province",type:"string",maxLength:70},emp_zipcode:{title:"Zip/Postal Code",type:["string","null"],maxLength:10},country:{title:"Country",type:"string","enum":I.countries["enum"]},emp_hm_telephone:{title:"Home Telephone",type:["string","null"],maxLength:25},emp_mobile:{title:"Mobile",type:["string","null"],maxLength:25},emp_work_telephone:{title:"Work Telephone",type:["string","null"],maxLength:25},emp_work_email:{title:"Work Email",type:["string","null"],maxLength:50},emp_oth_email:{title:"Other Email",type:["string","null"],maxLength:50}},required:[]},I.permissions.contact_details.update||(I.formSchema.readonly=!0),I.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l4",key:"street1",validationMessage:{201:d.textLengthExceedValidation.message(I.formSchema.properties.street1.maxLength)}},{type:"text",htmlClass:"col s12 m12 l4",key:"street2",validationMessage:{201:d.textLengthExceedValidation.message(I.formSchema.properties.street2.maxLength)}},{type:"text",htmlClass:"col s12 m12 l4",key:"city",validationMessage:{201:d.textLengthExceedValidation.message(I.formSchema.properties.city.maxLength)}}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l4",key:"country",titleMap:b(I.countries.titleMap),onChange:function(e){h(e)&&(I.formModel.province="",a.$broadcast("schemaFormRedraw"))}},{type:"text",htmlClass:"col s12 m12 l4",key:"province",validationMessage:{201:d.textLengthExceedValidation.message(I.formSchema.properties.province.maxLength)}},{type:"text",htmlClass:"col s12 m12 l4",key:"emp_zipcode",validationMessage:{201:d.textLengthExceedValidation.message(I.formSchema.properties.emp_zipcode.maxLength)}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l4",key:"emp_hm_telephone",validationMessage:{phoneNumber:d.phoneNumber.message,201:d.textLengthExceedValidation.message(I.formSchema.properties.emp_hm_telephone.maxLength)},$validators:{phoneNumber:d.phoneNumber.validator}},{type:"text",htmlClass:"col s12 m12 l4",key:"emp_mobile",validationMessage:{phoneNumber:d.phoneNumber.message,201:d.textLengthExceedValidation.message(I.formSchema.properties.emp_mobile.maxLength)},$validators:{phoneNumber:d.phoneNumber.validator}},{type:"text",htmlClass:"col s12 m12 l4",key:"emp_work_telephone",validationMessage:{phoneNumber:d.phoneNumber.message,201:d.textLengthExceedValidation.message(I.formSchema.properties.emp_work_telephone.maxLength)},$validators:{phoneNumber:d.phoneNumber.validator}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l4",key:"emp_work_email",ngModelOptions:{debounce:1e3},validationMessage:{emailUniquenessValidation:n.getLocalizedCustom("Already exists"),workEmailFormatValidation:d.email.message,201:d.textLengthExceedValidation.message(I.formSchema.properties.emp_work_email.maxLength)},$validators:{workEmailFormatValidation:y},$asyncValidators:{"tv4-emailUniquenessValidation":C}},{type:"text",htmlClass:"col s12 m12 l4",key:"emp_oth_email",ngModelOptions:{debounce:750},validationMessage:{emailUniquenessValidation:n.getLocalizedCustom("Already exists"),otherEmailFormatValidation:d.email.message,201:d.textLengthExceedValidation.message(I.formSchema.properties.emp_oth_email.maxLength)},$validators:{otherEmailFormatValidation:y},$asyncValidators:{"tv4-emailUniquenessValidation":S}}]}],h(I.formModel.country)}function y(e){var t=d.email.validator(e);return w(t),t}function b(e){for(var t=0;t<e.length;t++)e[t].name=n.getLocalizedCustom(e[t].name);return e}function C(t){var a=e.defer();return""==t||null==t||t===I.existingWorkEmail?f(function(){w(!0),a.resolve()}):t==I.formModel.emp_oth_email?f(function(){w(!1),a.reject()}):l.call("checkEmployeeEmailAvailability","POST",{email:t}).then(function(e){e.data.isAvailable?(w(!0),a.resolve()):(w(!1),a.reject())}),a.promise}function w(e){e?(I.canSubmitForm=!0,t.$broadcast("pim.allowEmployeeDataSubmit",{allowSubmit:!0})):(I.canSubmitForm=!1,t.$broadcast("pim.allowEmployeeDataSubmit",{allowSubmit:!1}))}function S(t){var a=e.defer();return""==t||null==t||t===I.existingOtherEmail?f(function(){w(!0),a.resolve()}):t==I.formModel.emp_work_email?f(function(){w(!1),a.reject()}):l.call("checkEmployeeEmailAvailability","POST",{email:t}).then(function(e){e.data.isAvailable?(w(!0),a.resolve()):(w(!1),a.reject())}),a.promise}function D(t){if(t){var i=!1;return a.$broadcast("schemaFormValidate",t.$name),t.$valid&&(i=T()),i}return e.resolve(!0)}function T(){var e={};return angular.copy(I.formModel,e),m.updateEmployee(I.employee.empNumber,e).then(function(){if(s.hide(),!I.wizardMode)return n.showLocalizedToast("updateSuccess"),u.getEmployee(!0).then(function(e){I.employee=e,x(),F()})},function(){s.hide(),r.error("Failed to Save Record")})}function x(){I.employee.emp_work_email&&(I.existingWorkEmail=I.employee.emp_work_email),I.employee.emp_oth_email&&(I.existingOtherEmail=I.employee.emp_oth_email)}function F(){I.formModel.street1=I.employee.street1,I.formModel.street2=I.employee.street2,I.formModel.city=I.employee.city,I.formModel.country=I.employee.country?I.employee.country:"",I.formModel.province=I.employee.province,I.formModel.emp_zipcode=I.employee.emp_zipcode,I.formModel.emp_hm_telephone=I.employee.emp_hm_telephone,I.formModel.emp_mobile=I.employee.emp_mobile,I.formModel.emp_work_telephone=I.employee.emp_work_telephone,I.formModel.emp_work_email=I.employee.emp_work_email,I.formModel.emp_oth_email=I.employee.emp_oth_email}function k(){u.getEmployee().then(function(e){E().then(function(){m.updateFormFields(I.formSchema,I.form,I.fieldConfiguration)}),I.hasAccessForContactDetails=!0,I.employee=e,x(),F()})}function E(){var t={fields:"street1,street2,city,province,emp_zipcode,country,emp_hm_telephone,emp_mobile,emp_work_telephone,emp_work_email,emp_oth_email"},a=[l.call("countries","GET",[],t,void 0,!0),l.call("provinces","GET",[],t,void 0,!0)];return e.all(a).then(function(e){return I.countries=c.getEnumAndTitleMapForSelect(e[0].data.data,{value:"cou_code",name:"cou_name"}),I.provinces=c.getEnumAndTitleMapForSelect(e[1].data.data,{value:"province_code",name:"province_name"}),v()})}var I=this;I.title="Contact Details",I.customFieldScreen="contact",I.permissions="",I.employee="",I.submitContactDetails=T,I.onSubmit=D,I.contact={},I.formModel={},I.existingWorkEmail=!1,I.existingOtherEmail=!1,I.hasAccessForContactDetails=!1,I.employeeNumber=o.empNumber,I.wizardMode=i.current.data.wizardMode,I.customFieldService=p,I.employeeService=m,I.fieldConfiguration=[],I.countries=[],I.provinces=[],I.canSubmitForm=!0,I.saveButtonLabel="Save",I.wizardMode||t.$broadcast("setEmployeeDetailsForPimTabs"),a.$on("pim.save",function(e,t){var a=D(I.contactDetailsForm);a?e.savePromise=a:e.preventDefault()}),g()}angular.module("app.pim").controller("PimContactDetailsController",e),e.$inject=["$q","$rootScope","$scope","$state","$stateParams","localizedMessages","webservice","toast","loader","formHelper","formValidationHelper","employeeService","pimTabs","customFieldService","$timeout"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r){function s(){"undefined"!=typeof i&&(p.model.screen=i.screen),r.getSortedCustomFieldScreens().then(function(e){var t=r.getCustomFieldScreensWhichUserAllowedToAddSections(e);p.customFieldScreensForForm=r.getCustomFieldScreensForForm(t),c()})}function c(){p.schema={type:"object",title:"Custom Field Sections",properties:{screen:{title:"Screen",type:"string","enum":p.customFieldScreensForForm["enum"]}}},p.form=[{type:"row",items:[{type:"select",htmlClass:"col-12",titleMap:p.customFieldScreensForForm.titleMap,emptyOption:n.getLocalizedCustom("All"),key:"screen",onChange:function(e,t){p.filter=this,p.filter.modelValue=e}}]}]}function d(){o(p.model)}function m(){o(!1)}function u(){p.filters={name:null,id:null,country:""},d()}var p=this;p.search=d,p.cancel=m,p.reset=u,p.model={screen:""},s()}angular.module("app.pim").controller("CustomFieldSearchController",e),e.$inject=["$scope","logger","webservice","currentFilter","close","localizedMessages","formHelper","customFieldSectionHelper"]}(),function(){"use strict";function e(e,t,a,i,o){function n(){e.$broadcast("filter",[])}var l=this;l.filter=n,l.title="Custom Field Sections"}angular.module("app.pim").controller("CustomFieldSectionNavbarController",e),e.$inject=["$rootScope","$scope","$q","$translate","$state"]}(),function(){"use strict";function e(e,t){function a(e,a){return t.call("employees/"+e+"/CustomFieldValues","GET",[],a).then(function(e){return e.data})}function i(e,a){return t.call("employees/"+e+"/CustomFieldValues","PUT",a,{}).then(function(e){return e.data})}function o(e,a){return t.call("employees/"+e+"/CustomFieldFiles","DELETE",a,{}).then(function(e){return e.data})}function n(e,a){var i={tabId:e,emp_number:a};return t.call("employeeCustomTabCustomFields","GET",[],i).then(function(e){return e.data.data})}function l(e,a){var i={tabId:e,emp_number:a,withEmpty:!0};return t.call("employeeCustomTabCustomFieldValues","GET",[],i).then(function(e){return e.data.data})}function r(e,a){var i={tabId:e,empNumber:a};return t.call("employeePimTab","GET",[],i).then(function(e){return e.data.data})}function s(e,a,i){var o="employeeCustomTabCustomFieldValues/emp_number/"+a+"/tabId/"+e;return t.call(o,"PATCH",i,{}).then(function(e){return e})}function c(e,a,i){var o="employeeCustomTabCustomFieldValues/emp_number/"+a+"/tabId/"+e+"/seqNo";return t.call(o,"POST",i,{}).then(function(e){return e.data.data})}function d(e,a,i,o){var n="employeeCustomTabCustomFieldValues/emp_number/"+i+"/tabId/"+e+"/seqNo/"+a;return t.call(n,"PATCH",o,{}).then(function(e){return e.data.data})}function m(e,a,i){var o={data:{toDeleteIds:i,tabId:e,emp_number:a}};return t.call("employeeCustomTabCustomFieldValues","DELETE",o,{})}var u={getCustomFieldValues:a,saveCustomFieldValues:i,deleteCustomFieldAttachment:o,getEmployeeCustomizableTabDetails:n,getCustomTabCustomFieldValues:l,getTabDetails:r,saveEmployeeCustomTabCustomFieldValues:s,deleteEmployeeCustomTabCustomFieldValues:m,addEmployeeCustomTabCustomFieldValueRow:c,updateEmployeeCustomTabCustomFieldValueRow:d};return u}angular.module("app.pim").factory("customFieldService",e),e.$inject=["$q","webservice"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(e,t){G.customFieldSectionDetails=t,G.isStandardSection=G.customFieldSectionDetails.CustomFieldScreen.embed_in_standard_section,G.permissions=e,G.customFieldSectionDetails.CustomField&&G.customFieldSectionDetails.CustomField.length?C():G.customFieldSectionDetails.CustomField=[],_(),G.customFieldsListHelper=new r.list(G.listData.customFields,G.customFieldSectionDetails.CustomField),G.selectAll=G.customFieldsListHelper.selectAllItems,G.deselectAll=G.customFieldsListHelper.deselectAllItems,L(F),$(".material-tooltip").hide()}function h(){n.show();var t=[];t.push(i.call("permissions/dataGroup/pim_configure_custom_fields","GET",[],{}));var a={include:"CustomField",filter:{customFieldSectionId:c.customFieldSectionId}};t.push(i.call("customFieldSections","GET",[],a)),t.push(i.call("customFieldSections","GET",[],{})),e.all(t).then(function(e){var t=e[0].data.data;if(e[1].data.data.length){var a=e[1].data.data[0];if(v(a.display_name),G.existingCustomFieldSections=E(e[2].data.data,"display_name",!0),a.id){var o=G.existingCustomFieldSections.indexOf(a.display_name.toLowerCase());G.existingCustomFieldSections.splice(o,1)}g(t,a)}else{var l={filter:{customFieldSectionId:c.customFieldSectionId}};i.call("customFieldSections","GET",[],l).then(function(e){a=e.data.data[0],v(a.display_name),g(t,a)})}n.hide()})}function v(e){p.setForcedTitle(["Employee Management","Configurations","Custom Field Sections",e],{2:"pim.custom_field_sections"}),o.$broadcast("SingleMenuItemTopRibbonControllerMenuChanged",{menuItem:"Custom Fields"}),o.$broadcast("addTopMenuBackButton",{uiSref:"pim.custom_field_sections",tooltip:"Custom Field Sections"})}function y(e){for(var t=0;G.customFieldSectionDetails.CustomField[e].locations.length>t;t++)G.customFieldSectionDetails.CustomField[e].locationList+=G.customFieldSectionDetails.CustomField[e].locations[t].name,G.customFieldSectionDetails.CustomField[e].locations.length-1!=t&&(G.customFieldSectionDetails.CustomField[e].locationList+=" , ")}function b(e){var t=m("filter")(w(),{value:G.customFieldSectionDetails.CustomField[e].type},!0)[0];G.customFieldSectionDetails.CustomField[e].type_name=a.getLocalizedCustom(t.name)}function C(){for(var e=0;G.customFieldSectionDetails.CustomField.length>e;e++)b(e),G.customFieldSectionDetails.CustomField[e].locationList="",y(e)}function w(){return[{value:"0",name:a.getLocalizedCustom("Text")},{value:"1",name:a.getLocalizedCustom("Drop Down")},{value:"2",name:a.getLocalizedCustom("Number")},{value:"3",name:a.getLocalizedCustom("Email")},{value:"4",name:a.getLocalizedCustom("Text Area")},{value:"5",name:a.getLocalizedCustom("Date")},{value:"6",name:a.getLocalizedCustom("Checkboxes")},{value:"7",name:a.getLocalizedCustom("Radio Buttons")},{value:"8",name:a.getLocalizedCustom("Attachment")},{value:"9",name:a.getLocalizedCustom("Currency")},{value:"10",name:a.getLocalizedCustom("Country")},{value:"11",name:a.getLocalizedCustom("Advance Type")}]}function _(){G.panalInfo={customFieldsInfo:{title:"Custom Fields",icon:"images/pim/icon_work.svg"}},S()}function S(){var e=[{name:"name",lable:"Custom Field Name",getter:"name",formatter:function(e,t){if(t.CustomFieldDisplayCondition&&t.CustomFieldDisplayCondition.parentCustomFieldId){var a=t.CustomFieldDisplayCondition.parentCustomFieldId,i=m("filter")(G.customFieldSectionDetails.CustomField,{id:a},!0)[0],o=i.name,n=o+" - "+e;return n}return e}},{name:"type",lable:"Field Type",getter:"type_name"},{name:"mandatory",lable:"Required",getter:"mandatory",filters:[{name:"translate"}],formatter:function(e,t){return t.CustomFieldDisplayCondition?t.CustomFieldDisplayCondition.required?"Yes":"No":t.mandatory?"Yes":"No"}},{name:"global",lable:"Availability",getter:"global",formatter:function(e,t){return"1"==t.global?a.getLocalizedCustom("All Employees"):"0"==t.global?t.locationList:void 0}}],t=[{colspan:3}],i=[{"class":"edit_item",clickAction:"editCustomField",tooltip:"Edit"},{icon:"ohrm_arrow_upward",clickAction:"orderUp",tooltip:"Up",hideIf:function(e){var t=0;return G.customFieldSectionDetails.CustomField.some(function(a,i){return a.id===e.id&&(t=i,!0)}),0!=t}},{hideIf:function(e){var t=0;return G.customFieldSectionDetails.CustomField.some(function(a,i){return a.id===e.id&&(t=i,!0)}),0==t}},{icon:"ohrm_arrow_downward",clickAction:"orderDown",tooltip:"Down",hideIf:function(e){var t=0;return G.customFieldSectionDetails.CustomField.some(function(a,i){return a.id===e.id&&(t=i,!0)}),t!=G.customFieldSectionDetails.CustomField.length-1}},{hideIf:function(e){var t=0;return G.customFieldSectionDetails.CustomField.some(function(a,i){return a.id===e.id&&(t=i,!0)}),t==G.customFieldSectionDetails.CustomField.length-1}}],o=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:G.permissions["delete"]}];G.listData={customFields:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:t,extraTD:i,showColumnsAnyway:!0,permission:G.permissions,listActions:o,isRowSelectable:function(e){return e.deletable}}}}function D(e){var t=e,a=null;if(!(!G.customFieldSectionDetails.CustomField.length-1>0)&&(G.customFieldSectionDetails.CustomField.some(function(t,i){return t.id===e.id&&(a=i,!0)}),a&&G.customFieldSectionDetails.CustomField[a-1])){var i=G.customFieldSectionDetails.CustomField[a-1];x(t.id,i.id)}}function T(e){var t=e,a=null;if(!(!G.customFieldSectionDetails.CustomField.length-1>0)&&(G.customFieldSectionDetails.CustomField.some(function(t,i){return t.id===e.id&&(a=i,!0)}),null!=a&&G.customFieldSectionDetails.CustomField[a+1])){var i=G.customFieldSectionDetails.CustomField[a+1];x(t.id,i.id)}}function x(e,t){if(e&&t){var a={id:e,swapId:t,reorder:!0};i.call("customFields","PATCH",[],a).then(function(e){var t=e.data.data.result;if(t){var a={include:"CustomField",filter:{customFieldSectionId:c.customFieldSectionId}};i.call("customFieldSections","GET",[],a).then(function(e){G.customFieldSectionDetails=e.data.data[0],C(),$(".material-tooltip").hide()})}})}}function F(e){G.schema={type:"object",title:"Personal Details",properties:{display_name:{title:"Heading",type:"string",maxLength:255,readOnly:G.isStandardSection},custom_field_screen_id:{title:"Screen",type:"string","enum":e.customFieldScreens["enum"],readOnly:!0}},required:["display_name","custom_field_screen_id"]},G.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l6",key:"display_name",validationMessage:{201:f.textLengthExceedValidation.message(G.schema.properties.display_name.maxLength),302:a.getLocalizedCustom("Required"),duplicateSections:a.getLocalizedCustom("Already exists")},$validators:{duplicateSections:k}},{type:"select",htmlClass:"col s12 m12 l6",key:"custom_field_screen_id",titleMap:e.customFieldScreens.titleMap}]},u.getRequiredMessage(),{type:"section",htmlClass:"row form-buttons",items:[{htmlClass:"right",type:"submit",title:"Save",condition:G.isStandardSection},{htmlClass:"right ",type:"button",title:"Cancel",style:"secondary-btn",onClick:function(){d.go("pim.custom_field_sections")}}]}],G.model={display_name:G.isStandardSection?a.getLocalizedCustom(G.customFieldSectionDetails.display_name):G.customFieldSectionDetails.display_name,custom_field_screen_id:G.customFieldSectionDetails.custom_field_screen_id}}function k(e){return""==e||(G.existingCustomFieldSections?!(G.existingCustomFieldSections.indexOf(e.toLowerCase())>-1):void 0)}function E(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}function I(e){s.$broadcast("schemaFormValidate"),e.$valid&&A()}function A(){var e={display_name:G.model.display_name,custom_field_screen_id:G.model.custom_field_screen_id},t="PATCH",o="customFieldSections/"+G.customFieldSectionDetails.id,r=a.getLocalizedCustom("Successfully Updated");i.call(o,t,e,{}).then(function(e){n.hide(),l.success(r)},function(e){n.hide(),l.error(e.data.msg)})}function M(e){var a={close:function(){}};t.showModal("app/pim/customFields/custom_field_modal.html","PimEditCustomFieldController","modal",{customField:e,dataList:G.customFieldSectionDetails.CustomField,customFieldSectionId:c.customFieldSectionId,modalFunctions:a,listRefresher:h,isStandardSection:G.isStandardSection})}function L(e){i.call("customFieldScreens","GET",[],{}).then(function(e){var t=e.data.data;o.customFieldScreens=t,t=P(G.customFieldSectionDetails,t),F({customFieldScreens:N(t)})})}function P(e,t){for(var a=[],i=0;i<t.length;i++)t[i].id==e.custom_field_screen_id&&a.push(t[i]);return a}function N(e){for(var t=[],i=[],o=0;o<e.length;o++)t.push({value:e[o].id,name:a.getLocalizedCustom(e[o].DataGroup.DataGroup.MenuItem.menuTitle)}),i.push(e[o].id);return{titleMap:t,"enum":i}}function O(){var e={name:"",type:"",mandatory:"",global:"",locations:"",extra_data:"",advance_type_map:"",CustomFieldDisplayCondition:null},a={close:function(){}};t.showModal("app/pim/customFields/custom_field_modal.html","PimEditCustomFieldController","modal",{customField:e,dataList:G.customFieldSectionDetails.CustomField,customFieldSectionId:c.customFieldSectionId,modalFunctions:a,listRefresher:h,isStandardSection:G.isStandardSection})}function R(){G.listData.customFields.selected.length>0&&(n.show(),i.call("customFields","DELETE",{data:G.listData.customFields.selected},{}).then(function(e){n.hide();var t=e.data.data,i="deleteSuccess";a.showLocalizedToast(i),G.total-=t,z(t),G.deselectAll()},function(e){n.hide(),a.errorToast(a.getLocalizedCustom(e.data.msg))}))}function z(e){for(var t=G.customFieldSectionDetails.CustomField.length-1;t>=0;t--){var a=e.indexOf(G.customFieldSectionDetails.CustomField[t].id);a>-1&&(e.splice(a,1),G.customFieldSectionDetails.CustomField.splice(t,1))}}function j(e){var t=e.obj;if(t.selected)G.listData.customFields.selected.push(t.id);else{var a=G.listData.customFields.selected.indexOf(t.id);a>-1&&G.listData.customFields.selected.splice(a,1)}}function V(){G.listData.customFields.selected.length>0&&t.showDeleteConfirmationModal().then(function(e){e===!0&&R()})}var G=this;G.title="Custom Fields",G.saveCustomFieldsSection=A,G.onSubmit=I,G.editCustomField=M,G.addCustomFieldToSection=O,G.changeSelection=j,G.deleteSelection=V,G.orderUp=D,G.orderDown=T,h()}angular.module("app.pim").controller("PimCustomFieldSectionDetailsController",e),e.$inject=["$q","modalHelperService","localizedMessages","webservice","$rootScope","loader","toast","listHelper","$scope","$stateParams","$state","$filter","formHelper","titleService","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p){function f(){n.show();var t=[];t.push(i.call("customFieldSections","GET",[],{include:"CustomField"})),t.push(i.call("permissions/dataGroup/pim_configure_custom_fields","GET",[],{})),e.all(t).then(function(e){I.permissions=e[1].data.data,I.permissions.read?(I.undeletableIds=e[0].data.meta.undeletableIds,v(),I.customFieldSections=e[0].data.data,I.customFieldSectionsFiltered=I.customFieldSections,I.customFieldSectionsFiltered=d.getSortedObjectList(I.customFieldSectionsFiltered,"display_name","ASC"),I.customFieldSectionsListHelper=new r.list(I.listData.customFieldSections,I.customFieldSections,I.undeletableIds),I.selectAll=I.customFieldSectionsListHelper.selectAllItems,I.deselectAll=I.customFieldSectionsListHelper.deselectAllItems,g(),n.hide(),0==I.customFieldSections.length&&a.infoToast("No Records Found")):(n.hide(),s.go("403"))})}function g(){p.getSortedCustomFieldScreens().then(function(e){var t=p.getCustomFieldScreensWhichUserAllowedToAddSections(e);I.allScreenList=e,o.customFieldScreens=t,I.customFieldScreensForForm=p.getCustomFieldScreensForForm(o.customFieldScreens),h()})}function h(){I.schema={type:"object",title:"Custom Field Sections",properties:{screen:{title:"Screen",type:"string","enum":I.customFieldScreensForForm["enum"]}}},I.form=[{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",titleMap:I.customFieldScreensForForm.titleMap,key:"screen",onChange:function(e,t){I.filter=this,I.filter.modelValue=e,T(I.filter.modelValue)}}]}],d.addRequiredMessage(I.form),I.model={screen:""}}function v(){y()}function y(){var e=[{name:"name",lable:"Name",getter:"display_name",clickAction:"editCustomFieldSection",formatter:function(e){return a.getLocalizedCustom(e)}},{name:"screen",lable:"Screen",getter:["CustomFieldScreen","DataGroup","DataGroup","MenuItem","menuTitle"],clickAction:"editCustomFieldSection",formatter:function(e){return a.getLocalizedCustom(e)}}],t=[{colspan:1}],i=[{icon:"settings",clickAction:"editCustomFieldSection",tooltip:"Configure"}],o=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:I.permissions["delete"]}];I.listData={customFieldSections:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:t,extraTD:i,showColumnsAnyway:!0,permission:I.permissions,listActions:o,columnWidths:["10%","40%","45%","5%"],unselectableIds:I.undeletableIds,isRowSelectable:function(e){if(I.undeletableIds.indexOf(e.id)>-1)return!1;if(e.CustomField&&e.CustomField.length>0)for(var t=e.CustomField,a=0;a<t.length;a++)if(!t[a].deletable)return!1;return!0}}}}function b(e){var t={include:"CustomField",filter:{customFieldSectionId:e.id}};i.call("customFieldSections","GET",[],t).then(function(t){o.customFieldSection=t.data.data[0],o.customFieldPermissions=I.permissions,o.$broadcast("pim.editCustomFieldSection",{}),s.go("pim.custom_field_sections_details",{customFieldSectionId:e.id})})}function C(){if(I.listData.customFieldSections.selected.length>0){var e=I.listData.customFieldSections.selected.length;n.show(),i.call("customFieldSections","DELETE",{data:I.listData.customFieldSections.selected},{}).then(function(t){n.hide();var i="deleteSuccess";a.showLocalizedToast(i),I.total-=e,w(I.listData.customFieldSections.selected)},function(e){n.hide(),a.errorToast(a.getLocalizedCustom(e.data.msg))})}}function w(e){for(var t=I.customFieldSections.length-1;t>=0;t--){var a=e.indexOf(I.customFieldSections[t].id);a>-1&&(e.splice(a,1),I.customFieldSections.splice(t,1))}T(I.model.screen)}function _(e){var t=e.obj;if(t.selected)I.listData.customFieldSections.selected.push(t.id);else{var a=I.listData.customFieldSections.selected.indexOf(t.id);a>-1&&I.listData.customFieldSections.selected.splice(a,1)}}function S(){I.listData.customFieldSections.selected.length>0&&t.showDeleteConfirmationModal().then(function(e){e===!0&&C()})}function D(){var e={display_name:"",custom_field_screen_id:""};t.showModal("app/pim/customFields/custom_field_section_modal.html","PimEditCustomFieldSectionController","modal",{customFieldSection:e,dataList:I.customFieldSections,listRefresher:function(){T(I.model.screen)}})}function T(e){e?I.customFieldSectionsFiltered=c("filter")(I.customFieldSections,function(e,t,a){return e.CustomFieldScreen.id==I.model.screen},!0):I.customFieldSectionsFiltered=I.customFieldSections}function x(){close(!0)}function F(){close(!1)}function k(){t.showModal("app/pim/customFields/custom-field-section-search.html","CustomFieldSearchController","modal",{currentFilter:I.oldFilter}).then(function(e){e!==!1&&(I.oldFilter=e,E(e))})}function E(e){if(e.screen){var t=p.filterStandardCustomFieldScreenIdsForScreenOfGivenCustomFieldScreenId(e.screen,I.allScreenList);t.push(e.screen),I.customFieldSectionsFiltered=c("filter")(I.customFieldSections,function(e,a,i){return t.indexOf(e.CustomFieldScreen.id)>-1},!0)}else I.customFieldSectionsFiltered=I.customFieldSections}var I=this;I.title="Custom Fields",I.state=s,I.customFieldSections="",I.customFieldSectionsFiltered={},I.editCustomFieldSection=b,I.deleteCustomFieldSections=C,I.deleteSelection=S,I.addCustomFieldSection=D,I.confirm=x,I.cancel=F,I.changeSelection=_,I.allScreenList,f(),m.$on("filter",k)}angular.module("app.pim").controller("PimCustomFieldSectionsController",e),e.$inject=["$q","modalHelperService","localizedMessages","webservice","$rootScope","loader","toast","listHelper","$state","$filter","formHelper","$scope","titleService","customFieldSectionHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p){function f(){e.call("customFieldSections","GET",[]).then(function(e){S.existingCustomFieldSections=_(e.data.data,"display_name",!0),b(g)})}function g(e){S.schema={type:"object",title:"Personal Details",properties:{display_name:{title:"Heading",type:"string",maxLength:255},custom_field_screen_id:{title:"Screen",type:"string","enum":e.customFieldScreens["enum"]}},required:["display_name","custom_field_screen_id"]},S.form=[{type:"row",items:[{type:"text",htmlClass:"col-12",key:"display_name",validationMessage:{201:p.textLengthExceedValidation.message(S.schema.properties.display_name.maxLength),302:t.getLocalizedCustom("Required"),duplicateSections:t.getLocalizedCustom("Already exists")},$validators:{duplicateSections:h}}]},{type:"row",items:[{type:"select",htmlClass:"col-12",key:"custom_field_screen_id",titleMap:e.customFieldScreens.titleMap,validationMessage:{302:t.getLocalizedCustom("Required")}}]}],S.model={display_name:S.customFieldSection.display_name,custom_field_screen_id:S.customFieldSection.custom_field_screen_id}}function h(e){return""==e||(S.existingCustomFieldSections?!(S.existingCustomFieldSections.indexOf(e.toLowerCase())>-1):void 0)}function v(a){if(s.$broadcast("schemaFormValidate"),a.$valid){n.show();var i="POST",r="customFieldSections";e.call(r,i,S.model,{}).then(function(e){S.savedCustomFieldSection=e.data.data,n.hide(),u.go("pim.custom_field_sections_details",{customFieldSectionId:S.savedCustomFieldSection.id},{reload:!0}).then(function(e){l.success(t.getLocalizedCustom("Successfully Saved"))})},function(e){n.hide(),l.error(e.data.msg)}),o(!0)}}function y(e,t){for(var a=0;a<e.length;a++)for(var i=0;i<t.length;i++)if(t[i].id==e[a].custom_field_screen_id&&"viewEmployeePimTab"==t[i].Screen.action_url){t.splice(i,1);break}return t}function b(t){e.call("customFieldSections","GET",[],{}).then(function(t){var a=t.data.data;if("customFieldScreens"in r){var i=y(a,r.customFieldScreens);g({customFieldScreens:C(i)})}else e.call("customFieldScreens","GET",[],{}).then(function(e){var t=e.data.data;r.customFieldScreens=t,t=y(a,r.customFieldScreens),g({customFieldScreens:C(t)})})})}function C(e){for(var a=[],i=[],o=0;o<e.length;o++)a.push({value:e[o].id,name:t.getLocalizedCustom(e[o].DataGroup.DataGroup.MenuItem.menuTitle)}),i.push(e[o].id);return a=m.getSortedObjectList(a,"name","ASC"),{titleMap:a,"enum":i}}function w(){o(!1)}function _(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}g.$inject=["formData"];var S=this,D={};angular.copy(a,D),S.customFieldSection=D,S.save=v,S.cancel=w,f()}angular.module("app.pim").controller("PimEditCustomFieldSectionController",e),e.$inject=["webservice","localizedMessages","customFieldSection","dataList","close","loader","toast","$rootScope","$scope","$filter","listRefresher","formHelper","$state","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b){function C(){var t=[];t.push(e.call("locations","GET",[]).then(function(e){H.locations=u.getItemsForMultyselectAutocomplete(e.data.data,{})})),t.push(e.call("advanceCustomTypeMap","GET",[]).then(function(e){H.advanceCustomTypeMaps=u.getEnumAndTitleMapForSelect(e.data.data,{name:"display_name",value:"id"})})),m.all(t).then(function(e){H.customFileldNameAndIdsMap=[];for(var t=[],a=[],o=0;i.length>o;o++){H.customFileldNameAndIdsMap.push({id:i[o].id,name:i[o].name.toLowerCase()});var n=i[o].type,l=i[o].CustomFieldDisplayCondition;G(n,l)&&(t.push({value:i[o].id,name:i[o].name}),a.push(i[o].id))}H.parentFieldsForForm={titleMap:t,"enum":a},z(k)})}function w(e){if(H.customField.locations instanceof Array)if(0==H.customField.locations.length)e={};else for(var t=0;H.customField.locations.length>t;t++)e[H.customField.locations[t].id]=H.customField.locations[t].name;return e}function S(){""!==H.customField.global&&(1==H.customField.global||"1"==H.customField.global?H.customField.global="1":H.customField.global="0")}function D(t,a){B(!0),e.call("customFieldValues","GET",[],{id:t}).then(function(e){var t=e.data.data,i=[],o=[];for(var n in t)i.push({value:n,name:t[n].replace(/&nbsp;/g,"")}),o.push(n);var l={titleMap:i,"enum":o};angular.copy(l["enum"],H.parentFieldValuesForForm["enum"]),angular.copy(l.titleMap,H.parentFieldValuesForForm.titleMap),(!a||a&&o.indexOf(H.model.parent_field_value)<0)&&(H.model.parent_field_value=""),B(!1),F()},function(e){n.hide(),l.success(e)})}function T(e,t){e?D(e,t):(angular.copy([],H.parentFieldValuesForForm["enum"]),angular.copy([],H.parentFieldValuesForForm.titleMap),t||(H.model.parent_field_value=""),s.$broadcast("schemaFormRedraw"),F())}function x(e){var t=_.where(H.customFileldNameAndIdsMap,{name:e.toLowerCase()});if(t.length>0){if(H.customField.id){var a=_.find(t,function(e){return e.id!==H.customField.id});return void 0===a||0===a.length}return!1}return!0}function F(){y(function(){x(H.model.name)?s.$broadcast("schemaForm.error.name","alreadyExists",!0):s.$broadcast("schemaForm.error.name","alreadyExists",!1)},0)}function k(e){var t=H.customField.id;H.schema={type:"object",title:"Personal Details",properties:{name:{title:"Field Name",type:"string",maxLength:250},type:{title:"Type",type:"string","enum":R()},extra_data:{
title:"Select Options",type:"string",maxLength:2e3},advance_type_map:{title:"Advance Type",type:"string","enum":H.advanceCustomTypeMaps["enum"]},mandatory:{title:"Required",type:"boolean"},global:{title:"Available",type:"string","enum":["1","0"],readOnly:H.isStandardSection},locations:{title:h.instant("Locations"),type:"object"},conditional_field:{title:"Conditional Field",type:"boolean",readOnly:H.isStandardSection},parent_field:{title:"Parent Field",type:"string","enum":H.parentFieldsForForm["enum"]},parent_field_value:{title:"Parent Field Value",type:"string","enum":H.parentFieldValuesForForm["enum"]}},required:["name","type","global","locations","extra_data","advance_type_map","parent_field","parent_field_value"]},t&&(H.schema.properties.type.readonly=!0,H.schema.properties.global.readonly=!0,H.schema.properties.advance_type_map.readonly=!0),H.form=q(),S();var a={};a=w(a);var i=!1;t&&(i=!0),H.customField.CustomFieldDisplayCondition&&H.customField.CustomFieldDisplayCondition.parentCustomFieldValue&&T(H.customField.CustomFieldDisplayCondition.parentCustomFieldId,i),H.model={name:H.customField.name,type:H.customField.type,mandatory:H.customField.CustomFieldDisplayCondition?H.customField.CustomFieldDisplayCondition.required:H.customField.mandatory,global:H.isStandardSection?"1":H.customField.global,locations:a,extra_data:H.customField.extra_data,advance_type_map:H.customField.advance_type_map,conditional_field:!!H.customField.CustomFieldDisplayCondition,parent_field:H.customField.CustomFieldDisplayCondition&&H.customField.CustomFieldDisplayCondition.parentCustomFieldId?H.customField.CustomFieldDisplayCondition.parentCustomFieldId:"",parent_field_value:H.customField.CustomFieldDisplayCondition&&H.customField.CustomFieldDisplayCondition.parentCustomFieldValue?H.customField.CustomFieldDisplayCondition.parentCustomFieldValue:""}}function E(e){e.mandatory?e.mandatory=1:e.mandatory||(e.mandatory=0)}function I(e){1==e.global||"1"==e.global?e.global="1":e.global="0"}function A(e){for(var t in e.data.data.locations)e.data.data.locationList&&(e.data.data.locationList+=" , "),e.data.data.locationList+=e.data.data.locations[t].name}function M(e){"0"==e.data.data.mandatory?e.data.data.mandatory=!1:e.data.data.mandatory=!0}function L(e){1==e.data.data.global||"1"==e.data.data.global?e.data.data.global="1":e.data.data.global="0"}function P(e){var t=c("filter")(O(),{value:e.data.data.type},!0)[0];e.data.data.type_name=t.name}function $(a){if(s.$broadcast("schemaFormValidate"),0==Object.keys(H.model.locations).length&&s.$broadcast("schemaForm.error.locations","tv4-302",!1),a.$valid){n.show();var i=H.customField.id,r=[];for(var c in H.model.locations)r.push(c);var u={name:H.model.name,type:H.model.type,mandatory:H.model.mandatory,global:H.model.global,locations:r,extra_data:N(H.model.extra_data),advance_type_map:H.model.advance_type_map,section:d,conditional_field:H.model.conditional_field,parent_field:H.model.parent_field,parent_field_value:H.model.parent_field_value};E(u),I(u);var p="POST",f="customFields",h="saveSuccess";return i?(p="PATCH",f+="/"+i,h="updateSuccess",u.id=i):(p="POST",u.custom_field_section_id=d,h="saveSuccess"),e.call(f,p,u,{}).then(function(e){n.hide(),P(e),e.data.data.locationList="",A(e),M(e),L(e),g(),t.showLocalizedToast(h),o(!1)},function(e){n.hide(),l.error(e.data.msg),o(!1)})}return m.when(!0)}function N(e){var t=[];return e&&(t=e.split(",").map(function(e){return e&&(e=e.trim()),e}),e=t.join(",")),e}function O(){var e=[{value:"0",name:t.getLocalizedCustom("Text")},{value:"1",name:t.getLocalizedCustom("Drop Down")},{value:"2",name:t.getLocalizedCustom("Number")},{value:"3",name:t.getLocalizedCustom("Email")},{value:"4",name:t.getLocalizedCustom("Text Area")},{value:"5",name:t.getLocalizedCustom("Date")},{value:"6",name:t.getLocalizedCustom("Checkboxes")},{value:"7",name:t.getLocalizedCustom("Radio Buttons")},{value:"8",name:t.getLocalizedCustom("Attachment")},{value:"9",name:t.getLocalizedCustom("Currency")},{value:"10",name:t.getLocalizedCustom("Country")}];return H.isStandardSection||e.push({value:"11",name:t.getLocalizedCustom("Advance Type")}),e}function R(){var e=["0","1","2","3","4","5","6","7","8","9","10"];return H.isStandardSection||e.push("11"),e}function z(t){"customFieldScreens"in r?k({customFieldScreens:j(r.customFieldScreens)}):e.call("customFieldScreens","GET",[],{}).then(function(e){var t=e.data.data;r.customFieldScreens=t,k({customFieldScreens:j(r.customFieldScreens)})})}function j(e){for(var t=[],a=[],i=0;i<e.length;i++)t.push({value:e[i].id,name:e[i].Screen.name}),a.push(e[i].id);return{titleMap:t,"enum":a}}function V(){o(!1)}function G(e,t){return!(t||e!=p.getFieldTypeIdByFieldTypeName("select")&&e!=p.getFieldTypeIdByFieldTypeName("checkbox")&&e!=p.getFieldTypeIdByFieldTypeName("radio")&&e!=p.getFieldTypeIdByFieldTypeName("currency")&&e!=p.getFieldTypeIdByFieldTypeName("country")&&e!=p.getFieldTypeIdByFieldTypeName("advance"))}function B(e){H.parentFieldDisabled=e,H.form=q(),s.$broadcast("schemaFormRedraw")}function q(){return[{type:"row",items:[{type:"text",htmlClass:"col-6",key:"name",validationMessage:{alreadyExists:t.getLocalizedCustom("Already exists"),302:t.getLocalizedCustom("Required"),201:b.textLengthExceedValidation.message(H.schema.properties.name.maxLength)},onChange:function(){F()},ngModelOptions:{allowInvalid:!0}},{type:"select",htmlClass:"col-6",key:"type",titleMap:O(),validationMessage:{302:t.getLocalizedCustom("Required")},onChange:function(){s.$broadcast("schemaFormRedraw"),F()}}]},{type:"row",condition:"model.type == '1' || model.type == '6' || model.type == '7'",items:[{type:"text",htmlClass:"col-6",key:"extra_data",validationMessage:{302:t.getLocalizedCustom("Required"),201:b.textLengthExceedValidation.message(H.schema.properties.extra_data.maxLength)}}]},{type:"row",condition:"model.type == '11'",items:[{type:"select",htmlClass:"col-6",key:"advance_type_map",titleMap:H.advanceCustomTypeMaps.titleMap,validationMessage:{302:t.getLocalizedCustom("Required")}}]},{type:"row",items:[{type:"checkbox",htmlClass:"col-6",key:"mandatory"}]},{type:"row",items:[{type:"subheading",htmlClass:"col-12"}]},{type:"row",items:[{type:"select",htmlClass:"col-6",key:"global",titleMap:[{value:"1",name:t.getLocalizedCustom("All Employees")},{value:"0",name:t.getLocalizedCustom("Employees in the following locations")}],validationMessage:{302:t.getLocalizedCustom("Required")}},{type:"autocomplete-multiselect",htmlClass:"col-6",key:"locations",choices:H.locations,condition:"model.global == '0'",validationMessage:{locationsRequired:t.getLocalizedCustom("Locations required"),302:t.getLocalizedCustom("Required")}}]},{type:"row",items:[{type:"subheading",htmlClass:"col-12"}]},{type:"row",items:[{type:"switch",key:"conditional_field",htmlClass:"col-6",onChange:function(){s.$broadcast("schemaFormRedraw"),F()}}]},{type:"row",items:[{type:"select",htmlClass:"col-6",key:"parent_field",condition:"model.conditional_field",titleMap:H.parentFieldsForForm.titleMap,onChange:function(e,t){T(e)},ngModelOptions:{allowInvalid:!0},validationMessage:{302:t.getLocalizedCustom("Required")}},{type:"select",htmlClass:"col-6",key:"parent_field_value",condition:"model.conditional_field",readonly:H.parentFieldDisabled,showLoader:H.parentFieldDisabled,titleMap:H.parentFieldValuesForForm.titleMap,ngModelOptions:{allowInvalid:!0},validationMessage:{302:t.getLocalizedCustom("Required")}}]}]}w.$inject=["locations"];var H=this,U={};angular.copy(a,U),f.close=o,H.isStandardSection=v,H.customField=U,H.parentFieldValuesForForm={},H.parentFieldValuesForForm["enum"]=[],H.parentFieldValuesForForm.titleMap=[],H.customFieldSectionDetails=r.customFieldSection,H.save=$,H.cancel=V,H.parentFieldDisabled=!1,H.title="Add Custom Field",H.customField.id&&(H.title="Edit Custom Field"),C()}angular.module("app.pim").controller("PimEditCustomFieldController",e),e.$inject=["webservice","localizedMessages","customField","dataList","close","loader","toast","$rootScope","$scope","$filter","customFieldSectionId","$q","formHelper","customFieldHelper","modalFunctions","listRefresher","$translate","isStandardSection","$timeout","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p){function f(){var e=[];e.push(o.call("customizablePimTabs","GET",[],{})),e.push(e.push(d.getPermission("pim_configure_tabs"))),a.all(e).then(function(e){return angular.extend(k.permissions,e[1]),k.permissions.read?(h(),k.customTabs=e[0].data.data,k.defaultPimLeftMenuTabs=e[0].data.meta,k.customTabs=u.getSortedObjectList(k.customTabs,"menuTitle","ASC"),k.defaultPimLeftMenuTabs=u.getSortedObjectList(k.defaultPimLeftMenuTabs,"menuTitle","ASC"),g(),void(0==k.customTabs.length&&m.infoToast("No Records Found"))):void c.go("403")})}function g(){k.customTabsListHelper=new s.list(k.listData.customTabs,k.customTabs),k.selectAll=k.customTabsListHelper.selectAllItems,k.deselectAll=k.customTabsListHelper.deselectAllItems}function h(){k.panalInfo={customizablePimTabsInfo:{title:"Custom Tabs",icon:"images/pim/icon_work.svg"}},y()}function v(e,t,a){k.customTabs=u.getSortedObjectList(k.customTabs,e,t)}function y(){var e=[{name:"menuTitle",lable:"Tab Name",sortable:!0,sortAction:"sortTabs",getter:"menuTitle"}],t=[{colspan:1}],a=[{"class":"edit_item",clickAction:"editCustomizablePimTab",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:k.permissions["delete"]}];k.listData={customTabs:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:k.permissions,listActions:i,isRowSelectable:function(e){return e.deletable}}}}function b(e){var t={close:function(){}};i.showModal("app/pim/customizablePimTabs/customizable_pim_tabs_modal.html","EditCustomizablePimTabsController","modal",{customizablePimTab:e,dataList:k.customTabs,title:m.getLocalizedCustom("Edit Custom Tab"),modalFunctions:t,defaultPimLeftMenuTabs:k.defaultPimLeftMenuTabs})}function C(e){var t=e.obj;if(t.selected)k.listData.customTabs.selected.push(t.id);else{var a=k.listData.customTabs.selected.indexOf(t.id);a>-1&&k.listData.customTabs.selected.splice(a,1)}}function w(){var e={display_name:"",custom_field_screen_id:""},t={close:function(){}};i.showModal("app/pim/customizablePimTabs/customizable_pim_tabs_modal.html","EditCustomizablePimTabsController","modal",{customizablePimTab:e,dataList:k.customTabs,title:m.getLocalizedCustom("Add Custom Tab"),modalFunctions:t,defaultPimLeftMenuTabs:k.defaultPimLeftMenuTabs})}function _(){k.listData.customTabs.selected.length>0&&i.showDeleteConfirmationModal().then(function(e){e===!0&&x()})}function S(){close(!0)}function D(){close(!1)}function T(){k.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function x(){if(k.listData.customTabs.selected.length>0){var e=k.listData.customTabs.selected.length;l.show(),o.call("customizablePimTabs","DELETE",{data:k.listData.customTabs.selected},{}).then(function(t){l.hide(),m.showLocalizedToast("deleteSuccess"),k.total-=e,F(k.listData.customTabs.selected)},function(e){l.hide(),m.errorToast(m.getLocalizedCustom(e.data.msg))})}}function F(e){for(var t=k.customTabs.length-1;t>=0;t--){var a=e.indexOf(k.customTabs[t].id);a>-1&&(e.splice(a,1),k.customTabs.splice(t,1))}}var k=this;k.title="Custom Fields",k.state=c,k.customTabs="",k.defaultPimLeftMenuTabs="",k.changeSelection=C,k.addPimTab=w,k.deleteSelection=_,k.deletePimTabs=x,k.confirm=S,k.cancel=D,k.sortTabs=v,k.editCustomizablePimTab=b,k.permissions={create:!1,"delete":!1,read:!1,update:!1},k.SortingListFields={menuTitle:"menuTitle"},f(),T(),p.setForcedTitle("Management Tools")}angular.module("app.pim").controller("CustomizablePIMTabsController",e),e.$inject=["logger","$window","$q","modalHelperService","webservice","$rootScope","loader","toast","listHelper","$state","datagroupPermissions","localizedMessages","formHelper","titleService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p){function f(){if(S.existingPimTabs=_(a,"menuTitle",!0),S.defaultPimTabs=_(p,"menuTitle",!0),S.customizablePimTab.id){var e=S.existingPimTabs.indexOf(S.customizablePimTab.menuTitle.toLowerCase().trim());S.existingPimTabs.splice(e,1)}h(S.customizablePimTab.id)}function g(){S.schema={type:"object",title:"Personal Details",properties:{tabName:{title:"Tab Name",type:"string",maxLength:100},tabOptions:{title:"Tab Options",type:"string"},canHaveManyRecords:{title:"Can have many records?",type:"boolean"},attachment:{title:c.getLocalizedCustom("Include Attachments Section"),type:"boolean"}},required:["tabName"]},S.form=[{type:"row",items:[{type:"text",htmlClass:"col-12",key:"tabName",validationMessage:{PimTabsDuplication:c.getLocalizedCustom("Already exists"),302:c.getLocalizedCustom("Required"),201:u.textLengthExceedValidation.message(S.schema.properties.tabName.maxLength)},$validators:{PimTabsDuplication:y}}]},{type:"row",items:[{type:"subheading",htmlClass:"col-12 no-separator-subheading",key:"tabOptions",hideSeparator:!0}]},{type:"row",items:[{type:"switch",htmlClass:"col-6 switch-box",key:"canHaveManyRecords",readonly:T},{type:"switch",htmlClass:"col-6 switch-box",key:"attachment",readonly:x}]},{type:"switch-box",htmlClass:"switch-box-section",subSections:[{label:"Admin",htmlClass:"switch-box-sub-section",items:[{type:"switch",key:["adminRead"],label:"Can Read",onChange:function(e,t){!e&&S.model.adminWrite&&(S.model.adminWrite=!1)}},{type:"switch",key:["adminWrite"],label:"Can Write",onChange:function(e,t){e&&(S.model.adminRead=!0)}}]},{label:"ESS",htmlClass:"switch-box-sub-section",items:[{type:"switch",key:["essRead"],label:"Can Read",onChange:function(e,t){!e&&S.model.essWrite&&(S.model.essWrite=!1)}},{type:"switch",key:["essWrite"],label:"Can Write",onChange:function(e,t){e&&(S.model.essRead=!0)}}]}]},{type:"switch-box",htmlClass:"switch-box-section",subSections:[{label:"Supervisor",htmlClass:"switch-box-sub-section",items:[{type:"switch",key:["supervisorRead"],label:"Can Read",onChange:function(e,t){!e&&S.model.supervisorWrite&&(S.model.supervisorWrite=!1)}},{type:"switch",key:["supervisorWrite"],label:"Can Write",onChange:function(e,t){e&&(S.model.supervisorRead=!0)}}]},{label:"Head of Department",htmlClass:"switch-box-sub-section",items:[{type:"switch",key:["hodRead"],label:"Can Read",onChange:function(e,t){!e&&S.model.hodWrite&&(S.model.hodWrite=!1)}},{type:"switch",key:["hodWrite"],label:"Can Write",onChange:function(e,t){e&&(S.model.hodRead=!0)}}]}]}]}function h(t){if("pim"in l||(l.pim={}),t){var a={tabId:t};return e.call("menuItemPermissions","GET",[],a,{}).then(function(e){l.pim.selectedMenuPermissions=e.data.data,v(),g()})}S.model.attachment=!0,g()}function v(){S.model={tabName:S.customizablePimTab.menuTitle,canHaveManyRecords:l.pim.selectedMenuPermissions.canHaveManyRecords,adminRead:l.pim.selectedMenuPermissions.adminRead,adminWrite:l.pim.selectedMenuPermissions.adminWrite,essRead:l.pim.selectedMenuPermissions.essRead,essWrite:l.pim.selectedMenuPermissions.essWrite,supervisorRead:l.pim.selectedMenuPermissions.supervisorRead,supervisorWrite:l.pim.selectedMenuPermissions.supervisorWrite,hodRead:l.pim.selectedMenuPermissions.hodRead,hodWrite:l.pim.selectedMenuPermissions.hodWrite,tabId:S.customizablePimTab.id,attachment:l.pim.selectedMenuPermissions.attachment}}function y(e){return""==e||null==e||(S.existingPimTabs||S.defaultPimTabs?!(S.existingPimTabs.indexOf(e.toLowerCase())>-1||S.defaultPimTabs.indexOf(e.toLowerCase())>-1):void 0)}function b(t){if(r.$broadcast("schemaFormValidate"),t.$valid){o.show(),angular.extend(S.customizablePimTab,S.model);var l=S.customizablePimTab.id,d="POST",m="customizablePimTabs",u=c.getLocalizedCustom("Successfully Saved");return x?S.model.isAttachmentConfig="0":S.model.isAttachmentConfig="1",l?(d="PATCH",m+="/"+l,u=c.getLocalizedCustom("Successfully Updated")):d="POST",e.call(m,d,S.model,{}).then(function(e){o.hide(),"POST"==d?a.unshift(e.data.data):"PATCH"==d&&C(e.data.data),s.get("$http").removeAll(),n.success(u),i(!1)},function(e){o.hide(),n.success(e),i(!1)})}return $q.when(!0)}function C(e){for(var t=0;t<a.length;t++)if(a[t].id==e.id){angular.extend(a[t],e);break}}function w(){i(!1)}function _(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase().trim()):i.push(e[o][t].trim()));return i}var S=this,D={};m.close=i,angular.copy(t,D),S.customizablePimTab=D,S.save=b,S.cancel=w,S.model={},S.title=d;var T=!1,x=!1;S.customizablePimTab.id&&(T=!0),x=angular.isDefined(S.customizablePimTab.include_attachment_section)?null!=S.customizablePimTab.include_attachment_section&&T:T,S.existingPimTabs=[],S.defaultPimTabs=[],f()}angular.module("app.pim").controller("EditCustomizablePimTabsController",e),e.$inject=["webservice","customizablePimTab","dataList","close","loader","toast","$rootScope","$scope","$cacheFactory","localizedMessages","title","modalFunctions","formValidationHelper","defaultPimLeftMenuTabs"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C){function w(){var e=[];e.push(f.getEmployeeCustomizableTabDetails(r.tabId,r.empNumber)),e.push(f.getCustomTabCustomFieldValues(r.tabId,r.empNumber).then(function(e){L.customFieldValues=e.tabValues,L.emptyFieldValues=e.emptyValues})),e=c.addPromisesToQueueToGetFileUploadSettings(L,e),s.all(e).then(function(e){L.employeeCustomTabDetails=e[0].customFieldDetails,F()})}function S(e,t){for(var a in L.employeeCustomTabDetails){var i=L.employeeCustomTabDetails[a].fieldId;e[i]={title:L.employeeCustomTabDetails[a].labelName},e=D(e,i,a),t=c.addToRequiredFields(t,i,L.employeeCustomTabDetails[a])}L.schema={type:"object",properties:e,required:t}}function D(e,t,a){var i=L.employeeCustomTabDetails[a],o=i.fieldType;return e[t].type=c.resolveFieldTypes(o),i.typeDetails.attributes.maxlength&&(e[t].maxLength=i.typeDetails.attributes.maxlength),e}function T(e,t,a,i){return i?a[t]=i:a[t]="",a}function x(e){o.show();var t={custom_field_id:e.customFieldId,sequence_number:e.sequenceNumber};f.deleteCustomFieldAttachment(r.empNumber,t).then(function(t){if(t.data.success){for(var a=0;L.dataList.length>a;a++)if(L.dataList[a].seqNo==e.sequenceNumber){L.dataList[a]["customFieldValue_"+e.customFieldId]="",L.dataList[a].formData[e.customFieldId].value="";break}e.attachmentUrl=!1,e.attachmentFileName=!1,L.wizardMode||p.showLocalizedToast("deleteSuccess")}else n.error("Failed to Delete")},function(e){n.error(e)})["finally"](function(){o.hide()})}function F(){var e=M(L.emptyFieldValues.formData),t={},a=[];S(t,a);var i=[],o=c.getEmptyRow();L.model={};var n,r={};$&&(r=d("filter")(L.customFieldValues,{seqNo:L.customizablePimTab.seqNo},!0)[0],r=angular.merge({},L.emptyFieldValues,r));for(var s=!1,m=0,u=0;u<L.employeeCustomTabDetails.length;u++){m+=1,n=$?r.formData[L.employeeCustomTabDetails[u].fieldId]:L.emptyFieldValues.formData[L.employeeCustomTabDetails[u].fieldId];var p,f=n.type,v=n.fieldType,y=n.customFieldId,b=n.customFieldDisplayCondition;$?p=n.value:(p="",n.extraData.attachmentFileName&&(n.extraData.attachmentFileName="")),L.model=T(v,y,L.model,p),c.prepareTextField(f,L.schema,y),v=c.prepareTextAreaField(f,L.schema,y,v),(m>2||s)&&(i.push(o),s=!1,m=1,o=c.getEmptyRow());var s=c.considerFullLength(v,L.modalSize),C={type:v,htmlClass:s?"col-12":"col-6",key:y};c.prepareNumberField(f,L.model,y,C),c.prepareAttachmentField(f,n,L.model,y,C,L.permissions,x,L.fileUploadSettings),c.prepareEmailField(f,C,L.schema,y),c.prepareGroupedFields(f,v,L.schema,L.model,y,p,C,n),c.prepareDateField(C,v,L.schema,L.model,y,p),"date"==n.fieldType&&L.employeeCustomTabDetails[u].required&&c.addDateRequiredValidation(C);var w=_.findWhere(h,{custom_field_id:y});"radiobuttons"==n.fieldType&&void 0!==w&&w.mandatory_in_wizard&&L.radioButtonFieldIds.push(y),c.prepareConditionalFields(C,L.model,b),c.prepareParentField(C,y,e,l,v),o.items.push(C),u==L.employeeCustomTabDetails.length-1&&i.push(o)}L.form=i,h&&g.updateFormFields(L.schema,L.form,h),l.$broadcast("schemaFormRedraw")}function k(){for(var e=!0,t=0;t<L.radioButtonFieldIds.length;t++)""!=L.model[L.radioButtonFieldIds[t]]&&void 0!=L.model[L.radioButtonFieldIds[t]]||(e=!1);return e}function E(e){if(l.$broadcast("schemaFormValidate"),!k()){var t=p.getLocalizedCustom("At least one radio option is required to proceed");n.error(t)}if(e.$valid&&k()){o.show();var s=p.getLocalizedCustom("Successfully Saved"),c={};angular.copy(L.model,c);for(var d in c)if(c[d]instanceof Date){var m=c[d].getMonth();m=parseInt(m)+1,m<10&&(m="0"+m);var u=c[d].getDate();u<10&&(u="0"+u),c[d]=c[d].getFullYear()+"-"+m+"-"+u}else void 0===c[d]&&(c[d]=null);var g=null;g=$?f.updateEmployeeCustomTabCustomFieldValueRow(r.tabId,L.customizablePimTab.seqNo,r.empNumber,c).then(function(e){I(e)}):f.addEmployeeCustomTabCustomFieldValueRow(r.tabId,r.empNumber,c).then(function(e){a.unshift(e)}),g.then(function(e){L.wizardMode||n.success(s)},function(){p.errorToast("Failed to Save")})["finally"](function(){o.hide()}),i(!0)}}function I(e){for(var t=0;t<a.length;t++)if(a[t].seqNo==e.originalSeqNo){angular.extend(a[t],e);break}}function A(){i(!1)}function M(e){var t=[];for(var a in e)"object"!=typeof e[a].customFieldDisplayCondition.parentCustomFieldId&&t.push(e[a].customFieldDisplayCondition.parentCustomFieldId);return t}var L=this;v.close=i,L.wizardMode=y.current.data.wizardMode;var P={};angular.copy(t,P),L.customizablePimTab=P,L.employeeCustomTabDetails="",L.save=E,L.cancel=A,L.title=u,L.model={},L.permissions=m,L.dataList=a,L.modalSize=b,L.radioButtonFieldIds=[];var $=!1;"seqNo"in L.customizablePimTab&&L.customizablePimTab.seqNo&&($=!0),w()}angular.module("app.pim").controller("EditEmployeeCustomizablePimTabsController",e),e.$inject=["webservice","customizablePimTab","dataList","close","loader","toast","$scope","$stateParams","$q","customFieldHelper","$filter","permissions","title","localizedMessages","customFieldService","employeeService","fieldConfiguration","modalFunctions","$state","modalSize","$timeout"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w){function S(){l.show();var e={tabDetails:b.getTabDetails(d.tabId,d.empNumber),tabCustomFieldValues:b.getCustomTabCustomFieldValues(d.tabId,d.empNumber),countries:F(),currencyTypes:k(),customFieldConfiguration:x()};a.all(e).then(function(e){Q.tabDetails=e.tabDetails,Q.tabDetails.hasOwnProperty("sections")||(Q.noCustomFields=!0,l.hide());var t=[];"1"==Q.tabDetails.menuItem.include_attachment_section&&(t.push(Q.tabDetails.attachmentDataGroup),Q.allowAttachment=!0),angular.isDefined(Q.tabDetails.DataGroupName)&&t.push(Q.tabDetails.DataGroupName),Q.noCustomFields||t.push(Q.tabDetails.sections.section.CustomFieldScreen.DataGroup.name),T(t).then(function(t){return Q.allowAttachment&&(Q.attachmentPermission=t[Q.tabDetails.attachmentDataGroup]),angular.isDefined(Q.tabDetails.DataGroupName)&&(Q.dataGroupPermission=t[Q.tabDetails.DataGroupName],!Q.dataGroupPermission.read)?void l.hide():Q.noCustomFields?void l.hide():(Q.permissions=t[Q.tabDetails.sections.section.CustomFieldScreen.DataGroup.name],Q.permissions.read?e.tabCustomFieldValues.emptySection||0==e.tabCustomFieldValues.customFieldCount?(Q.noCustomFields=!0,void l.hide()):(e.tabCustomFieldValues.tabValues&&(Q.customFieldValues=e.tabCustomFieldValues.tabValues),Q.emptyFieldValues=e.tabCustomFieldValues.emptyValues,"1"==Q.tabDetails.menuItem.has_multiple_records?Q.haveMultiple=!0:(Q.haveMultiple=!1,A()),Q.title=Q.tabDetails.sections.section.display_name,Q.customFieldList=Q.tabDetails.sections.section.customFieldsList,j(),Q.formReady=!0,I(),l.hide(),Q.haveMultiple||D(),void(Q.wizardMode||0!==Q.customFieldValues.length||!Q.haveMultiple||Q.allowAttachment||v.infoToast("No Records Found"))):(l.hide(),void c.go("403")))})})["finally"](function(){Q.wizardMode||n.$broadcast("setEmployeeDetailsForPimTabs")})}function D(){m.$on("pim.save",function(e,t){var a=R(Q.customizablePimTabSingleForm);a?e.savePromise=a:e.preventDefault()})}function T(e){var t=null!=n.emp_number&&n.emp_number==d.empNumber;return C.getDatagroupPermissions(d.empNumber,e,t)}function x(){return w.getEmployee().then(function(e){return C.getCustomFieldConfigurationByRoute(c.current.name,e.locationId,d.tabId).then(function(e){Q.customFieldConfiguration=e})})}function F(){return"countrylist"in n?a.when():o.call("countries","GET",[],{}).then(function(e){n.countrylist=e.data.data})}function k(){return"currencyTypes"in n?a.when():o.call("currencyType","GET",[]).then(function(e){var t=e.data.data;n.currencyTypes=t})}function E(e,t,a){Q.customFieldValues=_.sortByOrder(Q.customFieldValues,function(t){return t.formData&&t.formData[e]&&t.formData[e].type==h.getFieldTypeIdByFieldTypeName("date")&&t["customFieldValue_"+e]?y.stringToStandardDate(y.toLocalizedDate(t["customFieldValue_"+e])):t["customFieldValue_"+e]},t.toLowerCase())}function I(){Q.customTabsListHelper=new s.list(Q.listData.customFieldValues,Q.customFieldValues),Q.selectAll=Q.customTabsListHelper.selectAllItems,Q.deselectAll=Q.customTabsListHelper.deselectAllItems}function A(){var e=[];e.push(b.getEmployeeCustomizableTabDetails(d.tabId,d.empNumber)),e=h.addPromisesToQueueToGetFileUploadSettings(Q,e),a.all(e).then(function(e){Q.employeeCustomTabDetails=e[0].customFieldDetails,$()})}function M(e,t){for(var a in Q.employeeCustomTabDetails){var i=Q.employeeCustomTabDetails[a].fieldId;e[i]={title:Q.employeeCustomTabDetails[a].labelName},e=N(e,i,a),t=h.addToRequiredFields(t,i,Q.employeeCustomTabDetails[a])}Q.schema={type:"object",properties:e,required:t}}function L(e,t,a,i){return i?a[t]=i:a[t]="",a}function P(e){var t="Successfully Deleted",a="Failed to Delete",i={custom_field_id:e.customFieldId,sequence_number:e.sequenceNumber};b.deleteCustomFieldAttachment(d.empNumber,i).then(function(i){var o=i.data;l.hide(),Q.wizardMode?e.attachmentUrl=!1:o.success?(e.attachmentUrl=!1,r.success(t)):r.success(a)},function(e){l.hide(),r.success(e)})}function $(){var e={},t=[];M(e,t),Q.permissions.update||(Q.schema.readonly=!0);var a=[],i={};Q.singleModel={};for(var o=0;o<Q.employeeCustomTabDetails.length;o++){if(Q.customFieldValues.length&&u("filter")(Q.customFieldValues,{customFieldId:Q.employeeCustomTabDetails[o].fieldId},!0).length)var n=u("filter")(Q.customFieldValues,{customFieldId:Q.employeeCustomTabDetails[o].fieldId},!0)[0].formData[Q.employeeCustomTabDetails[o].fieldId];else var n=Q.emptyFieldValues.formData[Q.employeeCustomTabDetails[o].fieldId];var l=n.type,r=n.fieldType,s=n.customFieldId;ee.push(s);var c=n.value,d=n.customFieldDisplayCondition;Q.singleModel=L(r,s,Q.singleModel,c),h.prepareTextField(l,Q.schema,s),r=h.prepareTextAreaField(l,Q.schema,s,r),o%2==0&&(0!=o&&a.push(i),i={type:"section",htmlClass:"row",items:[]});var p={type:r,htmlClass:"col s12 m12 l6",key:s};h.prepareNumberField(l,Q.singleModel,s,p),h.prepareAttachmentField(l,n,Q.singleModel,s,p,Q.permissions,P,Q.fileUploadSettings),h.prepareEmailField(l,p,Q.schema,s),h.prepareGroupedFields(l,r,Q.schema,Q.singleModel,s,c,p,n),h.prepareDateField(p,r,Q.schema,Q.singleModel,s,c),"date"==n.fieldType&&Q.employeeCustomTabDetails[o].required&&h.addDateRequiredValidation(p);var f=_.findWhere(_.find(Q.customFieldConfiguration),{custom_field_id:s});"radiobuttons"==r&&void 0!==f&&f.mandatory_in_wizard&&Q.radioButtonFieldIds.push(s),h.prepareConditionalFields(p,Q.singleModel,d),i.items.push(p),o==Q.employeeCustomTabDetails.length-1&&a.push(i)}Q.form=a;var v=Q.tabDetails.sections.section.id;Q.customFieldConfiguration[v]&&C.updateFormFields(Q.schema,Q.form,Q.customFieldConfiguration[v]),g.addRequiredMessage(Q.form),m.$broadcast("schemaFormRedraw")}function N(e,t,a){var i=Q.employeeCustomTabDetails[a],o=i.fieldType;return e[t].type=h.resolveFieldTypes(o),i.typeDetails.attributes.maxlength&&(e[t].maxLength=i.typeDetails.attributes.maxlength),e}function O(){for(var e=!0,t=0;t<Q.radioButtonFieldIds.length;t++)""!=Q.singleModel[Q.radioButtonFieldIds[t]]&&void 0!=Q.singleModel[Q.radioButtonFieldIds[t]]||(e=!1);return e}function R(e){var t=!1;if(m.$broadcast("schemaFormValidate"),!O()){var i=v.getLocalizedCustom("At least one radio option is required to proceed");r.error(i)}if(e.$valid&&O()){l.show();var o=z(Q.singleModel);t=b.saveEmployeeCustomTabCustomFieldValues(d.tabId,d.empNumber,o).then(function(e){Q.wizardMode||r.success(v.getLocalizedCustom("Successfully Updated"));var t={tabDetails:b.getTabDetails(d.tabId,d.empNumber),customFieldValues:b.getCustomTabCustomFieldValues(d.tabId,d.empNumber)};return a.all(t).then(function(e){Q.tabDetails=e.tabDetails,Q.customFieldValues=e.customFieldValues.tabValues,A(),j()})},function(){v.errorToast("Failed to Save")})["finally"](function(){l.hide()})}return t}function z(e){var t=angular.copy(e);for(var a in ee)t[ee[a]]instanceof Date&&(t[ee[a]]=y.toStandardDate(t[ee[a]])),void 0===t[ee[a]]&&(t[ee[a]]=null);return t}function j(){Q.panalInfo={customEmployeeTabInfo:{title:Q.tabDetails.sections.section.display_name,icon:"images/pim/icon_work.svg"}},V()}function V(){var e=[];for(var t in Q.customFieldList){var a={name:Q.customFieldList[t].id,lable:Q.customFieldList[t].name,getter:"customFieldValue_"+Q.customFieldList[t].id,"class":"valign-middle"};Q.customFieldList[t].type==h.getFieldTypeIdByFieldTypeName("attachment")&&(a.clickAction="downloadFile",a["class"]="pimTabAttachment"),Q.customFieldList[t].type==h.getFieldTypeIdByFieldTypeName("date")&&(a.formatter=function(e){if(null!==e){var t=y.stringToStandardDate(e,!1);return null==t&&(t=y.stringToStandardDate(e)),y.toLocalizedDate(t)}}),Q.customFieldList[t].type==h.getFieldTypeIdByFieldTypeName("checkbox")&&(a.formatter=function(e){return angular.isArray(e)?e.join():e}),a.sortable=!0,a.sortAction="sortList",e.push(a)}var i=[{colspan:1}],o=[{"class":"edit_item",clickAction:"editEmployeeCustomizablePimTab",tooltip:"Edit"}],n=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:Q.permissions["delete"]}];Q.listData={customFieldValues:{selectable:!0,selected:[],idGetter:"seqNo",listFields:e,showColumnsAnyway:!0,permission:Q.permissions,listActions:n}},Q.permissions.update&&(Q.listData.customFieldValues.extraTH=i,Q.listData.customFieldValues.extraTD=o);var l=Q.tabDetails.sections.section.id;Q.customFieldConfiguration[l]&&C.updateListFields(Q.listData.customFieldValues.listFields,Q.customFieldConfiguration[l])}function G(e,t){var a=t.name;n.ohrmGlobals.downloadFile(e.formData[a].extraData.attachmentUrl)}function B(e){var t=e.obj;if(t.selected)Q.listData.customFieldValues.selected.push(t.seqNo);else{var a=Q.listData.customFieldValues.selected.indexOf(t.seqNo);a>-1&&Q.listData.customFieldValues.selected.splice(a,1)}}function q(e,t){var a={close:function(){}};b.getEmployeeCustomizableTabDetails(d.tabId,d.empNumber).then(function(o){var n="modal-md";o.customFieldDetails&&o.customFieldDetails.length<X&&(n="modal-sm");var l=Q.tabDetails.sections.section.id,r=!1;Q.customFieldConfiguration[l]&&(r=Q.customFieldConfiguration[l]),i.showModal("app/pim/customizablePimTabs/customizable_pim_tabs_modal.html","EditEmployeeCustomizablePimTabsController","modal",{customizablePimTab:t,dataList:Q.customFieldValues,permissions:Q.permissions,customFieldService:b,employeeService:C,fieldConfiguration:r,modalFunctions:a,modalSize:n,title:v.getLocalizedCustom(e)+" "+Q.tabDetails.menuItem.menuTitle+" "+v.getLocalizedCustom("Details")})})}function H(e){q("Edit",e)}function U(){var e={display_name:"",custom_field_screen_id:""};q("Add",e)}function W(){if(Q.listData.customFieldValues.selected.length>0){if(Q.wizardMode)return void K();i.showDeleteConfirmationModal().then(function(e){e===!0&&K()})}}function Y(){close(!0)}function J(){close(!1)}function K(){if(Q.listData.customFieldValues.selected.length>0){var e=Q.listData.customFieldValues.selected.length;l.show(),b.deleteEmployeeCustomTabCustomFieldValues(d.tabId,d.empNumber,Q.listData.customFieldValues.selected).then(function(t){
l.hide(),Q.wizardMode||r.success("Successfully Deleted"),Q.total-=e,Z(Q.listData.customFieldValues.selected)},function(e){l.hide(),r.success(e)})}}function Z(e){for(var t=Q.customFieldValues.length-1;t>=0;t--){var a=e.indexOf(Q.customFieldValues[t].seqNo);a>-1&&(e.splice(a,1),Q.customFieldValues.splice(t,1))}}var Q=this;Q.wizardMode=c.current.data.wizardMode;var X=4;Q.title="",Q.state=c,Q.customTabs="",Q.haveMultiple=!1,Q.customFieldList="",Q.formReady=!1,Q.noCustomFields=!1,Q.save=R,Q.changeSelection=B,Q.deleteSelection=W,Q.deleteEmployeePimTabCustomFields=K,Q.confirm=Y,Q.cancel=J,Q.downloadFile=G,Q.editEmployeeCustomizablePimTab=H,Q.addEmployeePimTab=U,Q.sortList=E,Q.customFieldValues=[];var ee=[];Q.allowAttachment=!1,Q.radioButtonFieldIds=[],o.isLoggedIn()?S():o.login().then(function(e){S()})}angular.module("app.pim").controller("EmployeePimTabController",e),e.$inject=["logger","$window","$q","modalHelperService","webservice","$rootScope","loader","toast","listHelper","$state","$stateParams","$scope","$filter","datagroupPermissions","formValidationHelper","formHelper","customFieldHelper","localizedMessages","dateService","customFieldService","employeeService","pimTabs"]}(),function(){"use strict";function e(e,t){function a(e,a){return t.call("employees/"+e+"/dependent","POST",a).then(function(e){return e.data.data})}function i(e,a,i){return t.call("employees/"+e+"/dependent/"+i,"PATCH",a).then(function(e){return e.data.data})}function o(e){return t.get("employees/"+e+"/dependent",{},{useCache:!1}).then(function(e){return e.data.data})}function n(e,a){return t.call("employees/"+e+"/dependent","DELETE",{data:a},{})}var l={addDependent:a,updateDependent:i,getDependents:o,deleteDependents:n};return l}angular.module("app.pim").factory("dependentService",e),e.$inject=["$q","webservice"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h){function v(){n.show(),f.getEmployee().then(function(a){A.employee=a;var r={permissions:y()};A.wizardMode&&(r.fieldConfiguration=g.getFieldConfigurationByRoute(s.current.name,"PimDependent",A.employee.locationId)),r.customFieldConfiguration=g.getCustomFieldConfigurationByRoute(s.current.name,A.employee.locationId).then(function(e){A.customFieldConfiguration=e}),e.all(r).then(function(a){if(n.hide(),A.wizardMode&&(A.fieldConfiguration=a.fieldConfiguration,0===A.fieldConfiguration.length&&(a.permissions.dependents={read:!1,create:!1,update:!1,"delete":!1})),A.permissions=a.permissions.dependents,A.attachmentPermission=a.permissions.dependents_attachment,A.customFieldsPermission=a.permissions.dependents_custom_fields,A.permissions.read){var r={dependents:l.getDependents(A.tempEmpNo),optionalFields:i.call("configurePim","GET",[]),nationalityList:i.call("nationality","GET",[],{})};e.all(r).then(function(e){A.optionalFields=e.optionalFields.data.data,b(),A.dependents=p.getSortedObjectList(e.dependents,"name","ASC"),A.loaded=!0,A.nationalityList=p.getKeyValueArrayFromObjectList(e.nationalityList.data.data,"id","name"),A.dependentsListHelper=new t.list(A.listData.dependents,A.dependents),A.selectAll=A.dependentsListHelper.selectAllItems,A.deselectAll=A.dependentsListHelper.deselectAllItems,A.wizardMode?g.updateListFields(A.listData.dependents.listFields,A.fieldConfiguration):0===A.dependents.length&&o.infoToast("No Records Found")})}A.wizardMode||m.$broadcast("setEmployeeDetailsForPimTabs")}),w()})}function y(){var e=!1;null!=m.emp_number&&m.emp_number==c.empNumber&&(e=!0);var t=["dependents","dependents_attachment","dependents_custom_fields"];return g.getDatagroupPermissions(c.empNumber,t,e).then(function(e){return e.dependents.read||e.dependents_attachment.read||e.dependents_custom_fields.read||(n.hide(),s.go("403")),e})}function b(){A.panelInfo={dependentsInfo:{title:"Assigned Dependents",icon:"images/pim/icon_work.svg"}},C()}function C(){var e=[{name:"name",lable:"Name",getter:"name"},{name:"relationship_type",lable:"Relationship",getter:"relationship_type",formatter:function(e,t){return"other"==e?o.getLocalizedCustom(t.relationship):o.getLocalizedCustom(e)}},{name:"date_of_birth",lable:"Date of Birth",getter:"date_of_birth",formatter:function(e){if(e){var t=e.slice(0,10);return u.toLocalizedDate(t)}return e}}];A.optionalFields.showNation&&e.push({name:"nation_code",lable:"Nationality",getter:"nation_code",formatter:function(e){return void 0!==e&&e>0&&void 0!==A.nationalityList[e]?A.nationalityList[e]:""}});var t=[{colspan:3}],a=[{"class":"edit_item",clickAction:"editDependents",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:A.permissions["delete"]}];A.listData={dependents:{selectable:!0,selected:[],idGetter:"seqno",listFields:e,showColumnsAnyway:!0,permission:A.permissions,listActions:i}},A.permissions.update?(A.permissions["delete"]||(A.listData.dependents.columnWidths=["25%","40%","25%"]),A.listData.dependents.extraTH=t,A.listData.dependents.extraTD=a):A.permissions["delete"]||(A.listData.dependents.columnWidths=["25%","50%","25%"])}function w(){A.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function _(e){return D(e,"Edit Dependent")}function S(){var e={name:"",relationship_type:"",date_of_birth:"",nation_code:""};D(e,"Add Dependent")}function D(e,t){var i={close:function(){}};a.showModal("app/pim/dependents/dependent_modal.html","PimEditDependentsController","modal",{dependent:e,dataList:A.dependents,title:t,modalFunctions:i,dependentService:l,fieldConfiguration:A.fieldConfiguration})}function T(){if(A.listData.dependents.selected.length>0){var e=A.listData.dependents.selected.length;n.show(),l.deleteDependents(A.tempEmpNo,A.listData.dependents.selected).then(function(){n.hide(),A.wizardMode||o.showLocalizedToast("deleteSuccess"),A.total-=e,x(A.listData.dependents.selected)},function(e){n.hide(),A.wizardMode||r.success(e)})}}function x(e){for(var t=A.dependents.length-1;t>=0;t--){var a=e.indexOf(A.dependents[t].seqno);a>-1&&(e.splice(a,1),A.dependents.splice(t,1))}}function F(e){var t=e.obj;if(t.selected)A.listData.dependents.selected.push(t.seqno);else{var a=A.listData.dependents.selected.indexOf(t.seqno);a>-1&&A.listData.dependents.selected.splice(a,1)}}function k(){if(A.listData.dependents.selected.length>0){if(A.wizardMode)return void T();a.showDeleteConfirmationModal().then(function(e){e===!0&&T()})}}function E(){close(!0)}function I(){close(!1)}var A=this;A.title="Dependents",A.customFieldScreen="dependents",A.loaded=!1,A.dependents="",A.wizardMode=s.current.data.wizardMode,A.employee={},A.customFieldService=h,A.employeeService=g,A.editDependents=_,A.deleteDependents=T,A.changeSelection=F,A.deleteSelection=k,A.addDependent=S,A.attachmentPermission=[],A.customFieldsPermission=[],A.confirm=E,A.cancel=I,A.tempEmpNo=c.empNumber,i.isLoggedIn()?v():i.login().then(function(){v()})}angular.module("app.pim").controller("PimDependentsController",e),e.$inject=["$q","listHelper","modalHelperService","webservice","localizedMessages","loader","dependentService","toast","$state","$stateParams","datagroupPermissions","$rootScope","dateService","formHelper","pimTabs","employeeService","customFieldService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v){function y(){T.tempEmpNo=u.empNumber;var t=[];t.push(e.call("nationality","GET",[],{})),t.push(e.call("configurePim","GET",[],{})),p.all(t).then(function(e){var t=e[0].data.data;T.optionalFields=e[1].data.data,c.nationalityList=t,b(S(c.nationalityList)),T.wizardMode&&h.updateFormFields(T.schema,T.form,g)})}function b(e){if(T.model={name:T.dependent.name,relationship_type:T.dependent.relationship_type,relationship:T.dependent.relationship,date_of_birth:null==T.dependent.date_of_birth||""==T.dependent.date_of_birth?null:new Date(T.dependent.date_of_birth)},T.schema={type:"object",title:"Dependent",properties:{name:{title:"Name",type:"string",maxLength:50},relationship_type:{title:"Relationship",type:"string","enum":["child","other"]},relationship:{title:"Please Specify",type:"string",maxLength:50},date_of_birth:{title:"Date of Birth",type:["null","object"],datePickerConfig:{max:new Date,selectMonths:!0,selectYears:100}}},required:["name","relationship_type","relationship"]},T.form=[{type:"row",items:[{type:"text",htmlClass:"col-12",key:"name",validationMessage:{302:t.getLocalizedCustom("Required"),201:v.textLengthExceedValidation.message(T.schema.properties.name.maxLength)}}]},{type:"row",items:[{type:"date",title:"Date of Birth",htmlClass:"col-6",key:"date_of_birth",defaultDate:T.model.date_of_birth,maximumDate:new Date},{htmlClass:"col-6",key:"relationship_type",type:"select",titleMap:[{value:"child",name:t.getLocalizedCustom("Child")},{value:"other",name:t.getLocalizedCustom("Other")}],validationMessage:{302:t.getLocalizedCustom("Required")}}]},{type:"row",condition:"model.relationship_type == 'other'",items:[{htmlClass:"col-12",key:"relationship",type:"text",ngModelOptions:{allowInvalid:!0},onChange:function(e){C(e)},validationMessage:{302:t.getLocalizedCustom("Required"),201:v.textLengthExceedValidation.message(T.schema.properties.relationship.maxLength)}}]}],T.optionalFields.showNation){T.schema.properties.nation_code={title:"Nationality",type:"string","enum":e["enum"]};var a={type:"row",items:[{htmlClass:"col-6",key:"nation_code",type:"select",titleMap:e.titleMap}]};T.form.push(a),T.model.nation_code=T.dependent.nation_code?T.dependent.nation_code.toString():""}}function C(e){e?d.$broadcast("schemaForm.error.relationship","required",!0):d.$broadcast("schemaForm.error.relationship","required",!1)}function w(e){if(d.$broadcast("schemaFormValidate"),C(T.model.relationship),e.$valid){r.show(),angular.extend(T.dependent,T.model);var a={name:T.model.name,relationship_type:T.model.relationship_type,relationship:T.model.relationship};if(""!==T.model.nation_code&&null!=T.model.nation_code&&(a.nation_code=T.model.nation_code),""!==T.model.date_of_birth&&null!=T.model.date_of_birth&&T.model.date_of_birth instanceof Date&&!isNaN(T.model.date_of_birth)){var o=parseInt(T.model.date_of_birth.getMonth(),10)+1;o<10&&(o="0"+o);var n=parseInt(T.model.date_of_birth.getDate(),10);n<10&&(n="0"+n),a.date_of_birth=T.model.date_of_birth.getFullYear()+"-"+o+"-"+n}else a.date_of_birth=null;var c,m;T.dependent.seqno?(m=f.updateDependent(T.tempEmpNo,a,T.dependent.seqno).then(function(e){_(e)}),c="updateSuccess"):(a.emp_number=T.tempEmpNo,m=f.addDependent(T.tempEmpNo,a).then(function(e){i.unshift(e)}),c="saveSuccess"),m.then(function(){r.hide(),T.wizardMode||t.showLocalizedToast(c)},function(e){r.hide(),T.wizardMode||s.success(e)}),l(!0)}}function _(e){for(var t=0;t<i.length;t++)if(i[t].seqno===e.seqno){angular.extend(i[t],e);break}}function S(e){for(var a=[],i=[],o=0;o<e.length;o++)a.push({value:e[o].id,name:t.getLocalizedCustom(e[o].name)}),i.push(e[o].id);return{titleMap:a,"enum":i}}function D(){l(!1)}b.$inject=["nationalityData"];var T=this;n.close=l,T.title=o||"Dependent",T.wizardMode=m.current.data.wizardMode;var x={};angular.copy(a,x),T.dependent=x,T.save=w,T.cancel=D,y()}angular.module("app.pim").controller("PimEditDependentsController",e),e.$inject=["webservice","localizedMessages","dependent","dataList","title","modalFunctions","close","loader","toast","$rootScope","$scope","$state","$stateParams","$q","dependentService","fieldConfiguration","wizardService","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(){l.show(),h().then(function(i){i.salary_history_details.read&&p.getEmployee().then(function(i){k.employee=i;var n={directDepositRecords:m.getDirectDeposit(k.tempEmpNo)};k.wizardMode&&(n.fieldConfiguration=u.getFieldConfigurationByRoute(s.current.name,"PimDirectDeposit",k.employee.locationId).then(function(e){k.fieldConfiguration=e})),t.all(n).then(function(t){v(),k.directDeposit=t.directDepositRecords,k.loaded=!0,k.directDepositListHelper=new a.list(k.listData.directDeposit,k.directDeposit),k.selectAll=k.directDepositListHelper.selectAllItems,k.deselectAll=k.directDepositListHelper.deselectAllItems,l.hide(),k.wizardMode?u.updateListFields(k.listData.directDeposit.listFields,k.fieldConfiguration):0===k.directDeposit.length&&o.infoToast("No Records Found"),k.wizardMode||e.$broadcast("setEmployeeDetailsForPimTabs"),l.hide()})})})}function h(){var t=null!=e.emp_number&&e.emp_number==c.empNumber,a=["salary_history_details"];return f.getDatagroupPermissions(c.empNumber,a,t).then(function(e){return k.permissions=e,e.salary_history_details.read||(l.hide(),s.go("403")),e})}function v(){k.panelInfo={directDepositInfo:{title:"Direct Deposit",icon:"images/pim/icon_work.svg"}},y()}function y(){var e=[{name:"amount",lable:"Amount",getter:"amount",filters:[{name:"number"}]},{name:"account_number",lable:"Account Number",getter:"account_number"},{name:"institute_name",lable:"Financial Institution",getter:"institute_name"},{name:"account_type",lable:"Account Type",getter:"account_type",formatter:function(e){return o.getLocalizedCustom(e)}},{name:"branch_location",lable:"Branch Location",getter:"branch_location"},{name:"routing_number",lable:"Routing Number",getter:"routing_number"}],t=["40px","15%","15%","15%","15%","15%","15%"];k.permissions.salary_history_details["delete"]||t.shift();var a=[{colspan:3}],i=[{"class":"edit_item",clickAction:"editDirectDeposit",tooltip:"Edit"}],n=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:k.permissions.salary_history_details["delete"]}];k.listData={directDeposit:{selectable:!0,selected:[],idGetter:"id",listFields:e,showColumnsAnyway:!0,permission:k.permissions.salary_history_details,columnWidths:t,listActions:n}},k.permissions.salary_history_details.update&&(k.listData.directDeposit.extraTH=a,k.listData.directDeposit.extraTD=i)}function b(e,t){i.showModal("app/pim/directDeposit/edit-direct-deposit-modal.html","PimEditDirectDepositController","modal",{directDeposit:e,dataList:k.directDeposit,modalProperties:{title:t},directDepositService:m,fieldConfiguration:k.fieldConfiguration})}function C(e){b(e,"Edit Direct Deposit")}function w(){if(k.listData.directDeposit.selected.length>0){var e=k.listData.directDeposit.selected.length;l.show(),m.deleteDirectDeposit(k.tempEmpNo,k.listData.directDeposit.selected).then(function(t){l.hide(),k.wizardMode||o.showLocalizedToast("deleteSuccess"),k.total-=e,_(k.listData.directDeposit.selected)},function(e){l.hide(),r.success(e)})}}function _(e){for(var t=k.directDeposit.length-1;t>=0;t--){var a=e.indexOf(k.directDeposit[t].id);a>-1&&(e.splice(a,1),k.directDeposit.splice(t,1))}}function S(e){var t=e.obj;if(t.selected)k.listData.directDeposit.selected.push(t.id);else{var a=k.listData.directDeposit.selected.indexOf(t.id);a>-1&&k.listData.directDeposit.selected.splice(a,1)}}function D(){if(k.listData.directDeposit.selected.length>0){if(k.wizardMode)return void w();i.showDeleteConfirmationModal().then(function(e){e===!0&&w()})}}function T(){var e={amount:null,account_number:null,institute_name:null,account_type:"Check",branch_location:null,routing_number:null};b(e,"Add Direct Deposit")}function x(){close(!0)}function F(){close(!1)}var k=this;k.title="Direct Deposit",k.loaded=!1,k.directDeposit="",k.editDirectDeposit=C,k.deleteDirectDeposit=w,k.changeSelection=S,k.deleteSelection=D,k.addDirectDeposit=T,k.confirm=x,k.cancel=F,k.wizardMode=s.current.data.wizardMode,k.tempEmpNo=c.empNumber,n.isLoggedIn()?g():n.login().then(function(e){g()})}angular.module("app.pim").controller("PimDirectDepositController",e),e.$inject=["$rootScope","$q","listHelper","modalHelperService","localizedMessages","webservice","loader","toast","$state","$stateParams","datagroupPermissions","directDepositService","wizardService","pimTabs","employeeService"]}(),function(){"use strict";function e(e,t){function a(e,a){return t.call("employees/"+e+"/directDeposit","POST",a).then(function(e){return e.data.data})}function i(e,a,i){return t.call("employees/"+e+"/directDeposit/"+i,"PATCH",a).then(function(e){return e.data.data})}function o(e){return t.get("employees/"+e+"/directDeposit",{},{useCache:!1}).then(function(e){return e.data.data})}function n(e,a){return t.call("employees/"+e+"/directDeposit","DELETE",{data:a},{})}var l={addDirectDeposit:a,updateDirectDeposit:i,getDirectDeposit:o,deleteDirectDeposit:n};return l}angular.module("app.pim").factory("directDepositService",e),e.$inject=["$q","webservice"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y){function b(){C(),D.tempEmpNo=p.empNumber}function C(){D.schema={type:"object",title:"Direct Deposit",properties:{amount:{title:"Amount",type:"string",minimum:0,maximum:99999999,maxLength:12},account_number:{title:"Account Number",type:["null","string"],maxLength:100},institute_name:{title:"Financial Institution",type:["string","null"],maxLength:255},account_type:{title:"Account Type",type:"string","enum":["Check","Saving"]},branch_location:{title:"Branch Location",type:["string","null"],maxLength:255},routing_number:{title:"Routing Number",type:["string","null"],maxLength:255}},required:["amount","account_number"]},D.form=[{type:"row",htmlClass:"",items:[{key:"amount",type:"text",htmlClass:"col-6",validationMessage:{302:i.getLocalizedCustom("Required"),numberValidation:d.numericTwoDecimalPlaces.message,maxValidation:d.numericMaxValidation.message(D.schema.properties.amount.maximum),minValidation:d.numericMinValidation.message(D.schema.properties.amount.minimum),201:d.textLengthExceedValidation.message(D.schema.properties.amount.maxLength)},$validators:{numberValidation:d.numericTwoDecimalPlaces.validator,maxValidation:function(e){return d.numericMaxValidation.validator(e,D.schema.properties.amount.maximum)},minValidation:function(e){return d.numericMinValidation.validator(e,D.schema.properties.amount.minimum)}}},{key:"account_number",type:"text",htmlClass:"col-6",validationMessage:{302:i.getLocalizedCustom("Required"),201:d.textLengthExceedValidation.message(D.schema.properties.account_number.maxLength)}}]},{type:"row",htmlClass:"",items:[{key:"institute_name",type:"text",htmlClass:"col-6",validationMessage:{201:d.textLengthExceedValidation.message(D.schema.properties.institute_name.maxLength)}},{key:"account_type",type:"select",emptyOption:!1,htmlClass:"col-6",titleMap:[{value:"Check",name:i.getLocalizedCustom("Check")},{value:"Saving",name:i.getLocalizedCustom("Saving")}]}]},{type:"row",htmlClass:"",items:[{key:"branch_location",type:"text",htmlClass:"col-6",validationMessage:{201:d.textLengthExceedValidation.message(D.schema.properties.branch_location.maxLength)}},{key:"routing_number",type:"text",htmlClass:"col-6",validationMessage:{201:d.textLengthExceedValidation.message(D.schema.properties.routing_number.maxLength)}}]}],D.wizardMode&&v.updateFormFields(D.schema,D.form,y),D.model=D.directDeposit}function w(e){if(u.$broadcast("schemaFormValidate"),e.$valid){s.show();var t=angular.copy(D.model);delete t.employee_number,delete t.Employee,delete t.selected;var a,o=D.directDeposit.id,n="saveSuccess";o?(a=h.updateDirectDeposit(D.tempEmpNo,t,o).then(function(e){_(e)}),n="updateSuccess"):(a=h.addDirectDeposit(D.tempEmpNo,t).then(function(e){l.unshift(e)}),n="saveSuccess"),a.then(function(e){s.hide(),D.wizardMode||i.showLocalizedToast(n)},function(e){s.hide(),D.wizardMode||c.error(e.data.title)}),r(!0)}}function _(e){for(var t=0;t<l.length;t++)if(l[t].id==e.id){angular.extend(l[t],e);break}}function S(){r(!1)}var D=this,T={};angular.copy(o,T),D.directDeposit=T,D.save=w,D.cancel=S,D.modalProperties=n,D.wizardMode=g.current.data.wizardMode,b()}angular.module("app.pim").controller("PimEditDirectDepositController",e),e.$inject=["logger","$q","webservice","localizedMessages","directDeposit","modalProperties","dataList","close","loader","toast","formValidationHelper","$rootScope","$scope","$stateParams","formHelper","$state","directDepositService","wizardService","fieldConfiguration"]}(),function(){"use strict";angular.module("app.directives").directive("documentTemplateTokenAdder",[function(){return{restrict:"C",link:function(e,t,a){e.$watch(a.ngModel,function(e,t){tinymce&&e&&tinymce.activeEditor.execCommand("mceInsertContent",!1,"#"+e+"#")})}}}])}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/pim/directives/attachments.html",scope:{pimscreen:"=pimscreen",permissions:"=permissions"},bindToController:!0,link:function(e,t,a){},controller:t,controllerAs:"attachmentsCtrl"}}function t(e,t,a,i,o,n,l,r,s,c,d,m){function u(){i.call("employees/"+w.tempEmpNo+"/employeeAttachments/"+w.pimscreen,"GET",[]).then(function(e){p(),f(),w.attachments=e.data.data,w.maxFileSize=e.data.meta.maximumFileSize,_=new s.list(w.listData,w.attachments),w.changeSelection=_.changeSelection,w.selectAll=_.selectAllItems,w.deselectAll=_.deselectAllItems,w.objs=w.attachments,w.totalDataCount=w.objs.length,w.loaded=!0})}function p(){w.panelInfo={screen:w.pimscreen,title:"Attachments",icon:"images/pim/icon_work.svg"}}function f(){var e={filename:"",url:""},i=[{name:"filename",lable:"File Name",getter:"filename",type:"link",link:function(t,i){return"application/pdf"==i.file_type||"application/x-pdf"==i.file_type?(e.filename=i.filename,e.url=a.baseUrl+"pim/viewAttachmentNewTab/empNumber/"+i.emp_number+"/attachId/"+i.attach_id):(e.filename=i.filename,e.url=null),e}},{name:"description",lable:"Description",getter:"description"},{name:"size",lable:"Size",getter:"size",formatter:function(e,t){return e?(e/1024).toFixed(2)+"kB":e}},{name:"type",lable:"Type",getter:"file_type"},{name:"attached_time",lable:"Date Added",getter:"attached_time",formatter:function(e,t){return e?c.toLocalizedDate(e.split(" ")[0]):e}},{name:"attached_by",lable:"Added By",getter:"attached_by_name"}],o=["2%","25%","20%","10%","15%","13%","13%"],n=[],l=[],r=[];w.isOxd?(o.push("10%"),i.push({name:"actionButtons",lable:"",getter:"attach_id","class":"text-center",type:"oxd-action-button-panel",iconButtons:[{id:"delete-button",classes:"btn-list",text:"Delete",tooltip:{text:"Delete"},clickAction:function(e,t,a,i){y([i.attach_id])},icon:"ohrm_delete",displayCondition:function(e,t){return w.permissions["delete"]}},{id:"download-button",classes:"btn-list",text:"Download",tooltip:{text:"Download"},clickAction:function(e,t,a,i){h(i)},icon:"ohrm_download_icon_oxd",displayCondition:function(e,t){return!0}},{id:"edit-button",classes:"btn-list",text:"Edit",tooltip:{text:"Edit"},clickAction:function(e,t,a,i){g(i)},icon:"edit",iconSize:"1rem",displayCondition:function(e,t){return w.permissions.update}}]})):(n.push({icon:"file_download",clickAction:"downloadAttachment",tooltip:"Download",htmlClass:"tooltipped"}),o.push("2%"),w.permissions.update&&(n.push({icon:"edit_item",clickAction:"editAttachment",tooltip:"Edit",htmlClass:"tooltipped"}),o.push("2%")),l.push({action:"deleteSelection",lable:"Delete Selected",actionPermission:w.permissions["delete"]}),r.push({width:"4%",colspan:n.length})),w.permissions["delete"]||o.shift(),w.listData={tableId:"pimAttachmentsList_",name:"attachments",selectable:!0,selected:[],idGetter:["attach_id"],listFields:i,extraTH:r,extraTD:n,showColumnsAnyway:!0,permission:w.permissions,columnWidths:o,listActions:l,showLoader:!0,listClass:"classic-table",listTopBar:{getMessageForNoOfItemsFound:function(e){return"undefined"!=typeof w.totalDataCount?t.getLocalizedCustomWithVariables("({{number}}) Attachment"+(1==w.totalDataCount?"":"s")+" Found",{number:w.totalDataCount}):""},getMessageForNoOfItemsSelected:function(e){return e?t.getLocalizedCustomWithVariables("({{number}}) Attachment"+(e>1?"s":"")+" Selected",{number:e}):""}}},w.permissions.create&&(w.listData.listTopBar.mainActionButton={id:"add-attachment-button",icon:"add",label:"Add Attachment",onClick:function(){b()}}),w.permissions["delete"]&&(w.listData.listTopBar.onBulkDelete=function(e){y(e)},w.listData.listTopBar.isBulkDeletable=function(e){return!0})}function g(e){o.showModal("app/pim/attachment_modal.html","PimAttachmentModalController","modal",{modalInput:{attachment:e,dataList:w.attachments,updateList:_.updateListItem,title:"Edit Attachment",maxSize:w.maxFileSize}})}function h(e){var t=a.baseUrl+"api/pim/downloadAttachment/empNumber/"+e.emp_number+"/attachId/"+e.attach_id;d.ohrmGlobals.downloadFile(t)}function v(e){if(e=angular.isArray(e)&&e.length?e:w.listData.selected,e.length>0){var a=e.length;C(!0),i.call("employees/"+n.empNumber+"/employeeAttachments","DELETE",{data:e},{}).then(function(i){C(!1);var o="deleteSuccess";t.showLocalizedToast(o),w.totalDataCount-=a,_.removeItemFromList(e)},function(e){C(!1),r.success(e)})}}function y(e){e=angular.isArray(e)&&e.length?e:w.listData.selected,e.length>0&&o.showDeleteConfirmationModal().then(function(t){t===!0&&v(e)})}function b(){var e={filename:"",description:"",screen:w.panelInfo.screen};o.showModal("app/pim/attachment_modal.html","PimAttachmentModalController","modal",{modalInput:{attachment:e,dataList:w.attachments,addItemToList:_.addListItem,title:"Add Attachment",maxSize:w.maxFileSize}}).then(function(e){e&&w.totalDataCount++})}function C(e){w.isOxd||(e?l.show():l.hide())}var w=this;w.title="Attachment",w.editAttachment=g,w.addAttachments=b,w.deleteAttachment=v,w.deleteSelection=y,w.downloadAttachment=h,w.tempEmpNo=n.empNumber,w.loaded=!1,w.isOxd=m.current.data.oxd;var _={};w.permissions||(w.permissions={read:!0,create:!0,update:!0,"delete":!0}),u()}angular.module("app.directives").directive("pimAttachment",e),t.$inject=["$window","localizedMessages","LOGIN","webservice","modalHelperService","$stateParams","loader","toast","listHelper","dateService","$rootScope","$state"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c){function d(){u(),m(w.templates)}function m(e){if(w.listDefinition.selected=[],e)for(var t in e)w.listDefinition.selected.push(e[t].name)}function u(){var e=[{name:"Template",getter:"name",style:function(){return{"padding-left":"0px"}}},{name:"pdf",onPerformListRowAction:f,type:"oxd-action-button",formatter:function(){return w.documentMap[1].type},allowedActionGetter:function(){return[w.documentMap[1].type]},icon:"ohrm_file_pdf",downloadFileType:"PDF"},{name:"docx",onPerformListRowAction:g,type:"oxd-action-button",formatter:function(){return w.documentMap[0].type},allowedActionGetter:function(){return[w.documentMap[0].type]},icon:"ohrm_docx_file_oxd",downloadFileType:"Docx"}],t=[],a=["60%","20%","20%"];w.listDefinition={tableId:"DocumentExport",name:"Document Export",selectable:!0,selected:[],idGetter:"id",listFields:e,showColumnsAnyway:!0,columnWidths:a,listActions:t,listSpecificInitialSort:!0,clickableCondition:"id",showLoader:!0,listClass:"classic-table hover selectable",staticHeader:!0,hideHeader:!0}}function p(){s(!1),w.downloadConfirm=!1}function f(e){v(e,"pdf"),w.selectedFileType="pdf",w.selectedTemplate=e}function g(e){v(e,"docx"),w.selectedFileType="docx",w.selectedTemplate=e}function h(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)}function v(e,t){var a={emp_number:w.employeeNumber,template_id:e.id,file_type:t};y(a)}function y(t){return e.call("documentTemplate/missingTokens","GET",[],t).then(function(e){if(e.data.data.length>0){var t=e.data.data.join(", ");1===e.data.data.length?w.missingTokenConfirmationMessage=c.getLocalizedCustomWithVariablesWithoutEscaping("The token {{missingTokenList}} will appear on the generated document as it refers to data that no longer exists in the system.",{missingTokenList:t}):w.missingTokenConfirmationMessage=c.getLocalizedCustomWithVariablesWithoutEscaping("The tokens {{missingTokenList}} will appear on the generated document as it refers to data that no longer exists in the system.",{missingTokenList:t}),w.missingTokensModalActive=!0}else b()})}function b(){h(),window.location.href="/api/documents/exportDocuments?emp_number="+w.employeeNumber+"&template_id="+w.selectedTemplate.id+"&file_type="+w.selectedFileType+"&client_date_time="+h(),w.missingTokensModalActive=!1}function C(){w.missingTokensModalActive=!1}var w=this;w.templates=i,w.isDocumentExportModal=!0,w.visible=o,w.datagroupName=n,w.employeeNumber=l,w.employeeService=r,w.cancel=p,w.downloadPdf=f,w.downloadDocx=g,w.documentMap=[{type:"DOCX"},{type:"PDF"}],w.missingTokenConfirmationMessage="",w.missingTokensModalActive=!1,w.confirmDocDownload=b,w.cancelMissingTokenConfirmation=C,w.downloadConfirm=!1,w.selectedFileType=w.documentMap[1].type,w.selectedTemplate=null,d()}angular.module("app.directives").controller("PimDocumentController",e),e.$inject=["webservice","$q","$scope","templates","visible","datagroupName","employeeNumber","employeeService","close","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){s.show();var e=[];e.push(l.call("employees/documentTemplates","GET",[])),e.push(l.call("permissions/dataGroup/pim_document_templates","GET",[])),i.all(e).then(function(e){D.permissions=e[1].data.data,f(),g(),D.documentTemplates=e[0].data.data,D.documentTemplatesListHelper=new t.list(D.listData.documentTemplates,D.documentTemplates),D.selectAll=D.documentTemplatesListHelper.selectAllItems,D.deselectAll=D.documentTemplatesListHelper.deselectAllItems,s.hide(),0==D.documentTemplates.length&&n.infoToast("No Records Found")},function(e){s.hide(),m.go("403")})}function f(){}function g(){var e=[{name:"templateName",lable:"Template Name",getter:"name"},{name:"description",lable:"Description",getter:"description","class":"tableColumnTextShorting"},{name:"pageSize",lable:"Page Size",getter:"page_size"},{name:"section",lable:"Section",getter:["documentTemplateEnabledDataGroup","description"],formatter:function(e,t){return d.instant(e)}}],t=[{colspan:1}],a=[{"class":"edit_item",clickAction:"editItem",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:D.permissions["delete"]}];D.listData={documentTemplates:{selectable:!0,selected:[],idGetter:"id",listFields:e,showColumnsAnyway:!0,permission:D.permissions,listActions:i,columnWidths:["5%","15%","45%","10%","20%","5%"]}},D.permissions.update&&(D.listData.documentTemplates.extraTH=t,D.listData.documentTemplates.extraTD=a)}function h(e){u.showModal("app/pim/documentTemplates/document_templates_modal.html","PimEditDocumentTemplateController","modal",{documentTemplate:e,dataList:D.documentTemplates})}function v(){if(D.listData.documentTemplates.selected.length>0){var e=D.listData.documentTemplates.selected.length;s.show(),l.call("employees/documentTemplates","DELETE",{data:D.listData.documentTemplates.selected},{}).then(function(t){s.hide();var a="deleteSuccess";n.showLocalizedToast(a),D.total-=e,y(D.listData.documentTemplates.selected)},function(e){s.hide(),c.success(e)})}}function y(e){for(var t=D.documentTemplates.length-1;t>=0;t--){var a=e.indexOf(D.documentTemplates[t].id);a>-1&&(e.splice(a,1),D.documentTemplates.splice(t,1))}}function b(e){var t=e.obj;if(t.selected)D.listData.documentTemplates.selected.push(t.id);else{var a=D.listData.documentTemplates.selected.indexOf(t.id);a>-1&&D.listData.documentTemplates.selected.splice(a,1)}}function C(){D.listData.documentTemplates.selected.length>0&&u.showDeleteConfirmationModal().then(function(e){e===!0&&v()})}function w(){var e={};u.showModal("app/pim/documentTemplates/document_templates_modal.html","PimEditDocumentTemplateController","modal",{documentTemplate:e,dataList:D.documentTemplates})}function _(){close(!0)}function S(){close(!1)}var D=this;D.title="Document Templates",D.documentTemplates="",D.editItem=h,D.deleteItem=v,D.changeSelection=b,D.deleteSelection=C,D.addItem=w,D.confirm=_,D.cancel=S,p()}angular.module("app.pim").controller("PimDocumentTemplatesController",e),e.$inject=["logger","listHelper","$window","$q","ModalService","localizedMessages","webservice","$rootScope","loader","toast","$translate","$state","modalHelperService"];
}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g){function h(){var e=[],i="GET";e.push(a.call("documentTemplateTokens",i,{},{}).then(function(e){w=_.clone(e.data.data),_.forEach(w,function(e,a){void 0!==e.section_name&&(w[a].display_name=e.display_name);var i="",o=t.getLocalizedCustom(e.section_name),n=t.getLocalizedCustom(e.tab_name);n&&o?i=n+" / "+o:n?i=n:o&&(i=o),w[a].actionText=i,w[a].hasDetailedOption=!1,"1"===e.is_multi_attribute&&(w[a].hasDetailedOption=!0)}),S.tokenList=s.getEnumAndTitleMapForSelectWithActionText(w,{name:"display_name",value:"name",actionText:"actionText",hasDetailedOption:"hasDetailedOption",detailedOptions:"detailedOptions"})})),e.push(a.call("employees/documentTemplateEnabledDataGroups",i,{},{}).then(function(e){S.datagroupList=s.getEnumAndTitleMapForSelect(e.data.data,{name:"description",value:"id"});for(var t=0;S.datagroupList.titleMap.length>t;t++)S.datagroupList.titleMap[t].name=p.instant(S.datagroupList.titleMap[t].name)})),u.all(e).then(function(e){v()})}function v(){S.schema={type:"object",title:"Document Templates",properties:{name:{title:"Name",type:"string",maxLength:100},document_margin:{title:"Margin",type:"object"},document_template_enabled_data_group_id:{title:"Link To Section",type:"string","enum":S.datagroupList["enum"]},page_size:{title:"Page Size",type:"string","enum":["A4","A3","B5","B4","B3","Letter"]},description:{title:"Description",type:"string",maxLength:255},template_string:{type:"string"}},required:["name","document_template_enabled_data_group_id"]},S.form=[{type:"row",items:[{type:"text",htmlClass:"col-4",key:"name",validationMessage:{201:c.textLengthExceedValidation.message(S.schema.properties.name.maxLength),302:t.getLocalizedCustom("Required")}},{type:"select",htmlClass:"col-4",key:"document_template_enabled_data_group_id",titleMap:S.datagroupList.titleMap,validationMessage:{302:t.getLocalizedCustom("Required")}}]},{type:"row",items:[{type:"textarea",htmlClass:"col-12",key:"description",validationMessage:{201:c.textLengthExceedValidation.message(S.schema.properties.description.maxLength)}}]},{type:"row",items:[{type:"tinymce",htmlClass:"col-12",maxImageSizeValidationMessage:"*"+t.getLocalizedCustomWithVariables("File size should be less than {{maxSize}}MB",{maxSize:S.attachmentSizeInMb}),key:"template_string",injectable:{injectablePlaceholder:"Select Token",injectableItems:S.tokenList.titleMap,onInjectableItemClick:function(e){if(tinymce&&e)if(e.hasDetailedOption){var t=[];e.detailedOptions.forEach(function(e){e.checked&&t.push(e.key)});var a=t.join("|"),i=e.originalObject.value+"["+a+"]";tinymce.activeEditor.execCommand("mceInsertContent",!1,"#"+i+"#")}else tinymce.activeEditor.execCommand("mceInsertContent",!1,"#"+e.value+"#")},injectableTitleField:"name",injectableSearchField:"name,actionText",injectableActionText:"actionText",clearSelected:!0,enableDetailedDropdown:!0,selectAllDetailedDropdownOptions:!0},tinymceOptions:{}}]},{type:"row",items:[{type:"selective-pills",htmlClass:"col-6",key:"page_size",titleMap:[{value:"A4",name:"A4"},{value:"A3",name:"A3"},{value:"B5",name:"B5"},{value:"B4",name:"B4"},{value:"B3",name:"B3"},{value:"Letter",name:"Letter"}]},{type:"document-margin",htmlClass:"col-6",key:"document_margin",ngModelOptions:{allowInvalid:!0},helpMessage:"(mm)",validationMessage:{number:c.numericMaxTwoDecimalPlaces.message},placeholder:"10"}]}],S.model={name:S.documentTemplate.name,document_template_enabled_data_group_id:S.documentTemplate.document_template_enabled_data_group_id?S.documentTemplate.document_template_enabled_data_group_id:"",page_size:S.documentTemplate.page_size?S.documentTemplate.page_size:"",description:S.documentTemplate.description,template_string:S.documentTemplate.template_string,token:"",document_margin:{margin_left:S.documentTemplate.margin_left?S.documentTemplate.margin_left:"",margin_right:S.documentTemplate.margin_right?S.documentTemplate.margin_right:"",margin_top:S.documentTemplate.margin_top?S.documentTemplate.margin_top:"",margin_bottom:S.documentTemplate.margin_bottom?S.documentTemplate.margin_bottom:""}},S.intervalTinyMCECheck=setInterval(function(){S.documentTemplate.template_string||clearInterval(S.intervalTinyMCECheck),tinymce.activeEditor&&S.documentTemplate.template_string&&(tinymce.activeEditor.setContent(S.documentTemplate.template_string),clearInterval(S.intervalTinyMCECheck))},1e3)}function y(e){m.$broadcast("schemaFormValidate"),f(function(){if(e.$valid&&S.firstClickValid){S.firstClickValid=!1,l.show(),tinymce&&(S.model.template_string=tinymce.activeEditor.save());var i=S.model;i.margin_left=i.document_margin.margin_left,i.margin_right=i.document_margin.margin_right,i.margin_top=i.document_margin.margin_top,i.margin_bottom=i.document_margin.margin_bottom,angular.extend(S.documentTemplate,i),delete i.document_margin,delete i.token,delete i.tinymceImage;var s,c,d,m=S.documentTemplate.id,u="employees/documentTemplates";m?(d="PATCH",u+="/"+m,s="updateSuccess",c="Failed to Update"):(d="POST",s="saveSuccess",c="Failed to Add"),a.call(u,d,i,{}).then(function(e){l.hide(),"POST"==d?o.unshift(e.data.data):"PATCH"==d&&b(S.documentTemplate),t.showLocalizedToast(s)},function(e){l.hide(),r.error(c)}),n(!0)}})}function b(e){for(var t=0;t<o.length;t++)if(o[t].id==e.id){angular.extend(o[t],e);break}}function C(){n(!1)}var w,S=this,D={};S.firstClickValid=!0,angular.copy(i,D),S.documentTemplate=D,S.documentTemplate.id?S.title="Edit Document Template":S.title="Add Document Template",S.attachmentSizeInMb=1,tinymce&&g.getSetting("max_attachment_size").then(function(e){S.attachmentSizeInMb=e/1048576,tinymce.image_type_error=function(){r.error(t.getLocalizedCustom("File Type Not Allowed"))},tinymce.image_size_error=function(){r.warning(t.getLocalizedCustomWithVariables("File Size Should Be Less than {{maxSize}}MB",{maxSize:S.attachmentSizeInMb}))},tinymce.max_image_size_=function(){return e}}),S.save=y,S.cancel=C,h()}angular.module("app.pim").controller("PimEditDocumentTemplateController",e),e.$inject=["logger","localizedMessages","webservice","documentTemplate","dataList","close","loader","toast","formHelper","formValidationHelper","$rootScope","$scope","$q","$translate","$timeout","settingsService"]}(),function(){"use strict";function e(e,t){function a(e,a){return t.call("employees/"+e+"/emergencyContacts","POST",a,{}).then(function(e){return e.data.data})}function i(e,a,i){return t.call("employees/"+e+"/emergencyContacts/"+i,"PATCH",a,{}).then(function(e){return e.data.data})}function o(e){return t.call("employees/"+e+"/emergencyContacts","GET",[]).then(function(e){return e.data.data})}function n(e,a){return t.call("employees/"+e+"/emergencyContacts","DELETE",{data:a},{})}var l={addEmergencyContact:a,updateEmergencyContact:i,getEmergencyContacts:o,deleteEmergencyContacts:n};return l}angular.module("app.pim").factory("emergencyContactService",e),e.$inject=["$q","webservice"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(){_.tempEmpNo=d.empNumber}function h(){_.schema={type:"object",title:"Emergency Contact",properties:{name:{title:"Name",type:"string",maxLength:50},relationship:{title:"Relationship",type:"string",maxLength:30},telephone:{title:"Telephone",type:"string",maxLength:30},home_phone:{title:"Home",type:"string",maxLength:25},mobile_phone:{title:"Mobile",type:"string",maxLength:25},office_phone:{title:"Work",type:"string",maxLength:25}},required:["name","relationship","telephone"]},_.form=[{type:"row",items:[{type:"text",htmlClass:"col-6",key:"name",validationMessage:{302:t.getLocalizedCustom("Required"),201:s.textLengthExceedValidation.message(_.schema.properties.name.maxLength)}},{type:"text",htmlClass:"col-6",key:"relationship",validationMessage:{302:t.getLocalizedCustom("Required"),201:s.textLengthExceedValidation.message(_.schema.properties.relationship.maxLength)}}]},{type:"row",items:[{type:"subheading",htmlClass:"col-12",key:"telephone"}]},{type:"row",items:[{type:"text",htmlClass:"col-4",key:"home_phone",onChange:y,validationMessage:{phoneNumber:s.phoneNumber.message,atleastOnePhoneNumberRequired:t.getLocalizedCustom("At least one phone number is required"),201:s.textLengthExceedValidation.message(_.schema.properties.home_phone.maxLength)},$validators:{phoneNumber:s.phoneNumber.validator}},{type:"text",htmlClass:"col-4",key:"mobile_phone",onChange:y,validationMessage:{atleastOnePhoneNumberRequired:t.getLocalizedCustom("At least one phone number is required"),phoneNumber:s.phoneNumber.message,201:s.textLengthExceedValidation.message(_.schema.properties.mobile_phone.maxLength)},$validators:{phoneNumber:s.phoneNumber.validator}},{type:"text",htmlClass:"col-4",key:"office_phone",onChange:y,validationMessage:{atleastOnePhoneNumberRequired:t.getLocalizedCustom("At least one phone number is required"),phoneNumber:s.phoneNumber.message,201:s.textLengthExceedValidation.message(_.schema.properties.office_phone.maxLength)},$validators:{phoneNumber:s.phoneNumber.validator}}]}],_.model={name:_.emergencyContact.name,relationship:_.emergencyContact.relationship,home_phone:_.emergencyContact.home_phone,mobile_phone:_.emergencyContact.mobile_phone,office_phone:_.emergencyContact.office_phone}}function v(){return""!==_.model.mobile_phone&&null!==_.model.mobile_phone&&void 0!==_.model.mobile_phone||""!==_.model.home_phone&&null!==_.model.home_phone&&void 0!==_.model.home_phone||""!==_.model.office_phone&&null!==_.model.office_phone&&void 0!==_.model.office_phone}function y(){void 0!==_.schema.properties.home_phone?c.$broadcast("schemaForm.error.home_phone","atleastOnePhoneNumberRequired",!0):void 0!==_.schema.properties.mobile_phone?c.$broadcast("schemaForm.error.mobile_phone","atleastOnePhoneNumberRequired",!0):void 0!==_.schema.properties.office_phone&&c.$broadcast("schemaForm.error.office_phone","atleastOnePhoneNumberRequired",!0)}function b(e){if(v())y();else{var a=_.schema.required.filter(function(e){return"home_phone"===e||"mobile_phone"===e||"office_phone"===e});if(0===a.length&&void 0!==_.schema.properties.home_phone)c.$broadcast("schemaForm.error.home_phone","atleastOnePhoneNumberRequired",!1);else if(0===a.length&&void 0!==_.schema.properties.mobile_phone)c.$broadcast("schemaForm.error.mobile_phone","atleastOnePhoneNumberRequired",!1);else if(0===a.length&&void 0!==_.schema.properties.office_phone)c.$broadcast("schemaForm.error.office_phone","atleastOnePhoneNumberRequired",!1);else if(0===a.length)return r.error(t.getLocalizedCustom("At least one phone number is required")),!1}if(c.$broadcast("schemaFormValidate"),e.$valid){l.show(),angular.extend(_.emergencyContact,_.model);var i=_.emergencyContact.seqno;i?u.updateEmergencyContact(_.tempEmpNo,_.model,i).then(function(e){l.hide(),C(e),_.wizardMode||t.showLocalizedToast("updateSuccess")},function(e){l.hide(),r.success(e)}):u.addEmergencyContact(_.tempEmpNo,_.model).then(function(e){l.hide(),o.unshift(e),_.wizardMode||t.showLocalizedToast("saveSuccess")},function(e){l.hide(),r.success(e)}),n(!0)}}function C(e){for(var t=0;t<o.length;t++)if(o[t].seqno==e.seqno){angular.extend(o[t],e);break}}function w(){n(!1)}var _=this;_.wizardMode=m.current.data.wizardMode,_.title=i||"Emergency Contact";var S={};angular.copy(a,S),_.emergencyContact=S,_.save=b,_.cancel=w,g(),h(),_.wizardMode&&p.updateFormFields(_.schema,_.form,f)}angular.module("app.pim").controller("PimEditEmergencyContactsController",e),e.$inject=["webservice","localizedMessages","emergencyContact","title","dataList","close","loader","toast","formValidationHelper","$scope","$stateParams","$state","emergencyContactService","wizardService","fieldConfiguration"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g){function h(){l.show();var o=!1;null!=t.emp_number&&t.emp_number==c.empNumber&&(o=!0);var n=["emergency_contacts","emergency_attachment","emergency_custom_fields"];g.getEmployee().then(function(r){k.employee=r;var d={permissions:p.getDatagroupPermissions(c.empNumber,n,o),customFieldConfiguration:p.getCustomFieldConfigurationByRoute(s.current.name,k.employee.locationId)};k.wizardMode&&(d.fieldConfiguration=p.getFieldConfigurationByRoute(s.current.name,"PimEmergencyContacts",k.employee.locationId)),i.all(d).then(function(i){k.wizardMode&&(k.fieldConfiguration=i.fieldConfiguration,0===k.fieldConfiguration.length&&(i.permissions.emergency_contacts={read:!1,create:!1,update:!1,"delete":!1})),k.customFieldConfiguration=i.customFieldConfiguration,k.attachmentPermission=i.permissions.emergency_attachment,k.customFieldsPermission=i.permissions.emergency_custom_fields,k.permissions=i.permissions.emergency_contacts,k.permissions.read||k.attachmentPermission.read||k.customFieldsPermission.read||(l.hide(),s.go("403")),k.permissions.read&&u.getEmergencyContacts(k.tempEmpNo).then(function(t){v(),k.emergencyContact=t,k.loaded=!0,k.emergencyContactListHelper=new a.list(k.listData.emergencyContact,k.emergencyContact),k.selectAll=k.emergencyContactListHelper.selectAllItems,k.deselectAll=k.emergencyContactListHelper.deselectAllItems,k.wizardMode?f.updateListFields(k.listData.emergencyContact.listFields,k.fieldConfiguration):0===k.emergencyContact.length&&e.infoToast("No Records Found")}),k.wizardMode||t.$broadcast("setEmployeeDetailsForPimTabs"),l.hide()})})}function v(){k.panelInfo={emergencyContactInfo:{title:"Emergency Contacts",icon:"images/pim/icon_work.svg"}},y()}function y(){var e=[{name:"name",lable:"Name",getter:"name"},{name:"relationship",lable:"Relationship",getter:"relationship"},{name:"homePhone",lable:"Home Telephone",getter:"home_phone"},{name:"mobilePhone",lable:"Mobile",getter:"mobile_phone"},{name:"officePhone",lable:"Work Telephone",getter:"office_phone"}],t=[{colspan:3}],a=[{"class":"edit_item",clickAction:"editEmergencyContact",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:k.permissions["delete"]}];k.listData={emergencyContact:{selectable:!0,selected:[],idGetter:"seqno",listFields:e,showColumnsAnyway:!0,permission:k.permissions,listActions:i}},k.permissions.update&&(k.listData.emergencyContact.extraTH=t,k.listData.emergencyContact.extraTD=a)}function b(e,t){o.showModal("app/pim/emergencycontacts/emergency_contacts_modal.html","PimEditEmergencyContactsController","modal",{emergencyContact:t,dataList:k.emergencyContact,title:e,emergencyContactService:u,fieldConfiguration:k.fieldConfiguration})}function C(){var e={name:"",relationship:"",home_phone:"",mobile_phone:"",office_phone:""};b("Add Emergency Contact",e)}function w(e){b("Edit Emergency Contact",e)}function _(){if(k.listData.emergencyContact.selected.length>0){var t=k.listData.emergencyContact.selected.length;l.show(),u.deleteEmergencyContacts(k.tempEmpNo,k.listData.emergencyContact.selected).then(function(){l.hide();var a="deleteSuccess";k.wizardMode||e.showLocalizedToast(a),k.total-=t,S(k.listData.emergencyContact.selected)},function(e){l.hide(),r.success(e)})}}function S(e){for(var t=k.emergencyContact.length-1;t>=0;t--){var a=e.indexOf(k.emergencyContact[t].seqno);a>-1&&(e.splice(a,1),k.emergencyContact.splice(t,1))}}function D(e){var t=e.obj;if(t.selected)k.listData.emergencyContact.selected.push(t.seqno);else{var a=k.listData.emergencyContact.selected.indexOf(t.seqno);a>-1&&k.listData.emergencyContact.selected.splice(a,1)}}function T(){if(k.listData.emergencyContact.selected.length>0){if(k.wizardMode)return void _();o.showDeleteConfirmationModal().then(function(e){e===!0&&_()})}}function x(){close(!0)}function F(){close(!1)}var k=this;k.wizardMode=s.current.data.wizardMode,k.customFieldService=m,k.employeeService=p,k.title=e.getLocalizedCustom("Emergency Contact"),k.customFieldScreen="emergency",k.emergencyContact="",k.loaded=!1,k.editEmergencyContact=w,k.deleteEmergencyContact=_,k.changeSelection=D,k.deleteSelection=T,k.addEmergencyContact=C,k.confirm=x,k.cancel=F,k.employee={},k.tempEmpNo=c.empNumber,n.isLoggedIn()?h():n.login().then(function(){h()})}angular.module("app.pim").controller("PimEmergencyContactController",e),e.$inject=["localizedMessages","$rootScope","listHelper","$q","modalHelperService","webservice","loader","toast","$state","$stateParams","datagroupPermissions","customFieldService","emergencyContactService","employeeService","wizardService","pimTabs"]}(),function(){"use strict";function e(e,t,a,i,o){function n(e,a,i){var o=a!==!0,n=i===!0,l={};return n&&(l.filter={includePurged:1}),t.call("employees/"+e,"GET",[],l,void 0,o).then(function(e){return e.data.data})}function l(e){return t.call("employees","POST",e,{}).then(function(e){return e.data})}function r(e,a){return t.call("employees/"+e,"PATCH",a,{}).then(function(e){return e.data})}function s(i){var o=i!==!0;return o?e.when(a.account.permissions.employee):t.call("employeePermissions","GET",[],{},void 0,!1).then(function(e){return a.account.permissions=e.data.data,e.data.data})}function c(e){var a=e!==!0;return t.call("terminationReasons","GET",[],{},void 0,a).then(function(e){return e.data.data})}function d(e,a){var i="employees/"+e+"/termination-record";return t.call(i,"POST",a,{},void 0).then(function(e){return e.data.data})}function m(e,a){var i=a!==!0,o="employees/"+e+"/termination-record";return t.call(o,"GET",[],{},void 0,i).then(function(e){return e.data})}function u(e,a){var i="employees/"+e;return t.call(i,"PATCH",a,{},void 0)}function p(e,a){var i=a!==!0,o="employees/"+e+"/salary";return t.call(o,"GET",[],{},void 0,i).then(function(e){return e.data.data})}function f(e){var t="";return e.firstName&&e.lastName&&(t=""!=e.middleName?e.firstName+" "+e.middleName+" "+e.lastName:e.firstName+" "+e.lastName,e.termination_id>0&&(t+=" ("+i.getLocalizedCustom("Past Employee")+")")),t}function g(e){var t="";return e.firstName&&e.lastName&&(t=""!=e.middleName?e.firstName+" "+e.middleName+" "+e.lastName:e.firstName+" "+e.lastName,e.termination_id>0&&!e.deletedEmployee&&(t+=" ("+i.getLocalizedCustom("Past Employee")+")"),e.deletedEmployee&&(t+=" ("+i.getLocalizedCustom("Deleted Employee")+")")),t}function h(e){var a=e.reduce(function(e,t){return e[t.empNumber]=t,e},{}),i={filter:{id:Object.keys(a),size:"small"}};return t.call("employeePhotos","GET",[],i).then(function(e){for(var t=0;t<e.data.data.length;t++){var i=e.data.data[t];a[i.id].photo=i}return e.data.data})}function v(e){var t="";return e.firstName&&e.lastName&&(t=e.firstName+" "+e.lastName),t}function y(e){var t="";return e.firstName&&e.lastName&&(t=e.firstName+" "+e.lastName,e.termination_id>0&&(t+=" ("+i.getLocalizedCustom("Past Employee")+")")),t}function b(e,t,a){return o.getPermissions(a,{Employee:e}).then(function(e){var a={};return t.forEach(function(t){a[t]=e[t]}),a})}function C(a,i,o,n){var l={self:o,entities:{Employee:a}};return e(function(e,a){t.call("permissions","GET",[],l).then(function(t){var a=t.data.data,o={};return i.forEach(function(e){e.indexOf("_attachment")!==-1&&n?o[e]={read:!1,update:!1,create:!1,"delete":!1}:o[e]=a[e]}),e(o)})["catch"](function(e){a(e)})})}function w(e){return t.call("employees/"+e+"/supervisors","GET",[],{}).then(function(e){return e.data})}function _(e){return t.call("employees/"+e+"/subordinates?includeTerminated=true","GET",[],{}).then(function(e){return e.data})}function S(e,a){var i={emp_number:e,chain:a};return t.call("employeeSupervisorIds","GET",{},i).then(function(e){return e.data})}function D(e,a){var i={emp_number:e,chain:a};return t.call("employeeSubordinateIds","GET",{},i).then(function(e){return e.data})}function T(e,a){return t.call("employees/"+e+"/supervisors","POST",a,{}).then(function(e){return e.data})}function x(e,a){return t.call("employees/"+e+"/subordinates","POST",a,{}).then(function(e){return e.data})}function F(e,a,i,o){var n="employees/"+e+"/supervisors/"+a+"/method/"+i;return t.call(n,"PATCH",o,{}).then(function(e){return e.data})}function k(e,a){return t.call("employees/"+e+"/supervisors","DELETE",{data:a},{})}function E(e,a){return t.call("employees/"+e+"/subordinates","DELETE",{data:a},{})}function I(e,a,i,o){var n="employees/"+e+"/subordinates/"+a+"/method/"+i;return t.call(n,"PATCH",o,{}).then(function(e){return e.data})}function A(e,a){var i="employees/"+e+"/employeeAttachments";return t.call(i,"DELETE",{data:a},{}).then(function(e){return e.data})}function M(a,i){var o=a?a.trim().toLocaleLowerCase():null;return o?t.call("employeeIds","GET",[],{id:o}).then(function(t){return t.data.data&&t.data.data.empNumber!=i?e.reject():e.resolve()}):e.resolve()}function L(e){var a={datagroup:e};return t.get("employees/documentTemplates",a,{useCache:!1}).then(function(e){return e.data.data})}function P(t,a,i){return e.when({fieldConfiguration:{}})}function $(t,a,i){return e.when(!0)}function N(e,t,a){}function O(e,t){}var R={getEmployee:n,addEmployee:l,updateEmployee:r,getEmployeePermissions:s,getDatagroupPermissionsWithoutCache:C,getTerminationReasons:c,terminateEmployment:d,activateEmployment:u,getSalaryRecord:p,getFullName:f,getPhotos:h,getFullNameWithDeleted:g,getTerminationRecord:m,getFirstAndLastNameWithoutTags:v,getFirstAndLastNameWithTags:y,getDatagroupPermissions:b,getSupervisors:w,getSubordinates:_,getSupervisorIds:S,getSubordinateIds:D,addSupervisor:T,addSubordinate:x,updateSupervisor:F,updateSubordinate:I,deleteSupervisors:k,deleteSubordinates:E,deleteAttachments:A,checkIfDuplicateId:M,getFieldConfigurationByRoute:P,getCustomFieldConfigurationByRoute:$,updateFormFields:N,updateListFields:O,getDocumentTemplates:L};return R}angular.module("app.pim").factory("employeeService",e),e.$inject=["$q","webservice","$rootScope","localizedMessages","datagroupPermissions"]}(),function(){"use strict";function e(e,t,a,i,o,n,l){function r(){o.getUserData().then(function(e){p.searchAllowed=e.isAdmin||"Supervisor"==e.usertype||e.isDepartmentHead}),e.$on("changeCalledFromMyShortcutsVariable",function(){p.calledFromMyShortcuts=!1}),e.$on("initialAccessWithNoPersistedFilters",function(e,t){p.initialAccessWithNoPersistedFilters=t.value}),n.bindTo(t).add({combo:"/",description:"Filter list",callback:s}).add({combo:"e",description:"Employee Quick Search",callback:function(){l("employee_name_quick_filter_value")}})}function s(){p.filterClickable&&(p.filterClickable=!1,e.$broadcast("filter",[]))}function c(){p.filterClickable=!0}function d(){e.$broadcast("search",{name:p.employeeSearchString,termination:"1"})}function m(t){"undefined"!=typeof t&&(p.employeeSearchString=t.title,e.$broadcast("search",{id:t.originalObject.empNumber,termination:"1"}))}function u(e,t){p.employeeSearchString=e;var a={name:"userInputString",filter:{employee_name_or_id:e},fields:"empNumber,firstName,middleName,lastName,employeeId","page[offset]":"0","page[limit]":"50",sort:"fullName"};return i.call("employees","GET",[],a,t).then(function(e){return e.data.data})}var p=this;p.title=a.current.data.title,p.calledFromMyShortcuts=a.params.calledFromMyShortcuts,p.employeeSearchString="",p.pastEmployeeSuffix=null,p.searchAllowed=!1,p.filter=s,p.search=d,p.employeeSelected=m,p.fetchMatchingEmployees=u,p.filterClickable=!0,p.initialAccessWithNoPersistedFilters=!1,r(),t.$on("employee-filter-closed",c)}angular.module("app.pim").controller("EmployeeListNavbarController",e),e.$inject=["$rootScope","$scope","$state","webservice","datagroupPermissions","hotkeys","focus"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w,_,S){function D(){X.filters=o.filterParameters,m.getUserData().then(function(e){"ESS"!=e.usertype||e.isDepartmentHead||"pim.employees"!=i.current.name?u.getEmployeePermissions().then(function(e){return X.permissions={create:e.create,"delete":e["delete-active"]||e["delete-terminated"]},t.add_employee_trigger&&X.permissions.create&&!t.block_multiple_add_employee_modal?(t.block_multiple_add_employee_modal=!0,r.show(),I(X.page).then(function(){q(),t.add_employee_trigger=!1,setTimeout(function(){X.add_employee_trigger=!1},2e3),r.hide()})):X.initialAccessWithNoPersistedFilters?void 0:I(X.page)}).then(function(){n.call("organization","GET",[],{},void 0,!0).then(function(e){X.costCenterEnabled=e.data.data.costCenterEnabled}),x()}):(i.go("403"),r.hide())})}function T(){S(function(){t.$broadcast("markMenuItemAsCurrent",{stateName:"pim.employees"})})}function x(){return y.fetchDependentData().then(function(e){X.locations=e.locations,X.empAddLocations=e.empAddLocations,X.locationsLoaded=!0})}function F(e){return e===X.sort?"arrow_upward":"-"+e===X.sort?"arrow_downward":""}function k(e){X.sort===e?X.sort="-"+e:X.sort==="-"+e?X.sort=e:X.sort=e,I(X.page)}function E(e){if(e.selected)X.selected.push(e.empNumber);else{var t=X.selected.indexOf(e.empNumber);t>-1&&X.selected.splice(t,1)}}function I(e){X.filters&&(X.filters.employee_name&&(X.filters.employee_name_or_id=X.filters.employee_name,delete X.filters.employee_name),X.filters.supervisor_name&&(X.filters.supervisor_name_or_id=X.filters.supervisor_name,delete X.filters.supervisor_name),X.filters.employee&&delete X.filters.employee,X.filters.supervisor&&delete X.filters.supervisor,X.filters.employee_name_or_id&&X.filters.employee_id_list&&X.filters.employee_id_list.length>0&&(X.filters.employee_name_or_id=X.filters.employee_name_or_id.replace(" ("+b.instant("Past Employee")+")","")),X.filters.supervisor_name_or_id&&X.filters.supervisorId&&(X.filters.supervisor_name_or_id=X.filters.supervisor_name_or_id.replace(" ("+b.instant("Past Employee")+")","")));var t={"page[offset]":(e-1)*X.pageSize,"page[limit]":X.pageSize,sort:X.sort,include:"supervisors,jobTitle,subDivision,locations,employeeStatus,fullSubUnitHierarchy,costCentre",includeHasAccessiblePimTabs:!0};return X.filters&&(t.filter=V(X.filters)),r.startProgress(),n.call("employees","GET",[],t).then(function(t){X.employees=t.data.data,X.total=t.data.meta.total,X.meta=t.data.meta,X.page=e,h[X.sessionStorageKeyLastSearchFilters]=X.filters,X.lastPage=Math.ceil(X.total/X.pageSize),0==X.employees.length?l.infoToast("No Records Found"):u.getPhotos(X.employees)})["finally"](function(){r.completeProgress()})}function A(e,t){var a={name:"userInputString",filter:{employee_name:e},fields:"empNumber,firstName,middleName,lastName","page[offset]":"0","page[limit]":"10"};return n.call("employees","GET",[],a,t).then(function(e){return e.data.data})}function M(e,t){var a={name:"userInputString",filter:{employee_name:e,is_supervisor:1},fields:"empNumber,firstName,middleName,lastName","page[offset]":"0","page[limit]":"10"};return n.call("employees","GET",[],a,t).then(function(e){return e.data.data})}function L(){for(var e,t=0;t<X.employees.length;t++)if(X.employees[t].empNumber===X.empNumber){t>1&&(e=X.employees[t-1]);break}e&&R(e)}function P(){for(var e,t=0;t<X.employees.length;t++)if(X.employees[t].empNumber===X.empNumber){t+1<X.employees.length&&(e=X.employees[t+1]);break}e&&R(e)}function N(e){var t="";if(e)for(var a=0;a<e.length;a++)t+=e[a].firstName+" "+e[a].lastName,e[a].termination_Id&&(t+=" ("+b.instant("Past Employee")+")"),a<e.length-1&&(t+=",");return t}function O(e,t){null!==e&&"object"==typeof e&&e.hasAccessiblePimTabs&&R(e,t)}function R(e,t){r.show(),null!==e&&"object"==typeof e?X.empNumber=e.empNumber:X.empNumber=e,d.setEmployee(!1),"undefined"==typeof t?d.getAccessiblePimTabs(X.empNumber).then(function(e){if(e.length>0){var t=e[0];if("uiSref"in t)if(r.hide(),"tabId"in t&&t.tabId){var o=angular.copy(i.params);o.empNumber=X.empNumber,o.tabId=t.tabId,i.go(t.originalState,o)}else i.go(t.uiSref,{empNumber:X.empNumber});else if("link"in t){var n=t.link+X.empNumber;a.location.href=n}}else r.hide(),i.go("pim.employees")}):(r.hide(),i.go(t,{empNumber:X.empNumber}))}function z(e,t){t.name||t.id?(X.filters={},"termination"in t?X.filters.termination=t.termination:X.filters.termination="2","name"in t&&(X.filters.employee_name_or_id=t.name),"id"in t&&(X.filters.employee_id_list=[t.id]),I(1)):v.getPersistedParameters(ee).then(function(e){if(e){X.filters=e;var t={};angular.copy(o,t),t.filterParameters=e,o=t,I(1)}})}function j(){var e={close:function(){}},a=!1,i=angular.copy(X.filters);c.showModal({templateUrl:"app/pim/employeeList/employee_search.html",controller:"PimSearchController",controllerAs:"modal",inputs:{currentFilter:X.filters,modalFunctions:e,costCenterEnabled:X.costCenterEnabled}}).then(function(o){$(o.element).openModal({complete:function(){a||e.close(!1)}}),o.close.then(function(e){a=!0,t.$broadcast("employee-filter-closed",[]),e!==!1?G(e):X.filters=i})})}function V(e){return e.hasOwnProperty("is_persisted")&&delete e.is_persisted,e}function G(t){X.filters=B(t),t.is_persisted&&v.persistParameters(ee,X.filters),e.$emit("changeCalledFromMyShortcutsVariable"),X.initialAccessWithNoPersistedFilters=!1,e.$emit("initialAccessWithNoPersistedFilters",{value:!1}),I(1)}function B(e){var t={};return e.id&&(t.id=e.id),e.employee_name&&(t.employee_name=e.employee_name.trim()),!e.hasOwnProperty("employee_name")&&e.employee_name_or_id&&(t.employee_name=e.employee_name_or_id.trim()),!e.employee_id_list||e.hasOwnProperty("employee")&&!e.employee||(t.employee_id_list=e.employee_id_list),e.employee&&(t.employee_id_list=[e.employee.description.empNumber||e.employee.originalObject.empNumber],t.employee_name=e.employee.title.trim()),e.supervisor_name&&(t.supervisor_name=e.supervisor_name.trim()),!e.supervisorId||e.hasOwnProperty("supervisor")&&!e.supervisor||(t.supervisorId=e.supervisorId),e.supervisor&&(t.supervisorId=e.supervisor.description.empNumber||e.supervisor.originalObject.empNumber,t.supervisor_name=e.supervisor.title.trim()),e.employee_status&&"0"!==e.employee_status&&(t.employee_status=e.employee_status),e.sub_unit&&"0"!==e.sub_unit&&(t.sub_unit=e.sub_unit),e.job_title&&"0"!==e.job_title&&(t.job_title=e.job_title),e.termination&&(t.termination=e.termination),e.location&&"-1"!==e.location&&(t.location=e.location),e.costCentre?(t.cost_centre_id=e.costCentre.originalObject.id,t.cost_code=e.costCentre.originalObject.cost_code):(t.cost_centre_id=null,t.cost_code=""),t}function q(){var e=!1;return W().then(function(){return n.call("employee-wizard/status","GET",[],{}).then(function(t){return e=t.data.data.enabled,H(t.data)})}).then(function(t){t&&t.firstName&&(e?(d.setEmployee(!1),i.go("pim.wizard",{data:{}})):(U(t),R(t)))})}function H(e){var a=e.data.enabled,i=e.meta.permitted;if(a&&!i){var o=w.getWizardPermissionMessage(e.meta.inaccessibleDataGroups);return s.warning(o),t.add_employee_trigger=!1,t.block_multiple_add_employee_modal=!1,p.when(!1)}var l={close:function(){}},r=C.get(a?"pimWizardServiceFactory":"pimServiceFactory"),c=r.getEmployeeService();return n.call("employees","GET",[],{}).then(function(a){return X.meta.nextEmployeeId=a.data.meta.nextEmployeeId,_.showModal("app/pim/employeeList/new_employee_modal.html","PimNewEmployeeController","modal",{employeeMetaData:X.meta,modalFunctions:l,wizardStatus:e,employeeService:c}).then(function(e){return t.block_multiple_add_employee_modal=!1,t.$broadcast("markMenuItemAsCurrent",{stateName:"pim.add_employee"}),e})})}function U(e){e.locations=[e.Location],X.employees.unshift(e),X.pageSize<=X.total?X.employees.pop():X.total++,X.meta.nextEmployeeId++,X.meta.total++}function W(){return g.getSettings().then(function(e){return!e.limits.employee_limit||f.checkEmployeeLimit().then(function(e){return e.allowed?(e.message&&s.info(e.message),!0):(s.error(e.message),p.reject())})})}function Y(){X.selected=[];for(var e=0;e<X.employees.length;e++)X.employees[e].selected=!0,X.selected.push(X.employees[e].empNumber)}function J(){X.selected=[];for(var e=0;e<X.employees.length;e++)X.employees[e].selected=!1}function K(e){X.pageSize=e,I(1)}function Z(e){I(e)}function Q(){X.employees||g.getSetting("page_size").then(function(e){X.pageSize=e,D()})}var X=this,ee="employee_list";if(X.add_employee_trigger=t.add_employee_trigger,X.add_employee_trigger=t.add_employee_trigger,X.pageSize=50,X.page=1,X.total=0,X.selected=[],X.sort="lastName",X.initialAccessWithNoPersistedFilters=!1,X.state=i,X.searchFilters={},X.locations=[],X.locationsLoaded=!1,X.viewProfile=R,X.addEmployee=q,X.nextEmployee=P,X.prevEmployee=L,X.filterEmployeesByListForm=G,
X.getSupervisorList=N,X.changeSelection=E,X.sortBy=k,X.getSortIcon=F,X.search=z,X.fetchMatchingEmployees=A,X.fetchMatchingSupervisors=M,X.viewProfileIfHasAccessablePimTabs=O,X.selectAll=Y,X.deselectAll=J,X.fetchEmployees=I,X.changePageSize=K,X.viewPage=Z,X.selectedemployees=[],X.sessionStorageKeyLastSearchFilters="pim_employee_list_last_search_filters",T(),"pim.employees"===i.current.name)if(o.filterParameters)Q();else if(h[X.sessionStorageKeyLastSearchFilters]){var te={};angular.copy(o,te),te.filterParameters=h[X.sessionStorageKeyLastSearchFilters],o=te,Q()}else v.getPersistedParameters(ee).then(function(t){if(t){var a={};angular.copy(o,a),a.filterParameters=t,o=a}else X.searchFilters.is_persisted=!0,X.initialAccessWithNoPersistedFilters=!0,e.$emit("initialAccessWithNoPersistedFilters",{value:!0});Q()});e.$on("search",z),e.$on("filter",j),e.$on("change-employee",function(e,t,a){R(t,a)})}angular.module("app.pim").controller("PimListController",e),e.$inject=["$scope","$rootScope","$window","$state","$stateParams","webservice","localizedMessages","loader","toast","ModalService","pimTabs","datagroupPermissions","employeeService","$q","licenseService","settingsService","$localStorage","dataListSettingsService","employeeListService","$translate","$injector","wizardService","modalHelperService","$timeout"]}(),function(){"use strict";function e(e,t,a,i,o,n){function l(){d.persistedFilters={name:null,id:null,status:"0",supervisor:null,jobtitle:"0",subunit:"0",terminated:"1",location:"-1",employee:null,costCentre:null,is_persisted:!1},i.getPersistedParameters(m).then(function(e){e&&(d.persistedFilters=e)})}function r(){o(d.filters)}function s(){o(!1)}function c(){d.filters=d.persistedFilters,r(),n.$broadcast("angucomplete-alt-with-employee-id:clearInput")}var d=this,m="employee_list";t.close=o,d.search=r,d.cancel=s,d.reset=c,d.costCenterEnabled=a,d.filters=e,l()}angular.module("app.pim").controller("PimSearchController",e),e.$inject=["currentFilter","modalFunctions","costCenterEnabled","dataListSettingsService","close","$rootScope"]}(),function(){"use strict";function e(e,t){function a(){var a={};return a.jobTitles=t.call("jobTitles","GET",[],{},void 0,!0).then(function(e){return e.data.data}),a.employmentStatus=t.call("employmentStatus","GET",[],{},void 0,!0).then(function(e){return e.data.data}),a.locations=t.call("employees/locations","GET",[],{},void 0,!0).then(function(e){return e.data.data}),a.empAddLocations=t.call("employees/locations","GET",[],{operation:"edit"},void 0,!0).then(function(e){return e.data.data}),a.subunitTree=t.call("subunits","GET",[],{tree:!0},void 0,!0).then(function(e){return e.data.data}),e.all(a).then(function(e){return e})}var i={fetchDependentData:a};return i}angular.module("app.pim").factory("employeeListService",e),e.$inject=["$q","webservice"]}(),function(){"use strict";function e(){function e(e,t,a,i){}var a={restrict:"E",templateUrl:"app/pim/employeeList/employeeSearchDirective/employee-search.template.html",scope:{formElementPrefix:"@",filters:"=",costCenterEnabled:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return a}function t(e,t,a,i,o,n,l,r,s){function c(){if(x.filters&&Object.keys(x.filters).length>0){x.filters.id=x.filters.id?x.filters.id:null,x.filters.employee_status=x.filters.employee_status?x.filters.employee_status:"0",x.filters.sub_unit=x.filters.sub_unit?x.filters.sub_unit:"0",x.filters.job_title=x.filters.job_title?x.filters.job_title:"0",x.filters.termination=x.filters.termination?x.filters.termination:"1",x.filters.location=x.filters.location?x.filters.location:"-1",x.filters.employee_name_or_id&&""!=x.filters.employee_name_or_id&&(x.employeeName=x.filters.employee_name_or_id),x.filters.employee_id_list&&S(x.filters.employee_id_list[0]).then(function(e){if(e.length){var t=e[0];if(t){var i=["firstName","middleName","lastName"],o=i.map(function(e){return t[e]}).filter(function(e){return""!==e});x.employeeName=o.join(" ")}t.termination_id&&(x.employeeName+=" ("+a.instant("Past Employee")+")"),x.filters.employee={originalObject:t,description:t,title:x.employeeName}}else x.filters.employee_name&&""!=x.filters.employee_name&&(x.employeeName=x.filters.employee_name)});var e=x.filters.supervisor_name;if("undefined"==typeof e&&(e=x.filters.supervisor_name_or_id),x.filters.supervisorId){var t=$.trim(e).split(" ");y(t[0]).then(function(e){if(e.length){var t=0;for(t=0;t<e.length;t++){var i=e[t];if(i.empNumber===x.filters.supervisorId){x.supervisorName=i.firstName+"  "+i.lastName,i.termination_id&&(x.supervisorName+=" ("+a.instant("Past Employee")+")"),x.filters.supervisor={originalObject:i,description:i,title:x.supervisorName};break}}}})}else e&&(x.supervisorName=e,x.filters.supervisor_name=e);x.filters.cost_centre_id?o.getCostCentreById(x.filters.cost_centre_id).then(function(e){x.filters.costCentre={originalObject:e,description:e.cost_code,title:e.cost_code},x.filters.cost_code=e.cost_code}):(x.filters.costCentre=null,x.filters.cost_code=x.filters.cost_code)}else x.filters={name:null,id:null,employee_status:"0",supervisor:null,job_title:"0",sub_unit:"0",termination:"1",location:"-1",employee:null,costCentre:null};x.filters.is_persisted=!1,u(x.filters)}function d(){l.getPersistedParameters(F).then(function(e){e&&(x.filters.is_persisted=!1)})}function m(e){var t={};return e.id&&(t.id=e.id),e.employee_name&&(t.employee_name=e.employee_name),e.employee_name_or_id&&(t.employee_name=e.employee_name_or_id),e.employee_id_list&&(t.employee_id_list=e.employee_id_list),e.employee&&(t.employee_id_list=[e.employee.description.empNumber||e.employee.originalObject.empNumber],t.employee_name=e.employee.title),e.supervisor_name_or_id&&(t.supervisor_name=e.supervisor_name_or_id),e.supervisor_name&&(t.supervisor_name=e.supervisor_name),!e.supervisorId||e.hasOwnProperty("supervisor")&&!e.supervisor||(t.supervisorId=e.supervisorId),e.supervisor&&(t.supervisorId=e.supervisor.description.empNumber||e.supervisor.originalObject.empNumber,t.supervisor_name=e.supervisor.title),e.employee_status&&"0"!==e.employee_status&&(t.employee_status=e.employee_status),e.sub_unit&&"0"!==e.sub_unit&&(t.sub_unit=e.sub_unit),e.job_title&&"0"!==e.job_title&&(t.job_title=e.job_title),e.termination&&(t.termination=e.termination),e.location&&"-1"!==e.location&&(t.location=e.location),e.costCentre?(t.cost_centre_id=e.costCentre.originalObject.id,t.cost_code=e.costCentre.originalObject.cost_code):(t.cost_centre_id=null,t.cost_code=""),t}function u(e){l.getPersistedParameters(F).then(function(t){if(t){var a=m(e);_.isEqual(a,t)&&(x.filters.is_persisted=!0)}else x.filters.is_persisted=!0})}function p(){return r.fetchDependentData().then(function(e){x.jobTitles=e.jobTitles,x.subUnits=f(e.subunitTree),x.empStatuses=e.employmentStatus,x.locations=g(e.locations)})}function f(e){var e=e.map(function(e){return e.name=e.name.replace(Array(5*e.level+1).join(""),""),e.name=Array(5*e.level+1).join("")+e.name,e});return e}function g(t){for(var a={},o={},n="",l=0;l<t.length;l++)t[l].country.code in a||(a[t[l].country.code]=[],o[t[l].country.code]=t[l].country.name),a[t[l].country.code].push(t[l]);var r=e.getSortedCountryList(a),s=[];for(var c in r){var d=r[c];a[d].sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0});for(var m="",l=0;l<a[d].length;l++)m+=","+a[d][l].id;s.push({value:m.replace(/^,/,""),name:n+i.getLocalizedCustom(o[d])});for(var l=0;l<a[d].length;l++)s.push({value:a[d][l].id,name:n+n+a[d][l].name})}return s}function h(e,t){x.filters.employee_name=e;var a={name:"userInputString",filter:{employee_name_or_id:e,termination:"2"},fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId","page[offset]":"0","page[limit]":"10"};return C(a,t)}function v(e,t){x.filters.supervisor_name=e;var a={userInput:e,isAutoComplete:!0,fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId"};return w(a,t)}function y(e,t){var a={userInput:e,isAutoComplete:!0,fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId"};return w(a,t)}function b(e,a){x.filters.costCentreNameInputString=e;var i={userInputString:e,offset:"0",limit:"50"};return t.call("costCentres","GET",[],i,a).then(function(e){return e.data.data})}function C(e,i){return x.pastEmployeeSuffix||(x.pastEmployeeSuffix=" ("+a.instant("Past Employee")+")"),t.call("employees","GET",[],e,i).then(function(e){for(var t=0;t<e.data.data.length;t++)e.data.data[t].termination_id&&(e.data.data[t].past_employee=x.pastEmployeeSuffix);return e.data.data})}function w(e,i){return x.pastEmployeeSuffix||(x.pastEmployeeSuffix=" ("+a.instant("Past Employee")+")"),t.call("supervisors","GET",[],e,i).then(function(e){for(var t=0;t<e.data.data.length;t++)e.data.data[t].termination_id&&(e.data.data[t].past_employee=x.pastEmployeeSuffix);return e.data.data})}function S(e){var a={name:"userInputString",filter:{employee_id_list:[e],termination:"2"},fields:"empNumber,firstName,middleName,lastName,past_employee,employeeId,termination_id","page[offset]":"0","page[limit]":"1"};return t.call("employees","GET",[],a).then(function(e){return e.data.data})}function D(e){e||(x.filters.employee_name=""),l.getPersistedParameters(F).then(function(e){e&&(x.filters.is_persisted=!1)})}function T(e){e||(x.filters.supervisor_name=""),l.getPersistedParameters(F).then(function(e){e&&(x.filters.is_persisted=!1)})}var x=this,F="employee_list";x.fetchMatchingSupervisors=v,x.fetchMatchingEmployees=h,x.fetchMatchingCostCentres=b,x.changePersistedValue=d,x.setEmployeeNameString=D,x.setSupervisorNameString=T;var k="emp_search_lst"===x.formElementPrefix;p().then(function(){k&&s.show(),c()})["finally"](function(){k&&s.hide()})}angular.module("app.pim").directive("employeeSearch",e),t.$inject=["formHelper","webservice","$translate","localizedMessages","costCentreService","$q","dataListSettingsService","employeeListService","loader"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w,S,D,T){function x(){if(U){var e=[];p.meta.inaccessibleDataGroups.forEach(function(t){e=e.concat(t.locations)}),K=_.uniq(e)}}function F(){x(),y.getPermissions().then(function(e){if(e.system_users){H.canCreateUsers=e.system_users.create;var o={};o.defaultAuthenticationSettings=a.call("defaultAuthenticationSettings","GET",[]),o.locationData=g.fetchDependentData().then(function(e){H.locationData=e.empAddLocations}),H.canCreateUsers&&(o.userRoles=a.call("userRoles/assignable-lists","GET",[],{}),o.user_regions=a.call("user-regions","GET",[],{include:"Location"})),t.all(o).then(function(e){if(J=e.defaultAuthenticationSettings.data.data,H.canCreateUsers){H.adminRolesTitleMapAndEnum=E(e.userRoles.data.data.admin),H.essRolesTitleMapAndEnum=E(e.userRoles.data.data.ess),H.superviosrRolesTitleMapAndEnum=E(e.userRoles.data.data.supervisor),H.regionTree=e.user_regions.data.data.map(function(e){return e.name=i.getLocalizedCustom(e.name),e});for(var t=0;t<H.adminRolesTitleMapAndEnum.titleMap.length;t++)H.adminRolesTitleMapAndEnum.titleMap[t].name===i.getLocalizedCustom("Global Admin")&&(H.globalAdminUserRoleId=H.adminRolesTitleMapAndEnum.titleMap[t].value)}Y=e.defaultAuthenticationSettings.data.meta.passwordRequired,H.operationalcountries=k(H.regionTree),n.getSettings().then(function(e){H.maxAttachmentSize=e.max_attachment_size,H.allowedImageTypes=e.allowed_image_types;var t=0,a=0;M(),t=_.findIndex(H.form[0].items,{htmlRowClass:"add-employee-details-row"}),t!==-1&&(a=_.findIndex(H.form[0].items[t].items,{htmlRowClass:"admin-region-selection-section"})),D.setForm(H.formSchema,H.form[0].items[t].items[a].items,H.formModel,H.regionTree,H.operationalcountries,2,H.form[0].items[t].items[a],H.switchCondition,H.multiSelectCondition)})})}})}function k(e){for(var t={},a=0;a<e.length;a++)t[e[a].id]=e[a].name;return t}function E(e){var t=[],a=[];return _.forOwn(e,function(e,o){t.push({value:e.id,name:i.getLocalizedCustom(e.name)}),a.push(e.id)}),t.sort(function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}),{"enum":a,titleMap:t}}function I(e){var t=!0;if(U&&(r.remove(),K.indexOf(e)!==-1)){t=!1;var a=S.getWizardPermissionMessage(p.meta.inaccessibleDataGroups,e);r.warning(a)}return t}function A(){H.formModel.employeeFullName.firstName.length>H.formSchema.properties.employeeFullName.maxLength&&(H.formModel.employeeFullName.firstName=""),H.formModel.employeeFullName.middleName.length>H.formSchema.properties.employeeFullName.maxLength&&(H.formModel.employeeFullName.middleName=""),H.formModel.employeeFullName.lastName.length>H.formSchema.properties.employeeFullName.maxLength&&(H.formModel.employeeFullName.lastName="")}function M(){var o=l.getEnumAndTitleMapForSelect(B(H.locationData),{name:"name",value:"value"},!0);if(H.formSchema={type:"object",title:"Filter Appraisals",name:"test_name",properties:{employeeFullName:{title:"Employee Full Name",type:"object",maxLength:30},autoGenerateEmployeeId:{title:"Auto Generate Employee ID",type:"boolean"},employeeId:{title:"Employee Id",type:"string",maxLength:50},employeePicture:{title:"Add photograph",type:"object"},employeePhotoPreview:{title:"Photograph Preview",type:"string"},hasLoginDetails:{title:"Create Login Details",type:"boolean"},username:{title:"User Name",type:"string",minLength:5,maxLength:50},setPasswordOnFirstLogin:{title:"Set password on first login",type:"boolean","default":!1},emp_work_email:{title:"Work Email",type:["string","null"],maxLength:50},password:{title:"Password",type:"string",minLength:8,maxLength:64},confirmPassword:{title:"Confirm Password",type:"string"},status:{title:"Status",type:"string","enum":["Enabled","Disabled"]},location:{title:"Location",type:"string","enum":o["enum"]},joinedDate:{title:"Joined Date",type:["null","object"]},essRoleId:{title:"ESS Role",type:"string","enum":H.essRolesTitleMapAndEnum["enum"]},adminRoleId:{title:"Admin Role",type:"string","enum":H.adminRolesTitleMapAndEnum["enum"]},supervisorRoleId:{title:"Supervisor Role",type:"string","enum":H.superviosrRolesTitleMapAndEnum["enum"]}},required:["employeeFullName","username","emp_work_email","password","confirmPassword","location","joinedDate","essRoleId","supervisorRoleId"]},H.passwordField={type:"password",htmlClass:"col-6",key:"password",toggleSave:q,strengthCheck:!0,minLength:H.formSchema.properties.password.minLength,maxLength:H.formSchema.properties.password.maxLength,ngModelOptions:{allowInvalid:!0},onChange:function(e){(H.formModel.confirmPassword||!e&&!H.formModel.confirmPassword)&&L(H.formModel.confirmPassword)},validationMessage:{201:w.textLengthExceedValidation.message(H.formSchema.properties.password.maxLength),200:i.getLocalizedCustomWithVariables("Your password should have at least {{min}} characters.",{min:H.formSchema.properties.password.minLength}),302:i.getLocalizedCustom("Required")}},!Y){var n=H.formSchema.required,r=n.indexOf("password");n.splice(r,1);var m=n.indexOf("confirmPassword");n.splice(m,1),H.passwordField.confirmationStatues="",H.formSchema.properties.username.minLength=0}J.enforcePasswordStrength&&"Enable"===J.defaultSettingsStatus&&(H.passwordField.passwordEnforced=!0);var u={type:"add-employee-photo-preview",htmlClass:"col-12",key:"employeePhotoPreview",src:"images/default-photo.png","for":"employeePicture"};H.form=[{type:"row",htmlClass:"col-12",items:[{type:"row",htmlClass:"col-4 new-employee-photo-attach-column",items:[{type:"photo-attachment-preview-file",htmlClass:"col-12 new-employee-photo-preview",key:"employeePicture",onFileChange:V,previewOn:u,validationMessage:{fileSize:i.getLocalizedCustom("Attachment size exceeded"),fileType:i.getLocalizedCustom("Attachment type invalid")},allowedFileTypes:H.allowedImageTypes,maxSize:H.maxAttachmentSize},u]},{type:"row",htmlRowClass:"add-employee-details-row",htmlClass:"col-8",items:[{type:"row",name:"test_name",htmlClass:"col-12",items:[{type:"employee-name",htmlClass:"col-12",key:"employeeFullName",maxLength:30,placeholders:{firstName:i.getLocalizedCustom("First Name"),middleName:i.getLocalizedCustom("Middle Name"),lastName:i.getLocalizedCustom("Last Name")},ngModelOptions:{allowInvalid:!0},validationMessage:{201:w.textLengthExceedValidation.message(H.formSchema.properties.employeeFullName.maxLength),302:i.getLocalizedCustom("Required")}}]},{type:"row",htmlClass:"col-12",items:[{type:"switch",htmlClass:"col-5 auto-generate-employee-id",key:"autoGenerateEmployeeId",customHint:i.getLocalizedCustomWithVariablesWithoutEscaping('Hint: Last Employee ID is "{{lastEmpId}}"',{lastEmpId:H.lastEmployeeId})}]},{type:"row",htmlClass:"col-12",items:[{type:"text",htmlClass:"col-3",key:"employeeId",placeholder:i.getLocalizedCustom("Employee Id"),condition:function(){return!H.formModel.autoGenerateEmployeeId},validationMessage:{employeeIdExists:i.getLocalizedCustom("Employee Id Exists"),201:w.textLengthExceedValidation.message(H.formSchema.properties.employeeId.maxLength)},$asyncValidators:{"tv4-employeeIdExists":function(e){return f.checkIfDuplicateId(e)}}},{type:"date",htmlClass:"col-4",key:"joinedDate",resetDefaultDate:W,validationMessage:{302:i.getLocalizedCustom("Required")}},{type:"select",htmlClass:"col-5",key:"location",titleMap:o.titleMap,onChange:I,validationMessage:{302:i.getLocalizedCustom("Required")}}]},{type:"row",htmlClass:"col-12",items:[{type:"subheading",htmlClass:"col-12",hideLabel:!0}]},{type:"row",htmlClass:"col-12",items:[{type:"switch",htmlClass:"col-4",key:"hasLoginDetails",condition:function(){return H.canCreateUsers}}]},{type:"row",htmlClass:"col-12",condition:function(){return H.formModel.hasLoginDetails},items:[{type:"text",htmlClass:"col-6 userNameInput",key:"username",ngModelOptions:{debounce:100},validationMessage:{userexists:i.getLocalizedCustom("User Name Exists"),201:w.textLengthExceedValidation.message(H.formSchema.properties.username.maxLength),200:i.getLocalizedCustomWithVariables("Should have at least {{minLength}} characters",{minLength:H.formSchema.properties.username.minLength}),302:i.getLocalizedCustom("Required")},$asyncValidators:{"tv4-userexists":function(e){var i=t.defer();return e?a.call("systemUsers","GET",[],{filter:{uname:e},usernameAvailabilityCheck:!0}).then(function(e){e.data.data instanceof Array&&e.data.data.length>0?i.reject():i.resolve()}):d(function(){i.resolve()}),i.promise}}},{type:"radiobuttons",htmlClass:"col-6",emptyOption:!1,makeHorizontal:!0,key:"status",titleMap:[{value:"Enabled",name:i.getLocalizedCustom("Enabled")},{value:"Disabled",name:i.getLocalizedCustom("Disabled")}]}]},{type:"row",htmlClass:"col-12",items:[{type:"checkbox",htmlClass:"col-4",key:"setPasswordOnFirstLogin",condition:function(){return H.formModel.hasLoginDetails&&H.formModel.notifyEmployeeToSetPassword}}]},{type:"row",htmlClass:"col-12",condition:function(){return H.formModel.hasLoginDetails&&H.formModel.setPasswordOnFirstLogin},items:[{type:"text",htmlClass:"col-12",key:"emp_work_email",ngModelOptions:{debounce:1e3},validationMessage:{emailUniquenessValidation:i.getLocalizedCustom("Already exists"),workEmailFormatValidation:w.email.message,201:w.textLengthExceedValidation.message(H.formSchema.properties.emp_work_email.maxLength),302:i.getLocalizedCustom("Required")},$validators:{workEmailFormatValidation:w.email.validator},$asyncValidators:{"tv4-emailUniquenessValidation":N}}]},{type:"row",htmlClass:"col-12",condition:function(){return H.formModel.hasLoginDetails&&!H.formModel.setPasswordOnFirstLogin},items:[{type:"container",htmlClass:"col-12 password-section-container form-group",items:[{type:"row",htmlClass:"col-12 remove-bottom-margin remove-padding",items:[H.passwordField,{type:"password",htmlClass:"col-6",key:"confirmPassword",validationMessage:{unmatchedPassword:i.getLocalizedCustom("Passwords do not match"),302:i.getLocalizedCustom("Required")},onChange:L,ngModelOptions:{allowInvalid:!0}}]},{type:"password-help-text",htmlClass:"col-8 remove-bottom-margin password-help-text-top-padding",condition:function(){return H.passwordField.strengthCheck}}]}]},{type:"row",htmlClass:"col-12",condition:function(){return H.formModel.hasLoginDetails},items:[{type:"subheading",htmlClass:"col-12",hideLabel:!0}]},{type:"row",htmlClass:"col-12",condition:function(){return H.formModel.hasLoginDetails},items:[{type:"select",htmlClass:"col-4",key:"essRoleId",titleMap:H.essRolesTitleMapAndEnum.titleMap,validationMessage:{302:i.getLocalizedCustom("Required")}},{type:"select",htmlClass:"col-4",key:"supervisorRoleId",titleMap:H.superviosrRolesTitleMapAndEnum.titleMap,validationMessage:{302:i.getLocalizedCustom("Required")}},{type:"select",htmlClass:"col-4",key:"adminRoleId",condition:function(){return h.is_global_admin&&H.formModel.hasLoginDetails},titleMap:H.adminRolesTitleMapAndEnum.titleMap}]},{type:"row",htmlRowClass:"admin-region-selection-section",htmlClass:"col-12",condition:function(){return H.formModel.hasLoginDetails&&H.formModel.adminRoleId>1},items:[]}]}]}],H.switchCondition=function(){return H.formModel.hasLoginDetails&&H.formModel.adminRoleId>1},H.multiSelectCondition=function(){return!H.formModel.allRegions&&H.formModel.hasLoginDetails&&H.formModel.adminRoleId>1},H.formModel={status:"Enabled",employeeFullName:{firstName:"",middleName:"",lastName:""},employeeId:"",location:"",joinedDate:new Date(moment(new Date)),essRoleId:"2",supervisorRoleId:"3",adminRoleId:"",allRegions:!0,notifyEmployeeToSetPassword:J.notifyEmployeeToSetPassword,setPasswordOnFirstLogin:J.notifyEmployeeToSetPassword,emp_work_email:"",autoGenerateEmployeeId:!0},e.$watch("modal.formModel.adminRoleId",function(t){e.$broadcast("schemaFormRedraw"),A()}),e.$watch("modal.formModel.hasLoginDetails",function(t){e.$broadcast("schemaFormRedraw"),A(),t&&d(function(){s.hash("hasLoginDetails"),c(),s.hash("")})}),e.$watch("modal.formModel.allRegions",function(t){e.$broadcast("schemaFormRedraw"),A(),t&&d(function(){s.hash("allRegions"),c(),s.hash("")})}),e.$watch("modal.formModel.regions",function(t){e.$broadcast("schemaFormRedraw"),A(),t&&d(function(){s.hash("allRegions"),c(),s.hash("")})})}function L(t){H.formModel.hasLoginDetails&&(!t&&!H.formModel.password||t===H.formModel.password?e.$broadcast("schemaForm.error.confirmPassword","unmatchedPassword",!0):e.$broadcast("schemaForm.error.confirmPassword","unmatchedPassword",!1))}function P(){var e={firstName:H.formModel.employeeFullName.firstName,middleName:H.formModel.employeeFullName.middleName,lastName:H.formModel.employeeFullName.lastName,chkLogin:H.formModel.hasLoginDetails,locationId:H.formModel.location,joinedDate:T.toStandardDate(H.formModel.joinedDate),autoGenerateEmployeeId:H.formModel.autoGenerateEmployeeId};if(e.autoGenerateEmployeeId?e.employeeId=null:H.formModel.employeeId&&H.formModel.employeeId.trim()&&(e.employeeId=H.formModel.employeeId.trim()),H.formModel.employeePicture&&(e.photo=H.formModel.employeePicture,e.photo.filetype="image/png"),e.chkLogin){var t={userName:H.formModel.username,userPassword:H.formModel.password,rePassword:H.formModel.confirmPassword,status:H.formModel.status,essRoleId:H.formModel.essRoleId,supervisorRoleId:H.formModel.supervisorRoleId,adminRoleId:H.formModel.adminRoleId};H.formModel.notifyEmployeeToSetPassword&&(t.setPasswordOnFirstLogin=H.formModel.setPasswordOnFirstLogin,H.formModel.setPasswordOnFirstLogin&&(e.emp_work_email=H.formModel.emp_work_email)),angular.extend(e,t);var a=parseInt(e.adminRoleId,10)>1;if(a){var i=j();angular.extend(e,i)}}return e}function N(e){var i=t.defer();return""==e||null==e?d(function(){i.resolve()}):a.call("checkEmployeeEmailAvailability","POST",{email:e}).then(function(e){e.data.isAvailable?i.resolve():i.reject()}),i.promise}function O(a){return t(function(t){d(function(){if(H.formModel.password&&L(H.formModel.confirmPassword),e.$broadcast("schemaFormValidate"),a.$valid&&H.enableSaveButton){if(!I(H.formModel.location))return!1;C.show();var o=P();return f.addEmployee(o).then(function(e){if(!U)if(e.messages["license.warning"])var t=b.onSuccess({},function(){d(function(){r.warning(e.messages["license.warning"])}),t()});else i.showLocalizedToast("saveSuccess");R(e.data)},function(e){z(e)})["finally"](function(){C.hide(),t()})}t()})})}function R(e){d(function(){$("#addEmployeeModal.modal").closeModal(),m(e)})}function z(e){var t="Failed to Save Record";e.data&&e.data.details&&(t=e.data.details.indexOf("employeeId must be valid")!==-1?"Duplicate Employee Id":e.data.details),i.errorToast(t)}function j(){var e={accessibleLocationIds:[],regionIds:[],allRegions:!1};if(H.formModel.allRegions)e.allRegions=!0;else for(var t in H.formModel.regions)if("selectedLocationsOnly_"+t in H.formModel&&!H.formModel["selectedLocationsOnly_"+t])e.regionIds.push(t);else if("selectedLocationsOnly_"+t in H.formModel&&H.formModel["selectedLocationsOnly_"+t])for(var a in H.formModel.regions)if("object"==typeof H.formModel["selectedLocations_"+a])for(var i=Object.keys(H.formModel["selectedLocations_"+a]),o=0;o<i.length;o++)e.accessibleLocationIds.push(i[o]);return e}function V(e){H.formModel.employeePicture=e}function G(){m(!1)}function B(e){for(var t={},a={},o="",n=0;n<e.length;n++)e[n].country.code in t||(t[e[n].country.code]=[],a[e[n].country.code]=e[n].country.name),t[e[n].country.code].push(e[n]);var r=l.getSortedCountryList(t),s=[];for(var c in r){var d=r[c];t[d].sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),s.push({value:null,name:i.getLocalizedCustom(a[d])});for(var m=0;m<t[d].length;m++)s.push({value:t[d][m].id,name:o+i.getLocalizedCustom(t[d][m].name)})}return s}function q(e){H.enableSaveButton=e}var H=this,U=p.data.enabled;u.close=m,H.save=O,H.cancel=G,H.fileSelected=V,H.toggleSave=q,H.enableSaveButton=!0,H.formModel={},H.formFinalAction=U?"Next":"Save",H.adminRolesTitleMapAndEnum={"enum":[],titleMap:[]},H.essRolesTitleMapAndEnum={"enum":[],titleMap:[]},H.superviosrRolesTitleMapAndEnum={"enum":[],titleMap:[]},H.regionTree={},D.setScope(e),D.setController(H),H.globalAdminUserRoleId="",H.lastEmployeeId=o.lastEmployeeId;var W={reset:!1};H.newEmployee={firstName:"",middleName:"",lastName:"",employeeId:"",hasLoginDetails:!1,userName:"",emp_work_email:"",password:"",confirmPassword:"",status:"Enabled",employeePicture:""};var Y=!0,J={},K=[];F()}angular.module("app.pim").controller("PimNewEmployeeController",e),e.$inject=["$scope","$q","webservice","localizedMessages","employeeMetaData","settingsService","formHelper","toast","$location","$anchorScroll","$timeout","close","modalFunctions","wizardStatus","employeeService","employeeListService","$rootScope","ModalService","datagroupPermissions","$transitions","loader","formValidationHelper","wizardService","selectRegionService","dateService"]}(),function(){"use strict";function e(e,t){t.add_employee_trigger=!0,null==t.block_multiple_add_employee_modal&&(t.block_multiple_add_employee_modal=!1),e.go("pim.employees")}angular.module("app.pim").controller("PimAddEmployeeController",e),e.$inject=["$state","$rootScope"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){var m=this;m.type=t.EMPLOYEE_PROFILE_ID,m.employeeNumber=e.empNumber,m.removeParentClass=function(){$("#employee_profile_tab").parent().removeClass("pim-container")},i.fetchWidgetsForEmployeeId(t.EMPLOYEE_PROFILE_ID,m.employeeNumber).then(function(e){i.showSystemMessage(),d.getEmployee().then(function(t){m.widgets=e.data.map(function(e){return e.config.employeeNumber=m.employeeNumber,e.config.employee=t,e})},function(t){m.widgets=e.data.map(function(e){return e.config.employeeNumber=m.employeeNumber,e})})["finally"](function(){c.$broadcast("setEmployeeDetailsForPimTabs")})}),s.$on("$destroy",function(){var e=document.activeElement;e&&e.blur()})}angular.module("app.pim").controller("PimEmployeeProfileDashboardController",e),e.$inject=["$stateParams","dashboardConstants","$state","dashboardService","toast","localizedMessages","$timeout","datagroupPermissions","$scope","$rootScope","pimTabs"]}(),function(){"use strict";function e(e,t,a,i,o,n,l){function r(){i.show();var o=[];o.push(a.call("permissions/dataGroup/add_employee_wizard","GET",[],{})),o.push(a.call("employee-wizard/status","GET",[],{})),o.push(a.call("employee-wizard/config","GET",[],{})),e.all(o).then(function(e){f.permissions=e[0].data.data,f.employeeWizardConfiguration.enabled=e[1].data.data.enabled,s(),f.permissions.read?(f.employeeWizardFieldConfigurationList=e[2].data.data,angular.forEach(f.employeeWizardFieldConfigurationList,function(e){f.modulesIconsForExpanding[e.id]="arrow_drop_down"}),0==f.employeeWizardFieldConfigurationList.length&&t.infoToast("No Records Found"),a.clearCache("employeeWizardConfiguration"),i.hide()):(i.hide(),l.go("403"))})}function s(e){f.schema={type:"object",title:"Configure Add Employee Wizard",properties:{enabled:{title:"Enable Add Employee Wizard",type:"boolean"}},required:[]},f.form=[{type:"section",htmlClass:"s12",items:[{key:"enabled",readonly:!f.permissions.update}]}],f.model={enabled:f.employeeWizardConfiguration.enabled}}function c(e){f.clickedModule==e?"arrow_drop_down"==f.modulesIconsForExpanding[e]?f.modulesIconsForExpanding[e]="arrow_drop_up":f.modulesIconsForExpanding[e]="arrow_drop_down":(f.modulesIconsForExpanding[f.clickedModule]="arrow_drop_down",f.modulesIconsForExpanding[e]="arrow_drop_up",f.clickedModule=e)}function d(e){e.mandatory_in_wizard&&(e.show_in_wizard=!0)}function m(e){i.show();var n="PATCH",l="employee-wizard/status",r="updateSuccess";a.call(l,n,f.model,{}).then(function(e){i.hide(),a.clearCache("employeeWizardConfiguration"),t.showLocalizedToast(r)},function(e){i.hide(),o.success(e)})}function u(e){var n=0,l=[],r=[];if(angular.forEach(e,function(e,t){angular.forEach(e.WizardField,function(t){t.show_in_wizard&&e.show_in_wizard&&t.enabled&&++n})}),n>0){i.show();var s="PATCH",c="employee-wizard/config",d="updateSuccess";angular.forEach(e,function(e){r.push({id:e.id,show_in_wizard:e.show_in_wizard}),angular.forEach(e.WizardField,function(e){l.push({id:e.id,show_in_wizard:e.show_in_wizard,mandatory_in_wizard:e.mandatory_in_wizard,enabled:e.enabled})})});var m={pimSectionData:r,pimConfigData:l};a.call(c,s,m,{}).then(function(e){i.hide(),a.clearCache("pimConfigListData"),t.showLocalizedToast(d)},function(e){i.hide(),o.success(e)})}else o.warning("Please Select at Least One Available Field to the Add Employee Wizard")}function p(e){for(var t=0;t<f.employeeWizardFieldConfigurationList.length;t++)if(f.employeeWizardFieldConfigurationList[t].id==e){var a=f.employeeWizardFieldConfigurationList[t].show_in_wizard;f.employeeWizardFieldConfigurationList[t].show_in_wizard=!a}}s.$inject=["permission"];var f=this;f.title="Configure Add Employee Wizard",f.employeeWizardConfiguration={},f.modulesIconsForExpanding={},f.clickedModule="",f.changeWizardStatus=m,f.isMandatoryChanged=d,f.collapsibleClicked=c,f.checkSectionChange=p,f.save=u,r(),f.updateMandatory=function(e){e.mandatory_in_wizard=!e.mandatory_in_wizard}}angular.module("app.pim").controller("EmployeeWizardConfigurationController",e),e.$inject=["$q","localizedMessages","webservice","loader","toast","datagroupPermissions","$state"]}(),function(){"use strict";function e(e,t){function a(e,a){return t.call("employees/"+e+"/immigration","POST",a).then(function(e){return e.data.data})}function i(e,a,i){return t.call("employees/"+e+"/immigration/"+i,"PATCH",a).then(function(e){return e.data.data})}function o(e){return t.get("employees/"+e+"/immigration",{},{useCache:!1}).then(function(e){return e.data.data})}function n(e,a){return t.call("employees/"+e+"/immigration","DELETE",{data:a},{})}var l={addImmigration:a,updateImmigration:i,getImmigrations:o,deleteImmigrations:n};return l}angular.module("app.pim").factory("immigrationService",e),e.$inject=["$q","webservice"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v){function y(){x.tempEmpNo=r.empNumber}function b(t){x.model={type:""==x.immigration.type?1:x.immigration.type,number:x.immigration.number,countryCode:x.immigration.countryCode,issuedDate:null==x.immigration.issuedDate||""==x.immigration.issuedDate?null:new Date(moment.utc(x.immigration.issuedDate).format("l LT")),
expiryDate:null==x.immigration.expiryDate||""==x.immigration.expiryDate?null:new Date(moment.utc(x.immigration.expiryDate).format("l LT")),reviewDate:null==x.immigration.reviewDate||""==x.immigration.reviewDate?null:new Date(x.immigration.reviewDate),status:x.immigration.status,notes:x.immigration.notes},x.schema={type:"object",title:"Immigration",properties:{type:{title:"Document",type:"string"},number:{title:"Number",type:"string",maxLength:30},countryCode:{title:"Issued By",type:"string","enum":t.countries["enum"]},issuedDate:{title:"Issued Date",type:["null","object"]},expiryDate:{title:"Expiry Date",type:["null","object"]},reviewDate:{title:"Eligible Review Date",type:["null","object"]},status:{title:"Eligible Status",type:"string",maxLength:30},notes:{title:"Comments",type:"string",maxLength:250}},required:["type","number"]},x.form=[{type:"row",items:[{type:"radiobuttons",htmlClass:"col-12",key:"type",titleMap:[{value:1,name:"Passport"},{value:2,name:"Visa"}]}]},{type:"row",items:[{type:"text",htmlClass:"col-6",key:"number",validationMessage:{302:a.getLocalizedCustom("Required"),201:e.textLengthExceedValidation.message(x.schema.properties.number.maxLength)}},{type:"select",htmlClass:"col-6",key:"countryCode",titleMap:t.countries.titleMap}]},{type:"row",items:[{type:"date",htmlClass:"col-4",key:"issuedDate",defaultDate:x.model.issuedDate,resetDefaultDate:x.resetDefaultDate,onChange:C},{type:"date",htmlClass:"col-4",key:"expiryDate",defaultDate:x.model.expiryDate,resetDefaultDate:x.resetDefaultDate,validationMessage:{minDate:a.getLocalizedCustom("Expiry date should be after issued date")},$validators:{minDate:function(t){return e.minDate.validator(t,x.model.issuedDate)}},onChange:C},{type:"date",htmlClass:"col-4",key:"reviewDate",defaultDate:x.model.reviewDate,resetDefaultDate:{reset:!0}}]},{type:"row",items:[{type:"text",htmlClass:"col-6",key:"status",validationMessage:{201:e.textLengthExceedValidation.message(x.schema.properties.status.maxLength)}}]},{type:"row",items:[{type:"textarea",htmlClass:"col-12",key:"notes",validationMessage:{201:e.textLengthExceedValidation.message(x.schema.properties.notes.maxLength)}}]}],x.resetDefaultDate.reset=!1,x.wizardMode&&h.updateFormFields(x.schema,x.form,v)}function C(){e.minDate.validator(x.model.expiryDate,x.model.issuedDate)?m.$broadcast("schemaForm.error.expiryDate","minDate",!0):m.$broadcast("schemaForm.error.expiryDate","minDate",!1)}function w(e){if(m.$broadcast("schemaFormValidate"),e.$valid){s.show(),angular.extend(x.immigration,x.model);var t={type:x.model.type,number:x.model.number,countryCode:x.model.countryCode,issuedDate:x.model.issuedDate,expiryDate:x.model.expiryDate,reviewDate:x.model.reviewDate,status:x.model.status,notes:x.model.notes};""!=x.model.issuedDate&&null!=x.model.issuedDate?t.issuedDate=p.toStandardDate(x.model.issuedDate):t.issuedDate=null,""!=x.model.expiryDate&&null!=x.model.expiryDate?t.expiryDate=p.toStandardDate(x.model.expiryDate):t.expiryDate=null,""!=x.model.reviewDate&&null!=x.model.reviewDate?t.reviewDate=p.toStandardDate(x.model.reviewDate):t.reviewDate=null;var i,o,r=x.immigration.recordId;r?(o=g.updateImmigration(x.tempEmpNo,t,r).then(function(e){_(e)}),i="updateSuccess"):(t.emp_number=x.tempEmpNo,o=g.addImmigration(x.tempEmpNo,t).then(function(e){n.unshift(e)}),i="saveSuccess"),o.then(function(e){s.hide(),x.wizardMode||a.showLocalizedToast(i)},function(e){s.hide(),x.wizardMode||c.success(e)}),l(!0)}}function _(e){for(var t=0;t<n.length;t++)if(n[t].recordId==e.recordId){angular.extend(n[t],e);break}}function S(e){"countrylist"in d?b({countries:D(d.countrylist)}):t.call("countries","GET",[],{}).then(function(e){var t=e.data.data;d.countrylist=t,b({countries:D(d.countrylist)})})}function D(e){for(var t=[],i=[],o=0;o<e.length;o++)t.push({value:e[o].cou_code,name:a.getLocalizedCustom(e[o].cou_name)}),i.push(e[o].cou_code);return{titleMap:t,"enum":i}}function T(){l(!1)}b.$inject=["formData"];var x=this;x.wizardMode=u.current.data.wizardMode,x.title=o||"Immigration";var F={};angular.copy(i,F),x.immigration=F,x.save=w,x.cancel=T,x.resetDefaultDate={reset:!1},y(),S(b)}angular.module("app.pim").controller("PimEditImmigrationsController",e),e.$inject=["formValidationHelper","webservice","localizedMessages","immigration","title","dataList","close","$stateParams","loader","toast","$rootScope","$scope","$state","dateService","formHelper","immigrationService","wizardService","fieldConfiguration"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v){function y(){r.show(),g.getEmployee().then(function(t){M.employee=t;var o={countries:l.call("countries","GET",[],{}),permissions:b()};M.wizardMode&&(o.fieldConfiguration=h.getFieldConfigurationByRoute(c.current.name,"PimImmigrationDetails",M.employee.locationId)),o.customFieldConfiguration=h.getCustomFieldConfigurationByRoute(c.current.name,M.employee.locationId).then(function(e){M.customFieldConfiguration=e}),e.all(o).then(function(e){M.wizardMode&&(M.fieldConfiguration=e.fieldConfiguration,0===M.fieldConfiguration.length&&(e.permissions.immigration={read:!1,create:!1,update:!1,"delete":!1})),M.permissions=e.permissions.immigration,M.attachmentPermission=e.permissions.immigration_attachment,M.customFieldsPermission=e.permissions.immigration_custom_fields,r.hide(),M.permissions.read&&p.getImmigrations(M.tempEmpNo).then(function(t){M.immigrations=u.getSortedObjectList(t,"number","ASC"),M.loaded=!0,M.countries=e.countries.data.data,C(),M.immigrationsListHelper=new i.list(M.listData.immigrations,M.immigrations),M.selectAll=M.immigrationsListHelper.selectAllItems,M.deselectAll=M.immigrationsListHelper.deselectAllItems,M.wizardMode?f.updateListFields(M.listData.immigrations.listFields,M.fieldConfiguration):0===M.immigrations.length&&n.infoToast("No Records Found")}),M.wizardMode||a.$broadcast("setEmployeeDetailsForPimTabs")}),_()})["finally"](function(){r.hide()})}function b(){var e=!1;null!=a.emp_number&&a.emp_number==d.empNumber&&(e=!0);var t=["immigration","immigration_attachment","immigration_custom_fields"];return h.getDatagroupPermissions(d.empNumber,t,e).then(function(e){return e.immigration.read||e.immigration_attachment.read||e.immigration_custom_fields.read||(r.hide(),c.go("403")),e})}function C(){M.panelInfo={immigrationsInfo:{title:"Assigned Immigration Records",icon:"images/pim/icon_work.svg"}},w()}function w(){var e=[{name:"type",lable:"Document",getter:"type",formatter:function(e){return 1==e?n.getLocalizedCustom("Passport"):2==e?n.getLocalizedCustom("Visa"):e}},{name:"number",lable:"Number",getter:"number"},{name:"countryCode",lable:"Issued By",getter:"countryCode",formatter:function(e){for(var t in M.countries)if(e==M.countries[t].cou_code)return n.getLocalizedCustom(M.countries[t].cou_name);return""}},{name:"issuedDate",lable:"Issued Date",getter:"issuedDate",formatter:function(e){if(e)return e=e.slice(0,10),t.toLocalizedDate(e)}},{name:"expiryDate",lable:"Expiry Date",getter:"expiryDate",formatter:function(e){return e?(e=e.slice(0,10),t.toLocalizedDate(e)):e}}],a=[{colspan:3}],i=[{"class":"edit_item",clickAction:"editImmigrations",tooltip:"Edit"}],o=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:M.permissions["delete"]}];M.listData={immigrations:{selectable:!0,selected:[],idGetter:"recordId",listFields:e,showColumnsAnyway:!0,permission:M.permissions,listActions:o}},M.permissions.update&&(M.listData.immigrations.extraTH=a,M.listData.immigrations.extraTD=i)}function _(){M.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function S(){var e={type:"",number:"",countryCode:"",issuedDate:"",expiryDate:"",reviewDate:"",status:""};E(e,"Add Immigration")}function D(e){E(e,"Edit Immigration")}function T(){if(M.listData.immigrations.selected.length>0){var e=M.listData.immigrations.selected.length;r.show(),p.deleteImmigrations(M.tempEmpNo,M.listData.immigrations.selected).then(function(){r.hide(),M.wizardMode||n.showLocalizedToast("deleteSuccess"),M.total-=e,x(M.listData.immigrations.selected)},function(e){r.hide(),M.wizardMode||s.success(e)})}}function x(e){for(var t=M.immigrations.length-1;t>=0;t--){var a=e.indexOf(M.immigrations[t].recordId);a>-1&&(e.splice(a,1),M.immigrations.splice(t,1))}}function F(e){var t=e.obj;if(t.selected)M.listData.immigrations.selected.push(t.recordId);else{var a=M.listData.immigrations.selected.indexOf(t.recordId);a>-1&&M.listData.immigrations.selected.splice(a,1)}}function k(){if(M.listData.immigrations.selected.length>0){if(M.wizardMode)return void T();o.showDeleteConfirmationModal().then(function(e){e===!0&&T()})}}function E(e,t){o.showModal("app/pim/immigrations/immigration_modal.html","PimEditImmigrationsController","modal",{immigration:e,dataList:M.immigrations,title:t,immigrationService:p,fieldConfiguration:M.fieldConfiguration})}function I(){close(!0)}function A(){close(!1)}var M=this;M.title="Immigrations",M.customFieldScreen="immigration",M.loaded=!1,M.immigrations="",M.editImmigrations=D,M.deleteImmigrations=T,M.changeSelection=F,M.deleteSelection=k,M.addImmigrations=S,M.attachmentPermission,M.customFieldsPermission,M.confirm=I,M.cancel=A,M.countries="",M.wizardMode=c.current.data.wizardMode,M.customFieldService=v,M.employeeService=h,M.employee={},M.tempEmpNo=d.empNumber,l.isLoggedIn()?y():l.login().then(function(e){y()})}angular.module("app.pim").controller("PimImmigrationsController",e),e.$inject=["$q","dateService","$rootScope","listHelper","modalHelperService","localizedMessages","webservice","loader","toast","$state","$stateParams","datagroupPermissions","formHelper","immigrationService","wizardService","pimTabs","employeeService","customFieldService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r){function s(){f.hideLoader=!1,f.dayRegExp=c(f.settings.dayDecimals),f.hourRegExp=c(f.settings.hourDecimals);var e={employeeTerminationRecord:n.getTerminationRecord(f.employee.empNumber,!0),entitlements:a.getAdjustableEntitlements(f.employee.empNumber)};r.all(e).then(function(e){f.employeeTerminationRecord=e.employeeTerminationRecord.data,f.entitlements=e.entitlements.data,f.readonly=1!=f.employeeTerminationRecord.flaged,f.hideLoader=!0})}function c(e){var t=e>0?"(\\.\\d{1,"+e+"})?":"";return new RegExp("^\\d*"+t+"$")}function d(t){var a=t.hourBased?"Hours":"Days";return e.getLocalizedCustom(a)}function m(e){var t=e.hourBased?f.settings.hourDecimals:f.settings.dayDecimals;return a.getPositiveDayBasedEntitlementValidationMessage(t)}function u(){o(!1)}function p(i){if(i.$valid&&f.hideLoader){f.readonly=!0;for(var n={},l=!1,r=0;r<f.entitlements.length;r++){var s=f.entitlements[r];s.adjustTo&&(l=!0,n[s.leaveTypeId]=s.adjustTo)}l&&(t.show(),n.adjustUponTermination=!0,a.adjustEntitlements(f.employee.empNumber,n).then(function(){e.showLocalizedToast("updateSuccess"),f.readonly=!0})["finally"](function(){f.readonly=!0,t.hide()})),o(!0)}}var f=this;f.employee=i,f.employeeTerminationRecord="",f.readonly="",f.entitlements=[],f.hideLoader=!0,f.settings=l.getSettings(),f.getDurationUnit=d,f.getValidationMessageForPattern=m,f.cancel=u,f.save=p,s()}angular.module("app.leave").controller("PimAdjustLeaveEntitlementController",e),e.$inject=["localizedMessages","loader","leaveEntitlementService","employee","close","employeeService","leaveService","$q"]}(),function(){"use strict";function e(){function e(e,t,a,i){}var a={restrict:"E",templateUrl:"app/pim/job/detailed-history.html",scope:{employee:"=",history:"=",customFields:"=",permissions:"=",editAction:"=",auditLogs:"=",unSelectableIds:"=?",unDeletableIds:"=?"},link:e,controller:t,controllerAs:"vm",bindToController:!0};return a}function t(e,t,a,i,o,n,l,r,s){function c(){d()}function d(){var e=[{name:"event",lable:"Event",getter:"event_display_name",type:"history-event-name"},{name:"effective_from",lable:"Effective From",getter:"effective_date",filters:[{name:"ohrmDateFilter"}]},{name:"component",lable:"Field",getter:"name",formatter:function(e){return l.getLocalizedCustom(e)}},{name:"old_value",lable:"Changed From",getter:"old_value",type:"oxd-lengthy-tooltip","class":"table-comments",formatter:function(e){return m(e)}},{name:"new_value",lable:"Changed To",getter:"new_value",type:"oxd-lengthy-tooltip","class":"table-comments",formatter:function(e){return m(e)}},{name:"actionButtons",lable:"",getter:"id","class":"text-center",type:"oxd-action-button-panel",iconButtons:[{id:"delete-button",classes:"btn-list",text:"Delete",tooltip:{text:"Delete"},clickAction:function(e,t,a){u([a])},icon:"ohrm_delete",displayCondition:function(e,t){return v.permissions.jobHistory["delete"]&&v.unSelectableIds.indexOf(t.id)===-1&&v.unDeletableIds.indexOf(t.id)===-1}},{id:"edit-button",classes:"btn-list",text:"Edit",tooltip:{text:"Edit"},clickAction:function(e,t,a){f(a.split("_")[0])},icon:"edit",iconSize:"1rem",displayCondition:function(e,t){return v.permissions.jobHistory.update&&v.permissions.job.update&&v.unSelectableIds.indexOf(t.id)===-1}}]}],t=[];t=v.permissions.jobHistory["delete"]?["2%","17%","15%","20%","17%","17%","12%"]:v.permissions.jobHistory.update?["18%","16%","20%","18%","18%","10%"]:["19%","16%","20%","20%","20%","5%"],v.listDefinition={name:"DetailedJobHistory",selectable:!0,selected:[],idGetter:["id"],listFields:e,unselectableIds:_.union(v.unDeletableIds,v.unSelectableIds),showColumnsAnyway:!0,permission:v.permissions.jobHistory,columnWidths:t,listActions:[],showLoader:!0,pagination:!1,listClass:"classic-table",listTopBar:{getMessageForNoOfItemsFound:function(e){return"undefined"!=typeof v.totalDataCount?l.getLocalizedCustomWithVariables("({{number}}) Job History Record"+(1==v.totalDataCount?"":"s")+" Found",{number:v.totalDataCount}):""},getMessageForNoOfItemsSelected:function(e){return e?l.getLocalizedCustomWithVariables("({{number}}) Job History Record"+(e>1?"s":"")+" Selected",{number:e}):""}}},v.permissions.jobHistory.create&&v.permissions.job.update&&(v.listDefinition.listTopBar.mainActionButton={id:"add-salary-history-button",icon:"add",label:"Add Job History",onClick:function(){g()}}),v.permissions.auditTrail.read&&(v.listDefinition.listTopBar.iconButtons=[{title:"View Audit Log",icon:"ohrm_view_details_oxd","class":"audit-log-icon",id:"view-audit-logs",onClick:h}]),v.permissions.jobHistory["delete"]&&(v.listDefinition.listTopBar.onBulkDelete=function(e){u(e)},v.listDefinition.listTopBar.isBulkDeletable=function(e){return 0==_.intersection(e,v.listDefinition.unselectableIds).length});var a,i;v.permissions.auditTrail.read&&(i="col-1"),a=v.permissions.jobHistory.create?"col-8":"col-11",v.listDefinition.listTopBar.panelClasses={bulkActionPanelClass:a,searchPanelClass:i}}function m(e){var t="";return e&&(t=s.isStandardDateStringValidDate(e)?s.toLocalizedDate(e):l.getLocalizedCustom(e)),t}function u(e){e.length>0&&i.showDeleteConfirmationModal("You are about to delete the history event(s) permanently. This may affect the employee's current employment details. Are you sure you want to continue?").then(function(t){t===!0&&p(e)})}function p(e){var a=e.length;if(a>0){var i=[];e.forEach(function(e,t){i.push(e.split("_")[0])});var n="employees/"+v.employee.empNumber+"/job/history";o.call(n,"DELETE",{data:i}).then(function(e){t.$broadcast("updateJobValues"),l.showLocalizedToast("deleteSuccess")},function(e){l.errorToast(e.data)})}}function f(e){v.editAction&&v.editAction(e)}function g(){v.editAction(0)}function h(){return!v.isShowAuditLogModalOpened&&(v.isShowAuditLogModalOpened=!0,void i.showModal("app/core/modal/oxd_modal_with_list.html","OxdModalWithListController","modal",{listData:v.auditLogs,listDefinition:r.getAuditLogListDefinition({read:v.permissions.auditTrail.read}),title:"Audit Logs",modalSizeClass:"modal-xl"}).then(function(){v.isShowAuditLogModalOpened=!1}))}var v=this;v.unSelectableIds=v.unSelectableIds?v.unSelectableIds:[],v.unDeletableIds=v.unDeletableIds?v.unDeletableIds:[],v.totalDataCount=v.history.length-v.unSelectableIds.length,c()}angular.module("app.pim").directive("pimJobDetailedHistory",e),t.$inject=["$scope","$rootScope","loader","modalHelperService","webservice","customFieldHelper","localizedMessages","pimHelper","dateService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c){function d(){s.fetchTimeZones().then(function(e){var t={timezones:e,hours:c.getNumberArrayForDropdown(0,23,1,2),minutes:c.getNumberArrayForDropdown(0,55,5,2)};u(t)})}function m(e,t){var a=s.getModifiedTimeZoneKey(e.timezones,g.model.activation_time_zone);if(g.model.activation_time_zone=a,g.model.default_time_zone=t,a&&!e.timezones["enum"].includes(a)&&moment.tz.zone(a)){e.timezones["enum"].push(a);var o={value:a,name:"(GMT"+moment().tz(a).format("Z")+") "+i.getLocalizedCustom(a)};e.timezones.titleMap.push(o)}return e}function u(t){var a=s.getUserTimeZone(t.timezones,e.employeeTimeZone);if(null!==n.reactivationDate){var c=n.reactivation_time.split(":");g.model={activation_date:new Date(moment.utc(n.reactivationDate).format("l LT")),activation_time_hours:c[0],activation_time_minutes:c[1],activation_time_zone:n.reactivationTimeZoneName,update_joined_date:"1"==n.update_joined_date}}else g.model={activation_date:new Date,activation_time_hours:"00",activation_time_minutes:"05",activation_time_zone:a,activate_now:!1,update_joined_date:!0};t=m(t,a),g.schema={type:"object",title:"Activate Employment",properties:{activate_now:{title:"Activate Now",type:"boolean"},update_joined_date:{title:"Update Joined Date",type:"boolean"},activation_date:{title:"Date",type:["null","object"]},activation_time_hours:{title:"Time",type:"string","enum":t.hours["enum"]},activation_time_minutes:{title:"Minutes",type:"string","enum":t.minutes["enum"]},activation_time_zone:{title:"Time Zone",type:"string","enum":t.timezones["enum"]}},required:["activation_date","activation_time_hours","activation_time_minutes","activation_time_zone"]},(l||r)&&(g.schema.properties.activation_date.datePickerConfig={selectMonths:!0,selectYears:40},l&&(g.schema.properties.activation_date.datePickerConfig.min=new Date(n.date)),r&&(g.schema.properties.activation_date.datePickerConfig.max=new Date(r))),g.form=[{type:"row",items:[{key:"activate_now",type:"checkbox",htmlClass:"col-6"},{type:"checkbox",htmlClass:"col-6",key:"update_joined_date"}]},{type:"row",items:[{type:"date",htmlClass:"col-6",key:"activation_date",defaultDate:g.model.activation_date,resetDefaultDate:g.resetDefaultDate,condition:"!model.activate_now",minimumDate:l?new Date(n.date):null,maximumDate:r?new Date(r):null,validationMessage:{302:i.getLocalizedCustom("Required"),dateRequired:o.dateRequiredValidation.message},$validators:{dateRequired:function(e){return o.dateRequiredValidation.validator(e)}}},{key:"activation_time_hours",type:"select",emptyOption:!1,condition:"!model.activate_now",htmlClass:"col-3",titleMap:t.hours.titleMap,validationMessage:{302:i.getLocalizedCustom("Required")}},{key:"activation_time_minutes",type:"select",emptyOption:!1,condition:"!model.activate_now",hideLabel:!0,htmlClass:"col-3 termination-time-minutes",titleMap:t.minutes.titleMap,validationMessage:{302:i.getLocalizedCustom("Required")}},{key:"activation_time_zone",type:"select",emptyOption:!1,condition:"!model.activate_now",htmlClass:"col-12",titleMap:t.timezones.titleMap,validationMessage:{302:i.getLocalizedCustom("Required")}}]}]}function p(e){t.$broadcast("schemaFormValidate"),e.$valid&&a(g.model)}function f(){a(!1)}u.$inject=["formData"];var g=this;g.save=p,g.cancel=f,g.resetDefaultDate={reset:!1},d()}angular.module("app.pim").controller("PimEmploymentActivationController",e),e.$inject=["$rootScope","$scope","close","localizedMessages","formValidationHelper","employeeTerminationRecord","terminationId","maxDate","jobService","numberService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h){function v(){var t={terminationReasons:i.getTerminationReasons(!0),hasEntitlements:o.hasEntitlements(_.empNumber),timezones:g.fetchTimeZones()};a.all(t).then(function(t){_.hasEntitlements=t.hasEntitlements.data["entitlements-exist"];var a={reasons:e.getEnumAndTitleMapForSelect(t.terminationReasons),timezones:t.timezones,hours:h.getNumberArrayForDropdown(0,23,1,2),minutes:h.getNumberArrayForDropdown(0,55,5,2)};b(a)})}function y(e,t){var a=g.getModifiedTimeZoneKey(e.timezones,_.model.termination_time_zone);if(_.model.termination_time_zone=a,_.model.default_time_zone=t,a&&!e.timezones["enum"].includes(a)&&moment.tz.zone(a)){e.timezones["enum"].push(a);var i={value:a,name:"(GMT"+moment().tz(a).format("Z")+") "+r.getLocalizedCustom(a)};e.timezones.titleMap.push(i)}return e}function b(e){var t=g.getUserTimeZone(e.timezones,c.employeeTimeZone);if(_.terminated&&void 0!==n.EmployeeTerminationRecord){var a=n.EmployeeTerminationRecord.termination_time.split(":");_.model={reason:n.EmployeeTerminationRecord.reasonId,termination_date:new Date(moment.utc(n.EmployeeTerminationRecord.date).format("l LT")),termination_time_hours:a[0],termination_time_minutes:a[1],termination_time_zone:n.EmployeeTerminationRecord.terminationTimeZoneName,note:n.EmployeeTerminationRecord.note}}else if(_.terminated||null===d)_.model={reason:"",termination_date:new Date,termination_time_hours:"23",termination_time_minutes:"55",termination_time_zone:t,note:"",adjust_entitlements:!1,terminate_now:!1};else{var a=d.termination_time.split(":");_.model={reason:d.reasonId,termination_date:new Date(moment.utc(d.date).format("l LT")),termination_time_hours:a[0],termination_time_minutes:a[1],termination_time_zone:d.terminationTimeZoneName,note:d.note}}e=y(e,t),_.model.showAdjustLeaveCheckBox=_.hasEntitlements&&!(new Date(_.model.termination_date)>new Date)&&_.dataGroupPermissions.leave_entitlements.hasOwnProperty("update")&&_.dataGroupPermissions.leave_entitlements.update,_.schema={type:"object",title:"Terminate Employment",readOnly:_.terminated||_.self,properties:{reason:{title:"Reason",type:"string","enum":e.reasons["enum"]},terminate_now:{title:"Terminate Now",type:"boolean"},adjust_entitlements:{title:"Adjust Leave Entitlements",type:"boolean"},termination_date:{title:"Date",type:["null","object"]},termination_time_zone:{title:"Time Zone",type:"string","enum":e.timezones["enum"]},termination_time_hours:{title:"Time",type:"string","enum":e.hours["enum"]},termination_time_minutes:{title:"Minutes",type:"string","enum":e.minutes["enum"]},note:{title:"Note",type:"string",maxLength:100}},required:["reason","termination_date","termination_time_zone","termination_time_hours","termination_time_minutes"]},(f||p)&&(_.schema.properties.termination_date.datePickerConfig={selectMonths:!0,selectYears:40},f&&(_.schema.properties.termination_date.datePickerConfig.min=new Date(f)),p&&(_.schema.properties.termination_date.datePickerConfig.max=new Date(p))),_.form=[{type:"row",items:[{key:"reason",type:"select",htmlClass:"col-12",titleMap:e.reasons.titleMap,validationMessage:{302:r.getLocalizedCustom("Required")}},{key:"terminate_now",type:"checkbox",htmlClass:"col-6"},{type:"checkbox",htmlClass:"col-6",key:"adjust_entitlements",condition:"model.showAdjustLeaveCheckBox"}]},{type:"row",items:[{type:"date",htmlClass:"col-6",key:"termination_date",defaultDate:_.model.termination_date,resetDefaultDate:_.resetDefaultDate,condition:"!model.terminate_now",minimumDate:f?new Date(f):null,maximumDate:p?new Date(p):null,validationMessage:{302:r.getLocalizedCustom("Required"),dateRequired:s.dateRequiredValidation.message},$validators:{dateRequired:function(e){return s.dateRequiredValidation.validator(e)}},onChange:function(e){_.model.showAdjustLeaveCheckBox=_.hasEntitlements&&!(new Date(e)>new Date)&&_.dataGroupPermissions.leave_entitlements.hasOwnProperty("update")&&_.dataGroupPermissions.leave_entitlements.update}},{key:"termination_time_hours",type:"select",emptyOption:!1,condition:"!model.terminate_now",htmlClass:"col-3",titleMap:e.hours.titleMap,validationMessage:{302:r.getLocalizedCustom("Required")}},{key:"termination_time_minutes",type:"select",emptyOption:!1,condition:"!model.terminate_now",hideLabel:!0,htmlClass:"col-3 termination-time-minutes",titleMap:e.minutes.titleMap,validationMessage:{302:r.getLocalizedCustom("Required")}},{key:"termination_time_zone",type:"select",emptyOption:!1,condition:"!model.terminate_now",htmlClass:"col-12",titleMap:e.timezones.titleMap,validationMessage:{302:r.getLocalizedCustom("Required")}}]},{type:"row",items:[{type:"text",htmlClass:"col-12",key:"note",validationMessage:{201:s.textLengthExceedValidation.message(_.schema.properties.note.maxLength)}}]}]}function C(e){t.$broadcast("schemaFormValidate"),e.$valid&&l(_.model)}function w(){l(!1)}b.$inject=["formData"];var _=this;_.self=m,_.empNumber=n.empNumber,_.terminated=null!==n.termination_id,_.dataGroupPermissions=u,_.save=C,_.cancel=w,_.resetDefaultDate={reset:!1},v()}angular.module("app.pim").controller("PimEmploymentTerminationController",e),e.$inject=["formHelper","$scope","$q","employeeService","leaveEntitlementService","employee","close","localizedMessages","formValidationHelper","$rootScope","employeeTerminationRecord","isSelf","permissions","maxDate","minDate","jobService","numberService"]}(),function(){"use strict";function e(){return{restrict:"A",require:"ngModel",scope:{currentEntitlement:"="},link:function(e,t,a,i){i.$validators.entitlementAdjustmentMax=function(t){return!t||parseFloat(e.currentEntitlement.entitlement)>=parseFloat(t)},i.$validators.entitlementAdjustmentMin=function(t){return!t||parseFloat(e.currentEntitlement.minLimit)<=parseFloat(t)}}}}angular.module("app.directives").directive("entitlementAdjustmentValidate",e)}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w,S,D,T,x,F,k,E,I,A,M){function L(){pe.jobModel={effective_date:new Date(moment(new Date)),event:"",description:"",changedFieldsOnly:!pe.addMode},pe.customFieldModel=h,pe.oldValues={},pe.historyId&&(pe.jobModel.id=pe.historyId),pe.effectiveDate=c.toStandardDate(pe.jobModel.effective_date),pe.eeoApplicableLocations=d.getEEOApplicableLocationIds(pe.formData.locationList),P(!1)}function P(e){pe.loaded=!1,pe.canSave=!0,pe.schema=null,pe.confirmationMessage=!1;var t=null==pe.jobModel.effective_date||""==pe.jobModel.effective_date?null:c.toStandardDate(pe.jobModel.effective_date),a=pe.addMode&&!e?{}:{asOf:t};return a=pe.historyId?{historyId:pe.historyId}:a,d.getJobRecord(pe.empNumber,!0,a).then(function(a){pe.eeoPayGradeName=a.meta.eeoPayGradeName,pe.isJoinedEvent=a.meta.isJoinedEvent;var i=a.data.effective_date,o=!1;if(pe.historyId){var n=new Date(i);return n.setDate(n.getDate()-1),e=e&&i!=t,pe.previousDate=e?t:c.toStandardDate(n),d.getJobRecord(pe.empNumber,!0,{asOf:pe.previousDate}).then(function(i){o=e&&i.data.effective_date==t&&pe.historyId!==i.data.id&&!i.data.readonly;var n=d.getFormValuesFromJobRecord(a.data,pe);return pe.modifiedFields=e?d.getModifiedFields(pe.jobRecord,n,pe,pe.modifiedFields):d.getModifiedFields(i.data,n,pe,[]),$(i.data,a.data,o,e)})}o=i==t&&!a.data.readonly,pe.addMode||(pe.modifiedFields=e?d.getModifiedFields(pe.jobRecord,pe.jobModel,pe,pe.modifiedFields):d.getModifiedFields(a.data,g,pe,[])),$(a.data,a.data,o,e)})}function $(e,t,a,i){return pe.jobRecord={},pe.events={},angular.copy(t,pe.jobRecord),angular.copy(pe.activeEvents,pe.events),a&&(pe.jobModel.id=pe.historyId?pe.historyId:pe.jobRecord.id,O(pe.jobRecord,pe.jobModel),pe.confirmationMessage="There is another job history record for the same date.",pe.confirmationMessage+=pe.historyId?" You can not have two history events on the same date.":" This will update the existing record.",pe.canSave=!pe.historyId&&pe.canSave),pe.isEffectiveDateReadOnly=!(!pe.isJoinedEvent||!pe.confirmationMessage)||pe.isEffectiveDateReadOnly,pe.isEventReadOnly=!(!pe.isJoinedEvent||!pe.confirmationMessage)||pe.isEffectiveDateReadOnly,N(pe.jobRecord,e,i).then(function(e){a||pe.historyId||!pe.jobModel.id||delete pe.jobModel.id,V()})}function N(e,t,a){if(pe.oldValues={},pe.newValues={},angular.copy(t,pe.oldValues),angular.copy(e,pe.newValues),pe.oldValues.contract_file=pe.oldValues.contract_details?pe.oldValues.contract_details:{},pe.contractDetails=null!==pe.contractFile&&pe.contractFile!==x.CONTRACT_ATTACHMENT_DELETED?pe.contractFile:pe.newValues.contract_details?pe.newValues.contract_details:{},pe.historyId||pe.addMode){var i=pe.historyId&&a?_.clone(pe.oldValues):pe.newValues;return i.id=pe.newValues.id,R(i,a)}return z(pe.newValues,a)}function O(e,t){if(t.event&&!pe.isJoinedEvent&&pe.events["enum"].includes(t.event)||(t.event=e.event_id?e.event_id.toString():""),t.event&&!pe.events["enum"].includes(t.event)){pe.events["enum"].push(t.event);var i="1"==e.is_system_event?"":" ("+a.getLocalizedCustom("Past Event")+")";pe.events.titleMap.push({value:t.event,name:e.event_name+i})}return t}function R(e,t){return e.effective_date=pe.addMode||t?pe.jobModel.effective_date:new Date(moment.utc(e.effective_date).format("l LT")),e.event=pe.jobModel.event,e.description=pe.jobModel.description,n(function(){l.$broadcast("updateStandardCustomFieldSection",{historyId:pe.historyId,previousDate:pe.historyId?pe.previousDate:null,isDateChanged:t})}),pe.historyId||!t?(pe.shouldValidateDates=!1,j(e,pe.modifiedFields,pe.jobModel).then(function(e){pe.shouldValidateDates=!0,pe.jobModel=e,pe.effectiveDate=c.toStandardDate(pe.jobModel.effective_date),pe.historyId&&O(pe.jobRecord,pe.jobModel),d.checkIsEEOApplicable(pe,pe.jobModel.location_id)})):i.resolve()}function z(e,t){e.effective_date=pe.jobModel.effective_date,e.event=pe.jobModel.event&&pe.events["enum"].includes(pe.jobModel.event)?pe.jobModel.event:"",e.description=pe.jobModel.description;var a=t?pe.jobModel:g;return pe.shouldValidateDates=!1,j(e,pe.modifiedFields,a).then(function(e){pe.shouldValidateDates=!0,pe.jobModel=e,d.checkIsEEOApplicable(pe,pe.jobModel.location_id),l.$broadcast("updateStandardCustomFieldSection",{effectiveDate:pe.effectiveDate,isDateChanged:t})})}function j(e,t,a){var o=["job_title_id","employment_status_id","job_category_id","eeo_job_category","subunit_id","location_id","work_shift_id","pay_policy_id","comment"];return angular.forEach(t,function(t){a.hasOwnProperty(t)&&(e[t]=a[t])}),angular.forEach(o,function(t){null===e[t]&&(e[t]="")}),void 0==e.event&&(e.event=""),e.changedFieldsOnly=pe.jobModel.changedFieldsOnly,e.flsa_exempt="1"==e.flsa_exempt,e.has_contract_details="1"==e.has_contract_details,e.hasOwnProperty("contract_file")&&delete e.contract_file,e.cost_centre_id?D.getCostCentreById(e.cost_centre_id).then(function(t){return e.costCentre=t,e},function(){return e.costCentre=null,e}):(e.costCentre=null,i.resolve(e))}function V(){G(),B()}function G(){pe.schema={type:"object",title:"Confirm Changes",properties:{event:{title:"Event",type:"string","enum":pe.events["enum"]},effective_date:{title:"Changes Effective From",type:["null","object"]},changedFieldsOnly:{title:"Show Changed Fields Only",type:"boolean"}},required:["event","effective_date","description"]},pe.form=[{type:"row",items:[{key:"event",type:"select",htmlClass:"col-6",titleMap:pe.events.titleMap,readonly:pe.isEventReadOnly,onChange:function(e){e==pe.joinedEventId?(pe.isEffectiveDateReadOnly=!0,pe.jobModel.effective_date=pe.jobModel.joined_date,G()):e&&E.validateDates(pe,l,pe.jobModel,"joined_date",!0)},validationMessage:{302:a.getLocalizedCustom("Required")}},{type:"date",htmlClass:"col-6",key:"effective_date",readonly:pe.isEffectiveDateReadOnly,resetDefaultDate:pe.resetDefaultDate,validationMessage:{302:a.getLocalizedCustom("Required")},onChange:function(e,t){if(e&&pe.effectiveDate){var a=c.toStandardDate(e);a!==pe.effectiveDate&&(pe.effectiveDate=a,P(!0).then(function(e){E.validateDates(pe,l,pe.jobModel,"joined_date",!0)}))}}}]},{type:"row",items:[{type:"switch",key:"changedFieldsOnly",htmlClass:"col-6",onChange:function(e,t){l.$broadcast("updateStandardCustomFieldSection",{changedFieldsOnly:e})}}]}]}function B(){var e=[];angular.copy(pe.masterData,e),d.getModifiedMasterData(e,pe.jobRecord,!1),
pe.formData.jobTitles=M.getEnumAndTitleMapForSelect(e[0].data.data,{value:"id",name:"jobTitleName"},!0),pe.employee={empNumber:I.empNumber},pe.changesFormSchema=E.getJobFormSchema(pe.formData,pe.permissions),pe.changesForm=E.getEmploymentForm(pe,l,pe.changesFormSchema,pe.jobModel,pe.jobModel,!0,pe.oldValues)}function q(e,t){return e&&t&&(e="function"==typeof e.getMonth?c.toStandardDate(e):e),e?e:null}function H(e,t){var a=q(pe.jobModel[e],t),i=q(pe.oldValues[e],t);return!pe.jobModel.changedFieldsOnly||a!=i}function U(){return!pe.jobModel.joined_date||H("joined_date",!0)}function W(){return H("probation_end_date",!0)||pe.errorFields.hasOwnProperty("probation_end_date")&&pe.errorFields.probation_end_date}function Y(){return H("date_of_permanency",!0)||pe.errorFields.hasOwnProperty("date_of_permanency")&&pe.errorFields.date_of_permanency}function J(){return H("job_title_id",!1)}function K(){return H("employment_status_id",!1)}function Z(){return H("job_category_id",!1)}function Q(){return pe.eeo_applicable&&H("eeo_job_category",!1)}function X(){return H("subunit_id",!1)}function ee(){var e=pe.jobModel.costCentre?pe.jobModel.costCentre.id:null,t=q(pe.oldValues.cost_centre_id,!1);return pe.formData.organizationData.costCenterEnabled&&(!pe.jobModel.changedFieldsOnly||e!=t)}function te(){var e=pe.eeoPayGradeName&&!pe.eeo_applicable?"EEO Pay Band":null;return de("eeoPayGrade",e),!pe.jobModel.location_id||H("location_id",!1)}function ae(){return!pe.jobModel.work_shift_id||H("work_shift_id",!1)}function ie(){var e=pe.jobModel.pay_policy_id?pe.jobModel.pay_policy_id:"",t=pe.oldValues.pay_policy_id?pe.oldValues.pay_policy_id:"",a=e!=t?"Pay Policy":null;return de("payPolicy",a),pe.formData.payPolicyApplicable&&(!pe.jobModel.changedFieldsOnly||e!=t)}function oe(){var e="1"==pe.jobModel.flsa_exempt?"1":"0",t="1"==pe.oldValues.flsa_exempt?"1":"0";return pe.eeo_applicable&&(!pe.jobModel.changedFieldsOnly||e!=t)}function ne(){return H("comment",!1)}function le(){var e="1"==pe.jobModel.has_contract_details?"1":"0",t="1"==pe.oldValues.has_contract_details?"1":"0";return!pe.jobModel.changedFieldsOnly||e!=t}function re(){return pe.jobModel.has_contract_details&&H("contract_start_date",!0)}function se(){return pe.jobModel.has_contract_details&&H("contract_end_date",!0)}function ce(){pe.contractDetails=null!==pe.contractFile&&pe.contractFile!==x.CONTRACT_ATTACHMENT_DELETED?pe.contractFile:pe.contractDetails,pe.contractDetails=pe.contractFile===x.CONTRACT_ATTACHMENT_DELETED?{}:pe.contractDetails;var e=pe.contractDetails.hasOwnProperty("filesize")?pe.contractDetails.filesize:pe.contractDetails.size,t=pe.contractDetails.hasOwnProperty("filetype")?pe.contractDetails.filetype:pe.contractDetails.file_type,a=pe.oldValues.hasOwnProperty("contract_file")&&(pe.oldValues.contract_file.filename!=pe.contractDetails.filename||pe.oldValues.contract_file.size!=e||pe.oldValues.contract_file.file_type!=t);return pe.jobModel.has_contract_details&&(!pe.jobModel.changedFieldsOnly||a)}function de(e,t){pe.affectedFields.hasOwnProperty(e)&&delete pe.affectedFields[e],t&&(pe.affectedFields[e]=t);var i="";pe.affectedFields.hasOwnProperty("payPolicy")&&pe.affectedFields.hasOwnProperty("eeoPayGrade")?i="the Pay Policy and the EEO Pay Band":pe.affectedFields.hasOwnProperty("payPolicy")?i="the Pay Policy":pe.affectedFields.hasOwnProperty("eeoPayGrade")&&(i="the EEO Pay Band"),pe.alertMessage=i?a.getLocalizedCustom("The change to Employment Details results in a change to "+i+" of the employee"):null}function me(){var e=pe.jobConfirmationForm;l.$broadcast("schemaFormValidate"),E.validateDates(pe,l,pe.jobModel,"joined_date",!1),n(function(){l.$broadcast("schemaFormValidate");var t=!1;pe.historyId&&(t=pe.jobModel.event!=pe.jobRecord.event_id||c.toStandardDate(pe.jobModel.effective_date)!=pe.jobRecord.effective_date);var a=d.getModifiedFields(pe.jobRecord,pe.jobModel,pe,[]);if(!t){var i=A.getModifiedCustomFields(pe.customFieldModel,pe.customFieldStandardSection,pe.customFieldStandardSectionDefined);t=a.length>0||i.length>0}if(e.$valid){var o={hasChanges:t,model:pe.jobModel,customFieldModel:pe.customFieldModel};a.includes("contract_details")&&(o.contractFile=pe.contractFile),w(o)}})}function ue(){w(!1)}var pe=this;pe.title=r,pe.loaded=!1,pe.eeoApplicableLocations=[],pe.empNumber=m,pe.formData=u,pe.masterData=p,pe.addMode=b,pe.historyId=C,pe.isEventReadOnly=!1,pe.isEffectiveDateReadOnly=!1,pe.affectedFields={},pe.alertMessage=null,pe.contractFile=v,pe.permissions={read:!0,update:!0},pe.resetDefaultDate={reset:!1},pe.customFieldScreenForStandardSection="job-standard",pe.customFieldStandardSection={},pe.customFieldStandardSectionDefined=!1,pe.customFieldService=F,pe.employeeService=k,pe.triggerCostCenterChange=!0,pe.shouldValidateDates=!0,pe.errorFields={},pe.save=me,pe.cancel=ue,pe.joinedEventId="1",pe.activeEvents=y,pe.initiate=P,pe.isJoinedDateAvailable=U,pe.isProbationEndDateAvailable=W,pe.isDateOfPermanencyAvailable=Y,pe.isJobTitleAvailable=J,pe.isEmploymentStatusAvailable=K,pe.isJobCategoryAvailable=Z,pe.isEEOJobCategoryAvailable=Q,pe.isSubunitAvailable=X,pe.isCostCenterAvailable=ee,pe.isLocationAvailable=te,pe.isWorkShiftAvailable=ae,pe.isPayPolicyAvailable=ie,pe.isFLSAExemptAvailable=oe,pe.isCommentAvailable=ne,pe.isContractDetailsCheckAvailable=le,pe.isContractStartDateAvailable=re,pe.isContractEndDateAvailable=se,pe.isContractDetailsAvailable=ce,pe.setConfirmationDetailsForm=G,S&&(S.close=w),L(),l.$on("standardCustomFieldSectionUpdated",function(e,t){pe.loaded=!0})}angular.module("app.pim").controller("JobConfirmationModalController",e),e.$inject=["logger","webservice","localizedMessages","$q","loader","$timeout","$scope","title","formValidationHelper","dateService","jobService","empNumber","formData","masterData","pimHelper","jobModel","customFieldModel","contractFile","events","addMode","historyId","close","modalFunctions","costCentreService","subunitService","jobConstants","customFieldService","employeeService","jobFormService","$stateParams","customFieldHelper","formHelper"]}(),function(){"use strict";angular.module("app.pim").constant("jobConstants",{JOB_TAB_MAIN:"main",JOB_TAB_HISTORY:"history",JOB_TAB_ATTACHMENTS:"attachments",CONTRACT_ATTACHMENT_DELETED:"CONTRACT_ATTACHMENT_DELETED"})}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(e,i,o,r,c,m,u){var v,y,b,w,F=0,I=[],L={type:"row",items:[]};r.cost_centre_id&&d.getSubunitById(r.subunit_id).then(function(t){e.triggerCostCenterChange=t.cost_centre_id&&t.cost_centre_id==r.cost_centre_id},function(){e.triggerCostCenterChange=!0});var P={joined_date:{form:{type:"date",htmlClass:"col-4",key:"joined_date",defaultDate:c.joined_date,resetDefaultDate:A,ngModelOptions:M,onChange:function(){C(e,i,r,"joined_date",m)}},viewBasedSettings:{confirmationModal:{hideLabel:!0,condition:e.isJoinedDateAvailable}}},probation_end_date:{form:{type:"date",htmlClass:"col-4",key:"probation_end_date",defaultDate:c.probation_end_date,resetDefaultDate:A,ngModelOptions:M,validationMessage:{dateValidator:l.getLocalizedCustom("Should be on or after the Joined Date")},onChange:function(){C(e,i,r,"probation_end_date",m)}},viewBasedSettings:{confirmationModal:{hideLabel:!0,condition:e.isProbationEndDateAvailable}}},date_of_permanency:{form:{type:"date",htmlClass:"col-4",key:"date_of_permanency",defaultDate:c.date_of_permanency,resetDefaultDate:A,ngModelOptions:M,validationMessage:{dateValidator:l.getLocalizedCustom("Should be on or after the Joined Date")},onChange:function(){C(e,i,r,"date_of_permanency",m)}},viewBasedSettings:{confirmationModal:{hideLabel:!0,condition:e.isDateOfPermanencyAvailable}}},job_title_id:{form:{type:"select",htmlClass:"col-4",key:"job_title_id",titleMap:e.formData.jobTitles.titleMap,onChange:function(){D(e.formData,r)}},viewBasedSettings:{confirmationModal:{hideLabel:!0,condition:e.isJobTitleAvailable}},displayValueGetter:"job_title_name"},employment_status_id:{form:{type:"select",htmlClass:"col-4",key:"employment_status_id",titleMap:e.formData.employmentStatus.titleMap,onChange:function(){D(e.formData,r)}},viewBasedSettings:{confirmationModal:{hideLabel:!0,condition:e.isEmploymentStatusAvailable}},displayValueGetter:"employment_status_name"},job_spec:{form:{type:"jobspec",htmlClass:"col-4",key:"job_spec",jobTitleField:"job_title_id"},ignoreInConfirmationModal:!0},job_category_id:{form:{type:"select",htmlClass:"col-4",key:"job_category_id",titleMap:e.formData.jobCategories.titleMap},viewBasedSettings:{confirmationModal:{hideLabel:!0,condition:e.isJobCategoryAvailable}},displayValueGetter:"job_category_name"},eeo_job_category:{form:{type:"select",htmlClass:"col-4",key:"eeo_job_category",titleMap:e.formData.eeoJobCategories.titleMap},viewBasedSettings:{main:{condition:"job.eeo_applicable"},confirmationModal:{hideLabel:!0,condition:e.isEEOJobCategoryAvailable}},displayValueGetter:"eeo_job_category_name"},subunit_id:{form:{type:"select",htmlClass:"col-4",key:"subunit_id",titleMap:e.formData.subunits.titleMap,onChange:function(t){D(e.formData,r),x(i,e,r,t)}},viewBasedSettings:{confirmationModal:{hideLabel:!0,condition:e.isSubunitAvailable}},displayValueGetter:"subunit_name"},costCentre:{form:{type:"cost-centre-auto-complete",htmlClass:"col-4",key:"costCentre",placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",requireSelection:!0},viewBasedSettings:{main:{condition:"job.formData.organizationData.costCenterEnabled"},confirmationModal:{hideLabel:!0,condition:e.isCostCenterAvailable}},displayValueGetter:"cost_centre_name"},location_id:{form:{type:"select",htmlClass:"col-4",key:"location_id",titleMap:e.formData.locations.titleMap,onChange:function(t){T(e,t),D(e.formData,r),i.$broadcast("schemaFormRedraw")}},viewBasedSettings:{confirmationModal:{hideLabel:!0,condition:e.isLocationAvailable}},displayValueGetter:"location_name"},work_shift_id:{form:{type:"select",htmlClass:"col-4",key:"work_shift_id",titleMap:e.formData.workshifts.titleMap},viewBasedSettings:{confirmationModal:{hideLabel:!0,condition:e.isWorkShiftAvailable}},displayValueGetter:"work_shift_name"},pay_policy_id:{form:{type:"select",htmlClass:"col-4",key:"pay_policy_id",titleMap:e.formData.payPolicies.titleMap},viewBasedSettings:{main:{condition:"job.formData.payPolicyApplicable"},confirmationModal:{hideLabel:!0,condition:e.isPayPolicyAvailable}},displayValueGetter:"pay_policy_name"},current_service:{form:{type:"text",htmlClass:"col-4",key:"current_service"},ignoreInConfirmationModal:!0},creditable_service:{form:{type:"text",htmlClass:"col-4",key:"creditable_service"},ignoreInConfirmationModal:!0},flsa_exempt:{form:{type:"checkbox",htmlClass:"col-4",key:"flsa_exempt"},viewBasedSettings:{main:{condition:"job.eeo_applicable"},confirmationModal:{hideLabel:!0,condition:e.isFLSAExemptAvailable,prefix:"asOf"}},lastItemInRow:!0},comment:{form:{type:"textarea",htmlClass:"col-4",key:"comment",validationMessage:{201:n.textLengthExceedValidation.message(o.properties.comment.maxLength)}},viewBasedSettings:{confirmationModal:{hideLabel:!0,condition:e.isCommentAvailable}},lastItemInRow:!0},has_contract_details:{form:{type:m?"checkbox":"switch",htmlClass:"col-4 contract-details-switch",key:"has_contract_details"},viewBasedSettings:{confirmationModal:{hideLabel:!0,condition:e.isContractDetailsCheckAvailable,prefix:"asOf"}},title:"Has Contract Details",lastItemInRow:!0},contract_start_date:{form:{type:"date",htmlClass:"col-4",key:"contract_start_date",defaultDate:c.contract_start_date,resetDefaultDate:A,ngModelOptions:M,onChange:function(){S(i,r)},validationMessage:{beforeToDate:l.getLocalizedCustom("Start date should be before end date")}},viewBasedSettings:{main:{condition:"model.has_contract_details"},confirmationModal:{hideLabel:!0,condition:e.isContractStartDateAvailable}}},contract_end_date:{form:{type:"date",htmlClass:"col-4",key:"contract_end_date",defaultDate:c.contract_end_date,resetDefaultDate:A,ngModelOptions:M,onChange:function(){S(i,r)},validationMessage:{afterFromDate:l.getLocalizedCustom("End date should be after start date")}},viewBasedSettings:{main:{condition:"model.has_contract_details"},confirmationModal:{hideLabel:!0,condition:e.isContractEndDateAvailable}}},contract_file:{form:{type:"file",htmlClass:"col-4",key:"contract_file",maxSize:e.formData.maxAttachmentSize,allowedFileTypes:e.formData.fileTypes,allowedFileTypesDisplayName:e.formData.fileTypesDisplayName,validationMessage:{fileSize:l.getLocalizedCustom("Attachment size exceeded"),fileType:l.getLocalizedCustom("Attachment type invalid")},onFileChange:function(t){k(e,t)},attachmentExists:e.contractDetails.filename,attachmentFileName:e.contractDetails.filename,attachmentUrl:e.contractDetails.attach_id?t.baseUrl+"api/pim/downloadAttachment/empNumber/"+e.employee.empNumber+"/attachId/"+e.contractDetails.attach_id+"/screen/contract":null,deleteAttachment:function(e){e.showDeleteConfirmation=!0},confirmDeletion:function(t){t.attachmentExists=!1,t.showDeleteConfirmation=!1,e.contractFile=a.CONTRACT_ATTACHMENT_DELETED},cancelDeletion:function(e){e.showDeleteConfirmation=!1}},viewBasedSettings:{main:{condition:"model.has_contract_details"},confirmationModal:{hideLabel:!0,condition:e.isContractDetailsAvailable}},title:"Contract Details"}};if(_.forEach(P,function(t,a){F++,m&&t.hasOwnProperty("ignoreInConfirmationModal")||(v=p(t,m),f(v,t,m),m?(y=s.getNoteFormElement(g(t,a,o),"changed-field-name col-3"),f(y,t,m),b=s.getNoteFormElement(h(t,a,u),"old-value col-4"),f(b,t,m),w=s.getIconFormElement("ohrm_change","change-icon col-1"),f(w,t,m),L={type:"row",items:[y,b,w]}):!e.snapshotAsOf&&e.futureChanges.hasOwnProperty(a)&&(v.labelIcon="ohrm_future_date",v.labelHint=E(e.futureChanges[a],v.type)),L.items.push(v),(m||t.hasOwnProperty("lastItemInRow")||Object.keys(P).length===F)&&(I.push(L),L={type:"row",items:[]}))}),!m){var $=_.findIndex(I,function(e){return"row"==e.type&&e.items.length&&"comment"==e.items[0].key});$>-1&&I.splice($+1,0,{type:"divider",condition:"model.has_contract_details"}),I.push({type:"divider"})}return I}function p(e,t){var a={};return e.hasOwnProperty("form")&&"object"==typeof e.form&&(a=e.form),a}function f(e,t,a){if(t.hasOwnProperty("viewBasedSettings")&&"object"==typeof t.viewBasedSettings){var i=a?"confirmationModal":"main";t.viewBasedSettings.hasOwnProperty(i)&&"object"==typeof t.viewBasedSettings[i]&&_.forEach(t.viewBasedSettings[i],function(t,a){e[a]=t})}}function g(e,t,a){var i="";i=e.hasOwnProperty("title")?e.title:a.properties.hasOwnProperty(t)&&a.properties[t].hasOwnProperty("title")?a.properties[t].title:"";var o=a.required.includes(t)?" *":"";return l.getLocalizedCustom(i)+o}function h(e,t,a){var i=e.hasOwnProperty("form")&&e.form.hasOwnProperty("type")?e.form.type:"";t=e.hasOwnProperty("displayValueGetter")?e.displayValueGetter:t;var o=a.hasOwnProperty(t)?a[t]:"";return v(o,i)}function v(e,t){switch(t){case"date":e=e?r.toLocalizedDate(e):e;break;case"switch":case"checkbox":e=c.formatBooleanValue(e);break;case"file":e=e&&e.hasOwnProperty("filename")?e.filename:"object"==typeof e?"":e}return e}function y(e,t){var a={type:"object",title:"Employment Details",properties:{joined_date:{title:"Joined Date",type:["null","object"],datePickerConfig:{selectMonths:!0,selectYears:100},readonly:!t.update},probation_end_date:{title:"Probation End Date",type:["null","object"],datePickerConfig:{selectMonths:!0,selectYears:100},readonly:!t.update},date_of_permanency:{title:"Date of Permanency",type:["null","object"],datePickerConfig:{selectMonths:!0,selectYears:100},readonly:!t.update},job_title_id:{title:"Job Title",type:"string","enum":e.jobTitles["enum"],readonly:!t.update},job_spec:{title:"Job Specification",type:"string",readonly:!t.update},employment_status_id:{title:"Employment Status",type:"string","enum":e.employmentStatus["enum"],readonly:!t.update},job_category_id:{title:"Job Category",type:"string","enum":e.jobCategories["enum"],readonly:!t.update},subunit_id:{title:"Sub Unit",type:"string","enum":e.subunits["enum"],readonly:!t.update},location_id:{title:"Location",type:"string","enum":e.locations["enum"],readonly:!t.update},work_shift_id:{title:"Work Shift",type:"string","enum":e.workshifts["enum"],readonly:!t.update},current_service:{title:"Current Service",type:"string",readonly:!0},creditable_service:{title:"Creditable Service",type:"string",readonly:!0},costCentre:{title:"Cost Center",type:["object","null"],idsToSkip:[],readonly:!t.update},eeo_job_category:{title:"EEO Job Category",type:"string","enum":e.eeoJobCategories["enum"],readonly:!t.update},pay_policy_id:{title:"Pay Policy",type:"string","enum":e.payPolicies["enum"],readonly:!0},flsa_exempt:{title:"FLSA Exempt",type:"boolean",readonly:!t.update},comment:{title:"Comments",type:"string",maxLength:250,readonly:!t.update},has_contract_details:{title:"Include Employment Contract Details",type:"boolean",readonly:!t.update},contract_start_date:{title:"Contract Start Date",type:["null","object"],datePickerConfig:{selectMonths:!0,selectYears:100},readonly:!t.update},contract_end_date:{title:"Contract End Date",type:["null","object"],datePickerConfig:{selectMonths:!0,selectYears:100},readonly:!t.update},contract_file:{title:"Contract Details",type:"object",readonly:!t.update}},required:["joined_date","work_shift_id"]};return e.feature_country_based&&a.required.push("location_id"),a}function b(e,t,a,i){e.errorFields[i]=!0;var o=a[i]&&"function"==typeof a[i].getMonth?r.toStandardDate(a[i]):a[i],l=a.joined_date&&"function"==typeof a.joined_date.getMonth?r.toStandardDate(a.joined_date):a.joined_date;n.minDate.validator(o,l)?(e.errorFields[i]=!1,t.$broadcast("schemaForm.error."+i,"dateValidator",!0)):t.$broadcast("schemaForm.error."+i,"dateValidator",!1)}function C(e,t,a,i,o){if(e.shouldValidateDates){switch(i){case"joined_date":a.joined_date?(a.probation_end_date&&b(e,t,a,"probation_end_date"),a.date_of_permanency&&b(e,t,a,"date_of_permanency")):(a.probation_end_date&&(t.$broadcast("schemaForm.error.probation_end_date","dateValidator",!1),e.errorFields.probation_end_date=!1),a.date_of_permanency&&(t.$broadcast("schemaForm.error.date_of_permanency","dateValidator",!1),e.errorFields.date_of_permanency=!1));break;case"probation_end_date":case"date_of_permanency":a.joined_date?b(e,t,a,i):(e.errorFields[i]=!0,a[i]?(e.errorFields[i]=!1,t.$broadcast("schemaForm.error."+i,"dateValidator",!1)):t.$broadcast("schemaForm.error."+i,"dateValidator",!0))}if(o&&"joined_date"===i){var n,l,s=null;a.joined_date&&(s="function"==typeof a.joined_date.getMonth?r.toStandardDate(a.joined_date):a.joined_date),l=a.effective_date&&"function"==typeof a.effective_date.getMonth?r.toStandardDate(a.effective_date):a.effective_date,n=e.oldValues.joined_date&&"function"==typeof e.oldValues.joined_date.getMonth?r.toStandardDate(e.oldValues.joined_date):e.oldValues.joined_date,e.isEffectiveDateReadOnly=a.event==e.joinedEventId||s&&s!=n,e.isEventReadOnly=e.isJoinedEvent&&e.confirmationMessage||s&&s!=n,e.isEffectiveDateReadOnly&&(a.event=e.joinedEventId,a.effective_date=s?new Date(moment.utc(new Date(s)).format("l LT")):a.effective_date,e.effectiveDate=s),e.isEffectiveDateReadOnly&&s&&l!=s?e.initiate(!0):e.setConfirmationDetailsForm()}}}function w(e,t){return!e||!t||!(!e||!t)&&(e=new Date(e),t=new Date(t),e<=t)}function S(e,t){w(t.contract_start_date,t.contract_end_date)?(e.$broadcast("schemaForm.error.contract_start_date","beforeToDate",!0),e.$broadcast("schemaForm.error.contract_end_date","afterFromDate",!0)):(e.$broadcast("schemaForm.error.contract_start_date","beforeToDate",!1),e.$broadcast("schemaForm.error.contract_end_date","afterFromDate",!1))}function D(e,t){if(e.payPolicyApplicable){var a={filter:{location:t.location_id,subUnit:t.subunit_id,jobTitle:t.job_title_id,employmentStatus:t.employment_status_id}};o.call("payPolicies","GET",[],a).then(function(e){var a=e.data.data;return t.pay_policy_id=1==a.length?a[0].id:"",!0})}}function T(e,t){c.checkIsEEOApplicable(e,t)}function x(e,t,a,i){var o=a.costCentre;i&&t.triggerCostCenterChange&&d.getSubunitById(i).then(function(t){t.cost_centre_id?m.getCostCentreById(t.cost_centre_id).then(function(t){a.costCentre=t,F(e,o,a.costCentre)},function(){a.costCentre=null,F(e,o,a.costCentre)}):(a.costCentre=null,F(e,o,a.costCentre))},function(){a.costCentre=null,F(e,o,a.costCentre)})}function F(e,t,a){t!=a&&e.$broadcast("schemaFormRedraw")}function k(e,t){e.contractFile=t}function E(e,t){var a=e.value,i=e.effective_date,o=!e.hasOwnProperty("changed")||e.changed?"Will change to {{value}} effective from {{date}}":"Will be effective from {{date}}";return a=v(a,t),l.getLocalizedCustomWithVariables(o,{value:a?s.escapeText(a):"---",date:r.toLocalizedDate(i)})}var I={getEmploymentForm:u,getJobFormSchema:y,updatePayPolicy:D,validateDates:C},A={reset:!1},M={allowInvalid:!0};return I}angular.module("app.pim").factory("jobFormService",e),e.$inject=["$q","LOGIN","jobConstants","pimTabs","webservice","formValidationHelper","localizedMessages","dateService","pimHelper","jobService","subunitService","costCentreService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w,S,D,T,x,F,k,E,I){function A(){var e=F.getTabsForPimJobPage(re.permissions,se);re.tabs=e.tabs,re.currentTabKey=e.current}function M(e){re.currentTabKey=e.key}function L(){var e=!1;null!=s.emp_number&&s.emp_number==a.empNumber&&(e=!0);var t=["job_history_details","job_history","job_attachment","employee_job_documents","job_custom_fields","leave_entitlements","admin_audit_trail"];return h.getDatagroupPermissions(a.empNumber,t,e).then(function(e){return e})}function P(i,o){e.$on("invalidCostCenter",function(t,a){a?e.$broadcast("schemaForm.error.costCentre","invalid",!0):e.$broadcast("schemaForm.error.costCentre","invalid",v.instant("Invalid"))}),re.loading=!0;var n={};if(!re.wizardMode&&re.permissions.job.read){var l=o?{asOf:o}:{};n.job=F.getJobRecord(a.empNumber,!0,l),n.employeeTerminationRecord=h.getTerminationRecord(a.empNumber,!0)}m.all(n).then(function(e){re.wizardMode||!re.permissions.job.read?(re.JobRecord=re.employee.hasOwnProperty("JobRecord")?re.employee.JobRecord:{},re.futureChanges=[],re.terminationPeriods=[]):(re.JobRecord=e.job.data,re.futureChanges=e.job.meta.futureChanges,re.employeeTerminationRecord=e.employeeTerminationRecord.data,re.terminationPeriods=e.employeeTerminationRecord.meta.allTerminationPeriods,!re.employee.termination_id||re.employeeTerminationRecord&&re.employeeTerminationRecord.id==re.employee.termination_id||(re.employee.termination_id=null)),re.permissions.job.read||re.permissions.jobHistory.read||re.permissions.attachments.read||re.permissions.customFields.read||re.employeePermissions.activate||re.employeePermissions.terminate||(re.loading=!1,t.go("403")),(re.permissions.job.read||re.permissions.jobHistory.read)&&ie(i)})["finally"](function(){ce||(re.loading=!1),re.wizardMode||s.$broadcast("setEmployeeDetailsForPimTabs")})}function N(e){if(re.permissions.jobHistory.read&&!re.wizardMode)return re.showDetailedHistorySection=!1,F.fetchJobHistory(e).then(function(e){var t=e.data.meta&&angular.isArray(e.data.meta.customFields)?e.data.meta.customFields:[];return re.detailedHistory=O(e.data.data,t),I.fetchAuditLogs(a.empNumber,re.permissions.auditTrail,re.auditSectionIds,re.wizardMode).then(function(e){re.auditLogs=e,re.showDetailedHistorySection=!0})})}function O(e,t){re.unSelectableIds=[],re.initialJoinedDate=null;var a,i,o,n,l,r,s,c,d=[],m={job_title:{title:"Job Title",value:null,id_field:"job_title_id",format:null},employment_status:{title:"Employment Status",value:null,id_field:"employment_status_id",format:null},job_category:{title:"Job Category",value:null,id_field:"job_category_id",format:null},subunit:{title:"Sub Unit",value:null,id_field:"subunit_id",format:null},location:{title:"Location",value:null,id_field:"location_id",format:null},workshift:{title:"Work Shift",value:null,id_field:"work_shift_id",format:null},joined_date:{title:"Joined Date",value:null,id_field:"joined_date",format:F.formatDateValue},probation_end_date:{title:"Probation End Date",value:null,id_field:"probation_end_date",format:F.formatDateValue},date_of_permanency:{title:"Date of Permanency",value:null,id_field:"date_of_permanency",format:F.formatDateValue},has_contract_details:{title:"Has Contract Details",value:null,id_field:"has_contract_details",format:F.formatBooleanValue},contract_start_date:{title:"Contract Start Date",value:null,id_field:"contract_start_date",format:F.formatDateValue},contract_end_date:{title:"Contract End Date",value:null,id_field:"contract_end_date",format:F.formatDateValue},contract_file_name:{title:"Contract File",value:null,id_field:"contract_attachment_id",format:null},payPolicy:{title:"Pay Policy",value:null,id_field:"pay_policy_id",format:null},cost_centre:{title:"Cost Center",value:null,id_field:"cost_centre_id",format:null},eeo_job_category:{title:"EEO Job Category",value:null,id_field:"eeo_job_category_id",format:null},flsa_exempt:{title:"FLSA Exempt",value:null,id_field:"flsa_exempt",format:F.formatBooleanValue},comment:{title:"Comments",value:null,id_field:"comment",format:null}};_.forEach(t,function(e,t){m[e.unique_name]={title:e.name,value:null,id_field:e.unique_name,format:"date"===D.getFieldTypeNameForFieldTypeId(e.type)?F.formatDateValue:null}});for(var u=e.length-1;u>=0;u--)l=R(e[u]),a=0,r=l.id,l.effective_date&&(re.initialJoinedDate=re.initialJoinedDate?re.initialJoinedDate:l.joined_date,_.forEach(m,function(e,t){i=l[e.id_field]&&0!=l[e.id_field]?l[e.id_field]:null,o=l[t]&&0!=l[t]?l[t]:null,n=e.display_value&&0!=e.display_value?e.display_value:null,c=re.activeMasterData.hasOwnProperty(t)?re.activeMasterData[t]:null,i==e.value&&(i||e.value||o==n)||(s=z(l,{history_id:t,name:e.title,new_value:F.getFormattedValue(l[t],e.format,l[e.id_field],c),old_value:F.getFormattedValue(e.display_value,e.format,e.value,c)},a,r),d.splice(a,0,s),a++),m[t].value=l[e.id_field]&&0!=l[e.id_field]?l[e.id_field]:null,m[t].display_value=l[t]&&0!=l[t]?l[t]:null}),0===a&&(j(a,l),d.splice(a,0,l)));return d}function R(e){return e.is_grayed_out="1"==e.is_past_event,"1"==e.is_past_event&&(e.tooltip=i.getLocalizedCustom("Past Event")),e}function z(e,t,a,i){var o=0==a?e:{CurrencyType:e.CurrencyType};return angular.merge(o,t),o.id=i+"_"+t.history_id,j(a,o),o}function j(e,t){(e>0||"1"==t.readonly)&&re.unSelectableIds.push(t.id)}function V(t){re.contractDetails=re.JobRecord.contract_details?re.JobRecord.contract_details:{},re.employmentFormSchema=E.getJobFormSchema(t,re.permissions.job),re.employmentForm=E.getEmploymentForm(re,e,re.employmentFormSchema,re.model,re.JobRecord),re.wizardMode&&k.updateFormFields(re.employmentFormSchema,re.employmentForm,re.fieldConfiguration,re.model)}function G(){return f.showModal("app/pim/job/employment-activation-modal.html","PimEmploymentActivationController","modal",{employeeTerminationRecord:re.employeeTerminationRecord,terminationId:re.employee.termination_id,maxDate:F.getNextJoinedDate(re.futureChanges)}).then(function(e){e!==!1&&B(e)})}function B(e){var t={activation_data:{date:g.toStandardDate(e.activation_date),time:e.activation_time_hours+":"+e.activation_time_minutes,timezone:e.activation_time_zone,updateJoinedDate:e.update_joined_date?"1":"0"}};e.activate_now&&(t.activation_data.date=moment(new Date).format("YYYY-MM-DD"),t.activation_data.time=U(),t.activation_data.timezone=e.default_time_zone,t.activation_data.activateNow="1"),re.loading=!0,h.activateEmployment(re.employee.empNumber,t).then(function(e){P(!0),i.showLocalizedToast("saveSuccess")},function(e){e.data?n.error(e.data):i.errorToast("Failed to Save Record")})["finally"](function(){re.loading=!1})}function q(){var e={terminationReasons:h.getTerminationReasons(!0)},t=re.model.joined_date&&new Date(re.initialJoinedDate)<=re.model.joined_date?re.model.joined_date:re.initialJoinedDate;return m.all(e).then(function(e){return f.showModal("app/pim/job/employment-termination-modal.html","PimEmploymentTerminationController","modal",{employee:re.employee,employeeTerminationRecord:re.employeeTerminationRecord,isSelf:re.self,permissions:re.dataGroupPermissions,maxDate:re.employeeTerminationRecord&&re.employeeTerminationRecord.reactivationDate?re.employeeTerminationRecord.reactivationDate:null,minDate:F.getServiceStartDate(t,re.formData.terminationPeriods,re.employeeTerminationRecord)}).then(function(e){e!==!1&&H(e)})})}function H(e){var t=e.adjust_entitlements,a={reason:e.reason,date:g.toStandardDate(e.termination_date),time:e.termination_time_hours+":"+e.termination_time_minutes,timezone:e.termination_time_zone,note:e.note,flaged:re.hasEntitlements?"1":"0"};e.terminate_now&&(a.date=moment(new Date).format("YYYY-MM-DD"),a.time=U(),a.timezone=e.default_time_zone,a.terminateNow="1"),re.loading=!0,h.terminateEmployment(re.employee.empNumber,a).then(function(e){return re.employee.termination_id=e.terminateinfuture?null:e.id,re.employee.EmployeeTerminationRecord=e,re.employeeTerminationRecord=e,i.showLocalizedToast("saveSuccess"),t&&W(),ae()},function(e){e.hasOwnProperty("status")&&400===e.status?i.errorToast("Termination data is not valid"):i.errorToast("Failed to Terminate")})["finally"](function(){re.loading=!1})}function U(){var e=new Date;return("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)}function W(){f.showModal("app/pim/job/adjust-leave-entitlement-modal.html","PimAdjustLeaveEntitlementController","modal",{employee:re.employee})}function Y(e,t,a){var o=a?a:"Removed";if(e&&""!=t)for(var n=0;n<e.length;n++)if(e[n].value===t)return e[n].name;return"["+i.getLocalizedCustom(o)+"]"}function J(){return re.initialJoinedDate?i.getLocalizedCustom("Initial Joined Date")+": "+g.toLocalizedDate(re.initialJoinedDate):""}function K(){re.snapshotAsOf=null,re.permissions.job.update=re.editable,re.effectiveDateForCustomFields=null,P(!1),e.$broadcast("updateStandardCustomFieldSection",{effectiveDate:re.effectiveDateForCustomFields,isSnapshotView:!!re.snapshotAsOf})}function Z(t,a){if(!t)return m.resolve(!0);e.$broadcast("schemaFormValidate",t.$name);var i=!1;return re.customFieldStandardSectionDefined?(e.$broadcast("customFieldValidate"),T(function(){return t.$valid&&re.validCustomFieldForm?Q(a):m.reject()})):!!t.$valid&&((i=!0)?Q(a):void 0)}function Q(e){if(re.model.cost_centre_id=re.model.costCentre?re.model.costCentre.id:null,e)return re.model.effective_date=re.model.joined_date?re.model.joined_date:re.model.add_employee_effective_date,te({model:re.model,contractFile:null});var t=F.getModifiedFields(re.JobRecord,re.model,re,[]),a=D.getModifiedCustomFields(re.customFieldModel,re.customFieldStandardSection,re.customFieldStandardSectionDefined);t.length>0||a.length>0?X(null):n.info(i.getLocalizedCustom("No Changes to Save"),null)}function X(e){var t={close:function(){}};if(!re.isConfirmChangesModalOpened){re.isConfirmChangesModalOpened=!0;var a=e?{}:_.clone(re.model),o=e?{}:_.clone(re.customFieldModel),l=null!==re.contractFile?re.contractFile:re.contractDetails,r=e?null:_.clone(l);f.showModal("app/pim/job/job-confirmation-modal.html","JobConfirmationModalController","modal",{title:"Employment Details",empNumber:re.employee.empNumber,formData:re.formData,masterData:re.masterData,jobModel:a,customFieldModel:o,contractFile:r,events:re.eventData,addMode:0===e,historyId:e&&e>0?e:null,modalFunctions:t}).then(function(e){re.isConfirmChangesModalOpened=!1,e!==!1&&(e.hasChanges?te(e):n.info(i.getLocalizedCustom("No Changes to Save"),null))})}}function ee(t){re.snapshotAsOf?re.snapshotAsOf:new Date;f.showModal("app/core/modal/switch-to-snapshot.html","SwitchToSnapshotController","modal",{defaultDate:new Date(moment(new Date)),clickEvent:t}).then(function(t){"object"==typeof t&&(re.snapshotAsOf=g.toStandardDate(t),re.effectiveDateForCustomFields=re.snapshotAsOf,re.snapshotAsOfLocalized=i.getLocalizedCustomWithVariables("Snapshot as Of: {{date}}",{date:g.toLocalizedDate(re.snapshotAsOf)}),re.permissions.job.update=!1,e.$broadcast("updateStandardCustomFieldSection",{
effectiveDate:re.effectiveDateForCustomFields,isSnapshotView:!!re.snapshotAsOf}),P(!1,re.snapshotAsOf))})}function te(t){var a={},o=angular.copy(t),n=r.formatDates(o.model,["joined_date","probation_end_date","date_of_permanency","contract_start_date","contract_end_date","effective_date"]),l=F.getFormValuesFromJobRecord(n,re);angular.copy(l,a),angular.extend(re.customFieldModel,o.customFieldModel),a.cost_centre_id=a.costCentre?a.costCentre.id:null,delete a.costCentre,a.has_contract_details=a.has_contract_details?"1":"0";var s=o.hasOwnProperty("contractFile")&&null!==o.contractFile;return s&&o.contractFile!==C.CONTRACT_ATTACHMENT_DELETED?(a.contract_details={attachment:o.contractFile.base64,filename:o.contractFile.filename,file_type:o.contractFile.filetype,size:o.contractFile.filesize,attach_id:o.contractFile.attach_id},a.contract_file_update="replace"):s?(a.contract_details=null,a.contract_file_update="delete"):delete a.contract_details,a.effective_date=n.effective_date,a.event_id=n.event,n.id&&(a.id=n.id),delete a.contract_file,delete a.add_employee_effective_date,delete a.pay_policy_id,delete a.current_service,delete a.creditable_service,a=r.formatDates(a,["joined_date","probation_end_date","date_of_permanency","contract_start_date","contract_end_date","effective_date"]),re.customFieldStandardSectionDefined&&(a.custom_fields=D.getFormattedPostParams(re.customFieldModel,re.customFieldStandardSection)),F.updateEmployeeJobRecord(re.employee.empNumber,a,{employee:re.employee,locations:re.locations}).then(function(t){re.wizardMode||(i.showLocalizedToast("saveSuccess"),P(!0)),e.$broadcast("updateStandardCustomFieldSection",{effectiveDate:null,isSnapshotView:!!re.snapshotAsOf})},function(e){i.errorToast("Failed to Save")})}function ae(){re.loading=!0;var t=[];return t.push(N(re.employee.empNumber)),t.push(c.getEmployee(!0)),m.all(t).then(function(t){return re.employee=t[1],re.contractFile=null,re.model=F.getFormValuesFromJobRecord(re.JobRecord,re),F.updateCostCentre(re.model).then(function(t){re.model=t,V(re.formData),e.$broadcast("schemaFormRedraw")})})["finally"](function(){re.loading=!1})}function ie(e){ce=!0;var t=[];return t.push(o.call("jobTitles","GET",[],{})),t.push(o.call("employmentStatus","GET",[],{})),t.push(o.call("jobCategories","GET",[],{})),t.push(o.call("subunits","GET",[],{tree:!0})),t.push(o.call("employees/locations","GET",[],{operation:"edit"})),t.push(o.call("workShifts","GET",[],{})),t.push(o.call("eeoJobCategories","GET",[],{})),t.push(o.call("locations","GET",[],{})),t.push(o.call("organization","GET",[],{})),t.push(o.call("payPolicies","GET",[],{})),t.push(o.call("costCentres","GET",[],{})),m.all(t).then(function(t){re.activeMasterData={job_title:_.clone(t[0].data.data),cost_centre:_.clone(t[10].data.data)},e&&N(a.empNumber),re.masterData=[],angular.copy(t,re.masterData),F.getModifiedMasterData(t,re.JobRecord,re.wizardMode);var i=t[8].data.data;re.locations=t[7].data.data,re.eeoApplicableLocations=F.getEEOApplicableLocationIds(re.locations),re.formData={jobTitles:r.getEnumAndTitleMapForSelect(t[0].data.data,{value:"id",name:"jobTitleName"},!0),employmentStatus:r.getEnumAndTitleMapForSelect(t[1].data.data,{value:"id",name:"name"}),jobCategories:r.getEnumAndTitleMapForSelect(t[2].data.data,{value:"id",name:"name"}),eeoJobCategories:r.getEnumAndTitleMapForSelect(t[6].data.data,{value:"id",name:"name"}),subunits:r.getEnumAndTitleMapForSelect(le(t[3].data.data),{value:"id",name:"name"},!0),workshifts:r.getEnumAndTitleMapForSelect(t[5].data.data,{value:"id",name:"name"}),payPolicies:r.getEnumAndTitleMapForSelect(t[9].data.data,{value:"id",name:"payPolicyName"}),feature_country_based:t[4].data.meta.feature_country_based,maxAttachmentSize:re.maxAttachmentSize,fileTypes:re.fileTypes,fileTypesDisplayName:re.fileTypesDisplayName,locationList:re.locations,organizationData:i,payPolicyApplicable:t[9].data.meta.enabled,defaultShiftId:t[5].data.meta.defaultShiftId,terminationPeriods:re.terminationPeriods};var o=re.wizardMode?re.formData.defaultShiftId:"";return re.model=F.getFormValuesFromJobRecord(re.JobRecord,re,o),F.updateCostCentre(re.model).then(function(e){return re.model=e,oe(t[4].data.data,re.JobRecord.location_id).then(function(e){re.formData.locations=r.getEnumAndTitleMapForSelect(ne(e,re.formData.feature_country_based),{name:"name",value:"value"},!0),V(re.formData),re.wizardMode&&(re.model.add_employee_effective_date||(re.model.add_employee_effective_date=new Date),E.updatePayPolicy(re.formData,re.model))})})})["finally"](function(){ce=!1,re.loading=!1})}function oe(e,t){if(parseInt(t,10)>0){for(var a=!1,i=0;i<e.length;i++)if(e[i].id===re.JobRecord.location_id){a=!0;break}if(!a)return o.call("locations/"+t,"GET",[],{}).then(function(t){return e.unshift(t.data.data),e},function(t){return m.resolve(e)})}return m.resolve(e)}function ne(e,t){for(var a={},o={},n="",l=0;l<e.length;l++)e[l].country.code in a||(a[e[l].country.code]=[],o[e[l].country.code]=e[l].country.name),a[e[l].country.code].push(e[l]);var s=r.getSortedCountryList(a),c=[];for(var d in s){var m=s[d];a[m].sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),c.push({value:null,name:i.getLocalizedCustom(o[m])});for(var l=0;l<a[m].length;l++)c.push({value:a[m][l].id,name:n+i.getLocalizedCustom(a[m][l].name)})}return c}function le(e){var e=e.map(function(e){return e.name=Array(5*e.level+1).join("")+e.name,e});return e}var re=this;re.customFieldScreen="job",re.isStandardSection=!0,re.customFieldModel={},re.customFieldStandardSection={},re.customFieldStandardSectionDefined=!1,re.customFieldScreenForStandardSection="job-standard",re.permissions={},re.employee="",re.initialJoinedDate=null,re.employeeTerminationRecord=null,re.hasEntitlements=!1,re.model={},re.contractFile=null,re.formData=null,re.history=[],re.locations=[],re.employeeNumber=a.empNumber,re.dirToggle=!0,re.errorFields={},re.resetDefaultDate={reset:!1},re.triggerCostCenterChange=!0,re.eeo_applicable=!1,re.dataGroupPermissions={},re.eeoApplicableLocations=[],re.customFieldsPerRow=3,re.jobEventTypeId=1,re.isConfirmChangesModalOpened=!1,re.wizardMode=t.current.data.wizardMode,re.customFieldService=x,re.employeeService=h,re.editable=!1,re.effectiveDateForCustomFields=null,re.showJobSection=!0,re.snapshotAsOf=null,re.snapshotAsOfLocalized=null,re.self=s.emp_number===a.empNumber,re.showDetailedHistorySection=!1,re.shouldValidateDates=!0,re.exitSnapshotView=K,re.getNameFromMap=Y,re.getEmploymentPeriod=J,re.onSubmitEmploymentDetails=Z,re.openSwitchToSnapshotPopover=ee,re.showTerminateEmploymentModal=q,re.showActivateEmploymentModal=G,re.showAdjustEntitlementModal=W,re.showJobConfirmationModal=X,re.tabClicked=M,re.getLocalizedExitSnapshotViewTooltip=function(){return i.getLocalizedCustom("Exit Snapshot View")};var se="currentJobTabKey";$(window).on("beforeunload",function(){localStorage.setItem(se,re.currentTabKey)});var ce=!1;e.$on("pim.save",function(e,t){var a=Z(re.employmentDetailsForm,!0);a?t.push(a):e.preventDefault()}),e.$on("pim.validate",function(t){re.employmentDetailsForm&&(e.$broadcast("schemaFormValidate",re.employmentDetailsForm),re.employmentDetailsForm.$valid||t.preventDefault())}),e.$on("updateJobValues",function(){P(!0),e.$broadcast("updateStandardCustomFieldSection",{effectiveDate:null,isSnapshotView:!!re.snapshotAsOf})}),re.loading=!0,F.getEmployee().then(function(e){re.employee=e;var i={permissions:L(),employeePermissions:h.getEmployeePermissions(),maxAttachmentSize:y.getSetting("max_attachment_size"),fileTypes:y.getSetting("attachmentFileTypes"),fileTypesDisplayName:y.getSetting("attachmentFileTypesDisplayName"),auditModules:o.call("auditModules","GET",[],{},void 0,!0),jobEvents:o.call("pimHistoryEvents","GET",[],{filter:{type:re.jobEventTypeId}},void 0)};re.wizardMode?(i.fieldConfiguration=h.getFieldConfigurationByRoute(t.current.name,"PimJob",re.employee.locationId),i.customFieldConfiguration=h.getCustomFieldConfigurationByRoute(t.current.name,re.employee.locationId)):i.hasEntitlements=w.hasEntitlements(a.empNumber),m.all(i).then(function(e){re.employeePermissions=e.employeePermissions,re.maxAttachmentSize=e.maxAttachmentSize,re.fileTypes=e.fileTypes,re.fileTypesDisplayName=e.fileTypesDisplayName,re.wizardMode?(re.fieldConfiguration=e.fieldConfiguration,re.customFieldConfiguration=e.customFieldConfiguration,0===re.fieldConfiguration.length&&(re.showJobSection=!1)):(re.customFieldConfiguration=!0,re.hasEntitlements=e.hasEntitlements.data["entitlements-exist"]),re.dataGroupPermissions=e.permissions,re.permissions={job:e.permissions.job_history_details,jobHistory:e.permissions.job_history,attachments:e.permissions.job_attachment,documents:e.permissions.employee_job_documents,customFields:e.permissions.job_custom_fields,auditTrail:e.permissions.admin_audit_trail},re.auditSectionIds=re.permissions.auditTrail.read?I.getAuditTrailSectionIds(e.auditModules.data.data,["JobRecord","JobCustomField"]):[],re.eventData=r.getEnumAndTitleMapForSelect(e.jobEvents.data.data),re.loading=!1,re.editable=re.permissions.job.update,re.permissionsForHistory={},angular.copy(re.permissions,re.permissionsForHistory),A(),P(!0)})})}angular.module("app.pim").controller("PimJobController",e),e.$inject=["$scope","$state","$stateParams","localizedMessages","webservice","toast","loader","formHelper","$rootScope","pimTabs","datagroupPermissions","$q","LOGIN","ModalService","modalHelperService","dateService","employeeService","$translate","settingsService","formValidationHelper","jobConstants","leaveEntitlementService","subunitService","customFieldHelper","$timeout","customFieldService","jobService","jobWizardService","jobFormService","pimHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s){function c(e,t){e.eeo_applicable=1==e.formData.organizationData.eeo_applicable&&$.inArray(t,e.eeoApplicableLocations)!=-1}function d(e){return i.call("employees/"+e+"/job/history","GET",{}).then(function(e){return e})}function m(){return i.call("standardTimeZones","GET",[],{}).then(function(e){var t=[],a=[],i={},o=e.data.data;return o.forEach(function(e){var o={value:e.name,name:"("+e.prefix+") "+n.getLocalizedCustom(e.label)};e.alternativeKeys&&e.alternativeKeys.forEach(function(t){i[t]=e.name}),t.push(o),a.push(o.value)}),{titleMap:t,"enum":a,timezoneAlternativeKeys:i}})}function u(e,t){return t&&!e["enum"].includes(t)&&Object.keys(e.timezoneAlternativeKeys).includes(t)?e.timezoneAlternativeKeys[t]:t}function p(e,t){var a=t?t:Intl.DateTimeFormat().resolvedOptions().timeZone;return u(e,a)}function f(e){return l.toLocalizedDate(e)}function g(e){return"1"===e?n.getLocalizedCustom("Yes"):n.getLocalizedCustom("No")}function h(e){var t=[];return angular.forEach(e,function(e){"1"==e.eeo_applicable&&t.push(e.id)}),t}function v(e){return a.getEmployee()}function y(e,t,a){var i={};return c(t,e.location_id),i.joined_date=e.joined_date?new Date(moment.utc(e.joined_date).format("l LT")):null,i.probation_end_date=e.probation_end_date?new Date(moment.utc(e.probation_end_date).format("l LT")):null,i.date_of_permanency=e.date_of_permanency?new Date(moment.utc(e.date_of_permanency).format("l LT")):null,e.effective_date&&(i.add_employee_effective_date=new Date(moment.utc(e.effective_date).format("l LT"))),i.job_title_id=e.job_title_id?e.job_title_id:"",i.employment_status_id=e.employment_status_id?e.employment_status_id:"",i.job_category_id=e.job_category_id?e.job_category_id:"",t.eeo_applicable&&(i.eeo_job_category=e.eeo_job_category?e.eeo_job_category:"",i.flsa_exempt=1==e.flsa_exempt),i.subunit_id=e.subunit_id?e.subunit_id:"",i.location_id=e.location_id?e.location_id:"",a=a?a:"",i.work_shift_id=e.work_shift_id?e.work_shift_id:a,i.cost_centre_id=e.cost_centre_id,i.costCentre=e.costCentre?e.costCentre:null,i.pay_policy_id=e.pay_policy_id?e.pay_policy_id:"",i.has_contract_details=1==e.has_contract_details,i.current_service="",i.creditable_service="",e.hasOwnProperty("service_durations_in_ymd")&&(i.current_service=e.service_durations_in_ymd.current.y+" "+s.instant("Year(s)")+" "+e.service_durations_in_ymd.current.m+" "+s.instant("Month(s)")+" "+e.service_durations_in_ymd.current.d+" "+s.instant("Day(s)"),i.creditable_service=e.service_durations_in_ymd.creditable.y+" "+s.instant("Year(s)")+" "+e.service_durations_in_ymd.creditable.m+" "+s.instant("Month(s)")+" "+e.service_durations_in_ymd.creditable.d+" "+s.instant("Day(s)")),i.contract_start_date=e.contract_start_date?new Date(moment.utc(e.contract_start_date).format("l LT")):null,i.contract_end_date=e.contract_end_date?new Date(moment.utc(e.contract_end_date).format("l LT")):null,i.comment=e.comment?e.comment:"",i}function b(t){return!t.costCentre&&t.cost_centre_id?r.getCostCentreById(t.cost_centre_id).then(function(e){return t.costCentre=e,t},function(){return t.costCentre=null,t}):(t.costCentre=t.costCentre?t.costCentre:null,e.resolve(t))}function C(e,t,a,i){if(t)return t(e);var o=a&&!i;if(a&&!o)for(var n=0;n<i.length;n++)if(a==i[n].id){o=!0;break}return!o&&e&&(e=e+" ("+s.instant("Deleted")+")"),e}function w(e,t,a){var o=t!==!0,n="employees/"+e+"/job";return i.call(n,"GET",[],a,void 0,o).then(function(e){return e.data})}function S(e,a,i,o){var n=y(e,i),r=null,s=null,d=null;if(c(i,a.location_id),a.has_contract_details&&(r=null!==i.contractFile&&i.contractFile!==t.CONTRACT_ATTACHMENT_DELETED?i.contractFile:{},s=e.contract_details?e.contract_details:{},d=r.hasOwnProperty("filename")&&(r.filename!=s.filename||r.filetype!=s.file_type||r.filesize!=s.size)),l.isDateChanged(n.joined_date,a.joined_date)&&o.push("joined_date"),l.isDateChanged(n.probation_end_date,a.probation_end_date)&&o.push("probation_end_date"),l.isDateChanged(n.date_of_permanency,a.date_of_permanency)&&o.push("date_of_permanency"),n.job_title_id!==a.job_title_id&&o.push("job_title_id"),n.employment_status_id!==a.employment_status_id&&o.push("employment_status_id"),n.job_category_id!==a.job_category_id&&o.push("job_category_id"),n.subunit_id!==a.subunit_id&&o.push("subunit_id"),n.location_id!==a.location_id&&o.push("location_id"),n.work_shift_id!==a.work_shift_id&&o.push("work_shift_id"),n.pay_policy_id!==a.pay_policy_id&&o.push("pay_policy_id"),(n.cost_centre_id||a.cost_centre_id)&&n.cost_centre_id!==a.cost_centre_id&&o.push("cost_centre_id"),i.eeo_applicable){n.eeo_job_category!==a.eeo_job_category&&o.push("eeo_job_category");var m=1==a.flsa_exempt;n.flsa_exempt!==m&&o.push("flsa_exempt")}var u=a.comment?a.comment:"";if(n.comment!==u&&o.push("comment"),a.has_contract_details){var p=l.isDateChanged(n.contract_start_date,a.contract_start_date),f=l.isDateChanged(n.contract_end_date,a.contract_end_date),g=d||i.contractFile===t.CONTRACT_ATTACHMENT_DELETED;p&&o.push("contract_start_date"),f&&o.push("contract_end_date"),g&&o.push("contract_details"),!n.has_contract_details&&(p||f||g)&&o.push("has_contract_details")}else n.has_contract_details&&o.push("has_contract_details");return o}function D(e,t,a){var i,o,n,l,r,c,d={0:"job_title"};return _.forEach(d,function(d,m){l=e[m].data.data,a||(i=d+"_id",o=d+"_name",c="name",n=!t[i]&&t[o],"job_title"==d&&(c="jobTitleName",n=t.hasOwnProperty("is_job_title_deleted")),n&&(r={id:t[i]},r[c]=t[o]+" ("+s.instant("Deleted")+")","subunit"==d&&(r.level=1),0===l.filter(function(e){return e.id===r.id}).length&&l.push(r))),"job_title"==d&&l.sort(function(e,t){var a=e.jobTitleName.toLowerCase(),i=t.jobTitleName.toLowerCase();return a===i?0:a<i?-1:1})}),e}function T(e){return Object.keys(e).includes("joined_date")&&e.joined_date.value?e.joined_date.value:null}function x(e,t,a){e=e&&"function"==typeof e.getMonth?l.toStandardDate(e):e;var i;return _.forEach(t,function(t,o){a&&a.id==t.id||(i=t.reactivationDate?t.reactivationDate:null,i&&(!e||i>e)&&(e=i))}),e}function F(e,a){var i=[],o=null;(e.job.read||e.customFields.read)&&(i.push({key:t.JOB_TAB_MAIN,title:"Employment Details","class":"card-title-text"}),o=t.JOB_TAB_MAIN),e.jobHistory.read&&(i.push({key:t.JOB_TAB_HISTORY,title:"Job History","class":"card-title-text"}),o=o?o:t.JOB_TAB_HISTORY),e.attachments.read&&(i.push({key:t.JOB_TAB_ATTACHMENTS,title:"Attachments","class":"card-title-text ",itemClass:"float-right",icon:"ohrm_attachments"}),o=o?o:t.JOB_TAB_ATTACHMENTS);var n=localStorage.getItem(a);return n&&(o=n,localStorage.removeItem(a)),{tabs:i,current:o}}function k(e,t,a){return i.call("employees/"+e+"/job","PATCH",t).then(function(e){return e.data.data})}var E={checkIsEEOApplicable:c,fetchJobHistory:d,fetchTimeZones:m,formatDateValue:f,formatBooleanValue:g,getEEOApplicableLocationIds:h,getEmployee:v,getFormValuesFromJobRecord:y,getFormattedValue:C,getJobRecord:w,getModifiedFields:S,getModifiedMasterData:D,getModifiedTimeZoneKey:u,getNextJoinedDate:T,getServiceStartDate:x,getTabsForPimJobPage:F,getUserTimeZone:p,updateEmployeeJobRecord:k,updateCostCentre:b};return E}angular.module("app.pim").factory("jobService",e),e.$inject=["$q","jobConstants","pimTabs","webservice","formValidationHelper","localizedMessages","dateService","costCentreService","$translate"]}(),function(){"use strict";function e(e,t){function a(e,a){return t.call("employees/"+e+"/memberships","POST",a).then(function(e){return e.data.data})}function i(e,a,i){return t.call("employees/"+e+"/memberships/"+i,"PATCH",a).then(function(e){return e.data.data})}function o(e){return t.get("employees/"+e+"/memberships",{},{useCache:!1}).then(function(e){return e.data.data})}function n(e,a){return t.call("employees/"+e+"/memberships","DELETE",{data:a},{})}var l={addMembership:a,updateMembership:i,getMemberships:o,deleteMemberships:n};return l}angular.module("app.pim").factory("membershipService",e),e.$inject=["$q","webservice"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y){function b(){A.tempEmpNo=u.empNumber}function C(e){A.model={membership:A.membership.membershipId?A.membership.membershipId:"",subscriptionPaidBy:A.membership.subscriptionPaidBy,subscriptionFee:A.membership.subscriptionFee,subscriptionCurrency:A.membership.subscriptionCurrency,subscriptionCommenceDate:A.membership.subscriptionCommenceDate?new Date(moment.utc(A.membership.subscriptionCommenceDate).format("l LT")):null,subscriptionRenewalDate:A.membership.subscriptionRenewalDate?new Date(moment.utc(A.membership.subscriptionRenewalDate).format("l LT")):null},A.schema={type:"object",title:"Membership",properties:{membership:{title:"Membership",type:"string","enum":e.memberships["enum"],maxLength:50},subscriptionPaidBy:{title:"Subscription Paid By",type:"string",maxLength:50},subscriptionFee:{title:"Subscription Amount",type:"string",maxLength:13},subscriptionCurrency:{title:"Currency",type:"string","enum":e.currency["enum"],maxLength:50},subscriptionCommenceDate:{title:"Subscription Commence Date",type:["null","object"]},subscriptionRenewalDate:{title:"Subscription Renewal Date",type:["null","object"]}},required:["membership"]},A.form=[{type:"row",items:[{key:"membership",type:"select",htmlClass:"col-12",titleMap:e.memberships.titleMap,validationMessage:{duplicationMemberships:a.getLocalizedCustom("Already exists"),302:a.getLocalizedCustom("Required")},$validators:{duplicationMemberships:function(e){return S(e)}}}]},{type:"row",items:[{type:"select",htmlClass:"col-12",key:"subscriptionPaidBy",titleMap:[{value:"Company",name:a.getLocalizedCustom("Company")},{value:"Individual",name:a.getLocalizedCustom("Individual")}]}]},{type:"row",items:[{type:"text",htmlClass:"col-6",key:"subscriptionFee",$validators:{numberOnlyValidation:d.numericWithDigits.validator,positiveNumber:d.positiveIntegerWithDigits.validator,subscriptionAmountMaxValidation:D},validationMessage:{numberOnlyValidation:a.getLocalizedCustom("Should be a number"),positiveNumber:a.getLocalizedCustom("Should be a positive number"),subscriptionAmountMaxValidation:a.getLocalizedCustom("Should be less than 1,000,000,000.00")}},{type:"select",htmlClass:"col-6",key:"subscriptionCurrency",titleMap:e.currency.titleMap}]},{type:"row",items:[{type:"date",htmlClass:"col-6",key:"subscriptionCommenceDate",validationMessage:{maxDate:a.getLocalizedCustom("Renewal date should be after commence date")},$validators:{maxDate:function(e){return d.minDate.validator(A.model.subscriptionRenewalDate,e)}},ngModelOptions:{allowInvalid:!0},onChange:_,defaultDate:A.model.subscriptionCommenceDate,resetDefaultDate:A.resetDefaultDate},{type:"date",htmlClass:"col-6",key:"subscriptionRenewalDate",validationMessage:{minDate:a.getLocalizedCustom("Renewal date should be after commence date")},$validators:{minDate:function(e){return d.minDate.validator(e,A.model.subscriptionCommenceDate)}},ngModelOptions:{allowInvalid:!0},onChange:_,defaultDate:A.model.subscriptionRenewalDate,resetDefaultDate:A.resetDefaultDate}]}],A.wizardMode&&h.updateFormFields(A.schema,A.form,v)}function w(e){for(var t in l)if(l.hasOwnProperty(t)){var a=e.map(function(e){return e.id}).indexOf(l[t].Membership.id);e.splice(a,1)}return e}function _(){d.minDate.validator(A.model.subscriptionRenewalDate,A.model.subscriptionCommenceDate)&&(m.$broadcast("schemaForm.error.subscriptionCommenceDate","maxDate",!0),m.$broadcast("schemaForm.error.subscriptionRenewalDate","minDate",!0))}function S(e){var t=!0;if(""==e)return t;if(e==A.membership.membershipId)return t;for(var a in l)if(l.hasOwnProperty(a)&&e==l[a].Membership.id){t=!1;break}return t}function D(e){return null==e||""==e||parseInt(e,10)<L}function T(e){if(m.$broadcast("schemaFormValidate"),e.$valid){s.show(),angular.extend(A.membership,A.model);var t={membershipId:A.model.membership,subscriptionPaidBy:A.model.subscriptionPaidBy,subscriptionFee:A.model.subscriptionFee?A.model.subscriptionFee:null,subscriptionCurrency:A.model.subscriptionCurrency,subscriptionCommenceDate:A.model.subscriptionCommenceDate,subscriptionRenewalDate:A.model.subscriptionRenewalDate};""!=A.model.subscriptionCommenceDate&&null!=A.model.subscriptionCommenceDate?t.subscriptionCommenceDate=p.toStandardDate(A.model.subscriptionCommenceDate):t.subscriptionCommenceDate=null,""!=A.model.subscriptionRenewalDate&&null!=A.model.subscriptionRenewalDate?t.subscriptionRenewalDate=p.toStandardDate(A.model.subscriptionRenewalDate):t.subscriptionRenewalDate=null;var i,o,n=A.membership.membershipId;n?(o=g.updateMembership(A.tempEmpNo,t,n).then(function(e){x(e,n)}),i="updateSuccess"):(o=g.addMembership(A.tempEmpNo,t).then(function(e){null!=e.subscriptionFee&&(e.subscriptionFee=parseFloat(e.subscriptionFee).toFixed(2)),l.unshift(e)}),i="saveSuccess"),o.then(function(e){s.hide(),A.wizardMode||a.showLocalizedToast(i)},function(e){s.hide(),A.wizardMode||c.error(e)}),r(!0)}}function x(e,t){for(var a=0;a<l.length;a++)if(l[a].membershipId==t){null!=e.subscriptionFee&&(e.subscriptionFee=parseFloat(e.subscriptionFee).toFixed(2)),angular.extend(l[a],e);break}}function F(a){var o=[];o.push(t.call("memberships","GET",[],{})),o.push(t.call("currency","GET",[],{})),i.all(o).then(function(t){A.membershipList=t[0].data.data;var a;a=e?t[0].data.data:w(t[0].data.data);var i=t[1].data.data;C({memberships:k(a),currency:E(i)})})}function k(e){for(var t=[],a=[],i=0;i<e.length;i++)t.push({value:e[i].id,name:e[i].name}),a.push(e[i].id);return{titleMap:t,"enum":a}}function E(e){for(var t=[],i=[],o=0;o<e.length;o++)t.push({value:e[o].currency_id,name:a.getLocalizedCustom(e[o].currency_name)}),i.push(e[o].currency_id);return{titleMap:t,"enum":i}}function I(){r(!1)}C.$inject=["formData"];var A=this;A.title=n||"Membership";var M={};angular.copy(o,M),A.membership=M,A.save=T,A.cancel=I,A.isEdit=e;var L=999999999.99;A.resetDefaultDate={reset:!1},A.wizardMode=f.current.data.wizardMode,A.membershipList=[],y.close=r,b(),F(C)}angular.module("app.pim").controller("PimEditMembershipController",e),e.$inject=["isEdit","webservice","localizedMessages","$q","membership","title","dataList","close","loader","toast","formValidationHelper","$scope","$stateParams","dateService","$state","membershipService","wizardService","fieldConfiguration","modalFunctions"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v){function y(){l.show(),g.getEmployee().then(function(i){M.employee=i;var r={membershipMasterDataList:n.call("memberships","GET",[],{}),permissions:b()};M.wizardMode&&(r.fieldConfiguration=h.getFieldConfigurationByRoute(s.current.name,"PimMembership",M.employee.locationId)),r.customFieldConfiguration=h.getCustomFieldConfigurationByRoute(s.current.name,M.employee.locationId).then(function(e){M.customFieldConfiguration=e}),e.all(r).then(function(e){M.wizardMode&&(M.fieldConfiguration=e.fieldConfiguration,0===M.fieldConfiguration.length&&(e.permissions.membership={read:!1,create:!1,update:!1,"delete":!1})),M.attachmentPermission=e.permissions.membership_attachment,M.customFieldsPermission=e.permissions.membership_custom_fields,M.permissions=e.permissions.membership,l.hide(),M.permissions.read&&p.getMemberships(M.tempEmpNo).then(function(e){M.membership=e,M.membership=u.getSortedObjectList(M.membership,function(e){return e.Membership.name},"ASC"),M.loaded=!0,C(),M.membershipListHelper=new a.list(M.listData.membership,M.membership),M.selectAll=M.membershipListHelper.selectAllItems,M.deselectAll=M.membershipListHelper.deselectAllItems,M.wizardMode?f.updateListFields(M.listData.membership.listFields,M.fieldConfiguration):0===M.membership.length&&o.infoToast("No Records Found")}),M.wizardMode||t.$broadcast("setEmployeeDetailsForPimTabs")})})}function b(){var e=!1;null!=t.emp_number&&t.emp_number==c.empNumber&&(e=!0);var a=["membership","membership_attachment","membership_custom_fields"];return h.getDatagroupPermissions(c.empNumber,a,e).then(function(e){return e.membership.read||e.membership_attachment.read||e.membership_custom_fields.read||(l.hide(),s.go("403")),e})}function C(){M.panelInfo={membershipInfo:{title:"Assigned Memberships",icon:"images/pim/icon_work.svg"}},w()}function w(){var e=function(e){return e?(e=e.slice(0,10),m.toLocalizedDate(e)):e},t=[{name:"membership",lable:"Membership",getter:["Membership","name"]},{name:"subscriptionPaidBy",lable:"Subscription Paid By",getter:"subscriptionPaidBy",formatter:function(e){return o.getLocalizedCustom(e)}},{name:"subscriptionFee",lable:"Subscription Amount",getter:"subscriptionFee","class":"right-aligned-list-column",formatter:function(e){return e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):""}},{name:"subscriptionCurrency",lable:"Currency",getter:"subscriptionCurrency"},{name:"subscriptionCommenceDate",lable:"Subscription Commence Date",getter:"subscriptionCommenceDate",formatter:e},{name:"subscriptionRenewalDate",lable:"Subscription Renewal Date",getter:"subscriptionRenewalDate",formatter:e}],a=[{colspan:3}],i=[{"class":"edit_item",clickAction:"editMembership",tooltip:"Edit"}],n=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:M.permissions["delete"]}];M.listData={membership:{selectable:!0,selected:[],idGetter:"membershipId",listFields:t,showColumnsAnyway:!0,permission:M.permissions,listActions:n}},M.permissions.update&&(M.listData.membership.extraTH=a,M.listData.membership.extraTD=i)}function _(){if(M.listData.membership.selected.length>0){var e=M.listData.membership.selected.length;l.show(),p.deleteMemberships(M.tempEmpNo,M.listData.membership.selected).then(function(){l.hide(),M.wizardMode||o.showLocalizedToast("deleteSuccess"),M.total-=e,S(M.listData.membership.selected)},function(e){l.hide(),r.success(e)})}}function S(e){for(var t=M.membership.length-1;t>=0;t--){var a=e.indexOf(M.membership[t].membershipId);a>-1&&(e.splice(a,1),M.membership.splice(t,1))}}function D(e){var t=e.obj;if(t.selected)M.listData.membership.selected.push(t.membershipId);else{var a=M.listData.membership.selected.indexOf(t.membershipId);a>-1&&M.listData.membership.selected.splice(a,1)}}function T(){if(M.listData.membership.selected.length>0){if(M.wizardMode)return void _();i.showDeleteConfirmationModal().then(function(e){e===!0&&_()})}}function x(){return{close:function(){}}}function F(e){E(e,"Edit Membership",!0)}function k(){var e={membership:"",subscriptionPaidBy:"",subscriptionFee:"",subscriptionCurrency:"",subscriptionCommenceDate:"",subscriptionRenewalDate:""};E(e,"Add Membership",!1)}function E(e,t,a){var o=x();i.showModal("app/pim/memberships/membership_modal.html","PimEditMembershipController","modal",{membership:e,dataList:M.membership,title:t,modalFunctions:o,membershipService:p,isEdit:a,fieldConfiguration:M.fieldConfiguration})}function I(){close(!0)}function A(){close(!1)}var M=this;M.wizardMode=s.current.data.wizardMode,M.customFieldService=v,M.employeeService=h,M.title="Membership",M.customFieldScreen="membership",M.loaded=!1,M.membership="",M.addMembership=k,M.editMembership=F,M.deleteMembership=_,M.changeSelection=D,M.deleteSelection=T,M.confirm=I,M.cancel=A,M.attachmentPermission,M.customFieldsPermission,M.tempEmpNo=c.empNumber,M.wizardMode=s.current.data.wizardMode,n.isLoggedIn()?y():n.login().then(function(e){y()})}angular.module("app.pim").controller("PimMembershipController",e),e.$inject=["$q","$rootScope","listHelper","modalHelperService","localizedMessages","webservice","loader","toast","$state","$stateParams","datagroupPermissions","dateService","formHelper","membershipService","wizardService","pimTabs","employeeService","customFieldService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r){function s(){o.show();var n={include:"JobRecord,workExperience,education,EmployeeTerminationRecord,JobCandidate"};a.call("employees/"+e.emp_number,"GET",[],n).then(function(a){i.setEmployee(r.convertDates(a.data.data)),i.getAccessiblePimTabs(e.emp_number).then(function(a){e.$broadcast("setEmployeeDetailsForPimTabs");var i=a[0];if(a.length>0&&"uiSref"in i)if(o.hide(),"tabId"in i&&i.tabId){var n={empNumber:e.emp_number,tabId:i.tabId};t.go(i.originalState,n)}else t.go(i.uiSref,{empNumber:e.emp_number});else o.hide(),t.go("403")})})}null==e.emp_number?a.login().then(function(){s()}):s()}angular.module("app.pim").controller("PimMyInfoController",e),e.$inject=["$rootScope","$state","webservice","pimTabs","loader","toast","localizedMessages","pimHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p){function f(){p.setForcedTitle(["Configure My Shortcuts"]),r.$broadcast("unmarkCurrentMenuItem"),T.permissions={read:!0,create:!0,update:!0,"delete":!0},T.permissions.read?(s.show(),T.fetchMyShortcuts(),s.hide()):(s.hide(),m.go("403"))}function g(){s.show(),n.call("myShortcuts","GET",[]).then(function(e){v(),T.myShortcuts=e.data.data,h(),s.hide(),0==T.myShortcuts.length&&l.infoToast("No Records Found")})}function h(){T.myShortcutsListHelper=new t.list(T.listData.myShortcuts,T.myShortcuts),T.selectAll=T.myShortcutsListHelper.selectAllItems,T.deselectAll=T.myShortcutsListHelper.deselectAllItems}function v(){T.panelInfo={myShortcutsInfo:{}},y()}function y(){var e=[{name:"name",lable:"Name",getter:"name",sortable:!1,sortAction:"fetchMyShortcuts"}],t=[{colspan:3}],a=[{clickAction:"deleteMyShortcutConfirmation",tooltip:"Delete Shortcut",icon:function(){return"ohrm_delete"}}];T.listData={myShortcuts:{selectable:!1,selected:[],idGetter:"id",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:T.permissions,columnWidths:["95%","5%"],pagination:!1}}}function b(){T.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function C(e){n.call("myShortcuts","DELETE",{data:[e.id]},{}).then(function(t){s.hide(),l.showLocalizedToast("deleteSuccess"),w([e.id]);var a=!1;0==T.myShortcuts.length&&(a=!0),u.deleteItemFromMyShortcutDropDownList(e,a)},function(e){s.hide(),c.success(e)})}function w(e){for(var t=T.myShortcuts.length-1;t>=0;t--){var a=e.indexOf(T.myShortcuts[t].id);a>-1&&(e.splice(a,1),T.myShortcuts.splice(t,1))}}function _(e){e&&o.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(t){$(t.element).openModal(),t.close.then(function(t){
t===!0&&C(e)})})}function S(){close(!0)}function D(){close(!1)}var T=this;T.title="",T.deleteMyShortcutConfirmation=_,T.confirm=S,T.cancel=D,T.fetchMyShortcuts=g,f(),b()}angular.module("app.pim").controller("PimConfigureMyShortcutController",e),e.$inject=["logger","listHelper","$window","$q","ModalService","webservice","localizedMessages","$rootScope","loader","toast","datagroupPermissions","$state","myShortcutService","titleService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s){function c(){i.show(),n.getPermissions().then(function(e){p.permissions=e.pim_optional_fields,e.pim_optional_fields.read?t.call("configurePim","GET",[]).then(function(e){p.optionalFields=e.data.data,d(),i.hide()}):(i.hide(),r.go("403"))})}function d(){p.schema={type:"object",title:"Immigration",properties:{deprecatedFields:{title:"Show Nick Name, Smoker and Military Service in Personal Details",type:"boolean"},showSSN:{title:"Show Main Id in Personal Details",type:"boolean"},ssnFieldName:{title:"Label",type:"string",maxLength:20},showSIN:{title:"Show SIN field in Personal Details",type:"boolean"},showTax:{title:"Show US Tax Exemptions menu",type:"boolean"},showNation:{title:"Show Nationality of Dependents",type:"boolean"}},required:[]},p.form=[{type:"help",htmlClass:"optional-field-content form-heading",helpvalue:"<h4>"+e.getLocalizedCustom("Show Deprecated Fields")+"</h4>"},{type:"section",htmlClass:"s12",items:[{key:"deprecatedFields"}]},{type:"help",htmlClass:"form-heading optional-field-content",helpvalue:"<h4>"+e.getLocalizedCustom("Country Specific Information")+"</h4>"},{type:"section",htmlClass:"col s12",items:[{key:"showTax"}]},{type:"section",htmlClass:"row",items:[{key:"showSIN"}]},{type:"section",htmlClass:"row ",items:[{type:"section",htmlClass:"col s4 optional-field-content",items:[{key:"showSSN"}]},{type:"section",htmlClass:"col s2 optional-field-content-label",items:[{key:"ssnFieldName",validationMessage:{201:s.textLengthExceedValidation.message(p.schema.properties.ssnFieldName.maxLength)}}]}]},{type:"help",htmlClass:"form-heading optional-field-content no-top-margin",helpvalue:"<h4>"+e.getLocalizedCustom("Dependents Related Information")+"</h4>"},{type:"section",htmlClass:"col s12",items:[{key:"showNation"}]},{type:"section",htmlClass:"row",items:[{htmlClass:"col s12 right-align",type:"submit",title:"Save"}]}],p.model={deprecatedFields:p.optionalFields.deprecatedFields,showSSN:p.optionalFields.showSSN,ssnFieldName:e.getLocalizedCustom(p.optionalFields.ssnFieldName),showSIN:p.optionalFields.showSIN,showTax:p.optionalFields.showTax,showNation:p.optionalFields.showNation}}function m(e){a.$broadcast("schemaFormValidate"),e.$valid&&u(p.model)}function u(a){i.show(),angular.extend(p.optionalFields,a);var n="PATCH",l="configurePim",r="updateSuccess";t.call(l,n,a,{}).then(function(a){i.hide(),t.clearCache("pimOptionalFieldConfiguration"),e.showLocalizedToast(r)},function(e){i.hide(),o.success(e)})}var p=this;p.title="Optional Fields",p.optionalFields="",p.save=u,p.onSubmit=m,c()}angular.module("app.pim").controller("PimOptionalFieldsController",e),e.$inject=["localizedMessages","webservice","$scope","loader","toast","datagroupPermissions","formHelper","$state","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h){function v(){null!=c.emp_number&&c.emp_number==d.empNumber&&(k.self=!0),t.show();var a=["personal_information","personal_attachment","personal_information_documents","personal_custom_fields"];p.getDatagroupPermissions(k.employeeNumber,a,k.self).then(function(a){if(a.personal_information.read||a.personal_attachment.read||a.personal_custom_fields.read){k.permissions=a;var i=[];i[0]=n.call("nationality","GET",[],void 0,void 0,!0),i[1]=n.call("pimOptionalFieldConfiguration","GET",[],void 0,void 0,!0),i[2]=s.getUserData(),i[3]=p.getDocumentTemplates("personal_information_documents"),i[4]=n.call("eeoEthnicity","GET",[],{},void 0,!0),i[5]=n.call("gender","GET",[],{},void 0,!0),e.all(i).then(function(e){k.nationalityList=r.getEnumAndTitleMapForSelect(e[0].data.data),k.optionalFieldConfig=e[1].data.data,k.canEditSensitiveInfo=c.emp_number!=d.empNumber||"Admin"==e[2].usertype,k.documentTemplateDetails=e[3],k.ethnicityList=r.getEnumAndTitleMapForSelect(e[4].data.data),k.genderList=r.getEnumAndTitleMapForSelect(e[5].data.data),C(self)},function(e){C(self)})}else t.hide(),o.go("403")})}function y(e){return p.checkIfDuplicateId(e,k.employee.empNumber).then(function(){i.$broadcast("schemaForm.error.employeeId","employeeIdExists",!0)},function(){i.$broadcast("schemaForm.error.employeeId","employeeIdExists",!1)})}function b(){k.formSchema={type:"object",title:"Personal Details",properties:{firstName:{title:"First Name",type:"string",maxLength:30},middleName:{title:"Middle Name",type:"string",maxLength:30},lastName:{title:"Last Name",type:"string",maxLength:30},employeeId:{title:"Employee Id",type:"string",maxLength:50},otherId:{title:"Other Id",type:"string",maxLength:30},licenseNo:{title:"Driver's License Number",type:"string",maxLength:30},emp_dri_lice_exp_date:{title:"License Expiry Date",type:["null","object"]},emp_gender:{title:"Gender",type:"string","enum":k.genderList["enum"]},emp_marital_status:{title:"Marital Status",type:"string","enum":["Married","Single","Other"]},nation_code:{title:"Nationality",type:"string","enum":k.nationalityList["enum"]},emp_birthday:{title:"Date of Birth",type:["null","object"],datePickerConfig:{max:new Date,selectMonths:!0,selectYears:2*E}},eeo_race_ent:{title:"EEO Race and Ethnicity",type:"string","enum":k.ethnicityList["enum"]}},required:["firstName","lastName","eeo_race_ent"]},k.eeo_config&&k.formSchema.required.push("eeo_race_ent"),k.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l4",key:"firstName",readonly:!k.permissions.personal_information.update,validationMessage:{302:a.getLocalizedCustom("Required"),201:h.textLengthExceedValidation.message(k.formSchema.properties.firstName.maxLength)}},{type:"text",htmlClass:"col s12 m12 l4",key:"middleName",readonly:!k.permissions.personal_information.update,validationMessage:{201:h.textLengthExceedValidation.message(k.formSchema.properties.middleName.maxLength)}},{type:"text",htmlClass:"col s12 m12 l4",key:"lastName",readonly:!k.permissions.personal_information.update,validationMessage:{302:a.getLocalizedCustom("Required"),201:h.textLengthExceedValidation.message(k.formSchema.properties.lastName.maxLength)}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l4",key:"employeeId",ngModelOptions:{allowInvalid:!0,debounce:100},condition:function(){return!k.wizardMode||!k.formModel.autoGenerateEmployeeId},onChange:function(){y(k.formModel.employeeId)},readonly:!k.canEditSensitiveInfo||!k.permissions.personal_information.update,validationMessage:{employeeIdExists:a.getLocalizedCustom("Employee Id must be unique"),201:h.textLengthExceedValidation.message(k.formSchema.properties.employeeId.maxLength)}},{type:"text",htmlClass:"col s12 m12 l4",key:"otherId",readonly:!k.permissions.personal_information.update,validationMessage:{201:h.textLengthExceedValidation.message(k.formSchema.properties.otherId.maxLength)}}]},{type:"section",htmlClass:"row",items:[{type:"date",htmlClass:"col s12 m12 l4",key:"emp_birthday",readonly:!k.canEditSensitiveInfo||!k.permissions.personal_information.update,defaultDate:k.formModel.emp_birthday,maximumDate:new Date},{type:"select",htmlClass:"col s12 m12 l4",titleMap:[{value:"Married",name:a.getLocalizedCustom("Married")},{value:"Single",name:a.getLocalizedCustom("Single")},{value:"Other",name:a.getLocalizedCustom("Other")}],key:"emp_marital_status",readonly:!k.permissions.personal_information.update},{type:"select",htmlClass:"col s12 m12 l4",titleMap:S(k.genderList.titleMap),key:"emp_gender",readonly:!k.permissions.personal_information.update}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l4",titleMap:S(k.nationalityList.titleMap),key:"nation_code",readonly:!k.permissions.personal_information.update},{type:"text",htmlClass:"col s12 m12 l4",key:"licenseNo",readonly:!k.canEditSensitiveInfo||!k.permissions.personal_information.update,validationMessage:{201:h.textLengthExceedValidation.message(k.formSchema.properties.licenseNo.maxLength)}},{type:"date",htmlClass:"col s12 m12 l4",key:"emp_dri_lice_exp_date",readonly:!k.permissions.personal_information.update,defaultDate:k.formModel.emp_dri_lice_exp_date}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l4",titleMap:S(k.ethnicityList.titleMap),key:"eeo_race_ent",condition:"personal.eeo_config",readonly:!k.permissions.personal_information.update}]}],r.addRequiredMessage(k.form);var e={type:"section",htmlClass:"row form-buttons",items:[]};if(k.permissions.personal_information.update&&!k.wizardMode){var i={htmlClass:"right",type:"submit",title:"Save"};e.items.push(i)}k.documentTemplateDetails.templates.length&&k.permissions.personal_information_documents.read&&e.items.push({htmlClass:"right",type:"pim-document-manager-button",datagroup:"personal_information_documents",employeeNumber:k.employeeNumber,employeeService:k.employeeService,documentTemplateDetails:k.documentTemplateDetails}),k.form.push(e),t.hide()}function C(t){f.getEmployee(t).then(function(t){k.employee=t;var a=[];a.push(n.call("organization","GET",[],{},void 0,!0)),a.push(p.getFieldConfigurationByRoute(o.current.name,"PimPersonalDetail",k.employee.locationId)),a.push(p.getCustomFieldConfigurationByRoute(o.current.name,k.employee.locationId)),a.push(n.call("locations","GET",[],{})),a.push(n.call("employees","GET",[],{})),e.all(a).then(function(e){var t;if(k.employee.locations)t=1==k.employee.locations.eeo_applicable;else if(k.employee.locationId){var a=e[3].data.data.filter(function(e){return e.id==k.employee.locationId&&1==e.eeo_applicable});t=!1,a.length>0&&(t=!0)}else t=!1;var i=e[0].data.data;t&&"1"==i.eeo_applicable?k.eeo_config=!0:k.eeo_config=!1,k.fieldConfiguration=e[1],k.wizardMode&&0===k.fieldConfiguration.length&&(k.permissions.personal_information={read:!1,create:!1,update:!1,"delete":!1}),k.customFieldConfiguration=e[2],k.lastEmployeeId=e[4].data.meta.lastEmployeeId}).then(function(){w(),b(),k.permissions.personal_custom_fields.read&&_(),k.wizardMode||c.$broadcast("setEmployeeDetailsForPimTabs"),p.updateFormFields(k.formSchema,k.form,k.fieldConfiguration,k.lastEmployeeId)})})}function w(){k.wizardMode&&(k.formModel.autoGenerateEmployeeId=k.employee.autoGenerateEmployeeId),k.formModel.firstName=k.employee.firstName,k.formModel.middleName=k.employee.middleName,k.formModel.lastName=k.employee.lastName,k.formModel.otherId=k.employee.otherId,k.formModel.emp_dri_lice_exp_date=k.employee.emp_dri_lice_exp_date,k.formModel.emp_birthday=k.employee.emp_birthday;var e=new Date,t=k.employee.emp_birthday;t&&(E=(e.getTime()-t.getTime())/31536e6),k.formModel.emp_marital_status=k.employee.emp_marital_status?k.employee.emp_marital_status:"",k.formModel.nation_code=k.employee.nation_code?k.employee.nation_code:"",k.formModel.emp_gender=k.employee.emp_gender?k.employee.emp_gender:"",k.formModel.licenseNo=k.employee.licenseNo,k.formModel.employeeId=k.employee.employeeId,k.eeo_config&&(k.formModel.eeo_race_ent=k.employee.eeo_race_ent?k.employee.eeo_race_ent:""),k.optionalFieldConfig.showDeprecatedFields&&(k.formModel.nickName=k.employee.nickName,k.formModel.smoker=1==k.employee.smoker,k.formModel.militaryService=k.employee.militaryService),k.optionalFieldConfig.showSSN&&(k.formModel.ssn=k.employee.ssn),k.optionalFieldConfig.showSIN&&(k.formModel.sin=k.employee.sin)}function _(){if(k.optionalFieldConfig.showDeprecatedFields){k.formSchema.properties.nickName={title:"Nick Name",type:"string",maxLength:30},k.formSchema.properties.smoker={title:"Smoker",type:"boolean"},k.formSchema.properties.militaryService={title:"Military Service",type:"string",maxLength:30};var e={type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l4",key:"nickName",readonly:!k.permissions.personal_information.update,validationMessage:{201:h.textLengthExceedValidation.message(k.formSchema.properties.nickName.maxLength)}},{type:"text",htmlClass:"col s12 m12 l4",key:"militaryService",readonly:!k.permissions.personal_information.update,validationMessage:{201:h.textLengthExceedValidation.message(k.formSchema.properties.militaryService.maxLength)}},{type:"checkbox",htmlClass:"col s12 m12 l4",key:"smoker",readonly:!k.permissions.personal_information.update}]};k.form.splice(4,0,e)}if(k.optionalFieldConfig.showSSN){var t=k.optionalFieldConfig.ssnLabel?k.optionalFieldConfig.ssnLabel:"Main Id";k.formSchema.properties.ssn={title:t,type:"string",maxLength:30},k.form[1].items.push({type:"text",htmlClass:"col s12 m12 l4",key:"ssn",validationMessage:{201:h.textLengthExceedValidation.message(k.formSchema.properties.ssn.maxLength)},readonly:!k.canEditSensitiveInfo||!k.permissions.personal_information.update})}k.optionalFieldConfig.showSIN&&(k.formSchema.properties.sin={title:"SIN Number",type:"string",maxLength:30},k.form[1].items.push({type:"text",htmlClass:"col s12 m12 l4",key:"sin",validationMessage:{201:h.textLengthExceedValidation.message(k.formSchema.properties.sin.maxLength)},readonly:!k.canEditSensitiveInfo||!k.permissions.personal_information.update}))}function S(e){for(var t=0;t<e.length;t++)e[t].name=a.getLocalizedCustom(e[t].name);return e}function D(t){return t?y(k.formModel.employeeId).then(function(){return i.$broadcast("schemaFormValidate",t.$name),t.$valid?T().then(function(){return e.resolve(!0)}):e.reject()}):e.resolve(!0)}function T(){var e=k.employee.empNumber,t={firstName:k.formModel.firstName,middleName:k.formModel.middleName,lastName:k.formModel.lastName,otherId:k.formModel.otherId,emp_gender:""==k.formModel.emp_gender?null:k.formModel.emp_gender,emp_marital_status:k.formModel.emp_marital_status,nation_code:""==k.formModel.nation_code?null:k.formModel.nation_code};return k.canEditSensitiveInfo&&(t.licenseNo=k.formModel.licenseNo,k.formModel.employeeId&&k.formModel.employeeId.trim()?t.employeeId=k.formModel.employeeId.trim():t.employeeId=null),k.optionalFieldConfig.showDeprecatedFields&&(t.nickName=k.formModel.nickName,t.smoker=k.formModel.smoker?1:0,t.militaryService=k.formModel.militaryService),k.optionalFieldConfig.showSSN&&k.canEditSensitiveInfo&&(t.ssn=k.formModel.ssn),k.optionalFieldConfig.showSIN&&k.canEditSensitiveInfo&&(t.sin=k.formModel.sin),k.eeo_config&&(t.eeo_race_ent=k.formModel.eeo_race_ent),""!=k.formModel.emp_birthday&&null!=k.formModel.emp_birthday&&k.canEditSensitiveInfo?t.emp_birthday=m.toStandardDate(k.formModel.emp_birthday):k.self||(t.emp_birthday=null),""!=k.formModel.emp_dri_lice_exp_date&&null!=k.formModel.emp_dri_lice_exp_date?t.emp_dri_lice_exp_date=m.toStandardDate(k.formModel.emp_dri_lice_exp_date):t.emp_dri_lice_exp_date=null,k.wizardMode&&(t.autoGenerateEmployeeId=k.formModel.autoGenerateEmployeeId),k.canEditSensitiveInfo||(t=x(t)),p.updateEmployee(e,t).then(function(e){if(!k.wizardMode)return a.showLocalizedToast("updateSuccess"),f.getEmployee(!0).then(function(e){k.employee=e,F()})})}function x(e){return delete e.ssn,delete e.sin,delete e.emp_birthday,delete e.licenseNo,delete e.employeeId,e}function F(){if(i.vm.employees)for(var e=0;e<i.vm.employees.length;e++)if(i.vm.employees[e].empNumber==k.employee.empNumber){i.vm.employees[e]=k.employee;break}}var k=this,E=50;k.onSubmit=D,k.permissions="",k.employee="",k.nationalityList="",k.optionalFieldConfig="",k.ethnicityList="",k.title="Personal Details",k.customFieldScreen="personal",k.submitPersonalDetails=T,k.formModel={},k.self=!1,k.employeeNumber=d.empNumber,k.eeo_config=!1,k.wizardMode=o.current.data.wizardMode,k.employeeService=p,k.customFieldService=g,k.fieldConfiguration=[],k.canEditSensitiveInfo=!1,k.lastEmployeeId="",v(),i.$on("pim.save",function(e,t){var a=D(k.personalDetailsForm);a?t.push(a):e.preventDefault()})}angular.module("app.pim").controller("PimPersonalDetailsController",e),e.$inject=["$q","loader","localizedMessages","$scope","$state","webservice","toast","formHelper","datagroupPermissions","$rootScope","$stateParams","dateService","$timeout","employeeService","pimTabs","customFieldService","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c){function d(){f.tempEmpNo=s.empNumber,f.isEdit=!!f.attachment.attach_id,c.getSettings().then(function(e){v=e.attachmentFileTypes,y=e.attachmentFileTypesDisplayName,m()})}function m(){f.schema={type:"object",title:"Attachment",properties:{filename:{title:"File",type:"object"},description:{title:"Description",type:"string",maxLength:400}},required:f.isEdit?[]:["filename"]},f.form=[{type:"row",items:[{type:"file",htmlClass:"col-12",key:"filename",filename:f.attachment.filename,maxSize:a.maxSize,allowedFileTypes:v,allowedFileTypesDisplayName:y,validationMessage:{fileSize:t.getLocalizedCustom("Attachment size exceeded"),302:t.getLocalizedCustom("Required"),fileType:t.getLocalizedCustom("Attachment type invalid")}},{type:"textarea",htmlClass:"col-12",key:"description"}]}],f.model={screen:f.attachment.screen,description:f.attachment.description}}function u(l){var s=f.model;if(r.$broadcast("schemaFormValidate"),l.$valid){o.show(),angular.extend(f.attachment,s);var c=f.attachment.attach_id;s.attach_id=f.attachment.attach_id;var d="POST",m="employees/"+f.tempEmpNo+"/employeeAttachments",u="saveSuccess";c?(d="PATCH",u="updateSuccess"):(s.empNumber=f.tempEmpNo,d="POST"),e.call(m,d,s,{}).then(function(e){o.hide(),"POST"==d?a.addItemToList(e.data.data):a.updateList(e.data.data),t.showLocalizedToast(u)},function(e){o.hide(),n.success(e)}),i(!0)}}function p(){i(!1)}var f=this,g={},h=a.attachment;angular.copy(h,g),f.title=a.title||"Attachment",f.attachment=g,f.save=u,f.cancel=p;var v="",y="";d()}angular.module("app.pim").controller("PimAttachmentModalController",e),e.$inject=["webservice","localizedMessages","modalInput","close","loader","toast","formHelper","$scope","$stateParams","settingsService"]}(),function(){"use strict";function e(e,t){function a(){t(!0)}function i(){t(!1)}var o=this;o.confirm=a,o.cancel=i}angular.module("app.pim").controller("PimDeleteConfirmationController",e),e.$inject=["$scope","close"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){v.tempEmpNo=d.empNumber,m.getSetting("max_attachment_size").then(function(e){v.maxAttachmentSize=e,p()})}function p(){v.schema={type:"object",title:"Attachment",properties:{filename:{title:"File",type:"string"},description:{title:"Comment",type:"string"}},required:["filename"]},v.form=[{type:"section",htmlClass:"row",items:[{type:"file",htmlClass:"col s12",key:"filename",filename:v.attachment.filename,maxSize:v.maxAttachmentSize,validationMessage:{fileSize:a.getLocalizedCustom("Attachment size exceeded")},onFileChange:g},{type:"textarea",htmlClass:"col s12 file-description",key:"description"}]}],s.addRequiredMessage(v.form),v.model={screen:v.attachment.screen,description:v.attachment.description}}function f(e){var i=v.model;if(c.$broadcast("schemaFormValidate"),e.$valid){l.show(),angular.extend(v.attachment,i);var s=(v.attachment.emp_number,v.attachment.attach_id);i.attach_id=v.attachment.attach_id;var d="POST",m="employees/"+v.tempEmpNo+"/employeeAttachments",u="saveSuccess";s?(d="PATCH",u="updateSuccess"):(i.empNumber=v.tempEmpNo,d="POST",u="saveSuccess"),t.call(m,d,i,{}).then(function(e){l.hide(),"POST"==d&&o.unshift(e.data.data),a.showLocalizedToast(u)},function(e){l.hide(),r.success(e)}),n(!0)}}function g(e){v.model.filename=e}function h(){n(!1)}var v=this,y={};angular.copy(i,y),v.attachment=y,v.save=f,v.cancel=h,v.fileSelected=g,u()}angular.module("app.pim").controller("PimEditAttachmentController",e),e.$inject=["logger","webservice","localizedMessages","attachment","dataList","close","loader","toast","formHelper","$scope","$stateParams","settingsService"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"pim",config:{"abstract":!0,url:"/pim",template:"<ui-view/>"}},{state:"vuepim",config:{"abstract":!0,url:"/pim",template:"<ui-view/>"}},{state:"pim.employees",config:{url:"/employees",views:{"":{templateUrl:"app/pim/employeeList/employee_list.html",controller:"PimListController",controllerAs:"vm"},"navbar@":{templateUrl:"app/pim/employeeList/employee_list_navbar.html",controller:"EmployeeListNavbarController",controllerAs:"navbar"}},data:{title:"Employee List",navbar:{title:!0,employeeSearch:!0,employeeProfile:!1},addShortcut:!0,paramsToMatchMenu:{filterParameters:null,calledFromMyShortcuts:null}},params:{filterParameters:null,calledFromMyShortcuts:null}}},{state:"pim.employees.profile",config:{url:"/{empNumber}",params:{employee:null},reloadOnSearch:!1,views:{"":{templateUrl:"app/pim/profile.html"},"customTopRibbon@":{templateUrl:"app/pim/pimTabs/pim_employee_profile_custom_top_ribbon.html",controller:"EmployeeProfileCustomTopRibbonController",controllerAs:"vm"},"navbar@":{templateUrl:"app/pim/pimTabs/pim_tab_navbar.html",controller:"PimTabNavbarController",controllerAs:"nav"}},data:{navbar:{title:!1,employeeSearch:!1,employeeProfile:!0}}}},{state:"pim.employees.profile.profile",config:{url:"/profile",views:{"":{templateUrl:"app/pim/employeeProfile/employee_profile.html",controller:"PimEmployeeProfileDashboardController",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/pim/pimTabs/pim_employee_profile_custom_top_ribbon.html",controller:"EmployeeProfileCustomTopRibbonController",controllerAs:"vm"}},data:{title:"Profile",oxd:!0},resolve:{employeeService:"employeeService"}}},{state:"pim.employees.profile.personal_details",config:{url:"/personal_details",views:{"":{templateUrl:"app/pim/personaldetails/personal_details.html",controller:"PimPersonalDetailsController",controllerAs:"personal"}},data:{title:"Personal Details"},resolve:{employeeService:"employeeService"}}},{state:"pim.employees.profile.qualifications",config:{url:"/qualifications",views:{"":{templateUrl:"app/pim/qualifications/qualifications.html",controller:"PimQualificationsController",controllerAs:"qualifications"}},data:{title:"Qualifications"}}},{state:"pim.employees.profile.social_media",config:{url:"/social_media",views:{"":{templateUrl:"app/pim/socialmedia/social_media.html",controller:"PimSocialMediaController",controllerAs:"socialMedia"}},data:{title:"Social Media Details"}}},{state:"pim.employees.profile.direct_deposit",config:{url:"/direct_deposit",views:{"":{templateUrl:"app/pim/directDeposit/direct-deposit.html",controller:"PimDirectDepositController",controllerAs:"vm"}},data:{title:"Direct Deposits"}}},{state:"pim.employees.profile.work_week",config:{url:"/work_week",views:{"":{templateUrl:"app/pim/workWeek/work-week.html",controller:"PimWorkWeekController",controllerAs:"vm"}},data:{title:"Employee Work Week"}}},{state:"pim.employees.profile.contact_details",config:{url:"/contact_details",views:{"":{templateUrl:"app/pim/contactdetails/contact_details.html",controller:"PimContactDetailsController",controllerAs:"contact"}},data:{title:"Contact Details"},resolve:{employeeService:"employeeService"}}},{state:"pim.employees.profile.job",config:{url:"/job",views:{"":{templateUrl:"app/pim/job/job.html",controller:"PimJobController",controllerAs:"job"}},data:{title:"Job",oxd:!0}}},{state:"pim.employees.profile.salary",config:{url:"/salary",views:{"":{templateUrl:"app/pim/salary/salary.html",controller:"PimSalaryController",controllerAs:"vm"}},data:{title:"Salary",oxd:!0}}},{state:"pim.employees.profile.emergency_contact",config:{url:"/emergency_contact",views:{"":{templateUrl:"app/pim/emergencycontacts/emergency_contact.html",controller:"PimEmergencyContactController",controllerAs:"emergencyContact"}},data:{title:"Emergency Contacts"}}},{state:"pim.employees.profile.report_to",config:{url:"/employee_reportto",views:{"":{templateUrl:"app/pim/reportTo/reportto.html",controller:"PimReportToController",controllerAs:"reportto"}},data:{title:"Report-to"}}},{state:"pim.employees.profile.dependent",config:{url:"/employee_dependents",views:{"":{templateUrl:"app/pim/dependents/employee_dependents.html",controller:"PimDependentsController",controllerAs:"dependents"}},data:{title:"Dependents"},resolve:{employeeService:"employeeService"}}},{state:"pim.employees.profile.memberships",config:{url:"/employee_memberships",views:{"":{templateUrl:"app/pim/memberships/memberships.html",controller:"PimMembershipController",controllerAs:"memberships"}},data:{title:"Memberships"}}},{state:"pim.reporting_methods",config:{url:"/reporting_methods",views:{"":{templateUrl:"app/pim/reportingMethods/reporting_methods.html",controller:"PimReportingMethodsController",controllerAs:"reportingMethods"}},data:{title:"Reporting Methods"}}},{state:"pim.my_info",config:{url:"/my_info",views:{"":{controller:"PimMyInfoController",controllerAs:"myInfoController",template:""}},data:{title:"My Info"}}},{state:"pim.add_employee",config:{url:"/addEmployee",views:{"":{controller:"PimAddEmployeeController",controllerAs:"addEmployeeController",template:""}},data:{title:"Add Employee"}}},{state:"pim.employees.profile.immigration",config:{url:"/employee_immigrations",views:{"":{templateUrl:"app/pim/immigrations/employee_immigrations.html",controller:"PimImmigrationsController",controllerAs:"immigrations"}},data:{title:"Immigration"}}},{state:"pim.employees.profile.tax_exemptions",config:{url:"/tax_exemptions",views:{"":{templateUrl:"app/pim/taxExemptions/tax_exemptions.html",controller:"PimTaxExemptionsController",controllerAs:"taxExemptions"}},data:{title:"Tax Exemptions"}}},{state:"pim.termination_reasons",config:{url:"/termination_reasons",views:{"":{templateUrl:"app/pim/terminationreasons/termination_reasons.html",controller:"PimTerminationReasonsController",controllerAs:"terminationReasons"}},data:{title:"Termination Reasons"}}},{state:"pim.optional_fields",config:{url:"/optional_fields",views:{"":{templateUrl:"app/pim/optionalFields/optional_fields.html",controller:"PimOptionalFieldsController",controllerAs:"optionalFields"}},data:{title:"Optional Fields"}}},{state:"pim.configure_employee_wizard",config:{url:"/configure_employee_wizard",views:{"":{templateUrl:"app/pim/employeeWizardConfiguration/configure_employee_wizard.html",controller:"EmployeeWizardConfigurationController",controllerAs:"employeeWizardConfiguration"}},data:{title:"Configure Add Employee Wizard"}}},{state:"pim.bulk_update",config:{url:"/bulk_update",views:{"":{templateUrl:"app/pim/bulkUpdate/bulk_update.html",controller:"PimBulkUpdateController",controllerAs:"bulkupdate"}},data:{title:"Bulk Update"}}},{state:"pim.bulk_update.update",config:{url:"/update",params:{filters:!1,updateFields:!1,selectedUpdateFields:!1,returnCallback:!1,data:!1},views:{bulkupdateview:{templateUrl:"app/pim/bulkUpdate/bulk_update_quickupdate.html",controller:"PimBulkUpdateQuickUpdateController",controllerAs:"quickupdator"}}}},{state:"pim.bulk_update.inline_edit",config:{url:"/inline_edit",params:{filters:!1,updateFields:!1,selectedUpdateFields:!1,returnCallback:!1,data:!1},views:{bulkupdateview:{templateUrl:"app/pim/bulkUpdate/bulk_update_inline_edit.html",controller:"PimBulkUpdateInlineEditController",controllerAs:"inlineEditor"}}}},{state:"pim.custom_field_sections",config:{url:"/custom_field_sections",views:{"":{templateUrl:"app/pim/customFields/custom_field_sections.html",controller:"PimCustomFieldSectionsController",controllerAs:"customFieldSections"},"navbar@":{templateUrl:"app/pim/customFields/custom-field-section-navbar.html",controller:"CustomFieldSectionNavbarController",controllerAs:"navbar"}},data:{title:"Custom Field Sections"}}},{state:"pim.custom_field_sections_details",config:{url:"/custom_field_sections_details/{customFieldSectionId}",views:{"":{templateUrl:"app/pim/customFields/custom_field_section_details.html",controller:"PimCustomFieldSectionDetailsController",controllerAs:"customFieldSectionDetails"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:"SingleMenuItemTopRibbonController",controllerAs:"vm"}},data:{initialState:"pim.custom_field_sections",title:"Custom Field Section"},params:{customFieldSectionId:null}}},{state:"pim.document_templates",config:{url:"/document_templates",views:{"":{templateUrl:"app/pim/documentTemplates/document_templates.html",controller:"PimDocumentTemplatesController",controllerAs:"documentTemplates"}},data:{title:"Document Templates"}}},{state:"pim.customizable_pim_tabs",config:{url:"/customizable_pim_tabs",views:{"":{templateUrl:"app/pim/customizablePimTabs/customizable_pim_tabs.html",controller:"CustomizablePIMTabsController",controllerAs:"customizablePimTabs"}},data:{title:"PIM Tabs"}}},{state:"pim.employees.profile.custom_pimTab",config:{url:"/employee_pim_tab/:tabId",views:{"":{templateUrl:"app/pim/customizablePimTabs/employee_pim_tab.html",controller:"EmployeePimTabController",controllerAs:"employeePIMTabs"}},data:{title:"PIM Tabs"}}},{state:"pim.configure_my_shortcuts",config:{url:"/configure_my_shortcuts",views:{"":{templateUrl:"app/pim/myShortcuts/configure_my_shortcuts.html",controller:"PimConfigureMyShortcutController",controllerAs:"configShortcutsCtrl"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:function(){this.menuItem="Configure My Shortcuts"},controllerAs:"vm"}},data:{title:"Configure My Shortcuts"}}},{state:"pim.employee_data_export",config:{url:"/exportEmployeeDataReport",views:{"":{templateUrl:"app/pim/reports/employeeDataExport/employee_data_export_report.html",controller:"EmployeeDataExportReportController",controllerAs:"vm"}},params:{show_filters:!0},data:{title:"Employee Data Export"}}},{state:"vuepim.history_events",config:{url:"/history_events",views:{"":{controller:"VueController"}},data:{oxd:!0,vueComponent:["pim","historyEvents"]}}},{state:"pim.wizard",config:{url:"/wizard",views:{"":{templateUrl:"app/pim/wizard/wizard.html",controller:"EmployeeWizardController",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/pim/wizard/wizard_custom_top_ribbon.html",controller:"EmployeeWizardCustomTopRibbonController",controllerAs:"vm"}},data:{title:"Add Employee Wizard",initialState:"pim.add_employee",wizardMode:!0},params:{data:{},redirectedFrom:null},resolve:{employeeService:"wizardEmployeeService",pimTabs:"wizardPimTabService",customFieldService:"wizardCustomFieldService",loader:"wizardLoader"}}},{state:"pim.wizard.personal_details",config:{url:"/personal_details",views:{"":{templateUrl:"app/pim/personaldetails/personal_details.html",controller:"PimPersonalDetailsController",controllerAs:"personal"}},resolve:{employeeService:"wizardEmployeePersonalDetailsService"}}},{state:"pim.wizard.contact_details",config:{url:"/contact_details",views:{"":{templateUrl:"app/pim/contactdetails/contact_details.html",controller:"PimContactDetailsController",controllerAs:"contact"}},resolve:{employeeService:"wizardContactDetailsEmployeeService"}}},{state:"pim.wizard.salary",config:{url:"/salary",views:{"":{templateUrl:"app/pim/salary/salary.html",controller:"PimSalaryController",controllerAs:"vm"}},data:{oxd:!0},resolve:{salaryService:"wizardSalaryService"}}},{state:"pim.wizard.report_to",config:{url:"/employee_reportto",views:{"":{templateUrl:"app/pim/reportTo/reportto.html",controller:"PimReportToController",controllerAs:"reportto"}}}},{state:"pim.wizard.dependent",config:{url:"/employee_dependents",views:{"":{templateUrl:"app/pim/dependents/employee_dependents.html",controller:"PimDependentsController",controllerAs:"dependents"}},resolve:{dependentService:"wizardDependentService",employeeService:"wizardEmployeeService"}}},{state:"pim.wizard.emergency_contact",config:{url:"/emergency_contact",views:{"":{templateUrl:"app/pim/emergencycontacts/emergency_contact.html",controller:"PimEmergencyContactController",controllerAs:"emergencyContact"}},resolve:{emergencyContactService:"wizardEmergencyContactService"}}},{state:"pim.wizard.immigration",config:{url:"/employee_immigrations",
views:{"":{templateUrl:"app/pim/immigrations/employee_immigrations.html",controller:"PimImmigrationsController",controllerAs:"immigrations"}},resolve:{immigrationService:"wizardImmigrationService"}}},{state:"pim.wizard.memberships",config:{url:"/employee_memberships",views:{"":{templateUrl:"app/pim/memberships/memberships.html",controller:"PimMembershipController",controllerAs:"memberships"}},resolve:{membershipService:"wizardMembershipService"}}},{state:"pim.wizard.social_media",config:{url:"/social_media",views:{"":{templateUrl:"app/pim/socialmedia/social_media.html",controller:"PimSocialMediaController",controllerAs:"socialMedia"}},resolve:{socialMediaService:"wizardSocialMediaService"}}},{state:"pim.wizard.tax_exemptions",config:{url:"/tax_exemptions",views:{"":{templateUrl:"app/pim/taxExemptions/tax_exemptions.html",controller:"PimTaxExemptionsController",controllerAs:"taxExemptions"}},resolve:{taxExemptionsService:"wizardTaxExemptionsService"}}},{state:"pim.wizard.qualifications",config:{url:"/qualifications",views:{"":{templateUrl:"app/pim/qualifications/qualifications.html",controller:"PimQualificationsController",controllerAs:"qualifications"}},resolve:{qualificationsService:"wizardQualificationsService"}}},{state:"pim.wizard.direct_deposit",config:{url:"/direct_deposit",views:{"":{templateUrl:"app/pim/directDeposit/direct-deposit.html",controller:"PimDirectDepositController",controllerAs:"vm"}},resolve:{directDepositService:"wizardDirectDepositService"}}},{state:"pim.wizard.job",config:{url:"/job",views:{"":{templateUrl:"app/pim/job/job.html",controller:"PimJobController",controllerAs:"job"}},data:{oxd:!0},resolve:{jobService:"wizardJobService"}}},{state:"pim.wizard.custom_pimTab",config:{url:"/employee_pim_tab/:tabId",views:{"":{templateUrl:"app/pim/customizablePimTabs/employee_pim_tab.html",controller:"EmployeePimTabController",controllerAs:"employeePIMTabs"}}}}]}angular.module("app.pim").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,a,i){function o(e,t,a){return t&&(e.hideLabel=t),a&&(e.condition=a),e}function n(e){if(void 0!==e&&(e.emp_birthday&&(e.emp_birthday=new Date(e.emp_birthday)),e.emp_dri_lice_exp_date&&(e.emp_dri_lice_exp_date=new Date(e.emp_dri_lice_exp_date)),e.joinedDate&&(e.joinedDate=new Date(e.joinedDate)),e.workExperience))for(var t=0;t<e.workExperience.length;t++)e.workExperience[t].from_date=e.workExperience[t].from_date?new Date(e.workExperience[t].from_date):"",e.workExperience[t].to_date=e.workExperience[t].to_date?new Date(e.workExperience[t].to_date):"";return e}function l(e){return e?$("<div>").text(e).html():""}function r(a,i,o,n){if(i.read&&!n){var l=[],r={sortBy:"actionTime",sortOrder:"DESC",filter:{affected_entity_id:a}};o.forEach(function(e,a){var i={};angular.copy(r,i),i.filter.section_id=e,l.push(t.call("auditTrail","GET",[],i))});var s=[];return Object.keys(l).length?e.all(l).then(function(e){return e.forEach(function(e,t){e.data.data.forEach(function(e,a){e.id=t+"_"+e.id,s.push(e)})}),m(s)},function(t){return e(function(e,a){a(t)})}):e(function(e,t){e(s)})}return e(function(e,t){e([])})}function s(e,t){return t.some(function(t){return e.indexOf(t)>=0})}function c(e){var t=[{name:"dateAndTime",lable:"Date and Time",getter:"actionTime",formatter:function(e){return a.localizeTimestamp(e)}},{name:"Action Owner",lable:"Action Owner",getter:"actionOwnerName"},{name:"Action",lable:"Action",getter:"action",formatter:function(e){return i.getLocalizedCustom(e)}},{name:"Section",lable:"Section",getter:"section",formatter:function(e){return i.getLocalizedCustom(e)}},{name:"Action Description",lable:"Action Description",getter:"actionDescription","class":"pre-wrap",formatter:function(e){return e.trim().replace(/  +/g," ").replace(/\r |\n /g,"\r\n")},type:"oxd-hinted-cell"}];return{tableId:"actionLogList_",name:"AuditLogs",selectable:!1,selected:[],idGetter:["id"],listFields:t,unselectableIds:[],extraTH:[],extraTD:[],showColumnsAnyway:!0,permission:e,columnWidths:["18%","15%","15%","17%","35%"],listActions:[],listClass:"classic-table"}}function d(e,t){var a=[];return e.forEach(function(e,i){if("Employee Management"===e.name){var o=e.AuditSection;o.forEach(function(e,i){t.includes(e.name)&&a.push(e.id)})}}),a}function m(e){return e.sort(function(e,t){var a=e.actionTime,i=t.actionTime;return a>i?-1:a<i?1:0}),e}function u(e,t,a,i,n){var l={type:"checkbox",htmlClass:t,key:e};return n&&(l.prefix=n),o(l,a,i)}function p(e,t,a,i){var n={key:e,type:"cost-centre-auto-complete",htmlClass:t,placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",requireSelection:!0};return o(n,a,i)}function f(e,t,a){var i={type:"icon",iconName:e,htmlClass:t};return o(i,!1,a)}function g(e,t,a,i,n,l){var r={type:"select",htmlClass:t,titleMap:a,key:e,onChange:i};return o(r,n,l)}function h(e,t,a){var i={type:"note",htmlClass:t,title:e};return o(i,!1,a)}var v={addConditionalPropertiesToField:o,convertDates:n,escapeText:l,fetchAuditLogs:r,findOne:s,getAuditLogListDefinition:c,getAuditTrailSectionIds:d,getCheckboxFormElement:u,getCostCenterFormElement:p,getIconFormElement:f,getSelectFormElement:g,getNoteFormElement:h};return v}angular.module("app.pim").factory("pimHelper",e),e.$inject=["$q","webservice","dateService","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p){function f(){d.getEmployee().then(function(t){b.selectedEmployee=t,b.selectedEmployeeNumber=t.empNumber,b.time=Date.now(),b.selectedEmployeeName=p.getFirstAndLastNameWithTags(t),t.jobTitle&&t.jobTitle.jobTitleName?b.selectedEmployeeJobTitle=t.jobTitle.jobTitleName:b.selectedEmployeeJobTitle="",g(),b.isEss?e.$broadcast("addTopMenuBackButton",{uiSref:"corporate_directory.directory",tooltip:"Directory"}):e.$broadcast("addTopMenuBackButton",{uiSref:"pim.employees",tooltip:"Employee List"})})}function g(){e.emp_number==b.selectedEmployeeNumber?u.setForcedTitle(["Employee Management","My Info"]):u.setForcedTitle(["Employee Management","Employee List",b.selectedEmployeeName])}function h(){b.employee!==!1&&void 0!==b.employee?e.$broadcast("search",{name:b.employee.title}):e.$broadcast("search",{name:b.employeeSearchString})}function v(t){e.$broadcast("change-employee",t.originalObject,o.current.name),e.$broadcast("angucomplete-alt-oxd:clearInput","employee_name_quick_filter")}function y(e,t){b.pastEmployeeSuffix=" ("+i.instant("Past Employee")+")",b.employeeSearchString=e;var a={name:"userInputString",filter:{employee_name_or_id:e,termination:"2"},fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId","page[offset]":"0","page[limit]":"10"};return l.call("employees","GET",[],a,t).then(function(e){for(var t=0;t<e.data.data.length;t++)e.data.data[t].termination_id&&(e.data.data[t].past_employee=b.pastEmployeeSuffix);return e.data.data})}var b=this;b.time=Date.now(),b.isEss=!0,m.getUserData().then(function(e){b.isEss=e.hasEssRoleOnly}),t.$on("setEmployeeDetailsForPimTabs",f),f(),t.$on("setPimTitle",g),b.search=h,b.fetchMatchingEmployees=y,b.employeeSelected=v,b.scrlTabsApi=null,b.employeeSearchString="",b.reCalcScroll=function(){b.scrlTabsApi.doRecalculate()},b.scrollIntoView=function(e){b.scrlTabsApi.scrollTabIntoView(e)},b.employee=!1}angular.module("app.pim").controller("PimTabNavbarController",e),e.$inject=["$rootScope","$scope","$q","$translate","$state","$stateParams","webservice","ModalService","focus","LOGIN","pimTabs","datagroupPermissions","titleService","employeeService"]}(),function(){"use strict";function e(e,t){return{getEmployeeService:function(){return t},getPimTabService:function(){return e}}}angular.module("app.pim").factory("pimServiceFactory",e),e.$inject=["pimTabs","employeeService"]}(),function(){"use strict";function e(e,t,a,i,o,n){function l(){return o.isLoggedIn()?a.getAccessiblePimTabs(i.empNumber).then(function(e){return e}):o.login().then(function(e){return a.getAccessiblePimTabs(i.empNumber).then(function(e){return e})})}function r(){c.visibilityMap={},c.currentItemMap={},_.forEach(c.tabs,function(e){c.visibilityMap[e.tabId]=!0,c.currentItemMap[e.tabId]=!1})}function s(t){var a={};return _.isEqual(c.lastVisibilityMap,c.visibilityMap)&&_.isEqual(c.lastCurrentItemMap,c.currentItemMap)||(angular.copy(c.visibilityMap,c.lastVisibilityMap),angular.copy(c.currentItemMap,c.lastCurrentItemMap),_.forEach(t,function(e){c.visibilityMap[e.tabId]||c.currentItemMap[e.tabId]||(a[e.tabId]=e)}),e.$applyAsync(function(){Object.keys(a).length>0?c.showMoreMenu=!0:c.showMoreMenu=!1}),c.lastFilteredMenus=a),c.lastFilteredMenus}var c=this;c.tabs=[],c.visibilityMap={},c.currentItemMap={},c.lastFilteredMenus={},c.lastVisibilityMap={},c.lastCurrentItemMap={},c.showMoreMenu=!1,c.getHiddenMenuItems=s,c.isEss=!0,n.getUserData().then(function(e){c.isEss="ESS"==e.usertype}),l().then(function(e){c.tabs=e,r()})}angular.module("app.pim").controller("EmployeeProfileCustomTopRibbonController",e),e.$inject=["$scope","$rootScope","pimTabs","$stateParams","webservice","datagroupPermissions"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){function m(e,t){var a=e.replace(/\s/g,"");return t&&(a="custom_"+a),"menu_employee_profile_"+a}var u;return{getEmployee:function(n){return t(function(t,l){if(n!==!0&&"object"==typeof u)t(u);else{var r={include:"JobRecord,workExperience,education,EmployeeTerminationRecord,JobCandidate"};o.call("employees/"+a.empNumber,"GET",[],r).then(function(a){u=i.convertDates(a.data.data),e.$broadcast("setEmployeeDetailsForPimTabs"),t(u)},function(e){s.hide(),d.go("403")})}})},setEmployee:function(e){u=e},resetEmployee:function(){u=!1},getPimOptionalFieldConfiguration:function(){return t(function(e,t){o.call("pimOptionalFieldConfiguration","GET",[],void 0,void 0,!0).then(function(t){e(t.data.data)})})},getAccessiblePIMTabsFromServer:function(e){var a={empNumber:e};return t(function(e,t){o.call("pimSubMenu","GET",[],a,void 0,!0).then(function(t){e(t.data.data)})})},getAccessiblePimTabs:function(i){var o=this;return t(function(r,s){var c=[],d=[],u=!1;null!=e.emp_number&&e.emp_number==a.empNumber&&(u=!0);var p;"undefined"!=typeof i&&(p={Employee:i}),d.push(n.getPermissions(u,p)),d.push(o.getPimOptionalFieldConfiguration()),d.push(o.getAccessiblePIMTabsFromServer(i)),d.push(l.getEmployeePermissions()),t.all(d).then(function(e){var t=(e[0],e[1],e[2]);e[3];for(var a in t){var i=t[a].uisref.replace(/\./g,"_").replace(/[\W[^_]]+/g,""),o={title:t[a].label,uiSref:t[a].uisref,originalState:t[a].uisref,tabId:t[a].tabId,img:t[a].image,"class":i},n=t[a].uisref;if(o.automationId=m(o.title,o.custom),n&&n.indexOf("custom_pimTab")>-1&&(o.uiSref=t[a].uisref+"({tabId:"+t[a].tabId+"})",o.custom=!0,t[a].label.length>25)){var l=t[a].label;l=l.substring(0,25)+"...",o.title=l,o.tooltip=t[a].label}c.push(o)}r(c)})})}}}angular.module("app.core").factory("pimTabs",e),e.$inject=["$rootScope","$q","$stateParams","pimHelper","webservice","datagroupPermissions","employeeService","LOGIN","loader","localizedMessages","$state"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v){function y(){t.call("education","GET",[]).then(function(e){u.education=e.data.data,b({education:_(u.education)}),D.wizardMode&&v.updateFormFields(D.schema,D.form,h)})}function b(e){D.model={educationId:D.education.educationId,institute:D.education.institute,major:D.education.major,year:D.education.year,score:D.education.score,startDate:D.education.startDate?new Date(moment.utc(D.education.startDate).format("l LT")):"",endDate:D.education.endDate?new Date(moment.utc(D.education.endDate).format("l LT")):""},D.schema={type:"object",title:"Qualifications",properties:{educationId:{title:"Level",type:"string","enum":e.education["enum"]},institute:{title:"Institute",type:"string",maxLength:100},major:{title:"Major/Specialization",type:"string",maxLength:100},year:{title:"Year",type:"string",exclusiveMaximum:!0,minimum:0,maximum:1e4},score:{title:"GPA/Score",type:"string",maxLength:25},startDate:{title:"Start Date",type:["null","object"]},endDate:{title:"End Date",type:["null","object"]}},required:["educationId"]},D.form=[{type:"row",items:[{type:"select",htmlClass:"col-6",key:"educationId",titleMap:e.education.titleMap,validationMessage:{201:i.textLengthExceedValidation.message(D.schema.properties.educationId.maxLength),302:a.getLocalizedCustom("Required")}},{type:"text",htmlClass:"col-6",key:"institute",validationMessage:{201:i.textLengthExceedValidation.message(D.schema.properties.institute.maxLength)}}]},{type:"row",items:[{type:"text",htmlClass:"col-6",key:"major",validationMessage:{201:i.textLengthExceedValidation.message(D.schema.properties.major.maxLength)}},{type:"text",htmlClass:"col-3",key:"year",validationMessage:{numberValidation:i.positiveInteger.message,maxValidation:i.numericMaxValidation.message(D.schema.properties.year.maximum),minValidation:i.numericMinValidation.message(D.schema.properties.year.minimum)},$validators:{numberValidation:i.positiveInteger.validator,maxValidation:function(e){return i.numericMaxValidation.validator(e,D.schema.properties.year.maximum,D.schema.properties.year.exclusiveMaximum)},minValidation:function(e){return i.numericMinValidation.validator(e,D.schema.properties.year.minimum)}}},{type:"text",htmlClass:"col-3",key:"score",validationMessage:{201:i.textLengthExceedValidation.message(D.schema.properties.score.maxLength)}}]},{type:"row",items:[{type:"date",htmlClass:"col-6",title:"Start Date",key:"startDate",onChange:function(e,t){e&&D.model.endDate?D.model.endDate.getTime()>=e.getTime()?(m.$broadcast("schemaForm.error.endDate","minDate",!0),m.$broadcast("schemaForm.error.endDate","schemaForm",!0)):m.$broadcast("schemaForm.error.endDate","minDate",!1):(m.$broadcast("schemaForm.error.endDate","minDate",!0),m.$broadcast("schemaForm.error.endDate","schemaForm",!0))},defaultDate:D.model.startDate,resetDefaultDate:D.resetDefaultDate},{type:"date",htmlClass:"col-6",title:"End Date",key:"endDate",validationMessage:{minDate:a.getLocalizedCustom("End date should be after start date")},$validators:{minDate:function(e){return!D.model.startDate||i.minDate.validator(e,D.model.startDate)}},ngModelOptions:{allowInvalid:!0},defaultDate:D.model.endDate,resetDefaultDate:D.resetDefaultDate}]}]}function C(e){if(m.$broadcast("schemaFormValidate"),e.$valid&&D.modalProperties.permission){o.show(),angular.extend(D.education,D.model);var t={educationId:D.model.educationId,institute:D.model.institute,major:D.model.major,year:D.model.year?D.model.year:null,score:D.model.score,startDate:null,endDate:null};""!=D.model.startDate&&null!=D.model.startDate&&(t.startDate=p.toStandardDate(D.model.startDate)),""!=D.model.endDate&&null!=D.model.endDate&&(t.endDate=p.toStandardDate(D.model.endDate));var i,l,r=D.education.id;r?(l=f.updateEducation(d.empNumber,r,t).then(function(e){w(e)}),i="updateSuccess"):(l=f.addEducation(d.empNumber,t).then(function(e){s.unshift(e)}),i="saveSuccess"),l.then(function(){D.wizardMode||a.showLocalizedToast(i)},function(e){n.error(e)})["finally"](function(){o.hide()}),c(!0)}}function w(e){for(var t=0;t<s.length;t++)if(s[t].id==e.id){angular.extend(s[t],e);break}}function _(e){for(var t=[],a=[],i=0;i<e.length;i++)t.push({value:e[i].id,name:e[i].name}),a.push(e[i].id);return{titleMap:t,"enum":a}}function S(){c(!1)}b.$inject=["formData"];var D=this;g.close=c,D.wizardMode=e.current.data.wizardMode;var T={};angular.copy(l,T),D.modalProperties=r,D.education=T,D.save=C,D.cancel=S,D.resetDefaultDate={reset:!1},y()}angular.module("app.pim").controller("PimEducationController",e),e.$inject=["$state","webservice","localizedMessages","formValidationHelper","loader","toast","education","modalProperties","dataList","close","$stateParams","$scope","$rootScope","dateService","qualificationsService","modalFunctions","fieldConfiguration","wizardService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h){function v(){o.call("employees/employeeLanguageList","GET",{},{}).then(function(e){t.employeeLanguageList=e.data.data,D.languageList=S(t.employeeLanguageList),y(),D.wizardMode&&g.updateFormFields(D.schema,D.form,f)})}function y(){D.schema={type:"object",title:"Languages",properties:{langId:{title:"Language",type:"string","enum":D.languageList["enum"],readOnly:!!D.language.langId},fluency:{title:"Skill",type:"string","enum":["1","2","3"],readOnly:!!D.language.competency},competency:{title:"Fluency Level",type:"string","enum":["1","2","3","4"]},comments:{title:"Comments",type:"string",maxLength:100}},required:["langId","competency","fluency"]},D.form=[{type:"row",items:[{type:"select",htmlClass:"col-6",key:"langId",titleMap:D.languageList.titleMap,onChange:b,validationMessage:{302:n.getLocalizedCustom("Required")}},{type:"select",htmlClass:"col-6",key:"fluency",titleMap:[{value:"3",name:n.getLocalizedCustom("Reading")},{value:"2",name:n.getLocalizedCustom("Speaking")},{value:"1",name:n.getLocalizedCustom("Writing")}],onChange:b,validationMessage:{302:n.getLocalizedCustom("Required"),alreadyExists:n.getLocalizedCustom("Already Exists")}}]},{type:"row",items:[{type:"select",htmlClass:"col-6",key:"competency",titleMap:[{value:"1",name:n.getLocalizedCustom("Poor")},{value:"2",name:n.getLocalizedCustom("Basic")},{value:"3",name:n.getLocalizedCustom("Good")},{value:"4",name:n.getLocalizedCustom("Mother Tongue")}],validationMessage:{302:n.getLocalizedCustom("Required")}}]},{type:"row",items:[{type:"textarea",htmlClass:"col-12",key:"comments",validationMessage:{201:h.textLengthExceedValidation.message(D.schema.properties.comments.maxLength)}}]}],D.model={langId:D.language.langId?D.language.langId:"",competency:D.language.competency?D.language.competency:"",fluency:D.language.fluency?D.language.fluency:"",comments:D.language.comments}}function b(){var t=!1;c.forEach(function(a){a.langId===D.model.langId&&a.fluency===D.model.fluency&&(t=!0),t&&(x=!0),x&&e.$broadcast("schemaForm.error.fluency","alreadyExists",!t)})}function C(t){if(e.$broadcast("schemaFormValidate"),t.$valid&&D.modalProperties.permission){l.show();var a=D.language.langId,o=D.language.fluency;angular.extend(D.language,D.model);var s,d,u,f=D.language.empNumber?D.language.empNumber:i.empNumber;D.addMode?(d="saveSuccess",s="Failed to Save",u=p.addLanguage(f,D.model).then(function(e){c.unshift(e)})):(d="updateSuccess",s="Failed to Update",u=p.updateLanguage(f,a,o,D.model).then(function(e){w(e,a,o)})),u.then(function(e){D.wizardMode||n.showLocalizedToast(d)},function(e){r.error(s)})["finally"](function(){l.hide()}),m(!0)}}function w(e,t,a){for(var i=0;i<c.length;i++)if(c[i].langId==t&&c[i].fluency==a){angular.extend(c[i],e);break}}function _(){m(!1)}function S(e){for(var t=[],a=[],i=0;i<e.length;i++)t.push({value:e[i].id,name:e[i].name}),a.push(e[i].id);return{titleMap:t,"enum":a}}var D=this;u.close=m,D.wizardMode=a.current.data.wizardMode;var T={};angular.copy(s,T),D.language=T,D.save=C,D.cancel=_,D.modalProperties=d,D.addMode=!s.hasOwnProperty("langId");var x=!1;v()}angular.module("app.pim").controller("PimLanguagesController",e),e.$inject=["$scope","$rootScope","$state","$stateParams","webservice","localizedMessages","loader","toast","language","dataList","modalProperties","close","modalFunctions","qualificationsService","fieldConfiguration","wizardService","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v){function y(){o.call("employees/employeeLicenseList","GET",{},{}).then(function(e){t.employeeLicenseList=e.data.data,D.licenseList=S(t.employeeLicenseList),b(),D.wizardMode&&v.updateFormFields(D.schema,D.form,h)})}function b(){D.model={licenseId:D.license.licenseId?D.license.licenseId:"",licenseNo:D.license.licenseNo,licenseIssuedDate:D.license.licenseIssuedDate?new Date(moment.utc(D.license.licenseIssuedDate).format("l LT")):"",licenseExpiryDate:D.license.licenseExpiryDate?new Date(moment.utc(D.license.licenseExpiryDate).format("l LT")):""},D.schema={type:"object",title:"Qualifications",properties:{licenseId:{title:"License Type",type:"string","enum":D.licenseList["enum"]},licenseNo:{title:"License Number",type:"string",maxLength:50},licenseIssuedDate:{title:"Issued Date",type:["null","object"]},licenseExpiryDate:{title:"Expiry Date",type:["null","object"]}},required:["licenseId"]},D.form=[{type:"row",items:[{type:"select",htmlClass:"col-8",key:"licenseId",titleMap:D.licenseList.titleMap,readonly:!!D.license.licenseId,validationMessage:{302:n.getLocalizedCustom("Required")}},{type:"text",htmlClass:"col-4",key:"licenseNo",validationMessage:{201:l.textLengthExceedValidation.message(D.schema.properties.licenseNo.maxLength)}}]},{type:"row",items:[{type:"date",htmlClass:"col-6",format:"yyyy-mm-dd",key:"licenseIssuedDate",title:"Issued Date",validationMessage:{maxDate:n.getLocalizedCustom("Issued date should be before expiry date")},$validators:{maxDate:function(e){return l.beforeDate.validator(e,D.model.licenseExpiryDate)}},ngModelOptions:{allowInvalid:!0},onChange:function(t,a){t&&D.model.licenseExpiryDate?D.model.licenseExpiryDate.getTime()>=t.getTime()?e.$broadcast("schemaForm.error.licenseExpiryDate","minDate",!0):e.$broadcast("schemaForm.error.licenseExpiryDate","minDate",!1):e.$broadcast("schemaForm.error.licenseExpiryDate","minDate",!0)},defaultDate:D.model.licenseIssuedDate,resetDefaultDate:D.resetDefaultDate},{type:"date",htmlClass:"col-6",format:"yyyy-mm-dd",key:"licenseExpiryDate",title:"Expiry Date",validationMessage:{minDate:n.getLocalizedCustom("Expiry date should be after issued date")},$validators:{minDate:function(e){return!D.model.licenseIssuedDate||l.minDate.validator(e,D.model.licenseIssuedDate)}},onChange:function(t,a){t&&D.model.licenseIssuedDate?D.model.licenseIssuedDate.getTime()<=t.getTime()?e.$broadcast("schemaForm.error.licenseIssuedDate","maxDate",!0):e.$broadcast("schemaForm.error.licenseIssuedDate","maxDate",!1):e.$broadcast("schemaForm.error.licenseIssuedDate","maxDate",!0)},ngModelOptions:{allowInvalid:!0},defaultDate:D.model.licenseExpiryDate,resetDefaultDate:D.resetDefaultDate}]}]}function C(t){if(e.$broadcast("schemaFormValidate"),t.$valid&&D.modalProperties.permission){r.show(),angular.extend(D.license,D.model);var a=D.license.empNumber?D.license.empNumber:i.empNumber,o=D.license.licenseId,l={licenseId:D.model.licenseId,licenseNo:D.model.licenseNo,licenseIssuedDate:""==D.model.licenseIssuedDate||void 0===D.model.licenseIssuedDate?null:D.model.licenseIssuedDate,licenseExpiryDate:""==D.model.licenseExpiryDate||void 0===D.model.licenseExpiryDate?null:D.model.licenseExpiryDate};null!=D.model.licenseIssuedDate&&""!=D.model.licenseIssuedDate&&(l.licenseIssuedDate=p.toStandardDate(D.model.licenseIssuedDate)),null!=D.model.licenseExpiryDate&&""!=D.model.licenseExpiryDate&&(l.licenseExpiryDate=p.toStandardDate(D.model.licenseExpiryDate));var d,m,f;D.addMode?(d="saveSuccess",m="Failed to Add",f=g.addLicense(a,l).then(function(e){c.unshift(e)})):(d="updateSuccess",m="Failed to Update",f=g.updateLicense(a,o,l).then(function(e){w(e)})),f.then(function(e){D.wizardMode||n.showLocalizedToast(d)},function(e){s.error(m)})["finally"](function(){r.hide()}),u(!0)}}function w(e){for(var t=0;t<c.length;t++)if(c[t].licenseId==e.licenseId){angular.extend(c[t],e);break}}function _(){u(!1)}function S(e){for(var t=[],a=[],i=!1,o=[],n=0;n<e.length;n++){if(i=!1,D.license.licenseId==e[n].id)i=!1;else for(var l=0;l<c.length;l++)if(c[l].licenseId!=e[n].id);else{if(D.license.empNumber&&c[l].licenseId==D.license.licenseId)continue;o.push(n),i=!0}i||(t.push({value:e[n].id,name:e[n].name}),a.push(e[n].id))}for(var r=0;r<o.length;r++)e.splice(o[r],1);return{titleMap:t,"enum":a}}var D=this;f.close=u,D.wizardMode=a.current.data.wizardMode;var T={};angular.copy(d,T),D.testButton="Test 123",D.license=T,D.save=C,D.cancel=_,D.modalProperties=m,D.resetDefaultDate={reset:!1},D.addMode=!d.hasOwnProperty("licenseId"),y()}angular.module("app.pim").controller("PimLicenseController",e),e.$inject=["$scope","$rootScope","$state","$stateParams","webservice","localizedMessages","formValidationHelper","loader","toast","dataList","license","modalProperties","close","dateService","modalFunctions","qualificationsService","fieldConfiguration","wizardService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w){function _(){var a=null!=t.emp_number&&t.emp_number==l.empNumber,i=["qualifications_attachment","qualifications_custom_fields","qualification_work","qualification_education","qualification_skills","qualification_languages","qualification_license","qualification_certificates"],o=!1;fe.wizardMode&&(o=!0);var n={permissions:h.getDatagroupPermissionsWithoutCache(l.empNumber,i,a,o)};return fe.wizardMode&&(n.wizardConfig=S()),e.all(n).then(function(e){return fe.wizardMode?(0===e.wizardConfig.workExperience.length?e.permissions.qualification_work={read:!1,create:!1,update:!1,"delete":!1}:fe.fieldConfiguration.workExperience=e.wizardConfig.workExperience,0===e.wizardConfig.education.length?e.permissions.qualification_education={read:!1,create:!1,update:!1,"delete":!1}:fe.fieldConfiguration.education=e.wizardConfig.education,0===e.wizardConfig.skills.length?e.permissions.qualification_skills={read:!1,create:!1,update:!1,"delete":!1}:fe.fieldConfiguration.skills=e.wizardConfig.skills,0===e.wizardConfig.languages.length?e.permissions.qualification_languages={read:!1,create:!1,update:!1,"delete":!1}:fe.fieldConfiguration.languages=e.wizardConfig.languages,0===e.wizardConfig.licenses.length?e.permissions.qualification_license={read:!1,create:!1,update:!1,"delete":!1}:fe.fieldConfiguration.licenses=e.wizardConfig.licenses,e.permissions.qualification_certificates={read:!1,create:!1,update:!1,"delete":!1}):fe.customFieldConfiguration=!0,fe.attachmentPermission=e.permissions.qualifications_attachment,fe.customFieldsPermission=e.permissions.qualifications_custom_fields,fe.workExperiencePermission=e.permissions.qualification_work,fe.educationPermission=e.permissions.qualification_education,fe.skillsPermission=e.permissions.qualification_skills,fe.languagesPermission=e.permissions.qualification_languages,fe.licensesPermission=e.permissions.qualification_license,fe.certificatesPermission=e.permissions.qualification_certificates,e.permissions})}function S(){return p.getEmployee().then(function(t){var a={workExperience:v.getFieldConfigurationByRoute(n.current.name,"PimWorkExperience",t.locationId),education:v.getFieldConfigurationByRoute(n.current.name,"PimEducation",t.locationId),skills:v.getFieldConfigurationByRoute(n.current.name,"PimSkill",t.locationId),languages:v.getFieldConfigurationByRoute(n.current.name,"PimLanguage",t.locationId),licenses:v.getFieldConfigurationByRoute(n.current.name,"PimLicense",t.locationId),customFieldConfiguration:h.getCustomFieldConfigurationByRoute(n.current.name,t.locationId).then(function(e){fe.customFieldConfiguration=e})};return e.all(a)})}function D(){r.show(),_().then(function(){var t=[];fe.workExperiencePermission.read&&t.push(g.getWorkExperiences(l.empNumber).then(function(e){fe.workExperience=e})),fe.educationPermission.read&&t.push(g.getEducations(l.empNumber).then(function(e){fe.education=e})),fe.skillsPermission.read&&t.push(g.getSkills(l.empNumber).then(function(e){fe.skills=e})),fe.languagesPermission.read&&t.push(g.getLanguages(l.empNumber).then(function(e){fe.languages=e})),fe.licensesPermission.read&&t.push(g.getLicenses(l.empNumber).then(function(e){fe.licenses=e})),fe.certificatesPermission.read&&(t.push(g.getCertificates(l.empNumber).then(function(e){fe.certificates=e})),t.push(w.fetchTrainingConfiguration().then(function(e){fe.enableOnlineCourses=e.data.data.enableOnlineCourses},function(){fe.enableOnlineCourses=!1}))),(t.length||fe.attachmentPermission.read||fe.customFieldsPermission.read)&&(fe.qualificationsAccessible=!0,e.all(t).then(function(e){fe.customFields=[],x(),fe.wizardMode?T():0===fe.workExperience.length&&0===fe.education.length&&0===fe.skills.length&&0===fe.languages.length&&0===fe.licenses.length&&0===fe.certificates.length&&i.infoToast("No Records Found")}))})["finally"](function(){fe.wizardMode||t.$broadcast("setEmployeeDetailsForPimTabs"),r.hide()})}function T(){for(var e in fe.fieldConfiguration)fe.fieldConfiguration.hasOwnProperty(e)&&v.updateListFields(fe.listData[e].listFields,fe.fieldConfiguration[e])}function x(){fe.panelInfo={workExperienceInfo:{title:"Work Experience",icon:"images/pim/icon_work.svg"},educationInfo:{title:"Education",icon:"images/pim/icon_education.svg"},skillsInfo:{title:"Skills",icon:"images/pim/icon_skills.svg"},languagesinfo:{title:"Languages",icon:"images/pim/icon_language.svg"},licenseInfo:{title:"License",icon:"images/pim/icon_license.svg"},certificatesInfo:{title:"Certificates",icon:"images/pim/icon_education.svg"},customFieldInfo:{title:"Custom Field",icon:"images/pim/icon_customfield.svg"},attachmentInfo:{title:"Attachment",icon:"images/pim/icon_attachments.svg"}},F()}function F(){var e=[{name:"employer",lable:"Company",getter:"employer"},{name:"jobtitle",lable:"Job Title",getter:"jobtitle"},{name:"from_date",lable:"From",getter:"from_date",formatter:function(e){return e?(e=e.slice(0,10),u.toLocalizedDate(e)):e}},{name:"to_date",lable:"To",getter:"to_date",formatter:function(e){return e?(e=e.slice(0,10),u.toLocalizedDate(e)):e}},{name:"creditable",lable:"Creditable",getter:"creditable",formatter:function(e){return"1"==e?i.getLocalizedCustom("Yes"):i.getLocalizedCustom("No")}}],t=[],a=[];fe.workExperiencePermission.update&&(a=[{colspan:1}],t=[{"class":"edit_item",clickAction:"editWorkExperience",tooltip:"Edit"}]);var o=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:fe.workExperiencePermission["delete"]}],n=[{name:"educationId",lable:"Level",getter:["Education","name"]},{name:"year",lable:"Year",getter:"year"},{name:"score",lable:"GPA/Score",getter:"score"}],l=[],r=[];fe.educationPermission.update&&(l=[{colspan:1}],r=[{"class":"edit_item",clickAction:"editEducation",tooltip:"Edit"}]);var s=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:fe.educationPermission["delete"]}],c=[{name:"skillId",lable:"Skill",getter:["Skill","name"]},{name:"years_of_exp",lable:"Years of Experience",getter:"years_of_exp"}],d=[],m=[];fe.skillsPermission.update&&(d=[{colspan:3}],m=[{"class":"edit_item",clickAction:"editSkill",tooltip:"Edit"}]);var p=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:fe.skillsPermission["delete"]}],f=[{name:"langId",lable:"Language",getter:["Language","name"]},{name:"competency",lable:"Skill",getter:"fluency",formatter:function(e,t){var a=["","Writing","Speaking","Reading"];return a[e]?i.getLocalizedCustom(a[e]):e}},{name:"fluency",lable:"Fluency Level",getter:"competency",formatter:function(e,t){var a=["","Poor","Basic","Good","Mother Tongue"];return a[e]?i.getLocalizedCustom(a[e]):e}},{name:"comments",lable:"Comments",getter:"comments"}],g=[],h=[];fe.languagesPermission.update&&(g=[{colspan:3}],h=[{"class":"edit_item",clickAction:"editLanguage",tooltip:"Edit"}]);var v=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:fe.languagesPermission["delete"]}],y=[{name:"licenseId",lable:"License Type",getter:["License","name"]},{name:"licenseIssuedDate",lable:"Issued Date",getter:"licenseIssuedDate",formatter:function(e){return e?(e=e.slice(0,10),u.toLocalizedDate(e)):e}},{name:"licenseExpiryDate",lable:"Expiry Date",getter:"licenseExpiryDate",formatter:function(e){return e?(e=e.slice(0,10),u.toLocalizedDate(e)):e}}],b=[],C=[];fe.licensesPermission.update&&(b=[{colspan:3}],C=[{"class":"edit_item",clickAction:"editLicense",tooltip:"Edit"}]);var w=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:fe.licensesPermission["delete"]}],_=[{name:"name",lable:"Name",getter:"name",sortable:!1},{name:"issuedDate",lable:"Issued Date",getter:"issued_date",sortable:!1,formatter:function(e){return e?(e=e.slice(0,10),u.toLocalizedDate(e)):e}},{name:"expiryDate",lable:"Expiry Date",getter:"expiry_date",sortable:!1,formatter:function(e){
return e?(e=e.slice(0,10),u.toLocalizedDate(e)):e}}],S=[],D=[{icon:"file_download",clickAction:"downloadCertificate",tooltip:"Download",htmlClass:"tooltipped"}],T=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:fe.certificatesPermission["delete"]}];fe.listData={workExperience:{name:"workExperience",selectable:!0,selected:[],idGetter:"seqno",listFields:e,extraTH:a,extraTD:t,showColumnsAnyway:!1,permission:fe.workExperiencePermission,listActions:o},education:{name:"education",selectable:!0,selected:[],idGetter:"id",listFields:n,extraTH:l,extraTD:r,showColumnsAnyway:!1,permission:fe.educationPermission,listActions:s},skills:{name:"skills",selectable:!0,selected:[],idGetter:"id",listFields:c,extraTH:d,extraTD:m,showColumnsAnyway:!1,permission:fe.skillsPermission,listActions:p},languages:{name:"languages",selectable:!0,selected:[],idGetter:["langId","fluency"],listFields:f,extraTH:g,extraTD:h,showColumnsAnyway:!1,permission:fe.languagesPermission,listActions:v},licenses:{name:"licenses",selectable:!0,selected:[],idGetter:"licenseId",listFields:y,extraTH:b,extraTD:C,showColumnsAnyway:!1,permission:fe.licensesPermission,listActions:w},certificates:{name:"certificates",selectable:!0,selected:[],idGetter:"id",listFields:_,extraTH:S,extraTD:D,showColumnsAnyway:!1,permission:fe.certificatesPermission,listActions:T}}}function k(e,t){var a={close:function(){}};t.modalFunctions=a,t.qualificationsService=g,y.showModal("app/pim/qualifications/qualifications_modal.html",e,"modal",t)}function E(e,t,a){var i={workExperience:e,dataList:fe.workExperience,fieldConfiguration:fe.fieldConfiguration.workExperience,modalProperties:{title:t,permission:a,style:{height:"65%",width:"45%"}}};k("PimWorkExperienceController",i)}function I(e){E(e,"Edit Work Experience",fe.workExperiencePermission.update)}function A(){var e={employer:"",jobtitle:"",from_date:"",to_date:"",creditable:!1,comments:""};fe.workExperiencePermission.create||(fe.workExperiencePermission.create=!1),E(e,"Add Work Experience",fe.workExperiencePermission.update)}function M(e,t,a){var i={education:e,dataList:fe.education,fieldConfiguration:fe.fieldConfiguration.education,modalProperties:{title:t,permission:a,style:{height:"65%",width:"45%"}}};k("PimEducationController",i)}function L(e){M(e,"Edit Education",fe.educationPermission.update)}function P(){fe.educationPermission.create||(fe.educationPermission.create=!1);var e={educationId:"",institute:"",major:"",year:"",startDate:"",endDate:""};M(e,"Add Education",fe.educationPermission.create)}function $(e,t,a){var i={license:e,dataList:fe.licenses,fieldConfiguration:fe.fieldConfiguration.licenses,modalProperties:{title:t,permission:a,style:{height:"65%",width:"40%"}}};k("PimLicenseController",i)}function N(){fe.licensesPermission.create||(fe.licensesPermission.create=!1),$({},"Add License",fe.licensesPermission.create)}function O(e){$(e,"Edit License",fe.licensesPermission.update)}function R(e,t,a){var i={skill:e,dataList:fe.skills,fieldConfiguration:fe.fieldConfiguration.skills,modalProperties:{title:t,permission:a,style:{height:"50%",width:"45%"}}};k("PimSkillController",i)}function z(e){R(e,"Edit Skill",fe.skillsPermission.update)}function j(){fe.skillsPermission.create||(fe.skillsPermission.create=!1);var e={skillId:"",years_of_exp:"",comments:""};R(e,"Add Skill",fe.skillsPermission.create)}function V(e,t,a){var i={language:e,dataList:fe.languages,fieldConfiguration:fe.fieldConfiguration.languages,modalProperties:{title:t,permission:a,style:{height:"75%",width:"30%"}}};k("PimLanguagesController",i)}function G(){fe.languagesPermission.create||(fe.languagesPermission.create=!1),V({},"Add Language",fe.languagesPermission.create)}function B(e){V(e,"Edit Language",fe.languagesPermission.update)}function q(e){var t,a=[],o=l.empNumber;r.show(),"workExperience"===e?(a=fe.listData.workExperience.selected,a.length>0&&(t=g.deleteWorkExperiences(o,a).then(function(){H(a)}))):"education"===e?(a=fe.listData.education.selected,a.length>0&&(t=g.deleteEducations(o,a).then(function(){U(a)}))):"skills"===e?(a=fe.listData.skills.selected,a.length>0&&(t=g.deleteSkills(o,a).then(function(){W(a)}))):"languages"===e?(a=fe.listData.languages.selected,a.length>0&&(t=g.deleteLanguages(o,a).then(function(){Y(a)}))):"licenses"===e?(a=fe.listData.licenses.selected,a.length>0&&(t=g.deleteLicenses(o,a).then(function(){J(a)}))):"certificates"===e&&(a=fe.listData.certificates.selected,a.length>0&&(t=g.deleteCertificates(o,a).then(function(){K(a)}))),t&&t.then(function(){fe.wizardMode||i.showLocalizedToast("deleteSuccess"),p.getEmployee(!0)},function(e){s.error(e)})["finally"](function(){r.hide()})}function H(e){for(var t=fe.workExperience.length-1;t>=0;t--){var a=e.indexOf(fe.workExperience[t].seqno);a>-1&&(e.splice(a,1),fe.workExperience.splice(t,1))}}function U(e){for(var t=fe.education.length-1;t>=0;t--){var a=e.indexOf(fe.education[t].id);a>-1&&(e.splice(a,1),fe.education.splice(t,1))}}function W(e){for(var t=fe.skills.length-1;t>=0;t--){var a=e.indexOf(fe.skills[t].id);a>-1&&(e.splice(a,1),fe.skills.splice(t,1))}}function Y(e){for(var t=fe.languages.length-1;t>=0;t--){for(var a=-1,i=0;i<e.length;i++)if(e[i].langId==fe.languages[t].langId&&e[i].fluency==fe.languages[t].fluency){a=i;break}a>-1&&(e.splice(a,1),fe.languages.splice(t,1))}}function J(e){for(var t=fe.licenses.length-1;t>=0;t--){var a=e.indexOf(fe.licenses[t].licenseId);a>-1&&(e.splice(a,1),fe.licenses.splice(t,1))}}function K(e){for(var t=fe.certificates.length-1;t>=0;t--){var a=e.indexOf(fe.certificates[t].id);a>-1&&(e.splice(a,1),fe.certificates.splice(t,1))}}function Z(e){if(e.selected)fe.listData.workExperience.selected.push(e.seqno);else{var t=fe.listData.workExperience.selected.indexOf(e.seqno);t>-1&&fe.listData.workExperience.selected.splice(t,1)}}function Q(e){if(e.selected)fe.listData.education.selected.push(e.id);else{var t=fe.listData.education.selected.indexOf(e.id);t>-1&&fe.listData.education.selected.splice(t,1)}}function X(e){if(e.selected)fe.listData.skills.selected.push(e.id);else{var t=fe.listData.skills.selected.indexOf(e.id);t>-1&&fe.listData.skills.selected.splice(t,1)}}function ee(e){if(e.selected)fe.listData.languages.selected.push({langId:e.langId,fluency:e.fluency});else{for(var t=-1,a=0;a<fe.listData.languages.selected.length;a++)if(fe.listData.languages.selected[a].langId==e.langId&&fe.listData.languages.selected[a].fluency==e.fluency){t=a;break}t>-1&&fe.listData.languages.selected.splice(t,1)}}function te(e){if(e.selected)fe.listData.licenses.selected.push(e.licenseId);else{var t=fe.listData.licenses.selected.indexOf(e.licenseId);t>-1&&fe.listData.licenses.selected.splice(t,1)}}function ae(e){if(e.selected)fe.listData.certificates.selected.push(e.id);else{var t=fe.listData.certificates.selected.indexOf(e.id);t>-1&&fe.listData.certificates.selected.splice(t,1)}}function ie(e){var t=e.obj,a=e.name;"workExperience"===a?Z(t):"education"===a?Q(t):"skills"===a?X(t):"languages"===a?ee(t):"licenses"===a?te(t):"certificates"===a&&ae(t)}function oe(e){if(fe.listData.workExperience.selected.length>0&&"workExperience"===e||fe.listData.education.selected.length>0&&"education"===e||fe.listData.skills.selected.length>0&&"skills"===e||fe.listData.languages.selected.length>0&&"languages"===e||fe.listData.licenses.selected.length>0&&"licenses"===e||fe.listData.certificates.selected.length>0&&"certificates"===e){if(fe.wizardMode)return void q(e);y.showDeleteConfirmationModal().then(function(t){t===!0&&q(e)})}}function ne(){fe.listData.workExperience.selected=[];for(var e=0;e<fe.workExperience.length;e++)fe.workExperience[e].selected=!0,fe.listData.workExperience.selected.push(fe.workExperience[e].seqno)}function le(){fe.listData.education.selected=[];for(var e=0;e<fe.education.length;e++)fe.education[e].selected=!0,fe.listData.education.selected.push(fe.education[e].id)}function re(){fe.listData.skills.selected=[];for(var e=0;e<fe.skills.length;e++)fe.skills[e].selected=!0,fe.listData.skills.selected.push(fe.skills[e].id)}function se(){fe.listData.languages.selected=[];for(var e=0;e<fe.languages.length;e++)fe.languages[e].selected=!0,fe.listData.languages.selected.push({langId:fe.languages[e].langId,fluency:fe.languages[e].fluency})}function ce(){fe.listData.licenses.selected=[];for(var e=0;e<fe.licenses.length;e++)fe.licenses[e].selected=!0,fe.listData.licenses.selected.push(fe.licenses[e].licenseId)}function de(){fe.listData.certificates.selected=[];for(var e=0;e<fe.certificates.length;e++)fe.certificates[e].selected=!0,fe.listData.certificates.selected.push(fe.certificates[e].id)}function me(e){"workExperience"===e?ne():"education"===e?le():"skills"===e?re():"languages"===e?se():"licenses"===e?ce():"certificates"===e&&de()}function ue(e){var t=[];"workExperience"===e?(fe.listData.workExperience.selected=[],t=fe.workExperience):"education"===e?(fe.listData.education.selected=[],t=fe.education):"skills"===e?(fe.listData.skills.selected=[],t=fe.skills):"languages"===e?(fe.listData.languages.selected=[],t=fe.languages):"licenses"===e?(fe.listData.licenses.selected=[],t=fe.licenses):"certificates"===e&&(fe.listData.certificates.selected=[],t=fe.certificates);for(var a=0;a<t.length;a++)t[a].selected=!1}function pe(e){var t=b.baseUrl+"pim/exportEmployeeCertificateDetails/empNumber/"+e.emp_number+"/id/"+e.id,a=C.open(t,"_blank");a.focus()}var fe=this;fe.title="Qualifications",fe.customFieldScreen="qualifications",fe.wizardMode=n.current.data.wizardMode,fe.customFieldService=f,fe.employeeService=h,fe.editWorkExperience=I,fe.addWorkExperience=A,fe.editEducation=L,fe.editLicense=O,fe.addEducation=P,fe.editSkill=z,fe.addSkill=j,fe.changeSelection=ie,fe.deleteSelection=oe,fe.addLicense=N,fe.addLanguage=G,fe.editLanguage=B,fe.selectAll=me,fe.deselectAll=ue,fe.downloadCertificate=pe,fe.attachmentPermission,fe.customFieldsPermission,fe.qualificationsAccessible=!1,fe.enableOnlineCourses=!1,fe.fieldConfiguration=[],r.show(),o.isLoggedIn()?D():o.login().then(function(e){D()})}angular.module("app.pim").controller("PimQualificationsController",e),e.$inject=["$q","$rootScope","ModalService","localizedMessages","webservice","$state","$stateParams","loader","toast","pimHelper","datagroupPermissions","$filter","dateService","pimTabs","customFieldService","qualificationsService","employeeService","wizardService","modalHelperService","LOGIN","$window","trainingService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h){function v(){e.call("skills","GET",[]).then(function(e){m.skill=e.data.data,y({skill:w(m.skill)}),S.wizardMode&&h.updateFormFields(S.schema,S.form,g)})}function y(e){S.schema={type:"object",title:"Qualifications",properties:{skillId:{title:"Skill",type:"string","enum":e.skill["enum"]},years_of_exp:{title:"Years of Experience",type:"string",exclusiveMaximum:!0,maximum:100,minimum:0},comments:{title:"Comments",type:"string",maxLength:100}},required:["skillId"]},S.form=[{type:"row",items:[{type:"select",htmlClass:"col-8",key:"skillId",titleMap:e.skill.titleMap,validationMessage:{302:t.getLocalizedCustom("Required")}},{type:"text",htmlClass:"col-4",key:"years_of_exp",validationMessage:{numericPositive:u.numericPositiveMaxOneDecimalPlaces.message,maxValidation:u.numericMaxValidation.message(S.schema.properties.years_of_exp.maximum),minValidation:u.numericMinValidation.message(S.schema.properties.years_of_exp.minimum)},$validators:{numericPositive:u.numericPositiveMaxOneDecimalPlaces.validator,maxValidation:function(e){return u.numericMaxValidation.validator(e,S.schema.properties.years_of_exp.maximum,S.schema.properties.years_of_exp.exclusiveMaximum)},minValidation:function(e){return u.numericMinValidation.validator(e,S.schema.properties.years_of_exp.minimum)}}}]},{type:"row",items:[{type:"textarea",htmlClass:"col-12",key:"comments",validationMessage:{201:u.textLengthExceedValidation.message(S.schema.properties.comments.maxLength)}}]}],S.model={skillId:S.skill.skillId,years_of_exp:S.skill.years_of_exp,comments:S.skill.comments}}function b(e){if(d.$broadcast("schemaFormValidate"),e.$valid&&S.modalProperties.permission){a.show(),angular.extend(S.skill,S.model);var o={skillId:S.model.skillId,years_of_exp:null,comments:S.model.comments};null!=S.model.years_of_exp&&""!=S.model.years_of_exp&&(o.years_of_exp=parseFloat(S.model.years_of_exp).toFixed(1));var l,s,m=S.skill.id,u=c.empNumber;m?(l="updateSuccess",s=f.updateSkill(u,m,o).then(function(e){C(e)})):(l="saveSuccess",s=f.addSkill(u,o).then(function(e){n.unshift(e)})),s.then(function(){S.wizardMode||t.showLocalizedToast(l)},function(e){i.error(e)})["finally"](function(){a.hide()}),r(!0)}}function C(e){for(var t=0;t<n.length;t++)if(n[t].id==e.id){angular.extend(n[t],e);break}}function w(e){for(var t=[],a=[],i=0;i<e.length;i++)t.push({value:e[i].id,name:e[i].name}),a.push(e[i].id);return{titleMap:t,"enum":a}}function _(){r(!1)}y.$inject=["formData"];var S=this;p.close=r,S.wizardMode=s.current.data.wizardMode;var D={};angular.copy(o,D),S.modalProperties=l,S.skill=D,S.save=b,S.cancel=_,v()}angular.module("app.pim").controller("PimSkillController",e),e.$inject=["webservice","localizedMessages","loader","toast","skill","dataList","modalProperties","close","$state","$stateParams","$scope","$rootScope","formValidationHelper","modalFunctions","qualificationsService","fieldConfiguration","wizardService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y){function b(){C(),w(),F.wizardMode&&v.updateFormFields(F.schema,F.form,h)}function C(){F.isCreditableReadOnly=!F.workExperience.from_date||!F.workExperience.to_date,F.model={employer:F.workExperience.employer,jobtitle:F.workExperience.jobtitle,from_date:F.workExperience.from_date?new Date(moment.utc(F.workExperience.from_date).format("l LT")):"",to_date:F.workExperience.to_date?new Date(moment.utc(F.workExperience.to_date).format("l LT")):"",creditable:!F.isCreditableReadOnly&&1==F.workExperience.creditable,comments:F.workExperience.comments}}function w(){F.schema={type:"object",title:"Qualifications",properties:{employer:{title:"Company",type:"string",maxLength:100},jobtitle:{title:"Job Title",type:"string",maxLength:100},from_date:{title:"From",type:["null","object"],datePickerConfig:{selectMonths:!0,selectYears:40,max:new Date}},to_date:{title:"To",type:["null","object"],datePickerConfig:{selectMonths:!0,selectYears:40,max:new Date}},creditable:{title:"Creditable",type:"boolean",readonly:F.isCreditableReadOnly},comments:{title:"Comment",type:"string",maxLength:200}},required:["employer","jobtitle"]},F.form=[{type:"row",items:[{type:"text",htmlClass:"col-6",key:"employer",validationMessage:{302:t.getLocalizedCustom("Required"),201:a.textLengthExceedValidation.message(F.schema.properties.employer.maxLength)}},{type:"text",htmlClass:"col-6",key:"jobtitle",validationMessage:{302:t.getLocalizedCustom("Required"),201:a.textLengthExceedValidation.message(F.schema.properties.jobtitle.maxLength)}}]},{type:"row",items:[{type:"date",htmlClass:"col-6",key:"from_date",title:"From",onChange:function(e,t){_(!e||!F.model.to_date,e,F.model.to_date)},validationMessage:{maxDate:a.beforeDate.message},$validators:{maxDate:function(e){return a.beforeDate.validator(e,F.model.to_date)}},defaultDate:F.model.from_date,maximumDate:new Date,ngModelOptions:{allowInvalid:!0},resetDefaultDate:F.resetDefaultDate},{type:"date",htmlClass:"col-6",key:"to_date",title:"To",onChange:function(e,t){_(!e||!F.model.from_date,F.model.from_date,e)},validationMessage:{toDate:t.getLocalizedCustom("To date should be after From date")},$validators:{toDate:function(e){return a.toDate.validator(e,F.model.from_date)}},ngModelOptions:{allowInvalid:!0},defaultDate:F.model.to_date,maximumDate:new Date,resetDefaultDate:F.resetDefaultDate}]},{type:"row",items:[{type:"checkbox",htmlClass:"col-12",key:"creditable"}]},{type:"row",items:[{type:"textarea",htmlClass:"col-12",key:"comments",validationMessage:{201:a.textLengthExceedValidation.message(F.schema.properties.comments.maxLength)}}]}]}function _(e,t,a){S(t,a)&&(e&&(F.model.creditable=!1),e!==F.isCreditableReadOnly&&(F.isCreditableReadOnly=e,w(),c.$broadcast("schemaFormValidate")))}function S(e,t){var a=!t||!e||e.getTime()<=t.getTime();return c.$broadcast("schemaForm.error.from_date","maxDate",a),c.$broadcast("schemaForm.error.to_date","toDate",a),c.$broadcast("schemaForm.error.from_date","schemaForm",a),c.$broadcast("schemaForm.error.to_date","schemaForm",a),a}function D(e){if(c.$broadcast("schemaFormValidate"),e.$valid&&F.modalProperties.permission){i.show(),angular.extend(F.workExperience,F.model);var a={employer:F.model.employer,jobtitle:F.model.jobtitle,from_date:F.model.from_date,to_date:F.model.to_date,creditable:F.model.creditable,comments:F.model.comments};""!=F.model.from_date&&null!=F.model.from_date?a.from_date=u.toStandardDate(F.model.from_date):a.from_date=null,""!=F.model.to_date&&null!=F.model.to_date?a.to_date=u.toStandardDate(F.model.to_date):a.to_date=null;var n,l,d=m.empNumber,p=F.workExperience.seqno;p?(n="updateSuccess",l=g.updateWorkExperience(d,p,a).then(function(e){T(e)})):(n="saveSuccess",l=g.addWorkExperience(d,a).then(function(e){r.unshift(e)})),l.then(function(){F.wizardMode||t.showLocalizedToast(n)},function(e){o.error(e)})["finally"](function(){i.hide()}),s(!0)}}function T(e){for(var t=0;t<r.length;t++)if(r[t].seqno==e.seqno){angular.extend(r[t],e);break}}function x(){s(!1)}var F=this;f.close=s,F.modalProperties=l,F.wizardMode=d.current.data.wizardMode;var k={};angular.copy(n,k),F.workExperience=k,F.save=D,F.cancel=x,F.resetDefaultDate={reset:!1},b()}angular.module("app.pim").controller("PimWorkExperienceController",e),e.$inject=["webservice","localizedMessages","formValidationHelper","loader","toast","workExperience","modalProperties","dataList","close","$scope","$state","$stateParams","dateService","pimTabs","modalFunctions","qualificationsService","fieldConfiguration","wizardService","$timeout"]}(),function(){"use strict";function e(e,t,a,i){function o(e){return a.get("employees/"+e+"/workExperience",{},{useCache:!1}).then(function(e){var a=i.convertDates(e.data.data);return a&&a.length>0&&(a=t("orderBy")(a,"employer")),a})}function n(e){return a.get("employees/"+e+"/education",{},{useCache:!1}).then(function(e){var a=i.convertDates(e.data.data);return a&&a.length>0&&(a=t("orderBy")(a,"Education.name")),a})}function l(e){return a.get("employees/"+e+"/skills",{},{useCache:!1}).then(function(e){var a=i.convertDates(e.data.data);return a&&a.length>0&&(a=t("orderBy")(a,"Skill.name")),a})}function r(e){return a.get("employees/"+e+"/languages",{},{useCache:!1}).then(function(e){var a=i.convertDates(e.data.data);return a&&a.length>0&&(a=t("orderBy")(a,"Language.name")),a})}function s(e){return a.get("employees/"+e+"/EmployeeLicense",{},{useCache:!1}).then(function(e){var a=i.convertDates(e.data.data);return a&&a.length>0&&(a=t("orderBy")(a,"License.name")),a})}function c(e,t){return a.call("employees/"+e+"/education","POST",t).then(function(e){return e.data.data})}function d(e,t,i){return a.call("employees/"+e+"/education/"+t,"PATCH",i).then(function(e){return e.data.data})}function m(e,t){return a.call("employees/"+e+"/languages","POST",t).then(function(e){return e.data.data})}function u(e,t,i,o){return a.call("employees/"+e+"/languages/langId/"+t+"/fluency/"+i,"PATCH",o).then(function(e){return e.data.data})}function p(e,t){return a.call("employees/"+e+"/skills","POST",t).then(function(e){return e.data.data})}function f(e,t,i){return a.call("employees/"+e+"/skills/"+t,"PATCH",i).then(function(e){return e.data.data})}function g(e,t){return a.call("employees/"+e+"/workExperience","POST",t).then(function(e){return e.data.data})}function h(e,t,i){return a.call("employees/"+e+"/workExperience/"+t,"PATCH",i).then(function(e){return e.data.data})}function v(e,t){return a.call("employees/"+e+"/EmployeeLicense","POST",t).then(function(e){return e.data.data})}function y(e,t,i){return a.call("employees/"+e+"/EmployeeLicense/"+t,"PATCH",i).then(function(e){return e.data.data})}function b(e,t){return a.call("employees/"+e+"/education","DELETE",{data:t},{})}function C(e,t){return a.call("employees/"+e+"/workExperience","DELETE",{data:t},{})}function w(e,t){return a.call("employees/"+e+"/skills","DELETE",{data:t},{})}function _(e,t){return a.call("employees/"+e+"/languages","DELETE",{data:t},{})}function S(e,t){return a.call("employees/"+e+"/EmployeeLicense","DELETE",{data:t},{})}function D(e){return a.get("employeecertificate/"+e,{},{useCache:!1}).then(function(e){var a=e.data.data;return a&&a.length>0&&(a=t("orderBy")(a,"name")),a})}function T(e,t){return a.call("employeecertificate/"+e,"DELETE",{data:t},{})}var x={getWorkExperiences:o,getEducations:n,getSkills:l,getLanguages:r,getLicenses:s,getCertificates:D,deleteCertificates:T,addEducation:c,updateEducation:d,addLanguage:m,updateLanguage:u,addLicense:v,updateLicense:y,addSkill:p,updateSkill:f,addWorkExperience:g,updateWorkExperience:h,deleteEducations:b,deleteWorkExperiences:C,deleteSkills:w,deleteLanguages:_,deleteLicenses:S};return x}angular.module("app.pim").factory("qualificationsService",e),e.$inject=["$q","$filter","webservice","pimHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s){function c(){e.call("employeeReportingMethods","GET",[]).then(function(e){if(y.exsistingReportingMethods=v(e.data.data,"name",!0),d(),y.reportingMethod.id){var t=y.exsistingReportingMethods.indexOf(y.reportingMethod.name.toLowerCase());y.exsistingReportingMethods.splice(t,1)}})}function d(){y.schema={type:"object",title:"Reporting Mehthod",properties:{name:{title:"Name",type:"string",maxLength:100}},required:["name"]},y.form=[{type:"row",items:[{type:"text",htmlClass:"col-12",key:"name",onChange:u,validationMessage:{duplicationReportingMethods:t.getLocalizedCustom("Already exists"),302:t.getLocalizedCustom("Required"),201:s.textLengthExceedValidation.message(y.schema.properties.name.maxLength)},$validators:{duplicationReportingMethods:m}}]}],b&&f()}function m(e){if(null!=e){if(""==e)return!1;if(y.exsistingReportingMethods)return!(y.exsistingReportingMethods.indexOf(e.toLowerCase())>-1)}}function u(e){p(),y.model.name=e}function p(){null==y.model&&(y.reportingMethod.name="",f())}function f(){y.model={name:y.reportingMethod.name}}function g(r){if(b||null!=y.model||p(),l.$broadcast("schemaFormValidate"),r.$valid){o.show(),angular.extend(y.reportingMethod,y.model);var s=y.reportingMethod.id,c="POST",d="employeeReportingMethods",m="saveSuccess";s?(c="PATCH",d+="/"+s,m="updateSuccess"):(c="POST",m="saveSuccess"),e.call(d,c,y.model,{}).then(function(e){o.hide(),delete y.exsistingReportingMethods,t.showLocalizedToast(m),"POST"==c?a.addToList(e.data.data):"PATCH"==c&&a.updateList(C)},function(e){o.hide(),n.success(e)}),i(!0)}}function h(){i(!1)}function v(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}var y=this,b=!1;y.title=a.title||"Reporting Methods";var C={};angular.copy(a.reportingMethod,C),y.reportingMethod=C,y.exsistingReportingMethods,y.extractFeildValueFromData=v,y.reportingMethod.id&&(b=!0),y.save=g,y.cancel=h,c()}angular.module("app.pim").controller("PimEditReportingMethodController",e),e.$inject=["webservice","localizedMessages","modalInput","close","loader","toast","$scope","formHelper","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){r.show();var e=[];e.push(n.call("employeeReportingMethods","GET",[],{})),e.push(n.call("permissions/dataGroup/pim_document_templates","GET",[],{})),t.all(e).then(function(e){S.permissions=e[1].data.data,f(),g(),S.reportingMethods=e[0].data.data,S.reportingMethods=m.getSortedObjectList(S.reportingMethods,"name","ASC"),S.loaded=!0,h(S.reportingMethods),S.reportingMethodsListHelper=new c.list(S.listData.reportingMethods,S.reportingMethods),S.changeSelection=S.reportingMethodsListHelper.changeSelection,S.selectAll=S.reportingMethodsListHelper.selectAllItems,S.deselectAll=S.reportingMethodsListHelper.deselectAllItems,0==S.reportingMethods.length&&o.infoToast("No Records Found"),r.hide()},function(e){r.hide(),d.go("403")})}function p(e,t,a){S.reportingMethods=m.getSortedObjectList(S.reportingMethods,e,t)}function f(){}function g(){var e=[{name:"name",lable:"Name",getter:"name",sortable:!0,sortAction:"fetchReportingMethods"}],t=[{colspan:1}],a=[{"class":"edit_item",clickAction:"editReportingMethod",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:S.permissions["delete"]}];S.listData={reportingMethods:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:S.permissions,listActions:i,columnWidths:["5%","90%","5%"]}}}function h(){for(var e in S.reportingMethods)S.reportingMethods[e].name=o.getLocalizedCustom(S.reportingMethods[e].name)}function v(e){i.showModal("app/pim/reportingMethods/reporting_methods_modal.html","PimEditReportingMethodController","modal",{modalInput:{reportingMethod:e,updateList:function(e){S.reportingMethodsListHelper.updateListItem(e)},title:"Edit Reporting Method"}})}function y(){if(S.listData.reportingMethods.selected.length>0){var e=S.listData.reportingMethods.selected.length;r.show(),n.call("employeeReportingMethods","DELETE",{data:S.listData.reportingMethods.selected},{}).then(function(t){r.hide();var a="deleteSuccess";o.showLocalizedToast(a),S.total-=e,S.reportingMethodsListHelper.removeItemFromList(S.listData.reportingMethods.selected)},function(e){r.hide(),o.errorToast(o.getLocalizedCustom(e.data.msg))})}}function b(){S.listData.reportingMethods.selected.length>0&&i.showDeleteConfirmationModal().then(function(e){e===!0&&y()})}function C(){var e={name:""};i.showModal("app/pim/reportingMethods/reporting_methods_modal.html","PimEditReportingMethodController","modal",{modalInput:{reportingMethod:e,addToList:function(e){S.reportingMethodsListHelper.addListItem(e)},title:"Add Reporting Method"}})}function w(){close(!0)}function _(){close(!1)}var S=this;S.title="Reporting Methods",S.reportingMethods="",S.loaded=!1,S.listData={reportingMethods:""},S.editReportingMethod=v,S.deleteReportingMethod=y,S.deleteSelection=b,S.reportingMethodsListHelper={},S.changeSelection={},S.addReportingMethods=C,S.confirm=w,S.cancel=_,S.fetchReportingMethods=p,S.SortingListFields={name:"name"},u()}angular.module("app.pim").controller("PimReportingMethodsController",e),e.$inject=["logger","$q","$window","modalHelperService","localizedMessages","webservice","$rootScope","loader","toast","listHelper","$state","formHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){function m(){n.show(),u().then(function(e){h.attachmentPermission=e["report-to_attachment"],h.customFieldsPermission=e["report-to_custom_fields"],h.supervisorPermissions=e.supervisor,h.subordinatePermissions=e.subordinates,h.allowedToCreateReportingMethods=e.allowedToCreateReportingMethods,h.supervisorPermissions.read||h.subordinatePermissions.read||h.attachmentPermission.read||h.customFieldsPermission.read||(n.hide(),a.go("403")),h.wizardMode||t.$broadcast("setEmployeeDetailsForPimTabs"),n.hide()})}function u(){null!=t.emp_number&&t.emp_number==i.empNumber&&(h.self=!0);var a={permissions:h.employeeService.getDatagroupPermissions(h.tempEmpNo,["supervisor","subordinates","report-to_attachment","report-to_custom_fields"],h.self),reportingMethodPermissions:d.getPermission("pim_reporting_methods")};return h.wizardMode&&(a.wizardConfig=p()),e.all(a).then(function(e){var t=e.permissions;return t.allowedToCreateReportingMethods=!(!e.reportingMethodPermissions||!e.reportingMethodPermissions.create)&&e.reportingMethodPermissions.create,h.wizardMode?(0===e.wizardConfig.supervisor.length&&(t.supervisor={read:!1,create:!1,update:!1,"delete":!1}),0===e.wizardConfig.subordinate.length&&(t.subordinates={read:!1,create:!1,update:!1,"delete":!1})):h.customFieldConfiguration=!0,t})}function p(){return s.getEmployee().then(function(t){var i={supervisor:c.getFieldConfigurationByRoute(a.current.name,"PimSupervisor",t.locationId),subordinate:c.getFieldConfigurationByRoute(a.current.name,"PimSubordinate",t.locationId),customFieldConfiguration:l.getCustomFieldConfigurationByRoute(a.current.name,t.locationId).then(function(e){h.customFieldConfiguration=e})};return e.all(i)})}function f(){t.$broadcast("pim.addSupervisor")}function g(){t.$broadcast("pim.addSubordinate")}var h=this;h.title="Report To",h.customFieldScreen="report-to",h.wizardMode=a.current.data.wizardMode,h.self=!1,h.employeeService=l,h.customFieldService=r,h.attachmentPermission={},h.customFieldsPermission={},h.supervisorPermissions={},h.subordinatePermissions={},h.addSupervisor=f,h.addSubordinate=g,h.tempEmpNo=i.empNumber,o.isLoggedIn()?m():o.login().then(function(e){m()})}angular.module("app.pim").controller("PimReportToController",e),e.$inject=["$q","$rootScope","$state","$stateParams","webservice","loader","employeeService","customFieldService","pimTabs","wizardService","datagroupPermissions"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h){function v(){D.tempEmpNo=p.empNumber}function y(e){D.schema={type:"object",title:"Subordinate",properties:{selectedEmployee:{title:"Name",type:"object",idsToSkip:e.idsToSkip},reportingMethodId:{title:"Reporting Method",type:"string","enum":e.reportingMethods["enum"]},reportingMethodText:{title:"Please Specify",type:"string",maxLength:50}},required:["selectedEmployee","reportingMethodId","reportingMethodText"]},D.form=[{type:"row",items:[{key:"selectedEmployee",type:"auto-complete",htmlClass:"col-12",placeholder:i.getLocalizedCustom("Select Subordinate"),"text-searching":"Searching...","text-no-results":"No results found","input-changed":function(){D.model.selectedEmployee=void 0},validationMessage:{302:i.getLocalizedCustom("Required")}}]},{type:"row",items:[{type:"select",htmlClass:"col-12",key:"reportingMethodId",titleMap:e.reportingMethods.titleMap,validationMessage:{302:i.getLocalizedCustom("Required")}}]},{type:"row",items:[{type:"text",htmlClass:"col-12",key:"reportingMethodText",condition:"model.reportingMethodId == '-1'",validationMessage:{302:i.getLocalizedCustom("Required"),201:h.textLengthExceedValidation.message(D.schema.properties.reportingMethodText.maxLength)}}]}],D.reportTo.subordinate&&!D.reportTo.subordinate.fullName&&(D.reportTo.subordinate.fullName=D.reportTo.subordinate.firstName+" "+D.reportTo.subordinate.lastName),D.model={selectedEmployee:D.reportTo.subordinate,reportingMethodId:D.reportTo.reportingMethodId,reportingMethodText:""}}function b(e){if(u.$broadcast("schemaFormValidate"),e.$valid){s.show();var t;if("-1"==D.model.reportingMethodId){var o={name:D.model.reportingMethodText};t=a.call("employeeReportingMethods","POST",o,{})}else t=f.when(!1);var d=D.model,m=D.reportTo.subordinateId,p=D.reportTo.reportingMethodId,g={subordinateId:d.selectedEmployee.empNumber,supervisorId:D.tempEmpNo,reportingMethodId:d.reportingMethodId};t.then(function(e){e&&(g.reportingMethodId=e.data.data.id);var t;t=m?n.updateSubordinate(D.tempEmpNo,m,p,g).then(function(e){C(e.data,m,p),D.wizardMode||i.showLocalizedToast("updateSuccess")}):n.addSubordinate(D.tempEmpNo,g).then(function(e){l.unshift(e.data),D.wizardMode||i.showLocalizedToast("saveSuccess")}),t.then(function(e){s.hide()},function(e){s.hide(),c.success(e)})}),r(!0)}}function C(e,t,a){for(var i=0;i<l.length;i++)if(l[i].subordinateId==t&&l[i].reportingMethodId==a){angular.extend(l[i],e);break}}function w(e){var t={reportingMethods:a.call("employeeReportingMethods","GET",[]),supervisorIds:n.getSupervisorIds(p.empNumber,!0),subordinateIds:n.getSubordinateIds(p.empNumber,!1)};f.all(t).then(function(e){m.reportingMethods=e.reportingMethods.data.data;var t=[p.empNumber].concat(e.supervisorIds.data,e.subordinateIds.data);y({reportingMethods:_(m.reportingMethods),idsToSkip:t})})}function _(e){for(var t,a=[],o=[],n=0;n<e.length;n++)t=i.getLocalizedCustom(e[n].name),a.push({value:e[n].id,
name:t}),o.push(e[n].id);return t=i.getLocalizedCustom("Other"),D.allowedToCreateReportingMethods&&(a.push({value:"-1",name:t}),o.push("-1")),{titleMap:a,"enum":o}}function S(){r(!1)}y.$inject=["formData"];var D=this;D.title=d;var T={};angular.copy(o,T),D.reportTo=T,D.save=b,D.cancel=S,D.allowedToCreateReportingMethods=g,D.wizardMode=e.current.data.wizardMode,v(),w(y)}angular.module("app.pim").controller("PimEditEmployeeSubordinateController",e),e.$inject=["$state","formHelper","webservice","localizedMessages","reportTo","employeeService","dataList","close","loader","toast","title","$rootScope","$scope","$stateParams","$q","allowedToCreateReportingMethods","formValidationHelper"]}(),function(){"use strict";function e(){function e(e,t,a,i){}var a={restrict:"E",templateUrl:"app/pim/reportTo/subordinates/subordinates.html",scope:{permissions:"=",self:"=",empNumber:"=",employeeService:"=",wizard:"=",allowedToCreateReportingMethods:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return a}function t(e,t,a,i,o,n,l,r){function s(){l.show(),C.employeeService.getSubordinates(C.empNumber).then(function(e){c(),C.subordinates=e.data,l.hide(),C.wizard&&0==C.subordinates.length&&o.infoToast("No Records Found")},function(e){l.hide()})}function c(){C.panelInfo={title:"Assigned Subordinates",icon:"images/pim/icon_work.svg"},d()}function d(){var e=[{name:"name",lable:"Name",getter:["subordinate","firstName"],formatter:function(e,t){var a="";return null!=t.subordinate.termination_id&&(a="("+o.getLocalizedCustom("Past Employee")+")"),t.subordinate.firstName+" "+t.subordinate.lastName+" "+a}},{name:"relationship",lable:"Reporting Method",getter:["ReportingMethod","name"],formatter:function(e){return o.getLocalizedCustom(e)}}];C.listData={name:"subordinates",selectable:!0,selected:[],idGetter:["supervisorId","subordinateId","reportingMethodId"],listFields:e,showColumnsAnyway:!0,permission:C.permissions,columnWidths:["10%","30%","50%","10%"],listActions:[{action:"deleteSelection",lable:"Delete Selected",actionPermission:C.permissions["delete"]}]},C.permissions["delete"]||(C.listData.columnWidths=["30%","60%","10%"]),C.permissions.update&&(C.listData.extraTH=[{colspan:3}],C.listData.extraTD=[{"class":"edit_item",clickAction:"editSubordinate",tooltip:"Edit"}])}function m(){var e={selectedEmployee:"",reportingMethodId:""};p(e,"Add Subordinate")}function u(e){p(e,"Edit Subordinate")}function p(e,t){i.showModal("app/pim/reportTo/subordinates/edit-subordinate.html","PimEditEmployeeSubordinateController","modal",{reportTo:e,employeeService:C.employeeService,dataList:C.subordinates,title:t,allowedToCreateReportingMethods:C.allowedToCreateReportingMethods})}function f(){if(C.listData.selected.length>0){var e=C.listData.selected.length;l.show(),C.employeeService.deleteSubordinates(C.empNumber,C.listData.selected).then(function(t){l.hide(),C.wizardMode||o.showLocalizedToast("deleteSuccess"),C.total-=e,g(C.listData.selected)},function(e){l.hide(),r.success(e)})}}function g(e){for(var t=C.subordinates.length-1;t>=0;t--){var a=e.indexOf(C.subordinates[t].supervisorId+" "+C.subordinates[t].subordinateId+" "+C.subordinates[t].reportingMethodId);a>-1&&(e.splice(a,1),C.subordinates.splice(t,1))}}function h(e){var t=e.obj;if(t.selected)C.listData.selected.push(t.supervisorId+" "+t.subordinateId+" "+t.reportingMethodId);else{var a=C.listData.selected.indexOf(t.supervisorId+" "+t.subordinateId+" "+t.reportingMethodId);a>-1&&C.listData.selected.splice(a,1)}}function v(e){if(C.listData.selected.length>0){if(C.wizardMode)return void f();i.showDeleteConfirmationModal().then(function(e){e===!0&&f()})}}function y(e){C.listData.selected=[];for(var t=0;t<C.subordinates.length;t++)C.subordinates[t].selected=!0,C.listData.selected.push(C.subordinates[t].supervisorId+" "+C.subordinates[t].subordinateId+" "+C.subordinates[t].reportingMethodId)}function b(e){C.listData.selected=[];for(var t=0;t<C.subordinates.length;t++)C.subordinates[t].selected=!1}var C=this;C.subordinates="",C.editSubordinate=u,C.deleteSubordinates=f,C.changeSelection=h,C.deleteSelection=v,C.addSubordinate=m,C.selectAll=y,C.deselectAll=b,C.wizardMode=a.current.data.wizardMode,s(),t.$on("pim.addSubordinate",m)}angular.module("app.pim").directive("pimSubordinates",e),t.$inject=["$q","$scope","$state","modalHelperService","localizedMessages","webservice","loader","toast"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h){function v(){D.tempEmpNo=p.empNumber}function y(e){D.schema={type:"object",title:"Supervisor",properties:{selectedEmployee:{title:"Name",type:"object",idsToSkip:e.idsToSkip},reportingMethodId:{title:"Reporting Method",type:"string","enum":e.reportingMethods["enum"]},reportingMethodText:{title:"Please Specify",type:"string",maxLength:50}},required:["selectedEmployee","reportingMethodId","reportingMethodText"]},D.form=[{type:"row",items:[{key:"selectedEmployee",type:"auto-complete",htmlClass:"col-12",placeholder:i.getLocalizedCustom("Select Supervisor"),"text-searching":"Searching...","text-no-results":"No results found","input-changed":function(){D.model.selectedEmployee=void 0},validationMessage:{invalid:i.getLocalizedCustom("Invalid"),302:i.getLocalizedCustom("Required")},$validators:{invalid:function(e){return!(e&&e.hasOwnProperty("purged_at")&&e.purged_at)}}}]},{type:"row",items:[{type:"select",htmlClass:"col-12",key:"reportingMethodId",titleMap:e.reportingMethods.titleMap,validationMessage:{302:i.getLocalizedCustom("Required")}}]},{type:"row",items:[{type:"text",htmlClass:"col-12",key:"reportingMethodText",condition:"model.reportingMethodId == '-1'",validationMessage:{302:i.getLocalizedCustom("Required"),201:h.textLengthExceedValidation.message(D.schema.properties.reportingMethodText.maxLength)}}]}],D.reportTo.supervisor&&!D.reportTo.supervisor.fullName&&(D.reportTo.supervisor.fullName=D.reportTo.supervisor.firstName+" "+D.reportTo.supervisor.lastName),D.model={selectedEmployee:D.reportTo.supervisor,reportingMethodId:D.reportTo.reportingMethodId,reportingMethodText:""}}function b(e){if(u.$broadcast("schemaFormValidate"),e.$valid){s.show();var t;if("-1"==D.model.reportingMethodId){var o={name:D.model.reportingMethodText};t=a.call("employeeReportingMethods","POST",o,{})}else t=f.when(!1);var d=D.model,m=D.reportTo.supervisorId,p=D.reportTo.reportingMethodId,g={supervisorId:d.selectedEmployee.empNumber,subordinateId:D.tempEmpNo,reportingMethodId:d.reportingMethodId};t.then(function(e){e&&(g.reportingMethodId=e.data.data.id);var t;t=m?n.updateSupervisor(D.tempEmpNo,m,p,g).then(function(e){C(e.data,m,p),D.wizardMode||i.showLocalizedToast("updateSuccess")}):n.addSupervisor(D.tempEmpNo,g).then(function(e){l.unshift(e.data),D.wizardMode||i.showLocalizedToast("saveSuccess")}),t.then(function(e){s.hide()},function(e){s.hide(),c.success(e)})}),r(!0)}}function C(e,t,a){for(var i=0;i<l.length;i++)if(l[i].supervisorId==t&&l[i].reportingMethodId==a){angular.extend(l[i],e);break}}function w(e){var t={reportingMethods:a.call("employeeReportingMethods","GET",[]),subordinateIds:n.getSubordinateIds(p.empNumber,!0),supervisorIds:n.getSupervisorIds(p.empNumber,!1)};f.all(t).then(function(e){m.reportingMethods=e.reportingMethods.data.data;var t=[p.empNumber].concat(e.subordinateIds.data,e.supervisorIds.data);y({reportingMethods:_(m.reportingMethods),idsToSkip:t})})}function _(e){for(var t,a=[],o=[],n=0;n<e.length;n++)t=i.getLocalizedCustom(e[n].name),a.push({value:e[n].id,name:t}),o.push(e[n].id);return t=i.getLocalizedCustom("Other"),D.allowedToCreateReportingMethods&&(a.push({value:"-1",name:t}),o.push("-1")),{titleMap:a,"enum":o}}function S(){r(!1)}y.$inject=["formData"];var D=this;D.title=d;var T={};angular.copy(o,T),D.reportTo=T,D.save=b,D.cancel=S,D.wizardMode=e.current.data.wizardMode,D.allowedToCreateReportingMethods=g,v(),w(y)}angular.module("app.pim").controller("PimEditEmployeeSupervisorController",e),e.$inject=["$state","formHelper","webservice","localizedMessages","reportTo","employeeService","dataList","close","loader","toast","title","$rootScope","$scope","$stateParams","$q","allowedToCreateReportingMethods","formValidationHelper"]}(),function(){"use strict";function e(){function e(e,t,a,i){}var a={restrict:"E",templateUrl:"app/pim/reportTo/supervisors/supervisors.html",scope:{permissions:"=",self:"=",empNumber:"=",employeeService:"=",wizard:"=",allowedToCreateReportingMethods:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return a}function t(e,t,a,i,o,n,l,r,s){function c(){l.show();var t={supervisorData:D.employeeService.getSupervisors(D.empNumber)};D.wizardMode&&(t.wizardConfig=s.getWizardData()),e.all(t).then(function(e){if(p(),D.wizardMode){var t=m(e.supervisorData.data),a=d(e.wizardConfig.actions);if(!u(t,a))for(var i=0;i<t.length;i++)D.employeeService.addSupervisor(D.empNumber,t[i])}D.supervisors=e.supervisorData.data,l.hide(),D.wizard&&0==D.supervisors.length&&o.infoToast("No Records Found")},function(e){l.hide()})}function d(e){var t=[];if(e.length>0)for(var a=0;a<e.length;a++)"employees/<EMPNUMBER>/supervisors"==e[a].endpoint&&t.push(e[a].data.supervisorId);return t}function m(e){var t=[];if(e.length>0)for(var a=0;a<e.length;a++){var i={supervisorId:e[a].supervisorId,reportingMethodId:e[a].reportingMethodId};t.push(i)}return t}function u(e,t){for(var a=0;a<e.length;a++)for(var i=0;a<t.length;i++)if(e[a].supervisorId==t[i])return!0;return!1}function p(){D.panelInfo={title:"Assigned Supervisors",icon:"images/pim/icon_work.svg"},f()}function f(){var e=[{name:"name",lable:"Name",getter:["supervisor","firstName"],formatter:function(e,t){var a="";return null!=t.supervisor.termination_id&&(a="("+o.getLocalizedCustom("Past Employee")+")"),t.supervisor.firstName+" "+t.supervisor.lastName+" "+a}},{name:"relationship",lable:"Reporting Method",getter:["ReportingMethod","name"],formatter:function(e){return o.getLocalizedCustom(e)}}];D.listData={name:"supervisors",selectable:!0,selected:[],idGetter:["supervisorId","subordinateId","reportingMethodId"],listFields:e,showColumnsAnyway:!0,permission:D.permissions,columnWidths:["10%","30%","50%","10%"],listActions:[{action:"deleteSelection",lable:"Delete Selected",actionPermission:D.permissions["delete"]}]},D.permissions["delete"]||(D.listData.columnWidths=["30%","60%","10%"]),D.permissions.update&&(D.listData.extraTH=[{colspan:3}],D.listData.extraTD=[{"class":"edit_item",clickAction:"editSupervisor",tooltip:"Edit"}])}function g(){var e={selectedEmployee:"",reportingMethodId:""};v(e,"Add Supervisor")}function h(e){v(e,"Edit Supervisor")}function v(e,t){i.showModal("app/pim/reportTo/supervisors/edit-supervisor.html","PimEditEmployeeSupervisorController","modal",{reportTo:e,employeeService:D.employeeService,dataList:D.supervisors,title:t,allowedToCreateReportingMethods:D.allowedToCreateReportingMethods})}function y(){if(D.listData.selected.length>0){var e=D.listData.selected.length;l.show(),D.employeeService.deleteSupervisors(D.empNumber,D.listData.selected).then(function(t){l.hide(),D.wizardMode||o.showLocalizedToast("deleteSuccess"),D.total-=e,b(D.listData.selected)},function(e){l.hide(),r.success(e)})}}function b(e){for(var t=D.supervisors.length-1;t>=0;t--){var a=e.indexOf(D.supervisors[t].supervisorId+" "+D.supervisors[t].subordinateId+" "+D.supervisors[t].reportingMethodId);a>-1&&(e.splice(a,1),D.supervisors.splice(t,1))}}function C(e){var t=e.obj;if(t.selected)D.listData.selected.push(t.supervisorId+" "+t.subordinateId+" "+t.reportingMethodId);else{var a=D.listData.selected.indexOf(t.supervisorId+" "+t.subordinateId+" "+t.reportingMethodId);a>-1&&D.listData.selected.splice(a,1)}}function w(e){if(D.listData.selected.length>0){if(D.wizardMode)return void y();i.showDeleteConfirmationModal().then(function(e){e===!0&&y()})}}function _(e){D.listData.selected=[];for(var t=0;t<D.supervisors.length;t++)D.supervisors[t].selected=!0,D.listData.selected.push(D.supervisors[t].supervisorId+" "+D.supervisors[t].subordinateId+" "+D.supervisors[t].reportingMethodId)}function S(e){D.listData.selected=[];for(var t=0;t<D.supervisors.length;t++)D.supervisors[t].selected=!1}var D=this;D.supervisors="",D.editSupervisor=h,D.deleteSupervisors=y,D.changeSelection=C,D.deleteSelection=w,D.addSupervisor=g,D.selectAll=_,D.deselectAll=S,D.wizardMode=a.current.data.wizardMode,c(),t.$on("pim.addSupervisor",g)}angular.module("app.pim").directive("pimSupervisors",e),t.$inject=["$q","$scope","$state","modalHelperService","localizedMessages","webservice","loader","toast","wizardService"]}(),function(){"use strict";function e(){function e(e,t,a,i){}var a={restrict:"E",templateUrl:"app/pim/salary/detailed-history.html",scope:{employee:"=",history:"=",permissions:"=",auditLogs:"=",salaryRecord:"=",editAction:"=",unSelectableIds:"=?",unDeletableIds:"=?"},link:e,controller:t,controllerAs:"vm",bindToController:!0};return a}function t(e,t,a,i,o,n,l,r,s){function c(){d(),e.$watch("vm.salaryRecord",function(e,t){d()})}function d(){var e=[{name:"event",lable:"Event",getter:["event","name"],type:"history-event-name"},{name:"effective_from",lable:"Effective From",getter:"effective_date",filters:[{name:"ohrmDateFilter"}]},{name:"component",lable:"Field",getter:"name",type:"oxd-lengthy-tooltip",formatter:function(e){return o.getLocalizedCustom(e)}},{name:"old_value",lable:"Changed From",getter:"old_amount","class":"right-align",type:"oxd-lengthy-tooltip",formatter:function(e,t){return u(e,t.old_decimals,t.old_symbol)}},{name:"new_value",lable:"Changed To",getter:"amount","class":"right-align",type:"oxd-lengthy-tooltip",formatter:function(e,t){return u(e,t.decimals,t.symbol)}},{name:"percentage",lable:"Percentage Change",type:"icon-with-text-panal",getter:"percentage","class":"right-align"},{name:"actionButtons",lable:"",getter:"id","class":"text-center",type:"oxd-action-button-panel",iconButtons:[{id:"delete-button",classes:"btn-list",text:"Delete",tooltip:{text:"Delete"},clickAction:function(e,t,a){m([a])},icon:"ohrm_delete",displayCondition:function(e,t){return y.permissions.salaryHistory["delete"]&&y.unSelectableIds.indexOf(t.id)===-1&&y.unDeletableIds.indexOf(t.id)===-1}},{id:"edit-button",classes:"btn-list",text:"Edit",tooltip:{text:"Edit"},clickAction:function(e,t,a){f(a.split("_")[0])},icon:"edit",iconSize:"1rem",displayCondition:function(e,t){return y.permissions.salaryHistory.update&&y.unSelectableIds.indexOf(t.id)===-1}}]}],t=[];t=y.permissions.salaryHistory["delete"]?["2%","14%","14%","20%","14%","14%","10%","12%"]:y.permissions.salaryHistory.update?["15%","15%","20%","15%","15%","10%","10%"]:["16%","16%","20%","16%","16%","11%","5%"],y.listDefinition={name:"DetailedSalaryHistoryCompact",selectable:!0,selected:[],idGetter:["id"],listFields:e,unselectableIds:_.union(y.unDeletableIds,y.unSelectableIds),showColumnsAnyway:!0,permission:y.permissions.salaryHistory,columnWidths:t,listActions:[],showLoader:!0,pagination:!1,listClass:"classic-table",listTopBar:{getMessageForNoOfItemsFound:function(e){return"undefined"!=typeof y.totalDataCount?o.getLocalizedCustomWithVariables("({{number}}) Salary History Record"+(1==y.totalDataCount?"":"s")+" Found",{number:y.totalDataCount}):""},getMessageForNoOfItemsSelected:function(e){return e?o.getLocalizedCustomWithVariables("({{number}}) Salary History Record"+(e>1?"s":"")+" Selected",{number:e}):""}}},y.permissions.salaryHistory.create&&(y.listDefinition.listTopBar.mainActionButton={id:"add-salary-history-button",icon:"add",label:"Add Salary History",onClick:function(){g()}}),y.permissions.auditTrail.read&&(y.listDefinition.listTopBar.iconButtons=[{title:"View Audit Log",icon:"ohrm_view_details_oxd","class":"audit-log-icon",id:"view-audit-logs",onClick:h}]),y.permissions.salaryHistory["delete"]&&(y.listDefinition.listTopBar.onBulkDelete=function(e){m(e)},y.listDefinition.listTopBar.isBulkDeletable=function(e){return 0==_.intersection(e,y.listDefinition.unselectableIds).length});var a,i;y.permissions.auditTrail.read&&(i="col-1"),a=y.permissions.salaryHistory.create?"col-8":"col-11",y.listDefinition.listTopBar.panelClasses={bulkActionPanelClass:a,searchPanelClass:i}}function m(e){e.length>0&&r.showDeleteConfirmationModal("You are about to delete the history event(s) permanently. This may affect the employee's current compensation. Are you sure you want to continue?").then(function(t){t===!0&&p(e)})}function u(e,t,a){var i="";return e&&(i=l.isNumber(e)?l.formatCurrencyValue(e,t,a):o.getLocalizedCustom(e)),i}function p(e){var a=e.length;if(a>0){var n=[];e.forEach(function(e,t){n.push(e.split("_")[0])});var l="employees/"+y.employee.empNumber+"/salary/history";i.call(l,"DELETE",{data:n}).then(function(e){t.$broadcast("updateSalaryValues"),o.showLocalizedToast("deleteSuccess")},function(e){o.errorToast(e.data.message)})}}function f(e){y.editAction&&y.editAction(e)}function g(){y.editAction(0)}function h(){return!y.isShowAuditLogModalOpened&&(y.isShowAuditLogModalOpened=!0,void r.showModal("app/core/modal/oxd_modal_with_list.html","OxdModalWithListController","modal",{listData:y.auditLogs,listDefinition:s.getAuditLogListDefinition({read:y.permissions.auditTrail.read}),title:"Audit Logs",modalSizeClass:"modal-xl"}).then(function(){y.isShowAuditLogModalOpened=!1}))}function v(e){return e?Math.round(e)+"%":""}var y=this;y.unSelectableIds=y.unSelectableIds?y.unSelectableIds:[],y.unDeletableIds=y.unDeletableIds?y.unDeletableIds:[],y.totalDataCount=y.history.length-y.unSelectableIds.length,y.formatTextLable=v,c()}angular.module("app.pim").directive("pimSalaryDetailedHistory",e),t.$inject=["$scope","$rootScope","loader","webservice","localizedMessages","dateService","numberService","modalHelperService","pimHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w,S){function D(){var e=b.getTabsForPimSalaryPage(oe.permissions,ne);oe.tabs=e.tabs,oe.currentTabKey=e.current}function T(e){oe.currentTabKey=e.key}function x(){oe.loading=!0,oe.self=r.emp_number===a.empNumber,oe.permissions.salary.read||oe.permissions.attachments.read||oe.permissions.customFields.read||oe.permissions.salaryHistory.read||(oe.loading=!1,t.go("403"));var i={employee:s.getEmployee(!0)};return oe.permissions.auditTrail.read&&(i.auditModules=o.call("auditModules","GET",[],{},void 0,!0)),d.all(i).then(function(a){oe.employee=a.employee,oe.auditSectionIds=oe.permissions.auditTrail.read?S.getAuditTrailSectionIds(a.auditModules.data.data,["SalaryRecord","SalaryCustomField"]):[];var i={fieldConfiguration:g.getFieldConfigurationByRoute(t.current.name,"PimSalary",oe.employee.locationId),customFieldConfiguration:g.getCustomFieldConfigurationByRoute(t.current.name,oe.employee.locationId).then(function(e){oe.customFieldConfiguration=e})};d.all(i).then(function(t){oe.fieldConfiguration=t.fieldConfiguration,oe.wizardMode&&0===oe.fieldConfiguration.length&&(oe.permissions.salary={read:!1,create:!1,update:!1,"delete":!1}),(oe.permissions.salary.read||oe.permissions.salaryHistory.read)&&(F(!0),e.$watch("vm.salaryComponents",E,!0))})["finally"](function(){oe.loading=!1})})}function F(e,t){oe.loading=!0;var i=t?{asOf:t}:{};d.all({salary:b.getSalaryRecord(oe.employeeNumber,!0,i)}).then(function(e){oe.salaryRecord=e.salary.SalaryRecord,oe.employeeSalaryComponents=e.salary.EmployeeSalaryComponent,oe.futureChanges=e.salary.futureChanges,Q().then(function(e){oe.salaryModel=b.getFormValuesFromSalaryRecord(oe.salaryRecord,oe.formData,oe.eeoConfig,oe.wizardMode),oe.salaryComponents=b.getMergedEmployeeSalaryComponentValues(oe.allComponents,oe.employeeSalaryComponents,oe.self,!1);for(var t=0;t<oe.salaryComponents.length;t++)"1"==oe.salaryComponents[t].id&&(oe.salaryComponents[t].name=h.instant(oe.salaryComponents[t].name));R(),oe.loading=!1})}),e&&L(a.empNumber)}function k(e){oe.activeComponentIds=[],_.forEach(e,function(e){oe.activeComponentIds.push(e.id)})}function E(e,t){oe.calculatedSalaryValues=b.getCalculatedSalaryValues(oe.salaryComponents)}function I(){return oe.salaryModel.currency&&oe.salaryModel.currency.currency_id?oe.indexedCurrencyData[oe.salaryModel.currency.currency_id]:null}function A(e){return b.formatSalaryValue(e,I(),!0)}function M(e){return b.hasComponentsForType(oe.salaryComponents,e,!1)}function L(e){oe.permissions.salaryHistory.read&&!oe.wizardMode&&(oe.showDetailedHistorySection=!1,o.call("employees/"+e+"/salary/history","GET",{}).then(function(e){oe.detailedHistory=P(e.data.data),S.fetchAuditLogs(a.empNumber,oe.permissions.auditTrail,oe.auditSectionIds,oe.wizardMode).then(function(e){oe.auditLogs=e,oe.showDetailedHistorySection=!0})}))}function P(e){oe.unSelectableIds=[];var t,a,i,o,n=[],l={pay_grade_name:{title:"Pay Grade",value:null},currency_name:{title:"Currency",value:null},eeo_paygrade_name:{title:"Pay Band",value:null},comment:{title:"Comments",value:null}};return _.forEach(e,function(e){t=0,e=N(e),i=e.id,_.forEach(l,function(r,s){a=e[s]?e[s]:null,a!=r.value&&(o=O(e,{history_id:s,name:r.title,amount:e[s],old_amount:r.display_value},t,i),n.splice(t,0,o),t++),l[s].value=e[s]?e[s]:null,l[s].display_value=e[s]}),e.components&&_.forEach(e.components,function(a){o=O(e,a,t,i),n.splice(t,0,b.addPercentageChangeToHistoryRecord(o)),t++}),0===t&&n.splice(t,0,e)}),n}function N(e){return e.is_grayed_out="1"==e.event.is_past_event,"1"==e.event.is_past_event&&(e.tooltip=i.getLocalizedCustom("Past Event")),e}function O(e,t,a,o){var n=0==a?e:{CurrencyType:e.CurrencyType};if(t.hasOwnProperty("isDeleted")&&t.isDeleted){var l=t.type==oe.earningsType?"Past Earning":"Past Deduction";t.name=t.name+" ("+i.getLocalizedCustom(l)+")"}return angular.merge(n,t),n.id=o+"_"+t.history_id,a>0&&oe.unSelectableIds.push(n.id),n}function R(){var e=oe.formData,t=e.currencies;if(oe.salaryModel.minValue="",oe.salaryModel.maxValue="",oe.salaryModel.payGrade&&(t=b.getLocalizedCurrencyTitleMap(oe.salaryModel.payGrade.currencies),oe.salaryModel.payGrade&&(oe.salaryModel.payGrade.currencies.length>1||1==oe.salaryModel.payGrade.currencies.length&&""!=oe.salaryModel.payGrade.currencies[0].value)?t=b.getLocalizedCurrencyTitleMap(oe.salaryModel.payGrade.currencies):oe.salaryModel.payGrade&&oe.salaryModel.payGrade.currencies.length<=1&&(t=oe.formData.currencies),oe.salaryModel.currency)){var a=I();oe.salaryModel.minValue=b.formatSalaryValue(oe.salaryModel.currency.minSalary,a,!0),oe.salaryModel.maxValue=b.formatSalaryValue(oe.salaryModel.currency.maxSalary,a,!0)}oe.salaryFormSchema={type:"object",title:"Salary",readonly:!oe.permissions.salary.update,properties:{payGrade:{title:"Pay Grade",type:"object"},currency:{title:"Currency",type:["null","object"]},minValue:{title:"Minimum",type:"string"},maxValue:{title:"Maximum",type:"string"},comment:{title:"Comments",type:["null","string"],maxLength:250}},required:[]},oe.salaryForm=[{type:"row",items:[z(e),j(t),G("Minimum","minValue"),G("Maximum","maxValue")]}],te(),ae(),ie()}function z(e){var t={type:"select",htmlClass:"col-4",titleMap:e.payGrades,key:"payGrade",onChange:B};return!oe.snapshotAsOf&&oe.futureChanges&&oe.futureChanges.hasOwnProperty("pay_grade_id")&&(t.labelIcon="ohrm_future_date",t.labelHint=V(oe.futureChanges.pay_grade_id)),t}function j(e){var t={type:"select",htmlClass:"col-4",titleMap:e,key:"currency",onChange:q};return!oe.snapshotAsOf&&oe.futureChanges&&oe.futureChanges.hasOwnProperty("currency_id")&&(t.labelIcon="ohrm_future_date",t.labelHint=V(oe.futureChanges.currency_id)),t}function V(e){var t=e.value,a=e.effective_date,o=!e.hasOwnProperty("changed")||e.changed?"Will change to {{value}} effective from {{date}}":"Will be effective from {{date}}";return i.getLocalizedCustomWithVariables(o,{value:t?S.escapeText(t):"---",date:f.toLocalizedDate(a)})}function G(e,t){return{type:"text",title:e,readonly:!0,htmlClass:"col-2",key:t,condition:"model.currency && model.payGrade"}}function B(e){oe.salaryModel.currency="","undefined"==typeof e&&(oe.salaryModel.payGrade=""),e&&e.currencies.length>0&&(oe.salaryModel.currency=""),R()}function q(t){"undefined"==typeof t&&(oe.salaryModel.currency=""),R(),1==oe.salaryDetailsForm.component_1.$dirty&&e.$broadcast("schemaFormValidate",oe.salaryDetailsForm.$name)}function H(t,a,i){C.numericMinMaxValidation.validator(t,a,i)?e.$broadcast("schemaForm.error.annualBasicPayment","amountValidationWhenSubmit",!0):e.$broadcast("schemaForm.error.annualBasicPayment","amountValidationWhenSubmit",C.numericMinMaxValidation.message(a,i))}function U(){oe.snapshotAsOf=null,oe.permissions.salary.update=oe.editable,F()}function W(){var t=oe.salaryDetailsForm;if(!t)return d.resolve(!0);if(e.$broadcast("schemaFormValidate",t.$name),oe.wizardMode&&H(oe.salaryModel.annualBasicPayment,oe.salaryModel.currency.minSalary,oe.salaryModel.currency.maxSalary),t.$valid&&(e.$broadcast("schemaFormValidate",t.$name),t.$valid)){var a=b.getModifiedFields(oe.salaryRecord,oe.salaryModel,oe.salaryComponents,oe,oe.wizardMode,{});if(oe.wizardMode)return Z({},a);if(0!==Object.keys(a).length)return K(null,a);n.info(i.getLocalizedCustom("No Changes to Save"),null)}}function Y(e){var t=oe.snapshotAsOf?oe.snapshotAsOf:new Date;p.showModal("app/core/modal/switch-to-snapshot.html","SwitchToSnapshotController","modal",{defaultDate:new Date(moment.utc(t).format("l LT")),clickEvent:e}).then(function(e){"object"==typeof e&&(oe.snapshotAsOf=f.toStandardDate(e),oe.snapshotAsOfLocalized=i.getLocalizedCustomWithVariables("Snapshot as Of: {{date}}",{date:f.toLocalizedDate(oe.snapshotAsOf)}),oe.permissions.salary.update=!1,F(!1,oe.snapshotAsOf))})}function J(e){for(var t=[],a=[],o=!e&&oe.eeoConfig||e&&oe.salaryModel.event==oe.eeo_changed_event_id,n=0;n<oe.events.length;n++){var l=oe.events[n].id,r={value:l,name:i.getLocalizedCustom(oe.events[n].name)};(l!=oe.eeo_changed_event_id||o)&&(t.push(r),a.push(l))}return{titleMap:t,"enum":a}}function K(e,t){var a=t?Object.keys(t):void 0,o=void 0!==a&&S.findOne(a,["eeoPayGrade"])?oe.eeo_changed_event_id:oe.salary_increment_event_id,l={close:function(){}};if(!oe.isConfirmChangesModalOpened){oe.isConfirmChangesModalOpened=!0;var r=angular.copy(oe.salaryComponents);p.showModal("app/pim/salary/update-compensation-modal.html","UpdateCompensationModalController","modal",{title:"Salary",empNumber:oe.employee.empNumber,formData:oe.formData,eeoConfig:oe.eeoConfig,eeoPayGrades:oe.eeoPayGrades,salaryModel:oe.salaryModel,components:r,calculatedSalaryValues:oe.calculatedSalaryValues,events:J(e),addMode:0===e,historyId:e&&e>0?e:null,defaultEvent:o,modalFunctions:l}).then(function(e){if(oe.isConfirmChangesModalOpened=!1,e!==!1){var t=e.salaryValues;0===Object.keys(t).length?(oe.calculatedSalaryValues=b.getCalculatedSalaryValues(oe.salaryComponents),n.info(i.getLocalizedCustom("No Changes to Save"),null)):Z(e.confirmationDetails,t)}else oe.calculatedSalaryValues=b.getCalculatedSalaryValues(oe.salaryComponents)})}}function Z(e,t){for(var a={},o=[],r=Object.keys(t),s=0;s<r.length;s++){var c=t[r[s]];0===r[s].lastIndexOf("component_",0)?oe.activeComponentIds.includes(c.id)&&o.push(c):"payGrade"===r[s]?a.pay_grade_id=c.value?c.value.id:null:"currency"===r[s]?a.currency_id=c.value?c.value.currency_id:null:"comment"===r[s]?a.comment=c.value:"eeoPayGrade"===r[s]?a.eeo_paygrade=c.value?c.value:null:"effectiveDate"===r[s]?a.effective_date=c.value?c.value:null:"annualBasicPayment"===r[s]&&(a.annual_basic_payment=c.value?c.value:null)}return Object.keys(e).length>0&&(e.id&&(a.id=e.id),a.effective_date=e.effective_date,a.event_id=e.event),a=l.formatDates(a,["effective_date"]),a.components=o,b.updateSalaryRecord(oe.employee.empNumber,a).then(function(e){oe.wizardMode||(void 0==e||e.sucess?i.showLocalizedToast("saveSuccess"):i.errorToast(e.message)),F(!0)},function(e){n.error(i.getLocalizedCustom("Failed to Save"))})}function Q(){var e={salaryEvents:o.call("pimHistoryEvents","GET",[],{filter:{type:oe.salaryEventTypeId}},void 0),components:o.call("salaryComponents","GET",[],{}),payGrade:o.call("payGrades","GET",[],{}),currency:o.call("currencyType","GET",[],{}),eeoPayGrades:o.call("eeoEmpPayGrades","GET",[],{}),organization:o.call("organization","GET",[],{}),locations:o.call("locations","GET",[],{})};return d.all(e).then(function(e){oe.events=e.salaryEvents.data.data,oe.allComponents=e.components.data.data,k(oe.allComponents),oe.formData={payGrades:X(e.payGrade.data.data,e.currency.data.data),currencies:ee(e.currency.data.data),eeoPayGrades:b.getLocalizedEEOPayGradeTitleMap(e.eeoPayGrades.data.data)},oe.formData.indexedCurrencyData=oe.indexedCurrencyData,oe.eeoPayGrades=l.getEnumAndTitleMapForSelect(e.eeoPayGrades.data.data);var t=!1;if(oe.employee.locations)t=1==oe.employee.locations.eeo_applicable;else if(oe.employee.locationId){var a=e.locations.data.data.filter(function(e){return e.id==oe.employee.locationId&&1==e.eeo_applicable});a.length>0&&(t=!0)}oe.eeoConfig=t&&1==e.organization.data.data.eeo_applicable,oe.eeoSystemWideEnable=1==e.organization.data.data.eeo_applicable})}function X(e,t){for(var a=[],o=0;o<e.length;o++){var n=e[o],l=[];if(angular.isArray(n.PayGradeCurrency)){for(var r=0;r<n.PayGradeCurrency.length;r++)l.push({value:n.PayGradeCurrency[r],name:n.PayGradeCurrency[r].CurrencyType.currency_name});if(0==n.PayGradeCurrency.length)for(var r=0;r<t.length;r++)l.push({value:t[r],name:t[r].currency_name})}n.currencies=l,a.push({value:n,name:i.getLocalizedCustom(e[o].name)})}return a}function ee(e){var t=[];oe.indexedCurrencyData={};for(var a=0;a<e.length;a++)t.push({value:e[a],name:i.getLocalizedCustom(e[a].currency_name)}),oe.indexedCurrencyData[e[a].currency_id]=e[a];return t}function te(){if(oe.eeoConfig){oe.salaryFormSchema.properties.eeoPayGrade={title:"EEO Pay Band",type:"string","enum":oe.eeoPayGrades["enum"]};var e={type:"select",htmlClass:"col-4",titleMap:b.getLocalizedEEOPayGradeTitleMap(oe.eeoPayGrades.titleMap),key:"eeoPayGrade"};!oe.snapshotAsOf&&oe.futureChanges&&oe.futureChanges.hasOwnProperty("eeo_paygrade")&&(e.labelIcon="ohrm_future_date",e.labelHint=V(oe.futureChanges.eeo_paygrade)),oe.salaryForm[0].items.push(e)}}function ae(){function t(e){return"object"==typeof e?f.toStandardDate(oe.salaryModel.effectiveDate):e}if(oe.wizardMode){var a="",o="";"undefined"!=typeof oe.salaryModel.currency&&(a=oe.salaryModel.currency.minSalary,o=oe.salaryModel.currency.maxSalary),oe.salaryRecord&&oe.salaryRecord.annual_basic_payment&&(oe.salaryModel.annualBasicPayment=oe.salaryRecord.annual_basic_payment),oe.salaryFormSchema.properties.annualBasicPayment={title:"Annual Basic Payment(amount)",type:"string",minimum:a,maximum:o},oe.salaryFormSchema.required.push("annualBasicPayment"),oe.salaryForm[0].items.push({type:"text",htmlClass:"col-4",key:"annualBasicPayment",validationMessage:{302:i.getLocalizedCustom("Required"),numberValidation:C.salaryComponentAmountValidation.message,numericMinMaxValidation:C.numericMinMaxValidation.message(a,o)},$validators:{numberValidation:C.salaryComponentAmountValidation.validator,numericMinMaxValidation:function(e){return C.numericMinMaxValidation.validator(e,a,o)}},onChange:function(){e.$broadcast("schemaForm.error.annualBasicPayment","amountValidationWhenSubmit",!0)}}),oe.salaryModel.effectiveDate=oe.salaryRecord&&oe.salaryRecord.effective_date?oe.salaryRecord.effective_date:new Date,oe.salaryFormSchema.properties.effectiveDate={title:"Effective From",type:["null","object"]},oe.salaryFormSchema.required.push("effectiveDate"),oe.salaryForm[0].items.push({type:"date",htmlClass:"col-4",key:"effectiveDate",defaultDate:oe.salaryModel.effectiveDate?t(oe.salaryModel.effectiveDate):null,validationMessage:{302:i.getLocalizedCustom("Required")}}),oe.salaryRecord&&oe.salaryRecord.comment&&(oe.salaryModel.comment=oe.salaryRecord.comment),y.updateFormFields(oe.salaryFormSchema,oe.salaryForm,oe.fieldConfiguration)}}function ie(){var e={type:"textarea",htmlClass:"col-4",key:"comment",validationMessage:{201:C.textLengthExceedValidation.message(oe.salaryFormSchema.properties.comment.maxLength)}};!oe.snapshotAsOf&&oe.futureChanges&&oe.futureChanges.hasOwnProperty("comment")&&(e.labelIcon="ohrm_future_date",e.labelHint=V(oe.futureChanges.comment)),oe.salaryForm.push({
type:"row",items:[e]})}var oe=this;oe.self=!1,oe.wizardMode=t.current.data.wizardMode,oe.customFieldService=v,oe.employeeService=g,oe.customFieldScreen="salary",oe.editable=!1,oe.permissions={},oe.employee="",oe.salaryModel={},oe.eeoPayGrades={},oe.salaryRecord=null,oe.eeoConfig=!1,oe.snapshotAsOf=null,oe.snapshotAsOfLocalized=null,oe.earningsType=w.SALARY_EARNING_TYPE,oe.deductionsType=w.SALARY_DEDUCTION_TYPE,oe.componentTypes=[{type:oe.earningsType,totalLabel:"Gross Pay"},{type:oe.deductionsType,totalLabel:"Total Deductions"}],oe.formData=null,oe.showDetailedHistory=!0,oe.history=[],oe.employeeNumber=a.empNumber,oe.salaryEventTypeId=2,oe.salary_increment_event_id=10,oe.eeo_changed_event_id=11,oe.eeoSystemWideEnable="",oe.readOnly=!0,oe.showDetailedHistorySection=!1;var ne="currentSalaryTabKey";$(window).on("beforeunload",function(){localStorage.setItem(ne,oe.currentTabKey)}),oe.exitSnapshotView=U,oe.onSubmitSalaryDetails=W,oe.openSwitchToSnapshotPopover=Y,oe.showUpdateCompensationModal=K,oe.isConfirmChangesModalOpened=!1,oe.getCurrencyObject=I,oe.getFormattedSalaryValue=A,oe.hasComponentsForType=M,oe.tabClicked=T,oe.unSelectableIds=[],oe.getLocalizedExitSnapshotViewTooltip=function(){return i.getLocalizedCustom("Exit Snapshot View")},e.$on("pim.save",function(e,t){var a=W();a?e.savePromise=a:e.preventDefault()}),e.$on("pim.validate",function(t){oe.salaryDetailsForm&&(e.$broadcast("schemaFormValidate",oe.salaryDetailsForm.$name),oe.salaryDetailsForm.$valid||t.preventDefault())}),e.$on("updateSalaryValues",function(){x()}),o.login().then(function(){oe.self=r.emp_number===a.empNumber;var e=["salary_history_details","salary_history","salary_attachment","employee_salary_documents","salary_custom_fields","admin_audit_trail"];g.getDatagroupPermissions(a.empNumber,e,oe.self).then(function(e){oe.permissions={salary:e.salary_history_details,salaryHistory:e.salary_history,salaryDocuments:e.employee_salary_documents,attachments:e.salary_attachment,customFields:e.salary_custom_fields,auditTrail:e.admin_audit_trail},oe.editable=oe.permissions.salary.update,D(),x()})})}angular.module("app.pim").controller("PimSalaryController",e),e.$inject=["$scope","$state","$stateParams","localizedMessages","webservice","toast","formHelper","$rootScope","pimTabs","datagroupPermissions","$q","LOGIN","ModalService","modalHelperService","dateService","employeeService","$translate","customFieldService","wizardService","salaryService","formValidationHelper","salaryConstants","pimHelper"]}(),function(){"use strict";function e(){function e(e,t,a,i){}var a={restrict:"E",templateUrl:"app/pim/salary/salary-amount.html",scope:{component:"=",currency:"=",permissions:"=",form:"=",min:"=",max:"=",mode:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return a}function t(e,t,a,i,o){function n(){if(m.maxLimit&&m.minLimit)return i.getLocalizedCustomWithVariables("Please enter a value between {{minimum}} and {{maximum}}",{minimum:a.formatSalaryValue(m.minLimit,m.currency),maximum:a.formatSalaryValue(m.maxLimit,m.currency)});if(!m.minLimit&&m.maxLimit){var e="3"===m.component.value_type&&m.component.value&&m.component.value.endsWith("%")?1e3:m.maxLimit;return m.validationMessage?m.validationMessage:i.getLocalizedCustomWithVariables("Please enter a value less than or equal to {{maximum}}",{maximum:a.formatSalaryValue(e,m.currency)})}return m.minLimit&&!m.maxLimit?i.getLocalizedCustomWithVariables("Please enter a value greater than or equal to {{minimum}}",{minimum:a.formatSalaryValue(m.minLimit,m.currency)}):void 0}function l(){return m.maxLimit="2"===m.component.value_type?1e3:999999999999999,"1"!==m.component.value_type||m.component.isEditable||(m.maxLimit=m.max&&m.max<=m.maxLimit?m.max:m.maxLimit),m.maxLimit}function r(){return m.minLimit=null,"1"!==m.component.value_type||m.component.isEditable||(m.minLimit=m.min),m.minLimit}function s(){return"2"===m.component.value_type?o.PERCENTAGE_REGEX:"1"===m.component.value_type?m.numberRegex:m.numberOrPercentRegex}function c(){m.numberRegex=a.getNumberRegex(m.currency,!1),m.numberOrPercentRegex=a.getNumberRegex(m.currency,!0)}function d(){t.$broadcast("changeSalaryAmount")}var m=this;m.nextValueHint=null,m.minLimit=null,m.getMaxMinValidationString=n,m.getPattern=s,m.valueChanged=d,m.getMaxLimit=l,m.getMinLimit=r,c(),e.$on("schemaFormValidate",function(t){e.$applyAsync(function(){m.form["component_"+m.component.id].$setDirty()})}),e.$watch("vm.currency",function(e,t){c()})}angular.module("app.pim").directive("salaryAmount",e),t.$inject=["$scope","$rootScope","salaryService","localizedMessages","salaryConstants"]}(),function(){"use strict";function e(){function e(e,t,a,i){}var a={restrict:"E",scope:{components:"=",calculatedSalaryValues:"=",permissions:"=",form:"=",min:"=",max:"=",oldCurrency:"=",currency:"=",changedFieldsOnly:"=",type:"@",totalLabel:"@",isSnapshot:"@"},link:e,controller:t,templateUrl:function(e,t){var a=t.template?t.template:"salary-components-table.html";return"app/pim/salary/"+a},controllerAs:"vm",bindToController:!0};return a}function t(e,t,a,i,o){function n(e){var t=f.calculatedSalaryValues.componentMeta[e].difference;return t?Math.round(t):""}function l(e){return"2"===e.value_type?e.oldValue:t.formatSalaryValue(e.oldValue,f.oldCurrency,!0)}function r(e){if(e.hasOwnProperty("next_value")&&!f.isSnapshot){var i=e.next_value,n=!i.hasOwnProperty("changed")||i.changed?"Will change to {{value}} ({{currencyCode}}) effective from {{date}}":"Will be effective from {{date}}";return a.getLocalizedCustomWithVariables(n,{value:t.formatSalaryValue(i.amount,i,!0),currencyCode:i.currency_code?i.currency_code:a.getLocalizedCustom("No Currency"),date:o.toLocalizedDate(i.effective_date)})}return!1}function s(){var e=f.type===i.SALARY_EARNING_TYPE?f.calculatedSalaryValues.summary.earnings:f.calculatedSalaryValues.summary.deductions;return e=e?e:0,t.formatSalaryValue(e,f.currency,!0)}function c(e){return t.formatSalaryValue(f.calculatedSalaryValues.componentMeta[e].valueAsAmount,f.currency,!0)}function d(e,a){return t.isComponentVisible(e,a,f.changedFieldsOnly)}function m(e){return f.permissions.update&&!e.isDeleted}function u(e){return n(e)<0}function p(e){return n(e)>0}var f=this;f.getDifference=n,f.getFormattedOldValue=l,f.getNextValueHint=r,f.getTotalAmount=s,f.getValueAsAmount=c,f.isComponentVisible=d,f.isComponentEditable=m,f.isNegative=u,f.isPositive=p,f.deletedSuffix=f.type===i.SALARY_EARNING_TYPE?"Past Earning":"Past Deduction"}angular.module("app.pim").directive("salaryComponents",e),t.$inject=["$scope","salaryService","localizedMessages","salaryConstants","dateService"]}(),function(){"use strict";angular.module("app.pim").constant("salaryConstants",{SALARY_EARNING_TYPE:"1",SALARY_DEDUCTION_TYPE:"2",SALARY_TAB_MAIN:"main",SALARY_TAB_HISTORY:"history",SALARY_TAB_ATTACHMENTS:"attachments",PERCENTAGE_REGEX:"^\\d+(\\.\\d+)?$"})}(),function(){"use strict";function e(e,t,a,i,o,n){function l(e){if(e.percentage={"class":"right percentage-value"},o.isNumber(e.amount)&&o.isNumber(e.old_amount)){var t=100*(e.amount-e.old_amount)/e.old_amount;e.percentage.name=t,e.percentage.icon=t>0?"ohrm_increase":"ohrm_decrease",e.percentage.iconClass=t>0?"positive-text":"negative-text"}return e}function r(e,t){var a=e&&null!==e.decimals?e.decimals:2,i=n.languageSettings.decimal_separator,o=n.languageSettings.thousand_separator;i="undefined"==typeof i||null===i?".":i,o="undefined"==typeof o||null===o?",":o;var l="^(\\d+|\\d{1,3}(\\"+o+"\\d{3})*)";return l=a>0?l+"(\\"+i+"\\d{1,"+a+"})?":l,l=t?l+"%?":l,new RegExp(l+"$")}function s(e,t){if(e){var a=t&&t.currency_symbol?t.currency_symbol:"",i=n.languageSettings.decimal_separator,o=n.languageSettings.thousand_separator;return i="undefined"==typeof i||null===i?".":i,o="undefined"==typeof o||null===o?",":o,e=e.replaceAll(a,""),e=e.replaceAll(o,""),e.replaceAll(i,".")}return e}function c(e,t,a){var i=t?t.decimals:2,n=a&&t?t.currency_symbol:"";return e?o.formatCurrencyValue(e,i,n):""}function d(e){var t=0,a=0,o=0,n=0,l=0,r=0,s={};if(angular.isArray(e)){for(var c=0;c<e.length;c++)"1"===e[c].id&&(t=parseFloat(e[c].value),a=parseFloat(e[c].oldValue));for(var d=0;d<e.length;d++){var u=e[d],p=0,f=0,g=0;u.value&&(p=m(u.value,t,u.value_type),u.type===i.SALARY_DEDUCTION_TYPE?(n+=p,"1"===u.is_part_of_total_payable&&(l-=p)):(o+=p,"1"===u.is_part_of_total_payable&&(l+=p)),"1"===u.is_cost_to_company&&(r+=p)),u.oldValue&&(f=m(u.oldValue,a,u.value_type)),g=f&&f>0?100*(p-f)/f:"",s[u.id]={id:u.id,value:u.value,valueAsAmount:p,difference:g}}return{componentMeta:s,summary:{totalPayment:l,costToCompany:r,earnings:o,deductions:n}}}}function m(e,t,a){var i=e.trim(),o=parseFloat(i);return("2"===a||"3"===a&&"%"===i.substr(-1))&&(o=t*o/100),o}function u(e,t,a,i){var o=e.pay_grade_id,n=e.currency_id,l=null,r=null;o?(l=g(t,o),r=l.PayGradeCurrency&&l.PayGradeCurrency.length>0?h(l.PayGradeCurrency,n):v(t.currencies,n)):n&&(r=v(t.currencies,n));var s={event:e.event_name,comment:e.comment};return s.payGrade=null===l?"":l,s.currency=null===r?"":r,s.eeoPayGrade=a&&e.eeo_paygrade?e.eeo_paygrade:"",s.effectiveDate=e.effective_date?e.effective_date:"",i&&(s.annualBasicPayment=e.annual_basic_payment?e.annual_basic_payment:""),s}function p(e){if(e instanceof Array)for(var t=0;t<e.length;t++)e[t].name=a.getLocalizedCustom(e[t].name);return e}function f(e){for(var t=0;t<e.length;t++)e[t].name=a.getLocalizedCustomWithNumbers(e[t].name);return e}function g(e,t){for(var a=0;a<e.payGrades.length;a++)if(t===e.payGrades[a].value.id)return e.payGrades[a].value;return null}function h(e,t){for(var a=0;a<e.length;a++)if(t===e[a].currency_id)return e[a];return null}function v(e,t){for(var a=0;a<e.length;a++)if(t===e[a].value.currency_id)return e[a].value;return null}function y(e,t,a,i,o){e=b(e,t);for(var n=0;n<e.length;n++){var l=e[n],r=null;l.oldValue="";for(var s=0;s<t.length;s++)if(l.id===t[s].salary_component_id){r=t[s],l.oldValue=0==r.value?"":r.value,l.value=l.hasOwnProperty("value")&&i===!1?l.value:r.value,l.value=0==l.value?"":l.value,r.hasOwnProperty("next_value")&&(l.next_value=r.next_value);break}if(i!==!1){l.oldValue="";for(var c=0;c<i.length;c++)if(l.id===i[c].salary_component_id){l.oldValue=0==i[c].value?"":i[c].value;break}}r||l.value||(l.value="")}if(a){for(var d=[],c=0;c<e.length;c++)""!==e[c].value&&d.push(e[c]);return d}return e}function b(e,t){for(var a,i=0;i<t.length;i++)if(t[i].value||t[i].hasOwnProperty("next_value")){a=!1;for(var o=0;o<e.length;o++)if(e[o].id===t[i].salary_component_id){a=!0;break}a||e.push(t[i])}return e}function C(e,t,i,o,n,l){var r=u(e,o.formData,o.eeoConfig,n);if(r.payGrade!==t.payGrade&&(l.payGrade={label:"Pay Grade",type:"text",value:t.payGrade,displayValue:t.payGrade?t.payGrade.name:"["+a.getLocalizedCustom("Removed")+"]"}),o.eeoConfig&&r.eeoPayGrade!==t.eeoPayGrade&&(l.eeoPayGrade={label:"EEO Pay Band",type:"text",value:t.eeoPayGrade,displayValue:t.eeoPayGrade?o.formData.eeoPayGrades[t.eeoPayGrade-1].name:"["+a.getLocalizedCustom("Removed")+"]"}),n&&(r.effectiveDate!==t.effectiveDate&&(l.effectiveDate={label:"Effective From",type:"date",value:t.effectiveDate}),r.annualBasicPayment!==t.annualBasicPayment&&(l.annualBasicPayment={label:"Annual Basic Payment(amount)",type:"text",value:t.annualBasicPayment})),r.currency!==t.currency){var s="["+a.getLocalizedCustom("Removed")+"]";t.currency&&(s=t.currency.currency_name?t.currency.currency_name:t.currency.CurrencyType.currency_name),l.currency={label:"Currency",type:"text",value:t.currency,displayValue:s}}var c=r.comment?r.comment:"",d=t.comment?t.comment:"";if(c!==d){var m=t.comment;l.comment={label:"Comment",type:"text-area",value:t.comment,displayValue:m}}return l=n?_(l,e,i):S(l,i)}function w(e,a,i){var o=a!==!0,n="employees/"+e+"/salary";return t.call(n,"GET",[],i,void 0,o).then(function(e){return e.data.data})}function _(e,t,a){var i=[];t.components&&t.components.length>0&&(i=t.components);for(var o=1;o<a.length;o++){for(var n=a[o],l="",r=0;r<i.length;r++)n.id==i[r].id&&(l=i[r].value);e["component_"+n.id]={id:n.id,value:l}}return e}function S(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.value=0==i.value?"":i.value;var o=i.oldValue?i.oldValue:"",n=i.value?i.value:"";n!=o&&(e["component_"+i.id]={label:i.name,type:"text",value:i.id,displayValue:i.value})}return e}function D(e,t){var a=[],o=null;(e.salary.read||e.customFields.read)&&(a.push({key:i.SALARY_TAB_MAIN,title:"Compensation","class":"card-title-text"}),o=i.SALARY_TAB_MAIN),e.salaryHistory.read&&(a.push({key:i.SALARY_TAB_HISTORY,title:"Salary History","class":"card-title-text"}),o=o?o:i.SALARY_TAB_HISTORY),e.attachments.read&&(a.push({key:i.SALARY_TAB_ATTACHMENTS,title:"Attachments","class":"card-title-text ",itemClass:"float-right",icon:"ohrm_attachments"}),o=o?o:i.SALARY_TAB_ATTACHMENTS);var n=localStorage.getItem(t);return n&&(o=n,localStorage.removeItem(t)),{tabs:a,current:o}}function T(e,t,a){if(!angular.isArray(e))return!1;for(var i=0;i<e.length;i++)if(x(e[i],t,a))return!0;return!1}function x(e,t,a){var i=e.value?e.value:0,n=e.oldValue?e.oldValue:0,l=o.isNumber(i)&&o.isNumber(n)?!OhrmBig(i).eq(OhrmBig(n)):i!==n,r=!e.isEditable&&"1"==e.value_type&&!i;return e.type===t&&(!a||l||r)}function F(e,a){return t.call("employees/"+e+"/salary","PATCH",a).then(function(e){return e.data.data})}var k={addPercentageChangeToHistoryRecord:l,getNumberRegex:r,getPlainValue:s,formatSalaryValue:c,getCalculatedSalaryValues:d,getFormValuesFromSalaryRecord:u,getLocalizedCurrencyTitleMap:p,getLocalizedEEOPayGradeTitleMap:f,getMergedEmployeeSalaryComponentValues:y,getModifiedFields:C,getSalaryRecord:w,getTabsForPimSalaryPage:D,hasComponentsForType:T,isComponentVisible:x,updateSalaryRecord:F};return k}angular.module("app.pim").factory("salaryService",e),e.$inject=["$q","webservice","localizedMessages","salaryConstants","numberService","$rootScope"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w,S,D){function T(){ae.calculatedSalaryValues=d.getCalculatedSalaryValues(ae.salaryComponentValues)}function x(){ae.model={event:C?C.toString():"",effective_date:new Date(moment.utc(new Date).format("l LT")),changedFieldsOnly:!ae.addMode,payGrade:g.payGrade,currency:g.currency,comment:g.comment},ae.oldValues={},ae.eeoConfig&&(ae.model.eeoPayGrade=g.eeoPayGrade),ae.historyId&&(ae.model.id=ae.historyId),ae.effectiveDate=c.toStandardDate(ae.model.effective_date),I(!1)}function F(){!ae.baseData&&ae.historyId&&(ae.baseData={model:_.cloneDeep(ae.model),salaryComponentValues:_.cloneDeep(ae.salaryComponentValues)})}function k(e){delete e.model.changedFieldsOnly,e.model.payGrade&&(delete e.model.payGrade.PayGradeCurrency,delete e.model.payGrade.currencies),null===e.model.comment&&delete e.model.comment}function E(){var e={model:_.cloneDeep(ae.model),salaryComponentValues:_.cloneDeep(ae.salaryComponentValues)};return k(ae.baseData),k(e),!angular.equals(ae.baseData,e)}function I(e){ae.loaded=!1,ae.canSave=!0,ae.schema=null,ae.confirmationMessage=!1;var t,a=null==ae.model.effective_date||""==ae.model.effective_date?null:c.toStandardDate(ae.model.effective_date),i=ae.historyId?{historyId:ae.historyId}:{asOf:a};return!ae.historyId&&ae.model.id&&delete ae.model.id,d.getSalaryRecord(ae.empNumber,!0,i).then(function(i){var o=i.EffectiveDate,n=!1;if(ae.historyId){var l=new Date(o);l.setDate(l.getDate()-1),e=e&&o!=a,t=e?a:c.toStandardDate(l),d.getSalaryRecord(ae.empNumber,!0,{asOf:t}).then(function(t){n=e&&t.EffectiveDate==a&&ae.historyId!==t.SalaryRecord.id,ae.salaryComponentValues=e?ae.salaryComponentValues:d.getMergedEmployeeSalaryComponentValues(ae.salaryComponentValues,i.EmployeeSalaryComponent,!1,t.EmployeeSalaryComponent);var o=d.getFormValuesFromSalaryRecord(i.SalaryRecord,ae.formData,ae.eeoConfig,!1);ae.modifiedFields=e?d.getModifiedFields(ae.salaryRecord,o,ae.salaryComponentValues,ae,!1,ae.modifiedFields):d.getModifiedFields(t.SalaryRecord,o,ae.salaryComponentValues,ae,!1,{}),A(t,i,n,e)})}else n=o==a,ae.addMode||(ae.modifiedFields=e?d.getModifiedFields(ae.salaryRecord,ae.model,ae.salaryComponentValues,ae,!1,ae.modifiedFields):d.getModifiedFields(i.SalaryRecord,ae.model,ae.salaryComponentValues,ae,!1,{})),A(i,i,n,e)})["finally"](function(){o.hide()})}function A(e,t,a,i){ae.salaryRecord=t.SalaryRecord,ae.events={},angular.copy(ae.activeEvents,ae.events),a&&(ae.model.id=ae.historyId?ae.historyId:ae.salaryRecord.id,O(ae.salaryRecord,ae.model),ae.confirmationMessage="There is another salary history record for the same date.",ae.confirmationMessage+=ae.historyId?" You can not have two history events on the same date.":" This will update the existing record.",ae.canSave=!ae.historyId&&ae.canSave);var o=d.getFormValuesFromSalaryRecord(ae.salaryRecord,ae.formData,ae.eeoConfig,!1),n=ae.historyId?d.getFormValuesFromSalaryRecord(e.SalaryRecord,ae.formData,ae.eeoConfig,!1):o;M(n,o,e.EmployeeSalaryComponent,t.EmployeeSalaryComponent,i),V(),ae.loaded=!0,F()}function M(e,t,a,i,o){$(e);var n=[];ae.historyId||ae.addMode?(ae.historyId&&(n=P(a),L(e,ae.modifiedFields)),o||(L(t),ae.model.effective_date=ae.addMode?ae.model.effective_date:new Date(moment.utc(t.effectiveDate).format("l LT")),ae.effectiveDate=c.toStandardDate(ae.model.effective_date),N(),n=i)):(n=P(i),L(t,ae.modifiedFields)),ae.salaryComponentValues=d.getMergedEmployeeSalaryComponentValues(ae.salaryComponentValues,n,!1,a),T()}function L(e,t){var a=t?Object.keys(t):[],i=["payGrade","currency","comment","eeoPayGrade"];i.forEach(function(t,i){a.indexOf(t)!==-1||"eeoPayGrade"===t&&!ae.eeoConfig||(ae.model[t]=e[t])})}function P(e){var t=[];if(!e.length)for(var a=0;a<ae.salaryComponentValues.length;a++){var i=ae.salaryComponentValues[a];e.push({salary_component_id:i.id,value:0,amount:0})}var o=Object.keys(ae.modifiedFields);return _.forEach(e,function(e,a){o.indexOf("component_"+e.salary_component_id)===-1&&t.push(e)}),t}function $(e){ae.oldValues.payGrade={id:z(e.payGrade,"id"),name:e.payGrade?e.payGrade.name:""},ae.oldValues.currency={id:z(e.currency,"currency_id"),name:e.currency?e.currency.hasOwnProperty("CurrencyType")?e.currency.CurrencyType.currency_name:e.currency.currency_name:""},ae.oldValues.eeoPayGrade={id:z(e.eeoPayGrade,null),name:e.eeoPayGrade?j(ae.formData.eeoPayGrades,e.eeoPayGrade):""},ae.oldCurrency=ae.oldValues.currency.id?ae.formData.indexedCurrencyData[ae.oldValues.currency.id]:null,ae.oldValues.comment=e.comment}function N(){if(ae.historyId){var e={effective_date:new Date(ae.salaryRecord.effective_date)};e=O(ae.salaryRecord,e),ae.model.event=e.event}}function O(e,t){return t.event||(t.event=e.event_id?e.event_id.toString():""),t.event&&!ae.events["enum"].includes(t.event)&&(ae.events["enum"].push(t.event),ae.events.titleMap.push({value:t.event,name:e.event_name+" ("+a.getLocalizedCustom("Past Event")+")"})),t}function R(){return ae.model.currency&&ae.model.currency.currency_id?ae.formData.indexedCurrencyData[ae.model.currency.currency_id]:null}function z(e,t){return t?e&&e.hasOwnProperty(t)?e[t]:"":e?e:""}function j(e,t){for(var a=0;a<e.length;a++)if(t===e[a].id)return e[a].name;return""}function V(){ae.schema={type:"object",title:"Confirm Changes",properties:{event:{title:"Event",type:"string","enum":ae.events["enum"]},effective_date:{title:"Changes Effective From",type:["null","object"]},changedFieldsOnly:{title:"Show Changed Fields Only",type:"boolean"}},required:["event","effective_date"]},ae.form=[{type:"row",items:[{key:"event",type:"select",htmlClass:"col-6",titleMap:ae.events.titleMap,validationMessage:{302:a.getLocalizedCustom("Required")}},{type:"date",htmlClass:"col-6",key:"effective_date",resetDefaultDate:ae.resetDefaultDate,validationMessage:{302:a.getLocalizedCustom("Required")},onChange:function(e,t){if(e){var a=c.toStandardDate(e);a!==ae.effectiveDate&&(ae.effectiveDate=a,I(!0))}}}]},{type:"row",items:[{type:"switch",key:"changedFieldsOnly",htmlClass:"col-6"}]}],G()}function G(){var e=ae.formData.currencies;ae.model.minValue="",ae.model.maxValue="",ae.model.payGrade&&(e=d.getLocalizedCurrencyTitleMap(ae.model.payGrade.currencies),ae.model.payGrade&&(ae.model.payGrade.currencies.length>1||1==ae.model.payGrade.currencies.length&&""!=ae.model.payGrade.currencies[0].value)?e=d.getLocalizedCurrencyTitleMap(ae.model.payGrade.currencies):ae.model.payGrade&&ae.model.payGrade.currencies.length<=1&&(e=ae.formData.currencies),ae.model.currency&&(ae.model.minValue=ae.model.currency.minSalary,ae.model.maxValue=ae.model.currency.maxSalary)),ae.changesFormSchema={type:"object",title:"Changes",properties:{payGrade:{title:"Pay Grade",type:"object"},currency:{title:"Currency",type:["null","object"]},comment:{title:"Comments",type:["null","string"],maxLength:250}},required:[]},ae.changesForm=[{type:"row",items:[D.getNoteFormElement(a.getLocalizedCustom("Pay Grade"),"changed-field-name col-3",W),D.getNoteFormElement(ae.oldValues.payGrade.name,"old-value col-3",W),D.getIconFormElement("ohrm_change","change-icon",W),D.getSelectFormElement("payGrade","col-4",ae.formData.payGrades,H,!0,W)]},{type:"row",items:[D.getNoteFormElement(a.getLocalizedCustom("Currency"),"changed-field-name col-3",Y),D.getNoteFormElement(ae.oldValues.currency.name,"old-value col-3",Y),D.getIconFormElement("ohrm_change","change-icon",Y),D.getSelectFormElement("currency","col-4",e,U,!0,Y)]}],B(),q()}function B(){ae.eeoConfig&&(ae.changesFormSchema.properties.eeoPayGrade={title:"EEO Pay Band",type:"string","enum":ae.eeoPayGrades["enum"]},ae.changesForm.push({type:"row",condition:J,items:[D.getNoteFormElement(a.getLocalizedCustom("EEO Pay Band"),"changed-field-name col-3"),D.getNoteFormElement(ae.oldValues.eeoPayGrade.name,"old-value col-3"),D.getIconFormElement("ohrm_change","change-icon"),D.getSelectFormElement("eeoPayGrade","col-4",d.getLocalizedEEOPayGradeTitleMap(ae.eeoPayGrades.titleMap),G,!0)]}))}function q(){ae.changesForm.push({type:"row",condition:K,items:[D.getNoteFormElement(a.getLocalizedCustom("Comments"),"changed-field-name col-3"),D.getNoteFormElement(ae.oldValues.comment,"old-value col-3"),D.getIconFormElement("ohrm_change","change-icon"),{type:"textarea",htmlClass:"col-4",key:"comment",hideLabel:!0,validationMessage:{201:l.textLengthExceedValidation.message(ae.changesFormSchema.properties.comment.maxLength)}}]})}function H(e,t){ae.model.currency="","undefined"==typeof e&&(ae.model.payGrade=""),e&&e.currencies.length>0&&(ae.model.currency=""),G()}function U(e,t){"undefined"==typeof e&&(ae.model.currency=""),G(),r.$broadcast("schemaFormValidate",t.$name)}function W(){var e=ae.model.payGrade?ae.model.payGrade.id:"";return!ae.model.changedFieldsOnly||e!=ae.oldValues.payGrade.id}function Y(){var e=ae.model.currency?ae.model.currency.currency_id:"";return!ae.model.changedFieldsOnly||e!=ae.oldValues.currency.id}function J(){var e=ae.model.eeoPayGrade?ae.model.eeoPayGrade:"";return!ae.model.changedFieldsOnly||e!=ae.oldValues.eeoPayGrade.id}function K(){var e=ae.oldValues.comment?ae.oldValues.comment:"",t=ae.model.comment?ae.model.comment:"";return!ae.model.changedFieldsOnly||e!=t}function Z(e){return d.hasComponentsForType(ae.salaryComponentValues,e,ae.model.changedFieldsOnly)}function Q(){var e=ae.salaryConfirmationForm;r.$broadcast("schemaFormValidate"),e.$valid&&X()}function X(){T(),w(ae.historyId&&!E()?{confirmationDetails:ae.model,salaryValues:{}}:{confirmationDetails:ae.model,salaryValues:ee()})}function ee(){var e={},t=d.getModifiedFields(ae.salaryRecord,ae.model,ae.salaryComponentValues,ae,!1,{});return ae.historyId||0!==Object.keys(t).length?(_.forEach(ae.calculatedSalaryValues.componentMeta,function(t){e["component_"+t.id]={id:t.id,value:t.value?t.value:0}}),_.forEach(ae.oldValues,function(t,a){e[a]=ae.model.hasOwnProperty(a)?{value:ae.model[a]}:{}}),e):e}function te(){w(!1)}var ae=this;ae.title=s,ae.loaded=!1,ae.empNumber=m,ae.formData=u,ae.eeoConfig=p,ae.eeoPayGrades=f,ae.salaryComponentValues=h,ae.addMode=y,ae.historyId=b,ae.permissions={update:!0},ae.resetDefaultDate={reset:!1},ae.earningsType="1",ae.deductionsType="2",ae.componentTypes=[{type:ae.earningsType,totalLabel:"Gross Pay"},{type:ae.deductionsType,totalLabel:"Total Deductions"}],ae.baseData=!1,ae.save=Q,ae.cancel=te,ae.activeEvents=v,ae.calculateSalaryValues=T,ae.getCurrencyObject=R,ae.hasComponentsForType=Z,r.$on("changeSalaryAmount",function(){T()}),S&&(S.close=w),x()}angular.module("app.pim").controller("UpdateCompensationModalController",e),e.$inject=["logger","webservice","localizedMessages","$q","loader","$timeout","formValidationHelper","$scope","title","dateService","salaryService","empNumber","formData","eeoConfig","eeoPayGrades","salaryModel","components","events","addMode","historyId","defaultEvent","close","modalFunctions","pimHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b){function C(){var e=[];e.push(i.call("socialMediaTypes","GET",[],{})),a.all(e).then(function(e){x.socialMediaTypes=e[0].data.data,x.socialMediaTypesEnumAndTitleMap=g.getEnumAndTitleMapForSelect(x.socialMediaTypes),w()}),x.tempEmpNo=f.empNumber}function w(){x.schema={type:"object",title:"Social Media",properties:{typeId:{title:"Type",type:"string","enum":x.socialMediaTypesEnumAndTitleMap["enum"]},profileName:{title:"Handle",type:"string",maxLength:50},profileLink:{title:"Link",type:"string",maxLength:100},allowShare:{title:"Allow share in public",type:"boolean"}},required:["typeId","profileName"]},x.form=[{type:"row",items:[{key:"typeId",type:"select",htmlClass:"col-12",placeholder:"Select Social Media Type",emptyOption:!1,titleMap:_(g.getSortedObjectList(x.socialMediaTypesEnumAndTitleMap.titleMap,"name","ASC")),validationMessage:{302:o.getLocalizedCustom("Required")}}]},{type:"row",items:[{type:"text",htmlClass:"col-12",key:"profileName",ngModelOptions:{updateOn:"blur",allowInvalid:!0},validationMessage:{201:m.textLengthExceedValidation.message(x.schema.properties.profileName.maxLength),302:o.getLocalizedCustom("Required")}}]},{type:"row",items:[{type:"text",htmlClass:"col-12",key:"profileLink",$validators:{url:m.url.validator},validationMessage:{201:m.textLengthExceedValidation.message(x.schema.properties.profileLink.maxLength),url:m.url.message}}]},{type:"row",items:[{type:"checkbox",htmlClass:"col-12",key:"allowShare"}]}],x.model={typeId:x.socialMedia.typeId?x.socialMedia.typeId:x.socialMediaTypesEnumAndTitleMap["enum"][0],profileName:x.socialMedia.profileName,profileLink:x.socialMedia.profileLink,allowShare:1==x.socialMedia.allowShare},x.wizardMode&&y.updateFormFields(x.schema,x.form,b)}function _(e){for(var t=0;t<e.length;t++)e[t].name=o.getLocalizedCustom(e[t].name);return e}function S(e){if(p.$broadcast("schemaFormValidate"),e.$valid&&!x.disableSaveButton){c.show();var t,a=x.socialMedia.id,i="saveSuccess";a?(t=v.updateSocialMedia(x.tempEmpNo,x.model,a).then(function(e){D(e)}),i="updateSuccess"):(t=v.addSocialMedia(x.tempEmpNo,x.model).then(function(e){r.unshift(e)}),i="saveSuccess"),t.then(function(e){c.hide(),x.wizardMode||o.showLocalizedToast(i)},function(e){c.hide(),x.wizardMode||d.success(e)}),s(!0)}}function D(e){for(var t=0;t<r.length;t++)if(r[t].id==e.id){angular.extend(r[t],e);break}}function T(){s(!1)}var x=this,F={};angular.copy(n,F),x.socialMedia=F,x.save=S,x.cancel=T,x.modalProperties=l,x.model={},x.disableSaveButton=!1,x.wizardMode=h.current.data.wizardMode,C()}angular.module("app.pim").controller("PimEditSocialMediaController",e),e.$inject=["logger","$timeout","$q","webservice","localizedMessages","socialMedia","modalProperties","dataList","close","loader","toast","formValidationHelper","$rootScope","$scope","$stateParams","formHelper","$state","socialMediaService","wizardService","fieldConfiguration"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(){l.show(),h().then(function(i){i.social_media.read&&p.getEmployee().then(function(i){M.employee=i;var r={socialMedia:m.getSocialMedia(M.tempEmpNo),socialMediaTypes:n.call("socialMediaTypes","GET",[],{})};M.wizardMode&&(r.fieldConfiguration=u.getFieldConfigurationByRoute(s.current.name,"PimSocialMedia",M.employee.locationId).then(function(e){M.fieldConfiguration=e})),t.all(r).then(function(t){w(),M.socialMedia=t.socialMedia,M.socialMediaTypes=t.socialMediaTypes,M.socialMedia=v(M.socialMedia),M.loaded=!0,M.socialMediaListHelper=new a.list(M.listData.socialMedia,M.socialMedia),M.selectAll=M.socialMediaListHelper.selectAllItems,M.deselectAll=M.socialMediaListHelper.deselectAllItems,M.sortSocialMedia("type","ASC",""),M.wizardMode?u.updateListFields(M.listData.socialMedia.listFields,M.fieldConfiguration):0===M.socialMedia.length&&o.infoToast("No Records Found"),M.wizardMode||e.$broadcast("setEmployeeDetailsForPimTabs"),l.hide()})})})}function h(){var t=!1;null!=e.emp_number&&e.emp_number==c.empNumber&&(t=!0);var a=["social_media"];return f.getDatagroupPermissions(c.empNumber,a,t).then(function(e){return M.permissions=e.social_media,e.social_media.read||(l.hide(),s.go("403")),e})}function v(e){for(var t in e)if(e.hasOwnProperty(t))for(var a in M.socialMediaTypes)e[t].typeId==M.socialMediaTypes[a].id&&(e[t].mediaType=M.socialMediaTypes[a].name);return e}function y(e,t,a){l.show(),M.field=M.SortingListFields[e],"ASC"==t?M.socialMedia.sort(b):"DESC"==t&&M.socialMedia.sort(C),l.hide()}function b(e,t){return e[M.field]<t[M.field]?-1:e[M.field]>t[M.field]?1:0}function C(e,t){return e[M.field]<t[M.field]?1:e[M.field]>t[M.field]?-1:0}function w(){M.panelInfo={socialMediaInfo:{title:"Social Media",icon:"images/pim/icon_work.svg"}},_()}function _(){var e=[{name:"type",lable:"Type",getter:["SocialMediaType","name"],sortable:!0,sortAction:"sortSocialMedia",formatter:function(e){return o.getLocalizedCustom(e)}},{name:"profileName",lable:"Profile Name",getter:"profileName",sortable:!0,sortAction:"sortSocialMedia"},{name:"profileLink",lable:"Profile Link",getter:"profileLink",sortable:!0,sortAction:"sortSocialMedia"}],t=[{colspan:3}],a=[{icon:"edit_item",clickAction:"editSocialMedia",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:M.permissions["delete"]}];M.listData={socialMedia:{selectable:!0,selected:[],idGetter:"id",listFields:e,showColumnsAnyway:!0,permission:M.permissions,listActions:i}},M.permissions.update&&(M.listData.socialMedia.extraTH=t,M.listData.socialMedia.extraTD=a),M.permissions["delete"]?M.listData.socialMedia.columnWidths=["5%","10%","20%","55%","10%"]:M.listData.socialMedia.columnWidths=["10%","25%","55%","10%"]}function S(){var e={typeId:"",profileName:"",profileLink:""};T(e,"Add Social Media")}function D(e){T(e,"Edit Social Media")}function T(e,t){i.showModal("app/pim/socialmedia/social_media_modal.html","PimEditSocialMediaController","modal",{socialMedia:e,dataList:M.socialMedia,title:t,modalProperties:{title:t},socialMediaService:m,fieldConfiguration:M.fieldConfiguration})}function x(){if(M.listData.socialMedia.selected.length>0){var e=M.listData.socialMedia.selected.length;l.show(),m.deleteSocialMedia(M.tempEmpNo,M.listData.socialMedia.selected).then(function(t){l.hide(),M.wizardMode||o.showLocalizedToast("deleteSuccess"),M.total-=e,F(M.listData.socialMedia.selected)},function(e){l.hide(),r.success(e)})}}function F(e){for(var t=M.socialMedia.length-1;t>=0;t--){var a=e.indexOf(M.socialMedia[t].id);a>-1&&(e.splice(a,1),M.socialMedia.splice(t,1))}}function k(e){var t=e.obj;if(t.selected)M.listData.socialMedia.selected.push(t.id);else{var a=M.listData.socialMedia.selected.indexOf(t.id);a>-1&&M.listData.socialMedia.selected.splice(a,1)}}function E(){if(M.listData.socialMedia.selected.length>0){if(M.wizardMode)return void x();i.showDeleteConfirmationModal().then(function(e){e===!0&&x()})}}function I(){close(!0)}function A(){close(!1)}var M=this;M.title="Social Media",M.socialMedia="",M.loaded=!1,M.editSocialMedia=D,M.deleteSocialMedia=x,M.changeSelection=k,M.deleteSelection=E,M.addSocialMedia=S,M.confirm=I,M.cancel=A,M.sortSocialMedia=y,M.SortingListFields={type:"mediaType",profileName:"profileName",profileLink:"profileLink"},M.wizardMode=s.current.data.wizardMode,M.tempEmpNo=c.empNumber,M.employee={},
n.isLoggedIn()?g():n.login().then(function(e){g()})}angular.module("app.pim").controller("PimSocialMediaController",e),e.$inject=["$rootScope","$q","listHelper","modalHelperService","localizedMessages","webservice","loader","toast","$state","$stateParams","datagroupPermissions","socialMediaService","wizardService","pimTabs","employeeService"]}(),function(){"use strict";function e(e,t){function a(e,a){return t.call("employees/"+e+"/socialMedia","POST",a).then(function(e){return e.data.data})}function i(e,a,i){return t.call("employees/"+e+"/socialMedia/"+i,"PATCH",a).then(function(e){return e.data.data})}function o(e){return t.get("employees/"+e+"/socialMedia",{},{useCache:!1}).then(function(e){return e.data.data})}function n(e,a){return t.call("employees/"+e+"/socialMedia","DELETE",{data:a},{})}var l={addSocialMedia:a,updateSocialMedia:i,getSocialMedia:o,deleteSocialMedia:n};return l}angular.module("app.pim").factory("socialMediaService",e),e.$inject=["$q","webservice"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h){function v(){d.getEmployee().then(function(e){F.employee=e;var t={permissions:y(),pimOptionalFieldConfig:d.getPimOptionalFieldConfiguration()};F.wizardMode&&(t.fieldConfiguration=f.getFieldConfigurationByRoute(u.current.name,"PimTaxExemptions",F.employee.locationId)),t.customFieldConfiguration=f.getCustomFieldConfigurationByRoute(u.current.name,F.employee.locationId).then(function(e){F.customFieldConfiguration=e}),s.all(t).then(function(e){F.wizardMode&&(F.fieldConfiguration=e.fieldConfiguration,0===F.fieldConfiguration.length&&(e.permissions.tax_exemptions={read:!1,create:!1,update:!1,"delete":!1})),F.pimConfig=e.pimOptionalFieldConfig,F.permissions=e.permissions.tax_exemptions,F.attachmentPermission=e.permissions.tax_attachment,F.customFieldsPermission=e.permissions.tax_custom_fields,F.pimConfig.showTaxExeptions&&F.permissions.read?g.getTaxExemption(o.empNumber).then(function(e){D(),F.taxExemptions=e,S()}):r.hide()})})}function y(){var e=!1;null!=t.emp_number&&t.emp_number==o.empNumber&&(e=!0);var a=["tax_exemptions","tax_attachment","tax_custom_fields"];return f.getDatagroupPermissions(o.empNumber,a,e).then(function(e){return e.tax_exemptions.read||e.tax_attachment.read||e.tax_custom_fields.read||(r.hide(),u.go("403")),e})}function b(e){F.formSchema={type:"object",title:"Tax Exemptions",readonly:!1,properties:{federalStatus:{title:"Status",type:"string","enum":e.status["enum"]},federalExemptions:{title:"Exemptions",type:"string",maxLength:2},state:{title:"State",type:"string","enum":e.states["enum"]},stateStatus:{title:"Status",type:"string","enum":e.status["enum"]},stateExemptions:{title:"Exemptions",type:"string",maxLength:2},unemploymentState:{title:"Unemployment State",type:"string","enum":e.states["enum"]},workState:{title:"Work State",type:"string","enum":e.states["enum"]}},required:[]},F.permissions.update||(F.formSchema.readonly=!0),F.form=[{type:"help",htmlClass:"sectionHead col",helpvalue:"<h6>"+a.getLocalizedCustom("Federal Income Tax")+"</h6>"},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l3",key:"federalStatus",titleMap:x(e.status.titleMap)},{type:"text",htmlClass:"col s12 m12 l2 offset-l1",key:"federalExemptions",validationMessage:{positiveInteger:c.positiveInteger.message,201:c.textLengthExceedValidation.message(F.formSchema.properties.federalExemptions.maxLength)},$validators:{positiveInteger:c.positiveInteger.validator}}]},{type:"help",htmlClass:"sectionHead col",helpvalue:"<h6>"+a.getLocalizedCustom("State Income Tax")+"</h6>"},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l3",key:"state",titleMap:e.states.titleMap},{type:"select",htmlClass:"col s12 m12 l3 offset-l1",key:"stateStatus",titleMap:x(e.status.titleMap)},{type:"text",htmlClass:"col s12 m12 l2 offset-l1",key:"stateExemptions",validationMessage:{positiveInteger:c.positiveInteger.message,201:c.textLengthExceedValidation.message(F.formSchema.properties.stateExemptions.maxLength)},$validators:{positiveInteger:c.positiveInteger.validator}}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l3",key:"unemploymentState",titleMap:x(e.states.titleMap)},{type:"select",htmlClass:"col s12 m12 l3 offset-l1",key:"workState",titleMap:x(e.states.titleMap)}]}],i.addRequiredMessage(F.form),F.permissions.update&&!F.wizardMode&&F.form.push({type:"section",htmlClass:"row form-buttons",items:[{htmlClass:"col s12 right-align",type:"submit",title:"Save"}]})}function C(t){if(t){var a=!1;return e.$broadcast("schemaFormValidate"),t.$valid&&(a=w()),a}return s.resolve(!0)}function w(){var e=angular.copy(F.formModel);return delete e.empNumber,""===e.federalExemptions&&(e.federalExemptions=0),""===e.stateExemptions&&(e.stateExemptions=0),r.show(),g.updateTaxExemption(o.empNumber,e).then(function(e){e?(F.taxExemptions=e,F.wizardMode||a.showLocalizedToast("updateSuccess")):a.showLocalizedToast("saveFailure"),r.hide()},function(e){r.hide(),l.success(e)})}function _(){F.formModel.empNumber=F.taxExemptions.empNumber,F.formModel.federalStatus="0"==F.taxExemptions.federalStatus||null==F.taxExemptions.federalStatus?"":F.taxExemptions.federalStatus,F.formModel.federalExemptions=F.taxExemptions.federalExemptions,F.formModel.state=F.taxExemptions.state?F.taxExemptions.state:"",F.formModel.stateStatus="0"!=F.taxExemptions.stateStatus&&""!=F.taxExemptions.stateStatus?F.taxExemptions.stateStatus:"",F.formModel.stateExemptions=F.taxExemptions.stateExemptions,F.formModel.unemploymentState=F.taxExemptions.unemploymentState?F.taxExemptions.unemploymentState:"",F.formModel.workState=F.taxExemptions.workState?F.taxExemptions.workState:""}function S(){_()}function D(){var e={provinces:n.call("provinces/"+o.empNumber,"GET",[],void 0,void 0,!0)};s.all(e).then(function(e){b(T(e.provinces.data.data)),F.wizardMode&&p.updateFormFields(F.formSchema,F.form,F.fieldConfiguration)})}function T(e){var t=[],a=[],i=[{value:"S",name:"Single"},{value:"M",name:"Married"},{value:"NRA",name:"Non Resident Alien"},{value:"NA",name:"Not Applicable"}],o=["S","M","NRA","NA"];return e.forEach(function(e){t.push({value:e.province_code,name:e.province_name}),a.push(e.province_code)}),{states:{titleMap:t,"enum":a},status:{titleMap:i,"enum":o}}}function x(e){for(var t=0;t<e.length;t++)e[t].name=a.getLocalizedCustom(e[t].name);return e}b.$inject=["formData"];var F=this;F.title="Tax Exemptions",F.customFieldScreen="tax",F.customFieldService=h,F.employeeService=f,F.states="",F.submitTaxExemptions=w,F.onSubmit=C,F.formModel={},F.wizardMode=u.current.data.wizardMode,F.employee={},n.isLoggedIn()?v():n.login().then(function(){v()}),e.$on("pim.save",function(e,t){var a=C(F.taxExcemptionFrom);a?e.savePromise=a:e.preventDefault()})}angular.module("app.pim").controller("PimTaxExemptionsController",e),e.$inject=["$scope","$rootScope","localizedMessages","formHelper","$stateParams","webservice","toast","loader","$q","formValidationHelper","pimTabs","datagroupPermissions","$state","wizardService","employeeService","taxExemptionsService","customFieldService"]}(),function(){"use strict";function e(e,t){function a(e){return t.get("employees/"+e+"/taxExemption",{},{useCache:!1}).then(function(e){return e.data.data})}function i(e,a){return t.call("employees/"+e+"/taxExemption","PATCH",a).then(function(e){return e.data.data})}var o={getTaxExemption:a,updateTaxExemption:i};return o}angular.module("app.pim").factory("taxExemptionsService",e),e.$inject=["$q","webservice"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c){function d(){e.call("terminationReasons","GET",[]).then(function(e){if(w.exsistingTerminationReasons=b(e.data.data,"name",!0),m(),w.terminationReason.id){var t=w.exsistingTerminationReasons.indexOf(w.terminationReason.name.toLowerCase());w.exsistingTerminationReasons.splice(t,1)}})}function m(){w.schema={type:"object",title:"Social Media",properties:{name:{title:"Name",name:"name",type:"string",maxLength:100}},required:["name"]},w.form=[{type:"row",items:[{type:"text",htmlClass:"col-12",key:"name",onChange:p,validationMessage:{duplicationTerminationReasons:t.getLocalizedCustom("Already exists"),302:t.getLocalizedCustom("Required"),201:c.textLengthExceedValidation.message(w.schema.properties.name.maxLength)},$validators:{duplicationTerminationReasons:u}}]}],C&&g()}function u(e){if(null!=e){if(""==e)return!1;if(w.exsistingTerminationReasons)return!(w.exsistingTerminationReasons.indexOf(e.toLowerCase())>-1)}}function p(e){f(),w.model.name=e}function f(){null==w.model&&(w.terminationReason.name="",g())}function g(){w.model={name:w.terminationReason.name}}function h(a){if(C||null!=w.model||f(),r.$broadcast("schemaFormValidate"),a.$valid){n.show(),angular.extend(w.terminationReason,w.model);var s=w.terminationReason.id,c="POST",d="terminationReasons",m="saveSuccess";s?(c="PATCH",d+="/"+s,m="updateSuccess"):(c="POST",m="saveSuccess"),e.call(d,c,w.model,{}).then(function(e){n.hide(),"POST"==c?i.unshift(e.data.data):"PATCH"==c&&v(w.terminationReason),t.showLocalizedToast(m)},function(e){n.hide(),l.success(e)}),o(!0)}}function v(e){for(var t=0;t<i.length;t++)if(i[t].id==e.id){angular.extend(i[t],e);break}}function y(){o(!1)}function b(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}var C=!1,w=this,_={};angular.copy(a,_),w.terminationReason=_,w.extractFeildValueFromData=b,w.exsistingTerminationReasons,w.terminationReason.id?(w.title="Edit Termination Reason",C=!0):w.title="Add Termination Reason",w.save=h,w.cancel=y,d()}angular.module("app.pim").controller("PimEditTerminationReasonController",e),e.$inject=["webservice","localizedMessages","terminationReason","dataList","close","loader","toast","$scope","formHelper","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){s.show();var e=[];e.push(l.call("terminationReasons","GET",[],{})),e.push(l.call("permissions/dataGroup/pim_termination_reasons","GET",[],{})),t.all(e).then(function(e){x.permissions=e[1].data.data,p(),x.terminationReasons=e[0].data.data,x.loaded=!0,g(),x.terminationReasonsListHelper=new a.list(x.listData.terminationReasons,x.terminationReasons),x.selectAll=x.terminationReasonsListHelper.selectAllItems,x.deselectAll=x.terminationReasonsListHelper.deselectAllItems,s.hide(),0==x.terminationReasons.length&&n.infoToast("No Records Found")},function(e){s.hide(),d.go("403")})}function p(){f()}function f(){var e=[{name:"name",lable:"Name",getter:"name",sortable:!0,sortAction:"fetchTerminationReasons"}],t=[{colspan:3}],a=[{"class":"edit_item",clickAction:"editTerminationReason",tooltip:"Edit"}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:x.permissions["delete"]}];x.listData={terminationReasons:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:x.permissions,listActions:i}}}function g(){for(var e=0;e<x.terminationReasons.length;e++)x.terminationReasons[e].name=n.getLocalizedCustom(x.terminationReasons[e].name)}function h(e,t,a){x.terminationReasons=m.getSortedObjectList(x.terminationReasons,e,t)}function v(){x.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function y(e){o.showModal("app/pim/terminationreasons/termination_reason_modal.html","PimEditTerminationReasonController","modal",{terminationReason:e,dataList:x.terminationReasons})}function b(){if(x.listData.terminationReasons.selected.length>0){var e=x.listData.terminationReasons.selected.length;s.show(),l.call("terminationReasons","DELETE",{data:x.listData.terminationReasons.selected},{}).then(function(t){s.hide();var a="deleteSuccess";n.showLocalizedToast(a),x.total-=e,C(x.listData.terminationReasons.selected)},function(e){s.hide(),n.errorToast(n.getLocalizedCustom(e.data.msg))})}}function C(e){for(var t=x.terminationReasons.length-1;t>=0;t--){var a=e.indexOf(x.terminationReasons[t].id);a>-1&&(e.splice(a,1),x.terminationReasons.splice(t,1))}}function w(e){var t=e.obj;if(t.selected)x.listData.terminationReasons.selected.push(t.id);else{var a=x.listData.terminationReasons.selected.indexOf(t.id);a>-1&&x.listData.terminationReasons.selected.splice(a,1)}}function _(){x.listData.terminationReasons.selected.length>0&&o.showDeleteConfirmationModal().then(function(e){e===!0&&b()})}function S(){var e={name:""};o.showModal("app/pim/terminationreasons/termination_reason_modal.html","PimEditTerminationReasonController","modal",{terminationReason:e,dataList:x.terminationReasons})}function D(){close(!0)}function T(){close(!1)}var x=this;x.title="Termination Reasons",x.terminationReasons="",x.loaded=!1,x.editTerminationReason=y,x.deleteTerminationReason=b,x.changeSelection=w,x.deleteSelection=_,x.addTerminationReason=S,x.confirm=D,x.cancel=T,x.fetchTerminationReasons=h,x.SortingListFields={name:"name"},x.tempEmpNo=r.empNumber,u(),v()}angular.module("app.pim").controller("PimTerminationReasonsController",e),e.$inject=["logger","$q","listHelper","$window","modalHelperService","localizedMessages","webservice","$rootScope","loader","toast","$state","formHelper"]}(),function(){"use strict";function e(e,t,a,i){var o=angular.copy(i);return o.getHiddenFieldNames=function(e){var t=[];return e.forEach(function(e){e.show_in_wizard||t.push(e.name)}),_.contains(t,"contract_start_date")&&_.contains(t,"contract_end_date")&&t.push("has_contract_details"),t.concat(["joined_date","location_id","contract_file","current_service","creditable_service"])},o.getMandatoryFieldNames=function(e){var t=[];return e.forEach(function(e){e.mandatory_in_wizard&&t.push(e.name)}),t},o.updateFormFields=function(e,t,i,n){var l=o.getHiddenFieldNames(i),r=o.getMandatoryFieldNames(i);l.length>0&&a.removeFieldsFromForm(e,t,l),r&&a.makeFieldsMandatory(e,t,r);var s=!(_.contains(l,"contract_start_date")&&_.contains(l,"contract_end_date")),c=_.contains(r,"contract_start_date")||_.contains(r,"contract_end_date");n.has_contract_details=s;var d=_.findIndex(t,function(e){return"row"==e.type&&e.items.length&&"has_contract_details"==e.items[0].key});if(c&&d>-1){var m=t[d];m.items[0].readonly=!0,t[d]=m}e.properties.add_employee_effective_date={title:"Effective From",type:["null","object"],datePickerConfig:{selectMonths:!0,selectYears:100}};var u={type:"section",htmlClass:"row",items:[{type:"date",htmlClass:"col-4",key:"add_employee_effective_date"}]};t.splice(3,0,u),a.makeFieldsMandatory(e,t,["add_employee_effective_date"])},o}angular.module("app.pim").factory("jobWizardService",e),e.$inject=["sessionCacheService","webservice","formHelper","wizardService"]}(),function(){"use strict";function e(e,t){return{getEmployeeService:function(){return t},getPimTabService:function(){return e}}}angular.module("app.pim").factory("pimWizardServiceFactory",e),e.$inject=["wizardPimTabService","wizardEmployeeService"]}(),function(){"use strict";angular.module("app.pim").constant("wizardConstants",{SECTION_KEY_MAP:{PimDependent:"dependents",PimSocialMedia:"socialMedia",PimEmergencyContacts:"emergencyContacts",PimImmigrationDetails:"immigrations",PimSupervisor:"supervisors",PimSubordinate:"subordinates",PimWorkExperience:"workExperience",PimEducation:"education",PimSkill:"skill",PimLanguage:"language",PimLicense:"license",PimMembership:"memberships",PimDirectDeposit:"directDeposit"}})}(),function(){"use strict";function e(e,t,a,i,o,n){var l=angular.copy(n);return l.updateFormFields=function(e,t,a){return n.getEmployee().then(function(o){return o.setPasswordOnFirstLogin&&_.set(_.find(a,function(e){if("emp_work_email"===e.name)return!0}),"mandatory_in_wizard",!0),i.updateFormFields(e,t,a)})},l.updateEmployee=function(e,t){function a(){return i.filterActions({employee:!0}).then(function(e){e.forEach(function(e){("PATCH"==e.method||"POST"==e.method)&&"employeeId"in e.data&&"employeeId"in t&&(e.data.employeeId=t.employeeId),("PATCH"==e.method||"POST"==e.method)&&"emp_work_email"in e.data&&"emp_work_email"in t&&(e.data.emp_work_email=t.emp_work_email)})})}var o={endpoint:"employees/<EMPNUMBER>",method:"PATCH",data:t,params:{},extra:{employee:!0}};return i.getWizardData("employee",{}).then(function(e){return angular.extend(e,t),i.setWizardData("employee",e).then(function(){return a().then(function(){return i.addAction(o).then(function(){return{messages:{success:"Successfully Saved"}}})})})})},l}angular.module("app.pim").factory("wizardContactDetailsEmployeeService",e),e.$inject=["$q","employeeService","webservice","wizardService","wizardConstants","wizardEmployeeService"]}(),function(){"use strict";function e(e,t,a,i,o,n){function l(e,t){var i=[],o={added:{}};e.forEach(function(e){i.push(e.section),e.values.forEach(function(a){t[e.section]||(t[e.section]={}),"attachment"===n.getFieldTypeNameForFieldTypeId(parseInt(a.type,10))?a.value&&a.value.filename?(o.added[a.custom_field_id]=angular.copy(a.value),a.value.base64="",t[e.section][a.custom_field_id]=a.value):t[e.section][a.custom_field_id]&&(a.value=t[e.section][a.custom_field_id]):t[e.section][a.custom_field_id]=a.value})}),i.sort();var l=i.join(),r={endpoint:"employees/<EMPNUMBER>/CustomFieldValues",method:"PUT",data:e,params:{},extra:{sectionIds:l}};return a.addAction(r).then(function(){return a.setWizardData("customFieldValue",t).then(function(){return a.updateCustomWizardData("wizardCustomFieldAttachmentData",o).then(function(){return{}})})})}function r(e){return{file_name:e.filename,file_size:e.filesize,file_type:e.filetype}}function s(e,t,a,i){for(var o in a)if(a.hasOwnProperty(o)&&t.emptyValues.formData[o]){var l=a[o],s=parseInt(t.emptyValues.formData[o].type,10);if("attachment"===n.getFieldTypeNameForFieldTypeId(s)&&l)if(l.filename){l=r(l),t.emptyValues.formData[o].value=l,t.emptyValues["customFieldValue_"+o]=l.file_name;var c="/api/employee-wizard/downloadEmployeeWizardCustomFieldAttachment/"+o;i&&(c+="/"+i,t.emptyValues.formData[o].sequenceNumber=i),t.emptyValues.formData[o].extraData={attachmentFileName:a[o].filename,attachmentUrl:c}}else t.emptyValues.formData[o].value=null,t.emptyValues["customFieldValue_"+o]=null;else if("advance"===n.getFieldTypeNameForFieldTypeId(s)){if(Array.isArray(t.emptyValues.formData[o].extraData)){var d=_.findWhere(t.emptyValues.formData[o].extraData,{id:l});d&&(t.emptyValues.formData[o].value=l,t.emptyValues["customFieldValue_"+o]=d.name.replace(/&nbsp;/gi,""))}}else t.emptyValues.formData[o].value=l,t.emptyValues["customFieldValue_"+o]=l}return t.tabValues=[],t}function c(e,t,a){t.tabValues=[];for(var i in a)if(a.hasOwnProperty(i)){var o=_.cloneDeep(t.emptyValues),l=a[i];o.seqNo=parseInt(i,10);for(var s in l)if(l.hasOwnProperty(s)&&o.formData[s]){var c=l[s],d=parseInt(o.formData[s].type,10);if("attachment"===n.getFieldTypeNameForFieldTypeId(d)&&c)if(c.filename){c=r(c),o.formData[s].value=c,o["customFieldValue_"+s]=c.file_name;var m="/api/employee-wizard/downloadEmployeeWizardCustomFieldAttachment/"+s+"/"+i;o.formData[s].extraData={attachmentFileName:c.file_name,attachmentUrl:m},o.formData[s].sequenceNumber=i}else o.formData[s].value=null,o["customFieldValue_"+s]=null;else if("advance"===n.getFieldTypeNameForFieldTypeId(d)){if(Array.isArray(o.formData[s].extraData)){var u=_.findWhere(o.formData[s].extraData,{id:c});u&&(o.formData[s].value=c,o["customFieldValue_"+s]=u.name.replace(/&nbsp;/gi,""))}}else o.formData[s].value=c,o["customFieldValue_"+s]=c}t.tabValues.push(o)}return t}function d(e){for(var t in p)if(p.hasOwnProperty(t)&&p[t].indexOf(e)!==-1)return t;for(var a in f)if(f.hasOwnProperty(a)&&f[a].indexOf(e)!==-1)return a;return!1}function m(e,t,n){var l="customTabRowValues_"+e,r={added:{}};for(var c in n)n.hasOwnProperty(c)&&"object"==typeof n[c]&&null!==n[c]&&"filename"in n[c]&&n[c].filename.length>0&&"filename"!=c&&(r.added[c+"_"+t]=angular.copy(n[c]),n[c].base64="");return a.getWizardData(l,{}).then(function(c){var d={endpoint:"employeeCustomTabCustomFieldValues/emp_number/<EMPNUMBER>/tabId/"+e+"/seqNo",method:"POST",data:angular.extend({tabId:e,seqNo:t},n),params:{},extra:{tabId:e,seqNo:t}};return c[t]=n,a.addAction(d).then(function(){return a.setWizardData(l,c).then(function(){return a.updateCustomWizardData("wizardCustomFieldAttachmentData",r).then(function(){return o.getEmployee().then(function(a){var o={tabId:e,locationId:a.locationId};return i.call("customFieldScreenCustomTab/values","GET",[],o).then(function(a){var i=s(e,a.data.data,n,t);return i.emptyValues.seqNo=t,i.emptyValues.originalSeqNo=t,i.emptyValues})})})})})})}var u=angular.copy(t),p={},f={};return u.valuesRetrieved=!1,u.attachmentsRetrieved=!1,u.getCustomFieldValues=function(t,n){var l=n.filter.screen;return o.getEmployee().then(function(t){var o=t.locationId,n={},s={screen:l,filter:{locationId:o}};return n.fields=i.get("customFieldScreen/values",s).then(function(e){return e.data}),n.wizardValues=a.getWizardData("customFieldValue",{}),e.all(n).then(function(e){return e.fields.data.forEach(function(t){t.values.forEach(function(a){if(e.wizardValues[t.id]&&e.wizardValues[t.id][a.customFieldId]){var i=e.wizardValues[t.id][a.customFieldId];Array.isArray(i)?i=i.join():"object"==typeof i&&null!==i&&i.filename&&(i=r(i),a.extraData.attachmentFileName=i.file_name,a.extraData.attachmentUrl="/api/employee-wizard/downloadEmployeeWizardCustomFieldAttachment/"+a.customFieldId),a.value=i}})}),e.fields})})},u.saveCustomFieldValues=function(e,t){return a.getWizardData("customFieldValue",{}).then(function(e){return u.valuesRetrieved?e=u.valuesRetrieved:u.valuesRetrieved=e,l(t,e)})},u.deleteCustomFieldAttachment=function(t,i){var o={added:{},deleted:[]};return a.getWizardData("customFieldValue",{}).then(function(t){var n=parseInt(i.sequence_number,10),l=i.custom_field_id,r=e.when(),s=d(l);if(s){var c="customTabRowValues_"+s;r=a.getWizardData(c,{}),n?r.then(function(e){if(e[n]&&e[n][l])return e[n][l]=null,o.deleted.push(l+"_"+n),a.removeActions({tabId:s,seqNo:n}).then(function(){return m(s,n,e[n]).then(function(){return{data:{success:!0}}})})}):r.then(function(e){return delete e[l],o.deleted.push(l),a.setWizardData(c,e).then(function(){return{data:{success:!0}}})})}else{for(var u in t)t.hasOwnProperty(u)&&t[u][l]&&(delete t[u][l],o.deleted.push(l));r.then(function(){return a.setWizardData("customFieldValue",t).then(function(){return{data:{success:!0}}})})}return r.then(function(){return a.updateCustomWizardData("wizardCustomFieldAttachmentData",o).then(function(){return{data:{success:!0}}})})})},u.getCustomTabCustomFieldValues=function(e,t){return o.getEmployee().then(function(t){var o={tabId:e,locationId:t.locationId};return i.call("customFieldScreenCustomTab/values","GET",[],o).then(function(t){var i="customTabRowValues_"+e;return a.getWizardData(i).then(function(a){var i=p[e];return i?c(e,t.data.data,a):s(e,t.data.data,a)})})})},u.getTabDetails=function(e,t){return o.getEmployee().then(function(t){var a={tabId:e,locationId:t.locationId};return i.call("employeePimTab","GET",[],a).then(function(t){if(t.data.data.sections&&t.data.data.sections.section){var a=t.data.data.sections.section.customFieldsList;"1"===t.data.data.menuItem.has_multiple_records?p[e]||(p[e]=_.map(a,"id")):f[e]=_.map(a,"id")}return t.data.data})})},u.getEmployeeCustomizableTabDetails=function(e,t){return o.getEmployee().then(function(t){var a={tabId:e,locationId:t.locationId};return i.call("employeeCustomTabCustomFields","GET",[],a).then(function(e){return e.data.data})})},u.saveEmployeeCustomTabCustomFieldValues=function(e,t,i){var o={endpoint:"employeeCustomTabCustomFieldValues/emp_number/<EMPNUMBER>/tabId/"+e,method:"PATCH",data:{},params:{},extra:{tabId:e}},n={added:{}},l="customTabRowValues_"+e;return a.getWizardData(l,{}).then(function(t){for(var r in i)if(i.hasOwnProperty(r)&&"object"==typeof i[r]){var s=i[r]&&"filename"in i[r]&&i[r].filename&&"filename"!==r,c=t[r]&&"filename"in t[r];s&&(n.added[r]=angular.copy(i[r]),i[r].base64=""),c&&!s&&(i[r]=t[r])}return o.data=angular.extend({tabId:e},i),a.removeActions({tabId:e}).then(function(){return a.addAction(o).then(function(){return a.setWizardData(l,i).then(function(){return a.updateCustomWizardData("wizardCustomFieldAttachmentData",n).then(function(){return{}})})})})})},u.updateEmployeeCustomTabCustomFieldValueRow=function(e,t,i,o){var n="customTabRowValues_"+e;return a.getWizardData(n,{}).then(function(i){var n=i[t];n||(n={});for(var l in o)o.hasOwnProperty(l)&&null!==o[l]&&(n[l]=o[l]);return a.removeActions({tabId:e,seqNo:t}).then(function(){return m(e,t,n)})})},u.addEmployeeCustomTabCustomFieldValueRow=function(e,t,i){var o="customTabRowValues_"+e;return a.getNextIdForWizardDataType(o).then(function(t){return m(e,t,i)})},u.deleteEmployeeCustomTabCustomFieldValues=function(e,t,i){var o="customTabRowValues_"+e;return a.getWizardData(o,{}).then(function(t){var n=[];return i.forEach(function(a){delete t[a],n.push({tabId:e,seqNo:a})}),a.removeActions(n).then(function(){return a.setWizardData(o,t)})})},u}angular.module("app.pim").factory("wizardCustomFieldService",e),e.$inject=["$q","customFieldService","wizardService","webservice","wizardEmployeeService","customFieldHelper"]}(),function(){"use strict";function e(e,t,a,i){function o(e,t){return t<s.maxStepVisited}function n(e,t){return t>s.currentStep}function l(e,t){return t===s.currentStep}function r(e,t){return t<=s.maxStepVisited}var s=this;s.currentStep=null,s.maxStepVisited=1,s.screens=[],s.itemIsDone=o,s.itemIsTodo=n,s.itemIsCurrent=l,s.itemIsVisited=r,i.$on("employeeWizardPageChanged",function(e,t){a(function(){s.screens=t.screens,s.currentStep=t.currentStep,s.maxStepVisited=t.maxStepVisited})})}angular.module("app.pim").controller("EmployeeWizardCustomTopRibbonController",e),e.$inject=["$state","$stateParams","$timeout","$rootScope"]}(),function(){"use strict";function e(e,t,a,i){function o(e,t,i){return t.seqno=i,a.getWizardData(r,{}).then(function(e){return e[i]=t,a.setWizardData(r,e).then(function(){return t})})}function n(e){return a.getWizardData(r,{}).then(function(t){return delete t[e],a.setWizardData(r,t)})}var l=angular.copy(t),r=i.SECTION_KEY_MAP.PimDependent;return l.addDependent=function(e,t,i){return a.getNextIdForWizardDataType(r).then(function(n){var l;l=i?i:n;var r={endpoint:"employees/<EMPNUMBER>/dependent",method:"POST",data:_.omit(t,"seqno"),params:{},extra:{dependentId:l}};return a.addAction(r).then(function(){return o(e,t,l)})})},l.updateDependent=function(e,t,i){return n(i).then(function(){return a.removeActions({dependentId:i}).then(function(){return l.addDependent(e,t,i)})})},l.getDependents=function(e){return a.getWizardData(r,[]).then(function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(e[a]);return t})},l.deleteDependents=function(e,t){return a.getWizardData(r,{}).then(function(e){for(var i=[],o=0;o<t.length;o++){var n=t[o];delete e[n],i.push({dependentId:n})}return a.removeActions(i).then(function(){return a.setWizardData(r,e)})})},l}angular.module("app.core").factory("wizardDependentService",e),e.$inject=["$q","dependentService","wizardService","wizardConstants"]}(),function(){"use strict";function e(e,t,a,i,o){function n(e,t,i){return t.id=i,a.getWizardData(s,{}).then(function(e){return e[i]=t,a.setWizardData(s,e).then(function(){return t})})}function l(e){return a.getWizardData(s,{}).then(function(t){return delete t[e],a.setWizardData(s,t)})}var r=angular.copy(t),s=o.SECTION_KEY_MAP.PimDirectDeposit;return r.addDirectDeposit=function(e,t,i){return a.getNextIdForWizardDataType(s).then(function(o){var l;l=i?i:o;var r={endpoint:"employees/<EMPNUMBER>/directDeposit",method:"POST",data:_.omit(t,"id"),params:{},extra:{id:l}};return a.addAction(r).then(function(){return n(e,t,l)})})},r.updateDirectDeposit=function(e,t,i){return l(i).then(function(){return a.removeActions({id:i}).then(function(){return r.addDirectDeposit(e,t,i)})})},r.getDirectDeposit=function(e){return a.getWizardData(s,[]).then(function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(e[a]);return t})},r.deleteDirectDeposit=function(e,t){return a.getWizardData(s,{}).then(function(e){for(var i=[],o=0;o<t.length;o++){var n=t[o];delete e[n],i.push({id:n})}return a.removeActions(i).then(function(){return a.setWizardData(s,e)})})},r}angular.module("app.core").factory("wizardDirectDepositService",e),e.$inject=["$q","directDepositService","wizardService","webservice","wizardConstants"]}(),function(){"use strict";function e(e,t,a,i){function o(e,t,i){return t.seqno=i,a.getWizardData(s,{}).then(function(e){return e[i]=t,a.setWizardData(s,e).then(function(){return t})})}function n(e){return a.getWizardData(s,{}).then(function(t){return delete t[e],a.setWizardData(s,t)})}var l=0,r=angular.copy(t),s=i.SECTION_KEY_MAP.PimEmergencyContacts;return r.addEmergencyContact=function(e,t,i){var n=i?i:++l,r={endpoint:"employees/<EMPNUMBER>/emergencyContacts",method:"POST",data:_.omit(t,"seqno"),params:{},extra:{emergencyContactId:n}};return a.addAction(r).then(function(){return o(e,t,n)})},r.updateEmergencyContact=function(e,t,i){return n(i).then(function(){return a.removeActions({emergencyContactId:i}).then(function(){return r.addEmergencyContact(e,t,i)})})},r.getEmergencyContacts=function(e){return a.getWizardData(s,[]).then(function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(e[a]);return t})},r.deleteEmergencyContacts=function(e,t){return a.getWizardData(s,{}).then(function(e){for(var i=[],o=0;o<t.length;o++){var n=t[o];delete e[n],i.push({emergencyContactId:n})}return a.removeActions(i).then(function(){return a.setWizardData(s,e)})})},r}angular.module("app.core").factory("wizardEmergencyContactService",e),e.$inject=["$q","emergencyContactService","wizardService","wizardConstants"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s){var c=this,d=angular.copy(n);return c.lastEmployeeId="",d.updateFormFields=function(e,t,a,o){var n=_.find(a,function(e){return"employeeId"===e.name&&1==e.show_in_wizard});if(n){e.properties.autoGenerateEmployeeId={title:"Auto Generate Employee ID",type:"boolean"};var l={type:"section",htmlClass:"row",items:[{type:"switch",htmlClass:"col s12 m12 l4 auto-generated-employee",key:"autoGenerateEmployeeId",customHint:s.getLocalizedCustomWithVariablesWithoutEscaping('Hint: Last Employee ID is "{{lastEmpId}}"',{lastEmpId:o})}]};t.splice(1,0,l)}return i.updateFormFields(e,t,a)},d.updateEmployee=function(e,t){function a(){return i.filterActions({employee:!0}).then(function(e){e.forEach(function(a){("PATCH"==a.method||"POST"==a.method)&&"employeeId"in a.data&&"employeeId"in t&&(a.data.employeeId=t.employeeId);var i=_.find(e,{endpoint:"employees",method:"POST"});void 0!==t.autoGenerateEmployeeId&&(i.data.autoGenerateEmployeeId=t.autoGenerateEmployeeId,t.autoGenerateEmployeeId&&delete t.employeeId,delete t.autoGenerateEmployeeId)})})}var o={endpoint:"employees/<EMPNUMBER>",method:"PATCH",data:t,params:{},extra:{employee:!0}};return i.getWizardData("employee",{}).then(function(e){return angular.extend(e,t),i.setWizardData("employee",e).then(function(){return a().then(function(){return i.addAction(o).then(function(){return{messages:{success:"Successfully Saved"}}})})})})},d}angular.module("app.pim").factory("wizardEmployeePersonalDetailsService",e),e.$inject=["$q","employeeService","webservice","wizardService","wizardConstants","wizardEmployeeService","$state","formHelper","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o){function n(i,o,n){var l={reportingMethod:a.call("employeeReportingMethods","GET",[])};return i&&(l.supervisor=t.getEmployee(i),l.supervisorChain=t.getSupervisorIds(i,!0)),o&&(l.subordinate=t.getEmployee(o),l.subordinateChain=t.getSubordinateIds(o,!0)),e.all(l).then(function(e){var t={},a={},l=_.find(e.reportingMethod.data.data,{id:n});e.supervisor&&(t=_.pick(e.supervisor,["empNumber","firstName","lastName","middleName","termination_id","purged_at"]),t.supervisorIds=e.supervisorChain.data),
e.subordinate&&(a=_.pick(e.subordinate,["empNumber","firstName","lastName","middleName","termination_id","purged_at"]),a.subordinateIds=e.subordinateChain.data);var e={messages:"",data:{supervisorId:i,subordinateId:o,reportingMethodId:n,supervisor:t,subordinate:a,ReportingMethod:l}};return e})}function l(e,t){return n(t.supervisorId,null,t.reportingMethodId).then(function(e){return i.getWizardData(m,{}).then(function(a){return a[t.supervisorId]=e.data,i.setWizardData(m,a).then(function(){return e})})})}function r(e,t){return n(null,t.subordinateId,t.reportingMethodId).then(function(e){return i.getWizardData(u,{}).then(function(a){return a[t.subordinateId]=e.data,i.setWizardData(u,a).then(function(){return e})})})}function s(e){return i.getWizardData(m,{}).then(function(t){return delete t[e],i.setWizardData(m,t)})}function c(e){return i.getWizardData(u,{}).then(function(t){return delete t[e],i.setWizardData(u,t)})}var d=angular.copy(t);d.supervisors=[],d.subordinates=[];var m=o.SECTION_KEY_MAP.PimSupervisor,u=o.SECTION_KEY_MAP.PimSubordinate;return d.getDatagroupPermissions=function(t,a,i){var o={};return a.forEach(function(e){e.indexOf("_attachment")!==-1?o[e]={read:!1,update:!1,create:!1,"delete":!1}:o[e]={read:!0,update:!0,create:!0,"delete":!0}}),e.when(o)},d.getSupervisors=function(e){return i.getWizardData(m,{}).then(function(e){var t=[];for(var a in e)if(e.hasOwnProperty(a)){var i=angular.copy(e[a]);delete i.subordinate,t.push(i)}return{data:t}})},d.getSubordinates=function(e){return i.getWizardData(u,{}).then(function(e){var t=[];for(var a in e)if(e.hasOwnProperty(a)){var i=angular.copy(e[a]);delete i.supervisor,t.push(i)}return{data:t}})},d.getSupervisorIds=function(e,t){return i.getWizardData(m,{}).then(function(e){var a=[];for(var i in e)e.hasOwnProperty(i)&&(a.push(i),t&&(a=a.concat(e[i].supervisor.supervisorIds)));return{data:a}})},d.getSubordinateIds=function(e,t){return i.getWizardData(u,{}).then(function(e){var a=[];for(var i in e)e.hasOwnProperty(i)&&(a.push(i),t&&(a=a.concat(e[i].subordinate.subordinateIds)));return{data:a}})},d.addSupervisor=function(e,t){var a={endpoint:"employees/<EMPNUMBER>/supervisors",method:"POST",data:t,params:{},extra:{supervisorId:t.supervisorId}};return i.addAction(a).then(function(){return l(e,t)})},d.addSubordinate=function(e,t){var a={endpoint:"employees/<EMPNUMBER>/subordinates",method:"POST",data:t,params:{},extra:{subordinateId:t.subordinateId}};return i.addAction(a).then(function(){return r(e,t)})},d.updateSupervisor=function(e,t,a,o){return s(t).then(function(){return i.removeActions({supervisorId:t}).then(function(){return d.addSupervisor(e,o)})})},d.updateSubordinate=function(e,t,a,o){return c(t).then(function(){return i.removeActions({subordinateId:t}).then(function(){return d.addSubordinate(e,o)})})},d.deleteSupervisors=function(e,t){return i.getWizardData(m,{}).then(function(e){for(var a=[],o=0;o<t.length;o++){var n=t[o].split(" "),l=n[0];delete e[l],a.push({supervisorId:l})}return i.removeActions(a).then(function(){return i.setWizardData(m,e)})})},d.deleteSubordinates=function(e,t){return i.getWizardData(u,{}).then(function(e){for(var a=[],o=0;o<t.length;o++){var n=t[o].split(" "),l=n[1];delete e[l],a.push({subordinateId:l})}return i.removeActions(a).then(function(){return i.setWizardData(u,e)})})},d.getEmployee=function(e,t,a){return i.getWizardData("employee",{})},d.addEmployee=function(e){var t={endpoint:"employees",method:"POST",data:e,params:{},extra:{employee:!0}},a=_.pick(e,["autoGenerateEmployeeId","employeeId","firstName","lastName","middleName","locationId","joinedDate","emp_work_email","setPasswordOnFirstLogin"]);return a.terminationId=null,a.purged_at=null,a.deleted_at=null,i.clearWizardData().then(function(e){return i.setWizardData("employee",a).then(function(){return i.addAction(t).then(function(){return{data:a,messages:{success:"Successfully Saved"}}})})})},d.updateEmployee=function(e,t){function a(){return i.filterActions({employee:!0}).then(function(e){e.forEach(function(e){("PATCH"==e.method||"POST"==e.method)&&"employeeId"in e.data&&"employeeId"in t&&(e.data.employeeId=t.employeeId)})})}var o={endpoint:"employees/<EMPNUMBER>",method:"PATCH",data:t,params:{},extra:{employee:!0}};return i.getWizardData("employee",{}).then(function(e){return angular.extend(e,t),i.setWizardData("employee",e).then(function(){return a().then(function(){return i.addAction(o).then(function(){return{messages:{success:"Successfully Saved"}}})})})})},d.getFieldConfigurationByRoute=function(e,t,a){return i.getFieldConfigurationByRoute(e,t,a)},d.getCustomFieldConfigurationByRoute=function(e,t,a){return i.getCustomFieldConfigurationByRoute(e,t,a)},d.updateFormFields=function(e,t,a){return i.updateFormFields(e,t,a)},d.updateListFields=function(e,t){return i.updateListFields(e,t)},d.getDocumentTemplates=function(t){return e.when({templates:[]})},d}angular.module("app.pim").factory("wizardEmployeeService",e),e.$inject=["$q","employeeService","webservice","wizardService","wizardConstants"]}(),function(){"use strict";function e(e,t,a,i){function o(e,t,i){return t.recordId=i,a.getWizardData(r,{}).then(function(e){return e[i]=t,a.setWizardData(r,e).then(function(){return t})})}function n(e){return a.getWizardData(r,{}).then(function(t){return delete t[e],a.setWizardData(r,t)})}var l=angular.copy(t),r=i.SECTION_KEY_MAP.PimImmigrationDetails;return l.addImmigration=function(e,t,i){return a.getNextIdForWizardDataType(r).then(function(n){var l;l=i?i:n;var r={endpoint:"employees/<EMPNUMBER>/immigration",method:"POST",data:_.omit(t,"recordId"),params:{},extra:{immigrationId:l}};return a.addAction(r).then(function(){return o(e,t,l)})})},l.updateImmigration=function(e,t,i){return n(i).then(function(){return a.removeActions({immigrationId:i}).then(function(){return l.addImmigration(e,t,i)})})},l.getImmigrations=function(e){return a.getWizardData(r,[]).then(function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(e[a]);return t})},l.deleteImmigrations=function(e,t){return a.getWizardData(r,{}).then(function(e){for(var i=[],o=0;o<t.length;o++){var n=t[o];delete e[n],i.push({immigrationId:n})}return a.removeActions(i).then(function(){return a.setWizardData(r,e)})})},l}angular.module("app.core").factory("wizardImmigrationService",e),e.$inject=["$q","immigrationService","wizardService","wizardConstants"]}(),function(){"use strict";function e(e,t,a,i,o,n){var l=angular.copy(o);return l.getEmployee=function(e){return t.call("locations","GET",[],{}).then(function(e){return i.getEmployee().then(function(t){return a.getWizardData("employeeJobRecord",{}).then(function(a){return a.location_id=t.locationId,a.joined_date=t.joinedDate,t.JobRecord=a,t.locations=_.find(e.data.data,function(e){return e.id==t.locationId}),t})})})},l.updateEmployeeJobRecord=function(e,t,i){var o=i.employee,n=i.locations,l={endpoint:"employees/<EMPNUMBER>/job",method:"PATCH",data:t,params:{},extra:{employeeJobWizardRecord:!0}};return o.locations=_.find(n,function(e){return e.id==t.location_id}),o.eeo_job_category=t.eeo_job_category,o.flsa_exempt=0,t.flsa_exempt&&(o.flsa_exempt=1),t.event_id="1",a.setWizardData("employee",o).then(function(){return a.removeActions({employeeJobWizardRecord:!0}).then(function(){return a.addAction(l).then(function(){return a.setWizardData("employeeJobRecord",t).then(function(){return t})})})})},l.fetchJobHistory=function(t){return e.resolve().then(function(){return{data:{data:[]}}})},l}angular.module("app.pim").factory("wizardJobService",e),e.$inject=["$q","webservice","wizardService","wizardPimTabService","jobService","localizedMessages"]}(),function(){"use strict";function e(e,t){var a=!1,i=angular.copy(t);return i.show=function(){a||t.show()},i.hide=function(){a||t.hide()},i.hideWithDelay=function(e){a||t.hideWithDelay(e)},i.lockLoader=function(){a=!0},i.unlockLoader=function(){a=!1},i}angular.module("app.pim").factory("wizardLoader",e),e.$inject=["$q","loader"]}(),function(){"use strict";function e(e,t,a,i,o){function n(e,t){return a.getWizardData(m,{}).then(function(e){return e[t.membershipId]=t,a.setWizardData(m,e).then(function(){return l(t).then(function(e){return e})})})}function l(t){var a;return a=0===c.length?e.all([i.call("memberships","GET",[],{})]).then(function(e){return c=e[0].data.data,r(t,c)}):e.resolve(c).then(function(e){return r(t,e)})}function r(e,t){var a=t.map(function(e){return e.id}).indexOf(e.membershipId),i=angular.copy(e);return i.Membership=t[a],i}function s(e){return a.getWizardData(m,{}).then(function(t){return delete t[e],a.setWizardData(m,t)})}var c=[],d=angular.copy(t),m=o.SECTION_KEY_MAP.PimMembership;return d.addMembership=function(e,t){var i={endpoint:"employees/<EMPNUMBER>/memberships",method:"POST",data:t,params:{},extra:{membershipId:t.membershipId}};return a.addAction(i).then(function(){return n(e,t)})},d.updateMembership=function(e,t,i){return s(i).then(function(){return a.removeActions({membershipId:i}).then(function(){return d.addMembership(e,t)})})},d.getMemberships=function(t){return a.getWizardData(m,[]).then(function(t){var a=[],i=[];for(var o in t)t.hasOwnProperty(o)&&i.push(l(t[o]));return e.all(i).then(function(e){for(var t=0;t<e.length;t++)a.push(e[t]);return a})})},d.deleteMemberships=function(e,t){return a.getWizardData(m,{}).then(function(e){for(var i=[],o=0;o<t.length;o++){var n=t[o];delete e[n],i.push({membershipId:n})}return a.removeActions(i).then(function(){return a.setWizardData(m,e)})})},d}angular.module("app.core").factory("wizardMembershipService",e),e.$inject=["$q","membershipService","wizardService","webservice","wizardConstants"]}(),function(){"use strict";function e(e,t,a,i){var o=angular.copy(t);return o.getEmployee=function(e){return a.getEmployee().then(function(e){return i.convertDates(e)})},o.setEmployee=function(e){},o}angular.module("app.core").factory("wizardPimTabService",e),e.$inject=["$q","pimTabs","wizardEmployeeService","pimHelper"]}(),function(){"use strict";function e(e,t,a,i,o){function n(e,t,i){return t.seqno=i,a.getWizardData(h,{}).then(function(e){return e[i]=t,a.setWizardData(h,e).then(function(){return t})})}function l(e){return a.getWizardData(h,{}).then(function(t){return delete t[e],a.setWizardData(h,t)})}function r(e,t,o){return t.id=o,i.call("education","GET",[]).then(function(e){return t.Education=_.findWhere(e.data.data,{id:t.educationId}),a.getWizardData(v,{}).then(function(e){return e[o]=t,a.setWizardData(v,e).then(function(){return t})})})}function s(e){return a.getWizardData(v,{}).then(function(t){return delete t[e],a.setWizardData(v,t)})}function c(e,t,o){return t.id=o,i.call("skills","GET",[]).then(function(e){return t.Skill=_.findWhere(e.data.data,{id:t.skillId}),a.getWizardData(y,{}).then(function(e){return e[o]=t,a.setWizardData(y,e).then(function(){return t})})})}function d(e){return a.getWizardData(y,{}).then(function(t){return delete t[e],a.setWizardData(y,t)})}function m(e,t,o){return i.call("employees/employeeLanguageList","GET",[]).then(function(e){return t.Language=_.findWhere(e.data.data,{id:t.langId}),a.getWizardData(b,{}).then(function(e){return e[o]=t,a.setWizardData(b,e).then(function(){return t})})})}function u(e){return a.getWizardData(b,{}).then(function(t){return delete t[e],a.setWizardData(b,t)})}function p(e,t,o){return i.call("employees/employeeLicenseList","GET",[]).then(function(e){return t.License=_.findWhere(e.data.data,{id:t.licenseId}),a.getWizardData(C,{}).then(function(e){return e[o]=t,a.setWizardData(C,e).then(function(){return t})})})}function f(e){return a.getWizardData(C,{}).then(function(t){return delete t[e],a.setWizardData(C,t)})}var g=angular.copy(t),h=o.SECTION_KEY_MAP.PimWorkExperience,v=o.SECTION_KEY_MAP.PimEducation,y=o.SECTION_KEY_MAP.PimSkill,b=o.SECTION_KEY_MAP.PimLanguage,C=o.SECTION_KEY_MAP.PimLicense;return g.addWorkExperience=function(e,t,i){return a.getNextIdForWizardDataType(h).then(function(o){var l=i?i:o,r={endpoint:"employees/<EMPNUMBER>/workExperience",method:"POST",data:_.omit(t,"seqno"),params:{},extra:{workExperienceId:l}};return a.addAction(r).then(function(){return n(e,t,l)})})},g.updateWorkExperience=function(e,t,i){return l(t).then(function(){return a.removeActions({workExperienceId:t}).then(function(){return g.addWorkExperience(e,i,t)})})},g.getWorkExperiences=function(e){return a.getWizardData(h,[]).then(function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(e[a]);return t})},g.deleteWorkExperiences=function(e,t){return a.getWizardData(h,{}).then(function(e){for(var i=[],o=0;o<t.length;o++){var n=t[o];delete e[n],i.push({workExperienceId:n})}return a.removeActions(i).then(function(){return a.setWizardData(h,e)})})},g.addEducation=function(e,t,i){return a.getNextIdForWizardDataType(v).then(function(o){var n=i?i:o,l={endpoint:"employees/<EMPNUMBER>/education",method:"POST",data:_.omit(t,["id","Education"]),params:{},extra:{educationId:n}};return a.addAction(l).then(function(){return r(e,t,n)})})},g.updateEducation=function(e,t,i){return s(t).then(function(){return a.removeActions({educationId:t}).then(function(){return g.addEducation(e,i,t)})})},g.getEducations=function(e){return a.getWizardData(v,[]).then(function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(e[a]);return t})},g.deleteEducations=function(e,t){return a.getWizardData(v,{}).then(function(e){for(var i=[],o=0;o<t.length;o++){var n=t[o];delete e[n],i.push({educationId:n})}return a.removeActions(i).then(function(){return a.setWizardData(v,e)})})},g.addSkill=function(e,t,i){return a.getNextIdForWizardDataType(y).then(function(o){var n=i?i:o,l={endpoint:"employees/<EMPNUMBER>/skills",method:"POST",data:_.omit(t,["id","Skill"]),params:{},extra:{skillId:n}};return a.addAction(l).then(function(){return c(e,t,n)})})},g.updateSkill=function(e,t,i){return d(t).then(function(){return a.removeActions({skillId:t}).then(function(){return g.addSkill(e,i,t)})})},g.getSkills=function(e){return a.getWizardData(y,[]).then(function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(e[a]);return t})},g.deleteSkills=function(e,t){return a.getWizardData(y,{}).then(function(e){for(var i=[],o=0;o<t.length;o++){var n=t[o];delete e[n],i.push({skillId:n})}return a.removeActions(i).then(function(){return a.setWizardData(y,e)})})},g.addLanguage=function(e,t){var i=t.langId+"_"+t.fluency,o={endpoint:"employees/<EMPNUMBER>/languages",method:"POST",data:_.omit(t,["Language"]),params:{},extra:{languageId:i}};return a.addAction(o).then(function(){return m(e,t,i)})},g.updateLanguage=function(e,t,i,o){var n=t+"_"+i;return u(n).then(function(){return a.removeActions({languageId:n}).then(function(){return g.addLanguage(e,o)})})},g.getLanguages=function(e){return a.getWizardData(b,[]).then(function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(e[a]);return t})},g.deleteLanguages=function(e,t){return a.getWizardData(b,{}).then(function(e){for(var i=[],o=0;o<t.length;o++){var n=t[o].langId+"_"+t[o].fluency;delete e[n],i.push({languageId:n})}return a.removeActions(i).then(function(){return a.setWizardData(b,e)})})},g.addLicense=function(e,t){var i={endpoint:"employees/<EMPNUMBER>/EmployeeLicense",method:"POST",data:_.omit(t,["License"]),params:{},extra:{licenseId:t.licenseId}};return a.addAction(i).then(function(){return p(e,t,t.licenseId)})},g.updateLicense=function(e,t,i){return f(t).then(function(){return a.removeActions({licenseId:t}).then(function(){return g.addLicense(e,i)})})},g.getLicenses=function(e){return a.getWizardData(C,[]).then(function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(e[a]);return t})},g.deleteLicenses=function(e,t){return a.getWizardData(C,{}).then(function(e){for(var i=[],o=0;o<t.length;o++){var n=t[o];delete e[n],i.push({licenseId:n})}return a.removeActions(i).then(function(){return a.setWizardData(C,e)})})},g.getCertificates=function(e){return a.getWizardData("certificate",[]).then(function(e){return[]})},g}angular.module("app.core").factory("wizardQualificationsService",e),e.$inject=["$q","qualificationsService","wizardService","webservice","wizardConstants"]}(),function(){"use strict";function e(e,t,a){function i(e){var t=angular.copy(e),a={id:1,is_active:1,value:t.annual_basic_payment};return delete t.annual_basic_payment,t.event_id="1",t.components.push(a),t}var o=angular.copy(t);return o.updateSalaryRecord=function(e,t){return a.getWizardData("salary",{}).then(function(e){angular.extend(e,t);var o={endpoint:"employees/<EMPNUMBER>/salary",method:"PATCH",data:i(e),params:{},extra:{salary:!0}};return a.setWizardData("salary",e).then(function(){return a.removeActions({salary:!0}).then(function(){return a.addAction(o).then(function(){return{messages:{success:"Successfully Saved"}}})})})})},o.getSalaryRecord=function(e,t){return a.getWizardData("salary",{}).then(function(e){var t={};return t.EmployeeSalaryComponent=[],t.SalaryRecord=e,t})},o}angular.module("app.core").factory("wizardSalaryService",e),e.$inject=["$q","salaryService","wizardService"]}(),function(){"use strict";function e(e,t,a,i,o){function n(t,a){return e.get("wizard").then(function(e){return!_.isEmpty(e)&&(t?e.hasOwnProperty(t)?e[t]:a:e)})}function l(t){return e.get("wizard").then(function(e){if(!e)return 1;if(e.hasOwnProperty(t)){var a=Object.keys(e[t]);return a.length>0?parseInt(_.max(a),10)+1:1}return 1})}function r(t,a){return n().then(function(i){return i||(i={}),i[t]=a,e.put("wizard",i)})}function s(e,a){return t.call("employeeWizardCustomSessionData/"+e,"PATCH",{data:a},{})}function c(){return n().then(function(e){return!!e})}function d(){return e.put("wizard",{}).then(function(){return t.call("employeeWizardCustomSessionData/wizardCustomFieldAttachmentData","DELETE",[],{})})}function m(){e.clearLocalCache("wizard")}function u(e){return n("actions",[]).then(function(t){return t.push(e),r("actions",t)})}function p(){return n("actions")}function f(e){return n("actions",[]).then(function(t){Array.isArray(e)||(e=[e]);var a=t.filter(function(t){for(var a=0;a<e.length;a++)if(_.isEqual(t.extra,e[a]))return!0;return!1});return a})}function g(e){return n("actions",[]).then(function(t){Array.isArray(e)||(e=[e]);var a=t.filter(function(t){for(var a=0;a<e.length;a++)if(_.isEqual(t.extra,e[a]))return!1;return!0});return r("actions",a)})}function h(e){return t.get("employee-wizard/screens/location/"+e,{},{useCache:!1}).then(function(e){for(var t=[],a=0;a<e.data.data.length;a++){var i=e.data.data[a];i.show_in_wizard&&i.enabled&&t.push({id:i.id,title:i.title,route:i.route,menu_item_id:i.menu_item_id,custom_field_screen_id:i.custom_field_screen_id,skipTitle:!0})}return t})}function v(e,a){return t.get("employee-wizard/config",{},{useCache:!1}).then(function(t){var i=_.findWhere(t.data.data,{wizard_screen_id:e,name:a});return i?y(i):[]})}function y(e){var t,a=[],i="PimPersonalDetail"===e.name;return e.WizardField.forEach(function(e){e.enabled&&(t={name:e.custom_field_id?e.custom_field_id:e.field_name,mandatory_in_wizard:e.mandatory_in_wizard,show_in_wizard:e.show_in_wizard,label:e.label,custom_field_id:e.custom_field_id},i&&"personal_details_nation_code"===e.field_name&&(t.name="nation_code"),a.push(t))}),a}function b(e,a,i){return t.get("employee-wizard/screens/location/"+i,{},{useCache:!1}).then(function(t){var i=_.findWhere(t.data.data,{route:e}),o=[];if(i){var n=_.findWhere(i.WizardSection,{name:a});n&&(o=v(i.id,a))}return o})}function C(e,a,o){return t.get("employee-wizard/screens/location/"+a,{},{useCache:!1}).then(function(a){var n={route:e};o&&(n.menu_item_id=o);var l=_.findWhere(a.data.data,n);if(l){var r=[];return l.WizardSection.forEach(function(e){e.custom_field_section_id&&r.push(e.custom_field_section_id)}),t.get("employee-wizard/config",{},{useCache:!1}).then(function(e){var t={};return e.data.data.forEach(function(e){e.wizard_screen_id==l.id&&r.indexOf(e.custom_field_section_id)!==-1&&(t[e.custom_field_section_id]=y(e))}),t})}return i.when(!1)})}function w(e,a,o){return t.get("employee-wizard/screens/location/"+a,{},{useCache:!1}).then(function(t){var a={route:e};o&&(a.menu_item_id=o);var n=_.findWhere(t.data.data,a);return n?n:i.when(!1)})}function S(e){var t=[];return e.forEach(function(e){e.show_in_wizard||t.push(e.name)}),t}function D(e){var t=[];return e.forEach(function(e){e.mandatory_in_wizard&&t.push(e.name)}),t}function T(e,t,i){var o=S(i),n=D(i);o.length>0&&a.removeFieldsFromForm(e,t,o),n&&a.makeFieldsMandatory(e,t,n)}function x(e,t){var a=S(t);a.length>0&&F(e,a)}function F(e,t){t.forEach(function(t){k(e,t)})}function k(e,t){var a=_.findIndex(e,{name:t});a!==-1&&e.splice(a,1)}function E(e,t){var a=o.instant("Adding an Employee Is Restricted since You Don't Have Create/Update Permissions for the Following Employee Data. Please Contact Admin.");return a+="<br>",e.forEach(function(e){t?e.locations.indexOf(t)!==-1&&(a+="<br> "+o.instant(e.dataGroup.description)):0===e.locations.length&&(a+="<br> "+o.instant(e.dataGroup.description))}),a}return{getWizardData:n,setWizardData:r,updateCustomWizardData:s,isWizardActive:c,clearWizardData:d,addAction:u,getActions:p,filterActions:f,removeActions:g,getActiveScreens:h,getFieldConfigurationByRoute:b,getCustomFieldConfigurationByRoute:C,updateFormFields:T,updateListFields:x,getNextIdForWizardDataType:l,getHiddenFieldNames:S,getMandatoryFieldNames:D,clearLocalCache:m,getWizardPermissionMessage:E,getScreenConfigurationByRoute:w}}angular.module("app.pim").factory("wizardService",e),e.$inject=["sessionCacheService","webservice","formHelper","$q","$translate"]}(),function(){"use strict";function e(e,t,a,i,o){function n(e,t,i){return t.id=i,a.getWizardData(m,{}).then(function(e){return e[i]=t,a.setWizardData(m,e).then(function(){return r(t).then(function(e){return e})})})}function l(e){return a.getWizardData(m,{}).then(function(t){return delete t[e],a.setWizardData(m,t)})}function r(t){var a;return a=0===c.length?e.all([i.call("socialMediaTypes","GET",[],{})]).then(function(e){return c=e[0].data.data,s(t,c)}):e.resolve(c).then(function(e){return s(t,e)})}function s(e,t){var a=t.map(function(e){return e.id}).indexOf(e.typeId),i=angular.copy(e);return i.SocialMediaType=t[a],i}var c=[],d=angular.copy(t),m=o.SECTION_KEY_MAP.PimSocialMedia;return d.addSocialMedia=function(e,t,i){return a.getNextIdForWizardDataType(m).then(function(o){var l;l=i?i:o;var r={endpoint:"employees/<EMPNUMBER>/socialMedia",method:"POST",data:_.omit(t,"id"),params:{},extra:{id:l}};return a.addAction(r).then(function(){return n(e,t,l)})})},d.updateSocialMedia=function(e,t,i){return l(i).then(function(){return a.removeActions({id:i}).then(function(){return d.addSocialMedia(e,t,i)})})},d.getSocialMedia=function(t){return a.getWizardData(m,[]).then(function(t){var a=[],i=[];for(var o in t)t.hasOwnProperty(o)&&i.push(r(t[o]));return e.all(i).then(function(e){for(var t=0;t<e.length;t++)a.push(e[t]);return a})})},d.deleteSocialMedia=function(e,t){return a.getWizardData(m,{}).then(function(e){for(var i=[],o=0;o<t.length;o++){var n=t[o];delete e[n],i.push({id:n})}return a.removeActions(i).then(function(){return a.setWizardData(m,e)})})},d}angular.module("app.core").factory("wizardSocialMediaService",e),e.$inject=["$q","socialMediaService","wizardService","webservice","wizardConstants"]}(),function(){"use strict";function e(e,t,a){function i(e){var t={federalStatus:"0",federalExemptions:"",state:"",stateStatus:"0",stateExemptions:"",unemploymentState:"",workState:"",wizard_default:!0};return a.getWizardData("taxExemption",t).then(function(e){return e})}function o(e,t){var o={endpoint:"employees/<EMPNUMBER>/taxExemption",method:"PATCH",data:t,params:{},extra:{taxExemptionWizardRecord:!0}};return i(e).then(function(e){return e.wizard_default?n(o,t):a.removeActions({taxExemptionWizardRecord:!0}).then(function(){return n(o,t)})})}function n(e,t){return a.addAction(e).then(function(){return a.setWizardData("taxExemption",t).then(function(){return t})})}var l={getTaxExemption:i,updateTaxExemption:o};return l}angular.module("app.pim").factory("wizardTaxExemptionsService",e),e.$inject=["$q","webservice","wizardService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g){function h(){o.getActiveScreens(P.locationId).then(function(a){P.screens=a,"pim.wizard"===e.current.name?o.getWizardData("currentStep").then(function(e){var t=0;void 0!==e&&(t=e),v(P.screens[t]),A()}):("pim.wizard.custom_pimTab"===e.current.name?P.currentStep=_.findIndex(P.screens,{route:e.current.name,menu_item_id:t.tabId}):P.currentStep=_.findIndex(P.screens,{route:e.current.name}),P.currentScreen=P.screens[P.currentStep],o.setWizardData("currentStep",P.currentStep).then(function(){A()}))})}function v(t){var a;t.custom_field_screen_id&&(a={tabId:t.menu_item_id}),e.go(t.route,a,{location:"replace"}).then(function(){i.$applyAsync(function(){d.setForcedTitle(["Employee Management","Add Employee Wizard ",t.title],!1)})})}function y(){P.currentStep>0&&I(P.currentStep-1)}function b(){var e=P.currentScreen,t=e.custom_field_screen_id,a=e.menu_item_id,i=t?a:null,n=P.locationId,r=e.route,s=l.defer(),c={},d=[];return o.getScreenConfigurationByRoute(r,n,i).then(function(e){e.show_in_wizard&&e.WizardSection.forEach(function(e){if(e.has_list){var i=_.findWhere(e.WizardField,{mandatory_in_wizard:!0});if(void 0!==i)if(t)c[a]=f.getCustomTabCustomFieldValues(a),d.push(a);else{var n=P.sectionNameMap[e.name];n&&(c[n]=o.getWizardData(n,[]))}}}),_.isEmpty(c)?s.resolve(!0):l.all(c).then(function(e){var t=!0;for(var a in e)if(_.includes(d,a)){if(_.isEmpty(e[a].tabValues)){t=!1;break}}else if(_.isEmpty(e[a])){t=!1;break}t?s.resolve(!0):s.resolve(!1)})}),s.promise}function C(){P.currentStep+1<P.screens.length&&I(P.currentStep+1)}function w(e){e<=P.maxStepVisited&&P.screens[e]&&I(e)}function S(){s.show(),s.lockLoader();var e=l.defer();return k().then(function(e){if(e!==!1)return o.getActions().then(function(e){e=T(e);var t=e.map(function(e){var t=_.clone(e);return delete t.extra,t});return n.call("wizard","POST",t,{}).then(function(e){return o.clearWizardData(),c.showLocalizedToast("saveSuccess"),F(e.data.data.empNumber)},function(e){D(e)})})})["finally"](function(){s.unlockLoader(),s.hide(),e.resolve()}),e.promise}function D(e){var t="Failed to Save Record";e.data&&e.data.details&&(t=e.data.details.indexOf("employeeId must be valid")!==-1?"Duplicate Employee Id":e.data.details),c.errorToast(t)}function T(e){for(var t={},a=[],i=[],o=e.length-1;o>=0;o--)e[o]&&"employees/<EMPNUMBER>/CustomFieldValues"===e[o].endpoint&&(t[e[o].extra.sectionIds]?a.push(o):t[e[o].extra.sectionIds]=!0);for(var n=0;n<e.length;n++)a.indexOf(n)===-1&&i.push(e[n]);return i=x(i)}function x(e){var t=[],a=[],i=_.find(e,{endpoint:"employees/<EMPNUMBER>/job"});if(i){var o=i.data;if(void 0!==o&&void 0!==o.custom_fields){var n=_.first(o.custom_fields);if(void 0!==n)for(var l=e.length-1;l>=0;l--)if(e[l]&&"employees/<EMPNUMBER>/CustomFieldValues"===e[l].endpoint){var r=_.first(e[l].data);void 0!==r&&void 0!==r.section&&void 0!==n.section&&r.section===n.section&&t.push(l)}}}for(var s=0;s<e.length;s++)t.indexOf(s)===-1&&a.push(e[s]);return a}function F(t){return r.getAccessiblePimTabs(t).then(function(a){if(a.length>0){var i=a[0];if("uiSref"in i){if("tabId"in i&&i.tabId){var o={empNumber:t,tabId:i.tabId};return e.go(i.originalState,o)}return e.go(i.uiSref,{empNumber:t})}if("link"in i){var n=i.link+t;u.location.href=n}}else e.go("403")})}function k(){return E().then(function(e){if(e!==!1){var t=[],a=i.$broadcast("pim.save",t);return a.defaultPrevented?l.when(!1):(Array.isArray(a.savePromise)?t=t.concat(a.savePromise):a.savePromise&&t.push(a.savePromise),l.all(t))}return l.reject(!1)})}function E(){return b().then(function(e){var t=i.$broadcast("pim.validate");if(e!==!1){var a=!t.defaultPrevented;return a?l.when(!0):l.when(!1)}return c.errorToast("Failed to proceed. You must have at least one record for the section(s) to proceed."),l.when(!1)})}function I(e){k().then(function(t){t!==!1&&(P.currentStep=e,v(P.screens[e]),A())})}function A(){P.currentScreen=P.screens[P.currentStep],P.showPrev=P.currentStep>0,P.showFinishButton=P.currentStep+1===P.screens.length||1===P.screens.length,P.maxStepVisited<P.currentStep&&(P.maxStepVisited=P.currentStep),p.$broadcast("employeeWizardPageChanged",{screens:P.screens,currentStep:P.currentStep,maxStepVisited:P.maxStepVisited})}function M(e){return e<P.maxStepVisited}function L(e){return e===P.currentStep}var P=this;P.title="Add Employee Wizard",P.currentStep=0,P.maxStepVisited=0,P.currentScreen=!1,P.screens={},P.showPrev=!0,P.showFinishButton=!1,P.locationId=null,P.canSubmitForm=!0,P.onPrevStep=y,P.onNextStep=C,P.onFinish=S,P.onGoToStep=w,P.isVisited=M,P.isCurrentStep=L,P.sectionNameMap=g.SECTION_KEY_MAP,m.on("keydown",function(e){8===e.which&&("INPUT"!==e.target.nodeName||"INPUT"===e.target.nodeName&&e.target.readOnly)&&"SELECT"!==e.target.nodeName&&"TEXTAREA"!==e.target.nodeName&&e.preventDefault()});var $=t.redirectedFrom;"addCandidateAsEmployee"===$&&(o.clearLocalCache(),r.resetEmployee()),o.isWizardActive().then(function(t){t?o.getWizardData("employee",{}).then(function(e){P.locationId=e.locationId,h()}):e.go("pim.add_employee")}),i.$on("pim.allowEmployeeDataSubmit",function(e,t){P.canSubmitForm=t.allowSubmit})}angular.module("app.pim").controller("EmployeeWizardController",e),e.$inject=["$state","$stateParams","$timeout","$scope","wizardService","webservice","$q","pimTabs","wizardLoader","localizedMessages","titleService","$document","$window","$rootScope","wizardCustomFieldService","wizardConstants"]}(),function(){"use strict";function e(){var e={restrict:"A",require:"ngModel",scope:{duration:"=",apply:"=",maxvalue:"="},link:function(e,t,a,i){i.$validators.invalidDuration=function(t){return!!e.apply||parseFloat(e.duration)>0}}};return e}angular.module("app.directives").directive("durationValidate",e)}(),function(){"use strict";function e(){var e={restrict:"A",require:"ngModel",scope:{duration:"=",dependtime:"=",minvalue:"=",maxvalue:"=",lunchPart:"=",lunch:"="},link:function(e,t,a,i,o){i.$validators.invalidShiftDuration=function(t){if(!t)return!0;var a=e.minvalue?e.minvalue.replace(":","."):"00.00",i=e.maxvalue?e.maxvalue.replace(":","."):"23.45",o=t.replace(":","."),n=e.dependtime?e.dependtime.replace(":","."):"",l=e.lunch;return""!=n&&("in"==l?i=n:a=n),""===o||parseFloat(i)>=parseFloat(o)&&parseFloat(o)>=parseFloat(a)},i.$validators.partialRequired=function(t){return!(!t&&e.lunchPart)},i.$validators.validDatePattern=function(e){if(e){var t=/^(?:[01]\d|2[0-3]):(?:[0-5]\d)$/,a=new RegExp(t);return a.test(e)}return!0}}};return e}angular.module("app.directives").directive("shiftValidate",e)}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s){function c(){o.show(),m.tempEmpNo=r.empNumber;var a=!1;null!=e.emp_number&&e.emp_number==r.empNumber&&(a=!0),s.getPermissions(a,{Employee:r.empNumber}).then(function(a){if(m.permissions=a.pim_employee_work_week,m.permissions.read){var n=[];n.push(i.call("employees/"+r.empNumber+"/workWeek","GET",[],{})),t.all(n).then(function(t){m.workWeek=t[0].data.data,m.isEnabled=m.workWeek.isEnabled,e.$broadcast("setEmployeeDetailsForPimTabs"),o.hide()})}else o.hide(),l.go("403")})}function d(e){if(e.$valid){m.workWeek.isEnabled=m.isEnabled;var t="PATCH",l="employees/"+m.tempEmpNo+"/workWeek",r="saveSuccess",s=[{workWeek:m.workWeek}];o.show(),i.call(l,t,s,{}).then(function(e){o.hide(),a.showLocalizedToast(r)},function(e){o.hide(),n.success(e)})}}var m=this;m.title="Employee Work Week",m.isEnabled=!1,m.workWeek=null,m.onSubmitWorkWeek=d,i.isLoggedIn()?c():i.login().then(function(e){c()})}angular.module("app.pim").controller("PimWorkWeekController",e),e.$inject=["$rootScope","$q","localizedMessages","webservice","loader","toast","$state","$stateParams","datagroupPermissions"]}(),function(){"use strict";function e(){function e(e,t,a,i){}var a={templateUrl:"app/pim/workWeek/work-weekrow.html",restrict:"AES",transclude:!0,scope:{day:"@",timeObject:"=",permissions:"=",formName:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return a;
}function t(e){function t(){e.$watch("vm.lunchIn",function(){e.$applyAsync(function(){o.formName["lunchOut-"+o.day].$setDirty(),o.formName["lunchOut-"+o.day].$validate()})}),e.$watch("vm.lunchOut",function(){e.$applyAsync(function(){o.formName["lunchIn-"+o.day].$setDirty(),o.formName["lunchIn-"+o.day].$validate()})}),e.$watch("vm.duration",function(){e.$applyAsync(function(){o.formName["duration-"+o.day].$setDirty(),o.formName["duration-"+o.day].$validate()})})}function a(){var e=i(o.shiftIn,o.shiftOut),t=i(o.lunchIn,o.lunchOut),a=(e-t).toFixed(3);return a}function i(e,t){var a=0;if(null===e||"undefined"===e)return a;if(null===t||"undefined"===t)return a;if(!e||!t)return a;var i=e.split(":"),o=t.split(":"),n=i[0],l=i[1],r=o[0],s=o[1];if($.isNumeric(n)&&$.isNumeric(l)&&$.isNumeric(r)&&$.isNumeric(s)){var c=parseInt(l)+60*parseInt(n),d=parseInt(s)+60*parseInt(r);a=((d-c)/60).toFixed(3)}return a}var o=this;e.$watch("vm.shiftIn",function(){o.checkTime(),e.$applyAsync(function(){o.formName["shiftOut-"+o.day].$validate()})}),e.$watch("vm.shiftOut",function(){o.checkTime(),e.$applyAsync(function(){o.formName["shiftIn-"+o.day].$validate()})}),e.$watch("vm.lunchIn",function(){o.checkTime()}),e.$watch("vm.lunchOut",function(){o.checkTime()}),t();var n=["00:00","00:15","00:30","00:45","01:00","01:15","01:30","01:45","02:00","02:15","02:30","02:45","03:00","03:15","03:30","03:45","04:00","04:15","04:30","04:45","05:00","05:15","05:30","05:45","06:00","06:15","06:30","06:45","07:00","07:15","07:30","07:45","08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30","14:45","15:00","15:15","15:30","15:45","16:00","16:15","16:30","16:45","17:00","17:15","17:30","17:45","18:00","18:15","18:30","18:45","19:00","19:15","19:30","19:45","20:00","20:15","20:30","20:45","21:00","21:15","21:30","21:45","22:00","22:15","22:30","22:45","23:00","23:15","23:30","23:45"],l=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];o.durationsDatas=["111111","222222"],o.times=n,o.weekday=l,o.hideIfNonWorkingDay=!1,o.type=o.timeObject.type,o.shiftIn=o.timeObject.shiftIn,o.shiftOut=o.timeObject.shiftOut,o.lunchIn=o.timeObject.lunchIn,o.lunchOut=o.timeObject.lunchOut,o.duration=o.timeObject.duration,o.timeObject.duration=o.duration,"8"==o.timeObject.type?(o.type="8",o.hideIfNonWorkingDay=!0):(o.type="0",o.hideIfNonWorkingDay=!1),o.checkWorkingDay=function(){var t=o.type;"8"===t?o.hideIfNonWorkingDay=!0:o.hideIfNonWorkingDay=!1,o.timeObject.type=t,e.$watch("vm.duration",function(){o.formName["duration-"+o.day].$validate()})},o.checkTime=function(){o.duration=a(),o.timeObject.lunchIn=o.lunchIn,o.timeObject.shiftIn=o.shiftIn,o.timeObject.shiftOut=o.shiftOut,o.timeObject.lunchOut=o.lunchOut,o.timeObject.duration=o.duration}}angular.module("app.pim").directive("workWeekrow",e),t.$inject=["$scope"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(){s.show();var e=[];e.push(l.call("recruitment/documentTemplates","GET",[])),e.push(f.getSinglePermission("recruitment_configuration")),i.all(e).then(function(e){E.permissions=e[1],E.documentTemplates=e[0].data.data;var t=e[0].data.meta;E.unselectableIds=t.templateIdsNotPermittedToDelete,E.editableIds=t.templateIdsPermittedToEdit,h(),s.hide(),0==E.documentTemplates.length&&n.infoToast("No Records Found")},function(e){s.hide(),m.go("403")})}function h(){var e=[{name:"templateName",lable:"Template Name",getter:"name"},{name:"description",lable:"Description",getter:"description","class":"tableColumnTextShorting"},{name:"pageSize",lable:"Page Size",getter:"pageSize"},{name:"vacancy",lable:"Vacancy(s)",getter:["vacancies"],formatter:function(e,t){if(e&&Object.values(e).length>0){var a=Object.values(e);return a.join(", ")}return n.getLocalizedCustom("All Vacancies")}},{name:"stages",lable:"Stage(s)",formatter:function(e,t){var a=[];if(t.vacancyEvents){var i=Object.values(t.vacancyEvents);for(var o in i)a.push(n.getLocalizedCustom(i[o]))}if(t.vacancyEventTypes){var l=!1,r=_.clone(t.vacancyEventTypes),s=Object.keys(r);_.forEach(s,function(e){p.COMMON_VACANCY_EVENT_TYPE_IDS.indexOf(e)<0&&(delete r[e],l||(l=!0))}),l&&(r[p.IN_PROGRESS_EVENT_TYPE_ID]=n.getLocalizedCustom(p.IN_PROGRESS_EVENT_TYPE_NAME));var c=Object.values(r);for(var o in c)a.push(n.getLocalizedCustom(c[o]))}return a.sort().join(", ")}}],t=[{colspan:1}],a=[{"class":"edit_item",clickAction:"editItem",tooltip:"Edit",hideIf:function(e){return _.includes(E.editableIds,e.id)}}],i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:E.permissions["delete"]}];E.listData={documentTemplates:{selectable:!0,unselectableIds:E.unselectableIds,selected:[],idGetter:"id",listFields:e,showColumnsAnyway:!0,permission:E.permissions,listActions:i,columnWidths:v()}},E.permissions.update&&(E.listData.documentTemplates.extraTH=t,E.listData.documentTemplates.extraTD=a)}function v(){var e;return e=E.permissions["delete"]?E.permissions.update?["5%","15%","35%","10%","15%","15%","5%"]:["5%","20%","35%","10%","15%","15%"]:E.permissions.update?["20%","35%","10%","15%","15%","5%"]:["25%","35%","10%","15%","15%"]}function y(e){u.showModal("app/recruitment/documentTemplates/document_templates_modal.html","RecruitmentEditDocumentTemplateController","modal",{documentTemplate:e,dataList:E.documentTemplates,selectedData:{}})}function b(){if(E.listData.documentTemplates.selected.length>0){var e=E.listData.documentTemplates.selected.length;s.show(),l.call("recruitment/documentTemplates","DELETE",{ids:E.listData.documentTemplates.selected},{}).then(function(t){s.hide();var a="deleteSuccess";n.showLocalizedToast(a),E.total-=e,C(E.listData.documentTemplates.selected)},function(e){s.hide(),c.success(e)})}}function C(e){for(var t=E.documentTemplates.length-1;t>=0;t--){var a=e.indexOf(E.documentTemplates[t].id);a>-1&&(e.splice(a,1),E.documentTemplates.splice(t,1))}}function w(){E.listData.documentTemplates.selected=[];for(var e=0;e<E.documentTemplates.length;e++){var t=E.documentTemplates[e];E.unselectableIds.indexOf(t.id)===-1&&(t.selected=!0,E.listData.documentTemplates.selected.push(t.id))}}function S(){E.listData.documentTemplates.selected=[];for(var e=0;e<E.documentTemplates.length;e++)E.documentTemplates[e].selected=!1}function D(e){var t=e.obj;if(t.selected)E.listData.documentTemplates.selected.push(t.id);else{var a=E.listData.documentTemplates.selected.indexOf(t.id);a>-1&&E.listData.documentTemplates.selected.splice(a,1)}}function T(){E.listData.documentTemplates.selected.length>0&&u.showDeleteConfirmationModal().then(function(e){e===!0&&b()})}function x(){var e={};u.showModal("app/recruitment/documentTemplates/document_templates_modal.html","RecruitmentEditDocumentTemplateController","modal",{documentTemplate:e,dataList:E.documentTemplates,selectedData:{}}).then(function(e){e&&e.id&&E.editableIds.push(e.id)})}function F(){close(!0)}function k(){close(!1)}var E=this;E.title="Document Templates",E.documentTemplates="",E.unselectableIds=[],E.editItem=y,E.deleteItem=b,E.selectAll=w,E.deselectAll=S,E.changeSelection=D,E.deleteSelection=T,E.addItem=x,E.confirm=F,E.cancel=k,g()}angular.module("app.recruitment").controller("RecruitmentDocumentTemplatesController",e),e.$inject=["logger","listHelper","$window","$q","ModalService","localizedMessages","webservice","$rootScope","loader","toast","$translate","$state","modalHelperService","recruitmentConstants","datagroupPermissions"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v){function y(){var e=[],t={settings:g.getSettings(!0),allVacancyEventsDetails:a.call("recruitment/allVacancyEventsDetails","GET",[],{}),notificationTemplates:a.call("recruitment/documentNotificationTemplates","GET",[],{})};u.all(t).then(function(t){t.settings&&t.settings.recruitment&&(W=t.settings.recruitment.isDigitalSignEnabledCandidateDocuments),G.vacancies=t.allVacancyEventsDetails.data.data,G.vacancyEventTypes=t.allVacancyEventsDetails.data.meta.vacancyEventTypes,G.permittedToCreateDocumentTemplatesForAllVacancies=t.allVacancyEventsDetails.data.meta.permittedToCreateDocumentTemplatesForAllVacancies,G.inProgressEventTypeIds=E(G.vacancyEventTypes),G.vacancyChoices=s.getItemsForMultyselectAutocomplete(G.vacancies),H=b(G.vacancies),U=C(G.vacancyEventTypes),G.vacancyEventTypeChoices=s.getItemsForMultyselectAutocomplete(k(I(G.vacancyEventTypes))),G.vacancyEventChoiceArray=[],_.forEach(G.vacancies,function(e){G.vacancyEventChoiceArray[e.id]=s.getItemsForMultyselectAutocomplete(k(e.events))}),G.documentTemplate.vacancies&&1===Object.keys(G.documentTemplate.vacancies).length?G.vacancyEventChoices=G.vacancyEventChoiceArray[Object.keys(G.documentTemplate.vacancies)[0]]:Y&&1===Object.keys(Y).length?G.vacancyEventChoices=G.vacancyEventChoiceArray[Object.keys(Y)[0]]:G.vacancyEventChoices=[],t.notificationTemplates.data.data&&(e=t.notificationTemplates.data.data,G.notificationTemplateEnumAndTitleMap=s.getEnumAndTitleMapForSelect(e),q=F(e)),M(),G.showPimTokenValue=T(),D().then(function(){f(function(){A()})})})}function b(e){var t=[];return _.forEach(e,function(e){t[e.id]=w(e.events)}),t}function C(e){var t=null;return _.forEach(e,function(e){if("Hired"===e.name)return void(t=e.id)}),t}function w(e){var t=null;return _.forEach(e,function(e){if("Hired"===e.name)return void(t=e.id)}),t}function S(){void 0!=G.showPimTokenValue&&G.showPimTokenValue===T()||(G.showPimTokenValue=T(),D())}function D(){var e=["recruitment"];G.showPimTokenValue&&e.push("pim");var t={modules:e};return a.call("documentTemplateTokens","GET",[],t).then(function(e){G.tokenList=x(e.data.data),m.$broadcast("updateLocalData",{localData:G.tokenList.titleMap})})}function T(){var e=!1;if(G.model){var t=[],a=[],i=[];G.model.vacancies&&(t=Object.keys(G.model.vacancies)),G.model.vacancyEventTypes&&(i=Object.keys(G.model.vacancyEventTypes)),G.model.vacancyEvents&&(a=Object.keys(G.model.vacancyEvents)),G.model.allVacancies||t.length>1?1==i.length&&i[0]==U&&(e=!0):1==t.length&&H[t[0]]&&1==a.length&&a[0]==H[t[0]]&&(e=!0)}return e}function x(e){var a=_.clone(e);return _.forEach(a,function(e,i){void 0!==e.section_name&&(a[i].display_name=e.display_name);var o="",n=t.getLocalizedCustom(e.section_name),l=t.getLocalizedCustom(e.tab_name);l&&n?o=l+" / "+n:l?o=l:n&&(o=n),a[i].actionText=o,a[i].hasDetailedOption=!1,"1"===e.is_multi_attribute&&(a[i].hasDetailedOption=!0)}),s.getEnumAndTitleMapForSelectWithActionText(a,{name:"display_name",value:"name",actionText:"actionText",hasDetailedOption:"hasDetailedOption",detailedOptions:"detailedOptions"})}function F(e){var t="";return _.forEach(e,function(e,a){e.isDefault&&(t=e.id)}),t}function k(e){return _.forEach(e,function(a,i){e[i].name=t.getLocalizedCustom(e[i].name)}),e}function E(e){var t=[];return _.forEach(e,function(e){h.COMMON_VACANCY_EVENT_TYPE_IDS.indexOf(e.id)<0&&t.push(e.id)}),t}function I(e){var a=[],i=!1;return _.forEach(e,function(e){G.inProgressEventTypeIds.indexOf(e.id)>-1?i||(i=!0):a.push(e)}),i&&a.push({id:h.IN_PROGRESS_EVENT_TYPE_ID,name:t.getLocalizedCustom(h.IN_PROGRESS_EVENT_TYPE_NAME)}),a}function A(){G.schema={type:"object",title:"Document Templates",properties:{name:{title:"Name",type:"string",maxLength:100},notificationTemplateId:{title:"Link to Email Template",type:"string","enum":G.notificationTemplateEnumAndTitleMap["enum"]},enableDigitalSign:{title:"Request E-signature",type:"boolean"},allVacancies:{title:"Link To All Vacancies",type:"boolean"},vacancies:{title:t.getLocalizedCustom("Link To Vacancy(s)"),type:"object"},vacancyEvents:{title:t.getLocalizedCustom("Link To Stage(s)"),type:"object"},vacancyEventTypes:{title:t.getLocalizedCustom("Link To Stage(s)"),type:"object"},documentMargin:{title:"Margin",type:"object"},pageSize:{title:"Page Size",type:"string","enum":["A4","A3","B5","B4","B3","Letter"]},description:{title:"Description",type:"string",maxLength:255},templateString:{type:"string"},isTemplateStringEditable:{title:"Allow the user to edit the document",type:"boolean"}},required:["name","vacancies","vacancyEvents","vacancyEventTypes"]},G.form=[{type:"row",items:[{type:"text",htmlClass:"col-8",key:"name",validationMessage:{201:c.textLengthExceedValidation.message(G.schema.properties.name.maxLength),302:t.getLocalizedCustom("Required")}}]},{type:"row",items:[{key:"notificationTemplateId",type:"select",htmlClass:"col-6",placeholder:"Select Email Template",emptyOption:"No Email Template",titleMap:P(s.getSortedObjectList(G.notificationTemplateEnumAndTitleMap.titleMap,"name","ASC"))}]},{type:"row",items:[{type:"checkbox",htmlClass:"col-4 request-e-signature-checkbox",key:"enableDigitalSign",condition:function(){return W}}]},{type:"row",items:[{type:"checkbox",htmlClass:"col-4",key:"allVacancies",onChange:function(e){G.model.vacancies={},G.model.vacancyEvents={},G.model.vacancyEventTypes={},S(),m.$broadcast("schemaFormRedraw")},condition:function(){return G.permittedToCreateDocumentTemplatesForAllVacancies}}]},{type:"row",items:[{type:"autocomplete-multiselect",htmlClass:"col-4",key:"vacancies",choices:G.vacancyChoices,condition:function(){return!G.model.allVacancies},onChange:function(e){var t=Object.keys(e)[0];t&&1===Object.keys(e).length?G.vacancyEventChoices=G.vacancyEventChoiceArray[t]:G.vacancyEventChoices=[],G.model.vacancyEvents={},G.model.vacancyEventTypes={},A(),S()}},{type:"autocomplete-multiselect",htmlClass:"col-4",key:"vacancyEvents",choices:G.vacancyEventChoices,condition:function(){return!O()},onChange:function(e){S()}},{type:"autocomplete-multiselect",htmlClass:"col-4",key:"vacancyEventTypes",choices:G.vacancyEventTypeChoices,condition:function(){return O()},onChange:function(e){S()}}]},{type:"row",items:[{type:"textarea",htmlClass:"col-12",key:"description",validationMessage:{201:c.textLengthExceedValidation.message(G.schema.properties.description.maxLength)}}]},{type:"row",items:[{type:"tinymce",htmlClass:"col-12",maxImageSizeValidationMessage:"*"+t.getLocalizedCustomWithVariables("File size should be less than {{maxSize}}MB",{maxSize:G.attachmentSizeInMb}),key:"templateString",injectable:{injectablePlaceholder:"Select Token",injectableItems:G.tokenList.titleMap,onInjectableItemClick:function(e){if(tinymce&&e)if(e.hasDetailedOption){var t=[];e.detailedOptions.forEach(function(e){e.checked&&t.push(e.key)});var a=t.join("|"),i=e.originalObject.value+"["+a+"]";tinymce.activeEditor.execCommand("mceInsertContent",!1,"#"+i+"#")}else tinymce.activeEditor.execCommand("mceInsertContent",!1,"#"+e.value+"#")},injectableTitleField:"name",injectableSearchField:"name,actionText",injectableActionText:"actionText",clearSelected:!0,enableDetailedDropdown:!0,selectAllDetailedDropdownOptions:!0},tinymceOptions:{}}]},{type:"row",items:[{type:"selective-pills",htmlClass:"col-6",key:"pageSize",titleMap:[{value:"A4",name:"A4"},{value:"A3",name:"A3"},{value:"B5",name:"B5"},{value:"B4",name:"B4"},{value:"B3",name:"B3"},{value:"Letter",name:"Letter"}]},{type:"document-margin",htmlClass:"col-6",key:"documentMargin",ngModelOptions:{allowInvalid:!0},helpMessage:"(mm)",validationMessage:{number:c.numericMaxTwoDecimalPlaces.message},placeholder:"10"}]},{type:"row",items:[{type:"checkbox",htmlClass:"col-4",key:"isTemplateStringEditable",onChange:function(e){G.model.isTemplateStringEditable=e}}]}],G.intervalTinyMCECheck=setInterval(function(){G.documentTemplate.templateString||clearInterval(G.intervalTinyMCECheck),tinymce.activeEditor&&G.documentTemplate.templateString&&(tinymce.activeEditor.setContent(G.documentTemplate.templateString),clearInterval(G.intervalTinyMCECheck))},1e3)}function M(){var e=void 0===G.documentTemplate.isTemplateStringEditable||"1"==G.documentTemplate.isTemplateStringEditable;G.model={name:G.documentTemplate.name,pageSize:G.documentTemplate.pageSize?G.documentTemplate.pageSize:"",description:G.documentTemplate.description,templateString:G.documentTemplate.templateString,token:"",allVacancies:!(Y||!G.permittedToCreateDocumentTemplatesForAllVacancies)&&N(),vacancies:Y?Y:G.documentTemplate.vacancies,vacancyEvents:L(J?J:G.documentTemplate.vacancyEvents),vacancyEventTypes:L($(G.documentTemplate.vacancyEventTypes)),documentMargin:{margin_left:G.documentTemplate.marginLeft?G.documentTemplate.marginLeft:"",margin_right:G.documentTemplate.marginRight?G.documentTemplate.marginRight:"",margin_top:G.documentTemplate.marginTop?G.documentTemplate.marginTop:"",margin_bottom:G.documentTemplate.marginBottom?G.documentTemplate.marginBottom:""},isTemplateStringEditable:e,enableDigitalSign:!!G.documentTemplate.isDigitalSignEnabled&&"1"==G.documentTemplate.isDigitalSignEnabled,notificationTemplateId:G.documentTemplate.id?G.documentTemplate.notificationTemplateId?G.documentTemplate.notificationTemplateId:"":q}}function L(e){for(var a in e)e.hasOwnProperty(a)&&(e[a]=t.getLocalizedCustom(e[a]));return e}function P(e){for(var a=0;a<e.length;a++)e[a].name=t.getLocalizedCustom(e[a].name);return e}function $(e){if(!e)return{};var a=Object.keys(e),i=!1;return _.forEach(G.inProgressEventTypeIds,function(t){a.indexOf(t)>-1&&(delete e[t],i||(i=!0))}),i&&(e[h.IN_PROGRESS_EVENT_TYPE_ID]=t.getLocalizedCustom(h.IN_PROGRESS_EVENT_TYPE_NAME)),e}function N(){return!G.documentTemplate.vacancies||!Object.keys(G.documentTemplate.vacancies).length}function O(){return G.model.allVacancies||G.model.vacancies&&Object.keys(G.model.vacancies).length>1}function R(e){m.$broadcast("schemaFormValidate"),f(function(){if(e.$valid&&G.firstClickValid){G.firstClickValid=!1,l.show(),tinymce&&(G.model.templateString=tinymce.activeEditor.save());var i=angular.copy(G.model);i.marginLeft=i.documentMargin.margin_left,i.marginRight=i.documentMargin.margin_right,i.marginTop=i.documentMargin.margin_top,i.marginBottom=i.documentMargin.margin_bottom,i.isTemplateStringEditable=i.isTemplateStringEditable?1:0,i.enableDigitalSign=i.enableDigitalSign?1:0,angular.extend(G.documentTemplate,i),G.documentTemplate.isDigitalSignEnabled=i.enableDigitalSign,i.vacancyIds=G.model.vacancies?Object.keys(G.model.vacancies):[],i.vacancyEventIds=G.model.vacancyEvents?Object.keys(G.model.vacancyEvents):[],i.vacancyEventTypeIds=G.model.vacancyEventTypes?z(Object.keys(G.model.vacancyEventTypes)):[],delete i.documentMargin,delete i.allVacancies,delete i.vacancies,delete i.vacancyEvents,delete i.vacancyEventTypes,delete i.token,delete i.tinymceImage,i.notificationTemplateId||delete i.notificationTemplateId;var s,c,d,m=G.documentTemplate.id,u="recruitment/documentTemplates";m?(d="PATCH",u+="/"+m,s="updateSuccess",c="Failed to Update"):(d="POST",s="saveSuccess",c="Failed to Add"),a.call(u,d,i,{}).then(function(e){l.hide(),"POST"==d?(o.unshift(e.data.data),n(e.data.data)):"PATCH"==d&&j(G.documentTemplate),n(!0),t.showLocalizedToast(s)},function(e){n(!0),l.hide(),r.error(c)})}})}function z(e){var t=[];return _.forEach(e,function(e){e===h.IN_PROGRESS_EVENT_TYPE_ID?t=t.concat(G.inProgressEventTypeIds):t.push(e)}),t}function j(e){for(var t=0;t<o.length;t++)if(o[t].id==e.id){angular.extend(o[t],e);break}}function V(){n(!1)}var G=this,B={},q="",H=[],U=null,W=!1,Y=v&&v.vacancies?v.vacancies:void 0,J=v&&v.events?v.events:void 0;G.showPimTokenValue=void 0,G.firstClickValid=!0,angular.copy(i,B),G.documentTemplate=B,G.documentTemplate.id?G.title="Edit Document Template":G.title="Add Document Template",G.attachmentSizeInMb=1,tinymce&&g.getSetting("max_attachment_size").then(function(e){G.attachmentSizeInMb=e/1048576,tinymce.image_type_error=function(){r.error(t.getLocalizedCustom("File Type Not Allowed"))},tinymce.image_size_error=function(){r.warning(t.getLocalizedCustomWithVariables("File Size Should Be Less than {{maxSize}}MB",{maxSize:G.attachmentSizeInMb}))},tinymce.max_image_size_=function(){return e}}),G.save=R,G.cancel=V,y()}angular.module("app.recruitment").controller("RecruitmentEditDocumentTemplateController",e),e.$inject=["logger","localizedMessages","webservice","documentTemplate","dataList","close","loader","toast","formHelper","formValidationHelper","$rootScope","$scope","$q","$translate","$timeout","settingsService","recruitmentConstants","selectedData"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g){function h(){$(".material-tooltip").remove(),u.getSinglePermission("recruitment_configuration",void 0,void 0,void 0,["HiringManager"]).then(function(t){if(L.permissions=t,L.permissions.create){var i=[];i[0]=m.getNotificationByIdIncludingHiddenNotifications(L.notificationId);var o={};o.filter={has_work_email:1},i[1]=e.call("employees","GET",[],o),i[2]=m.getSubscriptions(L.notificationId),i[3]=m.getSubscribers(L.notificationId),i[4]=m.getNotificationTemplates(L.notificationId),a.all(i).then(function(e){L.notification=e[0],L.notificationTypeId=e[0].type_id,L.employeeItems=l.getItemsForMultyselectAutocomplete(e[1].data.data,function(e){return{id:e.empNumber,name:e.firstName+" "+e.lastName,employeeId:e.employeeId}}),L.availableSubscriptions=e[2],M=e[3],angular.forEach(M,function(e,t){"Email"==e.type&&A.push(e.email.toLowerCase())}),n.$broadcast("addTopMenuBackButton",{uiSref:"ng_recruitment.subscribers({templateId: "+L.templateId+", notificationId: "+L.notificationId+"})",tooltip:"Subscribers"}),m.getNotificationExtraRoles(L.notification).then(function(e){L.extraRoles=e,L.otherRoles=l.getItemsForMultyselectAutocomplete(b(L.extraRoles),{}),L.formModel.otherRolesAvailable=L.otherRoles.length>0,L.formModel.showNotifyAffectedCandidate=L.notification.notifyAffectedCandidateOptionVisible,L.extraFields=m.getExtraNotificationFields(L.notification),C()}),L.templatesItems=e[4],s.$on("set-template-add",function(e,t){for(var a=t,i=0;i<L.workFlowItems.length;i++)L.workFlowItems[i].subscribed&&(L.workFlowItems[i].template=a)})})}else c.go("403")})}function v(){g.setForcedTitle(["Email Templates"]),n.$broadcast("SingleMenuItemTopRibbonControllerMenuChanged",{menuItem:"Add Subscribers"})}function y(){c.go("ng_recruitment.subscribers",{templateId:L.templateId,notificationId:L.notificationId},{reload:!0})}function b(e){for(var a=[],i=0;i<e.length;i++){var o=e[i];a.push({id:o.id,name:t.getLocalizedCustom(o.display_name)})}return a}function C(){if(L.formSchema={type:"object",title:"Add Subscribers",name:"add_subscribers_form",properties:{employees:{title:o.instant("Employees (with work email)"),type:"object"},otherRoles:{title:o.instant("User Roles"),type:"object"},notifyAffectedCandidate:{title:"Include Candidate as a Subscriber",type:"boolean"},addOtherEmails:{title:"Email Addresses",type:"boolean"},otherEmail_name1:{title:"Name",type:"string",maxLength:100},otherEmail_email1:{title:"Email",type:"string",maxLength:100},addressPart:{title:"Include In",type:"string","enum":["To","Cc"]},template:{title:o.instant("Template"),type:"string","enum":l.getEnumAndTitleMapForSelect(L.templatesItems)["enum"]},exclusions:{title:o.instant("Exclude Employees (with work email)"),type:"object"}},required:["otherEmail_name1","template","otherEmail_email1"]},L.form=[{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l4",key:"notifyAffectedCandidate",condition:"model.showNotifyAffectedCandidate"}]},{type:"section",htmlClass:"row",items:[{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l12",key:"employees",choices:L.employeeItems}]},{type:"section",htmlClass:"row",items:[{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l4",key:"otherRoles",choices:L.otherRoles,condition:"model.otherRolesAvailable"}]},{type:"section",htmlClass:"row",items:[{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l12",key:"exclusions",choices:L.employeeItems,condition:"!model.objectEmpty(model.otherRoles)"}]},{type:"section",htmlClass:"compact-section row",items:[{type:"checkbox",htmlClass:"col s12 m12 l4",key:"addOtherEmails",onChange:function(){s.$broadcast("schemaFormRedraw")}},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l3",key:"otherEmail_name1",condition:"model.addOtherEmails",validationMessage:{302:t.getLocalizedCustom("Required"),201:r.textLengthExceedValidation.message(L.formSchema.properties.otherEmail_name1.maxLength)}},{type:"text",htmlClass:"col s12 m12 l3 offset-l1",key:"otherEmail_email1",condition:"model.addOtherEmails",validationMessage:{email:t.getLocalizedCustom("Expected format: admin@example.com"),302:t.getLocalizedCustom("Required"),201:r.textLengthExceedValidation.message(L.formSchema.properties.otherEmail_email1.maxLength),uniqueEmail:t.getLocalizedCustomWithVariables("Email should be unique"),existEmail:t.getLocalizedCustomWithVariables("Email Already Exist")},$validators:{email:r.email.validator,uniqueEmail:E,existEmail:I},ngModelOptions:{allowInvalid:!0}},{type:"section",htmlClass:"col s1",items:[{type:"icon",iconName:"add_box",htmlClass:"col s1",otherEmailFieldIndex:1,style:{"margin-top":"10px",cursor:"pointer"},onClick:D,condition:"model.addOtherEmails && addVm.otherEmailFieldIds[1]"}]}]}]},{type:"section",htmlClass:"section",items:[{type:"section",htmlClass:"row section-heading",items:[{type:"section-heading",htmlClass:"col s12",text:o.instant("Subscription Settings")}]},{type:"section",htmlClass:"row",items:[{type:"radiobuttons",htmlClass:"col s12 m12 l4",key:"addressPart",titleMap:[{value:"to",name:"To"},{value:"cc",name:"Cc"}]}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l4",key:"template",readonly:!0,titleMap:l.getEnumAndTitleMapForSelect(L.templatesItems).titleMap,validationMessage:{302:t.getLocalizedCustom("Required")}}]}]}],L.extraFields.length>0)for(var e=0;e<L.extraFields.length;e++){var a=L.extraFields[e],i=a;i=i.replace("_"," "),L.formSchema.properties[a]={title:i,type:"string"},L.formSchema.required.push(a),L.form.push({type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l4",key:a}]})}l.addRequiredMessage(L.form),L.otherEmailFieldIds={1:!0},L.otherEmailFieldCount=1}function w(e){if(s.$broadcast("schemaFormValidate"),e.$valid){F();S(L.formModel)}}function S(a){var o={};o.template=a.template,o.addressPart=a.addressPart,o.employees=k(a.employees);var l=k(a.otherRoles);if(l.length>0?o.otherRoles=l:delete o.otherRoles,a.addOtherEmails&&(o.emailSubscribers=F()),L.notification.notifyAffectedCandidateOptionVisible&&(o.notifyAffectedCandidate=a.notifyAffectedCandidate),L.formModel.objectEmpty(o.otherRoles)||(o.exclusions=k(a.exclusions)),L.extraFields.length>0){for(var r={},s=0,c=0;c<L.extraFields.length;c++){var d=L.extraFields[c];void 0!==a[d]&&(s++,r[d]=a[d])}s>0&&(o.params=r)}i.show(),e.call("notifications/"+L.notificationId+"/subscribers","POST",o,[]).then(function(e){e.data.data.length>0?(n.$broadcast("subscribers-added"),y()):(t.warningToast("No Subscribers Added"),i.hide())},function(e){i.hide(),t.errorToast("saveFailure")})}function D(){L.otherEmailFieldCount++,L.otherEmailFieldIds[L.otherEmailFieldCount]=!0;var e={type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s3 l3 offset-l4",key:"otherEmail_name"+L.otherEmailFieldCount,condition:"model.addOtherEmails",validationMessage:{302:t.getLocalizedCustom("Required")}},{type:"text",htmlClass:"col l3 offset-l1",key:"otherEmail_email"+L.otherEmailFieldCount,condition:"model.addOtherEmails",validationMessage:{email:t.getLocalizedCustom("Expected format: admin@example.com"),302:t.getLocalizedCustom("Required"),uniqueEmail:t.getLocalizedCustomWithVariables("Email should be unique"),existEmail:t.getLocalizedCustomWithVariables("Email Already Exist")},$validators:{email:r.email.validator,uniqueEmail:E,existEmail:I},ngModelOptions:{allowInvalid:!0}},{type:"section",htmlClass:"col s1",items:[{type:"icon",iconName:"indeterminate_check_box",htmlClass:"col s1",otherEmailFieldIndex:L.otherEmailFieldCount,style:{"margin-top":"10px",cursor:"pointer"},onClick:T,condition:"model.addOtherEmails"},{type:"icon",iconName:"add_box",htmlClass:"col s1",otherEmailFieldIndex:L.otherEmailFieldCount,style:{"margin-top":"10px",cursor:"pointer"},onClick:D,condition:"model.addOtherEmails  && addVm.otherEmailFieldIds["+L.otherEmailFieldCount+"]"}]}]};L.form[3].items.push(e),L.formSchema.properties["otherEmail_name"+L.otherEmailFieldCount]={title:"Name",type:"string"},L.formSchema.properties["otherEmail_email"+L.otherEmailFieldCount]={title:"Email",type:"string"},L.formSchema.required.push("otherEmail_name"+L.otherEmailFieldCount),L.formSchema.required.push("otherEmail_email"+L.otherEmailFieldCount),x(),s.$broadcast("schemaFormRedraw")}function T(e){for(var t=L.form[3].items,a=!1,i=1;i<t.length;i++)if(e.otherEmailFieldIndex==t[i].items[2].items[0].otherEmailFieldIndex){a=i;break}a&&(L.form[3].items.splice(a,1),delete L.formSchema.properties["otherEmail_name"+e.otherEmailFieldIndex],delete L.formSchema.properties["otherEmail_email"+e.otherEmailFieldIndex],delete L.formSchema.required["otherEmail_name"+e.otherEmailFieldIndex],delete L.formSchema.required["otherEmail_email"+e.otherEmailFieldIndex],delete L.otherEmailFieldIds[e.otherEmailFieldIndex],x(),s.$broadcast("schemaFormRedraw"))}function x(){var e=Object.keys(L.otherEmailFieldIds).reduce(function(e,t){return L.otherEmailFieldIds[e]>L.otherEmailFieldIds[t]?e:t});for(var t in L.otherEmailFieldIds)e==t?L.otherEmailFieldIds[t]=!0:L.otherEmailFieldIds[t]=!1}function F(){var e=[];for(var t in L.otherEmailFieldIds)e.push({name:L.formModel["otherEmail_name"+t],email:L.formModel["otherEmail_email"+t]});return e}function k(e){var t=[];return angular.isObject(e)&&(t=Object.keys(e)),t}function E(e,t){var a=_.pick(L.formModel,function(e,t){return _.startsWith(t,"otherEmail_email")});a=_.mapValues(a,function(e){return _.isString(e)?e.toLowerCase():e});var i=e?e.toLowerCase():e,o=_.filter(a,function(e){return e.match(new RegExp("^"+i+"$"))});return!(_.where(o,i).length>1)}function I(e,t){var a=e?e.toLowerCase():e;return!(A.indexOf(a)>=0&&1==L.notificationTypeId)}var A=[],M=[],L=this;L.notificationId=String(d.notificationId),L.templateId=String(d.templateId),L.notification,L.notificationTypeId,L.availableSubscriptions,L.extraFields=[],L.workFlowItems=[],L.subscribedIds=[],L.formModel={employees:"",adminRoles:"",supervisorRoles:"",supervisorChain:"0",essRoles:"",otherRoles:"",addressPart:"to",addOtherEmails:!1,advancedSettings:!1,templateSettings:!1,subscribed:{},template:L.templateId?L.templateId:"",subscribedTemplate:{},exclusions:"",objectEmpty:function(e){return!angular.isObject(e)||0==Object.keys(e).length}},L.save=w,L.goBackToSubscribers=y,v(),h()}angular.module("app.recruitment").controller("RecruitmentAddSubscribersController",e),e.$inject=["webservice","localizedMessages","$q","loader","$translate","$rootScope","formHelper","formValidationHelper","$scope","$state","$stateParams","emailSubscriptionsService","datagroupPermissions","ModalService","emailSubscriberHelper","titleService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h){function v(){var a={notification:r.getNotificationByIdIncludingHiddenNotifications(""+P.notificationId),subscribers:r.getSubscribers(""+P.notificationId),employees:t.call("employees","GET",[],{filter:{has_work_email:1}}),permissions:p.getSinglePermission("recruitment_configuration",void 0,void 0,void 0,["HiringManager"]),templates:r.getNotificationTemplates(""+P.notificationId),subscriptions:r.getSubscriptions(""+P.notificationId),templateData:r.getSubscribedTemplates(""+P.notificationId,""+P.subscriberId)};i.all(a).then(function(t){P.employeeItems=e.getItemsForMultyselectAutocomplete(t.employees.data.data,function(e){return{id:e.empNumber,name:e.firstName+" "+e.lastName,employeeId:e.employeeId}}),P.notification=t.notification,P.notificationTypeId=P.notification.type_id,P.permission=t.permissions,P.templatesItems=t.templates,P.subscriber=w(P.subscriberId,t.subscribers),P.subscriptions=P.subscriber.Subscriptions,P.availableSubscriptions=t.subscriptions,P.templateData=t.templateData,C(P.notification),P.parameters=JSON.parse(P.subscriber.parameters),N=null!==JSON.parse(P.notification.parameters)&&JSON.parse(P.notification.parameters).email_subscriber_schedule,
c.$broadcast("addTopMenuBackButton",{uiSref:"ng_recruitment.subscribers({templateId: "+P.templateId+", notificationId: "+P.notificationId+"})",tooltip:"Subscribers"})})}function y(){h.setForcedTitle(["Email Templates"]),c.$broadcast("SingleMenuItemTopRibbonControllerMenuChanged",{menuItem:"Edit Subscriber"})}function b(){m.go("ng_recruitment.subscribers",{templateId:P.templateId,notificationId:P.notificationId},{reload:!0})}function C(e){var t={extraRoles:r.getNotificationExtraRoles(e)};i.all(t).then(function(e){P.userRoles=S(e.extraRoles),D()})}function w(e,t){for(var a=0;a<t.length;a++)if(t[a].id===""+e)return t[a]}function S(e){for(var t=[],i=0;i<e.length;i++){var o=e[i];t.push({value:{id:o.id,type:o.typeId},name:a.getLocalizedCustom(o.display_name)})}return t.sort(function(e,t){var a=e.name.toUpperCase(),i=t.name.toUpperCase();return a<i?-1:a>i?1:0}),t}function D(){P.schema={type:"object",title:"Subscriber",readonly:!P.permission.update,properties:{employeeSubscriber:{title:l.instant("Employee"),type:"object"},userRole:{title:l.instant("User Role"),type:"object"},name:{title:"Name",type:"string"},email:{title:"Email",type:"string"},toOrCc:{title:"Include In",type:"string","enum":M()["enum"]},template:{title:"Template",type:"string","enum":e.getEnumAndTitleMapForSelect(P.templatesItems)["enum"]},exclusions:{title:l.instant("Exclude Employees (with work email)"),type:"object"}},required:["employeeSubscriber","template"]},P.form=[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"row",items:[{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l12",key:"exclusions",choices:P.employeeItems,condition:"(modal.subscriber.type === 'UserRole') || ((modal.subscriber.type === 'Employee') && (modal.subscriber.Employee == undefined)) || ((modal.parameters !== null && modal.parameters.restrict_employees))"}]},{type:"section",htmlClass:"row section-heading",items:[{type:"section-heading",htmlClass:"col s12",text:l.instant("Subscription Settings")}]},{type:"radiobuttons",htmlClass:"col s12 m12 l4",key:"toOrCc",titleMap:M().titleMap}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l4",key:"template",readonly:!0,titleMap:e.getEnumAndTitleMapForSelect(P.templatesItems).titleMap}]}],P.subscriberTemplate=P.templateData,P.model={name:P.subscriber.name,email:P.subscriber.email,template:P.subscriberTemplate,toOrCc:null===P.subscriber.address_part?"to":P.subscriber.address_part,advancedSettings:!1,templateSettings:!1,exclusions:{}};for(var t in P.subscriber.exclusions)if(P.subscriber.exclusions.hasOwnProperty(t)){var a=_.find(P.employeeItems,{id:P.subscriber.exclusions[t]});a&&(P.model.exclusions[P.subscriber.exclusions[t]]=a.name)}if("Employee"===P.subscriber.type&&P.subscriber.emp_number&&(P.model.employeeSubscriber={empNumber:P.subscriber.emp_number,employeeId:P.subscriber.Employee.employeeId,fullName:P.subscriber.name}),"UserRole"===P.subscriber.type||"CustomUserRole"===P.subscriber.type){var i=_.find(P.userRoles,{value:{id:P.subscriber.user_role_id+""}});i&&(P.model.userRole=i.value)}var o=x();P.form[0].items=o.concat(P.form[0].items)}function T(e,t){return!0}function x(){switch(P.subscriber.type){case"Employee":return F();case"UserRole":case"CustomUserRole":return k();case"Email":return E();case"Custom":}return I()}function F(){if(P.subscriber.emp_number){var e=[{type:"auto-complete",htmlClass:"col s12",key:"employeeSubscriber",idsToSkip:[],placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",required:!0,requireSelection:!0,has_work_email:1}];return e}return I()}function k(){var e=[{type:"select",htmlClass:"col s12",key:"userRole",required:!0,titleMap:P.userRoles},{type:"radiobuttons",htmlClass:"col s12 m12 l12",key:"supervisorChain",titleMap:[{value:"0",name:a.getLocalizedCustom("Immediate Supervisors Only")},{value:"1",name:a.getLocalizedCustom("Entire Supervisor Chain")}],condition:"model.userRole.type == "+$}];return e}function E(){var e=[{type:"text",htmlClass:"col s6",key:"name",required:!0},{type:"text",htmlClass:"col s6",key:"email",required:!0,validationMessage:{email:a.getLocalizedCustom("Expected format: admin@example.com"),uniqueEmail:a.getLocalizedCustomWithVariables("Email should be unique")},$validators:{email:s.email.validator,uniqueEmail:T}}];return e}function I(){var e=[{type:"readonly",label:"Subscriber",htmlClass:"col s12",value:P.subscriber.name}];return e}function A(e){var t=[];return angular.isObject(e)&&(t=Object.keys(e)),t}function M(){var e=[{value:"to",name:"To"},{value:"cc",name:"Cc"}],t=["To","Cc"];return null!==P.parameters&&P.parameters.include_bcc&&(e.push({value:"bcc",name:"Bcc"}),t.push("Bcc")),{titleMap:e,"enum":t}}function L(e){if(P.permission&&(d.$broadcast("schemaFormValidate"),e.$valid)){var t=angular.copy(P.subscriber);switch(delete t.Subscriptions,delete t.UserRole,t.address_part=P.model.toOrCc,("UserRole"===t.type||"Employee"===t.type&&void 0===t.Employee||null!==P.parameters&&P.parameters.restrict_employees)&&(t.exclusions=A(P.model.exclusions)),t.type){case"Employee":t.emp_number=void 0!==P.model.employeeSubscriber?P.model.employeeSubscriber.empNumber:"",delete t.Employee;break;case"UserRole":if(t.user_role_id=P.model.userRole.id,P.model.userRole.type==$){var a={};t.parameters&&(a=JSON.parse(t.parameters)),a.supervisor_chain="1"===P.model.supervisorChain?"on":"off",t.parameters=a}break;case"Email":t.name=P.model.name,t.email=P.model.email;break;case"Custom":}""===t.emp_number&&(t.type="Custom"),t.template=P.model.template;for(var i=[],l=0;l<P.subscriptions.length;l++)null!==P.subscriptions[l].id&&i.push(P.subscriptions[l].id);t.affectedSubscriptions=i,o.show(),r.saveSubscriber(P.notification.id,t).then(function(e){c.$broadcast("subscribers-edited"),b()},function(e){n.error(e),o.hide()})}}var P=this,$="3",N="";P.notificationId=u.notificationId,P.templateId=u.templateId,P.subscriberId=u.subscriber,P.notificationTypeId,P.workFlowItems=[],P.subscribedIds=[],P.subscriber,P.notification,P.permission,P.availableSubscriptions,P.subscriptions,P.subscriberTemplate="",P.templateData,P.parameters=[],P.schema={},P.form=[],P.model={},P.notifyAfterNotifications=["Online Assessment Courses - Course Overdue Notification"],P.save=L,P.goBackToSubscribers=b,y(),v()}angular.module("app.recruitment").controller("RecruitmentEmailSubscriptionsEditSubscriberController",e),e.$inject=["formHelper","webservice","localizedMessages","$q","loader","toast","$translate","emailSubscriptionsService","formValidationHelper","$rootScope","$scope","$state","$stateParams","datagroupPermissions","ModalService","emailSubscriberHelper","titleService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(){var t=[];t.push(m.getNotificationByIdIncludingHiddenNotifications(E.notificationId)),t.push(m.getSubscribers(E.notificationId,I)),t.push(u.getSinglePermission("recruitment_configuration",void 0,void 0,void 0,["HiringManager"])),t.push(m.getSubscriptions(E.notificationId)),e.all(t).then(function(e){E.notification=e[0],E.extraFields=m.getExtraNotificationFields(E.notification),l.$broadcast("addTopMenuBackButton",{uiSref:"ng_recruitment.emailTemplates",tooltip:"Email Templates"}),E.permissions=e[2],E.permissions.read||(r.hide(),c.go("403")),E.subscriptions=e[3],2==E.notification.type_id?b(E.subscriptions).then(function(){E.subscribers=e[1],_(),y()}):(E.subscribers=e[1],_(),y())}),n.$on("subscribers-added",function(e,t){v(),p.successToast("saveSuccess")}),n.$on("subscribers-edited",function(e,t){v(),p.successToast("updateSuccess")})}function h(){o.setForcedTitle(["Email Templates"]),l.$broadcast("SingleMenuItemTopRibbonControllerMenuChanged",{menuItem:"Subscribers"})}function v(){var t=[];t.push(m.getSubscribers(E.notificationId,I)),t.push(m.getSubscriptions(E.notificationId)),e.all(t).then(function(e){b(e[1]).then(function(){E.subscribers=e[0],E.subscriptions=e[1]})})["finally"](function(){r.hide()})}function y(){0==E.subscribers.length&&p.infoToast("No Records Found")}function b(t){for(var i=[],o=0;o<t.length;o++){var n=t[o],l=n.affected_emp_number;l&&i.push(l)}if(i.length>0){var r={};return r.filter={employee_id_list:i},a.call("employees","GET",[],r).then(function(e){E.affectedEmployees=e.data.data})}return e(function(e,t){e(!0)})}function C(e){c.go("ng_recruitment.subscribers.edit",{notificationId:E.notificationId,templateId:E.templateId,subscriber:e.id})}function w(e,t){return"UserRole"===t.type?e+=" ("+i.instant("User Role")+")":"Email"===t.type&&(e+=" <"+t.email+">"),e}function _(){var e=[{name:"subscriber",lable:"Subscriber",getter:"name",formatter:w},{name:"template",lable:"Template",getter:"template_name"},{name:"to_cc",lable:"Recipient Type",getter:"address_part",filters:[{name:"translate"}],formatter:function(e,t){return"cc"===e?"Cc":"bcc"===e?"Bcc":"To"}}],t=["5%","40%","30%","25%"],a=[{action:"deleteSelectedSubscribers",lable:"Delete Selected",actionPermission:E.permissions["delete"]}],i=[],o=[];E.permissions.update&&(o.push({icon:"edit_item",clickAction:"editSubscriber",tooltip:"Edit"}),t=["5%","40%","25%","25%","5%"]),E.permissions["delete"]||t.shift(),E.unselectableIds=[];for(var n=0;n<E.subscribers.length;n++){var l=E.subscribers[n],r=JSON.parse(l.parameters);null!==r&&void 0!==r.prevent_delete&&r.prevent_delete===!0&&E.unselectableIds.push(l.id)}E.listData={name:"Subscribers",selectable:!0,selected:[],unselectableIds:E.unselectableIds,idGetter:["id"],listFields:e,extraTH:i,extraTD:o,showColumnsAnyway:!0,permission:E.permissions,columnWidths:t,listActions:a}}function S(){E.listData.selected.length>0&&t.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&D()})})}function D(){var e=E.listData.selected.length;e>0&&(r.show(),m.deleteSubscribers(E.notificationId,E.listData.selected).then(function(e){r.hide(),T(E.listData.selected),p.showLocalizedToast("deleteSuccess")},function(e){r.hide(),s.error(e)}))}function T(e){for(var t=E.subscribers.length-1;t>=0;t--){var a=e.indexOf(E.subscribers[t].id);a>-1&&(e.splice(a,1),E.subscribers.splice(t,1))}}function x(e){var t=e.obj;if(E.unselectableIds.indexOf(t.id)===-1)if(t.selected)E.listData.selected.push(t.id);else{var a=E.listData.selected.indexOf(t.id);a>-1&&E.listData.selected.splice(a,1)}}function F(){E.listData.selected=[];for(var e=0;e<E.subscribers.length;e++){var t=E.subscribers[e];E.unselectableIds.indexOf(t.id)===-1&&(t.selected=!0,E.listData.selected.push(t.id))}}function k(){E.listData.selected=[];for(var e=0;e<E.subscribers.length;e++)E.subscribers[e].selected=!1}var E=this;E.templateId=String(d.templateId),E.notificationId=String(d.notificationId);var I={filters:{templateIds:[E.templateId]}};E.permissions,E.notification,E.subscribers,E.subscriptions,E.listData,E.unselectableIds,E.affectedEmployees={},E.extraFields=[],E.state=c,E.notifyAfterNotifications=["Online Assessment Courses - Course Overdue Notification"],E.editSubscriber=C,E.changeSelection=x,E.selectAll=F,E.deselectAll=k,E.deleteSelectedSubscribers=S,h(),g()}angular.module("app.admin").controller("RecruitmentEmailSubscribersController",e),e.$inject=["$q","ModalService","webservice","$translate","titleService","$scope","$rootScope","loader","toast","$state","$stateParams","emailSubscriptionsService","datagroupPermissions","localizedMessages","modalHelperService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(){function e(){var e=[],a="GET";e[0]=t.call("/notifications/subscriber-templates/"+w.template_id,a,{},{}),e[1]=p.getNotificationTemplates(w.notification_id),s.all(e).then(function(e){w.template=e[0].data.data;for(var t=e[1],a=0;a<t.length;a++)w.templatesNames.push(t[a].name.toLowerCase());h()})}e()}function h(){w.schema={type:"object",title:"Email Templates",properties:{name:{title:"Name",type:"string",maxLength:200}},required:["name"]},w.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"name",validationMessage:{201:f.textLengthExceedValidation.message(w.schema.properties.name.maxLength),302:e.getLocalizedCustom("Required"),uniqueName:e.getLocalizedCustom("Notification template name must be unique")},$validators:{uniqueName:v}}]}],n.addRequiredMessage(w.form),w.model={name:r.instant("Copy of")+" "+e.getLocalizedCustom(w.template.name)}}function v(e,t){return w.templatesNames.indexOf(e.toLowerCase())<0}function y(n){if(l.$broadcast("schemaFormValidate",n.$name),C(),n.$valid){i.show(),angular.extend(w.template,w.model);var s,c,d,m=(w.template_id,"notifications/copy-subscriber-templates");d="POST",s="saveSuccess",c="Failed to Add",t.call(m,d,{id:w.template_id,name:w.model.name},{}).then(function(t){i.hide(),e.showLocalizedToast(s),u.unshift(t.data)},function(e){i.hide(),o.error(r.instant(c))}),a(!0)}}function b(){a(!1)}function C(){w.model.name.length>w.schema.properties.name.maxLength?l.$broadcast("schemaForm.error.name","tv4-201",!1):l.$broadcast("schemaForm.error.name","tv4-201",!0)}var w=this;w.notification_id=c,w.template_id=d,w.mode=m,w.template=null,w.title="Copy Email Template",w.save=y,w.cancel=b,w.templatesNames=[],g()}angular.module("app.recruitment").controller("RecruitmentCopyEmailTemplateController",e),e.$inject=["localizedMessages","webservice","close","loader","toast","formHelper","$scope","$translate","$q","notification_id","template_id","mode","dataList","emailSubscriptionsService","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g){function h(){var e="";e="Add Email Template",F&&(e="Edit Email Template"),n.$broadcast("SingleMenuItemTopRibbonControllerMenuChanged",{menuItem:e}),n.$broadcast("addTopMenuBackButton",{uiSref:"ng_recruitment.emailTemplates",tooltip:"Email Templates"})}function v(){var e=[],a="GET";e.push(p.getNotificationByIdIncludingHiddenNotifications(x.notificationId)),e.push(p.getNotificationTemplates(x.notificationId)),e.push(t.call("recruitment/documentNotificationTemplates","GET",[])),F&&e.push(t.call("/notifications/subscriber-templates/"+x.templateId,a,{},{})),r.all(e).then(function(e){x.notification=e[0];for(var t=e[1],a=0;a<t.length;a++)""+t[a].id!==x.templateId&&x.templatesNames.push(t[a].name.toLowerCase());x.supportedTokens=e[2].data.meta.supportedTokens,F&&(x.template=e[3].data.data),y()})}function y(){u.setForcedTitle(["Email Templates"]),x.schema={type:"object",title:"Email Templates",properties:{name:{title:"Name",type:"string",maxLength:200},subject:{title:"Subject",type:"string",maxLength:255},body:{title:"Body",type:"string"},isDefault:{title:"Set as Default",type:"boolean"}},required:["name","subject","body"]},x.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"name",validationMessage:{201:f.textLengthExceedValidation.message(x.schema.properties.name.maxLength),302:e.getLocalizedCustom("Required"),uniqueName:e.getLocalizedCustom("Notification template name must be unique")},$validators:{uniqueName:w}}]},{type:"section",htmlClass:"row",items:[{type:"textarea",htmlClass:"col s12 m12 l12",key:"subject",validationMessage:{201:f.textLengthExceedValidation.message(x.schema.properties.subject.maxLength)}}]},{type:"section",htmlClass:"row",items:[{type:"tinymce",htmlClass:"col s12",labelHtmlClass:"active-collection-label",tinymceOptions:{toolbar1:"insertfile undo redo | bold italic style-p | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image image-upload | forecolor backcolor | fontselect fontsizeselect"},key:"body",maxImageSizeValidationMessage:"*"+e.getLocalizedCustomWithVariables("File size should be less than {{maxSize}}MB",{maxSize:x.attachmentSizeInMb}),validationMessage:{302:e.getLocalizedCustom("Required")}}]},{type:"section",htmlClass:"row",items:[{type:"help",htmlClass:"col",helpvalue:b()}]},{type:"section",htmlClass:"row",items:[{key:"isDefault",type:"checkbox",htmlClass:"col s12 m12 l12"}]}],o.addRequiredMessage(x.form),C(),l.$on("sf-render-finished",function(){l.$broadcast("$tinymce:refresh")}),F&&(x.intervalTinyMCECheck=setInterval(function(){x.template.body||clearInterval(x.intervalTinyMCECheck),tinymce.activeEditor&&x.template.body&&(tinymce.activeEditor.setContent(x.template.body),clearInterval(x.intervalTinyMCECheck))},1e3))}function b(){var t=x.supportedTokens.join(", ");return"<br/>"+e.getLocalizedCustom("You can use the following tokens to generalize your email template. Simply copy & paste these tokens into the email body.")+"<br/>"+e.getLocalizedCustom("Tokens")+":"+t+"<br/><br/>"}function C(){F?x.model={name:e.getLocalizedCustom(x.template.name),subject:x.template.subject,body:x.template.body,isDefault:x.template.isDefault}:x.model={notificationId:x.notificationId,name:"",subject:"",body:"",isDefault:!1}}function w(e,t){return x.templatesNames.indexOf(e.toLowerCase())<0}function _(){d.go("ng_recruitment.emailTemplates")}function S(e){l.$broadcast("schemaFormValidate"),c(function(){e.$valid&&(a.show(),tinymce&&(x.model.body=tinymce.activeEditor.save()),F?D():T())})}function D(){var o,n,l=x.templateId;o="updateSuccess",n="Failed to Update",angular.extend(x.template,x.model),t.call("notifications/subscriber-templates/"+l,"PATCH",x.model,{}).then(function(t){a.hide(),e.showLocalizedToast(o)},function(e){a.hide(),i.error(n)})}function T(){var e,o;e="saveSuccess",o="saveFailure",t.call("notifications/subscriber-templates","POST",x.model,{}).then(function(e){a.hide(),localStorage.setItem("toast","saveSuccess"),_()},function(e){a.hide(),i.error(o)})}var x=this;x.template=null,x.notificationId=m.notificationId,x.templateId=m.id;var F=!1;x.templateId&&(F=!0),h(),x.templatesNames=[],x.attachmentSizeInMb=1,tinymce&&g.getSetting("max_attachment_size").then(function(t){x.attachmentSizeInMb=t/1048576,tinymce.image_type_error=function(){i.error(e.getLocalizedCustom("File Type Not Allowed"))},tinymce.image_size_error=function(){i.warning(e.getLocalizedCustomWithVariables("File Size Should Be Less than {{maxSize}}MB",{maxSize:x.attachmentSizeInMb}))},tinymce.max_image_size_=function(){return t}}),x.save=S,x.backToList=_,v()}angular.module("app.recruitment").controller("RecruitmentEditEmailTemplateController",e),e.$inject=["localizedMessages","webservice","loader","toast","formHelper","$rootScope","$scope","$q","$translate","$timeout","$state","$stateParams","titleService","emailSubscriptionsService","formValidationHelper","settingsService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g){function h(){null!==localStorage.getItem("toast")&&(n.showLocalizedToast(localStorage.getItem("toast")),localStorage.removeItem("toast"))}function v(){s.show(),f.fetchNotificationTypesIncludingHiddenNotifications().then(function(e){N.notification=b(e),N.notificationId=N.notification.id,y()},function(){s.hide(),m.go("403")})}function y(){var e=[];e.push(f.getNotificationTemplates(N.notificationId)),e.push(g.getSinglePermission("recruitment_configuration",void 0,void 0,void 0,["HiringManager"])),i.all(e).then(function(e){N.emailTemplates=e[0],N.permissions=e[1],N.allowCopyTemplate=f.isListActionAllowed(N.notification,O)&&N.permissions.create,C(),N.emailTemplatesListHelper=new t.list(N.listData.emailTemplates,N.emailTemplates),s.hide(),0==N.emailTemplates.length&&n.infoToast("No Records Found")},function(e){s.hide(),m.go("403")})}function b(e){for(var t=null,a=0;a<e.length;a++)if(e[a].name==R&&e[a].Notification)for(var i=0;i<e[a].Notification.length;i++)e[a].Notification[i].name==z&&(t=e[a].Notification[i]);return t}function C(){E();var e=[{name:"name",lable:"Template Name",getter:"name",filters:[{name:"translate"}]}],t=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:N.permissions["delete"]}],a=3;N.allowCopyTemplate||a--,N.permissions.update||a--;var i=[{heading:"Subscribers"},{heading:"Template Settings",colspan:a}],o=[{icon:"supervisor_account",clickAction:"configureTemplateSubscribers",tooltip:"Configure Subscribers"},{icon:"visibility",clickAction:"viewTemplate",tooltip:"View Template"}];N.permissions.update&&o.push({icon:"edit",clickAction:"editTemplate",tooltip:"Edit Template"}),N.allowCopyTemplate&&o.push({icon:"content_copy",clickAction:"copyTemplate",tooltip:"Copy Template"});var n=w();N.listData={emailTemplates:{name:"templates",selectable:!0,selected:[],unselectableIds:N.unselectableIds,idGetter:["id"],listFields:e,extraTH:i,extraTD:o,showColumnsAnyway:!0,permission:N.permissions,columnWidths:n,listActions:t}}}function w(){var e=[10,5];N.allowCopyTemplate&&e.push(5),N.permissions.update&&e.push(5);var t=100-e.reduce(function(e,t){return e+t},0);N.permissions["delete"]?(e.unshift(t-5),e.unshift(5)):e.unshift(t);for(var a=[],i=0;i<e.length;i++)a.push(e[i]+"%");return a}function _(e){var t=e.id;o.showModal({templateUrl:"app/recruitment/emailTemplates/templateView/view-email-template.html",controller:"RecruitmentViewEmailTemplateController",controllerAs:"modal",inputs:{notification_id:N.notificationId,template_id:t,dataList:N.emailTemplates,mode:"view"}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function S(e){var t=e.id;m.go("ng_recruitment.edit_email_template",{id:t,notificationId:N.notificationId})}function D(){m.go("ng_recruitment.edit_email_template",{id:null,notificationId:N.notificationId})}function T(e){f.isListActionAllowed(N.notification,N.changeSubscriberActionKey)&&m.go("ng_recruitment.subscribers",{templateId:e.id,notificationId:N.notificationId})}function x(e){u.showModal("app/recruitment/documentTemplates/edit/document_templates_modal.html","RecruitmentEditDocumentTemplateController","modal",{documentTemplate:e,dataList:N.emailTemplates})}function F(){var e=N.listData.emailTemplates.selected;e.length>0&&(s.show(),f.deleteTemplates(N.notificationId,e).then(function(t){s.hide(),k(e),n.showLocalizedToast("deleteSuccess")},function(e){s.hide(),c.error(e)}))}function k(e){for(var t=N.emailTemplates.length-1;t>=0;t--){var a=e.indexOf(N.emailTemplates[t].id);a>-1&&(e.splice(a,1),N.emailTemplates.splice(t,1))}A()}function E(){for(var e=0;e<N.emailTemplates.length;e++){var t=N.emailTemplates[e];t.undeletable&&N.unselectableIds.push(t.id)}}function I(){N.listData.emailTemplates.selected=[];for(var e=0;e<N.emailTemplates.length;e++){var t=N.emailTemplates[e];N.unselectableIds.indexOf(t.id)===-1&&(t.selected=!0,N.listData.emailTemplates.selected.push(t.id))}}function A(){N.listData.emailTemplates.selected=[];for(var e=0;e<N.emailTemplates.length;e++)N.emailTemplates[e].selected=!1}function M(e){var t=e.obj;if(t.selected)N.listData.emailTemplates.selected.push(t.id);else{var a=N.listData.emailTemplates.selected.indexOf(t.id);a>-1&&N.listData.emailTemplates.selected.splice(a,1)}}function L(){N.listData.emailTemplates.selected.length>0&&o.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&F()})})}function P(e){var t=e.id;o.showModal({templateUrl:"app/recruitment/emailTemplates/templateCopy/copy-email-template.html",controller:"AdminCopyEmailTemplateController",controllerAs:"modal",inputs:{notification_id:N.notificationId,template_id:t,dataList:N.emailTemplates,mode:"copy"}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}var N=this,O="copy_templates",R="Other",z="Recruitment Document Notification";N.emailTemplates="",N.unselectableIds=[],N.editItem=x,N.changeSelection=M,N.deleteSelection=L,N.viewTemplate=_,N.editTemplate=S,N.copyTemplate=P,N.addTemplate=D,N.configureTemplateSubscribers=T,N.selectAll=I,N.deselectAll=A,h(),v()}angular.module("app.recruitment").controller("RecruitmentEmailTemplatesController",e),e.$inject=["logger","listHelper","$window","$q","ModalService","localizedMessages","webservice","$rootScope","loader","toast","$translate","$state","modalHelperService","recruitmentConstants","emailSubscriptionsService","datagroupPermissions"]}(),function(){"use strict";function e(e,t,a,i,o,n,l){function r(){var t=[],i="GET";t.push(e.call("/notifications/subscriber-templates/"+c.template_id,i,{},{}).then(function(e){c.template=e.data.data})),a.all(t).then(function(e){c.title=n.getLocalizedCustom("View Template")+" - "+n.getLocalizedCustom(c.template.name),c.subject=c.template.subject,c.body=o.trustAsHtml(l.sanitizeTinymceContent(c.template.body))})}function s(){t(!1)}var c=this;c.template_id=i,c.template=null,c.title="",c.subject="",c.body="",c.cancel=s,r()}angular.module("app.recruitment").controller("RecruitmentViewEmailTemplateController",e),e.$inject=["webservice","close","$q","template_id","$sce","localizedMessages","sanitizeService"]}(),function(){"use strict";angular.module("app.recruitment").constant("recruitmentConstants",{COMMON_VACANCY_EVENT_TYPE_IDS:["6","7","8","1","9"],IN_PROGRESS_EVENT_TYPE_ID:"-1",IN_PROGRESS_EVENT_TYPE_NAME:"In Progress",RECRUITMENT_DOCUMENT_NOTIFICATION:"Recruitment Document Notification",OTHER_NOTIFICATION_TYPE:"Other"})}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"recruitment",config:{"abstract":!0,url:"/recruitment",template:"<ui-view/>"}},{state:"ng_recruitment",config:{"abstract":!0,url:"/recruitment",template:"<ui-view/>"}},{state:"recruitment.vacancies",config:{url:"/vacancies",views:{"":{controller:"VueController"}},data:{hideMainMenu:!1,mainMenu:!1,oxd:!0,vueComponent:["recruitment","vacancies"]},params:{vacancyId:null,filterParameters:null,calledFromMyShortcuts:null}}},{state:"recruitment.candidates",config:{url:"/candidates/:vacancyId",views:{"":{controller:"VueController"}},data:{hideMainMenu:!1,mainMenu:!1,oxd:!0,vueComponent:["recruitment","candidates"],vueLayout:["layout","default"],addShortcut:!0},params:{vacancyId:null,filterParameters:null,calledFromMyShortcuts:null}}},{state:"recruitment.candidateProfile","abstract":!0,config:{url:"/candidateProfile",views:{"":{controller:"VueController"}},data:{hideLeftMenu:!0,oxd:!0,title:"Candidate Profile",vueComponent:["recruitment","candidateProfile"]}}},{state:"recruitment.candidateProfile.view",config:{url:"/candidateId/:candidateId/vacancyId/:vacancyId",params:{vacancyId:null,candidateId:null}}},{state:"ng_recruitment.documentTemplates",config:{url:"/documentTemplates",views:{"":{templateUrl:"app/recruitment/documentTemplates/document_templates.html",controller:"RecruitmentDocumentTemplatesController",controllerAs:"documentTemplates"}},data:{title:"Document Templates"}}},{state:"ng_recruitment.emailTemplates",config:{url:"/emailTemplates",views:{"":{templateUrl:"app/recruitment/emailTemplates/templateList/email_templates.html",controller:"RecruitmentEmailTemplatesController",controllerAs:"vm"}},data:{title:"Email Templates"}}},{state:"ng_recruitment.edit_email_template",config:{url:"/emailTemplate/:id/notification/:notificationId",views:{"":{templateUrl:"app/recruitment/emailTemplates/templateEdit/edit-email-template.html",controller:"RecruitmentEditEmailTemplateController",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:"SingleMenuItemTopRibbonController",controllerAs:"vm"}},data:{initialState:"ng_recruitment.emailTemplates"},params:{id:null,notificationId:null}}},{state:"ng_recruitment.subscribers",config:{url:"/emailTemplate/:templateId/notification/:notificationId/subscribers",views:{"":{templateUrl:"app/recruitment/emailTemplates/subscriberList/email-subscribers.html",controller:"RecruitmentEmailSubscribersController",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:"SingleMenuItemTopRibbonController",controllerAs:"vm"}},data:{},params:{templateId:null,notificationId:null}}},{state:"ng_recruitment.subscribers.edit",config:{url:"/edit/{subscriber:int}",views:{"":{templateUrl:"app/recruitment/emailTemplates/subscriberEdit/edit-subscriber.html",controller:"RecruitmentEmailSubscriptionsEditSubscriberController",controllerAs:"modal"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:"SingleMenuItemTopRibbonController",controllerAs:"vm"}},data:{},params:{templateId:null,notificationId:null,subscriber:null}}},{state:"ng_recruitment.subscribers.add",config:{url:"/add",views:{"":{templateUrl:"app/recruitment/emailTemplates/subscriberAdd/add-subscribers.html",controller:"RecruitmentAddSubscribersController",controllerAs:"addVm"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:"SingleMenuItemTopRibbonController",controllerAs:"vm"}},data:{}}}]}angular.module("app.recruitment").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"reports_and_analytics",config:{"abstract":!0,url:"/reports_and_analytics"}},{state:"reports_and_analytics.catalogue",config:{url:"/catalogue",views:{"":{controller:"VueController"}},data:{hideMainMenu:!1,oxd:!0,vueComponent:["reportsAndAnalytics"]}}},{state:"reports_and_analytics.schedule_reports",config:{url:"/scheduled_reports",views:{"":{controller:"VueController"}},data:{hideMainMenu:!1,mainMenu:!1,oxd:!0,vueComponent:["reportsAndAnalytics"]}}},{state:"reports_and_analytics.schedule_report",config:{url:"/scheduled_report/scheduleId/:scheduleId",views:{"":{controller:"VueController"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:"ScheduleReportController",controllerAs:"vm"}},data:{hideLeftMenu:!1,oxd:!0,vueComponent:["reportsAndAnalytics"]},params:{scheduleId:null}}}]}angular.module("app.reports-and-analytics").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t){function a(){e.$broadcast("addTopMenuBackButton",{uiSref:"reports_and_analytics.schedule_reports",tooltip:"Scheduled Reports"})}function i(){a(),o.menuItem=n}var o=this;o.scheduleId=t.scheduleId,o.menuItem=null;var n=o.scheduleId?"Edit Schedule":"Add Schedule";i()}angular.module("app.core").controller("ScheduleReportController",e),e.$inject=["$rootScope","$stateParams"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){function m(){w(),u()}function u(){_.schema={type:"object",title:"Filter By",name:"filter_by",properties:{matrixPeriodFrom:{title:"Matrix Period From",type:["null","object"]},matrixPeriodTo:{title:"Matrix Period To",type:["null","object"]},subunit:{title:a.instant("Sub Unit"),type:"string","enum":l["enum"]},location:{title:a.instant("Location"),type:"string","enum":r["enum"]},jobTitle:{title:a.instant("Job Title"),type:"string","enum":s["enum"]},include:{title:a.instant("Include"),type:"string","enum":c["enum"]},selectedSupervisor:{title:a.instant("Supervisor"),type:"object"},selectedEmployee:{title:a.instant("Employee Name"),type:"object"}},required:["matrixPeriodFrom","matrixPeriodTo"]},p()}function p(){_.form=[{type:"row",items:[{type:"date",htmlClass:"col-6",key:"matrixPeriodFrom",validationMessage:{beforeToDate:i.getLocalizedCustom("From date should be before to date")},$validators:{beforeToDate:h}},{type:"date",htmlClass:"col-6",key:"matrixPeriodTo",validationMessage:{afterFromDate:i.getLocalizedCustom("To date should be after from date")},$validators:{afterFromDate:v}}]},{type:"row",items:[{type:"select",htmlClass:"col-6",key:"subunit",emptyOption:"All",titleMap:l.titleMap},{type:"select",htmlClass:"col-6",key:"location",emptyOption:"All",titleMap:r.titleMap}]},{type:"row",items:[{type:"select",htmlClass:"col-6",key:"jobTitle",emptyOption:"All",titleMap:s.titleMap},{type:"select",htmlClass:"col-6",key:"include",emptyOption:!1,titleMap:c.titleMap,onChange:function(e,t){g(e)}}]},{type:"row",items:[{type:"auto-complete-supervisor",htmlClass:"col-6",key:"selectedSupervisor","remote-api-handler":f,placeholder:i.getLocalizedCustom("Type for hints")+"..."},{type:"auto-complete",htmlClass:"col-6",key:"selectedEmployee",placeholder:"Type for hints...",
"text-searching":"Searching...","text-no-results":"No results found",idsToSkip:[],includeSelf:!1,permissionType:"nine_box_matrix",includePast:"2"==_.model.include?1:void 0,ngModelOptions:{allowInvalid:!1}}]}],_.formLoaded=!0}function f(e,t){var a={name:"userInputString",filter:{employee_name_or_id:e,is_supervisor:1,termination:"2"==_.model.include?2:1},fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId","page[offset]":"0","page[limit]":"10",includeSelf:!1};return a.filter.permissionType="nine_box_matrix",o.call("employees","GET",[],a,t).then(function(e){return e.data.data.filter(function(e){return null!=e.termination_id&&(e.terminationStatus="("+i.getLocalizedCustom("Past Employee")+")"),e})})}function g(e){_.model.include=e,u()}function h(e){if(!e||!_.model.matrixPeriodTo)return!0;if(e&&_.model.matrixPeriodTo){var t=new Date(e),a=new Date(_.model.matrixPeriodTo);return t<=a}return!1}function v(e){if(!e||!_.model.matrixPeriodFrom)return!0;if(e&&_.model.matrixPeriodFrom){var t=new Date(e),a=new Date(_.model.matrixPeriodFrom);return a<=t}return!1}function y(t){e.$broadcast("schemaFormValidate"),t.$valid&&n(_.model)}function b(){n(!1)}function C(t){_.model={matrixPeriodFrom:new Date(moment().subtract(1,"y").format("YYYY-MM-DD")),matrixPeriodTo:new Date(moment().format("YYYY-MM-DD")),location:"",subunit:"",jobTitle:"",include:"1"},e.$broadcast("schemaFormRedraw")}function w(){_.model.matrixPeriodFrom=new Date(d.matrixPeriodFrom),_.model.matrixPeriodTo=new Date(d.matrixPeriodTo),void 0!==d.selectedEmployee&&(_.model.selectedEmployee=d.selectedEmployee),void 0!==d.selectedSupervisor&&(_.model.selectedSupervisor=d.selectedSupervisor),void 0===d.include?_.model.include="1":_.model.include=d.include,void 0===d.jobTitle?_.model.jobTitle="":_.model.jobTitle=d.jobTitle,void 0===d.location||""===d.location?_.model.location="":_.model.location=d.location,void 0===d.subunit?_.model.subunit="":_.model.subunit=d.subunit}var _=this;_.model={},_.search=y,_.cancel=b,_.reset=C,m()}angular.module("app.succession-and-development").controller("NineBoxMatrixFilterController",e),e.$inject=["$scope","$state","$translate","localizedMessages","webservice","close","subunitEnumTitleMap","locationEnumTitleMap","jobTitleTitleMap","employeeStatus","currentFilter"]}(),function(){"use strict";function e(e,t,a,i,o,n){function l(){e.$broadcast("filter",[])}var r=this;r.filter=l,r.title=o.current.data.title}angular.module("app.succession-and-development").controller("nineBoxMatrixNavbarController",e),e.$inject=["$rootScope","$scope","$document","$translate","$state","myShortcutService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p){function f(){o.show(),D.formModel.matrixPeriodFrom=new Date(moment().subtract(1,"y").format("YYYY-MM-DD")),D.formModel.matrixPeriodTo=new Date(moment().format("YYYY-MM-DD"));var e={fromDate:d.toStandardDate(D.formModel.matrixPeriodFrom),toDate:d.toStandardDate(D.formModel.matrixPeriodTo)},t={required_permissions:{data_group:{name:"nine_box_matrix",permissions:{canRead:1}}}},a={permissions:l.getPermissions(),matrixData:r.call("nineBoxMatrix","GET",[],e).then(function(e){return e},S),configs:r.call("performanceConfig","GET",[],{configs:["esign","incognito","final_rating_for_appraisal","appraisal_cycle_on"]},null,!0),locations:r.call("employees/locations","GET",[],t),jobTitles:r.call("jobTitles","GET",[],{}),subunits:r.call("subunits","GET",[],{tree:!0})};n.all(a).then(function(e){D.ycaption="Potential Assessment",D.xcaption="Performance Assessment",g(e.permissions),h(e.matrixData.data),D.locationEnumTitleMap=s.getLocationEnumAndTitleMap(e.locations.data.data),D.subunitEnumTitleMap=c.getEnumAndTitleMapForSelect(e.subunits.data.data,{value:"id",name:"name"},!0),D.jobTitleTitleMap=c.getEnumAndTitleMapForSelect(e.jobTitles.data.data,{value:"id",name:"jobTitleName"},!0),D.employeeStatus=c.getEnumAndTitleMapForSelect(D.employeeStatusList,{value:"id",name:"name"},!1),D.showMatrix=!0,o.hide()})}function g(e){D.permissions=e.nine_box_matrix,D.permissions.read||(o.hide(),a.go("403"))}function h(e){D.xaxis=v(e.meta.xAxis),D.yaxis=e.meta.yAxis,D.category=new Array(D.xaxis.length);for(var t=0;t<D.category.length;t++)D.category[t]=new Array(D.yaxis.length);e.data.forEach(function(e,t){D.category[e.yCoordinate-1][e.xCoordinate-1]=e})}function v(e){var t=!0;return _.forEach(e,function(e){_.endsWith(e.to,".00")||(t=!1)}),t?_.forEach(e,function(e){var t=e.to+"";e.to=t.substring(0,t.length-3)}):_.forEach(e,function(e){e.to=_.round(e.to,1).toFixed(1)}),e}function y(){m.showModal("app/succession_and_development/9BoxMatrix/9_box_matrix_filter.html","NineBoxMatrixFilterController","modal",{subunitEnumTitleMap:D.subunitEnumTitleMap,locationEnumTitleMap:D.locationEnumTitleMap,jobTitleTitleMap:D.jobTitleTitleMap,employeeStatus:D.employeeStatus,currentFilter:D.formModel}).then(function(e){e&&b(e)})}function b(e){D.showMatrix=!1,o.show(),D.formModel=e;var t=u.getFormattedParametersForSearch(e);r.call("nineBoxMatrix","GET",[],t).then(function(e){h(e.data),D.showMatrix=!0,D.matrixId=null,o.hide()},S)}function C(e,t){D.matrixId=t,$(".no-hover-change.matrix-cell").removeClass("active-cell"),$(e.currentTarget.parentElement).addClass("active-cell")}function w(e){return p.getLocalizedCustomWithVariables("{{value}} employee(s)",{value:e})}function S(e){o.hide(),403===e.status&&a.go("403")}var D=this;D.matrixId=null,D.showMatrix=!1,D.employeeStatusList=[{id:"1",name:i.instant("Current Employees Only")},{id:"2",name:i.instant("Current and Past Employees")}],D.formModel={},D.loadCategoryData=C,D.translateEmployeeCountLabel=w,f(),t.$on("filter",y)}angular.module("app.succession-and-development").controller("nineBoxMatrix",e),e.$inject=["$rootScope","$scope","$state","$translate","loader","$q","datagroupPermissions","webservice","leaveEmployeeService","formHelper","dateService","modalHelperService","NineBoxMatrixHelperService","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m){function u(){n.show(),l.getPermissions().then(function(e){e.nine_box_matrix_configuration.read||(n.hide(),d.go("403")),e.nine_box_matrix_configuration.read?(h.nineBoxMatrixConfigurationPermition=e.nine_box_matrix_configuration,c.call("nineBoxMatrixConfiguration","GET",[]).then(function(a){h.permissions=e.nine_box_matrix_configuration;var i=a.data.data;p(i),n.hide(),null!==localStorage.getItem("toast")&&"saveSuccess"==localStorage.getItem("toast")&&(t.showLocalizedToast("saveSuccess"),localStorage.removeItem("toast"))},g)):n.hide()})}function p(e){h.schema={type:"object",title:"9 Box Matrix Configuration",properties:{performance9BoxMatrixEnabled:{title:"Enable 9 Box Matrix",type:"boolean"},question:{title:"Employee Potential Assessment Question",type:"string",maxLength:250},answer1:{title:"Low",type:"string",maxLength:250},answer2:{title:"Medium",type:"string",maxLength:250},answer3:{title:"High",type:"string",maxLength:250}},required:["question","answer1","answer2","answer3"]},h.form=[{type:"section",htmlClass:"row",items:[{htmlClass:"col s12 m12 l12",type:"checkbox",key:"performance9BoxMatrixEnabled"}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12",key:"question",condition:"model.performance9BoxMatrixEnabled",validationMessage:{302:t.getLocalizedCustom("Required"),201:i.textLengthExceedValidation.message(h.schema.properties.question.maxLength)}}]},{type:"section-heading",htmlClass:"col s12 nineBoxAnswerOptionsHeading",condition:"model.performance9BoxMatrixEnabled",text:t.getLocalizedCustom("9 Box Potential Category Answer Options")},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12",key:"answer1",condition:"model.performance9BoxMatrixEnabled",validationMessage:{302:t.getLocalizedCustom("Required"),201:i.textLengthExceedValidation.message(h.schema.properties.answer1.maxLength)}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12",key:"answer2",condition:"model.performance9BoxMatrixEnabled",validationMessage:{302:t.getLocalizedCustom("Required"),201:i.textLengthExceedValidation.message(h.schema.properties.answer2.maxLength)}}]},{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12",key:"answer3",condition:"model.performance9BoxMatrixEnabled",validationMessage:{302:t.getLocalizedCustom("Required"),201:i.textLengthExceedValidation.message(h.schema.properties.answer3.maxLength)}}]}],h.model={performance9BoxMatrixEnabled:e.performance9BoxMatrixEnabled,question:e.question,answer1:e.answer1,answer2:e.answer2,answer3:e.answer3},h.form.push({type:"section",htmlClass:"row requiredHelperText",items:[{type:"help",condition:"model.performance9BoxMatrixEnabled",helpvalue:"<em>*</em> "+t.getLocalizedCustom("Required field")}]});var a={type:"section",htmlClass:"row form-buttons",items:[{htmlClass:"right",type:"submit",title:"Save"}]};h.form.push(a)}function f(e){if(a.$broadcast("schemaFormValidate"),e.$valid&&h.permissions.update){n.show();var i={performance9BoxMatrixEnabled:h.model.performance9BoxMatrixEnabled};h.model.performance9BoxMatrixEnabled&&(i={performance9BoxMatrixEnabled:h.model.performance9BoxMatrixEnabled,question:h.model.question,answer1:h.model.answer1,answer2:h.model.answer2,answer3:h.model.answer3}),c.call("nineBoxMatrixConfiguration","PATCH",i).then(function(e){if(200==e.status)if(h.reload=e.data.meta.reload,h.reload)location.reload(),localStorage.setItem("toast","saveSuccess");else{var a="saveSuccess";t.showLocalizedToast(a)}},function(e){t.errorToast("Failed to Save")})["finally"](function(){h.reload||n.hide()})}}function g(e){n.hide(),403===e.status&&d.go("403")}var h=this;h.onSubmit=f,h.nineBoxMatrixConfigurationPermition={read:!1},c.isLoggedIn()?u():c.login().then(function(e){u()})}angular.module("app.succession-and-development").controller("nineBoxMatrixConfiguration",e),e.$inject=["$q","localizedMessages","$scope","formValidationHelper","formHelper","loader","datagroupPermissions","$rootScope","$stateParams","webservice","$state","listHelper"]}(),function(){"use strict";function e(e){function t(t){var a={fromDate:e.toStandardDate(t.matrixPeriodFrom),toDate:e.toStandardDate(t.matrixPeriodTo)};if(void 0!==t.selectedEmployee&&void 0!==t.selectedEmployee.empNumber&&(a.selectedEmployee=t.selectedEmployee.empNumber),void 0!==t.selectedSupervisor&&void 0!==t.selectedSupervisor.empNumber&&(a.selectedSupervisor=t.selectedSupervisor.empNumber),a.include=t.include,""!==t.jobTitle&&void 0!==t.jobTitle&&(a.jobTitle=t.jobTitle),""!==t.location&&void 0!==t.location){a.location=[];var i=t.location.split(",").map(function(e){return parseInt(e,10)});a.location=i}return""!==t.subunit&&void 0!==t.subunit&&(a.subunit=t.subunit),a}var a={getFormattedParametersForSearch:t};return a}angular.module("app.succession-and-development").service("NineBoxMatrixHelperService",e),e.$inject=["dateService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w,S,D,T,x,F){function k(){l.show();var e={permission:s.getPermission("individual_development_plan"),activeIdpOwnerEmpNumbers:S.getActiveIdpOwnerEmpNumbers()};R.empId&&!isNaN(R.empId)&&(e.employee=S.getAccessibleIdpEmployee(R.empId,!0)),c.all(e).then(function(e){R.activeIdpOwners=e.activeIdpOwnerEmpNumbers,R.employee=e.employee;var a=e.permission;a.create?(R.dataLoaded=!0,I(),E(),R.referrer&&D.$broadcast("markMenuItemAsCurrent",{stateName:"performance.view_appraisals_list"}),l.hide()):(l.hide(),t.go("403"))})}function E(){D.$broadcast("SingleMenuItemTopRibbonControllerMenuChanged",{menuItem:"Add Individual Development Plan"}),F(function(){x.setForcedTitle(["Career Development","Individual Development Plans"])})}function I(){R.model={};var e=!1;R.employee&&!R.employee.termination_id&&(R.model.owner=_.pick(R.employee,["empNumber","employeeId","firstName","middleName","lastName","termination_id"]),R.model.owner.fullName=d.getFullName(R.employee),e=!0),R.schema={type:"object",title:"Idp",properties:{owner:{title:"Employee",type:"object"},name:{title:"IDP Name",type:"string",maxLength:250},description:{type:"string"},coach:{title:"Coach",type:"object"}},required:["name","owner"]},R.form=[{htmlClass:"row col s12 m12 l12",type:"section",items:[{type:"auto-complete",htmlClass:"col s12 m6 l6",key:"owner",idsToSkip:[],placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",requireSelection:!0,setEmployeeNamePartialString:!0,includeSelf:!1,disable:e,permissionType:[{excludedUserRoles:["MainEvaluator","AppraisalSupervisorReviewer"]},{type:"data_group",required_permissions:{individual_development_plan:{canRead:1,canCreate:1,canUpdate:0,canDelete:0}}},{type:"workflow_action",required_workflow_state_actions:{"INDIVIDUAL DEVELOPMENT PLAN":{state:"INITIAL",action:"Save"}}}],validationMessage:{singleIdpValidation:i.getLocalizedCustom("Employee already has an active IDP")},$validators:{singleIdpValidation:M}},{type:"text",key:"name",htmlClass:"col s12 m12 l6",validationMessage:{201:T.textLengthExceedValidation.message(R.schema.properties.name.maxLength)}}]},{htmlClass:"row col s12 m12 l12",type:"section",items:[{type:"auto-complete",htmlClass:"col s12 m6 l6",key:"coach",placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",requireSelection:!0,setEmployeeNamePartialString:!0,employeeDataProvider:function(e,t){var a={filter:{employee_name_or_id:e},"page[offset]":"0","page[limit]":"50",sort:"fullName"};return o.call("employeeAutoComplete","GET",[],a,t).then(function(e){for(var t,a=[],i=0;i<e.data.data.length;i++)t=R.model.owner?R.model.owner.empNumber:-1,e.data.data[i].empNumber!==t&&(e.data.data[i].fullName=d.getFullName(e.data.data[i]),a.push(e.data.data[i]));return a})}}]},{htmlClass:"row col s12 m12 l12",type:"section",items:[{type:"tinymce",htmlClass:"col s12 m6 l8",tinymceOptions:{selector:".tinymce-heading",branding:!1,forced_root_block_attrs:{style:"color: #818181; font-family: Arial, Roboto, Helvetica, sans-serif; font-size: 14px;"},menubar:!1,toolbar1:"toggleToolbar |  fontselect fontsizeselect | bold italic | bullist numlist outdent indent ",toolbar2:"undo redo | link image image-upload  | alignleft aligncenter alignright alignjustify | forecolor backcolor "},maxImageSizeValidationMessage:"*"+i.getLocalizedCustomWithVariables("File size should be less than {{maxSize}}MB",{maxSize:R.attachmentSizeInMb}),key:"description",hideToolBar:!0,validationMessage:{characterLengthValidation:T.textLengthExceedValidation.message(1e4),lengthValidation:i.getLocalizedCustom("Allowed content size exceeded")},$validators:{characterLengthValidation:function(){return!tinyMCE.activeEditor||tinyMCE.activeEditor.getBody().innerText.length<=1e4},lengthValidation:function(){return!tinyMCE.activeEditor||tinyMCE.activeEditor.getContent().length<=16e6}}}]},r.getRequiredMessage(),{htmlClass:"row form-buttons",type:"section",items:[{htmlClass:"right",type:"submit",title:"Save"},{htmlClass:"right",type:"button",title:"Cancel",style:"secondary-btn",onClick:R.cancelAddIdp}]}]}function A(){R.model&&R.model.owner&&M()&&(R.model.name=L(R.model.owner),S.getDefaultSupervisorForIdp(R.model.owner).then(function(t){R.model.coach=t,e.$broadcast("schemaFormRedraw")}))}function M(){return!(R.model.owner&&R.activeIdpOwners.indexOf(R.model.owner.empNumber)>-1)}function L(e){var t=i.getLocalizedCustom("Individual Development Plan");return e&&(t=t+" - "+e.fullName),t}function P(){R.referrer?p.location.href=R.referrer:t.go("succession_and_development.list_idp")}function $(t){if(e.$broadcast("schemaFormValidate"),t.$valid&&!R.submitInProgress){R.submitInProgress=!0;var a=N();S.createIdp(a).then(function(e){if(e.data.success){R.submitInProgress=!1,localStorage.setItem("toast",i.getLocalizedCustom(e.data.messages.success));var t=e.data.data.id;O(t)}else R.submitInProgress=!1,i.errorToast(e.data.messages.error)},function(e){R.submitInProgress=!1,i.errorToast("Failed to Save")})}}function N(){var e={};return R.model.owner&&(e.owner=R.model.owner.empNumber),R.model.coach&&(e.coach=R.model.coach.empNumber),R.model.name&&(e.name=R.model.name),R.model.description&&(e.description=R.model.description),e}function O(e){R.referrer?t.go("succession_and_development.idp.idp_view",{idpId:e,referrer:"singleView"}):t.go("succession_and_development.idp.idp_view",{idpId:e})}var R=this;R.empId=a.empId,R.onSubmit=$,R.submitInProgress=!1,R.cancelAddIdp=P,R.attachmentSizeInMb=1,R.dataLoaded=!1,R.referrer=a.referrer?decodeURIComponent(decodeURIComponent(a.referrer)):null,tinymce&&f.getSettings().then(function(e){R.attachmentSizeInMb=e.max_attachment_size/1048576,tinymce.image_type_error=function(){n.error(i.getLocalizedCustom("File Type Not Allowed"))},tinymce.image_size_error=function(){n.warning(i.getLocalizedCustomWithVariables("File Size Should Be Less than {{maxSize}}MB",{maxSize:R.attachmentSizeInMb}))},tinymce.max_image_size_=function(){return e.max_attachment_size},tinymce.allowed_file_types=function(){return e.allowed_image_types}}),k(),e.$watch("vm.model.owner",A,!0)}angular.module("app.succession-and-development").controller("AddIndividualDevelopmentPlanController",e),e.$inject=["$scope","$state","$stateParams","localizedMessages","webservice","toast","loader","formHelper","datagroupPermissions","$q","employeeService","$translate","goalService","$window","settingsService","dateService","goalCategoryServiceFactory","listHelper","ModalService","performanceConstants","$filter","performanceGoalCategoryFormService","idpService","$rootScope","formValidationHelper","titleService","$timeout"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/succession_and_development/idp/directives/idp_goal_list.html",scope:{targetedRole:"=targetedRole",idpData:"=idpData",permission:"=permission",goals:"=goals",sectionTitle:"=sectionTitle",sectionIcon:"=sectionIcon",disableIncludeIdpGoalButton:"=disableIncludeIdpGoalButton",parentReferrer:"=parentReferrer"},link:function(e,t,a){},controller:t,controllerAs:"idpCtrl"}}function t(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f){function g(){v(),x=new s.list(T.listData[T.listName],u.goals),T.changeSelection=x.changeSelection,T.selectAll=x.selectAllItems,T.deselectAll=x.deselectAllItems}function h(){var e={name:"name",lable:"Goal Name",getter:"name"};u.permission.update&&(e.clickAction="editIdpGoal");var a=[e,{name:"goalPercentageCompletion",lable:"Completion",getter:"goalPercentageCompletion",type:"rounded-progress"},{name:"status",lable:"Status",getter:"",formatter:function(e){var a=e.goalStatusName;return e.goalWorkflowStatus&&e.goalWorkflowStatus.considerAsApproved===!1&&(a=e.goalWorkflowStatus.displayName),t.getLocalizedCustom(a)}},{name:"dueDate",lable:"Due Date",getter:"dueDate",formatter:function(e){return e?(e=e.slice(0,10),c.toLocalizedDate(e)):e}},{name:"lastUpdated",lable:"Last Updated On",getter:"lastUpdated",formatter:function(e){return e?(e=e.slice(0,10),c.toLocalizedDate(e)):e}}],i=[{action:"deleteSelection",lable:"Remove Selected",actionPermission:u.permission["delete"]}],o=["45%","10%","15%","15%","15%"];u.permission["delete"]&&(o=["5%","40%","10%","15%","15%","15%"]),T.listData={},T.listData[T.listName]={tableId:"idpGoalList",name:T.listName,selectable:!0,selected:[],idGetter:"idpGoalId",listFields:a,extraTH:[],extraTD:[],showColumnsAnyway:!0,permission:u.permission,listActions:i,columnWidths:o,loadChildNodeData:"fetchChildGoals"}}function v(){T.panelInfo={},h()}function y(e){return m.fetchChildGoals(e)}function b(){f.deleteIdpGoals(T.idpId,{ids:T.listData[T.listName].selected}).then(function(){C(T.listData[T.listName].selected),t.successToast("Successfully Removed"),d.$broadcast("toggleIdpGoalIncludeBtn")},function(e){r.error(e.data.details)})}function C(e){for(var t=u.goals.length-1;t>=0;t--){var a=e.indexOf(u.goals[t].idpGoalId);a>-1&&(e.splice(a,1),u.goals.splice(t,1))}}function w(){if(T.listData[T.listName].selected.length>0){var e="You are about to remove the goal(s) from the IDP. Are you sure you want to continue?",t="Yes, Remove",a="No, Cancel",i={"success-icon":"remove_circle_outline"};o.showDeleteConfirmationModal(e,t,a,i).then(function(e){e===!0&&b()})}}function _(){var e=a.clientBase+"#/succession_and_development/idp/"+T.idpId+"/idp_view/";u.parentReferrer&&(e+=u.parentReferrer),p.go("succession_and_development.idp.add_goal",{goalId:null,listType:"employee_goals",redirectFrom:"development_plan_view",referrer:e,empNumber:T.ownerEmpNumber,parentGoalId:null,parentGoalLevel:null,listName:null,idpId:T.idpId,targetedRole:u.targetedRole})}function S(e){var t=a.clientBase+"#/succession_and_development/idp/"+T.idpId+"/idp_view/";u.parentReferrer&&(t+=u.parentReferrer),p.go("succession_and_development.idp.add_goal",{goalId:e.id,listType:"employee_goals",redirectFrom:"development_plan_view",referrer:t,empNumber:T.ownerEmpNumber,parentGoalId:null,parentGoalLevel:null,listName:null,idpId:T.idpId,targetedRole:u.targetedRole,version:e.version?e.version:null})}function D(){o.showModal("app/succession_and_development/idp/idp_include_goals/idp_include_goals_modal.html","IdpIncludeGoalsController","modal",{idpId:T.idpId,targetedRole:u.targetedRole,sectionTitle:u.sectionTitle,dataList:u.goals})}var T=this;T.deleteIdpGoal=b,T.deleteSelection=w,T.fetchChildGoals=y,T.addIdpGoal=_,T.editIdpGoal=S,T.includeGoal=D,T.ownerEmpNumber=u.idpData.owner.empNumber,T.idpId=u.idpData.idpId;var x={};T.listName="targetedRole"+u.targetedRole,u.goals||(u.goals=[]),g()}angular.module("app.directives").directive("idpGoalList",e),t.$inject=["$window","localizedMessages","LOGIN","webservice","modalHelperService","$stateParams","loader","toast","listHelper","dateService","$rootScope","goalService","$scope","$state","idpService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C){function w(){S(),f.fetchIncludibleGoals(F.idpId).then(function(e){F.includibleGoals=e,k=new t.list(F.listData[F.listName],F.includibleGoals),F.changeSelection=k.changeSelection,F.selectAll=k.selectAllItems,F.deselectAll=k.deselectAllItems})}function _(){var e={name:"name",lable:"Goal Name",getter:"name"},t=[e,{name:"goalPercentageCompletion",lable:"Completion",getter:"goalPercentageCompletion",type:"oxd-rounded-progress","class":"text-center"},{name:"status",lable:"Status",getter:"",formatter:function(e){var t=e.goalStatusName;return e.goalWorkflowStatus&&e.goalWorkflowStatus.considerAsApproved===!1&&(t=e.goalWorkflowStatus.displayName),r.getLocalizedCustom(t)}},{name:"dueDate",lable:"Due Date",getter:"dueDate",formatter:function(e){return e?(e=e.slice(0,10),g.toLocalizedDate(e)):e}}],a=[];F.listData={},F.listData[F.listName]={tableId:"idpIncludibleGoalList",name:F.listName,listClass:"classic-table hover table-fixed selectable",selectable:!0,selected:[],idGetter:"id",listFields:t,extraTH:[],extraTD:[],showColumnsAnyway:!0,permission:{read:!0,update:!0,create:!0,"delete":!0},listActions:a,showSelectableAlways:!0,showLoader:!0}}function S(){F.panelInfo={},_()}function D(){var e=F.listData[F.listName].selected;if(e.length>0){var t={idpId:F.idpId,targetedRoleId:F.targetedRole,goalIds:e};c.show(),l.call("individualDevelopmentPlan/"+h+"/includibleGoals","POST",t,{}).then(function(e){var t=e.data.data.data;x(t),c.hide(),s.$broadcast("toggleIdpGoalIncludeBtn")})}else r.warningToast("No Goals Selected")}function T(){C(!1)}function x(e){for(var t=0;t<e.length;t++)b.unshift(e[t]);b.sort(function(e,t){return new Date(t.dueDate).getTime()-new Date(e.dueDate).getTime()}),r.successToast("Successfully Included")}var F=this;F.includeGoals=D,F.cancel=T;var k={};F.targetedRole=v,F.idpId=h,F.sectionTitle=y,w()}angular.module("app.succession-and-development").controller("IdpIncludeGoalsController",e),e.$inject=["$scope","listHelper","logger","$window","$state","$q","webservice","localizedMessages","$rootScope","loader","toast","datagroupPermissions","formHelper","settingsService","idpService","dateService","idpId","targetedRole","sectionTitle","dataList","close"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p){function f(){C(),"undefined"!=typeof i&&(w.model=i),g()}function g(){w.schema={type:"object",title:"Goals",properties:{owner:{title:"Employee",type:"object"},jobTitle:{title:"Job Title",type:"string","enum":m["enum"]},subunit:{title:"Sub Unit",type:"string","enum":c["enum"]},location:{title:"Location",type:"string","enum":d["enum"]},coach:{title:"Coach",type:"object"},status:{title:l.getLocalizedCustom("Status"),type:"object"},includePastEmployees:{title:"Include Development Plans of Past Employees",type:"boolean"}}},w.form=[],u||(w.form=[{type:"row",items:[{type:"auto-complete",htmlClass:"col-6",key:"owner",placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",idsToSkip:[],permissionType:[{excludedUserRoles:["MainEvaluator","AppraisalSupervisorReviewer"]},{type:"data_group",required_permissions:{individual_development_plan:{canRead:1,canCreate:0,canUpdate:0,canDelete:0}}}],ngModelOptions:{allowInvalid:!1}},{type:"select",htmlClass:"col-6",key:"jobTitle",emptyOption:"All",titleMap:m.titleMap}]},{type:"row",items:[{type:"select",htmlClass:"col-6",key:"subunit",emptyOption:"All",titleMap:c.titleMap},{type:"select",htmlClass:"col-6",key:"location",emptyOption:"All",titleMap:d.titleMap}]}]),w.form.push({type:"row",items:[{type:"auto-complete",htmlClass:"col-6",key:"coach",placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",idsToSkip:[],permissionType:"individual_development_plan",ngModelOptions:{allowInvalid:!1},includePast:!0,setEmployeeNamePartialString:!0,employeeDataProvider:function(e,t){var i={filter:{employee_name_or_id:e},"page[offset]":"0","page[limit]":"50",sort:"fullName"};return a.call("employeeAutoComplete","GET",[],i,t).then(function(e){for(var t=[],a=0;a<e.data.data.length;a++)e.data.data[a].fullName=p.getFullName(e.data.data[a]),t.push(e.data.data[a]);return t})}},{key:"status",htmlClass:"col-6",type:"autocomplete-multiselect",choices:_}]}),u||w.form.push({type:"row",items:[{type:"checkbox",htmlClass:"col-l6",key:"includePastEmployees"}]})}function h(t){e.$broadcast("schemaFormValidate"),t.$valid&&o({model:w.model,filter:v()})}function v(){var e={};if(w.model){if(w.model.jobTitle&&(e.jobTitle=w.model.jobTitle),w.model.subunit&&(e.subunit=w.model.subunit),w.model.location&&(e.location=w.model.location.split(",")),w.model.status){var t=Object.keys(w.model.status);t.length>0&&(e.status=t)}w.model.owner&&(e.owner=w.model.owner.empNumber),w.model.coach&&(e.coach=w.model.coach.empNumber),w.model.includePastEmployees&&(e.includePastEmployees=w.model.includePastEmployees)}return e}function y(){o(!1)}function b(t){C(),e.$broadcast("schemaFormRedraw")}function C(){w.model={location:"",subunit:"",jobTitle:""}}var w=this;w.search=h,w.cancel=y,w.reset=b;var _=[];s&&(_=n.getItemsForMultyselectAutocomplete(s,function(e){return{id:e.stateId,name:l.getLocalizedCustom(e.displayName)}})),f()}angular.module("app.succession-and-development").controller("IndividualDevelopmentPlanFilterController",e),e.$inject=["$scope","logger","webservice","currentFilter","close","formHelper","localizedMessages","formValidationHelper","idpStatus","subunitEnumTitleMap","locationEnumTitleMap","jobTitleTitleMap","isMyIdp","employeeService"]}(),function(){"use strict";function e(e,t,a,i,o){function n(){e.$broadcast("filter",[])}var l=this;l.filter=n,l.title=o.current.data.title}angular.module("app.performance").controller("IndividualDevelopmentPlanListNavbarController",e),e.$inject=["$rootScope","$scope","$document","$translate","$state"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w,S){function D(e,a,i){var n={offset:(i-1)*R.pageSize,limit:R.pageSize,sortField:R.SortingListFields[e],sortOrder:a,listType:R.listType};"undefined"!=typeof R.filters&&(n.filter=R.filters);var l=C[z];"undefined"!=typeof R.filters?(n.filter=R.filters,C[z]=R.filters):"undefined"!=typeof l&&(n.filter=l),R.isMyIdp||(R.empNo&&"undefined"!=typeof l?(C[j].owner={empNumber:R.empNo,firstName:"",lastName:"",middleName:"",employeeId:R.employeeId,fullName:R.empName},n.filter.owner=R.empNo,C[j].includePastEmployees="2"==R.include,n.filter.includePastEmployees="2"==R.include):R.empNo&&"undefined"==typeof l&&(n.filter={},n.filter.owner=R.empNo,C[j]={},C[j]={location:"",subunit:"",jobTitle:""},C[j].owner={empNumber:R.empNo,firstName:"",lastName:"",middleName:"",employeeId:R.employeeId,fullName:R.empName},C[j].includePastEmployees="2"==R.include,n.filter.includePastEmployees="2"==R.include)),d.show(),R.idps=[],g.fetchIdps(n).then(function(e){var a=e.meta;R.notDeletableIds=_.map(a.notDeletableIdpIds,function(e){return e.toString()}),k(),R.idps=e.data,R.total=e.meta.total,R.totalDataCount=R.total,R.dataInCurruntPage=e.data.length,R.meta=e.meta,R.page=i,R.lastPage=Math.ceil(R.total/R.pageSize),R.idplistHelper=new t.list(R.listData.idps,R.idps,R.notDeletableIds),R.selectAll=R.idplistHelper.selectAllItems,R.deselectAll=R.idplistHelper.deselectAllItems,R.hasIdpCreateWorkflowPermissions=e.meta.hasIdpCreateWorkflowPermissions,d.hide(),0===R.idps.length&&s.infoToast("No Records Found")},function(){d.hide(),o.go("403")})["finally"](function(){w.showListConfigurationSuccess()})}function T(){d.show(),"employeeProfile"==R.redirectedFrom&&S.addBackToProfileButton(R.empNo),R.listName="idpList",R.listConfig={};var e={required_permissions:{data_group:{name:"individual_development_plan",permissions:{canRead:1}}}},t={name:"userInputString",fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId",filter:{permissionType:[{excludedUserRoles:["MainEvaluator","AppraisalSupervisorReviewer"]},{type:"data_group",required_permissions:{individual_development_plan:{canRead:1,canCreate:1,canUpdate:0,canDelete:0}}},{type:"workflow_action",required_workflow_state_actions:{"INDIVIDUAL DEVELOPMENT PLAN":{state:"INITIAL",action:"Save"}}}]},includeSelf:!1},a={permission:u.getPermission("individual_development_plan",R.isMyIdp).then(function(e){return e.read?e:n.reject({statusText:"Forbidden"})}),pageSize:f.getSetting("page_size"),idpStatus:g.getIdpStatuses(R.isMyIdp),locations:r.call("employees/locations","GET",[],e),jobTitles:r.call("jobTitles","GET",[],{}),subunits:r.call("subunits","GET",[],{tree:!0}),idpCreatableEmployees:r.call("employees","GET",[],t)};n.all(a).then(function(e){R.permissions=e.permission,R.pageSize=e.pageSize,R.idpStatus=e.idpStatus,R.locationEnumTitleMap=v.getLocationEnumAndTitleMap(e.locations.data.data),R.subunitEnumTitleMap=p.getEnumAndTitleMapForSelect(e.subunits.data.data,{value:"id",name:"name"},!0),R.jobTitleTitleMap=p.getEnumAndTitleMapForSelect(e.jobTitles.data.data,{value:"id",name:"jobTitleName"},!0),R.idpCreatableEmployees=e.idpCreatableEmployees.data.data,u.getPermission("list_configuration",!0).then(function(e){R.isListConfigurable=!!e.update||R.isListConfigurable,w.getRegisteredListConfiguration(R.listName,!0).then(function(e){x(e),R.fetchIdps("owner","ASC",R.page)})})},function(){d.hide(),o.go("403")})}function x(e){R.listConfig=e.listConfig,R.modalHeader="Individual Development Plans List Configuration",R.applyForAllEmployeesLabel="Apply for All Users",R.conditionalFields={},R.specialMessagesForFields={},R.maxNoOfFields=7,R.listConfigData={availableFields:e.availableFields,mandatoryFields:e.mandatoryFields,defaultFields:e.defaultFields,listName:R.listName,modalHeader:R.modalHeader,applyForAllEmployeesLabel:R.applyForAllEmployeesLabel,conditionalFields:R.conditionalFields,specialMessagesForFields:R.specialMessagesForFields,maxNoOfFields:R.maxNoOfFields}}function F(){var e=angular.copy(C[j]);l.showModal("app/succession_and_development/idp/idp_list/idp_filter.html","IndividualDevelopmentPlanFilterController","modal",{currentFilter:e,idpStatus:R.idpStatus,subunitEnumTitleMap:R.subunitEnumTitleMap,locationEnumTitleMap:R.locationEnumTitleMap,jobTitleTitleMap:R.jobTitleTitleMap,isMyIdp:R.isMyIdp}).then(function(e){e&&(R.empNo=null,e.model&&(C[j]=e.model),
e.filter&&(R.filters=e.filter,R.fetchIdps("owner","ASC",1)))})}function k(){R.panelInfo={idpInfo:{}},E()}function E(){var e=[{name:"ownerEmpId",lable:"Employee ID",getter:"ownerEmpId",sortable:!0,sortAction:"fetchIdps",clickAction:"viewIdp",hideField:!R.listConfig.ownerEmpId},{name:"owner",lable:"Employee",getter:"owner",sortable:!0,sortAction:"fetchIdps",clickAction:"viewIdp",hideField:!R.listConfig.owner},{name:"name",lable:"IDP Name",getter:"name",sortable:!0,sortAction:"fetchIdps",clickAction:"viewIdp",hideField:!R.listConfig.name},{name:"coach",lable:"Coach",getter:"coach",sortable:!0,sortAction:"fetchIdps",clickAction:"viewIdp",hideField:!R.listConfig.coach},{name:"initiatedDate",lable:"Initiated On",getter:"initiatedDate",sortable:!0,sortAction:"fetchIdps",formatter:function(e){return e?(e=e.slice(0,10),h.toLocalizedDate(e)):e},clickAction:"viewIdp",hideField:!R.listConfig.initiatedDate},{name:"closedDate",lable:"Closed On",getter:"closedDate",sortable:!0,sortAction:"fetchIdps",formatter:function(e){return e?(e=e.slice(0,10),h.toLocalizedDate(e)):e},clickAction:"viewIdp",hideField:!R.listConfig.closedDate},{name:"status",lable:"Status",getter:"status",sortable:!0,sortAction:"fetchIdps",formatter:function(e){return s.getLocalizedCustom(e)},clickAction:"viewIdp",hideField:!R.listConfig.status}];R.isMyIdp&&e.splice(0,2);var t=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:R.permissions["delete"]}],a=_.map(_.filter(e,{hideField:!1}),"name"),i=[];i=R.isMyIdp?["40%","15%","15%","15%","15%"]:I(a),R.listData={idps:{selectable:!0,selected:[],idGetter:"id",listFields:e,extraTH:[],extraTD:[],showColumnsAnyway:!0,permission:R.permissions,listActions:t,columnWidths:i,pagination:!0,unselectableIds:R.notDeletableIds,configurable:R.isListConfigurable,listConfigData:R.listConfigData}},R.isMyIdp&&(R.listData.idps.configurable=!1)}function I(e){var t,a=_.includes(e,"ownerEmpId"),i=_.includes(e,"initiatedDate");return t=a||i?a?i?["5%","8%","15%","27%","15%","10%","10%","10%"]:["5%","8%","15%","37%","15%","10%","10%"]:["5%","15%","35%","15%","10%","10%","10%"]:["5%","15%","45%","15%","10%","10%"]}function A(){if(R.listData.idps.selected.length>0){var e=R.listData.idps.selected.length;d.show(),g.deleteIdps({ids:R.listData.idps.selected}).then(function(){d.hide(),s.showLocalizedToast("deleteSuccess"),R.total-=e,M(R.listData.idps.selected)},function(e){d.hide(),m.error(s.getLocalizedCustom(e.data.details))})}}function M(e){for(var t=R.idps.length-1;t>=0;t--){var a=e.indexOf(R.idps[t].id);a>-1&&(e.splice(a,1),R.idps.splice(t,1))}}function L(e){var t=e.obj;if(t.selected)R.listData.idps.selected.push(t.id);else{var a=R.listData.idps.selected.indexOf(t.id);a>-1&&R.listData.idps.selected.splice(a,1)}}function P(){if(R.listData.idps.selected.length>0){var e="You are about to delete individual development plan(s) permanently. Are you sure you want to continue?";l.showDeleteConfirmationModal(e).then(function(e){e===!0&&(A(),$(R.listData.idps.selected.length))})}}function $(e){R.totalDataCount=R.totalDataCount-e,R.dataInCurruntPage=R.dataInCurruntPage-e}function N(){o.go("succession_and_development.add_idp",{empId:null})}function O(e){o.go("succession_and_development.idp.idp_view",{idpId:e.id})}var R=this;R.pageSize=50,R.page=1,R.total=0,R.totalDataCount=0,R.dataInCurruntPage=0,R.idps="",R.sort="",R.SortingListFields={owner:"owner",ownerEmpId:"ownerEmpId",name:"name",coach:"coach",initiatedDate:"initiatedDate",closedDate:"closedDate",status:"status"},R.fetchIdps=D,R.changeSelection=L,R.deleteSelection=P,R.addIdp=N,R.viewIdp=O,R.oldFilter=!1,R.canCreateIdps=!1;var z,j;R.isListConfigurable=!1,R.idpCreatableEmployees=[],R.redirectedFrom=y.redirectedFrom,R.empNo=y.empNo,R.employeeId=y.employeeId,R.empName=y.empName,R.include=y.include,y.listType&&(R.listType=y.listType,z=R.listType+"_filter",j=R.listType+"_filter_model",R.isMyIdp="my_idp"===y.listType),R.idps||T(),e.$on("filter",F)}angular.module("app.succession-and-development").controller("IndividualDevelopmentPlanListController",e),e.$inject=["$scope","listHelper","logger","$window","$state","$q","modalHelperService","webservice","localizedMessages","$rootScope","loader","toast","datagroupPermissions","formHelper","settingsService","idpService","dateService","leaveEmployeeService","$stateParams","LOGIN","$localStorage","listConfigurationService","menuService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){u.getIdpDetails(h).then(function(e){g.owner=f(e.data.owner),g.time=Date.now()})}function f(e){var t=angular.copy(e);return e.fullName.length>25&&(t.fullNameTooltip=t.fullName,t.fullName=t.fullName.substring(0,25).trim()+"..."),e.jobTitle.length>25&&(t.jobTitleTooltip=t.jobTitle,t.jobTitle=t.jobTitle.substring(0,25).trim()+"..."),t}var g=this,h=n.idpId;g.tabs=[{uiSref:"succession_and_development.idp.idp_view",title:"Development Plan"}],g.time=Date.now(),p()}angular.module("app.pim").controller("IndividualDevelopmentPlanTabNavbarController",e),e.$inject=["$rootScope","$scope","$q","$translate","$state","$stateParams","webservice","ModalService","focus","LOGIN","pimTabs","datagroupPermissions","idpService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w,_,S,D,T){function x(){l.show();var e=({idpId:N.idpId},{idpDetails:_.getIdpDetails(N.idpId),settings:f.getSettings(),userData:s.getUserData(),goals:_.fetchIdpGoals(N.idpId),idpTargetedRoles:_.fetchTargetedRoles(),getAllowedWorkflowActions:_.getAllowedWorkflowActionsForIdp(N.idpId)});c.all(e).then(function(e){N.idp=e.idpDetails.data,N.isIdpEditable=e.idpDetails.meta.isEditable,N.isCoachChangeable=e.idpDetails.meta.isCoachChangeable,N.isClosed=e.idpDetails.meta.isClosed,e.userData&&e.userData.emp_number===N.idp.owner.empNumber&&(N.self=!0),N.goals=e.goals.data,N.targetedRoles=e.idpTargetedRoles,N.getAllowedWorkflowActions=e.getAllowedWorkflowActions;var t=e.settings;tinymce&&(N.attachmentSizeInMb=t.max_attachment_size/1048576,tinymce.image_type_error=function(){n.error(i.getLocalizedCustom("File Type Not Allowed"))},tinymce.image_size_error=function(){n.warning(i.getLocalizedCustomWithVariables("File Size Should Be Less than {{maxSize}}MB",{maxSize:N.attachmentSizeInMb}))},tinymce.max_image_size_=function(){return t.max_attachment_size},tinymce.allowed_file_types=function(){return t.allowed_image_types}),k()},function(e){403===e.status&&(l.hide(),t.go("403"))})}function F(e){S.$broadcast("SingleMenuItemTopRibbonControllerMenuChanged",{menuItem:"Development Plan"});var t=["Career Development",e?"My IDP":"Individual Development Plans"];T.setForcedTitle(t)}function k(){s.getPermission("individual_development_plan",N.self).then(function(e){if(N.permission=e,N.permission.update=N.permission.update&&N.isIdpEditable,N.roleListPermission=angular.copy(e),N.permission.read){N.permission.update&&_.fetchIncludibleGoals(N.idpId).then(function(e){N.disableIncludeIdpGoalButton=0===e.length});var a;N.idp.owner.empNumber&&(a={Employee:N.idp.owner.empNumber,IndividualDevelopmentPlan:N.idpId}),s.getPermission("development_goals",N.self,a).then(function(t){N.roleListPermission.update=e.read&&t.read,N.roleListPermission.create=e.update&&t.create&&!N.self&&!N.isClosed,N.roleListPermission["delete"]=e.update&&!N.self&&!N.isClosed,N.roleListPermission.canIncludeGoals=e.update&&t.read&&!N.self&&!N.isClosed,N.idpData={idpId:N.idpId,owner:N.idp.owner},N.dataLoaded=!0,E(),I(),l.hide(),N.referrer?S.$broadcast("markMenuItemAsCurrent",{stateName:"performance.view_appraisals_list"}):S.$broadcast("markMenuItemAsCurrent",{stateName:"succession_and_development."+(N.self?"my_idp":"list_idp")}),F(N.self)})}else l.hide(),t.go("403")})}function E(){N.model={name:N.idp.name,description:N.idp.description,coach:N.idp.coach,initiatedDate:g.toLocalizedDate(N.idp.initiatedDate)},N.idp.status&&(N.model.status=i.getLocalizedCustom(N.idp.status.name))}function I(){N.employeeIdsToSkip=[];var e=!N.permission.update||N.self||N.isClosed,t={};t=e?{type:"tinymce",htmlClass:"col s12 m6 l8",tinymceOptions:{selector:".tinymce-heading",branding:!1,forced_root_block_attrs:{style:"color: #818181; font-family: Arial, Roboto, Helvetica, sans-serif; font-size: 14px;"},menubar:!1,readonly:1,toolbar:!1},key:"description",hideToolBar:!0}:{type:"tinymce",htmlClass:"col s12 m6 l8",tinymceOptions:{selector:".tinymce-heading",branding:!1,forced_root_block_attrs:{style:"color: #818181; font-family: Arial, Roboto, Helvetica, sans-serif; font-size: 14px;"},menubar:!1,toolbar1:"toggleToolbar |  fontselect fontsizeselect | bold italic | bullist numlist outdent indent ",toolbar2:"undo redo | link image image-upload  | alignleft aligncenter alignright alignjustify | forecolor backcolor "},maxImageSizeValidationMessage:"*"+i.getLocalizedCustomWithVariables("File size should be less than {{maxSize}}MB",{maxSize:N.attachmentSizeInMb}),key:"description",hideToolBar:!0,validationMessage:{characterLengthValidation:D.textLengthExceedValidation.message(1e4),lengthValidation:i.getLocalizedCustom("Allowed content size exceeded")},$validators:{characterLengthValidation:function(){return!tinyMCE.activeEditor||tinyMCE.activeEditor.getBody().innerText.length<=1e4},lengthValidation:function(){return!tinyMCE.activeEditor||tinyMCE.activeEditor.getContent().length<=16e6}}},N.schema={type:"object",title:"Idp",properties:{name:{title:"IDP Name",type:"string",maxLength:250},description:{type:"string"},coach:{title:"Coach",type:"object",idsToSkip:[N.idp.owner.empNumber]},status:{title:"Status",type:"string"},initiatedDate:{title:"Initiated Date",type:"string"}},required:["name","owner"]},N.buttonsReadOnly=!0,N.form=[{htmlClass:"row col s12 m12 l12",type:"section",items:[{type:"text",key:"name",htmlClass:"col s8 m8 l8",readonly:e,validationMessage:{201:D.textLengthExceedValidation.message(N.schema.properties.name.maxLength)}},{type:"auto-complete",htmlClass:"col s4 m4 l4",key:"coach",idsToSkip:[],placeholder:"Type for hints...","text-searching":"Searching...","text-no-results":"No results found",requireSelection:!0,setEmployeeNamePartialString:!0,disable:e||!N.isCoachChangeable,employeeDataProvider:function(e,t){var a={filter:{employee_name_or_id:e},"page[offset]":"0","page[limit]":"50",sort:"fullName"};return o.call("employeeAutoComplete","GET",[],a,t).then(function(e){for(var t,a=[],i=0;i<e.data.data.length;i++)t=N.idp.owner?N.idp.owner.empNumber:-1,e.data.data[i].empNumber!==t&&(e.data.data[i].fullName=d.getFullName(e.data.data[i]),a.push(e.data.data[i]));return a})}}]},{htmlClass:"row col s12 m12 l12",type:"section",items:[t,{type:"text",key:"status",htmlClass:"col s8 m8 l4",readonly:!0},{type:"text",key:"initiatedDate",htmlClass:"col s8 m8 l4",readonly:!0}]},r.getRequiredMessage(),_.getWorkflowActionButtons(N)]}function A(){N.referrer&&!N.isCancelButtonHidden?p.location.href=N.referrer:N.self?t.go("succession_and_development.my_idp"):t.go("succession_and_development.list_idp")}function M(t){if(e.$broadcast("schemaFormValidate"),t.$valid&&!N.submitInProgress)if(N.idpWorkflowStatusChangeConfirmationNeeded){var a="You are about to "+N.idpWorkflowStatusChangeConfirmationNeededActionName+" the Individual Development Plan. Are you sure you want to continue?";y.showConfirmationModal(a).then(function(e){e===!0&&(l.show(),L())})}else L()}function L(){var e=P();_.updateIdp(N.idpId,e).then(function(e){e.data.success?(i.successToast(e.data.messages.success),N.submitInProgress=!1,t.reload()):i.errorToast(e.data.messages.error),l.hide()},function(e){e.data&&e.data.messages?e.data.messages.error?i.errorToast(e.data.messages.error):e.data.messages.warning?y.showConfirmationModal(e.data.messages.warning):i.errorToast("Failed to Save"):i.errorToast("Failed to Save"),l.hide()})}function P(){var e={};return N.model.coach&&(e.coach=N.model.coach.empNumber),N.model.name&&(e.name=N.model.name),N.model.description&&(e.description=N.model.description),e.action=N.performedAction,e}function $(){n.warning("Not Implemented Yet")}var N=this;N.onSubmit=M,N.submitInProgress=!1,N.attachmentSizeInMb=1,N.referrer=a.referrer?decodeURIComponent(decodeURIComponent(a.referrer)):null,N.isCancelButtonHidden="singleView"===N.referrer,null!==localStorage.getItem("toast")&&(i.showLocalizedToast(localStorage.getItem("toast")),localStorage.removeItem("toast")),N.idpId=a.idpId,N.self=!1,N.dataLoaded=!1,N.downloadPdf=$,N.goals=[],N.getAllowedWorkflowActions=[],N.cancelViewIdp=A,N.permission={},N.performedAction=null,N.scope=e,N.isClosed=!1,N.disableIncludeIdpGoalButton=!1,x(),S.$on("toggleIdpGoalIncludeBtn",function(){N.permission.update&&(l.show(),_.fetchIncludibleGoals(N.idpId).then(function(e){N.disableIncludeIdpGoalButton=0===e.length,l.hide()}))}),e.$on("idpWorkflowStatusChange",function(e,t){N.performedAction=t}),e.$on("idpWorkflowStatusChangeConfirmationNeeded",function(e,t){N.idpWorkflowStatusChangeConfirmationNeeded=t.isConfirmationNeeded,N.idpWorkflowStatusChangeConfirmationNeededActionName=t.actionName})}angular.module("app.succession-and-development").controller("IndividualDevelopmentPlanDetailsController",e),e.$inject=["$scope","$state","$stateParams","localizedMessages","webservice","toast","loader","formHelper","datagroupPermissions","$q","employeeService","$translate","goalService","$window","settingsService","dateService","goalCategoryServiceFactory","listHelper","modalHelperService","performanceConstants","$filter","performanceGoalCategoryFormService","idpService","$rootScope","formValidationHelper","titleService"]}(),function(){"use strict";function e(e,t,a){function i(t){return e.call("individualDevelopmentPlans","GET",[],t).then(function(e){return e.data})}function o(){var t={offset:0,limit:1,sortField:"name",sortOrder:"ASC",listType:"idp_list"};return e.call("individualDevelopmentPlans","GET",[],t).then(function(e){return e.data.meta.activeIdpOwners})}function n(t){return e.call("individualDevelopmentPlans","DELETE",t,{})}function l(t,a){return e.call("individualDevelopmentPlan/"+t+"/goals","DELETE",a,{})}function r(t){return e.call("idpStatuses","GET",[],{}).then(function(e){return t?_.filter(e.data.data,function(e){return"0"!==e.stateId}):e.data.data})}function s(t){return e.call("idpWorkflowActions/"+t,"GET",[],{}).then(function(e){return e.data.data})}function c(e,t,i){return function(){e.scope.$broadcast("idpWorkflowStatusChange",t);var o=a.getLocalizedCustom("initiate");"Close"===t&&(o=a.getLocalizedCustom("close")),e.scope.$broadcast("idpWorkflowStatusChangeConfirmationNeeded",{isConfirmationNeeded:i,actionName:o})}}function d(e){for(var t=[],i="",o=!1,n=0;n<e.getAllowedWorkflowActions.length;n++)i=e.getAllowedWorkflowActions[n].action_name,o=e.getAllowedWorkflowActions[n].is_confirmation_needed,t.push({htmlClass:"right",type:"submit",title:a.getLocalizedCustom(i),onClick:c(e,i,o),condition:function(){return e.permission.update}});return t.push({htmlClass:"right",type:"button",title:"Back",style:"secondary-btn",onClick:e.cancelViewIdp,condition:function(){return!e.isCancelButtonHidden}}),{htmlClass:"row form-buttons",type:"section",items:t}}function m(t){return e.call("individualDevelopmentPlans","POST",t,{})}function u(a){return e.call("idpCoachDefaultEmployee/"+a.empNumber,"GET",[],{},void 0).then(function(e){var a=e.data.data;return a?(a.fullName=t.getFirstAndLastNameWithoutTags(a),a):{}})}function p(t){return e.call("idpEmployee/"+t,"GET",[],{},void 0).then(function(e){return e.data.data})}function f(t){return e.call("individualDevelopmentPlan/"+t,"GET",[],{}).then(function(e){return e.data})}function g(t,a){return e.call("individualDevelopmentPlan/"+t,"PATCH",a,{})}function h(t){return e.call("individualDevelopmentPlan/"+t+"/goals","GET",[],{}).then(function(e){return e.data})}function v(t){return e.call("individualDevelopmentPlan/"+t+"/includibleGoals","GET",[],{}).then(function(e){return e.data.data})}function y(){return e.call("individualDevelopmentPlanTargetedRoles","GET",[],{}).then(function(e){return e.data.data})}var b={fetchIdps:i,deleteIdps:n,getIdpStatuses:r,getAllowedWorkflowActionsForIdp:s,getWorkflowActionButtons:d,createIdp:m,updateIdp:g,getDefaultSupervisorForIdp:u,getAccessibleIdpEmployee:p,getIdpDetails:f,fetchIdpGoals:h,fetchTargetedRoles:y,deleteIdpGoals:l,getActiveIdpOwnerEmpNumbers:o,fetchIncludibleGoals:v};return b}angular.module("app.succession-and-development").service("idpService",e),e.$inject=["webservice","employeeService","localizedMessages"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"succession_and_development",config:{"abstract":!0,url:"/succession_and_development",template:"<ui-view/>"}},{state:"succession_and_development.9_box_matrix_dashboard",config:{url:"/9_box_matrix",views:{"":{templateUrl:"app/succession_and_development/9BoxMatrix/9_box_matrix.html",controller:"nineBoxMatrix",controllerAs:"vm"},"navbar@":{templateUrl:"app/succession_and_development/9BoxMatrix/9_box_matrix_navbar.html",controller:"nineBoxMatrixNavbarController",controllerAs:"navbar"}},data:{title:"9 Box Matrix"}}},{state:"succession_and_development.9_box_matrix_config",config:{url:"/9_box_matrix_config",views:{"":{templateUrl:"app/succession_and_development/9BoxMatrix/configure9BoxMatrix/9_box_matrix_config.html",controller:"nineBoxMatrixConfiguration",controllerAs:"vm"}},data:{title:"9 Box Matrix Configuration"}}},{state:"succession_and_development.list_idp",config:{url:"/idp_list?empNo?employeeId?empName?redirectedFrom?include",views:{"":{templateUrl:"app/succession_and_development/idp/idp_list/idp_list.html",controller:"IndividualDevelopmentPlanListController",controllerAs:"vm"},"navbar@":{templateUrl:"app/succession_and_development/idp/idp_list/idp_list_navbar.html",controller:"IndividualDevelopmentPlanListNavbarController",controllerAs:"navbar"}},data:{title:"Individual Development Plans"},params:{listType:"idp_list",redirectedFrom:{value:null,squash:!0},empNo:null,employeeId:null,empName:null,include:null}}},{state:"succession_and_development.my_idp",config:{url:"/my_idp?redirectedFrom?empNo",views:{"":{templateUrl:"app/succession_and_development/idp/idp_list/idp_list.html",controller:"IndividualDevelopmentPlanListController",controllerAs:"vm"},"navbar@":{templateUrl:"app/succession_and_development/idp/idp_list/idp_list_navbar.html",controller:"IndividualDevelopmentPlanListNavbarController",controllerAs:"navbar"}},data:{title:"My Development Plan"},params:{listType:"my_idp",redirectedFrom:{value:null,squash:!0},empNo:null}}},{state:"succession_and_development.add_idp",config:{url:"/add_idp/{empId}/{referrer}",views:{"":{templateUrl:"app/succession_and_development/idp/add/add_idp.html",controller:"AddIndividualDevelopmentPlanController",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:"SingleMenuItemTopRibbonController",controllerAs:"vm"}},data:{title:"Add Individual Development Plan",initialState:"succession_and_development.list_idp"},params:{referrer:null}}},{state:"succession_and_development.idp",config:{"abstract":!0,url:"/idp/{idpId}",views:{"":{templateUrl:"app/succession_and_development/idp/idp_tabs/idp_profile.html"},"navbar@":{templateUrl:"app/succession_and_development/idp/idp_tabs/idp_tab_navbar.html",controller:"IndividualDevelopmentPlanTabNavbarController",controllerAs:"vm"}},data:{navbar:{title:!1,employeeSearch:!1,employeeProfile:!0}}}},{state:"succession_and_development.idp.idp_view",config:{url:"/idp_view/{referrer}",views:{"":{templateUrl:"app/succession_and_development/idp/idp_view/idp_view.html",controller:"IndividualDevelopmentPlanDetailsController",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:"SingleMenuItemTopRibbonController",controllerAs:"vm"}},data:{title:"Development Plan",initialState:"succession_and_development"},resolve:{employeeService:"employeeService"},params:{referrer:null}}},{state:"succession_and_development.idp.add_goal",config:{url:"/{category}/{goalId}/{redirectFrom}/{listType}/{referrer}/{listName}/{empNumber}/{idpId}/{targetedRole}/{version}",views:{"":{templateUrl:"app/performance/goals/add/add-goal.html",controller:"PerformanceAddGoalController",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/layout/single_menu_item_top_ribbon.html",controller:"SingleMenuItemTopRibbonController",controllerAs:"vm"}},data:{oxd:!0},params:{goalId:null,listType:"employee_goals",redirectFrom:null,referrer:null,empNumber:null,category:"development_goal",parentGoalId:null,parentGoalLevel:null,listName:null,idpId:null,targetedRole:null,version:null}}}]}angular.module("app.succession-and-development").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){s.show(),m.getSetting("page_size").then(function(e){I.pageSize=e,I.fetchActivities("name","ASC",1)})}function f(e,t,a){var o={offset:(a-1)*I.pageSize,limit:I.pageSize,sortingField:I.SortingListFields[e],sortingOrder:t,preset:!1,type:"work",deleted:!1},r=[];r.push(u.fetchCommonActivities(o)),r.push(l.call("permissions/dataGroup/time_common_activities","GET",[],{})),i.all(r).then(function(e){I.permissions=e[1].data.data,I.permissions.read||d.go("403"),I.activities=e[0].data.data,I.unselectableIds=_(I.activities).where({preset:!0}).pluck("activityId").valueOf(),h(),I.totalDataCount=e[0].data.meta.total,I.dataInCurruntPage=e[0].data.data.length,I.page=a,I.lastPage=Math.ceil(I.totalDataCount/I.pageSize),g(),s.hide(),0==I.activities.length&&n.infoToast("No Records Found")},function(e){s.hide(),d.go("403")})}function g(){I.activitiesListHelper=new t.list(I.listData.activities,I.activities),I.selectAll=I.activitiesListHelper.selectAllItems,I.deselectAll=I.activitiesListHelper.deselectAllItems}function h(){I.panelInfo={activitiesInfo:{hideRecordCount:!0}},v()}function v(){var e=[{name:"name",lable:"Activity",getter:"name",sortable:!0,sortAction:"fetchActivities"}],t=[{colspan:3}],a=[];I.permissions.update&&a.push({"class":"activity",clickAction:"editActivity",tooltip:"Edit",icon:"edit_item"});var i=[{action:"deleteSelection",lable:"Delete Selected",actionPermission:I.permissions["delete"]}],o=["100%"];I.permissions.update&&I.permissions["delete"]?o=["5%","90%","5%"]:I.permissions["delete"]?o=["5%","95%"]:I.permissions.update&&(o=["95%","5%"]),I.listData={activities:{selectable:!0,selected:[],unselectableIds:I.unselectableIds,idGetter:"activityId",listFields:e,extraTH:t,extraTD:a,showColumnsAnyway:!0,permission:I.permissions,listActions:i,columnWidths:o,pagination:!0}}}function y(){I.deleteConfirmationData={head:"You are about to delete data permanently",content:"Are you sure you want to continue?",actions:[{actionName:"Yes, Delete",actionFunction:"confirm"},{actionName:"No, Cancel",actionFunction:"cancel"}]}}function b(e){return(!e.hasOwnProperty("preset")||1!=e.preset)&&void o.showModal({templateUrl:"app/time/commonActivities/common_activities_modal.html",controller:"TimeEditCommonActivitiesController",controllerAs:"modal",inputs:{activity:e,dataList:I.activities}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){})})}function C(){if(I.listData.activities.selected.length>0){var e=I.listData.activities.selected.length;s.show(),l.call("jobActivities","DELETE",{data:I.listData.activities.selected},{}).then(function(t){s.hide();var a="deleteSuccess";n.showLocalizedToast(a),I.total-=e,w(I.listData.activities.selected)},function(e){s.hide(),e.data&&e.data.details&&"record is in use"==e.data.details?c.error(n.getLocalizedCustom("Not Allowed to Delete Activities Which Have Time Logged Against")):c.error(n.getLocalizedCustom("Invalid Data"))})}}function w(e){for(var t=I.activities.length-1;t>=0;t--){var a=e.indexOf(I.activities[t].activityId);a>-1&&(e.splice(a,1),I.activities.splice(t,1))}}function S(e){var t=e.obj;if(t.selected)I.listData.activities.selected.push(t.activityId);else{var a=I.listData.activities.selected.indexOf(t.activityId);a>-1&&I.listData.activities.selected.splice(a,1)}}function D(){I.listData.activities.selected.length>0&&o.showModal({templateUrl:"app/pim/delete_confirmation.html",controller:"PimDeleteConfirmationController",controllerAs:"modal"}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&(C(),F(I.listData.activities.selected.length))})})}function T(){var e={name:""};o.showModal({templateUrl:"app/time/commonActivities/common_activities_modal.html",controller:"TimeEditCommonActivitiesController",controllerAs:"modal",inputs:{activity:e,dataList:I.activities}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e&&x()})})}function x(){I.totalDataCount=I.totalDataCount+1,I.dataInCurruntPage=I.dataInCurruntPage+1}function F(e){I.totalDataCount=I.totalDataCount-e,I.dataInCurruntPage=I.dataInCurruntPage-e}function k(){close(!0)}function E(){close(!1)}var I=this;I.activities="",I.editActivity=b,I.deleteActivities=C,I.changeSelection=S,I.deleteSelection=D,I.addActivities=T,I.confirm=k,I.cancel=E,I.fetchActivities=f,I.SortingListFields={name:"name"},I.unselectableIds=[],I.pageSize=50,I.page=1,I.lastPage=0,I.totalDataCount=0,I.dataInCurruntPage=0,I.tempEmpNo=r.empNumber,p(),y()}angular.module("app.admin").controller("TimeCommonActivitiesController",e),e.$inject=["logger","listHelper","$window","$q","ModalService","localizedMessages","webservice","$rootScope","loader","toast","$state","settingsService","timeService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p){function f(){h()}function g(e){C.pendingRequest=!0,C.debounceHolder.cancel(),C.debounceHolder=_.debounce(function(){if(""==e||null==e)c.$broadcast("schemaForm.error.name","duplicationOfDeletedActivity",!0),c.$broadcast("schemaForm.error.name","duplicationOfActivity",!0),c.showUndeleteOptions=!1,C.pendingRequest=!1;else{c.$broadcast("schemaForm.error.name","duplicationOfDeletedActivity",!0),c.$broadcast("schemaForm.error.name","duplicationOfActivity",!0);var a={};a.name=e,a.deleted=!1,C.isEditMode&&(a.excludeIds=[C.activity.activityId]);var i={};i.activeActivityMatches=m.fetchActivities(a),i.deletedCommonActivityMatches=m.fetchActivities({deleted:!0,name:e,sortingField:"activity_id",sortingOrder:"DESC",commonActivities:!0}),u.all(i).then(function(e){var a=e.activeActivityMatches.data,i=e.deletedCommonActivityMatches.data;a.meta.total>0?null!=a.data[0].projectId?c.$broadcast("schemaForm.error.name","duplicationOfActivity",t.getLocalizedCustom("Already Exists as a Project Activity")):a.data[0].preset?c.$broadcast("schemaForm.error.name","duplicationOfActivity",t.getLocalizedCustom("Already Exists as a Predefined Activity")):c.$broadcast("schemaForm.error.name","duplicationOfActivity",t.getLocalizedCustom("Already exists")):c.$broadcast("schemaForm.error.name","duplicationOfActivity",!0),C.isEditMode?i.meta.total>0?c.$broadcast("schemaForm.error.name","duplicationOfDeletedActivity",!1):c.$broadcast("schemaForm.error.name","duplicationOfDeletedActivity",!0):i.meta.total>0&&0==a.meta.total?(C.activityIdToUndelete=i.data[0].activityId,c.showUndeleteOptions=!0):c.showUndeleteOptions=!1,C.pendingRequest=!1})}},500),C.debounceHolder()}function h(){C.schema={type:"object",title:"Common Activity",properties:{name:{title:"Name",type:"string",maxLength:200},undelete:{title:t.getLocalizedCustom("An activity with the same name was previously deleted. Reactivate it?"),type:"boolean","default":!0}},required:["name"]},C.form=[{type:"section",htmlClass:"row",items:[{type:"text",htmlClass:"col s12 m12 l12",key:"name",ngModelOptions:{allowInvalid:!0},validationMessage:{duplicationOfActivity:t.getLocalizedCustom("Already exists"),duplicationOfDeletedActivity:t.getLocalizedCustom("An Activity with the Same Name Was Previously Deleted.You Can Re-activate It Through Add Common Activity."),302:t.getLocalizedCustom("Required"),201:p.textLengthExceedValidation.message(C.schema.properties.name.maxLength)},onChange:function(e){g(e)}}]},{type:"section",htmlClass:"row",condition:"showUndeleteOptions",items:[{type:"radiobuttons",htmlClass:"col s12 m12 l12",key:"undelete",titleMap:[{value:!0,name:t.getLocalizedCustom("Yes")+" -  "+t.getLocalizedCustom("Activity will be undeleted")},{value:!1,name:t.getLocalizedCustom("No")+" - "+t.getLocalizedCustom("A new activity will be created with the same name")}],destroyStrategy:"retain"}]}],d.addRequiredMessage(C.form),C.model={name:C.activity.name,undelete:!0}}function v(e){if(c.$broadcast("schemaFormValidate"),!C.pendingRequest&&e.$valid){l.show();var i=C.model.undelete&&c.showUndeleteOptions,s=function(e){o.unshift(e.data.data)},d=angular.copy(C.model);delete d.undelete;var m="PATCH",u="updateSuccess";if(C.isEditMode){var p="jobActivities/"+C.activity.activityId;s=function(e){y(e.data.data)}}else if(i){var p="jobActivities/"+C.activityIdToUndelete;delete d.name,d.is_deleted=0}else{var p="jobActivities";u="saveSuccess",m="POST"}a.call(p,m,d,{}).then(function(e){s(e),t.showLocalizedToast(u)},function(e){r.error(t.getLocalizedCustom("Invalid Data"))})["finally"](function(){l.hide()}),n(!0)}}function y(e){for(var t=0;t<o.length;t++)if(o[t].activityId==e.activityId){angular.extend(o[t],e);break}}function b(){n(!1)}var C=this,w={};angular.copy(i,w),C.activity=w,C.save=v,C.cancel=b,c.showUndeleteOptions=!1,C.activityIdToUndelete=null,C.pendingRequest=!1,C.debounceHolder=_.debounce(function(){},0),C.activity.activityId?C.title="Edit Common Activity":C.title="Add Common Activity",C.isEditMode=C.activity.hasOwnProperty("activityId"),f()}angular.module("app.admin").controller("TimeEditCommonActivitiesController",e),e.$inject=["logger","localizedMessages","webservice","activity","dataList","close","loader","toast","$rootScope","$scope","formHelper","timeService","$q","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y){function b(){t.show(),x(),r.fetchTimesheetWithTimesheetItemsByTimesheetId(d.timesheetId).then(function(e){E.timesheet=e.data,E.timesheetMeta=e.meta,E.dayOffStatus=e.meta.DayOffStatus,"employeeProfile"==E.redirectedFrom&&y.addBackToProfileButton(E.empNo);var a={};a.projects=r.fetchAllProjects(E.timesheet.employeeId);var i=_(E.timesheet.TimesheetItem).map("projectId").uniq().value();a.projectsWithActivities=r.fetchProjectWithActivitiesByProjectIds(i),a.commonActivities=r.fetchCommonActivities(),a.breakTypeCommonActivities=r.fetchCommonActivities({type:"break"}),a.payHours=r.fetchTimesheetPayHours(E.timesheet.timesheetId),s.all(a).then(function(e){E.projects=e.projects.data.data,E.projectActivities=e.projectsWithActivities.data.data,E.commonActivities=e.commonActivities.data.data,E.breakTypeCommonActivities=e.breakTypeCommonActivities.data.data,E.payHours=e.payHours.data.data,E.breakTypeActivityIds=_(E.breakTypeCommonActivities).flatten().pluck("activityId").valueOf(),t.hide(),E.render=!0,f(function(){var e={};return e.employeeTimesheets=r.fetchEmployeeTimesheets(E.timesheet.employeeId),e.timesheetActionLogs=r.fetchTimesheetActionLogs(d.timesheetId),e.employee=m.getEmployee(E.timesheet.employeeId,void 0,!0),s.all(e).then(function(e){E.timesheetEnumAndTitleMap=w(e.employeeTimesheets.data.data),E.timesheetActionLogs=e.timesheetActionLogs.data.data,S(),T(E.timesheet.timesheetId),E.employee=e.employee,E.employee.empNumber==n.emp_number?(E.isMyTimesheet=!0,n.$emit("markMenuItemAsCurrent",{href:"/client/#/noncore/time/viewMyTimesheet"})):(n.$emit("markMenuItemAsCurrent",{stateName:"time.employee_timesheets"}),C()),n.$emit("setEmployeeForTimesheetNavbar",E.employee)})})})},function(){t.hide(),u.go("403")})}function C(){var e=E.employee.firstName+" "+E.employee.lastName;v.setForcedTitle(["Time Tracking","Employee Timesheets",e],{1:{state:"time.employee_timesheets",params:{}}})}function w(e){for(var t=[],a=[],i=0;i<e.length;i++)t.push({value:e[i].timesheetId,name:h.toLocalizedDate(e[i].startDate)+" to "+h.toLocalizedDate(e[i].endDate)}),a.push(e[i].timesheetId);return{titleMap:t,"enum":a}}function S(){E.panelInfo={timesheetActionLogs:{title:"Actions Performed on the Timesheet",
hideRecordCount:!0}},D()}function D(){var e=[{name:"action",lable:"Action",getter:"action",formatter:function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}},{name:"performerName",lable:"Performed By",getter:"performerName"},{name:"dateTime",lable:"Date",getter:"dateTime"},{name:"comment",lable:"Comment",getter:"comment"}];E.listData={timesheetActionLogs:{selectable:!1,selected:[],unselectableIds:[],idGetter:"timesheetActionLogId",listFields:e,extraTH:[{}],extraTD:[{}],showColumnsAnyway:!0,permission:E.permission,listActions:[],columnWidths:["15%","15%","10%","60%"],pagination:!1}}}function T(e){E.schema={type:"object",properties:{timesheet:{type:"string","enum":E.timesheetEnumAndTitleMap["enum"]}}},E.form=[{type:"select",key:"timesheet",hideLabel:!0,emptyOption:!1,onChange:function(e){r.fetchTimesheetById(e).then(function(e){k(e.data.data)})},titleMap:E.timesheetEnumAndTitleMap.titleMap}],E.modal={timesheet:e}}function x(){E.addTimesheetSchema={type:"object",properties:{timesheet_date:{title:"Create Timesheet",type:["null","object"],datePickerConfig:{selectMonths:!0,selectYears:5,max:new Date}}}},E.addTimesheetForm=[{type:"date-icon",htmlClass:"",key:"timesheet_date",tooltip:c.getLocalizedCustom("Select day to create timesheet"),onChange:F}],E.addTimesheetModel={timesheet_date:null}}function F(){var e=moment(E.addTimesheetModel.timesheet_date).format("YYYY-MM-DD");r.createTimesheet(E.employee.empNumber,e).then(function(e){k(e.data.data)},function(e){400==e.status&&"object"==typeof e.data.messages?e.data.messages.warning?a.warning(c.getLocalizedCustom(e.data.messages.warning)):e.data.messages.error&&a.warning(c.getLocalizedCustom(e.data.messages.error)):a.error("Failed to Create")})}function k(e){if("detailed"==e.type)u.go("time.detailed_timesheet",{timesheetId:e.timesheetId});else{var t=E.isMyTimesheet?"viewMyTimesheet":"viewTimesheet";g.url("/noncore/time/"+t+"/employeeId/"+e.employeeId+"/timesheetStartDateFromDropDown/"+e.startDate)}}var E=this;E.payHourPanelTemplate="app/directives/pay-hours-panel.html",E.render=!1,E.projects=[],E.validTimesheet=!1,E.isMyTimesheet=!1,E.permission={read:!0},E.timesheetActionLogs=[],E.breakTypeCommonActivities=[],E.redirectedFrom=d.redirectedFrom,E.empNo=d.empNo,b(),E.validateTimesheetStatus={valid:!0},E.action=function(e){E.validateTimesheetStatus.valid=!0,o.$broadcast("validateTimesheetItems",E.validateTimesheetStatus),o.$applyAsync(function(){E.validateTimesheetStatus.valid&&E.showActionComment(e).then(function(i){var o={actionId:e,actionComment:i};t.show(),r.saveTimesheetWithTimesheetItemsByTimesheetId(d.timesheetId,E.timesheet,o).then(function(e){r.fetchTimesheetWithTimesheetItemsByTimesheetId(d.timesheetId).then(function(i){var o=_(i.data.TimesheetItem).map("projectId").uniq().value();r.fetchProjectWithActivitiesByProjectIds(o).then(function(o){E.timesheet=i.data,E.timesheetMeta=i.meta,E.projectActivities=o.data.data,t.hide(),a.success(c.getLocalizedCustom(e.data.messages.success))})}),r.fetchTimesheetActionLogs(d.timesheetId).then(function(e){E.timesheetActionLogs=e.data.data}),r.fetchTimesheetPayHours(E.timesheet.timesheetId).then(function(e){E.payHours=e.data.data})},function(e){t.hide(),a.error(c.getLocalizedCustom("Invalid Data"))})})})},E.getTotalTime=function(){var e=E.timesheet.TimesheetItem,t=_.transform(e,function(e,t){return"00:00"!=t.duration&&E.breakTypeActivityIds.indexOf(t.activityId)==-1&&e.push(t.duration),!0},[]);return t.length?_.reduce(t,function(e,t){var a=e.split(":"),i=t.split(":"),o=parseInt(a[0])+parseInt(i[0]),n=parseInt(a[1])+parseInt(i[1]),l=60*o+n,r=l%60,s=parseInt(l/60);return 1==(r+"").length&&(r="0"+r),1==(s+"").length&&(s="0"+s),s+":"+r},"00:00"):"00:00"},E.showActionComment=function(e){var t=E.timesheetMeta.AllowedWorkflowActions[e],a=s.defer(),i="";if("Approve"==t)i="Confirm Timesheet Approval";else{if("Reject"!=t)return a.resolve(null),a.promise;i="Confirm Timesheet Rejection"}return l.showModal({templateUrl:"app/time/detailedTimesheet/timesheet_action_comment.html",controller:"TimetimesheetActionCommentController",controllerAs:"vm",inputs:{title:i}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!1?a.reject():a.resolve(e)})}),a.promise}}angular.module("app.time",["hl.sticky","app.pim"]).controller("TimeDetailedTimesheetController",e),e.$inject=["webservice","loader","toast","formHelper","$rootScope","$scope","ModalService","timeService","$q","localizedMessages","$stateParams","employeeService","$state","LOGIN","$timeout","$location","dateService","titleService","menuService"]}(),function(){"use strict";function e(e,t,a){function i(){l()}function o(a){e.$broadcast("schemaFormValidate"),a.$valid&&t(r.model.comment)}function n(){t(!1)}function l(){r.schema={type:"object",properties:{comment:{type:"string",title:"Comment",maxLength:250}}},r.form=[{type:"section",htmlClass:"row",items:[{type:"textarea",htmlClass:"col s12 m12 l12",key:"comment"}]}],r.model={comment:""}}var r=this;r.confirm=confirm,r.cancel=n,r.save=o,r.title=a,i()}angular.module("app.pim").controller("TimetimesheetActionCommentController",e),e.$inject=["$scope","close","title"]}(),function(){"use strict";function e(e,t,a,i){function o(){r(s.timesheetItem)}function n(i){e.$broadcast("schemaFormValidate"),i.$valid&&(a.comment=s.model.comment,t(!0))}function l(){t(!1)}function r(){s.schema={type:"object",readOnly:s.readOnly,properties:{comment:{type:"string",title:"Comment",maxLength:2e3}}},s.form=[{type:"section",htmlClass:"row",items:[{type:"textarea",htmlClass:"col s12 m12 l12",key:"comment"}]}],s.model={comment:s.timesheetItem.comment}}var s=this;s.confirm=confirm,s.cancel=l,s.save=n,s.timesheetItem=a,s.readOnly=i,o()}angular.module("app.pim").controller("TimeTimesheetItemCommentController",e),e.$inject=["$scope","close","timesheetItem","readOnly"]}(),function(){"use strict";function e(e,t,a,i,o,n){function l(){r()}function r(){d.model={},d.schema={type:"object",properties:{startDate:{title:i.getLocalizedCustom("Select a Day to Create Timesheet"),type:["null","object"]}},required:["startDate"]},d.form=[{type:"section",htmlClass:"row",items:[{type:"date",htmlClass:"col s12 m12 l12",key:"startDate"}]}]}function s(a){e.$broadcast("schemaFormValidate"),a.$valid&&t(d.model)}function c(){t(!1)}var d=this;d.employeeFullName=o.getFullName(n),d.create=s,d.cancel=c,l()}angular.module("app.time").controller("CreateEmployeeTimesheetController",e),e.$inject=["$scope","close","formHelper","localizedMessages","employeeService","employee"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p){function f(){var e={employees:b(),states:C(),subunits:w({tree:!0}),operationalCountryLocationHierarchy:S(),timesheetPeriodFilterOptions:D()};t.all(e).then(function(e){O.employees=e.employees,O.states=e.states,O.subunits=e.subunits.data.data,O.operationalCountryLocations=s.getOperationalCountryLocationDropDown(e.operationalCountryLocationHierarchy.data.data.options),O.timesheetPeriodFilterOptions=e.timesheetPeriodFilterOptions.data.data,x();var a={setCurrentFilter:F(),setDefaultFilter:E()};t.all(a).then(function(){M()}),I(),g()})}function g(){O.model=N(O.filter),O.schema={type:"object",properties:{employees:{title:o.getLocalizedCustom("Employee Name"),type:"object"},subunit:{title:o.getLocalizedCustom("Sub Unit"),type:"string"},location:{title:o.getLocalizedCustom("Location"),type:"string","enum":O.formData.locations["enum"]},period:{title:o.getLocalizedCustom("Timesheet Period"),type:"string","enum":O.formData.periods["enum"]},fromDate:{title:o.getLocalizedCustom("From"),type:["null","object"],datePickerConfig:{max:new Date,selectMonths:!0,selectYears:20}},toDate:{title:o.getLocalizedCustom("To"),type:["null","object"],datePickerConfig:{max:new Date,selectMonths:!0,selectYears:20}},termination:{title:o.getLocalizedCustom("Include"),type:"string","enum":O.formData.termination["enum"]},showSubordinatesOnly:{title:o.getLocalizedCustom("Only Show My Subordinates' Timesheets"),type:"boolean"},states:{title:o.getLocalizedCustom("Timesheet Status"),type:"object"},isPersisted:{title:o.getLocalizedCustom("Make Filter Default"),type:"boolean"}},required:["fromDate","toDate"]},O.form=[{type:"section",htmlClass:"row",items:[{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l12",key:"employees",choices:O.employees,placeholder:o.getLocalizedCustom("Employee Name"),onChange:function(e){A()}}]},{type:"section",htmlClass:"row",items:[{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l12",key:"states",choices:O.states,onChange:function(e){A()}}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"subunit",emptyOption:"All",titleMap:O.formData.subunits.titleMap,onChange:function(e){A()}},{type:"select",htmlClass:"col s12 m12 l6",key:"location",emptyOption:"All",titleMap:O.operationalCountryLocations,onChange:function(e){A()}}]},{type:"section",htmlClass:"row",items:[{type:"select",htmlClass:"col s12 m12 l6",key:"termination",emptyOption:!1,titleMap:O.formData.termination.titleMap,onChange:function(e){A()}},{type:"select",htmlClass:"col s12 m12 l6",key:"period",emptyOption:!1,titleMap:O.formData.periods.titleMap,onChange:function(t){A(),t==R.id?(O.model.fromDate=R.startDate,O.model.toDate=R.endDate):t==z.id?(O.model.fromDate=z.startDate,O.model.toDate=z.endDate):t==j.id?(O.model.fromDate=j.startDate,O.model.toDate=j.endDate):e.$broadcast("clearDatePickers")}}]},{type:"section",htmlClass:"row",items:[{type:"date",htmlClass:"col s12 m12 l6",key:"fromDate",defaultDate:O.filter.fromDate,resetDefaultDate:O.resetDefaultDate,onChange:function(t){A(),t&&O.model.toDate&&(t.getTime()<=O.model.toDate.getTime()?(e.$broadcast("schemaForm.error.toDate","toDate",!0),e.$broadcast("schemaForm.error.toDate","schemaForm",!0)):e.$broadcast("schemaForm.error.toDate","toDate",!1))},ngModelOptions:{allowInvalid:!0},validationMessage:{fromDate:r.beforeDate.message,302:o.getLocalizedCustom("Required")},$validators:{fromDate:function(e){return r.beforeDate.validator(e,O.model.toDate)}},condition:function(){return O.model.period==j.id}},{type:"date",htmlClass:"col s12 m12 l6",key:"toDate",defaultDate:O.filter.toDate,resetDefaultDate:O.resetDefaultDate,onChange:function(t){A(),t&&O.model.fromDate&&(t.getTime()>=O.model.fromDate.getTime()?(e.$broadcast("schemaForm.error.fromDate","fromDate",!0),e.$broadcast("schemaForm.error.fromDate","schemaForm",!0)):e.$broadcast("schemaForm.error.fromDate","fromDate",!1))},ngModelOptions:{allowInvalid:!0},validationMessage:{toDate:r.afterDate.message,302:o.getLocalizedCustom("Required")},$validators:{toDate:function(e){return r.toDate.validator(e,O.model.fromDate)}},condition:function(){return O.model.period==j.id}}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l6 input-field",key:"showSubordinatesOnly",onChange:function(e){A()}},{type:"checkbox",htmlClass:"col s12 m12 l6 input-field",key:"isPersisted"}]}]}function h(t){if(e.$broadcast("schemaFormValidate"),t.$valid){var i=O.model;i.states=P(O.model.states),p.$broadcast("angucomplete-alt-with-employee-id:clearInput"),a(O.model)}}function v(){a(!1)}function y(){p.$broadcast("angucomplete-alt-with-employee-id:clearInput"),a(O.defaultFilter)}function b(){var e={includeSelf:"false",filter:{termination:"2",permissionType:[{type:"data_group",required_permissions:{time_employee_timesheets:{canRead:"1",canCreate:"0",canUpdate:"0",canDelete:"0"}}}]}};return l.call("employees","GET",[],e).then(function(e){return i.getItemsForMultyselectAutocomplete(e.data.data,function(e){var t=n.getFullName(e);return{id:e.empNumber,name:t,employeeId:e.employeeId}})})}function C(){return u.fetchTimesheetStateFilterOptions().then(function(e){return O.timesheetStateFilterOptions=e.data.data,i.getItemsForMultyselectAutocomplete(O.timesheetStateFilterOptions,function(e){return{id:e.id.toString(),name:o.getLocalizedCustom(e.state)}})})}function w(e){return l.call("subunits","GET",[],e)}function S(){var e={permissionType:[{type:"data_group",required_permissions:{time_employee_timesheets:{canRead:1,canCreate:0,canUpdate:0,canDelete:0}}}]};return l.call("operationalCountryLocationHierarchy","GET",[],e)}function D(){return l.call("timesheetPeriodFilterOptions","GET",[],{})}function T(e){return e.map(function(e){return e.name=Array(5*e.level+1).join("")+e.name,e})}function x(){R=O.timesheetPeriodFilterOptions[0],z=O.timesheetPeriodFilterOptions[1],j=O.timesheetPeriodFilterOptions[2]}function F(){O.filter={employees:O.currentFilter.empNumbers?k(O.currentFilter.empNumbers):void 0,subunit:O.currentFilter.subunit?O.currentFilter.subunit:"",location:O.currentFilter.location?O.currentFilter.location:"",period:O.currentFilter.period,fromDate:O.currentFilter.fromDate,toDate:O.currentFilter.toDate,termination:O.currentFilter.termination,showSubordinatesOnly:O.currentFilter.showSubordinatesOnly,states:O.currentFilter.states,isPersisted:O.currentFilter.isPersisted}}function k(e){var t={},a=O.employees.filter(function(t){return e.includes(t.id)});return a.forEach(function(e){t[e.id]=e.name}),t}function E(){return m.getPersistedParameters("employee_timesheets_list").then(function(e){e&&(O.defaultFilter={employees:e.empNumbers?k(e.empNumbers):void 0,subunit:e.subunit?e.subunit:"",location:e.location?e.location:"",period:e.period,fromDate:e.fromDate,toDate:e.toDate,termination:e.termination,showSubordinatesOnly:e.showSubordinatesOnly,states:e.states,isPersisted:e.isPersisted},O.persistedFilter=e)})}function I(){O.formData={subunits:i.getEnumAndTitleMapForSelect(T(O.subunits),{name:"name",value:"id"},!0),locations:i.getEnumAndTitleMapForSelect(O.operationalCountryLocations,{name:"name",value:"value"}),periods:i.getEnumAndTitleMapForSelect([{name:o.getLocalizedCustom(O.timesheetPeriodFilterOptions[0].name),value:O.timesheetPeriodFilterOptions[0].id.toString()},{name:o.getLocalizedCustom(O.timesheetPeriodFilterOptions[1].name),value:O.timesheetPeriodFilterOptions[1].id.toString()},{name:o.getLocalizedCustom(O.timesheetPeriodFilterOptions[2].name),value:O.timesheetPeriodFilterOptions[2].id.toString()}],{name:"name",value:"value"}),termination:i.getEnumAndTitleMapForSelect([{name:o.getLocalizedCustom("Current Employees Only"),value:"1"},{name:o.getLocalizedCustom("Current and Past Employees"),value:"2"},{name:o.getLocalizedCustom("Past Employees Only"),value:"3"}],{name:"name",value:"value"})}}function A(){O.persistedFilter&&(O.filter.isPersisted=!1)}function M(){O.persistedFilter?(L(),_.isEqual(O.currentFilter,O.persistedFilter)?O.filter.isPersisted=!0:O.filter.isPersisted=!1):O.filter.isPersisted=!0}function L(){delete O.currentFilter.isPersisted,delete O.persistedFilter.isPersisted,void 0===O.currentFilter.subunit&&(delete O.currentFilter.subunit,delete O.persistedFilter.subunit),void 0===O.currentFilter.location&&(delete O.currentFilter.location,delete O.persistedFilter.location),O.currentFilter.period!=j.id&&(delete O.currentFilter.fromDate,delete O.currentFilter.toDate,delete O.persistedFilter.fromDate,delete O.persistedFilter.toDate)}function P(e){var t={};return Object.keys(e).forEach(function(e){var a=$(e);a&&(t[a.id.toString()]=a.state)}),t}function $(e){for(var t=0;t<O.timesheetStateFilterOptions.length;t++)if(O.timesheetStateFilterOptions[t].id==e)return O.timesheetStateFilterOptions[t]}function N(e){var t=e.states,a={};for(var i in t)a[i.toString()]=o.getLocalizedCustom(t[i]);return e.states=a,e}var O=this;O.search=h,O.cancel=v,O.reset=y;var R={},z={},j={};O.filter={},O.currentFilter=c,O.defaultFilter=d,O.persistedFilter=!1,O.formData={},O.employees=[],O.states=[],O.subunits=[],O.operationalCountryLocations=[],O.timesheetPeriodFilterOptions=[],O.timesheetStateFilterOptions=[],O.resetDefaultDate={reset:!1},f()}angular.module("app.time").controller("EmployeeTimesheetsListFilterController",e),e.$inject=["$scope","$q","close","formHelper","localizedMessages","employeeService","webservice","formValidationHelper","widgetChoiceHelper","currentFilter","defaultFilter","dataListSettingsService","timeService","$rootScope"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w){function _(){s.show();var e={permission:l.getPermission("time_employee_timesheets").then(function(e){return e.read?e:u.reject({statusText:"Forbidden"})}),pageSize:m.getSetting("page_size"),timesheetPeriodFilterOptions:d.fetchTimesheetPeriodFilterOptions(),timesheetStateFilterOptions:d.fetchTimesheetStateFilterOptions()};u.all(e).then(function(e){U.permissions=e.permission,U.pageSize=e.pageSize,U.timesheetPeriodFilterOptions=e.timesheetPeriodFilterOptions.data.data,U.timesheetStateFilterOptions=e.timesheetStateFilterOptions.data.data,j(),S().then(function(e){D("timesheetPeriod",U.order,U.page).then(function(){q()})})},function(){s.hide(),n.go("403")})}function S(){var e=u.defer();return U.defaultFilter={period:"2",fromDate:J.startDate,toDate:J.endDate,termination:"1",showSubordinatesOnly:!1,states:V([1,2,3]),isPersisted:!1},"time.employee_timesheets"===U.currentState||"time.employee_timesheets.quick_access"===U.currentState?v[U.sessionStorageKeyLastSearchFilters]?(U.filter=v[U.sessionStorageKeyLastSearchFilters],e.resolve(!0)):b.getPersistedParameters(U.listName).then(function(t){t?U.filter=t:U.filter=U.defaultFilter,e.resolve(!0)}):e.reject(),e.promise}function D(e,t,a){U.field=e,U.order=t,U.page=a,B();var i={include:"employee,timesheetPeriod",filter:U.filter,page:{page:U.page,limit:U.pageSize},orderField:U.sortingListFields[U.field],orderBy:U.order};return s.show(),d.fetchTimesheets(i).then(function(e){U.employeeTimesheets=e.data,U.total=e.meta.total,U.timesheetTimeFormat="HH:MM"===e.meta.timesheetTimeFormat?"HH:MM":"Hours",U.totalDataCount=U.total,U.dataInCurruntPage=e.data.length,U.meta=e.meta,U.page=a,U.lastPage=Math.ceil(U.total/U.pageSize),k(),s.hide(),0===U.employeeTimesheets.length&&o.infoToast("No Records Found")},function(){U.employeeTimesheets=[],U.totalDataCount=0,U.dataInCurruntPage=0,k(),s.hide(),o.infoToast("No Records Found")})}function T(e,t){U.filter.empNumbers=[t.employee.empNumber],v[U.sessionStorageKeyLastSearchFilters]=U.filter;var a={empNumbers:U.filter.empNumbers},i={filter:a,include:"employee,timesheetPeriod",orderField:U.sortingListFields[t.orderField],orderBy:t.order};d.fetchTimesheets(i).then(function(e){e.data.length>0?F(e.data[0]):x(t.employee)},function(){U.employeeTimesheets=[],U.totalDataCount=0,U.dataInCurruntPage=0,k(),s.hide(),o.infoToast("No Records Found")})}function x(e){C.warning("<span>"+o.getLocalizedCustom("No Timesheets Found")+"  <a class='no-timesheets-found-create'><b>"+o.getLocalizedCustom("CREATE")+"</b></a></span>",{onclick:function(){A(e)},toastClass:"toast no-timesheets-found-create",messageClass:"toast-message no-timesheets-found-create-message",escapeHtml:!1})}function F(e){if("summary"===e.type){var t="/client/#/noncore/time/viewPendingApprovelTimesheet/timesheetId/"+e.id+"/employeeId/"+e.empNumber+"/timesheetStartday/"+e.startDate;p.location.href=t}else n.go("time.detailed_timesheet",{timesheetId:e.id})}function k(){U.panelInfo={employeeTimesheetsInfo:{}},E()}function E(){var e=[{name:"name",lable:"Employee Name",getter:"employee",sortable:!0,sortAction:"fetchEmployeeTimesheets",formatter:function(e){return d.getFullName(e)},clickAction:"viewEmployeeTimesheet"},{name:"timesheetPeriod",lable:"Timesheet Period",getter:"timesheetPeriod",formatter:function(e){return i.toLocalizedDate(e.startDate)+" "+o.getLocalizedCustom("to")+" "+i.toLocalizedDate(e.endDate)},sortable:!0,sortAction:"fetchEmployeeTimesheets",clickAction:"viewEmployeeTimesheet"},{name:"status",lable:"Status",getter:"state",sortable:!0,sortAction:"fetchEmployeeTimesheets",formatter:function(e){return o.getLocalizedCustom(e)},clickAction:"viewEmployeeTimesheet"},{name:"totalTime",lable:"Total Time ("+U.timesheetTimeFormat+")",getter:"formattedDuration",sortable:!0,"class":"numeric",sortAction:"fetchEmployeeTimesheets",clickAction:"viewEmployeeTimesheet"}];U.listData={employeeTimesheets:{idGetter:["id","empNumber","startDate","endDate"],listFields:e,showColumnsAnyway:!0,permission:U.permissions,pagination:!0,listSpecificInitialSort:!0,clickableCondition:"id"}}}function I(){var e=!1;f.showModal({templateUrl:"app/time/employeeTimesheets/list/employee_timesheets_list_filter.html",controller:"EmployeeTimesheetsListFilterController",controllerAs:"searchModal",inputs:{currentFilter:U.filter,defaultFilter:U.defaultFilter}}).then(function(t){$(t.element).openModal({complete:function(){e||t.controller.cancel()}}),t.close.then(function(a){$(t.element).closeModal(),e=!0,a!==!1&&(N(a),a.isPersisted&&O(),v[U.sessionStorageKeyLastSearchFilters]=U.filter,D(U.field,U.order,1))})})}function A(e){var t=!1;f.showModal({templateUrl:"app/time/employeeTimesheets/list/create_employee_timesheet.html",controller:"CreateEmployeeTimesheetController",controllerAs:"createTimesheetModal",inputs:{employee:e}}).then(function(a){$(a.element).openModal({complete:function(){t||a.controller.cancel()}}),a.close.then(function(i){if($(a.element).closeModal(),t=!0,i!==!1){var o=i.startDate;M(o,e)}})})}function M(e,t){var a=L(P()),i=z(e);if(a<i)C.show("warning",o.getLocalizedCustom("Failed to Create: Future Timesheets Not Allowed"));else{var n=w.baseUrl+"time/createTimesheet/startDate/"+i+"/employeeId/"+t.empNumber;$.getJSON(n,function(e){if(1!=e[0]&&2!=e[0]||C.show("warning",o.getLocalizedCustom("Timesheet Overlaps with Existing Timesheets")),4==e[0]&&C.show("warning",o.getLocalizedCustom("Timesheet Already Exists")),5==e[0]&&C.show("warning",o.getLocalizedCustom("Timesheets Cannot Be Created for Inactive Timesheet Periods")),3==e[0]){var a={type:e[3],id:e[2],empNumber:t.empNumber,startDate:e[1].split(" ")[0]};F(a)}})}}function L(e){return $.ajax({type:"POST",url:w.baseUrl+"time/returnEndDate",data:"startDate="+e,async:!1,success:function(e){var t=e.split(" ");W=t[0]}}),W}function P(){var e,t,a,i=new Date;return e=String(i.getFullYear()),t=String(i.getMonth()+1),1==t.length&&(t="0"+t),a=String(i.getDate()),1==a.length&&(a="0"+a),e+"-"+t+"-"+a}function N(e){U.filter={empNumbers:R(e.employees),subunit:e.subunit?e.subunit:void 0,location:e.location?e.location:void 0,period:e.period,fromDate:z(e.fromDate),toDate:z(e.toDate),termination:e.termination,showSubordinatesOnly:e.showSubordinatesOnly,states:e.states,isPersisted:e.isPersisted}}function O(){var e=U.filter;delete e.isPersisted,e.period!=K.id&&(delete e.fromDate,delete e.toDate),b.persistParameters(U.listName,e)}function R(e){var t=[];return angular.isObject(e)&&(t=Object.keys(e)),t}function z(e){return"object"==typeof e&&(e=i.toStandardDate(e)),e}function j(){Y=U.timesheetPeriodFilterOptions[0],J=U.timesheetPeriodFilterOptions[1],K=U.timesheetPeriodFilterOptions[2]}function V(e){var t={};return e.forEach(function(e){var a=G(e);a&&(t[a.id.toString()]=a.state)}),t}function G(e){for(var t=0;t<U.timesheetStateFilterOptions.length;t++)if(U.timesheetStateFilterOptions[t].id==e)return U.timesheetStateFilterOptions[t]}function B(){if(U.filter.period!=K.id)for(var e=0;e<U.timesheetPeriodFilterOptions.length;e++)U.timesheetPeriodFilterOptions[e].id==U.filter.period&&(U.filter.fromDate=U.timesheetPeriodFilterOptions[e].startDate,U.filter.toDate=U.timesheetPeriodFilterOptions[e].endDate)}function q(){if("time.employee_timesheets.quick_access"==U.currentState&&h.empNumber&&v[U.sessionStorageKeySwitchToEmployeeTimesheetList]){v[U.sessionStorageKeySwitchToEmployeeTimesheetList]=void 0;var t={employee:y.getEmployee(h.empNumber)};u.all(t).then(function(t){var a={empNumber:t.employee.empNumber,employeeId:t.employee.employeeId,firstName:t.employee.firstName,middleName:t.employee.middleName,lastName:t.employee.lastName,fullName:y.getFullName(t.employee),termination_id:t.employee.termination_id};e.$broadcast("setTimesheetListQuickSearchEmployee",{employee:a})})}}function H(){v[U.sessionStorageKeyTimesheetPeriodDefined]&&(o.successToast(v[U.sessionStorageKeyTimesheetPeriodDefined].message),v[U.sessionStorageKeyTimesheetPeriodDefined]=void 0)}var U=this,W=null;c.setTitle("Employee Timesheets"),t.$on("filter",I),t.$on("getLatestTimesheet",T);var Y={},J={},K={};U.page=1,U.pageSize=50,U.total=0,U.field="timesheetPeriod",U.order="DESC",U.sortingListFields={name:"lastName",timesheetPeriod:"startDate",totalTime:"totalDuration",status:"state"},U.filter={},U.currentState=n.current.name,U.sessionStorageKeyLastSearchFilters="time_employee_timesheets_list_last_search_filters",U.sessionStorageKeyTimesheetPeriodDefined="timesheet_period_defined",U.sessionStorageKeySwitchToEmployeeTimesheetList="switch_to_employee_timesheet_list",U.listName="employee_timesheets_list",U.timesheetTimeFormat=void 0,U.fetchEmployeeTimesheets=D,U.viewEmployeeTimesheet=F,H(),_()}angular.module("app.time").controller("EmployeeTimeSheetsController",e),e.$inject=["$rootScope","$scope","formHelper","dateService","localizedMessages","$state","datagroupPermissions","webservice","loader","titleService","timeService","settingsService","$q","$window","ModalService","$translate","$stateParams","$localStorage","employeeService","dataListSettingsService","toast","LOGIN"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){function m(){e.$broadcast("filter",[])}function u(t){"undefined"!=typeof t&&(g.employeeSearchString=t.title,e.$broadcast("getLatestTimesheet",{employee:t.originalObject,orderField:"timesheetPeriod",order:"DESC"}))}function p(e,t){g.employeeSearchString=e;var a={name:"userInputString",includeSelf:"false",filter:{employee_name_or_id:e,termination:"2",permissionType:[{type:"data_group",required_permissions:{time_employee_timesheets:{canRead:"1",canCreate:"0",canUpdate:"0",canDelete:"0"}}}]},fields:"empNumber,firstName,middleName,lastName,employeeId,termination_id",sort:"fullName"};return i.call("employees","GET",[],a,t).then(function(e){for(var t=0;t<e.data.data.length;t++)e.data.data[t].fullName=d.getFullName(e.data.data[t]);return e.data.data})}function f(t,a){e.$broadcast("angucomplete-alt-with-employee-id:changeInput","employee_name_quick_filter_employee_timesheet_list",a.employee)}var g=this;g.title=s,t.$on("setTimesheetListQuickSearchEmployee",f),g.employeeSearchString="",g.filterEmployeeTimesheets=m,g.employeeSelected=u,g.fetchMatchingEmployees=p}angular.module("app.time").controller("EmployeeTimesheetsListNavbarController",e),e.$inject=["$rootScope","$scope","$state","webservice","datagroupPermissions","myShortcutService","hotkeys","focus","titleService","$translate","timeService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c){function d(e){var t=e.originalObject;n.fetchEmployeeTimesheets(t.empNumber).then(function(e){var a=e.data.data;0===a.length?(c.switch_to_employee_timesheet_list="true",s.url("time/employee_timesheets/"+t.empNumber)):a[0].type===n.detailedTimesheetType?r.go("time.detailed_timesheet",{timesheetId:a[0].timesheetId}):a[0].type===n.summaryTimesheetType&&s.url("noncore/time/viewTimesheet/employeeId/"+a[0].employeeId)})}function m(e,i){u.pastEmployeeSuffix=" ("+t.instant("Past Employee")+")",u.employeeSearchString=e;var o={name:"userInputString",filter:{employee_name_or_id:e,termination:"2"},fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId","page[offset]":"0","page[limit]":"10"};return a.call("employees","GET",[],o,i).then(function(e){for(var t=0;t<e.data.data.length;t++)e.data.data[t].termination_id&&(e.data.data[t].past_employee=u.pastEmployeeSuffix);return e.data.data})}var u=this;u.time=Date.now(),u.isMyTimesheet=!1,u.isEmployeeTimesheet=!1,u.fetchMatchingEmployees=m,u.employeeSelected=d,u.employeeSearchString="",u.employee=!1,e.$on("setEmployeeForTimesheetNavbar",function(t,a){u.selectedEmployeeName=a.firstName+" "+a.lastName,u.selectedEmployeeNumber=a.empNumber,u.selectedEmployee=a,u.isMyTimesheet=a.empNumber==e.emp_number,u.isEmployeeTimesheet=!u.isMyTimesheet})}angular.module("app.time").controller("TimesheetNavbarController",e),e.$inject=["$rootScope","$translate","webservice","focus","LOGIN","timeService","$window","$state","$location","$localStorage"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){function m(){var t=[];t.push(a.call("employeeAutoComplete","GET",[],{filter:{termination:2}})),e.all(t).then(function(e){var t=e[0].data.data.filter(function(e){return null==e.termination_id});g.employeeItems=c.getItemsForMultyselectAutocomplete(t,function(e){return{id:e.empNumber,name:e.firstName+" "+e.lastName,employeeId:e.employeeId}}),u()},function(e){n.hide(),$state.go("403")})}function u(){g.schema={type:"object",title:"Add Project Members",properties:{members:{title:i.getLocalizedCustom("Project Members"),type:"object"}},required:["members"]},g.form=[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"row",items:[{type:"autocomplete-multyselect",htmlClass:"col s12 m12 l12",key:"members",choices:g.employeeItems}]}]}],c.addRequiredMessage(g.form),g.model={}}function p(e){if(s.$broadcast("schemaFormValidate"),e.$valid){n.show();var t={projectId:g.projectId,memberIds:[]};if(Object.keys(g.model.members).length)for(var l in g.model.members)g.model.members.hasOwnProperty(l)&&t.memberIds.push(l);a.call("project/"+g.projectId+"/members","POST",t,{}).then(function(e){n.hide(),e.data.messages.success&&i.successToast(i.getLocalizedCustom(e.data.messages.success)),o(!0)})}}function f(){o(!1)}var g=this;g.title="Add Project Members",g.projectId=d.projectId,g.add=p,g.cancel=f,m()}angular.module("app.time").controller("TimeAddProjectMembersController",e),e.$inject=["$q","logger","webservice","localizedMessages","close","loader","toast","$rootScope","$scope","formHelper","$stateParams"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y){function b(){var e={Project:E.projectId};h(function(){s.$broadcast("markMenuItemAsCurrent",{stateName:"time.projects"})}),s.$broadcast("addTopMenuBackButton",{uiSref:"time.projects",tooltip:"Projects"}),m.getPermission("time_projects",!1,e).then(function(e){E.permissions=e,c.show(),E.permissions.read?p.getSetting("page_size").then(function(e){E.pageSize=e,C("name","ASC",1)}):(c.hide(),u.go("403"))})}function C(e,t,a){var i={offset:(a-1)*E.pageSize,limit:E.pageSize};c.show(),l.call("project/"+E.projectId+"/members","GET",[],i).then(function(e){E.members=e.data.data,E.totalDataCount=e.data.meta.totalCount,E.dataInCurruntPage=e.data.data.length,E.page=a,E.lastPage=Math.ceil(E.totalDataCount/E.pageSize),0==E.members.length&&n.infoToast("No Records Found"),g.getPhotos(E.members).then(function(){_(),T()}),s.$broadcast("projectNameChangedForProjectMembers",{projectName:e.data.meta.projectName})})["finally"](function(){c.hide()}),y.getProject(E.projectId).then(function(e){w(e.data.data.name)})}function w(e){var t=["Time Tracking","Activity Info","Projects"];e&&t.push(e),v.setForcedTitle(t)}function _(){E.panelInfo={memberInfo:{}},S()}function S(){var e=[{name:"profilePic",lable:"",getter:"photo",type:"profile-pic"},{name:"name",lable:"Employee Name",getter:"name",sortable:!1,sortAction:"fetchProjectMembers"},{name:"jobTitle",lable:"Job Title",getter:"jobTitle",sortable:!1},{name:"subUnit",lable:"Sub Unit",getter:"subUnit",sortable:!1},{name:"location",lable:"Location",getter:"location",sortable:!1}],t=[{action:"deleteSelection",lable:"Remove Selected",actionPermission:E.permissions.update}],a=["5%","35%","20%","20%","20%"];E.permissions.update&&(a=["5%","5%","30%","20%","20%","20%"]),E.listData={members:{selectable:!0,selected:[],idGetter:"empNumber",listFields:e,showColumnsAnyway:!0,extraTH:[],extraTD:[],permission:E.permissions,listActions:t,columnWidths:a,pagination:!0}}}function D(){var e=!1;o.showModal({templateUrl:"app/time/projectMembers/time.add_project_members.html",controller:"TimeAddProjectMembersController",controllerAs:"modal",inputs:{projectId:E.projectId}}).then(function(t){$(t.element).openModal({complete:function(){e||t.controller.cancel()}}),t.close.then(function(a){e=!0,a&&C("name","ASC",E.page),$(t.element).closeModal();
})})}function T(){E.projectMembersListHelper=new t.list(E.listData.members,E.members),E.selectAll=E.projectMembersListHelper.selectAllItems,E.deselectAll=E.projectMembersListHelper.deselectAllItems}function x(e){var t=e.obj;if(t.selected)E.listData.members.selected.push(t.empNumber);else{var a=E.listData.members.selected.indexOf(t.empNumber);a>-1&&E.listData.members.selected.splice(a,1)}}function F(){if(E.listData.members.selected.length>0){var e={templateUrl:"app/core/modal/confirmation_modal.html",controller:"ConfirmationModalController",controllerAs:"modal",inputs:{customMessage:"You are about to remove members from the project. Are you sure you want to continue?",successLabel:"Yes, Remove",cancelLabel:"No, Cancel"}};o.showModal(e).then(function(e){$(e.element).openModal(),e.close.then(function(e){e===!0&&k()})})}}function k(){if(E.listData.members.selected.length>0){E.listData.members.selected.length;c.show(),l.call("project/"+E.projectId+"/members","DELETE",{memberIds:E.listData.members.selected},{}).then(function(e){c.hide();n.showLocalizedToast("Successfully Removed"),C("name","ASC",E.page)},function(e){c.hide(),d.success(e)})}}var E=this;E.title="Project Info",E.projectId=f.projectId,E.deleteSelection=F,E.addMembers=D,E.changeSelection=x,E.fetchProjectMembers=C,E.pageSize=50,E.page=1,E.lastPage=0,E.totalDataCount=0,E.dataInCurruntPage=0,b()}angular.module("app.time").controller("TimeProjectMembersController",e),e.$inject=["logger","listHelper","$window","$q","ModalService","localizedMessages","webservice","$scope","$rootScope","loader","toast","datagroupPermissions","$state","settingsService","$stateParams","employeeService","$timeout","titleService","timeService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u){function p(){f()}function f(){g.tabs=[],g.tabs.push({title:d.getLocalizedCustom("Project Info"),uiSref:"time.project({ projectId: "+h+" })",tabId:1,automationId:"menu_time_ProjectInfo"}),g.tabs.push({title:d.getLocalizedCustom("Members"),uiSref:"time.project_members({ projectId: "+h+" })",tabId:2,automationId:"menu_time_ProjectMembers"})}var g=this;g.tabs=[];var h=m.projectId;g.visibilityMap={},g.currentItemMap={},p()}angular.module("app.time").controller("TimeProjectMembersTabNavBarController",e),e.$inject=["$rootScope","$scope","$q","$translate","$state","webservice","ModalService","focus","LOGIN","datagroupPermissions","localizedMessages","$stateParams","settingsService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C){function w(){T.schema={type:"object",title:"Projects",properties:{project:{title:"Project",type:"string"},activity:{title:"Activities",type:"array",items:{"enum":T.exportedActiviesForForm["enum"],type:"string"}}},required:[]},T.form=[{type:"row",items:[{type:"generic-auto-complete",htmlClass:"col-12",key:"project",required:!0,"text-searching":"Searching...",placeholder:"Type for hints...","text-no-results":"No results found",titleField:"name",searchFields:"name",initialValue:T.selectedProject,fetchItemsCallback:function(e,t){var a={projectName:e,page:{page:1,limit:50},sort:{orderField:"projectName",orderBy:"ASC"},include:"Customer",listMode:!0,excludeNonDeletableIds:!0};return g.getProjectList(a,t).then(function(e){return e.data.data.map(function(e){if(e.projectId!=T.projectId)return{value:e.projectId,name:e.Customer.name+" - "+e.name}})})},onInputChange:function(e){T.model.project="",T.model.activity=[],T.exportedActiviesForForm["enum"]=[],T.exportedActiviesForForm.titleMap=[],x=null,e?(r.$broadcast("schemaForm.error.project","noActivitiesSelected",!0),r.$broadcast("schemaForm.error.project","tv4-302",!0),r.$broadcast("schemaForm.error.project","invalid",a.getLocalizedCustom("Invalid project"))):(r.$broadcast("schemaForm.error.project","noActivitiesSelected",!0),r.$broadcast("schemaForm.error.project","invalid",!0),r.$broadcast("schemaForm.error.project","tv4-302",a.getLocalizedCustom("Required")))},objectSelectedCallback:function(e){!e||null!=x&&e.originalObject.value==x.originalObject.value||(x=e,r.$broadcast("schemaForm.error.project","invalid",!0),T.model.project=e.originalObject.value,T.model.activity=[],g.getProjectActivities(T.model.project,[]).then(function(a){T.exportableActivities=a.data.data;var i=t.getItemsForMultyselectAutocomplete(T.exportableActivities,function(e){return{id:e.activity_id,name:e.name}}),o=g.extractFieldValueFromData(i,"id");T.model.activity=o,i=t.getEnumAndTitleMapForSelect(i,!1,!0),angular.copy(i["enum"],T.exportedActiviesForForm["enum"]),angular.copy(i.titleMap,T.exportedActiviesForForm.titleMap),T.selectedProject=e.originalObject.name,S()})["finally"](function(){w()}))},validationMessage:{noActivitiesSelected:a.getLocalizedCustom("No Activities Selected"),invalid:a.getLocalizedCustom("Invalid project")}}]},{type:"row",condition:function(){return T.exportedActiviesForForm.titleMap.length>0},items:[{type:"checkboxes",htmlClass:"col-12",key:"activity",titleMap:T.exportedActiviesForForm.titleMap,notitle:!0,compact:!0,onChange:function(){C(function(){S()})}}]}]}function S(){r.$broadcast("schemaForm.error.project","noActivitiesSelected",!0),r.$broadcast("schemaForm.error.activity","noActivitiesSelected",!0),r.$broadcast("schemaForm.error.activity","duplicationName",!0);var e=!0;if(T.model.project&&0==T.exportableActivities.length?(C(function(){r.$broadcast("schemaForm.error.project","noActivitiesSelected",a.getLocalizedCustom("No assigned activities"))}),e=!1):T.model.project&&0==T.model.activity.length&&(C(function(){r.$broadcast("schemaForm.error.activity","noActivitiesSelected",a.getLocalizedCustom("No activities selected"))}),e=!1),T.exportableActivities.length>0){var t=_.filter(T.exportableActivities,function(e){return T.model.activity.includes(e.activity_id)});t=g.extractFieldValueFromData(t,"name",!0);var i=!1,o="";angular.forEach(t,function(t){T.activitiesList.includes(t)?(i=!0,o="Some selected activities already exist as project activities",e=!1):T.commonActiveActivities.includes(t)?(i=!0,o="Some selected activities already exist as common activities",e=!1):T.commonDeletedActivities.includes(t)?(i=!0,o="Some selected activities already exist as deleted common activities",e=!1):T.predefinedActivities.includes(t)&&(i=!0,o="Some selected activities already exist as predefined activities",e=!1)}),i&&C(function(){r.$broadcast("schemaForm.error.activity","duplicationName",a.getLocalizedCustom(o))})}return e}function D(e){var t=S();if(r.$broadcast("schemaFormValidate"),e.$valid&&t){var i=_.filter(T.exportableActivities,function(e){return T.model.activity.includes(e.activity_id)});i=i.map(function(e){var t=e.preset?"true":"false";return{name:e.name,preset:t,type:e.type.id}});var n={activity:i};return g.copyActivities(T.projectId,n).then(function(e){e.data&&e.data.success?a.successToast("Successfully Copied"):a.errorToast("Failed to Save"),o(e)},function(e){a.errorToast("Failed to Save"),o()})}return c.when(!0)}var T=this;T.clickEvent=u,T.title="Copy Activities",T.activitiesList=g.extractFieldValueFromData(f,"name",!0),T.exportableActivities=[],T.selectedProject="",T.model={project:"",activity:[]},T.exportedActiviesForForm={"enum":[],titleMap:[]},T.clickEvent=u,T.save=D,T.projectId=h,T.commonDeletedActivities=v,T.commonActiveActivities=y,T.predefinedActivities=b;var x=null;w()}angular.module("app.performance").controller("TimeCopyActivitiesModalController",e),e.$inject=["$state","formHelper","localizedMessages","employeeService","close","loader","toast","$scope","$stateParams","$q","type","currentTab","clickEvent","formValidationHelper","activities","timeService","projectId","commonDeletedActivities","commonActiveActivities","predefinedActivities","$timeout"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b){function C(){S.schema={type:"object",title:"Projects",properties:{name:{title:"Name",type:"string",maxLength:200}},required:["name"]},S.form=[{type:"row",items:[{type:"text",htmlClass:"col-12",key:"name",validationMessage:{201:p.textLengthExceedValidation.message(S.schema.properties.name.maxLength),302:a.getLocalizedCustom("Required"),duplicationName:a.getLocalizedCustom("Already exists")},onChange:function(e){w(e)}}]}]}function w(e){g.validateActivityName(e,r,S.activitiesList,S.commonDeletedActivities,S.commonActiveActivities,S.predefinedActivities)}function _(e){if(r.$broadcast("schemaFormValidate"),e.$valid){var t={name:S.model.name};return g.saveActivity(S.projectId,t).then(function(e){e.data&&e.data.success?a.successToast("Successfully Added"):a.errorToast("Failed to Save"),o(e)},function(e){o()})}return c.when(!0)}var S=this;S.clickEvent=u,S.title="Add Activity",S.activitiesList=g.extractFieldValueFromData(f,"name",!0),S.model={name:""},S.clickEvent=u,S.save=_,S.projectId=h,S.commonDeletedActivities=v,S.commonActiveActivities=y,S.predefinedActivities=b,C()}angular.module("app.performance").controller("TimeCreateActivitiesModalController",e),e.$inject=["$state","formHelper","localizedMessages","employeeService","close","loader","toast","$scope","$stateParams","$q","type","currentTab","clickEvent","formValidationHelper","activities","timeService","projectId","commonDeletedActivities","commonActiveActivities","predefinedActivities"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b,C,w){function _(){T.schema={type:"object",title:"Projects",properties:{name:{title:"Name",type:"string",maxLength:200}},required:["name"]},T.form=[{type:"row",items:[{type:"text",htmlClass:"col-12",key:"name",validationMessage:{201:p.textLengthExceedValidation.message(T.schema.properties.name.maxLength),302:a.getLocalizedCustom("Required"),duplicationName:a.getLocalizedCustom("Already exists")},onChange:function(e){S(e)}}]}]}function S(e){g.validateActivityName(e,r,T.activitiesList,T.commonDeletedActivities,T.commonActiveActivities,T.predefinedActivities)}function D(e){if(r.$broadcast("schemaFormValidate"),e.$valid){var t={name:T.model.name};return g.updateActivity(T.projectId,T.activityId,t).then(function(e){e.data&&e.data.success?a.successToast("Successfully Updated"):a.errorToast("Failed to Save"),o(e)},function(e){a.errorToast("Failed to Save"),o()})}return c.when(!0)}var T=this;T.clickEvent=u,T.title="Add Activity";var x=g.extractFieldValueFromData(f,"name",!0);T.activitiesList=x.filter(function(e,t,a){return e!=y.toLowerCase()}),T.model={name:y},T.clickEvent=u,T.save=D,T.projectId=h,T.activityId=v,T.activityName=y,T.commonDeletedActivities=b,T.commonActiveActivities=C,T.predefinedActivities=w,_()}angular.module("app.performance").controller("TimeEditActivityModalController",e),e.$inject=["$state","formHelper","localizedMessages","employeeService","close","loader","toast","$scope","$stateParams","$q","type","currentTab","clickEvent","formValidationHelper","activities","timeService","projectId","activityId","activityName","commonDeletedActivities","commonActiveActivities","predefinedActivities"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v){function y(){F(),b()}function b(){k.schema={type:"object",title:"Projects",properties:{name:{title:"Name",type:"string",maxLength:50},is_private:{title:"Visibility",type:"string","enum":["0","1"]},description:{title:"Description",type:"string",maxLength:255},addCustomer:{title:"Bulk Assign",type:"boolean"},customer:{title:"Customer Name",type:"string"},customer_name:{title:"Customer Name",type:"string",maxLength:50},customer_description:{title:"Customer Description",type:"string",maxLength:255},customer_cost_center:{title:"Customer Cost Center",type:"string"},projectAdmin:{title:k.projectAdminLabel,type:"object"},project_cost_center:{title:"Project Cost Center",type:"string"},status:{title:"Status",type:"string","enum":k.projectStatuses["enum"]}},required:["name","customer","customer_name"]},k.form=[{type:"row",items:[{type:"text",htmlClass:"col-8",key:"name",validationMessage:{duplicationName:l.getLocalizedCustom("Already exists"),201:r.textLengthExceedValidation.message(k.schema.properties.name.maxLength),302:l.getLocalizedCustom("Required")},onChange:function(e){C(e,k.model.customer,k.model.addCustomer)}},{type:"selective-pills",htmlClass:"col-4",preventUnselect:!0,key:"is_private",titleMap:[{value:"0",name:"Public",icon:"lock_open"},{value:"1",name:"Private",icon:"lock"}]}]},{type:"row",items:[{type:"textarea",htmlClass:"col-12",key:"description",placeholder:l.getLocalizedCustom("Type your description"),validationMessage:{201:r.textLengthExceedValidation.message(k.schema.properties.description.maxLength)}}]},{type:"row",items:[{type:"button-switch",offLabel:"Select Customer",onLabel:"Add New Customer",htmlClass:"col-6",condition:function(){return k.hasCustomerCreationPermission},key:"addCustomer",ngModelOptions:{allowInvalid:!0},onChange:function(){b(),C(k.model.name,k.model.customer,k.model.addCustomer)}}]},{type:"row",condition:"!vm.model.addCustomer",items:[{type:"generic-auto-complete",htmlClass:"col-6",key:"customer","text-searching":"Searching...",placeholder:"Type for hints...","text-no-results":"No results found",titleField:"name",searchFields:"name",initialValue:k.selectedCustomerName,fetchItemsCallback:function(e){return d(function(t,a){var i=_.filter(k.customersForForm.titleMap,function(t){return t.name.toLowerCase().indexOf(e.toLowerCase())!==-1});t(i)})},onInputChange:function(t){""===t?(k.model.customer="",k.selectedCustomerName="",e.$broadcast("schemaForm.error.customer","invalid",!0)):(e.$broadcast("schemaForm.error.customer","tv4-302",!0),e.$broadcast("schemaForm.error.customer","invalid",l.getLocalizedCustom("Invalid")))},objectSelectedCallback:function(t){if(t){k.model.customer=t.originalObject.value,k.selectedCustomerName=t.originalObject.name;var a=_.find(k.customers,function(e){return e.customer_id===t.originalObject.value});k.costCenterEnabled&&(void 0!=a.costCenter.id?(k.model.project_cost_center=a.costCenter.id,k.selectedProjectCostCenterName=a.costCenter.cost_code+" - "+a.costCenter.name):(k.model.project_cost_center="",k.selectedProjectCostCenterName=""),b()),e.$broadcast("schemaForm.error.customer","invalid",!0),C(k.model.name,k.model.customer,k.model.addCustomer)}}},w()]},{type:"row",condition:"vm.model.addCustomer",items:[{type:"text",htmlClass:"col-6",key:"customer_name",validationMessage:{201:r.textLengthExceedValidation.message(k.schema.properties.customer_name.maxLength),302:l.getLocalizedCustom("Required"),duplicationName:l.getLocalizedCustom("Already exists")},$validators:{duplicationName:D}},{type:"generic-auto-complete",htmlClass:"col-6",key:"customer_cost_center","text-searching":"Searching...",placeholder:"Type for hints...","text-no-results":"No results found",titleField:"name",searchFields:"name",initialValue:k.selectedCustomerCostCenterName,fetchItemsCallback:function(e){var t={userInputString:e,offset:"0",limit:"50"};return a.call("costCentres","GET",[],t,!1).then(function(e){return e.data.data.map(function(e){return e.name=e.cost_code+" - "+e.name,e})})},onInputChange:function(t){""===t?(k.model.customer_cost_center="",e.$broadcast("schemaForm.error.customer_cost_center","invalid",!0)):e.$broadcast("schemaForm.error.customer_cost_center","invalid",l.getLocalizedCustom("Invalid"))},objectSelectedCallback:function(t){t&&(k.model.customer_cost_center=t.originalObject.id,k.selectedCustomerCostCenterName=t.originalObject.name,k.costCenterEnabled&&(k.model.project_cost_center=k.model.customer_cost_center,k.selectedProjectCostCenterName=k.selectedCustomerCostCenterName,b()),e.$broadcast("schemaForm.error.customer_cost_center","invalid",!0))},condition:function(){return k.costCenterEnabled},hideLabel:function(){return!k.costCenterEnabled}}]},{type:"row",condition:"vm.model.addCustomer",items:[{type:"textarea",htmlClass:"col-12",key:"customer_description",validationMessage:{201:r.textLengthExceedValidation.message(k.schema.properties.description.maxLength)}}]},{type:"row",condition:function(){return k.model.addCustomer},items:[w()]},{type:"row",items:[{key:"projectAdmin",htmlClass:"col-6",placeholder:"Select Project Admin",type:"autocomplete-multiselect",choices:k.employeeChoices,validationMessage:{maxNumber:A},$validators:{maxNumber:S}},{type:"radiobuttons",htmlClass:"col-6",key:"status",titleMap:k.projectStatuses.titleMap,makeHorizontal:!0}]}]}function C(t,a,i){k.pendingRequest=!0,k.debounceHolder.cancel(),k.debounceHolder=_.debounce(function(){if(""==t||null==t||i)e.$broadcast("schemaForm.error.name","duplicationName",!0);else if(i||""==a)e.$broadcast("schemaForm.error.name","duplicationName",!0);else{e.$broadcast("schemaForm.error.name","duplicationName",!0);var o={};o.customerIds=[a],o.excludeNonDeletableIds=!0,g.getProjectList(o).then(function(a){if(a.data.data.length>0){var i=g.extractFieldValueFromData(a.data.data,"name",!0);i.indexOf(t.toLowerCase())>-1?e.$broadcast("schemaForm.error.name","duplicationName",l.getLocalizedCustom("Already exists")):e.$broadcast("schemaForm.error.name","duplicationName",!0)}else e.$broadcast("schemaForm.error.name","duplicationName",!0)},function(t){e.$broadcast("schemaForm.error.name","duplicationName",!0)})}},500),k.debounceHolder()}function w(){return{type:"generic-auto-complete",htmlClass:"col-6",key:"project_cost_center","text-searching":"Searching...",placeholder:"Type for hints...","text-no-results":"No results found",titleField:"name",searchFields:"name",initialValue:k.selectedProjectCostCenterName,condition:function(){return k.costCenterEnabled},hideLabel:function(){return!k.costCenterEnabled},fetchItemsCallback:function(e){var t={userInputString:e,offset:"0",limit:"50"};return a.call("costCentres","GET",[],t,!1).then(function(e){return e.data.data.map(function(e){return e.name=e.cost_code+" - "+e.name,e})})},onInputChange:function(t){""===t?(k.model.project_cost_center="",e.$broadcast("schemaForm.error.project_cost_center","invalid",!0)):e.$broadcast("schemaForm.error.project_cost_center","invalid",l.getLocalizedCustom("Invalid"))},objectSelectedCallback:function(t){t&&(e.$broadcast("schemaForm.error.project_cost_center","invalid",!0),k.model.project_cost_center=t.originalObject.id,k.selectedProjectCostCenterName=t.originalObject.name)}}}function S(e){return!("object"==typeof e&&Object.keys(e).length>5)}function D(e){return""==e||(k.customerNames?!(k.customerNames.indexOf(e.toLowerCase())>-1):void 0)}function T(a){if(e.$broadcast("schemaFormValidate"),a.$valid){var n=angular.copy(k.model),r={};return r.name=n.name,r.description=n.description,n.addCustomer?(r.addCustomer="1",r.customer={name:n.customer_name,description:n.customer_description},k.costCenterEnabled&&""!=n.customer_cost_center&&(r.customer.costCenter=n.customer_cost_center)):(r.addCustomer="0",r.customerId=n.customer),"object"==typeof n.projectAdmin&&Object.keys(n.projectAdmin).length&&(r.projectAdmin=Object.keys(n.projectAdmin)),k.costCenterEnabled&&""!=n.project_cost_center&&(r.costCenter=n.project_cost_center),r.visibility=n.is_private,r.status=n.status,g.saveProject(r).then(function(e){localStorage.setItem("toast","Successfully Saved"),t.go("time.project",{projectId:e.data.data.project_id,tab:"general"})},function(e){o(!1),i.error(l.getLocalizedCustom("Failed to Save"))})}return d.when(!0)}function x(){o(!1)}function F(){k.model={customer:"",name:"",description:"",addCustomer:!1,is_private:0,projectAdmin:{},project_cost_center:"",status:1,customer_description:"",customer_name:"",customer_cost_center:""}}var k=this;k.save=T,k.cancel=x,k.customers=f,k.customerNames=g.extractFieldValueFromData(k.customers,"name",!0);var E=n.getItemsForMultyselectAutocomplete(k.customers,function(e){return{id:e.customer_id,name:e.name}});k.customersForForm=n.getEnumAndTitleMapForSelect(E,!1,!0),k.projectStatuses=n.getEnumAndTitleMapForSelect(v.PROJECT_STATUS_ARRAY,{name:"name",value:"value"}),k.costCenterEnabled=m,k.employeeChoices=u,k.selectedProjectCostCenterName="",k.selectedCustomerCostCenter={};var I=l.getLocalizedCustom("Project Admin"),A=l.getLocalizedCustomWithVariables(v.MAX_PROJECT_ADMIN_LABEL,{maxCount:5});k.projectAdminLabel=I+" ("+A+")",k.hasCustomerCreationPermission=h.create,k.debounceHolder=_.debounce(function(){},0),k.selectedCustomerName="",k.selectedCustomerCostCenterName="",y()}angular.module("app.time").controller("TimeCreateProjectModalController",e),e.$inject=["$scope","$state","webservice","toast","close","formHelper","localizedMessages","formValidationHelper","employeeService","$translate","$q","costCenterEnabled","employeeChoices","$timeout","customers","timeService","customerPermission","timeConstants"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b){function C(){null==H.projectId&&t.go("403"),P();var e={permission:D().then(function(e){return e.read?e:c.reject({statusText:"Forbidden"})}),customerPermission:T()};c.all(e).then(function(e){H.permissions=e.permission,H.customerPermission=e.customerPermission,H.hasCustomerCreationPermission=H.customerPermission.create,H.hasEditPermissions=H.permissions.update,F(),m.$broadcast("markMenuItemAsCurrent",{stateName:"time.projects"}),null!==localStorage.getItem("toast")&&(i.successToast(localStorage.getItem("toast")),localStorage.removeItem("toast")),m.$broadcast("addTopMenuBackButton",{uiSref:"time.projects",tooltip:"Projects"})},function(){t.go("403")})}function w(){t.go("time.projects")}function S(e){return 0==H.nonEditableFields.length?!H.hasEditPermissions:H.nonEditableFields.indexOf(e)!==-1}function D(){return s.getSinglePermission("time_projects",!1,{Project:H.projectId})}function T(){return s.getSinglePermission(["time_customers"],!1)}function x(){var e=H.selectedProject;H.projectModel.project_id=e.project_id,H.projectModel.name=e.name,H.projectModel.description=e.description,H.projectModel.is_private=e.is_private,H.projectModel.status=e.status,e.customer&&e.customer.id?(H.projectModel.customer=e.customer.id,H.selectedCustomerName=e.customer.name):(H.projectModel.customer="",H.selectedCustomerName=""),e.costCenter&&e.costCenter.id?(H.projectModel.costCenter=e.costCenter.id,H.selectedProjectCostCenter=e.costCenter.cost_code+" - "+e.costCenter.name):(H.projectModel.costCenter="",H.selectedProjectCostCenter=""),H.projectModel.addCustomer=!1,H.projectModel.customer_name="",H.projectModel.customer_description="",H.projectModel.customer_cost_center="",H.selectedProject.project_admin_employees&&H.selectedProject.project_admin_employees.length?(H.projectModel.projectAdmin={},angular.forEach(H.selectedProject.project_admin_employees,function(e){H.projectModel.projectAdmin[e.emp_number]=e.employee_fullname})):H.projectModel.projectAdmin={}}function F(){H.submitInProgress=!0;var e={project:h.getProject(H.projectId),settings:g.getSettings(),organizationInformation:f.call("organization","GET",[],{}),customers:h.getCustomers([]),employees:f.call("employees","GET",[],{filter:{termination:2}}),activities:h.getProjectActivities(H.projectId,[]),commonDeletedActivities:h.fetchActivities({deleted:!0,commonActivities:!0,preset:!1}),commonActiveActivities:h.fetchActivities({deleted:!1,commonActivities:!0,preset:!1}),predefinedActivities:h.fetchActivities({preset:!0})};H.selectedProject.costCenter&&H.selectedProject.costCenter.id&&(e.costCenter=f.call("costCentres/"+H.selectedProject.costCenter.id,"GET",[],{})),c.all(e).then(function(e){H.selectedProject=e.project.data.data,H.customers=e.customers.data.data,H.employees=e.employees.data.data,H.costCenterEnabled=e.organizationInformation.data.data.costCenterEnabled,H.activities=e.activities.data.data,H.activitiesCount=e.activities.data.meta.total,H.undeleteableActivities=e.activities.data.meta.notDeletableIds;var t=l.getItemsForMultyselectAutocomplete(H.customers,function(e){return{id:e.customer_id,name:e.name}});H.customersForForm=l.getEnumAndTitleMapForSelect(t,!1,!0),H.employeeChoices=l.getItemsForMultyselectAutocomplete(k(H.employees),function(e){var t=y.getFullName(e);return{id:e.empNumber,name:t,employeeId:e.employeeId}}),H.customerNames=h.extractFieldValueFromData(H.customers,"name",!0),H.projectNameBeforeUpdate=""==H.projectNameBeforeUpdate?H.selectedProject.name:H.projectNameBeforeUpdate,H.projectCustomerBeforeUpdate=H.selectedProject.customer.id,H.commonDeletedActivities=h.extractFieldValueFromData(e.commonDeletedActivities.data.data,"name",!0),H.commonActiveActivities=h.extractFieldValueFromData(e.commonActiveActivities.data.data,"name",!0),H.predefinedActivities=h.extractFieldValueFromData(e.predefinedActivities.data.data,"name",!0),H.nonEditableFields=e.project.data.meta.nonEditableFields,P(H.selectedProject.name),x(),G(),V(),$(),E()})["finally"](function(){H.submitInProgress=!1})}function k(e){var t=[],a=[];return angular.forEach(H.selectedProject.project_admin_employees,function(e){a.push(e.emp_number)}),angular.forEach(e,function(e){(null==e.termination_id||a.indexOf(e.empNumber)>-1)&&t.push(e)}),t}function E(){H.permissions.update&&(H.exportPanelButtons=[{id:"btnCopyFrom",text:"Copy From",icon:"copy",classes:" btn-feedback export-btn",clickAction:I,displayCondition:function(e,t){return!0}},{id:"btnAdd",text:"Add",icon:"add",classes:" btn-action export-btn",clickAction:A,displayCondition:function(e,t){return!0}}])}function I(e){v.showModal("app/time/projects/activities/time.copy_activities_modal.html","TimeCopyActivitiesModalController","modal",{type:"pdf",currentTab:H.currentTabKey,clickEvent:e,activities:H.activities,projectId:H.projectId,commonDeletedActivities:H.commonDeletedActivities,commonActiveActivities:H.commonActiveActivities,predefinedActivities:H.predefinedActivities}).then(function(e){e&&F()})}function A(e){v.showModal("app/time/projects/activities/time.create_activities_modal.html","TimeCreateActivitiesModalController","modal",{type:"pdf",currentTab:H.currentTabKey,clickEvent:e,activities:H.activities,projectId:H.projectId,commonDeletedActivities:H.commonDeletedActivities,commonActiveActivities:H.commonActiveActivities,predefinedActivities:H.predefinedActivities}).then(function(e){e&&F()})}function M(e){v.showModal("app/time/projects/activities/time.edit_activity_modal.html","TimeEditActivityModalController","modal",{type:"pdf",currentTab:H.currentTabKey,clickEvent:event,activities:H.activities,projectId:H.projectId,activityId:e.activity_id,activityName:e.name,commonDeletedActivities:H.commonDeletedActivities,commonActiveActivities:H.commonActiveActivities,predefinedActivities:H.predefinedActivities}).then(function(e){e&&F()})}function L(){var e;return e=H.permissions.update?["5%","95%"]:["100%"]}function P(e){var t=["Time Tracking","Activity Info","Projects"];e&&t.push(e),p.setForcedTitle(t,{2:"time.projects"})}function $(){var e=[{name:"name",lable:"Activity Name",getter:"name",sortable:!1}],t=[],a=L();H.listDefinition={tableId:"activityList",name:"Activity",listClass:"classic-table hover selectable",selectable:!0,selected:[],idGetter:"activity_id",listFields:e,extraTH:[],extraTD:[],showColumnsAnyway:!0,permission:H.permissions,columnWidths:a,listActions:t,showSelectableAlways:!1,showLoader:!0,pagination:!0,persistPagination:!0,listSpecificInitialSort:!0,clickableCondition:"activity_id",listTopBar:{getMessageForNoOfItemsFound:function(e){return"undefined"!=typeof H.activitiesCount?i.getLocalizedCustomWithVariables("({{number}}) Activit"+(1==H.activitiesCount?"y":"ies")+" Found",{number:H.activitiesCount}):""},getMessageForNoOfItemsSelected:function(e){return e?i.getLocalizedCustomWithVariables("({{number}}) Activit"+(e>1?"ies":"y")+" Selected",{number:e}):""},configurable:!1}},H.permissions.update&&(H.listDefinition.listTopBar.onBulkDelete=function(e){O(e)},H.listDefinition.listFields[0].clickAction="editActivity",H.listDefinition.listTopBar.isBulkDeletable=function(e){return H.permissions.update},H.listDefinition.listTopBar.isBulkDeleteDisabled=function(e){return _.intersection(e,H.undeleteableActivities).length>0},H.listDefinition.listTopBar.getBulkDeleteDisabledTooltip=function(e){return"Not allowed to delete activities which have time logged against them"})}function N(t,a,o,n,l){H.pendingRequest=!0,H.debounceHolder.cancel(),H.debounceHolder=_.debounce(function(){if(""==t||null==t||o)e.$broadcast("schemaForm.error.name","duplicationName",!0);else if(o||""==a)e.$broadcast("schemaForm.error.name","duplicationName",!0);else{e.$broadcast("schemaForm.error.name","duplicationName",!0);var r={};r.customerIds=[a],r.excludeNonDeletableIds=!0,h.getProjectList(r).then(function(o){if(o.data.data.length>0){var r=h.extractFieldValueFromData(o.data.data,"name",!0);l==a&&n.toLowerCase()==t.toLowerCase()?e.$broadcast("schemaForm.error.name","duplicationName",!0):r.indexOf(t.toLowerCase())>-1?e.$broadcast("schemaForm.error.name","duplicationName",i.getLocalizedCustom("Already exists")):e.$broadcast("schemaForm.error.name","duplicationName",!0)}else e.$broadcast("schemaForm.error.name","duplicationName",!0)},function(t){e.$broadcast("schemaForm.error.name","duplicationName",!0)})}},500),H.debounceHolder()}function O(e){e.length>0&&0==_.intersection(e,H.undeleteableActivities).length&&v.showDeleteConfirmationModal(i.getLocalizedCustom("The selected activities will be deleted. Are you sure you want to continue?")).then(function(t){t===!0&&R(e)})}function R(e){e=e?e:H.selectedIds,H.listData=null,h.deleteActivities(H.projectId,e).then(function(e){i.successToast("Successfully Deleted"),F(),close()},function(e){o.error(i.getLocalizedCustom("Failed to Delete")),close()})}function z(e){return!("object"==typeof e&&Object.keys(e).length>5)}function j(e){return""==e||!e||(!H.customerNames||!(H.customerNames.indexOf(e.toLowerCase())>-1))}function V(){H.projectSchema={type:"object",title:"Projects",properties:{name:{title:"Name",type:"string",maxLength:50},is_private:{title:"Visibility",type:"string","enum":["0","1"]},description:{title:"Description",type:"string",maxLength:255},addCustomer:{title:"Bulk Assign",type:"boolean"},customer:{title:"Customer Name",type:["null","string"]},customer_name:{title:"Customer Name",type:"string",maxLength:50},customer_description:{title:"Customer Description",type:"string",maxLength:255},customer_cost_center:{title:"Customer Cost Center",type:"string"},projectAdmin:{title:H.projectAdminLabel,type:"object"},costCenter:{title:"Project Cost Center",type:"string"},status:{title:"Status",type:"string","enum":H.projectStatuses["enum"]}},required:["name","customer","customer_name"]},H.projectForm=[{type:"row",items:[{type:"text",htmlClass:"col-8",key:"name",readonly:S("name"),validationMessage:{duplicationName:i.getLocalizedCustom("Already exists"),201:u.textLengthExceedValidation.message(H.projectSchema.properties.name.maxLength),302:i.getLocalizedCustom("Required")},onChange:function(e){N(e,H.projectModel.customer,H.projectModel.addCustomer,H.projectNameBeforeUpdate,H.projectCustomerBeforeUpdate)}},{type:"selective-pills",htmlClass:"col-4",key:"is_private",preventUnselect:!0,readonly:S("visibility"),disable:!H.hasEditPermissions,titleMap:[{value:"0",name:"Public",icon:"lock_open"},{value:"1",name:"Private",icon:"lock"}]}]},{type:"row",items:[{type:"textarea",htmlClass:"col-8",key:"description",readonly:S("description"),validationMessage:{201:u.textLengthExceedValidation.message(H.projectSchema.properties.description.maxLength)}}]},{type:"row",items:[{type:"button-switch",offLabel:"Selected Customer",onLabel:"Add New Customer",htmlClass:"col-4",key:"addCustomer",readonly:S("customer"),condition:"vm.hasCustomerCreationPermission",ngModelOptions:{allowInvalid:!0},onChange:function(){V(),N(H.projectModel.name,H.projectModel.customer,H.projectModel.addCustomer,H.projectNameBeforeUpdate,H.projectCustomerBeforeUpdate)}}]},{type:"row",condition:"!vm.projectModel.addCustomer",items:[{type:"generic-auto-complete",htmlClass:"col-4",key:"customer","text-searching":"Searching...",placeholder:"Type for hints...","text-no-results":"No results found",titleField:"name",searchFields:"name",hideLabel:!1,ngModelOptions:{allowInvalid:!0,debounce:100},disable:S("customer"),initialValue:H.selectedCustomerName,
fetchItemsCallback:function(e){return c(function(t,a){var i=_.filter(H.customersForForm.titleMap,function(t){return t.name.toLowerCase().indexOf(e.toLowerCase())!==-1});t(i)})},onInputChange:function(t){""===t?(H.projectModel.customer="",H.selectedCustomerName="",e.$broadcast("schemaForm.error.customer","invalid",!0)):(e.$broadcast("schemaForm.error.customer","tv4-302",!0),e.$broadcast("schemaForm.error.customer","invalid",i.getLocalizedCustom("Invalid")))},objectSelectedCallback:function(t){if(t){if(H.projectModel.customer=t.originalObject.value,H.selectedCustomerName=t.originalObject.name,""==H.projectModel.costCenter&&H.costCenterEnabled){var a=_.find(H.customers,function(e){return e.customer_id===t.originalObject.value});void 0!=a.costCenter.id&&(H.projectModel.costCenter=a.costCenter.id,H.selectedProjectCostCenter=a.costCenter.cost_code+" - "+a.costCenter.name,V())}e.$broadcast("schemaForm.error.customer","invalid",!0),N(H.projectModel.name,H.projectModel.customer,H.projectModel.addCustomer,H.projectNameBeforeUpdate,H.projectCustomerBeforeUpdate)}else H.projectModel.customer=""}}]},{type:"row",condition:"vm.projectModel.addCustomer",items:[{type:"text",htmlClass:"col-4",readonly:S("customer"),key:"customer_name",validationMessage:{201:u.textLengthExceedValidation.message(H.projectSchema.properties.customer_name.maxLength),302:i.getLocalizedCustom("Required"),duplicationName:i.getLocalizedCustom("Already exists")},$validators:{duplicationName:j}},{type:"generic-auto-complete",htmlClass:"col-4",key:"customer_cost_center","text-searching":"Searching...",placeholder:"Type for hints...","text-no-results":"No results found",titleField:"name",searchFields:"name",initialValue:H.selectedCustomerCostCenter,disable:S("customer"),fetchItemsCallback:function(e){var t={userInputString:e,offset:"0",limit:"50"};return f.call("costCentres","GET",[],t,!1).then(function(e){return e.data.data.map(function(e){return e.name=e.cost_code+" - "+e.name,e})})},onInputChange:function(t){""===t?(H.projectModel.customer_cost_center="",e.$broadcast("schemaForm.error.customer_cost_center","invalid",!0)):e.$broadcast("schemaForm.error.customer_cost_center","invalid",i.getLocalizedCustom("Invalid"))},objectSelectedCallback:function(t){t&&(e.$broadcast("schemaForm.error.customer_cost_center","invalid",!0),H.projectModel.customer_cost_center=t.originalObject.id,H.selectedCustomerCostCenter=t.originalObject.name)},condition:function(){return H.costCenterEnabled},hideLabel:function(){return!H.costCenterEnabled}}]},{type:"row",condition:"vm.projectModel.addCustomer",items:[{type:"textarea",htmlClass:"col-8",key:"customer_description",readonly:S("customer"),validationMessage:{201:u.textLengthExceedValidation.message(H.projectSchema.properties.description.maxLength)}}]},{type:"row",items:[{type:"generic-auto-complete",htmlClass:"col-4",key:"costCenter","text-searching":"Searching...",placeholder:"Type for hints...","text-no-results":"No results found",titleField:"name",searchFields:"name",initialValue:H.selectedProjectCostCenter,disable:S("costCenter"),fetchItemsCallback:function(e){var t={userInputString:e,offset:"0",limit:"50"};return f.call("costCentres","GET",[],t,!1).then(function(e){return e.data.data.map(function(e){return e.name=e.cost_code+" - "+e.name,e})})},onInputChange:function(t){""===t?(H.projectModel.costCenter="",e.$broadcast("schemaForm.error.costCenter","invalid",!0)):e.$broadcast("schemaForm.error.costCenter","invalid",i.getLocalizedCustom("Invalid"))},objectSelectedCallback:function(t){t?(e.$broadcast("schemaForm.error.costCenter","invalid",!0),H.projectModel.costCenter=t.originalObject.id,H.selectedProjectCostCenter=t.originalObject.name):H.projectModel.costCenter=""},condition:function(){return H.costCenterEnabled},hideLabel:function(){return!H.costCenterEnabled}},{key:"projectAdmin",htmlClass:"col-4",placeholder:"Select Project Admin",type:"autocomplete-multiselect",readonly:S("projectAdmin"),choices:H.employeeChoices,validationMessage:{maxNumber:W},$validators:{maxNumber:z}},{type:"radiobuttons",htmlClass:"col-4",key:"status",readonly:S("status"),titleMap:H.projectStatuses.titleMap,makeHorizontal:!0}]}]}function G(){var e=[{key:"general",title:"General","class":"card-title-text",isCurrent:!0}];H.projectId&&e.push({key:"activities",title:"Activities","class":"card-title-text",isCurrent:!1}),H.tabs=e}function B(t){if(e.$broadcast("schemaFormValidate"),!H.submitInProgress&&t.$valid){H.submitInProgress=!0;var a=angular.copy(H.projectModel),n={};n.projectId=H.projectId,0==H.nonEditableFields.length&&(n.name=a.name,n.description=a.description,H.projectNameBeforeUpdate=a.name,a.addCustomer?(n.addCustomer="1",n.customer={name:a.customer_name,description:a.customer_description},H.costCenterEnabled&&""!=a.customer_cost_center&&(n.customer.costCenter=a.customer_cost_center)):(n.addCustomer="0",n.customerId=a.customer),"object"==typeof a.projectAdmin&&Object.keys(a.projectAdmin).length&&(n.projectAdmin=Object.keys(a.projectAdmin)),H.costCenterEnabled&&""!=a.costCenter&&(n.costCenter=a.costCenter),n.visibility=a.is_private),n.status=a.status,h.updateProject(H.projectId,n).then(function(t){t.data.success?(H.submitInProgress=!1,H.projectModel.customer_name="",H.projectModel.customer_cost_center="",H.projectModel.customer_description="",H.selectedCustomerCostCenter="",F(),e.$broadcast("schemaFormRedraw"),i.successToast("Successfully Updated")):(H.submitInProgress=!1,i.errorToast(t.data.messages.error))},function(e){H.submitInProgress=!1,o.error(i.getLocalizedCustom("Failed to Save"))})}}function q(e){H.currentTabKey=e.key}var H=this;H.projectId=a.projectId,H.currentTabKey=a.tab?a.tab:"general",H.save=B,H.dataLoaded=!1,H.groupedRuleIds={daily:{},weekly:{},consecutive_days:{},weekend:{},holiday:{}},H.tabClicked=q,H.costCenterEnabled=!1,H.selectedProject={};var U=i.getLocalizedCustom("Project Admin"),W=i.getLocalizedCustomWithVariables(b.MAX_PROJECT_ADMIN_LABEL,{maxCount:5});H.projectAdminLabel=U+" ("+W+")",H.projectStatuses=l.getEnumAndTitleMapForSelect(b.PROJECT_STATUS_ARRAY,{name:"name",value:"value"}),H.nonEditableFields=[],H.projectModel={},H.selectedCustomerName="",H.selectedProjectCostCenter="",H.projectNameBeforeUpdate="",H.selectedCustomerCostCenter="",H.projectCustomerBeforeUpdate="",H.activities=[],H.activitiesCount=0,H.undeleteableActivities=[],H.exportPanelButtons=[],H.setExportPanelButtons=E,H.editActivity=M,H.selectedIds=[],H.hasCustomerCreationPermission=!1,H.goBack=w,H.submitInProgress=!1,H.debounceHolder=_.debounce(function(){},0),H.tabs=[{key:"general",title:"General","class":"card-title-text",isCurrent:!0}],C()}angular.module("app.time").controller("TimeEditProjectContoller",e),e.$inject=["$scope","$state","$stateParams","localizedMessages","toast","loader","formHelper","$timeout","datagroupPermissions","$q","dateService","$rootScope","formValidationHelper","titleService","webservice","settingsService","timeService","modalHelperService","employeeService","timeConstants"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v){function y(){x(),T(),b()}function b(){k.schema={type:"object",title:"Projects",properties:{customer:{title:"Customer Name",type:"string"},project:{title:"Project",type:"string"},projectAdmin:{title:"Project Admin",type:["null","object"]},costCenter:{title:"Project Cost Center",type:"string"},status:{title:"Status",type:"string","enum":k.projectStatusesForForm["enum"]}}},k.form=[{type:"row",items:[{type:"generic-auto-complete",htmlClass:"col-6",key:"customer","text-searching":"Searching...",placeholder:"Type for hints...","text-no-results":"No results found",titleField:"name",searchFields:"name",initialValue:k.selectedCustomer,fetchItemsCallback:function(e){return d(function(t,a){var i=_.filter(k.customersForForm.titleMap,function(t){return t.name.toLowerCase().indexOf(e.toLowerCase())!==-1});t(i)})},onInputChange:function(e){e||(k.model.customer="",k.selectedCustomer="")},objectSelectedCallback:function(e){e&&(k.model.customer=e.originalObject.value,k.selectedCustomer=e.originalObject.name)}},{type:"generic-auto-complete",htmlClass:"col-6",key:"project","text-searching":"Searching...",placeholder:"Type for hints...","text-no-results":"No results found",titleField:"name",searchFields:"name",initialValue:k.selectedProject,fetchItemsCallback:function(e){return k.projectsList.length>0?d(function(t){var a=[];a=F(e,a),t(a)}):x()},onInputChange:function(e){e||(k.model.project="",k.selectedProject="")},objectSelectedCallback:function(e){e&&e.originalObject&&(k.model.project=e.originalObject.value,k.selectedProject=e.originalObject.name)}}]},{type:"row",items:[{key:"projectAdmin",type:"auto-complete",htmlClass:"col-6",placeholder:n.getLocalizedCustom("Type for hints..."),"text-searching":"Searching...","text-no-results":"No results found",employeeSelected:k.selectedEmployee,includePast:!0,employeeDataProvider:C},{type:"generic-auto-complete",htmlClass:"col-6",key:"costCenter","text-searching":"Searching...",placeholder:"Type for hints...","text-no-results":"No results found",titleField:"name",searchFields:"name",initialValue:k.selectedCostCenter,condition:function(){return k.costCenterEnabled},hideLabel:function(){return!k.costCenterEnabled},fetchItemsCallback:function(e){var a={userInputString:e,offset:"0",limit:"50"};return t.call("costCentres","GET",[],a,!1).then(function(e){return e.data.data.map(function(e){return e.name=e.cost_code+" - "+e.name,e})})},onInputChange:function(e){e||(k.model.costCenter="",k.selectedCostCenter="")},objectSelectedCallback:function(e){e&&(k.model.costCenter=e.originalObject.id,k.selectedCostCenter=e.originalObject.name)}}]},{type:"row",items:[{type:"select",htmlClass:"col-6",key:"status",emptyOption:!1,titleMap:k.projectStatusesForForm.titleMap}]}]}function C(e){var a={employee_name_or_id:e,termination:2},i={filter:a,"page[offset]":0,"page[limit]":50,sort:"fullName"};return t.call("employeeAutoComplete","GET",[],i).then(function(e){for(var t=[],a=0;a<e.data.data.length;a++)e.data.data[a].fullName=r.getFullName(e.data.data[a]),t.push(e.data.data[a]);return t})}function w(t){if(e.$broadcast("schemaFormValidate"),t.$valid){var a=angular.copy(k.model);a.selectedCostCenter=k.selectedCostCenter,a.selectedCustomer=k.selectedCustomer,a.selectedProject=k.selectedProject,a.selectedEmployee=k.model.projectAdmin,i(a)}}function S(){i(!1)}function D(t){T(!0),k.selectedProject="",k.selectedCustomer="",k.selectedCostCenter="",e.$broadcast("schemaFormRedraw"),w(t)}function T(e){k.model={customer:"",project:"",projectAdmin:"",costCenter:"",status:"1"},e||(k.currentFilter.customer&&(k.model.customer=k.currentFilter.customer),k.currentFilter.project&&(k.model.project=k.currentFilter.project),k.currentFilter.costCenter&&(k.model.costCenter=k.currentFilter.costCenter),k.model.projectAdmin=h,k.currentFilter.status&&(k.model.status=k.currentFilter.status))}function x(){var e={customerAndProjectOnly:!0};return v.getProjectList(e).then(function(e){var t=e.data.data.map(function(e){return{value:e.projectId,name:e.name}});return k.projectsList=t,t})}function F(e,t){for(var a=0;a<k.projectsList.length&&(k.projectsList[a].name.toLowerCase().indexOf(e.toLowerCase())!==-1&&t.push(k.projectsList[a]),!(t.length>=5));a++);return t}var k=this;k.search=w,k.cancel=S,k.reset=D,k.currentFilter=a;var E=o.getItemsForMultyselectAutocomplete(c,function(e){return{id:e.customer_id,name:e.name}});k.customersForForm=o.getEnumAndTitleMapForSelect(E,!1,!0),k.projectStatusesForForm=o.getEnumAndTitleMapForSelect(u,!1),k.costCenterEnabled=m,k.selectedCostCenter=p,k.selectedCustomer=f,k.selectedProject=g,k.selectedEmployee=h,k.projectsList=[],y()}angular.module("app.time").controller("TimeProjectListFilterController",e),e.$inject=["$scope","webservice","currentFilter","close","formHelper","localizedMessages","formValidationHelper","employeeService","$translate","customers","$q","costCenterEnabled","projectStatuses","selectedCostCenter","selectedCustomer","selectedProject","selectedEmployee","timeService"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d,m,u,p,f,g,h,v,y,b){function C(){d(function(){o.show()});var e={permission:w(),settings:n.getSettings(),customerPermission:S(),organizationInformation:i.call("organization","GET",[],{})},t=b[y.TIME_PROJECT_LIST_LAST_SEARCH_FILTERS];r.all(e).then(function(e){z.permissions=e.permission,z.permissions.read||a.go("403"),z.costCenterEnabled=e.organizationInformation.data.data.costCenterEnabled,T(t),z.pageSize=e.settings.page_size,z.customerPermission=e.customerPermission,M(),P(function(){E(),D()},!0)},function(){o.hide(),a.go("403")})}function w(){return l.getSinglePermission(["time_projects"],!1)}function S(){return l.getSinglePermission(["time_customers"],!1)}function D(){var e={customers:v.getCustomers([]),employees:i.call("employees","GET",[],{})};r.all(e).then(function(e){z.customers=e.customers.data.data,z.employees=e.employees.data.data,z.employeeChoices=f.getItemsForMultyselectAutocomplete(z.employees,function(e){var t=g.getFullName(e);return{id:e.empNumber,name:t,employeeId:e.employeeId}});var t=b[y.TIME_PROJECT_LIST_LAST_SEARCH_FILTERS];t&&(t.selectedCostCenter&&(z.selectedCostCenter=t.selectedCostCenter),t.selectedEmployee&&(z.selectedEmployee=t.selectedEmployee),t.selectedProject&&(z.selectedProject=t.selectedProject),t.selectedCustomer&&(z.selectedCustomer=t.selectedCustomer)),j=!0,o.hide()})}function T(e){e?z.params.filter=F(e):z.params.filter=x()}function x(){var e={};return e.status="1",e}function F(e){var t={};return e.project&&(t.project=e.project),e.customer&&(t.customer=e.customer),""!=e.status&&(t.status=e.status),e.costCenter&&(t.costCenter=e.costCenter),e.projectAdmin&&(t.projectAdmin=e.projectAdmin.empNumber),t}function k(e,t,a){z.orderField=e,z.orderBy=t,z.page=a,M(),P(void 0)}function E(){var e=[{name:"customerName",lable:"Customer Name",getter:"Customer",sortable:!0,sortAction:"sortAction",formatter:function(e,t){return e.name}},{name:"projectName",lable:"Project",getter:"name",sortable:!0,sortAction:"sortAction",newTabAllowed:!0,getState:function(e){var t=e.projectId,a={projectId:t,tab:"general"};return"time.project("+JSON.stringify(a)+")"}},{name:"projectAdmins",lable:"Project Admins",getter:"project_admin_employees",sortable:!1,formatter:function(e,t){var a=[];return angular.forEach(e,function(e){a.push(e.employee_fullname)}),a.join(", ")}},{name:"levelName",lable:"Cost Center",getter:"CostCentre",sortable:!1,hideField:!z.costCenterEnabled,formatter:function(e,t){if(e&&e.name)return e.cost_code+" - "+e.name}},{name:"status",lable:"Status",getter:"status",type:"oxd-status",sortable:!0,sortAction:"sortAction",formatter:function(e){return"1"==e?"Active":"Inactive"}}],t=[],a=I();z.listDefinition={tableId:"projectList",name:"Projects",listClass:"classic-table hover selectable",selectable:!0,selected:[],idGetter:"projectId",listFields:e,extraTH:[],extraTD:[],showColumnsAnyway:!0,permission:z.permissions,columnWidths:a,listActions:t,showSelectableAlways:!1,showLoader:!0,pagination:!0,persistPagination:!0,listSpecificInitialSort:!0,clickableCondition:"projectId",isSingleRowDeletable:function(e){return z.unDeletableIds&&z.unDeletableIds.indexOf(e.id)===-1},listTopBar:{getMessageForNoOfItemsFound:function(e){return"undefined"!=typeof z.totalDataCount?c.getLocalizedCustomWithVariables("({{number}}) Project"+(1==z.totalDataCount?"":"s")+" Found",{number:z.totalDataCount}):""},getMessageForNoOfItemsSelected:function(e){return e?c.getLocalizedCustomWithVariables("({{number}}) Project"+(e>1?"s":"")+" Selected",{number:e}):""},configurable:!1,onFilterOpen:R}},z.permissions.create&&(z.listDefinition.listTopBar.mainActionButton={id:"add-projects-btn",label:"Add Project",icon:"add",onClick:function(){$()}}),z.permissions["delete"]&&(z.listDefinition.listTopBar.onBulkDelete=function(e){N(e)},z.listDefinition.listTopBar.isBulkDeletable=function(e){return z.permissions["delete"]},z.listDefinition.listTopBar.isBulkDeleteDisabled=function(e){return _.intersection(e,z.unDeletableIds).length>0},z.listDefinition.listTopBar.getBulkDeleteDisabledTooltip=function(e){return"Not allowed to delete project(s) which have time logged against them"})}function I(){var e;return e=z.permissions["delete"]?["2%"]:[],e=z.costCenterEnabled?e.concat(["20%","18%","30%","20%","10%"]):e.concat(["20%","28%","40%","10%"])}function A(){return Math.ceil(z.totalDataCount/z.pageSize)}function M(){z.orderBy&&z.orderField&&(z.params.orderBy=z.orderBy,z.params.orderField=z.orderField),z.params.limit=z.pageSize,z.params.offset=z.pageSize*(z.page-1)}function L(e,t,a){var i={};return e.filter.project&&(i.projectIds=[e.filter.project]),e.filter.customer&&(i.customerIds=[e.filter.customer]),e.filter.costCenter&&(i.costCentreIds=[e.filter.costCenter]),e.filter.status&&(i.status=e.filter.status),e.filter.projectAdmin&&(i.projectAdmins=[e.filter.projectAdmin]),i.page={page:z.page,limit:e.limit},i.sort={orderField:e.orderField,orderBy:e.orderBy},i.include="Customer,CostCentre,ProjectAdmin",i.listMode=!0,v.getProjectList(i).then(function(e){return e.data})}function P(e){return L(z.params,void 0,!1).then(function(t){var a=t.meta;z.unDeletableIds=_.map(a.notDeletableIds,function(e){return e.toString()}),z.listData=t.data,z.totalDataCount=a.total,z.lastPage=A(),"function"==typeof e&&e()})}function $(){if(j){z.params.filter;s.showModal("app/time/projects/edit/time.create_project_modal.html","TimeCreateProjectModalController","modal",{title:"Add Project",costCenterEnabled:z.costCenterEnabled,projectStatus:z.projectStatuses,employeeChoices:z.employeeChoices,customers:z.customers,customerPermission:z.customerPermission}).then(function(e){})}}function N(e){e.length>0&&0==_.intersection(e,z.unDeletableIds).length&&s.showDeleteConfirmationModal(c.getLocalizedCustom("The selected project(s) will be deleted. Are you sure you want to continue?")).then(function(t){t===!0&&O(e)})}function O(e){e=e?e:z.selectedIds,v.deleteProjects(e).then(function(e){P(void 0),c.successToast("Successfully Deleted")},function(e){h.error(c.getLocalizedCustom(e.data.details))})}function R(){j&&s.showModal("app/time/projects/list/time.project_list_filter.html","TimeProjectListFilterController","modal",{title:"Filter Projects By",currentFilter:z.params.filter,customers:z.customers,costCenterEnabled:z.costCenterEnabled,projectStatuses:z.projectStatuses,selectedCostCenter:z.selectedCostCenter,selectedCustomer:z.selectedCustomer,selectedProject:z.selectedProject,selectedEmployee:z.selectedEmployee}).then(function(e){if(e){z.selectedCostCenter=e.selectedCostCenter,z.selectedCustomer=e.selectedCustomer,z.selectedProject=e.selectedProject,z.selectedEmployee=e.selectedEmployee;var t=angular.copy(e);b[y.TIME_PROJECT_LIST_LAST_SEARCH_FILTERS]=t,z.params.filter=F(t),z.page=1,M(),P(void 0)}})}var z=this;z.addProject=$,z.filterProjects=R,z.total=0,z.page=1,z.activePageNo=1,z.orderField="projectName",z.orderBy="ASC",z.sortAction=k,z.costCenterEnabled=!1,z.customers=[],z.projects=[],z.costCenters=[],z.projectStatuses=[],z.customerChoices=[],z.employees=[],z.employeeChoices=[],z.params={},z.filters={},z.listData=[],z.selectedIds=[],z.selectedCostCenter="",z.selectedCustomer="",z.selectedProject="",z.projectStatuses=y.PROJECT_STATUSES_FOR_FILTERS,z.listConfig={};var j=!1;C()}angular.module("app.time").controller("TimeProjectsListController",e),e.$inject=["$scope","$rootScope","$state","webservice","loader","settingsService","datagroupPermissions","$q","modalHelperService","localizedMessages","$timeout","ModalService","$stateParams","$translate","formHelper","employeeService","toast","timeService","timeConstants","$localStorage"]}(),function(){"use strict";angular.module("app.time").constant("timeConstants",{PROJECT_STATUSES_FOR_FILTERS:[{id:"0",name:"All"},{id:"1",name:"Active"},{id:"2",name:"Inactive"}],PROJECT_STATUS_ARRAY:[{name:"Active",value:"1"},{name:"Inactive",value:"0"}],MAX_PROJECT_ADMIN_LABEL:"Select up to {{maxCount}} Employees",TIME_PROJECT_LIST_LAST_SEARCH_FILTERS:"time_project_list_last_search_filters"})}(),function(){"use strict";function e(e,t){function a(t,a){return e.call("project/"+t+"/activities-bulk","POST",a,{})}function i(t,a){return e.call("project/"+t+"/activities","POST",a,{})}function o(t,a,i){return e.call("project/"+t+"/activities/"+a,"PATCH",i,{})}function n(t){return e.call("projects","POST",t,{})}function l(t){return e.call("projects","DELETE",{data:t},{})}function r(t,a){return e.call("project/"+t+"/activities","DELETE",{data:a},{})}function s(t,a){return e.call("project/"+t+"/activities","GET",[],a)}function c(t){return e.call("customers","GET",[],t)}function d(t,a){return e.call("projects","GET",[],t,a)}function m(t){return e.call("project/"+t,"GET",[],{})}function u(t,a){return e.call("project/"+t,"PATCH",a,{})}function p(t){var a={include:"Customer",employeeId:t};return e.call("projects","GET",[],a)}function f(t){t.push(-1);var a={projectIds:t,include:"JobActivity,Customer"};return e.call("projects","GET",[],a)}function g(t){return e.call("timesheets/"+t,"GET",[],{})}function h(t){var a={projectIds:[t],deleted:0};return e.call("jobActivities","GET",[],a)}function v(t){return e.call("timesheets/"+t,"GET",[],{}).then(function(e){var t={data:e.data.data,meta:e.data.meta};return t.data.TimesheetItem.forEach(function(e){e.uuid=D(),e.duration="N/A",e.date=new Date(e.date);var t=e.startTime.split(":");e.startTime=t[0]+":"+t[1];var a=e.endTime.split(":");e.endTime=a[0]+":"+a[1]}),t})}function y(t,a,i){return"undefined"==typeof i&&(i={}),e.call("timesheets/"+t,"PATCH",a,i)}function b(t){return e.call("employee/"+t+"/timesheets","GET",[],{})}function C(t){return"undefined"==typeof t&&(t={}),t.commonActivities=!0,e.call("jobActivities","GET",[],t)}function w(t){return"undefined"==typeof t&&(t={}),e.call("jobActivities","GET",[],t)}function _(t,a){return e.call("employee/"+t+"/timesheets","POST",{date:a},{})}function S(t){return e.call("timesheets/"+t+"/actionLogs","GET",[],{})}function D(){var e,t,a="";for(e=0;e<32;e++)t=16*Math.random()|0,8!=e&&12!=e&&16!=e&&20!=e||(a+="-"),a+=(12==e?4:16==e?3&t|8:t).toString(16);return a}function T(t){return e.call("timesheetPeriods/"+t,"GET",[],{})}function x(t){return e.call("timesheetPeriod/"+t.id,"PATCH",{activeStatus:t.active},{})}function F(t){return e.call("timesheets/"+t+"/payHours","GET",[],{})}function k(t){return e.call("timesheets","GET",[],t).then(function(e){return e.data})}function E(e){var a="";return e.firstName&&e.lastName&&(a=""!=e.middleName?e.firstName+" "+e.middleName+" "+e.lastName:e.firstName+" "+e.lastName,(e.termination_id>0||e.terminationId>0)&&(a+=" ("+t.getLocalizedCustom("Past Employee")+")")),a}function I(){return e.call("timesheetPeriodFilterOptions","GET",[],{})}function A(){return e.call("timesheetStateFilterOptions","GET",[],{})}function M(e,t,a){var i=new Array;for(var o in e)e.hasOwnProperty(o)&&(a?i.push(e[o][t].toLowerCase()):i.push(e[o][t]));return i}function L(e,a,i,o,n,l){""!=e&&e||a.$broadcast("schemaForm.error.name","duplicationName",!0),i.indexOf(e.toLowerCase())>-1?a.$broadcast("schemaForm.error.name","duplicationName",t.getLocalizedCustom("Already exists as a project activity")):o.indexOf(e.toLowerCase())>-1?a.$broadcast("schemaForm.error.name","duplicationName",t.getLocalizedCustom("Already exists as a deleted common activity")):n.indexOf(e.toLowerCase())>-1?a.$broadcast("schemaForm.error.name","duplicationName",t.getLocalizedCustom("Already exists as a common activity")):l.indexOf(e.toLowerCase())>-1?a.$broadcast("schemaForm.error.name","duplicationName",t.getLocalizedCustom("Already exists as a predefined activity")):a.$broadcast("schemaForm.error.name","duplicationName",!0)}var P={fetchAllProjects:p,fetchProjectWithActivitiesByProjectIds:f,fetchCommonActivities:C,fetchActivities:w,fetchProjectActivitiesByProjectId:h,fetchTimesheetWithTimesheetItemsByTimesheetId:v,fetchEmployeeTimesheets:b,saveTimesheetWithTimesheetItemsByTimesheetId:y,fetchTimesheetById:g,createTimesheet:_,fetchTimesheetActionLogs:S,uuid:D,summaryTimesheetType:"summary",detailedTimesheetType:"detailed",fetchTimesheetPeriods:T,updateTimesheetPeriodActiveStatus:x,fetchTimesheetPayHours:F,fetchTimesheets:k,getFullName:E,fetchTimesheetPeriodFilterOptions:I,fetchTimesheetStateFilterOptions:A,extractFieldValueFromData:M,validateActivityName:L,updateProject:u,getProject:m,getProjectList:d,getCustomers:c,getProjectActivities:s,deleteActivities:r,deleteProjects:l,saveProject:n,saveActivity:i,updateActivity:o,copyActivities:a};return P}angular.module("app.time").service("timeService",e),e.$inject=["webservice","localizedMessages"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"time",config:{"abstract":!0,url:"/time",template:"<ui-view/>"}},{state:"time.common_activities",config:{url:"/common_activities",views:{"":{templateUrl:"app/time/commonActivities/common_activities.html",controller:"TimeCommonActivitiesController",controllerAs:"vm"}},data:{title:"Common Activities"}}},{state:"time.detailed_timesheet",config:{url:"/timesheets/:timesheetId",views:{"":{templateUrl:"app/time/detailedTimesheet/detailed_timesheet.html",controller:"TimeDetailedTimesheetController",controllerAs:"vm"},"navbar@":{templateUrl:"app/time/navbar/timesheet_navbar.html",controller:"TimesheetNavbarController",controllerAs:"nav"}},data:{title:"Detailed Timesheet"},params:{timesheetId:null,redirectedFrom:{value:null,squash:!0},empNo:null}}},{state:"time.configure_timesheet_period",config:{url:"/timesheet_periods",views:{"":{templateUrl:"app/time/timesheetPeriods/timesheet_periods.html",controller:"TimesheetPeriodsController",controllerAs:"vm"},"navbar@":{templateUrl:"app/time/timesheetPeriods/timesheet_period_navbar.html",controller:"TimesheetPeriodNavbarController",controllerAs:"navbar"}},data:{title:"Timesheet Periods"}}},{state:"time.project_members",config:{url:"/project_members/:projectId",views:{"":{templateUrl:"app/time/projectMembers/time.project_members.html",controller:"TimeProjectMembersController",controllerAs:"projectMembersCtrl"},"customTopRibbon@":{templateUrl:"app/time/projectMembers/time.project-members-tab-navbar.html",controller:"TimeProjectMembersTabNavBarController",controllerAs:"vm"}},data:{title:"Project Info"},params:{projectId:null,projectName:""}}},{state:"time.employee_timesheets",config:{url:"/employee_timesheets",views:{"":{templateUrl:"app/time/employeeTimesheets/list/employee_timesheets_list.html",controller:"EmployeeTimeSheetsController",controllerAs:"vm"},"navbar@":{templateUrl:"app/time/employeeTimesheets/navbar/employee_timesheets_list_navbar.html",controller:"EmployeeTimesheetsListNavbarController",controllerAs:"navbar"}}}},{state:"time.employee_timesheets.quick_access",config:{url:"/:empNumber",params:{empNumber:null}}},{state:"time.projects",config:{url:"/projects",views:{"":{templateUrl:"app/time/projects/list/time.project_list.html",controller:"TimeProjectsListController",controllerAs:"vm"}},data:{title:"Projects",oxd:!0}}},{state:"time.project",config:{url:"/project/:projectId",views:{"":{templateUrl:"app/time/projects/edit/time.edit_project.html",controller:"TimeEditProjectContoller",controllerAs:"vm"},"customTopRibbon@":{templateUrl:"app/time/projectMembers/time.project-members-tab-navbar.html",controller:"TimeProjectMembersTabNavBarController",controllerAs:"vm"}},data:{oxd:!0},params:{projectId:null,projectName:"",tab:"general"}}}]}angular.module("app.time").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,a){function i(){"undefined"!=typeof r.yearSearchString&&e.$broadcast("searchTimesheetPeriods",{year:r.yearSearchString})}function o(t){"undefined"!=typeof t&&(r.yearSearchString=t.title,e.$broadcast("searchTimesheetPeriods",{year:t.originalObject.value}))}function n(e){r.yearSearchString=e}function l(){for(var e=[],t=1980;t<=r.defaultYear.value;)e.push({value:t++});return e}var r=this;r.title=a.current.data.title,r.search=i,r.yearSelected=o,r.inputChanged=n,r.yearSearchString="",r.defaultYear={value:(new Date).getFullYear()},r.years=l()}angular.module("app.pim").controller("TimesheetPeriodNavbarController",e),e.$inject=["$rootScope","$scope","$state"]}(),function(){"use strict";function e(e,t,a,i){function o(){t(l.timesheetPeriod)}function n(){t(!1)}var l=this;l.confirm=o,l.cancel=n,l.timesheetPeriod=a,l.timesheetPeriod.active?l.confirmationText=i.getLocalizedCustom("You are about to deactivate the timesheet period of")+" "+l.timesheetPeriod.viewValue+". "+i.getLocalizedCustom("Upon deactivating, all timesheets of this period will be frozen")+".":l.confirmationText=i.getLocalizedCustom("You are about to reactivate the timesheet period of")+" "+l.timesheetPeriod.viewValue+". "+i.getLocalizedCustom("Upon reactivating, all timesheets of this period will be active again")+"."}angular.module("app.time").controller("TimesheetPeriodStateChangeConfirmationController",e),e.$inject=["$scope","close","timesheetPeriod","localizedMessages"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r,s,c,d){function m(){t.startProgress(),l.getPermission("time_configure_timesheet_periods").then(function(e){v.permissions=e,v.permissions.read||(t.hide(),i.go("403"))}),n.fetchTimesheetPeriods(v.defaultYear).then(function(e){v.timesheetPeriods=e.data.data,t.completeProgress()})}function u(e,t){e.preventDefault(),e.stopPropagation(),f(t)}function p(e){return e.viewValue=s.toLocalizedDate(e.startDate)+" "+r.getLocalizedCustom("to")+" "+s.toLocalizedDate(e.endDate),e.viewValue}function f(e){c.showModal({templateUrl:"app/time/timesheetPeriods/timesheet_period_state_change_confirmation_modal.html",controller:"TimesheetPeriodStateChangeConfirmationController",controllerAs:"modal",inputs:{timesheetPeriod:e}}).then(function(e){$(e.element).openModal(),e.close.then(function(e){e&&e.id&&g(e)})})}function g(t){t.active=!t.active,n.updateTimesheetPeriodActiveStatus(t).then(function(){var e="updateSuccess";r.showLocalizedToast(e)},function(t){var i="Failed to Save";e(i).then(function(e){a.error(i)},function(e){a.error(i)})})}function h(e,a){if(a&&a.year){if(v.waitingForPeriods)return;v.waitingForPeriods=!0,t.startProgress(),n.fetchTimesheetPeriods(a.year).then(function(e){v.timesheetPeriods=e.data.data,v.waitingForPeriods=!1,0==e.data.meta.total&&r.infoToast("No Records Found"),t.completeProgress()},function(e){v.waitingForPeriods=!1,v.timesheetPeriods=[],r.infoToast("No Records Found"),t.completeProgress()})}}var v=this;v.timesheetPeriods="",v.defaultYear=(new Date).getFullYear(),v.getFormattedTimesheetPeriod=p,v.toggleStatus=u,d.$on("searchTimesheetPeriods",h),v.waitingForPeriods=!1,m()}angular.module("app.time").controller("TimesheetPeriodsController",e),e.$inject=["$translate","loader","toast","$state","$stateParams","timeService","datagroupPermissions","localizedMessages","dateService","ModalService","$scope"]}(),function(){"use strict";function e(e,t,a,i,o,n,l,r){function s(){i.show();var e={checkDataGroupPermissions:g(),trainingConfiguration:h()};a.all(e).then(function(e){c(e.trainingConfiguration.data.data)},function(e){t.go("403")})["finally"](function(){i.hide()})}function c(e){v.schema={type:"object",properties:{enableGeneralCourses:{title:"Enable Learning Courses",type:"boolean"},enableOnlineCourses:{title:"Enable Online Assessment Courses",type:"boolean"}},required:[]},v.form=[{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l12",key:"enableGeneralCourses",ngModelOptions:{allowInvalid:!0},onChange:d}]},{type:"section",htmlClass:"row",items:[{type:"checkbox",htmlClass:"col s12 m12 l12",key:"enableOnlineCourses",ngModelOptions:{allowInvalid:!0},onChange:d,$validators:{atLeastOneShouldBeEnabled:m},validationMessage:{atLeastOneShouldBeEnabled:r.getLocalizedCustom("At least one course type must be enabled")}}]},{type:"section",htmlClass:"row form-buttons",items:[{type:"submit",htmlClass:"col s12 right-align",title:"Save"}],condition:function(){return v.permissions.update;
}}],v.model={enableGeneralCourses:!!e&&e.enableGeneralCourses,enableOnlineCourses:!!e&&e.enableOnlineCourses}}function d(){v.model.enableGeneralCourses||v.model.enableOnlineCourses?e.$broadcast("schemaForm.error.enableOnlineCourses","atLeastOneShouldBeEnabled",!0):e.$broadcast("schemaForm.error.enableOnlineCourses","atLeastOneShouldBeEnabled",!1)}function m(){return v.model.enableGeneralCourses||v.model.enableOnlineCourses}function u(e){e.$valid&&v.permissions.update&&p()}function p(){i.show();var e=f();l.saveTrainingConfiguration(e).then(function(e){e.data.success?r.successToast("Successfully Saved"):r.errorToast("Failed to Save")},function(e){r.errorToast("Failed to Save")})["finally"](function(){i.hide()})}function f(){var e={enableGeneralCourses:v.model.enableGeneralCourses,enableOnlineCourses:v.model.enableOnlineCourses};return e}function g(){return n.getPermissions().then(function(e){v.permissions=e.training_configuration,v.permissions.read||(i.hide(),t.go("403"))})}function h(){return l.fetchTrainingConfiguration()}var v=this;o.setTitle("Training Configuration"),v.onSubmit=u,v.permissions={},v.trainingConfigurationHeading="Training Configuration",s()}angular.module("app.training").controller("TrainingConfigurationController",e),e.$inject=["$scope","$state","$q","loader","titleService","datagroupPermissions","trainingService","localizedMessages"]}(),function(){"use strict";function e(e){function t(){return e.call("training/config","GET",[],{})}function a(t){return e.call("training/config","PATCH",t,{})}var i={fetchTrainingConfiguration:t,saveTrainingConfiguration:a};return i}angular.module("app.training").service("trainingService",e),e.$inject=["webservice"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"training",config:{"abstract":!0,url:"/training",template:"<ui-view/>"}},{state:"training.config",config:{url:"/config",views:{"":{templateUrl:"app/training/configuration/training_configuration.html",controller:"TrainingConfigurationController",controllerAs:"vm"}}}}]}angular.module("app.training").run(e),e.$inject=["routerHelper"]}(),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("angular")):"function"==typeof define&&define.amd?define(["angular"],t):t(e.angular)}(window,function(e){e.module("angucomplete-alt-with-employee-id",[]).directive("angucompleteAltWithEmployeeId",["$q","$parse","$http","$sce","$timeout","$templateCache","$interpolate",function(e,t,a,i,o,n,l){function r(t,n,l,r){function _(e,a){e&&("object"==typeof e?(t.searchStr=k(e),T({originalObject:e})):"string"==typeof e&&e.length>0?t.searchStr=e:console&&console.error&&console.error("Tried to set "+(a?"initial":"")+" value of angucomplete to",e,"which is an invalid value"),M(!0))}function S(e){ge=null,t.hideResults(e),document.body.removeEventListener("click",S)}function D(e){return e.which?e.which:e.keyCode}function T(e){"function"==typeof t.selectedObject?t.selectedObject(e):t.selectedObject=e,M(e?!0:!1)}function x(e){return function(a){return t[e]?t[e](a):a}}function F(e){T({originalObject:e}),t.clearSelected&&(t.searchStr=null),Y()}function k(e,a){var i=t.titleField.split(",").map(function(t){return I(e,t)}).filter(Boolean).join(" ");return a?E(i):(e.employeeId&&(t.tempEmpId=e.employeeId,re.text(t.tempEmpId)),i)}function E(e){return e?$("<div>").text(e).html():""}function I(e,t){var a,i;if(t){a=t.split("."),i=e;for(var o=0;o<a.length;o++)i=i[a[o]]}else i=e;return i}function A(e,a){var o,n,l;if(l=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i"),e)return e.match&&e.replace||(e=e.toString()),n=e.match(l),o=n?e.replace(l,'<span class="'+t.matchClass+'">'+n[0]+"</span>"):e,i.trustAsHtml(o)}function M(e){t.notEmpty=e,me=t.searchStr,t.fieldRequired&&r&&t.inputName&&r[t.inputName].$setValidity(de,e)}function L(e){var a=D(e);if(a!==m&&a!==c)if(a===d||a===p)e.preventDefault();else if(a===s)e.preventDefault(),!t.showDropdown&&t.searchStr&&t.searchStr.length>=se&&(J(),t.searching=!0,Q(t.searchStr));else if(a===u)Y(),t.$apply(function(){le.val(t.searchStr)});else{if(0===se&&!t.searchStr)return;t.searchStr&&""!==t.searchStr?t.searchStr.length>=se&&(J(),ce&&o.cancel(ce),t.searching=!0,ce=o(function(){Q(t.searchStr)},t.pause)):t.showDropdown=!1,me&&me!==t.searchStr&&!t.clearSelected&&t.$apply(function(){T()})}}function P(e){!t.overrideSuggestions||t.selectedObject&&t.selectedObject.originalObject===t.searchStr||(e&&e.preventDefault(),o.cancel(ce),H(),F(t.searchStr))}function N(e){var t=getComputedStyle(e);return e.offsetHeight+parseInt(t.marginTop,10)+parseInt(t.marginBottom,10)}function O(){return pe.getBoundingClientRect().top+parseInt(getComputedStyle(pe).maxHeight,10)}function R(){return n[0].querySelectorAll(".angucomplete-row")[t.currentIndex]}function z(){return R().getBoundingClientRect().top-(pe.getBoundingClientRect().top+parseInt(getComputedStyle(pe).paddingTop,10))}function j(e){pe.scrollTop=pe.scrollTop+e}function V(){var e=t.results[t.currentIndex];t.matchClass?le.val(k(e.originalObject)):le.val(e.title)}function G(e){var a=D(e),i=null,o=null;a===p&&t.results?(t.currentIndex>=0&&t.currentIndex<t.results.length?(e.preventDefault(),t.selectResult(t.results[t.currentIndex])):(P(e),Y()),t.$apply()):a===s&&t.results?(e.preventDefault(),t.currentIndex+1<t.results.length&&t.showDropdown&&(t.$apply(function(){t.currentIndex++,V()}),fe&&(i=R(),O()<i.getBoundingClientRect().bottom&&j(N(i))))):a===d&&t.results?(e.preventDefault(),t.currentIndex>=1?(t.$apply(function(){t.currentIndex--,V()}),fe&&(o=z(),o<0&&j(o-1))):0===t.currentIndex&&t.$apply(function(){t.currentIndex=-1,le.val(t.searchStr)})):a===f?t.results&&t.results.length>0&&t.showDropdown?t.currentIndex===-1&&t.overrideSuggestions?P():(t.currentIndex===-1&&(t.currentIndex=0),t.selectResult(t.results[t.currentIndex]),t.$digest()):t.searchStr&&t.searchStr.length>0&&P():a===u&&e.preventDefault()}function B(e){return function(a,i,o,n){i||o||n||!a.data||(a=a.data),t.searching=!1,X(I(ae(a),t.remoteUrlDataField),e)}}function q(e,a,i,o){0!==a&&a!==-1&&(a||i||o||(a=e.status),t.remoteUrlErrorCallback?t.remoteUrlErrorCallback(e,a,i,o):console&&console.error&&console.error("http error"))}function H(){ue&&ue.resolve()}function U(i){var o={},n=t.remoteUrl+encodeURIComponent(i);t.remoteUrlRequestFormatter&&(o={params:t.remoteUrlRequestFormatter(i)},n=t.remoteUrl),t.remoteUrlRequestWithCredentials&&(o.withCredentials=!0),H(),ue=e.defer(),o.timeout=ue.promise,a.get(n,o).success(B(i)).error(q)}function W(a){H(),ue=e.defer(),t.remoteApiHandler(a,ue.promise).then(B(a))["catch"](q)}function Y(){t.showDropdown=!1,t.results=[],pe&&(pe.scrollTop=0)}function J(){t.showDropdown=oe,t.currentIndex=t.focusFirst?0:-1,t.results=[]}function K(e){var a,i,o,n,l=t.searchFields.split(","),r=[];for("undefined"!=typeof t.parseInput()&&(e=t.parseInput()(e)),a=0;a<t.localData.length;a++){for(i=!1,o=0;o<l.length;o++)n=I(t.localData[a],l[o])||"",i=i||n.toString().toLowerCase().indexOf(e.toString().toLowerCase())>=0;i&&(r[r.length]=t.localData[a])}t.searching=!1,X(r,e)}function Z(e,a,i){if(!i)return!1;for(var o in a)if(a[o].toLowerCase()===i.toLowerCase())return t.selectResult(e),!0;return!1}function Q(e){!e||e.length<se||(t.localData?t.$apply(function(){K(e)}):t.remoteApiHandler?W(e):U(e))}function X(e,a){var i,o,n,l,r,s;if(e&&e.length>0)for(t.results=[],i=0;i<e.length;i++)t.titleField&&""!==t.titleField&&(l=r=k(e[i],!0)),o="",t.descriptionField&&(o=s=I(e[i],t.descriptionField)),n="",t.imageField&&(n=I(e[i],t.imageField)),t.matchClass&&(r=A(l,a),s=A(o,a)),t.results[t.results.length]={title:r,description:s,image:n,originalObject:e[i]};else t.results=[];t.autoMatch&&1===t.results.length&&Z(t.results[0],{title:l,desc:o||""},t.searchStr)?t.showDropdown=!1:0!==t.results.length||ne?t.showDropdown=!0:t.showDropdown=!1}function ee(){t.localData?X(t.localData,""):t.remoteApiHandler?W(""):U("")}var te,ae,ie,oe,ne,le=n.find("input"),re=n.find("span"),se=g,ce=null,de=b,me=null,ue=null,pe=n[0].querySelector(".angucomplete-dropdown"),fe=!1,ge=null;n.on("mousedown",function(e){e.target.id?(ge=e.target.id,ge===t.id+"_dropdown"&&document.body.addEventListener("click",S)):ge=e.target.className}),t.currentIndex=t.focusFirst?0:null,t.searching=!1,ie=t.$watch("initialValue",function(e){e&&(ie(),_(e,!0))}),t.$watch("fieldRequired",function(e,a){e!==a&&(e?M(me&&t.currentIndex!==-1?!0:!1):r[t.inputName].$setValidity(de,!0))}),t.$on("angucomplete-alt-with-employee-id:clearInput",function(e,a){a&&a!==t.id||(t.searchStr=null,T(),M(!1),t.tempEmpId=null,re.text(t.tempEmpId),Y())}),t.$on("angucomplete-alt-with-employee-id:changeInput",function(e,a,i){a&&a===t.id&&_(i)}),t.$watch("selectedObject",function(e){"undefined"!=typeof t.selectedObject&&null!==t.selectedObject&&"undefined"!=typeof t.selectedObject.originalObject&&re.text(t.selectedObject.originalObject.employeeId)}),t.onFocusHandler=function(){t.focusIn&&t.focusIn(),0!==se||t.searchStr&&0!==t.searchStr.length||(t.currentIndex=t.focusFirst?0:t.currentIndex,t.showDropdown=!0,ee())},t.hideResults=function(){ge&&(ge===t.id+"_dropdown"||ge.indexOf("angucomplete")>=0)?ge=null:(te=o(function(){Y(),t.initialValue||re.text(""),t.$apply(function(){t.searchStr&&t.searchStr.length>0&&le.val(t.searchStr),t.tempEmpId&&t.tempEmpId.length>0&&re.text(t.tempEmpId)})},y),H(),t.focusOut&&t.focusOut(),t.overrideSuggestions&&t.searchStr&&t.searchStr.length>0&&t.currentIndex===-1&&P())},t.resetHideResults=function(){te&&o.cancel(te)},t.hoverRow=function(e){t.currentIndex=e},t.selectResult=function(e){t.matchClass&&(e.title=k(e.originalObject),e.description=I(e.originalObject,t.descriptionField)),t.clearSelected?t.searchStr=null:t.searchStr=e.title,T(e),Y()},t.inputChangeHandler=function(e){return e.length<se?(H(),Y()):0===e.length&&0===se&&(t.searching=!1,ee()),t.inputChanged&&(e=t.inputChanged(e)),t.tempEmpId=null,re.text(t.tempEmpId),e},t.fieldRequiredClass&&""!==t.fieldRequiredClass&&(de=t.fieldRequiredClass),t.minlength&&""!==t.minlength&&(se=parseInt(t.minlength,10)),t.pause||(t.pause=v),t.clearSelected||(t.clearSelected=!1),t.overrideSuggestions||(t.overrideSuggestions=!1),t.fieldRequired&&r&&M(t.initialValue?!0:!1),t.inputType=l.type?l.type:"text",t.textSearching=l.textSearching?l.textSearching:C,t.textNoResults=l.textNoResults?l.textNoResults:w,oe="false"!==t.textSearching,ne="false"!==t.textNoResults,t.maxlength=l.maxlength?l.maxlength:h,le.on("keydown",G),le.on("keyup",L),ae=x("remoteUrlResponseFormatter"),o(function(){var e=getComputedStyle(pe);fe=e.maxHeight&&"auto"===e.overflowY})}var s=40,c=39,d=38,m=37,u=27,p=13,f=9,g=1,h=524288,v=500,y=200,b="autocomplete-required",C="Searching...",w="No results found",_="/angucomplete-alt-with-employee-id/index.html";return n.put(_,'<div class="angucomplete-holder" ng-class="{\'angucomplete-dropdown-visible\': showDropdown}">  <input id="{{id}}_value" name="{{inputName}}" ng-class="{\'angucomplete-input-not-empty\': notEmpty}" ng-model="searchStr" ng-disabled="disableInput" type="{{inputType}}" placeholder="{{placeholder}}" maxlength="{{maxlength}}" ng-focus="onFocusHandler()" class="{{inputClass}}" ng-focus="resetHideResults()" ng-blur="hideResults($event)" autocapitalize="off" autocorrect="off" autocomplete="off" ng-change="inputChangeHandler(searchStr)"/>  <div id="{{id}}_dropdown" class="angucomplete-dropdown" ng-show="showDropdown">    <div class="angucomplete-searching" ng-show="searching" ng-bind="textSearching"></div>    <div class="angucomplete-searching" ng-show="!searching && (!results || results.length == 0)" ng-bind="textNoResults"></div>    <div class="angucomplete-row" ng-repeat="result in results" ng-click="selectResult(result)" ng-mouseenter="hoverRow($index)" ng-class="{\'angucomplete-selected-row\': $index == currentIndex}">      <div ng-if="imageField" class="angucomplete-image-holder">        <img ng-if="result.image && result.image != \'\'" ng-src="{{result.image}}" class="angucomplete-image"/>        <div ng-if="!result.image && result.image != \'\'" class="angucomplete-image-default"></div>      </div>      <span class="angucomplete-title" ng-if="matchClass" ng-bind-html="result.title"></span>      <div class="angucomplete-title" ng-if="!matchClass">{{ result.title }}</div>      <span ng-if="matchClass && result.description && result.description != \'\'" class="angucomplete-description" ng-bind-html="result.description"></span>      <div ng-if="!matchClass && result.description && result.description != \'\'" class="angucomplete-description">{{result.description}}</div>    </div>  </div>  <span id="angucomplete-title-temp-id" class="autoCompleteEmployeeIdBackground" ng-disabled="disableInput" style=\'float: right;top: -35px;position: relative;min-width: 70px;font-size: 14px; padding-left: 5px; \'>{{temEmpId}}</span></div>'),{restrict:"EA",require:"^?form",scope:{selectedObject:"=",disableInput:"=",initialValue:"=",localData:"=",remoteUrlRequestFormatter:"=",remoteUrlRequestWithCredentials:"@",remoteUrlResponseFormatter:"=",remoteUrlErrorCallback:"=",remoteApiHandler:"=",id:"@",type:"@",placeholder:"@",remoteUrl:"@",remoteUrlDataField:"@",titleField:"@",descriptionField:"@",imageField:"@",inputClass:"@",pause:"@",searchFields:"@",minlength:"@",matchClass:"@",clearSelected:"@",overrideSuggestions:"@",fieldRequired:"=",fieldRequiredClass:"@",inputChanged:"=",autoMatch:"@",focusOut:"&",focusIn:"&",inputName:"@",focusFirst:"@",parseInput:"&"},templateUrl:function(e,t){return t.templateUrl||_},compile:function(e){var t=l.startSymbol(),a=l.endSymbol();if("{{"!==t||"}}"!==a){var i=e.html().replace(/\{\{/g,t).replace(/\}\}/g,a);e.html(i)}return r}}}])}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("angular")):"function"==typeof define&&define.amd?define(["angular"],t):t(e.angular)}(window,function(e){e.module("angucomplete-alt",[]).directive("angucompleteAlt",["$q","$parse","$http","$sce","$timeout","$templateCache","$interpolate",function(e,t,a,i,o,n,l){function r(t,n,l,r){function _(e,a){e&&("object"==typeof e?(t.searchStr=k(e),T({originalObject:e})):"string"==typeof e&&e.length>0?t.searchStr=e:console&&console.error&&console.error("Tried to set "+(a?"initial":"")+" value of angucomplete to",e,"which is an invalid value"),M(!0))}function S(e){fe=null,t.hideResults(e),document.body.removeEventListener("click",S)}function D(e){return e.which?e.which:e.keyCode}function T(e){"function"==typeof t.selectedObject?t.selectedObject(e):t.selectedObject=e,M(e?!0:!1)}function x(e){return function(a){return t[e]?t[e](a):a}}function F(e){T({originalObject:e}),t.clearSelected&&(t.searchStr=null),Y()}function k(e,a){var i=t.titleField.split(",").map(function(t){return I(e,t)}).join(" ");return a?E(i):i}function E(e){return e?$("<div>").text(e).html():""}function I(e,t){var a,i;if(t){a=t.split("."),i=e;for(var o=0;o<a.length;o++)i=i[a[o]]}else i=e;return i}function A(e,a){var o,n,l;if(l=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i"),e)return e.match&&e.replace||(e=e.toString()),n=e.match(l),o=n?e.replace(l,'<span class="'+t.matchClass+'">'+n[0]+"</span>"):e,i.trustAsHtml(o)}function M(e){t.notEmpty=e,de=t.searchStr,t.fieldRequired&&r&&t.inputName&&r[t.inputName].$setValidity(ce,e)}function L(e){var a=D(e);if(a!==m&&a!==c)if(a===d||a===p)e.preventDefault();else if(a===s)e.preventDefault(),!t.showDropdown&&t.searchStr&&t.searchStr.length>=re&&(J(),t.searching=!0,Q(t.searchStr));else if(a===u)Y(),t.$apply(function(){le.val(t.searchStr)});else{if(0===re&&!t.searchStr)return;t.searchStr&&""!==t.searchStr?t.searchStr.length>=re&&(J(),se&&o.cancel(se),t.searching=!0,se=o(function(){Q(t.searchStr)},t.pause)):t.showDropdown=!1,de&&de!==t.searchStr&&!t.clearSelected&&t.$apply(function(){T()})}}function P(e){!t.overrideSuggestions||t.selectedObject&&t.selectedObject.originalObject===t.searchStr||(e&&e.preventDefault(),o.cancel(se),H(),F(t.searchStr))}function N(e){var t=getComputedStyle(e);return e.offsetHeight+parseInt(t.marginTop,10)+parseInt(t.marginBottom,10)}function O(){return ue.getBoundingClientRect().top+parseInt(getComputedStyle(ue).maxHeight,10)}function R(){return n[0].querySelectorAll(".angucomplete-row")[t.currentIndex]}function z(){return R().getBoundingClientRect().top-(ue.getBoundingClientRect().top+parseInt(getComputedStyle(ue).paddingTop,10))}function j(e){ue.scrollTop=ue.scrollTop+e}function V(){var e=t.results[t.currentIndex];t.matchClass?le.val(k(e.originalObject)):le.val(e.title)}function G(e){var a=D(e),i=null,o=null;a===p&&t.results?(t.currentIndex>=0&&t.currentIndex<t.results.length?(e.preventDefault(),t.selectResult(t.results[t.currentIndex])):(P(e),Y()),t.$apply()):a===s&&t.results?(e.preventDefault(),t.currentIndex+1<t.results.length&&t.showDropdown&&(t.$apply(function(){t.currentIndex++,V()}),pe&&(i=R(),O()<i.getBoundingClientRect().bottom&&j(N(i))))):a===d&&t.results?(e.preventDefault(),t.currentIndex>=1?(t.$apply(function(){t.currentIndex--,V()}),pe&&(o=z(),o<0&&j(o-1))):0===t.currentIndex&&t.$apply(function(){t.currentIndex=-1,le.val(t.searchStr)})):a===f?t.results&&t.results.length>0&&t.showDropdown?t.currentIndex===-1&&t.overrideSuggestions?P():(t.currentIndex===-1&&(t.currentIndex=0),t.selectResult(t.results[t.currentIndex]),t.$digest()):t.searchStr&&t.searchStr.length>0&&P():a===u&&e.preventDefault()}function B(e){return function(a,i,o,n){i||o||n||!a.data||(a=a.data),t.searching=!1,X(I(ae(a),t.remoteUrlDataField),e)}}function q(e,a,i,o){0!==a&&a!==-1&&(a||i||o||(a=e.status),t.remoteUrlErrorCallback?t.remoteUrlErrorCallback(e,a,i,o):console&&console.error&&console.error("http error"))}function H(){me&&me.resolve()}function U(i){var o={},n=t.remoteUrl+encodeURIComponent(i);t.remoteUrlRequestFormatter&&(o={params:t.remoteUrlRequestFormatter(i)},n=t.remoteUrl),t.remoteUrlRequestWithCredentials&&(o.withCredentials=!0),H(),me=e.defer(),o.timeout=me.promise,a.get(n,o).success(B(i)).error(q)}function W(a){H(),me=e.defer(),t.remoteApiHandler(a,me.promise).then(B(a))["catch"](q)}function Y(){t.showDropdown=!1,t.results=[],ue&&(ue.scrollTop=0)}function J(){t.showDropdown=oe,t.currentIndex=t.focusFirst?0:-1,t.results=[]}function K(e){var a,i,o,n,l=t.searchFields.split(","),r=[];for("undefined"!=typeof t.parseInput()&&(e=t.parseInput()(e)),a=0;a<t.localData.length;a++){for(i=!1,o=0;o<l.length;o++)n=I(t.localData[a],l[o])||"",i=i||n.toString().toLowerCase().indexOf(e.toString().toLowerCase())>=0;i&&(r[r.length]=t.localData[a])}t.searching=!1,X(r,e)}function Z(e,a,i){if(!i)return!1;for(var o in a)if(a[o].toLowerCase()===i.toLowerCase())return t.selectResult(e),!0;return!1}function Q(e){!e||e.length<re||(t.localData?t.$apply(function(){K(e)}):t.remoteApiHandler?W(e):U(e))}function X(e,a){var i,o,n,l,r,s;if(e&&e.length>0)for(t.results=[],i=0;i<e.length;i++)t.titleField&&""!==t.titleField&&(l=r=k(e[i],!0)),o="",t.descriptionField&&(o=s=I(e[i],t.descriptionField)),n="",t.imageField&&(n=I(e[i],t.imageField)),t.matchClass&&(r=A(l,a),s=A(o,a)),t.results[t.results.length]={title:r,description:s,image:n,originalObject:e[i]};else t.results=[];t.autoMatch&&1===t.results.length&&Z(t.results[0],{title:l,desc:o||""},t.searchStr)?t.showDropdown=!1:0!==t.results.length||ne?t.showDropdown=!0:t.showDropdown=!1}function ee(){t.localData?X(t.localData,""):t.remoteApiHandler?W(""):U("")}var te,ae,ie,oe,ne,le=n.find("input"),re=g,se=null,ce=b,de=null,me=null,ue=n[0].querySelector(".angucomplete-dropdown"),pe=!1,fe=null;n.on("mousedown",function(e){e.target.id?(fe=e.target.id,fe===t.id+"_dropdown"&&document.body.addEventListener("click",S)):fe=e.target.className}),t.currentIndex=t.focusFirst?0:null,t.searching=!1,ie=t.$watch("initialValue",function(e){e&&(ie(),_(e,!0))}),t.$watch("fieldRequired",function(e,a){e!==a&&(e?M(de&&t.currentIndex!==-1?!0:!1):r[t.inputName].$setValidity(ce,!0))}),t.$on("angucomplete-alt:clearInput",function(e,a){a&&a!==t.id||(t.searchStr=null,T(),M(!1),Y())}),t.$on("angucomplete-alt:changeInput",function(e,a,i){a&&a===t.id&&_(i)}),t.onFocusHandler=function(){t.focusIn&&t.focusIn(),0!==re||t.searchStr&&0!==t.searchStr.length||(t.currentIndex=t.focusFirst?0:t.currentIndex,t.showDropdown=!0,ee())},t.hideResults=function(){fe&&(fe===t.id+"_dropdown"||fe.indexOf("angucomplete")>=0)?fe=null:(te=o(function(){Y(),t.$apply(function(){t.searchStr&&t.searchStr.length>0&&le.val(t.searchStr)})},y),H(),t.focusOut&&t.focusOut(),t.overrideSuggestions&&t.searchStr&&t.searchStr.length>0&&t.currentIndex===-1&&P())},t.resetHideResults=function(){te&&o.cancel(te)},t.hoverRow=function(e){t.currentIndex=e},t.selectResult=function(e){t.matchClass&&(e.title=k(e.originalObject),e.description=I(e.originalObject,t.descriptionField)),t.clearSelected?t.searchStr=null:t.searchStr=e.title,T(e),Y()},t.inputChangeHandler=function(e){return e.length<re?(H(),Y()):0===e.length&&0===re&&(t.searching=!1,ee()),t.inputChanged&&(e=t.inputChanged(e)),e},t.fieldRequiredClass&&""!==t.fieldRequiredClass&&(ce=t.fieldRequiredClass),t.minlength&&""!==t.minlength&&(re=parseInt(t.minlength,10)),t.pause||(t.pause=v),t.clearSelected||(t.clearSelected=!1),t.overrideSuggestions||(t.overrideSuggestions=!1),t.fieldRequired&&r&&M(t.initialValue?!0:!1),t.inputType=l.type?l.type:"text",t.textSearching=l.textSearching?l.textSearching:C,t.textNoResults=l.textNoResults?l.textNoResults:w,oe="false"!==t.textSearching,ne="false"!==t.textNoResults,t.maxlength=l.maxlength?l.maxlength:h,le.on("keydown",G),le.on("keyup",L),ae=x("remoteUrlResponseFormatter"),o(function(){var e=getComputedStyle(ue);pe=e.maxHeight&&"auto"===e.overflowY})}var s=40,c=39,d=38,m=37,u=27,p=13,f=9,g=1,h=524288,v=500,y=200,b="autocomplete-required",C="Searching...",w="No results found",_="/angucomplete-alt/index.html";return n.put(_,'<div class="angucomplete-holder" ng-class="{\'angucomplete-dropdown-visible\': showDropdown}">  <input id="{{id}}_value" name="{{inputName}}" ng-class="{\'angucomplete-input-not-empty\': notEmpty}" ng-model="searchStr" ng-disabled="disableInput" type="{{inputType}}" placeholder="{{placeholder}}" maxlength="{{maxlength}}" ng-focus="onFocusHandler()" class="{{inputClass}}" ng-focus="resetHideResults()" ng-blur="hideResults($event)" autocapitalize="off" autocorrect="off" autocomplete="off" ng-change="inputChangeHandler(searchStr)"/>  <div id="{{id}}_dropdown" class="angucomplete-dropdown" ng-show="showDropdown">    <div class="angucomplete-searching" ng-show="searching" ng-bind="textSearching"></div>    <div class="angucomplete-searching" ng-show="!searching && (!results || results.length == 0)" ng-bind="textNoResults"></div>    <div class="angucomplete-row" ng-repeat="result in results" ng-click="selectResult(result)" ng-mouseenter="hoverRow($index)" ng-class="{\'angucomplete-selected-row\': $index == currentIndex}">      <div ng-if="imageField" class="angucomplete-image-holder">        <img ng-if="result.image && result.image != \'\'" ng-src="{{result.image}}" class="angucomplete-image"/>        <div ng-if="!result.image && result.image != \'\'" class="angucomplete-image-default"></div>      </div>      <div class="angucomplete-title" ng-if="matchClass" ng-bind-html="result.title"></div>      <div class="angucomplete-title" ng-if="!matchClass">{{ result.title }}</div>      <div ng-if="matchClass && result.description && result.description != \'\'" class="angucomplete-description" ng-bind-html="result.description"></div>      <div ng-if="!matchClass && result.description && result.description != \'\'" class="angucomplete-description">{{result.description}}</div>    </div>  </div></div>'),{restrict:"EA",require:"^?form",scope:{selectedObject:"=",disableInput:"=",initialValue:"=",localData:"=",remoteUrlRequestFormatter:"=",remoteUrlRequestWithCredentials:"@",remoteUrlResponseFormatter:"=",remoteUrlErrorCallback:"=",remoteApiHandler:"=",id:"@",type:"@",placeholder:"@",remoteUrl:"@",remoteUrlDataField:"@",titleField:"@",descriptionField:"@",imageField:"@",inputClass:"@",pause:"@",searchFields:"@",minlength:"@",matchClass:"@",clearSelected:"@",overrideSuggestions:"@",fieldRequired:"=",fieldRequiredClass:"@",inputChanged:"=",autoMatch:"@",focusOut:"&",focusIn:"&",inputName:"@",focusFirst:"@",parseInput:"&"},templateUrl:function(e,t){return t.templateUrl||_},compile:function(e){var t=l.startSymbol(),a=l.endSymbol();if("{{"!==t||"}}"!==a){var i=e.html().replace(/\{\{/g,t).replace(/\}\}/g,a);e.html(i)}return r}}}])}),function(){"use strict";function e(e,t,a){return{restrict:"E",require:"ngModel",scope:{itemsInput:"=items",treeStructure:"=treeStructure",sorting:"=sorting"},templateUrl:"app/widgets/autocomplete-location.html",link:function(i,o,n,l){function r(e){for(var t in e)m(t),i.selectedItems.push({id:t,name:e[t]})}function s(){var e={};for(var t in i.selectedItems)e[i.selectedItems[t].id]=i.selectedItems[t].name;l.$setViewValue(e)}function c(e,t){return i.treeStructure||e&&e.sort(function(e,a){return e[t].toLowerCase()<a[t].toLowerCase()?-1:e[t].toLowerCase()>a[t].toLowerCase()?1:0}),e}function d(e,t){var a=t.filter(function(t){return t.id==e});return a[0]}function m(e){i.items.splice(u(e),1)}function u(e){for(var t=0;t<i.items.length;t+=1)if(i.items[t].id===e)return t;return-1}c=i.sorting===!1?function(e){return e}:c,i.items=c(angular.copy(i.itemsInput),"name"),i.defaultItems=angular.copy(i.items),i.noResultsFoundObject={id:"",name:t.instant("No results found")};var p=Math.random().toString(36).substring(7);i.dropDownId="dropdown-multyselect-"+p,o.find("input.multiselect-autocomplete").attr("data-activates","dropdown-multyselect-"+p),o.find("ul.dropdown-content").attr("id","dropdown-multyselect-"+p),e.ready(function(){o.find("input.multiselect-autocomplete").dropdown({inDuration:300,outDuration:225,constrain_width:!0,hover:!1,gutter:0,belowOrigin:!0,alignment:"left"})}),i.$watch("scope.itemsInput",function(e,t){}),i.$watch(function(){return l.$modelValue},function(e){"object"==typeof e&&0==Object.keys(e).length&&(i.selectedItems=[])}),i.selectedItems=[],i.filteredList=[],l.$render=function(){r(l.$viewValue)},l.$isEmpty=function(){return 0==i.selectedItems.length},i.selectItem=function(e,t){if(t===i.noResultsFoundObject)return e.stopPropagation(),!1;var a=t.id;return void 0==a?(e.stopPropagation(),!1):(i.selectedItems.push(d(a,i.items)),m(a),i.input_name="",void s())},i.removeItem=function(e){if(i.selectedItems=i.selectedItems.filter(function(t){return t.id!=e||(i.items.push(d(e,i.selectedItems)),i.items=c(i.items,"name"),!1)}),i.treeStructure){i.items=angular.copy(i.defaultItems);for(var t in i.selectedItems)m(i.selectedItems[t].id)}s()},i.filterItems=function(e){var t=[],a=0;"undefined"==typeof e&&(e="");for(var o in i.items)if(i.items[o].name.toLowerCase().indexOf(e.toLowerCase())>=0&&(t.push(i.items[o]),a++),50==a)break;t.length||t.push(i.noResultsFoundObject),i.filteredList=t},i.getStyledName=function(e){var t=e.name;if(t=a("sanitizehtml")(t),e===i.noResultsFoundObject)return t;if(i.input_name){var o=t.toLowerCase().search(i.input_name.toLowerCase());return t.substr(0,o)+'<span class="match">'+t.substr(o,i.input_name.length)+"</span>"+t.substr(o+i.input_name.length,t.length)}return t}}}}angular.module("app.widgets").directive("autocompleteMultipleLocation",e),e.$inject=["$document","$translate","$filter"]}(),function(){"use strict";function e(e){return{restrict:"E",require:"ngModel",scope:{items:"=items"},templateUrl:"app/widgets/autocomplete-subunit.html",link:function(t,a,i,o){function n(e){for(var a in e){for(var i=-1,o=0;o<t.items.length;o++)if(t.items[o].value===a){i=o;break}i>-1&&t.items.splice(i,1),t.selectedItems.push({id:a,name:e[a]})}}function l(){var e={};for(var a in t.selectedItems)e[t.selectedItems[a].id]=t.selectedItems[a].name;o.$setViewValue(e)}var r=Math.random().toString(36).substring(7);a.find("input.multiselect-autocomplete").attr("data-activates","dropdown-multyselect-"+r),a.find("ul.dropdown-content").attr("id","dropdown-multyselect-"+r),e.ready(function(){$("input.multiselect-autocomplete").dropdown({inDuration:300,outDuration:225,constrain_width:!0,hover:!1,gutter:0,belowOrigin:!0,alignment:"left"})}),t.$watch(function(){return o.$modelValue},function(e){"object"==typeof e&&0==Object.keys(e).length&&(t.selectedItems=[])}),t.selectedItems=[],o.$render=function(){n(o.$viewValue)},t.selectItem=function(e){for(var a=null,i=-1,o=0;o<t.items.length;o++)if(t.items[o].value===e){a=t.items[o].label,i=o;break}i>-1&&(t.selectedItems.push({id:e,name:a}),t.items.splice(i,1),t.input_name="",l())},t.removeItem=function(e){t.selectedItems=t.selectedItems.filter(function(a){return a.id!=e||(t.items.push({value:e,name:a.name}),!1)}),l()},t.filterItems=function(e){var a={};"undefined"==typeof e&&(e="");for(var i=0;i<t.items.length;i++){var o=t.items[i];a[o.value]=o.label}return a}}}}angular.module("app.widgets").directive("autocompleteMultipleSubunit",e),e.$inject=["$document"]}(),function(){"use strict";function e(e,t,a){return{restrict:"E",require:"ngModel",scope:{itemsInput:"=items",treeStructure:"=treeStructure",sorting:"=sorting",key:"=key",placeholder:"=placeholder",showSearchIcon:"=showSearchIcon",noSearchResultFoundText:"=noSearchResultFoundText"},templateUrl:"app/widgets/autocomplete.html",link:function(i,o,n,l){function r(e){if("string"!=typeof e)for(var t in e){var a=i.items.filter(function(e){return e.id===t})[0];if(m(t),"undefined"!=typeof a){var o={id:t,name:e[t]};"undefined"!=typeof a.employeeId&&(o.employeeId=a.employeeId),a.displayValue&&(o.displayValue=a.displayValue),i.selectedItems.push(o)}}}function s(){var e={};for(var t in i.selectedItems)e[i.selectedItems[t].id]=i.selectedItems[t].name;l.$setViewValue(e)}function c(e,t){return i.treeStructure||e&&e.sort(function(e,a){return e[t].toLowerCase()<a[t].toLowerCase()?-1:e[t].toLowerCase()>a[t].toLowerCase()?1:0}),e}function d(e,t){var a=t.filter(function(t){return t.id==e});return a[0]}function m(e){var t=u(e);t>-1&&i.items.splice(t,1)}function u(e){for(var t=0;t<i.items.length;t+=1)if(i.items[t].id===e)return t;return-1}c=i.sorting===!1?function(e){return e}:c,i.items=c(angular.copy(i.itemsInput),"name"),i.defaultItems=angular.copy(i.items),i.currentInputValue="",i.noResultsFoundObject={id:"",name:i.noSearchResultFoundText?t.instant(i.noSearchResultFoundText):t.instant("No results found")};var p=Math.random().toString(36).substring(7);i.dropDownId="dropdown-multyselect-"+p,o.find("input.multiselect-autocomplete").attr("data-activates","dropdown-multyselect-"+p),o.find("ul.dropdown-content").attr("id","dropdown-multyselect-"+p),e.ready(function(){o.find("input.multiselect-autocomplete").dropdown({inDuration:300,outDuration:225,constrain_width:!0,hover:!1,gutter:0,belowOrigin:!0,alignment:"left"})}),i.$watch("scope.itemsInput",function(e,t){}),i.preventBroadcastOverlap=!1,i.$parent.$on("schemaFormValidate",function(e,a){!i.preventBroadcastOverlap&&i.key&&i.key.length>0&&(i.preventBroadcastOverlap=!0,0==i.selectedItems.length&&""!=i.currentInputValue?i.$parent.$broadcast("schemaForm.error."+i.key[0],"invalidSearchString",t.instant("Invalid")):(i.$parent.$broadcast("schemaForm.error."+i.key[0],"invalidSearchString",!0),i.input_name="")),setTimeout(function(){i.preventBroadcastOverlap=!1},500)}),i.$watch(function(){return l.$modelValue},function(e){"object"==typeof e&&0==Object.keys(e).length&&(i.selectedItems=[])}),i.selectedItems=[],i.filteredList=[],l.$render=function(){r(l.$viewValue)},l.$isEmpty=function(){return 0==i.selectedItems.length},i.selectItem=function(e,t){if(t===i.noResultsFoundObject)return e.stopPropagation(),!1;var a=t.id,o=d(a,i.items);return"undefined"!=typeof o&&(i.selectedItems.push(o),m(a),i.input_name="",i.key&&i.key.length>0&&i.$parent.$broadcast("schemaForm.error."+i.key[0],"invalidSearchString",!0),void s())},i.removeItem=function(e){if(i.selectedItems=i.selectedItems.filter(function(t){return t.id!=e||(i.items.push(d(e,i.selectedItems)),i.items=c(i.items,"name"),!1)}),i.treeStructure){i.items=angular.copy(i.defaultItems);for(var t in i.selectedItems)m(i.selectedItems[t].id);
}s()},i.filterItems=function(e){var a=[],o=0;"undefined"==typeof e&&(e=""),i.currentInputValue=e;for(var n in i.items)if(i.items[n].name.toLowerCase().indexOf(e.toLowerCase())>=0?(a.push(i.items[n]),o++):"undefined"!=typeof i.items[n].employeeId&&i.items[n].employeeId.toLowerCase().indexOf(e.toLowerCase())>=0&&(a.push(i.items[n]),o++),50==o)break;a.length||a.push(i.noResultsFoundObject),0==i.selectedItems.length&&""!=e&&i.key&&i.key.length>0&&i.$parent.$broadcast("schemaForm.error."+i.key[0],"invalidSearchString",t.instant("Invalid")),i.filteredList=a},i.getStyledName=function(e){var t=e.displayValue?e.displayValue:e.name;t=a("sanitizehtml")(t);var o;if(e.employeeId&&(o=a("sanitizehtml")(e.employeeId)),e===i.noResultsFoundObject)return"undefined"!=typeof o?t+'<span class="multi-select-employee-id">'+o+"</span>":t;if(i.input_name){var n=t.toLowerCase().search(i.input_name.toLowerCase());if("undefined"!=typeof o){o.toLowerCase().search(i.input_name.toLowerCase())}return"undefined"!=typeof o?n!=-1?'<span class="multi-select-title">'+t.substr(0,n)+'<span class="match">'+t.substr(n,i.input_name.length)+"</span>"+t.substr(n+i.input_name.length,t.length)+'</span><span class="multi-select-employee-id">'+o+"</span>":'<span class="multi-select-title">'+t+'</span><span class="multi-select-employee-id">'+o+"</span>":t}return"undefined"!=typeof o?'<span class="multi-select-title">'+t+'</span><span class="multi-select-employee-id">'+o+"</span>":'<span class="multi-select-title">'+t+"</span>"}}}}angular.module("app.widgets").directive("autocompleteMultiple",e),e.$inject=["$document","$translate","$filter"]}(),function(){"use strict";function e(){var e={restrict:"E",scope:{data:"=data",options:"=options"},link:function(e,t,a){$.plot(t,e.data,e.options),t.show()}};return e}angular.module("app.widgets").directive("chart",e)}(),function(){"use strict";function e(e){function t(e,t,o){o.$observe("htImgPerson",function(e){e=a+(e||i),o.$set("src",e)})}var a=e.imageBasePath,i=e.unknownPersonImageSource,o={link:t,restrict:"A"};return o}angular.module("app.widgets").directive("htImgPerson",e),e.$inject=["config"]}(),function(){"use strict";function e(){var e={scope:{title:"@",subtitle:"@",rightText:"@",allowCollapse:"@"},templateUrl:"app/widgets/widget-header.html",restrict:"EA"};return e}angular.module("app.widgets").directive("htWidgetHeader",e)}(),function(){"use strict";angular.module("app.widgets").directive("keyboardNavigation",["$log",function(e){function t(e,t){for(var a=0;a<e.length;a++)t==a?angular.element(e[a]).addClass("focused"):angular.element(e[a]).removeClass("focused")}function a(e,t){e.find("input.multiselect-autocomplete").trigger(t)}return{restrict:"A",link:function(e,i,o,n){i.bind("keyup",function(o){if([38,40,13,27].indexOf(o.which)!==-1){o.preventDefault(),o.stopPropagation();var n=i.find("li");switch(o.which){case 40:angular.isNumber(e.focusedItem)?e.focusedItem=e.focusedItem===n.length-1?e.focusedItem:e.focusedItem+1:e.focusedItem=0;break;case 38:angular.isNumber(e.focusedItem)?e.focusedItem=0===e.focusedItem?0:e.focusedItem-1:e.focusedItem=0;break;case 13:if(angular.isNumber(e.focusedItem)){var l=n[e.focusedItem].id;l&&e.selectItem(o,n[e.focusedItem]),e.focusedItem=null,a(i,"close")}break;case 27:e.focusedItem=0,a(i,"close");break;default:e.focusedItem=0}angular.isNumber(e.focusedItem)&&$("#"+e.dropDownId).scrollTop(50*e.focusedItem),t(n,e.focusedItem)}else e.focusedItem=null,o.which>47&&o.which<112&&1==e.input_name.length&&a(i,"open")})}}}])}(),function(){"use strict";angular.module("app.widgets").directive("outsideClick",["$document",function(e){return{link:function(t,a,i){var o=function(e){var o=$(a).has(e.target).length>0,n=a[0]==e.target,l=o||n;l||t.$apply(i.outsideClick)};t.$watch(i.isActive,function(t,a){t!==a&&1==t?e.bind("click",o):t!==a&&0==t&&e.unbind("click",o)})}}}])}(),function(){"use strict";angular.module("app.widgets").directive("angucompleteAltOxdInlineDesc",["$q","$parse","$http","$sce","$timeout","$templateCache","$interpolate",function(e,t,a,i,o,n,l){function r(t,i,n,l){function r(e,a){e&&("object"==typeof e?(t.searchStr=k(e),T({originalObject:e})):"string"==typeof e&&e.length>0?t.searchStr=e:console&&console.error&&console.error("Tried to set "+(a?"initial":"")+" value of angucomplete to",e,"which is an invalid value"),M(!0))}function S(e){ge=null,t.hideResults(e),document.body.removeEventListener("click",S)}function D(e){return e.which?e.which:e.keyCode}function T(e){"function"==typeof t.selectedObject?t.selectedObject(e):t.selectedObject=e,M(e?!0:!1)}function x(e){return function(a){return t[e]?t[e](a):a}}function F(e){T({originalObject:e}),t.clearSelected&&(t.searchStr=null),t.clearResults()}function k(e,a){var i=t.titleField.split(",").map(function(t){return I(e,t)}).join(" ");return a?E(i):(e.employeeId&&(t.tempEmpId=e.employeeId,re.text(t.tempEmpId)),i)}function E(e){return e?$("<div>").text(e).html():""}function I(e,t){var a,i;if(t){a=t.split("."),i=e;for(var o=0;o<a.length;o++)i=i[a[o]]}else i=e;return i}function A(e,a){var i,o,n;if(n=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i"),e)return e.match&&e.replace||(e=e.toString()),o=e.match(n),i=o?e.replace(n,'<span class="'+t.matchClass+'">'+o[0]+"</span>"):e}function M(e){t.notEmpty=e,me=t.searchStr,t.fieldRequired&&l&&t.inputName&&l[t.inputName].$setValidity(de,e)}function L(e){var a=D(e);if(a!==m&&a!==c)if(a===d||a===p)e.preventDefault();else if(a===s)e.preventDefault(),!t.showDropdown&&t.searchStr&&t.searchStr.length>=se&&(J(),t.searching=!0,t.$applyAsync(he.update),Q(t.searchStr));else if(a===u)t.clearResults(),t.$apply(function(){le.val(t.searchStr)});else{if(0===se&&!t.searchStr)return;t.searchStr&&""!==t.searchStr?t.searchStr.length>=se&&(J(),ce&&o.cancel(ce),t.searching=!0,t.$applyAsync(he.update),ce=o(function(){Q(t.searchStr)},t.pause)):t.showDropdown=!1,me&&me!==t.searchStr&&!t.clearSelected&&t.$apply(function(){T()})}}function P(e){t.tempEmpId&&re.text(t.tempEmpId)}function N(e){!t.overrideSuggestions||t.selectedObject&&t.selectedObject.originalObject===t.searchStr||(e&&e.preventDefault(),o.cancel(ce),U(),F(t.searchStr))}function O(e){var t=getComputedStyle(e);return e.offsetHeight+parseInt(t.marginTop,10)+parseInt(t.marginBottom,10)}function R(){return pe.getBoundingClientRect().top+parseInt(getComputedStyle(pe).maxHeight,10)}function z(){return i[0].querySelectorAll(".angucomplete-row")[t.currentIndex]}function j(){return z().getBoundingClientRect().top-(pe.getBoundingClientRect().top+parseInt(getComputedStyle(pe).paddingTop,10))}function V(e){pe.scrollTop=pe.scrollTop+e}function G(){var e=t.results[t.currentIndex];t.matchClass?le.val(k(e.originalObject)):le.val(e.title)}function B(e){var a=D(e),i=null,o=null;a===p&&t.results?(t.currentIndex>=0&&t.currentIndex<t.results.length?(e.preventDefault(),t.selectResult(t.results[t.currentIndex])):(N(e),t.clearResults()),t.$apply()):a===s&&t.results?(e.preventDefault(),t.currentIndex+1<t.results.length&&t.showDropdown&&(t.$apply(function(){t.currentIndex++,G()}),fe&&(i=z(),R()<i.getBoundingClientRect().bottom&&V(O(i))))):a===d&&t.results?(e.preventDefault(),t.currentIndex>=1?(t.$apply(function(){t.currentIndex--,G()}),fe&&(o=j(),o<0&&V(o-1))):0===t.currentIndex&&t.$apply(function(){t.currentIndex=-1,le.val(t.searchStr)})):a===f?t.results&&t.results.length>0&&t.showDropdown?t.currentIndex===-1&&t.overrideSuggestions?N():(t.currentIndex===-1&&(t.currentIndex=0),t.selectResult(t.results[t.currentIndex]),t.$digest()):t.searchStr&&t.searchStr.length>0&&N():a===u&&e.preventDefault()}function q(e){return function(a,i,o,n){i||o||n||!a.data||(a=a.data),t.searching=!1,X(I(ae(a),t.remoteUrlDataField),e)}}function H(e,a,i,o){0!==a&&a!==-1&&(a||i||o||(a=e.status),t.remoteUrlErrorCallback?t.remoteUrlErrorCallback(e,a,i,o):console&&console.error&&console.error("http error"))}function U(){ue&&ue.resolve()}function W(i){var o={},n=t.remoteUrl+encodeURIComponent(i);t.remoteUrlRequestFormatter&&(o={params:t.remoteUrlRequestFormatter(i)},n=t.remoteUrl),t.remoteUrlRequestWithCredentials&&(o.withCredentials=!0),U(),ue=e.defer(),o.timeout=ue.promise,a.get(n,o).success(q(i)).error(H)}function Y(a){U(),ue=e.defer(),t.remoteApiHandler(a,ue.promise).then(q(a))["catch"](H)}function J(){t.showDropdown=oe,t.currentIndex=t.focusFirst?0:-1,t.results=[],t.showDetailedDropdown=!1,t.selectedOption=null,t.disableOnDetailedOptionSelection=!1}function K(e){var a,i,o,n,l=t.searchFields.split(","),r=[];for("undefined"!=typeof t.parseInput()&&(e=t.parseInput()(e)),a=0;a<t.localData.length;a++){for(i=!1,o=0;o<l.length;o++)n=I(t.localData[a],l[o])||"",i=i||n.toString().toLowerCase().indexOf(e.toString().toLowerCase())>=0;i&&(r[r.length]=t.localData[a])}t.searching=!1,X(r,e)}function Z(e,a,i){if(!i||"false"==t.autoMatch)return!1;for(var o in a)if(a[o].toLowerCase()===i.toLowerCase())return t.selectResult(e),!0;return!1}function Q(e){!e||e.length<se||(t.localData?t.$apply(function(){K(e)}):t.remoteApiHandler?Y(e):W(e))}function X(e,a){var i,o,n,l,r,s,c,d,m,u;if(e&&e.length>0)for(t.results=[],e.sort(function(e,t){var a=e.name.toUpperCase(),i=t.name.toUpperCase();return a<i?-1:a>i?1:0}),i=0;i<e.length;i++)t.titleField&&""!==t.titleField&&(l=r=k(e[i],!0)),o="",t.descriptionField&&(o=s=E(I(e[i],t.descriptionField))),n="",t.imageField&&(n=I(e[i],t.imageField)),d="",t.actionText&&""!==t.actionText&&(d=I(e[i],t.actionText)),t.matchClass&&(r=A(l,a),s=A(o,a)),c="",t.subTitleField&&(c=I(e[i],t.subTitleField)),m=!1,u=[],t.enableDetailedDropdown&&e[i].hasDetailedOption&&(m=!0,u=e[i].detailedOptions,t.selectAllDetailedDropdownOptions&&(u=_.map(u,function(e){return _.extend({},e,{checked:!0})}))),t.results[t.results.length]={title:r,subTitle:c,description:s,image:n,originalObject:e[i],actionText:d,hasDetailedOption:m,detailedOptions:u};else t.results=[];t.autoMatch&&1===t.results.length&&Z(t.results[0],{title:l,desc:o||"",actionText:d||""},t.searchStr)?t.showDropdown=!1:0!==t.results.length||ne?(t.showDropdown=!0,t.$applyAsync(he.update)):t.showDropdown=!1}function ee(){t.localData?X(t.localData,""):t.remoteApiHandler?Y(""):W("")}var te,ae,ie,oe,ne,le=i.find("input"),re=i.find("span"),se=g,ce=null,de=b,me=null,ue=null,pe=i[0].querySelector(".angucomplete-wrapper"),fe=!1,ge=null,he={update:function(){}};o(function(){var e=$(i).find(".angucomplete-alt-oxd-filter-input"),a=$(i).find(".angucomplete-dropdown"),o={};t.preventFlipToTop&&(o={modifiers:{flip:{enabled:!1}}}),he=new Popper(e,a,o)}),t.$on("updateLocalData",function(e,a){t.localData=a.localData}),i.on("mousedown",function(e){e.target.id?(ge=e.target.id,ge===t.id+"_dropdown"&&document.body.addEventListener("click",S),setTimeout(function(){e.target.focus()},200)):ge=e.target.className}),t.currentIndex=t.focusFirst?0:null,t.searching=!1,ie=t.$watch("initialValue",function(e){e&&(ie(),r(e,!0))}),t.$watch("fieldRequired",function(e,a){e!==a&&(e?M(me&&t.currentIndex!==-1?!0:!1):l[t.inputName].$setValidity(de,!0))}),t.$on("angucomplete-alt-oxd:clearInput",function(e,a){a&&a!==t.id||(t.searchStr=null,T(),M(!1),t.tempEmpId=null,re.text(t.tempEmpId),t.clearResults())}),t.$on("angucomplete-alt-oxd:changeInput",function(e,a,i){a&&a===t.id&&r(i)}),t.$on("openDropdown",function(){t.clearDetailedDropdownResults()}),t.$watch("selectedObject",function(e){"undefined"!=typeof t.selectedObject&&null!==t.selectedObject&&"undefined"!=typeof t.selectedObject.originalObject&&re.text(t.selectedObject.originalObject.employeeId)}),t.clearResults=function(){t.showDropdown=!1,t.results=[],pe&&(pe.scrollTop=0)},t.clearDetailedDropdownResults=function(){t.showDropdown=!1,t.searchStr=null,t.selectedOption=!1,t.showDetailedDropdown=!1,t.disableOnDetailedOptionSelection=!1,t.results=[],pe&&(pe.scrollTop=0),window.removeEventListener("blue",ve)},t.detailedDropdownOkAction=function(){T(t.selectedOption),t.clearDetailedDropdownResults()},t.detailedDropdownOutsideClick=function(e){t.clearDetailedDropdownResults()},t.onFocusHandler=function(){t.focusIn&&t.focusIn(),0!==se||t.searchStr&&0!==t.searchStr.length||(t.currentIndex=t.focusFirst?0:t.currentIndex,t.showDropdown=!0,t.$applyAsync(he.update),ee())},t.hideResults=function(){ge&&(ge===t.id+"_dropdown"||ge.indexOf("angucomplete")>=0)?ge=null:(te=o(function(){t.showDetailedDropdown||t.clearResults(),t.initialValue||re.text(""),t.$apply(function(){t.searchStr&&t.searchStr.length>0&&le.val(t.searchStr)})},y),U(),t.focusOut&&t.focusOut(),t.overrideSuggestions&&t.searchStr&&t.searchStr.length>0&&t.currentIndex===-1&&N())},t.resetHideResults=function(){te&&o.cancel(te)},t.hoverRow=function(e){t.currentIndex=e};var ve=function(){setTimeout(function(){"IFRAME"===document.activeElement.tagName&&t.clearDetailedDropdownResults()})};t.selectResult=function(e){t.matchClass&&(e.title=k(e.originalObject),e.description=I(e.originalObject,t.descriptionField)),t.clearSelected?t.searchStr=null:t.searchStr=e.title,e.hasDetailedOption&&(t.showDetailedDropdown=!0,window.addEventListener("blur",ve)),t.enableDetailedDropdown&&e.hasDetailedOption?(t.searchStr=e.title,t.disableOnDetailedOptionSelection=!0,t.selectedOption=e,setTimeout(function(){$(window).scrollTop($(window).scrollTop()+1)})):(T("object"==typeof e&&e.originalObject?e.originalObject:e),t.clearResults())},t.inputChangeHandler=function(e){return e.length<se?(U(),t.clearResults()):0===e.length&&0===se&&(t.searching=!1,ee()),t.inputChanged&&(e=t.inputChanged(e)),re.text(""),e},t.fieldRequiredClass&&""!==t.fieldRequiredClass&&(de=t.fieldRequiredClass),t.minlength&&""!==t.minlength&&(se=parseInt(t.minlength,10)),t.pause||(t.pause=v),t.clearSelected||(t.clearSelected=!1),t.overrideSuggestions||(t.overrideSuggestions=!1),t.fieldRequired&&l&&M(t.initialValue?!0:!1),t.inputType=n.type?n.type:"text",t.textSearching=n.textSearching?n.textSearching:C,t.textNoResults=n.textNoResults?n.textNoResults:w,oe="false"!==t.textSearching,ne="false"!==t.textNoResults,t.maxlength=n.maxlength?n.maxlength:h,le.on("keydown",B),le.on("keyup",L),le.on("blur",P),ae=x("remoteUrlResponseFormatter"),o(function(){var e=getComputedStyle(pe);fe=e.maxHeight&&"auto"===e.overflowY})}var s=40,c=39,d=38,m=37,u=27,p=13,f=9,g=1,h=524288,v=500,y=200,b="autocomplete-required",C="Searching...",w="No results found",S="/angucomplete-alt-oxd-inline-desc/index.html";return n.put(S,'\n    <div class="angucomplete-holder" ohrm-disable-animation ng-class="{\'angucomplete-dropdown-visible\': showDropdown}">\n      <input id="{{id}}_value" name="{{inputName}}" ng-class="{\'angucomplete-input-not-empty\': notEmpty, \'has-muted-title\':showDetailedDropdown, \'angucomplete-alt-oxd-filter-input\': true}"\n        ng-model="searchStr" ng-disabled="disableInput || disableOnDetailedOptionSelection" type="{{inputType}}" placeholder="{{placeholder}}"\n        maxlength="{{maxlength}}" ng-focus="onFocusHandler()" class="{{inputClass}}" ng-focus="resetHideResults()" ng-blur="hideResults($event)"\n        autocapitalize="off" autocorrect="off" autocomplete="off" ng-change="inputChangeHandler(searchStr)"/>\n      <div class="angucomplete-title angucomplete-title-muted angucomplete-title-muted-selected" ng-if="showDetailedDropdown">\n        {{ selectedOption.actionText }}\n      </div>\n      <div id="{{id}}_dropdown" class="angucomplete-dropdown" ng-show="showDropdown" outside-click="detailedDropdownOutsideClick($event)" is-active="showDetailedDropdown">\n        <div class="angucomplete-wrapper" ng-class="{\'detailed-dropdown-enabled\': showDetailedDropdown}">\n          <div class="angucomplete-searching" ng-show="searching" ng-bind="textSearching"></div>\n          <div class="angucomplete-searching angucomplete-alt-oxd-no-result" ng-show="!searching && (!results || results.length == 0)" ng-bind="textNoResults"></div>\n          <div ng-show="!showDetailedDropdown" class="angucomplete-row" ng-repeat="result in results" ng-click="selectResult(result)" ng-mouseenter="hoverRow($index)"\n            ng-class="{\'angucomplete-selected-row\': $index == currentIndex}">\n            <div class="title-section" ng-class="{\'reduce-line-height\': {{(subTitleField !== \'\') && (subTitleField !== undefined)}}}">\n              <div class="angucomplete-content-wrapper" ng-class="{\'action-text-available\': result.actionText}">\n                <div ng-if="imageField" class="angucomplete-image-holder">\n                  <img ng-if="result.image && result.image != \'\'" ng-src="{{result.image}}" class="angucomplete-image"/>\n                  <div ng-if="!result.image && result.image != \'\'" class="angucomplete-image-default"></div>\n                </div>\n                <span class="angucomplete-title" ng-if="matchClass" ng-bind-html="result.title"></span>\n              </div>\n              <div class="angucomplete-title" ng-if="!matchClass">{{ result.title }}</div>\n              <div class="angucomplete-title angucomplete-title-muted" ng-if="result.actionText">{{ result.actionText }}</div>\n              <span ng-if="matchClass && result.description && result.description != \'\'" class="truncate angucomplete-description" ng-bind-html="result.description"></span>\n              <div ng-if="!matchClass && result.description && result.description != \'\'" class="truncate angucomplete-description">{{result.description}}</div>\n            </div>\n            <span class="sub-title-section" ng-if="result.subTitle">{{result.subTitle}}</span>\n          </div>\n          <div ng-show="showDetailedDropdown" class="angucomplete-row angucomplete-row-col-2" ng-repeat="detailedOption in selectedOption.detailedOptions">\n            <div class="title-section justify-left">\n              <div class="custom-control custom-checkbox">\n                <input class="custom-control-input custom-checkbox" id="checkbox_ohrmList_chkSelectRecord_{{$index}}" ng-model="detailedOption.checked" class="form-control"\n                  type="checkbox" ng-checked="detailedOption.checked">\n                <label class="custom-control-label detailed-options" for="checkbox_ohrmList_chkSelectRecord_{{$index}}">\n                  <span ng-if="(detailedOption.display_name | translate).length > 57" class="tooltipped" data-tooltip="{{detailedOption.display_name | translate}}" data-position="top">{{detailedOption.display_name | translate}}</span>\n                  <span ng-if="(detailedOption.display_name | translate).length < 57">{{detailedOption.display_name | translate}}</span>\n                </label>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div ng-show="showDetailedDropdown" class="modal-footer">\n          <button ng-click="clearDetailedDropdownResults()" class="btn btn-text">{{"Cancel" | translate}}</button>\n          <button ng-click="detailedDropdownOkAction()" class="btn btn-secondary">{{"Add" | translate}}</button>\n        </div>\n      </div>\n    </div>'),{restrict:"EA",require:"^?form",scope:{selectedObject:"=",disableInput:"=",initialValue:"=",localData:"=",remoteUrlRequestFormatter:"=",remoteUrlRequestWithCredentials:"@",remoteUrlResponseFormatter:"=",remoteUrlErrorCallback:"=",remoteApiHandler:"=",id:"@",type:"@",placeholder:"@",remoteUrl:"@",remoteUrlDataField:"@",titleField:"@",descriptionField:"@",imageField:"@",subTitleField:"@",inputClass:"@",pause:"@",searchFields:"@",minlength:"@",matchClass:"@",clearSelected:"@",overrideSuggestions:"@",fieldRequired:"=",fieldRequiredClass:"@",inputChanged:"=",autoMatch:"@",focusOut:"&",focusIn:"&",inputName:"@",focusFirst:"@",parseInput:"&",preventFlipToTop:"<",actionText:"@",enableDetailedDropdown:"=",selectAllDetailedDropdownOptions:"="},templateUrl:function(e,t){return t.templateUrl||S},compile:function(e){var t=l.startSymbol(),a=l.endSymbol();if("{{"!==t||"}}"!==a){var i=e.html().replace(/\{\{/g,t).replace(/\}\}/g,a);e.html(i)}return r}}}])}(),function(){"use strict";angular.module("app.widgets").directive("angucompleteAltOxd",["$q","$parse","$http","$sce","$timeout","$templateCache","$interpolate",function(e,t,a,i,o,n,l){function r(t,i,n,l){function r(e,a){e&&("object"==typeof e?(t.searchStr=F(e),D({originalObject:e})):"string"==typeof e&&e.length>0?t.searchStr=e:console&&console.error&&console.error("Tried to set "+(a?"initial":"")+" value of angucomplete to",e,"which is an invalid value"),A(!0))}function _(e){fe=null,t.hideResults(e),document.body.removeEventListener("click",_)}function S(e){return e.which?e.which:e.keyCode}function D(e){"function"==typeof t.selectedObject?t.selectedObject(e):t.selectedObject=e,A(e?!0:!1)}function T(e){return function(a){return t[e]?t[e](a):a}}function x(e){D({originalObject:e}),t.clearSelected&&(t.searchStr=null),W()}function F(e,a){var i=t.titleField.split(",").map(function(t){return E(e,t)}).filter(Boolean).join(" ");return a?k(i):(e.employeeId&&(t.tempEmpId=e.employeeId,le.text(t.tempEmpId)),i)}function k(e){return e?$("<div>").text(e).html():""}function E(e,t){var a,i;if(t){a=t.split("."),i=e;for(var o=0;o<a.length;o++)i=i[a[o]]}else i=e;return i}function I(e,a){var i,o,n;if(n=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i"),e)return e.match&&e.replace||(e=e.toString()),o=e.match(n),i=o?e.replace(n,'<span class="'+t.matchClass+'">'+o[0]+"</span>"):e}function A(e){t.notEmpty=e,de=t.searchStr,t.fieldRequired&&l&&t.inputName&&l[t.inputName].$setValidity(ce,e)}function M(e){var a=S(e);if(a!==m&&a!==c)if(a===d||a===p)e.preventDefault();else if(a===s)e.preventDefault(),!t.showDropdown&&t.searchStr&&t.searchStr.length>=re&&(Y(),t.searching=!0,t.$applyAsync(ge.update),Z(t.searchStr));else if(a===u)W(),t.$apply(function(){ne.val(t.searchStr)});else{if(0===re&&!t.searchStr)return;t.searchStr&&""!==t.searchStr?t.searchStr.length>=re&&(Y(),se&&o.cancel(se),t.searching=!0,t.$applyAsync(ge.update),se=o(function(){Z(t.searchStr)},t.pause)):t.showDropdown=!1,de&&de!==t.searchStr&&!t.clearSelected&&t.$apply(function(){D()})}}function L(e){!t.overrideSuggestions||t.selectedObject&&t.selectedObject.originalObject===t.searchStr||(e&&e.preventDefault(),o.cancel(se),q(),x(t.searchStr))}function P(e){var t=getComputedStyle(e);return e.offsetHeight+parseInt(t.marginTop,10)+parseInt(t.marginBottom,10)}function N(){return ue.getBoundingClientRect().top+parseInt(getComputedStyle(ue).maxHeight,10)}function O(){return i[0].querySelectorAll(".angucomplete-row")[t.currentIndex]}function R(){return O().getBoundingClientRect().top-(ue.getBoundingClientRect().top+parseInt(getComputedStyle(ue).paddingTop,10))}function z(e){ue.scrollTop=ue.scrollTop+e}function j(){var e=t.results[t.currentIndex];t.matchClass?ne.val(F(e.originalObject)):ne.val(e.title)}function V(e){var a=S(e),i=null,o=null;a===p&&t.results?(t.currentIndex>=0&&t.currentIndex<t.results.length?(e.preventDefault(),t.selectResult(t.results[t.currentIndex])):(L(e),W()),t.$apply()):a===s&&t.results?(e.preventDefault(),t.currentIndex+1<t.results.length&&t.showDropdown&&(t.$apply(function(){t.currentIndex++,j()}),pe&&(i=O(),N()<i.getBoundingClientRect().bottom&&z(P(i))))):a===d&&t.results?(e.preventDefault(),t.currentIndex>=1?(t.$apply(function(){t.currentIndex--,j()}),pe&&(o=R(),o<0&&z(o-1))):0===t.currentIndex&&t.$apply(function(){t.currentIndex=-1,ne.val(t.searchStr)})):a===f?t.results&&t.results.length>0&&t.showDropdown?t.currentIndex===-1&&t.overrideSuggestions?L():(t.currentIndex===-1&&(t.currentIndex=0),t.selectResult(t.results[t.currentIndex]),t.$digest()):t.searchStr&&t.searchStr.length>0&&L():a===u&&e.preventDefault()}function G(e){return function(a,i,o,n){i||o||n||!a.data||(a=a.data),t.searching=!1,Q(E(te(a),t.remoteUrlDataField),e)}}function B(e,a,i,o){0!==a&&a!==-1&&(a||i||o||(a=e.status),t.remoteUrlErrorCallback?t.remoteUrlErrorCallback(e,a,i,o):console&&console.error&&console.error("http error"))}function q(){me&&me.resolve()}function H(i){var o={},n=t.remoteUrl+encodeURIComponent(i);t.remoteUrlRequestFormatter&&(o={params:t.remoteUrlRequestFormatter(i)},n=t.remoteUrl),t.remoteUrlRequestWithCredentials&&(o.withCredentials=!0),q(),me=e.defer(),o.timeout=me.promise,a.get(n,o).success(G(i)).error(B)}function U(a){q(),me=e.defer(),t.remoteApiHandler(a,me.promise).then(G(a))["catch"](B)}function W(){t.showDropdown=!1,t.results=[],ue&&(ue.scrollTop=0)}function Y(){t.showDropdown=ie,t.currentIndex=t.focusFirst?0:-1,t.results=[]}function J(e){var a,i,o,n,l=t.searchFields.split(","),r=[];for("undefined"!=typeof t.parseInput()&&(e=t.parseInput()(e)),a=0;a<t.localData.length;a++){for(i=!1,o=0;o<l.length;o++)n=E(t.localData[a],l[o])||"",i=i||n.toString().toLowerCase().indexOf(e.toString().toLowerCase())>=0;i&&(r[r.length]=t.localData[a])}t.searching=!1,Q(r,e)}function K(e,a,i){if(!i)return!1;for(var o in a)if(a[o].toLowerCase()===i.toLowerCase())return t.selectResult(e),!0;return!1}function Z(e){!e||e.length<re||(t.localData?t.$apply(function(){J(e)}):t.remoteApiHandler?U(e):H(e))}function Q(e,a){var i,o,n,l,r,s,c;if(e&&e.length>0)for(t.results=[],i=0;i<e.length;i++)t.titleField&&""!==t.titleField&&(l=r=F(e[i],!0)),o="",t.descriptionField&&(o=s=k(E(e[i],t.descriptionField))),n="",t.imageField&&(n=E(e[i],t.imageField)),t.matchClass&&(r=I(l,a),s=I(o,a)),c="",t.subTitleField&&(c=E(e[i],t.subTitleField)),t.results[t.results.length]={title:r,subTitle:c,description:s,image:n,originalObject:e[i]};else t.results=[];t.autoMatch&&1===t.results.length&&K(t.results[0],{title:l,desc:o||""},t.searchStr)?t.showDropdown=!1:0!==t.results.length||oe?(t.showDropdown=!0,t.$applyAsync(ge.update)):t.showDropdown=!1}function X(){t.localData?Q(t.localData,""):t.remoteApiHandler?U(""):H("")}var ee,te,ae,ie,oe,ne=i.find("input"),le=i.find("span"),re=g,se=null,ce=b,de=null,me=null,ue=i[0].querySelector(".angucomplete-wrapper"),pe=!1,fe=null,ge={update:function(){}};o(function(){var e=$(i).find(".angucomplete-alt-oxd-filter-input"),a=$(i).find(".angucomplete-dropdown"),o={};t.preventFlipToTop&&(o={modifiers:{flip:{enabled:!1}}}),ge=new Popper(e,a,o)}),i.on("mousedown",function(e){e.target.id?(fe=e.target.id,fe===t.id+"_dropdown"&&document.body.addEventListener("click",_)):fe=e.target.className}),t.currentIndex=t.focusFirst?0:null,t.searching=!1,ae=t.$watch("initialValue",function(e){e&&(ae(),r(e,!0))}),t.$watch("fieldRequired",function(e,a){e!==a&&(e?A(de&&t.currentIndex!==-1?!0:!1):l[t.inputName].$setValidity(ce,!0))}),t.$on("angucomplete-alt-oxd:clearInput",function(e,a){a&&a!==t.id||(t.searchStr=null,D(),A(!1),t.tempEmpId=null,le.text(t.tempEmpId),W())}),t.$on("angucomplete-alt-oxd:changeInput",function(e,a,i){a&&a===t.id&&r(i)}),t.$watch("selectedObject",function(e){"undefined"!=typeof t.selectedObject&&null!==t.selectedObject&&"undefined"!=typeof t.selectedObject.originalObject&&le.text(t.selectedObject.originalObject.employeeId)}),t.onFocusHandler=function(){t.focusIn&&t.focusIn(),0!==re||t.searchStr&&0!==t.searchStr.length||(t.currentIndex=t.focusFirst?0:t.currentIndex,t.showDropdown=!0,t.$applyAsync(ge.update),X())},t.hideResults=function(){fe&&(fe===t.id+"_dropdown"||fe.indexOf("angucomplete")>=0)?fe=null:(ee=o(function(){W(),t.initialValue||le.text(""),t.$apply(function(){t.searchStr&&t.searchStr.length>0&&ne.val(t.searchStr),t.tempEmpId&&t.tempEmpId.length>0&&le.text(t.tempEmpId)})},y),q(),t.focusOut&&t.focusOut(),t.overrideSuggestions&&t.searchStr&&t.searchStr.length>0&&t.currentIndex===-1&&L())},t.resetHideResults=function(){ee&&o.cancel(ee)},t.hoverRow=function(e){t.currentIndex=e},t.selectResult=function(e){t.matchClass&&(e.title=F(e.originalObject),e.description=E(e.originalObject,t.descriptionField)),t.clearSelected?t.searchStr=null:t.searchStr=e.title,D(e),W()},t.inputChangeHandler=function(e){return e.length<re?(q(),W()):0===e.length&&0===re&&(t.searching=!1,X()),t.inputChanged&&(e=t.inputChanged(e)),t.tempEmpId=null,le.text(t.tempEmpId),e},t.fieldRequiredClass&&""!==t.fieldRequiredClass&&(ce=t.fieldRequiredClass),t.minlength&&""!==t.minlength&&(re=parseInt(t.minlength,10)),t.pause||(t.pause=v),t.clearSelected||(t.clearSelected=!1),t.overrideSuggestions||(t.overrideSuggestions=!1),t.fieldRequired&&l&&A(t.initialValue?!0:!1),t.inputType=n.type?n.type:"text",t.textSearching=n.textSearching?n.textSearching:C,t.textNoResults=n.textNoResults?n.textNoResults:w,ie="false"!==t.textSearching,oe="false"!==t.textNoResults,t.maxlength=n.maxlength?n.maxlength:h,ne.on("keydown",V),ne.on("keyup",M),te=T("remoteUrlResponseFormatter"),o(function(){var e=getComputedStyle(ue);pe=e.maxHeight&&"auto"===e.overflowY})}var s=40,c=39,d=38,m=37,u=27,p=13,f=9,g=1,h=524288,v=500,y=200,b="autocomplete-required",C="Searching...",w="No results found",_="/angucomplete-alt-oxd/index.html";return n.put(_,'<div class="angucomplete-holder" ohrm-disable-animation ng-class="{\'angucomplete-dropdown-visible\': showDropdown}">  <input id="{{id}}_value" name="{{inputName}}" ng-class="{\'angucomplete-input-not-empty\': notEmpty, \'angucomplete-alt-oxd-filter-input\': true}" ng-model="searchStr" ng-disabled="disableInput" type="{{inputType}}" placeholder="{{placeholder}}" maxlength="{{maxlength}}" ng-focus="onFocusHandler()" class="{{inputClass}}" ng-focus="resetHideResults()" ng-blur="hideResults($event)" autocapitalize="off" autocorrect="off" autocomplete="off" ng-change="inputChangeHandler(searchStr)"/>  <div id="{{id}}_dropdown" class="angucomplete-dropdown" ng-show="showDropdown"><div class="angucomplete-wrapper">    <div class="angucomplete-searching" ng-show="searching" ng-bind="textSearching"></div>    <div class="angucomplete-searching angucomplete-alt-oxd-no-result" ng-show="!searching && (!results || results.length == 0)" ng-bind="textNoResults"></div>    <div class="angucomplete-row" ng-repeat="result in results" ng-click="selectResult(result)" ng-mouseenter="hoverRow($index)" ng-class="{\'angucomplete-selected-row\': $index == currentIndex}">      <div class="title-section" ng-class="{\'reduce-line-height\': {{(subTitleField !== \'\') && (subTitleField !== undefined)}}}">      <div ng-if="imageField" class="angucomplete-image-holder">        <img ng-if="result.image && result.image != \'\'" ng-src="{{result.image}}" class="angucomplete-image"/>        <div ng-if="!result.image && result.image != \'\'" class="angucomplete-image-default"></div>      </div>      <span class="angucomplete-title" ng-if="matchClass" ng-bind-html="result.title"></span>      <div class="angucomplete-title" ng-if="!matchClass">{{ result.title }}</div>      <span ng-if="matchClass && result.description && result.description != \'\'" class="truncate angucomplete-description" ng-bind-html="result.description"></span>      <div ng-if="!matchClass && result.description && result.description != \'\'" class="truncate angucomplete-description">{{result.description}}</div>      </div>      <span class="sub-title-section" ng-if="result.subTitle">{{result.subTitle}}</span>    </div>  </div></div>  <span id="angucomplete-title-temp-id" ng-class="{\'autoCompleteEmployeeIdBackgroundEmpty\': !notEmpty}" class="autoCompleteEmployeeIdBackground" ng-disabled="disableInput">{{temEmpId}}</span></div>'),{restrict:"EA",require:"^?form",scope:{selectedObject:"=",disableInput:"=",initialValue:"=",localData:"=",remoteUrlRequestFormatter:"=",remoteUrlRequestWithCredentials:"@",remoteUrlResponseFormatter:"=",remoteUrlErrorCallback:"=",remoteApiHandler:"=",id:"@",type:"@",placeholder:"@",remoteUrl:"@",remoteUrlDataField:"@",titleField:"@",descriptionField:"@",imageField:"@",subTitleField:"@",inputClass:"@",pause:"@",searchFields:"@",minlength:"@",matchClass:"@",clearSelected:"@",overrideSuggestions:"@",fieldRequired:"=",fieldRequiredClass:"@",inputChanged:"=",autoMatch:"@",focusOut:"&",focusIn:"&",inputName:"@",focusFirst:"@",parseInput:"&",preventFlipToTop:"<"},templateUrl:function(e,t){return t.templateUrl||_},compile:function(e){var t=l.startSymbol(),a=l.endSymbol();if("{{"!==t||"}}"!==a){var i=e.html().replace(/\{\{/g,t).replace(/\}\}/g,a);e.html(i)}return r}}}])}(),function(){"use strict";function e(e,t,a){return{restrict:"E",require:"ngModel",scope:{itemsInput:"=items",key:"=key",placeholder:"=placeholder",
ngDisabled:"=ngDisabled"},templateUrl:"app/widgets/oxd-multiselect-dropdown-text.html",link:function(e,i,o,n){function l(){u.cancel(),(u=_.debounce(e.setValidationStateCallback))()}function r(t){if("string"!=typeof t)for(var a in t)if(t.hasOwnProperty(a)){var i=e.items.filter(function(e){return e.id===t[a].id})[0];if(d(a),"undefined"!=typeof i){var o=a,n={id:o,token_id:t[a].token_id,claim_name:t[a].claim_name};e.selectedItems.push(n)}}}function s(){var t={};for(var a in e.selectedItems)t[a]={token_id:e.selectedItems[a].token_id,claim_name:e.selectedItems[a].claim_name};n.$setViewValue(t)}function c(e,t){var a=t.filter(function(t){return t.id==e});return a[0]}function d(t){var a=m(t);a>-1&&e.items.splice(a,1)}function m(t){for(var a=0;a<e.items.length;a+=1)if(e.items[a].id===t)return a;return-1}e.ctrl=n,e.setValidationState=l,e.setValidationStateCallback=function(){};var u=_.debounce(e.setValidationStateCallback);e.setDirty=function(){return n.$setDirty(),!0},e.textRequiredMessage=t.instant("Required"),e.textLengthMessage=a.textLengthExceedValidation.message(255),e.textDuplicateMessage=t.instant("Duplicate values are not allowed"),e.itemsInput.splice(0,0,{id:"",token_id:"",displayName:"-- "+t.instant("Select")+" --"}),e.items=angular.copy(e.itemsInput),e.defaultItems=angular.copy(e.items),e.selectedItems=[],n.$render=function(){r(n.$viewValue)},n.$isEmpty=function(){return 0==e.selectedItems.length||""==e.selectedItems[0].token_id&&""==e.selectedItems[0].claim_name},e.removeItem=function(t){e.selectedItems=e.selectedItems.filter(function(a){return a.id!=t||(e.items.push(c(t,e.selectedItems)),!1)}),s()},e.selectChange=function(e){s()},e.textChange=function(e){s()},e.addItem=function(){var t=!0;if(angular.forEach(e.selectedItems,function(e){(""==e.token_id||""==e.claim_name||e.claim_name.length>255)&&(t=!1)}),t){var a=parseInt(e.selectedItems[e.selectedItems.length-1].id)+1;e.selectedItems.push({id:a.toString(),token_id:"",claim_name:""}),s()}},e.isDuplicateToken=function(t){var a=0;for(var i in e.selectedItems)""!=e.selectedItems[i].token_id&&e.selectedItems[i].token_id==t&&a++;return!1},e.isDuplicateName=function(t){var a=0;for(var i in e.selectedItems)""!=e.selectedItems[i].claim_name&&e.selectedItems[i].claim_name==t&&a++;return a>1}}}}angular.module("app.widgets").directive("oxdMultiselectDropdownText",e),e.$inject=["$document","$translate","formValidationHelper"]}(),function(){"use strict";function e(e,t,a,i){return{restrict:"E",require:"ngModel",scope:{itemsInput:"=items",treeStructure:"=treeStructure",sorting:"=sorting",key:"=key",placeholder:"=placeholder",showSearchIcon:"=showSearchIcon",noSearchResultFoundText:"=noSearchResultFoundText",ngDisabled:"=ngDisabled"},templateUrl:"app/widgets/oxd-multiselect.html",link:function(a,o,n,l){function r(){b.cancel(),(b=_.debounce(a.setValidationStateCallback))()}function s(e){$(document).on("click.oxdMultiselectDismiss."+a.dropDownId,function(t){(!$(t.target).closest(".multi-select-container").length||t.hasOwnProperty("dropDownId")&&t.dropDownId!=a.dropDownId)&&e.bootstrapDropdown("hide")})}function c(){a.key&&a.key.length>0?a.setValidationStateCallback=function(){a.$applyAsync(u(!0,!0))}:a.setValidationStateCallback=function(){a.$applyAsync(u(!1,!0))}}function d(){a.key&&a.key.length>0?a.setValidationStateCallback=function(){a.$applyAsync(u(!0,!1))}:a.setValidationStateCallback=function(){a.$applyAsync(u(!1,!1))}}function m(e){0===a.selectedItems.length&&""!==e&&void 0!==e?d():c()}function u(e,i){return function(){if(e){var o=i;i||(o=t.instant("Invalid")),a.$parent.$broadcast("schemaForm.error."+a.key[0],"invalidSearchString",o)}else l.$setValidity("invalidSearchString",i);a.setValidationStateCallback=function(){}}}function p(e){if("string"!=typeof e)for(var t in e)if(e.hasOwnProperty(t)){var i=a.items.filter(function(e){return e.id===t})[0];if(v(t),"undefined"!=typeof i){var o={id:t,name:e[t]};"undefined"!=typeof i.employeeId&&(o.employeeId=i.employeeId),i.displayValue&&(o.displayValue=i.displayValue),a.selectedItems.push(o)}}}function f(){var e={};for(var t in a.selectedItems)e[a.selectedItems[t].id]=a.selectedItems[t].name;l.$setViewValue(e)}function g(e,t){return a.treeStructure||e&&e.sort(function(e,a){return e[t].toLowerCase()<a[t].toLowerCase()?-1:e[t].toLowerCase()>a[t].toLowerCase()?1:0}),e}function h(e,t){var a=t.filter(function(t){return t.id==e});return a[0]}function v(e){var t=y(e);t>-1&&a.items.splice(t,1)}function y(e){for(var t=0;t<a.items.length;t+=1)if(a.items[t].id===e)return t;return-1}a.ctrl=l,a.setValidationState=r,a.setValidationStateCallback=function(){};var b=_.debounce(a.setValidationStateCallback);a.setDirty=function(){return l.$setDirty(),!0},g=a.sorting===!1?function(e){return e}:g,a.items=g(angular.copy(a.itemsInput),"name"),a.defaultItems=angular.copy(a.items),a.noResultsFoundObject={id:"",name:a.noSearchResultFoundText?t.instant(a.noSearchResultFoundText):t.instant("No results found")};var C=Math.random().toString(36).substring(7);a.dropDownId="dropdown-multyselect-"+C,o.find("input.multiselect-autocomplete").attr("data-activates","dropdown-multyselect-"+C),o.find("ul.dropdown-content").attr("id","dropdown-multyselect-"+C),e.ready(function(){var e=o.find("input.multiselect-autocomplete");e.bootstrapDropdown(),$(document).on("ohrm.oxd.date.picker.open",function(t){e.bootstrapDropdown("hide")}),e.click(function(){e.trigger({type:"click.oxdMultiselectDismiss",dropDownId:a.dropDownId})}),e.parent().on("show.bs.dropdown",function(){s(e)}),e.parent().on("hide.bs.dropdown",function(){$(document).off("click.oxdMultiselectDismiss."+a.dropDownId)})}),a.$parent.$on("removeItemSelected",function(e,t){setTimeout(function(){a.removeItem(t.countryId)})}),a.$watch("scope.itemsInput",function(e,t){}),a.$watch(function(){return l.$modelValue},function(e){"object"==typeof e&&0==Object.keys(e).length&&(a.selectedItems=[])}),a.selectedItems=[],a.filteredList=[],l.$render=function(){p(l.$viewValue)},l.$isEmpty=function(){return 0==a.selectedItems.length},a.selectItem=function(e,t){if(t===a.noResultsFoundObject)return e.stopPropagation(),!1;var i=t.id,n=h(i,a.items);return"undefined"!=typeof n&&(a.selectedItems.push(n),v(i),a.input_name="",a.key&&a.key.length>0&&a.$parent.$broadcast("schemaForm.error."+a.key[0],"invalidSearchString",!0),f(),$(o.find("input.multiselect-autocomplete")).bootstrapDropdown("hide"),m(""),void r())},a.removeItem=function(e){if(a.selectedItems=a.selectedItems.filter(function(t){return t.id!=e||(a.items.push(h(e,a.selectedItems)),a.items=g(a.items,"name"),!1)}),a.treeStructure){a.items=angular.copy(a.defaultItems);for(var t in a.selectedItems)a.selectedItems.hasOwnProperty(t)&&v(a.selectedItems[t].id)}f(),m(a.input_name),r()},a.filterItems=function(e){var t=[],i=0;"undefined"==typeof e&&(e="");for(var n in a.items)if(a.items[n].name.toLowerCase().indexOf(e.toLowerCase())>=0?(t.push(a.items[n]),i++):"undefined"!=typeof a.items[n].employeeId&&a.items[n].employeeId.toLowerCase().indexOf(e.toLowerCase())>=0&&(t.push(a.items[n]),i++),50==i)break;t.length||t.push(a.noResultsFoundObject),m(e),a.filteredList=t,a.$applyAsync(function(){$(o.find("input.multiselect-autocomplete")).bootstrapDropdown("update")})},a.getStyledName=function(e){var t=e.displayValue?e.displayValue:e.name;t=i("sanitizehtml")(t);var o;if(e.employeeId&&(o=i("sanitizehtml")(e.employeeId)),e===a.noResultsFoundObject)return"undefined"!=typeof o?t+'<span class="multi-select-employee-id truncate">'+o+"</span>":t;if(a.input_name){var n=t.toLowerCase().search(a.input_name.toLowerCase());if("undefined"!=typeof o){o.toLowerCase().search(a.input_name.toLowerCase())}return"undefined"!=typeof o?n!=-1?'<span class="multi-select-title">'+t.substr(0,n)+'<span class="match">'+t.substr(n,a.input_name.length)+"</span>"+t.substr(n+a.input_name.length,t.length)+'</span><span class="multi-select-employee-id truncate">'+o+"</span>":'<span class="multi-select-title">'+t+'</span><span class="multi-select-employee-id truncate">'+o+"</span>":'<span class="multi-select-title">'+t+"</span>"}return"undefined"!=typeof o?'<span class="multi-select-title">'+t+'</span><span class="multi-select-employee-id truncate">'+o+"</span>":'<span class="multi-select-title">'+t+"</span>"}}}}angular.module("app.widgets").directive("oxdMultiselect",e),e.$inject=["$document","$translate","$timeout","$filter"]}(),function(){"use strict";function e(e){return function(e,t){function a(e,t){return e.filter(function(e){return e.id===t})}for(var i=[],o=0;o<e.length;o++){var n=a(t,e[o].id);0===n.length&&i.push(e[o])}return i}}e.$inject=["input"],angular.module("app.widgets").filter("removeSelectedEmployeesFilter",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{filter:"=filter",name:"=name",modelValue:"=modelValue",template:"=template",formName:"=formName"},templateUrl:function(e,t){return t.template?t.template:"app/widgets/report-group-widget.html"},link:function(e,t,a){e.switchWidget=function(t){e.modelValue[e.name]=t},e.modelValue[e.name]||(e.modelValue[e.name]=e.filter.default_value?e.filter.default_value:Object.keys(e.filter.choices)[0]),e.isWidgetActive=function(t){return e.modelValue[e.name]===t},e.getWidgetLengthMultiplier=function(e){return"date_comparison"===e?2:1},e.randomInt=Math.floor(1e6*Math.random()+1);for(var i in e.filter.choices)e.filter.choices.hasOwnProperty(i)&&(e.modelValue[i]||(e.modelValue[i]=e.filter.dependents[i].default_value))}}}angular.module("app.widgets").directive("reportWidgetGroup",e),e.$inject=[]}(),angular.module("app.core").run(["$templateCache",function(e){e.put("app/core/404.html","<section id=dashboard-view class=mainbar></section>"),e.put("app/core/cell-bulk-assign-status.html",'<div ng-if="cell.data == \'N/A\'" class=progress style="width: 50%"><div class=indeterminate></div></div><span ng-if="(cell.data != \'N/A\') && ((cell.data.massage+\'\').length <= 70)">{{cell.data.massage}}</span> <span ng-if="(cell.data != \'N/A\') && ((cell.data.massage+\'\').length > 70)" data-qtip={{cell.data.massage|sanitize}} data-qtip-my="top center" data-qtip-persistent=false data-qtip-at="bottom center">{{cell.data.massage | limitTo:70}}...</span>'),e.put("app/core/cell-checkbox.html","<p><input type=checkbox class=filled-in id=\"{{name+'_'+rowid}}\" ng-click=cell.checkOnChange ng-model=data> <label for=\"{{name+'_'+rowid}}\"></label></p>"),e.put("app/core/cell-colored-pill.html",'<span ng-if="obj.priority != null"><span class=colored-pill-container><span class=colored-pill ng-style="{\'background-color\': obj.priority.color}">{{obj.priority.name|translate}}</span></span></span>'),e.put("app/core/cell-competency-profile-list-chip.html",'<div ng-if=data.state><div ng-if=data.state.isCorrupted class="chip list-chip error tooltipped" ng-attr-data-tooltip="{{\'No Sub Units Selected\'|translate}}" data-position=bottom>{{\'Error\'|translate}}</div><div ng-if="!data.state.isCorrupted && data.state.isIncomplete" class="chip list-chip warning">{{\'Incomplete\'|translate}}</div></div>'),e.put("app/core/cell-goal-name-hierarchical.html",'<span class=goal-with-progress-indicator-container><progress-indicator object=obj progress-params=listField.progressParams></progress-indicator><span class={{listField.logoClass}} ng-if="listField.showLogo && listField.showLogo(obj)">{{listField.logoText}}</span> <span ng-if="listField.showIcon && listField.showIcon(obj)" class="hierarchicalCellIconSpan right"><i class="material-icons hierarchicalCellIcon" oxd-tooltip data-placement=bottom title="{{listField.iconTooltip | translate}}">{{listField.iconImageName}}</i></span> <span class=tree-node-container ng-if="obj.parentId!==null"><span class="immediate-parent tree-node"><a ng-if="obj.immediateParent!==null && obj.immediateParent.allowedToView" ui-sref="{{::listField.getState(listField, obj, true)}}">{{ obj.immediateParent.name}}</a> <span ng-if="obj.immediateParent!==null && !obj.immediateParent.allowedToView">{{ obj.immediateParent.name}}</span></span><br ng-if="obj.immediateParent!==null"><span class="default combined tree-node"><a ng-if=obj.allowedToView ui-sref="{{::listField.getState(listField, obj, false)}}">{{obj.name}}</a> <span ng-if=!obj.allowedToView>{{obj.name}}</span><oxd-hint ng-if=obj.description hint={{obj.description}} icon=ohrm_info_bubble inline=true disable-html-escaping=true></oxd-hint></span></span> <span class=tree-node-container ng-if="obj.parentId==null"><span class="default simple tree-node"><a ng-if=obj.allowedToView ui-sref="{{::listField.getState(listField, obj, false)}}">{{obj.name}}</a> <span ng-if=!obj.allowedToView>{{obj.name}}</span><oxd-hint ng-if=obj.description hint={{obj.description}} icon=ohrm_info_bubble inline=true disable-html-escaping=true></oxd-hint></span></span></span>'),e.put("app/core/cell-history-event-name.html",'<span ng-if="obj.is_grayed_out == \'1\'" class="ohrm-tooltip-cell grayed-out-text tooltipped" data-position=bottom data-tooltip={{obj.tooltip}}>{{cell.data | translate}}</span> <span ng-if="obj.is_grayed_out != \'1\'">{{cell.data | translate}}</span>'),e.put("app/core/cell-icon-with-text-panal.html",'<div class="valign-wrapper {{cell.data.class ? cell.data.class : \'left\'}}"><span ng-if="cell.data.icon != null"><i class="material-icons {{cell.data.iconClass}}" style="margin-left: -3px;padding-right: 5px;">{{cell.data.icon}}</i></span> <span>{{cell.extracontroller.formatTextLable(cell.data.name)}}</span></div>'),e.put("app/core/cell-icon.html",'<span class={{listField.style}} ng-if="data != null"><i class="material-icons cell-icon" ng-if=!listField.tooltip>{{data}}</i> <i class="material-icons cell-icon" ng-if=listField.tooltip title="{{listField.tooltip.tooltipText(obj) | translate}}" oxd-tooltip data-placement={{listField.tooltip.position}}>{{data}}</i></span>'),e.put("app/core/cell-leave-list-action-panel.html",'<div class="left-align valign-wrapper right leave-list-action-icon-panel"><a class="tooltipped action-icon leave-list-action-icon-container" ng-if="(cell.data.data.LeaveRequestEmployeeNomineeState) && (cell.data.data.employeeNomineeEnabled || (cell.data.data.LeaveRequestEmployeeNominee && cell.data.data.LeaveRequestEmployeeNominee.length))" data-tooltip="{{\'Nominees\' | translate }} {{\'(\' + cell.data.data.LeaveRequestEmployeeNominee.length+\')\'}}" ng-click=cell.extracontroller.showNominee(cell.data.data) ng-class="cell.data.data.LeaveRequestEmployeeNominee && cell.data.data.LeaveRequestEmployeeNominee.length > 0 ? \'active-leave-list-action-icon\': \'inactive-leave-list-action-icon\'"><i class="material-icons valign" style="font-size: 14px; line-height: 24px;">oxd_multi_user</i></a> <a ng-if="cell.data.leave.attachment.id >0" class="tooltipped action-icon leave-list-action-icon-container active-leave-list-action-icon" data-tooltip="{{\'Download Attachment\' | translate}}" ng-click=cell.extracontroller.downloadAttachment(cell.data.leave.attachment.id)><div style="position: relative; display: inline-block"><i class="material-icons valign" style="font-size: 13.5px; line-height: 24px; color: white; display: block">oxd_attachment</i><div class="action-icon leave-list-action-icon-container" style="box-shadow: 0px 3px 3px rgba(0, 0, 0, 0.15); background-color: white;position: absolute; z-index: 100; padding: 3px; min-width: 15px;min-height: 15px; left: 9px; top: 20px"><i class="material-icons valign" style="color: #64728c !important; font-size: 10px;">oxd_download_small</i></div></div></a> <a ng-if="( (cell.data.data.leaveRequestAttachmentConfiguration.id && cell.data.data.leaveRequestAttachmentConfiguration.id != \'0\') && !cell.data.leave.attachment)" class="tooltipped action-icon leave-list-action-icon-container" style="cursor: default;" data-tooltip="{{\'Attachment Pending\' | translate}}"><i class="material-icons valign" style="font-size: 13.5px; line-height: 24px; color: #929baa;">oxd_attachment</i></a> <a class="tooltipped action-icon leave-list-action-icon-container" data-tooltip="{{ \'Comments\' | translate}}" ng-click=cell.extracontroller.showComments(cell.data.data,null) ng-class="( cell.data.data.recentlyAddedLeaveRequestComment || (cell.data.data.LeaveRequestComment && (cell.data.data.LeaveRequestComment.length > 0)) ) ? \'active-leave-list-action-icon\': \'inactive-leave-list-action-icon\'"><i class="material-icons valign" style="font-size: 14px; line-height: 24px;">ohrm_comment_oxd</i></a></div>'),e.put("app/core/cell-leave-list-actions.html",'<select ng-if=cell.data.showActions materializecss-select not-scrollable=true ng-change=cell.extracontroller.actionOnChange(cell.data.name,cell.data.isPastLeave,cell.data.leaveTypeId) ng-model=cell.extracontroller.listModel[cell.data.name]><option value>{{cell.data.emptyOption}}</option><option ng-repeat="option in cell.data.options track by option.id" value={{option.id}}>{{option.name | translate}}</option></select><i ng-if=!cell.data.showActions ng-click=cell.extracontroller.goToDetail(cell.data.name) class="material-icons action-icon tooltipped" data-tooltip="{{ \'Go to Detailed View\' | translate}}">more_horiz</i>'),e.put("app/core/cell-leave-list-balance.html",'<span class=net-leave-balance-content><div ng-if="cell.extracontroller.formatBalance(cell.data.id) == \'N/A\'" class=progress style="width: 50%"><div class=indeterminate></div></div><span ng-if="cell.extracontroller.formatBalance(cell.data.id)!= \'N/A\' && typeof (cell.extracontroller.formatBalance(cell.data.id).balance_data) !== \'undefined\' && !cell.isArray(cell.extracontroller.formatBalance(cell.data.id).balance_data)"><span ng-class="{\'leave-balance-link\': cell.extracontroller.isNetBalanceLink(cell.extracontroller.formatBalance(cell.data.id))}" ng-click="cell.extracontroller.showNetBalanceBreakDown($event, cell.data)">{{cell.extracontroller.formatBalance(cell.data.id).balance_data.net_balance}}</span></span></span>'),e.put("app/core/cell-leave-list-date-range.html",'<span ng-show="cell.data.from == cell.data.to && !cell.data.halfDay">{{cell.data.from | ohrmDateFilter}}</span> <span ng-show="cell.data.from == cell.data.to && cell.data.halfDay">{{cell.data.from | ohrmDateFilter}}</span> <span ng-show="cell.data.from == cell.data.to && cell.data.halfDay"><br>({{cell.data.time}}) {{cell.data.halfDayText | translate}}</span> <span ng-show="cell.data.from != cell.data.to">{{cell.data.from | ohrmDateFilter}} {{\'to\' | translate}}</span> <span ng-show="cell.data.from != cell.data.to"><br>{{cell.data.to | ohrmDateFilter}}</span>'),e.put("app/core/cell-leave-list-detail-actions.html",'<select ng-if="cell.data.options.length > 0" material-select not-scrollable=true ng-change=cell.extracontroller.actionOnChange(cell.data.name,cell.data.isPastLeave,cell.data.leaveTypeId) ng-model=cell.extracontroller.listModel[cell.data.name]><option value>{{cell.data.emptyOption}}</option><option ng-repeat="option in cell.data.options track by option.id" value={{option.id}}>{{option.name}}</option></select><span ng-if="cell.data.options.length == 0">&nbsp;&nbsp;&nbsp;&nbsp;</span>'),e.put("app/core/cell-leave-list-detail-balance.html",'<span class=net-leave-balance-content><span ng-class="{\'leave-balance-link\': cell.extracontroller.isNetBalanceLink(cell.data)}" ng-click="cell.extracontroller.showNetBalanceBreakDown($event, cell.data)">{{cell.data.netBalance}}</span></span>'),e.put("app/core/cell-leave-list-detail-comment.html",'<div ng-show=!cell.data.isOffDay class=valign-wrapper><span ng-if="cell.data.comment != false" class=valign>{{cell.data.comment}}</span> <img class="action-comment right-align tooltipped valign" data-tooltip="{{\'Comments\'|translate}}" src=images/pim/comment@2x.svg ng-click=cell.extracontroller.showComments(cell.extracontroller.leaveRequest.data,cell.data.data)></div>'),e.put("app/core/cell-leave-list-detail-unit.html",'<span class=net-leave-balance-content><span ng-class="{\'leave-balance-link\': cell.extracontroller.isNetBalanceLink(cell.data)}" ng-click="cell.extracontroller.showNetBalanceBreakDown($event, cell.data)">{{cell.data.durationUnit}}</span> <span class=timeline-container><a class="material-icons tooltipped" ng-if=cell.data.showBreakdown data-tooltip="{{\'Leave Expiry Timeline\'| translate}}" ng-click=cell.extracontroller.showBalance(cell.data)>history</a></span></span>'),e.put("app/core/cell-leave-list-unit.html",'<span class=net-leave-balance-content><div ng-if="cell.extracontroller.formatBalance(cell.data.id) == \'N/A\'" class=progress style="width: 50%"><div class=indeterminate></div></div><span ng-if="cell.extracontroller.formatBalance(cell.data.id)!= \'N/A\' && typeof (cell.extracontroller.formatBalance(cell.data.id).balance_data) !== \'undefined\' && !cell.isArray(cell.extracontroller.formatBalance(cell.data.id).balance_data)"><span ng-class="{\'leave-balance-link\': cell.extracontroller.isNetBalanceLink(cell.extracontroller.formatBalance(cell.data.id))}" ng-click="cell.extracontroller.showNetBalanceBreakDown($event, cell.data)">{{cell.data.LeaveType.durationUnit}}</span></span> <i ng-if="cell.extracontroller.formatBalance(cell.data.id)!= \'N/A\' && cell.isArray(cell.extracontroller.formatBalance(cell.data.id).balance_data)" class="material-icons action-icon tooltipped multi-period-balance-indicator" data-tooltip="{{\'Balance\'| translate}}" ng-click="cell.extracontroller.showOverlapBalance(cell.extracontroller.formatBalance(cell.data.id).balance_data, cell.data)">more_horiz</i> <span class=timeline-container><a class="material-icons action-icon tooltipped" ng-if=cell.extracontroller.formatBalance(cell.data.id).show_breakdown data-tooltip="{{\'Leave Expiry Timeline\'| translate}}" ng-click="cell.extracontroller.showBalance(cell.data)[\'balance_data\']">history</a></span></span>'),e.put("app/core/cell-lines.html",'<span ng-repeat="line in cell.data track by $index">{{line}}<span ng-if=!$last>,</span><br ng-if=!$last></span>'),e.put("app/core/cell-link.html",'<a class=break-word ng-if=url.url href={{url.url}} target=_blank style="text-decoration: underline">{{url.filename}}</a> <span class=break-word ng-if=!url.url>{{url.filename}}</span>'),e.put("app/core/cell-oxd-action-button-panel.html","<div class=oxd-action-button-panel><oxd-button-panel data=listField.iconButtons panel-id=rowid obj=obj></oxd-button-panel></div>"),e.put("app/core/cell-oxd-action-button.html",'<div class=oxd-list-action-button-holder><div ng-if="listField.allowedActionGetter(data).length == 1 && (!listField.isVisible || listField.isVisible(obj)) && !(listField.icon)" class="list-action-btn list-action {{listField.classForButton}}" ng-class="{disabled: (listField.isDisabled && listField.isDisabled(obj))}" ohrm-save-form="listField.onPerformListRowAction(obj, data, listField.allowedActionGetter(data)[0], $event)"><span class=truncate>{{listField.allowedActionGetter(data)[0] | translate}}</span><div ng-if=listField.hasDropdownIcon class=dropdown-toggle></div></div><button ng-if="listField.allowedActionGetter(data).length == 1 && (!listField.isVisible || listField.isVisible(obj)) && !!(listField.icon)" class="btn btn-feedback export-icon {{listField.classForButton}}" data-icon={{listField.icon}} ng-class="{disabled: (listField.isDisabled && listField.isDisabled(obj))}" ohrm-save-form="listField.onPerformListRowAction(obj, data, listField.allowedActionGetter(data)[0], $event)"><i class=material-icons>{{form.icon}}</i>{{ listField.allowedActionGetter(data)[0] | translate}}</button><div ng-if="listField.allowedActionGetter(data).length > 1" class="dropdown list-action"><button class="btn dropdown-toggle" data-toggle=dropdown>-- {{\'Select\' | translate}} --</button><ul class=dropdown-menu><li ng-repeat="action in listField.allowedActionGetter(data)" ng-if="!listField.isVisible || listField.isVisible(obj)" ng-click="listField.onPerformListRowAction(obj, data, action, $event)" class=dropdown-item><div><span>{{action | translate}}</span></div></li></ul></div><span class=error-message>{{(listField.errorMessageGetter && listField.errorMessageGetter(obj))?listField.errorMessageGetter(obj):\'\'}}</span></div>'),e.put("app/core/cell-oxd-hinted-cell.html",'<div class="break-word inline" ng-if="data.length > 500" data-qtip-class=oxd-hint data-qtip-tip-style="{corner: false}" data-qtip="{{\'<div ng-non-bindable>\' +(data| sanitizehtml) + \'</div>\'}}" data-qtip-my="center right" data-qtip-persistent=false data-qtip-at="center left">{{data | limitTo:500 }} ...</div><div class=break-word ng-if="data.length <= 500">{{data}}</div>'),e.put("app/core/cell-oxd-lengthy-tooltip.html","<span ng-if=\"cell.data.length > 250\" data-template=\"<div class='tooltip' role='tooltip'><div class='arrow'></div><div class='tooltip-inner tooltip-text-align tooltip-lg'></div></div>\" oxd-tooltip data-placement=bottom title={{cell.data}}>{{cell.data | limitTo:20 }}...</span> <span ng-if=\"(cell.data.length > 20 && cell.data.length <= 250)\" data-template=\"<div class='tooltip' role='tooltip'><div class='arrow'></div><div class='tooltip-inner tooltip-text-align tooltip-sm'></div></div>\" oxd-tooltip data-placement=bottom title={{cell.data}}>{{cell.data | limitTo:20 }}...</span> <span ng-if=\"cell.data.length <= 20\">{{cell.data}}</span>"),e.put("app/core/cell-oxd-multiple-values.html",'<div class=oxd-cell-multi-value><div class="oxd-cell-multi-value-value truncate" ng-repeat="value in cell.parseJson(data) track by $index">{{value}}</div></div>'),e.put("app/core/cell-oxd-profile-pic.html",'<div class=oxd-profile-pic style="background: transparent"><img class="circle list-photo" ng-if=cell.data ng-src=data:{{cell.data.type}};base64,{{cell.data.image}}> <img class="circle list-photo" ng-if=!cell.data ng-src=images/default-photo.png></div>'),e.put("app/core/cell-oxd-rounded-progress.html",'<i class=rounded-progress><div class="c100 p{{data > 100 ? 100 :data}}"><span>{{data}}%</span><div class=slice><div class=bar></div><div class=fill></div></div></div></i>'),e.put("app/core/cell-oxd-select.html",'<div class=oxd-list-select-holder ng-if=data><div class=dropdown ng-if=listField.readonly(obj)><div class="list-select-trigger readonly"><span class=dropdown-selected-value>{{data | translate}}</span></div></div><div class=dropdown ng-if=!listField.readonly(obj)><div class=list-select-trigger data-toggle=dropdown><span class=dropdown-selected-value>{{data | translate}}</span> <span class="material-icons dropdown-trigger-indicator">keyboard_arrow_down</span></div><ul class=dropdown-menu><li ng-repeat="option in listField.allowedOptionGetter(obj) track by $index" ng-click="listField.onOptionSelect(obj, option, $event)" class=dropdown-item><div><span>{{option.value | translate}}</span></div></li></ul></div><span class=error-message>{{(listField.errorMessageGetter && listField.errorMessageGetter(obj))?listField.errorMessageGetter(obj):\'\'}}</span></div>'),e.put("app/core/cell-oxd-status.html","<div class=oxd-status>{{data | translate}}</div>"),e.put("app/core/cell-oxd-value-with-description.html","<div class=oxd-cell-value-with-description><div class=main-value>{{cell.parseJson(data).mainValue}}</div><div ng-if=cell.parseJson(data).subValue class=sub-value>{{cell.parseJson(data).subValue}}</div><div ng-if=cell.parseJson(data).subValueHtml class=sub-value ng-bind-html=cell.trustAsHtmlContent(cell.parseJson(data).subValueHtml)></div></div>"),e.put("app/core/cell-oxd.html","<span class=break-word ng-if=!listField.newTabAllowed ng-class=\"{'oxd-list-cell-truncate': listField.truncate}\" oxd-list-cell-truncate=listField.truncate>{{data}}</span> <span class=break-word ng-if=listField.newTabAllowed ng-class=\"{'oxd-list-cell-truncate': listField.truncate}\" oxd-list-cell-truncate=listField.truncate><a ui-sref={{::listField.getState(obj)}}>{{data}}</a></span>"),e.put("app/core/cell-profile-pic.html",'<td ng-class style="background: transparent"><img class="circle list-photo" ng-if=cell.data ng-src=data:{{cell.data.type}};base64,{{cell.data.image}}> <img class="circle list-photo" ng-if=!cell.data ng-src=images/default-photo.png></td>'),e.put("app/core/cell-qtipped-cell.html",'<div class=break-word ng-if="data.length > 500" data-qtip="{{\'<div ng-non-bindable>\' +(data| sanitizehtml) + \'</div>\'}}" data-qtip-my="center right" data-qtip-persistent=false data-qtip-at="center left">{{data | limitTo:500 }} ...</div><div class=break-word ng-if="data.length <= 500">{{data}}</div>'),e.put("app/core/cell-rounded-progress.html",'<i style="display:inline-block; padding-left: 8px;"><div class="c100 p{{data > 100 ? 100 : data}} small"><span>{{data}}%</span><div class=slice><div class=bar></div><div class=fill></div></div></div></i>'),e.put("app/core/cell-sub-goal-name.html",'<span class=goal-with-progress-indicator-container><progress-indicator object=obj progress-params=listField.progressParams></progress-indicator><span class={{listField.logoClass}} ng-if="listField.showLogo && listField.showLogo(obj)">{{listField.logoText}}</span> <span class=tree-node-container><span class="default simple tree-node"><a ng-if=obj.allowedToView ui-sref="{{::listField.getState(listField, obj, false)}}">{{obj.name}}</a> <span ng-if=!obj.allowedToView>{{obj.name}}</span><oxd-hint ng-if=obj.description hint={{obj.description}} icon=ohrm_info_bubble inline=true disable-html-escaping=true></oxd-hint></span></span></span>'),e.put("app/core/cell-text-array.html",'<span ng-repeat="item in data track by $index" class={{item.class}}>{{item.value}}</span>'),e.put("app/core/cell-tooltip.html",'<span class="ohrm-tooltip-cell tooltipped" data-position=bottom data-tooltip={{cell.data}}>{{cell.data}}</span>'),e.put("app/core/cell-view-appraisals-action-panel.html",'<div class="valign-wrapper right"><span><i ng-if="cell.data.isReview && !cell.data.isSign && !cell.data.isAcknowledge" class="material-icons action-icon tooltipped" data-tooltip="{{ \'Review\' | translate }}" style="padding: 5px" ng-click=cell.extracontroller.reviewAppraisalAction(cell.data)>ohrm_contract</i> <i ng-if="!cell.data.isReview && cell.data.isSign && !cell.data.isAcknowledge" class="material-icons action-icon tooltipped" data-tooltip="{{ \'Sign\' | translate }}" style="padding: 5px" ng-click=cell.extracontroller.signAppraisalAction(cell.data)>ohrm_contract</i> <i ng-if="!cell.data.isReview && !cell.data.isSign && cell.data.isAcknowledge" class="material-icons action-icon tooltipped" data-tooltip="{{ \'Acknowledge\' | translate }}" style="padding: 5px" ng-click=cell.extracontroller.acknowledgeAppraisalAction(cell.data)>ohrm_contract</i> <i ng-if="(cell.data.isReview && cell.data.isSign) || (cell.data.isReview && cell.data.isAcknowledge)" ohrm-dropdown data-beloworigin=true class="material-icons action-icon appraisallist-row-action" style="padding: 5px; position: relative" data-hover=true data-constrainwidth=false data-activates=\'{{"appraisallist_appraisalActions_"+cell.data.id}}\'>ohrm_contract</i><ul ng-if="(cell.data.isReview && cell.data.isSign)" id=\'{{"appraisallist_appraisalActions_"+cell.data.id}}\' class=dropdown-content><li><a ng-click=cell.extracontroller.reviewAppraisalAction(cell.data)>{{ \'Review\' | translate }}</a></li><li><a ng-click=cell.extracontroller.signAppraisalAction(cell.data)>{{ \'Sign\' | translate }}</a></li></ul><ul ng-if="(cell.data.isReview && cell.data.isAcknowledge)" id=\'{{"appraisallist_appraisalActions_"+cell.data.id}}\' class=dropdown-content><li><a ng-click=cell.extracontroller.reviewAppraisalAction(cell.data)>{{ \'Review\' | translate }}</a></li><li><a ng-click=cell.extracontroller.acknowledgeAppraisalAction(cell.data)>{{ \'Acknowledge\' | translate }}</a></li></ul><i ng-if="(!cell.data.isReview && !cell.data.isSign && !cell.data.isAcknowledge)" style="margin-left: 34px"></i></span> <span ng-if=!cell.data.isMyAppraisal><i ng-if=cell.data.isSettings class="material-icons action-icon tooltipped" data-tooltip="{{ \'Settings\' | translate }}" style="padding: 5px" ng-click=cell.extracontroller.viewAppraisalSettings(cell.data)>settings</i> <i ng-if=!cell.data.isSettings style="margin-left: 34px"></i></span> <span><i ng-if=cell.data.isDownload class="material-icons action-icon tooltipped" data-tooltip="{{ \'Download\' | translate }}" style="padding: 5px" ng-click=cell.extracontroller.downloadAppraisalFile(cell.data)>file_download</i> <i ng-if=!cell.data.isDownload style="margin-left: 34px"></i></span></div>'),
e.put("app/core/cell-view-appraisals-completion-panel.html",'<i ng-if=cell.data.isReviewProgress class=tooltipped style="display:inline-block; padding-left: 8px; cursor: {{cell.data.completion.options.cursorType}}" ng-click=cell.extracontroller.showAppraisalStatus(cell.data) data-tooltip="{{ cell.data.completion.tooltip }}" data-position=bottom><div class="c100 p{{cell.data.completion.percentage}} small"><span>{{cell.data.completion.percentage}}%</span><div class=slice><div class=bar></div><div class=fill></div></div></div></i>'),e.put("app/core/cell.html","{{data}}"),e.put("app/core/crud-panel.html",'<div ng-if=listData.permission.read class=form-div><div ng-if=panelinfo.title class="row valign-wrapper col s12 form-section-heading"><span class="valign title col" ng-class="{\'s8\': !panelinfo.hideRecordCount, \'s12\': panelinfo.hideRecordCount}">{{panelinfo.title | translate}}</span> <span ng-hide=panelinfo.hideRecordCount style class="valign count col s2 offset-s2 right-align" ng-if="objs.length == 0">{{\'0 records found\'| translate}}</span> <span ng-hide=panelinfo.hideRecordCount style=padding-right:45px class="valign count col s2 offset-s2 right-align" ng-if="objs.length > 0">{{objs.length + \' \'}}{{\'record(s)\' | translate}}</span></div><div class=list-container><list objs=objs listdata=listData initialsortfield=initialsortfield initialsortorder=initialsortorder extracontroller=extracontroller></list></div></div>'),e.put("app/core/forbidden.html","<section id=dashboard-view class=mainbar></section>"),e.put("app/core/help-button.html",'<a ng-hide=help.disableHelp class="help-button ng-hide action-icon tooltipped" ng-click=help.help() data-tooltip={{help.localizedTextForHelp}} data-position=bottom enter-key-input tabindex=0><i class=material-icons>ohrm_help</i></a>'),e.put("app/layout/external-link.html",'<div ohrm-click-outside=closePanel() oncontextmenu="return false" unique-name=external-link class=external-link-container ng-if=externalLinkArray.length><a class="external-link-button tooltipped" href=javascript:void(0) data-tooltip="{{ localizedExternalLinksText }}" data-position=bottom ng-click=togglePanel()><i class=material-icons>oxd_external_link</i></a><div class=external-link-panel ng-class="{\'panel-opened\': opened}"><div class=external-link-panel-header><span class=external-link-panel-header-text>{{localizedExternalLinksText}}</span></div><div class=external-link-panel-body><div ng-repeat="externalLink in externalLinkArray track by externalLink.id" class=external-menu-item><a class="external-menu-item-link truncate" href={{externalLink.linkAttributes.href}} rel="noopener noreferrer" target={{externalLink.linkAttributes.target}} ng-click=closePanel()>{{externalLink.menuTitle}}</a></div></div></div></div>'),e.put("app/layout/my-shortcut.html",'<div ohrm-click-outside=closePanel() unique-name=my-shortcut-panel><a class="action-icon my-shortcut-button tooltipped" data-tooltip="{{ localizedTextForMyShortcuts }}" data-position=bottom ng-click=togglePanel() enter-key-input tabindex=0><i class=material-icons>oxd_shortcut</i></a><div class=my-shortcut-panel ng-if="quickAccessItems.length || canAddShortcut" ng-class="{\'panel-opened\': opened}"><div class=shortcut-panel-header><span class=material-icons>ohrm_thin_bolt</span> <span class=shortcut-panel-header-text>{{localizedTextForMyShortcuts | translate}}</span> <a class="material-icons shortcut-panel-header-configure-icon" ng-click=configure() ng-if=showConfigIcon>settings</a></div><div class=shortcut-panel-body><div ng-if=canAddShortcut><div class=shortcut-item-button ng-click=addNewShortcut() enter-key-input tabindex=0><span class="shortcut-icon-container add-new-icon"><img class=shortcut-icon ng-src=images/dashboard/icons/plus.svg></span></div><div class=shortcut-item-title-container><div class=shortcut-item-title>{{\'Add New\' | translate}}</div></div></div><div ng-repeat="item in quickAccessItems track by $index"><a class=shortcut-item-button ng-click=quickAccessClicked(item) ng-if=item.isTooltipNeeded onmousedown="setClickedOnForNavigationTracking(\'my_shortcuts\')" onkeydown="handleKeyPress(event,\'my_shortcuts\')" oxd-tooltip data-placement=bottom title={{item.name}} data-template="<div class=\'tooltip\' role=\'tooltip\'><div class=\'arrow\'></div><div class=\'tooltip-inner {{getShortcutTooltipClasses(item.name)}}\'></div></div>" enter-key-input tabindex=0><span class=shortcut-icon-container><img class=shortcut-icon ng-src=images/dashboard/icons/{{item.icon}}></span></a> <a class=shortcut-item-button ng-click=quickAccessClicked(item) ng-if=!item.isTooltipNeeded onmousedown="setClickedOnForNavigationTracking(\'my_shortcuts\')" onkeydown="handleKeyPress(event,\'my_shortcuts\')" enter-key-input tabindex=0><span class=shortcut-icon-container><img class=shortcut-icon ng-src=images/dashboard/icons/{{item.icon}}></span></a><div class=shortcut-item-title-container><div class=shortcut-item-title>{{item.title}}</div></div></div></div></div></div>'),e.put("app/layout/ohrm.navbar.html",'<div id=topbar ng-switch=ohrmnavbar.title.isArray><ul class=topbar-title ng-switch-when=true><li ng-repeat-start="title in ohrmnavbar.title()" class="page-title tooltipped" ng-click=ohrmnavbar.titleClicked($index) ng-class="{title1: $first, title2: ($index === 1), title3: ($index === 2), title4: ($index > 2 )}" data-tooltip="{{title | translate}}" data-position=bottom><div ng-if=ohrmnavbar.isClickableTitle($index) class=clickable-title>{{title | translate}}</div><div ng-if=!ohrmnavbar.isClickableTitle($index)>{{title | translate}}</div></li><li class="page-title title-separator" ng-repeat-end ng-if=!$last ng-class="{title1: $first, title2: ($index === 1), title3: ($index === 2), title4: ($index > 2 )}">/</li></ul><ul class=topbar-title ng-switch-when=false><li class="page-title title1 tooltipped" data-tooltip="{{ohrmnavbar.title() | translate}}" data-position=bottom><div>{{ohrmnavbar.title() | translate}}</div></li></ul><ul class=topbar-right><li ng-if=ohrmnavbar.hasFilter class=circle><a href ng-click=ohrmnavbar.filter() class="tooltipped circle" data-tooltip="{{ \'Filter\' | translate }}" data-position=bottom><i class=material-icons>oxd_filter</i></a></li><li id=user-profile><a href ng-click=ohrmnavbar.showProfile($event)><img class=profile-image src={{ohrmnavbar.photo}}> <span class=profile-name>{{ohrmnavbar.name}}</span></a></li><li id=navbar-help ng-if=ohrmnavbar.showHelp><help-button></help-button></li><li id=navbar-logout oncontextmenu="return false"><a href={{ohrmnavbar.logoutUrl}} ng-click=ohrmnavbar.logout()><i class=material-icons>oxd_logout_round</i> <span class=profile-name>{{ohrmnavbar.localizedLogoutText}}</span></a><div ohrm-click-outside=ohrmnavbar.closeLogoutOptions()><a href=javascript:void(0) id=logout-options-dropdown-button ng-class="{\'panel-opened\': ohrmnavbar.logoutOptionsVisible}" ng-click=ohrmnavbar.toggleLogoutOptions()><i class=material-icons>arrow_drop_down</i></a><div id=logout-options-panel oncontextmenu="return false" ng-class="{\'panel-opened\': ohrmnavbar.logoutOptionsVisible, \'external-links-visible\': ohrmnavbar.haveExternalLinks}"><div class=logout-options-panel-body><div class=logout-options-menu-item><a href={{ohrmnavbar.logoutAllUrl}} ng-click=ohrmnavbar.logoutFromAllBrowsers() class="logout-options-menu-item-link truncate">{{ohrmnavbar.localizedLogoutAllText}}</a></div></div></div></div></li><li id=topbar-external-link><external-link></external-link></li></ul></div>'),e.put("app/layout/ohrm.truncated.title.navbar.html",'<nav class="sub-nav truncated-title-navbar"><div class="nav-wrapper row"><div class="container col s12" ng-switch=ohrmtruncatedtitlenavbar.title.isArray><ul ng-switch-when=true><li ng-if="ohrmtruncatedtitlenavbar.showBackButton && ohrmtruncatedtitlenavbar.isBackButtonVisible()" class="circle center-align navbar-back-button"><div class=circle ng-click=ohrmtruncatedtitlenavbar.goBack()><i class=material-icons>arrow_back</i></div></li><li ng-repeat-start="title in ohrmtruncatedtitlenavbar.title()" class=page-title ng-class="{\'first\': $first, \'navbar-title-last-list-item\': $last}" ng-click=ohrmtruncatedtitlenavbar.titleClicked($index)><div ng-if=ohrmtruncatedtitlenavbar.isClickableTitle($index) class="clickable-title tooltipped" data-tooltip="{{title | translate}}" ng-class="{\'navbar-truncated-title\': $last}">{{title | translate}}</div><div ng-if=!ohrmtruncatedtitlenavbar.isClickableTitle($index) ng-class="{\'navbar-truncated-title\': $last}"><span class=tooltipped data-tooltip="{{title | translate}}">{{title | translate}}</span></div></li><li class="page-title title-separator" ng-repeat-end ng-if=!$last><i class=material-icons>navigate_next</i></li></ul><ul ng-switch-when=false><li ng-if="ohrmtruncatedtitlenavbar.showBackButton && ohrmtruncatedtitlenavbar.isBackButtonVisible()" class="circle center-align navbar-back-button"><div class=circle ng-click=ohrmtruncatedtitlenavbar.goBack()><i class=material-icons>arrow_back</i></div></li><li class=page-title>{{ohrmtruncatedtitlenavbar.title() | translate}}</li></ul></div></div></nav>'),e.put("app/layout/shell.html",""),e.put("app/layout/shortcut-popover.html",'<div id=shortcutPopover show-modal-as-popover=modal.clickEvent class=modal tabindex=-1 role=dialog><div class="modal-dialog modal-sm" role=document><div class=modal-content><div class=modal-body></div></div></div></div>'),e.put("app/layout/sidebar-search.html","<div class=sidebar-search><div class=icon-holder><i class=material-icons>search</i></div><angucomplete-alt-oxd placeholder=\"{{'Search' | translate}}\" text-searching=\"{{'Searching...' | translate}}\" text-no-results=\"{{'No results found' | translate}}\" pause=100 description-field=\"{{(listData.listTopBar.quickSearch.type === 'employee')?'employeeId':undefined}}\" selected-object=list.onQuickSearchSelect remote-api-handler=listData.listTopBar.quickSearch.remoteApiHandler input-changed=list.updateQuickSearchText input-class=form-control search-fields=name title-field=name sub-title-field={{listData.listTopBar.quickSearch.subTitleField}} initial-value={} minlength=1 auto-match=true focus-first=true match-class=match class=quick-search-shown prevent-flip-to-top=true></angucomplete-alt-oxd></div>"),e.put("app/layout/single_menu_item_top_ribbon.html",'<div class=custom-ribbon-with-menu-and-more-menu><div class=menu-items><div class=top-level-menu-item><div class=top-level-menu-item-container><a class="top-level-menu-item active un-clickable" oncontextmenu="return false">{{vm.menuItem|translate}}</a></div></div></div></div>'),e.put("app/layout/top-menu.html",'<div id=topbar-ribbon><div id=top-ribbon-menu><div class="top-ribbon-menu-basic-navigation menu-separator"><div class=basic-navigation><a ui-sref=dashboard ui-sref-active=active data-tooltip="{{ vm.localizedTextForHome}}" data-position=bottom class=tooltipped data-automation-id=menu_home><i class=material-icons>oxd_home_menu</i></a></div><div class=basic-navigation ng-repeat="menu in vm.menu track by menu.id" ng-if="\'go-back-menu-item\' == menu.class && vm.keepExistingBackButton"><a ng-if=!menu.uiSref data-tooltip="{{ menu.tooltip | translate }}" data-position=bottom class="tooltipped {{menu.class}}" ng-attr-href={{menu.href}} ng-attr-target={{menu.target}} enter-key-input tabindex=0><i class=material-icons>{{menu.icon}}</i></a> <a ng-if=!!menu.uiSref ui-sref={{menu.uiSref}} data-tooltip="{{ menu.tooltip | translate }}" data-position=bottom class="tooltipped {{menu.class}}" ng-attr-href={{menu.href}} ng-attr-target={{menu.target}} enter-key-input tabindex=0><i class=material-icons>{{menu.icon}}</i></a></div><div class=basic-navigation ng-if=!!vm.forcedBackButton><a ng-if=vm.forcedBackButton.uiSref ui-sref={{vm.forcedBackButton.uiSref}} data-tooltip="{{ vm.forcedBackButton.tooltip | translate }}" data-position=bottom class=tooltipped ui-sref-opts="{reload: true, notify: true}" enter-key-input tabindex=0><i class=material-icons>{{vm.backButtonIcon}}</i></a> <a ng-if=vm.forcedBackButton.href href={{vm.forcedBackButton.href}} data-tooltip="{{ vm.forcedBackButton.tooltip | translate }}" data-position=bottom class=tooltipped enter-key-input tabindex=0><i class=material-icons>{{vm.backButtonIcon}}</i></a> <a ng-if=vm.forcedBackButton.callback ng-click=vm.forcedBackButton.callback() data-tooltip="{{ vm.forcedBackButton.tooltip | translate }}" data-position=bottom class=tooltipped enter-key-input tabindex=0><i class=material-icons>{{vm.backButtonIcon}}</i></a></div><div class=basic-navigation ng-if=!!vm.additionalForcedBackButton><a ng-if=vm.additionalForcedBackButton.uiSref ui-sref={{vm.additionalForcedBackButton.uiSref}} data-tooltip="{{ vm.additionalForcedBackButton.tooltip | translate }}" data-position=bottom class=tooltipped ui-sref-opts="{reload: true, notify: true}" enter-key-input tabindex=0><i class=material-icons>{{vm.additionalBackButtonIcon}}</i></a> <a ng-if=vm.additionalForcedBackButton.href href={{vm.additionalForcedBackButton.href}} data-tooltip="{{ vm.additionalForcedBackButton.tooltip | translate }}" data-position=bottom class=tooltipped enter-key-input tabindex=0><i class=material-icons>{{vm.additionalBackButtonIcon}}</i></a> <a ng-if=vm.additionalForcedBackButton.callback ng-click=vm.additionalForcedBackButton.callback() data-tooltip="{{ vm.additionalForcedBackButton.tooltip | translate }}" data-position=bottom class=tooltipped enter-key-input tabindex=0><i class=material-icons>{{vm.additionalBackButtonIcon}}</i></a></div></div><div class=top-ribbon-menu-items ng-class="{\'consume-leftover-space\': vm.showMoreMenu }" ng-if=!vm.customTopRibbon><div class=top-level-menu-item ng-if="!vm.customTopRibbon && vm.forcedMenuPillName"><div class=top-level-menu-item-container><a class="top-level-menu-item active un-clickable" oncontextmenu="return false" enter-key-input tabindex=0>{{vm.forcedMenuPillName | translate }}</a></div></div><top-level-menu-item ng-if="!vm.customTopRibbon && \'go-back-menu-item\' != menu.class && !vm.forcedMenuPillName" ng-repeat="menu in vm.menu track by menu.id" menu-title=menu.title icon=menu.icon sref=menu.uiSref href=menu.href target=menu.target automation-id={{menu.automationId}} children=menu.children nested-children-direction=right max-levels=3 visibility-state=vm.visibilityMap[menu.id] html-id=menu.htmlId current-item-state=vm.currentItemMap[menu.id] track-by="\'id\'"></top-level-menu-item></div><div class=top-ribbon-menu-more-items ng-show=vm.showMoreMenu ng-if="!vm.customTopRibbon && !vm.forcedMenuPillName"><top-level-menu-item ng-repeat="menu in vm.menu track by menu.id" ng-if="vm.currentItemMap[menu.id] && !vm.visibilityMap[menu.id]" menu-title=menu.title icon=menu.icon sref=menu.uiSref href=menu.href menu-item-class="\'forced-active\'" target=menu.target automation-id="{{\'more_menu_current_child_\'}}{{menu.automationId}}" max-levels=1 html-id=menu.htmlId track-by="\'id\'"></top-level-menu-item><top-level-menu-item menu-title="\'More\'" children=vm.getHiddenMenuItems(vm.menu) expand-icon=more_vert automation-id=menu_top_more nested-children-direction=left max-levels=2 track-by="\'id\'" id-prefix="\'more_menu_child_\'"></top-level-menu-item></div></div><div class=custom-top-ribbon ng-show=vm.customTopRibbon><ui-view name=customTopRibbon></ui-view></div><div id=ribbon-actions><ui-view name=navbar></ui-view><ul id=ribbon-action-list><li><help-button></help-button></li><li><my-shortcut></my-shortcut></li></ul></div></div>'),e.put("app/layout/ui-settings_modal.html","<div class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title={{modal.title}} show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-md></generic-oxd-modal></div>"),e.put("app/layout/user-profile-popover.html",'<div id=userProfilePopover show-modal-as-popover=modal.clickEvent class=modal tabindex=-1 role=dialog><div class="modal-dialog modal-sm" role=document><div class=modal-content><div class=modal-body><div class=reset-password><button type=button class="btn btn-list" title="{{\'Change Password\' | translate}}" oxd-tooltip data-placement=bottom aria-label="{{\'Change Password\' | translate}}" ng-click=modal.changePassword()><i class=material-icons aria-hidden=true>vpn_key</i></button></div><div class=picture><div class=image-container><img src={{modal.photo}}></div></div><div class=name>{{modal.name}}</div><div class=job-title>{{modal.jobTitle}}</div></div><div class=modal-footer><button type=button class="btn btn-icon" ng-click=modal.viewProfile() data-dismiss=modal><i class="material-icons btn-injectable-btn-icon">oxd_user</i>{{\'Profile\' | translate}}</button> <button type=button class="btn btn-icon" ng-click=modal.logout()><i class="material-icons btn-injectable-btn-icon">oxd_logout</i>{{\'Log Out\' | translate}}</button></div></div></div></div>'),e.put("app/directives/article.html",'<div class="collapsible-header topic article-collapsible-header" ng-click=vm.checkUnfold(news.id) ng-init=vm.triggerClick(news.id)><div class=row style="word-wrap: break-word;margin-bottom: 0px"><div ng-if=news.topic id=header class="articleTopic col s10 {{ news.id != vm.unfoldId ? \'truncate\' : vm.truncatableTopic }}">{{ news.topic }}</div><div data-tooltip="{{ \'Acknowledged\' | translate }} {{ \'on\' | translate }} {{ vm.getLocalizedAcknowledgementDate(news.acknowledgement.date) }}" data-position=top class="col s1 tooltipped ack-icon" ng-style="{\'visibility\':news.acknowledgement.isAcknowledge ? \'visible\' : \'hidden\'}"><span class="material-icons right" style="margin-top: 2px;font-weight: bold;">ohrm_acknowledgement</span></div><div class="col s1"><i class="material-icons mdi-navigation-unfold-{{ news.id }} right tooltipped" data-tooltip="{{ news.id != vm.unfoldId ? \'Expand\' : vm.collapsable | translate }}" data-position=left>{{ news.id != vm.unfoldId ? \'unfold_more\' : vm.unfold }}</i></div></div><div ng-if=news.published_date class=row style="margin: 0; padding: 0;"><div class="publish-date col s10 truncate" style="font-size: 14px;">{{ \'Published\' | translate }} {{ \'on\' | translate }} {{ news.published_date | ohrmDateFilter }}</div></div></div><div class="collapsible-body article-collapsible-body" style><div class=article_content><div ng-if=vm.showLoader class=circle-loader-container><div class=circle-loader></div></div><div ng-if="news.description && !vm.showLoader" class=tinymce-saved-content><div ng-bind-html=vm.trustAsHtmlDescription(news.description) class=html-content></div></div><div ng-if="news.isAcknowledgable && vm.employeeId" class="tinymce-saved-content acknowledgement-div"><input class="filled-in acknowledgement" type=checkbox id="news_{{ news.id }}" ng-click=vm.acknowledgeNews(news) ng-checked="news.acknowledgement.isAcknowledge || vm.acknowledgeChecked" ng-disabled=news.acknowledgement.isAcknowledge> <label for="news_{{ news.id }}">{{ \'I acknowledge that I have read this news.\' | translate }}</label></div></div><div ng-if=news.attachments.length class="divider acknowledgement-divider"></div><div ng-if=news.attachments.length class=article_attachment><div class=attachment_head>{{ \'Attachments\' | translate }}</div><div ng-repeat="attachment in news.attachments track by attachment.id" class=attachment_body><div class=row><div class="col s10 truncate">{{ attachment.name }}</div><div class="col s2"><a href ng-click=vm.downloadAttachment(attachment.id)><i class="material-icons right tooltipped" data-position=right data-tooltip="{{ \'Download\' | translate }}">file_download</i></a></div></div><div ng-if=attachment.description style="margin-top: 1rem;margin-right: -1rem;">{{ attachment.description }}</div><hr ng-if="$last == false"></div></div></div>'),e.put("app/directives/comments.html",'<form name=addCommentForm ng-if=!config.readOnly><div sf-schema=vm.schema sf-form=vm.form sf-model=vm.model class=form-section></div><div class="form-group schema-form-section form-buttons schema-form-submit row comment-save-btn"><button class="btn disabled right" ng-click=vm.onSubmit() translate=Save ng-disabled=!vm.isFormValid() ng-class="{ \'disabled\': !vm.isFormValid(), \'waves-effect\': vm.isFormValid(), \'waves-green\': vm.isFormValid() }"></button></div></form><div class="comment-section form-section" ng-if="!config.readOnly || vm.hasComments()"><table class=comment-table ng-if="vm.comments.length > 0"><tr class=comment-row ng-repeat="comment in vm.comments track by comment.id"><td class=comment-emp-image><img class="circle list-photo" ng-if=comment.commenter_emp_image ng-src=data:{{comment.commenter_emp_image.type}};base64,{{comment.commenter_emp_image.image}}> <img class="circle list-photo" ng-if=!comment.commenter_emp_image ng-src=images/default-photo.png></td><td class=comment-data><span class=commenter-container><span class=commenter>{{comment.commenter}}</span> <span class=comment-date>{{vm.localizeDateAndTime(comment.commentDate)}}</span></span> <span class="comment-text comment-text-pre-wrap">{{comment.comment}}</span></td><td class=comment-delete><a ng-if="comment[config.deleteRestrictionAttribute] && !config.readOnly" ng-click=vm.deleteComment(comment.id) class="material-icons tooltipped comment-delete-icon" data-tooltip="{{\'Delete\'|translate}}" data-position=right>delete</a></td></tr></table></div>'),e.put("app/directives/confirmation-modal.html","<div id=delete_confirmation_modal class=\"modal modal-fixed-footer confirm-dialog\"><div class=modal-content><h4>{{'You are about to delete data permanently' || translate}}</h4><p>{{'Are you sure you want to continue?' || translate}}</p></div><div class=modal-footer><a href ng-click class=\"modal-action modal-close waves-effect btn-flat\">{{'Yes, Delete' | translate}}</a> <a href ng-click class=\"modal-action modal-close waves-effect btn-flat\">{{'No, Cancel' | translate}}</a></div></div>"),e.put("app/directives/custom-fields.html",'<div ng-class="{\'form-div custom-fields-standard\':customFieldsCtrl.isStandardSection,\'form-div custom-fields\':!customFieldsCtrl.isStandardSection,\'custom-fields-oxd\':customFieldsCtrl.isOxd}" ng-repeat="customFieldSection in customFieldsCtrl.customFieldSections"><h4 class=wrapped-word ng-if=!customFieldsCtrl.isStandardSection>{{customFieldSection.schema.title}}</h4><oxd-loader ng-show="customFieldsCtrl.isOxd && customFieldSection.loading"></oxd-loader><form ng-if=!customFieldsCtrl.isOxd name={{customFieldSection.schema.name}} ng-init=customFieldsCtrl.setFormScope(customFieldSection.schema.name,this) sf-schema=customFieldSection.schema sf-form=customFieldSection.form sf-model=customFieldSection.model ng-submit="customFieldsCtrl.onSubmit(customFieldSection.schema.name, customFieldSection.schema.index)"></form><form ng-if=customFieldsCtrl.isOxd ng-show=!customFieldSection.loading hide-empty-form-elements name={{customFieldSection.schema.name}} ng-init=customFieldsCtrl.setFormScope(customFieldSection.schema.name,this) sf-schema=customFieldSection.schema sf-form=customFieldSection.form sf-use-decorator=oxdDecorator sf-model=customFieldSection.model ng-submit="customFieldsCtrl.onSubmit(customFieldSection.schema.name, customFieldSection.schema.index)"></form></div>'),e.put("app/directives/employee-nominee.html","<div class=row ng-repeat=\"(key,value) in formModel[modelKey]\"><div class=\"input-field col s4\"><label for=input_{{key}} class=active>{{'Nominee' | translate }}</label><div angucomplete-alt-with-employee-id materializecss-employee-auto-complete id=input_{{key}} placeholder=\"{{(form['placeholder'] ? form['placeholder']:'')| translate}}\" text-searching=\"{{(form['text-searching'] ? form['text-searching']:'') | translate}}\" text-no-results=\"{{(form['text-no-results'] ? form['text-no-results']:'') | translate}}\" selected-object=employeeNominee.employeeSelectedCallbackHolder[key] class=angucomplete-widget pause=100 remote-api-handler=employeeNominee.fetchMatchingEmployees search-fields=firstName,middleName,lastName title-field=fullName description-field=employeeId focus-in=\"form['focus-in']\" focus-first=true input-changed=onInputChange auto-match=true initial-value=employeeNominee.prepareEmployeeName(value.employee) input-class=\"topnav-autocomplete contains-emp-id\" match-class=match disable-input=\"form['disable']\"></div><span ng-if=employeeNominee.invalidEmployee[key] class=help-block>{{employeeNominee.invalidEmployeeText}}</span></div><div class=\"input-field col s8\"><textarea ng-disabled=!value.empNumber ng-class=\"{'ng-invalid': value.note.length > employeeNominee.maxNoteLength}\" id=note_{{key}} name=note class=materialize-textarea ng-model=value.note ng-model-options=\"(form['debounce'] ? {'debounce':500} : {})\"></textarea> <span ng-if=\"value.note.length > employeeNominee.maxNoteLength\" class=help-block>{{employeeNominee.invalidTextLength}}</span> <label for=note_{{key}} class=active>{{ 'Note' | translate }}</label></div></div>"),e.put("app/directives/floating-add-button.html",'<div class="fixed-action-btn floating-add-btn" ng-class="{\'tooltipped\':!vm.hasMultipleItems}" data-tooltip="{{vm.addButtonTooltip | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=vm.callAddAction()><i class=material-icons>add</i></a><ul ng-if=vm.hasMultipleItems class=reportToAddFloatingButton><li ng-repeat="action in ::actions"><a class="btn-floating {{action.color}}" ng-click=vm.callAddAction(action.action)><img data-position=left data-delay=50 data-tooltip="{{action.toolTip | translate}}" style="margin-top:6px;margin-left: 6px;" class=tooltipped ng-src={{action.icon}}></a></li></ul></div>'),e.put("app/directives/form.html","<form name={{name}} sf-schema=schema sf-form=form sf-model=model></form>"),e.put("app/directives/full-screen-toggle-button.html","<i ng-click=onBtnClick() class=material-icons>{{isFullScreen?'ohrm_fullscreen_exit':'zoom_out_map'}}</i>"),e.put("app/directives/horizontal-scroll-floating-button.html","<span ng-if=\"isScrollable() && (!floatOnScreen || isElementVisible)\" class=\"material-icons floating-horizontal-scroll-button\" ng-class=\"{'float-on-screen': floatOnScreen}\" ng-click=scroll()>{{scrollableToRight?'navigate_next':'navigate_before'}}</span>"),e.put("app/directives/list.html",'<table class="highlight bordered" style="position: relative;" ng-class=listData.listClass ng-if="objs.length > 0 || listData.showColumnsAnyway"><colgroup ng-if="!listData.staticHeader && listData.columnWidths"><col span=1 ng-repeat="widthValue in listData.columnWidths track by $index" ng-style="{\'width\': widthValue}"></colgroup><colgroup ng-if="listData.staticHeader && listData.columnWidths"><col span=1 ng-repeat="widthValue in ::listData.columnWidths track by $index" ng-style="{\'width\': widthValue}"></colgroup><thead ng-if=!listData.staticHeader><tr><th class=list-options data-field=id ng-if="listData.selectable && (list.hasPermissions(listData.listActions) || listData.configurable)"><a class=dropdown-button href ng-attr-data-activates=listdirective-options-dropdown-{{listData.name}} dropdown data-constrainwidth=false><i class="material-icons icons-color" ng-class="{\'orange-text\': listData.selected.length > 0}">more_horiz</i></a></th><th ng-repeat="listField in listData.listFields" width={{listField.width}} data-field={{listField.name}} colspan="{{listField.headerColspan === undefined ? \'1\' : listField.headerColspan}}" ng-click="list.fetchData(listField.name, listField.sortAction, listField.sortable, listData.pagination)" class="{{listField.class}} row-name" ng-class="{sortable: listField.sortable}" ng-if="(listField.hideField==true?false:true) && (listField.hideHeader==true?false:true)">{{listField.lable| translate}} <span ng-if=listData.pagination>{{list.setPaginationValues(listField.name, listField.sortAction, listField.sortable, listData.pagination)}} {{list.AddSortableFields(listField.name)}}</span> <i ng-if="listField.sortable && (list.sortField === undefined || list.sortField == listField.name)" class="material-icons list-sorting-icons tiny">{{list.getSortIcon(listField.name)}}</i></th><th ng-repeat="TH in listData.extraTH" colspan={{TH.colspan}} style=width:{{TH.width}} translate={{TH.heading}}></th></tr></thead><thead ng-if=listData.staticHeader><tr><th class=list-options data-field=id ng-if="listData.selectable && (list.hasPermissions(listData.listActions) || listData.configurable)"><a class=dropdown-button href ng-attr-data-activates=listdirective-options-dropdown-{{listData.name}} dropdown data-constrainwidth=false><i class="material-icons icons-color" ng-class="{\'orange-text\': listData.selected.length > 0}">more_horiz</i></a></th><th ng-repeat="listField in ::listData.listFields" width={{listField.width}} data-field={{listField.name}} colspan="{{listField.headerColspan === undefined ? \'1\' : listField.headerColspan}}" ng-click="list.fetchData(listField.name, listField.sortAction, listField.sortable, listData.pagination)" class="{{listField.class}} row-name" ng-class="{sortable: listField.sortable}" ng-if="(listField.hideField==true?false:true) && (listField.hideHeader==true?false:true)">{{listField.lable| translate}} <span ng-if=listData.pagination>{{list.setPaginationValues(listField.name, listField.sortAction, listField.sortable, listData.pagination)}} {{list.AddSortableFields(listField.name)}}</span> <i ng-if="listField.sortable && (list.sortField === undefined || list.sortField == listField.name)" class="material-icons list-sorting-icons tiny">{{list.getSortIcon(listField.name)}}</i></th><th ng-repeat="TH in ::listData.extraTH" colspan={{TH.colspan}} style=width:{{TH.width}} translate={{TH.heading}}></th></tr></thead><tbody ng-if=!listData.staticBody><tr ng-repeat="obj in objs track by list.itemTracker(obj, listData.idGetter)" ng-class="{\'grey\':obj.selected ,\'lighten-5\':obj.selected}"><td ng-if="listData.selectable && list.hasPermissions(listData.listActions)"><input type=checkbox class=filled-in ng-model=obj.selected id="checkbox_{{listData.name}}_{{list.itemTracker(obj, listData.idGetter)}}" ng-if=list.isItemSelectable(obj) ng-change="list.runAction(\'changeSelection\', {obj:obj, name:listData.name})"> <label for="checkbox_{{listData.name}}_{{list.itemTracker(obj, listData.idGetter)}}" class></label></td><td ng-if="listData.selectable && (!list.hasPermissions(listData.listActions) && listData.configurable)"></td><td ng-if="((obj[list.clickableCondition] && list.clickableCondition)||!list.clickableCondition) && (listField.hideField==true?false:true)" ng-repeat="listField in listData.listFields" class={{listField.class}} ng-style="getStyle(obj, listField.style)" ng-class="{truncate: listField.truncate, tooltipped: listField.truncate, \'cursor-pointer\': listField.clickAction}" ng-attr-data-tooltip="{{listField.truncate ? getFieldValue(obj, listField.getter, listField.formatter, listField.filters) : undefined}}" ng-attr-data-position="{{listField.truncate ? \'bottom\' : undefined}}" ng-click="list.runAction(listField.clickAction, obj, listField)" ohrm-cell data="getFieldValue(obj, listField.getter, listField.formatter, listField.filters)" rowid=obj.id name=listField.name type=listField.type extracontroller=extracontroller url="getFieldValue(obj, listField.getter, listField.formatter, listField.filters, listField.link)"></td><td ng-if="(!obj[list.clickableCondition] && list.clickableCondition) && (listField.hideField==true?false:true)" ng-repeat="listField in listData.listFields" class={{listField.class}} ng-style="getStyle(obj, listField.style)" ng-class="{truncate: listField.truncate, tooltipped: listField.truncate}" ng-attr-data-tooltip="{{listField.truncate ? getFieldValue(obj, listField.getter, listField.formatter, listField.filters) : undefined}}" ng-attr-data-position="{{listField.truncate ? \'bottom\' : undefined}}" ohrm-cell data="getFieldValue(obj, listField.getter, listField.formatter, listField.filters)" rowid=obj.id name=listField.name type=listField.type extracontroller=extracontroller url="getFieldValue(obj, listField.getter, listField.formatter, listField.filters, listField.link)"></td><td ng-repeat="TD in listData.extraTD" class="{{TD.class}} tooltipped" ng-click="list.runAction(TD.clickAction, obj)" ng-if="TD.hideIf === undefined || TD.hideIf(obj)" colspan="{{TD.colspan(obj) === undefined ? \'1\' : TD.colspan(obj)}}" data-tooltip="{{(list.getTDTooltip(TD.tooltip, obj)) | translate}}" data-delay="{{list.getTDTooltip(TD.tooltip, obj)?\'\':\'99999\'}}" data-position=bottom><i ng-if="TD.class==\'edit_item\'?true:false" class=material-icons>ohrm_edit</i> <i ng-if="list.typeOf(TD.icon)===\'function\'?TD.icon(obj):TD.icon" class="material-icons action-icon icon-color" ng-class="{disabled: (list.typeOf(TD.disabled)===\'function\'?TD.disabled(obj):TD.disabled)}">{{list.typeOf(TD.icon)===\'function\'?TD.icon(obj):TD.icon}}</i><div></div></td></tr></tbody><tbody ng-if=listData.staticBody><tr ng-repeat="obj in objs track by list.itemTracker(obj, listData.idGetter)" ng-class="{\'grey\':obj.selected ,\'lighten-5\':obj.selected}"><td ng-if="listData.selectable && list.hasPermissions(listData.listActions)"><input type=checkbox class=filled-in ng-model=obj.selected id="checkbox_{{listData.name}}_{{list.itemTracker(obj, listData.idGetter)}}" ng-if=list.isItemSelectable(obj) ng-change="list.runAction(\'changeSelection\', {obj:obj, name:listData.name})"> <label for="checkbox_{{listData.name}}_{{list.itemTracker(obj, listData.idGetter)}}" class></label></td><td ng-if="listData.selectable && (!list.hasPermissions(listData.listActions) && listData.configurable)"></td><td ng-if="((obj[list.clickableCondition] && list.clickableCondition)||!list.clickableCondition) && (listField.hideField==true?false:true)" ng-repeat="listField in ::listData.listFields" class={{listField.class}} ng-class="{truncate: listField.truncate, tooltipped: listField.truncate, \'cursor-pointer\': listField.clickAction}" ng-attr-data-tooltip="{{::listField.truncate ? getFieldValue(obj, listField.getter, listField.formatter, listField.filters) : undefined}}" ng-attr-data-position="{{listField.truncate ? \'bottom\' : undefined}}" ng-click="list.runAction(listField.clickAction, obj, listField)" ohrm-cell data="::getFieldValue(obj, listField.getter, listField.formatter, listField.filters)" rowid=obj.id name=listField.name type=listField.type extracontroller=extracontroller url="getFieldValue(obj, listField.getter, listField.formatter, listField.filters, listField.link)"></td><td ng-if="(!obj[list.clickableCondition] && list.clickableCondition) && (listField.hideField==true?false:true)" ng-repeat="listField in ::listData.listFields" class={{listField.class}} ng-class="{truncate: listField.truncate, tooltipped: listField.truncate}" ng-attr-data-tooltip="{{::listField.truncate ? getFieldValue(obj, listField.getter, listField.formatter, listField.filters) : undefined}}" ng-attr-data-position="{{listField.truncate ? \'bottom\' : undefined}}" ohrm-cell data="::getFieldValue(obj, listField.getter, listField.formatter, listField.filters)" rowid=obj.id name=obj.name type=listField.type extracontroller=extracontroller url="getFieldValue(obj, listField.getter, listField.formatter, listField.filters, listField.link)"></td><td ng-repeat="TD in ::listData.extraTD" class="{{TD.class}} tooltipped" ng-click="list.runAction(TD.clickAction, obj)" ng-if="TD.hideIf === undefined || TD.hideIf(obj)" data-tooltip="{{::(list.getTDTooltip(TD.tooltip, obj)) | translate}}" data-delay="{{list.getTDTooltip(TD.tooltip, obj)?\'\':\'99999\'}}" data-position=bottom><i ng-if="TD.class==\'edit_item\'?true:false" class=material-icons>ohrm_edit</i><div></div><i ng-if="list.typeOf(TD.icon)===\'function\'?TD.icon(obj):TD.icon" class="material-icons action-icon icon-color" ng-class="{disabled: (list.typeOf(TD.disabled)===\'function\'?TD.disabled(obj):TD.disabled)}">{{list.typeOf(TD.icon)===\'function\'?TD.icon(obj):TD.icon}}</i><div></div></td></tr></tbody><tfoot ng-if="!listData.staticFooter && listData.showFooter && objs.length>0"><tr><td ng-repeat="footer in listData.footerList" class={{footer.class}} colspan={{footer.colspan}}>{{footer.data}}</td></tr></tfoot><tfoot ng-if="listData.staticFooter && listData.showFooter && objs.length>0"><tr><td ng-repeat="footer in ::listData.footerList" class={{footer.class}} colspan={{footer.colspan}}>{{footer.data}}</td></tr></tfoot></table><ul class="pagination {{list.browserType}}" ng-if=listData.pagination><li class=rows-per-page>{{\'Rows per page\'| translate}}</li><li class=page-size><select class={{list.browserType}} ng-model=list.pageSize ohrm-select not-scrollable=true ng-change=list.fetchBy()><option ng-repeat="pageSize in ::list.sizes" value={{pageSize}}>{{pageSize}}</option></select></li><li class=summary>{{list.getCurrentPageText()}}</li><li class=waves-effect ng-if=list.isPrevPageNeed()><a ng-click=list.prevPage()><i class=material-icons>chevron_left</i></a></li><li class=waves-effect ng-if=list.isNextPageNeed()><a ng-click=list.nextPage()><i class=material-icons>chevron_right</i></a></li></ul><ul ng-attr-id=listdirective-options-dropdown-{{listData.name}} ng-if=listData.selectable class=dropdown-content><li ng-if="(list.hasPermissions(listData.listActions) && listData.unselectableIds.length+listData.selected.length < objs.length)" id=listdirective-options-dropdown-select-all><a href ng-click="list.runAction(\'selectAll\', listData.name)">{{\'Select All\'| translate}}</a></li><li ng-if="(list.hasPermissions(listData.listActions) && listData.selected.length > 0)" id=listdirective-options-dropdown-deselect-all><a href ng-click="list.runAction(\'deselectAll\', listData.name)">{{\'Deselect All\'| translate}}</a></li><li ng-if=listData.configurable id=listdirective-options-configure-list><a href ng-click=list.listConfigOptionDirectiveController(listData.listConfigData)>{{\'Configure\'| translate}}</a></li><li id=listdirective-options-dropdown-{{listData.name}}-action-{{listAction.action}}} ng-if="listAction.actionPermission && listData.selected.length > 0" ng-repeat="listAction in listData.listActions" ng-class="listAction[\'classHandler\'] ? list.getContextListItemClass(listAction.action, listAction[\'classHandler\']) : {}"><a href ng-click="list.runAction(listAction.action, listData.name)">{{listAction.lable| translate}}</a></li></ul>'),
e.put("app/directives/nine-box-employee-list.html",'<div id=employee-list-popup class=employee-list-popup><div class="nb-popover nb-more-popover"><div class="nb-header nb-widget-header"><span class="nb-close nb-icon" ng-click=nineBoxEmployeeListCtrl.closeEvent()><i class=material-icons>close</i></span> <span class=nb-title>{{nineBoxEmployeeListCtrl.eventTitle}}</span><div class=fc-clear></div></div><div class="nb-body nb-widget-content" style="max-height: 500px;"><div id=list-data class=nb-event-container></div></div></div></div>'),e.put("app/directives/oxd-alert-section.html",'<div class=oxd-alert-directive><div class="alert alert-success" role=alert ng-if="type == \'success\'"><span class="material-icons alert-icon">{{icon}}</span> <span ng-click="clickable && clickHandler()" class=alert-text ng-class="{\'cursor-pointer\': clickable}">{{message | translate}}</span></div><div class="alert alert-warning" role=alert ng-if="type == \'warning\'"><span class="material-icons alert-icon">{{icon}}</span> <span ng-click="clickable && clickHandler()" class=alert-text ng-class="{\'cursor-pointer\': clickable}">{{message | translate}}</span></div><div class="alert alert-danger" role=alert ng-if="type == \'danger\'"><span class="material-icons alert-icon">{{icon}}</span> <span ng-click="clickable && clickHandler()" class=alert-text ng-class="{\'cursor-pointer\': clickable}">{{message | translate}}</span></div></div>'),e.put("app/directives/oxd-attachments-modal.html",'<div id=progressIndicatorExpandPopover show-modal-as-popover=modal.clickEvent position="\'left\'" class=modal tabindex=-1 role=dialog vertical-offset=5 horizontal-offset=7><div class="modal-dialog oxd-modal popover-md oxd-attachments tooltipped-modal" role=document modal-size-class=modal-sm><div class=modal-content style="padding-bottom: unset;"><div class="header-details card-top-bar-title"><span class=material-icons>ohrm_attachments</span> <span class="title modal-title">{{"Attachments" | translate}}</span></div><div class=modal-body ng-class="{\'half-height\': modal.attachmentsLocalCopy.length <= 2, \'full-height\': modal.attachmentsLocalCopy.length > 2}"><div class=modal-list-container><list template=oxd-list.html objs=modal.attachments listdata=modal.listData extracontroller=modal style="width: 100%"></list></div></div><form name=oxdAttachmentModalForm class=attachments-form sf-schema=modal.schema sf-form=modal.form sf-model=modal.model sf-use-decorator=oxdDecorator hide-empty-form-elements ng-if=!modal.readOnly ng-class="{\'top-border-shadow\': modal.attachments.length > 0}"></form><div class=modal-footer><div class=row><button type=button class="btn btn-ghost btn-md" data-dismiss=modal style="margin-right: 10px;" ng-click=modal.onCancel()>{{\'Cancel\' | translate}}</button> <button type=button class="btn btn-secondary btn-md" id=save-button ng-disabled="modal.model.file === undefined" ng-click=modal.onSubmit(oxdAttachmentModalForm)>{{\'Save\' | translate}}</button></div></div></div></div></div>'),e.put("app/directives/oxd-attachments.html",'<button type=button class="btn btn-text btn-sm attachment-button" ng-class="{\'empty-attachment\': !attachments.length, \'non-empty-attachment\': attachments.length, \'readonly-attachment\': config.readOnly, \'editable-attachment\': !config.readOnly }" title="{{title | translate}}" oxd-tooltip data-placement=bottom aria-label="{{label | translate}}" ng-click=attachmentButtonClicked($event) style="min-width: 4.25rem;"><div class style="display: flex; height: 1.5rem; padding-top: 0.125rem;"><h4 ng-if="attachments.length > 0" class style="margin-right: 0.5rem;">{{attachments.length}}</h4><span class="material-icons attachment-icon" style="font-size: 1.125rem;">ohrm_attachments</span> <span class=material-icons style="font-size: 1.125rem;">arrow_drop_down</span></div></button>'),e.put("app/directives/oxd-button-loader.html","<div class=oxd-button-loader-container><div class=oxd-button-loader>{{'Loading' | translate}}</div></div>"),e.put("app/directives/oxd-button-panel.html",'<span class=button-container><span ng-repeat="button in data track by $index"><button ng-if="!button.hint && !button.tooltip && button.displayCondition(panelId, obj)" id={{button.id}} class="btn {{button.classes}}" ng-click="button.clickAction($event, button, panelId, obj)" data-id={{panelId?panelId:null}}><i class=material-icons>{{button.icon}}</i> <span class=panel-btn-text>{{button.text | translate}}</span></button> <button ng-if="!button.hint && button.tooltip && button.displayCondition(panelId, obj)" id={{button.id}} class="btn {{button.classes}}" ng-click="button.clickAction($event, button, panelId, obj)" oxd-tooltip data-placement=bottom aria-label="{{button.tooltip.text | translate}}" data-trigger=hover data-original-title="{{button.tooltip.text | translate}}" data-id={{panelId?panelId:null}}><i class=material-icons aria-hidden=true ng-style="{\'font-size\': button.iconSize ? button.iconSize: \'0.825rem\'}">{{button.icon}}</i></button> <button ng-if="button.hint && button.displayCondition(panelId, obj)" id={{button.id}} class="btn {{button.classes}} hint-icon-container inline" data-qtip-class=oxd-hint data-qtip-tip-style="{corner: false}" data-qtip="{{button.hint.text($event, button, panelId, obj)}}" data-qtip-at={{button.atPosition}} data-qtip-options=vm.options data-qtip-my={{button.myPosition}}><i class=material-icons>{{button.icon}}</i></button></span></span>'),e.put("app/directives/oxd-comment-list.html",'<div id=progressIndicatorExpandPopover show-modal-as-popover=modal.clickEvent position="\'left\'" class=modal tabindex=-1 role=dialog vertical-offset=5 horizontal-offset=7><div class="modal-dialog popover-md oxd-comment-list tooltipped-modal" role=document modal-size-class=modal-sm><div class=modal-content style="padding-bottom: unset;"><div class=owner-details><div class=wrapper><div class=profile-image-container><img class="circle profile-photo" ng-if=modal.ownerData.image ng-src=data:{{modal.ownerData.image.type}};base64,{{modal.ownerData.image.image}}> <img class="circle profile-photo" ng-if=!modal.ownerData.image ng-src=images/default-photo.png></div><article><h2>{{modal.ownerData.name}}</h2><span class=title-description>({{modal.title | translate}})</span></article></div></div><table class=oxd-comment-table ng-if="modal.comments.length > 0"><tr class=oxd-comment-row ng-repeat="comment in modal.comments track by comment.id"><td style="width: 450px;"><div class=wrapper><div class=profile-image-container><img class="circle profile-photo" ng-if=comment.commenter_emp_image ng-src=data:{{comment.commenter_emp_image.type}};base64,{{comment.commenter_emp_image.image}}> <img class="circle profile-photo" ng-if=!comment.commenter_emp_image ng-src=images/default-photo.png></div><article><h2>{{comment.commenter}}</h2><a class="material-icons cell-icon" ng-if=comment.isCurrentUserComment oxd-tooltip data-placement=bottom data-original-title="{{\'Delete\' |translate}}" ng-click=modal.deleteComment(comment.id)>ohrm_delete</a><p>{{comment.comment}}</p></article><div style="margin-right: 10px;"><span class=time-description>{{modal.localizeDateAndTime(comment.commentDate)}}</span></div></div></td></tr></table><form name=commentList id=commentList class=comment-list-form sf-schema=modal.schema sf-form=modal.form sf-model=modal.model sf-use-decorator=oxdDecorator hide-empty-form-elements ng-class="{\'top-border-shaow\': modal.comments.length > 0}" ng-if=!modal.readOnly></form><div class=modal-footer style="margin-bottom: 10px;"><div class=row style="width: 100%; display: inline-flex; justify-content: flex-end;"><button type=button class="btn btn-ghost btn-md" data-dismiss=modal style="margin-right: 10px;" ng-click=modal.onCancel()>{{\'Cancel\' | translate}}</button> <button type=button class="btn btn-secondary btn-md" id=save-button ng-disabled="modal.model.comment === \'\'" ng-click=modal.onSubmit(commentList)>{{\'Save\' | translate}}</button></div></div></div></div></div>'),e.put("app/directives/oxd-comments.html","<button type=button class=\"btn btn-list comment-button\" ng-class=\"{'empty-comment': !comments.length, 'non-empty-comment': comments.length, 'readonly-comment': config.readOnly, 'editable-comment': !config.readOnly }\" title=\"{{title | translate}}\" oxd-tooltip data-placement=bottom aria-label=\"{{label | translate}}\" ng-click=commentButtonClicked($event)><i class=material-icons aria-hidden=true>ohrm_comment_oxd</i></button>"),e.put("app/directives/oxd-hint.html",'<span class=hint-icon-container ng-class="{\'inline\':vm.inline}"><i class="material-icons oxd-hint-icon" data-qtip-class=oxd-hint data-qtip-tip-style="{corner: false}" data-qtip="{{vm.hint }}" data-qtip-at={{vm.atPosition}} data-qtip-options=vm.options data-qtip-my={{vm.myPosition}}>{{vm.icon?vm.icon:\'ohrm_question_oxd\'}}</i></span>'),e.put("app/directives/oxd-list-row.html",'<td ng-if="listData.selectable && list.hasPermissions(listData.listActions)" class=checkbox-td></td><td ng-if="listData.selectable && (!list.hasPermissions(listData.listActions) && listData.configurable)" class=checkbox-td></td><td ng-if="listField.hideField==true?false:true" ng-repeat="listField in ::listData.listFields" class={{listField.class}} ng-class="{truncate: listField.truncate, tooltipped: listField.truncate, \'cursor-pointer\': listField.clickAction}" ng-attr-data-tooltip="{{::listField.truncate ? list.getFieldValue(obj, listField.getter, listField.formatter, listField.filters) : undefined}}" ng-attr-data-position="{{listField.truncate ? \'bottom\' : undefined}}" ohrm-cell data="list.getFieldValue(obj, listField.getter, listField.formatter, listField.filters)" list-field=listField obj=obj rowid=obj.id name=listField.name type=listField.type extracontroller=extracontroller url="list.getFieldValue(obj, listField.getter, listField.formatter, listField.filters, listField.link)"></td><td ng-repeat="TD in ::listData.extraTD" class="{{TD.class}} tooltipped" ng-click="list.runAction(TD.clickAction, obj)" ng-if="TD.hideIf === undefined || TD.hideIf(obj)" data-tooltip="{{::(list.getTDTooltip(TD.tooltip, obj)) | translate}}" data-delay="{{list.getTDTooltip(TD.tooltip, obj)?\'\':\'99999\'}}" data-position=bottom><i ng-if="TD.class==\'edit_item\'?true:false" class=material-icons>ohrm_edit</i><div></div><i ng-if="list.typeOf(TD.icon)===\'function\'?TD.icon(obj):TD.icon" class="material-icons action-icon icon-color" ng-class="{disabled: (list.typeOf(TD.disabled)===\'function\'?TD.disabled(obj):TD.disabled)}">{{list.typeOf(TD.icon)===\'function\'?TD.icon(obj):TD.icon}}</i><div></div></td>'),e.put("app/directives/oxd-list-shortcuts.html",'<div ng-repeat="shortcut in shortcuts" ng-click=onClick(shortcut) class=oxd-list-shortcut ng-class="{active: shortcut.id == activeId}" oxd-tooltip data-placement=right title="{{compact? (shortcut.label | translate):\'\'}}"><div ng-if=!shortcut.icon class="number-indicator-container {{getNumericIndicatorClass(shortcut)}}"><div class=number-indicator><div class={{shortcut.classes}}>{{shortcut.matchingCount}}</div></div></div><i class="material-icons oxd-left-panel-shortcut {{shortcut.icon}}" ng-if=shortcut.icon>{{shortcut.icon}}</i><div class=description>{{shortcut.label | translate}}</div></div>'),e.put("app/directives/oxd-list.html",'<div class=list-panel-container ng-class="{\'list-panel-view\': listData.leftPanel}"><div class=list-inner-left-panel ng-if=listData.leftPanel ng-class="{\'compact\':isLeftMenuCompact(listData.leftPanel)}"><button ng-if="listData.leftPanel.addButton && listData.leftPanel.addButton.isPermitted" type=button class="btn btn-secondary" ng-click=listData.leftPanel.addButton.callback() oxd-tooltip data-placement=right data-original-title="{{isLeftMenuCompact(listData.leftPanel) ? (listData.leftPanel.addButton.text | translate): \'\'}}"><i class=material-icons>add</i><span class=panel-btn-text>{{listData.leftPanel.addButton.text | translate}}</span></button> <span class="material-icons toggle-button" ng-click=toggleLeftMenu(listData.leftPanel) ng-if=listData.leftPanel.toggleable></span><oxd-list-shortcuts ng-if="listData.leftPanel.data().length > 0" shortcuts=listData.leftPanel.data() active-id=listData.leftPanel.activeId() compact=isLeftMenuCompact(listData.leftPanel)></oxd-list-shortcuts></div><div class=list-inner-right-panel ng-class="{\'compact\': listData.leftPanel && !isLeftMenuCompact(listData.leftPanel), \'with-left-panel\': listData.leftPanel}"><span class="material-icons floating-horizontal-scroll-button float-on-screen" ng-if=autoScrollEnabled ng-click=autoScrollButtonClicked()>{{scrollableToRight?\'navigate_next\':\'navigate_before\'}}</span><div ng-if=listData.listTopBar class="list-top-bar {{list.bulkActionButtons.length > 1 ? \'extended\':\'\'}}"><div class="bulk-action-panel compact-action-button-panel {{list.getTopBarPanelClasses(listData.listTopBar).bulkActionPanelClass}}"><span class=panel-title ng-if=listData.listTopBar.title>{{listData.listTopBar.title.name | translate}}</span> <span class=selected-count ng-if="list.getSelectedRowCount() > 0">{{listData.listTopBar.getMessageForNoOfItemsSelected(list.getSelectedRowCount())}}</span> <span class=available-count ng-if="list.getSelectedRowCount() == 0">{{listData.listTopBar.getMessageForNoOfItemsFound(objs.length)}}</span><div ng-if="list.getSelectedRowCount() > 0" ng-repeat="button in list.bulkActionButtons" ng-click=button.onClick(list.getSelectedIds()) class="{{button.class ? button.class : \'btn-label-feedback-success\'}} bulk-update-button list-bulk-action-button" oxd-tooltip data-placement=bottom data-original-title="{{button.tooltip ? (button.tooltip | translate) : \'\'}}"><i ng-if=button.icon class=material-icons>{{button.icon}}</i> <span>{{button.label}}</span></div><div ng-if="list.getSelectedRowCount() > 0 && listData.listTopBar.onBulkDelete && (!listData.listTopBar.isBulkDeletable || listData.listTopBar.isBulkDeletable(list.getSelectedIds()))" ng-click=listData.listTopBar.onBulkDelete(list.getSelectedIds()) class="{{listData.listTopBar.isBulkDeleteDisabled && listData.listTopBar.isBulkDeleteDisabled(list.getSelectedIds()) ? \'btn-label disabled\' : \'btn-text-danger\'}} bulk-delete-button list-bulk-action-button" oxd-tooltip data-placement=bottom data-original-title="{{listData.listTopBar.isBulkDeleteDisabled && listData.listTopBar.isBulkDeleteDisabled(list.getSelectedIds()) ? (listData.listTopBar.getBulkDeleteDisabledTooltip(list.getSelectedIds()) | translate) : \'\'}}"><i class=material-icons>delete</i> <span>{{list.getDeleteSelectedMessage()}}</span></div></div><div class="form-group search-panel {{list.getTopBarPanelClasses(listData.listTopBar).searchPanelClass}}"><angucomplete-alt-oxd ng-if=listData.listTopBar.quickSearch placeholder="{{\'Search\' | translate}}" text-searching="{{\'Searching...\' | translate}}" text-no-results="{{\'No results found\' | translate}}" pause=100 description-field="{{(listData.listTopBar.quickSearch.type === \'employee\')?\'employeeId\':undefined}}" selected-object=list.onQuickSearchSelect remote-api-handler=listData.listTopBar.quickSearch.remoteApiHandler input-changed=list.updateQuickSearchText input-class="form-control {{(listData.listTopBar.quickSearch.type === \'employee\')?\'contains-emp-id\':\'\'}}" search-fields=name title-field=name sub-title-field={{listData.listTopBar.quickSearch.subTitleField}} initial-value={} minlength=1 auto-match=true focus-first=true match-class=match ng-class="{\'contains-emp-id\': (listData.listTopBar.quickSearch.type === \'employee\'), \'quick-search-shown\': listData.listTopBar.quickSearch }" prevent-flip-to-top=true></angucomplete-alt-oxd><div ng-if=listData.listTopBar.quickSearch class="search-icon icon-holder" ng-click=listData.listTopBar.quickSearch.onSearch(list.quickSearchText)><i class=material-icons>search</i></div><div ng-if=listData.listTopBar.onFilterOpen class="filter-icon icon-holder" title="{{\'Filter\' | translate}}" oxd-tooltip data-placement=bottom ng-click=listData.listTopBar.onFilterOpen($event)><i class=material-icons>oxd_filter</i></div><div ng-if=listData.listTopBar.configurable class="config-icon icon-holder" title="{{\'Configure\' | translate}}" oxd-tooltip data-placement=bottom ng-click=list.listConfigOptionDirectiveController(listData.listTopBar.listConfigData)><i class=material-icons>ohrm_settings</i></div><div ng-if=listData.listTopBar.iconButtons ng-repeat="iconButton in listData.listTopBar.iconButtons" id={{iconButton.id}} class="icon-button icon-holder {{iconButton.class}}" title="{{iconButton.title | translate}}" oxd-tooltip data-placement=bottom ng-click=iconButton.onClick($event)><i class=material-icons>{{iconButton.icon}}</i></div></div><div ng-if="listData.listTopBar.mainActionButton && !listData.listTopBar.mainActionButton.nestedOptions" class="form-group main-action-button"><button type=button class="btn {{listData.listTopBar.mainActionButton.classes? listData.listTopBar.mainActionButton.classes: \'btn-secondary\'}}" id={{listData.listTopBar.mainActionButton.id}} ng-click=listData.listTopBar.mainActionButton.onClick()><i class=material-icons>{{listData.listTopBar.mainActionButton.icon}}</i><span>{{listData.listTopBar.mainActionButton.label | translate}}</span></button></div><div ng-if="listData.listTopBar.mainActionButton && listData.listTopBar.mainActionButton.nestedOptions" class="form-group main-action-button"><button class="btn dropdown-toggle btn-secondary {{ listData.listTopBar.mainActionButton.classes }}" data-toggle=dropdown><i class=material-icons>{{listData.listTopBar.mainActionButton.icon}}</i><span>{{listData.listTopBar.mainActionButton.label | translate}}</span></button><ul class="dropdown-menu dropdown-menu-right"><li ng-repeat="dropdownOption in listData.listTopBar.mainActionButton.options" class=dropdown-item ng-click=dropdownOption.onClick(dropdownOption.value)><div><span>{{dropdownOption.label | translate}}</span></div></li></ul></div></div><div ng-if="listData.listTopBar && list.getSelectedRowCount() > 0 && list.bulkActionButtons.length > 1" class="list-top-bar extended-action-button-panel {{list.bulkActionButtons.length > 1 ? \'extended\':\'\'}}"><div class="bulk-action-panel col-12"><div ng-repeat="button in list.bulkActionButtons" ng-click=button.onClick(list.getSelectedIds()) class="{{button.class ? button.class : \'btn-label-feedback-success\'}} bulk-update-button" oxd-tooltip data-placement=bottom data-original-title="{{button.tooltip ? (button.tooltip | translate) : \'\'}}"><i ng-if=button.icon class=material-icons>{{button.icon}}</i> <span>{{button.label}}</span></div><div ng-if="listData.listTopBar.onBulkDelete && (!listData.listTopBar.isBulkDeletable || listData.listTopBar.isBulkDeletable(list.getSelectedIds()))" ng-click=listData.listTopBar.onBulkDelete(list.getSelectedIds()) class="{{listData.listTopBar.isBulkDeleteDisabled && listData.listTopBar.isBulkDeleteDisabled(list.getSelectedIds()) ? \'btn-label disabled\' : \'btn-text-danger\'}} bulk-delete-button btn" oxd-tooltip data-placement=bottom data-original-title="{{listData.listTopBar.isBulkDeleteDisabled && listData.listTopBar.isBulkDeleteDisabled(list.getSelectedIds()) ? (listData.listTopBar.getBulkDeleteDisabledTooltip(list.getSelectedIds()) | translate) : \'\'}}"><i class=material-icons>delete</i> <span>{{list.getDeleteSelectedMessage()}}</span></div></div></div><div class="table-container {{listData.listContainerClass}}" ng-class="{\'data-loading\':listData.showLoader && objs==null}"><table id={{listData.tableId}} class=bordered ng-class=listData.listClass ng-if="objs.length > 0 || listData.showColumnsAnyway"><colgroup ng-if="!listData.staticHeader && listData.columnWidths"><col span=1 ng-repeat="widthValue in listData.columnWidths track by $index" ng-style="{\'width\': widthValue}"></colgroup><colgroup ng-if="listData.staticHeader && listData.columnWidths"><col span=1 ng-repeat="widthValue in ::listData.columnWidths track by $index" ng-style="{\'width\': widthValue}"></colgroup><thead ng-if="!listData.staticHeader && listData.hideHeader !== true"><tr><th class=list-options data-field=id ng-if="!listData.listTopBar && listData.selectable && (list.hasPermissions(listData.listActions) || listData.configurable)"><a class=dropdown-button href ng-attr-data-activates=listdirective-options-dropdown-{{listData.name}} dropdown data-constrainwidth=false><i class="material-icons icons-color" ng-class="{\'orange-text\': listData.selected.length > 0}">more_horiz</i></a></th><th ng-if="listData.listTopBar && listData.selectable && list.hasPermissions(listData.listActions)" class=checkbox-th><div class="custom-control custom-checkbox"><input class="custom-control-input custom-checkbox" id=checkbox_ohrmList_{{listData.name}}_chkSelectRecord_0 ng-checked=list.allRowsSelected(); ng-click="list.toggleSelectAll(); list.updateBulkActionButtons();" type=checkbox><label ng-style="{visibility: !!objs?\'visible\':\'hidden\'}" class=custom-control-label for=checkbox_ohrmList_{{listData.name}}_chkSelectRecord_0></label></div></th><th ng-repeat="listField in listData.listFields" width={{listField.width}} data-field={{listField.name}} class="{{listField.class}} row-name" ng-if="listField.hideField==true?false:true"><span class=header-container ng-class="{\'expandable\':isExpandable(listField)}"><div class=dropleft><span oxd-list-cell-truncate="{{listField.truncateHeader?listField.truncateHeader:\'\'}}" ng-class="{\'oxd-list-cell-truncate\': listField.truncateHeader}">{{(listData.pagination && list.setPaginationValues(listField.name, listField.sortAction, listField.sortable, listData.pagination)); (listData.pagination && list.AddSortableFields(listField.name)); listField.lable | translate}}</span> <i ng-if=listField.sortable class="dropdown-toggle sort-icon material-icons" data-toggle=dropdown ng-click=list.onSortClick()>{{list.getOxdSortIcon(listField.name)}}</i><ul ng-if=listField.sortable class="dropdown-menu sort-dropdown-menu"><li ng-click="list.fetchData(listField.name, listField.sortAction, listField.sortable, listData.pagination, \'ASC\')" class=dropdown-item><div><i class=material-icons>sort_asc_oxd</i><span>{{\'Ascending\' | translate}}</span></div></li><li ng-click="list.fetchData(listField.name, listField.sortAction, listField.sortable, listData.pagination, \'DESC\')" class=dropdown-item><div><i class=material-icons>sort_desc_oxd</i><span>{{\'Descending\' | translate}}</span></div></li></ul></div></span> <span class="collapse-all-button material-icons" ng-click=collapseAll() ng-show=showCollapseAll(listField) oxd-tooltip data-placement=bottom title="{{\'Collapse All\'| translate}}">swap_vertical_circle</span></th><th ng-repeat="TH in listData.extraTH" colspan={{TH.colspan}} style=width:{{TH.width}} translate={{TH.heading}}></th></tr></thead><thead ng-if="listData.staticHeader && listData.hideHeader !== true"><tr><th class=list-options data-field=id ng-if="!listData.listTopBar && listData.selectable && (list.hasPermissions(listData.listActions) || listData.configurable)"><a class=dropdown-button href ng-attr-data-activates=listdirective-options-dropdown-{{listData.name}} dropdown data-constrainwidth=false><i class="material-icons icons-color" ng-class="{\'orange-text\': listData.selected.length > 0}">more_horiz</i></a></th><th ng-if="listData.listTopBar && listData.selectable && list.hasPermissions(listData.listActions)" class=checkbox-th><div class="custom-control custom-checkbox"><input class="custom-control-input custom-checkbox" id=checkbox_ohrmList_{{listData.name}}_chkSelectRecord_0 ng-checked=list.allRowsSelected() ng-click=list.toggleSelectAll() type=checkbox><label ng-style="{visibility: !!objs?\'visible\':\'hidden\'}" class=custom-control-label for=checkbox_ohrmList_{{listData.name}}_chkSelectRecord_0></label></div></th><th ng-repeat="listField in ::listData.listFields" width={{listField.width}} data-field={{listField.name}} class="{{listField.class}} row-name" ng-class="{sortable: listField.sortable, expandable:listField.name==listData.expandableField}" ng-if="listField.hideField==true?false:true"><div class=dropleft><span oxd-list-cell-truncate="{{listField.truncateHeader?listField.truncateHeader:\'\'}}" ng-class="{\'oxd-list-cell-truncate\': listField.truncateHeader}">{{(listData.pagination && list.setPaginationValues(listField.name, listField.sortAction, listField.sortable, listData.pagination)); (listData.pagination && list.AddSortableFields(listField.name)); listField.lable | translate}}</span> <i ng-if=listField.sortable class="dropdown-toggle sort-icon material-icons" data-toggle=dropdown ng-click=list.onSortClick()>{{list.getOxdSortIcon(listField.name)}}</i><ul ng-if=listField.sortable class="dropdown-menu sort-dropdown-menu"><li ng-click="list.fetchData(listField.name, listField.sortAction, listField.sortable, listData.pagination, \'ASC\')" class=dropdown-item><div><i class=material-icons>sort_asc_oxd</i><span>{{\'Ascending\' | translate}}</span></div></li><li ng-click="list.fetchData(listField.name, listField.sortAction, listField.sortable, listData.pagination, \'DESC\')" class=dropdown-item><div><i class=material-icons>sort_desc_oxd</i><span>{{\'Descending\' | translate}}</span></div></li></ul></div></th><th ng-repeat="TH in ::listData.extraTH" colspan={{TH.colspan}} style=width:{{TH.width}} translate={{TH.heading}}></th></tr></thead><tbody style="text-align: left" ng-if=!listData.staticBody ng-class="{\'loading\': listData.showLoader && !objs}"><tr ohrm-disable-animation ng-if="listData.showLoader && !objs" class=table-loader><td><div class=oxd-circle-loader>{{\'Loading\' | translate}}</div></td></tr><tr data-tt-id={{obj.id}} data-tt-parent-id=-1 data-tt-branch={{obj.isBranch}} ohrm-disable-animation ng-if=objs ng-mouseover=listData.onHoverRow(obj) ng-repeat="obj in objs track by list.itemTracker(obj, listData.idGetter)" ng-class="{\'grey\':obj.selected ,\'lighten-5\':obj.selected, \'highlight\':obj.highlight}"><td ng-if="listData.selectable && list.hasPermissions(listData.listActions)" class=checkbox-td><div ng-if=list.isItemSelectable(obj) class="custom-control custom-checkbox"><input type=checkbox class=custom-control-input ng-model=obj.selected id="checkbox_{{listData.name}}_{{list.itemTracker(obj, listData.idGetter)}}" ng-change="list.runAction(\'changeSelection\', {obj:obj, name:listData.name}); list.updateBulkActionButtons()"> <label for="checkbox_{{listData.name}}_{{list.itemTracker(obj, listData.idGetter)}}" class=custom-control-label></label></div></td><td ng-if="listData.selectable && (!list.hasPermissions(listData.listActions) && listData.configurable)"></td><td ng-if="list.isRowClickable(obj) && (listField.hideField==true?false:true)" ng-repeat="listField in listData.listFields" class={{listField.class}} ng-style="getStyle(obj, listField.style)" ng-class="{\'cursor-pointer\': listField.clickAction}" ng-click="list.runAction(listField.clickAction, obj, listField, $event)" ohrm-cell data="getFieldValue(obj, listField.getter, listField.formatter, listField.filters)" rowid=obj.id name=listField.name type=listField.type obj=obj list-field=listField extracontroller=extracontroller url="getFieldValue(obj, listField.getter, listField.formatter, listField.filters, listField.link)"></td><td ng-if="!list.isRowClickable(obj) && (listField.hideField==true?false:true)" ng-repeat="listField in listData.listFields" class={{listField.class}} ng-style="getStyle(obj, listField.style)" ohrm-cell data="getFieldValue(obj, listField.getter, listField.formatter, listField.filters)" rowid=obj.id name=listField.name type=listField.type obj=obj list-field=listField extracontroller=extracontroller url="getFieldValue(obj, listField.getter, listField.formatter, listField.filters, listField.link)"></td><td ng-repeat="TD in listData.extraTD" class={{TD.class}} ng-click="list.runAction(TD.clickAction, obj, TD, $event)" colspan="{{TD.colspan(obj) === undefined ? \'1\' : TD.colspan(obj)}}"><div ng-style="{visibility: (TD.hideIf === undefined || TD.hideIf(obj))?\'visible\':\'hidden\'}" class="icon-holder extra-td" oxd-tooltip data-placement=bottom title="{{(list.getTDTooltip(TD.tooltip, obj)) | translate}}"><i ng-if="list.typeOf(TD.icon)===\'function\'?TD.icon(obj):TD.icon" class="material-icons action-icon icon-color" ng-class="{disabled: (list.typeOf(TD.disabled)===\'function\'?TD.disabled(obj):TD.disabled)}">{{list.typeOf(TD.icon)===\'function\'?TD.icon(obj):TD.icon}}</i></div><div></div></td></tr></tbody><tbody style="text-align: left" ng-if=listData.staticBody ng-class="{\'loading\': listData.showLoader && !objs}"><tr ohrm-disable-animation ng-if="listData.showLoader && !objs" class=table-loader><td><div class=oxd-circle-loader>{{\'Loading\' | translate}}</div></td></tr><tr ohrm-disable-animation ng-if=objs ng-repeat="obj in objs track by list.itemTracker(obj, listData.idGetter)" ng-class="{\'grey\':obj.selected ,\'lighten-5\':obj.selected, \'highlight\':obj.highlight}"><td ng-if="listData.selectable && list.hasPermissions(listData.listActions)" class=checkbox-td><div ng-if=list.isItemSelectable(obj) class="custom-control custom-checkbox"><input type=checkbox class=custom-control-input ng-model=obj.selected id="checkbox_{{listData.name}}_{{list.itemTracker(obj, listData.idGetter)}}" ng-change="list.runAction(\'changeSelection\', {obj:obj, name:listData.name})"> <label for="checkbox_{{listData.name}}_{{list.itemTracker(obj, listData.idGetter)}}" class=custom-control-label></label></div></td><td ng-if="listData.selectable && (!list.hasPermissions(listData.listActions) && listData.configurable)"></td><td ng-if="list.isRowClickable(obj) && (listField.hideField==true?false:true)" ng-repeat="listField in ::listData.listFields" class={{listField.class}} ng-class="{\'cursor-pointer\': listField.clickAction}" ng-click="list.runAction(listField.clickAction, obj, listField, $event)" ohrm-cell data="::getFieldValue(obj, listField.getter, listField.formatter, listField.filters)" rowid=obj.id name=listField.name type=listField.type obj=obj list-field=listField extracontroller=extracontroller url="getFieldValue(obj, listField.getter, listField.formatter, listField.filters, listField.link)"></td><td ng-if="!list.isRowClickable(obj) && (listField.hideField==true?false:true)" ng-repeat="listField in ::listData.listFields" class={{listField.class}} ohrm-cell data="::getFieldValue(obj, listField.getter, listField.formatter, listField.filters)" rowid=obj.id name=obj.name type=listField.type obj=obj list-field=listField extracontroller=extracontroller url="getFieldValue(obj, listField.getter, listField.formatter, listField.filters, listField.link)"></td><td ng-repeat="TD in ::listData.extraTD" class={{TD.class}} ng-click="list.runAction(TD.clickAction, obj, TD, $event)"><div ng-style="{visibility: (TD.hideIf === undefined || TD.hideIf(obj))?\'visible\':\'hidden\'}" class="icon-holder extra-td" oxd-tooltip data-placement=bottom title="{{(list.getTDTooltip(TD.tooltip, obj)) | translate}}"><i ng-if="list.typeOf(TD.icon)===\'function\'?TD.icon(obj):TD.icon" class="material-icons action-icon icon-color" ng-class="{disabled: (list.typeOf(TD.disabled)===\'function\'?TD.disabled(obj):TD.disabled)}">{{list.typeOf(TD.icon)===\'function\'?TD.icon(obj):TD.icon}}</i></div><div></div></td></tr></tbody><tfoot ng-if="!listData.staticFooter && listData.showFooter && objs.length>0"><tr><td ng-repeat="footer in listData.footerList" class={{footer.class}} colspan={{footer.colspan}}>{{footer.data}}</td></tr></tfoot><tfoot ng-if="listData.staticFooter && listData.showFooter && objs.length>0"><tr><td ng-repeat="footer in ::listData.footerList" class={{footer.class}} colspan={{footer.colspan}}>{{footer.data}}</td></tr></tfoot></table></div><oxd-pagination ng-cloak ng-if="listData.pagination && extracontroller[\'totalDataCount\'] > 10 && objs" count="{{extracontroller[\'totalDataCount\']}}" page="{{extracontroller[\'page\']}}" page-size={{list.pageSize}} change-page-size=list.changePageSize change-page=list.gotoPage></oxd-pagination><ul ng-attr-id=listdirective-options-dropdown-{{listData.name}} ng-if="!listData.unselectableIds || (listData.selectable && listData.unselectableIds.length<objs.length)" class=dropdown-content><li ng-if="(list.hasPermissions(listData.listActions) && listData.unselectableIds.length+listData.selected.length < objs.length)" id=listdirective-options-dropdown-select-all><a href ng-click="list.runAction(\'selectAll\', listData.name)">{{\'Select All\'| translate}}</a></li><li ng-if="(list.hasPermissions(listData.listActions) && listData.selected.length > 0)" id=listdirective-options-dropdown-deselect-all><a href ng-click="list.runAction(\'deselectAll\', listData.name)">{{\'Deselect All\'| translate}}</a></li><li ng-if=listData.configurable id=listdirective-options-configure-list><a href ng-click=list.listConfigOptionDirectiveController(listData.listConfigData)>{{\'Configure\'| translate}}</a></li><li id=listdirective-options-dropdown-{{listData.name}}-action-{{listAction.action}}} ng-if="listAction.actionPermission && listData.selected.length > 0" ng-repeat="listAction in listData.listActions"><a href ng-click="list.runAction(listAction.action, listData.name)">{{listAction.lable| translate}}</a></li></ul></div></div>'),
e.put("app/directives/oxd-loader.html","<div class=oxd-circle-loader-container><div class=oxd-circle-loader>{{'Loading' | translate}}</div></div>"),e.put("app/directives/oxd-modal-table-item-delete-alert.html",'<div ng-if=vm.showDeleteConfirmationAlert><div class="alert alert-danger delete-alert" role=alert><span class=delete-alert-msg-span><span class="material-icons delete-alert-icon">ohrm_delete_alert_warning</span> <span class=delete-alert-msg>{{alertContent.alertMessage | translate}}</span></span> <button type=button class="btn btn-secondary delete-alert-delete-btn" ng-click=vm.deleteSelected()>{{alertContent.deleteButtonLabel | translate}}</button> <button type=button class="btn btn-ghost delete-alert-cancel-btn" ng-click=vm.cancel() data-dismiss=modal>{{alertContent.cancelButtonLabel | translate}}</button></div><div class=delete-alert-bottom-overlay></div><div class=delete-alert-overlay></div></div>'),e.put("app/directives/oxd-pagination.html",'<div class=oxd-pagination-panel><div ng-class="{inactive: !vm.isPrevPageNeed()}" class=page-previous><div class=icon-holder ng-click=vm.prevPage()><i class=material-icons>navigate_before</i></div></div><div ng-if="vm.getPageNumbers().length > 1" ng-repeat="no in vm.getPageNumbers()" class=page-no><div class=icon-holder ng-click=vm.gotoPage(no) ng-class="{active: vm.isActivePage(no)}">{{no}}</div></div><div ng-class="{inactive: !vm.isNextPageNeed()}" class=page-next><div class=icon-holder ng-click=vm.nextPage()><i class=material-icons>navigate_next</i></div></div><div class="form-group page-size"><div class="input-group form-select"><select oxd-select ng-model=vm.pageSize not-scrollable=true ng-change=vm.updatePageSize(vm.pageSize) class=select-dropdown><option ng-repeat="size in vm.sizes" value={{size}} ng-bind=size></option></select><div class=input-group-append-container><div class=input-group-append><button class=btn type=button tabindex=-1><i class=material-icons>arrow_drop_down</i></button></div></div></div></div></div>'),e.put("app/directives/oxd-report-date-comparison-from-field.html",'<div class="input-group form-date col-6 report-filter-type-input" ng-form name={{filterName}}-from><input type=text name=dateTextInput class="form-control from-date" placeholder="{{\'From\' | translate}}" ng-pattern=datePattern ng-model=dateText ng-change=textClicked($event) ng-attr-data-original-title="{{longDateFormat && dateText || undefined }}" oxd-tooltip data-placement=bottom set-field-validity=hasErrors ng-model-options="{updateOn: \'blur\'}"><div class=input-group-append-container><div class=input-group-append><input oxd-date hidden select-years={{selectYears}} type=date class="datepicker original" sf-changed=form id=report_date_filter_{{filterName}}_from ng-change=datePickerUpdated($event) ng-model=value[filterName].from default-date={{defaultValue.from}} form-name={{filterName}}-from ng-required={{filter.required}} validate-date-range end-date=value[filterName].to end-date-form-field="formName[filterName + \'-to\']" equal-allowed not-allow-future-dates="{{filter[\'not-allow-future-dates\']}}"> <button class="btn date-picker-button" type=button><i class="material-icons date-picker-open-icon">date_range</i></button></div></div><span class="help-block col-12" ng-messages="formName[filterName + \'-from\'].$error" ng-if="formName[filterName + \'-from\'].$dirty"><ng-message when=required translate=Required></ng-message><ng-message when=pattern>{{errorMessage}}</ng-message></span></div>'),e.put("app/directives/oxd-report-date-comparison-to-field.html",'<div class="input-group form-date col-6 report-filter-type-input" ng-form name={{filterName}}-to><input type=text name=dateTextInput class="form-control to-date" ng-model=dateText placeholder="{{\'To\' | translate}}" ng-pattern=datePattern ng-change=textClicked($event) ng-attr-data-original-title="{{longDateFormat && dateText || undefined }}" oxd-tooltip data-placement=bottom set-field-validity=hasErrors ng-model-options="{updateOn: \'blur\'}"><div class=input-group-append-container><div class=input-group-append><input oxd-date hidden select-years={{selectYears}} type=date class="datepicker original" sf-changed=form id=report_date_filter_{{filterName}}_to ng-change=datePickerUpdated($event) ng-model=value[filterName].to default-date={{defaultValue.to}} form-name={{filterName}}-to ng-required={{filter.required}}> <button class="btn date-picker-button" type=button><i class="material-icons date-picker-open-icon">date_range</i></button></div></div><span class="help-block col-12" ng-messages="formName[filterName + \'-to\'].$error" ng-if="formName[filterName + \'-to\'].$dirty"><ng-message when=required translate=Required></ng-message><ng-message when=pattern>{{errorMessage}}</ng-message></span></div>'),e.put("app/directives/oxd-spinner.html",'<div class=quantity-increment-container ng-class="{\'disabled\':readonly}"><span class="btn-list material-icons" ng-if=!readonly ng-mousedown=decrease() ng-mouseup=clearAllTimeouts() ng-mouseleave=clearAllTimeouts()>remove</span> <input materializecss-input id=spinnerInput class=form-control ng-disabled=readonly type=text ng-model=model onclick=this.select()> <span class="btn-list material-icons" ng-if=!readonly ng-mousedown=increase() ng-mouseup=clearAllTimeouts() ng-mouseleave=clearAllTimeouts()>add</span></div>'),e.put("app/directives/oxd-step-progress-with-title.html",'<ol class="step-progress-bar progress-with-title numeric-progress read-only-progress thick-state-bar"><li data-position=bottom ng-repeat="state in states" ng-class="{done: (state.id) < currentStateId, todo: (state.id) > currentStateId, current: (state.id-1) == currentStateId, visited: (state.id) <= currentStateId}"><span>{{state.name | translate}}</span></li></ol>'),e.put("app/directives/oxd-tabs.html",'<ul class="nav nav-tabs goal-tabs-nav-bar"><li class="nav-item {{tab.itemClass}}" ng-repeat="tab in data" ng-click=onClick(tab)><span class=nav-link ng-class="{\'active\': currentTabKey==tab.key}" ng-if=!tab.isButton><span ng-if=tab.icon class=material-icons>{{tab.icon}}</span> <span class="nav-item-title {{tab.class}}">{{tab.title | translate}}</span></span> <button type=button data-icon={{tab.icon}} ng-if=tab.isButton class="btn btn-text" ng-class="{\'highlight\':currentTabKey==tab.key}">{{tab.title | translate}}</button><div class=selected-tab-indicator ng-class="{\'active\': !tab.isButton && currentTabKey==tab.key}"></div></li></ul>'),e.put("app/directives/pagination.html",'<ul class=pagination><li class=rows-per-page translate="Rows per page"></li><li class=page-size><select ng-model=vm.pageSize ohrm-select not-scrollable=true ng-change=vm.updatePageSize(vm.pageSize)><option ng-repeat="size in vm.sizes" value={{size}} ng-bind=size></option></select></li><li class=summary ng-if="vm.count != 0">{{vm.start}} - {{vm.end}} {{\'of\' | translate}} {{vm.count}}</li><li class=summary ng-if="vm.count == 0">0 - 0 {{\'of\' | translate}} 0</li><li class=waves-effect ng-if="vm.page > 1"><a ng-click=vm.prevPage() title="{{\'Previous Page\' | translate}}"><i class=material-icons>chevron_left</i></a></li><li class=waves-effect ng-if="vm.page < vm.lastPage"><a ng-click=vm.nextPage() title="{{\'Next Page\' | translate}}"><i class=material-icons>chevron_right</i></a></li></ul>'),e.put("app/directives/pay-hours-panel.html",'<div ng-if="vm.payHours !== undefined && vm.payHours != 0" id=payHoursPanel class="ohrm-card row detailed-timesheets"><div class="col l2 m2 s12 pay-hours-component-heading"><span translate="Pay Hours"></span></div><div class="col l10 m12 s12 pay-hours-component-container"><div class="col l2 m2 s12 pay-hours-component" ng-repeat="payHoursPerCode in vm.payHours"><span><span class="pay-code-value tooltipped" data-position=bottom data-tooltip="{{payHoursPerCode.description | translate}}"><div class=wrapped>{{payHoursPerCode.code}}</div></span></span> <span class=pay-hours-duration>{{payHoursPerCode.duration}}</span></div></div></div>'),e.put("app/directives/pim_document_manager_button.html",'<div ng-if="vm.visible && !vm.isOxd" style="display: inline"><a class=btn ng-click=showDocumentModal()>{{ \'Create Document\' | translate}}</a></div><button type=button class="btn btn-list square-btn" ng-if="vm.visible && vm.isOxd" id=createDocumentButton ng-click=showDocumentModal()><i class=material-icons>ohrm_writing</i> <span translate="Create Document"></span></button>'),e.put("app/directives/progress-indicator-expand-popover.html","<div id=progressIndicatorExpandPopover show-modal-as-popover=modal.clickEvent position=\"'right'\" class=modal tabindex=-1 role=dialog><oxd-modal-with-form modal-title={{modal.title}} form-schema=modal.schema form=modal.form model=modal.model show-header=true show-footer=true modal-size-class=popover-xsm save-button-label=Ok on-save=modal.save show-close-button=false></oxd-modal-with-form></div>"),e.put("app/directives/progress-indicator.html",'<span class=progress-indicator-container><span class=round-slide-container><round-slide ng-if=config ng-model=value config=config></round-slide></span> <span class="material-icons expand-icon" ng-if=progressParams.progressEditable(object) ng-click=vm.showExpandedView($event)>keyboard_arrow_down</span></span>'),e.put("app/directives/select-employees.html",'<div id=selectEmployeeComponent class=oxd-list-holder><div class="pim-container oxd-list"><div class="row list-wrapper"><div class="col-3 list-left-panel"><h4 id=employeeFilterFormHeading>{{heading | translate}}</h4><div id=employeeFilterFormLabelHolder><label>{{\'Filters\' | translate}}</label> <button type=button class="btn btn-list" ng-click=vm.resetFilters()><i class=material-icons oxd-tooltip title="{{\'Reset\' | translate}}" data-placement=bottom>refresh</i></button></div><hr><form name=employeeFilterForm sf-schema=vm.schema sf-form=vm.form sf-model=vm.model sf-use-decorator=oxdDecorator hide-empty-form-elements></form></div><div class="col-9 list-right-panel"><list template=oxd-list.html objs=vm.listData listdata=vm.listDefinition initialsortfield=vm.orderField initialsortorder="\'ASC\'" extracontroller=vm></list></div><div class=list-footer-separator><hr></div><div class="col-6 bottom-left-action-panel"><a ng-if=onBackButtonClick class="btn btn-text" ng-click=onBackButtonClick()><i class=material-icons>arrow_back</i>{{\'Back\' | translate}}</a></div><div class="col-6 bottom-right-action-panel"><a ng-if=onCancelButtonClick class="btn btn-text" ng-click=onCancelButtonClick()>{{\'Cancel\' | translate}}</a> <a ng-if=onEmployeeSelect href class="btn btn-secondary" ng-class="{\'disabled\': vm.isEmployeeSelectButtonDisabled()}" ng-click="onEmployeeSelect(vm.selectedEmpNumbers, vm.model)">{{vm.getEmployeeSelectButtonLabel()}}</a></div></div></div></div>'),e.put("app/directives/table-column-horizontal-scroll-buttons.html",'<div ng-if=isScrollable() class=next-previous-icons-for-horizontal-scroll><i class="material-icons scroll-left-icon disabled" ng-class="{disabled: !scrollableToLeft}" ng-click=scrollLeft()>navigate_before</i> <i class="material-icons scroll-right-icon" ng-class="{disabled: !scrollableToRight}" ng-click=scrollRight()>navigate_next</i></div>'),e.put("app/directives/timesheet-actions.html",'<div class="row right"><div class="col s1 workflowActionButton" ng-if="value!=\'View\'" ng-repeat="(key, value) in allowedActions"><a class="waves-effect waves-teal btn primary-btn" type=button ng-click=actionCallback(key)>{{value | translate}}</a></div></div>'),e.put("app/directives/timesheet-container.html","<div id=listOfActivities><div hl-sticky class=\"floating-heading row\" container=listOfActivities offset-top=55><div class=\"row section\"><div class=\"col s6 dayOffLegend\"><div class=col><span>H - {{'Holiday' | translate}}</span></div><div class=col><span>L - {{'Leave' | translate}}</span></div><div class=col><span>W - {{'Weekend' | translate}}</span></div><div class=col><ul class=color-legend-holder><li class=fullDayOff></li></ul><span class=legendDescription>{{'Full day-off' | translate}}</span></div><div class=col><ul class=color-legend-holder><li class=partialDayOff></li></ul><span class=legendDescription>{{'Partial day-off' | translate}}</span></div></div><div class=\"col s6 timesheetActions\"><timesheet-actions action-callback=actionCallback allowed-actions=timesheetMeta.AllowedWorkflowActions></timesheet-actions></div></div><div class=\"row activityHeading\"><div class=\"col s4\"><b>{{'Project' | translate}}</b></div><div class=\"col s4\"><b>{{'Activity' | translate}}</b></div><div class=\"col s1 reducedHeadingPadding\"><b>{{'From' | translate}}</b></div><div class=\"col s1 reducedHeadingPadding\"><b>{{'To' | translate}}</b></div><div class=\"col s1 noLeftPadding\"><b>{{'Duration' | translate}}</b></div><div class=\"col push-s1\"></div></div><hr class=horizontal-divided-section></div><timesheet-items-day ng-class=\"{'fullDayOff': vm.isFullDayOff(date), 'partialDayOff': vm.isPartialDayOff(date)}\" timesheet-items=timesheetItems ng-repeat=\"date in vm.dates | orderBy:'+'\" date=date projects=projects project-activities=projectActivities common-activities=commonActivities read-only=vm.isReadOnly() break-type-common-activities=breakTypeCommonActivities day-off-status=dayOffStatus></timesheet-items-day></div>"),e.put("app/directives/timesheet-item.html",'<div class=row ohrm-click-outside=vm.deactivateTimesheetForm() unique-name=timesheetItem.uuid><form ng-if=vm.formAvailable name=timesheetItemForm sf-schema=vm.timesheetItemSchema sf-form=vm.timesheetItemForm sf-model=timesheetItem><div class="col s4" sf-insert-field="[\'projectId\']"></div><div class="col s4 activityWidget" sf-insert-field="[\'activityId\']"></div><div class="col s1" sf-insert-field="[\'startTime\']"></div><div><span class=toFromSeparator>-</span></div><div class="col s1" sf-insert-field="[\'endTime\']"></div><div class="col s1" sf-insert-field="[\'duration\']"></div></form><div ng-click=vm.makeCurrentTimesheetFormActive() class=timesheetItemReadOnly ng-if=!vm.formAvailable><div class="col s4" ng-click=vm.makeCurrentTimesheetFormActive()><lable>{{vm.getProjectName(timesheetItem.projectId)}}</lable></div><div class="col s4" ng-click=vm.makeCurrentTimesheetFormActive()><lable>{{vm.getActivityName(timesheetItem.activityId)}}</lable></div><div class="col s1 timeLable" ng-click=vm.makeCurrentTimesheetFormActive()><lable>{{::(timesheetItem.startTime ? timesheetItem.startTime : \'\')}}</lable></div><div class="col s1 timeLable" ng-click=vm.makeCurrentTimesheetFormActive()><lable>{{::(timesheetItem.endTime ? timesheetItem.endTime : \'\')}}</lable></div><div class="col s1" ng-click=vm.makeCurrentTimesheetFormActive()><lable>{{::timesheetItem.duration}}</lable></div></div><div class="col s1 timesheetItemActions"><div ng-click=vm.showComment(timesheetItem)><i ng-show="(timesheetItem.comment == null || timesheetItem.comment == \'\') && !readOnly" class="material-icons action-icon tooltipped" data-tooltip="{{\'Comment\' | translate}}">add_comment</i> <i ng-show="!(timesheetItem.comment == null || timesheetItem.comment == \'\')" class="material-icons action-icon tooltipped" data-tooltip="{{\'Comment\' | translate}}">comment</i></div><div ng-if="!readOnly && vm.isItemCopyAllowed()" ng-click=vm.copyTimesheetItem(timesheetItem)><i class="material-icons action-icon tooltipped" data-tooltip="{{\'Copy Activity\' | translate}}">content_copy</i></div><div ng-if="!readOnly && !vm.isItemCopyAllowed()"><i class="material-icons disabled">content_copy</i></div><div ng-if=!readOnly ng-click=vm.removeTimesheetItem(timesheetItem)><i class="material-icons action-icon tooltipped" data-tooltip="{{\'Remove Activity\' | translate}}">remove_circle</i></div></div></div>'),e.put("app/directives/timesheet-items-day.html",'<div class=timesheetDayUnit><div class=dateSection><span class=timesheetDay>{{vm.day | translate }}</span><div class=timesheetDate ng-class="{\'working-day\': !(vm.isPartialDayOff()||vm.isFullDayOff()) }"><b>{{date.split("-")[2]}}</b> <span class=dayOffStatus ng-if="(vm.getDayOffStatus() !=\'\')">{{vm.getDayOffStatus()}}</span></div></div><div class="row timesheetItemsDayHeaderRow"><div class="col s10" ng-hide=readOnly><a class=addActivity ng-click=vm.addTimesheetItem(date)>+ {{\'Add Activity\' | translate}}</a></div><div class="col s2 totalPerDayTime" ng-class="{\'push-s10\': readOnly}"><div ng-show="!vm.moreThan24Hours(date, timesheetItems)">{{vm.totalDayTime(date, timesheetItems)}}</div><div ng-show="vm.moreThan24Hours(date, timesheetItems)" class="help-block tooltipped" data-tooltip="{{\'Total Time Excedes a Day\'| translate}}" data-position=bottom>{{vm.totalDayTime(date, timesheetItems)}}</div></div></div><timesheet-item ng-cloak ng-repeat="timesheetItem in timesheetItems | orderBy: vm.orderByFromTime track by timesheetItem.uuid" ng-if="timesheetItem.date.toISOString().split(\'T\')[0] == date" timesheet-item=timesheetItem projects={{projects}} project-activities=projectActivities common-activities=commonActivities copy-timesheet-item-callback=vm.copyTimesheetItem remove-timesheet-item-callback=vm.removeTimesheetItem time-overlapping-validator=vm.validateTimeOverlapping read-only=readOnly></timesheet-item></div><div class=divideHolder><hr class=horizontal-divided-section></div>'),e.put("app/directives/tree-table.html",'<div ng-if=listData.permission.read class=form-div><div class=list-container><table id={{listData.tableId}} class="highlight bordered" style="position: relative;" ng-if="objs.length > 0 || listData.showColumnsAnyway"><colgroup ng-if=listData.columnWidths><col span=1 ng-repeat="widthValue in ::listData.columnWidths track by $index" ng-style="{\'width\': widthValue}"></colgroup><thead><tr><th class=list-options data-field=id ng-if="listData.selectable && (list.hasPermissions(listData.listActions) || listData.configurable)"><a class=dropdown-button href ng-attr-data-activates=listdirective-options-dropdown-{{listData.name}} dropdown data-constrainwidth=false><i class="material-icons icons-color" ng-class="{\'orange-text\': listData.selected.length > 0}">more_horiz</i></a></th><th ng-repeat="listField in ::listData.listFields" width={{listField.width}} data-field={{listField.name}} ng-click="list.fetchData(listField.name, listField.sortAction, listField.sortable, listData.pagination)" class="{{listField.class}} row-name" ng-class="{sortable: listField.sortable, expandable:listField.name==listData.expandableField}" ng-if="listField.hideField==true?false:true">{{listField.lable| translate}} <span ng-if=listData.pagination>{{list.setPaginationValues(listField.name, listField.sortAction, listField.sortable, listData.pagination)}} {{list.AddSortableFields(listField.name)}}</span> <i ng-if="listField.sortable && (list.sortField === undefined || list.sortField == listField.name)" class="material-icons list-sorting-icons tiny">{{list.getSortIcon(listField.name)}}</i></th><th ng-repeat="TH in ::listData.extraTH" colspan={{TH.colspan}} style=width:{{TH.width}} translate={{TH.heading}}></th></tr></thead><tbody><tr data-tt-id={{obj.id}} data-tt-parent-id=-1 data-tt-branch={{obj.isBranch}} ng-repeat="obj in objs track by list.itemTracker(obj, listData.idGetter)" ng-class="{\'grey\':obj.selected ,\'lighten-5\':obj.selected}"><td ng-if="listData.selectable && list.hasPermissions(listData.listActions)"><input type=checkbox class=filled-in ng-model=obj.selected id="checkbox_{{listData.name}}_{{list.itemTracker(obj, listData.idGetter)}}" ng-if=list.isItemSelectable(obj) ng-change="list.runAction(\'changeSelection\', {obj:obj, name:listData.name})"> <label for="checkbox_{{listData.name}}_{{list.itemTracker(obj, listData.idGetter)}}" class></label></td><td ng-if="listData.selectable && (!list.hasPermissions(listData.listActions) && listData.configurable)"></td><td ng-if="listField.hideField==true?false:true" ng-repeat="listField in ::listData.listFields" class={{listField.class}} ng-class="{truncate: listField.truncate, tooltipped: listField.truncate, \'cursor-pointer\': listField.clickAction}" ng-attr-data-tooltip="{{::listField.truncate ? getFieldValue(obj, listField.getter, listField.formatter, listField.filters) : undefined}}" ng-attr-data-position="{{listField.truncate ? \'bottom\' : undefined}}" ohrm-cell data="::getFieldValue(obj, listField.getter, listField.formatter, listField.filters)" list-field=listField obj=obj rowid=obj.id name=listField.name type=listField.type extracontroller=extracontroller url="getFieldValue(obj, listField.getter, listField.formatter, listField.filters, listField.link)"></td><td ng-repeat="TD in ::listData.extraTD" class="{{TD.class}} tooltipped" ng-click="list.runAction(TD.clickAction, obj)" ng-if="TD.hideIf === undefined || TD.hideIf(obj)" data-tooltip="{{::(list.getTDTooltip(TD.tooltip, obj)) | translate}}" data-delay="{{list.getTDTooltip(TD.tooltip, obj)?\'\':\'99999\'}}" data-position=bottom><i ng-if="TD.class==\'edit_item\'?true:false" class=material-icons>ohrm_edit</i><div></div><i ng-if="list.typeOf(TD.icon)===\'function\'?TD.icon(obj):TD.icon" class="material-icons action-icon icon-color" ng-class="{disabled: (list.typeOf(TD.disabled)===\'function\'?TD.disabled(obj):TD.disabled)}">{{list.typeOf(TD.icon)===\'function\'?TD.icon(obj):TD.icon}}</i><div></div></td></tr></tbody><tfoot ng-if="listData.showFooter && objs.length>0"><tr><td ng-repeat="footer in ::listData.footerList" class={{footer.class}} colspan={{footer.colspan}}>{{footer.data}}</td></tr></tfoot></table><ul class="pagination {{list.browserType}}" ng-if=listData.pagination><li class=rows-per-page>{{\'Rows per page\'| translate}}</li><li class=page-size><select class={{list.browserType}} ng-model=list.pageSize ohrm-select not-scrollable=true ng-change=list.fetchBy()><option ng-repeat="pageSize in ::list.sizes" value={{pageSize}}>{{pageSize}}</option></select></li><li class=summary>{{list.getCurrentPageText()}}</li><li class=waves-effect ng-if=list.isPrevPageNeed()><a ng-click=list.prevPage()><i class=material-icons>chevron_left</i></a></li><li class=waves-effect ng-if=list.isNextPageNeed()><a ng-click=list.nextPage()><i class=material-icons>chevron_right</i></a></li></ul></div></div><floating-add-button ng-if=listData.addActions actions=listData.addActions add-action-fn=list.callAddAction></floating-add-button><ul ng-attr-id=listdirective-options-dropdown-{{listData.name}} ng-if=listData.selectable class=dropdown-content><li ng-if="(list.hasPermissions(listData.listActions) && listData.unselectableIds.length+listData.selected.length < objs.length)" id=listdirective-options-dropdown-select-all><a href ng-click="list.runAction(\'selectAll\', listData.name)">{{\'Select All\'| translate}}</a></li><li ng-if="(list.hasPermissions(listData.listActions) && listData.selected.length > 0)" id=listdirective-options-dropdown-deselect-all><a href ng-click="list.runAction(\'deselectAll\', listData.name)">{{\'Deselect All\'| translate}}</a></li><li ng-if=listData.configurable id=listdirective-options-configure-list><a href ng-click=list.listConfigOptionDirectiveController(listData.listConfigData)>{{\'Configure\'| translate}}</a></li><li id=listdirective-options-dropdown-{{listData.name}}-action-{{listAction.action}}} ng-if="listAction.actionPermission && listData.selected.length > 0" ng-repeat="listAction in listData.listActions"><a href ng-click="list.runAction(listAction.action, listData.name)">{{listAction.lable| translate}}</a></li></ul><table id="{{listData.tableId+\'SubItems\'}}" style="display: none"><tbody><tr data-tt-id={{subItem.id}} data-tt-parent-id={{subItem.parentId}} data-tt-branch={{subItem.isBranch}} ng-repeat="subItem in subItems track by list.itemTracker(subItem, listData.idGetter)" ng-class="{\'grey\':subItem.selected ,\'lighten-5\':subItem.selected}"><td ng-if="listData.selectable && list.hasPermissions(listData.listActions)"></td><td ng-if="listData.selectable && (!list.hasPermissions(listData.listActions) && listData.configurable)"></td><td ng-if="listField.hideField==true?false:true" ng-repeat="listField in ::listData.listFields" class={{listField.class}} ng-class="{truncate: listField.truncate, tooltipped: listField.truncate, \'cursor-pointer\': listField.clickAction}" ng-attr-data-tooltip="{{::listField.truncate ? getFieldValue(subItem, listField.getter, listField.formatter, listField.filters) : undefined}}" ng-attr-data-position="{{listField.truncate ? \'bottom\' : undefined}}" ohrm-cell data="::getFieldValue(subItem, listField.getter, listField.formatter, listField.filters)" list-field=listField obj=subItem rowid=subItem.id name=listField.name type=listField.type extracontroller=extracontroller url="getFieldValue(subItem, listField.getter, listField.formatter, listField.filters, listField.link)"></td><td ng-repeat="TD in ::listData.extraTD" class="{{TD.class}} tooltipped" ng-click="list.runAction(TD.clickAction, subItem)" ng-if="TD.hideIf === undefined || TD.hideIf(subItem)" data-tooltip="{{::(list.getTDTooltip(TD.tooltip, subItem)) | translate}}" data-delay="{{list.getTDTooltip(TD.tooltip, subItem)?\'\':\'99999\'}}" data-position=bottom><i ng-if="TD.class==\'edit_item\'?true:false" class=material-icons>ohrm_edit</i><div></div><i ng-if="list.typeOf(TD.icon)===\'function\'?TD.icon(subItem):TD.icon" class="material-icons action-icon icon-color" ng-class="{disabled: (list.typeOf(TD.disabled)===\'function\'?TD.disabled(subItem):TD.disabled)}">{{list.typeOf(TD.icon)===\'function\'?TD.icon(subItem):TD.icon}}</i><div></div></td></tr></tbody></table>'),e.put("app/noncore/nonecore.html","<iframe id=noncoreIframe iframe-src={{vm.url}} ng-show=vm.showIframe ng-class=\"{'menu-visible' : shell.showMenu}\" ohrm-iframe-on-load=vm.onIframeLoad(event)></iframe>"),e.put("app/performance/delete_confirmation.html","<div id=delete_confirmation_modal class=\"modal confirm-dialog\"><div class=modal-content><h4></h4><p>{{'You are about to delete data permanently. Are you sure you want to continue?' | translate}}</p></div><div class=modal-footer><a href ng-click=modal.cancel() class=\"modal-action modal-close waves-effect btn\">{{'No, Cancel' | translate}}</a> <a href ng-click=modal.confirm() class=\"modal-action modal-close waves-effect btn primary-btn\">{{'Yes, Delete' | translate}}</a></div></div>"),e.put("app/pim/attachment_modal.html","<div class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title={{modal.title}} show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-md></generic-oxd-modal></div>"),e.put("app/pim/delete_confirmation.html","<div id=delete_confirmation_modal class=\"modal confirm-dialog\"><div class=modal-content><h4></h4><p>{{'You are about to delete data permanently. Are you sure you want to continue?' | translate}}</p></div><div class=modal-footer><a href ng-click=modal.cancel() class=\"modal-action modal-close waves-effect btn\">{{'No, Cancel' | translate}}</a> <a href ng-click=modal.confirm() class=\"modal-action modal-close waves-effect btn primary-btn\">{{'Yes, Delete' | translate}}</a></div></div>"),e.put("app/pim/profile.html","<div ui-view class=pim-container ng-cloak autoscroll=true></div>"),e.put("app/widgets/autocomplete-location.html",'<div spellcheck=false style=height:auto; class=multyselect-autocomplete-holder><div class><div class=multy-select-container keyboard-navigation><input autocomplete=off style="width: 100%;" placeholder="{{\'Type for hints...\' | translate}}" class="multiselect-autocomplete topnav-autocomplete" ng-click=filterItems(input_name) ng-change=filterItems(input_name) ng-model=input_name data-activates=dropdown-multyselect type=text><div ng-repeat="item in selectedItems" class="col l3 grey lighten-4 valign-wrapper choice-item" data-item-id={{item.id}} style="border-radius: 30px; height: 35px; margin-top: 5px; width: auto; float:left;"><p class="grey-text text-darken-2 choice-text" style="margin-left: 10px;">{{item.name.toString().trim()}}</p><div class=black-text style="margin-left: 10px; height:14px"><i ng-click=removeItem(item.id) class="material-icons tiny remove-employee" style=cursor:pointer>close</i></div></div></div></div><ul id=dropdown-multyselect class=dropdown-content><li ng-repeat="item in filteredList" id={{item.id}}><a ng-class="{\'noResultsFound\': item == noResultsFoundObject}" ng-click="selectItem($event, item)" ng-bind-html=getStyledName(item)></a></li></ul></div><style>\n    input.multiselect-autocomplete:focus {\n        box-shadow: none !important;\n    }\n\n    div.multy-select-container {\n        font-size: 14px;\n        border: none;\n        margin-top: 0px;\n    }\n\n    div.multy-select-container:focus {\n        font-size: 14px;\n        border: none;\n    }\n</style>'),e.put("app/widgets/autocomplete-subunit.html",'<div spellcheck=false style=height:auto; class=multyselect-autocomplete-holder><div class><div class=multy-select-container><div ng-repeat="item in selectedItems" class="col l3 grey lighten-4 valign-wrapper choice-item" data-item-id={{item.id}} style="border-radius: 30px; height: 35px; margin-top: 5px; width: auto; float:left;"><p class="grey-text text-darken-2 choice-text" style="margin-left: 10px;">{{item.name.toString().trim()}}</p><div class=black-text style="margin-left: 10px; height:14px"><i ng-click=removeItem(item.id) class="material-icons tiny remove-employee" style=cursor:pointer>close</i></div></div><input style="width: 200px;" placeholder="{{\'Type for hints...\' | translate}}" class=multiselect-autocomplete ng-model=input_name data-activates=dropdown-multyselect type=text></div></div><ul id=dropdown-multyselect class=dropdown-content><li ng-repeat="item in items"><a ng-click=selectItem(item.value)>{{item.label}}</a></li></ul></div><style>\n    input.multiselect-autocomplete:focus {\n        box-shadow: none !important;\n    }\n    div.multy-select-container {\n        font-size: 14px;\n        border: none;\n        margin-top: 0px;\n    }\n    div.multy-select-container:focus {\n        font-size: 14px;\n        border: none;\n    }\n</style>'),e.put("app/widgets/autocomplete.html",'<div spellcheck=false style=height:auto; class=multyselect-autocomplete-holder><div class><div class=multy-select-container keyboard-navigation><div class=input-group><input autocomplete=off style="width: 100%;" placeholder="{{ (placeholder? placeholder : \'Type for hints...\') | translate}}" class="multiselect-autocomplete topnav-autocomplete" ng-click=filterItems(input_name) ng-change=filterItems(input_name) ng-model=input_name data-activates=dropdown-multyselect type=text><div class=multiselect-search-icon ng-if=showSearchIcon><i class=material-icons>search</i></div></div><div ng-repeat="item in selectedItems" class="col l3 grey lighten-4 valign-wrapper choice-item" data-item-id={{item.id}} style="border-radius: 30px; min-height: 35px; margin-top: 5px; width: auto; float:left;"><p ng-if=!item.employeeId class="grey-text text-darken-2 choice-text" style="margin-left: 10px;">{{item.displayValue ? item.displayValue.toString().trim(): item.name.toString().trim()}}</p><p ng-if=item.employeeId class="grey-text text-darken-2 choice-text" style="margin-left: 10px;"><span class=choice-item-title>{{item.displayValue ? item.displayValue.toString().trim(): item.name.toString().trim()}} &nbsp;</span><span class=choice-item-employee-id>{{item.employeeId.toString().trim()}}</span></p><div class=black-text style=height:14px><i ng-click=removeItem(item.id) class="material-icons tiny remove-employee" style=cursor:pointer>close</i></div></div></div></div><ul id=dropdown-multyselect class=dropdown-content><li ng-repeat="item in filteredList" id={{item.id}}><a ng-class="{\'noResultsFound\': item == noResultsFoundObject, \'contains-employee-id\': item.employeeId !== undefined}" ng-click="selectItem($event, item)" ng-bind-html=getStyledName(item)></a></li></ul></div><style>\n    input.multiselect-autocomplete:focus {\n        box-shadow: none !important;\n    }\n\n    div.multy-select-container {\n        font-size: 14px;\n        border: none;\n        margin-top: 0px;\n    }\n\n    div.multy-select-container:focus {\n        font-size: 14px;\n        border: none;\n    }\n</style>'),
e.put("app/widgets/oxd-multiselect-dropdown-text.html",'<div ng-if=selectedItems.length class="col-10 row" style="margin-top: 0.75rem"><div class=col-4 style="padding-left: 0"><label>{{\'Value\'|translate}}<em>*</em></label></div><div class=col-4><label>{{\'Name\'|translate}}<em>*</em></label></div></div><div ng-repeat="item in selectedItems" class="col-10 row form-group" data-item-id=attribute_statement_{{item.id}}><div class="col-4 input-group form-select"><select id=select_item_id_{{item.id}} ng-class="{\'ng-invalid ng-dirty\' : !item[\'token_id\'] || isDuplicateToken(item.token_id)}" oxd-select value={{item.token_id}} class=select-dropdown ng-model=item.token_id ng-options="select.token_id as select.displayName | translate for select in itemsInput" name=select_item_name_{{item.id}} ng-change=selectChange(item)></select><div class=input-group-append-container><div class=input-group-append><button class=btn type=button tabindex=-1><i class="selected-item-icon material-icons"></i> <i class=material-icons>arrow_drop_down</i></button></div></div><span ng-if="!item[\'token_id\']" class=invalid-feedback sf-message=textRequiredMessage></span> <span ng-if="item[\'token_id\'] && isDuplicateToken(item.token_id)" class=invalid-feedback sf-message=textDuplicateMessage></span></div><div class=col-7><div oxd-tooltip data-placement=bottom title={{form.tooltip}} class=text-input-field-container ng-class="{\'tooltipped\': form.tooltip}"><input materializecss-input ng-class="{\'ng-invalid ng-dirty\' : !item[\'claim_name\'] || item[\'claim_name\'].length > 255 || isDuplicateName(item.claim_name)}" id=text_item_id_{{item.id}} class=form-control type=text ng-model=item.claim_name value={{item.claim_name}} ng-change=textChange(item) placeholder={{placeholder}} name=text_item_name_{{item.id}}> <span ng-if=form.helpText class={{form.helpTextClass}}>{{form.helpText}}</span> <span ng-if="!item[\'claim_name\']" class=invalid-feedback sf-message=textRequiredMessage></span> <span ng-if="(item[\'claim_name\'].length > 255)" class=invalid-feedback sf-message=textLengthMessage></span> <span ng-if="item[\'claim_name\'] && (item[\'claim_name\'].length < 256) && isDuplicateName(item.claim_name)" class=invalid-feedback sf-message=textDuplicateMessage></span></div></div><div ng-if="selectedItems.length > 1" class=col-1><button class="btn btn-text" tabindex=-1 style="margin-top: 0.125rem" ng-click=removeItem(item.id) title="{{\'Delete\' | translate}}" oxd-tooltip data-placement=bottom aria-label="{{\'Delete\' | translate}}"><i class=material-icons>delete</i></button></div></div><div class=row ng-if="ctrl.$error[\'validateStatement\']"><span class=invalid-feedback sf-message=textRequiredMessage></span></div><div><button class="btn btn-text btn-sm" ng-click=addItem()><span class=material-icons>add</span> <span class=button-text>{{"Add Another" | translate}}</span></button></div>'),e.put("app/widgets/oxd-multiselect.html",'<div spellcheck=false style=height:auto; class=multyselect-autocomplete-holder><div class><div class=multi-select-container keyboard-navigation><div class=input-group><input autocomplete=off style="width: 100%;" placeholder="{{ (placeholder? placeholder : \'Type for hints...\') | translate}}" class="multiselect-autocomplete topnav-autocomplete form-control" ng-click=filterItems(input_name) ng-change=filterItems(input_name) ng-model=input_name data-activates=dropdown-multyselect ng-class="{\'ng-invalid\': (key && key.length > 0 && $parent.ngModel.$invalid) || ctrl.$invalid}" ng-blur="setDirty() && setValidationState()" ng-disabled=ngDisabled type=text><div class=multiselect-search-icon ng-if=showSearchIcon><i class=material-icons>search</i></div><ul id=dropdown-multyselect class="dropdown-menu oxd-multiselect-dropdown-content"><li ohrm-disable-animation ng-repeat="item in filteredList" id={{item.id}} ng-class="{\'noResultsFound\': (filteredList.length && filteredList.length == 1 && filteredList[0] == noResultsFoundObject) }"><a ng-class="{\'noResultsFound\': item == noResultsFoundObject, \'contains-employee-id\': item.employeeId !== undefined}" ng-click="selectItem($event, item)" ng-bind-html=getStyledName(item)></a></li></ul></div><div ng-repeat="item in selectedItems" class=multiselect-selected-item data-item-id={{item.id}}><p ng-if=!item.employeeId class=choice-text>{{item.displayValue ? item.displayValue.toString().trim(): item.name.toString().trim()}}</p><p ng-if=item.employeeId class=choice-text><span class=choice-item-title>{{item.displayValue ? item.displayValue.toString().trim(): item.name.toString().trim()}} &nbsp;</span><span class=choice-item-employee-id>({{item.employeeId.toString().trim()}})</span></p><button ng-if=!ngDisabled type=button class="btn btn-remove-item" aria-label=Remove ng-click=removeItem(item.id)><i class=material-icons>cancel</i></button></div></div></div></div>'),e.put("app/widgets/oxd-report-group-widget.html",'<div class="form-group report-widget-group-root"><label class=active translate={{filter.label}}></label><div class=sub-widget-holder><div class="card-top-bar main-dropdown-holder"><div title="{{filter.title | translate}}" oxd-tooltip data-placement=bottom class="icon-holder dropdown-button dropdown-toggle" data-toggle=dropdown><i class=material-icons>ohrm_switch</i></div><ul class=dropdown-menu><li ng-repeat="(key, choice) in filter.choices" class=dropdown-item ng-class="{active: isWidgetActive(key)}" ng-click=switchWidget(key)><div><span>{{choice | translate}}</span></div></li></ul></div><div ng-repeat="(key, dependent) in filter.dependents" class="input-field col s{{3*getWidgetLengthMultiplier(filter.type)}}" ng-if=isWidgetActive(key) report-filter-field template=oxd-filter-field-directive.html filter=dependent form-name=formName filter-name={{key}} value=modelValue></div></div></div>'),e.put("app/widgets/report-group-widget.html",'<div class="col s1" style="margin-top: 14px"><a class=dropdown-button title="{{filter.title | translate}}" oxd-tooltip data-placement=bottom data-constrainwidth=false data-activates=widget_group_options_{{randomInt}} dropdown><i class=material-icons>ohrm_switch</i></a><ul id=widget_group_options_{{randomInt}} class=dropdown-content><li ng-repeat="(key, choice) in filter.choices" ng-class="{\'selected\':isWidgetActive(key)}"><a ng-click=switchWidget(key)>{{choice | translate}}</a></li></ul></div><div ng-repeat="(key, dependent) in filter.dependents" class="input-field col s{{5*getWidgetLengthMultiplier(dependent.type)}}" ng-if=isWidgetActive(key) report-filter-field filter=dependent form-name=formName filter-name={{key}} value=modelValue></div>'),e.put("app/widgets/widget-header.html",'<div class=widget-head><div class="page-title pull-left">{{title}}</div><small class=page-title-subtle ng-show=subtitle>({{subtitle}})</small><div class="widget-icons pull-right"></div><small class="pull-right page-title-subtle" ng-show=rightText>{{rightText}}</small><div class=clearfix></div></div>'),e.put("app/admin/applicationChangeLog/viewApplicationChangeLog.html","<div class=pim-container><div id=applicationChangeLogDiv><crud-panel panelinfo=applicationChangeLogCtrl.panelInfo.applicationChangeLogInfo objs=applicationChangeLogCtrl.applicationChangeLog listdata=applicationChangeLogCtrl.listData.applicationChangeLog extracontroller=applicationChangeLogCtrl></crud-panel></div></div>"),e.put("app/admin/auditTrail/auditTrail.html","<div class=pim-container><div id=auditTrailDiv class=auditTrailContainer><crud-panel panelinfo=auditTrailCtrl.panelInfo.auditTrailInfo objs=auditTrailCtrl.auditTrailRecords listdata=auditTrailCtrl.listData.auditTrailRecords initialsortfield=\"'dateAndTime'\" extracontroller=auditTrailCtrl></crud-panel></div></div>"),e.put("app/admin/auditTrail/auditTrailSearch.html",'<div class="modal modal-fixed-footer" style="width: 60%; height: 75%; max-height: 75%"><h4>{{\'Filter Audit Trail\' | translate}}</h4><form name=auditTrailModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a> <a href ng-click=modal.search(auditTrailModalForm) class="modal-action waves-effect btn primary-btn">{{\'Search\'| translate}}</a> <a href ng-click=modal.exportCSV(auditTrailModalForm) class="modal-action waves-effect btn primary-btn">{{\'Export\'| translate}}</a> <a href ng-click=modal.reset() class="modal-action modal-close waves-effect btn">{{\'Reset\'| translate}}</a></div></form></div>'),e.put("app/admin/auditTrail/auditTrail_list_navbar.html",'<ul><li ng-if=navbar.permissions.read><a href ng-click=navbar.filter() class="action-icon tooltipped" data-tooltip="{{\'Filter\' | translate}}" data-position=bottom><i class=material-icons>oxd_filter</i></a></li></ul>'),e.put("app/admin/changeUserPassword/change_user_password.html",'<div id=change_user_password class=pim-container><div class=form-div><h4>{{ChangeUserPasswordCtrl.title | translate}}</h4><form name=ChangeUserPasswordForm><div sf-schema=ChangeUserPasswordCtrl.schema sf-form=ChangeUserPasswordCtrl.form sf-model=ChangeUserPasswordCtrl.model ng-submit=ChangeUserPasswordCtrl.onSubmit(ChangeUserPasswordForm)></div><div class="row schema-form-section form-buttons"><div class=right-align><a id=systemUserSaveBtn href ng-click=ChangeUserPasswordCtrl.onSubmit(ChangeUserPasswordForm); class="waves-effect waves-green btn primary-btn col right change-password-save-button">{{\'Save\' | translate}}</a> <a href ng-click=ChangeUserPasswordCtrl.cancel() class="waves-effect waves-green btn col right cancel">{{\'Cancel\' | translate}}</a></div></div></form></div></div>'),e.put("app/admin/companyStructure/company_structure.html",'<div class=org_structure ng-if=CompanyStructureCtrl.permissions.update><div href ng-click=CompanyStructureCtrl.editTree() style="float: right" class="waves-effect btn primary-btn" ng-class="{ \'edit-btn\' : !CompanyStructureCtrl.editMode }">{{CompanyStructureCtrl.btnAction|translate}}</div><div js-tree=CompanyStructureCtrl.treeConfig style="clear: both;margin-top:30px;" ng-model=CompanyStructureCtrl.treeData tree=CompanyStructureCtrl.treeInstance tree-events-obj=CompanyStructureCtrl.treeEventsObj class=ng_tree></div></div>'),e.put("app/admin/companyStructure/subunit_modal.html",'<div id=modal1 class="modal modal-fixed-footer" style="height:75%; max-height: 75%;"><h4>{{ modal.title | translate}}</h4><form name=subunitModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(subunitModalForm); form-name=subunitModalForm close-modal-on-click=subunitModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/admin/configureCalendarFeed/icalendar.html","<div class=pim-container><div id=iCalendarFormDiv class=\"oxd-form-container oxd-panel\" ng-if=iCalendar.dataFetched><div class=formHeading><h4>{{'iCalendar' | translate}}</h4></div><form name=iCalendarForm id=inAppMarketingForm><div class=card-content><div sf-schema=iCalendar.schema sf-form=iCalendar.form sf-model=iCalendar.model extracontroller=inAppMarketing sf-use-decorator=oxdDecorator hide-empty-form-elements></div></div></form><oxd-loader ng-if=iCalendar.loader></oxd-loader></div></div>"),e.put("app/admin/costCentre/cost_centre_modal.html",'<div id=costCentreModal class="modal modal-fixed-footer" style="height:70%; width: 45%"><h4>{{modal.modalProperties.title | translate}}</h4><form name=costCentreForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(costCentreForm); form-name=costCentreForm close-modal-on-click=costCentreForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/admin/costCentre/cost_centres.html",'<div class=pim-container><div id=costCentreDiv><crud-panel panelinfo=costCentreCtrl.panelInfo.costCentreInfo objs=costCentreCtrl.costCentres listdata=costCentreCtrl.listData.costCentres initialsortfield="\'cost_code\'" extracontroller=costCentreCtrl></crud-panel><div ng-if=costCentreCtrl.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Cost Center\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=costCentreCtrl.addCostCentre()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/admin/defaultAuthenticationSettings/default_authentication_settings.html",'<div class=pim-container ng-if=defaultAuthenticationSettingsCtrl.permissions.read><div id=defaultAuthenticationSettingsDiv class=form-div><h4>{{defaultAuthenticationSettingsCtrl.title|translate}}</h4><form id=defaultAuthenticationSettingsForm name=defaultAuthenticationSettingsForm ng-class=disabled><div sf-schema=defaultAuthenticationSettingsCtrl.schema sf-form=defaultAuthenticationSettingsCtrl.form sf-model=defaultAuthenticationSettingsCtrl.model></div><div class="schema-form-section form-buttons right-align"><a href ng-hide=!defaultAuthenticationSettingsCtrl.permissions.update ng-click=defaultAuthenticationSettingsCtrl.setFormDefaults() class="modal-action modal-close waves-effect waves-green btn">{{\'Reset\'| translate}}</a> <a href ohrm-save-form=defaultAuthenticationSettingsCtrl.onSubmit(defaultAuthenticationSettingsForm); form-name=defaultAuthenticationSettingsForm ng-hide=!defaultAuthenticationSettingsCtrl.permissions.update class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\'| translate}}</a></div></form></div></div>'),e.put("app/admin/educations/education.html",'<div class=pim-container><div id=educationsDiv><crud-panel panelinfo=educationsCtrl.panelInfo.educationInfo objs=educationsCtrl.educations listdata=educationsCtrl.listData.educations extracontroller=educationsCtrl></crud-panel><div ng-if=educationsCtrl.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Education\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=educationsCtrl.addEducation()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/admin/educations/education_modal.html",'<div id=modal1 class="modal modal-fixed-footer" style="height:40%; width: 30%"><h4>{{modal.title | translate}}</h4><form name=educationModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(educationModalForm) form-name=educationModalForm close-modal-on-click=educationModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/admin/emailSubscriptions/add-subscribers.html",'<h4 translate="Add Subscribers"></h4><form name=frmAddSubscribers id=frmAddSubscribers><div sf-schema=addVm.formSchema sf-form=addVm.form sf-model=addVm.formModel></div><div class="input-field row" ng-if="addVm.notificationTypeId == 1" style="padding-left: 0px; padding-right: 0px"><div class="col s12 m12 l12"><input class=filled-in ng-model=addVm.formModel.advancedSettings id=advancedSettings type=checkbox placeholder> <label style=left:0px for=advancedSettings>{{"Hide Workflow Action Scenarios" | translate}}</label></div></div><div class="valign-wrapper row form-section-heading" ng-if="!addVm.formModel.advancedSettings && addVm.notificationTypeId == 1"><span class="col s8 sectionHead">{{"Workflow Action Scenarios" | translate}}</span><div class="col s4 right-align valign"><a href ng-click=addVm.setAllTemplate() class="modal-action waves-effect waves-green btn primary-btn" translate="Set Same template for All"></a></div></div><div class="list-container with-title" ng-if="!addVm.formModel.advancedSettings && addVm.notificationTypeId == 1"><table class="highlight bordered"><thead><tr><th ng-repeat="listField in addVm.listData.listFields" class="sortable row-name" translate={{listField.label}}></th><th>{{\'Template\' | translate}}</th></tr></thead><tbody><tr ng-repeat="obj in addVm.workFlowItems"><td ng-if="listField.key!=\'subscribed\'" ng-repeat="listField in addVm.listData.listFields" translate="{{obj[listField.key] | titlecase}}"></td><td><input id=cb_{{$index}} ng-model=obj.subscribed type=checkbox class=filled-in><label for=cb_{{$index}}></label></td><td class=action-wrapper><select name=select_{{$index}} id=select_{{$index}} materializecss-select class="template-select ng-dirty" ng-model=obj.template ng-required=obj.subscribed><option value>-- {{\'Select\' | translate}} --</option><option ng-repeat="option in addVm.templatesItems track by option.id" value={{option.id}}>{{option.name | translate}}</option></select><span ng-messages="frmAddSubscribers[\'select_\'+$index].$error" class=help-block><ng-message when=required translate=Required></ng-message></span></td></tr></tbody></table></div><div class="schema-form-section right-align form-buttons"><a ui-sref=^ class="modal-action modal-close waves-effect waves-green btn" translate=Cancel></a> <a href ohrm-save-form=addVm.save(frmAddSubscribers); form-name=frmAddSubscribers close-modal-on-click=frmAddSubscribers class="modal-action waves-effect waves-green btn primary-btn" translate=Save></a></div></form>'),e.put("app/admin/emailSubscriptions/copy-email-template.html",'<div class="modal modal-fixed-footer" style="height: 40%; width: 50%"><h4>{{modal.title | translate}}</h4><form name=copyTemplateModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(copyTemplateModalForm); form-name=copyTemplateModalForm close-modal-on-click=copyTemplateModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/admin/emailSubscriptions/edit-email-template.html",'<div class=pim-container><div id=applyLeaveDiv class=form-div><h4>{{vm.title | translate}}</h4><form name=emailTemplateForm id=emailTemplateForm><div style="padding-left: 0px;" sf-schema=vm.schema sf-form=vm.form sf-model=vm.model ng-submit=vm.save(emailTemplateForm)></div><div class="schema-form-section form-buttons right-align"><button class="btn secondary-btn waves-effect waves-green" type=submit ng-click=vm.backToList()>{{\'Back\'| translate}}</button> <button class="btn waves-effect waves-green" type=submit ng-click=vm.save(emailTemplateForm)>{{\'Save\'| translate}}</button></div></form></div></div>'),e.put("app/admin/emailSubscriptions/edit-subscriber.html",'<h4 translate="Edit Subscriber"></h4><form name=subscriberForm id=subscriberForm><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model></div><div class="input-field row" ng-if="modal.notificationTypeId == 1" style="padding-left: 0px; padding-right: 0px"><div class="col s12 m12 l12"><input class=filled-in ng-model=modal.model.advancedSettings id=advancedSettings type=checkbox placeholder> <label style=left:0px for=advancedSettings>{{"Hide Workflow Action Scenarios" | translate}}</label></div></div><div class="form-section-heading row valign-wrapper" ng-if="!modal.model.advancedSettings && modal.notificationTypeId == 1"><span class="col s8 sectionHead">{{"Workflow Action Scenarios" | translate}}</span><div class="col s4 right-align valign"><a href ng-click=modal.setAllTemplate() class="modal-action waves-effect waves-green btn primary-btn" translate="Set Same template for All"></a></div></div><div class="list-container with-title" ng-if="!modal.model.advancedSettings && modal.notificationTypeId == 1"><table class="highlight bordered"><thead><tr><th>{{\'Performed By\' | translate}}</th><th>{{\'Initial State\' | translate}}</th><th>{{\'Resulting State\' | translate}}</th><th>{{\'Notify\' | translate}}</th><th>{{\'Template\' | translate}}</th></tr></thead><tbody><tr ng-repeat="obj in modal.workFlowItems"><td>{{obj.viewRole | titlecase | translate}}</td><td>{{obj.viewState | titlecase | translate}}</td><td>{{obj.resultingState | titlecase | translate}}</td><td>{{obj.subscribed ? \'Yes\' : \'No\' | translate}}</td><td ng-if=obj.subscribed class=action-wrapper><select name=select_{{$index}} id=select_{{$index}} materializecss-select class=template-select ng-model=obj.template ng-required=true><option value>-- {{\'Select\' | translate}} --</option><option ng-repeat="option in modal.templatesItems track by option.id" value={{option.id}}>{{option.name | translate}}</option></select><span ng-messages="subscriberForm[\'select_\'+$index].$error" class=help-block><ng-message when=required translate=Required></ng-message></span></td></tr></tbody></table></div><div class="schema-form-section right-align form-buttons"><a ui-sref=^ class="modal-action modal-close waves-effect waves-green btn" translate=Cancel></a> <a href ohrm-save-form=modal.save(subscriberForm); form-name=subscriberForm close-modal-on-click=subscriberForm class="modal-action waves-effect waves-green btn primary-btn" translate=Save ng-if=modal.permission></a></div></form>'),e.put("app/admin/emailSubscriptions/email-subscription-list.html",'<div class=pim-container><div id=email-subscription-div><div class=row><div class="col s12 list-container"><table class="responsive-table highlight bordered" ng-if=email.permissions.read><thead><tr><th class translate=Notification></th><th width=10% class=subscription-enabled translate=Enabled></th><th width=10% class=subscription-enabled translate=Subscribers ng-if=email.isChangeSubscriberAllowedForList></th><th width=10% translate=Templates></th></tr></thead><tbody><tr ng-repeat="emailNotification in email.emailNotifications"><td width=80% class=subscription-enabled translate={{emailNotification.name}}></td><td width=10%><div class=switch><label><input type=checkbox ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model=emailNotification.is_enable ng-disabled="!email.permissions.update || !email.isListActionAllowed(emailNotification, email.changeStatusActionKey)" id=email_notification_enable_{{emailNotification.id}} ng-change=email.toggleStatus(emailNotification)> <span class=lever></span></label></div></td><td style="text-align: center" width=10% ng-click=email.linkNotification(emailNotification) ng-if=email.isChangeSubscriberAllowedForList><div><i ng-if="email.isListActionAllowed(emailNotification, email.changeSubscriberActionKey)" class="material-icons action-icon icon-color tooltipped" data-tooltip="{{ \'Subscribers\' | translate }}">supervisor_account</i> <i ng-if="!email.isListActionAllowed(emailNotification, email.changeSubscriberActionKey)" class="material-icons action-icon icon-color disabled" ng-click=email.clickOnDisabledSubscribers(emailNotification) data-tooltip="{{ \'Subscribers\' | translate }}">supervisor_account</i></div></td><td style="text-align: center" width=10% ng-click=email.linkTemplates(emailNotification)><div><i class="material-icons action-icon icon-color tooltipped" data-tooltip="{{ \'Configure Templates\' | translate }}">settings</i></div></td></tr></tbody></table></div></div></div></div>'),e.put("app/admin/emailSubscriptions/email-subscription-navbar.html",'<ul><li ng-repeat="title in vm.title()" class=page-title ng-class="{\'first\': $first, \'navbar-title-last-list-item\': $last}"><div ng-show=$first ng-class="{\'navbar-truncated-title\': $last}" class=clickable-title translate={{title}} ng-click="vm.titleClicked(\'admin.email_subscriptions\')"></div><i ng-show=!$first class="material-icons left email-subscription-navbar-navigate-next-icon">navigate_next</i><div ng-show=$last ng-class="{\'navbar-truncated-title\': $last}" class=tooltipped data-tooltip={{title}} translate={{title}}></div></li></ul>'),e.put("app/admin/emailSubscriptions/email-subscription.html",'<div class=pim-container><div class=form-div ui-view autoscroll=true id=email-subscriptions-advanced-settings ng-if="vm.state.current.name !== \'admin.edit_email_subscription\'"></div><div id=subscriberDiv class=form-div><div class=list-container><list objs=vm.subscribers listdata=vm.listData extracontroller=vm></list></div><div ng-if="vm.permissions.create && vm.state.current.name === \'admin.edit_email_subscription\'" class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Subscribers\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ui-sref=.subscribe><i class=material-icons>add</i></a></div></div></div>'),e.put("app/admin/emailSubscriptions/email-subscriptions-navbar.html",'<ul><li ng-repeat="tab in vm.tabs"><a ui-sref={{tab.uiSref}} ui-sref-active=current_tab class="truncate pim-tab-link tooltipped" data-tooltip="{{tab.title | translate}}" data-position=bottom ng-click=vm.clickOnTab()><i class="material-icons left">{{tab.icon}}</i>{{tab.title}}</a></li></ul>'),e.put("app/admin/emailSubscriptions/extra-params-view-modal.html",'<div class="modal modal-fixed-footer" style="height: 30%; width: 40%" id=email-subscriptions-advanced-settings><h4 translate="Extra Parameters"></h4><div class=modal-content><div><list class="col s12" objs=modal.parameters listdata=modal.listData extracontroller=modal></list></div></div><div class=modal-footer><a href class="modal-action modal-close waves-effect waves-green btn primary-btn" ng-click=modal.cancel() translate=Ok></a></div></div>'),e.put("app/admin/emailSubscriptions/set-template-all.html",'<div class="modal modal-fixed-footer" style="height: 60%; width: 50%"><h4>{{modal.title | translate}}</h4><form name=setTemplateModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(setTemplateModalForm); form-name=setTemplateModalForm close-modal-on-click=setTemplateModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/admin/emailSubscriptions/view-email-template-subscribers.html",'<div class="modal modal-fixed-footer" style="height: 50%; width: 45%"><h4>{{"View Subscribers" | translate}}</h4><div class=modal-content><div class="col s12"><table class="responsive-table highlight bordered"><thead><tr><th width=40% class translate=Name></th><th width=60% translate=Type></th></tr></thead><tbody><tr ng-repeat="subscriber in vm.templateSubscribers"><td width=40%>{{subscriber.name}}</td><td width=60%>{{vm.formatType(subscriber)}}</td></tr></tbody></table></div></div><div class=modal-footer><a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn primary-btn">{{\'OK\' | translate}}</a></div></div>'),e.put("app/admin/emailSubscriptions/view-email-template.html",'<div class="modal modal-fixed-footer" style="height: 100%; width: 60%"><h4>{{modal.title | translate}}</h4><div style="margin-top: 10px" class=modal-content><div style="margin-bottom: 20px"><label class=active>{{\'Subject\' | translate}}</label><br><br><span>{{modal.subject}}</span></div><hr width=90%><div id=template-body style="margin-top: 20px"><label class=active>{{\'Body\' | translate}}</label><br><div id=view-email-template ng-bind-html=modal.body></div></div></div><div class=modal-footer><a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn primary-btn">{{\'OK\' | translate}}</a></div></div>'),e.put("app/admin/emailSubscriptions/view-email-templates-list.html","<div class=pim-container><div class=form-div><div class=list-container><list objs=vm.emailSubscriptionTemplates listdata=vm.listData.templates extracontroller=vm></list></div></div></div>"),e.put("app/admin/employmentStatus/employment_status.html",'<div class=pim-container><div id=employmentStatusDiv><crud-panel panelinfo=employmentStatusCtrl.panelInfo.employmentStatusInfo objs=employmentStatusCtrl.employmentStatus listdata=employmentStatusCtrl.listData.employmentStatus extracontroller=employmentStatusCtrl></crud-panel><div ng-if=employmentStatusCtrl.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Employment Status\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=employmentStatusCtrl.addEmploymentStatus()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/admin/employmentStatus/employment_status_modal.html",'<div id=modal1 class="modal modal-fixed-footer" style="width: 35%; height: 40%"><h4>{{modal.title| translate}}</h4><form name=employmentStatusModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(employmentStatusModalForm); form-name=employmentStatusModalForm close-modal-on-click=employmentStatusModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\'| translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\'| translate}}</a></div></form></div>'),e.put("app/admin/externalServices/admin.edit_service_modal.html",'<div id=externalServiceModal class=modal tabindex=-1 role=dialog><generic-oxd-modal hide-empty-form-elements modal-title="{{modal.title | translate}}" show-close-button=true form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-lg inline-alert=modal.alert></generic-oxd-modal></div>'),e.put("app/admin/externalServices/externalServices.html",'<div id=externalServicesContainer class=oxd-list-holder ng-if=vm.permissions.read><div class="pim-container oxd-list"><div class="row list-wrapper"><list objs=vm.listData listdata=vm.listDefinition initialsortfield=vm.orderField initialsortorder=vm.orderBy extracontroller=vm></list></div></div></div><div ui-view autoscroll=true></div>'),e.put("app/admin/inAppMarketing/in_app_marketing.html","<div class=pim-container><div id=inAppMarketingFormDiv class=\"oxd-form-container oxd-panel\" ng-if=inAppMarketing.dataFetched><div class=formHeading><h4>{{'In-App Marketing Configuration' | translate}}</h4></div><form name=inAppMarketingForm id=inAppMarketingForm><div class=card-content><div sf-schema=inAppMarketing.schema sf-form=inAppMarketing.form sf-model=inAppMarketing.model extracontroller=inAppMarketing sf-use-decorator=oxdDecorator hide-empty-form-elements></div></div></form><oxd-loader ng-if=inAppMarketing.loader></oxd-loader><div id=actionBtnRow class=row><a class=\"btn btn-secondary\" ng-if=inAppMarketing.permissions.update ng-click=inAppMarketing.save(inAppMarketingForm)>{{'Save' | translate}}</a></div></div></div>"),e.put("app/admin/jobCategories/job_categories_modal.html",'<div id=modal1 class="modal modal-fixed-footer" style="width: 40%; height: 55%"><h4>{{modal.modalProperties.title | translate}}</h4><form name=jobCategoriesModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(jobCategoriesModalForm); form-name=jobCategoriesModalForm close-modal-on-click=jobCategoriesModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),
e.put("app/admin/jobCategories/jobcategories.html",'<div class=pim-container><div id=jobcategoryDiv><crud-panel panelinfo=jobcategoryCtrl.panelInfo.jobcategoriesInfo objs=jobcategoryCtrl.jobCategories listdata=jobcategoryCtrl.listData.jobCategories extracontroller=jobcategoryCtrl></crud-panel><div ng-if=jobcategoryCtrl.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Job Category\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=jobcategoryCtrl.addJobCategory()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/admin/jobTitles/job_titles.html",'<div class=pim-container><div id=jobTitlesDiv><crud-panel panelinfo=jobTitlesCtrl.panelInfo.jobTitlesInfo objs=jobTitlesCtrl.jobTitles listdata=jobTitlesCtrl.listData.jobTitles extracontroller=jobTitlesCtrl></crud-panel><div ng-if=jobTitlesCtrl.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Job Title\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=jobTitlesCtrl.addJobTitles()><i class="large material-icons">add</i></a></div></div></div>'),e.put("app/admin/jobTitles/job_titles_modal.html","<div class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title={{modal.title}} show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model show-save-button=modal.permission save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-md></generic-oxd-modal></div>"),e.put("app/admin/languages/languages.html",'<div class=pim-container><div id=languagesDiv><crud-panel panelinfo=languagesCtrl.panelInfo.languagesInfo objs=languagesCtrl.languages listdata=languagesCtrl.listData.languages extracontroller=languagesCtrl></crud-panel><div ng-if=languagesCtrl.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Language\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=languagesCtrl.addLanguages()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/admin/languages/languages_modal.html",'<div id=modal1 class="modal modal-fixed-footer" style="width: 30%; height: 40%"><h4>{{ modal.title| translate}}</h4><form name=languagesModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(languagesModalForm); form-name=languagesModalForm close-modal-on-click=languagesModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/admin/ldapAuthentication/ldap_authentication.html",'<div class=pim-container ng-if=ldapAuthenticationCtrl.permissions.read><div id=ldapAuthenticationDiv class=form-div><h4>{{ldapAuthenticationCtrl.title|translate}}</h4><form id=ldapAuthenticationSettingsForm name=ldapAuthenticationSettingsForm><div sf-schema=ldapAuthenticationCtrl.schema sf-form=ldapAuthenticationCtrl.form sf-model=ldapAuthenticationCtrl.model></div><div class="schema-form-section form-buttons right-align"><a href ohrm-save-form=ldapAuthenticationCtrl.onSubmit(ldapAuthenticationSettingsForm); form-name=ldapAuthenticationSettingsForm ng-hide=!ldapAuthenticationCtrl.permissions.update class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\'| translate}}</a></div></form></div></div>'),e.put("app/admin/licenses/licenses.html",'<div class=pim-container><div id=licenseDiv><crud-panel panelinfo=licenseCtrl.panelInfo.licensesInfo objs=licenseCtrl.licenses listdata=licenseCtrl.listData.licenses extracontroller=licenseCtrl></crud-panel><div ng-if=licenseCtrl.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add License\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=licenseCtrl.addLicense()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/admin/licenses/licenses_modal.html",'<div id=modal1 class="modal modal-fixed-footer" style="height:40%; width: 30%"><h4>{{modal.modalProperties.title | translate}}</h4><form name=licensesModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(licensesModalForm); form-name=licensesModalForm close-modal-on-click=licensesModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/admin/localization/localization.html",'<div class=pim-container ng-if=localizationCtrl.permissions.read><div id=localizationDiv class=form-div><form id=LocalizationForm name=LocalizationForm><div sf-schema=localizationCtrl.formSchema sf-form=localizationCtrl.form sf-model=localizationCtrl.formModel></div><div ng-if=localizationCtrl.permissions.update class="schema-form-section right-align form-buttons"><a href ohrm-save-form=localizationCtrl.onSubmit(LocalizationForm); form-name=LocalizationForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\'| translate}}</a></div></form></div></div>'),e.put("app/admin/localization/supported_languages_modal.html",'<div id=supported_languages_modal class="modal modal-fixed-footer" style="width: 33%; height: 57%;"><h4>{{\'OrangeHRM - Supported Languages\'| translate}}</h4><div class=modal-content><div><ul><li ng-repeat="language in modal.supportedList">{{ language||translate}}</li></ul></div></div><div class=modal-footer><a href ng-click=modal.confirm() class="modal-action modal-close waves-effect btn primary-btn align-right">{{\'Ok\'| translate}}</a></div></div>'),e.put("app/admin/locations/location_list_navbar.html",'<ul><li><a href ng-click=navbar.filter() class="tooltipped action-icon" data-tooltip="{{\'Filter\' | translate}}" data-position=bottom><i class=material-icons>oxd_filter</i></a></li></ul>'),e.put("app/admin/locations/locations.html",'<div class=pim-container><div id=locationDiv><crud-panel panelinfo=locationCtrl.panelInfo.locationsInfo objs=locationCtrl.locations listdata=locationCtrl.listData.locations initialsortfield="\'location\'" extracontroller=locationCtrl></crud-panel><div ng-if=locationCtrl.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Location\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=locationCtrl.addLocation()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/admin/locations/locations_modal.html",'<div id=locationAddModal class="modal modal-fixed-footer" style="height:93%; max-height: 93%;"><h4>{{modal.modalProperties.title | translate}}</h4><form name=locationsModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(locationsModalForm); form-name=locationsModalForm close-modal-on-click=locationsModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/admin/locations/locationsearch.html",'<div id=location_list_search_modal class="modal modal-fixed-footer" style="height:80%; width:50%"><h4>{{\'Filter Locations By\' | translate}}</h4><div class=modal-content><div><form id=frmLocationSearch class="col s12"><div class="row col s12"><div class="input-field col m12 s12 l6"><input id=location_name_filter type=text ng-model=modal.filters.name> <label for=location_name_filter ng-class="{active: modal.filters.name}">{{\'Location Name\'| translate}}</label></div><div class="input-field col m12 s12 l6"><input id=location_city_filter type=text ng-model=modal.filters.city> <label for=location_city_filter ng-class="{active: modal.filters.city}">{{\'City\'| translate}}</label></div></div><div sf-schema=modal.locationSelectSchema sf-form=modal.locationSelectForm sf-model=modal.filters></div></form></div></div><div class=modal-footer><a href ng-click=modal.search() class="modal-action modal-close waves-effect btn primary-btn">{{\'Search\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect btn">{{\'Cancel\' | translate}}</a> <a href ng-click=modal.reset() class="modal-action modal-close waves-effect btn">{{\'Reset\' | translate}}</a></div></div>'),e.put("app/admin/mailConfiguration/mail_configuration.html",'<div ng-if=mailConfigurationCtrl.permissions.read class=pim-container><div id=mailConfigurationDiv class=form-div><form id=mailConfigurationForm name=mailConfigurationForm><div sf-schema=mailConfigurationCtrl.schema sf-form=mailConfigurationCtrl.form sf-model=mailConfigurationCtrl.model></div><div class="schema-form-section form-buttons right-align"><a href ng-if=mailConfigurationCtrl.permissions.update ng-click=mailConfigurationCtrl.setFormDefaults() class="modal-action modal-close waves-effect waves-green btn">{{\'Reset\'| translate}}</a> <a href ng-if=mailConfigurationCtrl.permissions.update ohrm-save-form=mailConfigurationCtrl.onSubmit(mailConfigurationForm); form-name=mailConfigurationForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\'| translate}}</a></div></form></div></div>'),e.put("app/admin/memberships/memberships.html",'<div class=pim-container><div id=membershipsDiv class=no-title><crud-panel panelinfo=membershipsCtrl.panelInfo.membershipsInfo objs=membershipsCtrl.memberships listdata=membershipsCtrl.listData.memberships extracontroller=membershipsCtrl></crud-panel><div ng-if=membershipsCtrl.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Membership\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=membershipsCtrl.addMemberships()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/admin/memberships/memberships_modal.html",'<div id=modal1 class="modal modal-fixed-footer" style="width: 40%; height: 40%"><h4>{{ modal.title | translate}}</h4><form name=membershipsModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(membershipsModalForm); form-name=membershipsModalForm close-modal-on-click=membershipsModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\'| translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\'| translate}}</a></div></form></div>'),e.put("app/admin/nationalities/nationalities.html",'<div class=pim-container><div id=nationalityDiv><crud-panel panelinfo=nationalityCtrl.panelInfo.nationalitiesInfo objs=nationalityCtrl.nationalities listdata=nationalityCtrl.listData.nationalities extracontroller=nationalityCtrl></crud-panel><div ng-if=nationalityCtrl.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Nationality\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=nationalityCtrl.addNationality()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/admin/nationalities/nationalities_modal.html",'<div id=modal1 class="modal modal-fixed-footer" style="width: 30%; height: 40%;"><h4>{{modal.modalProperties.title | translate}}</h4><form name=nationalitiesModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(nationalitiesModalForm); form-name=nationalitiesModalForm close-modal-on-click=nationalitiesModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/admin/oauthClients/edit_oauth_clients.html",'<div id=modal1 class="modal modal-fixed-footer" style="width: 40%; height: 61%"><h4>{{ modal.title| translate}}</h4><form name=oauthModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(oauthModalForm); form-name=oauthModalForm close-modal-on-click=oauthModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/admin/oauthClients/oauth_client_data_modal.html","<div id=delete_confirmation_modal class=\"modal confirm-dialog oauth-data-dialog\"><div class=modal-content><h4></h4><span>{{'Please store the client secret with the client id securely. The client secret will not be revealed again.' | translate}}</span> <span><table><tr><td class=header>{{'Client Id' | translate}}</td><td>{{modal.oauthClient.clientId}}</td></tr><tr><td class=header>{{'Client Secret' | translate}}</td><td>{{modal.oauthClient.clientSecret}}</td></tr></table></span></div><div class=modal-footer><a href ng-click=modal.confirm() class=\"right modal-action modal-close waves-effect btn primary-btn\">{{'Ok' | translate}}</a></div></div>"),e.put("app/admin/oauthClients/oauth_clients.html",'<div class=pim-container ng-if=oauthClientCtrl.permissions.read><div class=form-div id=oauthClientsDiv><div class="row valign-wrapper col s12 form-section-heading left-align"><span class="valign title col s8">{{oauthClientCtrl.title| translate}}</span> <span style=padding-right:45px class="valign count col s2 offset-s2 right-align"></span></div><crud-panel panelinfo=oauthClientCtrl.panelInfo.oauthClientsInfo objs=oauthClientCtrl.oauthClients listdata=oauthClientCtrl.listData.oauthClients extracontroller=oauthClientCtrl initialsortfield="\'client_id\'"></crud-panel><div ng-if=oauthClientCtrl.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add OAuth Client\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=oauthClientCtrl.addOauthClients()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/admin/openIdProvider/openIdProvider.html",'<div class=pim-container ng-if=openIdCtrl.permissions.read><div class=form-div id=openIdProvidersDiv><div class="row valign-wrapper col s12 form-section-heading left-align"><span class="valign title col s8">{{"Provider List"| translate}}</span> <span style=padding-right:45px class="valign count col s2 offset-s2 right-align"></span></div><crud-panel objs=openIdCtrl.openIds listdata=openIdCtrl.listData.openIds extracontroller=openIdCtrl></crud-panel><div ng-if=openIdCtrl.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Provider\'| translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=openIdCtrl.addOpenId()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/admin/openIdProvider/openId_modal.html",'<div id=modal1 class="modal modal-fixed-footer" style="width: 40%;height:55%"><h4>{{modal.modalProperties.title | translate}}</h4><form name=openIdsModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(openIdsModalForm); form-name=openIdsModalForm close-modal-on-click=openIdsModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/admin/organizationGeneralInformation/eeo_disable_confirmation_modal.html",'<div id=delete_confirmation_modal class="modal confirm-dialog"><div class=modal-content><h4></h4><p>{{modal.messageContent}}</p></div><div class=modal-footer><a href ng-click=modal.cancel() class="modal-action modal-close waves-effect btn">{{\'No, Cancel\' | translate}}</a> <a href ng-click=modal.confirm() class="modal-action modal-close waves-effect btn primary-btn">{{\'Yes, Proceed\' | translate}}</a></div></div>'),e.put("app/admin/organizationGeneralInformation/organization_general_information.html","<div class=pim-container ng-if=organizationGeneralInformationCtrl.permissions.read><div id=organizationGeneralInformationDiv class=form-div><h4>{{'General Information' | translate}}</h4><form name=contactDetailsForm sf-schema=organizationGeneralInformationCtrl.formSchema sf-form=organizationGeneralInformationCtrl.form sf-model=organizationGeneralInformationCtrl.model ng-submit=organizationGeneralInformationCtrl.onSubmit(contactDetailsForm)></form></div></div>"),e.put("app/admin/payGrades/pay_grade_assigned_currency_modal.html",'<div id=modal1 class="modal modal-fixed-footer" style="width: 30%;"><h4>{{ modal.title | translate}}</h4><form name=payGradeAssignedCurrencyModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(payGradeAssignedCurrencyModalForm); form-name=payGradeAssignedCurrencyModalForm close-modal-on-click=payGradeAssignedCurrencyModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/admin/payGrades/pay_grade_details.html","<div id=pay_grade_details class=pim-container><div ng-if=PayGradeDetailsCtrl.permissions.read id=personal_details_tab class=form-div><h4>{{'Edit Pay Grade' | translate}}</h4><form name=payGroupForm sf-schema=PayGradeDetailsCtrl.schema sf-form=PayGradeDetailsCtrl.form sf-model=PayGradeDetailsCtrl.model ng-submit=PayGradeDetailsCtrl.onSubmit(payGroupForm)></form></div><div id=assignedCurrenciesDiv><crud-panel panelinfo=PayGradeDetailsCtrl.panelInfo.assignedCurrenciesInfo objs=PayGradeDetailsCtrl.assignedCurrencies listdata=PayGradeDetailsCtrl.listData.assignedCurrencies extracontroller=PayGradeDetailsCtrl></crud-panel></div></div>"),e.put("app/admin/payGrades/pay_grade_modal.html",'<div id=modal1 class="modal modal-fixed-footer" style="width: 30%; height: 40%"><h4>{{\'Add Pay Grade\' | translate}}</h4><form name=payGradeModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(payGradeModalForm); form-name=payGradeModalForm close-modal-on-click=payGradeModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/admin/payGrades/pay_grades.html",'<div class=pim-container><div id=payGradesDiv><crud-panel panelinfo=payGradesCtrl.panelInfo.payGradesInfo objs=payGradesCtrl.payGrades listdata=payGradesCtrl.listData.payGrades extracontroller=payGradesCtrl></crud-panel><div ng-if=payGradesCtrl.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Pay Grade\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=payGradesCtrl.addPayGrade()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/admin/preferences/preferences.html","<div class=pim-container ng-if=preferencesCtrl.permissions.read><div id=preferencesDiv><form id=preferencesForm name=preferencesForm><div sf-schema=preferencesCtrl.formSchema sf-form=preferencesCtrl.form sf-model=preferencesCtrl.formModel></div><div ng-if=preferencesCtrl.permissions.update class=right-align><a href ohrm-save-form=preferencesCtrl.onSubmit(preferencesForm); form-name=preferencesForm class=\"modal-action waves-effect waves-green btn primary-btn\">{{'Save'| translate}}</a></div></form></div></div>"),e.put("app/admin/reportsCatalog/reports_catalog.html","<div class=pim-container><div id=reportsCatalogDiv><crud-panel panelinfo=reportsCatalogCtrl.panelInfo.reportsCatalogInfo objs=reportsCatalogCtrl.reportsCatalog listdata=reportsCatalogCtrl.listData.reportsCatalog extracontroller=reportsCatalogCtrl></crud-panel></div></div>"),e.put("app/admin/salaryComponents/salary_component_modal.html",'<div id=editSalaryComponentModal class="modal modal-fixed-footer" style="width: 35%; height: 70%"><h4>{{modal.title | translate}}</h4><form name=salaryComponentModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(salaryComponentModalForm); form-name=salaryComponentModalForm ng-if=modal.salaryComponent.isEditable close-modal-on-click=salaryComponentModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/admin/salaryComponents/salary_components.html",'<div class=pim-container><div id=salaryComponentDiv><crud-panel panelinfo=salaryComponentCtrl.panelInfo.salaryComponentsInfo objs=salaryComponentCtrl.salaryComponents listdata=salaryComponentCtrl.listData.salaryComponents extracontroller=salaryComponentCtrl initialsortfield="\'name\'"></crud-panel><div ng-if=salaryComponentCtrl.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Salary Component\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=salaryComponentCtrl.addSalaryComponent()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/admin/samlProvider/admin.edit_saml_modal.html",'<div id=modal1 class="modal move-modal-five-percent-up" tabindex=-1 role=dialog><generic-oxd-modal hide-empty-form-elements modal-title="{{modal.title | translate}}" show-close-button=true form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-lg inline-alert=modal.alert></generic-oxd-modal></div>'),e.put("app/admin/samlProvider/samlProvider.html",'<div id=providerListContainer class=oxd-list-holder ng-if=vm.permissions.read><div class="pim-container oxd-list"><div class="row list-wrapper"><list objs=vm.listData listdata=vm.listDefinition extracontroller=vm></list></div></div></div><div ui-view autoscroll=true></div>'),e.put("app/admin/skills/skills.html",'<div class=pim-container><div id=skillDiv><crud-panel panelinfo=skillCtrl.panelInfo.skillsInfo objs=skillCtrl.skills listdata=skillCtrl.listData.skills extracontroller=skillCtrl></crud-panel><div ng-if=skillCtrl.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Skill\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=skillCtrl.addSkill()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/admin/skills/skills_modal.html",'<div id=modal1 class="modal modal-fixed-footer" style="width: 40%; height: 55%"><h4>{{modal.modalProperties.title | translate}}</h4><form name=skillsModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(skillsModalForm); form-name=skillsModalForm close-modal-on-click=skillsModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/admin/systemAdminConfiguration/configSystemAdmin.html","<div ng-if=systemAdminConfigurationCtrl.permissions.read class=pim-container><div id=systemAdminConfigurationDiv class=form-div><h4>{{systemAdminConfigurationCtrl.userName}}</h4><form id=systemAdminConfigurationForm name=systemAdminConfigurationForm class=not-padded><div sf-schema=systemAdminConfigurationCtrl.schema sf-form=systemAdminConfigurationCtrl.form sf-model=systemAdminConfigurationCtrl.model></div><div class=right-align><a href ohrm-save-form=systemAdminConfigurationCtrl.onSubmit(systemAdminConfigurationForm); form-name=systemAdminConfigurationForm class=\"modal-action waves-effect waves-green btn primary-btn\">{{'Save'| translate}}</a></div></form></div></div>"),e.put("app/admin/systemUsers/modifyRegion_modal.html",'<div class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title="{{modal.modalProperties.title | translate}}" show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model show-save-button=!modal.model.isReadOnly save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-md show-loader=modal.showLoader inline-alert=modal.inlineAlert></generic-oxd-modal></div>'),e.put("app/admin/systemUsers/systemUserSearch.html",'<div id=systemUser_list_search_modal class="modal modal-fixed-footer" style=width:50%><h4>{{\'Filter Users\' | translate}}</h4><div class=modal-content><div><form id=frmSystemUserSearch class="col s12"><div class=row><div class="input-field col s6"><input id=systemuser_uname_filter type=text ng-model=modal.filters.uname> <label for=employee_uname_filter ng-class="{active: modal.filters.uname}">{{\'Username\'| translate}}</label></div><div class="input-field col s6"><label for=employee_name_filter class=active>{{\'Employee Name\'| translate}}</label><angucomplete-alt-with-employee-id id=employee_name_filter placeholder="{{\'Type for hints...\' | translate}}" text-searching="{{\'Searching...\' | translate}}" text-no-results="{{\'No results found\' | translate}}" pause=100 selected-object=modal.filters.employee initial-value=modal.employeeName remote-api-handler=modal.fetchMatchingEmployees search-fields=firstName,middleName,lastName title-field=firstName,middleName,lastName,past_employee description-field=employeeId auto-match=true focus-first=true minlength=1 input-class="form-control form-control-small topnav-autocomplete contains-emp-id" match-class=match></angucomplete-alt-with-employee-id></div></div><div sf-schema=modal.userSelectSchema sf-form=modal.userSelectForm sf-model=modal.filters></div></form></div></div><div class=modal-footer><a href ng-click=modal.search() class="modal-action modal-close waves-effect btn primary-btn">{{\'Search\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect btn">{{\'Cancel\' | translate}}</a> <a href ng-click=modal.reset() class="modal-action modal-close waves-effect btn">{{\'Reset\' | translate}}</a></div></div>'),e.put("app/admin/systemUsers/systemUser_list_navbar.html",'<ul><li ng-if=navbar.permissions.read><a href ng-click=navbar.filter() class="tooltipped action-icon" data-tooltip="{{\'Filter\' | translate}}" data-position=bottom><i class=material-icons>oxd_filter</i></a></li></ul>'),e.put("app/admin/systemUsers/systemUsers.html",'<div class=pim-container><div id=systemUserDiv><crud-panel panelinfo=systemUsersCtrl.panelInfo.systemUsersInfo objs=systemUsersCtrl.systemUsers listdata=systemUsersCtrl.listData.systemUsers initialsortfield="\'username\'" extracontroller=systemUsersCtrl></crud-panel><div ng-if=systemUsersCtrl.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add User\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=systemUsersCtrl.addSystemUser()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/admin/systemUsers/systemUsers_modal.html",'<div class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title="{{modal.modalProperties.title | translate}}" show-close-button=modal.showCloseButton show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model show-save-button=!modal.isReadOnly save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-md additional-buttons=modal.buttons show-loader=modal.showLoader inline-alert=modal.inlineAlert></generic-oxd-modal></div>'),e.put("app/admin/userRoles/edit_user_role.html",'<div ng-cloak class=pim-container ng-if="EditUserRolesCtrl.permissions.create || EditUserRolesCtrl.permissions.update"><div id=add_user_role><form name=userRoleForm id=user_role_form><div class="input-field row" id=data-group-user-selection-select><select ohrm-select not-scrollable=true id=user_role_type_select ng-if="EditUserRolesCtrl.selectedUserRoleType != null" name=userRoleType ng-disabled=EditUserRolesCtrl.userRoleId ng-model=EditUserRolesCtrl.selectedUserRoleType ng-change=EditUserRolesCtrl.cleanVariables();><option value=1 ng-bind=EditUserRolesCtrl.getUserRoleTypeStrings()[0]></option><option value=2 ng-bind=EditUserRolesCtrl.getUserRoleTypeStrings()[1]></option><option value=3 ng-bind=EditUserRolesCtrl.getUserRoleTypeStrings()[2]></option></select><label for=user_role_type_select ng-disabled=EditUserRolesCtrl.userRoleId translate=Type></label></div><div id=user_role_name_div class="input-field col s6 user-role-name-div"><input id=user_role_name ng-disabled=EditUserRolesCtrl.userRoleNameReadOnly materializecss-input name=userRoleName type=text ng-model=EditUserRolesCtrl.userRoleName ng-change=EditUserRolesCtrl.userRoleNameOnChanged(userRoleForm)> <label for=user_role_name>{{"User Role Name"|translate}} <em>*</em></label><br><span class=help-block ng-show=userRoleForm.userRoleName.$error.required translate=Required></span> <span class=help-block ng-show=userRoleForm.userRoleName.$error.duplicate translate="Already exists"></span> <span class=help-block ng-show=userRoleForm.userRoleName.$error.predefined translate="Cannot Add System Defined User Roles Again"></span> <span class=help-block ng-show=userRoleForm.userRoleName.$error.MaxChar>{{EditUserRolesCtrl.getUserRoleNameValidationMessage()}}</span></div><br><div id=employee_actions_div class="col s6 form-group schema-form-checkboxes" ng-if=EditUserRolesCtrl.employeeActions.length><label class=user-role-subsection-paragraph translate="Employee Actions"></label><div ng-repeat="action in EditUserRolesCtrl.employeeActions track by action.id" class="col s6"><input type=checkbox class=filled-in id=checkbox_{{::action.id}} ng-model=EditUserRolesCtrl.employeeActionModel[action.id]> <label for=checkbox_{{::action.id}} translate={{::action.name}}></label></div><br><br></div><div id=work_folw_management_div class="col s6 form-group schema-form-checkboxes" ng-if=EditUserRolesCtrl.userRoleTypeWorkFlows.length><label class=user-role-subsection-paragraph translate="Workflow Management"></label><br><div ng-repeat="workFlow in EditUserRolesCtrl.userRoleTypeWorkFlowsTitleMap track by workFlow.value" class="col s6"><input type=checkbox ng-disabled=EditUserRolesCtrl.userRoleWorkflowReadOnly class=filled-in id=checkbox_{{::workFlow.value}} ng-model=EditUserRolesCtrl.workFlowModel[workFlow.value]> <label for=checkbox_{{::workFlow.value}} translate={{::workFlow.name}} ng-class="{\'userRoleWorkflowChkDisabled\': EditUserRolesCtrl.userRoleWorkflowReadOnly}"></label></div><br><br></div><div><label class=user-role-subsection-paragraph translate="Data Group Permissions"></label><ul class=collapsible data-collapsible=accordion><li ng-repeat="module in EditUserRolesCtrl.exsitingModulePrefix"><div class="collapsible-header ohrm-plain-card" ng-click=EditUserRolesCtrl.collapsibleClicked(module.name)><p class=para-inside-collapsible-body><input type=checkbox class=filled-in id={{::module.name}} ng-model=EditUserRolesCtrl.moduleChecked[module.name] ng-change=EditUserRolesCtrl.moduleCheckChange(module.name) ng-checked=EditUserRolesCtrl.isCompleteModuleSelected[module.name]> <label for={{::module.name}} translate={{::module.name}}></label> <span><i class="material-icons data-group-drop-down-icon tooltipped" data-tooltip="{{EditUserRolesCtrl.modulesIconsForExpanding[module.name]==\'arrow_drop_up\'?\'Collapse\':\'Expand\'| translate}}" data-position=left>{{EditUserRolesCtrl.modulesIconsForExpanding[module.name]}}</i></span></p></div><div class="collapsible-body collapsible-body-container collapsible-body-container-datagroup"><div ng-repeat="dataGroup in ::EditUserRolesCtrl.modularizedDataGroups[module.name]" class=dataGroupCheckBoxes><div><table class="collapsible-body-table highlight bordered"><tr class=collapsible-body-table-row><td class=collapsible-body-table-data-lable><label translate={{::dataGroup.description}}></label> <span ng-if=dataGroup.note style="font-size: 10px;"><br>({{ dataGroup.note | translate }})</span></td><td class=collapsible-body-table-data-table-data><div id={{::dataGroup.id}}_checkbox_read_div ng-if=::dataGroup.canRead class=read-checkbox-div><input type=checkbox class="filled-in col l2 dataGroupCheckBox read-checkbox" id={{::dataGroup.id}}_checkbox_read ng-click="EditUserRolesCtrl.updateSelection(dataGroup.id, \'Read\',module.name);" ng-checked=EditUserRolesCtrl.userRoleDataGroups[dataGroup.id].canRead ng-disabled="EditUserRolesCtrl.userRoleDataGroups[dataGroup.id].canUpdate || EditUserRolesCtrl.userRoleDataGroups[dataGroup.id].canCreate || EditUserRolesCtrl.userRoleDataGroups[dataGroup.id].canDelete"> <label for={{::dataGroup.id}}_checkbox_read class="col l2" translate={{EditUserRolesCtrl.lang.Read}}></label></div></td><td class=collapsible-body-table-data-table-data><div id={{::dataGroup.id}}_checkbox_update_div ng-if=::dataGroup.canUpdate class=update-checkbox-div><input type=checkbox class="filled-in col l2 dataGroupCheckBox update-checkbox" id={{::dataGroup.id}}_checkbox_update ng-click="EditUserRolesCtrl.updateSelection(dataGroup.id, \'Update\',module.name);" ng-checked=EditUserRolesCtrl.userRoleDataGroups[dataGroup.id].canUpdate> <label for={{::dataGroup.id}}_checkbox_update class="col l2" translate={{EditUserRolesCtrl.lang.Update}}></label></div></td><td class=collapsible-body-table-data-table-data><div id={{::dataGroup.id}}_checkbox_create_div ng-if=::dataGroup.canCreate class=create-checkbox-div><input type=checkbox class="filled-in col l2 dataGroupCheckBox create-checkbox" id={{::dataGroup.id}}_checkbox_create ng-click="EditUserRolesCtrl.updateSelection(dataGroup.id, \'Create\',module.name);" ng-checked=EditUserRolesCtrl.userRoleDataGroups[dataGroup.id].canCreate> <label for={{::dataGroup.id}}_checkbox_create class="col l2" translate={{EditUserRolesCtrl.lang.Create}}></label></div></td><td class=collapsible-body-table-data-table-data><div id={{::dataGroup.id}}_checkbox_delete_div ng-if=::dataGroup.canDelete class=delete-checkbox-div><input type=checkbox class="filled-in col l2 dataGroupCheckBox delete-checkbox" id={{::dataGroup.id}}_checkbox_delete ng-click="EditUserRolesCtrl.updateSelection(dataGroup.id, \'Delete\',module.name);" ng-checked=EditUserRolesCtrl.userRoleDataGroups[dataGroup.id].canDelete> <label for={{::dataGroup.id}}_checkbox_delete class="col l2" translate={{EditUserRolesCtrl.lang.Delete}}></label></div></td></tr></table></div></div></div></li></ul></div><div class="row requiredHelperText"><div class=helpvalue><em>*</em> {{"Required field" | translate}}</div></div><div class=right-align><a href ng-click=EditUserRolesCtrl.cancel(); class="modal-action modal-close waves-effect waves-green btn" translate=Cancel></a> <a href ohrm-save-form=EditUserRolesCtrl.onSubmit(userRoleForm) form-name=userRoleForm class="modal-action waves-effect waves-green btn primary-btn" translate=Save></a></div></form></div></div>'),
e.put("app/admin/userRoles/preventAccess.html",'<div id=modal1 class="modal modal-fixed-footer"><h4>{{modal.title | translate}}</h4><form name=preventAccessForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(preventAccessForm); form-name=preventAccessForm close-modal-on-click=preventAccessForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/admin/userRoles/user_roles.html",'<div class=pim-container><div id=UserRolesDiv><crud-panel panelinfo=UserRolesCtrl.panelInfo.userRolesInfo objs=UserRolesCtrl.userRolesSub listdata=UserRolesCtrl.listData.userRoles initialsortfield="\'userRole\'" extracontroller=UserRolesCtrl></crud-panel><div ng-if=UserRolesCtrl.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add User Role\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=UserRolesCtrl.addUserRole()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/admin/workShifts/work_shifts.html",'<div class=pim-container><div id=workShiftDiv><crud-panel panelinfo=workShiftCtrl.panelInfo.workShiftsInfo initialsortfield="\'name\'" objs=workShiftCtrl.workShifts listdata=workShiftCtrl.listData.workShifts extracontroller=workShiftCtrl></crud-panel><div ng-if=workShiftCtrl.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Work Shift\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=workShiftCtrl.addWorkShift()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/admin/workShifts/work_shifts_modal.html",'<div id=modal1 class="modal modal-fixed-footer" style="width:30%; height: 86%; max-height: 90%"><h4>{{modal.modalProperties.title | translate}}</h4><form name=workShiftsModalForm><div class=modal-content><div sf-options="{ supressPropertyTitles : true }" sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(workShiftsModalForm); form-name=workShiftsModalForm close-modal-on-click=workShiftsModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/attendance/configuration/attendance_configuration.html",'<div class=pim-container ng-if=vm.permissions.read><div id=attendanceConfigurationDiv class=form-div><h4>{{vm.attendanceConfigurationHeading | translate}}</h4><form name=vm.htmlForm ng-submit=vm.onSubmit()><div class="data-container header-container" sf-schema=vm.mainSchema sf-form=vm.mainForm sf-model=vm.mainModel></div><div class="data-container ip-list-container" ng-if=vm.mainModel.ipBasedRestrictionEnabled><div class="data-row data-header-row"><div class=col-5><span>{{\'IP Address From\' | translate}}<em>*</em></span></div><div class=col-5><span>{{\'IP Address To\' | translate}}<em>*</em></span></div><div class=col-2></div></div><div ng-value={{$index}} ng-repeat="(key, ipAddrRange) in vm.allowedIpRanges"><div class="data-row data-editable-row" ng-if="(key !== vm.selectedItemIndex)" ng-click=vm.toggleEditMode(key)><div class=col-5><span>{{ipAddrRange.ipFrom}}</span></div><div class=col-5><span>{{ipAddrRange.ipTo}}</span></div><div class=col-2><div class="btn btn-list btn-inline" aria-label="{{\'Delete\' | translate}}" ng-if="(\'ADD\' === vm.currentAction) || (1 < vm.allowedIpRanges.length)" ng-click=vm.deleteIpAddrRange(key)><span class="material-icons mediumIcon actionIcon">remove</span></div><div class="btn btn-list btn-inline btn-add" aria-label="{{\'Add\' | translate}}" ng-if="(\'ADD\' !== vm.currentAction) && (1 + key === vm.allowedIpRanges.length)" ng-click=vm.addIpAddrRange()><span class="material-icons mediumIcon actionIcon">add</span></div></div></div><div ng-if="(\'EDIT\' === vm.currentAction) && (key === vm.selectedItemIndex)" sf-schema=vm.ipRangeSchema sf-form=vm.ipRangeForm sf-model=vm.ipRangeModel></div></div><div ng-if="(\'ADD\' === vm.currentAction)" sf-schema=vm.ipRangeSchema sf-form=vm.ipRangeForm sf-model=vm.ipRangeModel></div></div><div class="data-container footer-container" sf-schema=vm.subSchema sf-form=vm.subForm sf-model=vm.subModel></div></form></div></div>'),e.put("app/attendance/attendanceSheets/attendance-sheet-container.html",'<ul class="collapsible collapsible-1 z-depth-0 sheetItemContainer" data-collapsible=accordion><li ng-repeat="sheetItem in sheetItems" id="date_{{ sheetItem.date }}" class=attendanceSheetRow attendance-sheet-day selected-date=selectedDate sheet-item=sheetItem sheet-meta=sheetMeta attendance-records-permissions=attendanceRecordsPermissions></li></ul>'),e.put("app/attendance/attendanceSheets/attendance-sheet-day.html",'<div class=collapsible-header ng-init=vm.triggerClick(sheetItem.date) ng-click=vm.checkUnfold(sheetItem.date) ng-class="{\'leaveDay\': vm.isLeaveDay(), \'holiday\': vm.isHoliday(), \'weekend\': vm.isWeekend(), \'pastDate\': vm.isPastDateWithoutRecords()}"><span class=dateSection ng-class="{\'leaveDay\': vm.isLeaveDay(), \'holiday\': vm.isHoliday(), \'weekend\': vm.isWeekend(), \'pastDate\': vm.isPastDateWithoutRecords()}"><div class=timesheetDay>{{vm.getDayOfItem()}}</div><div class=timesheetDate>{{sheetItem.date.split("-")[2]}} {{vm.getMonthOfItem()}}</div></span> <span class=totalSection><div class=dayTotal>{{sheetItem.formattedTotal}}</div><div class=dayPunchSummary>{{vm.getDayOffStatus()}} <i class="material-icons prefixIcon" ng-if=vm.showPrefixIcon>ohrm_bent_right_arrow_oxd</i>{{vm.summaryString}}<i class="material-icons suffixIcon" ng-if=vm.showSuffixIcon>ohrm_date_switch_oxd</i></div></span> <span class=breakdownSection><div class=payCodeTotal ng-class=vm.getPayHoursComponentClass(durationParams.index) ng-if=vm.showPayCodeDuration(durationParams.code) ng-repeat="durationParams in sheetItem.durationPerCode"><div class=payCodeName>{{durationParams.description | translate}}</div><div class=payCodeDuration>{{durationParams.formattedDuration}}</div></div></span></div><div class=collapsible-body ng-if=vm.hasAttendanceRecordsPermissions><div ng-if=vm.hasPunchRecords class=punchRecordContainer ng-class="{\'border-bottom\':sheetItem.canAdd}"><div class=headerRow style="padding-bottom: 5px"><div class="col-5 punchInColumn"><span class="material-icons smallIcon clockIcon">access_time</span> <span>{{\'Punch In\' | translate}}</span></div><div class="col-5 punchOutColumn"><span class="material-icons smallIcon clockIcon">access_time</span> <span>{{\'Punch Out\' | translate}}</span></div></div><attendance-sheet-punch-record ng-repeat="(unixtime, punchRecord) in sheetItem.punchRecords" punch-record=punchRecord item-id=vm.getItemId(unixtime)></attendance-sheet-punch-record></div><div ng-class="{\'border-top\':!vm.hasPunchRecords && sheetItem.canAdd}"><button ng-if=sheetItem.canAdd ng-click=vm.onAdd() class="btn btn-text" id=addAttendanceRecordBtn><i class=material-icons>add</i><span>{{\'Add\' | translate}}</span></button></div></div>'),e.put("app/attendance/attendanceSheets/attendance-sheet-punch-record.html",'<div class=punchRecord style="padding-bottom: 8px;" ng-if="itemId != vm.editItemId"><div class="col-5 punchInColumn" style="line-height: 1.5 !important;width: 40%"><span class=datetime ng-if=punchRecord.punchInTime>{{vm.getLocalizedDate(punchRecord.punchInDate) + \' \' + punchRecord.punchInTime}}</span> <span class=timezone ng-if=punchRecord.punchInTimezoneOffset>GMT {{punchRecord.punchInTimezoneOffset}}</span> <span ng-if=punchRecord.punchInNote class="material-icons mediumIcon note" data-qtip="{{\'<div ng-non-bindable>\' +(punchRecord.punchInNote | sanitizehtml) + \'</div>\' }}" data-qtip-class=qtip-oxd data-qtip-at="bottom center" data-qtip-my="top right">ohrm_comment_oxd</span> <span ng-if=punchRecord.extraDetails.punchInPicture class="material-icons mediumIcon photo" data-qtip="{{\'<div ng-non-bindable ><img style =\\\'width: 100px; height: 100px; object-fit: cover;\\\' class =\\\'image-container circle\\\' src=\\\'data:\'+punchRecord.extraDetails.punchInPictureType+\';base64,\' +(punchRecord.extraDetails.punchInPicture ) + \'\\\'/></div>\' }}" data-qtip-class=qtip-oxd data-qtip-at="bottom center" data-qtip-my="top right">photo</span><div style="line-height: 1.5 !important;padding-top: 5px;padding-right: 5px"><span style="line-height: 1.5 !important;" ng-if=punchRecord.extraDetails.punchInAddress data-qtip="{{\'Geolocation\' | translate}}" data-qtip-class=qtip-oxd data-qtip-at="bottom center" data-qtip-my="top right"><i class="material-icons smallIcon">my_location</i> {{punchRecord.extraDetails.punchInAddress}}</span></div></div><div class="col-5 punchOutColumn" style="line-height: 1.5 !important;width: 40%"><span class=datetime ng-if=punchRecord.punchOutTime>{{vm.getLocalizedDate(punchRecord.punchOutDate) + \' \' + punchRecord.punchOutTime}}</span> <span class=timezone ng-if=punchRecord.punchOutTimezoneOffset>GMT {{punchRecord.punchOutTimezoneOffset}}</span> <span ng-if=punchRecord.punchOutNote class="material-icons mediumIcon note" data-qtip="{{\'<div ng-non-bindable>\' + (punchRecord.punchOutNote | sanitizehtml) + \'</div>\' }}" data-qtip-class=qtip-oxd data-qtip-at="bottom center" data-qtip-my="top right">ohrm_comment_oxd</span> <span ng-if=punchRecord.extraDetails.punchOutPicture class="material-icons mediumIcon photo" data-qtip="{{\'<div ng-non-bindable><img style =\\\'width: 100px; height: 100px; object-fit: cover;\\\' class =\\\'image-container circle\\\' src=\\\'data:\'+punchRecord.extraDetails.punchOutPictureType+\';base64,\' +(punchRecord.extraDetails.punchOutPicture ) + \'\\\'/></div>\' }}" data-qtip-class=qtip-oxd data-qtip-at="bottom center" data-qtip-my="top right">photo</span><div style="line-height: 1.5 !important;padding-top: 5px;padding-right: 5px"><span style="line-height: 1.5 !important;" ng-if=punchRecord.extraDetails.punchOutAddress data-qtip="{{\'Geolocation\' | translate}}" data-qtip-class=qtip-oxd data-qtip-at="bottom center" data-qtip-my="top right"><i class="material-icons smallIcon">my_location</i> {{punchRecord.extraDetails.punchOutAddress}}</span></div></div><div class="col-2 actionIconDiv" style="line-height: 1.5 !important;width: 20%"><div class="btn btn-list" ng-click=vm.toggleEditMode() ng-if="punchRecord.canEditPunchIn || (punchRecord.punchOutTime && punchRecord.canEditPunchOut)" title="{{\'Edit\' | translate}}" oxd-tooltip data-placement=bottom aria-label="{{\'Edit\' | translate}}"><span class="material-icons mediumIcon actionIcon">ohrm_edit</span></div><div class="btn btn-list" ng-click=vm.showDeleteConfirmation() ng-if=punchRecord.canDelete title="{{\'Delete\' | translate}}" oxd-tooltip data-placement=bottom aria-label="{{\'Delete\' | translate}}"><span class="material-icons mediumIcon actionIcon">ohrm_delete</span></div></div></div><form ng-if="itemId == vm.editItemId" name=punchInRecordForm sf-options="{ supressPropertyTitles : true }" sf-schema=vm.schema sf-form=vm.form sf-model=vm.model sf-use-decorator=oxdDecorator form-locator></form>'),e.put("app/attendance/attendanceSheets/attendance-sheet-summary.html",'<div class=punch-status-container ng-class="{\'punched-in\':vm.punchedIn}"><span class=profile-image-container><span class=profile-image><img class="circle profile-photo" ng-src=../index.php/core/viewEmployeeImage/empNumber/{{attendanceSheetMeta.empNumber}}/size/normal></span></span> <span class=status-container><div class=full-name>{{attendanceSheetMeta.fullName}}</div><div class=punch-status ng-if="!vm.lastPunch && vm.action">{{"Not Punched In" | translate}}</div><div class=last-punched-out-container ng-if=vm.lastPunch><span class=last-punched-out-time-text ng-if=!vm.punchedIn>{{("Punched Out" | translate) + ": "}}</span> <span class=last-punched-out-time-text ng-if=vm.punchedIn>{{("Punched In" | translate) + ": "}}</span> <span class=last-punched-out-time-time>{{vm.lastPunch}}</span></div></span> <button type=button class="btn btn-list" id=switchEmployeeButton ng-if=vm.hasAccessibleEmployees title="{{\'Switch Employee\' | translate}}" oxd-tooltip data-placement=bottom aria-label="{{\'Switch Employee\' | translate}}" ng-click=vm.openSwitchEmployeePopover($event)><i class=material-icons aria-hidden=true>ohrm_switch_employees_oxd</i></button></div><div class=worked-time-container><span class=worked-time><span class=worked-time-time>{{vm.workedTime}}</span> <span class=worked-time-text>{{"Today" | translate}}</span></span> <span class="punch-icons btn-main" ng-if=vm.canPunch><span class=punch-icons-wrapper ng-click=vm.punchInClicked(vm.punchedIn) title="{{vm.punchedIn ? \'Punch Out\' : \'Punch In\' | translate}}" oxd-tooltip data-placement=bottom><span class="punch-in-icon material-icons" ng-if=!vm.punchedIn>timer</span> <span class="punch-out-icon material-icons" ng-if=vm.punchedIn>timer_off</span></span></span></div><div class=sectionContainer ng-show="mode==\'hourly\'"><div class=sectionTitle>{{\'Status\' | translate}}</div><div class=statusContainer><div class=statusText>{{attendanceSheetMeta.status | translate }}</div></div><div class="btn-group timesheetActions" role=group ng-if=vm.canSubmit()><button class="btn btn-label" ng-click="actionCallback(\'Submit\')">{{\'Submit\' | translate}}</button></div><div class="btn-group timesheetActions" role=group><button ng-if="value != \'Submit\'" class=btn ng-class=vm.getButtonClass(value) style="width: {{vm.getButtonWidth()}}" data-icon={{vm.getButtonIcon(value)}} ng-click=actionCallback(value) ng-repeat="(key, value) in attendanceSheetMeta.AllowedWorkflowActions">{{value | translate}}</button></div></div><div class=sectionContainer id=periodSelectionDiv><div class=sectionTitle>{{\'Period\' | translate}}</div><form hide-empty-form-elements name=attendanceSheetForm sf-schema=vm.schema sf-form=vm.form sf-model=vm.model sf-use-decorator=oxdDecorator></form></div><div class=weekly-record-charts-container ng-if=vm.graphDataLoaded><div class=week-summary><span class=week-title-container><span class=week-title>{{\'This Week\' | translate}}</span> <span class=week-title-description>{{vm.currentWeek}}</span></span> <span class=week-hours-container><span class="worked-hours-for-week-icon material-icons">timer</span> <span class=worked-hours-for-week>{{vm.workedHoursForWeek}}</span></span></div><div class=weekly-record-chart style="margin-bottom: {{vm.chartMarginBottom}}px"><oxd-bar-chart data=vm.graphData options=vm.graphOptions></oxd-bar-chart></div></div><div class=dayOffLegend><div class=legendItemContainer ng-repeat="legendItem in vm.legendItems"><ul><li class={{legendItem.class}}></li></ul><span class=legendDescription>- {{legendItem.description | translate}}</span></div></div><div class=attendanceSheetactionLogButton ng-if="mode==\'hourly\'"><button class="btn btn-text" ng-click=vm.showActionLogModal() data-icon=ohrm_action_logs_oxd>{{\'View Action Log\' | translate}}</button></div>'),e.put("app/attendance/attendanceSheets/attendance_sheet.html",'<div class=pim-container id=attendanceSheet ng-cloak ng-if=vm.render><div id=attendanceSheetContainer><div id=summarySection class=col-3><attendance-sheet-summary attendance-sheet-meta=vm.attendanceSheetMeta action-callback=vm.action selected-date=vm.selectedDate switch-employee-callback=vm.action mode=vm.mode attendance-records-permissions=vm.attendanceRecordsPermissions></attendance-sheet-summary></div><div class="detailSection col-9"><div class=payHoursPanelContainer ng-include=vm.payHourPanelTemplate></div><attendance-sheet-container id=attendanceSheetDetailedSection sheet-items=vm.attendanceSheetData sheet-meta=vm.attendanceSheetMeta selected-date=vm.selectedDate attendance-records-permissions=vm.attendanceRecordsPermissions></attendance-sheet-container></div></div></div>'),e.put("app/attendance/attendanceSheets/attendance_sheets.html",'<div id=employeeAttendanceSheetsList class=oxd-list-holder><div class="pim-container oxd-list"><div class="row list-wrapper"><div class=list-left-panel ng-class="{\'compact\':vm.compactLeftPanel}"><button ng-if="vm.total > 0" type=button class="btn btn-secondary" id=approve-all-button ng-click=vm.approveAll() title="{{\'Approve All\' | translate}}" oxd-tooltip data-placement=bottom><i class=material-icons>thumb_up</i><span class=panel-btn-text>{{\'Approve All\' | translate}} {{\'(\' + vm.total + \')\'}}</span></button> <span class="material-icons toggle-button" ng-click=vm.toggleLeftMenu() ng-if="vm.total > 0"></span><form hide-empty-form-elements ng-if=!vm.compactLeftPanel name=attendanceSheetsQuickSearchForm sf-schema=vm.schema sf-form=vm.form sf-model=vm.model sf-use-decorator=oxdDecorator></form><div class="filter-icon icon-holder" title="{{\'Show Filters\' | translate}}" oxd-tooltip data-placement=bottom ng-click=vm.toggleLeftMenu() ng-if=vm.compactLeftPanel><i class=material-icons>oxd_filter</i></div></div><div class=list-right-panel ng-class="{\'compact\':!vm.compactLeftPanel}"><list objs=vm.employeeAttendanceSheets listdata=vm.listDefinition initialsortfield=vm.orderField initialsortorder="\'DESC\'" extracontroller=vm></list></div></div></div></div>'),e.put("app/attendance/attendanceSheets/pay-hours-panel.html",'<div ng-if="vm.payHours !== undefined && vm.payHours != 0" id=attendancePayHoursPanel class=payHoursPanel><div class=pay-hours-component-heading><span class=material-icons>ohrm_timer_oxd</span> <span class=header-text>{{\'Pay Hours\' | translate}}</span></div><div class=pay-hours-component-container><span class=pay-hours-component ng-repeat="payHoursPerCode in vm.payHours"><div class=pay-code-description>{{payHoursPerCode.description | translate}}</div><div class=pay-hours-duration ng-class=vm.getPayHoursComponentClass(payHoursPerCode.index)>{{payHoursPerCode.duration}}</div></span></div></div>'),e.put("app/attendance/attendanceSheets/switch-employee.html","<div id=switchEmployeePopover show-modal-as-popover=modal.clickEvent class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title=\"{{(modal.title || 'Filter')}}\" form-schema=modal.schema form=modal.form model=modal.model show-header=false show-footer=false modal-size-class=popover-xsm></generic-oxd-modal></div>"),e.put("app/attendance/myPunchInOut/attendance_my_punch_in_out.html",'<div class=pim-container ng-if=vm.permissions.read><div id=attendanceMyPunchInOutDiv class=form-div><h4>{{vm.attendanceMyPunchInOutHeading | translate}}</h4><div id=myPunchInOutDetailsDiv><div><div id=myPunchedInTimeDiv class=row ng-if="vm.idToPunchOut && vm.formattedPunchInUserTime"><span class="col s2 m2 l2 myPunchedInDetailsTitle">{{\'Punched in Time\' | translate}}</span> <span class="col s8 m8 l8 myPunchedInDetailsValue">{{vm.formattedPunchInUserTime}}</span></div><div id=myPunchedInNoteDiv class=row ng-if="vm.idToPunchOut && vm.formattedPunchInUserTime && vm.lastPunchRecord.punchInNote"><span class="col s2 m2 l2 myPunchedInDetailsTitle">{{\'Punched in Note\' | translate}}</span> <span class="col s8 m8 l8 myPunchedInDetailsValue">{{vm.lastPunchRecord.punchInNote}}</span></div></div><div ng-if=vm.readOnlyMode><div id=myPunchInOutDateDiv class=row ng-if=vm.formattedPunchInOutDate><span class="col s2 m2 l2 myPunchInOutDetailsTitle">{{\'Date\' | translate}}</span> <span class="col s8 m8 l8 myPunchInOutDetailsValue">{{vm.formattedPunchInOutDate}}</span></div><div id=myPunchInOutTimeDiv class=row ng-if=vm.formattedPunchInOutTime><span class="col s2 m2 l2 myPunchInOutDetailsTitle">{{\'Time\' | translate}}</span> <span class="col s8 m8 l8 myPunchInOutDetailsValue">{{vm.formattedPunchInOutTime}}<span id=punchInOutTimeFormat>{{\'HH:MM\'}}</span></span></div></div></div><form name=attendanceMyPunchInOutForm sf-schema=vm.schema sf-form=vm.form sf-model=vm.model></form><div id=allowedActionsDiv class=row><div id=forcePunchInDiv class="col s12 m8 l8" ng-if=vm.isForcePunchInPossible><a ng-if=vm.forcePunchInDescription ng-click=vm.forcePunchIn()>{{vm.forcePunchInDescription | translate}}</a></div><div id=allowedActionButtonsDiv class="col {{vm.isForcePunchInPossible && vm.forcePunchInDescription ? \'s12 m4 l4\' : \'s12\'}} right-align"><button type=button class="btn waves-effect waves-green" ng-if="vm.allowedActions.PunchIn || vm.allowedActions.PunchOut" ng-click=vm.onSubmit(attendanceMyPunchInOutForm) ng-class="{\'disabled\' : !vm.isAllowedClientIp || vm.isGeoLocationMandatory || vm.isSelfieMandatory}">{{vm.allowedActions.PunchOut ? \'Out\' : \'In\' | translate}}</button></div></div></div></div>'),e.put("app/attendance/punchInOut/attendance_punch_in_out.html",'<div class=pim-container ng-if=vm.permissions.read><div id=attendancePunchInOutDiv class=form-div><h4>{{vm.attendancePunchInOutHeading | translate}}</h4><div id=punchedInDetailsDiv><div id=punchedInTimeDiv class=row ng-if="vm.idToPunchOut && vm.formattedPunchInUserTime"><span class="col s2 m2 l2 punchedInDetailsTitle">{{\'Punched in Time\' | translate}}</span> <span class="col s8 m8 l8 punchedInDetailsValue">{{vm.formattedPunchInUserTime}}</span></div><div id=punchedInNoteDiv class=row ng-if="vm.idToPunchOut && vm.formattedPunchInUserTime && vm.lastPunchRecord.punchInNote"><span class="col s2 m2 l2 punchedInDetailsTitle">{{\'Punched in Note\' | translate}}</span> <span class="col s8 m8 l8 punchedInDetailsValue">{{vm.lastPunchRecord.punchInNote}}</span></div></div><form name=attendancePunchInOutForm sf-schema=vm.schema sf-form=vm.form sf-model=vm.model></form><div id=allowedActionsDiv class=row><div id=forcePunchInDiv class="col s12 m8 l8" ng-if=vm.isForcePunchInPossible><a ng-if=vm.forcePunchInDescription ng-click=vm.forcePunchIn()>{{vm.forcePunchInDescription | translate}}</a></div><div id=allowedActionButtonsDiv class="col {{vm.isForcePunchInPossible && vm.forcePunchInDescription ? \'s12 m4 l4\' : \'s12\'}} right-align"><button type=button class="btn waves-effect waves-green" ng-if="vm.allowedActions.PunchIn || vm.allowedActions.PunchOut" ng-click=vm.onSubmit(attendancePunchInOutForm)>{{vm.allowedActions.PunchOut ? \'Out\' : \'In\' | translate}}</button></div></div></div></div>'),e.put("app/blocks/myShortcuts/add_my_shortcuts.html","<div id=modal1 class=modal tabindex=-1 role=dialog><oxd-modal-with-form modal-title=\"{{'Add My Shortcut' | translate}}\" show-close-button=true form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-sm></oxd-modal-with-form></div>"),e.put("app/corporate_directory/directory/corporate-directory-filter.html","<div show-modal-as-popover=modal.clickEvent class=modal tabindex=-1 role=dialog><generic-oxd-modal hide-empty-form-elements modal-title=\"{{(modal.title || 'Filter')}}\" show-close-button=false show-reset-button=true show-header=true show-footer=true form-schema=modal.schema form=modal.form model=modal.model save-button-label=Search cancel-button-label=Cancel on-save=modal.apply on-cancel=modal.cancel on-reset=modal.reset modal-size-class=modal-sm></generic-oxd-modal></div>"),e.put("app/corporate_directory/directory/corporate-directory.directory.html",'<div class=corporate-directory-panel-container><div id=#corporate-directory-left-panel-id class="corporate-directory-left-panel pim-container" ng-class="{\'compact\':vm.isProfile}"><div><div class=corporate-directory-heading-container><span class=corporate-directory-heading>{{\'Directory\' | translate}}</span> <span class=corporate-search-filter-container><directory-search-filter ng-if=vm.loadFinish quick-search=vm.quickSearch on-filter-open=vm.onFilterOpen></directory-search-filter></span></div><div class="employee-container-overlay corporate-scroll-bar"><div class=infinity-corporate-container infinite-scroll-distance=0.1 infinite-scroll-container=\'".corporate-scroll-bar"\' infinite-scroll=vm.fetchEmployees() infinite-scroll-immediate-check=true><div class=employee-info-container ng-repeat="employee in vm.employees"><directory-employee-info employee-obj=employee click-handler=vm.showProfile></directory-employee-info></div></div><div ng-if="vm.employees.length == 0 && vm.loadFinish && !vm.busyLoadingData" class=directory-no-item-watermark><img ng-src=images/corporateDirectory/watermarks/notfound.png src=images/corporateDirectory/watermarks/notfound.png><div class=no-items-placeholder>{{\'No Employees Found\'| translate}}</div></div><div class="col-12 corporate-directory-left-panel-loader"><oxd-loader ng-if=vm.showLoader></oxd-loader></div></div></div></div><div ng-if=vm.isProfile id=#corporate-directory-right-panel-id class=corporate-directory-right-panel><directory-selected-employee-info selected-employee=vm.selectedEmployee hide-selected-profile=vm.hideProfile></directory-selected-employee-info></div></div>'),e.put("app/core/dashboard/dashboard.html",'<div class="oxd-dashboard container"><div class=dashboard-container><dashboard-layout widgets=vm.widgets type=vm.type></dashboard-layout></div></div>'),e.put("app/core/modal/calendar-feed-modal.html",'<div id=calendarFeed class=modal tabindex=-1 role=dialog><div class="modal-dialog modal-md" role=document><div class=modal-content><div class=modal-header><span><h5 class=modal-title>{{modal.modalTitle}}</h5></span> <button type=button class="btn btn-close" aria-label="{{\'Close\' | translate}}" data-dismiss=modal>&times</button></div><div class=modal-body><form name=calendarFeedForm id=calendarFeedForm><oxd-loader ng-if=modal.loader></oxd-loader><div ng-if=!modal.loader><div class=calendar-feed-sub-heading><i class="material-icons body-text-icon-container">ohrm_question_oxd</i><p>{{modal.subHeaderLine1}}<br>{{modal.subHeaderLine2}}<br>{{modal.subHeaderLine3}}</p></div><div class=ical-feed-filter-container ng-class="{\'container-filter-confirmation\': modal.filterConfirmationShow}"><div class=ical-feed-filter-heading><p><i class=material-icons>oxd_filter</i>{{modal.filterHeaderMessage | translate}}</p><button type=button oxd-tooltip data-original-title="{{\'Update with current filter values\' | translate}}" ng-if="!modal.isFiltersEqual && modal.model.status" class="btn btn-primary" ng-click=modal.updateFilters()>{{\'Update filters\' | translate}}</button></div><ul class=ical-feed-filter-list ng-class="{\'display-grid\': modal.feedType==\'my_leave\'}"><li ng-repeat="filter in modal.filtersForDisplay"><div><p class=filter-name>{{filter.name | translate}}:</p><p class=filter-value>{{filter.value}}</p></div></li></ul><div class=ical-feed-expire-date ng-if=modal.expireDate><i class=material-icons>oxd_expire_date</i><p>{{modal.expireMessage}}</p></div></div><div class="filter-modal-confirmation-container filter-modal-confirmation-container-custom" ng-if=modal.filterConfirmationShow><small class="mr-auto modal-confirmation-msg-span modal-confirmation-msg-span-custom"><span class=modal-confirmation-msg>{{modal.confirmationMessage | translate}}</span></small><div class=modal-confirmation-msg-custom-st><button type=button class="btn btn-ghost confirmation-cancel-button" ng-click=modal.cancelFilterUpdating() data-dismiss=modal>{{\'No, Cancel\' | translate}}</button> <button type=button class="btn btn-success confirmation-confirm-button" ng-click=modal.confirmFilterUpdate()>{{\'Yes, Confirm\' | translate}}</button></div></div><hr><div sf-schema=modal.schema class=form-container sf-form=modal.form sf-model=modal.model sf-use-decorator=oxdDecorator></div><div class="regenerate-modal-confirmation-container regenerate-modal-confirmation-container-custom" ng-if=modal.regeneratingConfirmationShow><div class=modal-confirmation-msg-cus-small><small class="mr-auto modal-confirmation-msg-span modal-confirmation-msg-cus-small-custom"><span class=modal-confirmation-msg>{{\'Do you wish to remove the current link for the feed and obtain a new one? If so, please be aware that any calendars configured with the current link will no longer receive updates.\' | translate}}</span></small></div><div class=modal-confirmation-msg-custom-st><button type=button class="btn btn-ghost confirmation-cancel-button" ng-click=modal.cancelLinkRegenerating() data-dismiss=modal>{{\'No, Cancel\' | translate}}</button> <button type=button class="btn btn-warning confirmation-confirm-button" ng-click=modal.confirmGenerateNewLink()>{{\'Yes, Confirm\' | translate}}</button></div></div></div></form></div></div></div></div>'),e.put("app/core/modal/confirmation_modal.html",'<div id=delete_confirmation_modal class="modal confirm-dialog"><div class=modal-content><h4></h4><p>{{modal.message | translate}}</p></div><div class=modal-footer><a href ng-click=modal.cancel() class="modal-action modal-close waves-effect btn">{{modal.cancelLabel | translate}}</a> <a href ng-click=modal.confirm() class="modal-action modal-close waves-effect btn primary-btn">{{modal.successLabel | translate}}</a></div></div>'),e.put("app/core/modal/list-config-option.html",'<i ng-if=vm.listConfigPermissions.update class="material-icons action-icon tooltipped" data-tooltip="{{ \'Configure\' | translate }}" ng-click=vm.configureList()>settings</i>'),e.put("app/core/modal/list-configuration.html",'<div id=modal1 class=modal tabindex=-1 role=dialog><oxd-modal-with-form hide-empty-form-elements modal-title="{{modal.modalHeader | translate}}" show-close-button=true show-reset-button=false show-cancel-button=true form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class="\'modal-md\'"></oxd-modal-with-form></div>'),e.put("app/core/modal/oxd-comment-popover.html","<div id=commentPopover show-modal-as-popover=modal.clickEvent class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title=\"{{(modal.title || 'Filter')}}\" form-schema=modal.schema form=modal.form model=modal.model show-header=false , show-footer=modal.canEdit save-button-label=Save on-save=modal.save modal-content-class={{modal.modalContentClass}} modal-size-class=popover-sm></generic-oxd-modal></div>"),e.put("app/core/modal/oxd_confirmation_modal.html",'<div class="modal confirmation-modal" tabindex=-1 role=dialog id=delete_confirmation_modal><div class="modal-dialog modal-sm" role=document><div class=modal-content><div class=modal-header><div class=modal-header-icon ng-if=modal.headerIcon><div class=icon-wrap><i class=material-icons>{{modal.headerIcon}}</i></div></div><h5 class=modal-title>{{modal.title | translate}}</h5><button type=button class="btn btn-close" aria-label="{{\'Close\' | translate}}" ng-hide=modal.loading data-dismiss=modal>&times</button></div><div class=modal-body ng-class="{loading: modal.loading}"><p>{{modal.message | translate}}</p><oxd-loader ng-if=modal.loading></oxd-loader></div><div class="modal-footer justify-content-center"><button type=button class="btn {{modal.cancelButton}}" ng-class="{disabled: modal.loading}" data-dismiss=modal>{{modal.cancelLabel | translate}}</button> <button type=button class="btn {{modal.successButton}}" ng-class="{disabled: modal.loading}" id=save-button ng-attr-data-icon={{modal.successButtonIcon}} ng-click=modal.confirm()>{{modal.successLabel | translate}}</button></div></div></div></div>'),e.put("app/core/modal/oxd_modal_with_list.html","<div class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title={{modal.title}} modal-size-class={{modal.modalSizeClass}} list-definition=modal.listDefinition list-data=modal.listData show-save-button=false cancel-button-label=\"{{'Close' | translate}}\"></generic-oxd-modal></div>"),e.put("app/core/modal/oxd_progress_modal.html",'<div class="modal progress-modal" oxd-progress-bar tabindex=-1 role=dialog><div class="modal-dialog modal-sm" role=document><div class=modal-content><div class=modal-header><h5 class=modal-title>{{modal.title | translate}}</h5></div><div class=modal-body><div class="progress linear-progress"><div ng-class="{determinate: modal.determinate, indeterminate: !modal.determinate}" ng-attr-style="width: {{modal.progress}}%"></div></div><div class=linear-progress-value ng-if=modal.determinate>{{modal.progress | number : 0}}%</div></div></div></div></div>'),
e.put("app/core/modal/password_confirmation.html",'<div id=password-confirmation-modal class="modal password-confirmation-modal" tabindex=-1 role=dialog focus-trap focus-element=password><div class="modal-dialog modal-sm" role=document><div class=modal-content><div class=modal-header><button type=button class="btn btn-close" aria-label="{{\'Close\' | translate}}" data-dismiss=modal>&times</button></div><div class=modal-body><div class=modal-main-icon><span class=material-icons>confirm_password</span></div><div class=modal-main-string><p class>{{\'Confirm Password to Continue\' | translate}}</p></div><form name=oxdPasswordVerificationForm class=needs-validation novalidate sf-schema=modal.schema sf-form=modal.form sf-model=modal.model sf-use-decorator=oxdDecorator></form><button type=button class="btn btn-secondary btn-xs" id=modal-save-button ng-class="{\'save-in-progress\': modal.saving}" ohrm-save-form=modal.save(oxdPasswordVerificationForm);><oxd-button-loader ng-if=modal.saving></oxd-button-loader>{{\'Confirm Password\' | translate}}</button><div class=modal-helper-strings><div>* {{"You won\'t need to re-enter your password for a while" | translate}}</div><div>* {{"You will be logged out after 3 incorrect attempts" | translate}}</div></div></div></div></div></div>'),e.put("app/core/modal/progress_modal.html",'<div id=progressModal class="modal modal-fixed-footer" style="width: 40%; height:20%"><h4>{{modal.title | translate}}</h4><div class=modal-content style="height: 30%; overflow-y:hidden"><div class=row><div class=progress style=margin-top:5%><div class=determinate ng-attr-style="width: {{modal.progress}}%"></div></div></div></div></div>'),e.put("app/core/modal/rounded_confirmation_modal.html",'<div id=delete_confirmation_modal class="modal confirm-dialog rounded-confirmation-modal"><div class=modal-content><h4></h4><span ng-repeat="message in modal.customMessages track by $index"><p>{{message | translate}}</p></span></div><div class=modal-footer><a href ng-click=modal.cancel() class="modal-action modal-close waves-effect btn rounded-button secondary-btn">{{modal.cancelLabel | translate}}</a> <a href ng-click=modal.confirm() class="modal-action modal-close waves-effect btn rounded-button">{{modal.successLabel | translate}}</a></div></div>'),e.put("app/core/modal/switch-to-snapshot.html","<div id=switchToSnapshotPopover show-modal-as-popover=modal.clickEvent class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title=\"{{(modal.title || 'Filter')}}\" form-schema=modal.schema form=modal.form model=modal.model show-header=false show-footer=false modal-size-class=popover-xsm></generic-oxd-modal></div>"),e.put("app/core/navBar/common-multiple-tab-navbar.html",'<nav class=sub-nav id=leave-rule-navbar><div class="nav-wrapper row"><div class="container col s3"><ul class=LeaveRuleTitle><li class=page-title>{{vm.title|translate}}</li></ul></div><div class="container col s9"><ul class=right id=top-menu><li ng-repeat="tab in vm.tabs" ng-if="$index < 3"><a ng-if=!tab.link ui-sref={{tab.uiSref}} ui-sref-active=current_tab class="truncate pim-tab-link" data-position=bottom>{{tab.title| translate}}</a> <a ng-if=tab.link ng-href={{tab.link}} ui-sref-active=current_tab class="truncate pim-tab-link" data-position=bottom>{{tab.title| translate}}</a></li><li ng-show="vm.tabs.length > 3"><a id=top-menu-trigger ohrm-dropdown class="dropdown-button truncate pim-tab-link tooltipped" data-tooltip="{{vm.moreLinkText | translate}}" data-position=bottom href data-activates=top-menu-overflow data-hover=false data-constrainwidth=false data-beloworigin=true data-alignment=left data-gutter=-10px><i class="material-icons right">arrow_drop_down</i>{{vm.moreLinkText| translate}}</a></li></ul></div></div></nav><ul id=top-menu-overflow class=dropdown-content><li ng-repeat="tab in vm.tabs" ng-if="$index >= 3"><a ng-if=!tab.link ui-sref={{tab.uiSref}} ui-sref-active=current_tab class ng-click=vm.clickOnOtherLink(tab)>{{tab.title| translate}}</a> <a ng-if=tab.link ng-href={{tab.link}} ui-sref-active=current_tab class ng-click=vm.clickOnOtherLink(tab)>{{tab.title| translate}}</a></li></ul>'),e.put("app/core/reports/filter-field-directive.html",'<div ng-if="filter.type === \'boolean\'"><div class="input-field report_boolean_filter"><input type=checkbox id=report_boolean_filter_{{filterName}} name={{filterName}} ng-model=value[filterName] class=filled-in> <label ng-if=includeLabels for=report_boolean_filter_{{filterName}} translate={{filter.label}}></label> <label ng-if=!includeLabels for=report_boolean_filter_{{filterName}}></label></div></div><div ng-if="filter.type === \'widget_group\'"><report-widget-group filter=filter name=filterName model-value=value[filterName]></report-widget-group></div><div ng-if="!filterUpdating && filter[\'allow-multiple\'] == \'false\' && filter.type === \'select\' && !filter.hasOwnProperty(\'bind\')"><div class=input-field><label class=active ng-if=includeLabels for=report_select_filter_{{filterName}} translate={{filter.label}}></label><select ng-model=value[filterName] ohrm-select not-scrollable=true id=report_select_filter_{{filterName}} name={{filterName}}><option ng-repeat="choice in filter.sortedChoices" value={{choice.value}}>{{choice.label}}</option></select></div></div><div ng-if="filter.type === \'timesheet_period\'"><div class=input-field><select ng-model=value[filterName] ng-required={{filter.required}} materializecss-select id=report_timesheet_period_filter_{{filterName}} name={{filterName}}><option ng-repeat="choice in filter.sortedChoices" value={{choice.value}}>{{choice.label}}</option></select><label class=active ng-if=includeLabels for=report_select_filter_{{filterName}}>{{filter.label | translate}}<em ng-if=filter.required>*</em></label> <span class="help-block col s12" ng-if="formName[filterName].$dirty && formName[filterName].$error.required">{{\'Required\' | translate}}</span></div></div><div ng-if="filter[\'allow-multiple\'] == \'false\' && filter.type === \'select\' && filter.hasOwnProperty(\'bind\')"><div class=input-field><label class=active ng-if=includeLabels for=report_select_filter_{{filterName}} translate={{filter.label}}></label><angucomplete-alt id=report_select_filter_{{filterName}} placeholder="{{\'Type for hints...\' | translate}}" pause=100 selected-object=selectedEntity local-data=getDynamicOptions(value[filter.bind]) search-fields=label title-field=label auto-match=true focus-first=true minlength=1 initial-value=entitySelected input-class="multiselect-autocomplete topnav-autocomplete" match-class=match></angucomplete-alt></div></div><div ng-if="filter[\'allow-multiple\'] == \'false\' && filter.type === \'leave_period\'"><div class=input-field><label class=active ng-if=includeLabels for=report_select_filter_{{filterName}} translate={{filter.label}}></label><select ng-model=value[filterName] ohrm-select not-scrollable=true id=report_leave_period_filter_{{filterName}} name={{filterName}}><option ng-repeat="choice in filter.sortedChoices" value={{choice.value}}>{{choice.label}}</option></select></div></div><div ng-if="filter[\'allow-multiple\'] == \'false\' && filter.type === \'sub_unit\'"><div class=input-field><label class=active ng-if=includeLabels for=report_select_filter_subunit{{filterName}} translate={{filter.label}}></label><select ng-model=value[filterName] ohrm-select not-scrollable=true id=report_select_filter_subunit{{filterName}} name={{filterName}}><option ng-repeat="choice in filter.choices" value={{choice.value}}>{{choice.label}}</option></select></div></div><div ng-if="filter[\'allow-multiple\'] == \'true\' && filter.type === \'sub_unit\'"><div class=input-field><label class=active ng-if=includeLabels for=report_multiselect_subunit_{{filterName}} translate={{filter.label}}></label><autocomplete-multiple id=report_multiselect_subunit_{{filterName}} name={{filterName}} items=filter.choices tree-structure=true ng-model=value[filterName]></autocomplete-multiple></div></div><div ng-if="filter[\'allow-multiple\'] == \'false\' && filter.type === \'sub_unit_all\'"><div class=input-field><label class=active ng-if=includeLabels for=report_select_filter_subunit{{filterName}} translate={{filter.label}}></label><select ng-model=value[filterName] ohrm-select not-scrollable=true id=report_select_filter_subunitall{{filterName}} name={{filterName}}><option ng-repeat="choice in filter.choices" value={{choice.value}}>{{choice.label}}</option></select></div></div><div ng-if="!filterUpdating && filter[\'allow-multiple\'] == \'true\' && filter.type === \'select\'"><div class=input-field><label class=active ng-if=includeLabels for=report_multiselect_filter_{{filterName}} translate={{filter.label}}></label><autocomplete-multiple id=report_multiselect_filter_{{filterName}} name={{filterName}} items=filter.choices ng-model=value[filterName]></autocomplete-multiple></div></div><div ng-if="filter[\'allow-multiple\'] == \'true\' && filter.type === \'location\'"><div class=input-field><label class=active ng-if=includeLabels for=report_multilocation_filter_{{filterName}} translate={{filter.label}}></label><autocomplete-multiple-location id=report_multilocation_filter_{{filterName}} name={{filterName}} items=filter.choices tree-structure=true ng-model=value[filterName]></autocomplete-multiple-location></div></div><div ng-if="filter[\'allow-multiple\'] == \'true\' && filter.type === \'employee\' && employeesForMultiSelect"><div class=input-field><label class=active ng-if=includeLabels for=report_multiselect_empfilter_{{filterName}}>{{filter.label | translate}}<em ng-if=isFilterRequired(filter)>*</em></label><autocomplete-multiple ng-required={{isFilterRequired(filter)}} id=report_multiselect_empfilter_{{filterName}} name={{filterName}} items=employeesForMultiSelect ng-model=value[filterName]></autocomplete-multiple><span class="help-block col s12" ng-messages=formName[filterName].$error ng-if=formName[filterName].$dirty><ng-message when=required translate=Required></ng-message></span></div></div><div ng-if="filter[\'allow-multiple\'] == \'false\' && filter.type === \'employee\'" style="margin-top: 15px;height:auto;"><div class=input-field><label ng-if=includeLabels for=report_employee_filter_{{filterName}} class=active translate={{filter.label}}></label><angucomplete-alt id=report_employee_filter_{{filterName}} placeholder="{{\'Type for hints...\' | translate}}" pause=100 selected-object=employeeSelected remote-api-handler=fetchMatchingEmployees search-fields=firstName,middleName,lastName title-field=firstName,middleName,lastName,past_employee auto-match=true focus-first=true minlength=1 initial-value input-class="multiselect-autocomplete topnav-autocomplete" match-class=match></angucomplete-alt></div></div><div ng-if="filter[\'allow-multiple\'] == \'true\' && filter.type === \'supervisor\' && supervisorsForMultiSelect"><div class=input-field><label class=active ng-if=includeLabels for=report_multiselect_supervisorfilter_{{filterName}} translate={{filter.label}}></label><autocomplete-multiple id=report_multiselect_supervisorfilter_{{filterName}} name={{filterName}} items=supervisorsForMultiSelect ng-model=value[filterName]></autocomplete-multiple></div></div><div ng-if="filter[\'allow-multiple\'] == \'false\' && filter.type === \'supervisor\'" style="margin-top: 15px;height:auto;"><div class=input-field><label ng-if=includeLabels for=report_supervisor_filter_{{filterName}} class=active translate={{filter.label}}></label><angucomplete-alt id=report_supervisor_filter_{{filterName}} placeholder="{{\'Type for hints...\' | translate}}" pause=100 selected-object=employeeSelected remote-api-handler=fetchMatchingSupervisors search-fields=firstName,middleName,lastName title-field=firstName,middleName,lastName,past_employee auto-match=true focus-first=true minlength=1 input-class="multiselect-autocomplete topnav-autocomplete" ng-model=value[filterName] match-class=match></angucomplete-alt></div></div><div ng-if="filter.type === \'date_comparison\'" class=date-comparison><div class="input-field col s6"><input ng-required={{isFilterRequired(filter)}} materializecss-date select-years={{selectYears}} name={{filterName}}-from type=date class=datepicker id=report_date_filter_{{filterName}}_from placeholder="{{\'From\' | translate}}" ng-model=value[filterName].from default-date={{defaultValue.from}} validate-date-range end-date=value[filterName].to end-date-form-field="formName[filterName + \'-to\']" equal-allowed><label for=report_date_filter_{{filterName}}_from class=force-active ng-if=includeLabels>{{filter.label | translate}}<em ng-if=isFilterRequired(filter)>*</em></label> <span class="help-block col s12" ng-messages="formName[filterName + \'-from\'].$error" ng-if="formName[filterName + \'-from\'].$dirty || formName[filterName + \'-to\'].$dirty"><ng-message ng-if="formName[filterName + \'-from\'].$dirty" when=required translate=Required></ng-message><ng-message when=dateRange translate="From date should be before to date"></ng-message></span></div><div class="input-field col s6"><input ng-required={{isFilterRequired(filter)}} materializecss-date select-years={{selectYears}} name={{filterName}}-to type=date class=datepicker id=report_date_filter_{{filterName}}_to placeholder="{{\'To\' | translate}}" ng-model=value[filterName].to default-date={{defaultValue.to}}> <span class="help-block col s12" ng-messages="formName[filterName + \'-to\'].$error" ng-if="formName[filterName + \'-to\'].$dirty"><ng-message when=required translate=Required></ng-message></span></div></div><div ng-if="filter.type === \'date\'"><div class="input-field col s12"><input materializecss-date select-years={{selectYears}} name={{filterName}} type=date class=datepicker id=report_date_filter_{{filterName}} placeholder="{{\'Effective Date\' | translate}}" ng-model=value[filterName] default-date={{defaultValue}} ng-required={{filter.required}}> <label for=report_date_filter_{{filterName}} class=force-active ng-if=includeLabels>{{filter.label | translate}}<em ng-if=filter.required>*</em></label> <span class="help-block col s12" ng-messages=formName[filterName].$error ng-if=formName[filterName].$dirty><ng-message when=required translate=Required></ng-message></span></div></div><div ng-if="filter.type === \'number_comparison\'" class=number-comparison><div class="input-field col s5"><input name={{filterName}}-from type=text id=report_number_range_{{filterName}}_from placeholder="{{\'Min\' | translate}}" ng-model=value[filterName].from validate-number-range end-number=value[filterName].to end-number-form-field="formName[filterName + \'-to\']" equal-allowed> <label for=report_date_filter_{{filterName}}_from ng-if=includeLabels class=force-active translate={{filter.label}}></label> <span class="help-block col s12" ng-messages="formName[filterName + \'-from\'].$error" ng-if="formName[filterName + \'-from\'].$dirty"><ng-message when=validateType translate="Should be a valid number"></ng-message></span></div><div class="input-field col s5 offset-s2"><input name={{filterName}}-to type=text id=report_number_range_{{filterName}}_to placeholder="{{\'Max\' | translate}}" ng-model=value[filterName].to validate-number-range-max min=value[filterName].from> <span class="help-block col s12" ng-messages="formName[filterName + \'-to\'].$error" ng-if="formName[filterName + \'-to\'].$dirty"><ng-message when=validateType translate="Should be a valid number"></ng-message></span></div><span class="help-block col s12" ng-messages="formName[filterName + \'-from\'].$error" ng-if="formName[filterName + \'-from\'].$dirty || formName[filterName + \'-to\'].$dirty"><ng-message when=required translate=Required></ng-message><ng-message when=numberRange translate="Min value should be less than Max value"></ng-message></span></div><div class=slider-wrapper ng-if="filter.type === \'number_comparison_slider\'"><div class=input-field><label ng-if=includeLabels for=report_filter_slider_{{filterName}} translate={{filter.label}}></label><rzslider id=report_filter_slider_{{filterName}} rz-slider-model=value[filterName].from rz-slider-high=value[filterName].to rz-slider-options=slider.options></rzslider></div></div><div ng-if="filter.type === \'year_comparison\'" class=year-comparison><span ng-if=filter.fileInputVisible><div class="input-field col s6" style="padding: 0 1rem 0 0;"><label class=active ng-if=includeLabels for=report_year_filter_{{filterName}}_from translate={{filter.label}}></label><select class=filter-from validate-year-range end-number=value[filterName].to end-number-form-field="formName[filterName + \'-to\']" equal-allowed ng-model=value[filterName].from ohrm-select id=report_year_filter_{{filterName}}_from name={{filterName}}-from ng-options="o as o for o in filter.sortedChoicesFrom" ng-change="redraw(filter.range, value[filterName].from, true)"><option value selected>{{\'From\' | translate}}</option></select></div><div class="input-field col s6" style="padding: 0;"><select validate-number-range-max min=value[filterName].from ng-model=value[filterName].to ohrm-select id=report_year_filter_{{filterName}}_to name={{filterName}}-to ng-options="o as o for o in filter.sortedChoicesTo" ng-change="redraw(filter.range, value[filterName].to, false)"><option value selected>{{\'To\' | translate}}</option></select></div></span> <span class="help-block col s12" ng-messages="formName[filterName + \'-from\'].$error" style="padding: 0px"><ng-message when=required translate=Required></ng-message><ng-message when=numberRange translate="From value should be less than To value"></ng-message></span></div><div ng-if="filter.type === \'text\'"><div class="input-field col s12"><input name={{filterName}} type=text id=report_text_filter_{{filterName}} ng-model=value[filterName] ng-required={{filter.required}} ng-maxlength={{maxLengthForTextField}}> <label for=report_text_filter_{{filterName}} class=force-active ng-if=includeLabels>{{filter.label | translate}}<em ng-if=filter.required>*</em></label> <span class="help-block col s12" ng-messages=formName[filterName].$error ng-if=formName[filterName].$dirty><ng-message when=required translate=Required></ng-message><ng-message when=maxlength translate={{getTextFieldMaxLengthValidationMessage()}}></ng-message></span></div></div>'),e.put("app/core/reports/oxd-filter-field-directive.html",'<div class=form-group ng-if="filter.type === \'boolean\'"><div class="input-field custom-control custom-checkbox report_boolean_filter_{{filterName}}"><input ng-disabled=filter.disabled type=checkbox id=report_boolean_filter_{{filterName}} name={{filterName}} ng-model=value[filterName] class="filled-in custom-control-input"> <label ng-if=includeLabels class=custom-control-label for=report_boolean_filter_{{filterName}} translate={{filter.label}}></label></div></div><div ng-if="filter.type === \'widget_group\'"><report-widget-group template=app/widgets/oxd-report-group-widget.html filter=filter name=filterName form-name=formName model-value=value[filterName]></report-widget-group></div><div class=form-group ng-if="!filterUpdating && filter[\'allow-multiple\'] == \'false\' && filter.type === \'select\' && !filter.hasOwnProperty(\'bind\')"><div class="input-group form-select"><label class=active ng-if=includeLabels for=report_select_filter_{{filterName}} translate={{filter.label}}></label><select data-none-selected-text="{{\'Not Selected\' | translate}}" ng-model=value[filterName] oxd-select not-scrollable=true id=report_select_filter_{{filterName}} name={{filterName}} class=select-dropdown><option ng-repeat="choice in filter.sortedChoices" value={{choice.value}}>{{choice.label | reportValue:filter}}</option></select><div class=input-group-append-container><div class=input-group-append><button class=btn type=button tabindex=-1><i class=material-icons>arrow_drop_down</i></button></div></div></div></div><div class=form-group ng-if="filter.type === \'timesheet_period\'"><div class=input-field><select ng-model=value[filterName] ng-required={{filter.required}} materializecss-select id=report_timesheet_period_filter_{{filterName}} name={{filterName}}><option ng-repeat="choice in filter.sortedChoices" value={{choice.value}}>{{choice.label}}</option></select><label class=active ng-if=includeLabels for=report_select_filter_{{filterName}}>{{filter.label | translate}}<em ng-if=filter.required>*</em></label> <span class="help-block col-12" ng-if="formName[filterName].$dirty && formName[filterName].$error.required">{{\'Required\' | translate}}</span></div></div><div class=form-group ng-if="filter[\'allow-multiple\'] == \'false\' && filter.type === \'select\' && filter.hasOwnProperty(\'bind\')"><div class=input-field><label class=active ng-if=includeLabels for=report_select_filter_{{filterName}} translate={{filter.label}}></label><angucomplete-alt id=report_select_filter_{{filterName}} placeholder="{{\'Type for hints...\' | translate}}" pause=100 selected-object=selectedEntity local-data=getDynamicOptions(value[filter.bind]) search-fields=label title-field=label auto-match=true focus-first=true minlength=1 initial-value=entitySelected input-class="multiselect-autocomplete topnav-autocomplete" match-class=match></angucomplete-alt></div></div><div class=form-group ng-if="filter[\'allow-multiple\'] == \'false\' && filter.type === \'leave_period\'"><div class=input-field><label class=active ng-if=includeLabels for=report_select_filter_{{filterName}} translate={{filter.label}}></label><select ng-model=value[filterName] ohrm-select not-scrollable=true id=report_leave_period_filter_{{filterName}} name={{filterName}}><option ng-repeat="choice in filter.sortedChoices" value={{choice.value}}>{{choice.label}}</option></select></div></div><div class=form-group ng-if="filter[\'allow-multiple\'] == \'false\' && filter.type === \'sub_unit\'"><div class=input-field><label class=active ng-if=includeLabels for=report_select_filter_subunit{{filterName}} translate={{filter.label}}></label><select ng-model=value[filterName] ohrm-select not-scrollable=true id=report_select_filter_subunit{{filterName}} name={{filterName}}><option ng-repeat="choice in filter.choices" value={{choice.value}}>{{choice.label}}</option></select></div></div><div class=form-group ng-if="filter[\'allow-multiple\'] == \'true\' && filter.type === \'sub_unit\'"><div class=input-field><label class=active ng-if=includeLabels for=report_multiselect_subunit_{{filterName}} translate={{filter.label}}></label><oxd-multiselect id=report_multiselect_subunit_{{filterName}} name={{filterName}} items=filter.choices tree-structure=true ng-model=value[filterName]></oxd-multiselect><span class="help-block col-12" ng-messages=formName[filterName].$error ng-if=formName[filterName].$dirty><ng-message when=invalidSearchString translate=Invalid></ng-message></span></div></div><div class=form-group ng-if="filter[\'allow-multiple\'] == \'false\' && filter.type === \'sub_unit_all\'"><div class="input-group form-select"><label class=active ng-if=includeLabels for=report_select_filter_subunitall_{{filterName}} translate={{filter.label}}></label><select data-none-selected-text="{{\'Not Selected\' | translate}}" ng-model=value[filterName] oxd-select not-scrollable=true id=report_select_filter_subunitall_{{filterName}} name={{filterName}} class=select-dropdown><option value=1>{{\'All\' | translate}}</option><option ng-if="choice.value != 1" ng-repeat="choice in filter.choices" value={{choice.value}}>{{choice.label | reportValue:filter}}</option></select><div class=input-group-append-container><div class=input-group-append><button class=btn type=button tabindex=-1><i class=material-icons>arrow_drop_down</i></button></div></div></div></div><div class=form-group ng-if="!filterUpdating && filter[\'allow-multiple\'] == \'true\' && filter.type === \'select\'"><div class=input-field><label class=active ng-if=includeLabels for=report_multiselect_filter_{{filterName}} translate={{filter.label}}></label><oxd-multiselect id=report_multiselect_filter_{{filterName}} name={{filterName}} items=filter.choices ng-model=value[filterName]></oxd-multiselect><span class="help-block col-12" ng-messages=formName[filterName].$error ng-if=formName[filterName].$dirty><ng-message when=invalidSearchString translate=Invalid></ng-message></span></div></div><div class=form-group ng-if="filter[\'allow-multiple\'] == \'true\' && filter.type === \'location\'"><div class=input-field><label class=active ng-if=includeLabels for=report_multilocation_filter_{{filterName}} translate={{filter.label}}></label><oxd-multiselect id=report_multilocation_filter_{{filterName}} name={{filterName}} items=filter.choices tree-structure=true ng-model=value[filterName]></oxd-multiselect><span class="help-block col-12" ng-messages=formName[filterName].$error ng-if=formName[filterName].$dirty><ng-message when=invalidSearchString translate=Invalid></ng-message></span></div></div><div class=form-group ng-if="filter[\'allow-multiple\'] == \'true\' && filter.type === \'employee\' && employeesForMultiSelect"><div class=input-field><label class=active ng-if=includeLabels for=report_multiselect_empfilter_{{filterName}}>{{filter.label | translate}}<em ng-if=isFilterRequired(filter)>*</em></label><oxd-multiselect items=employeesForMultiSelect ng-required={{isFilterRequired(filter)}} id=report_multiselect_empfilter_{{filterName}} name={{filterName}} ng-model=value[filterName]></oxd-multiselect><span class="help-block col-12" ng-messages=formName[filterName].$error ng-if=formName[filterName].$dirty><ng-message when=required translate=Required></ng-message><ng-message when=invalidSearchString translate=Invalid></ng-message></span></div></div><div class=form-group ng-if="filter[\'allow-multiple\'] == \'false\' && filter.type === \'employee\'" style="margin-top: 15px;height:auto;"><div class=input-field><label ng-if=includeLabels for=report_employee_filter_{{filterName}} class=active translate={{filter.label}}></label><angucomplete-alt id=report_employee_filter_{{filterName}} placeholder="{{\'Type for hints...\' | translate}}" pause=100 selected-object=employeeSelected remote-api-handler=fetchMatchingEmployees search-fields=firstName,middleName,lastName title-field=firstName,middleName,lastName,past_employee auto-match=true focus-first=true minlength=1 initial-value input-class="multiselect-autocomplete topnav-autocomplete" match-class=match></angucomplete-alt></div></div><div class=form-group ng-if="filter[\'allow-multiple\'] == \'true\' && filter.type === \'supervisor\' && supervisorsForMultiSelect"><div class=input-field><label class=active ng-if=includeLabels for=report_multiselect_supervisorfilter_{{filterName}} translate={{filter.label}}></label><oxd-multiselect id=report_multiselect_supervisorfilter_{{filterName}} name={{filterName}} items=supervisorsForMultiSelect ng-model=value[filterName]></oxd-multiselect><span class="help-block col-12" ng-messages=formName[filterName].$error ng-if=formName[filterName].$dirty><ng-message when=invalidSearchString translate=Invalid></ng-message></span></div></div><div class=form-group ng-if="filter[\'allow-multiple\'] == \'false\' && filter.type === \'supervisor\'" style="margin-top: 15px;height:auto;"><div class=input-field><label ng-if=includeLabels for=report_supervisor_filter_{{filterName}} class=active translate={{filter.label}}></label><angucomplete-alt id=report_supervisor_filter_{{filterName}} placeholder="{{\'Type for hints...\' | translate}}" pause=100 selected-object=employeeSelected remote-api-handler=fetchMatchingSupervisors search-fields=firstName,middleName,lastName title-field=firstName,middleName,lastName,past_employee auto-match=true focus-first=true minlength=1 input-class="multiselect-autocomplete topnav-autocomplete" ng-model=value[filterName] match-class=match></angucomplete-alt></div></div><div ng-if="filter.type === \'date_comparison\'" class="report-filter-type-with-two-inputs date-comparison form-group"><label class=force-active ng-if=includeLabels>{{filter.label | translate}}<em ng-if=isFilterRequired(filter)>*</em></label><div class="report-filter-type-input-holder row"><oxd-report-date-comparison-from-field filter-name=filterName value=value default-value=defaultValue filter=filter form-name=formName></oxd-report-date-comparison-from-field><oxd-report-date-comparison-to-field filter-name=filterName value=value default-value=defaultValue filter=filter form-name=formName></oxd-report-date-comparison-to-field></div><span class="help-block col s12" ng-messages="formName[filterName + \'-from\'].$error" ng-if="formName[filterName + \'-from\'].$dirty || formName[filterName + \'-to\'].$dirty"><ng-message when=dateRange translate="From date should be before to date"></ng-message><ng-message when=futureDate translate="Not allowed to select a future date"></ng-message></span></div><div class=form-group ng-if="filter.type === \'date\'"><label for=report_date_filter_{{filterName}} ng-if=includeLabels>{{filter.label | translate}}<em ng-if=filter.required>*</em></label><div class="input-group form-date" ng-form name={{filterName}}><input type=text id=report_date_filter_{{filterName}} name=dateTextInput class="form-control truncate" ng-model=dateText ng-pattern=datePattern ng-change=textClicked($event) ng-attr-data-original-title="{{longDateFormat && dateText || undefined }}" oxd-tooltip data-placement=bottom date-picker-text-input-set-dirty-and-validation-status=filterName ng-model-options="{updateOn: \'blur\'}"><div class=input-group-append-container><div class=input-group-append><input oxd-date hidden select-years={{selectYears}} name=dateHolder type=date class="datepicker original" sf-changed=form id=report_date_filter_{{filterName}} ng-change=datePickerUpdated($event) ng-model=value[filterName] default-date={{defaultValue}} ng-required={{filter.required}}> <button class="btn date-picker-button" type=button><i class="material-icons date-picker-open-icon">date_range</i></button></div></div><span class="help-block col-12" ng-messages=formName[filterName].$error ng-if=formName[filterName].$dirty><ng-message when=pattern>{{errorMessage}}</ng-message><ng-message when=required translate=Required></ng-message></span></div></div><div ng-if="filter.type === \'number_comparison\'" class="number-comparison report-filter-type-with-two-inputs form-group"><label for=report_date_filter_{{filterName}}_from ng-if=includeLabels class=force-active translate={{filter.label}}></label><div class="report-filter-type-input-holder row"><div class="input-field col-6 report-filter-type-input"><input name={{filterName}}-from class=form-control type=text id=report_number_range_{{filterName}}_from placeholder="{{\'Min\' | translate}}" ng-model=value[filterName].from validate-number-range end-number=value[filterName].to end-number-form-field="formName[filterName + \'-to\']" equal-allowed> <span class="help-block col-12" ng-messages="formName[filterName + \'-from\'].$error" ng-if="formName[filterName + \'-from\'].$dirty"><ng-message when=validateType translate="Should be a valid number"></ng-message></span></div><div class="input-field col-6 report-filter-type-input"><input name={{filterName}}-to class=form-control type=text id=report_number_range_{{filterName}}_to placeholder="{{\'Max\' | translate}}" ng-model=value[filterName].to validate-number-range-max min=value[filterName].from> <span class="help-block col-12" ng-messages="formName[filterName + \'-to\'].$error" ng-if="formName[filterName + \'-to\'].$dirty"><ng-message when=validateType translate="Should be a valid number"></ng-message></span></div></div><span class="help-block col-12" ng-messages="formName[filterName + \'-from\'].$error" ng-if="formName[filterName + \'-from\'].$dirty || formName[filterName + \'-to\'].$dirty"><ng-message when=required translate=Required></ng-message><ng-message when=numberRange translate="Min value should be less than Max value"></ng-message></span></div><div class="slider-wrapper form-group" ng-if="filter.type === \'number_comparison_slider\'"><div class=input-field><label ng-if=includeLabels for=report_filter_slider_{{filterName}} translate={{filter.label}}></label><rzslider id=report_filter_slider_{{filterName}} rz-slider-model=value[filterName].from rz-slider-high=value[filterName].to rz-slider-options=slider.options></rzslider></div></div><div ng-if="filter.type === \'year_comparison\'" class="year-comparison form-group report-filter-type-with-two-inputs"><label for=report_date_filter_{{filterName}}_from ng-if=includeLabels class=force-active translate={{filter.label}}></label><div class="form-group report-filter-type-input-holder row"><div class="input-group form-group form-select col-6 report-filter-type-input"><select validate-year-range end-number=value[filterName].to end-number-form-field="formName[filterName + \'-to\']" equal-allowed ng-model=value[filterName].from oxd-select class=select-dropdown not-scrollable=true id=report_year_filter_{{filterName}}_from name={{filterName}}-from " ng-options="o as o for o in filter.sortedChoicesFrom"><option value>{{\'From\' | translate}}</option><option ng-repeat="(key, value) in filter.sortedChoicesFrom" value={{key}}>{{value}}</option></select><div class=input-group-append-container><div class=input-group-append><button class=btn type=button tabindex=-1><i class=material-icons>arrow_drop_down</i></button></div></div></div><div class="input-group form-group form-select col-6 report-filter-type-input"><select validate-number-range-max min=value[filterName].from ng-model=value[filterName].to oxd-select class=select-dropdown not-scrollable=true id=report_year_filter_{{filterName}}_to name={{filterName}}-to><option value>{{\'To\' | translate}}</option><option ng-repeat="(key, value) in filter.sortedChoicesTo" value={{key}}>{{value}}</option></select><div class=input-group-append-container><div class=input-group-append><button class=btn type=button tabindex=-1><i class=material-icons>arrow_drop_down</i></button></div></div></div></div><span class="help-block col-12" ng-messages="formName[filterName + \'-from\'].$error" style="padding: 0px"><ng-message when=required translate=Required></ng-message><ng-message when=numberRange translate="From value should be less than To value"></ng-message></span></div><div class=form-group ng-if="filter.type === \'text\'"><div class="input-field col-12"><input name={{filterName}} type=text id=report_text_filter_{{filterName}} ng-model=value[filterName] ng-required={{filter.required}} ng-maxlength={{maxLengthForTextField}}> <label for=report_text_filter_{{filterName}} class=force-active ng-if=includeLabels>{{filter.label | translate}}<em ng-if=filter.required>*</em></label> <span class="help-block col-12" ng-messages=formName[filterName].$error ng-if=formName[filterName].$dirty><ng-message when=required translate=Required></ng-message><ng-message when=maxlength translate={{getTextFieldMaxLengthValidationMessage()}}></ng-message></span></div></div>'),
e.put("app/core/reports/report-config-chart-modal.html",'<div class=modal tabindex=-1 role=dialog><generic-oxd-modal hide-empty-form-elements modal-title="{{modal.modalProperties.title| translate}}" show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-md></generic-oxd-modal></div>'),e.put("app/core/reports/report-csv-export-modal.html","<div id=reportCsvExportModal show-modal-as-popover=modal.clickEvent class=modal tabindex=-1 role=dialog><generic-oxd-modal hide-empty-form-elements modal-title=\"{{(modal.title || 'Filter')}}\" form-schema=modal.schema form=modal.form model=modal.model show-header=false , show-footer=true save-button-label=Export on-save=modal.save modal-size-class=export-configurations></generic-oxd-modal></div>"),e.put("app/core/reports/report-definition.html",'<div class="pim-container report-definition"><form id=pimReportDefinitionStep1Form name=pimReportDefinitionStep1Form novalidate ng-if="vm.current_step === 1 && vm.loaded"><div ng-cloak class=form-section ng-init=vm.storeStep1Form(pimReportDefinitionStep1Form)><div class=row><div class="input-field col s12"><input name=reportName id=pimDefineReportName type=text class=validate ng-model=vm.definition.name required validate-unique=vm.existingReportNamesLowerCased ng-maxlength={{vm.reportNameMaxLength}}> <label for=pimDefineReportName ng-class="{active: vm.definition.name !== null}">{{\'Report Name\' | translate}}<em>*</em></label> <span class=help-block ng-show="pimReportDefinitionStep1Form.reportName.$error.required && !pimReportDefinitionStep1Form.$pristine" translate=Required></span> <span class=help-block ng-show="pimReportDefinitionStep1Form.reportName.$error.validateUnique && !pimReportDefinitionStep1Form.$pristine" translate="Already Exists"></span> <span class=help-block ng-show="pimReportDefinitionStep1Form.reportName.$error.maxlength && !pimReportDefinitionStep1Form.$pristine" translate={{vm.getMaxLengthValidationMessage()}}></span><div class="row requiredHelperText"><div class=helpvalue><em>*</em> {{"Required field" | translate}}</div></div></div></div></div><div class=wizard-step-buttons><button class="btn waves-effect waves-light left" type=button ng-click=vm.prevStep() translate=Prev></button> <button class="btn waves-effect waves-light right" type=button ng-click=vm.nextStep() ng-class="{disabled: !pimReportDefinitionStep1Form.$valid || !vm.reportNamesReady}" ng-disabled="!pimReportDefinitionStep1Form.$valid || !vm.reportNamesReady" translate=Next></button></div></form><form id=pimReportDefinitionStep4Form name=pimReportDefinitionStep4Form novalidate ng-if="vm.current_step === 2"><div ng-cloak class=form-section><h4>{{\'Grouping Fields\' | translate}}</h4><div class=row><div class="input-field col s3" ng-repeat="(groupingName, properties) in vm.availableGroupingFields | limitTo: 2" style="height: 45px;"><input type=checkbox id=selectedGroupingField_{{groupingName}} name=selectedFilters[] ng-checked="vm.selectedGroupingFields.indexOf(groupingName) !== -1" class=filled-in ng-click="vm.toggleGroupingFields(groupingName, properties)"> <label for=selectedGroupingField_{{groupingName}}>{{properties.label | translate}}</label></div></div></div><div class=wizard-step-buttons><button class="btn waves-effect waves-light left" type=button ng-click=vm.prevStep() translate=Prev></button> <button class="btn waves-effect waves-light right" type=button ng-click=vm.nextStep() ng-disabled=!pimReportDefinitionStep4Form.$valid translate=Next></button></div></form><form id=pimReportDefinitionStep2Form name=pimReportDefinitionStep2Form novalidate ng-if="vm.current_step === 3"><div ng-cloak class=form-section ng-class="{collapsed: !vm.showFilterSelection}"><div class="row col s12 form-section-heading"><span class="valign title col s8">{{\'Selection Criteria\' | translate}}</span> <button id=filter-group-dropdown-trigger ohrm-dropdown class="dropdown-button btn right add-display-group-button" href data-constrainwidth=true data-beloworigin=true data-alignment=right ng-disabled=!vm.displayGroupsAvailable() ng-if=vm.filterGroupsAvailable data-activates=add-filter-group-dropdown data-hover=false translate="Additional Selection Criteria"></button></div><div class=row ng-show=vm.showFilterSelection ng-if=!vm.filterGroupsAvailable><div class="input-field col s3" ng-repeat="(filterName, properties) in vm.availableFilters"><input type=checkbox id=selectedFilters_{{filterName}} name=selectedFilters[] ng-checked="vm.selectedFilterNames.indexOf(filterName) !== -1" class=filled-in ng-click="vm.toggleFilters(filterName, null)" ng-hide=vm.isFilterUndeletable(filterName)> <label for=selectedFilters_{{filterName}} ng-hide=vm.isFilterUndeletable(filterName)>{{properties.label | translate}}</label></div></div><div class="row report-filter-group-row" ng-repeat="(filterGroupId, filterGroup) in vm.availableFiltersWithGroups" ng-if="filterGroup.selected && vm.filterGroupsAvailable"><div class="col s3 filter-group-label"><a href ng-click="vm.toggleSelectedFilterGroup(filterGroupId, false)" class="valign left" ng-if=filterGroup.removable><i class=material-icons>delete</i></a> <label>{{filterGroup.name | translate}}</label></div><div class="col s9"><div class=row style="margin-bottom: 0;"><div class="input-field col s4" ng-repeat="(filterName, properties) in vm.getSelectableFilterFields(filterGroup.fields) track by $index" style="padding-bottom: 20px;" ng-class="{\'clearfix\' : $index % 3 === 0}"><input type=checkbox id=selectedFilters_{{filterName}}_withgroup name=selectedFilters[] ng-checked="vm.selectedFilterNames.indexOf(filterName) !== -1" class=filled-in ng-click="vm.toggleFilters(filterName, filterGroupId)" ng-hide=vm.isFilterUndeletable(filterName)> <label for=selectedFilters_{{filterName}}_withgroup ng-hide=vm.isFilterUndeletable(filterName)>{{properties.label | translate}} <i class="display-field-additional-options material-icons" ng-if="vm.hasSubFilterFields(filterGroup, filterName)" ng-click="vm.openFilterFieldConfig(filterGroup, filterName, $event)" ng-class="{\'options-selected\': vm.selectedSubFilterFields[filterName] && vm.selectedSubFilterFields[filterName].length > 0}">ohrm_function</i></label></div></div></div></div><div class=summary ng-show="vm.showFilterSelection && vm.selectedFilterNames.length > vm.defaultFilterCount">{{vm.selectedFilterNames.length - vm.defaultFilterCount}} {{\'Item(s) added to search\' | translate}}</div></div><div ng-cloak class="form-section no-heading"><div class="row report-filter-row" ng-repeat="filter in vm.selectedFilterNames"><div class="col s3 filter-name" ng-class="{undeletable: vm.isFilterUndeletable(filter)}"><a href ng-click=vm.toggleFilters(filter) class=valign ng-if=!vm.isFilterUndeletable(filter)><i class=material-icons>delete</i></a><div class=valign style="margin-left: 24px;" ng-if="vm.isFilterUndeletable(filter) && vm.availableFilters[filter].type ===\'date\'">{{vm.getPrefixedFilterName(filter) |translate}}<em ng-if=vm.availableFilters[filter].required>*</em></div><div class=valign ng-if="vm.isFilterUndeletable(filter) && vm.availableFilters[filter].type !==\'date\'">{{vm.getPrefixedFilterName(filter) |translate}}</div><div class=valign style="margin-left: 45px;" ng-if=!vm.isFilterUndeletable(filter)>{{vm.getPrefixedFilterName(filter) |translate}}</div></div><div class="input-field col s9" report-filter-field filter=vm.availableFilters[filter] form-name=pimReportDefinitionStep2Form value=vm.selectedFilters filter-name={{filter}}></div></div></div><div class=wizard-step-buttons><button class="btn waves-effect waves-light left" type=button ng-click=vm.prevStep() translate=Prev></button> <button class="btn waves-effect waves-light right" type=button ng-click=vm.nextStep() ng-class="{disabled: !pimReportDefinitionStep2Form.$valid}" ng-disabled=!pimReportDefinitionStep2Form.$valid translate=Next></button></div><ul id=add-filter-group-dropdown class=dropdown-content ng-if=vm.filterGroupsAvailable><li ng-repeat="(filterGroupId, filterGroup) in vm.availableFiltersWithGroups" ng-if=!filterGroup.selected><a ng-click="vm.toggleSelectedFilterGroup(filterGroupId, true)">{{filterGroup.name | translate}}</a></li></ul></form><form id=pimReportDefinitionStep3Form name=pimReportDefinitionStep3Form novalidate ng-if="vm.current_step === 4"><div ng-cloak class=form-section><div class="row col s12 form-section-heading"><span class="valign title">{{\'Design\' | translate}}</span><span class=note>({{\'Select the headers, field groups and fields you want to display in the report\' | translate}})</span> <button id=display-group-dropdown-trigger ohrm-dropdown class="dropdown-button btn right add-display-group-button" href data-constrainwidth=true data-beloworigin=true data-alignment=right ng-disabled=!vm.displayGroupsAvailable() data-activates=add-display-group-dropdown data-hover=false translate="Add Display Field Group"></button></div><div class="row report-display-group-row" ng-repeat="(displayGroupId, displayGroup) in vm.availableDisplayGroups" ng-if=displayGroup.selected><div class="col s3 display-group-label"><a href ng-click="vm.toggleSelectedDisplayGroup(displayGroupId, false)" class="valign left"><i class=material-icons>delete</i></a> <label>{{displayGroup.name | translate}}</label></div><div class="col s9"><div class=row><div class="input-field col s4 display-field-div" ng-show=vm.showDisplayGroupHeader(displayGroupId)><input type=checkbox id=displayGroupShowHeader_{{displayGroupId}} name=displayGroupShowHeader[] class=filled-in ng-model=displayGroup.displayHeader> <label for=displayGroupShowHeader_{{displayGroupId}} translate="Include Header"></label></div><div class="input-field col s8 display-field-div" ng-show=vm.showSelectAll(displayGroupId)><input type=checkbox id=displayGroup_{{displayGroupId}}_all ng-model=vm.displayFieldSelectAll[displayGroupId] class=filled-in ng-change=vm.toggleSelectAllFields(displayGroupId) ng-checked=vm.isAllSelected(vm.getSelectableDisplayFields(displayGroup.fields),displayGroupId)> <label for=displayGroup_{{displayGroupId}}_all translate="Select All"></label></div></div><div class=row><div class="input-field col s4 display-field-div" ng-repeat="displayField in vm.getSelectableDisplayFields(displayGroup.fields)" ng-class="{\'clearfix\' : $index % 3 === 0}"><input type=checkbox id=selectedDisplayFields_{{displayField.id}} name=selectedDisplayFields[] class=filled-in ng-checked="vm.selectedDisplayFields.indexOf(displayField.id) !== -1" ng-disabled="vm.groupingAvailable && (vm.concatanatedSupportedDisplayFields.indexOf(displayField.id) === -1)" ng-click=vm.toggleDisplayField(displayField.id)> <label for=selectedDisplayFields_{{displayField.id}}>{{displayField.label | translate}}<i ng-if="vm.hasSubDisplayFields(displayGroup, displayField)" ng-click="vm.openDisplayFieldConfig(displayGroup, displayField, $event)" class="display-field-additional-options material-icons" ng-class="{\'options-selected\': vm.selectedSubDisplayFields[displayField.id] && vm.selectedSubDisplayFields[displayField.id].length > 0}">ohrm_function</i></label></div></div></div></div></div><div class=wizard-step-buttons><button class="btn waves-effect waves-light left" type=button ng-click=vm.prevStep() translate=Prev></button><div class=right><button class="btn waves-effect waves-light" type=button ohrm-save-form=vm.moveReport() ng-disabled=!pimReportDefinitionStep3Form.$valid ng-if="vm.definition.id && vm.hasEditPermission" translate=Move></button> <button class="btn waves-effect waves-light" type=button ohrm-save-form=vm.validateSaveAs() ng-disabled="!pimReportDefinitionStep3Form.$valid || !vm.enableSaveAsButton" ng-if="vm.definition.id && vm.hasCreatePermission" translate="Save As"></button> <button class="btn waves-effect waves-light" type=button ohrm-click-and-wait=vm.validateSaveAndSearch() ng-disabled="!pimReportDefinitionStep3Form.$valid || !vm.displayGrouploaded">{{\'Save\' | translate}}</button></div></div><ul id=add-display-group-dropdown class=dropdown-content><li ng-repeat="(displayGroupId, displayGroup) in vm.availableDisplayGroups" ng-if=!displayGroup.selected><a ng-click="vm.toggleSelectedDisplayGroup(displayGroupId, true)">{{displayGroup.name | translate}}</a></li></ul></form></div>'),e.put("app/core/reports/report-move-modal.html",'<div class=modal style="min-height: 150px" tabindex=-1 role=dialog><generic-oxd-modal modal-title={{modal.title}} show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model show-save-button=modal.permission save-button-label=Move cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-sm></generic-oxd-modal></div>'),e.put("app/core/reports/report-save-as-modal.html",'<div class=modal style="min-height: 150px" tabindex=-1 role=dialog><generic-oxd-modal modal-title={{modal.title}} show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model show-save-button=modal.permission save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-md></generic-oxd-modal></div>'),e.put("app/core/reports/report-summary.html",'<div class=breadcumb ng-if="vm.summary.data.length > 0"><div ng-repeat="(index, state) in vm.drillDownStates.getStates()"><i class=material-icons ng-if="index > 0">navigate_next</i><div ng-click=vm.loadBreadcrumb(index) class="{{(index < vm.drillDownStates.getStateCount()-1) ? \'clickable-title\': \'\'}}">{{state.breadCrumb}}</div></div></div><div class=summary-views-container><div ng-repeat="view in vm.summary.views" ng-if=!vm.shouldShowNoDataFound><div ng-if="view.type == \'pie_chart\' && vm.summary.data.length > 0"><ohrm-pie-chart class=summary_chart_view data-summary_id={{vm.summary.id}} summary=vm.summary view_index=$index ondrilldown=vm.ondrilldown drill-down-available=vm.drillDownAvailable report-id=vm.reportid oxd-styles=vm.oxdStyles embedded=vm.embedded></ohrm-pie-chart></div><div ng-if="view.type == \'bar_chart\' && vm.summary.data.length > 0"><ohrm-bar-chart class=summary_chart_view data-summary_id={{vm.summary.id}} summary=vm.summary view_index=$index ondrilldown=vm.ondrilldown report-id=vm.reportid oxd-styles=vm.oxdStyles embedded=vm.embedded></ohrm-bar-chart></div><div ng-if="view.type == \'line_chart\' && vm.summary.data.length > 0"><ohrm-line-chart class=summary_chart_view data-summary_id={{vm.summary.id}} summary=vm.summary view_index=$index ondrilldown=vm.ondrilldown report-id=vm.reportid></ohrm-line-chart></div><div ng-if="view.type == \'tabular\' && vm.summary.data.length > 0"><ohrm-tabular-chart class=summary_tabular_view data-summary_id={{vm.summary.id}} summary=vm.summary view_index=$index ondrilldown=vm.ondrilldown drill-down-available=vm.drillDownAvailable report-id=vm.reportid oxd-styles=vm.oxdStyles></ohrm-tabular-chart></div></div><div class=summary_no_data ng-if="vm.summary.data.length > 0 && vm.shouldShowNoDataFound"><img class=summary_no_data_image ng-src=images/reports/empty-chart.png><div class=summary_no_data_message>{{\'No Data to Show\' | translate}}</div></div></div>'),e.put("app/core/reports/report-view-oxd.html",'<div class=pim-container ng-class="{extra_width_report_container: vm.extraWidthReportContainer, full_screen_report_container: vm.fullScreenMode}"><div ng-cloak ng-show=!vm.fullScreenMode class="form-div report-filter-div"><h4 class=reportTitle><i class="material-icons reportTitleIcon" ng-if=vm.reportIcon>{{vm.reportIcon}}</i><span>{{vm.reportName | translate}}</span><div class=reportActionIcons><div class="icon-holder {{(vm.chartConfig.showSummary)?\'highlight\':\'\'}} configure-summary-icon" data-original-title={{vm.getTooltipForChartToggleButton()}} oxd-tooltip data-placement=bottom ng-click=vm.toggleChart() ng-if="vm.loaded && vm.editable && vm.summaryConfigurable"><i class=material-icons>ohrm_report_chart_oxd</i></div><div href class=icon-holder title="{{\'Edit\'| translate}}" oxd-tooltip data-placement=bottom ui-sref="report_definition({id: vm.id, step: 3, module:vm.module, templateName:vm.templateName, dataGroup:vm.dataGroup, prefix: vm.prefix})" ng-if=vm.editable><i class=material-icons>ohrm_report_edit_oxd</i></div><button ng-if=vm.isReportExportable() class="btn btn-feedback export-icon" ng-click=vm.exportPDF() data-icon=ohrm_file_pdf>{{\'PDF\' | translate}}</button> <button ng-if=vm.isReportExportable() class="btn btn-feedback export-icon" ng-click=vm.handleCsvExport($event) data-icon=ohrm_file_csv>{{\'CSV\' | translate}}</button></div></h4><div ng-show=vm.filterCriteriaSubHeading class=filter-criteria-subheading>{{vm.filterCriteriaSubHeading}}</div><hr><div id=report-filters><form id=pimReportFilterForm name=pimReportFilterForm><div ng-if=vm.tabsEnabled class=list-panel-container ng-class="{\'list-panel-view\': true}"><div class=list-inner-left-panel ng-class="{\'compact\': false}"><oxd-list-shortcuts ng-if="vm.tabs.length > 0" shortcuts=vm.tabs active-id=vm.activeTabId></oxd-list-shortcuts></div><div class=list-inner-right-panel ng-class="{\'compact\': false, \'with-left-panel\': true}"><div class="row report-filter-row"><div ng-if=vm.columnForFilterGroup(vm.activeTabId) class=list-right-panel-column-view><div class=list-right-panel-first-column><div class=column-sub-heading>{{vm.columnForFilterGroup(vm.activeTabId).display_columns[1] | translate}}</div><div class="input-field col {{vm.getFilterColumnWidthAndStyles(filterName,vm.activeTabId)}}" ng-repeat="(filterName, filter) in vm.currentTabSelectedFilters" report-filter-field template=oxd-filter-field-directive.html filter=vm.currentTabAvailableFilters[filterName] form-name=pimReportFilterForm ng-if="vm.currentTabAvailableFilters[filterName] !== undefined && vm.currentTabAvailableFilters[filterName].column == 1" ng-show="vm.currentTabAvailableFilters[filterName].visible != false" value=vm.currentTabSelectedFilters filter-name={{filterName}} include-labels=true prepend-prefix=true></div></div><div ng-show=vm.showHideSecondColumn(vm.activeTabId) class=list-right-panel-second-column><div class=column-sub-heading>{{vm.columnForFilterGroup(vm.activeTabId).display_columns[2] | translate}}</div><div class="input-field col {{vm.getFilterColumnWidthAndStyles(filterName,vm.activeTabId)}}" ng-repeat="(filterName, filter) in vm.currentTabSelectedFilters" report-filter-field template=oxd-filter-field-directive.html filter=vm.currentTabAvailableFilters[filterName] form-name=pimReportFilterForm ng-if="vm.currentTabAvailableFilters[filterName] !== undefined && vm.currentTabAvailableFilters[filterName].column == 2" ng-show="vm.currentTabAvailableFilters[filterName].visible != false" value=vm.currentTabSelectedFilters filter-name={{filterName}} include-labels=true prepend-prefix=true></div></div></div><div class="row right-panel-inner-single-column" ng-if="vm.columnForFilterGroup(vm.activeTabId).display_columns === undefined"><div class="col-12 sub-heading">{{vm.getSubHeading(vm.activeTabId) | translate}}</div><div class="input-field col {{vm.getFilterColumnWidthAndStyles(filterName,vm.activeTabId)}}" ng-repeat="(filterName, filter) in vm.currentTabSelectedFilters" report-filter-field template=oxd-filter-field-directive.html filter=vm.currentTabAvailableFilters[filterName] form-name=pimReportFilterForm ng-if="vm.currentTabAvailableFilters[filterName] !== undefined" ng-show="vm.currentTabAvailableFilters[filterName].visible != false" value=vm.currentTabSelectedFilters filter-name={{filterName}} include-labels=true prepend-prefix=true></div></div></div></div></div><div ng-if=!vm.tabsEnabled class="row report-filter-row"><div class="input-field col {{vm.getFilterColumnWidthAndStyles(filterName, null)}}" ng-repeat="(filterName, filter) in vm.selectedFilters" report-filter-field template=oxd-filter-field-directive.html filter=vm.availableFilters[filterName] form-name=pimReportFilterForm ng-if="vm.availableFilters[filterName] !== undefined" ng-show="vm.availableFilters[filterName].visible != false" value=vm.selectedFilters filter-name={{filterName}} include-labels=true prepend-prefix=true></div></div><div ng-if=vm.showRequiredHelperText class="report-filter-row requiredHelperText"><small class=mr-auto><em>*</em> {{"Required field" | translate}}</small></div><div class=report-filter-row><div ng-if=!vm.tabsEnabled class=button-container><button ng-if="vm.cretePermission && vm.showSaveAsButton" class="btn btn-ghost right-margin-button" type=button ng-click=vm.saveAsReport() translate="Save As" ng-class="{disabled: !pimReportFilterForm.$valid}" ng-disabled="!pimReportFilterForm.$valid || !vm.enableSaveAsButton"></button> <button ng-if=vm.showGenerateButton class="btn btn-secondary" type=button ng-click=vm.generateReport() translate=Generate ng-class="{disabled: !pimReportFilterForm.$valid}" ng-disabled=!pimReportFilterForm.$valid></button></div><div ng-if=vm.tabsEnabled class=button-container><button ng-if="vm.cretePermission && vm.showSaveAsButton" class="btn btn-ghost right-margin-button" type=button ng-click=vm.saveAsReport() translate="Save As" ng-class="{disabled: !pimReportFilterForm.$valid}" ng-disabled="!pimReportFilterForm.$valid || !vm.enableSaveAsButton || !vm.allRequiredFieldsAreSet"></button> <button ng-if="vm.showGenerateButton && vm.tabsEnabled" class="btn btn-secondary" type=button ng-click=vm.generateReport() translate=Generate ng-class="{disabled: !pimReportFilterForm.$valid || !vm.allRequiredFieldsAreSet}" data-original-title="{{!vm.allRequiredFieldsAreSet? \'Please correct validations or fill in mandatory fields\':undefined | translate}}" oxd-tooltip data-position=top></button></div></div></form></div></div><div ng-cloak ng-show=!vm.fullScreenMode ng-if="vm.results.length > 0 && !vm.summaryDataRestricted && vm.summaries && vm.summaries.length && (vm.chartConfig.showSummary || !vm.editable) && (vm.showGenerateButton || pimReportFilterForm.$valid)" class="form-div report-results-container" id=container-chart><div ng-repeat="summary in vm.summaries" class="{{vm.editable?\'configurable_summary\':\'\'}}"><div class="dropleft card-top-bar clearfix"><div title="{{\'Edit Chart\'| translate}}" oxd-tooltip data-placement=bottom class=icon-holder ng-if="!summary.isChild && vm.editable" ng-click=vm.editChart()><i class=material-icons>ohrm_report_edit_oxd</i></div><div title="{{\'Download Chart (PNG)\'| translate}}" oxd-tooltip data-placement=bottom class=icon-holder ng-if=!summary.isChild ng-click=vm.exportChart($event)><i class=material-icons>ohrm_download_icon_oxd</i></div><div title="{{\'Delete Chart\'| translate}}" oxd-tooltip data-placement=bottom class=icon-holder ng-if="!summary.isChild && vm.editable" ng-click=vm.confirmChartDeletion()><i class=material-icons>ohrm_delete</i></div></div><div ng-if=!summary.isChild><report-summary summary=summary filters=vm.filters on_summary_load=vm.onSummaryLoad on_summary_unload=vm.onSummaryUnload reportid=vm.id oxd-styles=true ng-class="{side_by_side_chart_view: vm.shouldShowChartsSideBySide(summary)}"></report-summary></div></div></div><div ng-cloak ng-show=!vm.fullScreenMode ng-if="vm.results.length > 0 && vm.summaryDataRestricted && vm.chartConfig.showSummary && (vm.showGenerateButton || pimReportFilterForm.$valid)" class="form-div report-results-container" id=container-chart><div class="dropleft card-top-bar clearfix"><div title="{{\'Edit Chart\'| translate}}" oxd-tooltip data-placement=bottom class=icon-holder ng-if="!summary.isChild && vm.editable" ng-click=vm.editChart()><i class=material-icons>ohrm_report_edit_oxd</i></div><div title="{{\'Delete Chart\'| translate}}" oxd-tooltip data-placement=bottom class=icon-holder ng-if="!summary.isChild && vm.editable" ng-click=vm.confirmChartDeletion()><i class=material-icons>ohrm_delete</i></div></div><div class=summary_no_data ng-if=vm.summaryDataRestricted><img class=summary_no_data_image ng-src=images/reports/empty-chart.png><div class=summary_no_data_message ng-class="{\'lengthy-message\': vm.summaryDataRestrictedMessage.length > 38}">{{vm.summaryDataRestrictedMessage | translate}}</div></div></div><div class="report-results oxd-circle-loader-container" ng-if="vm.showLoader && (vm.showGenerateButton || pimReportFilterForm.$valid)"><div class=oxd-circle-loader>{{\'Loading\' | translate}}</div></div><div class=report-results ng-if="vm.results.length > 0 && vm.hideDetailResults === false && !vm.showLoader && (vm.showGenerateButton || pimReportFilterForm.$valid)"><div ng-cloak class="form-div report-chart col-4" ng-if=vm.showChart><flot dataset=vm.chartData options=vm.chartOptions width=100% height=300 on-plot-hover="vm.onChartHover(event, pos, item)"></flot></div><div ng-cloak class="form-div report-results-container" ng-class="{\'left-chart\': vm.showChart, \'col-8\': vm.showChart, \'col-12\': !vm.showChart}"><div class=report-results-top-bar ng-class="{\'full-screen-data-grid\': vm.fullScreenMode}"><div class=report-result-control-icons><full-screen-toggle-button target-element-selector=#content on-enter=vm.onEnterFullscreen on-exit=vm.onExitFullscreen></full-screen-toggle-button><table-column-horizontal-scroll-buttons target-scroll-element-selector=".report-results .scroll-container" table-header-selector=".report-results .header-container table > thead"></table-column-horizontal-scroll-buttons></div><div class=report-results-pagination-holder><div class=report-results-pagination-total>{{vm.getNoOfRecordsMessage()}}</div><oxd-pagination ng-cloak ng-if=vm.showPaging count={{vm.total}} page={{vm.page}} page-size={{vm.pageSize}} change-page-size=vm.changePageSizeAndFocus change-page=vm.viewPageAndFocus></oxd-pagination></div></div><div class=header-container scrollable-report-header ng-class="{\'full-screen-data-grid\': vm.fullScreenMode}"><table class="classic-table report-results"><colgroup ng-repeat="group in vm.meta.headers"><col ng-repeat="heading in group" ng-if="$index > 1"></colgroup><thead><tr class=group-headings><td class=visible-report-table-header ng-repeat="header in vm.headers.main" colspan={{header.colSpan}} ng-style="header.width && {\'min-width\': header.width + \'px\'}" ng-class="{group: header.isGroup, first: header.firstGroup, last: header.lastGroup}" rowspan={{header.rowSpan}} style="text-align: {{header.align}};"><span tooltip-container=#content oxd-list-cell-truncate=2 class=report-header-truncate>{{header.label | translate}}</span></td></tr><tr><td class=visible-report-table-header ng-repeat="subHeader in vm.headers.sub" colspan={{subHeader.colSpan}} ng-style="subHeader.width && {\'min-width\': subHeader.width + \'px\'}" ng-class="{first: subHeader.first, first_in_group: subHeader.firstFieldInGroup, last: subHeader.last, last_in_group: subHeader.lastFieldInGroup,}" rowspan={{subHeader.rowSpan}} style="text-align: {{subHeader.align}};"><span tooltip-container=#content oxd-list-cell-truncate=2 class=report-header-truncate>{{subHeader.label | translate}}</span></td></tr></thead></table></div><div class=scroll-container set-report-dataset-height-to-match-screen ng-class="{\'full-screen-data-grid\': vm.fullScreenMode}"><horizontal-scroll-floating-button ng-if=!vm.fullScreenMode float-on-screen=true></horizontal-scroll-floating-button><horizontal-scroll-floating-button ng-if=vm.fullScreenMode></horizontal-scroll-floating-button><table id=pim_report_table class="classic-table report-results"><colgroup ng-repeat="group in vm.meta.headers"><col ng-repeat="heading in group" ng-if="$index > 1"></colgroup><thead><tr class=group-headings><td ng-repeat="header in vm.headers.main" colspan={{header.colSpan}} ng-style="header.width && {\'min-width\': header.width + \'px\'}" ng-class="{group: header.isGroup, first: header.first, last: header.last}" rowspan={{header.rowSpan}} style="text-align: {{header.align}};">{{header.label | translate}}</td></tr><tr><td ng-repeat="subHeader in vm.headers.sub" colspan={{subHeader.colSpan}} ng-style="subHeader.width && {\'min-width\': subHeader.width + \'px\'}" ng-class="{first: subHeader.first, last: subHeader.last}" rowspan={{subHeader.rowSpan}} style="text-align: {{subHeader.align}};">{{subHeader.label | translate}}</td></tr></thead><tbody ng-if=!vm.showChart infinite-scroll=vm.appendRowsOnScorll() infinite-scroll-container=vm.getResultScrollContainer() infinite-scroll-distance=vm.infiniteScrollDistance infinite-scroll-immediate-check=true infinite-scroll-listen-for-event=triggerScroll><tr ng-repeat="result in vm.formattedResults"><td ng-repeat="value in result track by $index" style="text-align: {{value.align}};" class={{value.cssClass}}><span ng-if="value.format===\'text\'" oxd-report-cell-qtip ng-bind=::value.value></span> <a ng-if="value.format && value.format !==\'text\'" ui-sref={{value.format}} ng-bind=::value.value></a></td></tr></tbody><tbody ng-if=vm.showChart><tr ng-repeat-start="result in vm.results" ng-if=0></tr><tr ng-repeat="row in vm.getRows(result)" ng-class="{\'hover\': vm.hoverRow === rowIndex, \'odd\': ($parent.$index + 1) % 2, \'last\': $last}"><td ng-repeat-start="(fieldName, header) in vm.meta.headerInfo" ng-if=0></td><td ng-if="!vm.isArray(header) && header.display === \'true\' && row == 0" ng-init="showLink = vm.showLink(header, result)" style="text-align: {{header.align}};"><i ng-if="result.legendColor && $index === 1" class=legend ng-style="{\'background-color\': result.legendColor}"></i> <a ng-if=showLink ng-click="vm.followLink(result, fieldName, header)">{{result[fieldName] | reportValue:header}}</a> <span ng-if=!showLink>{{result[fieldName] | reportValue:header}}</span></td><td ng-if="!vm.isArray(header) && header.display === \'true\' && row > 0"></td><td ng-if="vm.isArray(header) && subHeading.display === \'true\'" ng-repeat="subHeading in header">{{result[subHeading.group][row][$index] | reportValue:subHeading}}</td><td ng-repeat-end ng-if=0></td></tr><tr ng-repeat-end ng-if=0></tr></tbody></table></div></div></div></div><form style="display: none" id=pdfExportForm name=pdfExportForm method=post action={{vm.getPDFExportUrl()}} target=_blank><div ng-repeat="(summaryId, params) in vm.pdfExportData[\'summary\']"><input type=hidden name=pdfExportData[summary][{{summaryId}}][chart] value="{{params[\'chart\']}}"> <input type=hidden name=pdfExportData[summary][{{summaryId}}][hasTabularView] value="{{params[\'hasTabularView\']}}"> <input type=hidden name=pdfExportData[summary][{{summaryId}}][extraFilters] value="{{params[\'extraFilters\']}}"></div><input ng-repeat="(key, value) in vm.pdfExportData[\'meta\']" type=hidden name=pdfExportData[meta][{{key}}] value={{value}}></form><canvas id=chartCanvas style="display: none"></canvas>'),e.put("app/core/reports/report-view.html",'<style>\n    .angucomplete-dropdown{\n        max-width: none !important;\n        width: 100% !important;\n    }\n</style><div class=pim-container><div ng-cloak class="form-div report-results-div"><h4><span>{{vm.reportName | translate}}</span> <a href class=tooltipped data-tooltip="{{vm.showSearchFilters ? \'Collapse\' : \'Expand\'| translate}}" data-position=bottom ng-click=vm.toggleFilters()><i class=material-icons>{{vm.showSearchFilters ? \'arrow_drop_up\' : \'arrow_drop_down\'}}</i></a> <a class=tooltipped data-tooltip={{vm.getTooltipForChartToggleButton()}} data-position=bottom ng-click=vm.toggleChart() ng-if="vm.editable && vm.summaryConfigurable"><i class="material-icons {{(vm.chartConfig.showSummary)?\'highlight\':\'\'}}">insert_chart</i></a> <a href class=tooltipped data-tooltip="{{\'Edit\'| translate}}" data-position=bottom ui-sref="report_definition({id: vm.id, step: 3, module:vm.module, templateName:vm.templateName, dataGroup:vm.dataGroup, prefix: vm.prefix})" ng-if=vm.editable><i class=material-icons>mode_edit</i></a> <a ng-if=vm.isReportExportable() title="{{\'Download Report As CSV\' | translate}}" oxd-tooltip data-placement=bottom aria-label="{{\'Download Report As CSV\' | translate}}" ng-click=vm.handleCsvExport($event)><i class=material-icons aria-hidden=true>ohrm_file_csv</i></a> <a ng-if=vm.isReportExportable() title="{{\'Download Report As PDF\' | translate}}" oxd-tooltip data-placement=bottom aria-label="{{\'Download Report As PDF\' | translate}}" ng-click=vm.exportPDF()><i class=material-icons aria-hidden=true>ohrm_file_pdf</i></a><div ng-show=vm.filterCriteriaSubHeading class=filter-criteria-subheading>{{vm.filterCriteriaSubHeading}}</div></h4><div id=report-filters ng-show=vm.showSearchFilters><form id=pimReportFilterForm name=pimReportFilterForm><div class="row report-filter-row"><div class="input-field col {{vm.getFilterColumnWidthAndStyles(filterName)}}" ng-repeat="(filterName, filter) in vm.selectedFilters" report-filter-field filter=vm.availableFilters[filterName] form-name=pimReportFilterForm ng-if="vm.availableFilters[filterName] !== undefined" value=vm.selectedFilters filter-name={{filterName}} include-labels=true></div></div><div ng-if=vm.showRequiredHelperText class="row report-filter-row"><div class="row requiredHelperText"><div class=helpvalue><em>*</em> {{"Required field" | translate}}</div></div></div><div class="row report-filter-row"><div class=button-container><button class="col s1 btn right" type=button ng-click=vm.generateReport() translate=Generate ng-class="{disabled: !pimReportFilterForm.$valid}" ng-disabled=!pimReportFilterForm.$valid></button> <button ng-if="vm.cretePermission && vm.showSaveAsButton" class="col s1 btn right right-margin-button" type=button ng-click=vm.saveAsReport() translate="Save As" ng-class="{disabled: !pimReportFilterForm.$valid}" ng-disabled="!pimReportFilterForm.$valid || !vm.enableSaveAsButton"></button></div></div></form></div></div><div ng-cloak ng-if="vm.results.length > 0 && !vm.summaryDataRestricted && vm.summaries && vm.summaries.length && (vm.chartConfig.showSummary || !vm.editable)" class="form-div report-results-container" id=container-chart><div ng-repeat="summary in vm.summaries" class="{{vm.editable?\'configurable_summary\':\'\'}}"><a class="chart-options dropdown-button tooltipped" data-constrainwidth=false data-activates=summary_config_options dropdown ng-if="summary.data.length > 0 && !summary.isChild" data-tooltip="{{\'Chart Options\'| translate}}" data-position=bottom><i class=material-icons>more_horiz</i></a><ul id=summary_config_options class=dropdown-content><li ng-if=vm.editable><a ng-click=vm.editChart()>{{\'Edit Chart\' | translate}}</a></li><li ng-if=vm.editable><a ng-click=vm.confirmChartDeletion()>{{\'Delete Chart\' | translate}}</a></li><li><a ng-click=vm.exportChart($event)>{{\'Download Chart (PNG)\' | translate}}</a></li></ul><div ng-if=!summary.isChild><report-summary summary=summary filters=vm.filters on_summary_load=vm.onSummaryLoad on_summary_unload=vm.onSummaryUnload reportid=vm.id></report-summary></div></div></div><div ng-cloak ng-if="vm.results.length > 0 && vm.summaryDataRestricted && vm.chartConfig.showSummary" class="form-div report-results-container" id=container-chart><a class="chart-options dropdown-button tooltipped" data-constrainwidth=false data-activates=summary_config_options dropdown ng-if=vm.editable data-tooltip="{{\'Chart Options\'| translate}}" data-position=bottom><i class=material-icons>more_horiz</i></a><ul id=summary_config_options class=dropdown-content><li><a ng-click=vm.editChart()>{{\'Edit Chart\' | translate}}</a></li><li><a ng-click=vm.confirmChartDeletion()>{{\'Delete Chart\' | translate}}</a></li></ul><div class=summary_no_data ng-if=vm.summaryDataRestricted><img class=summary_no_data_image ng-src=images/reports/empty-chart.png><div class=summary_no_data_message>{{\'No Data to Show\' | translate}}</div></div></div><div class=row ng-if="vm.results.length > 0 && vm.hideDetailResults === false"><div ng-cloak class="form-div report-chart col s4" ng-if=vm.showChart><flot dataset=vm.chartData options=vm.chartOptions width=100% height=300 on-plot-hover="vm.onChartHover(event, pos, item)"></flot></div><div ng-cloak class="form-div report-results-container col" ng-class="{\'left-chart\': vm.showChart, s8: vm.showChart, s12: !vm.showChart}"><div class=scroll-container style="overflow-x: scroll; overflow-y: scroll;height: 70vh;"><table id=pim_report_table class="list-table compact-table report-results"><colgroup ng-repeat="group in vm.meta.headers"><col ng-repeat="heading in group" ng-if="$index > 1"></colgroup><thead><tr class=group-headings><td ng-repeat="header in vm.headers.main" colspan={{header.colSpan}} ng-style="header.width && {\'min-width\': header.width + \'px\'}" ng-class="{group: header.isGroup, first: header.first, last: header.last}" rowspan={{header.rowSpan}} style="text-align: {{header.align}};">{{header.label | translate}}</td></tr><tr><td ng-repeat="subHeader in vm.headers.sub" colspan={{subHeader.colSpan}} ng-style="subHeader.width && {\'min-width\': subHeader.width + \'px\'}" ng-class="{first: subHeader.first, last: subHeader.last}" rowspan={{subHeader.rowSpan}} style="text-align: {{subHeader.align}};">{{subHeader.label | translate}}</td></tr></thead><tbody ng-if=!vm.showChart infinite-scroll=vm.appendRowsOnScorll() infinite-scroll-distance=vm.infiniteScrollDistance infinite-scroll-immediate-check=true infinite-scroll-listen-for-event=triggerScroll><tr ng-repeat="result in vm.formattedResults"><td ng-repeat="value in result track by $index" style="text-align: {{value.align}};"><span ng-if="value.format===\'text\'" ng-bind=::value.value></span> <a ng-if="value.format && value.format !==\'text\'" ui-sref={{value.format}} ng-bind=::value.value></a></td></tr></tbody><tbody ng-if=vm.showChart><tr ng-repeat-start="result in vm.results" ng-if=0></tr><tr ng-repeat="row in vm.getRows(result)" ng-class="{\'hover\': vm.hoverRow === rowIndex, \'odd\': ($parent.$index + 1) % 2, \'last\': $last}"><td ng-repeat-start="(fieldName, header) in vm.meta.headerInfo" ng-if=0></td><td ng-if="!vm.isArray(header) && header.display === \'true\' && row == 0" ng-init="showLink = vm.showLink(header, result)" style="text-align: {{header.align}};"><i ng-if="result.legendColor && $index === 1" class=legend ng-style="{\'background-color\': result.legendColor}"></i> <a ng-if=showLink ng-click="vm.followLink(result, fieldName, header)">{{result[fieldName] | reportValue:header}}</a> <span ng-if=!showLink>{{result[fieldName] | reportValue:header}}</span></td><td ng-if="!vm.isArray(header) && header.display === \'true\' && row > 0"></td><td ng-if="vm.isArray(header) && subHeading.display === \'true\'" ng-repeat="subHeading in header">{{result[subHeading.group][row][$index] | reportValue:subHeading}}</td><td ng-repeat-end ng-if=0></td></tr><tr ng-repeat-end ng-if=0></tr></tbody></table></div><ohrm-pagination ng-if=vm.showPaging count={{vm.total}} page={{vm.page}} page-size={{vm.pageSize}} change-page-size=vm.changePageSize change-page=vm.viewPage></ohrm-pagination></div></div></div><form style="display: none" id=pdfExportForm name=pdfExportForm method=post action={{vm.getPDFExportUrl()}} target=_blank><div ng-repeat="(summaryId, params) in vm.pdfExportData[\'summary\']"><input type=hidden name=pdfExportData[summary][{{summaryId}}][chart] value="{{params[\'chart\']}}"> <input type=hidden name=pdfExportData[summary][{{summaryId}}][hasTabularView] value="{{params[\'hasTabularView\']}}"> <input type=hidden name=pdfExportData[summary][{{summaryId}}][extraFilters] value="{{params[\'extraFilters\']}}"></div><input ng-repeat="(key, value) in vm.pdfExportData[\'meta\']" type=hidden name=pdfExportData[meta][{{key}}] value={{value}}></form><canvas id=chartCanvas style="display: none"></canvas>'),
e.put("app/core/reports/report_definition_top_ribbon.html","<div class=report-definition-sub-header-container><div class=sub-title>{{vm.currentStep.title | translate}}</div><oxd-wizard-numeric-progress-bar items=vm.steps on-item-click-callback=vm.stepChange done-class-callback=vm.itemIsDone todo-class-callback=vm.itemIsTodo current-class-callback=vm.itemIsCurrent visited-class-callback=vm.itemIsVisited tooltip-property=\"'title'\"></oxd-wizard-numeric-progress-bar></div>"),e.put("app/layout/menu-items/sub-menu-container.html",'<div class=sub-menu-container><div class=sub-menu-item ng-repeat="menu in children track by menu[trackBy]"><a ng-if="!!menu.uiSref && maxLevels > 0" ng-focus=showSubmenu($index) enter-key-input ng-mouseover=showSubmenu($index) class="sub-menu-item-link truncate" ui-sref={{menu.uiSref}} ui-sref-active=active ng-attr-target={{menu.target}} data-automation-id={{idPrefix}}{{menu.automationId}} tabindex=0><i ng-if="menu.children && maxLevels > 0 && direction == \'left\'" class="material-icons expand-icon-left">oxd_menu_left</i> {{menu.title| translate}} <i ng-if="menu.children && maxLevels > 0 && direction == \'right\'" class="material-icons expand-icon-right">oxd_menu_right</i></a> <a ng-if="!menu.uiSref && maxLevels > 0" ng-focus=showSubmenu($index) enter-key-input ng-mouseover=showSubmenu($index) ng-attr-href={{menu.href}} class="sub-menu-item-link truncate" ng-attr-target={{menu.target}} data-automation-id={{idPrefix}}{{menu.automationId}} tabindex=0><i ng-if="menu.children && maxLevels > 0 && direction == \'left\'" class="material-icons expand-icon-left">oxd_menu_left</i> {{menu.title| translate}} <i ng-if="menu.children && maxLevels > 0 && direction == \'right\'" class="material-icons expand-icon-right">oxd_menu_right</i></a><a ng-if="menu.children && !!menu.children[0].uiSref && maxLevels <= 0" enter-key-input class="sub-menu-item-link truncate" ui-sref={{menu.children[0].uiSref}} ui-sref-active=active ng-attr-target={{menu.children[0].target}} data-automation-id={{idPrefix}}{{menu.automationId}} tabindex=0><i ng-if="menu.children && maxLevels > 0 && direction == \'left\'" class="material-icons expand-icon-left">oxd_menu_left</i> {{menu.title| translate}} <i ng-if="menu.children && maxLevels > 0 && direction == \'right\'" class="material-icons expand-icon-right">oxd_menu_right</i></a> <a ng-if="menu.children && !menu.children[0].uiSref && maxLevels <= 0" enter-key-input ng-attr-href={{menu.children[0].href}} class="sub-menu-item-link truncate" ng-attr-target={{menu.children[0].target}} data-automation-id={{idPrefix}}{{menu.automationId}} tabindex=0><i ng-if="menu.children && maxLevels > 0 && direction == \'left\'" class="material-icons expand-icon-left">oxd_menu_left</i> {{menu.title| translate}} <i ng-if="menu.children && maxLevels > 0 && direction == \'right\'" class="material-icons expand-icon-right">oxd_menu_right</i></a><a ng-if="!menu.children && !!menu.uiSref && maxLevels <= 0" enter-key-input class="sub-menu-item-link truncate" ui-sref={{menu.uiSref}} ui-sref-active=active ng-attr-target={{menu.target}} data-automation-id={{idPrefix}}{{menu.automationId}} tabindex=0>{{menu.title| translate}}</a> <a ng-if="!menu.children && !menu.uiSref && maxLevels <= 0" enter-key-input ng-attr-href={{menu.href}} class="sub-menu-item-link truncate" ng-attr-target={{menu.target}} data-automation-id={{idPrefix}}{{menu.automationId}} tabindex=0>{{menu.title| translate}}</a><sub-menu-container ng-if="menu.children && maxLevels > 0" direction=direction children=menu.children ng-mouseleave=hideSubmenu($index) ng-class="{opened: subMenuVisible[$index], \'direction-left\': direction == \'left\', \'direction-right\': direction == \'right\'}" is-visible=showSubmenu max-levels="(maxLevels - 1)" level=level+1 track-by=trackBy id-prefix=idPrefix></sub-menu-container></div></div>'),e.put("app/layout/menu-items/top-level-menu-item.html",'<div class=top-level-menu-item-container unique-name=uniqueName ohrm-click-outside=hideSubmenu() ng-attr-id="{{htmlId ? idPrefix + \'top_level_menu_item_\' + htmlId : undefined }}"><a ng-if="!!sref && !menuTooltip" class="top-level-menu-item {{menuItemClass}}" ui-sref={{sref}} ui-sref-active=active ng-click=toggleShowSubmenu() enter-key-input data-automation-id={{idPrefix}}{{automationId}} tabindex=0>{{localizedMenuTitle}} <span ng-if="children && !expandIcon" class="caret material-icons">oxd_menu_down</span> <i ng-if="children && expandIcon" class=material-icons>{{expandIcon}}</i></a> <a ng-if="!!sref && menuTooltip" class="top-level-menu-item tooltipped {{menuItemClass}}" ui-sref={{sref}} ui-sref-active=active ng-click=toggleShowSubmenu() enter-key-input data-automation-id={{idPrefix}}{{automationId}} data-tooltip="{{menuTooltip | translate}}" data-position=bottom tabindex=0>{{localizedMenuTitle}} <span ng-if="children && !expandIcon" class="caret material-icons">oxd_menu_down</span> <i ng-if="children && expandIcon" class=material-icons>{{expandIcon}}</i></a> <a ng-if="!sref && !menuTooltip" ng-attr-href={{href}} class="top-level-menu-item {{menuItemClass}}" ng-attr-target={{target}} ng-click=toggleShowSubmenu() enter-key-input data-automation-id={{idPrefix}}{{automationId}} tabindex=0>{{localizedMenuTitle}} <span ng-if="children && !expandIcon" class="caret material-icons">oxd_menu_down</span> <i ng-if="children && expandIcon" class="expand-icon material-icons">{{expandIcon}}</i></a> <a ng-if="!sref && menuTooltip" ng-attr-href={{href}} class="top-level-menu-item tooltipped {{menuItemClass}}" ng-attr-target={{target}} ng-click=toggleShowSubmenu() enter-key-input data-automation-id={{idPrefix}}{{automationId}} data-tooltip="{{menuTooltip | translate}}" data-position=bottom tabindex=0>{{localizedMenuTitle}} <span ng-if="children && !expandIcon" class="caret material-icons">oxd_menu_down</span> <i ng-if="children && expandIcon" class="expand-icon material-icons">{{expandIcon}}</i></a><sub-menu-container ng-if=children direction=nestedChildrenDirection children=children ng-class="{opened: showSubmenu}" ng-click=hideSubmenu() is-visible=showSubmenu max-levels="(maxLevels - 1)" class=level-1-sub-menu track-by=trackBy id-prefix=idPrefix></sub-menu-container></div>'),e.put("app/leave/calendar/calendar_legend.html",'<div id=calendarLegendModal class="modal modal-fixed-footer" style="width: 32%;"><h4>{{\'Legend\'| translate}}</h4><div ng-show="modal.mode==\'show\'" class=modal-content><div class=row><div class="col s12 calendar-legend-title">{{\'Status\' | translate}}</div></div><div class=calendar-legend-status><div class=row ng-repeat="leaveType in modal.leaveTypeTextList | orderBy: \'name\'"><div class="col s2">{{leaveType.shortName}}</div><div class="col s10">{{leaveType.name | translate}}</div></div></div><div class=row></div><div class=row><div class="col s12 calendar-legend-title">{{\'Leave Type\' | translate}}</div></div><div class=calendar-legend-colors><div class=row ng-repeat="value in modal.legendColors | orderBy: \'name\'"><div class="col s2"><div style="width: 15px; height: 15px;-webkit-border-radius: 3px;-moz-border-radius: 3px;border-radius: 3px;}" ng-style="{\'background\': value.color.indexOf(\'#\') > -1 ? value.color :\'#\'+value.color }"></div></div><div class="col s10">{{value.name}}</div></div></div><div class=row></div></div><div ng-show="modal.mode==\'edit\'" class=modal-content><div class=row><div class="col s12 calendar-legend-title">{{\'Click on color to pick a new color\' | translate}}</div></div><div class=calendar-legend-colors><div class=row ng-repeat="value in modal.legendColors | orderBy: \'name\'"><div class="col s5"><div colorpicker class=color ng-model=value.color ng-style="{\'background-color\': value.color.indexOf(\'#\') > -1 ? value.color :\'#\'+value.color }" style="min-width: 65px;min-height: 20px;-webkit-border-radius: 5px;-moz-border-radius: 5px;border-radius: 5px;"></div></div><div class="col s7">{{value.name}}</div></div></div></div><div ng-show="modal.mode==\'edit\'" class=modal-footer><button class="modal-action modal-close btn waves-effect waves-green" ng-click=modal.save()>{{\'Save\' | translate}}</button> <button class="modal-action modal-close btn waves-effect waves-green secondary-btn">{{\'Cancel\' | translate}}</button></div><div class=modal-footer><div class=row><button ng-if="modal.showLegendEditLink && modal.mode==\'show\'" class="btn waves-effect waves-green" ng-click=modal.editLegend()>{{\'Change Legend Colors\' | translate}}</button> <button ng-show="modal.mode!=\'edit\'" class="modal-action modal-close btn waves-effect waves-green secondary-btn">{{\'Cancel\' | translate}}</button></div></div></div>'),e.put("app/leave/calendar/day-description.html",'<div class="row calendar-day-description-title-container" ng-show=object.dayDescriptionLoading><span class=calendar-day-description-title><div class="preloader-wrapper small active"><div class="spinner-layer spinner-orange-only"><div class="circle-clipper left"><div class=circle></div></div><div class=gap-patch><div class=circle></div></div><div class="circle-clipper right"><div class=circle></div></div></div></div></span></div><div class="row calendar-day-description-title-container" ng-if="object.leaveCalendarDayDescription.holidayFullDays && object.leaveCalendarDayDescription.holidayFullDays.length > 0"><span class=calendar-day-description-title>{{\'Specific Holiday Full Day\' | translate}}</span></div><div class="row calendar-day-description-text-container" ng-repeat="holidayFullDays in object.leaveCalendarDayDescription.holidayFullDays"><div class="col offset-s1 s11"><span class=calendar-day-description-text>{{holidayFullDays.description}}{{": "}}{{holidayFullDays.location | translate}}</span></div></div><div class="row calendar-day-description-title-container" ng-if="object.leaveCalendarDayDescription.holidayHalfDays && object.leaveCalendarDayDescription.holidayHalfDays.length > 0"><span class=calendar-day-description-title>{{\'Specific Holiday Half Day\' | translate}}</span></div><div class="row calendar-day-description-text-container" ng-repeat="holidayHalfDays in object.leaveCalendarDayDescription.holidayHalfDays"><div class="col offset-s1 s11"><span class=calendar-day-description-text>{{holidayHalfDays.description}}{{": "}}{{holidayHalfDays.location | translate}}</span></div></div><div class="row calendar-day-description-title-container" ng-if="object.leaveCalendarDayDescription.weekendFullDays && object.leaveCalendarDayDescription.weekendFullDays.length > 0"><span class=calendar-day-description-title>{{\'Weekend Full Day\' | translate}}</span></div><div class="row calendar-day-description-text-container" ng-repeat="weekendFullDay in object.leaveCalendarDayDescription.weekendFullDays"><div class="col offset-s1 s11"><span class=calendar-day-description-text>{{weekendFullDay | translate}}</span></div></div><div class="row calendar-day-description-title-container" ng-if="object.leaveCalendarDayDescription.weekendHalfDays && object.leaveCalendarDayDescription.weekendHalfDays.length > 0"><span class=calendar-day-description-title>{{\'Weekend Half Day\' | translate}}</span></div><div class="row calendar-day-description-text-container" ng-repeat="weekendHalfDay in object.leaveCalendarDayDescription.weekendHalfDays"><div class="col offset-s1 s11"><span class=calendar-day-description-text>{{weekendHalfDay | translate}}</span></div></div><div class="row calendar-day-description-title-container" ng-if="object.leaveCalendarDayDescription.workingWeekendFullDays && object.leaveCalendarDayDescription.workingWeekendFullDays.length > 0"><span class=calendar-day-description-title>{{\'Specific Working Weekend Full Day\' | translate}}</span></div><div class="row calendar-day-description-text-container" ng-repeat="workingWeekendFullDays in object.leaveCalendarDayDescription.workingWeekendFullDays"><div class="col offset-s1 s11"><span class=calendar-day-description-text>{{workingWeekendFullDays.location}}</span></div></div><div class="row calendar-day-description-title-container" ng-if="object.leaveCalendarDayDescription.workingWeekendHalfDays && object.leaveCalendarDayDescription.workingWeekendHalfDays.length > 0"><span class=calendar-day-description-title>{{\'Specific Working Weekend Half Day\' | translate}}</span></div><div class="row calendar-day-description-text-container" ng-repeat="workingWeekendHalfDays in object.leaveCalendarDayDescription.workingWeekendHalfDays"><div class="col offset-s1 s11"><span class=calendar-day-description-text>{{workingWeekendHalfDays.location}}</span></div></div><div class="row calendar-day-description-title-container" ng-if=object.leaveCalendarDayDescription.isWorkingDay><span class=calendar-day-description-title>{{\'Working Day\' | translate}}</span></div>'),e.put("app/leave/calendar/monthly_calendar.html",'<div class="calendar-container pim-container" ng-if=vm.calendarConfigured><div><div class="row leave-calendar-tabs" ng-if=true><div class="col s3"><ul><li><a ng-click=vm.toggleFilter() class="calendar-filter-btn tooltipped {{vm.showFilter?\'large-icon-font\':\'small-icon-font\'}}" data-position=bottom data-tooltip="{{(vm.showFilter?\'Collapse\':\'Filter\') | translate}}"><i class=material-icons>{{vm.showFilter?\'arrow_drop_up\':\'oxd_filter\'}}</i></a></li></ul></div><div class="col s5 center"><ul style=display:inline-flex><li class=prev><i ng-click=vm.prev() class=material-icons>keyboard_arrow_left</i></li><li><a class=month-holder>{{vm.header}}</a></li><li class=next><i ng-click=vm.next() class=material-icons>keyboard_arrow_right</i></li></ul></div><div class="col s4"><ul class=tabs tabs ng-if=vm.defaultViewIsDefined><li class="tab col s1 right"><a id=yearTab href=#yearTab ng-click=vm.showYearView() ng-class="{\'active\': vm.defaultView == \'year\'}">{{\'Year\' | translate}}</a></li><li class="tab col s1 right"><a id=monthTab href=#monthTab ng-click=vm.showMonthView() ng-class="{\'active\': vm.defaultView == \'month\'}">{{\'Month\' | translate}}</a></li><li class="tab col s1 right"><a id=weekTab href=#weekTab ng-click=vm.showWeekView() ng-class="{\'active\': vm.defaultView == \'basicWeek\'}">{{\'Week\' | translate}}</a></li></ul></div></div><div class=divider></div><form ng-show=vm.showFilter name=calenderFilterForm><div sf-schema=vm.formSchema sf-form=vm.form sf-model=vm.formModel extracontroller=vm></div><div class=row ng-if=vm.formLoaded style=margin-bottom:0;><div class="s12 col right-align"><button class="btn waves-effect waves-green secondary-btn" type=button ng-click=vm.reset()>{{\'Reset\' | translate}}</button> <button class="btn waves-effect waves-green" type=button ng-click=vm.filter(calenderFilterForm)>{{\'View\' | translate}}</button></div></div></form><div class=row style="margin-bottom: -20px;"><div class="s12 col left-align" id=legend-label><a ng-click=vm.showLegend() class=calendar-legend-btn ng-show="vm.showCalendar && !vm.initialAccessWithNoPersistedFilters">{{\'Legend\' | translate}}</a></div></div><div ui-calendar=vm.uiConfig.calendar class="span8 calendar" ng-model=vm.eventSources calendar=leaveCalendar ng-show=vm.showCalendar ng-class="{ \'hide-calendar\':(vm.initialAccessWithNoPersistedFilters||vm.hideYearViewCalendar)}"></div></div><div id=event_popover class=modal style="width: 32%;"><div class=modal-header><h4></h4></div><div class=modal-content><div id=popover_event_list class=fc-event-container></div></div></div></div>'),e.put("app/leave/calendarConfiguration/calendar-configuration.html",'<div id=leaveCalendarConfiguration class=pim-container><div ng-if=vm.permissions.read class=form-div><h4>{{\'Leave Calendar Configuration\' | translate}}</h4><form name=leaveCalendarConfigurationForm ng-submit=vm.onSubmit(leaveCalendarConfigurationForm)><div class=card-content><div sf-schema=vm.schema sf-form=vm.form sf-model=vm.model></div></div><div class="row form-buttons button-row" ng-if=vm.permissions.update><div class="col l12 right-align"><button class="btn waves-effect waves-green" type=button ng-click=vm.onSubmit(leaveCalendarConfigurationForm)>{{\'Save\'| translate}}</button></div></div></form></div></div>'),e.put("app/leave/defineLeavePeriod/leave-define-leave-period.html",'<div class=pim-container><div id=defineLeavePeriodDiv class=form-div><h4 translate="Leave Period"></h4><form name=defineLeavePeriodForm sf-schema=defineLeavePeriodCtrl.schema sf-form=defineLeavePeriodCtrl.form sf-model=defineLeavePeriodCtrl.formModel ng-submit=defineLeavePeriodCtrl.onSubmit(defineLeavePeriodForm)></form></div></div>'),e.put("app/leave/defineLeaveTypeRule/leave_define_leave_type_rule_custom_top_ribbon.html",'<div class="leave-define-leave-type-rule-custom-top-ribbon custom-ribbon-with-menu-and-more-menu"><div class=menu-items ng-class="{\'consume-leftover-space\': vm.showMoreMenu }"><top-level-menu-item ng-repeat="menu in vm.tabs track by menu.id" menu-title=menu.title sref=menu.uiSref href=menu.href automation-id={{menu.automationId}} max-levels=1 visibility-state=vm.visibilityMap[menu.id] current-item-state=vm.currentItemMap[menu.id] track-by="\'id\'"></top-level-menu-item></div><div class=more-menu ng-show=vm.showMoreMenu><top-level-menu-item ng-repeat="menu in vm.tabs track by menu.id" ng-if="vm.currentItemMap[menu.id] && !vm.visibilityMap[menu.id]" menu-title=menu.title sref=menu.uiSref automation-id={{menu.automationId}} max-levels=1 track-by="\'id\'"></top-level-menu-item><top-level-menu-item menu-title="\'More\'" children=vm.getHiddenMenuItems(vm.tabs) expand-icon=more_vert automation-id=menu_top_more nested-children-direction=left max-levels=2 track-by="\'id\'"></top-level-menu-item></div></div>'),e.put("app/leave/defineWorkWeek/leave-define-work-week.html",'<div class=pim-container><div id=defineWorkWeekDiv class=form-div><h4 translate="Work Week"></h4><form name=defineWorkWeekForm sf-schema=defineWorkWeekCtrl.schema sf-form=defineWorkWeekCtrl.form sf-model=defineWorkWeekCtrl.formModel ng-submit=defineWorkWeekCtrl.onSubmit(defineWorkWeekForm)></form></div></div>'),e.put("app/leave/notifications/leave-edit-notification-modal.html",'<div id=editNotificationModal class="modal modal-fixed-footer" style="width: 60%; height: 80%; min-height: 80%"><h4>{{modal.modalProperties.title | translate}}</h4><form name=editNotificationForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.onSubmit(editNotificationForm); form-name=editNotificationForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/leave/notifications/leave-notifications.html",'<div class=pim-container><div id=leaveNotificationsDiv><crud-panel panelinfo=notificationsCtrl.panelInfo.notificationsInfo objs=notificationsCtrl.notifications listdata=notificationsCtrl.listData.notifications extracontroller=notificationsCtrl></crud-panel><div ng-if=notificationsCtrl.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Notification\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=notificationsCtrl.addNotification()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/leave/notifications/leave_type_exposure_confirmation_modal.html","<div id=delete_confirmation_modal class=\"modal confirm-dialog\"><div class=modal-content><h4></h4><p>{{'You are about to expose leave details including leave type to the selected employee group.' | translate}}</p><br><p>{{'Are you sure you want to continue?' | translate}}</p></div><div class=modal-footer><a href ng-click=modal.cancel() class=\"modal-action modal-close waves-effect btn\">{{'No, Cancel' | translate}}</a> <a href ng-click=modal.confirm() class=\"modal-action modal-close waves-effect btn primary-btn\">{{'Yes, Confirm' | translate}}</a></div></div>"),e.put("app/directives/charts/ohrm-barchart.html","<div ng-cloak class=\"form-div chart-container\"><div class=\"ohrm-bar-chart {{(vm.summary.drillDown)?'drill-down-enabled':'drill-down-disabled'}} {{vm.scrollBarNeeded?'scrollable-bar-chart':''}}\" id={{vm.barChartId}}></div><div ng-if=vm.scrollBarNeeded class=scrollable-bar-chart-x-axis-name>{{vm.legendX}}</div></div>"),e.put("app/directives/charts/ohrm-linechart.html","<div ng-cloak class=\"form-div chart-container\"><div class=\"ohrm-line-chart {{(vm.summary.drillDown)?'drill-down-enabled':'drill-down-disabled'}}\" id={{vm.lineChartId}}></div></div>"),e.put("app/directives/charts/ohrm-piechart.html","<div ng-cloak class=\"form-div chart-container\"><div class=\"ohrm-pie-chart {{(vm.summary.drillDown && vm.isDrillDownAvailable)?'drill-down-enabled':'drill-down-disabled'}}\" id={{vm.pieChartId}}></div></div>"),e.put("app/directives/charts/ohrm-radar-chart.html",'<div ng-cloak class=chart-container><div class=ohrm-radar-chart id=radarChart></div><div class=radar-chart-legend><span class=radar-chart-legend-item ng-repeat="legend in vm.options.legends"><span class=material-icons>fiber_manual_record</span> <span>{{legend|translate}}</span></span></div></div>'),e.put("app/directives/charts/ohrm-tabularchart.html","<list ng-if=\"vm.oxdStyles && vm.show\" id=tabularChart{{vm.reportId}} class=\"ohrm_tabular_chart {{vm.totalRowExists?'include_total':''}}\" objs=vm.summaryData listdata=vm.listData.summary extracontroller=vm template=oxd-list.html></list><list ng-if=\"!vm.oxdStyles && vm.show\" id=tabularChart{{vm.reportId}} class=\"ohrm_tabular_chart {{vm.totalRowExists?'include_total':''}} col s12\" objs=vm.summaryData listdata=vm.listData.summary extracontroller=vm></list>"),e.put("app/directives/charts/oxd-bar-chart.html","<div ng-cloak class=oxd-bar-chart-container></div>"),e.put("app/directives/formWidgets/autocomplete-hierarchical.html",'<div spellcheck=false style=height:auto; class=hierarchical-multyselect-autocomplete-holder><div class><div class=multy-select-container keyboard-navigation><div class=input-group><input autocomplete=off style="width: 100%;" placeholder="{{ (placeholder? placeholder : \'Type for hints...\') | translate}}" class="multiselect-autocomplete topnav-autocomplete" ng-click=filterItems(input_name) ng-change=filterItems(input_name) ng-model=input_name data-activates=dropdown-multyselect type=text><div class=multiselect-search-icon ng-if=showSearchIcon><i class=material-icons>search</i></div></div><div class=hierarchical-multiselect-element-container><div ng-repeat="parentItem in selectedParentItems" class="row element-group" data-item-id={{parentItem.id}}><div class="row col l12" style="margin-bottom: 0"><p class="grey-text text-darken-2 choice-text parent-choice">{{parentItem.displayValue ? parentItem.displayValue.toString().trim(): parentItem.name.toString().trim()}}</p></div><div class="row col l12" style="margin-bottom: 0"><div ng-if="parentItem.id == item.parentId" ng-repeat="item in selectedItems" class="col l3 grey lighten-4 valign-wrapper choice-item" data-item-id={{item.id}} style="border-radius: 10px; display: inline-flex;text-align: center; width: auto; float:left; margin: 3px;"><p class="grey-text text-darken-2 choice-text">{{item.displayValue ? item.displayValue.toString().trim(): item.name.toString().trim()}}</p><div class=black-text style="margin-left: 10px; height:14px"><i ng-click=removeItem(item.id) class="material-icons tiny remove-employee" style=cursor:pointer>close</i></div></div></div></div></div></div></div><ul id=dropdown-multyselect class=dropdown-content><li ng-if="item.parentId != null || item == noResultsFoundObject" ng-repeat="item in filteredList" id={{item.id}} style="min-height: unset"><a ng-class="{\'noResultsFound\': item == noResultsFoundObject}" ng-click="selectItem($event, item)" ng-bind-html=getStyledName(item) style="padding-bottom: 0px; padding-top: 0px;"></a></li></ul></div><style>\n    input.multiselect-autocomplete:focus {\n        box-shadow: none !important;\n    }\n\n    div.multy-select-container {\n        font-size: 14px;\n        border: none;\n        margin-top: 0px;\n    }\n\n    div.multy-select-container:focus {\n        font-size: 14px;\n        border: none;\n    }\n</style>'),e.put("app/directives/formWidgets/bar-rating.html",'<select id=barRating{{id}} class=competency-rating-widget><option ng-repeat="ratingValue in ratingScale" value={{ratingValue}}>{{ratingValue}}</option></select>'),e.put("app/directives/formWidgets/input-number-spinner.html",'<span class=number-spinner-widget-container ng-if=!readonly><span ng-mousedown=vm.decrease() ng-mouseup=vm.clearAllTimeouts() ng-mouseleave=vm.clearAllTimeouts() id=decreaseValue class="material-icons input-spinner-buttons">remove</span> <span class=input-widget-container><input type=text disabled id=numberSpinner{{id}}_ class=input-widget style="height: 20px;margin: 0;text-align: center;" ng-model=model></span> <span ng-mousedown=vm.increase() ng-mouseup=vm.clearAllTimeouts() ng-mouseleave=vm.clearAllTimeouts() id=increaseValue class="material-icons input-spinner-buttons">add</span></span> <span class=number-spinner-widget-container ng-class="{\'readonly\' : readonly}" ng-if=readonly><span class=input-widget-container><input type=text disabled id=numberSpinner{{id}}_ class=input-widget style="height: 20px;margin: 0;text-align: center;" ng-model=model></span></span>'),e.put("app/directives/formWidgets/multi-select-checkboxes-modal.html",'<div class=modal id=multiSelectCheckBoxesModal style="width:fit-content;border-radius: 10px; position: absolute;"><div class=modal-content style="padding: 10px"><div style="padding-left: 11px; padding-right: 0px; border-bottom: 1px #efeff0 solid" ng-if=modal.config.includeAllOption><input materializecss-input class=filled-in id=multi-select-checkbox-all-option type=checkbox ng-change=modal.allOptionClicked() ng-model=modal.allSelected ng-disabled=modal.config.readonly> <label style=left:0px for=multi-select-checkbox-all-option>{{\'All\' | translate}}</label></div><div style="padding-left: 0px; padding-right: 0px" sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div><div class=done-btn-container ng-if=!modal.config.readonly style="border-top: 1px #efeff0 solid; padding-top: 10px"><div class=done-btn><a href ng-click=modal.cancel() close-modal-on-click=true class="modal-action modal-close waves-effect btn rounded-button">{{\'Done\'|translate}}</a></div></div></div></div>'),e.put("app/directives/formWidgets/multi-select-checkboxes.html",'<div class=multi-select-checkboxes style="display: inline-flex; align-items: center;cursor: pointer;" ng-click=vm.openSelectionModal()><span class=visible-selected-option style="padding-right: 5px;">{{vm.visibleSelectedOption}}</span> <span class=hidden-selected-option-indicator ng-if=vm.isHiddenSelectedOptionIndicatorNeeded>{{vm.hiddenSelectedOptionIndicator}}</span> <span id=modal_indicator_{{id}} class=material-icons>arrow_drop_down</span></div>'),e.put("app/directives/formWidgets/multi-select-tree-view-modal.html",'<div class=modal id=multiSelectTreeViewModal style="width:400px;border-radius: 10px; position: absolute;"><div class=modal-content style="padding: 10px"><multi-select-tree-view-widget id=multiSelectTreeViewWidget config=modal.config model=modal.model options=modal.options></multi-select-tree-view-widget><div class=done-btn-container ng-if=!modal.config.readonly style="border-top: 1px #efeff0 solid; padding-top: 10px; text-align: center"><div class=done-btn><a href ng-click=modal.cancel() close-modal-on-click=true class="modal-action modal-close waves-effect btn rounded-button">{{\'Done\'|translate}}</a></div></div></div></div>'),e.put("app/directives/formWidgets/multi-select-tree-view-widget.html",'<div id={{id}} ng-show=vm.dataLoaded><div style="padding-left: 5px; padding-right: 0px; border-bottom: 1px #efeff0 solid" ng-if="config.allOptionCheckBox && config.allOptionCheckBox.includeAllOption"><input materializecss-input class=filled-in id=multiSelectTreeViewAllOption type=checkbox ng-disabled="config.allOptionCheckBox.readonly || config.readonly" ng-change=vm.allOptionClicked() ng-model=vm.allSelected> <label style=left:0px for=multiSelectTreeViewAllOption>{{\'All\' | translate}}</label> <span ng-repeat="additionalCheckBox in config.additionalCheckBoxes"><input materializecss-input class=filled-in id=additionalCheckBox.key type=checkbox ng-disabled="additionalCheckBox.readonly || config.readonly" ng-model=additionalCheckBox.model ng-change=additionalCheckBox.onChange(additionalCheckBox.model)> <label style=left:65px for=additionalCheckBox.key>{{additionalCheckBox.label | translate}}</label></span></div><div class=tree-view-table-container><table class=tree-view-table><tbody><tr ng-repeat="option in options" data-tt-id={{option.id}} data-tt-parent-id={{option.parentId}} data-tt-branch="{{option.isBranch && option.children.length > 0}}"><td><input materializecss-input class=filled-in id=multiSelectTreeViewOption{{option.id}} type=checkbox ng-disabled="option.readonly || config.readonly" ng-change=vm.checkBoxClicked(option.id) ng-model=vm.selectedOptions[option.id]> <label style=left:0px for=multiSelectTreeViewOption{{option.id}}></label></td><td><div style="cursor: pointer;" ng-click=vm.labelClicked(option)>{{option.name}}</div></td></tr></tbody></table></div></div>'),e.put("app/directives/formWidgets/multi-select-tree-view.html",'<div class=multi-select-tree-view ng-click=vm.openSelectionModal() style="cursor: pointer"><span class=visible-selected-option style="padding-right: 5px;">{{vm.visibleSelectedOption}}</span> <span class=hidden-selected-option-indicator ng-if=vm.isHiddenSelectedOptionIndicatorNeeded>{{vm.hiddenSelectedOptionIndicator}}</span> <span ng-if=!ngDisabled id={{id}}ModalIndicator class=material-icons>arrow_drop_down</span></div>'),e.put("app/directives/formWidgets/oxd-multi-select-tree-view-widget.html",'<div class=angucomplete-dropdown style="max-height: calc(225px + 8rem);"><div ng-if="config.allOptionCheckBox && config.allOptionCheckBox.includeAllOption" class=all-option-container><div class="custom-control custom-checkbox"><input materializecss-input type=checkbox id=multiSelectTreeViewAllOption{{id}} class=custom-control-input ng-disabled="config.allOptionCheckBox.readonly || config.readonly" ng-change=vm.allOptionClicked() ng-model=vm.allSelected> <label class=custom-control-label style="left:0px; float: left" for=multiSelectTreeViewAllOption{{id}}>{{\'All\' | translate}}</label></div></div><div class=tree-view-table-container style="max-height: calc(225px + 1rem);;"><table class=tree-view-table><tbody><tr ng-repeat="option in options" data-tt-id={{option.id}} data-tt-parent-id={{option.parentId}} data-tt-branch="{{option.isBranch && option.children.length > 0}}" ng-class="{\'is-child-selected\': vm.isChildSelected(option.id), \'is-self-selected\': vm.isSelfSelected(option.id)}"><td><div class="custom-control custom-checkbox"><input materializecss-input class=custom-control-input id="multiSelectTreeViewOption{{id+\'_\'+option.id}}" type=checkbox ng-disabled="option.readonly || config.readonly" ng-change=vm.checkBoxClicked(option.id) ng-model=vm.selectedOptions[option.id]> <label class=custom-control-label style="left:0px; position: relative;" for=multiSelectTreeViewOption{{id}}_{{option.id}}></label></div></td><td class=test-class><div style="cursor: pointer;" ng-click=vm.labelClicked(option)>{{option.name}}</div></td></tr></tbody></table></div><div class=done-btn-container><div class=done-btn><button type=button class="btn btn-secondary oxd-multi-select-tree-view-widget-done-button" style="padding: 4px;">{{\'Done\' | translate}}</button></div></div></div>'),e.put("app/directives/formWidgets/oxd-multi-select-tree-view.html",'<div spellcheck=false style=height:auto; class=tree-select-holder><div class=input-group ng-class="{\'single-level-widget\':config.singleLevelWidget}" ng-form name=treeSelect><input type=text name=dateTextInput class="form-control oxd-multi-select-tree-view" placeholder={{vm.label}} readonly ng-class="{\'multi-selection-padding\': vm.labelCount < 2}" style="background-color: transparent"><oxd-multi-select-tree-view-widget id=id config=config model=model options=options on-change=onChange label=label style="display: none; margin-top: 45px;" class="oxd-multi-select-tree-view-widget {{id}}"></oxd-multi-select-tree-view-widget><div ng-if="vm.labelCount > 0" class=count-label-append><div>{{\'+\'+vm.labelCount}}</div></div><div class=input-group-append-container><div class=input-group-append><button class="btn date-picker-button" type=button><i class="material-icons date-picker-open-icon">arrow_drop_down</i></button></div></div></div></div>'),
e.put("app/maintenance/configuration/configuration.html","<div id=maintenanceConfiguration class=pim-container><div ng-if=vm.permissions.read class=form-div><h4>{{'Configuration' | translate}}</h4><form name=maintenanceConfigurationForm sf-schema=vm.schema sf-form=vm.form sf-model=vm.model ng-submit=vm.onSubmit(maintenanceConfigurationForm)></form></div></div>"),e.put("app/maintenance/purge_candidate_records/purge_candidate_records.html","<div id=maintenanceCandidateRecords class=pim-container><div ng-if=\"vm.permissions.read && vm.verified\" class=form-div><h4>{{'Candidate Records' | translate}}</h4><form name=maintenanceCandidateRecordsForm sf-schema=vm.schema sf-form=vm.form sf-model=vm.model></form></div><div class=form-div ng-if=!vm.verified><h4>{{'Confirm Action' | translate}}</h4><form name=verifyPasswordForm sf-schema=vm.verifyPasswordSchema sf-form=vm.verifyPasswordForm sf-model=vm.verifyPasswordModel ng-submit=vm.submitPassword(verifyPasswordForm)></form></div><div ng-if=\"vm.permissions.read && vm.verified && (vm.model.selectedVacancy != '') && vm.showList\" class=form-div><div><div ng-if=vm.permissions.delete class=\"col l6 right-align\"><button class=\"btn waves-effect waves-red waves-ripple\" type=button ng-click=vm.purgeCandidates()>{{'Purge All'| translate}}</button></div></div><crud-panel objs=vm.candidateList listdata=vm.listData.candidates initialsortfield=\"'name'\" extracontroller=vm></crud-panel></div></div>"),e.put("app/maintenance/purge_candidate_records/purge_confirmation.html",'<div id=delete_confirmation_modal class="modal confirm-dialog"><div class=modal-content><h4></h4><p>{{modal.message | translate}}</p></div><div class=modal-footer><a href ng-click=modal.cancel() class="modal-action modal-close waves-effect btn">{{\'No, Cancel\' | translate}}</a> <a href ng-click=modal.confirm() class="modal-action modal-close waves-effect btn primary-btn">{{\'Yes, Purge\' | translate}}</a></div></div>'),e.put("app/maintenance/purge_employee_records/purge_confirmation.html","<div id=delete_confirmation_modal class=\"modal confirm-dialog\"><div class=modal-content><h4></h4><p>{{'You are about to purge the employee permanently. Are you sure you want to continue ? This operation cannot be undone.' | translate}}</p></div><div class=modal-footer><a href ng-click=modal.cancel() class=\"modal-action modal-close waves-effect btn\">{{'No, Cancel' | translate}}</a> <a href ng-click=modal.confirm() class=\"modal-action modal-close waves-effect btn primary-btn\">{{'Yes, Purge' | translate}}</a></div></div>"),e.put("app/maintenance/purge_employee_records/purge_employee_records.html",'<div id=maintenanceEmployeeRecords class=pim-container><div ng-if="vm.permissions.read && vm.verified" class=form-div><h4>{{\'Purge Employee Records\' | translate}}</h4><form name=maintenanceEmployeeRecordsForm sf-schema=vm.schema sf-form=vm.form sf-model=vm.model ng-submit=vm.onSubmit(maintenanceEmployeeRecordsForm)></form></div><div ng-if="vm.currentEmployee && vm.verified" class="form-div currentEmpForm"><h4>{{\'Selected Employee\' | translate}}</h4><div class=row><div class="col s12 m3 l3 empImage"><img class=circle style="width:128px; height:128px;" ng-if=vm.currentEmployeePhoto ng-src=data:{{vm.currentEmployeePhoto.type}};base64,{{vm.currentEmployeePhoto.image}}> <img class=circle ng-if=!vm.currentEmployeePhoto ng-src=images/default-photo.png></div><form name=scrubEmployeeRecordsForm sf-schema=vm.currentEmployeeSchema sf-form=vm.currentEmployeeForm sf-model=vm.currentEmployeeModel ng-submit=vm.purgeEmployee(vm.currentEmployee)></form></div></div><div class=form-div ng-if=!vm.verified><h4>{{\'Confirm Action\' | translate}}</h4><form name=verifyPasswordForm sf-schema=vm.verifyPasswordSchema sf-form=vm.verifyPasswordForm sf-model=vm.verifyPasswordModel ng-submit=vm.submitPassword(verifyPasswordForm)></form></div></div>'),e.put("app/management_tools/leave_accrual_schedule/management-tools.country-based-accrual-schedule.html","<div class=pim-container ng-if=vm.accrualScheduleData><div id=accrualScheduleDiv class=\"row col s12 list-container fixed\"><crud-panel objs=vm.accrualScheduleData listdata=vm.listData.accrualSchedule extracontroller=vm></crud-panel></div><span>{{'Server Timezone' | translate}}: {{vm.serverTimeZone}}</span></div>"),e.put("app/management_tools/leave_accrual_schedule/management-tools.edit-country-based-accrual-schedule-modal.html","<div class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title=\"{{'Edit Country Based Accrual Schedule' | translate}}\" show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-md></generic-oxd-modal></div>"),e.put("app/news/newsList/news_list.html",'<div class=row id=newsList><div id=newsContent><div id=articleContainer><div id=divArticleDisplayTest class=row><ul class="collapsible collapsible-1 z-depth-0 noBorder" style="margin-bottom: 0px;" data-collapsible=accordion><li ng-repeat="news in vm.newsList" id="articleId_{{ news.id }}" class=newsList article news-id=vm.newsId news=news config=vm.newsConfiguration></li></ul><ohrm-pagination count={{vm.total}} page={{vm.page}} page-size={{vm.pageSize}} change-page-size=vm.changePageSize change-page=vm.viewPage></ohrm-pagination></div></div></div></div>'),e.put("app/news/newsList/news_list_navbar.html",'<ul><li><a href ng-click=navbar.filter() class="tooltipped action-icon" data-tooltip="{{\'Filter\' | translate}}" data-position=bottom><i class=material-icons>oxd_filter</i></a></li></ul>'),e.put("app/news/newsList/news_search.html",'<div id=systemUser_list_search_modal class="modal modal-fixed-footer" style="height:50%; width:50%"><h4>{{\'Filter News\' | translate}}</h4><div class=modal-content><div class=row><div sf-schema=searchModal.schema sf-form=searchModal.form sf-model=searchModal.filter></div></div></div><div class=modal-footer><a href ng-click=searchModal.search() class="modal-action modal-close waves-effect btn primary-btn">{{\'Search\' | translate}}</a> <a href ng-click=searchModal.reset() class="modal-action modal-close waves-effect btn">{{\'Reset\' | translate}}</a> <a href ng-click=searchModal.cancel() class="modal-action modal-close waves-effect btn">{{\'Cancel\' | translate}}</a></div></div>'),e.put("app/pim/contactdetails/contact_details.html",'<div ng-if="contact.permissions.contact_details.read && contact.hasAccessForContactDetails" id=contact_details_tab class=form-div><h4 ng-class=disabled>{{contact.title | translate}}</h4><form name=contact.contactDetailsForm sf-schema=contact.formSchema sf-form=contact.form sf-model=contact.formModel ng-submit=contact.onSubmit(contact.contactDetailsForm)></form><div class=contact-details-buttons><button type=button ng-if="contact.permissions.contact_details.update && !contact.wizardMode" ng-class="{disabled: !contact.canSubmitForm}" class="btn btn-secondary right" id=modal-save-button ohrm-save-form=contact.onSubmit(contact.contactDetailsForm);>{{contact.saveButtonLabel | translate}}</button><pim-document-manager-button ng-if="contact.documentTemplateDetails.templates.length && contact.permissions.contact_details_documents.read" datagroup-name=contact_details_documents employee-number=contact.employeeNumber employee-service=contact.employeeService class=right></pim-document-manager-button></div></div><custom-fields-panel ng-if="contact.permissions.contact_custom_fields.read && contact.hasAccessForContactDetails && contact.customFieldConfiguration" screen=contact.customFieldScreen custom-field-service=contact.customFieldService employee-service=contact.employeeService custom-field-configuration=contact.customFieldConfiguration permissions=contact.customFieldsPermission wizard-mode=contact.wizardMode></custom-fields-panel><div ng-if="contact.permissions.contact_attachment.read && contact.hasAccessForContactDetails" class=form-div><pim-attachment pimscreen="\'contact\'" permissions=contact.attachmentPermission></pim-attachment></div>'),e.put("app/pim/bulkUpdate/add_field_to_bulkUpdate_modal.html",'<div id=bulkUpdateModal class="modal modal-fixed-footer" style="width:30%; height:55%"><h4>{{\'Add new field to update\' | translate}}</h4><form name=addNewFieldToUpdateForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.add(addNewFieldToUpdateForm); form-name=addNewFieldToUpdateForm close-modal-on-click=addNewFieldToUpdateForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Add\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/pim/bulkUpdate/bulk_update.html",'<style>\n.bulk-update-search-date{\n    margin-top: -6px;\n}\n</style><div class=pim-container><div ng-if=bulkupdate.permissions.read class="form-div bulkupdate-search-form-container"><div class="row collapsible_header" ng-class="{collapsed_header: bulkupdate.formCollapsed}" ng-model=bulkupdate.formCollapsed ng-click="bulkupdate.formCollapsed=!bulkupdate.formCollapsed" style=margin-bottom:0px><div class=bulkupdate-search-header><i ng-if=!bulkupdate.formCollapsed style=margin-top:15px class="right material-icons">arrow_drop_up</i> <i ng-if=bulkupdate.formCollapsed style=margin-top:15px class="right material-icons">arrow_drop_down</i><h4 translate="Select Employees Having"></h4></div></div><form ng-show=!bulkupdate.formCollapsed id=bulkUpdateSearchForm name=bulkUpdateSearchForm class=bulkupdate-search-form><div sf-schema=bulkupdate.searchForm.schema sf-form=bulkupdate.searchForm.form sf-model=bulkupdate.searchForm.model></div><div class=row style=margin-bottom:0px><div class="sectionHead col s12"><span class=section-heading>{{\'Select Fields to Update\' | translate}}</span></div></div><div sf-schema=bulkupdate.fieldSelectionForm.schema sf-form=bulkupdate.fieldSelectionForm.form sf-model=bulkupdate.fieldSelectionForm.model></div><div class="form-group schema-form-section schema-form-submit col offset-s8 s2 right-align"><button class=btn ng-if=bulkupdate.permissions.update style=margin-right:5px ng-disabled="!bulkupdate.getSelectedUpdateFieldCount() || !bulkupdate.isSearchFormValid()" ng-class="{ \'disabled\': !bulkupdate.getSelectedUpdateFieldCount() || !bulkupdate.isSearchFormValid(), \'waves-effect\': bulkupdate.getSelectedUpdateFieldCount() && bulkupdate.isSearchFormValid(), \'waves-green\': bulkupdate.getSelectedUpdateFieldCount() && bulkupdate.isSearchFormValid()}" ng-click=bulkupdate.inlineEdit() translate="Edit Inline"></button> <button class="btn waves-effect waves-green" ng-if=bulkupdate.permissions.update ng-click=bulkupdate.quickUpdate() translate="Update as a Batch" ng-disabled=!bulkupdate.isSearchFormValid() ng-class="{ \'disabled\': !bulkupdate.isSearchFormValid(), \'waves-effect\': bulkupdate.isSearchFormValid(), \'waves-green\': bulkupdate.isSearchFormValid()}"></button></div></form></div><div class="form-div bulkupdateview" ui-view=bulkupdateview ng-if="bulkupdate.state.current.name !== \'pim.bulk_update\'"></div></div>'),e.put("app/pim/bulkUpdate/bulk_update_inline_edit.html",'<div ng-cloak><div class=row><div class="col s12 inline-edit-header"><button id=inline-edit-save-button ng-disabled=!inlineEditor.hasDataChange() ng-click=inlineEditor.save(); class="right btn waves-green" type=button>{{"Update"|translate}}</button> <button id=inline-edit-reset-button ng-disabled=!inlineEditor.hasDataChange() ng-click=inlineEditor.resetInlineEditList(); class="right btn waves-green" type=button>{{"Reset"|translate}}</button><h4>{{\'Edit Inline\'|translate}}</h4></div><p style="right: 6.5em;margin-top: 4.5em;position: absolute;" class="help-block right" ng-if=!inlineEditor.isInlineEditValid()>{{\'Please fill-in all the required fields\'|translate}}</p></div><div class="list-container bulk-update-list-container" style><table class="highlight bordered"><thead><tr><th class=id-select-checkbox data-field=id></th><th data-field=name ng-click="inlineEditor.sortBy(\'lastName\')" class=sortable>{{\'Employee\' | translate}}<i class=material-icons>{{inlineEditor.getSortIcon(\'lastName\')}}</i></th><th ng-if="inlineEditor.getField(\'work_shift\')" data-field=work_shift ng-click="inlineEditor.sortBy(\'workShift\')" class="hide-on-small-and-down sortable">{{\'Work Shift\' | translate}}<i class=material-icons>{{inlineEditor.getSortIcon(\'workShift\')}}</i></th><th ng-if="inlineEditor.getField(\'location\')" data-field=location ng-click="inlineEditor.sortBy(\'empLocation\')" class="hide-on-small-and-down hide-on-med-and-down sortable">{{\'Location\' | translate}}<i class=material-icons>{{inlineEditor.getSortIcon(\'empLocation\')}}</i></th><th ng-if="inlineEditor.getField(\'job_title\')" data-field=job_title ng-click="inlineEditor.sortBy(\'jobTitle\')" class="hide-on-small-and-down hide-on-med-and-down sortable">{{\'Job Title\' | translate}}<i class=material-icons>{{inlineEditor.getSortIcon(\'jobTitle\')}}</i></th><th ng-if="inlineEditor.getField(\'sub_unit\')" data-field=sub_unit ng-click="inlineEditor.sortBy(\'subDivision\')" class="hide-on-small-and-down hide-on-med-and-down sortable">{{\'Sub Unit\' | translate}}<i class=material-icons>{{inlineEditor.getSortIcon(\'subDivision\')}}</i></th><th ng-if="inlineEditor.getField(\'joined_date\')" ng-click="inlineEditor.sortBy(\'joined_date\')" data-field=joined_date class="hide-on-small-and-down hide-on-med-and-down sortable">{{\'Joined Date\' | translate}}<i class=material-icons>{{inlineEditor.getSortIcon(\'joined_date\')}}</i></th><th ng-if="inlineEditor.getField(\'probation_end_date\')" ng-click="inlineEditor.sortBy(\'probation_end_date\')" data-field=probation_end_date class="hide-on-small-and-down hide-on-med-and-down sortable">{{\'Probation End Date\' | translate}}<i class=material-icons>{{inlineEditor.getSortIcon(\'probation_end_date\')}}</i></th><th ng-if="inlineEditor.getField(\'permanency_date\')" ng-click="inlineEditor.sortBy(\'permanency_date\')" data-field=permanency_date class="hide-on-small-and-down hide-on-med-and-down sortable">{{\'Date of Permanency\' | translate}}<i class=material-icons>{{inlineEditor.getSortIcon(\'permanency_date\')}}</i></th><th ng-if="inlineEditor.getField(\'direct_supervisor\')" data-field=supervisor ng-click="inlineEditor.sortBy(\'supervisor\')" class="hide-on-small-and-down hide-on-med-and-down sortable row-supervisor">{{\'Supervisor\' | translate}}<i class=material-icons>{{inlineEditor.getSortIcon(\'supervisor\')}}</i></th><th ng-if="inlineEditor.getField(\'job_category\')" data-field=job_category ng-click="inlineEditor.sortBy(\'job_category\')" class="hide-on-small-and-down hide-on-med-and-down sortable">{{\'Job Category\' | translate}}<i class=material-icons>{{inlineEditor.getSortIcon(\'job_category\')}}</i></th><th ng-if="inlineEditor.getField(\'employment_status\')" data-field=employment_status ng-click="inlineEditor.sortBy(\'employeeStatus\')" class="hide-on-small-and-down hide-on-med-and-down sortable">{{\'Employment Status\' | translate}}<i class=material-icons>{{inlineEditor.getSortIcon(\'employeeStatus\')}}</i></th><th ng-repeat="otherJobDetailsField in inlineEditor.otherJobDetailsFields track by otherJobDetailsField.name" ng-if=inlineEditor.getField(otherJobDetailsField.name) data-field=otherJobDetailsField.name class="hide-on-small-and-down hide-on-med-and-down">{{otherJobDetailsField.label | translate}}<i class=material-icons>{{inlineEditor.getSortIcon(\'otherJobDetailsField.name\')}}</i> <em ng-if=otherJobDetailsField.properties.mandatory>*</em></th></tr></thead><tbody><tr class=bulk-update-list-maincontroller><td class=id-select-checkbox data-field=id style="position: relative;"><a class=dropdown-button href data-activates=list-options-dropdown dropdown data-constrainwidth=false><i class="material-icons icons-color" ng-class="{\'orange-text\': vm.selected.length > 0}">more_horiz</i></a><ul id=list-options-dropdown class=dropdown-content><li ng-if="inlineEditor.selected.length < inlineEditor.employees.length" id=listdirective-options-dropdown-select-all><a href ng-click=inlineEditor.selectAll()>{{\'Select All\'| translate}}</a></li><li ng-if="inlineEditor.selected.length > 0" id=listdirective-options-dropdown-deselect-all><a href ng-click=inlineEditor.deselectAll()>{{\'Deselect All\'| translate}}</a></li></ul></td><td data-field=name></td><td ng-if="inlineEditor.getField(\'work_shift\')"><label for=workShiftSelect><span class=form-label-manual>{{"Change to:" | translate}}</span><select style=width:90% ohrm-select name=workShiftSelect id=workShiftSelect ng-model=inlineEditor.selectedWorkShift ng-change="inlineEditor.changeBulkSelection(\'work_shift\', inlineEditor.selectedWorkShift.id, inlineEditor.selectedWorkShift.value)" ng-options="workShift as workShift.value for workShift in inlineEditor.getField(\'work_shift\').options track by workShift.id"><option value>- {{"Select"| translate}} -</option></select></label><ul id=workShiftDropDown class=dropdown-content><li ng-click="inlineEditor.changeCellValue(\'work_shift\',\'\', \'\')"><a href>- {{"Undefined"|translate}} -</a></li><li ng-click="inlineEditor.changeCellValue(\'work_shift\',workShift.id,workShift.value)" ng-repeat="workShift in inlineEditor.getField(\'work_shift\').options track by workShift.id"><a href>{{workShift.value}}</a></li></ul></td><td ng-if="inlineEditor.getField(\'location\')"><label for=locationsSelect><span class=form-label-manual>{{"Change to:" | translate}}</span><select ohrm-select name=locationsSelect id=locationsSelect ng-model=inlineEditor.selectedLocation ng-change="inlineEditor.changeBulkSelection(\'location\', inlineEditor.selectedLocation.id, inlineEditor.selectedLocation.value)" ng-options="location as location.value disable when location.id == null for location in inlineEditor.setHiararchy(inlineEditor.getField(\'location\').options) track by location.id"><option value disabled>- {{"Select"| translate}} -</option></select></label><ul id=locationDropDown class=dropdown-content><li ng-click="inlineEditor.changeCellValue(\'location\',location.id,location.value)" ng-class="{disabled: location.id===null}" ng-repeat="location in inlineEditor.setHiararchy(inlineEditor.getField(\'location\').options)"><a href>{{location.value}}</a></li></ul></td><td ng-if="inlineEditor.getField(\'job_title\')"><label for=jobTitleSelect><span class=form-label-manual>{{"Change to:" | translate}}</span><select ohrm-select name=jobTitleSelect id=jobTitleSelect ng-model=inlineEditor.selectedJobTitle ng-change="inlineEditor.changeBulkSelection(\'job_title\', inlineEditor.selectedJobTitle.id, inlineEditor.selectedJobTitle.value)" ng-options="jobTitle as jobTitle.value for jobTitle in inlineEditor.getField(\'job_title\').options track by jobTitle.id"><option value>- {{"Select"| translate}} -</option></select></label><ul id=jobtitleDropDown class=dropdown-content><li ng-click="inlineEditor.changeCellValue(\'job_title\',\'\', \'\')"><a href>- {{"Undefined"|translate}} -</a></li><li ng-click="inlineEditor.changeCellValue(\'job_title\',jobTitle.id,jobTitle.value)" ng-repeat="jobTitle in inlineEditor.getField(\'job_title\').options track by jobTitle.id"><a href>{{jobTitle.value}}</a></li></ul></td><td ng-if="inlineEditor.getField(\'sub_unit\')"><label for=subunitsSelect><span class=form-label-manual>{{"Change to:" | translate}}</span><select ohrm-select name=subunitsSelect id=subunitsSelect ng-model=inlineEditor.selectedSubUnit ng-change="inlineEditor.changeBulkSelection(\'sub_unit\', inlineEditor.selectedSubUnit.id, inlineEditor.selectedSubUnit.value)" ng-options="subunit as subunit.value for subunit in inlineEditor.setHiararchy(inlineEditor.getField(\'sub_unit\').options) track by subunit.id"><option value>- {{"Select"| translate}} -</option></select></label><ul id=subunitDropDown class=dropdown-content><li ng-click="inlineEditor.changeCellValue(\'sub_unit\',\'\', \'\')"><a href>- {{"Undefined"|translate}} -</a></li><li ng-click="inlineEditor.changeCellValue(\'sub_unit\',subunit.id,subunit.value)" ng-repeat="subunit in inlineEditor.setHiararchy(inlineEditor.getField(\'sub_unit\').options) track by subunit.id"><a href>{{subunit.value}}</a></li></ul></td><td ng-if="inlineEditor.getField(\'joined_date\')"><label for=joinedDateDatePicker><span class=form-label-manual>{{"Change to:" | translate}}</span></label> <input placeholder="{{\'Joined Date\' | translate}}" materializecss-date type=date class=datepicker name=joinedDateDatePickerBulk id=joinedDateDatePickerBulk ng-model=inlineEditor.selecedJoinedDate on-set=inlineEditor.onJoinedDateSetBulk> <input ng-show=false materializecss-date type=date class=datepicker name=joinedDateDatePickerSingle id=joinedDateDatePickerSingle ng-model=inlineEditor.selecedJoinedDateForCell on-set=inlineEditor.onJoinedDateSetSingle></td><td ng-if="inlineEditor.getField(\'probation_end_date\')"><label for=probationEndDateDatePicker><span class=form-label-manual>{{"Change to:" | translate}}</span></label> <input placeholder="{{\'Probation End Date\' | translate}}" materializecss-date type=date class=datepicker name=probationEndDateDatePickerBulk id=probationEndDateDatePickerBulk ng-model=inlineEditor.selecedProbationEndDate on-set=inlineEditor.onProbationEndDateSetBulk> <input ng-show=false materializecss-date type=date class=datepicker name=probationEndDateDatePickerSingle id=probationEndDateDatePickerSingle ng-model=inlineEditor.selecedProbationEndDateForCell on-set=inlineEditor.onProbationEndDateSetSingle></td><td ng-if="inlineEditor.getField(\'permanency_date\')"><label for=permanencyDateDatePicker><span class=form-label-manual>{{"Change to:" | translate}}</span></label> <input placeholder="{{\'Date of Permanency\' | translate}}" materializecss-date type=date class=datepicker name=permanencyDateDatePickerBulk id=permanencyDateDatePickerBulk ng-model=inlineEditor.selecedPermanencyDate on-set=inlineEditor.onPermanencyDateSetBulk> <input ng-show=false materializecss-date type=date class=datepicker name=permanencyDateDatePickerSingle id=permanencyDateDatePickerSingle ng-model=inlineEditor.selecedPermanencyDateForCell on-set=inlineEditor.onPermanencyDateSetSingle></td><td ng-if="inlineEditor.getField(\'direct_supervisor\')"><label for=newSupervisorChooser><span class=form-label-manual>{{"Change to:" | translate}}</span></label> <input type=text title={{inlineEditor.selecedSupervisors}} readonly placeholder=\'{{"Supervisors"|translate}}\' name=newSupervisorChooser ng-model=inlineEditor.selecedSupervisors id=newSupervisorChooser ng-click=inlineEditor.addSupervisors()></td><td ng-if="inlineEditor.getField(\'job_category\')"><label for=jobCategorySelect><span class=form-label-manual>{{"Change to:" | translate}}</span><select ohrm-select name=jobCategorySelect id=jobCategorySelect ng-model=inlineEditor.selectedJobCategory ng-change="inlineEditor.changeBulkSelection(\'job_category\', inlineEditor.selectedJobCategory.id, inlineEditor.selectedJobCategory.value)" ng-options="jobCategory as jobCategory.value for jobCategory in inlineEditor.getField(\'job_category\').options track by jobCategory.id"><option value>- {{"Select"| translate}} -</option></select></label><ul id=jobcategoryDropDown class=dropdown-content><li ng-click="inlineEditor.changeCellValue(\'job_category\',\'\', \'\')"><a href>- {{"Undefined"|translate}} -</a></li><li ng-click="inlineEditor.changeCellValue(\'job_category\',jobCategory.id,jobCategory.value)" ng-repeat="jobCategory in inlineEditor.getField(\'job_category\').options track by jobCategory.id"><a href>{{jobCategory.value}}</a></li></ul></td><td ng-if="inlineEditor.getField(\'employment_status\')"><label for=employmentStatusSelect><span class=form-label-manual>{{"Change to:" | translate}}</span><select ohrm-select name=employmentStatusSelect id=employmentStatusSelect ng-model=inlineEditor.selectedEmploymentStatus ng-change="inlineEditor.changeBulkSelection(\'employment_status\', inlineEditor.selectedEmploymentStatus.id, inlineEditor.selectedEmploymentStatus.value)" ng-options="employmentStatus as employmentStatus.value for employmentStatus in inlineEditor.getField(\'employment_status\').options track by employmentStatus.id"><option value>- {{"Select"| translate}} -</option></select></label><ul id=employmentStatusDropDown class=dropdown-content><li ng-click="inlineEditor.changeCellValue(\'employment_status\',\'\', \'\')"><a href>- {{"Undefined"|translate}} -</a></li><li ng-click="inlineEditor.changeCellValue(\'employment_status\',employmentStatus.id,employmentStatus.value)" ng-repeat="employmentStatus in inlineEditor.getField(\'employment_status\').options track by employmentStatus.id"><a href>{{employmentStatus.value}}</a></li></ul></td><td ng-repeat="otherJobDetailsField in inlineEditor.otherJobDetailsFields track by otherJobDetailsField.name" ng-if=inlineEditor.getField(otherJobDetailsField.name)><div ng-if="otherJobDetailsField.type === \'select\'"><label for="{{otherJobDetailsField.name + \'_select\'}}"><span class=form-label-manual>{{"Change to:" | translate}}</span><select ohrm-select name="{{otherJobDetailsField.name + \'_select\'}}" id="{{otherJobDetailsField.name + \'_select\'}}" ng-model=inlineEditor.selectedOtherJobDetailsValues[otherJobDetailsField.name] ng-change="inlineEditor.changeOtherJobDetailsBulkSelection(otherJobDetailsField.name, inlineEditor.selectedOtherJobDetailsValues[otherJobDetailsField.name].id, inlineEditor.selectedOtherJobDetailsValues[otherJobDetailsField.name].value)" ng-options="otherJobDetail as otherJobDetail.value for otherJobDetail in inlineEditor.getField(otherJobDetailsField.name).options track by otherJobDetail.id"><option ng-if=!otherJobDetailsField.properties.mandatory value>- {{"Select"| translate}} -</option></select></label><ul id="{{otherJobDetailsField.name + \'_dropdown\'}}" class=dropdown-content><li ng-if=!otherJobDetailsField.properties.mandatory ng-click="inlineEditor.changeOtherJobDetailsCellValue(otherJobDetailsField.name,\'\', \'\', \'\')"><a href>- {{"Undefined"|translate}} -</a></li><li ng-repeat="otherJobDetail in inlineEditor.getField(otherJobDetailsField.name).options track by otherJobDetail.id" ng-click="inlineEditor.changeOtherJobDetailsCellValue(otherJobDetailsField.name,otherJobDetail.id,otherJobDetail.value, \'\')"><a href>{{otherJobDetail.value}}</a></li></ul></div><div ng-if="otherJobDetailsField.type === \'date\'"><label for="{{otherJobDetailsField.name + \'_date_picker\'}}"><span class=form-label-manual>{{"Change to:" | translate}}</span></label> <input placeholder={{otherJobDetailsField.label}} materializecss-date type=date class=datepicker name="{{otherJobDetailsField.name + \'_date_picker_bulk\'}}" id="{{otherJobDetailsField.name + \'_date_picker_bulk\'}}" ng-model=inlineEditor.selecedJoinedDate clear-button-available={{!otherJobDetailsField.properties.mandatory}} on-set=inlineEditor.getOtherJobDetailsSetBulkDateFunctionForField(otherJobDetailsField.name)> <input ng-show=false materializecss-date type=date class=datepicker name="{{otherJobDetailsField.name + \'_date_picker_single\'}}" id="{{otherJobDetailsField.name + \'_date_picker_single\'}}" ng-model=inlineEditor.selecedJoinedDateForCell clear-button-available={{!otherJobDetailsField.properties.mandatory}} on-set=inlineEditor.getOtherJobDetailsSetSingleDateFunctionForField(otherJobDetailsField.name)></div><div ng-if="otherJobDetailsField.type === \'autocomplete-multyselect\'"><label for="{{otherJobDetailsField.name + \'_multiSelectChooser\'}}"><span class=form-label-manual>{{"Change to:" | translate}}</span></label> <input type=text title={{inlineEditor.selectedOtherJobDetailsValues[otherJobDetailsField.name]}} readonly placeholder={{otherJobDetailsField.label|translate}} name="{{otherJobDetailsField.name + \'_multiSelectChooser\'}}" ng-model=inlineEditor.selectedOtherJobDetailsValues[otherJobDetailsField.name] id="{{otherJobDetailsField.name + \'_multiSelectChooser\'}}" ng-click="inlineEditor.selectMultiChoices(\'\', otherJobDetailsField)"></div></td></tr><tr ng-click="inlineEditor.changeSelection(employee, $event)" ng-repeat="employee in inlineEditor.employees track by employee.empNumber" ng-class="{selected: employee.selected}"><td class=id-select-checkbox><input ng-show="inlineEditor.hasPermissionsToUpdate() && inlineEditor.hasPermissionToEditAtLeastOneCell(employee)" type=checkbox class=filled-in ng-model=employee.selected id=checkbox_{{employee.empNumber}}> <label ng-show="inlineEditor.hasPermissionsToUpdate() && inlineEditor.hasPermissionToEditAtLeastOneCell(employee)" for=checkbox_{{employee.empNumber}} class></label></td><td>{{employee.firstName}} {{employee.middleName}} {{employee.lastName}}</td><td ng-click=inlineEditor.triggerCellClick($event) ng-if="inlineEditor.isFieldToBeUpdated(\'work_shift\')" ng-class="{dirty: employee.workShift && employee.workShift.workShiftName != inlineEditor.untochedEmployees[$index].workShift.workShiftName, \'editable-cell\':employee.permissionData.JobRecord.update}"><a dropdown-button class="hide-on-small-and-down hide-on-med-and-down" style="position: relative{{(employee.workShift.workShiftName == null)?\'text-decoration: underline\':\'\'}}" data-activates=workShiftDropDown ng-class="{dirty: employee.workShift && employee.workShift.workShiftName != inlineEditor.untochedEmployees[$index].workShift.workShiftName, \'editable-cell\':employee.permissionData.JobRecord.update, \'dropdown-button\':employee.permissionData.JobRecord.update}">{{(employee.workShift.workShiftName == null)?(\'-\'+("Select"| translate)+\'-\'):\'\'}}<span ng-if="employee.workShift.workShiftName == null" class=caret></span>{{(employee.workShift.workShiftName != null)?employee.workShift.workShiftName:\'\'}}</a></td><td ng-click=inlineEditor.triggerCellClick($event) ng-if="inlineEditor.isFieldToBeUpdated(\'location\')" ng-class="{dirty: employee.locations && inlineEditor.untochedEmployees[$index].locations && employee.locations[0].name != inlineEditor.untochedEmployees[$index].locations[0].name, \'editable-cell\':employee.permissionData.JobRecord.update}"><a dropdown-button class="hide-on-small-and-down hide-on-med-and-down" data-activates=locationDropDown ng-class="{dirty: employee.locations && inlineEditor.untochedEmployees[$index].locations && employee.locations[0].name != inlineEditor.untochedEmployees[$index].locations[0].name, \'editable-cell\':employee.permissionData.JobRecord.update, \'dropdown-button\':employee.permissionData.JobRecord.update}" style="position: relative">{{employee.locations[0].name}}</a></td><td ng-click=inlineEditor.triggerCellClick($event) ng-if="inlineEditor.isFieldToBeUpdated(\'job_title\')" ng-class="{dirty: employee.jobTitle && employee.jobTitle.jobTitleName != inlineEditor.untochedEmployees[$index].jobTitle.jobTitleName, \'editable-cell\':employee.permissionData.JobRecord.update}"><a dropdown-button class=hide-on-small-and-down style="position:relative;display:table-cell{{(employee.jobTitle.jobTitleName == null)?\'text-decoration: underline\':\'\'}}" data-activates=jobtitleDropDown ng-class="{dirty: employee.jobTitle && employee.jobTitle.jobTitleName != inlineEditor.untochedEmployees[$index].jobTitle.jobTitleName, \'editable-cell\':employee.permissionData.JobRecord.update, \'dropdown-button\':employee.permissionData.JobRecord.update}">{{(employee.jobTitle.jobTitleName == null)?(\'-\'+("Select"| translate)+\'-\'):\'\'}}<span ng-if="employee.jobTitle.jobTitleName == null" class=caret></span>{{(employee.jobTitle.jobTitleName != null)?employee.jobTitle.jobTitleName:\'\'}}</a></td><td ng-click=inlineEditor.triggerCellClick($event) ng-if="inlineEditor.isFieldToBeUpdated(\'sub_unit\')" ng-class="{dirty: employee.subDivision && employee.subDivision.name != inlineEditor.untochedEmployees[$index].subDivision.name, \'editable-cell\':employee.permissionData.JobRecord.update}"><a dropdown-button class="hide-on-small-and-down hide-on-med-and-down" style="position:relative;display:table-cell{{(employee.subDivision.name == null)?\'text-decoration: underline\':\'\'}}" data-activates=subunitDropDown ng-class="{dirty: employee.subDivision && employee.subDivision.name != inlineEditor.untochedEmployees[$index].subDivision.name, \'editable-cell\':employee.permissionData.JobRecord.update, \'dropdown-button\':employee.permissionData.JobRecord.update}">{{(employee.subDivision.name == null)?(\'-\'+("Select"| translate)+\'-\'):\'\'}}<span ng-if="employee.subDivision.name == null" class=caret></span>{{(employee.subDivision.name != null)?employee.subDivision.name:\'\'}}</a></td><td ng-click=inlineEditor.triggerCellClick($event) ng-if="inlineEditor.isFieldToBeUpdated(\'joined_date\')" ng-class="{dirty: employee.joinedDate && employee.joinedDate != inlineEditor.untochedEmployees[$index].joinedDate, \'editable-cell\':employee.permissionData.JobRecord.update}"><a ng-if="employee.joinedDate != null" ng-click="inlineEditor.openDatePickerForSingleCell(employee, \'#joinedDateDatePickerSingle\')" class="hide-on-small-and-down hide-on-med-and-down" ng-class="{dirty: employee.joinedDate && employee.joinedDate != inlineEditor.untochedEmployees[$index].joinedDate, \'editable-cell\':employee.permissionData.JobRecord.update}">{{inlineEditor.convertToLocalizedDateFormat(employee.joinedDate)}}</a> <a ng-if="employee.joinedDate == null" ng-click="inlineEditor.openDatePickerForSingleCell(employee, \'#joinedDateDatePickerSingle\')" style="text-decoration: underline" class="hide-on-small-and-down hide-on-med-and-down" ng-class="{dirty: employee.joinedDate && employee.joinedDate != inlineEditor.untochedEmployees[$index].joinedDate, \'editable-cell\':employee.permissionData.JobRecord.update}">{{"Select"| translate}} {{"Joined Date"| translate}}</a></td><td ng-click=inlineEditor.triggerCellClick($event) ng-if="inlineEditor.isFieldToBeUpdated(\'probation_end_date\')" ng-class="{dirty: employee.JobRecord.probation_end_date && employee.JobRecord.probation_end_date != inlineEditor.untochedEmployees[$index].JobRecord.probation_end_date, \'editable-cell\':employee.permissionData.JobRecord.update}"><a ng-if="employee.JobRecord.probation_end_date != null" ng-click="inlineEditor.openDatePickerForSingleCell(employee, \'#probationEndDateDatePickerSingle\')" class="hide-on-small-and-down hide-on-med-and-down" ng-class="{dirty: employee.JobRecord.probation_end_date && employee.JobRecord.probation_end_date != inlineEditor.untochedEmployees[$index].JobRecord.probation_end_date, \'editable-cell\':employee.permissionData.JobRecord.update}">{{inlineEditor.convertToLocalizedDateFormat(employee.JobRecord.probation_end_date)}}</a> <a ng-if="employee.JobRecord.probation_end_date == null" ng-click="inlineEditor.openDatePickerForSingleCell(employee, \'#probationEndDateDatePickerSingle\')" style="text-decoration: underline" class="hide-on-small-and-down hide-on-med-and-down" ng-class="{dirty: employee.JobRecord.probation_end_date && employee.JobRecord.probation_end_date != inlineEditor.untochedEmployees[$index].JobRecord.probation_end_date, \'editable-cell\':employee.permissionData.JobRecord.update}">{{"Select"| translate}} {{"Probation End Date"| translate}}</a></td><td ng-click=inlineEditor.triggerCellClick($event) ng-if="inlineEditor.isFieldToBeUpdated(\'permanency_date\')" ng-class="{dirty: employee.JobRecord.date_of_permanency && employee.JobRecord.date_of_permanency != inlineEditor.untochedEmployees[$index].JobRecord.date_of_permanency, \'editable-cell\':employee.permissionData.JobRecord.update}"><a ng-if="employee.JobRecord.date_of_permanency != null" ng-click="inlineEditor.openDatePickerForSingleCell(employee, \'#permanencyDateDatePickerSingle\')" class="hide-on-small-and-down hide-on-med-and-down" ng-class="{dirty: employee.JobRecord.date_of_permanency && employee.JobRecord.date_of_permanency != inlineEditor.untochedEmployees[$index].JobRecord.date_of_permanency, \'editable-cell\':employee.permissionData.JobRecord.update}">{{inlineEditor.convertToLocalizedDateFormat(employee.JobRecord.date_of_permanency)}}</a> <a ng-if="employee.JobRecord.date_of_permanency == null" ng-click="inlineEditor.openDatePickerForSingleCell(employee, \'#permanencyDateDatePickerSingle\')" style="text-decoration: underline" class="hide-on-small-and-down hide-on-med-and-down" ng-class="{dirty: employee.JobRecord.date_of_permanency && employee.JobRecord.date_of_permanency != inlineEditor.untochedEmployees[$index].JobRecord.date_of_permanency, \'editable-cell\':employee.permissionData.JobRecord.update}">{{"Select"| translate}} {{"Date of Permanency"| translate}}</a></td><td ng-click=inlineEditor.triggerCellClick($event) ng-if="inlineEditor.getField(\'direct_supervisor\')" ng-class="{dirty: inlineEditor.isSupervisorModified(employee, inlineEditor.untochedEmployees[$index]), \'editable-cell\':employee.permissionData.supervisors.update}"><a ng-if="employee.supervisors.length > 0" ng-click=inlineEditor.addSupervisors(employee) style=max-width:150px;display:table-cell ng-class="{dirty: inlineEditor.isSupervisorModified(employee, inlineEditor.untochedEmployees[$index]), \'editable-cell\':employee.permissionData.supervisors.update}" class="hide-on-small-and-down hide-on-med-and-down truncate" title={{inlineEditor.getSupervisorList(employee.supervisors)}}>{{inlineEditor.getSupervisorList(employee.supervisors)}}</a> <a ng-if="employee.supervisors.length == 0" ng-click=inlineEditor.addSupervisors(employee) style="max-width:150px;display:table-cell;text-decoration: underline" ng-class="{dirty: inlineEditor.isSupervisorModified(employee, inlineEditor.untochedEmployees[$index]), \'editable-cell\':employee.permissionData.supervisors.update}" class="hide-on-small-and-down hide-on-med-and-down truncate" title={{inlineEditor.getSupervisorList(employee.supervisors)}}>{{"Select"| translate}} {{"Supervisor"| translate}}</a></td><td ng-click=inlineEditor.triggerCellClick($event) ng-if="inlineEditor.isFieldToBeUpdated(\'job_category\')" ng-class="{dirty: employee.jobCategory && employee.jobCategory.jobCategoryName != inlineEditor.untochedEmployees[$index].jobCategory.jobCategoryName, \'editable-cell\':employee.permissionData.JobRecord.update}"><a dropdown-button class=hide-on-small-and-down style="position:relative;display:table-cell{{(employee.jobTitle.jobTitleName == null)?\';text-decoration: underline\':\';\'}}" data-activates=jobcategoryDropDown ng-class="{dirty: employee.jobCategory && employee.jobCategory.jobCategoryName != inlineEditor.untochedEmployees[$index].jobCategory.jobCategoryName, \'editable-cell\':employee.permissionData.JobRecord.update, \'dropdown-button\':employee.permissionData.JobRecord.update}">{{(employee.jobCategory.jobCategoryName == null)?(\'-\'+("Select"| translate)+\'-\'):\'\'}}<span ng-if="employee.jobCategory.jobCategoryName == null" class=caret></span>{{(employee.jobCategory.jobCategoryName != null)?employee.jobCategory.jobCategoryName:\'\'}}</a></td><td ng-click=inlineEditor.triggerCellClick($event) ng-if="inlineEditor.isFieldToBeUpdated(\'employment_status\')" ng-class="{dirty: employee.employeeStatus && employee.employeeStatus.name != inlineEditor.untochedEmployees[$index].employeeStatus.name, \'editable-cell\':employee.permissionData.JobRecord.update}"><a dropdown-button class=hide-on-small-and-down style="position:relative;display:table-cell{{(employee.jobTitle.jobTitleName == null)?\'text-decoration: underline\':\'\'}}" data-activates=employmentStatusDropDown ng-class="{dirty: employee.employeeStatus && employee.employeeStatus.name != inlineEditor.untochedEmployees[$index].employeeStatus.name, \'editable-cell\':employee.permissionData.JobRecord.update, \'dropdown-button\':employee.permissionData.JobRecord.update}">{{(employee.employeeStatus.name == null)?(\'-\'+("Select"| translate)+\'-\'):\'\'}}<span ng-if="employee.employeeStatus.name == null" class=caret></span>{{(employee.employeeStatus.name != null)?employee.employeeStatus.name:\'\'}}</a></td><td ng-repeat="otherJobDetailsField in inlineEditor.otherJobDetailsFields track by otherJobDetailsField.name" ng-click=inlineEditor.triggerCellClick($event) ng-if=inlineEditor.isFieldToBeUpdated(otherJobDetailsField.name) ng-class="{dirty: inlineEditor.isEmployeeOtherJobDetailCellValueDirty(employee, otherJobDetailsField), \'editable-cell\':employee.permissionData.JobRecord.update}"><a dropdown-button class=hide-on-small-and-down style="position:relative;{{(employee.jobTitle.jobTitleName == null)?\'text-decoration: underline\':\'\'}}" data-activates=\'{{otherJobDetailsField.type === "select" ? otherJobDetailsField.name + "_dropdown" : ""}}\' ng-click="inlineEditor.triggerOtherJobDetailsCellClick(employee, otherJobDetailsField)" ng-class="{dirty: inlineEditor.isEmployeeOtherJobDetailCellValueDirty(employee, otherJobDetailsField), \'editable-cell\':employee.permissionData.JobRecord.update, \'dropdown-button\':employee.permissionData.JobRecord.update, \'bulk-update-invalid-cell\':(inlineEditor.invalidFields[employee.empNumber] && inlineEditor.invalidFields[employee.empNumber][otherJobDetailsField.name])}">{{inlineEditor.getEmployeeOtherJobDetailCellValue(employee, otherJobDetailsField)}}<span ng-if="inlineEditor.shouldShowSpanTag(employee, otherJobDetailsField)" class=caret></span></a></td></tr></tbody></table></div><div class=center-align><ul class=pagination ng-if="inlineEditor.total > inlineEditor.pageSize"><li class=rows-per-page>{{\'Rows per page\'| translate}}</li><li class=page-size><select ng-model=inlineEditor.pageSizeString ohrm-select ng-change=inlineEditor.updatePageSize();inlineEditor.fetchEmployees(1);><option ng-repeat="pageSize in inlineEditor.pageSizes" value={{pageSize}}>{{pageSize}}</option></select></li><li>{{inlineEditor.getCurrentPageText()}}</li><li class=waves-effect ng-if="inlineEditor.page > 1"><a ng-click=inlineEditor.prevPage()><i class=material-icons>chevron_left</i></a></li><li class=waves-effect ng-if="inlineEditor.page < inlineEditor.lastPage"><a ng-click=inlineEditor.nextPage()><i class=material-icons>chevron_right</i></a></li></ul></div></div><div class=bulk-update-cell-dropdowns><ul id=dropdown1 class=dropdown-content><li><a href>one</a></li><li><a href>two</a></li><li class=divider></li><li><a href>three</a></li></ul></div>'),
e.put("app/pim/bulkUpdate/bulk_update_quickupdate.html",'<div style="position: relative" class="right tooltipped" data-tooltip="{{\'Add New Field\' | translate}}" data-position=left><a id=addNewFieldButton ng-class="{disabled: quickupdator.updateForm.length == quickupdator.updateFields.length}" class="btn-floating fixed-action-btn floating-add-btn btn-large waves-effect waves-light" ng-click=quickupdator.addFields()><i class=material-icons>add</i></a></div><h4>{{quickupdator.getBulkUpdateTitle(quickupdator.total)|translate}}</h4><form name=bulkUpdateForm><div sf-schema=quickupdator.updateSchema sf-form=quickupdator.updateForm sf-model=quickupdator.updateModel ng-submit=quickupdator.onSubmit(bulkUpdateForm)></div><div class="schema-form-section bulkupdate_form_buttons row"><button class="btn waves-effect waves-green right" ng-class="{disabled: !quickupdator.formEnabled}" type=button ng-click=quickupdator.save(bulkUpdateForm) translate=Update></button> <button id=bulk-update-quick-edit-cancel-button class="btn waves-effect waves-green right" type=button ng-click=quickupdator.cancelUpdate() translate=Cancel></button></div></form>'),e.put("app/pim/bulkUpdate/effective_date_modal.html",'<div id=effectiveDateModal class="modal modal-fixed-footer" style="width: 40%"><h4>{{\'Select Effective Date and Event\'| translate}}</h4><form name=effectiveDateForm id=effectiveDateForm><div class=modal-content style="max-height: 70%"><div sf-schema=modal.formSchema sf-form=modal.form sf-model=modal.formModel></div><div ng-if=modal.recordCount class=row><div class="col s12"><p style="font-size: 15px">{{modal.confirmationMessage}}</p></div></div><div class="row requiredHelperText"><div class=helpvalue><em>*</em> {{"Required field" | translate}}</div></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(effectiveDateForm); form-name=effectiveDateForm close-modal-on-click=effectiveDateForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Yes, Update\'| translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'No, Cancel\'| translate}}</a></div></form></div>'),e.put("app/pim/bulkUpdate/error_modal.html",'<div id=progressModal class="modal modal-fixed-footer bulk-update-error-modal"><h4>{{modal.modalTitle | translate}}</h4><div class=modal-content><div><table id=bulk-update-error-modal-table><tr><th id=bulk-update-error-modal-table-employee-header>{{"Employee" | translate}}</th><th id=bulk-update-error-modal-table-message-header>{{"Error Message" | translate}}</th></tr><tr ng-repeat="employeeError in modal.employeeErrors track by employeeError.emp_number"><td>{{employeeError.emp_name}}</td><td>{{employeeError.error_message}}</td></tr></table></div></div><div class=modal-footer><a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Close\'| translate}}</a></div></div>'),e.put("app/pim/bulkUpdate/inline_edit_confirmation_modal.html",'<div id=inline_edit_confirmation_modal class="modal confirm-dialog"><div class=modal-content><h4></h4><p>{{modal.confirmationMessage}}</p></div><div class=modal-footer><a href ng-click=modal.cancel() class="modal-action modal-close waves-effect btn">{{\'No, Cancel\' | translate}}</a> <a href ng-click=modal.confirm() class="modal-action modal-close waves-effect btn primary-btn">{{\'Yes, Update\' | translate}}</a></div></div>'),e.put("app/pim/bulkUpdate/inline_edit_discard_confirmation.html","<div id=inline_edit_discard_confirmation_modal class=\"modal confirm-dialog\"><div class=modal-content><h4></h4><p>{{'Save or discard modified data before proceeding.' | translate}}</p></div><div class=modal-footer><a href class=\"modal-action modal-close waves-effect btn\">{{'Cancel' | translate}}</a> <a href ng-click=modal.discardChangesAndProceed() class=\"modal-action modal-close waves-effect btn primary-btn\">{{'Discard' | translate}}</a> <a href ng-click=modal.saveChangesAndProceed() class=\"modal-action modal-close waves-effect btn primary-btn\">{{'Save' | translate}}</a></div></div>"),e.put("app/pim/bulkUpdate/inline_edit_recovery_confirmation_modal.html",'<div id=inline_edit_confirmation_modal class="modal confirm-dialog"><div class=modal-content><h4></h4><p>{{"Modified (not saved) data from the previous session found. Do you want to continue editing those data in inline editor?"|translate}}</p></div><div class=modal-footer><a href ng-click=modal.cancel() class="modal-action modal-close waves-effect btn">{{\'No, Discard\' | translate}}</a> <a href ng-click=modal.confirm() class="modal-action modal-close waves-effect btn primary-btn">{{\'Yes, Continue\' | translate}}</a></div></div>'),e.put("app/pim/bulkUpdate/progress_modal.html",'<div id=progressModal class="modal modal-fixed-footer" style="width: 40%; height:20%"><h4>{{modal.progressModalTitle | translate}}</h4><div class=modal-content style="height: 30%; overflow-y:hidden"><div class=row><div class=progress style=margin-top:5%><div class=determinate ng-attr-style="width: {{modal.progress}}"></div></div></div></div></div>'),e.put("app/pim/bulkUpdate/select_multi_choices_modal.html",'<div id=inlineEditMultiChoicesModal class="modal modal-fixed-footer" style="width: 40%; height: 60%"><h4>{{modal.title| translate}}</h4><form name=inlineEditMultiChoicesModalForm id=inlineEditMultiChoicesModalForm><div class=modal-content style="max-height: 70%"><div sf-schema=modal.formSchema sf-form=modal.form sf-model=modal.formModel></div></div><div class=modal-footer><a href ohrm-save-form=modal.modifyMultiChoices(inlineEditMultiChoicesModalForm); form-name=inlineEditMultiChoicesModalForm close-modal-on-click=inlineEditMultiChoicesModalForm class="modal-action waves-effect waves-green btn primary-btn">{{ modal.modifyButtonTitle | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\'| translate}}</a></div></form></div>'),e.put("app/pim/bulkUpdate/supervisor_modal.html",'<div id=inlineEditSuperviorModal class="modal modal-fixed-footer" style="width: 40%; height: 50%"><h4>{{modal.title| translate}}</h4><form name=inlineEditSuperviorModalForm id=inlineEditSuperviorModalForm><div class=modal-content style="max-height: 70%"><div sf-schema=modal.formSchema sf-form=modal.form sf-model=modal.formModel></div></div><div class=modal-footer><a href ohrm-save-form=modal.modifySupervisors(inlineEditSuperviorModalForm); form-name=inlineEditSuperviorModalForm close-modal-on-click=inlineEditSuperviorModalForm class="modal-action waves-effect waves-green btn primary-btn">{{ modal.modifyButtonTitle | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\'| translate}}</a></div></form></div>'),e.put("app/pim/customFields/custom-field-section-navbar.html",'<ul><li><a ng-click=navbar.filter() class="tooltipped action-icon" data-tooltip="{{\'Filter\' | translate}}" data-position=bottom><i class=material-icons>oxd_filter</i></a></li></ul>'),e.put("app/pim/customFields/custom-field-section-search.html",'<div id=location_list_search_modal class="modal modal-short" tabindex=-1 role=dialog><generic-oxd-modal modal-title="Filter Custom Field Sections By" show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Search cancel-button-label=Cancel on-save=modal.search modal-size-class=modal-sm></generic-oxd-modal></div>'),e.put("app/pim/customFields/custom_field_modal.html","<div id=modal1 class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title={{modal.title}} show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-md></generic-oxd-modal></div>"),e.put("app/pim/customFields/custom_field_section_details.html",'<div class=pim-container id=custom_field_sections_details><div id=personal_details_tab class=form-div><h4>{{\'Edit Custom Field Section\' | translate}}</h4><form name=customFieldSectionForm sf-schema=customFieldSectionDetails.schema sf-form=customFieldSectionDetails.form sf-model=customFieldSectionDetails.model ng-submit=customFieldSectionDetails.onSubmit(customFieldSectionForm)></form></div><div id=customFieldSectionDiv><crud-panel panelinfo=customFieldSectionDetails.panalInfo.customFieldsInfo objs=customFieldSectionDetails.customFieldSectionDetails.CustomField listdata=customFieldSectionDetails.listData.customFields extracontroller=customFieldSectionDetails></crud-panel></div></div><div class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Custom Field\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=customFieldSectionDetails.addCustomFieldToSection()><i class=material-icons>add</i></a></div>'),e.put("app/pim/customFields/custom_field_section_modal.html","<div class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title=\"{{'Add Custom Field Section'}}\" show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-sm></generic-oxd-modal></div>"),e.put("app/pim/customFields/custom_field_sections.html",'<div class=pim-container ng-cloak ng-if="customFieldSections.state.current.name === \'pim.custom_field_sections\' && customFieldSections.permissions.read"><div id=reportingMethodsDiv><crud-panel panelinfo=customFieldSections.panalInfo.customFieldSectionsInfo objs=customFieldSections.customFieldSectionsFiltered listdata=customFieldSections.listData.customFieldSections extracontroller=customFieldSections></crud-panel><div class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Custom Field Section\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=customFieldSections.addCustomFieldSection()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/pim/customizablePimTabs/customizable_pim_tabs.html",'<div class=pim-container ng-cloak ng-if="customizablePimTabs.state.current.name === \'pim.customizable_pim_tabs\' && customizablePimTabs.permissions.read"><div id=customizablePimTabsDiv><crud-panel panelinfo=customizablePimTabs.panalInfo.customizablePimTabsInfo objs=customizablePimTabs.customTabs listdata=customizablePimTabs.listData.customTabs initialsortfield="\'menuTitle\'" extracontroller=customizablePimTabs></crud-panel><div class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Custom Tab\' | translate}}" data-position=left ng-if=customizablePimTabs.permissions.create><a class="btn-floating btn-large waves-effect waves-light" ng-click=customizablePimTabs.addPimTab()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/pim/customizablePimTabs/customizable_pim_tabs_modal.html",'<div id=customFieldModal class="modal modal-short" tabindex=-1 role=dialog><generic-oxd-modal hide-empty-form-elements modal-title={{modal.title}} show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class={{modal.modalSize}}></generic-oxd-modal></div>'),e.put("app/pim/customizablePimTabs/employee_pim_tab.html",'<div ng-cloak id=employeePimTab class=form-div ng-if=employeePIMTabs.dataGroupPermission.read><h4 ng-show=employeePIMTabs.noCustomFields>{{\'No records to display.\'|translate}}</h4><div ng-if=!employeePIMTabs.noCustomFields id=employeePimTabsDivMuliple><crud-panel ng-show=employeePIMTabs.formReady ng-if=employeePIMTabs.haveMultiple panelinfo=employeePIMTabs.panalInfo.customEmployeeTabInfo objs=employeePIMTabs.customFieldValues listdata=employeePIMTabs.listData.customFieldValues extracontroller=employeePIMTabs></crud-panel><h4 ng-show=employeePIMTabs.formReady ng-if=!employeePIMTabs.haveMultiple>{{ employeePIMTabs.panalInfo.customEmployeeTabInfo.title}}</h4><form class=customPimSingleForm ng-show=employeePIMTabs.formReady ng-if="!employeePIMTabs.haveMultiple && employeePIMTabs.permissions.read" name=employeePIMTabs.customizablePimTabSingleForm><div class=modal-content><div class=customPimSingleFormSchema sf-schema=employeePIMTabs.schema sf-form=employeePIMTabs.form sf-model=employeePIMTabs.singleModel extracontroller=employeePIMTabs></div></div><div class="schema-form-section form-buttons row" ng-if="employeePIMTabs.permissions.update && !employeePIMTabs.wizardMode"><div class="form-group schema-form-submit col s12 right-align"><button ng-click=employeePIMTabs.save(employeePIMTabs.customizablePimTabSingleForm) class="btn waves-effect waves-green primary-btn">{{\'Save\' | translate}}</button></div></div></form><div class="fixed-action-btn floating-add-btn tooltipped" ng-show=employeePIMTabs.formReady ng-if="employeePIMTabs.haveMultiple && employeePIMTabs.permissions.create" data-tooltip="{{\'Add\'|translate}} {{employeePIMTabs.tabDetails.menuItem.menuTitle}} {{\'Details\'|translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-cloak ng-if=employeePIMTabs.haveMultiple ng-click=employeePIMTabs.addEmployeePimTab()><i class=material-icons>add</i></a></div></div></div><div ng-if="employeePIMTabs.allowAttachment && employeePIMTabs.attachmentPermission.read" class=form-div><pim-attachment pimscreen=employeePIMTabs.tabDetails.pimScreenId permissions=employeePIMTabs.attachmentPermission></pim-attachment></div>'),e.put("app/pim/dependents/dependent_modal.html","<div class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title={{modal.title}} show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-sm></generic-oxd-modal></div>"),e.put("app/pim/dependents/employee_dependents.html",'<div id=socialMediaDiv><crud-panel panelinfo=dependents.panelInfo.dependentsInfo objs=dependents.dependents listdata=dependents.listData.dependents extracontroller=dependents></crud-panel><div ng-if="dependents.permissions.create && dependents.loaded" class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Dependent\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=dependents.addDependent()><i class=material-icons>add</i></a></div></div><custom-fields-panel ng-if="dependents.customFieldsPermission.read && dependents.customFieldConfiguration" screen=dependents.customFieldScreen extracontroller=dependents wizard-mode=dependents.wizardMode custom-field-service=dependents.customFieldService employee-service=dependents.employeeService custom-field-configuration=dependents.customFieldConfiguration permissions=dependents.customFieldsPermission></custom-fields-panel><div class=form-div ng-if=dependents.attachmentPermission.read><pim-attachment pimscreen="\'dependents\'" permissions=dependents.attachmentPermission></pim-attachment></div>'),e.put("app/pim/directDeposit/direct-deposit.html",'<div id=directDepositDiv class=no-title><crud-panel panelinfo=vm.panelInfo.directDepositInfo objs=vm.directDeposit listdata=vm.listData.directDeposit extracontroller=vm></crud-panel><div class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Direct Deposit\' | translate}}" data-position=left ng-show="vm.permissions.salary_history_details.create && vm.loaded"><a class="btn-floating btn-large waves-effect waves-light" ng-click=vm.addDirectDeposit()><i class=material-icons>add</i></a></div></div>'),e.put("app/pim/directDeposit/edit-direct-deposit-modal.html","<div class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title={{modal.modalProperties.title}} show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-md></generic-oxd-modal></div>"),e.put("app/pim/directives/attachments.html",'<div ng-if=!attachmentsCtrl.isOxd class="row valign-wrapper col s12 form-section-heading"><span class="valign title col s8">{{attachmentsCtrl.panelInfo.title| translate}}</span> <span style=padding-right:0px class="valign count col s3 offset-s2" ng-if="attachmentsCtrl.objs.length == 0">{{\'0 records found\'| translate}}</span> <span style=padding-right:0px class="valign count col s3 offset-s2" ng-if="attachmentsCtrl.objs.length > 0">{{attachmentsCtrl.objs.length +\' \'}}{{\'record(s)\' | translate}}</span><div class=right-align ng-if="attachmentsCtrl.permissions.create && attachmentsCtrl.loaded"><a class="waves-effect waves-teal btn primary-btn" ng-click=attachmentsCtrl.addAttachments()>{{\'Add\' | translate}}</a></div></div><div ng-class="{\'fixed\': attachmentsCtrl.isOxd, \'row col s12 list-container\': !attachmentsCtrl.isOxd}" class=attachment-list><list objs=attachmentsCtrl.objs listdata=attachmentsCtrl.listData extracontroller=attachmentsCtrl></list></div>'),e.put("app/pim/document/document_modal.html",'<div class=modal tabindex=-1 role=dialog><div id=documentDownloadModal class="modal-dialog modal-xm" role=document><div class="modal-content table-content"><div class=modal-header><h5 class=modal-title>{{\'Create Document\' | translate}}</h5><button type=button class="btn btn-close" aria-label="{{\'Close\' | translate}}" data-dismiss=modal>&times</button></div><div class=footer-container ng-if=modal.missingTokensModalActive><div class=modal-footer ng-class="{\'modal-confirmation-message\': modal.missingTokensModalActive}"><small class="mr-auto modal-confirmation-msg-span" ng-if=modal.missingTokenConfirmationMessage><span class="material-icons modal-confirmation-alert-icon">ohrm_delete_alert_warning</span> <span class=modal-confirmation-msg>{{modal.missingTokenConfirmationMessage}}</span></small> <button type=button class="btn btn-ghost" ng-click=modal.cancelMissingTokenConfirmation()>{{\'Cancel\' | translate}}</button> <button type=button class="btn btn-secondary" id=modal-save-button ng-click=modal.confirmDocDownload()>{{\'Confirm\' | translate}}</button></div></div><div class="list-container-document-modal modal-body"><list id=list ng-if=modal.isDocumentExportModal template=oxd-list.html objs=modal.templates listdata=modal.listDefinition extracontroller=modal></list></div><div class=modal-footer ng-class="{\'justify-content-end\': !modal.schema[\'required\'].length}"><small class=mr-auto ng-if="modal.schema[\'required\'].length">* {{"Required" | translate}}</small> <button type=button class="btn btn-ghost modal-close" ng-click=modal.cancel() data-dismiss=modal>{{\'Close\' | translate}}</button></div></div></div></div>'),e.put("app/pim/documentTemplates/document_templates.html",'<div class=pim-container><div id=documentTemplatesDiv><crud-panel panelinfo=documentTemplates.panalInfo.info objs=documentTemplates.documentTemplates listdata=documentTemplates.listData.documentTemplates extracontroller=documentTemplates></crud-panel><div class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Document Template\' | translate}}" data-position=left ng-if=documentTemplates.permissions.create><a class="btn-floating btn-large waves-effect waves-light" ng-click=documentTemplates.addItem()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/pim/documentTemplates/document_templates_modal.html","<div class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title={{modal.title}} show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-lg></generic-oxd-modal></div>"),e.put("app/pim/emergencycontacts/emergency_contact.html",'<div id=socialMediaDiv><crud-panel panelinfo=emergencyContact.panelInfo.emergencyContactInfo objs=emergencyContact.emergencyContact listdata=emergencyContact.listData.emergencyContact extracontroller=emergencyContact></crud-panel><div ng-if="emergencyContact.permissions.create && emergencyContact.loaded" class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Emergency Contact\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=emergencyContact.addEmergencyContact()><i class=material-icons>add</i></a></div></div><custom-fields-panel ng-if="emergencyContact.customFieldsPermission.read && emergencyContact.customFieldConfiguration" screen=emergencyContact.customFieldScreen extracontroller=emergencyContact custom-field-service=emergencyContact.customFieldService employee-service=emergencyContact.employeeService custom-field-configuration=emergencyContact.customFieldConfiguration wizard-mode=emergencyContact.wizardMode permissions=emergencyContact.customFieldsPermission></custom-fields-panel><div class=form-div ng-if=emergencyContact.attachmentPermission.read><pim-attachment pimscreen="\'emergency\'" permissions=emergencyContact.attachmentPermission></pim-attachment></div>'),e.put("app/pim/emergencycontacts/emergency_contacts_modal.html","<div class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title={{modal.title}} show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-md></generic-oxd-modal></div>"),e.put("app/pim/employeeList/employee_list.html",'<div ng-cloak ng-if="vm.state.current.name === \'pim.employees\' && vm.permissions && vm.initialAccessWithNoPersistedFilters"><div class=pim-container><div class=form-div><h4>{{\'Search Employees By\' | translate}}</h4><form id=frmEmployeeSearch class="col s12"><employee-search form-element-prefix=emp_search_lst filters=vm.searchFilters cost-center-enabled=vm.costCenterEnabled></employee-search><div class="form-group schema-form-submit schema-form-section col s12 right-align"><a href ng-click=vm.filterEmployeesByListForm(vm.searchFilters) class="waves-effect waves-green btn primary-btn">{{\'Search\' | translate}}</a></div></form></div></div></div><div ng-cloak ng-show="vm.state.current.name === \'pim.employees\' && vm.permissions && !vm.initialAccessWithNoPersistedFilters"><div class=pim-container><div><div class="row col s12 list-container"><table class="list-with-image highlight bordered" id=employeeListTable><thead><tr><th></th><th data-field=employeeId ng-click="vm.sortBy(\'employeeId\')" class="sortable row-employee-id">{{\'Employee Id\' | translate}}<i class=material-icons>{{vm.getSortIcon(\'employeeId\')}}</i></th><th data-field=name ng-click="vm.sortBy(\'lastName\')" class="sortable row-name">{{\'Name\' | translate}}<i class=material-icons>{{vm.getSortIcon(\'lastName\')}}</i></th><th data-field=title ng-click="vm.sortBy(\'jobTitle\')" class="hide-on-small-and-down sortable row-title">{{\'Job Title\' | translate}}<i class=material-icons>{{vm.getSortIcon(\'jobTitle\')}}</i></th><th data-field=status ng-click="vm.sortBy(\'employeeStatus\')" class="hide-on-small-and-down hide-on-med-and-down sortable row-status">{{\'Employment Status\' | translate}}<i class=material-icons>{{vm.getSortIcon(\'employeeStatus\')}}</i></th><th data-field=sub_unit ng-click="vm.sortBy(\'subDivision\')" class="hide-on-small-and-down hide-on-med-and-down sortable row-sub-unit">{{\'Sub Unit\' | translate}}<i class=material-icons>{{vm.getSortIcon(\'subDivision\')}}</i></th><th data-field=cost_centre ng-if=vm.costCenterEnabled ng-click="vm.sortBy(\'costCentre\')" class="hide-on-small-and-down hide-on-med-and-down sortable row-sub-unit">{{\'Cost Center\' | translate}}<i class=material-icons>{{vm.getSortIcon(\'costCentre\')}}</i></th><th data-field=location ng-click="vm.sortBy(\'empLocation\')" class="hide-on-small-and-down hide-on-med-and-down sortable row-location">{{\'Location\' | translate}}<i class=material-icons>{{vm.getSortIcon(\'empLocation\')}}</i></th><th data-field=supervisor ng-click="vm.sortBy(\'supervisor\')" class="hide-on-small-and-down hide-on-med-and-down sortable row-supervisor">{{\'Supervisor\' | translate}}<i class=material-icons>{{vm.getSortIcon(\'supervisor\')}}</i></th></tr></thead><tbody><tr ng-repeat="employee in vm.employees track by employee.empNumber" ng-class="{selected: employee.selected, \'lighten-5\': employee.selected}"><td ng-click=vm.viewProfileIfHasAccessablePimTabs(employee) ng-class="{ \'cursor-pointer\': employee.hasAccessiblePimTabs}"><img class="circle list-photo" ng-if=employee.photo ng-src=data:{{employee.photo.type}};base64,{{employee.photo.image}}> <img class="circle list-photo" ng-if=!employee.photo ng-src=images/default-photo.png></td><td ng-click=vm.viewProfileIfHasAccessablePimTabs(employee) class=nowrap ng-class="{\'cursor-pointer\': employee.hasAccessiblePimTabs}">{{employee.employeeId}}</td><td ng-click=vm.viewProfileIfHasAccessablePimTabs(employee) ng-class="{ \'cursor-pointer\': employee.hasAccessiblePimTabs}">{{employee.firstName}} {{employee.middleName}} {{employee.lastName}} <span ng-if=employee.termination_id>({{\'Past Employee\' | translate}})</span></td><td class=hide-on-small-and-down>{{employee.jobTitle.jobTitleName}} <span ng-if="employee.jobTitle.isDeleted === \'1\'">({{\'Deleted\' | translate}})</span></td><td class="hide-on-small-and-down hide-on-med-and-down">{{employee.employeeStatus.name}}</td><td ng-if=employee.subDivision.name class="hide-on-small-and-down hide-on-med-and-down tooltipped" data-position=bottom data-tooltip={{employee.fullSubUnitHierarchy.path}}>{{employee.subDivision.name}}</td><td ng-if=!employee.subDivision.name class="hide-on-small-and-down hide-on-med-and-down">{{employee.subDivision.name}}</td><td ng-if=vm.costCenterEnabled class="hide-on-small-and-down hide-on-med-and-down">{{employee.costCentre.name}}</td><td class="hide-on-small-and-down hide-on-med-and-down">{{employee.locations[0].name}}</td><td style=max-width:150px class="hide-on-small-and-down hide-on-med-and-down truncate" title={{vm.getSupervisorList(employee.supervisors)}}>{{vm.getSupervisorList(employee.supervisors)}}</td></tr></tbody></table><ohrm-pagination count={{vm.total}} page={{vm.page}} page-size={{vm.pageSize}} change-page-size=vm.changePageSize change-page=vm.viewPage></ohrm-pagination><div class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Employee\' | translate}}" data-position=left ng-show="vm.locationsLoaded && vm.permissions.create && !vm.add_employee_trigger" style="z-index: 986"><a id=addEmployeeButton class="btn-floating btn-large waves-effect waves-light" ohrm-click-and-wait=vm.addEmployee()><i class=material-icons>add</i></a></div></div></div></div></div><div ui-view autoscroll=true></div>'),e.put("app/pim/employeeList/employee_list_navbar.html",'<ul ng-if="navbar.searchAllowed && !navbar.initialAccessWithNoPersistedFilters" style="display: flex"><li><angucomplete-alt-with-employee-id id=employee_name_quick_filter_employee_list placeholder="{{\'Employee Name\' | translate}}" text-searching="{{\'Searching...\' | translate}}" text-no-results="{{\'No results found\' | translate}}" pause=100 selected-object=navbar.employeeSelected remote-api-handler=navbar.fetchMatchingEmployees search-fields=firstName,middleName,lastName title-field=firstName,middleName,lastName description-field=employeeId auto-match=true focus-first=true minlength=0 input-class="topnav-autocomplete contains-emp-id tempClass" match-class=match></angucomplete-alt-with-employee-id></li><li ng-if=navbar.searchAllowed class="tooltipped center-align" data-tooltip="{{\'Quick Search\' | translate}}" data-position=bottom><a class="employee-navbar-button action-icon" href ng-click=navbar.search()><i id=quick_search_icon class=material-icons>ohrm_search</i></a></li><li ng-if=navbar.searchAllowed class="tooltipped center-align" data-tooltip="{{\'Filter\' | translate}}" data-position=bottom><a class="employee-navbar-button action-icon" href ng-click=navbar.filter()><i class=material-icons>oxd_filter</i></a></li></ul>'),e.put("app/pim/employeeList/employee_search.html",'<div id=employee_list_search_modal class="modal modal-fixed-footer" style="width:50%; height: 75%; max-height: 75%"><h4>{{\'Filter Employees By\' | translate}}</h4><div class=modal-content><div><form id=frmEmployeeSearch class="col s12"><employee-search form-element-prefix=emp_search_mdl filters=modal.filters cost-center-enabled=modal.costCenterEnabled></employee-search></form></div></div><div class=modal-footer><a href ng-click=modal.search() class="modal-action modal-close waves-effect btn primary-btn">{{\'Search\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect btn">{{\'Cancel\' | translate}}</a> <a href ng-click=modal.reset() class="modal-action modal-close waves-effect btn">{{\'Reset\' | translate}}</a></div></div>'),e.put("app/pim/employeeList/new_employee_modal.html",'<div class=modal tabindex=-1 role=dialog><generic-oxd-modal hide-empty-form-elements modal-title="{{\'Add Employee\'| translate}}" show-close-button=true show-reset-button=false form-schema=modal.formSchema form=modal.form model=modal.formModel save-button-label="{{modal.formFinalAction| translate}}" cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-lg></generic-oxd-modal></div>'),e.put("app/pim/employeeProfile/employee_profile.html",'<div ng-if=true class="oxd-dashboard container not-a-card" id=employee_profile_tab ng-init=vm.removeParentClass() style="background: transparent"><div class=dashboard-container><dashboard-layout widgets=vm.widgets type=vm.type></dashboard-layout></div></div>'),e.put("app/pim/employeeWizardConfiguration/configure_employee_wizard.html",'<div class=pim-container><div class=form-div ng-if=employeeWizardConfiguration.permissions.read><h4>{{\'Configure Add Employee Wizard\' | translate}}</h4><form name=employeeWizardFieldConfigurationForm sf-schema=employeeWizardConfiguration.schema class=not-padded sf-form=employeeWizardConfiguration.form sf-model=employeeWizardConfiguration.model></form><form class=not-padded><div class=right-align><a href ng-show=employeeWizardConfiguration.permissions.update ng-click=employeeWizardConfiguration.changeWizardStatus(employeeWizardConfiguration) class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a></div></form></div><div class=form-div id=wizard-fields-div><h4>{{ \'PIM Field Configuration\' | translate }}</h4><form class=not-padded><ul class=collapsible data-collapsible=accordion><li ng-repeat="employeeWizardFieldConfig in employeeWizardConfiguration.employeeWizardFieldConfigurationList"><div class="collapsible-header ohrm-plain-card" ng-click=employeeWizardConfiguration.collapsibleClicked(employeeWizardFieldConfig.id)><p class=para-inside-collapsible-body><input type=checkbox ng-checked=employeeWizardFieldConfig.show_in_wizard class=filled-in id={{::employeeWizardFieldConfig.topic}} ng-click=employeeWizardConfiguration.checkSectionChange(employeeWizardFieldConfig.id)> <label for={{::employeeWizardFieldConfig.topic}} translate={{::employeeWizardFieldConfig.topic}}></label> <span><i class="material-icons data-group-drop-down-icon tooltipped" data-tooltip="{{employeeWizardConfiguration.modulesIconsForExpanding[employeeWizardFieldConfig.id]==\'arrow_drop_up\'?\'Collapse\':\'Expand\'| translate}}" data-position=left>{{employeeWizardConfiguration.modulesIconsForExpanding[employeeWizardFieldConfig.id]}}</i></span></p></div><div class="collapsible-body collapsible-body-container"><table class="collapsible-body-table highlight bordered" ng-if=employeeWizardConfiguration.permissions.read><tr class=collapsible-body-table-row ng-repeat="employeeWizardField in employeeWizardFieldConfig.WizardField" ng-if=employeeWizardField.enabled><td class=collapsible-body-table-data-lable><label translate={{employeeWizardField.label}}></label></td><td class=collapsible-body-table-data-table-data><div class=read-checkbox-div><input type=checkbox class="filled-in col l2 dataGroupCheckBox read-checkbox" id="{{\'isMandatory_\'+employeeWizardField.id}}" ng-disabled="employeeWizardField.read_only || !employeeWizardConfiguration.permissions.update" ng-model=employeeWizardField.mandatory_in_wizard ng-change=employeeWizardConfiguration.isMandatoryChanged(employeeWizardField)> <label for="{{\'isMandatory_\'+employeeWizardField.id}}" class="col l2">{{\'Is Required\' | translate}}</label></div></td><td ng-disabled=!employeeWizardConfiguration.permissions.update class=collapsible-body-table-data-table-data><div class=read-checkbox-div><input type=checkbox class="filled-in col l2 dataGroupCheckBox read-checkbox" ng-disabled="(employeeWizardField.read_only || employeeWizardField.mandatory_in_wizard) || !employeeWizardConfiguration.permissions.update" ng-model=employeeWizardField.show_in_wizard id="{{\'isVisible_\'+employeeWizardField.id}}"> <label for="{{\'isVisible_\'+employeeWizardField.id}}" class="col l2">{{ \'Available\' | translate}}</label></div></td></tr></table></div></li></ul><div class=right-align ng-show=employeeWizardConfiguration.permissions.update><a href ng-click=employeeWizardConfiguration.save(employeeWizardConfiguration.employeeWizardFieldConfigurationList) class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a></div></form></div></div>'),
e.put("app/pim/immigrations/employee_immigrations.html",'<div id=immigrationDiv><crud-panel panelinfo=immigrations.panelInfo.immigrationsInfo objs=immigrations.immigrations listdata=immigrations.listData.immigrations extracontroller=immigrations></crud-panel><div ng-if="immigrations.permissions.create && immigrations.loaded" class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Immigration\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=immigrations.addImmigrations()><i class=material-icons>add</i></a></div></div><custom-fields-panel ng-if="immigrations.customFieldsPermission.read && immigrations.customFieldConfiguration" screen=immigrations.customFieldScreen extracontroller=immigrations permissions=immigrations.customFieldsPermission custom-field-service=immigrations.customFieldService employee-service=immigrations.employeeService custom-field-configuration=immigrations.customFieldConfiguration wizard-mode=immigrations.wizardMode></custom-fields-panel><div class=form-div ng-if=immigrations.attachmentPermission.read><pim-attachment pimscreen="\'immigration\'" permissions=immigrations.attachmentPermission></pim-attachment></div>'),e.put("app/pim/immigrations/immigration_modal.html","<div class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title={{modal.title}} show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-md></generic-oxd-modal></div>"),e.put("app/pim/job/adjust-leave-entitlement-modal.html",'<div class=modal tabindex=-1 role=dialog><div class="modal-dialog modal-md" role=document><div class=modal-content><div class=modal-header><h5 class=modal-title>{{\'Adjust Leave Entitlements\' | translate}}</h5><button type=button class="btn btn-close" aria-label="{{\'Close\' | translate}}" data-dismiss=modal>&times</button></div><div class=modal-body><div class=oxd-circle-loader-container ng-if=!modal.hideLoader><div class=oxd-circle-loader>{{\'Loading\' | translate}}</div></div><form name=leaveEntitlementAdjustForm><div><table id=adjustLeaveEntitlement><thead ng-if=modal.hideLoader><tr class=list-card-title><th translate="Leave Type" width=25%></th><th translate=Unit width=10%></th><th translate=Entitlement class=numeric width=10%></th><th translate="Adjust To" width=10% class=adjust-to-th></th><th ng-show="(leaveEntitlementAdjustForm[entitlement.leaveTypeName].$error.pattern) || (leaveEntitlementAdjustForm[entitlement.leaveTypeName].$error.entitlementAdjustmentMax) || (leaveEntitlementAdjustForm[entitlement.leaveTypeName].$error.entitlementAdjustmentMin)" width=55%></th></tr></thead><tbody><tr id=adjustLeaveEntitlementClickableRow class=adjust-leave-entitlement-list-card ng-repeat="entitlement in modal.entitlements track by entitlement.leaveTypeId"><td ng-bind=entitlement.leaveTypeName></td><td>{{modal.getDurationUnit(entitlement)}}</td><td class=numeric ng-bind=entitlement.entitlement></td><td class=adjust-leave-entitlement-input-td><input ng-if=entitlement.hourBased class="form-control adjust-leave-entitlement-input" type=text name={{entitlement.leaveTypeName}} ng-model=entitlement.adjustTo ng-pattern=modal.hourRegExp ng-readonly=modal.readonly entitlement-adjustment-validate current-entitlement=entitlement> <input ng-if=!entitlement.hourBased class="form-control adjust-leave-entitlement-input" type=text name={{entitlement.leaveTypeName}} ng-model=entitlement.adjustTo ng-pattern=modal.dayRegExp ng-readonly=modal.readonly entitlement-adjustment-validate current-entitlement=entitlement></td><td ng-show="(leaveEntitlementAdjustForm[entitlement.leaveTypeName].$error.pattern) || (leaveEntitlementAdjustForm[entitlement.leaveTypeName].$error.entitlementAdjustmentMax) || (leaveEntitlementAdjustForm[entitlement.leaveTypeName].$error.entitlementAdjustmentMin)"><span class=adjust-invalid-feedback ng-show=leaveEntitlementAdjustForm[entitlement.leaveTypeName].$error.pattern>{{modal.getValidationMessageForPattern(entitlement)}}</span> <span class=adjust-invalid-feedback ng-show="!leaveEntitlementAdjustForm[entitlement.leaveTypeName].$error.pattern && leaveEntitlementAdjustForm[entitlement.leaveTypeName].$error.entitlementAdjustmentMax" translate="Adjusted entitlement cannot be greater than the current entitlement"></span> <span class=adjust-invalid-feedback ng-show="!leaveEntitlementAdjustForm[entitlement.leaveTypeName].$error.pattern && leaveEntitlementAdjustForm[entitlement.leaveTypeName].$error.entitlementAdjustmentMin" translate="Adjusted entitlement cannot be less than the used value"></span></td></tr></tbody></table></div></form></div><div class=modal-footer ng-class="{\'justify-content-end\': !modal.schema[\'required\'].length}"><button type=button class="btn btn-ghost" ng-click=modal.cancel() data-dismiss=modal>{{\'Cancel\' | translate}}</button> <button type=button class="btn btn-secondary" ng-hide=modal.readonly id=modal-save-button ohrm-save-form=modal.save(leaveEntitlementAdjustForm);>{{\'Save\' | translate}}</button></div></div></div></div>'),e.put("app/pim/job/detailed-history.html",'<div class="fixed job-history-list"><list objs=vm.history listdata=vm.listDefinition extracontroller=vm></list></div>'),e.put("app/pim/job/employment-activation-modal.html",'<div id=activation-employment-modal class="modal change-employment-modal" tabindex=-1 role=dialog><generic-oxd-modal modal-title="Activate Employment" show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Confirm cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-sm></generic-oxd-modal></div>'),e.put("app/pim/job/employment-termination-modal.html",'<div id=terminate-employment-modal class="modal change-employment-modal" tabindex=-1 role=dialog><generic-oxd-modal hide-empty-form-elements modal-title="Terminate Employment" show-close-button=true show-reset-button=false show-save-button="!modal.terminated && !modal.self" form-schema=modal.schema form=modal.form model=modal.model save-button-label=Confirm cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-sm></generic-oxd-modal></div>'),e.put("app/pim/job/job-confirmation-modal.html",'<div class=modal tabindex=-1 role=dialog><div id=job-confirm-changes-modal class="modal-dialog modal-md confirm-changes-modal" role=document><div class=modal-content><div class=modal-header><h5 class=modal-title><span>{{modal.title | translate}}</span> - <span>{{\'Confirm Changes\' | translate}}</span></h5><button type=button class="btn btn-close" aria-label="{{\'Close\' | translate}}" data-dismiss=modal>&times</button></div><div class=modal-body><oxd-loader ng-show="!(modal.loaded && modal.schema)"></oxd-loader><div class="body-container form-row" ng-show="modal.loaded && modal.schema"><form name=modal.jobConfirmationForm id=confirmChangesForm class="col-12 needs-validation" novalidate><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.jobModel extracontroller=modal sf-use-decorator=oxdDecorator></div><div class="changes-header with-bottom-border form-row"><div class="changed-field-name form-group col-3" translate=Field></div><div class="old-value form-group col-4" translate="Changed From"></div><div class="change-icon col-1"></div><div class="new-value form-group col-4" translate="Changed To"></div></div><div class=changes-form novalidate sf-schema=modal.changesFormSchema sf-form=modal.changesForm sf-model=modal.jobModel extracontroller=modal sf-use-decorator=oxdDecorator hide-empty-form-elements></div><custom-fields-panel ng-if=modal.permissions.read screen=modal.customFieldScreenForStandardSection permissions=modal.permissions extracontroller=modal wizard-mode=false custom-field-service=modal.customFieldService employee-service=modal.employeeService custom-field-configuration=true is-standard-section=true custom-field-model=modal.customFieldModel custom-field-standard-section=modal.customFieldStandardSection valid-custom-field-form=modal.validCustomFieldForm custom-field-standard-section-defined=modal.customFieldStandardSectionDefined effective-date={{modal.effectiveDate}} is-confirmation-modal=true changed-fields-only=modal.jobModel.changedFieldsOnly></custom-fields-panel><oxd-alert-section ng-if=modal.alertMessage message=modal.alertMessage icon="\'ohrm_delete_alert_warning\'" type="\'warning\'"></oxd-alert-section></form></div></div><div class=footer-container ng-show="modal.loaded && modal.schema"><div class=modal-footer ng-class="{\'modal-confirmation-message\': modal.confirmationMessage}"><small class=mr-auto ng-if="modal.schema[\'required\'].length && !modal.confirmationMessage">* {{"Required" | translate}}</small> <small class="mr-auto modal-confirmation-msg-span" ng-if=modal.confirmationMessage><span class="material-icons modal-confirmation-alert-icon">ohrm_delete_alert_warning</span> <span class=modal-confirmation-msg>{{modal.confirmationMessage | translate}}</span></small> <button type=button class="btn btn-ghost" ng-click=modal.cancel() data-dismiss=modal>{{\'Cancel\' | translate}}</button> <button type=button ng-if=modal.canSave class="btn btn-secondary" id=modal-save-button ohrm-save-form=modal.save();>{{\'Confirm\' | translate}}</button></div></div></div></div></div>'),e.put("app/pim/job/job.html",'<div id=employement_details_tab class="pim-container oxd-form-container"><oxd-tabs ng-if=!job.wizardMode class=job-tabs data=job.tabs current-tab-key=job.currentTabKey on-click=job.tabClicked></oxd-tabs><hr ng-if=!job.wizardMode class=oxd-tabs-separator><h4 ng-if="job.wizardMode && (job.customFieldStandardSection || job.showJobSection)">{{\'Employment Details\' | translate}}</h4><oxd-loader ng-if=job.loading></oxd-loader><div class="pim-job-top-panel pim-tab-top-panel not-a-card form-group form-row" ng-if="!job.wizardMode && job.permissions.job.read" ng-show="job.currentTabKey == \'main\' && !job.loading" ng-class="{\'snapshot\' : job.snapshotAsOf}"><div class="col-xl-8 summary-cards-container"><div class="summary-card col-12"><div class="summary-card-column summary-card-left"><div class=employee-info-text ng-bind="job.getNameFromMap(job.formData.jobTitles.titleMap, job.model.job_title_id, \'No Job Title\')"></div><div><span class=employment-period-text ng-bind=job.getEmploymentPeriod()></span> <span class><a href ng-if=job.employee.termination_id class=termination-text ng-click=job.showTerminateEmploymentModal()>[{{\'Terminated on\' | translate}}: {{job.employee.EmployeeTerminationRecord.date | ohrmDateFilter}}]</a> <a href ng-if="!job.employee.termination_id && job.employeeTerminationRecord.id" class=termination-text ng-click=job.showTerminateEmploymentModal()>[{{\'Will Terminate on\' | translate}}: {{job.employeeTerminationRecord.date | ohrmDateFilter}}]</a> <a href class="termination-text warning-text" ng-if="job.employeeTerminationRecord.id && job.employeeTerminationRecord.reactivationDate && job.employeeTerminationRecord.reactivation_failed != \'1\'" ng-click=job.showActivateEmploymentModal()>[{{\'Will Activate on\' | translate}}: {{job.employeeTerminationRecord.reactivationDate | ohrmDateFilter}}]</a> <a href class="termination-text negative-text" ng-if="job.employeeTerminationRecord.id && job.employeeTerminationRecord.reactivationDate && job.employeeTerminationRecord.reactivation_failed == \'1\'" ng-click=job.showActivateEmploymentModal()>[{{\'Activation Failed. Maximum Employee Limit Reached.\' | translate}}]</a></span> <a href ng-if="(job.employeeTerminationRecord.id && job.employeePermissions.activate && !job.self) && !job.employeeTerminationRecord.reactivationDate" ng-click=job.showActivateEmploymentModal() class=activate-employment-button><span class="material-icons change-employment-icon">ohrm_active_employee</span> <span translate="Activate Employment"></span></a></div></div><div class="summary-card-column summary-card-right"><div class=employee-info-text ng-bind="job.getNameFromMap(job.formData.locations.titleMap, job.model.location_id, \'No Location\')"></div><div class=employee-info-text ng-bind="job.getNameFromMap(job.formData.subunits.titleMap, job.model.subunit_id, \'No Sub Unit\')"></div></div></div></div><div class="col-xl-4 top-panel-buttons-container"><button type=button class="btn btn-list square-btn" id=adjustLeaveEntitlementButton ng-if="job.hasEntitlements && (job.employee.termination_id || job.employeeTerminationRecord.id) && !job.self && job.dataGroupPermissions.leave_entitlements.update" ng-click=job.showAdjustEntitlementModal()><i class=material-icons>ohrm_oxd_adjust</i> <span translate="Adjust Leave Entitlements"></span></button><pim-document-manager-button ng-if=job.permissions.documents.read datagroup-name=employee_job_documents employee-number=job.employeeNumber employee-service=job.employeeService></pim-document-manager-button><button type=button class="btn btn-list square-btn" ng-class="{\'active\' : job.snapshotAsOf}" id=snapshotButton ng-click=job.openSwitchToSnapshotPopover($event)><i class=material-icons>ohrm_snapshot</i> <span translate=Snapshot></span></button></div></div><div ng-show="job.snapshotAsOf && job.currentTabKey == \'main\' && !job.loading" id=exitSnapshotViewButtonContainer class=not-a-card><button type=button class="btn btn-secondary top-sticky-button" id=exitSnapshotViewButton data-icon=ohrm_back_arrow_oxd data-title={{job.getLocalizedExitSnapshotViewTooltip()}} oxd-tooltip data-placement=bottom aria-label={{job.getLocalizedExitSnapshotViewTooltip()}} ng-click=job.exitSnapshotView() ng-bind=job.snapshotAsOfLocalized></button></div><form ng-if="job.permissions.job.read && job.showJobSection" ng-show="job.currentTabKey == \'main\' && !job.loading" name=job.employmentDetailsForm class=with-standard-section-attached hide-empty-form-elements ng-submit="job.onSubmitEmploymentDetails(job.employmentDetailsForm, false)"><div sf-schema=job.employmentFormSchema sf-form=job.employmentForm sf-model=job.model ng-class="{\'custom-fields-attached\':job.customFieldStandardSectionDefined}" sf-use-decorator=oxdDecorator></div></form><custom-fields-panel ng-if="job.permissions.job.read && job.customFieldConfiguration" ng-show="job.currentTabKey == \'main\' && !job.loading" screen=job.customFieldScreenForStandardSection permissions=job.permissions.job extracontroller=job wizard-mode=job.wizardMode custom-field-service=job.customFieldService employee-service=job.employeeService custom-field-configuration=job.customFieldConfiguration is-standard-section=job.isStandardSection custom-field-model=job.customFieldModel custom-field-standard-section=job.customFieldStandardSection valid-custom-field-form=job.validCustomFieldForm effective-date={{job.effectiveDateForCustomFields}} custom-field-standard-section-defined=job.customFieldStandardSectionDefined></custom-fields-panel><div ng-if="job.permissions.job.update && !job.wizardMode" ng-show="job.currentTabKey == \'main\' && !job.loading" id=actionBtnRow class="row not-a-card form-inline"><a href ng-if="!job.employee.termination_id && job.employeePermissions.terminate && !job.employeeTerminationRecord.id && !job.self && !job.wizardMode" ohrm-click-and-wait=job.showTerminateEmploymentModal() class=terminate-employment-button><span class="material-icons change-employment-icon">ohrm_terminate_employee</span> <span translate="Terminate Employment"></span></a> <a href ng-click="job.onSubmitEmploymentDetails(job.employmentDetailsForm, false);" ng-class="{disabled: job.employmentDetailsForm.$invalid}" class="btn btn-secondary" translate=Save></a></div><div ng-if=job.permissions.attachments.read ng-show="job.currentTabKey == \'attachments\' && !job.loading" class=not-a-card><pim-attachment pimscreen="\'job\'" permissions=job.permissions.attachments></pim-attachment></div><div ng-show="job.currentTabKey == \'history\' && !job.loading" id=employment_history_tab class=not-a-card><pim-job-detailed-history ng-if=job.showDetailedHistorySection employee=job.employee history=job.detailedHistory custom-fields=job.customFields permissions=job.permissionsForHistory edit-action=job.showJobConfirmationModal audit-logs=job.auditLogs un-selectable-ids=job.unSelectableIds></pim-job-detailed-history></div></div><custom-fields-panel ng-if="job.permissions.customFields.read && job.customFieldConfiguration" ng-show="job.currentTabKey == \'main\' && !job.snapshotAsOf && !job.loading" screen=job.customFieldScreen permissions=job.permissions.customFields wizard-mode=job.wizardMode custom-field-service=job.customFieldService employee-service=job.employeeService custom-field-configuration=job.customFieldConfiguration extracontroller=job></custom-fields-panel>'),e.put("app/pim/memberships/membership_modal.html","<div class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title={{modal.title}} show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-md></generic-oxd-modal></div>"),e.put("app/pim/memberships/memberships.html",'<div id=socialMediaDiv><crud-panel panelinfo=memberships.panelInfo.membershipInfo objs=memberships.membership listdata=memberships.listData.membership extracontroller=memberships></crud-panel><div class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Membership\' | translate}}" data-position=left ng-show="memberships.permissions.create && memberships.loaded"><a class="btn-floating btn-large waves-effect waves-light" ng-click=memberships.addMembership()><i class=material-icons>add</i></a></div></div><custom-fields-panel ng-if="memberships.customFieldsPermission.read && memberships.customFieldConfiguration" screen=memberships.customFieldScreen extracontroller=memberships custom-field-service=memberships.customFieldService employee-service=memberships.employeeService custom-field-configuration=memberships.customFieldConfiguration wizard-mode=memberships.wizardMode permissions=memberships.customFieldsPermission></custom-fields-panel><div class=form-div ng-if=memberships.attachmentPermission.read><pim-attachment pimscreen="\'membership\'" permissions=memberships.attachmentPermission></pim-attachment></div>'),e.put("app/pim/myShortcuts/configure_my_shortcuts.html","<div class=pim-container><div id=configMyShortcutDiv><crud-panel panelinfo=configShortcutsCtrl.panelInfo.myShortcutsInfo objs=configShortcutsCtrl.myShortcuts listdata=configShortcutsCtrl.listData.myShortcuts extracontroller=configShortcutsCtrl></crud-panel></div></div>"),e.put("app/pim/optionalFields/optional_fields.html","<div class=pim-container><div class=form-div ng-if=optionalFields.permissions.read><form class=not-padded name=optionalFieldsForm sf-schema=optionalFields.schema sf-form=optionalFields.form sf-model=optionalFields.model ng-submit=optionalFields.onSubmit(optionalFieldsForm)></form></div></div>"),e.put("app/pim/personaldetails/personal_details.html","<div ng-if=personal.permissions.personal_information.read id=personal_details_tab class=form-div><h4>{{'Personal Details' | translate}}</h4><form id=pimPersonalDetailsForm name=personal.personalDetailsForm sf-model=personal.formModel sf-schema=personal.formSchema sf-form=personal.form ng-submit=personal.onSubmit(personal.personalDetailsForm)></form></div><custom-fields-panel ng-if=\"personal.permissions.personal_custom_fields.read && personal.customFieldConfiguration\" screen=personal.customFieldScreen custom-field-service=personal.customFieldService employee-service=personal.employeeService custom-field-configuration=personal.customFieldConfiguration wizard-mode=personal.wizardMode permissions=personal.permissions.personal_custom_fields></custom-fields-panel><div class=form-div ng-if=personal.permissions.personal_attachment.read><pim-attachment pimscreen=\"'personal'\" permissions=personal.permissions.personal_attachment></pim-attachment></div>"),e.put("app/pim/pimTabs/pim_employee_profile_custom_top_ribbon.html",'<div class="employee-profile-custom-top-ribbon custom-ribbon-with-menu-and-more-menu more-menu-with-vertical-scrollbar"><div class=menu-items ng-class="{\'consume-leftover-space\': vm.showMoreMenu}"><top-level-menu-item ng-repeat="menu in vm.tabs track by menu.tabId" menu-title=menu.title icon=menu.img sref=menu.uiSref automation-id={{menu.automationId}} max-levels=1 visibility-state=vm.visibilityMap[menu.tabId] current-item-state=vm.currentItemMap[menu.tabId] track-by="\'tabId\'" menu-tooltip=menu.tooltip></top-level-menu-item></div><div class=more-menu ng-show=vm.showMoreMenu><top-level-menu-item ng-repeat="menu in vm.tabs track by menu.tabId" ng-if="vm.currentItemMap[menu.tabId] && !vm.visibilityMap[menu.tabId]" menu-title=menu.title icon=menu.img sref=menu.uiSref automation-id={{menu.automationId}} max-levels=1 track-by="\'tabId\'" menu-tooltip=menu.tooltip></top-level-menu-item><top-level-menu-item menu-title="\'More\'" children=vm.getHiddenMenuItems(vm.tabs) automation-id=menu_top_more expand-icon=more_vert nested-children-direction=left max-levels=2 track-by="\'tabId\'" menu-tooltip=menu.tooltip></top-level-menu-item></div></div>'),e.put("app/pim/pimTabs/pim_tab_navbar.html",'<div style="display: flex" class=pim-employee-profile-ribbon-actions><img ng-if=nav.selectedEmployeeNumber class=employee-profile-image ng-src=../index.php/pim/viewPhoto/empNumber/{{nav.selectedEmployeeNumber}}/size/small?{{nav.time}}><div class=employee-search-container ng-if=!nav.isEss><div class=pim-employee-switch><i class="search-icon material-icons">search</i><angucomplete-alt-oxd id=employee_name_quick_filter placeholder="{{\'Search\' | translate}}" text-searching="{{\'Searching...\' | translate}}" text-no-results="{{\'No results found\' | translate}}" pause=100 selected-object=nav.employeeSelected remote-api-handler=nav.fetchMatchingEmployees search-fields=firstName,middleName,lastName title-field=firstName,middleName,lastName,past_employee description-field=employeeId auto-match=true focus-first=true minlength=1 input-class=contains-emp-id match-class=match></angucomplete-alt-oxd></div></div></div>'),e.put("app/pim/qualifications/qualifications.html",'<div ng-show="qualifications.qualificationsAccessible && qualifications.workExperiencePermission.read" class=no-title><crud-panel panelinfo=qualifications.panelInfo.workExperienceInfo objs=qualifications.workExperience listdata=qualifications.listData.workExperience extracontroller=qualifications></crud-panel></div><div ng-show="qualifications.qualificationsAccessible && qualifications.educationPermission.read" class=no-title><crud-panel panelinfo=qualifications.panelInfo.educationInfo objs=qualifications.education listdata=qualifications.listData.education extracontroller=qualifications></crud-panel></div><div ng-show="qualifications.qualificationsAccessible && qualifications.skillsPermission.read" class=no-title><crud-panel panelinfo=qualifications.panelInfo.skillsInfo objs=qualifications.skills listdata=qualifications.listData.skills extracontroller=qualifications></crud-panel></div><div ng-show="qualifications.qualificationsAccessible && qualifications.languagesPermission.read" class=no-title><crud-panel panelinfo=qualifications.panelInfo.languagesinfo objs=qualifications.languages listdata=qualifications.listData.languages extracontroller=qualifications></crud-panel></div><div ng-show="qualifications.qualificationsAccessible && qualifications.licensesPermission.read" class=no-title><crud-panel panelinfo=qualifications.panelInfo.licenseInfo objs=qualifications.licenses listdata=qualifications.listData.licenses extracontroller=qualifications></crud-panel></div><div ng-show="qualifications.qualificationsAccessible && qualifications.certificatesPermission.read && qualifications.enableOnlineCourses" class=no-title><crud-panel panelinfo=qualifications.panelInfo.certificatesInfo objs=qualifications.certificates listdata=qualifications.listData.certificates extracontroller=qualifications></crud-panel></div><custom-fields-panel ng-if="qualifications.customFieldsPermission.read && qualifications.customFieldConfiguration" ng-show=qualifications.qualificationsAccessible screen=qualifications.customFieldScreen extracontroller=qualifications custom-field-service=qualifications.customFieldService employee-service=qualifications.employeeService custom-field-configuration=qualifications.customFieldConfiguration wizard-mode=qualifications.wizardMode permissions=qualifications.customFieldsPermission></custom-fields-panel><div ng-if=qualifications.attachmentPermission.read><pim-attachment pimscreen="\'qualifications\'" permissions=qualifications.attachmentPermission></pim-attachment></div><div class=not-a-card ng-if="qualifications.workExperiencePermission.create || qualifications.educationPermission.create || qualifications.skillsPermission.create || qualifications.languagesPermission.create || qualifications.licensesPermission.create" id=addButton><div class="qulifications-add-button fixed-action-btn floating-add-btn"><a class="btn-floating btn-large waves-effect waves-light dropdown-button" href data-activates=additem-options-dropdown-qualifications data-hover=false dropdown data-constrainwidth=false data-beloworigin=true><i class=material-icons><span data-position=left data-delay=50 data-tooltip="{{\'Add Qualifications\' | translate}}" class=tooltipped>add</span></i></a><ul id=additem-options-dropdown-qualifications class=dropdown-content style="width: 175px;left: -115px; opacity:1; display: block;"><li ng-if=qualifications.workExperiencePermission.create><a href ng-click=qualifications.addWorkExperience()>{{\'Work Experience\' | translate}}</a></li><li ng-if=qualifications.educationPermission.create><a href ng-click=qualifications.addEducation()>{{\'Education\' | translate}}</a></li><li ng-if=qualifications.skillsPermission.create><a href ng-click=qualifications.addSkill()>{{\'Skill\' | translate}}</a></li><li ng-if=qualifications.languagesPermission.create><a href ng-click=qualifications.addLanguage()>{{\'Language\' | translate}}</a></li><li ng-if=qualifications.licensesPermission.create><a href ng-click=qualifications.addLicense()>{{\'License\' | translate}}</a></li></ul></div></div>'),e.put("app/pim/qualifications/qualifications_modal.html","<div class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title={{modal.modalProperties.title}} show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-md></generic-oxd-modal></div>"),e.put("app/pim/reportTo/reportto.html",'<div ng-if=reportto.supervisorPermissions.read class=no-title><pim-supervisors permissions=reportto.supervisorPermissions self=reportto.self emp-number=reportto.tempEmpNo employee-service=reportto.employeeService wizard=false allowed-to-create-reporting-methods=reportto.allowedToCreateReportingMethods></pim-supervisors></div><div ng-if=reportto.subordinatePermissions.read class=no-title><pim-subordinates permissions=reportto.subordinatePermissions self=reportto.self emp-number=reportto.tempEmpNo employee-service=reportto.employeeService wizard=false allowed-to-create-reporting-methods=reportto.allowedToCreateReportingMethods></pim-subordinates></div><div class=not-a-card><div ng-if="(reportto.supervisorPermissions.create || reportto.subordinatePermissions.create)" class="fixed-action-btn floating-add-btn" style="top: 105px; right: 28px; height: 250px"><a class="btn-floating btn-large waves-effect waves-light"><i class=material-icons>add</i></a><ul class=reportToAddFloatingButton><li ng-if=reportto.supervisorPermissions.create><a class="btn-floating blue" ng-click=reportto.addSupervisor()><img data-position=left data-delay=50 data-tooltip="{{\'Add Supervisor\' | translate}}" class=tooltipped src=images/pim/supervisor_icon@3x.svg></a></li><li ng-if=reportto.subordinatePermissions.create><a class="btn-floating yellow darken-1" ng-click=reportto.addSubordinate()><img data-position=left data-delay=50 data-tooltip="{{\'Add Subordinate\' | translate}}" class=tooltipped src=images/pim/subordinate_ico@3x.svg></a></li></ul></div></div><custom-fields-panel ng-if="reportto.customFieldsPermission.read && reportto.customFieldConfiguration" screen=reportto.customFieldScreen custom-field-service=reportto.customFieldService employee-service=reportto.employeeService custom-field-configuration=reportto.customFieldConfiguration wizard-mode=reportto.wizardMode permissions=reportto.customFieldsPermission></custom-fields-panel><div ng-if=reportto.attachmentPermission.read><pim-attachment pimscreen="\'report-to\'" permissions=reportto.attachmentPermission></pim-attachment></div>'),e.put("app/pim/reportingMethods/reporting_methods.html",'<div class=pim-container><div id=reportingMethodsDiv><crud-panel panelinfo=reportingMethods.panalInfo.reprotingMethodsInfo objs=reportingMethods.reportingMethods listdata=reportingMethods.listData.reportingMethods extracontroller=reportingMethods initialsortfield="\'name\'"></crud-panel><div ng-if="reportingMethods.permissions.create && reportingMethods.loaded" class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Reporting Method\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=reportingMethods.addReportingMethods()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/pim/reportingMethods/reporting_methods_modal.html",'<div class="modal modal-short" tabindex=-1 role=dialog><generic-oxd-modal modal-title={{modal.title}} show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-sm></generic-oxd-modal></div>'),e.put("app/pim/salary/detailed-history.html",'<div class="fixed salary-history-list"><list objs=vm.history listdata=vm.listDefinition extracontroller=vm></list></div>'),e.put("app/pim/salary/salary-amount.html",'<div class="flex-group salary_amount-container"><input materializecss-input type=text ng-model=vm.component.value ng-pattern=vm.getPattern() class="form-control salary-amount-input" currency-value=vm.currency ng-change=vm.valueChanged() ng-disabled=!vm.permissions ng-model-options="{ allowInvalid: true}" name=component_{{vm.component.id}} ng-required=vm.permissions validate-min={{vm.getMinLimit()}} validate-max={{vm.getMaxLimit()}} ng-if="vm.component.value_type === \'1\' && !vm.component.isEditable"> <input materializecss-input type=text ng-model=vm.component.value ng-pattern=vm.getPattern() class="form-control salary-amount-input" currency-value=vm.currency ng-change=vm.valueChanged() ng-disabled=!vm.permissions ng-model-options="{ allowInvalid: true}" name=component_{{vm.component.id}} validate-max={{vm.getMaxLimit()}} ng-if="vm.component.value_type !== \'2\' && (vm.component.value_type !== \'1\' || vm.component.isEditable)"> <input materializecss-input type=text ng-model=vm.component.value ng-pattern=vm.getPattern() class="form-control salary-amount-input" ng-change=vm.valueChanged() ng-disabled=!vm.permissions name=component_{{vm.component.id}} ng-model-options="{ allowInvalid: true}" validate-max={{vm.getMaxLimit()}} ng-if="vm.component.value_type === \'2\'"> <span class=amount-hint ng-if="vm.component.value_type === \'2\' && vm.mode !== \'modal\'">%</span> <span class=amount-hint ng-if="vm.component.value_type === \'3\' && vm.permissions && vm.mode !== \'modal\'" translate="End with % for percentage. Eg: 5%"></span></div><span class="help-block salary_value-error" ng-messages="vm.form[\'component_\' + vm.component.id].$error" ng-show="vm.form[\'component_\' + vm.component.id].$dirty"><ng-message when=pattern translate=Invalid></ng-message><ng-message when=required translate=Required></ng-message><ng-message when=validateMin>{{vm.getMaxMinValidationString()}}</ng-message><ng-message when=validateMax>{{vm.getMaxMinValidationString()}}</ng-message></span>'),
e.put("app/pim/salary/salary-components-changes.html",'<div ng-repeat="component in vm.components" ng-if="vm.isComponentVisible(component, vm.type)" class="changed-row form-row"><div class="changed-field-name form-group col-3"><span ng-bind=component.name></span> <em ng-if="component.value_type === \'1\' && !component.isEditable">*</em> <span ng-if=component.isDeleted>({{vm.deletedSuffix | translate}})</span> <span class=amount-hint ng-if="component.value_type === \'3\'" translate="End with % for percentage. Eg: 5%"></span></div><div class="old-value form-group col-3"><span ng-bind=vm.getFormattedOldValue(component)></span> <span ng-if="component.value_type === \'2\'">%</span></div><div class="form-group change-icon"><i class=material-icons>ohrm_change</i></div><div class="new-value form-group col-4"><salary-amount component=component currency=vm.currency permissions=vm.isComponentEditable(component) min=vm.min max=vm.max form=vm.form mode="\'modal\'"></salary-amount></div><span ng-if="component.value_type === \'2\'" class=form-group>%</span><div class="percentage-value grid form-group col-1" ng-class="{\'positive-text\' : vm.isPositive(component.id), \'negative-text\' : vm.isNegative(component.id)}"><i class=material-icons ng-if=vm.isPositive(component.id)>ohrm_increase</i> <i class=material-icons ng-if=vm.isNegative(component.id)>ohrm_decrease</i> <span ng-if=vm.getDifference(component.id) ng-bind="vm.getDifference(component.id) + \'%\'"></span></div></div>'),e.put("app/pim/salary/salary-components-table.html",'<table class="bordered salary-components" ng-class="{\'snapshot\': vm.isSnapshot}"><thead><tr><th class=component translate="{{vm.type === \'1\' ? \'Earning\' : \'Deduction\'}}"></th><th class=amount>{{"Amount"|translate}} / {{"Percentage"|translate}}</th><th class=adjusted-amount>{{"Amount" | translate}} {{vm.currency ? "("+vm.currency.currency_id+")" : ""}}</th></tr></thead><tbody id=tableBody_{{vm.type}} class="collapse show"><tr ng-repeat="component in vm.components" ng-if="component.type === vm.type"><td class=component><span ng-bind=component.name></span> <em ng-if="component.value_type === \'1\' && !component.isEditable">*</em> <span ng-if=component.isDeleted>({{vm.deletedSuffix|translate}})</span></td><td class=amount><salary-amount component=component currency=vm.currency permissions=vm.isComponentEditable(component) min=vm.min max=vm.max form=vm.form mode="\'table\'"></salary-amount></td><td class=adjusted-amount><oxd-hint ng-if=vm.getNextValueHint(component) hint={{vm.getNextValueHint(component)}} icon=ohrm_future_date inline=true disable-html-escaping=true my-position="top right"></oxd-hint><span ng-bind=vm.getValueAsAmount(component.id)></span></td></tr></tbody><tfoot><tr><td colspan=3></td></tr><tr class=summary-row><td colspan=2><div class=flex-group><div class="toggle-container btn btn-list icon-holder"><span class="material-icons header-collapse-indicator mediumIcon actionIcon" data-toggle=collapse aria-expanded=true aria-controls=tableBody_{{vm.type}} data-target=#tableBody_{{vm.type}}></span></div><span>{{vm.totalLabel ? vm.totalLabel : "Total" | translate}}</span></div></td><td class=adjusted-amount ng-bind=vm.getTotalAmount()></td></tr></tfoot></table>'),e.put("app/pim/salary/salary.html",'<div id=pim_salary_details class=pim-container><oxd-tabs ng-if=!vm.wizardMode class=salaryTabs data=vm.tabs current-tab-key=vm.currentTabKey on-click=vm.tabClicked></oxd-tabs><hr ng-if=!vm.wizardMode class=oxd-tabs-separator><h4 ng-if=vm.wizardMode translate=Salary></h4><oxd-loader ng-if=vm.loading></oxd-loader><div class="pim-salary-top-panel pim-tab-top-panel not-a-card form-group form-row" ng-if="!vm.wizardMode && vm.permissions.salary.read" ng-show="vm.currentTabKey == \'main\' && !vm.loading" ng-class="{\'snapshot\' : vm.snapshotAsOf}"><div class="col-9 summary-cards-container"><div class="summary-card col-6"><div class="summary-card-column summary-card-left" translate="Cost to the Company"></div><div class="summary-card-column summary-card-right" ng-bind=vm.getFormattedSalaryValue(vm.calculatedSalaryValues.summary.costToCompany)></div></div><div class="summary-card col-6"><div class="summary-card-column summary-card-left" translate="Total Payable"></div><div class="summary-card-column summary-card-right" ng-bind=vm.getFormattedSalaryValue(vm.calculatedSalaryValues.summary.totalPayment)></div></div></div><div class="col-3 top-panel-buttons-container"><button type=button class="btn btn-list square-btn" ng-class="{\'active\' : vm.snapshotAsOf}" id=snapshotButton ng-click=vm.openSwitchToSnapshotPopover($event)><i class=material-icons>ohrm_snapshot</i> <span translate=Snapshot></span></button><pim-document-manager-button ng-if=vm.permissions.salaryDocuments.read datagroup-name=employee_salary_documents employee-number=vm.employeeNumber employee-service=vm.employeeService></pim-document-manager-button></div></div><div ng-show="vm.snapshotAsOf && vm.currentTabKey == \'main\' && !vm.loading" id=exitSnapshotViewButtonContainer class=not-a-card><button type=button class="btn btn-secondary top-sticky-button" id=exitSnapshotViewButton data-icon=ohrm_back_arrow_oxd title={{vm.getLocalizedExitSnapshotViewTooltip()}} oxd-tooltip data-placement=bottom aria-label={{vm.getLocalizedExitSnapshotViewTooltip()}} ng-click=vm.exitSnapshotView() ng-bind=vm.snapshotAsOfLocalized></button></div><div class="pim-card-wrapper oxd-form-container" ng-if="vm.permissions.salary.read && vm.currentTabKey == \'main\' && !vm.loading"><form name=vm.salaryDetailsForm ng-submit=vm.onSubmitSalaryDetails()><div sf-schema=vm.salaryFormSchema sf-form=vm.salaryForm sf-model=vm.salaryModel sf-use-decorator=oxdDecorator></div><div class=components-section ng-repeat="componentTypeParams in vm.componentTypes" ng-if="!vm.wizardMode && vm.hasComponentsForType(componentTypeParams.type)"><salary-components template=salary-components-table.html components=vm.salaryComponents calculated-salary-values=vm.calculatedSalaryValues type={{componentTypeParams.type}} total-label={{componentTypeParams.totalLabel}} form=vm.salaryDetailsForm permissions=vm.permissions.salary min=vm.salaryModel.currency.minSalary max=vm.salaryModel.currency.maxSalary currency=vm.getCurrencyObject() is-snapshot={{vm.snapshotAsOf}}></salary-components></div><div id=actionBtnRow class=row><a href ng-if="vm.permissions.salary.update && !vm.wizardMode" ng-click=vm.onSubmitSalaryDetails(vm.salaryDetailsForm); class="btn btn-secondary" translate=Save></a></div></form></div><div ng-show="vm.currentTabKey == \'history\' && !vm.loading" id=salary_history class=not-a-card><pim-salary-detailed-history ng-if=vm.showDetailedHistorySection employee=vm.employee history=vm.detailedHistory audit-logs=vm.auditLogs salary-record=vm.salaryRecord permissions=vm.permissions edit-action=vm.showUpdateCompensationModal un-selectable-ids=vm.unSelectableIds></pim-salary-detailed-history></div><div ng-show="vm.currentTabKey == \'attachments\' && !vm.loading" class=not-a-card><pim-attachment pimscreen="\'salary\'" permissions=vm.permissions.attachments></pim-attachment></div></div><custom-fields-panel ng-show="vm.currentTabKey == \'main\' && !vm.snapshotAsOf && !vm.loading" ng-if="vm.permissions.customFields.read && vm.customFieldConfiguration" screen=vm.customFieldScreen permissions=vm.permissions.customFields custom-field-service=vm.customFieldService employee-service=vm.employeeService custom-field-configuration=vm.customFieldConfiguration wizard-mode=vm.wizardMode extracontroller=vm></custom-fields-panel>'),e.put("app/pim/salary/update-compensation-modal.html",'<div class=modal tabindex=-1 role=dialog><div class="modal-dialog modal-md confirm-changes-modal" role=document><div class=modal-content><div class=modal-header><h5 class=modal-title><span>{{modal.title | translate}}</span> - <span>{{\'Confirm Changes\' | translate}}</span></h5><button type=button class="btn btn-close" aria-label="{{\'Close\' | translate}}" data-dismiss=modal>&times</button></div><div class=modal-body><oxd-loader ng-if=!modal.schema></oxd-loader><div class="body-container form-row" ng-if=modal.schema><form name=modal.salaryConfirmationForm id=confirmChangesForm class="col-12 needs-validation" novalidate><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal sf-use-decorator=oxdDecorator></div><div class="changes-header with-bottom-border form-row"><div class="changed-field-name form-group col-3" translate=Field></div><div class="old-value form-group col-3" translate="Changed From"></div><div class=change-icon></div><div class="new-value form-group col-4" translate="Changed To"></div></div><div class=changes-form novalidate sf-schema=modal.changesFormSchema sf-form=modal.changesForm sf-model=modal.model extracontroller=modal sf-use-decorator=oxdDecorator hide-empty-form-elements></div><div class=changes-group ng-repeat="componentTypeParams in modal.componentTypes" ng-if=modal.hasComponentsForType(componentTypeParams.type)><salary-components template=salary-components-changes.html components=modal.salaryComponentValues calculated-salary-values=modal.calculatedSalaryValues type={{componentTypeParams.type}} permissions=modal.permissions form=modal.salaryConfirmationForm min=modal.model.minValue max=modal.model.maxValue changed-fields-only=modal.model.changedFieldsOnly currency=modal.getCurrencyObject() old-currency=modal.oldCurrency></salary-components></div></form></div></div><div class=footer-container ng-if=modal.schema><div class=modal-footer ng-class="{\'modal-confirmation-message\': modal.confirmationMessage}"><small class=mr-auto ng-if="modal.schema[\'required\'].length && !modal.confirmationMessage">* {{"Required" | translate}}</small> <small class="mr-auto modal-confirmation-msg-span" ng-if=modal.confirmationMessage><span class="material-icons modal-confirmation-alert-icon">ohrm_delete_alert_warning</span> <span class=modal-confirmation-msg>{{modal.confirmationMessage | translate}}</span></small> <button type=button class="btn btn-ghost" ng-click=modal.cancel() data-dismiss=modal>{{\'Cancel\' | translate}}</button> <button type=button ng-if=modal.canSave class="btn btn-secondary" id=modal-save-button ohrm-save-form=modal.save();>{{\'Confirm\' | translate}}</button></div></div></div></div></div>'),e.put("app/pim/socialmedia/social_media.html",'<div id=socialMediaDiv><crud-panel panelinfo=socialMedia.panelInfo.socialMediaInfo objs=socialMedia.socialMedia listdata=socialMedia.listData.socialMedia initialsortfield="\'type\'" extracontroller=socialMedia></crud-panel><div class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Social Media\' | translate}}" data-position=left ng-if="socialMedia.permissions.create && socialMedia.loaded"><a class="btn-floating btn-large waves-effect waves-light" ng-click=socialMedia.addSocialMedia()><i class=material-icons>add</i></a></div></div>'),e.put("app/pim/socialmedia/social_media_modal.html","<div class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title={{modal.modalProperties.title}} show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-sm></generic-oxd-modal></div>"),e.put("app/pim/taxExemptions/tax_exemptions.html",'<div ng-if="taxExemptions.permissions.read && taxExemptions.pimConfig.showTaxExeptions" id=taxExemptionDiv class=form-div><h4>{{taxExemptions.title | translate}}</h4><form name=taxExemptions.taxExcemptionFrom sf-schema=taxExemptions.formSchema sf-form=taxExemptions.form sf-model=taxExemptions.formModel ng-submit=taxExemptions.onSubmit(taxExemptions.taxExcemptionFrom)></form></div><custom-fields-panel ng-if="taxExemptions.customFieldsPermission.read && taxExemptions.pimConfig.showTaxExeptions" permissions=taxExemptions.customFieldsPermission screen=taxExemptions.customFieldScreen custom-field-service=taxExemptions.customFieldService employee-service=taxExemptions.employeeService custom-field-configuration=taxExemptions.customFieldConfiguration wizard-mode=taxExemptions.wizardMode extracontroller=taxExemptions></custom-fields-panel><div class=form-div ng-if="taxExemptions.attachmentPermission.read && taxExemptions.pimConfig.showTaxExeptions"><pim-attachment pimscreen="\'tax\'" permissions=taxExemptions.attachmentPermission></pim-attachment></div>'),e.put("app/pim/terminationreasons/termination_reason_modal.html",'<div class="modal modal-short" tabindex=-1 role=dialog><generic-oxd-modal modal-title={{modal.title}} show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-sm></generic-oxd-modal></div>'),e.put("app/pim/terminationreasons/termination_reasons.html",'<div class=pim-container><div id=terminationReasonsDiv><crud-panel panelinfo=terminationReasons.panelInfo.terminationReasonsInfo objs=terminationReasons.terminationReasons listdata=terminationReasons.listData.terminationReasons extracontroller=terminationReasons initialsortfield="\'name\'"></crud-panel><div ng-if="terminationReasons.permissions.create && terminationReasons.loaded" class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Termination Reason\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=terminationReasons.addTerminationReason()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/pim/wizard/wizard.html",'<div ui-view class="pim-container wizard" ng-cloak autoscroll=true></div><div id=wizard-nav-button-section class="row schema-form-section form-buttons"><button ng-show=vm.showPrev class="btn btn-secondary bottom-left" type=button ng-class="{disabled: !vm.canSubmitForm}" style="margin-left: 0" id=wizard-prev-button ng-click=vm.onPrevStep() translate=Prev></button> <button ng-show=!vm.showFinishButton class="btn btn-secondary right" type=button ng-class="{disabled: !vm.canSubmitForm}" ng-click=vm.onNextStep() translate=Next></button> <button ng-show=vm.showFinishButton class="btn btn-secondary right" type=button ng-class="{disabled: !vm.canSubmitForm}" ohrm-click-and-wait=vm.onFinish()>{{"Save" | translate}}</button></div><style>\n    .select-wrapper input {\n        text-overflow: ellipsis;\n        max-width: 95%;\n    }\n</style>'),e.put("app/pim/wizard/wizard_custom_top_ribbon.html","<oxd-wizard-numeric-progress-bar class=pim-add-employee-wizard-custom-top-ribbon items=vm.screens on-item-click-callback=vm.stepChange done-class-callback=vm.itemIsDone todo-class-callback=vm.itemIsTodo current-class-callback=vm.itemIsCurrent visited-class-callback=vm.itemIsVisited tooltip-property=\"'title'\"></oxd-wizard-numeric-progress-bar>"),e.put("app/pim/workWeek/work-week.html",'<div id=work_week_tab class=form-div ng-if=vm.permissions.read><h4 translate="Work Week"></h4><form id=work-week-form name=salaryDetailsForm ng-if="vm.workWeek != null"><table><tbody><tr><th><label style=font-size:14px;font-weight:normal>{{ \'Enable Work Week\' | translate }}</label></th><th colspan=6><div class=switch><label><input type=checkbox ng-model=vm.isEnabled ng-disabled=!vm.permissions.update id=1q> <span class=lever></span></label></div></th></tr><tr><th translate=Day width=20%></th><th translate=Type></th><th translate="Shift In" width=10%></th><th translate="Shift Out" width=10%></th><th translate="Lunch In" width=10%></th><th translate="Lunch Out" width=10%></th><th translate=Duration></th></tr><tr work-weekrow form-name=salaryDetailsForm day=Monday time-object=vm.workWeek.Monday permissions=vm.permissions></tr><tr work-weekrow form-name=salaryDetailsForm day=Tuesday time-object=vm.workWeek.Tuesday permissions=vm.permissions></tr><tr work-weekrow form-name=salaryDetailsForm day=Wednesday time-object=vm.workWeek.Wednesday permissions=vm.permissions></tr><tr work-weekrow form-name=salaryDetailsForm day=Thursday time-object=vm.workWeek.Thursday permissions=vm.permissions></tr><tr work-weekrow form-name=salaryDetailsForm day=Friday time-object=vm.workWeek.Friday permissions=vm.permissions></tr><tr work-weekrow form-name=salaryDetailsForm day=Saturday time-object=vm.workWeek.Saturday permissions=vm.permissions></tr><tr work-weekrow form-name=salaryDetailsForm day=Sunday time-object=vm.workWeek.Sunday permissions=vm.permissions></tr><tr><th colspan=8><div class="row col requiredHelperText"><span style="font-weight: normal" translate="Lunch period is excluded in duration"></span></div></th></tr></tbody></table><div class="right-align form-buttons"><a href ng-click=vm.onSubmitWorkWeek(salaryDetailsForm); class="waves-effect waves-green btn primary-btn" translate=Save ng-if=vm.permissions.update></a></div></form></div>'),e.put("app/pim/workWeek/work-weekrow.html",'<td><input type=text readonly value="{{vm.day | translate}}"></td><td><div style=width:120px><select ng-model=vm.type ohrm-select ng-change=vm.checkWorkingDay() ng-disabled=!vm.permissions.update><option value=0 translate="Working Day"></option><option value=8 translate="Non-working Day"></option></select></div></td><td><div ng-hide=vm.hideIfNonWorkingDay style=width:105px><time-picker-work-week ng-required="vm.type == \'0\'" ng-model=vm.shiftIn lunch dependtime minvalue="\'00:00\'" maxvalue=vm.shiftOut duration=vm.shiftIn name="shiftIn-{{vm.day}} ng-disabled=\'!vm.permissions.update\'" form-name=vm.formName element-prefix="\'shiftIn\'" day=vm.day validation-msg="\'Invalid shift in time\'"></time-picker-work-week></div></td><td><div ng-hide=vm.hideIfNonWorkingDay style=width:105px><time-picker-work-week ng-required="vm.type == \'0\'" ng-model=vm.shiftOut lunch dependtime maxvalue="\'23:59\'" minvalue=vm.shiftIn duration=vm.shiftOut name="shiftOut-{{vm.day}} ng-disabled=\'!vm.permissions.update\'" form-name=vm.formName element-prefix="\'shiftOut\'" day=vm.day validation-msg="\'Invalid shift out time\'"></time-picker-work-week></div></td><td><div ng-hide=vm.hideIfNonWorkingDay style=width:105px><time-picker-work-week ng-required="vm.lunchOut != \'\'" ng-model=vm.lunchIn lunch="\'in\'" maxvalue=vm.shiftOut minvalue=vm.shiftIn dependtime=vm.lunchOut duration=vm.lunchIn lunch-part=vm.lunchOut name="lunchIn-{{vm.day}} ng-disabled=\'!vm.permissions.update\'" form-name=vm.formName element-prefix="\'lunchIn\'" day=vm.day validation-msg="\'Invalid lunch in time\'"></time-picker-work-week></div></td><td><div ng-hide=vm.hideIfNonWorkingDay style=width:105px><time-picker-work-week ng-required="vm.lunchIn != \'\'" ng-model=vm.lunchOut lunch="\'out\'" dependtime=vm.lunchIn maxvalue=vm.shiftOut minvalue=vm.shiftIn duration=vm.lunchOut lunch-part=vm.lunchIn name="lunchOut-{{vm.day}} ng-disabled=\'!vm.permissions.update\'" form-name=vm.formName element-prefix="\'lunchOut\'" day=vm.day validation-msg="\'Invalid lunch out time\'"></time-picker-work-week></div></td><td><input duration-validate duration=vm.duration apply=vm.hideIfNonWorkingDay type=text ng-disabled=true readonly ng-hide=vm.hideIfNonWorkingDay ng-model=vm.duration name=duration-{{vm.day}} class=ng-dirty> <span ng-messages="vm.formName[\'duration-\'+vm.day].$error" class=help-block ng-hide=vm.hideIfNonWorkingDay><ng-message when=invalidDuration translate="Invalid duration"></ng-message></span></td>'),e.put("app/recruitment/documentTemplates/document_templates.html",'<div class=pim-container><div id=documentTemplatesDiv><crud-panel panelinfo=documentTemplates.panalInfo.info objs=documentTemplates.documentTemplates listdata=documentTemplates.listData.documentTemplates extracontroller=documentTemplates></crud-panel><div class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Document Template\' | translate}}" data-position=left ng-if=documentTemplates.permissions.create><a class="btn-floating btn-large waves-effect waves-light" ng-click=documentTemplates.addItem()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/recruitment/documentTemplates/document_templates_modal.html","<div class=modal tabindex=-1 role=dialog><generic-oxd-modal hide-empty-form-elements modal-title={{modal.title}} show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-lg></generic-oxd-modal></div>"),e.put("app/succession_and_development/9BoxMatrix/9_box_matrix.html",'<div class="pim-container nb-matrix-container"><div ng-cloak class=box-matrix><div class=row style="margin-top: 3px; margin-bottom: 0;"><div ng-if=vm.showMatrix class="col s12 m12 l7"><table class=matrix-table border=1 style><tr class=matrix-row ng-repeat="(yIndex, y) in vm.yaxis"><td class="no-hover-change y-axis-cell"><span ng-if="vm.yaxis[vm.yaxis.length-1-yIndex].label.length <= 10" class=y-label translate={{vm.yaxis[vm.yaxis.length-1-yIndex].label}}></span> <span ng-if="vm.yaxis[vm.yaxis.length-1-yIndex].label.length > 10" class="y-label tooltipped" data-tooltip={{vm.yaxis[vm.yaxis.length-1-yIndex].label}} data-position=bottom>{{(vm.yaxis[vm.yaxis.length-1-yIndex].label.slice(0, 8))}}<span class=y-label-dots>...</span></span> <span class=y-coordinate>{{vm.yaxis[vm.yaxis.length-1-yIndex].to}}</span></td><td class="no-hover-change matrix-cell" ng-repeat="(xIndex, x) in vm.xaxis"><p class=cell-label translate="{{vm.category[vm.yaxis.length-1-yIndex][xIndex][\'label\']}}"></p><p ng-if="vm.category[vm.yaxis.length-1-yIndex][xIndex][\'value\'] > 0" ng-style="{\'background-color\': {{ \'\\\'\'+vm.category[(vm.yaxis.length-1-yIndex)][xIndex].color+\'\\\'\'}} }" class=cell-value ng-click="vm.loadCategoryData($event, vm.category[vm.yaxis.length-1-yIndex][xIndex][\'categoryId\'])">{{vm.translateEmployeeCountLabel(vm.category[vm.yaxis.length-1-yIndex][xIndex][\'value\'])}}</p><p ng-if="vm.category[vm.yaxis.length-1-yIndex][xIndex][\'value\'] == 0" style="background-color: #fce8d2; color: #a89279;" class=cell-value ng-click="vm.loadCategoryData($event, null)">{{\'no employees\' | translate}}</p></td></tr><tr><td class="no-hover-change index-coordinate">{{vm.yaxis[0][\'from\']}}</td><td class="no-hover-change x-axis-cell" ng-repeat="(xIndex, x) in vm.xaxis"><span ng-if="x.label.length <= 10" class=x-label translate={{x.label}}></span> <span ng-if="x.label.length > 10" class="x-label tooltipped" data-tooltip={{x.label}} data-position=bottom>{{x.label.slice(0, 8)}}<span class=x-label-dots>...</span></span> <span class=x-coordinate>{{x.to}}</span></td></tr></table><p class=x-definition>{{vm.xcaption | translate}}</p><p class=y-definition>{{vm.ycaption | translate}}</p></div><div class="col l5 m12 s12"><nine-box-employee-list ng-if="vm.matrixId!==null" model-key=vm.matrixId model-filter=vm.formModel></nine-box-employee-list></div></div></div></div>'),e.put("app/succession_and_development/9BoxMatrix/9_box_matrix_filter.html",'<div class=modal tabindex=-1 role=dialog id=nb_filter_modal><generic-oxd-modal modal-title="Filter 9 Box Matrix By" show-close-button=true show-reset-button=true form-schema=modal.schema form=modal.form model=modal.model save-button-label=Search cancel-button-label=Cancel on-save=modal.search on-reset=modal.reset modal-size-class=modal-md></generic-oxd-modal></div>'),e.put("app/succession_and_development/9BoxMatrix/9_box_matrix_navbar.html",'<ul><li><a href ng-click=navbar.filter() class="tooltipped action-icon" data-tooltip="{{\'Filter\' | translate}}" data-position=bottom><i class=material-icons>oxd_filter</i></a></li></ul>'),e.put("app/time/commonActivities/common_activities.html",'<div class=pim-container id=commonActivities><div><crud-panel panelinfo=vm.panelInfo.activitiesInfo objs=vm.activities listdata=vm.listData.activities extracontroller=vm></crud-panel><div ng-if=vm.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Common Activity\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=vm.addActivities()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/time/commonActivities/common_activities_modal.html",'<div id=modal1 class="modal modal-fixed-footer" style="width: 50%; height: 60%"><h4>{{ modal.title| translate}}</h4><form name=activityModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ng-show="!modal.pendingRequest && activityModalForm.$valid" ohrm-save-form=modal.save(activityModalForm); form-name=activityModalForm close-modal-on-click=activityModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-show="!(!modal.pendingRequest && activityModalForm.$valid)" class="modal-action waves-effect disabled waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/time/detailedTimesheet/detailed_timesheet.html",'<div class=pim-container id=detailedTimesheet ng-cloak><div class=form-div><div class="timesheetInfo row" ng-if=vm.render><div class="section row"><form class="col s4" name=timesheetForm sf-schema=vm.schema sf-form=vm.form sf-model=vm.modal><div class=timePeriodHeading><span class="row statusText"><b class="col s4">{{\'Timesheet\' | translate}}</b> <span class="col s8 timesheetSelect" sf-insert-field="[\'timesheet\']"></span></span></div></form><div class="col s3 timeSheetStatus statusText"><b class="col s4">{{\'Status\' | translate}}</b><div class="col s8">{{vm.timesheet.state}}</div></div><div ng-if=vm.timesheetMeta.AllowedToCreate name=addTimesheetForm class="col s2 createTimesheetDatePicker" sf-schema=vm.addTimesheetSchema sf-form=vm.addTimesheetForm sf-model=vm.addTimesheetModel></div><div ng-if=!vm.timesheetMeta.AllowedToCreate class="col s2 createTimesheetDatePicker placeHolder"></div><div class="col s2 totalDayTimeTitle statusText"><b>{{\'Total Time\' | translate}}</b></div><div class="col s1 totalDayTime statusText">{{vm.getTotalTime()}}</div></div></div><div class="form-div not-a-card"><div class="row col s12 list-container"><timesheet-container ng-if=vm.render timesheet-items=vm.timesheet.TimesheetItem start-date=vm.timesheet.startDate end-date=vm.timesheet.endDate projects=vm.projects project-activities=vm.projectActivities common-activities=vm.commonActivities validate-timesheet-status=vm.validateTimesheetStatus timesheet-meta=vm.timesheetMeta action-callback=vm.action break-type-common-activities=vm.breakTypeCommonActivities day-off-status=vm.dayOffStatus></timesheet-container></div></div></div><div class="form-div not-a-card"><div ng-include=vm.payHourPanelTemplate></div></div><div class="form-div timesheetActionLogsTable no-title" ng-if=vm.timesheetActionLogs.length><crud-panel panelinfo=vm.panelInfo.timesheetActionLogs ng-if=vm.timesheetActionLogs.length objs=vm.timesheetActionLogs listdata=vm.listData.timesheetActionLogs extracontroller=vm></crud-panel></div></div>'),e.put("app/time/detailedTimesheet/timesheet_action_comment.html",'<div class="modal modal-fixed-footer" style="width: 50%; height: 60%; max-height: 75%;"><h4>{{vm.title | translate}}</h4><div class=modal-content><div><form name=timesheetActionCommentForm sf-schema=vm.schema sf-form=vm.form sf-model=vm.model></form></div></div><div class=modal-footer><a href ohrm-save-form=vm.save(timesheetActionCommentForm) form-name=timesheetActionCommentForm close-modal-on-click=timesheetActionCommentForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Confirm\' | translate}}</a> <a href ng-click=vm.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\'| translate}}</a></div></div>'),e.put("app/time/detailedTimesheet/timesheet_item_comment.html",'<div class="modal modal-fixed-footer" style="width: 50%; height: 60%; max-height: 75%;"><h4>{{\'Activity Comment\' | translate}}</h4><div class=modal-content><div><form name=timesheetItemCommentForm sf-schema=vm.schema sf-form=vm.form sf-model=vm.model></form></div></div><div class=modal-footer><a href ng-if=!vm.readOnly ohrm-save-form=vm.save(timesheetItemCommentForm) form-name=timesheetItemCommentForm close-modal-on-click=timesheetItemCommentForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=vm.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\'| translate}}</a></div></div>'),e.put("app/time/navbar/timesheet_navbar.html",'<div style="display: flex" class=pim-employee-profile-ribbon-actions><img ng-if=nav.selectedEmployeeNumber class=employee-profile-image ng-src=../index.php/pim/viewPhoto/empNumber/{{nav.selectedEmployeeNumber}}/size/small?{{nav.time}}><div class=employee-search-container ng-if=nav.isEmployeeTimesheet><div class=pim-employee-switch><i class="search-icon material-icons">search</i><angucomplete-alt-oxd id=employee_name_quick_filter placeholder="{{\'Employee Name\' | translate}}" text-searching="{{\'Searching...\' | translate}}" text-no-results="{{\'No results found\' | translate}}" pause=100 selected-object=nav.employeeSelected remote-api-handler=nav.fetchMatchingEmployees search-fields=firstName,middleName,lastName title-field=firstName,middleName,lastName,past_employee description-field=employeeId auto-match=true focus-first=true minlength=1 input-class=contains-emp-id match-class=match></angucomplete-alt-oxd></div></div></div>'),e.put("app/time/projectMembers/time.add_project_members.html",'<div id=modal1 class="modal modal-fixed-footer" style="height:65%; width: 50%"><h4>{{modal.title | translate}}</h4><form name=projectMembersModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.add(projectMembersModalForm) form-name=educationModalForm close-modal-on-click=educationModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/time/projectMembers/time.project-members-tab-navbar.html",'<div class=custom-ribbon-with-menu-and-more-menu><div class=menu-items><top-level-menu-item ng-repeat="menu in vm.tabs track by menu.tabId" menu-title=menu.title icon=menu.img sref=menu.uiSref automation-id={{menu.automationId}} max-levels=1 visibility-state=vm.visibilityMap[menu.tabId] current-item-state=vm.currentItemMap[menu.tabId] track-by="\'tabId\'"></top-level-menu-item></div></div>'),e.put("app/time/projectMembers/time.project_members.html",'<div class=pim-container><div id=educationsDiv><crud-panel panelinfo=projectMembersCtrl.panelInfo.memberInfo objs=projectMembersCtrl.members listdata=projectMembersCtrl.listData.members extracontroller=projectMembersCtrl></crud-panel><div ng-if=projectMembersCtrl.permissions.update class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Project Members\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=projectMembersCtrl.addMembers()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/time/timesheetPeriods/timesheet_period_navbar.html",'<ul style="display: flex"><li><angucomplete-alt-with-employee-id id=employee_name_quick_filter_employee_list placeholder="{{\'Year\' | translate}}" text-searching="{{\'Searching...\' | translate}}" text-no-results="{{\'No results found\' | translate}}" pause=100 selected-object=navbar.yearSelected local-data=navbar.years search-fields=value title-field=value auto-match=true focus-first=true minlength=0 input-class="topnav-autocomplete tempClass" match-class=match input-changed=navbar.inputChanged initial-value=navbar.defaultYear></angucomplete-alt-with-employee-id></li><li class="tooltipped center-align" data-tooltip="{{\'Quick Search\' | translate}}" data-position=bottom><a class="employee-navbar-button action-icon" href ng-click=navbar.search()><i id=quick_search_icon class=material-icons>ohrm_search</i></a></li></ul>'),
e.put("app/time/timesheetPeriods/timesheet_period_state_change_confirmation_modal.html","<div id=confirmation_modal_without_header class=\"modal confirm-dialog oauth-data-dialog\"><div class=modal-content><h4></h4><p>{{modal.confirmationText}}</p><br><p>{{'Are you sure you want to continue?' | translate}}</p></div><div class=modal-footer><a href ng-click=modal.confirm() class=\"right modal-action modal-close waves-effect btn primary-btn\">{{'Yes' | translate}}</a> <a href ng-click=modal.cancel() class=\"right modal-action modal-close waves-effect waves-green btn\">{{'No' | translate}}</a></div></div>"),e.put("app/time/timesheetPeriods/timesheet_periods.html",'<div class=pim-container><div id=timesheet-period-container><div class=list-container><table class="responsive-table highlight bordered" ng-if=vm.permissions.read><thead><tr><th width=70% class translate="Timesheet Period"></th><th width=30% translate="Active Status"></th></tr></thead><tbody ng-if=!vm.waitingForPeriods><tr ng-repeat="timesheetPeriod in vm.timesheetPeriods"><td width=70%>{{vm.getFormattedTimesheetPeriod(timesheetPeriod)}}</td><td width=30%><div class=switch><label><input type=checkbox ng-checked=timesheetPeriod.active ng-disabled=!vm.permissions.update id=timesheet_period_switch_{{timesheetPeriod.id}} ng-click="vm.toggleStatus($event, timesheetPeriod)"> <span class=lever></span></label></div></td></tr></tbody></table></div></div></div>'),e.put("app/training/configuration/training_configuration.html","<div class=pim-container ng-if=vm.permissions.read><div id=trainingConfigurationDiv class=form-div><h4>{{vm.trainingConfigurationHeading | translate}}</h4><br><form name=trainingConfigurationForm sf-schema=vm.schema sf-form=vm.form sf-model=vm.model ng-submit=vm.onSubmit(trainingConfigurationForm)></form></div></div>"),e.put("app/admin/eeoFiling/basicReportDetails/eeo_filing_basic_report_details.html","<div class=eeo-step-container><form name=basicReportDetailsForm sf-schema=basicReportDetails.schema sf-form=basicReportDetails.form sf-model=basicReportDetails.model></form></div>"),e.put("app/admin/eeoFiling/establishmentDetails/eeo_filing_establishment_details.html","<div class=eeo-step-container><form name=establishmentDetailsForm sf-schema=establishmentDetails.schema sf-form=establishmentDetails.form sf-model=establishmentDetails.model></form></div>"),e.put("app/admin/eeoFiling/summary/eeo_filing_summary.html",'<div class=eeo-step-container><div class=eeo-filing-summary-container><div class=summary-title>{{ summary.title | translate }}</div><div class=summary-company-name>{{ summary.companyName | translate }}</div><div class=summary-report-type>{{ summary.reportType | translate }}</div><div class="separator section-separator"></div><a class="rounded-button secondary-button btn" ng-click=summary.generateEEOFiling()><div class=button-content><span>{{\'Generate EEO Filing\' | translate}}</span></div></a></div></div>'),e.put("app/admin/eeoFiling/wizard/eeo_filing_custom_top_ribbon.html","<div class=eeo-filing-sub-header-container><div id=eeoFilingWizardSubTitle>{{vm.currentStep.title | translate}}</div><oxd-wizard-numeric-progress-bar items=vm.steps on-item-click-callback=vm.stepChange done-class-callback=vm.itemIsDone todo-class-callback=vm.itemIsTodo current-class-callback=vm.itemIsCurrent visited-class-callback=vm.itemIsVisited tooltip-property=\"'title'\"></oxd-wizard-numeric-progress-bar></div>"),e.put("app/admin/eeoFiling/wizard/eeo_filing_wizard.html",'<div class=oxd-ui><div ui-view class="pim-container eeo-wizard eeo-filing-inner-container" ng-cloak autoscroll=true></div><style>\n        .select-wrapper input {\n            text-overflow: ellipsis;\n            max-width: 95%;\n        }\n    </style></div>'),e.put("app/attendance/payPolicy/add/pay_policy.html","<div id=payPolicyRules class=pim-container><div class=\"oxd-form-container oxd-panel\"><div class=formHeading><oxd-tabs class=payPolicyRuleTabs data=vm.tabs current-tab-key=vm.currentTabKey on-click=vm.tabClicked></oxd-tabs><div class=infoSection ng-if=\"vm.payPolicy && vm.payPolicyMeta.employeeCount\"><div class=\"employeeCount text-with-icon\"><i class=material-icons>person</i><span>{{vm.employeeCountString}}</span></div><div class=employeeSelectionLink ng-if=vm.isEditablePayPolicy><a ng-click=vm.goToEmployeeSelection()>{{'Employee Selection' | translate}}</a></div></div><div class=infoSection ng-if=\"vm.payPolicy && vm.payPolicyMeta.employeeCount == 0\"><div ng-click=vm.goToEmployeeSelection() class=\"text-with-icon btn btn-text-danger\"><i class=material-icons>ohrm_delete_alert_warning</i><span>{{vm.employeeCountString}}</span></div></div></div><form name=payPolicyForm id=payPolicyForm><oxd-loader ng-if=vm.submitInProgress></oxd-loader><div id=payPolicyGeneralRules ng-if=\"vm.currentTabKey == 'general' && !vm.submitInProgress\"><div id=basicInfoForm sf-schema=vm.schema sf-form=vm.form sf-model=vm.model sf-use-decorator=oxdDecorator hide-empty-form-elements></div><div ng-show=vm.dataLoaded class=rulesHeader><h6 class=col-30p>{{vm.model.hasNonWorkingDayRules ? 'Working Day Rules' : 'Daily Rules' | translate}}</h6><label class=col-10p>{{'Pay Code' | translate}}</label> <label class=col-30p>{{'Pay Code Name' | translate}}</label> <label class=col-10p>{{'Pay' | translate}}</label></div><div class=ruleForm sf-schema=vm.dailyRulesSchema sf-form=vm.dailyRulesForm sf-model=vm.model sf-use-decorator=oxdDecorator hide-empty-form-elements></div><div ng-if=vm.model.hasNonWorkingDayRules class=rulesHeader><h6 class=col-91p>{{'Non-working Day Rules' | translate}}</h6></div><div class=ruleForm sf-schema=vm.weekendRulesSchema sf-form=vm.weekendRulesForm sf-model=vm.model sf-use-decorator=oxdDecorator hide-empty-form-elements></div><div ng-if=vm.model.hasNonWorkingDayRules class=rulesHeader><h6 class=col-91p>{{'Holiday Rules' | translate}}</h6></div><div class=ruleForm sf-schema=vm.holidaydRulesSchema sf-form=vm.holidayRulesForm sf-model=vm.model sf-use-decorator=oxdDecorator hide-empty-form-elements></div><div ng-if=vm.hasWeeklyRules() class=rulesHeader><h6 class=col-91p>{{'Weekly Rules' | translate}}</h6></div><div class=ruleForm sf-schema=vm.weeklyRulesSchema sf-form=vm.weeklyRulesForm sf-model=vm.model sf-use-decorator=oxdDecorator hide-empty-form-elements></div><div ng-if=vm.hasConsecutiveDayRules() class=rulesHeader><h6 class=col-91p>{{'Consecutive Days Rules' | translate}}</h6><div ng-if=\"vm.canEditPayCodeConfigurations && vm.hasEditPermissions\" class=\"form-group col-9p sectionDeleteButton\"><button class=\"btn btn-list\" type=button ng-click=\"vm.deleteAllRulesOfType($event, 'consecutive_days')\"><i class=material-icons title=\"{{'Remove' | translate}}\" oxd-tooltip data-placement=top>delete</i></button></div></div><div class=ruleForm sf-schema=vm.consecutiveDayRulesSchema sf-form=vm.consecutiveDayRulesForm sf-model=vm.model sf-use-decorator=oxdDecorator hide-empty-form-elements></div></div><div id=payPolicyRoundOffRules ng-if=\"vm.currentTabKey == 'round_off' && !vm.submitInProgress\"><div id=payPolicyRoundOffForm sf-schema=vm.roundOffRuleSchema sf-form=vm.roundOffRuleForm sf-model=vm.model sf-use-decorator=oxdDecorator hide-empty-form-elements></div><hr ng-if=\"vm.model.roundingOffEnabled && !vm.submitInProgress\"></div><div id=actionBtnRow class=row><a class=\"btn btn-text\" ng-click=vm.cancelAddPayPolicy()>{{'Back' | translate}}</a> <a class=\"btn btn-secondary\" ng-if=vm.hasEditPermissions ng-click=vm.save(payPolicyForm)>{{'Save' | translate}}</a></div></form></div></div>"),e.put("app/attendance/payPolicy/add/pay_policy_employees.html",'<select-employees ng-if=vm.payPolicy on-employee-select="vm.hasEditPermissions ? vm.save : null" heading=vm.payPolicy.name on-back-button-click=vm.onCancel employee-select-button-label=vm.getEmployeeSelectButtonLabel no-selectable-rows=true multiselect-placeholder="\'All\'" search-criteria-model-values=vm.selectionCriteria employee-getter=vm.employeeGetter location-form-data=vm.locationFormData></select-employees>'),e.put("app/attendance/payPolicy/list/pay_policy_list.html",'<div id=payPolicyList class=oxd-list-holder><div class="pim-container oxd-list"><div class="row list-wrapper"><div class=list-right-panel><list objs=vm.payPolicies listdata=vm.listDefinition initialsortfield=vm.orderField initialsortorder="\'DESC\'" extracontroller=vm></list></div></div></div></div>'),e.put("app/corporate_directory/directory/directives/directory-employee-info.html",'<div class="employee-info-card card employee-info" ng-click=clickHandler(employeeObj,$event)><div class=employee-card><div class=corporate-profile-info-name>{{employeeObj.employeeFullName}}</div><div class=corporate-profile-info-id>{{employeeObj.employeeId}}</div><div><img class="corporate-emp-profile-picture-wrap-round corporate-emp-profile-picture circle" ng-src={{employeeObj.employeePicture}}></div><div ng-if=employeeObj.employeeJobTitle class=corporate-employee-job-title>{{employeeObj.employeeJobTitle}}</div><div ng-if=employeeObj.employeeCostCentre class=corporate-team-info>({{employeeObj.employeeCostCentre}})</div><div class=corporate-team-info>{{employeeObj.employeeSubUnit}}</div><div class=corporate-employee-location><span>{{employeeObj.employeeLocation}}</span> <span ng-if=employeeObj.employeeOpCountry>-{{employeeObj.employeeOpCountry}}</span></div></div></div>'),e.put("app/corporate_directory/directory/directives/directory-search-filter.html","<div class=\"form-group common-search-panel\"><angucomplete-alt-oxd placeholder=\"{{'Search' | translate}}\" text-searching=\"{{'Searching...' | translate}}\" text-no-results=\"{{'No results found' | translate}}\" pause=100 description-field=\"{{(quickSearch.type === 'employee')?'employeeId':undefined}}\" selected-object=controller.onQuickSearchSelect remote-api-handler=quickSearch.remoteApiHandler input-changed=controller.updateQuickSearchText input-class=\"form-control {{(quickSearch.type === 'employee')?'contains-emp-id':''}}\" search-fields=name title-field=name initial-value={} minlength=1 auto-match=true focus-first=true match-class=match class=\"{'angucomplete-input-not-empty': employee-id-margin }\"></angucomplete-alt-oxd><span class=\"corporate-search-icon icon-holder\" ng-click=quickSearch.onSearch(controller.quickSearchText)><i class=material-icons>search</i></span> <span class=\"corporate-filter-icon icon-holder\" title=\"{{'Filter' | translate}}\" oxd-tooltip data-placement=bottom ng-click=onFilterOpen($event)><i class=material-icons>oxd_filter</i></span></div>"),e.put("app/corporate_directory/directory/directives/directory-selected-employee-info.html",'<div id=#corporate-selected-profile-id class=corporate-selected-profile><div ng-click=hideSelectedProfile()><i class="material-icons profile-collapse-icon">arrow_forward</i></div><div class=corporate-profile-picture><img class="corporate-profile-picture-round circle list-photo" ng-src={{selectedEmployee.profilePicture}}></div><div class=corporate-profile-name>{{selectedEmployee.Name}}</div><div class=corporate-profile-id>{{selectedEmployee.id}}</div><div ng-if=selectedEmployee.jobTitle class=corporate-job-title-container><span class=corporate-job-title>{{selectedEmployee.jobTitle}}</span></div><div ng-if=selectedEmployee.socialMediaAvailable class=corporate-social-media><span ng-if=selectedEmployee.socialmedia.whatsapp ng-repeat="whatsapp in selectedEmployee.socialmedia.whatsapp" class=social-media-icon><a href={{whatsapp}} target=_blank><img class=comment-icon src=images/corporateDirectory/icons/whatsapp.svg></a></span> <span ng-if=selectedEmployee.socialmedia.gmail class=social-media-icon><a href="{{\'mailto:\'+selectedEmployee.socialmedia.gmail}}" title={{selectedEmployee.socialmedia.gmail}} target=_blank><img class=comment-icon src=images/corporateDirectory/icons/gmail.svg></a></span> <span ng-if=selectedEmployee.socialmedia.skype ng-repeat="skype in selectedEmployee.socialmedia.skype" class=social-media-icon><a href={{skype}} target=_blank><img class=comment-icon src=images/corporateDirectory/icons/skype.svg></a></span> <span ng-if=selectedEmployee.socialmedia.linkedin ng-repeat="linkedin in selectedEmployee.socialmedia.linkedin" class=social-media-icon><a href={{linkedin}} target=_blank><img class=comment-icon src=images/corporateDirectory/icons/linkedin.svg></a></span> <span ng-if=selectedEmployee.socialmedia.facebook ng-repeat="facebook in selectedEmployee.socialmedia.facebook" class=social-media-icon><a href={{facebook}} target=_blank><img class=comment-icon src=images/corporateDirectory/icons/facebook.svg></a></span> <span ng-if=selectedEmployee.socialmedia.twitter ng-repeat="twitter in selectedEmployee.socialmedia.twitter" class=social-media-icon><a href={{twitter}} target=_blank><img class=comment-icon src=images/corporateDirectory/icons/twitter.svg></a></span></div><div class=corporate-location-department-info-container><span class=corporate-loc-group-icon><i class="material-icons corporate-loc-icon">room</i></span> <span class=corporate-unit-location><div class=corporate-team>{{selectedEmployee.team}}</div><div class=corporate-location>{{selectedEmployee.location}}</div></span></div><div ng-if="selectedEmployee.costCentre || selectedEmployee.OpCountry" class=separator-line></div><div ng-if=selectedEmployee.costCentre class=corporate-selected-profile-container><div class=corporate-profile-label>{{\'Cost Centre\' | translate}}</div><div class=corporate-profile-val>{{selectedEmployee.costCentre}}</div></div><div ng-if=selectedEmployee.OpCountry class=corporate-selected-profile-container><div class=corporate-profile-label>{{\'Operational Country\' | translate}}</div><div class=corporate-profile-val>{{selectedEmployee.OpCountry}}</div></div><div ng-if="selectedEmployee.mobileNumber || selectedEmployee.homeNumber || selectedEmployee.workNumber" class=separator-line></div><div ng-if=selectedEmployee.mobileNumber class=corporate-contact-number-container><span class=corporate-number><div class=corporate-profile-label>{{\'Mobile\' | translate}}</div><a class=corporate-profile-val href="{{\'tel:\'+vm.removeSpaces(selectedEmployee.mobileNumber)}}">{{selectedEmployee.mobileNumber}}</a></span> <span class="material-icons profile-clipboard-icon" title="{{\'Copy to Clipboard\' | translate}}" oxd-tooltip data-placement=bottom ng-click=vm.copyToClipboard(selectedEmployee.mobileNumber)>copy</span></div><div ng-if=selectedEmployee.homeNumber class=corporate-contact-number-container><span class=corporate-number><div class=corporate-profile-label>{{\'Home\' | translate}}</div><a class=corporate-profile-val href="{{\'tel:\'+vm.removeSpaces(selectedEmployee.homeNumber)}}">{{selectedEmployee.homeNumber}}</a></span> <span class="material-icons profile-clipboard-icon" title="{{\'Copy to Clipboard\' | translate}}" oxd-tooltip data-placement=bottom ng-click=vm.copyToClipboard(selectedEmployee.homeNumber)>copy</span></div><div ng-if=selectedEmployee.workNumber class=corporate-contact-number-container><span class=corporate-number><div class=corporate-profile-label>{{\'Work\' | translate}}</div><a class=corporate-profile-val href="{{\'tel:\'+vm.removeSpaces(selectedEmployee.workNumber)}}">{{selectedEmployee.workNumber}}</a></span> <span class="material-icons profile-clipboard-icon" title="{{\'Copy to Clipboard\' | translate}}" oxd-tooltip data-placement=bottom ng-click=vm.copyToClipboard(selectedEmployee.workNumber)>copy</span></div><div ng-if=selectedEmployee.otherEmail class=separator-line></div><div ng-if=selectedEmployee.otherEmail class=corporate-selected-profile-container><div class=corporate-profile-label>{{\'Other Email\' | translate}}</div><div class=corporate-profile-val>{{selectedEmployee.otherEmail}}</div></div><div ng-if="selectedEmployee.address || selectedEmployee.zipCode || selectedEmployee.city || selectedEmployee.country" class=separator-line></div><div ng-if=selectedEmployee.address class=corporate-selected-profile-container><div class=corporate-profile-label>{{\'Address\' | translate}}</div><div class=corporate-profile-val>{{selectedEmployee.address}}</div></div><div ng-if=selectedEmployee.zipCode class=corporate-selected-profile-container><div class=corporate-profile-label>{{\'Zipcode\' | translate}}</div><div class=corporate-profile-val>{{selectedEmployee.zipCode}}</div></div><div ng-if=selectedEmployee.city class=corporate-selected-profile-container><div class=corporate-profile-label>{{\'City\' | translate}}</div><div class=corporate-profile-val>{{selectedEmployee.city}}</div></div><div ng-if=selectedEmployee.country class=corporate-selected-profile-container><div class=corporate-profile-label>{{\'Country\' | translate}}</div><div class=corporate-profile-val>{{selectedEmployee.country}}</div></div><div ng-if="selectedEmployee.employeeCustomFields && selectedEmployee.isCustomFieldAvailable" class=separator-line></div><div ng-if="selectedEmployee.employeeCustomFields && selectedEmployee.isCustomFieldAvailable" ng-repeat="(customFieldUniqueKey, customField) in selectedEmployee.employeeCustomFields"><div ng-if="customField.name && customField.value" class=corporate-selected-profile-container><div class=corporate-profile-label>{{customField.name}}</div><div class=corporate-profile-val>{{customField.value}}</div></div></div><div ng-if=vm.qrcode class=separator-line></div><div ng-if=vm.qrcode class="corporate-selected-profile-container corporate-qr-code-container"><qr text=vm.qrcode size=120></qr></div></div>'),e.put("app/core/dashboard/directive/dashboard-layout.html","<div class=dashboard-layout><widget-container widgets=widgets></widget-container><widget-config-panel widgets=widgets type=type></widget-config-panel></div>"),e.put("app/core/dashboard/directive/widget-container.html",'<div class=row dragula=\'"bag"\' dragula-scope=$parent dragula-model=widgets><div dashboard-widget ng-repeat="widget in widgets track by widget.id" id=widget.id name=widget.name widget-title=widget.title config=widget.config is-widget-active="widget.isAvailable && widget.isEnabled" widget-global-config=widget.widgetGlobalConfig size=widget.size class="{{vm.getWidgetClasses(widget.size)}} oxd dashboard-widget-shell" ng-show="widget.isAvailable && widget.isEnabled"></div></div>'),e.put("app/core/dashboard/widgetConfig/widget-config-panel.html",'<span class=widget-configuration-panel ng-class="{\'active\': showConfig}"><div class=dashboard-config-panel-header><span class="dashboard-header-icon material-icons">widgets</span> <span class=dashboard-header><div class=dashboard-sub-header>{{title|translate}}</div><div class=dashboard-main-header>{{"Configuration"|translate}}</div></span></div><div class=dashboard-config-panel-content><ul class="nav nav-tabs configuration-tabs-nav-bar"><li class=nav-item ng-repeat="tab in tabs" ng-click=tabClicked(tab)><span class=nav-link ng-class="{\'active\': currentTab==tab.key}">{{tab.title|translate}}</span></li></ul><div class=configuration-tabs><div class=configuration-tab ng-if="currentTab == \'adminConfig\'"><div class=accordion id=configureWidgetAccordion><div class=accordion-item ng-repeat="widget in getConfigurableWidgets() track by $index"><div id="{{\'adminWidget\'+widget.id+\'Header\'}}" class=accordion-header><ohrm-switch class="form-group col-12" key="\'adminWidgetSwitch\'+widget.id" label=widget.title model=widget.widgetGlobalConfig.isEnabled icon=getWidgetIcon(widget) icon-class="\'widget-type-indicator\'"></ohrm-switch><span class=toggle-container ng-show=widget.widgetGlobalConfig.isEnabled><span class="material-icons header-collapse-indicator collapsed" data-toggle=collapse data-target="{{\'#adminWidget\'+widget.id+\'Body\'}}" aria-expanded=false aria-controls="{{\'#adminWidget\'+widget.id+\'Body\'}}"></span></span> <span class=toggle-container ng-show=!widget.widgetGlobalConfig.isEnabled><span class="material-icons header-collapse-disabled-indicator">keyboard_arrow_down</span></span></div><div id="{{\'adminWidget\'+widget.id+\'Body\'}}" class=collapse aria-labelledby="{{\'adminWidget\'+widget.id+\'Header\'}}" data-parent=#configureWidgetAccordion><div class=accordion-body-container ng-if=widget.widgetGlobalConfig.isEnabled><table class=admin-configuration-permission-table><tr><th class=user-role-header></th><th class=available-to-header>{{\'Available To\'|translate}}</th><th class=enabled-to-header>{{\'Default Selected To\'|translate}}</th></tr><tr ng-repeat="userOption in widget.userRoleOptions track by $index"><td>{{userOption.displayName|translate}}</td><td><div class="custom-control custom-switch"><input materializecss-input id="{{\'adminWidget\'+widget.id+\'AvailableToSwitchForRole\'+userOption.key}}" type=checkbox ng-model=widget.widgetGlobalConfig.availableTo[userOption.key] ng-change="vm.adminConfigAvailableSwitchClicked(widget, userOption.key)" class=custom-control-input> <label class=custom-control-label for="{{\'adminWidget\'+widget.id+\'AvailableToSwitchForRole\'+userOption.key}}"></label></div></td><td><div class="custom-control custom-switch"><input materializecss-input id="{{\'adminWidget\'+widget.id+\'DefaultEnabledToSwitchForRole\'+userOption.key}}" type=checkbox ng-model=widget.widgetGlobalConfig.defaultSelectedTo[userOption.key] ng-change="vm.adminConfigeDefaultSelectionSwitchClicked(widget, userOption.key)" class=custom-control-input> <label class=custom-control-label for="{{\'adminWidget\'+widget.id+\'DefaultEnabledToSwitchForRole\'+userOption.key}}"></label></div></td></tr></table></div></div></div></div></div><div class=configuration-tab ng-if="currentTab == \'myConfig\'"><span class=widget-container ng-repeat="widget in getConfigurableWidgets() track by $index"><ohrm-switch ng-if=widget.isAvailable class="form-group col-12" icon=getWidgetIcon(widget) icon-class="\'widget-type-indicator\'" key="\'myWidgetSwitch\'+widget.id" label=widget.title model=widget.isEnabled></ohrm-switch></span></div><div class=modal-footer ng-class="\'justify-content-end\'"><button type=button class="btn btn-ghost" ng-click=cancel()>{{\'Cancel\' | translate}}</button> <button type=button class="btn btn-secondary" id=modal-save-button ng-click=saveConfiguredWidgets()>{{\'Save\'| translate}}</button></div></div></div><div class=dashboard-widget-config-button><a class=config-button ng-click=toggleConfig()><i class=material-icons>ohrm_settings</i></a></div></span> <span class=dashboard-panel-overlay ng-class="{\'active\': showConfig}" ng-click=overlayClicked()></span>'),e.put("app/core/modal/directives/generic-oxd-modal.html",'<div class="modal-dialog {{vm.modalSizeClass}}" role=document><div class="modal-content {{vm.modalContentClass}}"><div class=modal-header ng-if=vm.showHeader><span ng-if=!vm.headerConfig><h5 class=modal-title>{{vm.modalTitle | translate}}</h5></span> <span class=modal-header-inner-container ng-if="vm.headerConfig && vm.headerConfig.type==\'compact-widget-header\'"><span class=material-icons>{{vm.headerConfig.icon}}</span> <span class=header-container><div class=sub-heading>{{vm.headerConfig.subHeading|translate}}</div><div class=heading>{{vm.headerConfig.heading|translate}}</div></span></span> <button ng-if=vm.showResetButton type=button class="btn btn-list" title="{{\'Reset\' | translate}}" oxd-tooltip data-placement=bottom aria-label="{{\'Reset\' | translate}}" ng-click=vm.reset(oxdModalForm)><i class=material-icons aria-hidden=true>refresh</i></button> <button ng-if=vm.showCloseButton type=button class="btn btn-close" aria-label="{{\'Close\' | translate}}" data-dismiss=modal>&times</button></div><div class=modal-body ng-class="{\'no-header\' : !vm.showHeader, loading: vm.showLoader}"><div class=oxd-circle-loader-container ng-if="vm.showLoader || (!vm.hideLoader && !vm.formSchema && !vm.listDefinition)"><div class=oxd-circle-loader>{{\'Loading\' | translate}}</div></div><form name=oxdModalForm class="generic-oxd-modal-form needs-validation" novalidate sf-schema=vm.formSchema sf-form=vm.form sf-model=vm.model sf-use-decorator=oxdDecorator></form><list ng-if=vm.listDefinition objs=vm.listData class=generic-oxd-modal-list listdata=vm.listDefinition extracontroller=vm></list><oxd-alert-section ng-if="vm.inlineAlert.condition() && vm.formSchema" click-handler=vm.inlineAlert.linkClickHandler() message=vm.inlineAlert.message icon=vm.inlineAlert.icon type=vm.inlineAlert.type clickable=vm.inlineAlert.clickable></oxd-alert-section></div><div class=modal-footer ng-if=vm.showFooter><small class=mr-auto ng-bind=vm.getRequiredMessage()></small> <button ng-repeat="additionalButton in vm.additionalButtons" type=button class={{additionalButton.class}} ng-class="{disabled: vm.showLoader}" ng-if="additionalButton.condition!==undefined?additionalButton.condition:true" ng-click=additionalButton.onClick()><span ng-if=additionalButton.icon class=material-icons>{{additionalButton.icon}}</span> <span class=button-text>{{additionalButton.buttonLabel}}</span></button> <button type=button class="btn btn-ghost" ng-class="{disabled: vm.showLoader}" ng-click=vm.cancel() data-dismiss=modal>{{vm.cancelButtonLabel | translate}}</button> <button type=button class="btn btn-secondary" id=modal-save-button ng-class="{disabled: vm.showLoader}" ng-if=vm.showSaveButton ohrm-save-form=vm.save(oxdModalForm);>{{vm.saveButtonLabel | translate}}</button></div></div></div>'),e.put("app/core/modal/directives/oxd-modal-with-form.html",'<div class="modal-dialog {{vm.modalSizeClass}}" role=document><div class=modal-content><div class=modal-header ng-if=vm.showHeader><span ng-if=!vm.headerConfig><h5 class=modal-title>{{vm.modalTitle | translate}}</h5></span> <span class=modal-header-inner-container ng-if="vm.headerConfig && vm.headerConfig.type==\'compact-widget-header\'"><span class=material-icons>{{vm.headerConfig.icon}}</span> <span class=header-container><div class=sub-heading>{{vm.headerConfig.subHeading|translate}}</div><div class=heading>{{vm.headerConfig.heading|translate}}</div></span></span> <button ng-if=vm.showResetButton type=button class="btn btn-list" title="{{\'Reset\' | translate}}" oxd-tooltip data-placement=bottom aria-label="{{\'Reset\' | translate}}" ng-click=vm.reset(oxdModalForm)><i class=material-icons aria-hidden=true>refresh</i></button> <button ng-if=vm.showCloseButton type=button class="btn btn-close" aria-label="{{\'Close\' | translate}}" data-dismiss=modal>&times</button></div><div class=modal-body><div class=oxd-circle-loader-container ng-if="!vm.hideLoader && !vm.formSchema"><div class=oxd-circle-loader>{{\'Loading\' | translate}}</div></div><form name=oxdModalForm class=needs-validation novalidate sf-schema=vm.formSchema sf-form=vm.form sf-model=vm.model sf-use-decorator=oxdDecorator></form><oxd-alert-section ng-if="vm.inlineAlert.condition() && vm.formSchema" click-handler=vm.inlineAlert.linkClickHandler() message=vm.inlineAlert.message icon=vm.inlineAlert.icon type=vm.inlineAlert.type clickable=vm.inlineAlert.clickable></oxd-alert-section></div><div class=modal-footer ng-if=vm.showFooter><div class="mr-auto modal-footer-note-section"><div><small ng-bind=vm.getRequiredMessage()></small></div><div class=modal-footer-note><small ng-if=vm.footerNote>{{vm.footerNote | translate}}</small></div></div><button ng-repeat="additionalButton in vm.additionalButtons" type=button class={{additionalButton.class}} ng-if="additionalButton.condition!==undefined?additionalButton.condition:true" ng-click=additionalButton.onClick()><span ng-if=additionalButton.icon class=material-icons>{{additionalButton.icon}}</span> <span class=button-text>{{additionalButton.buttonLabel}}</span></button> <button type=button class="btn btn-ghost" ng-click=vm.cancel() ng-if=vm.showCancelButton data-dismiss=modal>{{vm.cancelButtonLabel | translate}}</button> <button type=button class="btn btn-secondary" id=modal-save-button ng-if=vm.showSaveButton ohrm-save-form=vm.save(oxdModalForm);>{{vm.saveButtonLabel | translate}}</button></div></div></div>'),e.put("app/leave/application/bulkAssign/attachment_mandatory_confirmation.html","<div id=delete_confirmation_modal class=\"modal confirm-dialog\"><div class=modal-content><h4></h4><p>{{'Attachment is marked as mandatory for the chosen Leave Type. If you bulk assign, no attachment will be included.' | translate}}</p><p>{{'Are you sure you want to continue?' | translate}}</p></div><div class=modal-footer><a href ng-click=modal.cancel() class=\"modal-action modal-close waves-effect btn\">{{'No, Cancel' | translate}}</a> <a href ng-click=modal.confirm() class=\"modal-action modal-close waves-effect btn primary-btn\">{{'Yes, Continue' | translate}}</a></div></div>"),e.put("app/leave/application/bulkAssign/bulk-assign-result.html","<div class=pim-container><div id=bulkAssignResult><crud-panel objs=vm.employeeList listdata=vm.listData extracontroller=vm></crud-panel></div></div>"),e.put("app/leave/application/bulkAssign/bulk-assign.html",'<div class=pim-container ng-show="vm.showform && vm.state.current.name === \'leave.bulk_assign\'"><div id=applyLeaveDiv class=form-div><h4>{{vm.title | translate}}</h4><form name=bulkAssignForm id=bulkAssignForm novalidate><div style="padding-left: 0px;" sf-schema=vm.schema sf-form=vm.form sf-model=vm.model ng-submit=vm.onSubmit(bulkAssignForm) sf-options=vm.formOptionDefaults></div><div class=row><div class="col l12 right-align"><button class="btn waves-effect waves-green" type=submit ng-click=vm.onSubmit(bulkAssignForm)>{{\'Assign\'| translate}}</button></div></div></form></div></div><div ui-view></div>'),e.put("app/leave/application/bulkAssign/workweek_confirmation.html","<div id=delete_confirmation_modal class=\"modal confirm-dialog\"><div class=modal-content><h4></h4><p>{{'Your selection includes employees with an employee specific work week.' | translate}}<br><br>{{'Leave cannot be assigned to those employees using the specific time option, and those employees will be skipped.' | translate}}</p><br><p>{{'Are you sure you want to continue?' | translate}}</p></div><div class=modal-footer><a href ng-click=modal.cancel() class=\"modal-action modal-close waves-effect btn\">{{'No, Cancel' | translate}}</a> <a href ng-click=modal.confirm() class=\"modal-action modal-close waves-effect btn primary-btn\">{{'Yes, Assign' | translate}}</a></div></div>"),e.put("app/leave/commonModals/netBalanceBreakdown/net-balance-breakdown-modal.html","<div class=modal id=netBalanceBreakdownModal close-modal-on-transition><div class=modal-content><div class=breakDown><div><span class=left>{{'Available Balance' | translate}}</span> <span class=right>{{modal.valueOfUnused}}</span></div><br><div><span class=left>{{'Total Overdrawn' | translate}}</span> <span ng-if=modal.isLink(modal.valueOfOverdrawn) ui-sref={{modal.overdrawnLeaveLink}} class=\"right valueOfOverdrawn overdrawnLink\" close-modal-on-click=true>-{{modal.valueOfOverdrawn}}</span> <span ng-if=!modal.isLink(modal.valueOfOverdrawn) class=\"right valueOfOverdrawn\">-{{modal.valueOfOverdrawn}}</span></div><br><hr><div><span class=left>{{'Net Balance' | translate}}</span> <span class=right>{{modal.valueOfNetBalance}}</span></div></div></div></div>"),e.put("app/leave/defineLeavePeriod/leavePeriodNotDefined/leave-period-not-defined.html","<section id=dashboard-view class=mainbar></section>"),e.put("app/leave/defineLeaveTypeRule/applyRestriction/leave.define_leave_type_rule_apply_restriction.html",'<div class=pim-container><div id=leaveTypeRuleApplyRestrictionDiv class=form-div><h4>{{leaveTypeRuleApplyRestrictionCtrl.title|translate}}</h4><p>TODO</p><form id=defaultAuthenticationSettingsForm name=defaultAuthenticationSettingsForm ng-class=disabled><div sf-schema=leaveTypeRuleApplyRestrictionCtrl.schema sf-form=leaveTypeRuleApplyRestrictionCtrl.form sf-model=leaveTypeRuleApplyRestrictionCtrl.model></div><div class=right-align><a href ng-hide=!leaveTypeRuleApplyRestrictionCtrl.permissions.update ng-click=leaveTypeRuleApplyRestrictionCtrl.setFormDefaults() class="modal-action modal-close waves-effect waves-green btn">{{\'Reset\'| translate}}</a> <a href ng-click=leaveTypeRuleApplyRestrictionCtrl.onSubmit(defaultAuthenticationSettingsForm); ng-class="{ disabled: defaultAuthenticationSettingsForm.$invalid }" ng-hide=!leaveTypeRuleApplyRestrictionCtrl.permissions.update class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\'| translate}}</a></div></form></div></div>'),
e.put("app/leave/defineLeaveTypeRule/general/leave.define-leave-type-rule-general.html",'<div class=pim-container><div id=leaveTypeRuleGeneralDiv class=form-div><h4>{{leaveTypeRuleGeneralCtrl.title|translate}}</h4><form id=leaveTypeRuleGeneralForm name=leaveTypeRuleGeneralForm ng-class=disabled><div sf-schema=leaveTypeRuleGeneralCtrl.schema sf-form=leaveTypeRuleGeneralCtrl.form sf-model=leaveTypeRuleGeneralCtrl.model></div><div class="schema-form-section form-buttons right-align"><a href ng-hide="!leaveTypeRuleGeneralCtrl.permissions.update || !leaveTypeRuleGeneralCtrl.leaveTypeRule.modifiable" ng-click=leaveTypeRuleGeneralCtrl.setFormDefaults() class="waves-effect waves-green btn">{{\'Reset\'| translate}}</a> <a href ng-click=leaveTypeRuleGeneralCtrl.onSubmit(leaveTypeRuleGeneralForm); ng-hide="!leaveTypeRuleGeneralCtrl.permissions.update || !leaveTypeRuleGeneralCtrl.leaveTypeRule.modifiable" class="waves-effect waves-green btn primary-btn">{{\'Save\'| translate}}</a></div></form></div></div>'),e.put("app/leave/defineLeaveTypeRule/whoCanApply/leave.define_leave_type_rule_who_can_apply.html",'<div class=pim-container><div id=leaveTypeRuleWhoCanApplyDiv class=form-div><h4>{{leaveTypeRuleWhoCanApplyCtrl.title|translate}}</h4><p>TODO</p><form id=defaultAuthenticationSettingsForm name=defaultAuthenticationSettingsForm ng-class=disabled><div sf-schema=leaveTypeRuleWhoCanApplyCtrl.schema sf-form=leaveTypeRuleWhoCanApplyCtrl.form sf-model=leaveTypeRuleWhoCanApplyCtrl.model></div><div class=right-align><a href ng-hide=!leaveTypeRuleWhoCanApplyCtrl.permissions.update ng-click=leaveTypeRuleWhoCanApplyCtrl.setFormDefaults() class="modal-action modal-close waves-effect waves-green btn">{{\'Reset\'| translate}}</a> <a href ng-click=leaveTypeRuleWhoCanApplyCtrl.onSubmit(defaultAuthenticationSettingsForm); ng-class="{ disabled: defaultAuthenticationSettingsForm.$invalid }" ng-hide=!leaveTypeRuleWhoCanApplyCtrl.permissions.update class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\'| translate}}</a></div></form></div></div>'),e.put("app/leave/entitlement/add/add-leave-entitlement.html","<div class=pim-container><div id=addLeaveEntitlementDiv class=form-div><h4>{{vm.title | translate}}</h4><form name=addLeaveEntitlementForm sf-schema=vm.schema sf-form=vm.form sf-model=vm.model ng-submit=vm.onSubmit(addLeaveEntitlementForm)></form></div></div>"),e.put("app/leave/entitlement/add/entitlement-adjust-confirmation.html","<div id=entitlement_confirmation_modal style=\"width: 40%\" class=modal><div class=modal-heading><h4>{{'Update Entitlement'|translate}}</h4></div><div class=modal-content><div><p>{{modal.msg}}</p></div></div><div class=modal-footer><a href ng-click=modal.update() class=\"modal-action modal-close waves-effect btn primary-btn\">{{'Update' | translate}}</a> <a href ng-click=modal.adjust() class=\"modal-action modal-close waves-effect btn primary-btn\">{{'Update and Adjust' | translate}}</a> <a href ng-click=modal.cancel() class=\"modal-action modal-close waves-effect btn\">{{'Cancel' | translate}}</a></div></div>"),e.put("app/leave/entitlement/add/entitlement-bulk-confirmation.html",'<div id=entitlement_confirmation_modal class="modal modal-fixed-footer" style="height: 80%"><div class=modal-heading><h4>{{\'Add Entitlement\' | translate}}</h4></div><div class=modal-content><div class="row col s12 list-container"><list class="col s12" objs=modal.entitlementList listdata=modal.listData.bulkEntitlement extracontroller=modal></list></div></div><div class=modal-footer><a href ng-click=modal.confirm() class="modal-action modal-close waves-effect btn primary-btn">{{\'Confirm\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect btn">{{\'Cancel\' | translate}}</a></div></div>'),e.put("app/leave/entitlement/add/entitlement-confirmation.html",'<div id=entitlement_confirmation_modal class="modal modal-fixed-footer" style="height:30%;width: 30%"><div class=modal-heading><h4>{{\'Add Entitlement\' | translate}}</h4></div><div class=modal-content><div class=modal-body><div style="padding-left: 10px"><span>{{modal.msg}}</span></div></div></div><div class=modal-footer><a href ng-click=modal.confirm() class="modal-action modal-close waves-effect btn primary-btn">{{\'Confirm\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect btn">{{\'Cancel\' | translate}}</a></div></div>'),e.put("app/leave/entitlement/add/progress_modal.html",'<div id=progressModal class="modal modal-fixed-footer" style="width: 40%; height:20%"><h4>{{modal.progressModalTitle | translate}}</h4><div class=modal-content style="height: 30%; overflow-y:hidden"><div class=row><div class=progress style=margin-top:5%><div class=determinate ng-attr-style="width: {{modal.progress}}"></div></div></div></div></div>'),e.put("app/leave/entitlement/edit/edit-leave-entitlement.html",'<div class=pim-container><div id=editLeaveEntitlementDiv class=form-div><h4>{{vm.title | translate}}</h4><form name=editLeaveEntitlementForm sf-schema=vm.schema sf-form=vm.form sf-model=vm.model ng-submit=vm.onSubmit(editLeaveEntitlementForm) style="padding-left: 20px"></form></div><div class="row col s12" ng-show="vm.commentList.length>0"><h4>{{vm.commentTitle | translate}}</h4><div class="row col s12 list-container"><div ng-repeat="comment in vm.commentList | orderBy:\'-created\' track by comment.id" class="row col s12" style="padding-left: 0px"><div class=valign-wrapper><img class="comment-icon valign" src=images/pim/comment.png> <span style="padding-left: 14px" class="s3 comment-by valign entitlementEditCreatorNameHolder"><b>{{comment.created_by_name}}:</b></span> <span class="s9 comment-text valign entitlementEditCommentHolder comment-text-pre-wrap">{{comment.comment}}</span></div><div><span class="s9 comment-date">{{comment.created|localizedDateTime}}</span></div></div></div></div></div>'),e.put("app/leave/entitlement/view/view-leave-entitlement.html","<div class=pim-container><div id=searchLeaveEntitlementDiv class=form-div><h4>{{'Search' | translate}} <span style=\"font-size: 12px;font-weight:normal\">({{'Please specify your search'| translate}})</span> <a href title=\"{{vm.showSearchFilters ? 'Collapse' : 'Expand'| translate}}\" ng-click=vm.toggleFilters()><i class=material-icons>{{vm.showSearchFilters ? 'arrow_drop_up' : 'arrow_drop_down'}}</i></a></h4><form ng-show=vm.showSearchFilters name=searchLeaveEntitlementForm sf-schema=vm.schema sf-form=vm.form sf-model=vm.model ng-submit=vm.onSubmit(searchLeaveEntitlementForm)></form><div ng-show=vm.permissions.create class=\"fixed-action-btn floating-add-btn tooltipped\" data-tooltip=\"{{'Add Entitlement' | translate}}\" data-position=left><a class=\"btn-floating btn-large waves-effect waves-light\" href=#/leave/add_leave_entitlement><i class=material-icons>add</i></a></div></div><div ng-if=vm.showResult id=viewLeaveEntitlement><crud-panel panelinfo=vm.panelInfo objs=vm.leaveEntitlement listdata=vm.listData extracontroller=vm></crud-panel></div></div>"),e.put("app/leave/entitlement/viewMy/view-my-entitlement-navbar.html",'<ul><li><a href ng-click=navbar.filter() class="tooltipped action-icon" data-tooltip="{{\'Filter\' | translate}}" data-position=bottom><i class=material-icons>oxd_filter</i></a></li></ul>'),e.put("app/leave/entitlement/viewMy/view-my-leave-entitlement-filter.html",'<div id=modal1 class="modal modal-fixed-footer" style="height: 50%"><h4>{{\'Filter My Leave Entitlements By\' | translate}}</h4><form name=atModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ng-click=modal.search(atModalForm) class="modal-action waves-effect btn primary-btn">{{\'Search\'| translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/leave/entitlement/viewMy/view-my-leave-entitlement.html","<div class=pim-container><div id=viewMyLeaveEntitlement><crud-panel panelinfo=vm.panelInfo objs=vm.leaveEntitlement listdata=vm.listData extracontroller=vm></crud-panel></div></div>"),e.put("app/leave/holidays/edit/leave-edit-holiday-modal.html",'<div id=editHolidayModal class="modal modal-fixed-footer" style="width: 60%; height: 80%; min-height: 80%"><h4>{{modal.modalProperties.title | translate}}</h4><form name=editHolidaysModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div><div class=row><div class="input-field col s12"><label ng-class="{\'active\' : (modal.model.operational_country_id !=\'\')}">{{ "Location" | translate}}<em>*</em></label></div><div class="input-field col s12" ng-if="modal.model.operational_country_id==\'\'"><label>({{ "Not Defined" | translate}})</label></div><div class=input-field ng-repeat="(id, location) in modal.locationList[modal.model.operational_country_id]"><div ng-class="$index%4==3 ? \'row\':\'\'" class><div class="col s3"><input type=checkbox id=selected_country_{{location}} name ng-model=modal.model.location[id] class=filled-in require-any=groupLocation> <label for=selected_country_{{location}}>{{location | translate}}</label></div></div></div><div class="input-field col s12"><span class=help-block ng-show=editHolidaysModalForm.$invalid translate=Required></span></div></div><div class=row></div><div class="row requiredHelperText"><div class=helpvalue><em>*</em> {{"Required field" | translate}}</div></div></div><div class=modal-footer><a href ohrm-save-form=modal.checkLeaveOnHoliday(editHolidaysModalForm); form-name=editHolidaysModalForm close-modal-on-click=editHolidaysModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/leave/holidays/navbar/leave-holiday-navbar.html",'<ul style="display: flex"><li ng-if=navbar.permissions.read class="tooltipped center-align" data-tooltip="{{\'Filter\' | translate}}" data-position=bottom><a href ng-click=navbar.filter() class=action-icon><i class=material-icons>oxd_filter</i></a></li></ul>'),e.put("app/leave/holidays/search/leave-holiday-search.html",'<div id=holiday_search_modal class="modal modal-fixed-footer" style="width: 60%; height: 80%; min-height: 80%"><h4>{{\'Filter Holidays\' | translate}}</h4><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.filters extracontroller=modal></div><div class=row><div class="input-field col s12"><label ng-class="{\'active\' : (modal.filters.operationalCountryId !=\'\')}">{{ "Location" | translate}}</label></div><div class="input-field col s6" ng-if="modal.filters.operationalCountryId==\'\'"><label>({{ "Not Defined" | translate}})</label></div><div class=input-field ng-repeat="(id, location) in modal.locationList[modal.filters.operationalCountryId]"><div ng-class="$index%4==3 ? \'row\':\'\'" class><div class="col s3"><input type=checkbox id=selected_country_{{location}} name ng-model=modal.filters.location[id] class=filled-in> <label for=selected_country_{{location}}>{{location | translate}}</label></div></div></div></div></div><div class=modal-footer><a href ng-click=modal.search() class="modal-action modal-close waves-effect btn primary-btn">{{\'Search\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect btn">{{\'Cancel\' | translate}}</a></div></div>'),e.put("app/leave/holidays/view/leave-holidays.html",'<div class=pim-container><div id=leaveHolidaysDiv><crud-panel panelinfo=holidaysCtrl.panelInfo.holidaysInfo objs=holidaysCtrl.holidays listdata=holidaysCtrl.listData.holidays initialsortfield="\'invalid\'" extracontroller=holidaysCtrl></crud-panel><div ng-if=holidaysCtrl.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Holiday\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=holidaysCtrl.addHoliday()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/leave/leaveList/modal/leave-list-brought-forward-confirmation.html","<div id=leaveList_brought_forward_modal class=\"modal modal-fixed-footer\" style=\"height:30%;width: 30%\"><div class=modal-heading><h4>{{'Brought Forward' | translate}} - {{'Confirmation Required'| translate}}</h4></div><div class=modal-content><div class=modal-body><div style=\"padding-left: 10px\"><span>{{'The request is in the past leave period.'| translate}} {{'Adjust the leave brought forward accordingly?'| translate}}</span></div></div></div><div class=modal-footer><a ng-click=modal.confirm() class=\"modal-action waves-effect btn primary-btn\">{{'Yes' | translate}}</a> <a ng-click=modal.cancel() class=\"modal-action waves-effect btn\">{{modal.cancelText | translate}}</a></div></div>"),e.put("app/leave/leaveList/modal/leave-list-comment.html",'<div id=leaveList_confirmation_modal class="modal modal-fixed-footer" style="height: 80%"><div class=modal-heading><h4>{{modal.title | translate}}</h4></div><div class=modal-content><div ng-show=modal.createComment id=editLeaveEntitlementDiv class=form-div><div style="padding-left: 0px" class=valign-wrapper><img class="circle list-photo valign" ng-src=../index.php/pim/viewPhoto/empNumber/{{modal.leaveRequest.Employee.empNumber}}/size/small src=../index.php/pim/viewPhoto/empNumber/{{modal.leaveRequest.Employee.empNumber}}/size/small><span class="valign comment-by" style="padding-left: 5px"><b>{{modal.employeeName}}</b></span></div><form name=leaveListCommentForm sf-schema=modal.schema sf-form=modal.form sf-model=modal.model ng-submit=modal.save(leaveListCommentForm)></form></div><div ng-show=modal.noPermissionForComment class="row col s12" style="padding-left: 50px;"><span>{{"You don\'t have permissions to comment on this leave request" | translate}}</span></div><div class="row col s12" style="padding-left:30px; padding-top: 10px;" ng-show="modal.commentList.length>0"><div class="row col s12 list-container"><div ng-repeat="comment in modal.commentList | orderBy:\'-created\' track by comment.id" class="row col s12"><img class=comment-icon src=images/pim/comment@2x.svg> <span class="s3 comment-by"><b>{{comment.created_by_name}}:</b></span> <span class="s9 comment-date" style="white-space: pre;padding-left: 34px">{{comment.date | ohrmDateFilter}} {{comment.time}}</span><br><div class="s9 comment-text comment-text-pre-wrap">{{comment.comments}}</div></div></div></div></div><div class=modal-footer><a ng-show=modal.createComment close-modal-on-click=!leaveListCommentForm.$invalid href ng-click=modal.save(leaveListCommentForm) class="modal-action waves-effect btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect btn">{{\'Cancel\' | translate}}</a></div></div>'),e.put("app/leave/leaveList/modal/leave-list-nomenee.html",'<div id=leaveList_confirmation_modal class="modal modal-fixed-footer" style="height: 80%"><div class=modal-heading><h4>{{"Nominees" | translate}}</h4></div><div class=modal-content><div ng-if=!modal.isEditMode><div style="padding-left: 0px" class=row ng-repeat="employeeNominee in modal.employeeNominees track by employeeNominee.id" ng-if="modal.employeeNominees.length > 0"><div class="col s5"><div class=valign-wrapper><img class="circle list-photo valign" src="{{\'../index.php/leave/viewPhoto/empNumber/\'+employeeNominee.Employee.empNumber + \'/size/small\'}}"><span class="valign comment-by" style="padding-left: 5px"><b>{{employeeNominee.Employee.firstName + " " + employeeNominee.Employee.lastName}} <span ng-if=employeeNominee.Employee.termination_id>({{\'Past Employee\'| translate}})</span></b></span></div></div><div class="col s7 comment-text-pre-wrap" style="padding-top: 6px;">{{employeeNominee.note}}</div></div><div style="padding-left: 0px" class=row ng-if="modal.employeeNominees.length == 0"><div class="col s5"><div class=valign-wrapper><img class="circle list-photo valign" src="{{\'../index.php/leave/viewPhoto/empNumber/\'}}"><span class="valign comment-by" style="padding-left: 5px"><b>{{\'No Nominees Added\' | translate}}</b></span></div></div></div></div><div ng-if=modal.isEditMode><form name=leaveNomineeForm sf-schema=modal.schema sf-form=modal.form sf-model=modal.model ng-submit=modal.save(leaveNomineeForm)></form></div></div><div class=modal-footer><a href ng-click=modal.cancel() class="modal-action modal-close waves-effect btn">{{\'Close\' | translate}}</a> <a href ng-if="modal.canEdit && modal.isEditMode" ng-click=modal.save() class="modal-action waves-effect btn primary-btn">{{ \'Save\' | translate}}</a> <a href ng-if=modal.canEdit ng-click=modal.editModeSwitch() class="modal-action waves-effect btn primary-btn">{{ (modal.isEditMode ? \'View\' : \'Edit\') | translate}}</a></div></div>'),e.put("app/leave/leaveList/modal/leave-list-overlap-balance.html",'<div id=leaveList_balance_modal class=modal><div class=modal-heading><h4>{{modal.title | translate}}</h4></div><div class=modal-content><div class=modal-body><table class="highlight bordered"><thead><tr><th>{{\'Leave Period\' | translate}}</th><th>{{\'Net Leave Balance\' | translate}}</th></tr></thead><tr><td>{{modal.data[0].start | ohrmDateFilter}} - {{modal.data[0].end | ohrmDateFilter}}</td><td><span class=leave-balance-link ng-click="modal.showNetBalanceBreakDown($event, modal.data[0])">{{modal.data[0].net_balance + " " + modal.durationUnit}}</span></td></tr><tr><td>{{modal.data[1].start | ohrmDateFilter}} - {{modal.data[1].end | ohrmDateFilter}}</td><td><span class=leave-balance-link ng-click="modal.showNetBalanceBreakDown($event, modal.data[1])">{{modal.data[1].net_balance + " " + modal.durationUnit}}</span></td></tr></table></div></div><div class=modal-footer><a href ng-click=modal.cancel() class="modal-action modal-close waves-effect btn">{{\'Ok\' | translate}}</a></div></div>'),e.put("app/leave/leaveList/modal/show-balance.html",'<div id=application_balance_modal class="modal modal-fixed-footer modal-with-table timeline_balance_modal"><div class=modal-heading><h4>{{\'Leave Balance\' | translate}}: {{modal.leaveType.name}} ({{modal.period}})</h4></div><div class=modal-content><div class=modal-body><crud-panel objs=modal.balanceBreakdown listdata=modal.listData extracontroller=modal></crud-panel></div></div><div class=modal-footer><div class=row style="padding-right: 30px"><a ng-click=modal.cancel() class="modal-action waves-effect btn primary-btn">{{\'Close\' | translate}}</a> <a ng-if=modal.showNext ng-click=modal.nextPeriod() class="modal-action waves-effect btn">{{\'Next\' | translate}}</a> <a ng-if=modal.showPrev ng-click=modal.prevPeriod() class="modal-action waves-effect btn">{{\'Previous\' | translate}}</a></div></div></div>'),e.put("app/leave/leaveList/view/leave-list.html",'<div class=list-container ng-if=vm.showResults><ul ng-if=vm.listConfigPermissions.update id=list-options-dropdown class=dropdown-content><li id=listdirective-options-dropdown-select-all><a href ng-click=vm.configureList()>{{\'Configure\'| translate}}</a></li></ul><table class="highlight bordered" ng-if=vm.requests><thead><tr><th ng-if="::(!vm.hideEmployeeColumn && vm.listConfig.emp_id)" data-field=emp_id ng-click="vm.sortBy(\'emp_id\')" class="sortable row-name">{{\'Employee Id\' | translate}}<i class=material-icons>{{vm.getSortIcon(\'emp_id\')}}</i></th><th ng-if="::(!vm.hideEmployeeColumn && vm.listConfig.employee)" data-field=employee ng-click="vm.sortBy(\'employee\')" class="sortable row-name">{{\'Employee\' | translate}}<i class=material-icons>{{vm.getSortIcon(\'employee\')}}</i></th><th ng-if=vm.listConfig.listJobTitle data-field=listJobTitle class=row-name>{{\'Job Title\' | translate}}</th><th ng-if=vm.listConfig.listEmploymentStatus data-field=listEmploymentStatus class=row-name>{{\'Employment Status\' | translate}}</th><th ng-if=vm.listConfig.subUnit data-field=subUnit class=row-name>{{\'Sub Unit\' | translate}}</th><th ng-if=vm.listConfig.employeeLocation data-field=employeeLocation class=row-name>{{\'Location\' | translate}}</th><th ng-if=vm.listConfig.listJobCategory data-field=listJobCategory class=row-name>{{\'Job Category\' | translate}}</th><th ng-if=vm.listConfig.listWorkShift data-field=listWorkShift class>{{\'Work Shift\' | translate}}</th><th ng-if=vm.listConfig.dateRange data-field=date ng-click="vm.sortBy(\'date\')" class="sortable row-name">{{\'Date\' | translate}}<i class=material-icons>{{vm.getSortIcon(\'date\')}}</i></th><th ng-if=vm.listConfig.appliedDate data-field=date_applied ng-click="vm.sortBy(\'date_applied\')" class="sortable row-name">{{\'Applied On\' | translate}}<i class=material-icons>{{vm.getSortIcon(\'date_applied\')}}</i></th><th ng-if="::(!vm.hideEmployeeColumn && vm.costCenterEnabled && vm.listConfig.costCentre)" data-field=costCentre ng-click="vm.sortBy(\'costCentre\')" class="sortable row-name">{{\'Cost Center\' | translate}}<i class=material-icons>{{vm.getSortIcon(\'costCentre\')}}</i></th><th ng-if=vm.listConfig.leaveType data-field=leaveType ng-click="vm.sortBy(\'leaveType\')" class="sortable row-name">{{\'Leave Type\' | translate}}<i class=material-icons>{{vm.getSortIcon(\'leaveType\')}}</i></th><th ng-if=vm.listConfig.balance colspan=2 class=balance-column data-field=leaveBalance>{{\'Net Leave Balance\' | translate}}</th><th ng-if=vm.listConfig.requestedDuration colspan=2 class=balance-column data-field=requestedDuration>{{\'Requested Duration\' | translate}}</th><th ng-if=::vm.showOverdrawn colspan=2 class=balance-column data-field=leaveOverdrawnAmount>{{\'Overdrawn\' | translate}}</th><th ng-if=vm.listConfig.status data-field=status class>{{\'Status\' | translate}}</th><th data-field=action-select class>{{\'Actions\' | translate}}</th><th data-field=action-panel class></th></tr></thead><tbody><tr ng-repeat="request in ::vm.list track by request.id"><td class=leave-link-cell ng-if="::(!vm.hideEmployeeColumn && vm.listConfig.emp_id)" ng-bind=::request.emp_id ng-click="vm.viewDetail({id: request.id})"></td><td class=leave-link-cell ng-if="::(!vm.hideEmployeeColumn && vm.listConfig.employee)" ng-bind=::request.employee ng-click="vm.viewDetail({id: request.id})"></td><td class=leave-link-cell ng-if=vm.listConfig.listJobTitle ng-bind-html=request.jobTitle ng-click="vm.viewDetail({id: request.id})"></td><td class=leave-link-cell ng-if=vm.listConfig.listEmploymentStatus ng-bind-html=request.employmentStatus ng-click="vm.viewDetail({id: request.id})"></td><td class=leave-link-cell ng-if=vm.listConfig.subUnit ng-bind-html=request.subUnit ng-click="vm.viewDetail({id: request.id})"></td><td class=leave-link-cell ng-if=vm.listConfig.employeeLocation ng-bind-html=request.location ng-click="vm.viewDetail({id: request.id})"></td><td class=leave-link-cell ng-if=vm.listConfig.listJobCategory ng-bind-html=request.jobCategory ng-click="vm.viewDetail({id: request.id})"></td><td class=leave-link-cell ng-if=vm.listConfig.listWorkShift ng-bind-html=request.workShift ng-click="vm.viewDetail({id: request.id})"></td><td class=leave-link-cell ng-if=vm.listConfig.dateRange ng-bind-html=request.dateRange ng-click="vm.viewDetail({id: request.id})"></td><td class=leave-link-cell ng-if=vm.listConfig.appliedDate ng-bind-html=request.appliedDate ng-click="vm.viewDetail({id: request.id})"></td><td class=leave-link-cell ng-if="::(!vm.hideEmployeeColumn && vm.costCenterEnabled && vm.listConfig.costCentre)" ng-bind=::request.costCentre ng-click="vm.viewDetail({id: request.id})"></td><td class=leave-link-cell ng-if=vm.listConfig.leaveType ng-bind=::request.leaveType ng-click="vm.viewDetail({id: request.id})"></td><td ng-if=vm.listConfig.balance class=right-align><span class=net-leave-balance-content><div ng-if=!vm.balance[request.id] class=progress style="width: 50%"><div class=indeterminate></div></div><span ng-if="vm.balance[request.id] && typeof (vm.balance[request.id].balance_data) !== \'undefined\' && !vm.isArray(vm.balance[request.id].balance_data)"><span ng-class="{\'leave-balance-link\': vm.isNetBalanceLink(vm.balance[request.id])}" ng-click="vm.showNetBalanceBreakDown($event, vm.balance[request.id], request.hourBased)">{{vm.balance[request.id].balance_data.net_balance}}</span></span></span></td><td ng-if=vm.listConfig.balance class=unit-column><span class=net-leave-balance-content><div ng-if=!vm.balance[request.id] class=progress style="width: 50%"><div class=indeterminate></div></div><span ng-if="vm.balance[request.id] && typeof (vm.balance[request.id].balance_data) !== \'undefined\' && !vm.isArray(vm.balance[request.id].balance_data)"><span ng-class="{\'leave-balance-link\': vm.isNetBalanceLink(vm.balance[request.id])}" ng-click="vm.showNetBalanceBreakDown($event, vm.balance[request.id], request.hourBased)">{{request.durationUnit}}</span></span> <i ng-if="vm.balance[request.id] && typeof (vm.balance[request.id].balance_data) !== \'undefined\' && vm.isArray(vm.balance[request.id].balance_data)" class="material-icons action-icon tooltipped multi-period-balance-indicator" data-tooltip="{{\'Balance\'| translate}}" ng-click="vm.showOverlapBalance(vm.balance[request.id].balance_data, request.hourBased)">more_horiz</i> <span class=timeline-container ng-if=vm.balance[request.id].show_breakdown><a class="material-icons action-icon tooltipped" data-tooltip="{{\'Leave Expiry Timeline\'| translate}}" ng-click=vm.showBalance(request.obj.data)>history</a></span></span></td><td class="leave-link-cell right-align" ng-if=vm.listConfig.requestedDuration ng-bind=::request.requestedDuration ng-click="vm.viewDetail({id: request.id})"></td><td class="leave-link-cell unit-column" ng-if=vm.listConfig.requestedDuration ng-bind=::request.durationUnit ng-click="vm.viewDetail({id: request.id})"></td><td class="leave-link-cell right-align" ng-if=::vm.showOverdrawn ng-bind=::request.overdrawnAmount ng-click="vm.viewDetail({id: request.id})"></td><td class="leave-link-cell unit-column" ng-if=::vm.showOverdrawn ng-bind=::request.durationUnit ng-click="vm.viewDetail({id: request.id})"></td><td class=leave-link-cell ng-if=vm.listConfig.status ng-bind-html=request.status ng-click="vm.viewDetail({id: request.id})"></td><td class=action-wrapper><select ng-if=request.showActions ohrm-select not-scrollable=true ng-change="vm.onChangeAction({request: request.obj})" ng-model=vm.selectedActions[request.id]><option value>{{\'Select Action\' | translate}}</option><option ng-repeat="option in request.allowedActions track by option.id" value={{option.id}}>{{option.name | translate}}</option></select><i ng-if=!request.showActions ng-click="vm.viewDetail({id: request.id})" class="material-icons action-icon tooltipped" data-tooltip="{{ \'Go to Detailed View\' | translate}}">more_horiz</i></td><td><div class="left-align right valign-wrapper leave-list-action-icon-panel"><a class="tooltipped action-icon leave-list-action-icon-container" ng-if="(request.obj.data.LeaveRequestEmployeeNomineeState) && (request.obj.data.employeeNomineeEnabled || (request.obj.data.LeaveRequestEmployeeNominee && request.obj.data.LeaveRequestEmployeeNominee.length))" data-tooltip="{{\'Nominees\' | translate }} {{\'(\' + request.obj.data.LeaveRequestEmployeeNominee.length+\')\'}}" ng-class="( request.obj.data.LeaveRequestEmployeeNominee && request.obj.data.LeaveRequestEmployeeNominee.length > 0 ) ? \'active-leave-list-action-icon\': \'inactive-leave-list-action-icon\'" ng-click=vm.showNominee(request.obj.data)><i class="material-icons valign" style="font-size: 14px; line-height: 24px;">oxd_multi_user</i></a> <a data-tooltip="{{\'Download Attachment\' | translate}}" class="tooltipped action-icon leave-list-action-icon-container active-leave-list-action-icon" ng-if="request.obj.leave.attachment.id >0" ng-click=vm.downloadAttachment(request.obj.leave.attachment.id)><div style="position: relative; display: inline-block"><i class="material-icons valign" style="font-size: 13.5px; line-height: 24px; color: white; display: block">oxd_attachment</i><div class="action-icon leave-list-action-icon-container" style="box-shadow: 0px 3px 3px rgba(0, 0, 0, 0.15); background-color: white;position: absolute; z-index: 100; padding: 3px; min-width: 15px;min-height: 15px; left: 9px; top: 20px"><i class="material-icons valign" style="color: #64728c !important; font-size: 10px;">oxd_download_small</i></div></div></a> <a data-tooltip="{{\'Attachment Pending\' | translate}}" class="tooltipped action-icon leave-list-action-icon-container" style="cursor: default;" ng-if="( (request.obj.data.leaveRequestAttachmentConfiguration.id && request.obj.data.leaveRequestAttachmentConfiguration.id != \'0\' ) && !request.obj.leave.attachment)"><i class="material-icons valign" style="font-size: 13.5px; line-height: 24px; color: #929baa;">oxd_attachment</i></a> <a data-tooltip="{{ \'Comments\' | translate}}" class="tooltipped action-icon leave-list-action-icon-container" ng-class="( request.obj.data.recentlyAddedLeaveRequestComment || (request.obj.data.LeaveRequestComment && request.obj.data.LeaveRequestComment.length > 0) ) ? \'active-leave-list-action-icon\': \'inctive-leave-list-action-icon\'" ng-click="vm.showComments({leaveRequest: request.obj.data})"><i class="material-icons valign" style="font-size: 14px; line-height: 24px; color: #64728c;">ohrm_comment_oxd</i></a></div></td></tr></tbody></table><ohrm-pagination count={{vm.pageInfo.total}} page={{vm.pageInfo.page}} page-size={{vm.pageInfo.size}} change-page-size=vm.changePageSize change-page=vm.changePage></ohrm-pagination></div>'),e.put("app/leave/leaveList/view/view-leave-list.html",'<div class=pim-container ng-show="vm.state.current.name === \'leave.view_leave_list\' || vm.state.current.name === \'leave.balance_report.view_leave_list\' || vm.state.current.name === \'leave.my_balance_report.view_leave_list\'"><div ng-show=vm.showSearch id=searchLeaveListContainer class=form-div><div style="display: flex; justify-content: space-between"><div style="display: flex; align-items: flex-end"><h4 style="margin-bottom: unset;">{{\'Search\'|translate}} <span style="font-size: 12px;font-weight:normal;">({{\'Please specify your search\'|translate}})</span></h4><i class="material-icons tooltipped" style="color: #ff9013; cursor: pointer; margin-left: 15px" data-tooltip="{{ \'iCalendar Feed\' | translate}}" ng-click=vm.showCalendarFeedModal() ng-if=vm.isCalendarFeedEnabled>oxd_icalendar_feed</i></div><a href title="{{vm.showSearchFilters ? \'Collapse\' : \'Expand\'| translate}}" ng-click=vm.toggleFilters()><i class=material-icons>{{vm.showSearchFilters ? \'arrow_drop_up\' : \'arrow_drop_down\'}}</i></a></div><form ng-show=vm.showSearchFilters name=searchLeaveList id=searchLeaveList><div sf-schema=vm.schema sf-form=vm.form sf-model=vm.model ng-submit=vm.onSubmit(searchLeaveList)></div><div class=row><div class="col l12 right-align"><a href class="modal-action modal-close waves-effect waves-green btn" ng-click=vm.resetSearch()>{{\'Reset\' | translate}}</a> <a href class="modal-action modal-close waves-effect waves-green btn" ng-click=vm.exportSummary()>{{\'Export Summary\' | translate}}</a> <a href class="modal-action modal-close waves-effect waves-green btn" ng-click=vm.exportDetail()>{{\'Export Detail\' | translate}}</a> <button class="btn waves-effect waves-green" type=submit ng-click=vm.onSubmit(searchLeaveList)>{{\'Search\'| translate}}</button></div></div></form></div><div ng-if=vm.showResult id=viewLeaveEntitlement><h4 ng-show=!vm.showSearch>{{\'Leave List\'|translate}} - {{vm.empName}}</h4><div class=row><div class="col l6 left left-align" style="padding-left: 0;" ng-if=!vm.hideListConfig><list-config-option list-name=vm.listName header-of-modal=vm.modalHeader apply-for-all-employees-label=vm.applyForAllEmployeesLabel conditional-fields=vm.conditionalFields special-messages-for-fields=vm.specialMessagesForFields max-no-of-fields=vm.maxNoOfFields></list-config-option></div><div class="col l6 right right-align" style="padding-right: 0;"><button class="btn waves-effect waves-green" type=button ng-click=vm.saveStatus() ng-if=vm.hasPerformableActions()>{{\'Save\'| translate}}</button></div></div><leave-list requests=vm.requestList page-info=vm.pageInfo balance=vm.balance view-detail=vm.goToDetail(id) fetch=vm.updateList() on-change-action=vm.actionOnChange(request) show-comments="vm.showComments(leaveRequest, leave)" hide-employee-column=vm.hideEmployeeColumn show-overdrawn=vm.showOverdrawn selected-actions=vm.listModel cost-center-enabled=vm.costCenterEnabled></leave-list></div></div><div ui-view></div>'),
e.put("app/leave/leaveList/viewDetail/view-leave-list-detail.html",'<div class=pim-container><div id=searchLeaveEntitlementDiv class=form-div><h4 class=valign-wrapper><img class="circle list-photo valign" ng-src=../index.php/pim/viewPhoto/empNumber/{{vmDetail.leaveRequest.data.emp_number}}/size/small src=../index.php/pim/viewPhoto/empNumber/{{vmDetail.leaveRequest.data.emp_number}}/size/small><span class=valign style="padding-left: 5px">{{vmDetail.employeeName}}</span></h4><div class=row><div class=section><span><b>{{ \'Requested for\'| translate}}:</b> {{vmDetail.dateRange}}</span><br><span><b>{{ \'Applied on\' | translate}}:</b> {{vmDetail.leaveRequest.data.date_applied}}</span></div></div><crud-panel objs=vmDetail.leaveList listdata=vmDetail.listData extracontroller=vmDetail></crud-panel><div class=row style="padding-top: 10px;"><div ng-if=vmDetail.hasPerformableActions() class="col l12 right-align" style="padding-left: 30px; padding-right: 0;"><button class="btn waves-effect waves-green" type=button ng-click=vmDetail.saveStatus()>{{\'Save\'|translate}}</button></div></div><div class=row style="padding-right: 0; margin-bottom: 0;"><div class="col l12 right-align" style="padding-right: 0;"><a style="text-decoration: underline" ng-click=vm.showComments(vmDetail.leaveRequest.data,null)><b>{{\'View Leave Request Comments\'| translate}}</b></a></div></div></div><div ng-show=!vmDetail.attachmentDisabled id=leaveAttachmentDiv class=form-div><h4>{{\'Attachment\'|translate}}</h4><form name=leaveAttachmentForm sf-schema=vmDetail.attachmentSchema sf-form=vmDetail.attachmentForm sf-model=vmDetail.model ng-submit=vmDetail.saveAttachment()></form></div></div>'),e.put("app/leave/leaveList/viewMy/view-my-leave-list.html",'<div class=pim-container ng-show="vm.state.current.name === \'leave.view_my_leave_list\' || vm.state.current.name === \'leave.my_balance_report.view_leave_list\'"><div ng-show=vm.showSearch id=searchLeaveListContainer class=form-div><div style="display: flex; justify-content: space-between"><div style="display: flex; align-items: flex-end"><h4 style="margin-bottom: unset;">{{\'Search\'|translate}} <span style="font-size: 12px;font-weight:normal;">({{\'Please specify your search\'|translate}})</span></h4><i class="material-icons tooltipped" style="color: #ff9013; cursor: pointer; margin-left: 15px" data-tooltip="{{ \'iCalendar Feed\' | translate}}" ng-click=vm.showCalendarFeedModal() ng-if=vm.isCalendarFeedEnabled>oxd_icalendar_feed</i></div><a href title="{{vm.showSearchFilters ? \'Collapse\' : \'Expand\'| translate}}" ng-click=vm.toggleFilters()><i class=material-icons>{{vm.showSearchFilters ? \'arrow_drop_up\' : \'arrow_drop_down\'}}</i></a></div><form ng-show=vm.showSearchFilters name=searchLeaveList id=searchLeaveList><div sf-schema=vm.schema sf-form=vm.form sf-model=vm.model ng-submit=vm.onSubmit(searchLeaveList)></div><div class=row><div class="col l12 right-align"><a href class="modal-action modal-close waves-effect waves-green btn" ng-click=vm.resetSearch()>{{\'Reset\' | translate}}</a> <button class="btn waves-effect waves-green" type=submit ng-click=vm.onSubmit(searchLeaveList)>{{\'Search\'|translate}}</button></div></div></form></div><div ng-if=vm.showResult id=viewLeaveEntitlement><div class=row style="margin-bottom: 0;"><div class="col l12 right-align" style="padding-right: 0;"><button class="btn waves-effect waves-green" type=button ng-click=vm.saveStatus() ng-if=vm.hasPerformableActions()>{{\'Save\'| translate}}</button></div></div><crud-panel objs=vm.requestList listdata=vm.listData initialsortfield="\'employee\'" extracontroller=vm></crud-panel></div></div><div ui-view></div>'),e.put("app/leave/reports/balanceReport/leave-balance-report.html",'<div class=pim-container id=leaveBalanceReport ng-show="vm.state.current.name === \'leave.balance_report\' || vm.state.current.name === \'leave.my_balance_report\'"><div ng-cloak class=form-div ng-hide=vm.model.myLeaveBalance><h4>{{\'Search\' | translate}} <span style="font-weight: initial;">({{\'Please specify your search\' | translate}})</span> <a href title="{{\'Expand\'| translate}}" ng-click=vm.toggleFilters()><i class=material-icons>{{vm.showSearchFilters ? \'arrow_drop_up\' : \'arrow_drop_down\'}}</i></a></h4><form ng-show=vm.showSearchFilters id=leaveBalanceReportFilterForm sf-schema=vm.schema name=vm.submitForm sf-form=vm.form sf-model=vm.model ng-submit=vm.onSubmit()></form></div><div ng-if="vm.results.length > 0"><div class=row><div class="s2 col left left-align"><span ng-if=!vm.showListConfig()>&nbsp;</span><list-config-option ng-if=vm.showListConfig() list-name=vm.listConfigurationParams.listName header-of-modal=vm.listConfigurationParams.modalHeader apply-for-all-employees-label=vm.listConfigurationParams.applyForAllEmployeesLabel conditional-fields=vm.listConfigurationParams.conditionalFields special-messages-for-fields=vm.listConfigurationParams.specialMessagesForFields max-no-of-fields=vm.listConfigurationParams.maxNoOfFields report-id=vm.reportId></list-config-option></div><div class="s10 col right-align periodButtonHolder"><ul style=display:inline-flex;margin-top:0;margin-bottom:0;><li class="prevPeriod tooltipped" ng-class="{inactivePeriod: vm.model.period_offset != -1 }" data-tooltip="{{\'Previous Period\' | translate}}"><i ng-click=vm.prevPeriod() class=material-icons>keyboard_arrow_left</i></li><li><a class=periodTitle>{{vm.periodTitle | translate}}</a></li><li class="nextPeriod tooltipped" ng-class="{inactivePeriod: vm.model.period_offset != 1 }" data-tooltip="{{\'Next Period\'| translate}}"><i ng-click=vm.nextPeriod() class=material-icons>keyboard_arrow_right</i></li></ul></div></div><div class="row reportDataHolder"><div ng-cloak class="form-div report-results-container"><table class="highlight list-table bordered compact-table report-results"><colgroup ng-repeat="group in vm.meta.headers"><col ng-repeat="(fieldName, heading) in group" ng-if=vm.isColGroupApplicable(fieldName)></colgroup><thead><tr class=group-headings><td ng-repeat="header in vm.headers.main" colspan={{header.colSpan}} ng-class="{group: header.isGroup, first: header.first, last: header.last}" rowspan={{header.rowSpan}} translate={{header.label}}></td></tr><tr><td ng-repeat="subHeader in vm.headers.sub" colspan={{subHeader.colSpan}} ng-style="subHeader.width && {\'min-width\': subHeader.width + \'px\'}" ng-class="{first: subHeader.first, last: subHeader.last, numeric: subHeader.align === \'right\', sortableSubHeading: !!subHeader.sortField}" rowspan={{subHeader.rowSpan}} ng-click="subHeader.sortField != \'\' && vm.sortBy(subHeader)" ng-show=subHeader.selectedToBeVisible>{{subHeader.label | translate}} <i ng-if="subHeader.sortField != \'\' && subHeader.fieldName && (subHeader.fieldName == vm.sort || (\'-\'+subHeader.fieldName) == vm.sort)" class="material-icons list-sorting-icons tiny">{{vm.getSortIcon(subHeader)}}</i></td></tr></thead><tbody><tr ng-repeat="result in vm.formattedResults" ohrm-disable-animation><td ng-cloak ng-repeat="value in result.values track by $index" ng-show="vm.isVisibleCell(result, $index)" ui-sref={{vm.getUiSref(value,$index,$parent.$index)}} ng-class="{\'numeric\': vm.isRightAlign($index),\'link\': vm.isLeaveLink(value , $index, result.values), \'markedLink\': vm.isMarkedLink(value, $index)}" is-timeline-cell="vm.isTimelineCell($index, value)" ohrm-timeline-cell ng-click="vm.isNetBalanceLink(value, $index, result.values) && vm.showNetBalanceBreakDown($event, result, $parent.$index)">{{value}}</td></tr></tbody></table></div><ohrm-pagination ng-if=vm.showPaging count={{vm.total}} page={{vm.page}} page-size={{vm.pageSize}} change-page-size=vm.changePageSize change-page=vm.changePage></ohrm-pagination></div></div></div><div ui-view></div>'),e.put("app/leave/reports/percentageReport/leave-percentage-report.html",'<div class=pim-container id=leave_percentage_report><div ng-cloak class=form-div><h4>{{ leavePercentageReportCtrl.reportName |translate}} <a href title="{{leavePercentageReportCtrl.showSearchFilters ? \'Collapse\' : \'Expand\'| translate}}" ng-click=leavePercentageReportCtrl.toggleFilters()><i class=material-icons>{{leavePercentageReportCtrl.showSearchFilters ? \'arrow_drop_up\' : \'arrow_drop_down\'}}</i></a> <a ng-click=leavePercentageReportCtrl.downloadCSV() title="{{\'Download Report As CSV\'| translate}}"><i class=material-icons>ohrm_file_csv</i></a> <a href="{{leavePercentageReportCtrl.getExportUrl(\'PDF\')}}" ng-click=leavePercentageReportCtrl.showDownloadStartToast() title="{{\'Download Report As PDF\'| translate}}" target=_blank><i class=material-icons>ohrm_file_pdf</i></a></h4><div id=filter-element-div ng-show=leavePercentageReportCtrl.showSearchFilters><form id=leavePercentageReportFilterForm name=leavePercentageReportForm><div sf-schema=leavePercentageReportCtrl.schema sf-form=leavePercentageReportCtrl.form sf-model=leavePercentageReportCtrl.model></div><div class="row report-filter-row schema-form-section form-buttons"><div class=button-container><button class="col s1 btn waves-effect waves-light right" type=button ng-click=leavePercentageReportCtrl.onSubmit(leavePercentageReportForm) translate=Generate></button> <button class="col s1 btn waves-effect waves-light right right-margin-button" type=button ng-click=leavePercentageReportCtrl.saveAsReport() translate="Save As" ng-disabled=!leavePercentageReportCtrl.enableSaveAsButton></button></div></div></form></div></div><div class=row ng-if="leavePercentageReportCtrl.results.length > 0"><div ng-cloak class="form-div report-results-container"><div><table class="highlight list-table bordered report-results compact-table"><thead><tr><td ng-repeat="(fieldName, header) in leavePercentageReportCtrl.meta.headerInfo" ng-attr-style="width: {{header.width}}px; text-align: {{header.align}};"><span id=table_header_{{fieldName}}>{{leavePercentageReportCtrl.meta.headers[header.group][fieldName]|translate}}</span></td></tr></thead><tbody><tr ng-repeat="result in leavePercentageReportCtrl.results" ng-class="{\'hover\': leavePercentageReportCtrl.hoverRow === $index}"><td ng-repeat="(fieldName, header) in leavePercentageReportCtrl.meta.headerInfo" ng-style="{\'text-align\': header.align}"><span ng-if=!showLink>{{result[fieldName] | reportValue:header}}</span></td></tr></tbody></table></div><ohrm-pagination ng-if=leavePercentageReportCtrl.showPaging count={{leavePercentageReportCtrl.total}} page={{leavePercentageReportCtrl.page}} page-size={{leavePercentageReportCtrl.pageSize}} change-page-size=leavePercentageReportCtrl.changePageSize change-page=leavePercentageReportCtrl.viewPage></ohrm-pagination></div></div></div>'),e.put("app/leave/reports/timelineReport/leave-timeline-report.html",'<script src=leave-timeline-report.controller.js></script><div class=pim-container id=leaveTimelineReport><div ng-cloak class=form-div><h4>{{\'Timeline\' | translate}}</h4><div class=leaveInfoTitle>{{\'Employee Name\' | translate}}</div><div class=leaveInfoDetails>{{vm.employeeName}}</div><br><div class=leaveInfoTitle>{{\'Leave Type\' | translate}}</div><div class=leaveInfoDetails>{{vm.leaveType}}</div></div><div ng-cloak class="form-div report-results-container"><table class="list-table compact-table report-results"><thead><tr class=leaveTimelineHeader><th ng-repeat="(key, header) in vm.headers" ng-if=vm.isFieldVisible(key) ng-class="{numeric: $index > 0}">{{header | translate}}</th></tr></thead><tbody><tr ng-repeat="result in vm.results"><td ng-if="vm.isFieldVisible(\'current\')">{{result.period}}</td><td class=numeric ng-if="vm.isFieldVisible(\'entitlement_total\')"><span ui-sref={{vm.getUiSref(result,result.entitled)}} ng-class="{\'link\': vm.isEntitlementLink(result.entitled)}">{{result.entitled}}</span></td><td class=numeric ng-if="vm.isFieldVisible(\'pending\')">{{result.pendingIncludingOverdrawn}}</td><td class=numeric ng-if="vm.isFieldVisible(\'scheduled\')">{{result.scheduledIncludingOverdrawn}}</td><td class=numeric ng-if="vm.isFieldVisible(\'taken\')">{{result.takenIncludingOverdrawn}}</td><td class=numeric ng-if="vm.isFieldVisible(\'unused\')">{{result.available}}</td><td class=numeric ng-if="vm.isFieldVisible(\'overdrawn\')">{{result.overdrawn}}</td><td class=numeric ng-if="vm.isFieldVisible(\'netBalance\')"><span ng-class="{\'link\': vm.isNetBalanceLink(result)}" ng-click="vm.isNetBalanceLink(result) && vm.showNetBalanceBreakDown($event, result)">{{result.netBalance}}</span></td></tr></tbody></table></div></div>'),e.put("app/directives/formDecorators/materializecss/actions-trcl.html",'<div class="btn-group schema-form-actions {{form.htmlClass}}" ng-transclude></div>'),e.put("app/directives/formDecorators/materializecss/actions.html",'<div class="btn-group schema-form-actions {{form.htmlClass}}"><input ng-repeat-start="item in form.items" type=submit class="btn {{ item.style || \'btn-default\' }} {{form.fieldHtmlClass}}" value={{item.title}} ng-if="item.type === \'submit\'"> <button ng-repeat-end class="btn {{ item.style || \'btn-default\' }} {{form.fieldHtmlClass}}" type=button ng-disabled=form.readonly ng-if="item.type !== \'submit\'" ng-click=buttonClick($event,item)><span ng-if=item.icon class={{item.icon}}></span>{{item.title | translate}}</button></div>'),e.put("app/directives/formDecorators/materializecss/array.html",'<div sf-array=form class="schema-form-array {{form.htmlClass}}" ng-model=$$value$$ ng-model-options=form.ngModelOptions><label class=control-label ng-show=showTitle()>{{ form.title }}</label><ol class=list-group ng-model=modelArray ui-sortable><li class="list-group-item {{form.fieldHtmlClass}}" ng-repeat="item in modelArray track by $index"><button ng-hide="form.readonly || form.remove === null" ng-click=deleteFromArray($index) style="position: relative; z-index: 20;" type=button class="close pull-right"><span aria-hidden=true>&times;</span><span class=sr-only>Close</span></button><sf-decorator ng-init="arrayIndex = $index" form=copyWithIndex($index)></sf-decorator></li></ol><div class=clearfix style="padding: 15px;"><button ng-hide="form.readonly || form.add === null" ng-click=appendToArray() type=button class="btn {{ form.style.add || \'btn-default\' }} pull-right"><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</button></div><div class=help-block ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>'),e.put("app/directives/formDecorators/materializecss/attachment-with-modify-options.html",'<div class="{{form.htmlClass}} attachment-with-link"><label ng-class="{disabled: form.readonly}" style=padding-bottom:10px; for={{form.key.slice(-1)[0]}} class=radiobutton-label>{{form.title | translate}}<em ng-if=form.required>*</em></label> <a class=download-link id={{form.key.slice(-1)[0]}} ng-click=$root.ohrmGlobals.downloadFile(form.link)>{{form.fileName}}<i class=material-icons>file_download</i></a><ul><li ng-repeat="item in form.titleMap" style=display:inline><input type=radio id="{{form.key.slice(-1)[0]+\'_\'+item.value}}" class={{form.fieldHtmlClass}} sf-changed=form ng-disabled=form.readonly ng-model=$$value$$ ng-model-options=form.ngModelOptions ng-value=item.value name="{{form.key.join(\'.\')}}"> <label ng-class="{disabled: form.readonly}" for="{{form.key.slice(-1)[0]+\'_\'+item.value}}" style=margin-right:20px>{{item.name | translate}}</label></li></ul></div>'),e.put("app/directives/formDecorators/materializecss/audit-trail-affected-entity-auto-complete.html","<div class=\"input-field {{form.htmlClass}}\"><label ng-class=\"{disabled: form.readonly}\" class=active>{{form.title|translate}}<em ng-if=form.required>*</em></label><div angucomplete-alt materializecss-audit-trail-affected-entity-auto-complete id={{form.key.slice(-1)[0]}} placeholder=\"{{form.placeholder | translate}}\" text-searching=\"{{(form['text-searching'] ? form['text-searching']:'') | translate}}\" text-no-results=\"{{(form['text-no-results'] ? form['text-no-results']:'') | translate}}\" class=angucomplete-widget ng-disabled=form.readonly pause=100 selected-object=selectedEntity remote-api-handler=autocomplete.fetchMatchingEntities title-field=description focus-in=\"form['focus-in']\" auto-match=true focus-first=true input-class=topnav-autocomplete match-class=match input-changed=onInputChange initial-value=$$value$$ schema-validate=form sf-changed=form ng-model=$$value$$ disable-input=\"form['disable']\"></div><div style=\"margin-top: 5px\" class=help-block sf-message=form.description></div></div>"),e.put("app/directives/formDecorators/materializecss/autocomplete-multyselect.html",'<div class="input-field {{form.htmlClass}}"><label class=active>{{form.title}}<em ng-if=form.required>*</em></label><autocomplete-multiple items=form.choices tree-structure=form.treeStructure sorting=form.sorting placeholder=form.placeholder show-search-icon=form.showSearchIcon no-search-result-found-text=form.noSearchResultFoundText sf-changed=form key=form.key ng-model=$$value$$ ng-disabled=form.readonly schema-validate=form ng-model-options=form.ngModelOptions></autocomplete-multiple><span class=help-block sf-message=form.description></span></div>'),e.put("app/directives/formDecorators/materializecss/button.html",'<div class="form-group {{form.htmlClass}}"><button class="waves-effect {{ form.style }}" type=button ng-click=buttonClick($event,form) ng-disabled=form.readonly>{{form.title | translate}}</button></div>'),e.put("app/directives/formDecorators/materializecss/checkbox.html",'<div class="row {{form.htmlClass}}"><input class=filled-in materializecss-input id={{form.key.slice(-1)[0]}} sf-changed=form type={{form.type}} placeholder={{form.placeholder}} ng-disabled=form.readonly schema-validate=form ng-model=$$value$$ ng-model-options=form.ngModelOptions> <label style=left:0px for={{form.key.slice(-1)[0]}}>{{form.title | translate}}</label><div class=help-block sf-message=form.description></div></div>'),e.put("app/directives/formDecorators/materializecss/checkboxes.html",'<div sf-array=form ng-model=$$value$$ class="form-group schema-form-checkboxes {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label class="control-label active-collection-label active {{form.labelHtmlClass}}" ng-show=showTitle()>{{form.title}}<em ng-if=form.required>*</em></label><div class="checkbox {{form.fieldHtmlClass}}" ng-repeat="val in titleMapValues track by $index"><input materializecss-input type=checkbox id={{form.key+form.titleMap[$index].value}} ng-disabled="form.readonly || (form.readonlyOptions && form.readonlyOptions.indexOf(form.titleMap[$index].value)>-1)" sf-changed=form class="{{form.fieldHtmlClass}} filled-in" ng-model=titleMapValues[$index] name={{form.key.slice(-1)[0]}}> <label class style=left:0px for={{form.key+form.titleMap[$index].value}}>{{form.titleMap[$index].name}}</label></div><div class=help-block sf-message=form.description></div></div>'),e.put("app/directives/formDecorators/materializecss/cost-centre-auto-complete.html","<div class=\"input-field {{form.htmlClass}}\"><label ng-class=\"{disabled: form.readonly}\" class=active>{{form.title|translate}}<em ng-if=form.required>*</em></label><div angucomplete-alt materializecss-cost-centre-auto-complete id={{form.key.slice(-1)[0]}} placeholder=\"{{form.placeholder | translate}}\" text-searching=\"{{(form['text-searching'] ? form['text-searching']:'') | translate}}\" text-no-results=\"{{(form['text-no-results'] ? form['text-no-results']:'') | translate}}\" class=angucomplete-widget pause=100 selected-object=costCentreSelected remote-api-handler=autocomplete.fetchMatchingCostCentres title-field=cost_code,name focus-in=\"form['focus-in']\" auto-match=true focus-first=true input-class=topnav-autocomplete match-class=match input-changed=onInputChange initial-value=\"$$value$$?$$value$$.cost_code + ($$value$$.name.startsWith('-')?' '+$$value$$.name:' - '+$$value$$.name):$$value$$\" schema-validate=form sf-changed=form ng-model=$$value$$ disable-input=form.readonly></div><div style=\"margin-top: 5px\" class=help-block sf-message=form.description></div></div>"),e.put("app/directives/formDecorators/materializecss/custom-icon.html",'<div class="form-group schema-form-submit {{form.htmlClass}}"><a class="waves-effect waves-green {{ form.style }} {{form.fieldHtmlClass}}" ng-class="{disabled: formCtrl.$invalid}" ng-click=buttonClick($event,form) ng-disabled=form.readonly><i class=material-icons>{{form.icon}}</i></a></div>'),e.put("app/directives/formDecorators/materializecss/date-icon.html",'<div class="input-field {{form.htmlClass}}" ng-form name=dateForm style="position: relative; margin-top:-13px"><input type=text id={{form.key.slice(-1)[0]}} name=dateTextInput ng-model=dateText ng-pattern=datePattern ng-change=textClicked($event) maximum-date=maxDate min-max-date-validator max-date-is-valid=errorDateOfBirth date-picker-text-input-set-dirty-and-validation-status ng-model-options="{updateOn: \'blur\'}" ng-attr-placeholder="{{ !!(form.placeholder) ? form.placeholder : undefined }}" style="display: none"> <label style=cursor:pointer class=tooltipped data-tooltip={{form.tooltip}} for={{form.key.slice(-1)[0]}} on-click-click-another=i.date-picker-open-icon ng-if=!form.hideLabel>{{form.title | translate}}<em ng-if=form.required>*</em></label> <span><span style="display: inline-block"><input materializecss-date hidden type=date class="datepicker original" sf-changed=form placeholder={{form.placeholder}} default-date=form.defaultDate reset-default-date=form.resetDefaultDate ng-disabled=form.readonly ng-model=$$value$$ ng-change=datePickerUpdated($event) schema-validate=form name=dateHolder employee-id={{form.employeeId}} ng-model-options=form.ngModelOptions> <i class="material-icons action-icon date-picker-open-icon tooltipped" data-tooltip={{form.tooltip}} style="position: absolute; top: 10px; right: 7px">date_range</i></span> <span class=help-block sf-message=form.description ng-if="!dateForm.dateTextInput.$error.pattern && !errorDateOfBirth"></span></span> <span style=color:red ng-show=dateForm.dateTextInput.$error.pattern>{{errorMessage | translate}}</span> <span style=color:red ng-show=errorDateOfBirth>{{errorMessageDateOfBirth | translate}}</span></div>'),e.put("app/directives/formDecorators/materializecss/date.html",'<div class="input-field {{form.htmlClass}}" ng-form name=dateForm style="position: relative"><input type=text id={{form.key.slice(-1)[0]}} name=dateTextInput ng-model=dateText ng-pattern=datePattern ng-change=textClicked($event) maximum-date=maxDate min-max-date-validator max-date-is-valid=errorDateOfBirth date-picker-text-input-set-dirty-and-validation-status ng-model-options="{updateOn: \'blur\'}" ng-attr-placeholder="{{ !!(form.placeholder) ? form.placeholder : undefined }}" style="max-width:calc(100% - 20px)" ng-disabled=form.readonly> <label ng-class="{active: (!!(dateForm.dateTextInput.$viewValue) || !!(form.placeholder)) }" for={{form.key.slice(-1)[0]}} ng-if=!form.hideLabel>{{form.title | translate}}<em ng-if=form.required>*</em></label> <span class=hidden-date-widget><span style="display: inline-block"><input materializecss-date hidden type=date class="datepicker original" sf-changed=form placeholder={{form.placeholder}} default-date=form.defaultDate reset-default-date=form.resetDefaultDate ng-disabled=form.readonly ng-model=$$value$$ ng-change=datePickerUpdated($event) schema-validate=form name=dateHolder employee-id={{form.employeeId}} ng-model-options=form.ngModelOptions> <i class="material-icons action-icon date-picker-open-icon" ng-class="{disabled: form.readonly}" style="position: absolute; top: 9px; right: 10px">date_range</i></span> <span class=help-block sf-message=form.description ng-if="!dateForm.dateTextInput.$error.pattern && !errorDateOfBirth && !errorRequired"></span></span> <span class=help-block-message ng-show=dateForm.dateTextInput.$error.pattern>{{errorMessage | translate}}</span> <span class=help-block-message ng-show="errorDateOfBirth && !dateForm.dateTextInput.$error.pattern">{{errorMessageDateOfBirth | translate}}</span> <span class=help-block-message ng-show="errorRequired && !dateForm.dateTextInput.$error.pattern && !errorDateOfBirth">{{errorMessageRequired | translate}}</span></div>'),e.put("app/directives/formDecorators/materializecss/default.html",'<div class="form-group schema-form-{{form.type}} {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess(), \'has-feedback\': form.feedback !== false }"><label class="control-label {{form.labelHtmlClass}}" ng-class="{\'sr-only\': !showTitle()}" for={{form.key.slice(-1)[0]}}>{{form.title}}<em ng-if=form.required>*</em></label> <input ng-if="!form.fieldAddonLeft && !form.fieldAddonRight" ng-show=form.key type={{form.type}} step=any sf-changed=form placeholder={{form.placeholder}} class="form-control {{form.fieldHtmlClass}}" id={{form.key.slice(-1)[0]}} ng-model-options=form.ngModelOptions ng-model=$$value$$ ng-disabled=form.readonly schema-validate=form name={{form.key.slice(-1)[0]}} aria-describedby="{{form.key.slice(-1)[0] + \'Status\'}}"><div ng-if="form.fieldAddonLeft || form.fieldAddonRight" ng-class="{\'input-group\': (form.fieldAddonLeft || form.fieldAddonRight)}"><span ng-if=form.fieldAddonLeft class=input-group-addon ng-bind-html=form.fieldAddonLeft></span> <input ng-show=form.key type={{form.type}} step=any sf-changed=form placeholder={{form.placeholder}} class="form-control {{form.fieldHtmlClass}}" id={{form.key.slice(-1)[0]}} ng-model-options=form.ngModelOptions ng-model=$$value$$ ng-disabled=form.readonly schema-validate=form name={{form.key.slice(-1)[0]}} aria-describedby="{{form.key.slice(-1)[0] + \'Status\'}}"> <span ng-if=form.fieldAddonRight class=input-group-addon ng-bind-html=form.fieldAddonRight></span></div><span ng-if="form.feedback !== false" class=form-control-feedback ng-class="evalInScope(form.feedback) || {\'glyphicon\': true, \'glyphicon-ok\': hasSuccess(), \'glyphicon-remove\': hasError() }" aria-hidden=true></span> <span ng-if="hasError() || hasSuccess()" id="{{form.key.slice(-1)[0] + \'Status\'}}" class=sr-only>{{ hasSuccess() ? \'(success)\' : \'(error)\' }}</span><div class=help-block sf-message=form.description></div></div>'),e.put("app/directives/formDecorators/materializecss/employee-auto-complete-with-deleted.html",'<div class="input-field {{form.htmlClass}}"><label ng-class="{disabled: form.readonly}" class=active>{{form.title|translate}}<em ng-if=form.required>*</em></label><div angucomplete-alt-with-employee-id materializecss-employee-auto-complete-with-deleted id={{form.key.slice(-1)[0]}} placeholder="{{form.placeholder | translate}}" text-searching="{{(form[\'text-searching\'] ? form[\'text-searching\']:\'\') | translate}}" text-no-results="{{(form[\'text-no-results\'] ? form[\'text-no-results\']:\'\') | translate}}" class=angucomplete-widget ng-disabled=form.readonly pause=100 selected-object=employeeSelected remote-api-handler=autocomplete.fetchMatchingEmployees search-fields=firstName,middleName,lastName description-field=employeeId title-field=fullName focus-in="form[\'focus-in\']" auto-match=true focus-first=true input-class="topnav-autocomplete contains-emp-id" match-class=match input-changed=onInputChange initial-value=$$value$$ schema-validate=form sf-changed=form ng-model=$$value$$ disable-input="form[\'disable\']"></div><div style="margin-top: 5px" class=help-block sf-message=form.description></div></div>'),e.put("app/directives/formDecorators/materializecss/employee-auto-complete.html",'<div class="input-field {{form.htmlClass}}"><label disable-label ng-class="{disabled: form.readonly}" class=active disable-input="form[\'disable\']">{{form.title|translate}}<em ng-if=form.required>*</em></label><div angucomplete-alt-with-employee-id materializecss-employee-auto-complete id={{form.key.slice(-1)[0]}} placeholder="{{form.placeholder | translate}}" text-searching="{{(form[\'text-searching\'] ? form[\'text-searching\']:\'\') | translate}}" text-no-results="{{(form[\'text-no-results\'] ? form[\'text-no-results\']:\'\') | translate}}" class=angucomplete-widget ng-disabled=form.readonly pause=100 selected-object=employeeSelected remote-api-handler=autocomplete.fetchMatchingEmployees search-fields=firstName,middleName,lastName title-field=fullName description-field=employeeId focus-in="form[\'focus-in\']" auto-match=true focus-first=true input-class="topnav-autocomplete contains-emp-id" match-class=match input-changed=onInputChange initial-value=$$value$$ schema-validate=form sf-changed=form ng-model=$$value$$ disable-input="form[\'disable\']"></div><div style="margin-top: 5px" class=help-block sf-message=form.description></div></div>'),e.put("app/directives/formDecorators/materializecss/employee-nominee-input-collection.html","<employee-nominee model-key=\"{{form['key'][0]}}\" form-model=model form=form></employee-nominee>"),e.put("app/directives/formDecorators/materializecss/fieldset-trcl.html",'<fieldset ng-disabled=form.readonly class="schema-form-fieldset {{form.htmlClass}}"><legend ng-class="{\'sr-only\': !showTitle() }">{{ form.title }}</legend><div class=help-block ng-show=form.description ng-bind-html=form.description></div><div ng-transclude></div></fieldset>'),e.put("app/directives/formDecorators/materializecss/fieldset.html",'<fieldset ng-disabled=form.readonly class="schema-form-fieldset {{form.htmlClass}}"><legend ng-class="{\'sr-only\': !showTitle() }">{{ form.title }}</legend><div class=help-block ng-show=form.description ng-bind-html=form.description></div><sf-decorator ng-repeat="item in form.items" form=item></sf-decorator></fieldset>'),e.put("app/directives/formDecorators/materializecss/file.html",'<div class="file-field input-field row {{form.htmlClass}}" redraw-file-on-clean><div class=btn ng-if=fileInputVisible ohrm-disable-animation><span>{{form.title| translate}}</span> <input materializecss-file type=file id={{form.key.slice(-1)[0]}} sf-changed=form placeholder={{form.placeholder}} ng-disabled=form.readonly schema-validate=form ng-model=$$value$$ ng-model-options=form.ngModelOptions style="text-indent: -99999em;"><br><span ng-if="form.maxSize / (1024*1024)>=1 && form.maxSize" class=file-size-text>{{"Accepts up to " | translate}} {{form.maxSize / (1024*1024) | number:0}}MB</span> <span ng-if="form.maxSize / (1024*1024)<1 && form.maxSize" class=file-size-text>{{"Accepts up to " | translate}} {{form.maxSize / (1024) | number:0}}Kb</span></div><div class=file-path-wrapper ng-if=!form.hideText><input ng-class="{\'has-error\': form.disableErrorState !== true && hasError()}" class=file-path type=text><br><span class=help-block sf-message=form.description></span></div></div>'),e.put("app/directives/formDecorators/materializecss/generated-input.html",'<div class="input-field {{form.htmlClass}}"><input materializecss-input class=auto-generator id={{form.key.slice(-1)[0]}} sf-changed=form type=text placeholder={{form.placeholder}} ng-disabled=form.readonly schema-validate=form ng-model=$$value$$ ng-model-options=form.ngModelOptions> <label title={{form.tooltip}} for={{form.key.slice(-1)[0]}} class={{form.labelHtmlClass}}>{{form.title | translate}}<em ng-if=form.required>*</em></label> <a ng-click=form.autoGenerateCallBack()><i class="material-icons tooltipped" data-tooltip="{{\'Regenerate Client Secret\' | translate}}">{{form.autoGenerateIcon}}</i></a> <span class=help-block sf-message=form.description></span></div>'),e.put("app/directives/formDecorators/materializecss/generic-auto-complete.html",'<div class="input-field {{form.htmlClass}}"><label disable-label ng-if=!form.hideLabel ng-class="{disabled: form.readonly}" class=active disable-input="form[\'disable\']">{{form.title|translate}}<em ng-if=form.required>*</em></label><div angucomplete-alt id={{form.key.slice(-1)[0]}} placeholder="{{form.placeholder | translate}}" text-searching="{{form[\'text-searching\'] ? (form[\'text-searching\'] | translate):false }}" text-no-results="{{form[\'text-no-results\'] ? (form[\'text-no-results\'] | translate):false }}" class=angucomplete-widget ng-disabled=form.readonly pause=100 selected-object="form[\'objectSelectedCallback\']" remote-api-handler="form[\'fetchItemsCallback\']" search-fields="{{form[\'searchFields\']}}" title-field="{{form[\'titleField\']}}" focus-in="form[\'focus-in\']" auto-match=true focus-first=true input-class=topnav-autocomplete match-class=match input-changed="form[\'onInputChange\']" initial-value="form[\'initialValue\']" schema-validate=form sf-changed=form ng-model=$$value$$ ng-model-options=form.ngModelOptions disable-input="form[\'disable\']"></div><div style="margin-top: 5px" class=help-block sf-message=form.description></div></div>'),
e.put("app/directives/formDecorators/materializecss/help.html",'<div ng-click=form.onClick() class="helpvalue schema-form-helpvalue {{form.htmlClass}}" ng-bind-html=form.helpvalue></div>'),e.put("app/directives/formDecorators/materializecss/hierarchical-multyselect.html",'<div class="input-field {{form.htmlClass}}"><label class=active>{{form.title}}<em ng-if=form.required>*</em></label><autocomplete-hierarchical items=form.choices tree-structure=form.treeStructure sorting=form.sorting placeholder=form.placeholder show-search-icon=form.showSearchIcon sf-changed=form key=form.key ng-model=$$value$$ ng-disabled=form.readonly schema-validate=form ng-model-options=form.ngModelOptions></autocomplete-hierarchical><span class="help-block autocomplete-hierarchical-help" sf-message=form.description></span></div>'),e.put("app/directives/formDecorators/materializecss/horizontal-divided-section.html",'<div class="schema-form-section {{form.htmlClass}}"><hr class=horizontal-divided-section><sf-decorator ng-repeat="item in form.items" form=item></sf-decorator></div>'),e.put("app/directives/formDecorators/materializecss/icon-select.html",'<div materializecss-icon-select ng-model=$$value$$ icons=form.icons class="input-field {{form.htmlClass}}" id="{{form.key.slice(-1)[0]+\'_inputfileddiv\'}}"><div class=row style="margin-bottom: 0px"><div ng-repeat="icon in form.icons" class=col style="padding: 0px; margin-right: 10px;"><div class="row center select-icon-container" style="margin-bottom: 0px"><i class="select-icon material-icons action-icon {{($$value$$==icon.value)?\'selected-icon\':\'\'}}">{{icon.name}}</i><div class="row icon-label">{{icon.label | translate}}</div></div></div></div></div>'),e.put("app/directives/formDecorators/materializecss/icon.html",'<div class="input-field {{form.htmlClass}}"><i class=material-icons ng-style=form.style ng-click=form.onClick(form)>{{form.iconName}}</i></div>'),e.put("app/directives/formDecorators/materializecss/input-with-helptext.html",'<div class="input-field {{form.htmlClass}}"><input materializecss-input id={{form.key.slice(-1)[0]}} sf-changed=form type=text placeholder={{form.placeholder}} ng-disabled=form.readonly schema-validate=form ng-model=$$value$$ ng-model-options=form.ngModelOptions ohrm-make-element-non-pristine=form.removePristine> <label title={{form.tooltip}} for={{form.key.slice(-1)[0]}} class={{form.labelHtmlClass}}>{{form.title | translate}}<em ng-if=form.required>*</em></label> <span class={{form.helpTextClass}}>{{form.helpText}}</span> <span class=help-block sf-message=form.description></span></div>'),e.put("app/directives/formDecorators/materializecss/input.html",'<div class="input-field {{form.htmlClass}}"><input materializecss-input id={{form.key.slice(-1)[0]}} sf-changed=form type={{form.type}} placeholder={{form.placeholder}} ng-disabled=form.readonly schema-validate=form ng-model=$$value$$ ng-model-options=form.ngModelOptions ohrm-make-element-non-pristine=form.removePristine ng-attr-autocomplete={{form.autocompleteOff}}> <label title={{form.tooltip}} for={{form.key.slice(-1)[0]}} class={{form.labelHtmlClass}} ng-if=!form.hideLabel>{{form.title | translate}}<em ng-if=form.required>*</em></label> <span class=help-block sf-message=form.description></span></div>'),e.put("app/directives/formDecorators/materializecss/job-spec-file.html",'<div class="file-field input-field row {{form.htmlClass}}"><div class=btn><span>{{form.title| translate}}</span> <input materializecss-file type=file id={{form.key.slice(-1)[0]}} sf-changed=form placeholder={{form.placeholder}} ng-disabled=form.readonly schema-validate=form ng-model=$$value$$ ng-model-options=form.ngModelOptions></div><div class=file-path-wrapper><input class=file-path type=text ng-value=form.filename></div><div><span class=help-block sf-message=form.description></span></div><div><span>{{"Accepts up to 1MB"|translate}}</span></div></div>'),e.put("app/directives/formDecorators/materializecss/job-spec.html",'<div class="input-field {{form.htmlClass}}"><a ng-class="{disabled: form.readonly}" class=download-link id={{form.key.slice(-1)[0]}} href job-spec-link ng-click=download()><div class=truncate id=job-spec-attachment-name></div><i class=material-icons>file_download</i></a> <label for={{form.key.slice(-1)[0]}} ng-class="{disabled: form.readonly}" class=active>{{form.title | translate}}</label></div>'),e.put("app/directives/formDecorators/materializecss/label.html",'<div class="form-label {{form.htmlClass}}">{{form.text}}</div>'),e.put("app/directives/formDecorators/materializecss/link.html",'<div class="link {{form.htmlClass}}"><a href ng-click=form.onClick();>{{form.linkText}}</a></div>'),e.put("app/directives/formDecorators/materializecss/maintenance-employee-auto-complete-only-deleted-and-terminated.html",'<div class="input-field {{form.htmlClass}}"><label ng-class="{disabled: form.readonly}" class=active>{{form.title|translate}}<em ng-if=form.required>*</em></label><angucomplete-alt-with-employee-id materializecss-maintenance-employee-auto-complete-only-deleted-and-terminated id={{form.key.slice(-1)[0]}} placeholder="{{form.placeholder | translate}}" text-searching="{{(form[\'text-searching\'] ? form[\'text-searching\']:\'\') | translate}}" text-no-results="{{(form[\'text-no-results\'] ? form[\'text-no-results\']:\'\') | translate}}" class=angucomplete-widget ng-disabled=form.readonly pause=100 selected-object=employeeSelected remote-api-handler=autocomplete.fetchMatchingEmployees search-fields=firstName,middleName,lastName title-field=fullName description-field=employeeId focus-in="form[\'focus-in\']" auto-match=true focus-first=true input-class="topnav-autocomplete contains-emp-id" match-class=match input-changed=onInputChange initial-value=$$value$$ schema-validate=form sf-changed=form ng-model=$$value$$ disable-input="form[\'disable\']"></angucomplete-alt-with-employee-id></div><div style="margin-top: 5px" class=help-block sf-message=form.description></div>'),e.put("app/directives/formDecorators/materializecss/password.html",'<div class=password_with_confirmation_holder><div class="passwordfield input-field {{form.htmlClass}}"><input materializecss-password id={{form.key.slice(-1)[0]}} sf-changed=form type=password autocomplete=off placeholder={{form.placeholder}} ng-disabled=form.readonly schema-validate=form ng-model=$$value$$ ng-model-options=form.ngModelOptions> <label for={{form.key.slice(-1)[0]}}>{{form.title | translate}}<em ng-if=form.required>*</em></label> <span class=help-block sf-message=form.description></span><div><span ng-if="passwordScore == 0 && $$value$$ && form.strengthCheck" class="veryWeak passwordStrengthCheck">{{\'Very Weak\' | translate}}</span> <span ng-if="passwordScore == 1 && $$value$$ && form.strengthCheck" class="weak passwordStrengthCheck">{{\'Weak\' | translate}}</span> <span ng-if="passwordScore == 2 && $$value$$ && form.strengthCheck" class="better passwordStrengthCheck">{{\'Better\' | translate}}</span> <span ng-if="passwordScore == 3 && $$value$$ && form.strengthCheck" class="medium passwordStrengthCheck">{{\'Medium\' | translate}}</span> <span ng-if="passwordScore == 4 && $$value$$ && form.strengthCheck" class="strong passwordStrengthCheck">{{\'Strong\' | translate}}</span> <span ng-if="passwordScore == 5 && $$value$$ && form.strengthCheck" class="strongest passwordStrengthCheck">{{\'Strongest\' | translate}}</span></div><div><span ng-if=form.strengthCheck>{{\'For a strong password, please use a hard to guess combination of text with upper and lower case characters, symbols and numbers\'|translate}}</span></div></div><div ng-if=form.confirmation class="confirmationfield input-field {{form.htmlClass}}"><input materializecss-input {{form.confirmationstatues}} ng-class="{\'ng-invalid\': (($$value$$) && form.confirmedPassword && $$value$$ != form.confirmedPassword)||form.confirmationStatues==\'required\' && (form.confirmedPassword==\'\'||form.confirmedPassword==null)}" id="{{form.key.slice(-1)[0]+\'_confirmation\'}}" type=password autocomplete=off ng-model=form.confirmedPassword> <label for="{{form.key.slice(-1)[0]+\'_confirmation\'}}">{{(form.confirmationTitle || \'Confirm Password\') | translate}}<em ng-if=form.required>*</em></label> <span ng-if="($$value$$) && form.confirmedPassword && $$value$$ != form.confirmedPassword" class=help-block>{{(form.confirmationMessage || "Passwords do not match") | translate}}</span> <span ng-if="form.confirmationStatues==\'required\' && (form.confirmedPassword==\'\'||form.confirmedPassword==null)" class=help-block>{{(form.confirmationMessage || "Required") | translate}}</span></div></div>'),e.put("app/directives/formDecorators/materializecss/phone.html",'<div class="input-field {{form.htmlClass}}"><input materializecss-input id={{form.key.slice(-1)[0]}} sf-changed=form type=text placeholder={{form.placeholder}} ng-disabled=form.readonly schema-validate=form ng-model=$$value$$ ng-model-options=form.ngModelOptions ohrm-make-element-non-pristine=form.removePristine ng-attr-autocomplete={{form.autocompleteOff}} ng-focus=form.onFocus() ng-blur=form.onBlur()> <label title={{form.tooltip}} for={{form.key.slice(-1)[0]}} class={{form.labelHtmlClass}} ng-if=!form.hideLabel>{{form.title | translate}}<em ng-if=form.required>*</em></label> <span class=help-block sf-message=form.description></span></div>'),e.put("app/directives/formDecorators/materializecss/photo-preview.html",'<div class="{{form.htmlClass}} photo-preview"><img ng-if=!form.croppedImage ng-src={{form.src}} class={{form.fieldHtmlClass}}><div ng-if=form.croppedImage class=cropArea><img-crop id={{form.key.slice(-1)[0]}} image=form.imageToPreview result-image=form.croppedImage></img-crop></div></div>'),e.put("app/directives/formDecorators/materializecss/pim-document-manager-button.html","<div class={{form.htmlClass}}><pim-document-manager-button sf-changed=form datagroup-name={{form.datagroup}} employee-number=form.employeeNumber document-template-details=form.documentTemplateDetails ng-model=$$value$$></pim-document-manager-button></div>"),e.put("app/directives/formDecorators/materializecss/pim_custom_field_attachment.html",'<div class="row {{form.htmlClass}} pim-custom-field-attachment"><div class="file-field input-field"><div class=btn ng-if=!form.attachmentUrl><span class=truncate style="max-width: 100px">{{form.title| translate}}</span> <input materializecss-file type=file class=tooltipped data-tooltip="{{form.title| translate}}" id={{form.key.slice(-1)[0]}} sf-changed=form placeholder={{form.placeholder}} ng-disabled=form.readonly schema-validate=form ng-model=$$value$$ ng-model-options=form.ngModelOptions> <span ng-if="form.maxSize / (1024*1024)>=1 && form.maxSize" class="file-size-text custom_field_size_help_text" style="color: #818181;">{{"Accepts up to " | translate}} {{form.maxSize / (1024*1024) | number:0}}MB</span> <span ng-if="form.maxSize / (1024*1024)<1 && form.maxSize" class="file-size-text custom_field_size_help_text" style="color: #818181;">{{"Accepts up to " | translate}} {{form.maxSize / (1024) | number:0}}Kb</span></div><div class=file-path-wrapper ng-if=!form.attachmentUrl><input ng-class="{\'has-error\': form.disableErrorState !== true && hasError()}" class=file-path type=text><br><span class=help-block sf-message=form.description></span></div></div><div ng-if=form.attachmentUrl pim-custom-field-attachment ng-model=$$value$$><span class="material-icons deleteAttachment" ng-click=deleteAttachment(form) ng-if=form.permissions.update>delete</span> <a href=javascript:; ng-click=$root.ohrmGlobals.downloadFile(form.attachmentUrl) ng-if=form.permissions.read><i class=material-icons>file_downloadng</i>{{form.attachmentFileName}}</a></div></div>'),e.put("app/directives/formDecorators/materializecss/radio-buttons.html",'<div class={{form.htmlClass}}><label ng-class="{disabled: form.readonly}" style=padding-bottom:10px for={{form.key.slice(-1)[0]}} class="active-collection-label active">{{form.title | translate}}<em ng-if=form.required>*</em></label><br><ul class=radiobutton-container><li ng-repeat="item in form.titleMap" style=display:inline><input type=radio id="{{form.key.slice(-1)[0]+\'_\'+item.value}}" class={{form.fieldHtmlClass}} sf-changed=form ng-disabled=form.readonly ng-model=$$value$$ ng-model-options=form.ngModelOptions ng-value=item.value name="{{form.key.join(\'.\')}}"> <label ng-class="{disabled: form.readonly}" for="{{form.key.slice(-1)[0]+\'_\'+item.value}}" style=margin-right:20px>{{item.name | translate}}</label></li></ul></div>'),e.put("app/directives/formDecorators/materializecss/radios-inline.html",'<div class={{form.htmlClass}}><label ng-model=$$value$$ ng-model-options=form.ngModelOptions schema-validate=form ng-class="{disabled: form.readonly}" style=padding-bottom:10px class="radiobutton-label {{form.labelHtmlClass}} active-collection-label active" ng-show=showTitle()>{{form.title}}<em ng-if=form.required>*</em></label><ul><li ng-repeat="item in form.titleMap" style=display:inline><input type=radio id="{{form.key.slice(-1)[0]+\'_\'+item.value}}" class={{form.fieldHtmlClass}} sf-changed=form ng-disabled=form.readonly ng-model=$$value$$ ng-model-options=form.ngModelOptions ng-value=item.value name="{{form.key.join(\'.\')}}"> <label ng-class="{disabled: form.readonly}" for="{{form.key.slice(-1)[0]+\'_\'+item.value}}" style=margin-right:20px>{{item.name | translate}}</label></li></ul><div class=help-block sf-message=form.description></div></div>'),e.put("app/directives/formDecorators/materializecss/radios-with-validators.html",'<div class={{form.htmlClass}}><label ng-class="{disabled: form.readonly}" style=padding-bottom:10px for={{form.key.slice(-1)[0]}} class="active-collection-label active">{{form.title | translate}}<em ng-if=form.required>*</em></label><br><ul class=radiobutton-container><li ng-repeat="item in form.titleMap" style=display:inline><input type=radio id="{{form.key.slice(-1)[0]+\'_\'+item.value}}" class={{form.fieldHtmlClass}} sf-changed=form ng-disabled=form.readonly ng-model=$$value$$ schema-validate=form ng-model-options=form.ngModelOptions ng-value=item.value name="{{form.key.join(\'.\')}}"> <label ng-class="{disabled: form.readonly}" for="{{form.key.slice(-1)[0]+\'_\'+item.value}}" style=margin-right:20px>{{item.name | translate}}</label></li></ul><span class=help-block sf-message=form.description></span></div>'),e.put("app/directives/formDecorators/materializecss/radios.html",'<div class="form-group schema-form-radios {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label ng-class="{disabled: form.readonly}" ng-model=$$value$$ ng-model-options=form.ngModelOptions schema-validate=form class="control-label {{form.labelHtmlClass}}" ng-show=showTitle()>{{form.title}}</label><div class=radio ng-repeat="item in form.titleMap"><label ng-class="{disabled: form.readonly}"><input type=radio class={{form.fieldHtmlClass}} sf-changed=form ng-disabled=form.readonly ng-model=$$value$$ ng-value=item.value name="{{form.key.join(\'.\')}}"> <span ng-bind-html=item.name></span> <em ng-if=form.required>*</em></label></div><div class=help-block sf-message=form.description></div></div>'),e.put("app/directives/formDecorators/materializecss/readonly.html",'<div class="input-field {{form.htmlClass}}"><input materializecss-input id={{form.key.slice(-1)[0]}} type=text placeholder={{form.placeholder}} ng-readonly=true ng-value=form.value> <label for={{form.key.slice(-1)[0]}} class=active translate={{form.label}}></label> <span class=help-block sf-message=form.description></span></div>'),e.put("app/directives/formDecorators/materializecss/rounded-button.html",'<a class="rounded-button btn {{ form.htmlClass }}" ng-click=buttonClick($event,form) ng-disabled=form.readonly><div class=button-content><span class=material-icons ng-if=form.preIcon>{{form.preIcon}}</span> <span>{{form.title | translate}}</span> <span class=material-icons ng-if=form.postIcon>{{form.postIcon}}</span></div></a>'),e.put("app/directives/formDecorators/materializecss/section-heading.html","<div class={{form.htmlClass}}><span class=section-heading>{{form.text}}</span></div>"),e.put("app/directives/formDecorators/materializecss/section.html",'<div class="schema-form-section {{form.htmlClass}}"><sf-decorator ng-repeat="item in form.items" form=item></sf-decorator></div>'),e.put("app/directives/formDecorators/materializecss/select.html",'<div class="input-field {{form.htmlClass}}" id="{{form.key.slice(-1)[0]+\'_inputfileddiv\'}}"><select ng-if=!form.translate id={{form.key.slice(-1)[0]}} materializecss-select ng-model=$$value$$ ng-model-options=form.ngModelOptions ng-disabled=form.readonly sf-changed=form class={{form.fieldHtmlClass}} schema-validate=form ng-options="item.value as item.name group by item.group for item in form.titleMap" name={{form.key.slice(-1)[0]}}></select><select ng-if=form.translate id={{form.key.slice(-1)[0]}} materializecss-select ng-model=$$value$$ ng-model-options=form.ngModelOptions ng-disabled=form.readonly sf-changed=form class={{form.fieldHtmlClass}} schema-validate=form ng-options="item.value as item.name | translate group by item.group | translate for item in form.titleMap" name={{form.key.slice(-1)[0]}}></select><label title={{form.tooltip}} class=active-drop-down ng-class="{disabled: form.readonly}" ng-if=!form.hideLabel>{{form.title | translate}}<em ng-if=form.required>*</em></label> <span class=help-block sf-message=form.description></span></div>'),e.put("app/directives/formDecorators/materializecss/separator.html",'<div class="separator {{form.htmlClass}}"></div>'),e.put("app/directives/formDecorators/materializecss/structured-label-radios.html",'<div class={{form.htmlClass}}><div style="display: flex; align-items: baseline; margin-bottom: 15px;"><div class="structured-radio-title-section {{form.labelSectionClass}}"><span ng-bind-html=form.title class=structured-radio-title></span> <em ng-if="form.required && !form.excludeRequiredIndicator">*</em></div><div class="structured-radio-section {{form.radioSectionClass}}"><ul class=radiobutton-container><li ng-repeat="item in form.titleMap" style=display:inline><input type=radio id="{{form.key.slice(-1)[0]+\'_\'+item.value}}" class={{form.fieldHtmlClass}} sf-changed=form ng-disabled=form.readonly ng-model=$$value$$ schema-validate=form ng-model-options=form.ngModelOptions ng-value=item.value name="{{form.key.join(\'.\')}}"> <label ng-class="{disabled: form.readonly}" for="{{form.key.slice(-1)[0]+\'_\'+item.value}}" style=margin-right:20px>{{item.name | translate}}</label></li></ul><span class=help-block sf-message=form.description></span></div></div></div>'),e.put("app/directives/formDecorators/materializecss/submit.html",'<div class="form-group schema-form-submit {{form.htmlClass}}"><button type=submit class="{{form.style}} btn waves-effect waves-green {{form.fieldHtmlClass}}" ng-disabled=form.readonly ng-click=buttonClick($event,form) ng-if="form.type === \'submit\'">{{form.title | translate}}</button> <button class="btn waves-effect {{ form.style }}" type=button ng-click=buttonClick($event,form) ng-disabled=form.readonly ng-if="form.type !== \'submit\'">{{form.title | translate}}</button></div>'),e.put("app/directives/formDecorators/materializecss/supervisor-auto-complete.html",'<div class="input-field {{form.htmlClass}}"><label class=active>{{form.title}}<em ng-if=form.required>*</em></label><angucomplete-alt-with-employee-id materializecss-supervisor-auto-complete id={{form.key.slice(-1)[0]}} placeholder={{form.placeholder}} text-searching="{{\'Searching...\' | translate}}" text-no-results="{{\'No results found\'| translate}}" ng-disabled=form.readonly pause=100 selected-object=employeeSelected remote-api-handler=autocomplete.fetchMatchingEmployees search-fields=firstName,middleName,lastName title-field=firstName,middleName,lastName,terminationStatus description-field=employeeId auto-match=true focus-first=true minlength=1 input-class="topnav-autocomplete contains-emp-id" match-class=match initial-value=$$value$$ ng-modal=$$value$$><div class=help-block sf-message=form.description></div></angucomplete-alt-with-employee-id></div>'),e.put("app/directives/formDecorators/materializecss/switch.html",'<div class="switch {{form.htmlClass}}" style="padding-top: 7px; padding-right: 15px;"><label><input type=checkbox ng-model=$$value$$ ng-disabled=form.readonly schema-validate=form id=switch_{{form.key[0]}}> <span class=lever></span></label><div class=oxd-switch-label-wrapper><label style="font-size: 14px; font-family: Roboto, Arial, Helvetica, sans-serif">{{form.title | translate}}</label><br><small class=switch_custom_text ng-if=form.customHint>({{form.customHint}})</small></div></div>'),e.put("app/directives/formDecorators/materializecss/tabarray.html",'<div sf-array=form ng-init="selected = { tab: 0 }" class="clearfix schema-form-tabarray schema-form-tabarray-{{form.tabType || \'left\'}} {{form.htmlClass}}"><div ng-if="!form.tabType || form.tabType !== \'right\'" ng-class="{\'col-xs-3\': !form.tabType || form.tabType === \'left\'}"><ul class="nav nav-tabs" ng-class="{ \'tabs-left\': !form.tabType || form.tabType === \'left\'}"><li ng-repeat="item in modelArray track by $index" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href=#>{{interp(form.title,{\'$index\':$index, value: item}) || $index}}</a></li><li ng-hide=form.readonly ng-click="$event.preventDefault() || (selected.tab = appendToArray().length - 1)"><a href=#><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</a></li></ul></div><div ng-class="{\'col-xs-9\': !form.tabType || form.tabType === \'left\' || form.tabType === \'right\'}"><div class="tab-content {{form.fieldHtmlClass}}"><div class="tab-pane clearfix" ng-repeat="item in modelArray track by $index" ng-show="selected.tab === $index" ng-class="{active: selected.tab === $index}"><sf-decorator ng-init="arrayIndex = $index" form=copyWithIndex($index)></sf-decorator><button ng-hide=form.readonly ng-click="selected.tab = deleteFromArray($index).length - 1" type=button class="btn {{ form.style.remove || \'btn-default\' }} pull-right"><i class="glyphicon glyphicon-trash"></i> {{ form.remove || \'Remove\'}}</button></div></div></div><div ng-if="form.tabType === \'right\'" class=col-xs-3><ul class="nav nav-tabs tabs-right"><li ng-repeat="item in modelArray track by $index" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href=#>{{interp(form.title,{\'$index\':$index, value: item}) || $index}}</a></li><li ng-hide=form.readonly ng-click="$event.preventDefault() || appendToArray()"><a href=#><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</a></li></ul></div></div>'),e.put("app/directives/formDecorators/materializecss/tabs.html",'<div ng-init="selected = { tab: 0 }" class="schema-form-tabs {{form.htmlClass}}"><ul class="nav nav-tabs"><li ng-repeat="tab in form.tabs" ng-disabled=form.readonly ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href=#>{{ tab.title }}</a></li></ul><div class="tab-content {{form.fieldHtmlClass}}"><div class=tab-pane ng-disabled=form.readonly ng-repeat="tab in form.tabs" ng-show="selected.tab === $index" ng-class="{active: selected.tab === $index}"><bootstrap-decorator ng-repeat="item in tab.items" form=item></bootstrap-decorator></div></div></div>'),e.put("app/directives/formDecorators/materializecss/textarea.html",'<div class="input-field {{form.htmlClass}}"><textarea class=materialize-textarea materializecss-input id={{form.key.slice(-1)[0]}} sf-changed=form schema-validate=form ng-attr-placeholder={{form.placeholder}} ng-disabled=form.readonly ng-model=$$value$$ ng-model-options=form.ngModelOptions></textarea> <label for={{form.key.slice(-1)[0]}} ng-if=!form.hideLabel>{{form.title | translate}}<em ng-if=form.required>*</em></label> <span class=help-block sf-message=form.description></span></div>'),e.put("app/directives/formDecorators/materializecss/time-picker-work-week.html",'<div class=input-field style="position: relative"><input type=text name="{{elementPrefix+\'-\'+day}}" ng-model=timeText ng-pattern=timePattern class=timeTextInput ng-change=workWeekTimeTextChanged() shift-validate lunch=lunch dependtime=dependtime minvalue=minvalue maxvalue=maxvalue duration=duration lunch-part=lunchPart> <span ng-messages="formName[elementPrefix+\'-\'+day].$error" class=help-block><ng-message when=partialRequired translate=Required></ng-message><ng-message when=validDatePattern translate="Expected format: HH:MM"></ng-message><ng-message when=invalidShiftDuration translate={{validationMsg}}></ng-message></span> <span><span style="display: inline-block"><input hidden type=text class=timepicker ng-change=workWeekTimePickerUpdated() ng-model=ngModel> <i class="material-icons action-icon time-picker-open-icon" style="position: absolute; top: 9px; right: 7px">access_time</i></span></span></div>'),e.put("app/directives/formDecorators/materializecss/timepicker.html",'<div class="input-field {{form.htmlClass}}" ng-form name=timeForm style="position: relative"><input type=text id={{form.key.slice(-1)[0]}} name=timeTextInput ng-model=timeText ng-pattern=timePattern ng-required=form.required ng-disabled=form.readOnly class=timeTextInput time-picker-text-input-set-dirty-and-validation-status ng-change=timeTextChanged()> <label ng-class="{active: true}" for={{form.key.slice(-1)[0]}} class=timepickerText ng-if=!form.hideLabel>{{form.title | translate}}<em ng-if=form.required>*</em></label> <span><span style="display: inline"><input materializecss-timepicker hidden type=text class=timepicker ng-model=$$value$$ ng-change=timePickerUpdated() ng-model-options=form.ngModelOptions ng-disabled=form.readOnly schema-validate=form sf-changed=form name=timeHolder default-time=form.defaultTime> <i class="material-icons action-icon time-picker-open-icon" ng-class="{\'disabled\': form.readOnly}" style="position: absolute; top: 9px; right: 7px">access_time</i></span> <span class=help-block ng-hide=timeForm.timeTextInput.$error.pattern sf-message=form.description></span></span> <span style=color:red ng-class="{\'timeRegexError\':true}" ng-show="!timeForm.timeTextInput.$valid && timeForm.timeTextInput.$error.pattern">{{errorMessage | translate}}</span> <span style=color:red ng-show="!timeForm.timeTextInput.$valid && timeForm.timeTextInput.$error.required && !timeForm.timeTextInput.$error.displayInputValidity">{{errorMessageTimeTextRequired | translate}}</span></div>'),e.put("app/directives/formDecorators/materializecss/tinymce.html",'<div class={{form.htmlClass}}><label ng-if="form.key!=form.title" or={{form.key.slice(-1)[0]}} style="font-size: 14px" class={{form.labelHtmlClass}}>{{form.title | translate}}<em ng-if=form.required>*</em></label> <textarea ui-tinymce="{{form.tinymceOptions | removeEmbedTagsFromTinyMce}}" sf-changed=form schema-validate=form ng-disabled=form.readonly ng-model-options=form.ngModelOptions ng-model=$$value$$></textarea> <input class=tinymce-image type=file style=display:none><div class=tinymce-helper-text-with-margin-bottom>{{\'Press Shift + Enter for a new line\' | translate}}</div><input class=tinymce-background-image type=file style=display:none> <span class=help-block sf-message=form.description></span><div>{{form.maxImageSizeValidationMessage}}</div></div>'),e.put("app/directives/formDecorators/materializecss/tree-select.html",'<div sf-array=form ng-model=$$value$$ class="form-group schema-form-checkboxes {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label class="control-label active-collection-label active" ng-show=showTitle()>{{form.title}}<em ng-if=form.required>*</em></label><br><div><multi-select-tree-view id=form.key[0] model=$$value$$ config=form.config options=form.options ng-disabled=form.disabled></multi-select-tree-view></div><div class=help-block sf-message=form.description></div></div>'),e.put("app/directives/formDecorators/materializecss/users-auto-complete.html",'<div class="input-field {{form.htmlClass}}"><label class=active>{{form.title}}<em ng-if=form.required>*</em></label><div angucomplete-alt materializecss-users-auto-complete id={{form.key.slice(-1)[0]}} placeholder={{form.placeholder}} text-searching="{{form[\'text-searching\'] | translate}}" text-no-results="{{ form[\'text-no-results\'] | translate}}" ng-disabled=form.readonly class=angucomplete-widget pause=100 selected-object=selectedUser remote-api-handler=autocomplete.fetchMatchingUsers search-fields=user_name title-field=title auto-match=true focus-first=true minlength=1 input-class=topnav-autocomplete match-class=match initial-value=$$value$$ ng-modal=$$value$$><div class=help-block sf-message=form.description></div></div></div>'),e.put("app/directives/formDecorators/materializecss/vacancy-auto-complete.html","<div class=\"input-field {{form.htmlClass}}\"><label ng-class=\"{disabled: form.readonly}\" class=active>{{form.title|translate}}<em ng-if=form.required>*</em></label><div angucomplete-alt materializecss-vacancy-auto-complete id={{form.key.slice(-1)[0]}} placeholder=\"{{form.placeholder | translate}}\" text-searching=\"{{(form['text-searching'] ? form['text-searching']:'') | translate}}\" text-no-results=\"{{(form['text-no-results'] ? form['text-no-results']:'') | translate}}\" class=angucomplete-widget pause=100 selected-object=vacancySelected remote-api-handler=autocomplete.fetchMatchingVacancies title-field=name focus-in=\"form['focus-in']\" auto-match=true focus-first=true input-class=topnav-autocomplete match-class=match input-changed=onInputChange schema-validate=form sf-changed=form ng-model=$$value$$ disable-input=form.readonly></div><div style=\"margin-top: 5px\" class=help-block sf-message=form.description></div></div>"),e.put("app/directives/formDecorators/oxd/add-employee-photo-preview.html",'<div class="{{form.htmlClass}} photo-preview"><label id=photo-preview-lable oxd-add-employee-photo-preview for={{form.for}} class=add-employee-photo-preview-label><img ng-if=!form.croppedImage ng-src={{form.src}} class="{{form.fieldHtmlClass}} employee-image-add-employee add-employee-photo-preview-image"> <img ng-if="form.croppedImage && form.croppedResult" ng-src={{form.croppedImage}} class="{{form.fieldHtmlClass}} employee-image-add-employee add-employee-photo-preview-image"><div ng-if="form.croppedImage && !form.croppedResult" class=cropArea><img-crop id={{form.key.slice(-1)[0]}} image=form.imageToPreview result-image=form.croppedImage class=add-employee-photo-preview-img-crop></img-crop></div></label> <a ng-if="form.maxSize / (1024*1024)>=1 && form.maxSize" class=add-employee-photo-preview-message>{{"Accepts up to " | translate}} {{form.maxSize / (1024*1024) | number:0}}MB</a> <a ng-if="form.maxSize / (1024*1024)<1 && form.maxSize" class=add-employee-photo-preview-message>{{"Accepts up to " | translate}} {{form.maxSize / (1024) | number:0}}Kb</a></div>'),e.put("app/directives/formDecorators/oxd/attachment-with-modify-options.html",'<label ng-class="{disabled: form.readonly}" for={{form.key.slice(-1)[0]}} class=radiobutton-label>{{form.title | translate}}<em ng-if=form.required>*</em></label><div class=row><div class="column col-3"><div class=oxd-download-box><a id={{form.key.slice(-1)[0]}} ng-click=$root.ohrmGlobals.downloadFile(form.link)><div class=oxd-download-icon><i class=material-icons style="font-size: 2.5em;">ohrm_download_doc_oxd</i></div><div class=oxd-download-arrow-icon><i class=material-icons>ohrm_download_icon_oxd</i></div><div class=oxd-download-file-replacement><div class=oxd-download-link>{{form.fileName}}</div></div></a></div></div><div class="column col-6"><div class="custom-control custom-radio" ng-repeat="item in form.titleMap"><input type=radio id="{{form.key.slice(-1)[0]+\'_\'+item.value}}" class="custom-control-input {{form.fieldHtmlClass}}" sf-changed=form ng-disabled=form.readonly ng-model=$$value$$ ng-model-options=form.ngModelOptions ng-value=item.value name="{{form.key.join(\'.\')}}"> <label class=custom-control-label ng-class="{disabled: form.readonly}" for="{{form.key.slice(-1)[0]+\'_\'+item.value}}">{{item.name | translate}}</label></div></div></div>'),
e.put("app/directives/formDecorators/oxd/autocomplete-multiselect.html",'<label>{{form.title}}<em ng-if=form.required>*</em></label><oxd-multiselect items=form.choices tree-structure=form.treeStructure sorting=form.sorting placeholder=form.placeholder show-search-icon=form.showSearchIcon no-search-result-found-text=form.noSearchResultFoundText sf-changed=form key=form.key ng-model=$$value$$ ng-disabled=form.readonly schema-validate=form ng-model-options=form.ngModelOptions></oxd-multiselect><span class="invalid-feedback autocomplete-multiselect-invalid-feedback" sf-message=form.description></span>'),e.put("app/directives/formDecorators/oxd/button-switch.html","<div><oxd-button-switch ng-model=$$value$$ off-label=form.offLabel on-label=form.onLabel disabled=form.readonly sf-changed=form ng-model-options=form.ngModelOptions schema-validate=form></oxd-button-switch><div class=invalid-feedback sf-message=form.description></div></div>"),e.put("app/directives/formDecorators/oxd/button.html","<button type=\"{{form.submit ? 'submit' : 'button'}}\" class={{form.class}} id={{form.key.slice(-1)[0]}} ng-click=\"form.onClick && form.onClick()\"><span ng-if=form.icon class=material-icons>{{form.icon}}</span> <span class=button-text>{{form.title|translate}}</span></button>"),e.put("app/directives/formDecorators/oxd/checkbox-with-number-selector.html",'<div id="{{form.prefix ? form.prefix : \'\'}}{{form.key.slice(-1)[0]}}" class=checkbox-with-number-selector-wrapper><div class="custom-control custom-checkbox"><input materializecss-input id="{{form.prefix ? form.prefix : \'\'}}{{form.key.slice(-1)[0]}}Checkbox" type=checkbox ng-disabled=form.readonly ng-model=$$value$$.selected ng-change=form.selectedChanged() class=custom-control-input> <label class=custom-control-label for="{{form.prefix ? form.prefix : \'\'}}{{form.key.slice(-1)[0]}}Checkbox"><span ng-hide=form.hideLabel>{{form.title | translate}}</span></label></div><oxd-spinner class=checkbox-with-number-selector-spinner model=$$value$$.value min=0 max=18250 readonly=!$$value$$.selected></oxd-spinner><span class=checkbox-with-number-selector-suffix ng-if=form.titleSuffix>{{form.titleSuffix | translate}}</span></div>'),e.put("app/directives/formDecorators/oxd/checkbox.html",'<div class="custom-control custom-checkbox"><input materializecss-input id="{{form.prefix ? form.prefix : \'\'}}{{form.key.slice(-1)[0]}}" sf-changed=form type={{form.type}} placeholder={{form.placeholder}} ng-disabled=form.readonly schema-validate=form ng-model=$$value$$ ng-model-options=form.ngModelOptions class=custom-control-input> <label class=custom-control-label ng-class="{\'with-additional-info\':form.additionalInfo}" for="{{form.prefix ? form.prefix : \'\'}}{{form.key.slice(-1)[0]}}"><span ng-hide=form.hideLabel>{{form.title | translate}}</span> <span ng-if=form.additionalInfo class=material-icons oxd-tooltip data-placement=bottom title={{form.additionalInfo.message}}>{{form.additionalInfo.icon}}</span></label><div class=invalid-feedback sf-message=form.description></div></div>'),e.put("app/directives/formDecorators/oxd/checkboxes.html",'<div sf-array=form ng-model=$$value$$ class=oxd-check-boxes><div ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess(), \'compact-checkboxes-container\': form.compact}"><label ng-if="!form.hideLabel && !form.labelIcon" class="control-label active-collection-label active {{form.labelHtmlClass}}" ng-show=showTitle()>{{form.title}}<em ng-if=form.required>*</em></label><div ng-if="!form.hideLabel && form.labelIcon" class=form-field-label-holder><label class="control-label active-collection-label active {{form.labelHtmlClass}}" ng-show=showTitle()>{{form.title}}<em ng-if=form.required>*</em></label><oxd-hint ng-if=form.labelHint disable-html-escaping=true hint={{form.labelHint}} icon={{form.labelIcon}} inline=true at-position={{form.hintAtPosition}} my-position={{form.hintMyPosition}}></oxd-hint></div><div class="custom-control custom-checkbox {{form.fieldHtmlClass}}" ng-repeat="val in titleMapValues track by $index" style="margin-top: 0.3rem;"><input materializecss-input type=checkbox id="{{form.prefix ? form.prefix+\'_\' : \'\'}}{{form.key+form.titleMap[$index].value}}" placeholder={{form.placeholder}} ng-disabled="form.readonly || (form.readonlyOptions && form.readonlyOptions.indexOf(form.titleMap[$index].value)>-1)" sf-changed=form class="custom-control-input {{form.fieldHtmlClass}}" ng-model=titleMapValues[$index]> <label class=custom-control-label for="{{form.prefix ? form.prefix+\'_\' : \'\'}}{{form.key+form.titleMap[$index].value}}">{{form.titleMap[$index].name}}</label></div></div><div class=invalid-feedback sf-message=form.description></div></div>'),e.put("app/directives/formDecorators/oxd/container.html",'<div><div class={{item.htmlClass}} oxd-decorator ng-repeat="item in form.items" form=item></div></div>'),e.put("app/directives/formDecorators/oxd/cost-centre-auto-complete.html","<div class=input-field><label ng-if=\"!form.hideLabel && !form.labelIcon\">{{form.title|translate}}<em ng-if=form.required>*</em></label><div ng-if=\"!form.hideLabel && form.labelIcon\" class=form-field-label-holder><label ng-class=\"{disabled: form.readonly}\" class=active>{{form.title|translate}}<em ng-if=form.required>*</em></label><oxd-hint ng-if=form.labelHint disable-html-escaping=true hint={{form.labelHint}} icon={{form.labelIcon}} inline=true at-position={{form.hintAtPosition}} my-position={{form.hintMyPosition}}></oxd-hint></div><div angucomplete-alt-oxd materializecss-cost-centre-auto-complete id={{form.key.slice(-1)[0]}} placeholder=\"{{form.placeholder | translate}}\" text-searching=\"{{(form['text-searching'] ? form['text-searching']:'') | translate}}\" text-no-results=\"{{(form['text-no-results'] ? form['text-no-results']:'') | translate}}\" class=angucomplete-widget pause=100 selected-object=costCentreSelected remote-api-handler=autocomplete.fetchMatchingCostCentres title-field=cost_code,name focus-in=\"form['focus-in']\" auto-match=true focus-first=true input-class=\"form-control topnav-autocomplete\" match-class=match input-changed=onInputChange initial-value=\"$$value$$?$$value$$.cost_code + ($$value$$.name.startsWith('-')?' '+$$value$$.name:' - '+$$value$$.name):$$value$$\" schema-validate=form sf-changed=form ng-model=$$value$$ disable-input=form.readonly></div><div class=invalid-feedback sf-message=form.description></div></div>"),e.put("app/directives/formDecorators/oxd/custom-field-attachment.html",'<div class="file-field custom-field-attachment" redraw-file-on-clean><div ng-if=!form.hideLabel class=form-field-label-holder><label for={{form.key.slice(-1)[0]}} title={{form.tooltip}} ng-if=!form.hideLabel>{{form.title | translate}}<em ng-if=form.required>*</em></label><oxd-hint ng-if=form.labelHint disable-html-escaping=true hint={{form.labelHint}} icon={{form.labelIcon}} inline=true at-position={{form.hintAtPosition}} my-position={{form.hintMyPosition}}></oxd-hint><small ng-if="!form.attachmentFileName && form.maxSize / (1024*1024)>=1 && form.maxSize">({{"Accepts up to " | translate}} {{form.maxSize / (1024*1024) | number:0}}MB)</small> <small ng-if="!form.attachmentFileName && form.maxSize / (1024*1024)<1 && form.maxSize">({{"Accepts up to " | translate}} {{form.maxSize / (1024) | number:0}}Kb)</small></div><span ng-if=!form.attachmentFileName><div class="file-path-wrapper form-control" ng-class="{\'file-upload-error-wrapper\': form.disableErrorState !== true && hasError(), \'disabled\': form.readonly}"><input materializecss-file type=file class=file-input id={{form.key.slice(-1)[0]}} sf-changed=form placeholder={{form.placeholder}} ng-disabled=form.readonly schema-validate=form ng-model=$$value$$ ng-model-options=form.ngModelOptions> <button class="btn btn-file" type=button ng-if=fileInputVisible ohrm-disable-animation>{{\'Browse\'| translate}}</button> <input ng-if=!form.hideText ng-class="{\'has-error\': form.disableErrorState !== true && hasError()}" class=file-path type=text readonly> <span class="help-block invalid-feedback" sf-message=form.description></span></div></span><div ng-if=form.attachmentFileName custom-field-attachment ng-model=$$value$$ class=filled-custom-field-attachment-container><span class="filled-custom-field-attachment input-group" ng-class="{\'delete-confirmation-highlighted\': vm.showDeleteConfirmation, \'disabled\': form.readonly}"><input id={{form.key.slice(-1)[0]}} sf-changed=form class="form-control filled-custom-field-attachment-name" type=text ng-disabled=true ng-model=form.attachmentFileName ng-class="{\'disabled\': form.readonly}"><div class=input-group-append-container><span class="filled-custom-field-attachment-buttons input-group-append"><span class="material-icons delete-icon btn" ng-click="!vm.showDeleteConfirmation && vm.deleteAttachment(form)" ng-if=form.permissions.update title="{{\'Delete\' | translate}}" oxd-tooltip data-placement=bottom>delete</span> <span class="material-icons attachment-icon btn" ng-click="!vm.showDeleteConfirmation && $root.ohrmGlobals.downloadFile(form.attachmentUrl)" ng-if="form.attachmentUrl && form.permissions.read" title="{{\'Download\' | translate}}" oxd-tooltip data-placement=bottom>file_downloadng</span></span></div></span><div class=attachment-deletion-confirmation-buttons ng-if=vm.showDeleteConfirmation><button type=button class="btn btn-text-danger" id=save-button data-icon=delete_forever ng-click=vm.confirmDeletion(form)>{{"Confirm Delete" | translate}}</button> <button type=button class="btn btn-text" ng-click=vm.cancelDeletion(form)>{{"Cancel" | translate}}</button></div></div></div>'),e.put("app/directives/formDecorators/oxd/date.html",'<label ng-hide="form.hideLabel || form.labelIcon" for={{form.key.slice(-1)[0]}}>{{form.title | translate}}<em ng-if=form.required>*</em></label><div ng-hide="form.hideLabel || !form.labelIcon" class=form-field-label-holder><label for={{form.key.slice(-1)[0]}}>{{form.title | translate}}<em ng-if=form.required>*</em></label><oxd-hint ng-if=form.labelHint disable-html-escaping=true hint={{form.labelHint}} icon={{form.labelIcon}} inline=true at-position={{form.hintAtPosition}} my-position={{form.hintMyPosition}}></oxd-hint></div><div class="input-group form-date" ng-form name=dateForm><input type=text id={{form.key.slice(-1)[0]}} name=dateTextInput class="form-control truncate" ng-model=dateText ng-pattern=datePattern ng-change=textClicked($event) ng-attr-data-original-title="{{longDateFormat && dateText || undefined }}" oxd-tooltip data-placement=bottom maximum-date=maxDate minimum-date=minDate min-max-date-validator max-date-is-valid=errorMaxDate min-date-is-valid=errorMinDate date-picker-text-input-set-dirty-and-validation-status ng-model-options="{updateOn: \'blur\'}" ng-attr-placeholder="{{ !!(form.placeholder) ? form.placeholder : undefined }}" ng-disabled=form.readonly><div class=input-group-append-container><div class=input-group-append><input oxd-date hidden type=date class="datepicker original" sf-changed=form placeholder={{form.placeholder}} default-date=form.defaultDate reset-default-date=form.resetDefaultDate ng-disabled=form.readonly ng-model=$$value$$ ng-change=datePickerUpdated($event) schema-validate=form name=dateHolder employee-id={{form.employeeId}} ng-model-options=form.ngModelOptions> <button class="btn date-picker-button" type=button><i class="material-icons date-picker-open-icon">date_range</i></button></div></div><div class=invalid-feedback sf-message=form.description ng-show="!dateForm.dateTextInput.$error.pattern && !errorDate && !errorMaxDate && !errorMinDate && !errorRequired"></div><div class=invalid-feedback ng-show=dateForm.dateTextInput.$error.pattern>{{errorMessage | translate}}</div><div class=invalid-feedback ng-show="(errorDate || errorMaxDate || errorMinDate) && !dateForm.dateTextInput.$error.pattern">{{errorMessageDate}}</div><div class=invalid-feedback ng-show="errorRequired && !dateForm.dateTextInput.$error.pattern && !errorDate && !errorMaxDate && !errorMinDate">{{errorMessageRequired | translate}}</div></div>'),e.put("app/directives/formDecorators/oxd/default.html",'<div class="form-group schema-form-{{form.type}} {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess(), \'has-feedback\': form.feedback !== false }"><label class="control-label {{form.labelHtmlClass}}" ng-class="{\'sr-only\': !showTitle()}" for={{form.key.slice(-1)[0]}}>{{form.title}}<em ng-if=form.required>*</em></label> <input ng-if="!form.fieldAddonLeft && !form.fieldAddonRight" ng-show=form.key type={{form.type}} step=any sf-changed=form placeholder={{form.placeholder}} class="form-control {{form.fieldHtmlClass}}" id={{form.key.slice(-1)[0]}} ng-model-options=form.ngModelOptions ng-model=$$value$$ ng-disabled=form.readonly schema-validate=form name={{form.key.slice(-1)[0]}} aria-describedby="{{form.key.slice(-1)[0] + \'Status\'}}"><div ng-if="form.fieldAddonLeft || form.fieldAddonRight" ng-class="{\'input-group\': (form.fieldAddonLeft || form.fieldAddonRight)}"><span ng-if=form.fieldAddonLeft class=input-group-addon ng-bind-html=form.fieldAddonLeft></span> <input ng-show=form.key type={{form.type}} step=any sf-changed=form placeholder={{form.placeholder}} class="form-control {{form.fieldHtmlClass}}" id={{form.key.slice(-1)[0]}} ng-model-options=form.ngModelOptions ng-model=$$value$$ ng-disabled=form.readonly schema-validate=form name={{form.key.slice(-1)[0]}} aria-describedby="{{form.key.slice(-1)[0] + \'Status\'}}"> <span ng-if=form.fieldAddonRight class=input-group-addon ng-bind-html=form.fieldAddonRight></span></div><span ng-if="form.feedback !== false" class=form-control-feedback ng-class="evalInScope(form.feedback) || {\'glyphicon\': true, \'glyphicon-ok\': hasSuccess(), \'glyphicon-remove\': hasError() }" aria-hidden=true></span> <span ng-if="hasError() || hasSuccess()" id="{{form.key.slice(-1)[0] + \'Status\'}}" class=sr-only>{{ hasSuccess() ? \'(success)\' : \'(error)\' }}</span><div class=help-block sf-message=form.description></div></div>'),e.put("app/directives/formDecorators/oxd/delete-button.html",'<div class=oxd-delete-selected-region><button type=button class="{{form.class}} oxd-delete-selected-region-borderles" id={{form.key.slice(-1)[0]}} ng-click="form.onClick && form.onClick()"><i class=material-icons>{{form.icon}}</i></button></div>'),e.put("app/directives/formDecorators/oxd/divider.html",'<hr class=divider ng-style="{margin: form.margin}" oxd-decorator>'),e.put("app/directives/formDecorators/oxd/document-margin-selector.html",'<div ng-class="{disabled: usedForm.readonly}" class=document-margin-label-div>{{usedForm.title | translate}}<em ng-if=usedForm.required>*</em><small>{{usedForm.helpMessage}}</small></div><div class=document-margin-selector-container><div class=document-margin-selector-outer><div><i class="material-icons document-margin-left-box-icon">arrow_drop_down</i> <input class="form-control document-margin-left-box" ng-class="{\'ng-invalid\': !validation.margin_left}" type=text placeholder={{usedForm.placeholder}} ng-model=ngModel.margin_left></div><div><i class="material-icons document-margin-top-box-icon">arrow_drop_down</i> <input class="form-control document-margin-top-box" ng-class="{\'ng-invalid\': !validation.margin_top}" type=text placeholder={{usedForm.placeholder}} ng-model=ngModel.margin_top></div><i class="material-icons document-margin-icon">ohrm_margin_document</i><div><i class="material-icons document-margin-right-box-icon">arrow_drop_down</i> <input class="form-control document-margin-right-box" ng-class="{\'ng-invalid\': !validation.margin_right}" type=text placeholder={{usedForm.placeholder}} ng-model=ngModel.margin_right></div><div><i class="material-icons document-margin-bottom-box-icon">arrow_drop_down</i> <input class="form-control document-margin-bottom-box" ng-class="{\'ng-invalid\': !validation.margin_bottom}" type=text placeholder={{usedForm.placeholder}} ng-model=ngModel.margin_bottom></div></div></div>'),e.put("app/directives/formDecorators/oxd/document-margin.html","<div class=document-margin-outer><div><oxd-document-margin-selector used-form=form ng-model=$$value$$></oxd-document-margin-selector><input type=hidden sf-changed=form schema-validate=form ohrm-make-element-non-pristine=true ng-model=$$value$$ ng-model-options=form.ngModelOptions></div><span class=invalid-feedback-document-margin sf-message=form.description></span></div>"),e.put("app/directives/formDecorators/oxd/dropdown-button.html",'<div class=dropdown-button-container><button class="btn dropdown-toggle {{ form.style }}" data-toggle=dropdown>{{form.title | translate}}</button><ul class="dropdown-menu dropdown-menu-right"><li ng-repeat="dropdownOption in form.dropDownOptions" class=dropdown-item ng-click=form.onPerformDropdownOptionAction(dropdownOption.value)><div><span>{{dropdownOption.name | translate}}</span></div></li></ul></div>'),e.put("app/directives/formDecorators/oxd/employee-auto-complete.html","<div class=input-field><label for={{form.key.slice(-1)[0]}} ng-if=!form.hideLabel>{{form.title|translate}}<em ng-if=form.required>*</em></label><div angucomplete-alt-oxd materializecss-employee-auto-complete id={{form.key.slice(-1)[0]}} placeholder=\"{{form.placeholder | translate}}\" text-searching=\"{{(form['text-searching'] ? form['text-searching']:'') | translate}}\" text-no-results=\"{{(form['text-no-results'] ? form['text-no-results']:'') | translate}}\" class=\"angucomplete-widget contains-emp-id\" ng-disabled=form.readonly pause=100 selected-object=employeeSelected remote-api-handler=autocomplete.fetchMatchingEmployees search-fields=firstName,middleName,lastName title-field=fullName description-field=employeeId focus-in=\"form['focus-in']\" auto-match=true focus-first=true input-class=\"form-control topnav-autocomplete contains-emp-id\" match-class=match input-changed=onInputChange initial-value=$$value$$ schema-validate=form sf-changed=form ng-model=$$value$$ disable-input=\"form['disable']\"></div><div class=invalid-feedback sf-message=form.description></div></div>"),e.put("app/directives/formDecorators/oxd/employee-name-input.html",'<label title={{usedForm.tooltip}} class={{usedForm.labelHtmlClass}} ng-hide=usedForm.hideLabel>{{usedForm.title | translate}}<em ng-if=usedForm.required>*</em></label><div class=input-group><input class="form-control first-name-box" id=first-name-box placeholder={{usedForm.placeholders.firstName}} type=text ng-disabled=usedForm.readonly ng-model=ngModel.firstName> <input class="form-control middle-name-box" id=middle-name-box placeholder={{usedForm.placeholders.middleName}} type=text ng-disabled=usedForm.readonly ng-model=ngModel.middleName> <input class=form-control id=last-name-box placeholder={{usedForm.placeholders.lastName}} type=text ng-disabled=usedForm.readonly ng-model=ngModel.lastName></div>'),e.put("app/directives/formDecorators/oxd/employee-name.html","<div><oxd-employee-name-input used-form=form ng-model=$$value$$></oxd-employee-name-input><input type=hidden sf-changed=form schema-validate=form ohrm-make-element-non-pristine=true ng-model=$$value$$ ng-model-options=form.ngModelOptions></div><span class=invalid-feedback-employee-name sf-message=form.description></span>"),e.put("app/directives/formDecorators/oxd/file.html",'<div class=file-field redraw-file-on-clean><div ng-if=!form.hideLabel class=form-field-label-holder><label for={{form.key.slice(-1)[0]}} title={{form.tooltip}}>{{form.title | translate}}<em ng-if=form.required>*</em></label><oxd-hint ng-if=form.labelHint disable-html-escaping=true hint={{form.labelHint}} icon={{form.labelIcon}} inline=true at-position={{form.hintAtPosition}} my-position={{form.hintMyPosition}}></oxd-hint><small ng-if="form.maxSize / (1024*1024)>=1 && form.maxSize && !form[\'customHint\']">({{"Accepts up to " | translate}} {{form.maxSize / (1024*1024) | number:0}}MB)</small> <small ng-if="form.maxSize / (1024*1024)<1 && form.maxSize && !form[\'customHint\']">({{"Accepts up to " | translate}} {{form.maxSize / (1024) | number:0}}Kb)</small> <small ng-if=form.customHint>({{form.customHint}})</small></div><span ng-if=!form.attachmentExists><input materializecss-file type=file class=file-input id={{form.key.slice(-1)[0]}} sf-changed=form placeholder={{form.placeholder}} ng-disabled=form.readonly schema-validate=form ng-model=$$value$$ ng-model-options=form.ngModelOptions><div class="file-path-wrapper form-control" ng-class="{\'disabled\': form.readonly}"><button class="btn btn-file" type=button ng-if=fileInputVisible ohrm-disable-animation>{{\'Browse\'| translate}}</button> <input ng-if=!form.hideText ng-class="{\'has-error\': form.disableErrorState !== true && hasError()}" class=file-path type=text readonly></div><span class="help-block invalid-feedback" sf-message=form.description></span></span><div ng-if=form.attachmentExists custom-field-attachment ng-model=$$value$$ class=filled-custom-field-attachment-container><span class="filled-custom-field-attachment input-group" ng-class="{\'delete-confirmation-highlighted\': form.showDeleteConfirmation, \'disabled\': form.readonly}"><input id={{form.key.slice(-1)[0]}} sf-changed=form class="form-control filled-custom-field-attachment-name" type=text ng-disabled=true ng-model=form.attachmentFileName ng-class="{\'disabled\': form.readonly}"><div class=input-group-append-container><span class="filled-custom-field-attachment-buttons input-group-append"><span class="material-icons delete-icon btn" ng-click="!form.showDeleteConfirmation && form.deleteAttachment(form)" ng-if="form.hasOwnProperty(\'deleteAttachment\') && !form.readonly" title="{{\'Delete\' | translate}}" oxd-tooltip data-placement=bottom>delete</span> <span class="material-icons attachment-icon btn" ng-click="!form.showDeleteConfirmation && $root.ohrmGlobals.downloadFile(form.attachmentUrl)" ng-if=form.attachmentUrl title="{{\'Download\' | translate}}" oxd-tooltip data-placement=bottom>file_downloadng</span></span></div></span><div class=attachment-deletion-confirmation-buttons ng-if=form.showDeleteConfirmation><button type=button class="btn btn-text-danger" id=save-button data-icon=delete_forever ng-click=form.confirmDeletion(form)>{{"Confirm Delete" | translate}}</button> <button type=button class="btn btn-text" ng-click=form.cancelDeletion(form)>{{"Cancel" | translate}}</button></div></div></div>'),e.put("app/directives/formDecorators/oxd/generic-auto-complete.html","<label for={{form.key.slice(-1)[0]}} ng-if=!form.hideLabel>{{form.title|translate}}<em ng-if=form.required>*</em></label><div angucomplete-alt-oxd id={{form.key.slice(-1)[0]}} placeholder=\"{{form.placeholder | translate}}\" text-searching=\"{{form['text-searching'] ? (form['text-searching'] | translate):false }}\" text-no-results=\"{{form['text-no-results'] ? (form['text-no-results'] | translate):false }}\" class=angucomplete-widget ng-disabled=form.readonly pause=100 selected-object=\"form['objectSelectedCallback']\" remote-api-handler=\"form['fetchItemsCallback']\" search-fields=\"{{form['searchFields']}}\" title-field=\"{{form['titleField']}}\" focus-in=\"form['focus-in']\" auto-match=true focus-first=true input-class=\"form-control topnav-autocomplete contains-emp-id generic-autocomplete-dropdown\" match-class=match input-changed=\"form['onInputChange']\" initial-value=\"form['initialValue']\" schema-validate=form sf-changed=form ng-model=$$value$$ ng-model-options=form.ngModelOptions disable-input=\"form['disable']\" oxd-tooltip data-placement=bottom title={{form.tooltip}}></div><div class=invalid-feedback sf-message=form.description></div>"),e.put("app/directives/formDecorators/oxd/icon-button-with-inline-label.html",'<label class=form-note style="display: inline-block">{{form.label | translate}}</label> <button class={{form.style}} type=button ng-click="buttonClick($event, form)" ng-disabled=form.readonly><oxd-button-loader ng-if=form.loading></oxd-button-loader><i class=material-icons ng-if="form.icon && !form.loading">{{form.icon}}</i> <span>{{form.iconLabel | translate}}</span></button>'),e.put("app/directives/formDecorators/oxd/icon-button-with-text.html",'<button class={{form.style}} type=button ng-click="buttonClick($event, form)" ng-disabled=form.readonly><oxd-button-loader ng-if=form.loading></oxd-button-loader><span>{{form.iconLabel | translate}}</span> <i class=material-icons ng-if="form.icon && !form.loading">{{form.icon}}</i></button>'),e.put("app/directives/formDecorators/oxd/icon-button.html",'<button class="{{ form.style }}" type=button ng-click=buttonClick($event,form) ng-disabled=form.readonly><i class=material-icons oxd-tooltip title="{{form.title | translate}}" ng-if=form.iconName>{{form.iconName}}</i> <span ng-if=!form.iconName>{{form.title | translate}}</span></button>'),e.put("app/directives/formDecorators/oxd/icon-select.html",'<div class=oxd-icon-select><label style="padding-bottom: 10px" class=d-block>{{form.title | translate}}<em ng-if=form.required>*</em></label><div materializecss-icon-select ng-model=$$value$$ icons=form.icons class=input-field id="{{form.key.slice(-1)[0]+\'_inputfileddiv\'}}"><div style="margin-bottom: 0px; display: flex"><div ng-repeat="icon in form.icons" style="padding: 0px; margin-right: 10px;"><div class="center select-icon-container" style="margin-bottom: 0px"><i class="select-icon material-icons action-icon {{($$value$$==icon.value)?\'selected-icon\':\'\'}}">{{icon.name}}</i><div class=icon-label>{{icon.label | translate}}</div></div></div></div></div></div>'),e.put("app/directives/formDecorators/oxd/icon.html",'<div class="input-field {{form.htmlClass}}"><i class=material-icons ng-style=form.style ng-click=form.onClick(form)>{{form.iconName}}</i></div>'),e.put("app/directives/formDecorators/oxd/input-with-button-actions.html",'<div class=inputWithButtonActions sf-use-decorator=oxdDecorator><div class=main-container><div class=header><div class=label-container><span class="oxd-switch-label label">{{form.label | translate}}</span></div></div><div class=action-container><div class=input-primary-action-container><div class=input-container><input materializecss-input ng-readonly=form.readonly id={{form.key.slice(-1)[0]}} onclick=this.select(); sf-changed=form class=form-control placeholder={{form.placeholder}} schema-validate=form ng-model=$$value$$ ng-model-options=form.ngModelOptions ng-attr-autocomplete={{form.autocompleteOff}}></div><div class=primary-action-container oxd-tooltip data-original-title="{{form.primaryActionToolTip | translate}}" data-position=left><a ng-click=form.primaryAction()><i class="material-icons primary-action-icon">{{form.primaryActionIcon}}</i></a></div></div><div class=secondary-action-container><button type=button class=secondary-action-button ng-click=form.secondaryAction()><i class="material-icons secondary-action-icon" oxd-tooltip data-original-title="{{form.secondaryActionToolTip | translate}}">oxd_link_reset</i></button></div></div></div></div>'),e.put("app/directives/formDecorators/oxd/job-spec.html",'<label ng-if="!form.hideLabel && !form.labelIcon" for={{form.key.slice(-1)[0]}}>{{form.title | translate}}</label><div ng-if="!form.hideLabel && form.labelIcon" class=form-field-label-holder><label for={{form.key.slice(-1)[0]}} ng-class="{disabled: form.readonly}" class=active>{{form.title | translate}}</label><oxd-hint ng-if=form.labelHint disable-html-escaping=true hint={{form.labelHint}} icon={{form.labelIcon}} inline=true at-position={{form.hintAtPosition}} my-position={{form.hintMyPosition}}></oxd-hint></div><div class=file-field><div class=filled-custom-field-attachment-container><span class="filled-custom-field-attachment input-group disabled" job-spec-link id={{form.key.slice(-1)[0]}}><div id=job-spec-attachment-name class="form-control filled-custom-field-attachment-name disabled"></div><i class=input-group-append-container><span class="filled-custom-field-attachment-buttons input-group-append"><span class="material-icons attachment-icon btn" ng-click=download() title="{{\'Download\' | translate}}" oxd-tooltip data-placement=bottom>file_downloadng</span></span></i></span></div></div>'),e.put("app/directives/formDecorators/oxd/link-with-button.html",'<label ng-if="form.hideLabel !== true">{{form.title | translate}}</label><div id={{form.key.slice(-1)[0]}} class="col-12 oxd-form-link-with-button form-group {{form.htmlClass}}"><div class=col-9><a href={{form.link}} target=_blank>{{form.displayLink | translate}}</a></div><div class=col-3><a class="btn btn-text" ng-click=form.onClick()>{{\'Copy Link\' | translate}}</a></div></div>'),e.put("app/directives/formDecorators/oxd/multiselect-dropdown-with-text.html","<label>{{form.title|translate}}<em ng-if=form.required>*</em></label><div class=separator-line></div><oxd-multiselect-dropdown-text items=form.choices tree-structure=form.treeStructure sorting=form.sorting placeholder=form.placeholder show-search-icon=form.showSearchIcon no-search-result-found-text=form.noSearchResultFoundText sf-changed=form key=form.key ng-model=$$value$$ ng-disabled=form.readonly schema-validate=form ng-model-options=form.ngModelOptions></oxd-multiselect-dropdown-text>"),e.put("app/directives/formDecorators/oxd/note.html","<span class=form-note oxd-decorator>{{form.title|translate}}</span>"),e.put("app/directives/formDecorators/oxd/password-help-text.html",'<div class=password-help-text-container><small>{{"For a strong password, please use a hard to guess combination of text with upper and lower case characters, symbols and numbers" | translate}}</small></div>'),e.put("app/directives/formDecorators/oxd/password.html","<div ng-class=\"{'very-weak-strength' : (passwordStrength == 'veryWeak' && $$value$$.length >= form.minLength && $$value$$.length <= form.maxLength), 'weak-strength' : (passwordStrength == 'weak' && $$value$$.length >= form.minLength && $$value$$.length <= form.maxLength), 'better-strength' : (passwordStrength == 'better' && $$value$$.length >= form.minLength && $$value$$.length <= form.maxLength), 'medium-strength' : (passwordStrength == 'medium' && $$value$$.length >= form.minLength && $$value$$.length <= form.maxLength), 'strong-strength' : (passwordStrength == 'strong' && $$value$$.length >= form.minLength && $$value$$.length <= form.maxLength), 'strongest-strength' : (passwordStrength == 'strongest' && $$value$$.length >= form.minLength && $$value$$.length <= form.maxLength), 'without-minimum-password-strength': !hasMinimumPasswordStrength}\" class=password-container><div class=password-strength-check-container><span ng-if=\"$$value$$.length >= form.minLength && $$value$$.length <= form.maxLength\" class=password-strength-check>{{passwordStrengthMessage | translate}}</span></div><label for={{form.key.slice(-1)[0]}}>{{form.title | translate}}<em ng-if=form.required>*</em></label><div ng-if=form.ngModelOptions.visibilityIcon class=password-visibility-icon-holder><i ng-if=!passwordVisible class=\"material-icons password-visibility-icon\" ng-click=togglePasswordVisibility() title=\"{{'Show Password'| translate}}\" oxd-tooltip data-placement=bottom>visibility</i> <i ng-if=passwordVisible class=\"material-icons password-visibility-icon\" ng-click=togglePasswordVisibility() title=\"{{'Hide Password'| translate}}\" oxd-tooltip data-placement=bottom>visibility_off</i></div><input oxd-password id={{form.key.slice(-1)[0]}} sf-changed=form class=form-control type=password autocomplete=off placeholder={{form.placeholder}} ng-disabled=form.readonly schema-validate=form ng-model=$$value$$ ohrm-make-element-non-pristine=form.removePristine ng-model-options=form.ngModelOptions> <span class=invalid-feedback sf-message=form.description></span></div>"),e.put("app/directives/formDecorators/oxd/photo-attachment-preview-file.html",'<div class="right photo-attachment-preview-container"><input oxd-file type=file id={{form.key.slice(-1)[0]}} sf-changed=form ng-disabled=form.readonly schema-validate=form ng-model=$$value$$ ng-model-options=form.ngModelOptions class=photo-attachment-preview-input><br></div>'),
e.put("app/directives/formDecorators/oxd/plain-password.html",'<div class="password-container plain-password"><label for={{form.key.slice(-1)[0]}}>{{form.title | translate}}<em ng-if=form.required>*</em></label> <input materializecss-input plain-password id={{form.key.slice(-1)[0]}} name={{form.key.slice(-1)[0]}} sf-changed=form class=form-control type=password autocomplete=off placeholder={{form.placeholder}} ng-disabled=form.readonly schema-validate=form ng-model=$$value$$ ohrm-make-element-non-pristine=form.removePristine ng-model-options=form.ngModelOptions> <span class=invalid-feedback sf-message=form.description></span><div ng-if=form.ngModelOptions.visibilityIcon class=password-visibility-icon-holder tabindex=0 ng-keydown=checkToggleVisiblity($event)><i ng-if=!passwordVisible class="material-icons password-visibility-icon cursor-pointer" ng-click=togglePasswordVisibility() data-title="{{\'Show Password\'| translate}}" oxd-tooltip data-placement=bottom>visibility</i> <i ng-if=passwordVisible class="material-icons password-visibility-icon cursor-pointer" ng-click=togglePasswordVisibility() data-title="{{\'Hide Password\'| translate}}" oxd-tooltip data-placement=bottom>visibility_off</i></div></div>'),e.put("app/directives/formDecorators/oxd/radio-buttons.html",'<div><label ng-class="{disabled: form.readonly}" ng-if="!form.hideLabel && !form.labelIcon" class=d-block>{{form.title | translate}}<em ng-if=form.required>*</em></label><div ng-if="!form.hideLabel && form.labelIcon" class=form-field-label-holder><label ng-class="{disabled: form.readonly}" class=d-block>{{form.title | translate}}<em ng-if=form.required>*</em></label><oxd-hint ng-if=form.labelHint disable-html-escaping=true hint={{form.labelHint}} icon={{form.labelIcon}} inline=true at-position={{form.hintAtPosition}} my-position={{form.hintMyPosition}}></oxd-hint></div><div ng-class="{\'radio-display-horizontal\': form.makeHorizontal}"><div class="custom-control custom-radio {{item.class}}" ng-class="{\'radio-display-horizontal-margin\': form.makeHorizontal, \'selected-option\': $$value$$ == item.value, \'disabled\': form.readonly}" ng-repeat="item in form.titleMap"><input type=radio id="{{form.prefix ? form.prefix+\'_\' : \'\'}}{{form.key.slice(-1)[0]+\'_\'+item.value}}" class="custom-control-input {{form.fieldHtmlClass}}" sf-changed=form ng-disabled=form.readonly ng-model=$$value$$ ng-model-options=form.ngModelOptions ng-value=item.value name="{{form.key.join(\'.\')}}"> <label class=custom-control-label ng-class="{disabled: form.readonly}" for="{{form.prefix ? form.prefix+\'_\' : \'\'}}{{form.key.slice(-1)[0]+\'_\'+item.value}}">{{item.name | translate}}</label><div class="form-group {{child.htmlClass}}" oxd-decorator ng-if="child.parent == item.value" ng-repeat="child in form.items" form=child></div></div></div></div>'),e.put("app/directives/formDecorators/oxd/read-only-text.html",'<div id={{form.key.slice(-1)[0]}} class="oxd-form-read-only-text {{form.htmlClass}}"><div class=form-read-only-text-label><i ng-if=form.icon class=material-icons>{{form.icon}}</i><span ng-if="form.hideLabel !== true">{{form.title | translate}}</span></div><div class=form-read-only-text-value ng-class="{\'label-has-icon\': !!form.icon}">{{$$value$$}}</div></div>'),e.put("app/directives/formDecorators/oxd/round-slide.html",'<div class={{form.htmlClass}}><label ng-if=form.showLabel class=align-center>{{form.title | translate}}<em ng-if=form.required>*</em></label><round-slide ng-model=$$value$$ config=form.config></round-slide><div ng-if="form.config.includeIncrementSpinner && !form.config.readOnly"><oxd-spinner model=$$value$$ min=0></oxd-spinner></div></div>'),e.put("app/directives/formDecorators/oxd/row.html",'<div class="form-row {{form.htmlRowClass}}"><div class="form-group {{item.htmlClass}}" oxd-decorator ng-repeat="item in form.items" form=item></div></div>'),e.put("app/directives/formDecorators/oxd/section-heading.html","<div class={{form.htmlClass}}><span class=section-heading>{{form.text}}</span></div>"),e.put("app/directives/formDecorators/oxd/select.html",'<div class="input-group form-select"><label for={{form.key.slice(-1)[0]}} title={{form.tooltip}} ng-if="!form.hideLabel && !form.labelIcon">{{form.title | translate}}<em ng-if=form.required>*</em></label><div ng-if="!form.hideLabel && form.labelIcon" class=form-field-label-holder><label for={{form.key.slice(-1)[0]}}>{{form.title | translate}}<em ng-if=form.required>*</em></label><oxd-hint ng-if=form.labelHint disable-html-escaping=true hint={{form.labelHint}} icon={{form.labelIcon}} inline=true at-position={{form.hintAtPosition}} my-position={{form.hintMyPosition}}></oxd-hint></div><select ng-if=!form.translate id={{form.key.slice(-1)[0]}} oxd-select ng-model=$$value$$ ng-model-options=form.ngModelOptions ng-disabled=form.readonly sf-changed=form class="{{form.fieldHtmlClass}} select-dropdown" ng-class="{\'loader-is-showing\' : form.showLoader}" schema-validate=form ng-options="item.value as item.name group by item.group for item in form.titleMap" ohrm-make-element-non-pristine=form.removePristine name={{form.key.slice(-1)[0]}}></select><select ng-if=form.translate id={{form.key.slice(-1)[0]}} oxd-select ng-model=$$value$$ ng-model-options=form.ngModelOptions ng-disabled=form.readonly sf-changed=form class="{{form.fieldHtmlClass}} select-dropdown" ng-class="{\'loader-is-showing\' : form.showLoader}" schema-validate=form ng-options="item.value as item.name | translate group by item.group | translate for item in form.titleMap" ohrm-make-element-non-pristine=form.removePristine name={{form.key.slice(-1)[0]}}></select><div class=input-group-append-container><div class="oxd-circle-loader loader-with-select" ng-if=form.showLoader>{{\'Loading\' | translate}}</div><div class=input-group-append><button class=btn type=button tabindex=-1><i class="selected-item-icon material-icons"></i> <i class=material-icons>arrow_drop_down</i></button></div></div><span class=invalid-feedback sf-message=form.description></span></div>'),e.put("app/directives/formDecorators/oxd/selective-pills.html",'<div><label ng-class="{disabled: form.readonly}" class=d-block>{{form.title | translate}}<em ng-if=form.required>*</em></label><div oxd-selective-pills ng-model=$$value$$ sf-changed=form ng-disabled=form.readonly prevent-unselect=form.preventUnselect ng-model-options=form.ngModelOptions ng-value=item.value class=selective-pills-area ng-repeat="item in form.titleMap"><div id="{{form.key.slice(-1)[0]+\'_\'+item.value}}" class="selective-pills-area-inner {{form.fieldHtmlClass}}" ng-class="{\'selective-pills-area-inner-active\': (item.value == $$value$$), \'disabled\': form.readonly}" data-value={{item.value}} name="{{form.key.join(\'.\')}}"><i ng-if=item.icon class=material-icons>{{item.icon}}</i> <span>{{item.name | translate}}</span></div></div></div>'),e.put("app/directives/formDecorators/oxd/sub-heading.html","<label ng-if=!form.hideLabel>{{form.title | translate}}<em ng-if=form.required>*</em></label><div class=separator-line ng-if=!form.hideSeparator></div>"),e.put("app/directives/formDecorators/oxd/supervisor-auto-complete.html",'<label class=active>{{form.title}}<em ng-if=form.required>*</em></label><angucomplete-alt-oxd materializecss-supervisor-auto-complete id={{form.key.slice(-1)[0]}} placeholder={{form.placeholder}} text-searching="{{\'Searching...\' | translate}}" text-no-results="{{\'No results found\'| translate}}" ng-disabled=form.readonly pause=100 selected-object=employeeSelected remote-api-handler=autocomplete.fetchMatchingEmployees search-fields=firstName,middleName,lastName title-field=firstName,middleName,lastName,terminationStatus description-field=employeeId auto-match=true focus-first=true minlength=1 input-class="form-control topnav-autocomplete contains-emp-id" match-class=match initial-value=$$value$$ ng-modal=$$value$$><div class=invalid-feedback sf-message=form.description></div></angucomplete-alt-oxd>'),e.put("app/directives/formDecorators/oxd/switch-box.html",'<div class="form-row {{form.htmlClass}}"><span class="form-group col-6 {{subSection.htmlClass}}" oxd-decorator ng-repeat="subSection in form.subSections" form=item><span class=content-container><span class=sub-section-label>{{subSection.label|translate}}</span> <span class=sub-section-content><span class="form-group {{item.htmlClass}}" oxd-decorator ng-repeat="item in subSection.items" form=item></span></span></span></span></div>'),e.put("app/directives/formDecorators/oxd/switch.html",'<span class=oxd-switch-container><i ng-if=form.icon class="material-icons oxd-switch-icon">{{form.icon}}</i><div class=oxd-switch-label-wrapper><span ng-if=!form.labelIcon class=oxd-switch-label>{{form.title?form.title:form.label | translate}}</span><div ng-if=form.labelIcon class=form-field-label-holder><span class=oxd-switch-label>{{form.title?form.title:form.label | translate}}</span><oxd-hint ng-if=form.labelHint disable-html-escaping=true hint={{form.labelHint}} icon={{form.labelIcon}} inline=true at-position={{form.hintAtPosition}} my-position={{form.hintMyPosition}}></oxd-hint></div><small class=switch_custom_text ng-if=form.customHint>({{form.customHint}})</small></div><div class="custom-control custom-switch"><input materializecss-input id={{form.key.slice(-1)[0]}} sf-changed=form type=checkbox placeholder={{form.placeholder}} ng-disabled=form.readonly schema-validate=form ng-model=$$value$$ ng-model-options=form.ngModelOptions class=custom-control-input> <label class=custom-control-label for={{form.key.slice(-1)[0]}}></label><div class=invalid-feedback sf-message=form.description></div></div></span>'),e.put("app/directives/formDecorators/oxd/text.html",'<label title={{form.tooltip}} for={{form.key.slice(-1)[0]}} class={{form.labelHtmlClass}} ng-hide="form.hideLabel || form.labelIcon">{{form.title | translate}}<em ng-if=form.required>*</em></label><div ng-hide="form.hideLabel || !form.labelIcon" class=form-field-label-holder><label title={{form.tooltip}} for={{form.key.slice(-1)[0]}} class={{form.labelHtmlClass}}>{{form.title | translate}}<em ng-if=form.required>*</em></label><oxd-hint ng-if=form.labelHint disable-html-escaping=true hint={{form.labelHint}} icon={{form.labelIcon}} inline=true at-position={{form.hintAtPosition}} my-position={{form.hintMyPosition}}></oxd-hint></div><div oxd-tooltip data-placement=bottom title={{form.tooltip}} class=text-input-field-container ng-class="{\'tooltipped\': form.tooltip}"><input materializecss-input id={{form.key.slice(-1)[0]}} sf-changed=form class=form-control type={{form.type}} placeholder={{form.placeholder}} ng-disabled=form.readonly schema-validate=form ng-model=$$value$$ ng-model-options=form.ngModelOptions ohrm-make-element-non-pristine=form.removePristine ng-attr-autocomplete={{form.autocompleteOff}} ng-class="{\'has-help-text\': !!(form.helpText)}" ng-attr-data-help-text-class={{form.helpTextClass}}> <span ng-if=form.helpText class={{form.helpTextClass}}>{{form.helpText}}</span> <span class=invalid-feedback sf-message=form.description></span></div>'),e.put("app/directives/formDecorators/oxd/textarea.html",'<div ng-hide=form.hideLabel class=form-field-label-holder><i ng-if=form.icon class="material-icons {{form.icon}}">{{form.icon}}</i> <label for={{form.key.slice(-1)[0]}}>{{form.title | translate}}<em ng-if=form.required>*</em></label><oxd-hint ng-if=form.labelHint disable-html-escaping=true hint={{form.labelHint}} icon={{form.labelIcon}} inline=true at-position={{form.hintAtPosition}} my-position={{form.hintMyPosition}}></oxd-hint></div><textarea class="form-control description-box" oxd-textarea id={{form.key.slice(-1)[0]}} sf-changed=form schema-validate=form ng-attr-placeholder={{form.placeholder}} ng-disabled=form.readonly ng-model=$$value$$ ng-model-options=form.ngModelOptions></textarea> <span class=invalid-feedback sf-message=form.description></span>'),e.put("app/directives/formDecorators/oxd/tinymce.html",'<label ng-if="form.key!=form.title" id={{form.key.slice(-1)[0]}} class={{form.labelHtmlClass}}>{{form.title | translate}}<em ng-if=form.required>*</em></label><div class=container ng-form><div class="row oxd-autocomplete-inline-desc-wrapper justify-end" ng-if=form.injectable><div class="col-8 oxd-autocomplete-inline-desc-container"><angucomplete-alt-oxd-inline-desc materializecss-supervisor-auto-complete placeholder="{{form.injectable.injectablePlaceholder | translate}}" text-searching="{{\'Searching...\' | translate}}" text-no-results="{{\'No results found\'| translate}}" ng-disabled=form.readonly local-data=form.injectable.injectableItems selected-object=form.injectable.onInjectableItemClick clear-selected=form.injectable.clearSelected search-fields={{form.injectable.injectableSearchField}} title-field={{form.injectable.injectableTitleField}} action-text={{form.injectable.injectableActionText}} enable-detailed-dropdown=form.injectable.enableDetailedDropdown select-all-detailed-dropdown-options=form.injectable.selectAllDetailedDropdownOptions auto-match=false focus-first=true minlength=1 input-class=form-control match-class=match></angucomplete-alt-oxd-inline-desc><div class="search-icon icon-holder"><i class=material-icons>search</i></div></div></div><div class=row><textarea class="form-control description-box" ui-tinymce="{{form.tinymceOptions | removeEmbedTagsFromTinyMce}}" sf-changed=form schema-validate=form ng-disabled=form.readonly ng-model-options=form.ngModelOptions ng-model=$$value$$></textarea><input class="tinymce-image image-input-hide" type=file><div class=tinymce-helper-text>{{\'Press Shift + Enter for a new line\' | translate}}</div><span class=invalid-feedback sf-message=form.description></span> <small>{{form.maxImageSizeValidationMessage}}</small></div></div>'),e.put("app/directives/formDecorators/oxd/tree-select.html","<label for={{form.key.slice(-1)[0]}}>{{form.title | translate}}<em ng-if=form.required>*</em></label><oxd-multi-select-tree-view id=form.key[0] model=$$value$$ config=form.config options=form.options label=form.label on-change=form.onChange ng-disabled=form.disabled></oxd-multi-select-tree-view>"),e.put("app/directives/formWidgets/ohrmSwitch/ohrm-switch.html",'<span class=oxd-switch-container><span class="material-icons type-indicator {{iconClass}}">{{icon | translate}}</span> <span class=oxd-switch-label>{{label | translate}}</span><div class="custom-control custom-switch"><input materializecss-input id={{key}} type=checkbox ng-disabled=readonly ng-model=model class=custom-control-input> <label class=custom-control-label for={{key}}></label></div></span>'),e.put("app/performance/appraisal_cycles/add_appraisal_cycle_employees/add_appraisal_cycle_employees.html",'<select-employees ng-if="vm.appraisalCycle && vm.locationFormData !== undefined" on-employee-select=vm.onEmployeeSelect get-employee-request-param-modifier=vm.getEmployeeRequestParamModifier heading=vm.appraisalCycle.name on-cancel-button-click=vm.onCancel employee-select-button-label=vm.getEmployeeSelectButtonLabel employee-getter=vm.employeeGetter location-form-data=vm.locationFormData></select-employees>'),e.put("app/performance/appraisal_cycles/add_edit_appraisal_cycles/add_appraisal_cycles.html",'<div id=appraisalCycleCreateFromContainer ng-if=vm.permissions.create><div class="oxd-form-container oxd-panel"><h4 id=formHeading>{{vm.addAppraisalCyclesHeading | translate}}</h4><hr><form name=vm.addAppraisalCyclesForm sf-schema=vm.schema sf-form=vm.form sf-model=vm.model sf-use-decorator=oxdDecorator hide-empty-form-elements></form></div></div>'),e.put("app/performance/appraisal_cycles/add_edit_appraisal_cycles/edit-appraisal-cycle.html",'<div id=appraisalCycleEditFromContainer class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title="{{modal.editAppraisalCycleDetailsModalTitle | translate}}" show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.onSubmit modal-size-class=modal-lg hide-empty-form-elements></generic-oxd-modal></div>'),e.put("app/performance/appraisal_cycles/cycle_list/appraisal-cycle-list.html",'<div id=appraisalCycleList class=oxd-list-holder><div class="pim-container oxd-list"><div class="row list-wrapper"><list objs=vm.listData listdata=vm.listDefinition initialsortfield=vm.orderField initialsortorder="\'DESC\'" extracontroller=vm></list></div></div></div>'),e.put("app/performance/appraisal_cycles/cycle_list/filter-appraisal-cycle.html","<div id=appraisalCycleFilterPopover show-modal-as-popover=modal.clickEvent class=modal tabindex=-1 role=dialog><generic-oxd-modal hide-empty-form-elements modal-title=\"{{(modal.title || 'Filter')}}\" show-close-button=false show-reset-button=true form-schema=modal.schema form=modal.form model=modal.model save-button-label=Search cancel-button-label=Cancel on-save=modal.apply on-reset=modal.reset modal-size-class=modal-sm></generic-oxd-modal></div>"),e.put("app/performance/appraisal_cycles/manage_appraisal_cycle/change-main-evaluator.html",'<div id=mainEvaluatorEditPopover class="modal single-field-inline-popup" show-modal-as-popover=modal.clickEvent tabindex=-1 role=dialog><generic-oxd-modal modal-title="{{(modal.title || \'Filter\')}}" form-schema=modal.schema form=modal.form model=modal.model show-header=false , show-footer=false modal-size-class=modal-sm></generic-oxd-modal></div>'),e.put("app/performance/appraisal_cycles/manage_appraisal_cycle/manage-appraisal-cycle.html",'<div ng-if=vm.appraisalCycle id=editAppraisalCycleContainer class=oxd-ui><div class="pim-container oxd-list"><div class="row list-wrapper"><div class="col-3 list-left-panel"><form name=appraisalCycleNameForm sf-schema=vm.schema1 sf-form=vm.form1 sf-model=vm.model1 sf-use-decorator=oxdDecorator hide-empty-form-elements></form><button ng-if="!vm.readOnly && vm.appraisalCycle.stateId == 0 && vm.cycleWorkflowManager.isActionAllowed(vm.appraisalCycle.stateId, \'Save\')" ng-disabled="vm.appraisalCycleEmployees === null" class=btn ng-class="{\'btn-secondary\': (vm.shouldAddEmployeesBeforeProceeding() && vm.appraisalCycleEmployees !== null)}" id=addMoreEmployeeButton ng-click=vm.addMoreEmployees()><i class=material-icons>person_add</i><span>{{(vm.appraisalCycleEmployees === null || vm.appraisalCycleEmployees.length > 0?\'Add More Employees\':\'Add Employees\') | translate}}</span></button><form name=appraisalCycleForm sf-schema=vm.schema2 sf-form=vm.form2 sf-model=vm.model2 sf-use-decorator=oxdDecorator hide-empty-form-elements></form><button ng-if="!vm.readOnly && vm.cycleWorkflowManager.isActionAllowed(vm.appraisalCycle.stateId, \'Save\')" class="btn btn-text" id=editAppraisalCycleButton ng-click=vm.showAppraisalCycleDetailsModal()><i class=material-icons>edit</i><span>{{\'Edit\' | translate}}</span></button><form ng-if="vm.employeesWithoutFinalRatingSource.length > 0" name=employeeWarningForm sf-schema=vm.schema3 sf-form=vm.form3 sf-model=vm.model3 sf-use-decorator=oxdDecorator hide-empty-form-elements></form></div><div class="col-9 list-right-panel"><list objs=vm.appraisalCycleEmployees listdata=vm.listDefinition initialsortfield=vm.orderField initialsortorder="\'DESC\'" extracontroller=vm></list></div></div></div></div>'),e.put("app/performance/appraisal_cycles/manage_appraisal_cycle/manage_appraisal_cycle_custom_top_ribbon.html",'<div class=appraisal-cycle-progress-bar-container><div class=appraisal-cycle-status><span class=appraisal-cycle-status-label>{{\'Appraisal Cycle Status\' | translate}}</span> <span class=appraisal-cycle-status-value>{{vm.currentState}}</span></div><div id=appraisalCycleProgressBar ng-if="vm.windowWidth>=1920"><oxd-step-progress-with-title states=vm.states current-state-id=vm.appraisalCycle.stateId></oxd-step-progress-with-title></div><div id=appraisalCycleProgressBarTruncated ng-if="vm.windowWidth<1920"><oxd-wizard-numeric-progress-bar items=vm.states done-class-callback=vm.itemIsDone todo-class-callback=vm.itemIsTodo current-class-callback=vm.itemIsCurrent visited-class-callback=vm.itemIsVisited tooltip-property="\'name\'" < oxd-wizard-numeric-progress-bar></oxd-wizard-numeric-progress-bar></div><button ng-if="!vm.readOnly && vm.allowedActions.length == 1" class="btn btn-secondary cycle-action-button" ng-disabled="vm.appraisalCycleEmployees === null" ng-class="{disabled: vm.disableAppraisalActionButton()}" ohrm-save-form=vm.performAction(vm.allowedActions[0]) id=editAppraisalActionButton><span>{{vm.allowedActions[0] | translate}}</span></button><div ng-if="vm.allowedActions.length > 1" class="dropdown cycle-action-dropdown"><button class="btn dropdown-toggle" data-toggle=dropdown>-- {{\'Select\' | translate}} --</button><ul class="dropdown-menu dropdown-menu-left"><li ng-repeat="action in vm.allowedActions" ng-click=vm.performAction(action); class=dropdown-item><div><span>{{action}}</span></div></li></ul></div></div>'),e.put("app/performance/appraisals/addAppraisal/appraisal-add-button.html",'<div ng-if=vm.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Appraisal\' | translate}}" data-position=left><a id=add_appraisal class="btn-floating btn-large waves-effect waves-light" ng-click=vm.redirectToAddAppraisal()><i class=material-icons>add</i></a></div>'),e.put("app/performance/appraisals/appraisalArchiveDownload/appraisal-archive-download.html","<div class=pim-container><div class=form-div><oxd-alert-section click-handler=vm.linkClickHandler() message=vm.message icon=vm.icon type=vm.type clickable=vm.clickable></oxd-alert-section></div></div>"),e.put("app/performance/appraisals/appraisalStatus/appraisal-status-modal.html",'<div class="modal modal-fixed-footer modal-with-table" style="max-height: 80%; height: 80%; width: 50%"><div class=modal-heading><h4>{{ modal.title | translate}}</h4></div><div class=modal-content><div class=modal-body><crud-panel id=panelInsideModal panelinfo=modal.panelInfo.appraisalDetailStatusInfo objs=modal.statusList listdata=modal.listData.appraisalDetailStatus extracontroller=modal></crud-panel></div></div><div class=modal-footer><div class=row style="padding-right: 30px"><a href class="modal-action modal-close waves-effect btn">{{\'Close\' | translate}}</a></div></div></div>'),e.put("app/performance/appraisals/appraisalsDownload/appraisal-download-email-prompt.html",'<div id=appraisalDownloadEmailPromptModal class="modal move-modal-five-percent-up" tabindex=-1 role=dialog><generic-oxd-modal modal-title="{{\'Email for the Downloadable Link\' | translate}}" show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Send cancel-button-label=Cancel on-save=modal.send on-cancel=modal.cancel on-reset=modal.reset modal-size-class=modal-sm></generic-oxd-modal></div>'),e.put("app/performance/appraisals/appraisalsDownload/appraisal-download-started.html",'<div class=modal tabindex=-1 role=dialog><div id=appraisalDownloadStartedModal class="modal-dialog modal-sm" role=document><div class=modal-content><div class=modal-header><h5 class=modal-title>{{\'Download Appraisals\' | translate}}</h5><button type=button class="btn btn-close" aria-label="{{\'Close\' | translate}}" data-dismiss=modal>&times</button></div><div class=modal-body><p>{{modal.message}}</p></div><div class="modal-footer modal-footer justify-content-end"><button type=button class="btn modal-close btn-secondary" ng-click=modal.cancel() data-dismiss=modal>{{\'OK\' | translate}}</button></div></div></div></div>'),e.put("app/performance/appraisals/appraisalsDownload/appraisal-download.html",'<div class=modal tabindex=-1 role=dialog><div id=appraisalDownloadModal class="modal-dialog modal-sm" role=document><div class="modal-content table-content"><div class=modal-header><h5 class=modal-title>{{\'Download Appraisals\' | translate}}</h5><button type=button class="btn btn-close" aria-label="{{\'Close\' | translate}}" data-dismiss=modal>&times</button></div><div class="list-container-document-modal modal-body"><list id=list template=oxd-list.html objs=modal.items listdata=modal.listDefinition extracontroller=modal></list></div><div class="modal-footer modal-footer justify-content-end"><button type=button class="btn btn-ghost modal-close" ng-click=modal.cancel() data-dismiss=modal>{{\'Close\' | translate}}</button></div></div></div></div>'),e.put("app/performance/appraisals/appraisalsList/appraisal-list-content.html","<div class=pim-container><div class=socialMediaDiv><crud-panel panelinfo=vm.panelInfo.appraisalsInfo objs=vm.appraisalsList listdata=vm.listData.appraisals extracontroller=vm></crud-panel><appraisal-add-button permissions=vm.listData.appraisals.permission employee-name-list=vm.employeeNameList appraisal-list=vm.appraisalsList total-data-count=vm.totalDataCount currunt-page=vm.dataInCurruntPage></appraisal-add-button></div></div>"),e.put("app/performance/appraisals/appraisalsList/appraisal-list.html",'<div class="pim-container appraisal-list-container"><div class=socialMediaDiv><crud-panel ng-hide=vm.showLoader panelinfo=vm.panelInfo.appraisalsInfo objs=vm.appraisalsList listdata=vm.listData.appraisals extracontroller=vm></crud-panel><div ng-if=vm.showLoader class=circle-loader-container><div class=circle-loader></div></div><appraisal-add-button permissions=vm.listData.appraisals.permission employee-name-list=vm.employeeNameList appraisal-list=vm.appraisalsList total-data-count=vm.totalDataCount currunt-page=vm.dataInCurruntPage></appraisal-add-button></div></div>'),e.put("app/performance/appraisals/filterAppraisals/appraisal-search.html",'<div id=modal1 class="modal move-modal-five-percent-up" tabindex=-1 role=dialog><generic-oxd-modal hide-empty-form-elements modal-title="{{\'Filter Appraisals By\' | translate}}" show-close-button=true show-reset-button=true form-schema=vm.schema form=vm.form model=vm.model save-button-label=Search cancel-button-label=Cancel on-save=vm.search on-reset=vm.reset modal-size-class={{vm.modalSize}}></generic-oxd-modal></div>'),e.put("app/performance/appraisals/navbar/appraisal-list-navbar.html",'<ul style="display: flex"><li ng-if=vm.searchAllowed><angucomplete-alt-with-employee-id ng-if=vm.isViewAppraisalsList id=employee_name_quick_filter_appraisal_list placeholder="{{\'Employee Name\' | translate}}" text-searching="{{\'Searching...\' | translate}}" text-no-results="{{\'No results found\' | translate}}" pause=100 selected-object=vm.employeeSelected remote-api-handler=vm.fetchMatchingEmployees search-fields=firstName,middleName,lastName title-field=firstName,middleName,lastName description-field=employeeId auto-match=true focus-first=true minlength=0 input-class="topnav-autocomplete contains-emp-id performanceNavBar" match-class=match></angucomplete-alt-with-employee-id></li><li ng-if=vm.isViewAppraisalsList class="tooltipped center-align" data-tooltip="{{\'Quick Search\' | translate}}" data-position=bottom><a class="employee-navbar-button action-icon" href ng-click=vm.search()><i id=quick_search_icon class=material-icons>ohrm_search</i></a></li><li class="tooltipped center-align" ng-if=vm.searchAllowed data-tooltip="{{\'Filter\' | translate}}" data-position=bottom><a class="employee-navbar-button action-icon" href ng-click=vm.filter()><i id=filter_icon class=material-icons>oxd_filter</i></a></li></ul>'),e.put("app/performance/competency_profiles/add/add-competency-profile.html","<div class=pim-container id=add_competency_profile_screen ng-show=vm.dataLoaded><div id=add_competency_profile_tab class=orangehrm-form><h4 translate={{vm.title}}></h4><form name=addCompetencyProfileForm ng-submit=vm.onSubmit(addCompetencyProfileForm)><div class=card-content><div sf-schema=vm.schema sf-form=vm.form sf-model=vm.model extracontroller=vm></div></div></form></div></div>"),e.put("app/performance/competency_profiles/copy/copy-competency-profile-modal.html",'<div id=copy_competency_profile_modal class="modal modal-fixed-footer" style="height:70%; width:50%"><h4>{{\'Copy Competency Profile\' | translate}}</h4><div class=modal-content><div><form id=frmCopyCompetencyProfile name=frmCopyCompetencyProfile class="col s12"><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model></div></form></div></div><div class=modal-footer><a href ohrm-save-form=modal.copyProfile(frmCopyCompetencyProfile); form-name=frmCopyCompetencyProfile close-modal-on-click=frmCopyCompetencyProfile class="modal-action waves-effect btn primary-btn">{{\'Copy\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect btn">{{\'Cancel\' | translate}}</a></div></div>'),e.put("app/performance/competency_profiles/grid/competency-profile-grid.html",'<div id=addCompetencyProfile class=pim-container ng-if=vm.dataLoaded><div class=competency-profile-tab><div class=competency-profile-container><div class=competency-chart-panel><div class=add-competency-job-title data-qtip="{{\'Job Title\' | translate}}" data-qtip-class=competency-profile-grid-qtip><div>{{vm.model.jobTitleName}}</div></div><div class=add-competency-sub-unit data-qtip="{{\'Sub Unit\' | translate}}" data-qtip-class=competency-profile-grid-qtip data-qtip-at="bottom center" data-qtip-my="top center"><multi-select-tree-view id=vm.subunitSelectionWidgetId model=vm.model.subunits config=vm.subunitConfig options=vm.subunitsOptions></multi-select-tree-view></div><div class=radar-chart-for-competency-profile ng-if="vm.showGraph && vm.showCompetencySection()"><ohrm-radar-chart data=vm.competencyValuesForChart options=vm.radarChartOptions></ohrm-radar-chart></div><div class=empty-radar-chart-for-competency-profile ng-if=!vm.showCompetencySection()><img ng-src=images/performance/radar-graph-placeholder.png><div class=radar-chart-empty-competency-message>{{\'No Competency Data\'|translate}}</div></div></div><div class=competency-data-panel><div class=competency-data-panel-header><div class=competency-data-panel-heading-container><div class=competency-data-panel-heading>{{"Competencies"|translate}}</div></div><div class=add-competency-btn-container ng-if="!vm.readonly && !vm.isCorrupted"><div class=add-competency-btn><a ng-click=vm.addCompetency() class="btn rounded-button"><div class=button-content><span class=material-icons>add</span> <span>{{"Add Competencies"|translate}}</span></div></a></div></div></div><div class=competency-mapping-heading-table-container ng-show=vm.showCompetencySection()><table id=competencyMappingsHeadingsTable><thead><tr><th class=table-heading-competencies></th><th class=table-heading-evaluators translate="Evaluated By"></th><th class=table-heading-weights translate=Weightage></th><th class=table-heading-delete-icon></th></tr></thead></table></div><div class=competency-data-panel-body ng-show=vm.showCompetencySection()><table id=competencyMappingsTable><thead><tr><th class=table-heading-competencies></th><th class=table-heading-evaluators></th><th class=table-heading-weights></th><th class=table-heading-delete-icon></th></tr></thead><tbody><tr ng-repeat="competency in vm.model.competencyList"><td class=competency-group-header ng-if=competency.isGroup colspan=4>{{competency.name|translate}}</td><td class=rating-widget-container ng-if=!competency.isGroup><div ng-if="competency.name.length > 30" class=competency-name-container data-qtip="{{\'<div ng-non-bindable>\' +(competency.name | sanitizehtml) + \'</div>\'}}" data-qtip-class=competency-profile-grid-qtip>{{competency.name| limitTo:30}} ...</div><div ng-if="competency.name.length <= 30" class=competency-name-container>{{competency.name}}</div><span><bar-rating id=competency.id model=competency.proficiency rating-scale=vm.performanceRatingScale readonly="vm.readonly || vm.isCorrupted"></bar-rating></span></td><td class=multi-select-checkboxes-container ng-if=!competency.isGroup><multi-select-checkboxes id=competency.id model=competency.evaluators config=vm.evaluatedByConfig options=vm.evaluatorOptions></multi-select-checkboxes></td><td class=weight-container ng-if=!competency.isGroup ng-class="{\'readonly\' : (vm.readonly || vm.isCorrupted)}"><div class=weights-and-percentages><span class=weights ng-class="{\'readonly\' : (vm.readonly || vm.isCorrupted)}"><input-number-spinner id=competency.id model=competency.weight readonly="vm.readonly || vm.isCorrupted" range=vm.inputNumberSpinnerRange></input-number-spinner></span> <span class=percentages>{{competency.percentage}}%</span></div></td><td class=delete-container ng-if=!competency.isGroup><div class=delete-icon-container ng-if="!vm.readonly && !vm.isCorrupted"><i class=material-icons ng-click=vm.deleteCompetencyFromProfile(competency)>delete</i></div></td></tr></tbody></table></div><div class=empty-competency-data-panel-body ng-if=!vm.showCompetencySection()><div>{{\'No Competencies yet, add one to get started.\'|translate}}</div></div><div class=save-profile-btn-container><a ng-if=!vm.readonly ng-click=vm.saveProfile() class="btn rounded-button right"><span translate=Save></span></a> <a ng-click=vm.goBack() class="btn rounded-button secondary-btn right"><span translate=Back></span></a></div></div></div></div></div>'),
e.put("app/performance/competency_profiles/list/competency-profiles.html",'<div class=pim-container><div id=competencyProfileDiv><crud-panel panelinfo=vm.panelInfo.competencyProfileInfo objs=vm.competencyProfiles listdata=vm.listData.competencyProfiles initialsortfield="\'jobTitle\'" extracontroller=vm></crud-panel><div ng-if=vm.permissions.create class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Competency Profile\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=vm.addCompetencyProfile()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/performance/goals/add/add-goal.html",'<div class=pim-container id=addGoalContainer><div class="oxd-form-container oxd-panel"><div class=card-top-bar><span class=card-top-bar-title><span class=material-icons ng-if=vm.categoryIcon>{{vm.categoryIcon}}</span><h4>{{vm.pageTitle | translate}}</h4></span> <span ng-if="vm.isKeyResultEditMode && !vm.showActionPanel()" class=card-top-bar-action-buttons><button ng-if=vm.showSendReminder() class={{vm.reminderButton.class}} ng-click=vm.reminderButton.onClick() oxd-tooltip data-placement=bottom data-original-title="{{vm.reminderButton.tooltip ? (vm.reminderButton.tooltip | translate) : \'\'}}"><i class=material-icons>{{vm.reminderButton.icon}}</i> <span class=button-text>{{vm.reminderButton.label | translate}}</span></button><oxd-attachments ng-if=vm.goalAttachmentConfigurationLoaded class title="\'Attachments\'" label="\'Attachments\'" config=vm.attachmentConfiguration></oxd-attachments><oxd-comments ng-if=vm.goalCommentConfigurationLoaded class title="\'Comments\'" label="\'Comments\'" config=vm.commentConfiguration></oxd-comments></span> <span class=card-top-bar-action-buttons ng-if=vm.showActionPanel()><oxd-button-panel ng-if="!vm.disableAllFields && vm.iconButtons && vm.iconButtons.length > 0 && vm.getShowSummary()" data=vm.iconButtons></oxd-button-panel><button ng-if=vm.showSendReminder() class={{vm.reminderButton.class}} ng-click=vm.reminderButton.onClick() oxd-tooltip data-placement=bottom data-original-title="{{vm.reminderButton.tooltip ? (vm.reminderButton.tooltip | translate) : \'\'}}"><i class=material-icons>{{vm.reminderButton.icon}}</i> <span class=button-text>{{vm.reminderButton.label | translate}}</span></button><oxd-attachments ng-if=vm.goalAttachmentConfigurationLoaded title="\'Attachments\'" label="\'Attachments\'" config=vm.attachmentConfiguration></oxd-attachments><oxd-comments ng-if=vm.goalCommentConfigurationLoaded title="\'Comments\'" label="\'Comments\'" config=vm.commentConfiguration></oxd-comments><button class="btn btn-text btn-sm" ng-click=vm.detailButtonClicked()><span class=material-icons>{{vm.getDetailedButtonIcon()}}</span> <span class=button-text>{{vm.getDetailedButtonText() | translate}}</span></button></span></div><hr class=top-bar-separator ng-if="vm.performanceGoal && !vm.getShowSummary() && vm.dataLoaded"><div class=card-summary ng-if="vm.performanceGoal && vm.getShowSummary() && vm.dataLoaded"><goal-summary goal=vm.performanceGoal master-data=vm.summaryMasterData></goal-summary></div><div class=card-details><form name=addGoalForm ng-submit=vm.onSubmit(addGoalForm)><div class=card-content ng-if=!vm.getShowSummary()><div sf-schema=vm.schema sf-form=vm.form sf-model=vm.model extracontroller=vm sf-use-decorator=oxdDecorator hide-empty-form-elements auto-focus-first-element={{vm.goalId?false:true}}></div></div></form></div><div ng-if="vm.showGoalChildren && vm.goalId" class="card-content keyResultTable"><hr><list objs=vm.childGoals listdata=vm.listDefinition extracontroller=vm></list></div></div></div>'),e.put("app/performance/goals/approvalConfirmation/approve-reject-confirmation-modal.html","<div id=approveRejectConfirmationModal class=modal tabindex=-1 role=dialog><oxd-modal-with-form modal-title={{modal.title}} form-schema=modal.schema form=modal.form model=modal.model show-header=true show-footer=true modal-size-class=modal-sm show-close-button=true show-save-button=false additional-buttons=modal.additionalButtons></oxd-modal-with-form></div>"),e.put("app/performance/goals/copy/copy-goals-modal.html","<div id=copyGoalsModal class=modal tabindex=-1 role=dialog><oxd-modal-with-form hide-empty-form-elements modal-title={{modal.title}} form-schema=modal.schema form=modal.form model=modal.model show-header=true show-footer=true modal-size-class=modal-lg show-close-button=true show-cancel-button=true on-save=modal.save save-button-label={{modal.saveButtonLabel}} inline-alert=modal.alert></oxd-modal-with-form></div>"),e.put("app/performance/goals/goalLibrary/goal_library.html","<div class=pim-container><div id=libraryDiv><crud-panel panelinfo=vm.panelInfo.goalsInfo objs=vm.goalTemplates listdata=vm.listData.goalTemplates initialsortfield=\"'name'\" extracontroller=vm></crud-panel></div></div>"),e.put("app/performance/goals/goalLibrary/goal_library_filter.html",'<div id=goal_template_search_modal class="modal modal-fixed-footer" style="height:50%; width:50%"><h4>{{\'Filter Goal Library By\' | translate}}</h4><div class=modal-content><div><form id=frmGoalSearch name=frmGoalSearch class="col s12"><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model></div></form></div></div><div class=modal-footer><a href ohrm-save-form=modal.search(frmGoalSearch); form-name=frmGoalSearch close-modal-on-click=frmGoalSearch class="modal-action waves-effect waves-green btn primary-btn">{{\'Search\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect btn">{{\'Cancel\' | translate}}</a> <a href ng-click=modal.reset(frmGoalSearch) class="modal-action modal-close waves-effect btn">{{\'Reset\' | translate}}</a></div></div>'),e.put("app/performance/goals/goalLibrary/goal_library_navbar.html",'<ul><li><a href ng-click=navbar.filter() class="action-icon tooltipped" data-tooltip="{{\'Filter\' | translate}}" data-position=bottom><i class=material-icons>oxd_filter</i></a></li></ul>'),e.put("app/performance/goals/goalList/goal_list.html",'<div id=goalListContainer class=oxd-list-holder ng-if=!vm.isListChildState()><div class="pim-container oxd-list"><div class="row list-wrapper"><div class=list-page-header><div class=list-page-header-left-panel><oxd-tabs data=vm.tabs current-tab-key=vm.currentTabKey on-click=vm.tabClicked></oxd-tabs></div><div class=list-page-header-right-panel><oxd-button-panel data=vm.exportPanelButtons></oxd-button-panel><div id=unapprovedSwitchButtonContainer ng-if=vm.showGoalNotifications><button id=unapprovedSwitch class="btn btn-list" ng-click=vm.redirectToUnApproved() oxd-tooltip data-placement=bottom aria-label="{{vm.getUnapprovedListTooltip() | translate}}" data-original-title="{{vm.getUnapprovedListTooltip()| translate}}"><i class=material-icons aria-hidden=true>ohrm_unapproved_target</i></button><div class=goal-count-indicator-container><span class=goal-count-indicator>{{vm.unapprovedCount}}</span></div></div></div></div><list objs=vm.listData listdata=vm.listDefinition initialsortfield=vm.orderField initialsortorder=vm.orderBy extracontroller=vm></list></div></div></div><div ui-view autoscroll=true></div>'),e.put("app/performance/goals/goalList/goal_list_filter.html",'<div id=modal1 class="modal move-modal-five-percent-up" tabindex=-1 role=dialog><generic-oxd-modal hide-empty-form-elements modal-title="{{\'Filter Goals and OKRs By\' | translate}}" show-close-button=true show-reset-button=true form-schema=modal.schema form=modal.form model=modal.model save-button-label=Search cancel-button-label=Cancel on-save=modal.search on-reset=modal.reset modal-size-class={{modal.widgetWidthClass}}></generic-oxd-modal></div>'),e.put("app/performance/report/resultsExport/results-export.html",'<div id=performanceResultsExport class=pim-container><div class="form-div with-title"><h4>{{"Performance Result Export" | translate}}</h4><p class=noPermisson ng-if=!vm.hasPermissions>{{ vm.noPermissionMessage | translate}}</p><form ng-if=vm.hasPermissions name=performanceResultsExportForm sf-schema=vm.schema sf-form=vm.form sf-model=vm.model ng-submit=vm.onSubmit(performanceResultsExportForm)></form></div><div class=reportExportHistory ng-if=vm.hasPermissions><crud-panel panelinfo=vm.panelInfo.reportExportHistory objs=vm.reportExportHistory listdata=vm.listData.reportExportHistory extracontroller=vm></crud-panel></div></div>'),e.put("app/performance/view/multipleView/multiple-view.html","<div class=pim-container><div class=socialMediaDiv>Multiple View</div></div>"),e.put("app/performance/view/singleView/single-view.html","<div class=pim-container><div class=socialMediaDiv>Single View</div></div>"),e.put("app/pim/employeeList/employeeSearchDirective/employee-search.template.html",'<div class="schema-form-section row"><div class="input-field col s6"><label for={{vm.formElementPrefix}}_employee_name_filter class=active>{{\'Employee Name\'| translate}}</label><angucomplete-alt-with-employee-id id={{vm.formElementPrefix}}_employee_name_filter placeholder="{{\'Employee Name\' | translate}}" text-searching="{{\'Searching...\' | translate}}" text-no-results="{{\'No results found\' | translate}}" pause=100 selected-object=vm.filters.employee initial-value=vm.employeeName remote-api-handler=vm.fetchMatchingEmployees input-changed=vm.setEmployeeNameString search-fields=firstName,middleName,lastName title-field=firstName,middleName,lastName,past_employee description-field=employeeId auto-match=true focus-first=true minlength=1 input-class="form-control form-control-small topnav-autocomplete contains-emp-id" match-class=match></angucomplete-alt-with-employee-id></div><div class="input-field col s6"><input id={{vm.formElementPrefix}}_employee_id_filter type=text ng-model=vm.filters.id ng-change=vm.changePersistedValue()> <label for={{vm.formElementPrefix}}_employee_id_filter ng-class="{active: vm.filters.id}">{{\'Employee Id\'| translate}}</label></div></div><div class="schema-form-section row"><div class="input-field col s6"><select materializecss-select id={{vm.formElementPrefix}}_employee_status_filter ng-model=vm.filters.employee_status ng-change=vm.changePersistedValue()><option value=0 selected>{{\'All\' | translate}}</option><option ng-repeat="status in vm.empStatuses" value={{status.id}}>{{status.name}}</option></select><label for={{vm.formElementPrefix}}_employee_status_filter>{{\'Employment Status\'| translate}}</label></div><div class="input-field col s6"><label for={{vm.formElementPrefix}}_employee_supervisor_filter class=active>{{\'Supervisor Name\'| translate}}</label><angucomplete-alt-with-employee-id id={{vm.formElementPrefix}}_employee_supervisor_filter placeholder="{{\'Supervisor Name\' | translate}}" text-searching="{{\'Searching...\' | translate}}" text-no-results="{{\'No results found\' | translate}}" pause=100 selected-object=vm.filters.supervisor initial-value=vm.supervisorName remote-api-handler=vm.fetchMatchingSupervisors input-changed=vm.setSupervisorNameString search-fields=firstName,middleName,lastName title-field=firstName,middleName,lastName,past_employee description-field=employeeId auto-match=true focus-first=true minlength=1 input-class="form-control form-control-small topnav-autocomplete contains-emp-id" match-class=match></angucomplete-alt-with-employee-id></div></div><div class="schema-form-section row"><div class="input-field col s6"><select materializecss-select id={{vm.formElementPrefix}}_employee_jobtitle_filter ng-model=vm.filters.job_title ng-change=vm.changePersistedValue()><option value=0 selected>{{\'All\' | translate}}</option><option ng-repeat="jobTitle in vm.jobTitles" value={{jobTitle.id}}>{{jobTitle.jobTitleName}}</option></select><label for={{vm.formElementPrefix}}_employee_jobtitle_filter>{{\'Job Title\'| translate}}</label></div><div class="input-field col s6"><select materializecss-select id={{vm.formElementPrefix}}_employee_subunit_filter ng-model=vm.filters.sub_unit ng-change=vm.changePersistedValue()><option value=0 selected>{{\'All\' | translate}}</option><option ng-repeat="subUnit in vm.subUnits" value={{subUnit.id}}>{{subUnit.name | leftPadSpaces:subUnit.level}}</option></select><label for={{vm.formElementPrefix}}_employee_subunit_filter>{{\'Sub Unit\'| translate}}</label></div></div><div class="schema-form-section row"><div class="input-field col s6"><select materializecss-select id={{vm.formElementPrefix}}_employee_terminated_filter ng-model=vm.filters.termination ng-change=vm.changePersistedValue()><option value=1 selected>{{\'Current Employees Only\' | translate}}</option><option value=2>{{\'Current and Past Employees\' | translate}}</option><option value=3>{{\'Past Employees Only\' | translate}}</option></select><label for={{vm.formElementPrefix}}_employee_terminated_filter>{{\'Include\'| translate}}</label></div><div class="input-field col s6"><select materializecss-select id={{vm.formElementPrefix}}_employee_location ng-model=vm.filters.location ng-change=vm.changePersistedValue()><option value=-1 selected>{{\'All\' | translate}}</option><option ng-repeat="location in vm.locations" value={{location.value}}>{{location.name}}</option></select><label for={{vm.formElementPrefix}}_employee_location_filter>{{\'Location\'| translate}}</label></div></div><div class="schema-form-section row"><div ng-if=vm.costCenterEnabled class="input-field col s6"><label for={{vm.formElementPrefix}}_employee_cost_centre_filter class=active>{{\'Cost Center\'|translate}}</label><div angucomplete-alt materializecss-cost-centre-auto-complete id={{vm.formElementPrefix}}_employee_cost_centre_filter placeholder="{{\'Type for hints...\' | translate}}" text-searching="{{\'Searching...\' | translate}}" text-no-results="{{\'No results found\' | translate}}" class=angucomplete-widget pause=100 selected-object=vm.filters.costCentre remote-api-handler=autocomplete.fetchMatchingCostCentres title-field=cost_code,name auto-match=true focus-first=true input-class=topnav-autocomplete match-class=match input-changed=onInputChange initial-value="vm.filters.costCentre.originalObject? vm.filters.costCentre.originalObject.cost_code + (vm.filters.costCentre.originalObject.name.startsWith(\'-\')?\' \'+vm.filters.costCentre.originalObject.name:\' - \'+vm.filters.costCentre.originalObject.name) :vm.filters.costCentre.originalObject"></div></div><div class="input-field col s6"><input type=checkbox class=filled-in id={{vm.formElementPrefix}}_persist_filters_as_default ng-model=vm.filters.is_persisted> <label style=left:0px for={{vm.formElementPrefix}}_persist_filters_as_default>{{\'Make Filter Default\'| translate}}</label></div></div>'),e.put("app/pim/reportTo/subordinates/edit-subordinate.html","<div class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title=\"{{(modal.title || 'Subordinate')}}\" show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-sm></generic-oxd-modal></div>"),e.put("app/pim/reportTo/subordinates/subordinates.html","<div ng-if=vm.permissions.read><crud-panel panelinfo=vm.panelInfo objs=vm.subordinates listdata=vm.listData extracontroller=vm></crud-panel></div>"),e.put("app/pim/reportTo/supervisors/edit-supervisor.html","<div class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title=\"{{(modal.title || 'Supervisor')}}\" show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-sm></generic-oxd-modal></div>"),e.put("app/pim/reportTo/supervisors/supervisors.html","<div ng-if=vm.permissions.read><crud-panel panelinfo=vm.panelInfo objs=vm.supervisors listdata=vm.listData extracontroller=vm></crud-panel></div>"),e.put("app/recruitment/emailTemplates/subscriberAdd/add-subscribers.html",'<h4 translate="Add Subscribers"></h4><form name=frmAddSubscribers id=frmAddSubscribers><div sf-schema=addVm.formSchema sf-form=addVm.form sf-model=addVm.formModel></div><div class="schema-form-section right-align form-buttons"><a class="modal-action modal-close waves-effect waves-green btn" translate=Cancel ng-click=addVm.goBackToSubscribers()></a> <a href ohrm-save-form=addVm.save(frmAddSubscribers); form-name=frmAddSubscribers close-modal-on-click=frmAddSubscribers class="modal-action waves-effect waves-green btn primary-btn" translate=Save></a></div></form>'),e.put("app/recruitment/emailTemplates/subscriberEdit/edit-subscriber.html",'<h4 translate="Edit Subscriber"></h4><form name=subscriberForm id=subscriberForm><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model></div><div class="schema-form-section right-align form-buttons"><a class="modal-action modal-close waves-effect waves-green btn" ng-click=modal.goBackToSubscribers() translate=Cancel></a> <a href ohrm-save-form=modal.save(subscriberForm); form-name=subscriberForm close-modal-on-click=subscriberForm class="modal-action waves-effect waves-green btn primary-btn" translate=Save ng-if=modal.permission></a></div></form>'),e.put("app/recruitment/emailTemplates/subscriberList/email-subscribers.html",'<div class=pim-container><div class=form-div ui-view autoscroll=true id=email-subscriptions-advanced-settings ng-if="vm.state.current.name !== \'ng_recruitment.subscribers\'"></div><div id=subscriberDiv class=form-div><div class=list-container><list objs=vm.subscribers listdata=vm.listData extracontroller=vm></list></div><div ng-if="vm.permissions.create && vm.state.current.name === \'ng_recruitment.subscribers\'" class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Subscribers\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ui-sref=.add><i class=material-icons>add</i></a></div></div></div>'),e.put("app/recruitment/emailTemplates/templateCopy/copy-email-template.html",'<div class="modal modal-fixed-footer" style="height: 40%; width: 50%"><h4>{{modal.title | translate}}</h4><form name=copyTemplateModalForm><div class=modal-content><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model extracontroller=modal></div></div><div class=modal-footer><a href ohrm-save-form=modal.save(copyTemplateModalForm); form-name=copyTemplateModalForm close-modal-on-click=copyTemplateModalForm class="modal-action waves-effect waves-green btn primary-btn">{{\'Save\' | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn">{{\'Cancel\' | translate}}</a></div></form></div>'),e.put("app/recruitment/emailTemplates/templateEdit/edit-email-template.html",'<div class=pim-container><div id=applyLeaveDiv class=form-div><h4>{{vm.title | translate}}</h4><form name=emailTemplateForm id=emailTemplateForm><div style="padding-left: 0px;" sf-schema=vm.schema sf-form=vm.form sf-model=vm.model ng-submit=vm.save(emailTemplateForm)></div><div class="schema-form-section form-buttons right-align"><button class="btn secondary-btn waves-effect waves-green" type=submit ng-click=vm.backToList()>{{\'Back\' | translate}}</button> <button class="btn waves-effect waves-green" type=submit ng-click=vm.save(emailTemplateForm)>{{\'Save\' | translate}}</button></div></form></div></div>'),e.put("app/recruitment/emailTemplates/templateList/email_templates.html",'<div class=pim-container><div id=emailTemplatesDiv><crud-panel panelinfo=vm.panalInfo.info objs=vm.emailTemplates listdata=vm.listData.emailTemplates extracontroller=vm></crud-panel><div class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Email Template\' | translate}}" data-position=left ng-if=vm.permissions.create><a class="btn-floating btn-large waves-effect waves-light" ng-click=vm.addTemplate()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/recruitment/emailTemplates/templateView/view-email-template.html",'<div class="modal modal-fixed-footer" style="height: 100%; width: 60%"><h4>{{modal.title | translate}}</h4><div style="margin-top: 10px" class=modal-content><div style="margin-bottom: 20px"><label class=active>{{\'Subject\' | translate}}</label><br><br><span>{{modal.subject}}</span></div><hr width=90%><div id=template-body style="margin-top: 20px"><label class=active>{{\'Body\' | translate}}</label><br><div id=view-email-template ng-bind-html=modal.body></div></div></div><div class=modal-footer><a href ng-click=modal.cancel() class="modal-action modal-close waves-effect waves-green btn primary-btn">{{\'OK\' | translate}}</a></div></div>'),e.put("app/succession_and_development/9BoxMatrix/configure9BoxMatrix/9_box_matrix_config.html","<div class=pim-container><div class=form-div><h4>{{'9 Box Matrix Configuration' | translate}}</h4><form name=configureEmployeePotentialAssessmentForm sf-schema=vm.schema sf-form=vm.form sf-model=vm.model ng-submit=vm.onSubmit(configureEmployeePotentialAssessmentForm)></form></div></div>"),e.put("app/succession_and_development/idp/add/add_idp.html","<div class=pim-container id=add_idp_screen ng-if=vm.dataLoaded><div id=add_idp_tab class=form-div><form name=addDevelopmentForm ng-submit=vm.onSubmit(addDevelopmentForm)><div class=card-content><div sf-schema=vm.schema sf-form=vm.form sf-model=vm.model extracontroller=vm></div></div></form></div></div>"),e.put("app/succession_and_development/idp/directives/idp_goal_list.html",'<div class="row valign-wrapper col s12 form-section-heading idp-goal-list-sub-section-container"><a id={{sectionIcon}} class="material-icons idp-role-icon" style="width: 50px;cursor: default;">{{sectionIcon}}</a> <span class="valign col s8 list-sub-section-heading" style="padding-left: 0px;">{{sectionTitle|translate}}</span> <span class="valign col s3 offset-s2" style="padding-right: 0px;"></span><div class=right-align ng-if=permission.create><a class="waves-effect waves-teal btn primary-btn idp-goal-list-button" ng-click=idpCtrl.addIdpGoal()><span style="margin-left: -4px;margin-top: 2px;" class="material-icons left-menu-icon tooltipped" data-tooltip="{{\'Add Goal\' | translate}}" data-position=top>add</span></a></div><div style="margin-left: 10px" class=right-align ng-if=permission.canIncludeGoals><a class="{{disableIncludeIdpGoalButton ? \'disabled btn primary-btn idp-goal-list-button\' : \'waves-effect waves-teal btn primary-btn idp-goal-list-button\'}}" ng-click="disableIncludeIdpGoalButton ? false: idpCtrl.includeGoal()"><span style="margin-left: -2px;margin-top:2px;font-size: 15px;transform: rotateX(180deg);transform: rotate(180deg);" class="idp-goal-list-include-goal-button material-icons left-menu-icon tooltipped" data-tooltip="{{\'Select Existing Goals\' | translate}}" data-position=top>ohrm_shortcuts</span></a></div></div><div class="row col s12"><crud-panel panelinfo=idpCtrl.panelInfo objs=goals listdata=idpCtrl.listData[idpCtrl.listName] extracontroller=idpCtrl></crud-panel></div>'),e.put("app/succession_and_development/idp/idp_include_goals/idp_include_goals_modal.html",'<div class=modal tabindex=-1 role=dialog id=includeGoalsModal><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><h5 class=modal-title>{{"Select Existing Goals" | translate}} - {{ modal.sectionTitle| translate}}</h5><button type=button class="btn btn-close" aria-label="{{\'Close\' | translate}}" data-dismiss=modal>&times</button></div><div class="modal-body with-table"><list template=oxd-list.html objs=modal.includibleGoals listdata=modal.listData[idpCtrl.listName] extracontroller=modal></list></div><div class="modal-footer justify-content-end"><button type=button class="btn btn-ghost" ng-click=modal.cancel() data-dismiss=modal>{{\'Cancel\' | translate}}</button> <button type=button class="btn btn-secondary" id=save-button ng-click=modal.includeGoals() data-dismiss=modal form-name=includeGoalsModal>{{\'Include\' | translate}}</button></div></div></div></div>'),e.put("app/succession_and_development/idp/idp_list/idp_filter.html",'<div class=modal tabindex=-1 role=dialog id=idp_search_modal><generic-oxd-modal modal-title="Filter Individual Development Plans By" show-close-button=true show-reset-button=true form-schema=modal.schema form=modal.form model=modal.model save-button-label=Search cancel-button-label=Cancel on-save=modal.search on-reset=modal.reset modal-size-class=modal-md></generic-oxd-modal></div>'),e.put("app/succession_and_development/idp/idp_list/idp_list.html",'<div class=pim-container><div id=libraryDiv><crud-panel panelinfo=vm.panelInfo.idpsInfo objs=vm.idps listdata=vm.listData.idps initialsortfield="vm.isMyIdp?\'name\':\'owner\'" extracontroller=vm></crud-panel><div ng-if="vm.permissions.create && vm.hasIdpCreateWorkflowPermissions && vm.idpCreatableEmployees.length > 0" class="fixed-action-btn floating-add-btn tooltipped" data-tooltip="{{\'Add Individual Development Plan\' | translate}}" data-position=left><a class="btn-floating btn-large waves-effect waves-light" ng-click=vm.addIdp()><i class=material-icons>add</i></a></div></div></div>'),e.put("app/succession_and_development/idp/idp_list/idp_list_navbar.html",'<ul><li><a href ng-click=navbar.filter() class="tooltipped action-icon" data-tooltip="{{\'Filter\' | translate}}" data-position=bottom><i class=material-icons>oxd_filter</i></a></li></ul>'),e.put("app/succession_and_development/idp/idp_tabs/idp_profile.html","<div ui-view ng-cloak autoscroll=true></div>"),e.put("app/succession_and_development/idp/idp_tabs/idp_tab_navbar.html",'<ul style="display: flex"><li><img class=top-ribbon-photo ng-src=../index.php/core/viewEmployeeImage/empNumber/{{vm.owner.empNumber}}/size/small?{{vm.time}}></li><li></li><li><span ng-if=!vm.owner.fullNameTooltip class=top-ribbon-employee-name ng-bind=vm.owner.fullName></span> <span ng-if=vm.owner.fullNameTooltip class="top-ribbon-employee-name tooltipped" data-tooltip={{vm.owner.fullNameTooltip}} data-position=bottom ng-bind=vm.owner.fullName></span> <span ng-if=!vm.owner.jobTitleTooltip class=top-ribbon-job-title ng-bind=vm.owner.jobTitle></span> <span ng-if=vm.owner.jobTitleTooltip class="top-ribbon-job-title tooltipped" data-tooltip={{vm.owner.jobTitleTooltip}} data-position=bottom ng-bind=vm.owner.jobTitle></span></li></ul>'),e.put("app/succession_and_development/idp/idp_view/idp_view.html",'<div class=pim-container><div id=view_idp_tab class=form-div ng-if=vm.dataLoaded><h4><span>{{\'Development Plan Details\' | translate}}</span></h4><form name=updateDevelopmentForm ng-submit=vm.onSubmit(updateDevelopmentForm)><div class=card-content><div sf-schema=vm.schema sf-form=vm.form sf-model=vm.model extracontroller=vm></div></div></form></div><div class="card-content no-title"><div class="row valign-wrapper col s12 form-section-heading"><span class="valign title s12">{{\'Development Goals\'|translate}}</span></div><div style="padding-top: 10px;"></div><div class=form-div ng-if=vm.dataLoaded ng-repeat="targetedRole in vm.targetedRoles"><idp-goal-list goals="vm.goals[targetedRole[\'name\']]" section-title="targetedRole[\'displayName\']" idp-data=vm.idpData targeted-role="targetedRole[\'id\']" section-icon="targetedRole[\'icon\']" permission=vm.roleListPermission disable-include-idp-goal-button=vm.disableIncludeIdpGoalButton parent-referrer=vm.referrer></idp-goal-list></div></div></div>'),e.put("app/time/employeeTimesheets/list/create_employee_timesheet.html",'<div class="modal modal-fixed-footer" style="width:40%; height:60%"><h4>{{ \'Add Timesheet For\' | translate }} {{ createTimesheetModal.employeeFullName }}</h4><div class=modal-content><div class=row><form name=createEmployeeTimesheetForm sf-schema=createTimesheetModal.schema sf-form=createTimesheetModal.form sf-model=createTimesheetModal.model></form></div><div class="left requiredHelperText" style="margin-top: 26%"><em>*</em> <span>{{ \'Required field\' | translate }}</span></div></div><div class=modal-footer><a href ng-click=createTimesheetModal.create(createEmployeeTimesheetForm) class="modal-action waves-effect btn primary-btn">{{ \'Add Timesheet\' | translate }}</a> <a href ng-click=createTimesheetModal.cancel() class="modal-action waves-effect btn">{{ \'Cancel\' | translate }}</a></div></div>'),e.put("app/time/employeeTimesheets/list/employee_timesheets_list.html","<div class=pim-container><div id=employeeTimesheets><crud-panel panelinfo=vm.panelInfo.employeeTimesheetsInfo objs=vm.employeeTimesheets listdata=vm.listData.employeeTimesheets extracontroller=vm initialsortfield=\"'timesheetPeriod'\" initialsortorder=\"'DESC'\"></crud-panel></div></div>"),e.put("app/time/employeeTimesheets/list/employee_timesheets_list_filter.html",'<div class="modal modal-fixed-footer" style="max-height: 90%; height:85%; top: 5%;"><h4>{{\'Filter Employee Timesheets\' | translate}}</h4><div class=modal-content><div class=row><form name=employeeTimesheetSearchForm sf-schema=searchModal.schema sf-form=searchModal.form sf-model=searchModal.model></form></div></div><div class=modal-footer><a href ng-click=searchModal.search(employeeTimesheetSearchForm) class="modal-action waves-effect btn primary-btn">{{\'Search\' | translate}}</a> <a href ng-click=searchModal.reset() class="modal-action waves-effect btn">{{\'Reset\' | translate}}</a> <a href ng-click=searchModal.cancel() class="modal-action waves-effect btn">{{\'Cancel\' | translate}}</a></div></div>'),e.put("app/time/employeeTimesheets/navbar/employee_timesheets_list_navbar.html",'<ul style="display: flex"><li><angucomplete-alt-with-employee-id id=employee_name_quick_filter_employee_timesheet_list placeholder="{{\'Employee Name\' | translate}}" text-searching="{{\'Searching...\' | translate}}" text-no-results="{{\'No results found\' | translate}}" pause=100 selected-object=navbar.employeeSelected remote-api-handler=navbar.fetchMatchingEmployees search-fields=firstName,middleName,lastName title-field=fullName description-field=employeeId auto-match=true focus-first=true minlength=0 input-class="topnav-autocomplete contains-emp-id tempClass" match-class=match></angucomplete-alt-with-employee-id></li><li class="tooltipped center-align" data-tooltip="{{\'Quick Search\' | translate}}" data-position=bottom><a class="employee-navbar-button action-icon"><i id=quick_search_icon class=material-icons>ohrm_search</i></a></li><li class="tooltipped center-align" data-tooltip="{{\'Filter\' | translate}}" data-position=bottom><a href ng-click=navbar.filterEmployeeTimesheets() class=action-icon><i class=material-icons>oxd_filter</i></a></li></ul>'),e.put("app/time/projects/activities/time.copy_activities_modal.html","<div id=exportConfirmationPopover show-modal-as-popover=modal.clickEvent class=modal tabindex=-1 role=dialog><oxd-modal-with-form modal-title={{modal.title}} form-schema=modal.schema form=modal.form model=modal.model show-header=true show-footer=true show-cancel-button=true modal-size-class=popover-m save-button-label=Copy cancel-button-labe=Cancel on-save=modal.save show-close-button=false></oxd-modal-with-form></div>"),e.put("app/time/projects/activities/time.create_activities_modal.html","<div id=exportConfirmationPopover show-modal-as-popover=modal.clickEvent class=modal tabindex=-1 role=dialog><oxd-modal-with-form modal-title={{modal.title}} form-schema=modal.schema form=modal.form model=modal.model show-header=true show-footer=true show-cancel-button=true modal-size-class=popover-m save-button-label=Add cancel-button-labe=Cancel on-save=modal.save show-close-button=false></oxd-modal-with-form></div>"),e.put("app/time/projects/activities/time.edit_activity_modal.html",'<div id=modal1 class="modal move-modal-five-percent-up" tabindex=-1 role=dialog><generic-oxd-modal hide-empty-form-elements modal-title="{{\'Edit Activity\' | translate}}" show-close-button=true form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-xs></generic-oxd-modal></div>'),e.put("app/time/projects/edit/time.create_project_modal.html",'<div id=modal1 class="modal move-modal-five-percent-up" tabindex=-1 role=dialog><generic-oxd-modal hide-empty-form-elements modal-title="{{\'Add Project\' | translate}}" show-close-button=true form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class={{modal.widgetWidthClass}}></generic-oxd-modal></div>'),
e.put("app/time/projects/edit/time.edit_project.html",'<div id=editProjects class=pim-container><div class="oxd-form-container oxd-panel"><div class=formHeading><div class=list-page-header-left-panel><oxd-tabs data=vm.tabs current-tab-key=vm.currentTabKey on-click=vm.tabClicked></oxd-tabs></div><div class=list-page-header-right-panel ng-if="vm.currentTabKey == \'activities\'"><oxd-button-panel data=vm.exportPanelButtons></oxd-button-panel></div></div><oxd-loader ng-if=vm.submitInProgress></oxd-loader><div class=card-details ng-if="vm.currentTabKey == \'general\' && !vm.submitInProgress"><form name=editProjectForm ng-submit=vm.save(editProjectForm) id=editProjectForm><div class=card-content><div sf-schema=vm.projectSchema sf-form=vm.projectForm sf-model=vm.projectModel extracontroller=vm sf-use-decorator=oxdDecorator hide-empty-form-elements auto-focus-first-element={{vm.projectId?false:true}}></div></div></form><hr><div id=actionBtnRow ng-if="vm.currentTabKey == \'general\'" class=row><a class="btn btn-text" ng-click=vm.goBack()>{{\'Back\' | translate}}</a> <a class="btn btn-secondary" ng-if=vm.hasEditPermissions ng-click=vm.save(editProjectForm)>{{\'Save\' | translate}}</a></div></div><div class=oxd-list ng-if="vm.currentTabKey == \'activities\' && !vm.submitInProgress"><list objs=vm.activities listdata=vm.listDefinition extracontroller=vm></list></div></div></div><div ui-view autoscroll=true></div>'),e.put("app/time/projects/list/time.project_list.html",'<div id=projectListContainer class=oxd-list-holder ng-if=!vm.isListChildState()><div class="pim-container oxd-list"><div class="row list-wrapper"><list objs=vm.listData listdata=vm.listDefinition initialsortfield=vm.orderField initialsortorder=vm.orderBy extracontroller=vm></list></div></div></div><div ui-view autoscroll=true></div>'),e.put("app/time/projects/list/time.project_list_filter.html",'<div id=modal1 class="modal move-modal-five-percent-up" tabindex=-1 role=dialog><generic-oxd-modal hide-empty-form-elements modal-title="{{\'Filter Projects By\' | translate}}" show-close-button=true show-reset-button=true form-schema=modal.schema form=modal.form model=modal.model save-button-label=Search cancel-button-label=Cancel on-save=modal.search on-reset=modal.reset modal-size-class={{modal.widgetWidthClass}}></generic-oxd-modal></div>'),e.put("app/core/dashboard/charts/performanceTrackerFeedbackBarChart/performance-tracker-feedback-bar-chart.html",'<div ng-cloak class=performance-tracker-chart-container><div class=performance-tracker-chart-with-image-container><span class=performance-tracker-image-container><div class=employee-detail-container ng-repeat="employee in vm.options.employeeData track by $index"><span class=employee-image-container><img class="circle list-photo" ng-if=employee.image ng-src=data:{{employee.image.type}};base64,{{employee.image.image}}> <img class="circle list-photo" ng-if=!employee.image ng-src=images/default-photo.png></span> <span class=employee-name-container>{{employee.name}}</span></div></span> <span class=separator id=verticalChartSeparator></span> <span class=performance-tracker-barchart id={{vm.graphId}}></span></div></div>'),e.put("app/core/dashboard/widget/buzzPosts/buzz-posts-widget.html",'<span class=widget-configure-icons><span class=widget-icon-container><span class=widget-delete-icon><i class=material-icons data-toggle=dropdown aria-haspopup=true aria-expanded=false>settings</i><div class="widget-dropdown dropdown-menu dropdown-menu-right"><div class=dropdown-item ng-click=deleteWidget()>{{\'Remove\'|translate}}</div></div></span></span></span><div class=dashboard-widget-container><div class="dashboard-widget buzz-post-widget"><div class=widget-header><span class=material-icons>{{getWidgetIcon()}}</span> <span class=widget-header-text>{{title|translate}}</span></div><div class=widget-body ng-class="{\'loading\':vm.showLoader}"><div class="oxd-circle-loader-container widget-loader" ng-if=vm.showLoader><div class=oxd-circle-loader>{{\'Loading\' | translate}}</div></div><span ng-if=!vm.showLoader class=primary-content-container><span ng-repeat="post in vm.posts" ng-if="vm.posts.length > 0 && vm.allowed"><span class=share-container><span class=share><div class="share-header share-container-outer-box" ng-click=vm.postClick()><span class=profile-image-container><img class="circle list-photo" ng-if="post.Employee.empProfilePic.image==null" ng-src=images/default-photo.png> <img class="circle list-photo" ng-if="post.Employee.empProfilePic.image!=null" ng-src=data:{{post.Employee.empProfilePic.type}};base64,{{post.Employee.empProfilePic.image}}></span> <span class=post-meta-data><span class=postEmpName>{{post.Employee.sharedEmpName}}</span> <span class=timeData><span class=postTime>{{vm.getFormattedDate(post.sharedTime)}}</span></span></span></div><div ng-if="post.shareType==0" class=postContent ng-bind-html=post.post.text></div><div ng-if="post.shareType==1" class=postContent ng-bind-html=post.shareText></div><img class=postImage ng-if="post.post.photos.length>0" ng-src=data:{{post.post.photos[0].type}};base64,{{post.post.photos[0].base64}} width=100%> <span ng-if="post.shareType==1"><div class=shared-post-name>{{post.post.Employee.empName}}</div><span class=shared-post-date>{{vm.getFormattedDate(post.post.postedTime)}}</span><div class=postContent ng-bind-html=post.post.text></div></span><div ng-if=post.post.kudos.kudosBackgroundImage class=kudos-container ng-style="{\'background-image\':\'url(images/dashboard/background/\'+ post.post.kudos.kudosBackgroundImage + \'.jpg)\'}"><div class=kudosType><span>{{post.post.kudos.kudos|translate}}</span></div><div class=kudosReceiverName><span>{{post.post.kudos.Employee.kudosEmployeeName}}</span></div><img class=kudos-Receiver-profile-image ng-if="post.post.kudos.Employee.kudosEmpProfilePic.image==null" ng-src=images/default-photo.png width=100%> <img class=kudos-Receiver-profile-image ng-if="post.post.kudos.Employee.kudosEmpProfilePic.image!=null" ng-src=data:{{post.post.kudos.Employee.kudosEmpProfilePic.type}};base64,{{post.post.kudos.Employee.kudosEmpProfilePic.image}} width=100%></div></span></span></span><div ng-if="vm.posts.length==0 || !vm.allowed" class=no-items-placeholder-container><div class=no-item-watermark><img ng-src=images/dashboard/watermarks/list_item_empty_watermark.png> <span class=no-items-placeholder ng-if="vm.allowed && vm.posts.length==0">{{"No Posts Added"|translate}}</span> <span class=no-items-placeholder ng-if=!vm.allowed>{{"No Permissions to View the Content"|translate}}</span></div></div></span></div></div></div>'),e.put("app/core/dashboard/widget/common/article-tile.html",'<div class=thumbnail-container ng-click="vm.articleClicked(articleDetails, vm)" oxd-tooltip data-placement=bottom title={{articleDetails.tooltip}}><div class={{vm.classPreceding}}-thumbnail><span class={{vm.classPreceding}}-header><div class={{vm.classPreceding}}-header-text>{{articleDetails.topic}}</div><div class={{vm.classPreceding}}-header-date><span class=material-icons>schedule</span> <span>{{articleDetails.date}}</span></div></span> <span class={{vm.classPreceding}}-image ng-if=articleDetails.hasImage ng-bind-html=articleDetails.image></span> <span class="{{vm.classPreceding}}-image placeholder {{articleDetails.colorClass}}" ng-if=!articleDetails.hasImage><span class=material-icons>{{config.icon}}</span></span></div></div>'),e.put("app/core/dashboard/widget/employeeOnLeave/employee-on-leave-widget.html",'<span class=widget-configure-icons><span class=widget-icon-container><span class=widget-delete-icon><i class=material-icons data-toggle=dropdown aria-haspopup=true aria-expanded=false>settings</i><div class="widget-dropdown dropdown-menu dropdown-menu-right"><div class=dropdown-item ng-click=openConfigurations()>{{\'Configuration\'|translate}}</div><div class=dropdown-item ng-click=deleteWidget()>{{\'Remove\'|translate}}</div></div></span></span></span><div class=dashboard-widget-container><div class="dashboard-widget employees-on-leave-widget"><div class=widget-header><span class=material-icons>{{getWidgetIcon()}}</span> <span class=widget-header-text>{{title|translate}}</span></div><div class=widget-body ng-class="{\'loading\':vm.showLoader}"><div class="oxd-circle-loader-container widget-loader" ng-if=vm.showLoader><div class=oxd-circle-loader>{{\'Loading\' | translate}}</div></div><span ng-if=!vm.showLoader class=primary-content-container><span ng-repeat="leave in vm.leaves" ng-if="vm.leaves.length > 0 && vm.allowed"><span class=leave-container><span class=material-icons></span> <span class=employee-image-container><img class="circle list-photo" ng-if="vm.images[leave[\'empNumber\']]" ng-src="data:{{vm.images[leave[\'empNumber\']].type}};base64,{{vm.images[leave[\'empNumber\']].image}}"> <img class="circle list-photo" ng-if="!vm.images[leave[\'empNumber\']]" ng-src=images/default-photo.png></span> <span class=employee-leave-title><div class=employee-name-container>{{leave[\'title\']}}</div><div class=leave-type-container ng-if="leave[\'leaveTypeName\']"><span class="material-icons leave-type-indicator">schedule</span> <span class=leave-type-name>{{leave[\'leaveTypeName\']}}</span></div></span> <span class=employee-id-container>{{leave[\'employeeId\']}}</span></span></span><div ng-if="vm.leaves.length==0 || !vm.allowed" class=no-items-placeholder-container><div class=no-item-watermark><img ng-src=images/dashboard/watermarks/list_item_empty_watermark.png> <span class=no-items-placeholder ng-if="vm.allowed && vm.leaves.length==0">{{"No Employees on Leave Today"|translate}}</span> <span class=no-items-placeholder ng-if="!vm.allowed && !vm.leavePeriodNotDefined">{{"No Permissions to View the Content"|translate}}</span> <span class=no-items-placeholder ng-if="!vm.allowed && vm.leavePeriodNotDefined">{{"Leave Period Not Defined"|translate}}</span></div></div></span></div></div></div>'),e.put("app/core/dashboard/widget/latestDocuments/latest-documents-widget.html",'<span class=widget-configure-icons><span class=widget-icon-container><span class=widget-delete-icon><i class=material-icons data-toggle=dropdown aria-haspopup=true aria-expanded=false>settings</i><div class="widget-dropdown dropdown-menu dropdown-menu-right"><div class=dropdown-item ng-click=deleteWidget()>{{\'Remove\'|translate}}</div></div></span></span></span><div class=dashboard-widget-container><div class="dashboard-widget latest-documents-widget"><div class=widget-header><span class=material-icons>{{getWidgetIcon()}}</span> <span class=widget-header-text>{{title|translate}}</span></div><div class=widget-body ng-class="{\'loading\':vm.showLoader}"><div class="oxd-circle-loader-container widget-loader" ng-if=vm.showLoader><div class=oxd-circle-loader>{{\'Loading\' | translate}}</div></div><span ng-if=!vm.showLoader class=primary-content-container><span class=documents-widget-container ng-if="vm.documents.length > 0 && vm.allowed"><span ng-repeat="document in vm.documents track by document.id" class=documents-item-container><article-tile article-details=document config=vm.documentConfig id=document.id></article-tile></span></span><div ng-if="vm.documents.length==0 || !vm.allowed" class=no-items-placeholder-container><div class=no-item-watermark><img ng-src=images/dashboard/watermarks/list_item_empty_watermark.png> <span class=no-items-placeholder ng-if="vm.allowed && vm.documents.length==0">{{"No Documents Published"|translate}}</span> <span class=no-items-placeholder ng-if=!vm.allowed>{{"No Permissions to View the Content"|translate}}</span></div></div></span></div></div></div>'),e.put("app/core/dashboard/widget/latestNews/latest-news-widget.html",'<span class=widget-configure-icons><span class=widget-icon-container><span class=widget-delete-icon><i class=material-icons data-toggle=dropdown aria-haspopup=true aria-expanded=false>settings</i><div class="widget-dropdown dropdown-menu dropdown-menu-right"><div class=dropdown-item ng-click=deleteWidget()>{{\'Remove\'|translate}}</div></div></span></span></span><div class=dashboard-widget-container><div class="dashboard-widget latest-news-widget"><div class=widget-header><span class=material-icons>{{getWidgetIcon()}}</span> <span class=widget-header-text>{{title|translate}}</span></div><div class=widget-body ng-class="{\'loading\':vm.showLoader}"><div class="oxd-circle-loader-container widget-loader" ng-if=vm.showLoader><div class=oxd-circle-loader>{{\'Loading\' | translate}}</div></div><span ng-if=!vm.showLoader class=primary-content-container><span class=news-widget-container ng-if="vm.news.length > 0 && vm.allowed"><span ng-repeat="news in vm.news track by news.id" class=news-item-container><article-tile article-details=news config=vm.newsConfig id=news.id></article-tile></span></span><div ng-if="vm.news.length==0 || !vm.allowed" class=no-items-placeholder-container><div class=no-item-watermark><img ng-src=images/dashboard/watermarks/list_item_empty_watermark.png> <span class=no-items-placeholder ng-if="vm.allowed && vm.news.length==0">{{"No News Published"|translate}}</span> <span class=no-items-placeholder ng-if=!vm.allowed>{{"No Permissions to View the Content"|translate}}</span></div></div></span></div></div></div>'),e.put("app/core/dashboard/widget/myActions/my-actions-widget.html",'<span class=widget-configure-icons><span class=widget-icon-container><span class=widget-delete-icon><i class=material-icons data-toggle=dropdown aria-haspopup=true aria-expanded=false>settings</i><div class="widget-dropdown dropdown-menu dropdown-menu-right"><div class=dropdown-item ng-show=vm.showConfigurations() ng-click=openConfigurations()>{{\'Configuration\'|translate}}</div><div class=dropdown-item ng-click=deleteWidget()>{{\'Remove\'|translate}}</div></div></span></span></span><div class=dashboard-widget-container><div class="dashboard-widget my-actions-widget"><div class=widget-header><span class=material-icons>{{getWidgetIcon()}}</span> <span class=widget-header-text>{{title|translate}}</span></div><div class=widget-body ng-class="{\'loading\':vm.showLoader}"><div class="oxd-circle-loader-container widget-loader" ng-if=vm.showLoader><div class=oxd-circle-loader>{{\'Loading\' | translate}}</div></div><span ng-if=!vm.showLoader class=primary-content-container><div ng-if=vm.hasActionsToPerform class=actions-container-outer-container><span class=actions-container><span ng-repeat="actionSection in vm.actionSections" class=action-section-container><div ng-if="vm.isSectionNeeded(actionSection, \'actionWithDue\')" class=section-container ng-class="{\'bordered-section\': vm.isSectionBorderNeeded(actionSection.category)}" id=actionWithDueContainer><span ng-repeat="action in actionSection.actions"><span ng-if="action.actionType===\'interviews\'" class="action-link-container interview-container" ng-click=vm.linkClicked(action)><span class=link-container><span class="material-icons type-indicator" ng-if=!action.candidateImage>{{vm.getActionIcon(action.actionType)}}</span> <span class=actionable-employee-image-container ng-if=action.candidateImage><img class="circle list-photo" ng-if=action.candidateImage.image ng-src=data:{{action.candidateImage.type}};base64,{{action.candidateImage.image}}> <img class="circle list-photo" ng-if=!action.candidateImage.image ng-src=images/default-photo.png> <span class="material-icons type-indicator-reprecentator">{{vm.getActionIcon(action.actionType)}}</span></span> <span class=link-title><div class=sub-heading>{{vm.getActionTypeText(action)}}</div><div class=title-text>{{vm.getActionDescription(action)}}</div></span> <span class=due-on>{{vm.getActionDue(action)}}</span></span></span> <span ng-if="action.actionType===\'trainings\'" class="action-link-container trainings-container" ng-click=vm.linkClicked(action)><span class=link-container><span class="material-icons type-indicator">{{vm.getActionIcon(action.actionType)}}</span> <span class=link-title><div class=sub-heading>{{vm.getActionTypeText(action)}}</div><div class=title-text>{{vm.getActionDescription(action)}}</div></span> <span class=due-on>{{vm.getActionDue(action)}}</span></span></span> <span ng-if="action.actionType===\'onboarding_events_and_tasks\'" class="action-link-container event-container" ng-click=vm.linkClicked(action)><span class=link-container><span class="material-icons type-indicator">{{vm.getActionIcon(action.actionType)}}</span> <span class=link-title><div class=sub-heading>{{vm.getActionTypeText(action)}}</div><div class=title-text>{{vm.getActionDescription(action)}}</div></span> <span class=due-on>{{vm.getActionDue(action)}}</span></span></span></span></div><div ng-if="vm.isSectionNeeded(actionSection, \'actionWithoutDueDetailed\')" class=section-container ng-class="{\'bordered-section\': vm.isSectionBorderNeeded(actionSection.category)}" id=actionWithoutDueDetailedContainer><span ng-repeat="action in actionSection.actions"><span ng-if="action.actionType===\'leaves_to_approve\'" class="action-link-container pending-leave-approval-container" ng-click=vm.linkClicked(action)><span class=link-container><span class="material-icons type-indicator" ng-if=!action.empImage>{{vm.getActionIcon(action.actionType)}}</span> <span class=actionable-employee-image-container ng-if=action.empImage><img class="circle list-photo" ng-if=action.empImage.image ng-src=data:{{action.empImage.type}};base64,{{action.empImage.image}}> <img class="circle list-photo" ng-if=!action.empImage.image ng-src=images/default-photo.png> <span class="material-icons type-indicator-reprecentator">{{vm.getActionIcon(action.actionType)}}</span></span> <span class="link-title expanded"><div class=sub-heading>{{vm.getActionTypeText(action)}}</div><div class=title-text>{{vm.getActionDescription(action)}}</div><div class=sub-heading>{{vm.getActionSubDescriptionForLeave(action)}}</div></span></span></span> <span ng-if="action.actionType===\'timesheets_to_approve\'" class="action-link-container pending-timesheets-approval-container" ng-click=vm.linkClicked(action)><span class=link-container><span class="material-icons type-indicator" ng-if=!action.empImage>{{vm.getActionIcon(action.actionType)}}</span> <span class=actionable-employee-image-container ng-if=action.empImage><img class="circle list-photo" ng-if=action.empImage.image ng-src=data:{{action.empImage.type}};base64,{{action.empImage.image}}> <img class="circle list-photo" ng-if=!action.empImage.image ng-src=images/default-photo.png> <span class="material-icons type-indicator-reprecentator">{{vm.getActionIcon(action.actionType)}}</span></span> <span class="link-title expanded"><div class=sub-heading>{{vm.getActionTypeText(action)}}</div><div class=title-text>{{vm.getActionDescription(action)}}</div></span></span></span> <span ng-if="action.actionType===\'attendance_sheets_to_approve\'" class="action-link-container pending-attendance-sheets-approval-container" ng-click=vm.linkClicked(action)><span class=link-container><span class="material-icons type-indicator" ng-if=!action.empImage>{{vm.getActionIcon(action.actionType)}}</span> <span class=actionable-employee-image-container ng-if=action.empImage><img class="circle list-photo" ng-if=action.empImage.image ng-src=data:{{action.empImage.type}};base64,{{action.empImage.image}}> <img class="circle list-photo" ng-if=!action.empImage.image ng-src=images/default-photo.png> <span class="material-icons type-indicator-reprecentator">{{vm.getActionIcon(action.actionType)}}</span></span> <span class="link-title expanded"><div class=sub-heading>{{vm.getActionTypeText(action)}}</div><div class=title-text>{{vm.getActionDescription(action)}}</div></span></span></span> <span ng-if="action.actionType===\'appraisal_reviews_to_submit\'" class="action-link-container reviews-container" ng-click=vm.linkClicked(action)><span class=link-container><span class="material-icons type-indicator" ng-if=!action.appraisalOwnerImage>{{vm.getActionIcon(action.actionType)}}</span> <span class=actionable-employee-image-container ng-if=action.appraisalOwnerImage><img class="circle list-photo" ng-if=action.appraisalOwnerImage.image ng-src=data:{{action.appraisalOwnerImage.type}};base64,{{action.appraisalOwnerImage.image}}> <img class="circle list-photo" ng-if=!action.appraisalOwnerImage.image ng-src=images/default-photo.png> <span class="material-icons type-indicator-reprecentator">{{vm.getActionIcon(action.actionType)}}</span></span> <span class=link-title><div class=sub-heading>{{vm.getActionTypeText(action)}}</div><div class=title-text>{{vm.getActionDescription(action)}}</div></span> <span class=due-on>{{vm.getActionDue(action)}}</span></span></span> <span ng-if="action.actionType===\'goals_to_approve\'" class="action-link-container pending-goal-approval-container" ng-click=vm.linkClicked(action)><span class=link-container><span class="material-icons type-indicator" ng-if=!action.empImage>{{vm.getActionIcon(action.actionType)}}</span> <span class=actionable-employee-image-container ng-if=action.empImage><img class="circle list-photo" ng-if=action.empImage.image ng-src=data:{{action.empImage.type}};base64,{{action.empImage.image}}> <img class="circle list-photo" ng-if=!action.empImage.image ng-src=images/default-photo.png> <span class="material-icons type-indicator-reprecentator">{{vm.getActionIcon(action.actionType)}}</span></span> <span class="link-title expanded"><div class=sub-heading>{{vm.getActionTypeText(action)}}</div><div class=title-text>{{vm.getActionDescription(action)}}</div></span></span></span></span></div><div ng-if="vm.isSectionNeeded(actionSection, \'actionWithoutDueSummary\')" class=section-container ng-class="{\'bordered-section\': vm.isSectionBorderNeeded(actionSection.category)}" id=actionWithoutDueSummaryContainer><span ng-repeat="action in actionSection.actions" class=action-link-container><span ng-if="action.actionType===\'leaves_to_approve\'" class="link-container pending-leave-approval-container" ng-click="vm.linkClicked(action, true)"><span class="material-icons type-indicator">{{vm.getActionIcon(action.actionType)}}</span> <span class=link-title><span class=title-text><span class=record-count>{{\'(\'+action.recordCount+\') \'}}</span> <span>{{vm.getSummaryDescription(action)|translate}}</span></span></span></span> <span ng-if="action.actionType===\'timesheets_to_approve\'" class="link-container pending-timesheets-approval-container" ng-click="vm.linkClicked(action, true)"><span class="material-icons type-indicator">{{vm.getActionIcon(action.actionType)}}</span> <span class=link-title><span class=title-text><span class=record-count>{{\'(\'+action.recordCount+\') \'}}</span> <span>{{vm.getSummaryDescription(action)|translate}}</span></span></span></span> <span ng-if="action.actionType===\'attendance_sheets_to_approve\'" class="link-container pending-attendance-sheets-approval-container" ng-click="vm.linkClicked(action, true)"><span class="material-icons type-indicator">{{vm.getActionIcon(action.actionType)}}</span> <span class="link-title expanded"><div class=sub-heading>{{vm.getSummarySubHeading(action)}}</div><span class=title-text><span class=record-count>{{\'(\'+action.recordCount+\') \'}}</span> <span>{{vm.getSummaryDescription(action)|translate}}</span></span></span></span> <span ng-if="action.actionType===\'employee_reviews_to_submit\'" class="link-container reviews-container" ng-click="vm.linkClicked(action, true)"><span class="material-icons type-indicator">{{vm.getActionIcon(action.actionType)}}</span> <span class=link-title><span class=title-text><span class=record-count>{{\'(\'+action.recordCount+\') \'}}</span> <span>{{vm.getSummaryDescription(action)|translate}}</span></span></span></span> <span ng-if="action.actionType===\'self_reviews_to_submit\'" class="link-container reviews-container" ng-click="vm.linkClicked(action, true)"><span class="material-icons type-indicator">{{vm.getActionIcon(action.actionType)}}</span> <span class=link-title><span class=title-text><span class=record-count>{{\'(\'+action.recordCount+\') \'}}</span> <span>{{vm.getSummaryDescription(action)|translate}}</span></span></span></span> <span ng-if="action.actionType===\'goals_to_approve\'" class="link-container pending-goal-approval-container" ng-click="vm.linkClicked(action, true)"><span class="material-icons type-indicator">{{vm.getActionIcon(action.actionType)}}</span> <span class=link-title><span class=title-text><span class=record-count>{{\'(\'+action.recordCount+\') \'}}</span> <span>{{vm.getSummaryDescription(action)|translate}}</span></span></span></span></span></div></span></span></div><div ng-if="!vm.allowed || !vm.hasActionsToPerform" class=no-items-placeholder-container><div class=no-item-watermark><img ng-src=images/dashboard/watermarks/list_item_empty_watermark.png> <span class=no-items-placeholder ng-if=!vm.allowed>{{\'No Permissions to View the Content\'|translate}}</span> <span class=show-no-employee-text ng-if="vm.allowed && !vm.hasActionsToPerform">{{\'No Pending Actions to Perform\' | translate}}</span></div></div></span></div></div></div>'),e.put("app/core/dashboard/widget/performanceTrackerQuickAdd/performance-tracker-quick-add-widget.html",'<span class=widget-configure-icons><span class=widget-icon-container><span class=widget-delete-icon><i class=material-icons data-toggle=dropdown aria-haspopup=true aria-expanded=false>settings</i><div class="widget-dropdown dropdown-menu dropdown-menu-right"><div class=dropdown-item ng-click=openConfigurations()>{{\'Configuration\'|translate}}</div><div class=dropdown-item ng-click=deleteWidget()>{{\'Remove\'|translate}}</div></div></span></span></span><div class=dashboard-widget-container><div class="dashboard-widget performance-tracker-widget"><div class=widget-header><span class=material-icons>{{getWidgetIcon()}}</span> <span class=widget-header-text>{{title|translate}}</span></div><div class=widget-body ng-class="{\'loading\':vm.showLoader}"><div class="oxd-circle-loader-container widget-loader" ng-if=vm.showLoader><div class=oxd-circle-loader>{{\'Loading\' | translate}}</div></div><span ng-if=!vm.showLoader class=primary-content-container><div class=performance-tracker-content-container><span ng-if="(vm.trackers.length>0 || vm.performers.length > 0) && vm.allowed" class=performance-tracker-content><div class=add-tracker-content><span class=add-review-log-title>{{\'Most Feedback\'| translate}}</span> <span class=add-button-container ng-if="vm.trackers.length>0"><button type=button class="btn btn-sm btn-label add-tracker-log-button" ng-click=vm.addTrackerLog()>{{\'Add Tracker Log\' | translate}}</button></span></div><span class=tracker-feed-back-report-container ng-if=vm.graphDataLoaded><span class=tracker-feed-back-report ng-if="vm.performers.length>0"><div class=separator id=horizontalHeaderSeparator></div><performance-tracker-feedback-bar-chart graph-id="\'employeeTrackerFeedBacks\'" data=vm.graphData options=vm.graphOptions></performance-tracker-feedback-bar-chart></span> <span ng-if="vm.performers.length==0" class=no-trackers-container><div class="no-item-watermark inner-graph"><img ng-src=images/dashboard/watermarks/graph_empty_watermark.png> <span class=no-items-placeholder>{{\'No Feedback Available\'|translate}}</span></div></span></span></span><div ng-if="!vm.allowed || (vm.trackers.length == 0 && vm.performers.length == 0)" class=no-items-placeholder-container><div class="no-item-watermark graph"><img ng-src=images/dashboard/watermarks/graph_empty_watermark.png> <span class=no-items-placeholder ng-if=!vm.allowed>{{\'No Permissions to View the Content\'|translate}}</span> <span class=show-no-employee-text ng-if="vm.allowed && (vm.trackers.length == 0 && vm.performers.length == 0)">{{\'No Available Trackers\' | translate}}</span></div></div></div></span></div></div></div>'),e.put("app/core/dashboard/widget/quickAccess/quick-access-widget.html",'<span class=widget-configure-icons><span class=widget-icon-container><span class=widget-delete-icon><i class=material-icons data-toggle=dropdown aria-haspopup=true aria-expanded=false>settings</i><div class="widget-dropdown dropdown-menu dropdown-menu-right"><div class=dropdown-item ng-click=deleteWidget()>{{\'Remove\'|translate}}</div></div></span></span></span><div class=dashboard-widget-container><div class="dashboard-widget action-center-widget"><div class=widget-header><span class=material-icons>{{getWidgetIcon()}}</span> <span class=widget-header-text>{{title|translate}}</span></div><div class=widget-body ng-class="{\'loading\':vm.showLoader}"><div class="oxd-circle-loader-container widget-loader" ng-if=vm.showLoader><div class=oxd-circle-loader>{{\'Loading\' | translate}}</div></div><span ng-if=!vm.showLoader class=primary-content-container><div class=action-center-widget-container ng-if="(vm.quickAccessItems.length > 0) && vm.allowed"><span ng-repeat="section in vm.quickAccessItems" class=quick-access-section-container><span ng-repeat="item in section" class=quick-access-item-container><div class=quick-access-button ng-click=vm.quickAccessClicked(item) ng-if=item.isTooltipNeeded oxd-tooltip data-placement=bottom title={{item.name}} data-template="<div class=\'tooltip\' role=\'tooltip\'><div class=\'arrow\'></div><div class=\'tooltip-inner {{vm.getShortcutTooltipClasses(item.name)}}\'>></div></div>"><span class=quick-access-icon-container><span class=quick-access-icon><img ng-src=images/dashboard/icons/{{item.icon}}></span></span></div><div class=quick-access-button ng-click=vm.quickAccessClicked(item) ng-if=!item.isTooltipNeeded><span class=quick-access-icon-container><span class=quick-access-icon><img ng-src=images/dashboard/icons/{{item.icon}}></span></span></div><div class=quick-access-heading-container><div class=quick-access-heading>{{item.title}}</div></div></span></span></div><div ng-if="!vm.allowed || vm.quickAccessItems.length == 0" class=no-items-placeholder-container><div class=no-item-watermark><img ng-src=images/dashboard/watermarks/list_item_empty_watermark.png> <span class=no-items-placeholder ng-if=!vm.allowed>{{\'No Permissions to View the Content\'|translate}}</span> <span class=no-items-placeholder ng-if="vm.allowed && vm.quickAccessItems.length == 0">{{\'No Shortcuts Added\' | translate}}</span></div></div></span></div></div></div>'),e.put("app/core/dashboard/widget/reportChart/report-chart-widget.html",'<span class=widget-configure-icons><span class=widget-icon-container><span class=widget-delete-icon><i class=material-icons data-toggle=dropdown aria-haspopup=true aria-expanded=false>settings</i><div class="widget-dropdown dropdown-menu dropdown-menu-right"><div class=dropdown-item ng-click=deleteWidget()>{{\'Remove\'|translate}}</div></div></span></span></span><div class=dashboard-widget-container><div class="dashboard-widget report-chart-widget"><div class=widget-header><span class=material-icons>{{getWidgetIcon()}}</span> <span style="margin-left: 0.75rem; text-align: left">{{title|translate}}</span></div><div class="widget-body report-chart-body" ng-class="{\'loading\':vm.showLoader}"><div class="oxd-circle-loader-container widget-loader" ng-if=vm.showLoader><div class=oxd-circle-loader>{{\'Loading\' | translate}}</div></div><span ng-if=!vm.showLoader class=primary-content-container><span class=report-container style="display: flex" ng-if="vm.summaries.length > 0 && vm.allowed"><div ng-if=!vm.shouldShowNoDataFound ng-cloak class="form-div report-chart-dashboard"><div ng-repeat="summary in vm.summaries" class><report-summary summary=summary filters=vm.filters reportid=vm.reportId oxd-styles=true embedded=true></report-summary></div></div></span><div ng-if="!vm.allowed || vm.summaries.length == 0 || vm.shouldShowNoDataFound" class=no-items-placeholder-container><div class="no-item-watermark graph"><img ng-src=images/dashboard/watermarks/graph_empty_watermark.png> <span class=no-items-placeholder ng-if=!vm.allowed>{{\'No Permissions to View the Content\'|translate}}</span> <span class=show-no-employee-text ng-if="vm.allowed && (vm.summaries.length == 0 || vm.shouldShowNoDataFound)">{{vm.summaryDataRestrictedMessage | translate}}</span></div></div></span></div></div></div>'),
e.put("app/core/dashboard/widget/timeAtWork/time-at-work-widget.html",'<span class=widget-configure-icons><span class=widget-icon-container><span class=widget-delete-icon><i class=material-icons data-toggle=dropdown aria-haspopup=true aria-expanded=false>settings</i><div class="widget-dropdown dropdown-menu dropdown-menu-right"><div class=dropdown-item ng-click=deleteWidget()>{{\'Remove\'|translate}}</div></div></span></span></span><div class=dashboard-widget-container><div class="dashboard-widget time-at-work-widget"><div class=widget-header><span class=material-icons>{{getWidgetIcon()}}</span> <span class=widget-header-text>{{title|translate}}</span></div><div class=widget-body id=timeAtWorkWidgetBody ng-class="{\'loading\':vm.showLoader}"><div class="oxd-circle-loader-container widget-loader" ng-if=vm.showLoader><div class=oxd-circle-loader>{{\'Loading\' | translate}}</div></div><span ng-if=!vm.showLoader class=primary-content-container><div ng-if="vm.allowed && !vm.noDataAvailable"><div class=punch-status-container ng-class="{\'punched-in\':vm.punchedIn}"><span class=profile-image-container><span class=profile-image><img class="circle profile-photo" ng-if=vm.emplpoyeeProfilePic ng-src=data:{{vm.emplpoyeeProfilePic.type}};base64,{{vm.emplpoyeeProfilePic.image}}> <img class="circle profile-photo" ng-if=!vm.emplpoyeeProfilePic ng-src=images/default-photo.png></span></span> <span class=status-container><div class=punch-status ng-if=vm.lastPunch>{{(vm.punchedIn? "Punched In":"Punched Out") | translate}}</div><div class=punch-status ng-if=!vm.lastPunch>{{"Not Punched In" | translate}}</div><div class=last-punched-out-container ng-if=vm.lastPunch><span class=last-punched-out-time-text ng-if=!vm.punchedIn>{{("Punched Out"|translate) + \' : \'}}</span> <span class=last-punched-out-time-text ng-if=vm.punchedIn>{{("Punched In" |translate) + \' : \'}}</span> <span class=last-punched-out-time-time>{{vm.lastPunch}}</span></div></span></div><div class=worked-time-container><span class=worked-time><span class=worked-time-time>{{vm.workedTime}}</span> <span class=worked-time-text>{{"Today"|translate}}</span></span> <span class=punch-icons ng-if=vm.canPunch><span class=punch-icons-wrapper ng-click=vm.punchInClicked(vm.punchedIn) title="{{vm.punchedIn ? \'Punch Out\' : \'Punch In\' | translate}}" oxd-tooltip data-placement=bottom><span class="punch-in-icon material-icons" ng-if=!vm.punchedIn>timer</span> <span class="punch-out-icon material-icons" ng-if=vm.punchedIn>timer_off</span></span></span> <span class=redirect-icons ng-click=vm.navigateToAttendanceSheet() title="{{\'View Attendance Sheet\' | translate}}" oxd-tooltip data-placement=bottom><span class="view-attendance-sheet-icon material-icons">oxd_view_attendance</span></span></div><div class=weekly-record-charts-container ng-if=vm.graphDataLoaded><div class=week-summary><span class=week-title-container><div class=week-title>{{\'This Week\'|translate}}</div><div class=week-title-description>{{vm.currentWeek}}</div></span> <span class=week-hours-container><span class="worked-hours-for-week-icon material-icons">timer</span> <span class=worked-hours-for-week>{{vm.workedHoursForWeek}}</span></span></div><div class=weekly-record-chart><oxd-bar-chart data=vm.graphData options=vm.graphOptions></oxd-bar-chart></div></div></div><div ng-if="!vm.allowed || vm.noDataAvailable" class=no-items-placeholder-container><div class="no-item-watermark graph"><img ng-src=images/dashboard/watermarks/graph_empty_watermark.png> <span ng-if=!vm.allowed class=no-items-placeholder>{{\'No Permissions to View the Content\'|translate}}</span> <span ng-if=vm.noDataAvailable class=no-items-placeholder>{{\'No Data to Display\'|translate}}</span></div></div></span></div></div></div>'),e.put("app/core/dashboard/widget/vueWidget/vue-dashboard-widget.html","<div id={{vm.generatedId}}></div>"),e.put("app/directives/formDecorators/oxd/oxd-button-switch/oxd-button-switch.html","<div class=oxd-button-switch><label class=option ng-click=off()>{{offLabel | translate}}</label> <label class=option ng-click=on()>{{onLabel | translate}}</label> <label class=option-switch ng-class=\"{'on': isOn, 'off': !isOn, 'animate': isClicked, 'disabled': disabled}\">{{currentLabel}}</label></div>"),e.put("app/directives/formDecorators/oxd/oxd-wizard-numeric-progress-bar/oxd-wizard-numeric-progress-bar.html",'<div class=oxd-wizard-numeric-progress-bar-container><div oxd-tooltip data-placement=bottom data-original-title="{{item[tooltipProperty] | translate}}" class=progress-item ng-repeat-start="item in items" ng-click="onItemClickCallback && onItemClickCallback(item, $index)" ng-class="{done: doneClassCallback && doneClassCallback(item, $index), todo: todoClassCallback && todoClassCallback(item, $index), current: currentClassCallback && currentClassCallback(item, $index), visited: visitedClassCallback && visitedClassCallback(item, $index), clickable: !!onItemClickCallback}">{{$index+1}}</div><div ng-repeat-end class=progress-item-link ng-if=!$last ng-class="{done: doneClassCallback && doneClassCallback(item, $index)}"></div></div>'),e.put("app/performance/competency_profiles/grid/add/add-competencies-modal.html",'<div id=confirmation_modal class="modal modal-fixed-footer add-competencies-modal"><div class="competency-profile-modal-content modal-content" style="height: calc(100% - 56px);"><h4>{{\'Add Competencies\' | translate}}</h4><div><form id=formAddCompetencies name=formAddCompetencies class="col s12"><div sf-schema=modal.schema sf-form=modal.form sf-model=modal.model></div></form></div></div><div class=modal-footer><a href ng-click=modal.add(formAddCompetencies) class="modal-action modal-close waves-effect btn rounded-button">{{"Add Selected" | translate}}</a> <a href ng-click=modal.cancel() class="modal-action modal-close waves-effect btn rounded-button" style="background-color: transparent; color: gray;">{{"Cancel" | translate}}</a></div></div>'),e.put("app/performance/goals/add/goalSummary/goal-summary.html","<div class=goal-summary-container><span class=round-slide-container><round-slide ng-if=vm.roundSlideConfig ng-model=vm.goal.rating config=vm.roundSlideConfig></round-slide></span> <span class=primary-details-container><div class=goal-name-container>{{vm.goal.name}}</div><div class=goal-description-container ng-bind-html=vm.getGoalDescription()></div><div class=main-goal-data-container><span class=assign-to-container><div class=goal-summary-label>{{'Assigned To'|translate}}</div><div class=goal-summary-value>{{vm.getEmployeeName()}}</div></span> <span class=due-date-container><div class=goal-summary-label>{{'Due Date'|translate}}</div><div class=goal-summary-value>{{vm.getDueDate()}}</div></span> <span class=eval-group-container ng-if=\"vm.goal.evaluators && vm.goal.evaluators.length > 0\"><div class=goal-summary-label>{{'Evaluator Groups'|translate}}</div><div class=goal-summary-value><span class=eval-group-name>{{vm.getFirstEvaluatorName()}}</span> <span class=eval-group-count ng-if=\"vm.getEvaluatorGroupCountToShow()>0\">{{'+'+vm.getEvaluatorGroupCountToShow()}}</span></div></span></div></span> <span class=secondary-details-container><div class=secondary-data-container><span class=goal-level-container><div class=goal-summary-label>{{'Level'|translate}}</div><div class=goal-summary-value><span class=\"material-icons summary-level-icon\">{{vm.getGoalLevelIcon()}}</span> <span class=goal-level-summary-value>{{vm.getGoalLevelName()}}</span></div></span> <span class=goal-priority-container><div class=goal-summary-label>{{'Priority'|translate}}</div><div class=goal-summary-value>{{vm.getGoalPriorityName()}}</div></span> <span class=goal-status-container><div class=goal-summary-label>{{vm.getGoalStatusLabel()|translate}}</div><div class=goal-summary-value>{{vm.getGoalStatusName()}}</div></span></div></span></div>"),e.put("app/performance/goals/goalList/exportConfirmation/export-confirmation-popover.html","<div id=exportConfirmationPopover show-modal-as-popover=modal.clickEvent class=modal tabindex=-1 role=dialog><oxd-modal-with-form form-schema=modal.schema form=modal.form model=modal.model show-header=false show-footer=true modal-size-class=popover-xsm save-button-label=Download on-save=modal.save show-close-button=false></oxd-modal-with-form></div>"),e.put("app/core/dashboard/widget/employeeOnLeave/configure/configure-employees-on-leave.html",'<div class="modal widget-configuration-modal" tabindex=-1 role=dialog id=configureEmployeeOnLeaveModal><generic-oxd-modal modal-title={{modal.title}} show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-sm header-config=modal.headerConfig></generic-oxd-modal></div>'),e.put("app/core/dashboard/widget/myActions/configure/configure-my-actions.html",'<div class="modal widget-configuration-modal" tabindex=-1 role=dialog id=configureMyActionModal><div class="modal-dialog modal-md" role=document><div class=modal-content><div class=modal-header><span class=material-icons>{{modal.widgetIcon}}</span> <span class=header-container><div class=sub-heading>{{\'My Actions\'|translate}}</div><div class=heading>{{\'Configurations\'|translate}}</div></span> <button type=button class="btn btn-close" aria-label="{{\'Close\' | translate}}" data-dismiss=modal>&times</button></div><div class=modal-body><div class=oxd-circle-loader-container ng-if=vm.hideLoader><div class=oxd-circle-loader>{{\'Loading\' | translate}}</div></div><form name=oxdModalForm><div class=form-row ng-if="modal.hasPermissions([\'interviews\', \'trainings\', \'onboarding_events_and_tasks\'])"><ohrm-switch ng-if="modal.hasPermissions([\'interviews\'])" class="form-group col-6" key="\'showInterviews\'" label="\'Interviews\'" model=modal.model.showInterviews readonly=false icon="\'ohrm_interview\'" icon-class="\'interview-indicator\'"></ohrm-switch><ohrm-switch ng-if="modal.hasPermissions([\'trainings\'])" class="form-group col-6" key="\'showTrainings\'" label="\'Trainings\'" model=modal.model.showTrainings readonly=false icon="\'ohrm_training_cap\'" icon-class="\'trainings-container\'"></ohrm-switch><ohrm-switch ng-if="modal.hasPermissions([\'onboarding_events_and_tasks\'])" class="form-group col-6" key="\'showOnboardingEvents\'" label="\'Onboarding Events and Tasks\'" model=modal.model.showOnboardingEvents readonly=false icon="\'ohrm_handshake\'" icon-class="\'event-container\'"></ohrm-switch></div><div class=accordion id=configureActionAccordion ng-if="modal.hasPermissions([\'employee_reviews_to_submit\', \'self_reviews_to_submit\', \'appraisal_reviews_to_submit\', \'leaves_to_approve\', \'timesheets_to_approve\', \'attendance_sheets_to_approve\', \'goals_to_approve\'])"><div class=accordion-item ng-if="modal.hasPermissions([\'leaves_to_approve\'])"><div id=pendingLeavesAccordionHeading class=accordion-header><ohrm-switch class="form-group col-12" key="\'showPendingLeavesToApprove\'" label="\'Pending Leave to Approve\'" model=modal.model.showPendingLeavesToApprove readonly=false icon="\'ohrm_clock_with_person\'" icon-class="\'pending-leave-approval-container\'"></ohrm-switch><span class=toggle-container ng-show=modal.model.showPendingLeavesToApprove><span class="material-icons header-collapse-indicator collapsed" data-toggle=collapse data-target=#pendingLeavesAccordionBody aria-expanded=false aria-controls=pendingLeavesAccordionBody></span></span> <span class=toggle-container ng-show=!modal.model.showPendingLeavesToApprove><span class="material-icons header-collapse-disabled-indicator">keyboard_arrow_down</span></span></div><div id=pendingLeavesAccordionBody class=collapse aria-labelledby=pendingLeavesAccordionHeading data-parent=#configureActionAccordion><div class=accordion-body-container ng-if=modal.model.showPendingLeavesToApprove><div class=form-row><div class=col-6><label class=d-block>{{"Show Pending Leave Requests As" | translate}}</label><div class="custom-control custom-radio"><input type=radio id=pendingApprovalLeaveViewSummary class=custom-control-input ng-model=modal.model.pendingApprovalLeaveView ng-value="\'summary\'"> <label class=custom-control-label for=pendingApprovalLeaveViewSummary>{{"Summary of Requests" | translate}}</label></div><div class="custom-control custom-radio"><input type=radio id=pendingApprovalLeaveViewDetailed class=custom-control-input ng-model=modal.model.pendingApprovalLeaveView ng-value="\'detailed\'"> <label class=custom-control-label for=pendingApprovalLeaveViewDetailed>{{"Individual Requests" | translate}}</label></div></div></div><div class=form-row ng-if="modal.model.pendingApprovalLeaveView==\'detailed\'"><div class=col-6><div class="custom-control custom-checkbox"><input materializecss-input id=pendingApprovalLeaveShowSubordinatesOnly type=checkbox ng-model=modal.model.pendingApprovalLeaveShowSubordinatesOnly class=custom-control-input> <label class=custom-control-label for=pendingApprovalLeaveShowSubordinatesOnly>{{"Only Show My Subordinates\' Leave Requests" | translate}}</label></div></div></div></div></div></div><div class=accordion-item ng-if="modal.hasPermissions([\'timesheets_to_approve\'])"><div id=pendingTimesheetsAccordionHeading class=accordion-header><ohrm-switch class="form-group col-12" key="\'showPendingTimesheetsToApprove\'" label="\'Pending Timesheets to Approve\'" model=modal.model.showPendingTimesheetsToApprove readonly=false icon="\'ohrm_clock_with_calendar\'" icon-class="\'pending-timesheets-approval-container\'"></ohrm-switch><span class=toggle-container ng-show=modal.model.showPendingTimesheetsToApprove><span class="material-icons header-collapse-indicator collapsed" data-toggle=collapse data-target=#pendingTimesheetsAccordionBody aria-expanded=false aria-controls=pendingTimesheetsAccordionBody></span></span> <span class=toggle-container ng-show=!modal.model.showPendingTimesheetsToApprove><span class="material-icons header-collapse-disabled-indicator">keyboard_arrow_down</span></span></div><div id=pendingTimesheetsAccordionBody class=collapse aria-labelledby=pendingTimesheetsAccordionHeading data-parent=#configureActionAccordion><div class=accordion-body-container ng-if=modal.model.showPendingTimesheetsToApprove><div class=form-row><div class=col-6><label class=d-block>{{"Show Pending Timesheets As" | translate}}</label><div class="custom-control custom-radio"><input type=radio id=pendingApprovalTimesheetsViewSummary class=custom-control-input ng-model=modal.model.pendingApprovalTimesheetView ng-value="\'summary\'"> <label class=custom-control-label for=pendingApprovalTimesheetsViewSummary>{{"Summary of Timesheets" | translate}}</label></div><div class="custom-control custom-radio"><input type=radio id=pendingApprovalTimesheetsViewDetailed class=custom-control-input ng-model=modal.model.pendingApprovalTimesheetView ng-value="\'detailed\'"> <label class=custom-control-label for=pendingApprovalTimesheetsViewDetailed>{{"Individual Timesheets" | translate}}</label></div></div></div><div class=form-row ng-if="modal.model.pendingApprovalTimesheetView==\'detailed\'"><div class=col-6><div class="custom-control custom-checkbox"><input materializecss-input id=pendingApprovalTimesheetShowSubordinatesOnly type=checkbox ng-model=modal.model.pendingApprovalTimesheetShowSubordinatesOnly class=custom-control-input> <label class=custom-control-label for=pendingApprovalTimesheetShowSubordinatesOnly>{{"Only Show My Subordinates\' Timesheets" | translate}}</label></div></div></div></div></div></div><div class=accordion-item ng-if="modal.hasPermissions([\'attendance_sheets_to_approve\'])"><div id=pendingAttendanceSheetsAccordionHeading class=accordion-header><ohrm-switch class="form-group col-12" key="\'showPendingAttendanceSheetsToApprove\'" label="\'Pending Attendance Sheets to Approve\'" model=modal.model.showPendingAttendanceSheetsToApprove readonly=false icon="\'check_list\'" icon-class="\'pending-attendance-sheet-approval-container\'"></ohrm-switch><span class=toggle-container ng-show=modal.model.showPendingAttendanceSheetsToApprove><span class="material-icons header-collapse-indicator collapsed" data-toggle=collapse data-target=#pendingAttendanceSheetsAccordionBody aria-expanded=false aria-controls=pendingAttendanceSheetsAccordionBody></span></span> <span class=toggle-container ng-show=!modal.model.showPendingAttendanceSheetsToApprove><span class="material-icons header-collapse-disabled-indicator">keyboard_arrow_down</span></span></div><div id=pendingAttendanceSheetsAccordionBody class=collapse aria-labelledby=pendingAttendanceSheetsAccordionHeading data-parent=#configureActionAccordion><div class=accordion-body-container ng-if=modal.model.showPendingAttendanceSheetsToApprove><div class=form-row><div class=col-6><label class=d-block>{{"Show Pending Attendance Sheets As" | translate}}</label><div class="custom-control custom-radio"><input type=radio id=pendingApprovalAttendanceSheetsViewSummary class=custom-control-input ng-model=modal.model.pendingApprovalAttendanceSheetView ng-value="\'summary\'"> <label class=custom-control-label for=pendingApprovalAttendanceSheetsViewSummary>{{"Summary of Attendance Sheets" | translate}}</label></div><div class="custom-control custom-radio"><input type=radio id=pendingApprovalAttendanceSheetsViewDetailed class=custom-control-input ng-model=modal.model.pendingApprovalAttendanceSheetView ng-value="\'detailed\'"> <label class=custom-control-label for=pendingApprovalAttendanceSheetsViewDetailed>{{"Individual Attendance Sheets" | translate}}</label></div></div></div><div class=form-row ng-if="modal.model.pendingApprovalAttendanceSheetView==\'detailed\'"><div class=col-6><div class="custom-control custom-checkbox"><input materializecss-input id=pendingApprovalAttendanceSheetShowSubordinatesOnly type=checkbox ng-model=modal.model.pendingApprovalAttendanceSheetShowSubordinatesOnly class=custom-control-input> <label class=custom-control-label for=pendingApprovalAttendanceSheetShowSubordinatesOnly>{{"Only Show My Subordinates\' Attendance Sheets" | translate}}</label></div></div></div></div></div></div><div class=accordion-item ng-if="modal.hasPermissions([\'employee_reviews_to_submit\', \'self_reviews_to_submit\', \'appraisal_reviews_to_submit\'])"><div id=pendingAppraisalReviewHeading class=accordion-header><ohrm-switch class="form-group col-12" key="\'pendingAppraisalReviewView\'" label="\'Pending Appraisal Reviews\'" model=modal.model.showPendingAppraisalReviews readonly=false icon="\'ohrm_star_employee\'" icon-class="\'reviews-container\'"></ohrm-switch><span class=toggle-container ng-show=modal.model.showPendingAppraisalReviews><span class="material-icons header-collapse-indicator collapsed" data-toggle=collapse data-target=#pendingAppraisalReviewAccordionBody aria-expanded=false aria-controls=pendingAppraisalReviewAccordionBody></span></span> <span class=toggle-container ng-show=!modal.model.showPendingAppraisalReviews><span class="material-icons header-collapse-disabled-indicator">keyboard_arrow_down</span></span></div><div id=pendingAppraisalReviewAccordionBody class=collapse aria-labelledby=pendingAppraisalReviewHeading data-parent=#configureActionAccordion><div class=accordion-body-container ng-if=modal.model.showPendingAppraisalReviews><div class=form-row><div class=col-6><label class=d-block>{{"Show Pending Appraisal Reviews As" | translate}}</label><div class="custom-control custom-radio"><input type=radio id=pendingAppraisalReviewViewSummary class=custom-control-input ng-model=modal.model.pendingAppraisalReviewView ng-value="\'summary\'"> <label class=custom-control-label for=pendingAppraisalReviewViewSummary>{{"Summary of Reviews" | translate}}</label></div><div class="custom-control custom-radio"><input type=radio id=pendingAppraisalReviewViewDetailed class=custom-control-input ng-model=modal.model.pendingAppraisalReviewView ng-value="\'detailed\'"> <label class=custom-control-label for=pendingAppraisalReviewViewDetailed>{{"Individual Reviews" | translate}}</label></div></div></div></div></div></div><div class=accordion-item ng-if="modal.hasPermissions([\'goals_to_approve\'])"><div id=pendingGoalsAccordionHeading class=accordion-header><ohrm-switch class="form-group col-12" key="\'showPendingGoalsToApprove\'" label="\'Pending Goals to Approve\'" model=modal.model.showGoalsToApprove readonly=false icon="\'ohrm_bullseye\'" icon-class="\'pending-goals-approval-container\'"></ohrm-switch><span class=toggle-container ng-show=modal.model.showGoalsToApprove><span class="material-icons header-collapse-indicator collapsed" data-toggle=collapse data-target=#pendingGoalsAccordionBody aria-expanded=false aria-controls=pendingGoalsAccordionBody></span></span> <span class=toggle-container ng-show=!modal.model.showGoalsToApprove><span class="material-icons header-collapse-disabled-indicator">keyboard_arrow_down</span></span></div><div id=pendingGoalsAccordionBody class=collapse aria-labelledby=pendingGoalsAccordionHeading data-parent=#configureActionAccordion><div class=accordion-body-container ng-if=modal.model.showGoalsToApprove><div class=form-row><div class=col-6><label class=d-block>{{"Show Pending Goals As" | translate}}</label><div class="custom-control custom-radio"><input type=radio id=pendingApprovalGoalsViewSummary class=custom-control-input ng-model=modal.model.pendingApprovalGoalView ng-value="\'summary\'"> <label class=custom-control-label for=pendingApprovalGoalsViewSummary>{{"Summary of Goals" | translate}}</label></div><div class="custom-control custom-radio"><input type=radio id=pendingApprovalGoalsViewDetailed class=custom-control-input ng-model=modal.model.pendingApprovalGoalView ng-value="\'detailed\'"> <label class=custom-control-label for=pendingApprovalGoalsViewDetailed>{{"Individual Goals" | translate}}</label></div></div></div><div class=form-row ng-if="modal.model.pendingApprovalGoalView==\'detailed\'"><div class=col-6><div class="custom-control custom-checkbox"><input materializecss-input id=pendingApprovalGoalShowSubordinatesOnly type=checkbox ng-model=modal.model.pendingApprovalGoalShowSubordinatesOnly class=custom-control-input> <label class=custom-control-label for=pendingApprovalGoalShowSubordinatesOnly>{{"Only Show My Subordinates\' Goals" | translate}}</label></div></div></div></div></div></div></div></form></div><div class=modal-footer><small class=mr-auto></small> <button type=button class="btn btn-ghost" ng-click=modal.cancel() data-dismiss=modal>{{ \'Cancel\' | translate}}</button> <button type=button class="btn btn-secondary" id=modal-save-button ohrm-save-form=modal.save();>{{ \'Save\' | translate}}</button></div></div></div></div>'),e.put("app/core/dashboard/widget/performanceTrackerQuickAdd/add/add-tracker-feedback-modal.html","<div class=modal tabindex=-1 role=dialog><generic-oxd-modal modal-title={{modal.title}} show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-sm></generic-oxd-modal></div>"),e.put("app/core/dashboard/widget/performanceTrackerQuickAdd/configure/configure-quick-feedback.html",'<div class="modal widget-configuration-modal" tabindex=-1 role=dialog id=configureQuickFeedbackModal><generic-oxd-modal modal-title={{modal.title}} show-close-button=true show-reset-button=false form-schema=modal.schema form=modal.form model=modal.model save-button-label=Save cancel-button-label=Cancel on-save=modal.save modal-size-class=modal-sm header-config=modal.headerConfig></generic-oxd-modal></div>')}]);