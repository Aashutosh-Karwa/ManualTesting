var VueComponents;(function(){var e={46700:function(e,t,o){var a={"./af":42786,"./af.js":42786,"./ar":30867,"./ar-dz":14130,"./ar-dz.js":14130,"./ar-kw":96135,"./ar-kw.js":96135,"./ar-ly":56440,"./ar-ly.js":56440,"./ar-ma":47702,"./ar-ma.js":47702,"./ar-sa":16040,"./ar-sa.js":16040,"./ar-tn":37100,"./ar-tn.js":37100,"./ar.js":30867,"./az":31083,"./az.js":31083,"./be":9808,"./be.js":9808,"./bg":68338,"./bg.js":68338,"./bm":67438,"./bm.js":67438,"./bn":8905,"./bn-bd":76225,"./bn-bd.js":76225,"./bn.js":8905,"./bo":11560,"./bo.js":11560,"./br":1278,"./br.js":1278,"./bs":80622,"./bs.js":80622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":50877,"./cv.js":50877,"./cy":47373,"./cy.js":47373,"./da":24780,"./da.js":24780,"./de":59740,"./de-at":60217,"./de-at.js":60217,"./de-ch":60894,"./de-ch.js":60894,"./de.js":59740,"./dv":5300,"./dv.js":5300,"./el":50837,"./el.js":50837,"./en-au":78348,"./en-au.js":78348,"./en-ca":77925,"./en-ca.js":77925,"./en-gb":22243,"./en-gb.js":22243,"./en-ie":46436,"./en-ie.js":46436,"./en-il":47207,"./en-il.js":47207,"./en-in":44175,"./en-in.js":44175,"./en-nz":76319,"./en-nz.js":76319,"./en-sg":31662,"./en-sg.js":31662,"./eo":92915,"./eo.js":92915,"./es":55655,"./es-do":55251,"./es-do.js":55251,"./es-mx":96112,"./es-mx.js":96112,"./es-us":71146,"./es-us.js":71146,"./es.js":55655,"./et":5603,"./et.js":5603,"./eu":77763,"./eu.js":77763,"./fa":76959,"./fa.js":76959,"./fi":11897,"./fi.js":11897,"./fil":42549,"./fil.js":42549,"./fo":94694,"./fo.js":94694,"./fr":94470,"./fr-ca":63049,"./fr-ca.js":63049,"./fr-ch":52330,"./fr-ch.js":52330,"./fr.js":94470,"./fy":5044,"./fy.js":5044,"./ga":29295,"./ga.js":29295,"./gd":2101,"./gd.js":2101,"./gl":38794,"./gl.js":38794,"./gom-deva":27884,"./gom-deva.js":27884,"./gom-latn":23168,"./gom-latn.js":23168,"./gu":95349,"./gu.js":95349,"./he":24206,"./he.js":24206,"./hi":30094,"./hi.js":30094,"./hr":30316,"./hr.js":30316,"./hu":22138,"./hu.js":22138,"./hy-am":11423,"./hy-am.js":11423,"./id":29218,"./id.js":29218,"./is":90135,"./is.js":90135,"./it":90626,"./it-ch":10150,"./it-ch.js":10150,"./it.js":90626,"./ja":39183,"./ja.js":39183,"./jv":24286,"./jv.js":24286,"./ka":12105,"./ka.js":12105,"./kk":47772,"./kk.js":47772,"./km":18758,"./km.js":18758,"./kn":79282,"./kn.js":79282,"./ko":33730,"./ko.js":33730,"./ku":1408,"./ku.js":1408,"./ky":33291,"./ky.js":33291,"./lb":36841,"./lb.js":36841,"./lo":55466,"./lo.js":55466,"./lt":57010,"./lt.js":57010,"./lv":37595,"./lv.js":37595,"./me":39861,"./me.js":39861,"./mi":35493,"./mi.js":35493,"./mk":95966,"./mk.js":95966,"./ml":87341,"./ml.js":87341,"./mn":5115,"./mn.js":5115,"./mr":10370,"./mr.js":10370,"./ms":9847,"./ms-my":41237,"./ms-my.js":41237,"./ms.js":9847,"./mt":72126,"./mt.js":72126,"./my":56165,"./my.js":56165,"./nb":64924,"./nb.js":64924,"./ne":16744,"./ne.js":16744,"./nl":93901,"./nl-be":59814,"./nl-be.js":59814,"./nl.js":93901,"./nn":83877,"./nn.js":83877,"./oc-lnc":92135,"./oc-lnc.js":92135,"./pa-in":15858,"./pa-in.js":15858,"./pl":64495,"./pl.js":64495,"./pt":89520,"./pt-br":57971,"./pt-br.js":57971,"./pt.js":89520,"./ro":96459,"./ro.js":96459,"./ru":21793,"./ru.js":21793,"./sd":40950,"./sd.js":40950,"./se":10490,"./se.js":10490,"./si":90124,"./si.js":90124,"./sk":64249,"./sk.js":64249,"./sl":14985,"./sl.js":14985,"./sq":51104,"./sq.js":51104,"./sr":49131,"./sr-cyrl":79915,"./sr-cyrl.js":79915,"./sr.js":49131,"./ss":85893,"./ss.js":85893,"./sv":98760,"./sv.js":98760,"./sw":91172,"./sw.js":91172,"./ta":27333,"./ta.js":27333,"./te":23110,"./te.js":23110,"./tet":52095,"./tet.js":52095,"./tg":27321,"./tg.js":27321,"./th":9041,"./th.js":9041,"./tk":19005,"./tk.js":19005,"./tl-ph":75768,"./tl-ph.js":75768,"./tlh":89444,"./tlh.js":89444,"./tr":72397,"./tr.js":72397,"./tzl":28254,"./tzl.js":28254,"./tzm":51106,"./tzm-latn":30699,"./tzm-latn.js":30699,"./tzm.js":51106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":67691,"./uk.js":67691,"./ur":13795,"./ur.js":13795,"./uz":6791,"./uz-latn":60588,"./uz-latn.js":60588,"./uz.js":6791,"./vi":65666,"./vi.js":65666,"./x-pseudo":14378,"./x-pseudo.js":14378,"./yo":75805,"./yo.js":75805,"./zh-cn":83839,"./zh-cn.js":83839,"./zh-hk":55726,"./zh-hk.js":55726,"./zh-mo":99807,"./zh-mo.js":99807,"./zh-tw":74152,"./zh-tw.js":74152};function i(e){var t=l(e);return o(t)}function l(e){if(!o.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=l,e.exports=i,i.id=46700},70754:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return R_}});var a={};o.r(a);var i=o(64807);const l={class:"buzz-container"};function n(e,t,o,a,n,r){const s=(0,i.resolveComponent)("oxd-toaster"),d=(0,i.resolveComponent)("buzz-top-header"),c=(0,i.resolveComponent)("buzz-home"),m=(0,i.resolveComponent)("buzz-profile");return(0,i.openBlock)(),(0,i.createElementBlock)("div",l,[(0,i.createVNode)(s),(0,i.createVNode)(d,{empProfilePic:e.userProfilePic,empName:e.empName},null,8,["empProfilePic","empName"]),"buzz.home"===e.ngServices.$state.currentState.name?((0,i.openBlock)(),(0,i.createBlock)(c,{key:0})):"buzz.profile"===e.ngServices.$state.currentState.name?((0,i.openBlock)(),(0,i.createBlock)(m,{key:1})):(0,i.createCommentVNode)("",!0)])}var r=o.p+"images/buzz.png";const s=e=>((0,i.pushScopeId)("data-v-1e8be69e"),e=e(),(0,i.popScopeId)(),e),d={class:"top-header-wrapper"},c={class:"top-header"},m={class:"buzz-search-wrapper"},u=s((()=>(0,i.createElementVNode)("img",{src:r},null,-1))),p=[u],v={class:"buzz-search"},h={key:0,class:"auto-complete-img"},g=["src"],y={class:"nav-buttons"},f={key:0,class:"emp-profile-container"},b={class:"emp-profile"},C=["src"],S={role:"none"},w={href:"/auth/logout",role:"menuitem",class:"oxd-userdropdown-link"},E={role:"none"},k={href:"/auth/logout/all",role:"menuitem",class:"oxd-userdropdown-link"},x={class:"help"};function N(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon-button"),s=(0,i.resolveComponent)("oxd-quick-search"),u=(0,i.resolveComponent)("profile-pic"),N=(0,i.resolveComponent)("oxd-icon"),A=(0,i.resolveComponent)("oxd-dropdown-menu");return(0,i.openBlock)(),(0,i.createElementBlock)("div",d,[(0,i.createElementVNode)("div",c,[(0,i.createElementVNode)("div",m,[((0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"buzz-icon",onClickOnce:t[0]||(t[0]=t=>e.routeToHome()),key:e.imageHomeButtonKey},p,32)),(0,i.createElementVNode)("div",v,[(0,i.createVNode)(s,{placeholder:e.$t("Search on buzz"),createOptions:e.syncFunction,"onUpdate:modelValue":t[1]||(t[1]=t=>e.onSelectOption(t))},{iconSlot:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{name:"oxd-search",class:"search-button"})])),option:(0,i.withCtx)((({data:e})=>[e.image?((0,i.openBlock)(),(0,i.createElementBlock)("span",h,[(0,i.createElementVNode)("img",{src:e.image},null,8,g)])):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("span",null,(0,i.toDisplayString)(e.label),1)])),_:1},8,["placeholder","createOptions"])])]),(0,i.createElementVNode)("div",y,[((0,i.openBlock)(),(0,i.createBlock)(r,{name:"oxd-home",class:(0,i.normalizeClass)(["square-button",{active:"buzz.home"==e.currentRouteName}]),onClickOnce:t[2]||(t[2]=t=>e.routeToHome()),key:e.homeButtonKey,tooltip:e.$t("Home"),flow:"bottom"},null,8,["class","tooltip"])),((0,i.openBlock)(),(0,i.createBlock)(r,{name:"oxd-profile",class:(0,i.normalizeClass)(["square-button",{active:"buzz.profile"==e.currentRouteName&&(!e.empNoFilter||e.empNoFilter&&e.empNoFilter===e.empNo)}]),onClick:t[3]||(t[3]=t=>e.routeToProfile()),key:e.profileButtonKey,tooltip:e.$t("Profile"),flow:"bottom"},null,8,["class","tooltip"]))]),e.empProfilePic?((0,i.openBlock)(),(0,i.createElementBlock)("div",f,[(0,i.createElementVNode)("div",b,[(0,i.createVNode)(u,{size:"small",onClick:t[4]||(t[4]=t=>e.routeToProfile())},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("img",{src:e.empProfilePic},null,8,C)])),_:1}),(0,i.createElementVNode)("div",{class:"user-name",onClick:t[5]||(t[5]=t=>e.routeToProfile())},(0,i.toDisplayString)(e.nameTextParser(e.empName)),1),(0,i.createVNode)(A,{class:"oxd-userdropdown"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{name:"oxd-arrow-down",class:(0,i.normalizeClass)(["profile-drop-down",{"--active":e.showDropDown}])},null,8,["class"])])),content:(0,i.withCtx)((()=>[(0,i.createElementVNode)("li",S,[(0,i.createElementVNode)("a",w,[(0,i.createVNode)(N,{name:"box-arrow-right","with-container":!1}),(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Logout")),1)])]),(0,i.createElementVNode)("li",E,[(0,i.createElementVNode)("a",k,[(0,i.createVNode)(N,{name:"box-arrow-right","with-container":!1}),(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Logout from all browsers")),1)])])])),_:1})]),(0,i.createElementVNode)("div",x,[(0,i.createVNode)(r,{name:"oxd-question",class:"search-button",onClick:t[6]||(t[6]=t=>e.openBuzzHelp()),tooltip:e.$t("Help"),flow:"bottom"},null,8,["tooltip"])])])):(0,i.createCommentVNode)("",!0)])])}var A=o(70655),D=o(53543),T=o(99856),P=o(97534),V=o(70018);const B="buzz/shares",I="buzz/share",L="employeePhotos",F="buzzEmployees",z="buzz/settings",M="buzz/share",O="buzz/share/likes",R="buzz/kudosTypes",_="buzz/share/comment/likes",$="buzz/validateVideoLink",j="buzz/ping";var U=o(78966),Z=(o(57658),o(26555)),H=o(74201),q=o(91857),G=o(63672),W=o(49474),K=o(95570);const Q=(e,t,o={})=>{try{return(0,Z.Z)(e,t,o)}catch(a){return""}},J=(e,t,o={})=>{try{return(0,H.Z)(e,t,o)}catch(a){return""}},Y=(e,t)=>{try{return(0,q.Z)(e,t)}catch(o){return null}},X=()=>new Date((new Date).setHours(0,0,0,0)),ee=(e,t,o={})=>{try{const a=(0,G.Z)(e,t.replace(/'/g,""),X(),o);return!isNaN(a.valueOf())&&a.getFullYear()>=1e3?a:null}catch(a){return null}},te=(e,t,o)=>{const a=ee(e,o),i=ee(t,o);return!(!a||!i)&&-1===(0,W.Z)(a,i)},oe=(e,t,o)=>{const a=ee(e,o),i=ee(t,o);return!(!a||!i)&&1===(0,W.Z)(a,i)},ae=(e,t,o)=>{const a=ee(e,o),i=ee(t,o);return!(!a||!i)&&0===(0,W.Z)(a,i)},ie=(e,t,o)=>{const a=ee(e,o),i=ee(t,o);if(a&&i){if(a.valueOf()<i.valueOf())return 1;if(a.valueOf()>i.valueOf())return-1;if(a.valueOf()===i.valueOf())return 0}return NaN},le=e=>{let t="";switch(e){case"Y-m-d":t="yyyy-mm-dd";break;case"d-m-Y":t="dd-mm-yyyy";break;case"m-d-Y":t="mm-dd-yyyy";break;case"Y-d-m":t="yyyy-dd-mm";break;case"m-Y-d":t="mm-yyyy-dd";break;case"d-Y-m":t="dd-yyyy-mm";break;case"Y/m/d":t="yyyy/mm/dd";break;case"Y m d":t="yyyy mm dd";break;case"Y-M-d":t="yyyy-M-dd";break;case"l, d-M-Y":t="DD, dd-M-yyyy";break;case"D, d M Y":t="D, dd M yyyy";break;default:t="yyyy/mm/dd"}return t},ne=(e=20)=>{const t=(0,K.Z)(new Date),o=t-e,a=t+e,i=[];for(let l=o;l<a;l++)i.push(l);return i};var re=o(89235),se=o(29278);const de=(0,i.ref)({}),ce=()=>(e,t)=>{if(de.value[e]){let o=de.value[e];return t&&Object.keys(t).forEach((e=>{o=o.replace(`{{${e}}}`,String(t[e]))})),o}return e},me=(e,t)=>{const o=ce();return(0,re.Z)({months:{wide:[o("January"),o("February"),o("March"),o("April"),o("May"),o("June"),o("July"),o("August"),o("September"),o("October"),o("November"),o("December")],abbreviated:[o("Jan"),o("Feb"),o("Mar"),o("Apr"),o("May"),o("Jun"),o("Jul"),o("Aug"),o("Sep"),o("Oct"),o("Nov"),o("Dec")]},days:{abbreviated:[o("Sun"),o("Mon"),o("Tue"),o("Wed"),o("Thu"),o("Fri"),o("Sat")],wide:[o("Sunday"),o("Monday"),o("Tuesday"),o("Wednesday"),o("Thursday"),o("Friday"),o("Saturday")]},relativeDate:{lastWeek:`'${o("last")}' eeee '${o("at")}' p`,yesterday:`'${o("yesterday")} ${o("at")}' p`,today:`'${o("today")} ${o("at")}' p`,tomorrow:`'${o("tomorrow")} ${o("at")}' p`,nextWeek:`eeee '${o("at")}' p`,other:(0,se.gc)(t)},dayPeriodValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:`${o("AM")}`,pm:`${o("PM")}`,midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}}})};function ue(){return{beforeCreate(){this.$t=ce()}}}var pe={install:(e,t)=>{const o=t.langugePack;if(!o)throw new Error("Language pack not found!");de.value=JSON.parse(JSON.stringify(o)),e.mixin(ue()),e.config.globalProperties.$locale=me(o,t.dateFormat),e.config.globalProperties.$dateFormat=t.dateFormat,e.config.globalProperties.$t=ce(),(0,i.provide)("$locale",e.config.globalProperties.$locale),(0,i.provide)("$dateFormat",e.config.globalProperties.$dateFormat)}};const ve=ce(),he=["admin","Admin","System Admin","_ohrmSysAdmin_"];class ge{static base64ImageConvertion(e,t){return`data:${e};base64,${t}`}static isAdminName(e){return he.includes(e)}static getEmployeeName(e,t,o,a){return ge.isAdminName(e)?ve(e):t?a?e+" "+t+" "+o+" ("+`${ve("Past Employee")})`:e+" "+t+" "+o:a?e+" "+o+" ("+`${ve("Past Employee")})`:e+" "+o}static getEmployeeNameV2(e,t,o,a){return ge.isAdminName(e)?ve(e):`${null!==e&&void 0!==e?e:""} ${null!==t&&void 0!==t?t:""} ${null!==o&&void 0!==o?o:""} ${a?ve("Past Employee"):""}`.trim()}static calculateAnniversaryYears(e){const t=11===(0,U.Z)(new Date),o=0===(0,U.Z)(new Date(e));let a=Y(new Date,new Date(e));return null!=a&&t&&o&&(a+=1),a}static showAngularToast(e,t){document.dispatchEvent(new CustomEvent("angularToast",{detail:{messageType:e,message:t}}))}static getClientGMT(){const e=(new Date).getTimezoneOffset()/-60;return`GMT ${e>0?"+":""}${e}`}}ge.joinStrings=e=>e.length>1?`${e.slice(0,-1).join(", ")} and ${e.slice(-1)}`:{0:"",1:e[0]}[e.length];const ye="Success",fe="Error",be="Successfully Saved",Ce="Failed to Load",Se="Successfully Updated",we="Successfully Deleted",Ee="Failed to Save",ke="Failed to Update",xe="Failed to Delete",Ne="File Type Not Allowed",Ae="No Records Found",De="Execution Fail",Te="Required",Pe="Invalid",Ve="Error",Be="Error on processing the request",Ie="Already exists",Le="Should be a valid url",Fe="From date should be on or before to date",ze="To date should be on or after from date",Me="Email Successfully Sent";var Oe=(0,i.defineComponent)({name:"TopHeader",props:{empProfilePic:String,empName:String},data(){return{empPageLimit:5,selectEmpId:null,clickedToLoadProfile:!1,showDropDown:!1,homeButtonKey:0,profileButtonKey:0,imageHomeButtonKey:0}},components:{"oxd-icon-button":D.Z,"oxd-quick-search":T.Z,"profile-pic":P.Z,"oxd-dropdown-menu":V.Z},computed:{currentRouteName(){return this.ngServices.$state.currentState.name},morePostsLoading(){return this.$store.state.buzz.morePostsLoading},pageNo(){return this.$store.state.buzz.pageNo},pageLimit(){return this.$store.state.buzz.pageLimit},empNoFilter(){return this.$store.state.buzz.selectedEmpNo},orderFilter(){return this.$store.state.buzz.orderFilterForShare},orderByFilter(){return this.$store.state.buzz.orderByFilterForShare}},methods:{onDropDownClick(e){this.showDropDown=e},nameTextParser(e){return e.length>30?e.substring(0,32)+"...":e},openBuzzHelp(){window.open("https://help.orangehrm.com/hc/en-us/articles/360012743354-Orange-Buzz","_blank")},syncFunction(e){return(0,A.mG)(this,void 0,void 0,(function*(){return new Promise((t=>{if(e){let o={serverFetch:!0};this.ngServices.webservice.get(F,{filter:{emp_name_or_emp_number:e},limit:this.empPageLimit,includePhoto:!0},o).then((e=>{const o=e.data.data;t(o.map((e=>{var t,o,a,i;return{id:e.empNumber,label:ge.getEmployeeName(e.firstName,"",e.lastName,e.terminated),image:(null===(t=null===e||void 0===e?void 0:e.empProfilePic)||void 0===t?void 0:t.type)&&(null===(o=null===e||void 0===e?void 0:e.empProfilePic)||void 0===o?void 0:o.image)?ge.base64ImageConvertion(null===(a=null===e||void 0===e?void 0:e.empProfilePic)||void 0===a?void 0:a.type,null===(i=null===e||void 0===e?void 0:e.empProfilePic)||void 0===i?void 0:i.image):"images/default.png",employees_details:{location:e.location,workEmail:e.workEmail,jobTitle:e.jobTitle}}})))})).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)})))}else t([])}))}))},onSelectOption(e){if(e){this.selectEmpId=e.id,this.selectEmpId!==this.empNo?(this.$store.commit("buzz/setIsPostsFetchActionTriggred",!0),this.$store.commit("buzz/isCurrentLoggedEmployeeProfile",!1),this.$store.commit("buzz/setEmpNoFilter",this.selectEmpId),this.$store.commit("buzz/setOrderFilter",null),this.$store.commit("buzz/setOrderByFilter",null),this.$store.commit("buzz/setSelectedEmployeeName",e.label),this.$store.commit("buzz/setSelectedEmployeeLocation",null===e||void 0===e?void 0:e.employees_details.location),this.$store.commit("buzz/setSelectedEmployeeEmail",null===e||void 0===e?void 0:e.employees_details.workEmail),this.$store.commit("buzz/setSelectedEmployeeDesignation",null===e||void 0===e?void 0:e.employees_details.jobTitle)):(this.$store.commit("buzz/setIsPostsFetchActionTriggred",!0),this.$store.commit("buzz/isCurrentLoggedEmployeeProfile",!0),this.$store.commit("buzz/setEmpNoFilter",this.empNo),this.$store.commit("buzz/setOrderFilter",null),this.$store.commit("buzz/setOrderByFilter",null)),this.$store.commit("buzz/emptySelectedEmployeeLargeProfilePicture");const t={empNo:this.empNoFilter,size:"big",include:"Employee",webservice:this.ngServices.webservice};this.$store.dispatch("buzz/getSelectedUserProfilePictureLarge",t).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)}))),this.ngServices.$state.go("buzz.profile",{empId:this.empNoFilter}),this.loadProfile()}},routeToHome(){this.$store.commit("buzz/setNewPostsAvailable",!1),this.$store.commit("buzz/setSelectedMenu",""),this.$store.commit("buzz/setIsPostsFetchActionTriggred",!0),this.$store.commit("buzz/emptySharePosts",!0),this.$store.commit("buzz/isCurrentLoggedEmployeeProfile",!0),this.$store.commit("buzz/setEmpNoFilter",null),this.$store.commit("buzz/setOrderFilter",null),this.$store.commit("buzz/setOrderByFilter",null),this.ngServices.$state.go("buzz.home"),this.$store.commit("buzz/setPageNo",1);const e={pageNo:this.pageNo,limit:this.pageLimit,order:this.orderFilter,orderBy:this.orderByFilter,empNumber:this.empNoFilter?[this.empNoFilter]:null,webservice:this.ngServices.webservice};this.$store.commit("buzz/setLoading",!0),this.$store.commit("buzz/setMorePostsLoading",!0),this.$store.dispatch("buzz/getSharePosts",e).then((()=>{this.homeButtonKey++,this.imageHomeButtonKey++})).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)})))},routeToProfile(){this.clickedToLoadProfile=!0,this.morePostsLoading?this.$store.subscribeAction({after:e=>{"buzz/getSharePosts"===e.type&&this.clickedToLoadProfile&&(this.clickedToLoadProfile=!1,this.$store.commit("buzz/setIsPostsFetchActionTriggred",!0),this.$store.commit("buzz/isCurrentLoggedEmployeeProfile",!0),this.$store.commit("buzz/setEmpNoFilter",this.empNo?this.empNo:0),this.$store.commit("buzz/setOrderFilter",null),this.$store.commit("buzz/setOrderByFilter",null),this.ngServices.$state.go("buzz.profile",{empId:this.empNo}),this.loadProfile())}}):(this.clickedToLoadProfile=!1,this.$store.commit("buzz/setIsPostsFetchActionTriggred",!0),this.$store.commit("buzz/isCurrentLoggedEmployeeProfile",!0),this.$store.commit("buzz/setEmpNoFilter",this.empNo?this.empNo:0),this.$store.commit("buzz/setOrderFilter",null),this.$store.commit("buzz/setOrderByFilter",null),this.ngServices.$state.go("buzz.profile",{empId:this.empNo}),this.loadProfile())},loadProfile(){this.$store.commit("buzz/emptySharePosts"),this.$store.commit("buzz/setPageNo",1);const e={pageNo:this.pageNo,limit:this.pageLimit,order:this.orderFilter,orderBy:this.orderByFilter,empNumber:this.empNoFilter||0===this.empNoFilter?[this.empNoFilter]:null,webservice:this.ngServices.webservice};this.$store.commit("buzz/setLoading",!0),this.$store.commit("buzz/setMorePostsLoading",!0),this.$store.dispatch("buzz/getSharePosts",e).then((()=>{this.profileButtonKey++})).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)})))}}}),Re=o(83744);const _e=(0,Re.Z)(Oe,[["render",N],["__scopeId","data-v-1e8be69e"]]);var $e=_e;function je(e,t,o,a,l,n){const r=(0,i.resolveComponent)("buzz-left-menu"),s=(0,i.resolveComponent)("buzz-create-post"),d=(0,i.resolveComponent)("buzz-posts"),c=(0,i.resolveComponent)("buzz-content");return(0,i.openBlock)(),(0,i.createBlock)(c,null,{leftMenu:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{"onUpdate:filterByLikes":t[0]||(t[0]=t=>e.filterSharesByLikes()),"onUpdate:filterByComments":t[1]||(t[1]=t=>e.filterSharesByComments())})])),mainContent:(0,i.withCtx)((()=>[e.loggedEmployeeProfile?((0,i.openBlock)(),(0,i.createBlock)(s,{key:0,empProfilePic:e.loggedEmployeeProfile,class:"buzz-content"},null,8,["empProfilePic"])):(0,i.createCommentVNode)("",!0),(0,i.createVNode)(d)])),_:1})}const Ue={class:"buzz-container"},Ze={class:"topContent"},He={class:"buzz-content-container"},qe={class:"left-menu"},Ge={class:"content-wrapper"},We={class:"width-content"},Ke={class:"right-menu"},Qe={class:"content-wrapper"};function Je(e,t,o,a,l,n){const r=(0,i.resolveComponent)("buzz-right-menu");return(0,i.openBlock)(),(0,i.createElementBlock)("div",Ue,[(0,i.createElementVNode)("div",Ze,[(0,i.renderSlot)(e.$slots,"topContent",{},void 0,!0)]),(0,i.createElementVNode)("div",He,[(0,i.createElementVNode)("div",qe,[(0,i.createElementVNode)("div",Ge,[(0,i.renderSlot)(e.$slots,"leftMenu",{},void 0,!0)])]),(0,i.createElementVNode)("div",We,[(0,i.renderSlot)(e.$slots,"mainContent",{},void 0,!0)]),(0,i.createElementVNode)("div",Ke,[(0,i.createElementVNode)("div",Qe,[(0,i.createVNode)(r,{"data-test":"right-menu-content"})])])])])}var Ye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKHwYRAcuxRqgAABGpSURBVHja7Z1rV+JI14bvCrQcVFBBbR1tnTWz5v//m36f7hm1uxU8IAQIIeGQej+QChVOoqJtqPv64mh3r5Gkrtp711FIKaXX7YIQMmY4HGJzawsWHwUh0wghAICCELIICkIIBSGEghBCQQihIIRQEEIoCCEUhBAKQggFIYRQEEIoCCEUhJA3Jc1H8HuQUqLRaMDzPLjdLnq9HoLhEIPBAL1eD1JKpFIppFIpbGQy2Mznsbm1hf1ymQ/vHRHcMPV+QvR6PbTbbTSbTTiOA8/zIKWElHLGmxHqH8Z+XCqVcHp6ilwux4f6hgRBgPzmJgV5ayk830e73cb93R3a7fa0BDPkUJt1AECGkgghIpEymQy+fPmCUqkU+7uEgiRGjFarhUqlAtu2pxq+lDImhxACEoDQ/v1MWfS/LyXK+/s4PTlBNpvlQ38jQViDrPih2raNh1oN9cfH2SmT+jb8WZRizYkEUk+zQqlkKEnt4QGu62K/XEaxWEQul4NlcdyFNcgHpF6v4/buDk3bjkWEqfpCE2Hun6uUahw6ACFg6UJNRCQhBIrFIrK5HIqFAgqFAtJp9n9MsX4zruvi58+faDQac2uLqLHrkWBGAT4Ly7IiKSaFkAv+fX5zE5/SaRQKBZRKJWSzWdYrFOR9H+D19TVqtRp83/9AOcHswj+TyWBndxd7u7soFApMxSjI2+H7Pv7vf/+D2+nAsiwEQfCxBJn3R2H0yefzODs7Q7FYZFShIKvFtm1cXFzA9/0n05wPV3CqFC1M74rFIv7880/OqVCQ1VCtVlGtVtHv98c1hRpZSoAouiCWEAiCAJlMBvv7+zg5OWE0mSEIhzmW5MePH6hUKoAQ0XyFCBtZklBDykroXq+H6+tr9Ho9nJ+fI5VK8WXrgyR8BE9zdXWFSqUy6mHDaGFZFoJwNEkkpOCVUo5+Vy3iKWHu7+/x7ds39Pt9vnAK8jw5qtXqVBEcBEFU9MqkRBEhRr+rEPF0KhTetm1KQkGW5/r6GtVqdRQlVFqi9bxJKtCVCOrr5O8ehOK0Wi1cXV0l77NRkPelVqvh/v4+uTI8N7hYFkRYV9VqNdzd3bERUJDZOI6DX2HhagwTS1gqlQq6HN2kIJMEQYD//vsPXre7cNJt/fwYFfBKEt/3cXl5aXyqRUEmuLm5geu6o5ojYUO4r6vfxdS+E7Wxi4IQAEC73cbDw8N4hMewCBKLFuFnv7m5oSBk1ECq1Sp83x83lnCOwJQZZhU9rLBgtywLrusmbjKUgrxRYf44uclpong1oZNQdZiUEkEQwPd9uK5LQVh73PAhLEg9KYjBuK472vDExXoz0ffVUxAD+fnzZzSKQ6ZhDWL4yzc5x162eDcV45e7N5vNj7VlljCCfCTUYQvCoOFcplgUZOkX39ZmirmCdTau6xr7bIwWZDgcosv6YykoiMk9Y8IOX3h3OSiImXQYPZYNH8bWIUYLEp3msuBsXMIIYnQNoqAejCAUhIUnnxUFWY4gCNBsNmNpBOdB5suhR1sKYoggk70iIwojCAUJGQwGUV7NhYrLdSgUxCDUTbKEEYSCzEA/PZCaMIJQkAWCML1iBKEg89BHrjiKRUEoyIQf8VZAE5hiUZCYE2z7S+EZuqmMKRZZCt/zKAgh87Bt28jZdApClmIwGBh5Ti8FYWH+NOHoXqVSMS6KWOZ6QTGe1YkIAdu2jTtl0VhBop6Qp5ksF0RUsW7YaBZTLCk51MvIS0Gm02rBOoRQkKUEIU8+KxU50uk0BTFJEIryPDY2NigIIwiZV3d8+vTJqM+e5uuPpxBk5gOKnpNpghgfQeSMhkAmntUojOBgf9+4GsTYCBK9aDXMSzmeTLGKxaJ57YTF5riXZJq1ONpubW0Z99ktkwUx8T70l0aQnZ0d40awjBbk06dPSKVS8TSLzGVnZ8fIkT9jBbEsK55TS8mh3wUpVnFnx8x2YvKLz+fz4wlDi8vSZtUdQggUCgVkMxkKYhr7BwfIZLOwUqlRmsUifSRGKIcVdhqfP382NroaLUhmYwOlUgnS4EsqZ0oSFuZSSuRyOezu7hr7LIzPK05OTpDNZlmkz4gkUkqcn58bXZsZL4glBP755x9k9GFfc62I0kwpJcrlspGTgxRkRrFe3t83vgYRWuTI5/P48uWL8W2DgoQcHx0hm80a/QwkxmvTTk9PkTF05IqCzCCdTuP4+HgqDzdmll3dkSIl9kol7O3tsVFQkDg7OzvI5nIz0471Dx+j2JHf3MT52RkbAwWZJpPJYC8c0lS5uGl3F34+PGRqRUHm88cff6BQKEBKOZooC+cDTJCkUChgf3+fjYCCLK5F/vrrL2RzOWPE0AWxuOSGgjxFNpvF+dmZUcu7hRAol8t8+RRkOXZ3d5ELC3YT9qzncrno8xIKshRnZ2eQUq7t7UpCO3Z108DdghRkBb3qWm0z1eqpyd2UJc57UJCX9LBqo9A6FOv6J1Cz5lJKZDIZbG9v84VTkBfUIqEg61CBqFE5Ec6aq6/b29vGHedDQVZEPp9XrWstPo/U063wMx0eHvJFU5CXkUqlsFcqrc8HCqVIWdZo1e7mJtMrCvLKNGvNdtTpI3OHBwfcB0NBXse2NpKlzzSLhN1Opf+ual6Hq3YpyKvZ2NiIhkNleF8fhEhm4a5JUi6XjTwMjoK8QR2iClmJ8WHOKp9PVIqiDTZwaQkFWRnRMngk9wzfyd97c3OTL5aCrIZCoTA+wECbhZYJPU9rI5Ph3AcFWeGDsiwcHByMZFiDOZHDgwMubacgq48i0cQhkrcdV/9dTbspioK8R1qysZHoc6L0uEdBKMibsLOzExvyTVSypYaoAaZXFORtyOfzSFnW+GJLJHeYl1CQlZNOp5HL5aKl4xLJXOnL5SUU5G0emGUhlUqNG1iSRrVmLDUhFGTlpNLpqIElbT2WwvM8vkgK8kZpfBAkswfWfme32+WLpCBvQxAEUdRI0ky6HulqDw8YDod8mRRktQwGAwRBEB1JmrT0Sh3IPRwO0Ww2+UIpyGqpVKtot9vR1dHCshIjSRTtwohXrVbX9kgjCvLO9Ho9/PjxA5Wbm1FPbFkQAILhMHH1iIp8rVYLd3d3fLkL4HLOJcSoVCqo1+vwfR+WZY3mPrQ6JFHpFeKbvq6urmBZFg9uoCDPYzgc4rFex831NTzPi3rdQEqkLCuqQxJmyHiTl/azi4sLdDodHB0d8fjRyUcmpZQeh/xi2LaNn79+oeM4Uc87Oe8hE3yvumVZCKSMSSKDAJlMBsfHxzg8PDR+pj0IAuQ3NynIJHd3d7i5uYHf643nDbSeN/bfSe0VJw7jjqJjWLCXy2Wcn58bveJXCcIiXeP29hYXFxdRrRGhC7EGSzQmI5+UEoG6MAhArVbD9+/f0ev1jG8TFCRsID9//cLl5eW4hzVs+FMAkSRCCDSbTVxdXRk/mWh8kR4EAS4uL/Fwfx8rxPUTS0xY2Kc+YxRJhMDj4yOEEPj777+NrUmMFmQwGODb9+9o2vZIBCAWOUyRQ31W9TUIAiDsLGq1GtKfPuHP83MKYhKO4+C/iwu4nc5obkON6oRSiKQeDLcCUWKfXQjcVqtIp1I4PT2lICZEjdvbW9zf30dFqBrynLq0U/t+3SOJ+nzDIBjtktRqEykErq+vkU6ncXR0REHWtdao1+u4u7tDq9WabB1Rj6kaSuyrSfn35D57lXpZFqrVKoQQ+Pz5MwVZF4bDIRqNxmwxntFojEW7aKff76NSqQCAMZKsrSCe56FWq+GhVoPX7UbDl9xq+vL0S0qJXq+Hy6sr+L6P09PTtT8dZa0E6ff7sG0b9/f3UbTQl4ao7ynJsyv3WD0GKVGtVuG6Ls7OzkaHWKxpGpropSZBEMD3fbQdB7WHh9gGoFkimFJwr96PiQ5GK+KllCgWizg6OsLW1tbaLE9J7Fqsfr8P13XhOA5s247VFbN6Mck6YnWSIH5TbrRoU3u+R0dH2NvbQy6XS7QsiRFkOBzCdV10Oh10Oh08PDxMLbTTXxCEGA1NsuBeuSB6TTJrwaMenYUQODo6QrFYRKFQSFyt8iEFkVJiOByi2+2i7Tjwul10u92Xjz6RN6tHnvPnOzs7KBaLKBaLyOfziahXPoQgalSk3W7D87xR2tRsGrdQ0BShhBAolUrY3NpCuVT60Ne//RZBpJTwfR+2baNer8PzPPi+P/VA9QKQrGfUEUIgl8vh5OQEe3t7Hy6qvIsgw+EQnueh2+2iXq/DcRz4vh/LX9U6qEmRoB/tSZIrhv7thDBqYWQmk0GpVMLBwQEymcyHqFdWLoiUEoPBAJ7nod1uw3Ec1BuNeLqkFdBqdja2MHBB0UcSLMisd6itHhZhgwSA7e1t7O/vY3t7+7fOr6xEECklXNdFq9VCu93G4+Pj/HRJf1BCwJrc163koRBrLYyYzBIWbGUulUrY3d1FsVh893rlVYL4vo9arYZ2u41GozH3IUCXY2xVfCh24iplfZgQBu7sW08vJiZtw/c/efjFvKwhl8thd3c3ukj1PVKwFwvSbDZx9eMH3E5nYRH2VsUdWe/i/amoUiwWkc1mUS6XUSgUPpYgUkp8/foVzWZz5gQdGzN5r4gEIZDP5/Hl9HR0Ld4bCfKsWFWv10frnWYVX5SDvANqvzykRNd1cXFxgW/fvqH7RiOxz1rNW61WISwrGn1i5CDvjbp6wrIsDIdD9Ho92LaNx8dHHB8f4+DgYKWnQy4dQbrdLjqdzvTlMRMFFiFvjQSi44jU8iRhWahUKvj69Stub29XNhq6tCCPj48zT+PT6xNC3qX+COfOovYXjnZaljXa0HV5iX///ReDweB9BJFSotVqxSTQb3flndvkPQWJjmjCeKJRnWemJp5rtRq+fv0K13XfXhDbtqdvI9IOV+MlLOQ9a5DoEqBQiNjFQFpW4zgOrq6uXlXALyUIL3wkiYkuE1lNs9nE9fX1i49QtZYxtq32Y7AQJx+5eJ+MKGF7rdVq+PXr19sI0uv10LDtkR98ByQJRXwoi17MV9XdkqsWxPO8qNbgSBX54HbERrcmpx4eHh5WL0jrBdYR8ptyrHERrwmjRrbu7u9HHf6qBAmCgLegkuSmWUoWbWnUc0e0Fi416ff7GPT7sRDGZSUkCcX65H+rn/SfOXloPVWgR2KwSCdrgL/KFEvNQvIQBbIuaVdH38f0WkHUbkFqQdaFRqPxrI5+riDq2gC1OIyThCTB4SMWRZ5ze6/1ZP2h/h98zCS5VXssatjhxPerBFHDYWqYTGomEpJMT8YrfV8tSGz+Q03b8xmThBbo+ux6q9WC4zgvF0QdAjf1cz5rktDIoTIhtWV32Shizas/HDUcNnHrKyGJjSLa941GA319Evw5gjiOM5aBe85J8u2I19NSwvO86ZNAlxUktkCRYpCk+xHPt6LOfnIb+VKCSCnhtNvjoga8+JKsQQ2id/hh21Y3DjxLkCAI4DhO7MQIPY8jJKGWRB2+lBIivHZj6qyFpwRR152pgxj0c7AYRcg6RBNIGR2K3mg0Fh4PNCXI1GnthKwxjuMsXAJvTdr13NWOhCSd7oKzs2KCeJ6HzisP2iIkabjLCtJqtXhhDTGOjuvOra9jgjC9IiZSr9fnHiwXCRIEwbNPfCBkLQivJ18oyGAwiIZ4CTGNeZuoIkF83+c8BzGWJyNIdEADZ8uJSTxxmEMkiKo/GEWIafUHMDqWdFbbtwAgWFCkEGKGJ3LmSJYFjE5QrNfrfErE0CxrlGbN2kBlAUBPK9BZgxBTmbVo0YpV8JSDGMysvSFW7A/0jSWEmJFfRW1+1lUfFgDc3t5OVfWEmEZnXgSR2j5dQoxCu6151mQ5LzgnRDtYbrJQt+J/j1GEGBpFQiYX7EaCSPDkREImBYmuYFOnPRBiWnoFLTjMFSS67JCSEEPTK2B6Np1FOmEQ0Yr0yTWJFotzQsY0m83oTDhGEEKmMq741R+xiULGEWKqFHomNSWIXsUTYmghMrNQt/RqnpIQU+XQz4PTh3pZgxCiJAlTrcWCcESLGE6tVotuef5/8kxtmv5FRF4AAAAASUVORK5CYII=";const Xe=e=>((0,i.pushScopeId)("data-v-6715747b"),e=e(),(0,i.popScopeId)(),e),et={key:0,class:"event-wrapper"},tt={class:"header-text"},ot={class:"event-card-wrapper"},at=["src"],it=Xe((()=>(0,i.createElementVNode)("img",{src:Ye},null,-1))),lt=["onClick"],nt={key:1,class:"event-wrapper"},rt={class:"header-text"},st=["src"],dt=Xe((()=>(0,i.createElementVNode)("img",{src:Ye},null,-1))),ct=["onClick"];function mt(e,t,o,a,l,n){var r,s;const d=(0,i.resolveComponent)("profile-pic"),c=(0,i.resolveComponent)("buzz-event-card");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(null===(r=e.displayAnniversaries)||void 0===r?void 0:r.length)>0?((0,i.openBlock)(),(0,i.createElementBlock)("div",et,[(0,i.createElementVNode)("div",tt,(0,i.toDisplayString)(e.$t("Upcoming Anniversaries")),1),(0,i.createElementVNode)("div",ot,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.displayAnniversaries,(t=>((0,i.openBlock)(),(0,i.createBlock)(c,{eventType:"anniversary",name:t.name,value:t.annivesaryYears,month:t.annivesaryMonth,job_title:t.jobTitle,key:t.employeeId,"data-test":"anniversary-content"},{name:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",{class:"name",onClick:o=>e.onClickEmployee(t.employeeId,t.name,t.workEmail,t.jobTitle,t.location)},(0,i.toDisplayString)(t.name),9,lt)])),default:(0,i.withCtx)((()=>[t.empProfilePic?((0,i.openBlock)(),(0,i.createBlock)(d,{key:0,size:"small",onClick:o=>e.onClickEmployee(t.employeeId,t.name,t.workEmail,t.jobTitle,t.location)},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("img",{src:t.empProfilePic},null,8,at)])),_:2},1032,["onClick"])):t.empProfilePic?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createBlock)(d,{key:1,size:"small",onClick:o=>e.onClickEmployee(t.employeeId,t.name,t.workEmail,t.jobTitle,t.location)},{default:(0,i.withCtx)((()=>[it])),_:2},1032,["onClick"]))])),_:2},1032,["name","value","month","job_title"])))),128))]),e.showSeeMoreAnniversaries?((0,i.openBlock)(),(0,i.createElementBlock)("a",{key:0,href:"javascript:void(0)",class:"view-more","data-test":"seeMoreAnnivesaries",onClick:t[0]||(t[0]=t=>e.viewMoreAnniversaries())},(0,i.toDisplayString)(e.$t("Show More")),1)):(0,i.createCommentVNode)("",!0),!e.showSeeMoreAnniversaries&&e.viewMoreLimitAnniversary>5?((0,i.openBlock)(),(0,i.createElementBlock)("a",{key:1,href:"javascript:void(0)",class:"view-more","data-test":"seeLessAnnivesaries",onClick:t[1]||(t[1]=t=>e.viewLessAnniversaries())},(0,i.toDisplayString)(e.$t("Show Less")),1)):(0,i.createCommentVNode)("",!0)])):(0,i.createCommentVNode)("",!0),(null===(s=e.displayMostKudos)||void 0===s?void 0:s.length)>0?((0,i.openBlock)(),(0,i.createElementBlock)("div",nt,[(0,i.createElementVNode)("div",rt,(0,i.toDisplayString)(e.$t("Most Kudos")),1),(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["event-card-wrapper",{minimizedHeight:e.windowHeight<750}])},[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.displayMostKudos,((t,o)=>((0,i.openBlock)(),(0,i.createBlock)(c,{eventType:"mostKudos",name:t.name,class:(0,i.normalizeClass)({active:0===o}),value:t.kudosCount,job_title:t.jobTitle,key:t.employeeId,"data-test":"kudos-content"},{name:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",{class:"name",onClick:o=>e.onClickEmployee(t.employeeId,t.name,t.workEmail,t.jobTitle,t.location)},(0,i.toDisplayString)(t.name),9,ct)])),default:(0,i.withCtx)((()=>[t.empProfilePic?((0,i.openBlock)(),(0,i.createBlock)(d,{key:0,size:"small",onClick:o=>e.onClickEmployee(t.employeeId,t.name,t.workEmail,t.jobTitle,t.location)},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("img",{src:t.empProfilePic},null,8,st)])),_:2},1032,["onClick"])):t.empProfilePic?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createBlock)(d,{key:1,size:"small",onClick:o=>e.onClickEmployee(t.employeeId,t.name,t.workEmail,t.jobTitle,t.location)},{default:(0,i.withCtx)((()=>[dt])),_:2},1032,["onClick"]))])),_:2},1032,["name","class","value","job_title"])))),128))],2),e.showSeeMoreMostKudos?((0,i.openBlock)(),(0,i.createElementBlock)("a",{key:0,href:"javascript:void(0)",class:"view-more",onClick:t[2]||(t[2]=t=>e.viewMoreMostKudos()),"data-test":"seeMoreMostKudos"},(0,i.toDisplayString)(e.$t("Show More")),1)):(0,i.createCommentVNode)("",!0),e.showSeeLessInKudos?((0,i.openBlock)(),(0,i.createElementBlock)("a",{key:1,href:"javascript:void(0)",class:"view-more",onClick:t[3]||(t[3]=t=>e.viewLessMostKudos()),"data-test":"seeLessMostKudos"},(0,i.toDisplayString)(e.$t(" Show Less")),1)):(0,i.createCommentVNode)("",!0)])):(0,i.createCommentVNode)("",!0)],64)}var ut=o.p+"images/year_celebration.png",pt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYAAAAF5CAYAAACWWv1uAAAACXBIWXMAAAsSAAALEgHS3X78AAAVVUlEQVR4nO3dzXEbSZoG4FTH3EUPpLVAOi5O4h4WV3EMWIhtQXMsGLYFw7ZgKFhAXXFZ6oTjkh6QHkgWcKPUWd0lNiiSQKEqs77niWBoJkYjJgpZ35uZ9ZMv7u7uEmWYzReHKaXD3JiblNLlerW88fX0azZfvM3H+SD/w81xvpzK5yvFbL5oju9RSul1bpI+XRgBUIDZfNGcJGcppVcbWvMxpXSyXi2/hDswPcuFvznO7zb8y7f5OF9U/SELMZsvmuP8ywOt+S2ldKpPj08AjOyRE6XVFKdDI6ft5eLfjPJfPvKP/LxeLc9L/iylm80XVymlN4808zr3aSEwop/CfvICzOaL4ycU/5RnBkamW8pLEU8p/o1/56U4tpAHNI8V/5T/jqAdmQAYSS5KZ8/47W9m88XppA7CcE6fWPxbCtMW8izrKQOa1nthOy4BMJ6zZxalxslsvnj9hL9HtkVRarwStlt5zoCmtc3/h54IgBHkUc+HLX7zyzya5em2LTAneZbGE+QbGTZdXH9MM7M9cYzHIQDGsUsR/2Da/DT5Gss2RSnlsDU6fYItljPvOxW24xAAA9uxKLUUpkfkgrLrbOlDXkLix04euIX5qcxsRyIABtRTUUp52nxczQcfx65FqSVsfyBfk+pjCecXYTs8ATCsvopS48y0ebMei1LjXV7fZrPn3mH1I8J2YAJgILlY93mx62XP/96U9FmUksK02Q43MzzknetbwxIAw9nmts/H/NNtod/bQ1FKbgt90D6OiWcwBiQABpCLdN9FqaUwfW9fx8NtoR093cywySu3hQ5HAAxjn0sIbgvNdrgX/SncqfK9fR4Lt4UORADsWS7O7/f8axSm3+17rf4XS27f+vRpjzczbOL61kAEwP4NUZzDXzzLSxL7LEqt0GG7h5sZHmLJbQACYI9yUd7XksR90WcBQ33+D8FnASd7uJlhE09iD0AA7NeQRfld1IfDBliSuC/knSoDjv5b0cN27wTAngw8+m+FmwWMUJRS4CW3oUb/XdFntnslAPZnjI77KuAsYIyilKIVppGCNpkF7JcA2IORRv+tMIVpxKKUAs4CxgraZBawPwJgP8bssJFmAccjFqUU5VbFkYM2mQXsjwDo2cij/1aUABi7AL8PUpjGHP23zAL2QAD0r4SOOvnliQHv+3/MpAtTAaP/1pHnAvonAHqUR4Njj/5bUx8xlfL5pr48cVTA6D95Ong/BEC/Siq676ZamPLspoTRf2vKS24l9WkB0DMB0JM8Pd3XGz+3NdVZQGmFYJKFKb9cr6SgfWknvH4JgP6UWAQmt26aZzX7frnec021MJX4mcwCeiQA+lPiyfIyr+FOSakFYFKFqdCgTXk/bHsH90QA9KDAqXLX1EZMpY60p1aYSp7RmAX0RAD0o+STZTKFKQdtCXekPGRKy0Alfxab9PdEAOyo4Kly11QKU+mfYxLHufAZbXIxuD8CYHc1dMTqT5Z8Mbv0oH2Zi2ftavgMZgE9EAC7q6G4TqEw1dJ+ATCM954M3p0A2EFeWy95qtwlAIZR9XGu4DpLl1nAjgTAbmpaWqn2ZKlk+adV+2yrprYLgB0JgN3U1AFfVvyCuNpOdAEwDMtAOxIAW8p3/9Sy/NOqNQBqa3eVxzkvaday/NOKuDVnbwTA9mq8t77W5wFqa/erSl/EV2Mx9VTwDgTA9mrseLVOl98U0IbnqjEAhFYwAmB7ZgADqPiV1jW222g6GAGwvRpH07Wt76ZKC2mquN0EIgCAmgnaHQiA7V3V2nCYkNruxCuKANjelwrb/LWANkRRY/+o0efoB2AXAmB7NxW2ucZZS43HOZkhUgMBsD3FdADr1VIADEebgxEAW1qvlk6W4VxX1t7b9WpZ4xKQPh2MANjNp8rae1lAG7ZRW7sd5+HUeqyLIAB2c1FRW28rnbU0zgtow3NUWZTyctttAU15quuKlwiLIAB2c1HRnTU1hdV3cnDVUpi+1nysU0pnBbThqWobGBRHAOwgr/PWcrLXdGJvUkv7Lypd/2+dG9TEIQB2d1pBGz9OYKp8XsksoIb+8KAcXjWE7RT69OgEwI5yJ/yt8GZWXZTSn4Wp9M8xlaJ0VkHYVt+nSyAA+nFa8LT5t6mMlNar5XnBT3423/9JAe3YWQ7bkj/Lr0b//RAAPcgnTIn7A19PcKR0VGjYHle+9v+d9Wp5UejMtrnzx+i/JwKgJwWeMF+nVpTSn2F7WFgIfMzf/6SsV8uTwmZcX20E3y8B0KN8wnwspDnHFd/3/0P5c5Uy4/q0Xi1LnP315aiQJ7Gb4n9o6adfAqBnuRiMHQI/T3FE2pU/399Hngl8KnTprzedGdeYIdAWf6996NmLu7u7SX2gUszmi+aC5YeBm9Mu+4S5P3o2X7zNT94OvdvZx4mP/L8zmy8O8t1BQ/fp6ynPZscmAPZoNl80S0L/GujXhT1R8r7BFwNtHh8uZLtm80VzAfafA/26ZiZ9MrXrWCURAHuWR6jNyOndHn/Tr+6MGKQ4KUi/H+fD/GDevnbjus0h60VveyYABjKbL47zLZl9njRNQTp1YexPeTZw2vNSRXOczyxDfC8H7kmPy2+3uT97x89ABMDA8ujpeIcCdZtHX+cK/8M6QXC0ZYG6zctKZ47zw/K1geMcBNsObj7l/uzdPgMTACPKYdD8NMtEBxuWia7z3rJX+edSMXq+2Xxx1DnODy3FXecd0y7zcTbaf6a83Nnt05sC4Wu3P+djbY1/JAIAICjPAQAEJQAAghIAAEEJAICgBABAUAIAICgBABCUAAAISgAABCUAAIISAABBCQCAoAQAQFACACAoAQAQlAAACEoAAAT1N1/8fuTtHl/nn6E0W+xdRdpiL+9J225FOJSbfJxDbRuZt3x8nY/3EP7YDtW2kfthS8ge9bAReV+u82bm5yUep111NiJvft6M2JSveeP406nu1ZwHMscF9OlPuU9fjtiGyREAPZnNF03h/2dhzWqC4HhKI9VckM4f2HB8TP9Yr5ZnhbVpazlkm+P8vrCmfW7CyIygHwKgB7P5ojlRPhTavGaUejiFEJjNF81I9N8FNOUhH9er5XGZTXu6XPwvR55d/ch17tNCYEcuAu8oj/xLLf4pT9sv80ldrbz+XPoI+8NsvjgpoB27uii4+KfcNktBPRAAO8hr/qUt+2zysoLi+Zizkdegn+q05rDNS2zvCmjKY97kGSE7EAC7Oa2orR9qLUx59F9DUUo5pGouTDX16ZraWiQBsJsj7R1Ebe2uMgDyAKGWoG28yoMDtiQAtpQ7Xg1LEl1D3ivfp9ra/abS2VaN/aPWQU0RBMD2hnzAK3Kb04APHvVJm4dhBrADAbC9GjteTdP7rtpmWrWqcdZS9d1tYxMAQMtoOhgBABCUAAAISgAABCUAAIISAABBCQCAoAQAQFACACAoAQAQlAAACEoAAAQlAACCEgAAQQkAgKAEAEBQAgAgKAEAEJQAAAhKAAAEJQAAghIAAEEJAICgBABAUAIAICgBABCUAAAISgAABCUAAIISAABBCQCAoAQAQFACACAoAQAQlAAACEoAAAQlAACCEgAAQQkAgKAEAEBQAgAgKAEAEJQAAAhKAAAEJQAAghIAAEEJAICgBABAUAIAICgBABCUAAAISgAABCUAAIISAABBCQCAoAQAQFACACAoAQAQlAAACEoAAAQlAACCEgAAQQkAgKAEAEBQAgAgKAEAEJQAAAhKAAAEJQAAghIAAEEJAICgBABAUAIA9uPAcaV0AgD2463jSukEAEBQAgAgKAEAEJQAAAhKAAAEJQBi+Rr9AAzoqsI23xTQBgYkALZ3XmFBPS+gDdv4rbL2XqeULgtox3PV2KfPCmhDtV7c3d1FPwZbm80XBxXd7/1lvVrWOCr9ZjZfvK3l4ar1allj8f+msj59s14tzVp2IAAAgrIEBBCUAAAISgAABCUAAIISAABBCQCAoAQAQFACACAoAQAQlAAACEoAAAQlAACCEgAAQQkAgKAEAEBQAgAgKAEAEJQAAAhKAAAEJQAAghIAAEEJAICgBABAUAIAIKi/1fyxZ/PFQUrpbUrpdf5J9/4zQF9u8k/jqvlZr5Y3NR/dF3d3dwU04+lm88VRSqn5OUwpvaql3cAkfU0pXTQ/69XyorYPWE0AzOaLk5TSiaIPFOo2pXS6Xi3Pa/mCig+APOI/U/iBSjRBcFLDjKDoAJjNF02SfiigKQDP9SmldLxeLb+UeuSKDIB8cfcypfSmgOYAbOs6h8BViUewuABQ/IGJaS4UH5YYAiU+B3Cm+AMT8rIZ1ObBbVGKCoB8wdeaPzA1L/PtokUpJgByOlZz+xTAM73Lt7MXo6QZwElOSYCpOi1pKaiIAMgHpKhkBNiDZpB7XMqBLWUGcGT0DwQhAO45KqQdAPv2ZjZfFPHCylIC4H0BbQAYymEJR3r0AJjNF2/HbgPAwMwAMu/uB6IxA8jMAABGYEtIgKAEAEBQAgAgKAEAEJQAAAhKAAAEJQAAghIAAEEJAICgBABAUAIAICgBABCUAAAISgAABCUAAIISAABBCQCAoAQAQFACACAoAQAQlAAACEoAAAQlAACCEgAAQQkAgKAEAEBQAgAgKAEAEFQJAfClgDYAhFNCAFwV0AaAIRVR9/5WQBtuCmhDib52OsnNhuN0uaHNr/NP12H+zwcppTdhjh67+HqvQG3qaz/S7Yf63WZF1L3RA2C9Wt7M5ovblNKrsdsygtvcES47Rf6mOSb7aspsvmhOyLedk/Qw/xnx+Ef2udPnrvJS7NV6tdzbkuxsvmgHI4c5GN7mn5cBv4fnhupevLi7uxu9EbP54jyl9GH0huzXdT7RrvKJVkQHaHWC4bBzYgqF+rWj+ctO3ytq1h2w792uV8v7M/VRlBIAzRf/v6M3pD/dk+6ytGL/VLP5op0htD8CoXxN37to+996tazyGlsOhW7fm9Iy0q/r1fK0gHaUEQDp9y/8qvIv+XPtBf8xnUA4yn9GnLqX6FOn703ypoocCEed/ldz3/uPUmZhJQVAbbOA23zSXeQTL9ztrPk7O5rgCK107Sg/ct9rlomOc/+raWb6cb1aHhfQjm+KCYD0+5faFNR3BTTlIdftiTfVkda28uygDYP3dX6Kov0x4FivlhfRD0ZXDoOj/FPyQKQJ7tclBXZpAXCQ70ooaXrXFP3zfOK5ZfUJJjZdH9NtHnCcG3A8TWcgclTgYPLvpYV3UQGQ/kzzy5GLxqfOaEvR39FsvjjqnJTC4MfaAcdk1/OHUthA5B/r1fJsxN+/UXEBkMYJgXZNtS36Xk+xJ53rBrWt3e7Tp856vgHHnox4zarI4p9KDYD0Zwic7/GLuu4U/EnetVO6wNcNbjsF33r+CO71vX3d0dYMLI9L/o6LDYDWbL5o7pc96eELai+iGeUXKo/Q2p+SbwZ4rm7fM8ovUKfv9XUh+WNK6bT077r4AEh/ruUd55+nfjlf75101lMrk0/K7hOitSwZXd97EFDBr8gOD6G1S8nFF/5WFQHQladu7ePi7SPkqfM+k5v8uLuCPzGdVwa87bzPaOx3yXzuvE+nuFd8sLt7r6pInT/bdyl9qXWQWV0AwH2dE7Q7IDjs/LVtl5M2vZF1kJf2wRAEACHlmwwOOp9dQSccAQAQlD2BAYISAABBCQCAoAQAQFACACCo0TeF58c697i32s3c7/vSuWe98cXDcOxiQ987fOSf6z4E57baCrgNtAD3njR83fnp69UH1+3Tip2guPI+JAboe+3DdDedJ6ZvDE7KIABGUNA7bm7bMMjhIBQmrrD3K32+1/fMGAYmAAaQnzo9LHSXovuu771ETyBUrLNdYg1vWL3t7Muh7w1AAOzBxLZE/Nx5d71pe+HyyxK7G5/U3PfszLdnAqAnnVH+c15ZXZvbzqb43npZiNz3jkfY6WpI+t4eCIAd5L1uD4Nub9i++/zCdH14wfdZbvf6uLC5024EwDN0Noqwwflf2dd2jzrLilNY2unbdScMLFM+gwB4xL011Uj71u7CCdmDwHsm7+K2MzswM32EANigc+dEX/uDRuaEfAZ9r3dmpj8gACztDO1z586O8LODid0xVrpmZnrujrY/hQ2Azl07ptfjCbdx/w4bjtOv8HcVpUgBkAt+t+hHu2unBl87T4ZO4snkzpO3b/W7on1q+16kQKgmADpro63ul3SV93ftviTtsLNJeOlPQPKw+6+rKPIlY7l/vu4U+9dG91W7ze8uauvMVX6P1iZvO/XndQ6R0xo+fE0B8MX6KB3dF9ylzgna+1tQ770V8/WGH6N6un6tJQCqeB10Hl0p/nS1o+u/zO5m80X3v7YjuefS55i8WvYDOCigDdTplRE6bGZHMICgBABAUAIAICgBABCUAAAISgAABCUAAIISAABBCQCAoAQAQFACACAoAQAQlAAACEoAAAQlAACCEgAAQQkAgKAEAEBQAgAgKAEAEJQAAAhKAAAEJQAAghIAAEEJAICgBABAUAIAICgBABCUAAAISgAABCUAAIISAABBCQCAoAQAQFACACAoAQAQlAAACEoAAAQlAACCEgAAQQkAgKAEAEBQAgAgKAEAEJQAAAhKAAAEJQAAghIAAEEJAICgagmAqwLaADApVQTAerX8UkAzACbFEhBAUAIAICgBABCUAAAISgAABCUAAIISAABBCQCAoAQAQFACAKBf1by6RgAABFVFAMzmi9cFNAPgKd7WcpRqmQEcFtAGgKeoZsD64u7u7sl/eTZfHNxPt/VqebmPhnV+51FK6Tyl9HKfvwegR/9o6tZT3mQ8my+amnqw6X/bd339YQDkhh3nov9unw0BoBfX+UJ0Ex4XPwqhjQEwmy+aJZdTRR+gal9TSmfNz6Yg+EsAzOaL5i//4jsHmIzblNLRerX87hbVPwIgr+83U4Y3vnOAyWlmA4fdEOjeBXSu+ANMVnMjzWW+tvvNtwCYzRfNev973zvApL3M1wS+efGf//0/TRr8n+8cIIyf16vl+U/dNAAghOb5qm9LQG71BIjl25J/swT09EeBAZiK//I2UICgBABAUAIAICgBABDTzU/5HREAxHG7Xi2/BcCpLx0glG/7DPzUPA2W3x8NQAzfBv7tNYDj/KY4AKbtt2b5548AyK8HPfGlA0zadXfZ/4+7gPJS0M++e4BJus77AfyxM9imHcEO894Ar/QBgEloln3+ssrz0J7AB3lJ6FgQAFSpua570Sz5tGv+920MgK68e0wzKzjIf8I+XTq6sJNmiefy/v6/f5FS+n/CyBmSunj5mgAAAABJRU5ErkJggg==",vt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYAAAAGACAYAAACkx7W/AAAACXBIWXMAAAsSAAALEgHS3X78AAAcLklEQVR4nO3d220byZ7H8fLAjwvQG8C2dSKQHIE0EUgTgeQILD9vAyMDfB86AksZSBGMFMFIERyRCRwT2HctmlVt3rqbfavr//sBjAOcPSuRJbJ+Vf+69Lu3tzeFA/Lsg1LqQil1rZQ6prmAIM1X39Hp4p4/TzsEwCF5dmM6/knYLxSA8bQasE0XP2mQZgRAnTw7UUrdMuIHorRUSp2p6eKZP189AqCK7vwfGfUDUSMEDvgt6Ffng6730/kD8ZuYWTxqEAD7ZnT+QDKOzToeKlAC2qRH//8J5wUBGEFRCjpiUXgfM4BtFyG9GACjmPDdrkYAbDsL6cUAGA0BUIEA2HYS0osBMBoGdxUIgG3s+QfSNDFrfNhAAACQghn+DgIAAIQiAABAKAIAAIQiAABAKAIAAIQiAABAKAKglGccFAEgCgGwxiERIGXTxSN/320EgPp1CyhXxgIpY5a/533j/1V3jCcb92icJDpSPg3gNQCw68I87AlG9fMAdFIWD0I/p6EAJGSulHo2/1JVvLfXNo/C3A4APeIvnoh1ySceAKJWhN39qk+fLl6r3shuADxzIyYAJOf7ap1z56lo60XgPJvR+QNAkr6s1j92rsTWAaBr/l/4uwNAso53F8HLGQBbIAEgfccqz3719+/e/vd/itH/3/zhAUCEpVLqqFgPKGYAV/zNAUCMSdnv/8aWTwAQpzgUx1UQACDQ6vYDAgAAJMqzIwIAAGQiAABAKgIAAIQiAABAKAIAAIQiAABAKAIAAIQiAABAKAIAAIQiAABAKAIAAIQiAABAqPeW3/ZXpdRz8E07XejHpOXZibkm9U/vrwnAmIqHot9H2KJWn9VePBHszdLPflDTxYWln21Xnt3ynAQgGXM1XRxF+WbyrHhwyw9LP/13myWg8Ef+9WJ+7QC2PUbcHq8Wf/YHmwEQZ+JqBACQDpudaMxOCAAAEIpdQNUYMQDpiLkEZJXtXUBxmi5eVZ5Jb4VUPZkOoSjz/SzqoMVU2Pw7U0pNpDcQ5CAAIMHSbKebqeniZ8X7XW8P1LsubpRSH/lkJIMZfQ1KQPWeQn1h6ORhtR41XdzUdP7bpotbs2XwG82ciGJGj0oEAFJ2tzqL0qbj31UEhlKf+XREbym9AZoQAPUYNcStOIh4NegdFLMBfZod8WJLdwMCoB4BEK9i1Des8y9NFzPKgUgVAVCve9kAoahb7O3rhr9stNgC2oAAqMfUMU7ljp/x6MsCmQUgOQQAUjP26L/ELCBODOQaEAB1yiuiEZPxR/8lZgGxopTbgABASmyN/kvjLCzDJTZzNCAAmr2E/OKwxd7ov6QPFN3R7BGJ/xDYmc0fTgA0Y/oYD9uj/xJrAfGYS2+AQwiAZiwgxcH+6L/ELCAmlH8OKALg/4J+hX4xA4iDq9F/iVlAHPj+NnstAuC/LP3wD5Z+rkvsBAqfu9F/iVlALJjBN3u1WQKy9iR7YIPr0X+JWUD4UigBndj84ZSAmnAWIHTuR/8lPQt4iKy9pEkhAKxWUmyWgFLBdbLh8jX6L/kJH7TFInCzn3Z3AeWZ1T2sjlBHDJO/0X+J08FhS+NBMEfWfvJ08cw20MMYRYTJ9+i/xFpAmFI5xGn10aS2A8BeerlDAITH/+i/xCwgVGwBbbYqbRMAh1ECCk8oo/8Ss4DwxL+Bw24JfdWv/WZ5qsQMAGO7M8/rDYeeBfD84LAwA2i2ap8iAK4t/pL4A2C6YAbgz9yUV74rpb4ppT4Nfs6vLfr5wf9tguCbOSj2xC4yb1L43lqfAby3+AuU7UMMDs1tL8YI92JmWs/m32uUwavLUrd7/32efTDfhSPz78zs7+awpD0pBIDNMwCrGcB7yyWOyerDH1a9to9XAmCw+UYn/9PUaF8T2arXTH/+q2vSeVYGw8lGSBAMwywT6HOU5QG0mQEUX8A8s/h7Vm8i9gWZ4vWfBvA6YvJiRsOPlNEa6LYp/t1v/Y90MJyY2cLFajCFtlL5vNksoW+VgJ4sdnApBAALwe09rZ6cJWFkb9M6GG5NCalYq/sz3Tc8qlQCwFbV4dcMqdwGavPLyk4gOT6r6eKMzn9kxZdV73z6xENOWon/8+dgC6hyFADxLwRzKVwbf5idMLBFzwpOCIGDUpgB2Ow3f/Vnv+3+FxakUjvn+cD1vqrp4r7v/zM60FP3C5qsEQHQ7NeAvwwAuw2WxqVwlDWqPanpglsxXdIzgW9y3nAn7AA6bGcGoBvM5rQyhfMA7GSpRufvx4xDZpXi/57qRX9bW4GXm2t0m3cB2Wy4FGYArAPsm1P68UQP2mj7fSl8T50sAKudALDZcJSA0kQH5Bftv48rIJpt9fOuAmBiDrbES0+bmHJvY1bkF+2/L4WBms1F/poAsH9aM4WdC6wDbOPGRZ/SWOwcV+ynzvPsyOq1Mztb2nefB2DzwRYpBAAjLiBcKTyYx2Y/ubeVfTcAbNYUj83qdsyYAQDhov7fbG8AuxsAtke4sc8CCIBtqVz3HSddLsBa7OWfYoB8bvE3HAgAXT+zudAZdwCwELwrhd1dMeNE8LbYS7R2/54VW7arnglsswx0nkAZiHWAtXNGoV7ZfJpfbJYJXEJo8+9ZuT5SFQCUgZpRBtrGSWAf8uyKhxRtSWH3j80HAVUO7F3PANTqrvi4MQPYVswCKEW4pDsLgndb7N9L27O5lgGg9xbb3E51GnXZgKuhq9xGf9AvFrqEes8TwvbE/r20OTCe15XHqmYAilnAQVwNvW2y+gISAnbpzv+RZwZXircEpMt5NgO9tj8nAPphFrCPELCJzr/JS+Snom2Xf2of1FQdAHq6YHOU+9GkXqwIgGqEgA10/ofE+33Uz0qx+XedN12PUTcDUE2pMZKYA4CdQPUIgTHR+bcR8/fxxvLPb6zm+AyA02ifFKZnSDyXtR4hMAY6/7binAHo74ftR+Y29uP1AaBrag82XtEGykDpIgSGoPNvq3aHSwRs1/4byz/qwAxAOZgFXEa8JZQAOIwQ6IPOv4tYR/9Hq/7ProP9d3MA6LsjbN99Y7sGZgsB0A4h0AWdf1exfg9d9HsDA6DlDxkozlkA6wBdEAJt0Pn3EV8A6LVP26P/pzalsTYB4OLIeazH2pkFtEcINKHz7yPW+n8Qo3/VKgB0A9teDD6PdEcQAdANIVCFzr+vWEf/tnf+FDejjhQAmosReoxrAbZPTKeIENhE5z9EjN8/2yX1Tr+jXQDoC9Bs17tPozsdrLfKci9Qd0UI/BP5afDh6PyHimsGkGfXjq7wbj1gbzsDUI5G6LMIHxhDGai/mfAHytzT+fcW1/0/ul9z0Yc+dFkXaR8AuqZkexYwibAURBmov0kCFwP24+YUaMpi+97NHF3h3alc32UGoBzVr75EVR/W5TGeE4yuYn80qm/xBICbbZ/KbP3sVJHoGgAzR52di6AZE2UgwJ3loSsOAuOqP+v8e7oFgK65udgRdKzyLKZSEGWg/mJ/kHdfMd9f71tMo/8bRwu/87ZbPzd1nQEoh7OAPyMqBTED6E9mAMQ1gg1NHN833X/96ei39Rowdw8Ad7MAtUr6GHYF2X+ATrpkP2PZ5rO3Uxb+DED3W65KP71G/6rnDKD40t44ugfnY0TrAZSBupN+lxKzgO6eItn+eeNwi2/vcnm/ABj4Szs6j+TAEAHQndT6f0n6++8jhtH/xWo3oxu9R/9qUADoX+qq7PEj+PUAXdOVPqLtSvraCTOA7sIOAH2w0WXVYtDgeMgMQDl4os2mGNYDmAV0I30ETAB08xLB7Z/3jg58qT77/ncNCwD9y23fFFr6GMGIMbbzC77JDgBdy+YQYXuhj/5vHV/tMXgAPnQGUL4IVx/iY9PIYdJlIL7Q7TECpg26CDcA9Dqli9O+pe9jbCUeHgB6SubygS6XgR8SowzUzjKqy7zsIQDaOfiAc2/0VQ8/HP765VibcMaYAZTbQl3ug/8z4J1BBEA7dHwaIdhOmN8rvTnF9Wu7HmvwNE4AaC4XhJXZGRReCOgH6bMb6DDpC8Al6Tuh2gqv9Lt+noOrRV9lFn5Ha4vxAkAvCH8f7ee1E2YIMAtogwDQaIfDwiv/+On81djXp485A1CmLuV69DsL8IwAu4EOY+Srfq2hoZnLNcbD/D3J7dvYn5dxA0DXpVyPyMN7xiyHwtqg41vjTqBm4cyo/XX+L2atdVRjzwDKUtC30X9usxCfMUsZqN6Ske8W2qJeOIe//HX+S1sD6/EDQHnZFVQKaU0grGlrWNgBtI0AqBdGOdXvA/xvbK2B2AkA7cLToagwQoAropsQANtYD6nnPwD8dv7FQ96tDSbtBYDuAF1vDS0VIRDCCJxZQDX2vqONB++HBfXlbr46f2uln5LNGUB5Y+id1d9R78vq2gi/F8ixDgD053f0rzeWPHvq/AtntgPQbgCoVQhceSyFXJodQn5CQP/xfAUg6hQlQj04KD4bxS2z11E8eU6WpTlU6YcuI/vY51/66uLsg/0A0M48XpJ2vFpk87dNlFnAvjMvv7W4syXPXs29LcXg4HT1wCGl/jKfEV93TMXy7GuX/I3+9efgh8fO/85m3X+TmwDQI2E/X3rN3zZRroao4rbDK8K/GO0r9be5VrzKxNwx9erhc+LzuxEq9+tnxSywmBG6e5B7lReXa6fv3t7eXP2uclrl8ta8KndjXqbUih5R+PxQhejzmHeaVNILeDc9r+l9Mtvv7O7Q0a/x31Z/R3yK+27chuL6Ure6AYILRZXkyGXf5KoEpOkvvOv7gnZdejg5zNUQ++yVW4pOVT834t8D7mg/Xc0Y9DqBzc4o5KvNfXH7fSnWgIoKgf/O3/qi7y63M4CS/nK6fHhCna+uam1mannu5HfF49uox9uHjfgPeTAzx/EObelg+dvCa41ZsfjrZkFeL/zfBvK9/MPHorefAFCrxve5vWrT02qvre3j5nzZ6wwvBekv8s1q6699d6Y0NOzzomegPneZhKp40pX9GnieFQdVbwNpf/vl0Bo+A8Dn6bpdSxMCdhNY70DxOc0MVb+ZmP4MXZt/rr/I/YOAzr/Jv6wOxsIa9Sufnb/yGgAquBBQ1mcDutb4l5WfHb/2JRa/Hf+ubkHAhoAmxcnfC2s/XX//bgIK3jtzTsobvwGgggyBpflCj782oN/rKyO/WkuzE2NWeQhGT9vLf6G14cNqZFk1i9RrExcmsJgB1rNTB9fl11lAfYwKofNXQQSACnZK/GJGpONuAwxnATwG5T35HwL78h7ysnHf0RGdfivFU7+ORv2JdjcFDBFE56+CCQAVdF103HMD7PsGqoxXC1+XCEMstQXT+augAkAFWQ4qLc0UcjZKELAlFNg0zgGosNaGqoy77XkEYQWACjoE1GhBwJZQYNOwjjH8jl/53u1TJ7wAUMGHgBolCNgSCpT6bf1c1/hD3BSwKcjOXwUbACrI/bpVyl0r3feDh3EvEuBb95q4nkFfR1BGXa7CyfZ9UgOEGwCleHbNPJltgO2TPs9+siUUwrUb/esB4VVEW2nnpvMP+vGn4QeAiu4AVTkruD2Y/BwKgmyHD37psx9XkW2aePFxsVsfcQSACu7ujrbmZi3jvuGAEFtCIdXvlYOksA/8HRLUNs9D4gkAFcyd3X0tTRiUgfBq3hMHwyDR+s5/Xd45i7jTV+b7fR3qYm+duAJARbM43MbcPHD6JwEAgR7MtSgn5tkLMXsxd4gFXe+vEl8AlKifA/DP/RMGRxRvAKhf28Hu2UkDwDE3V8hb5vaRkGPTC0hHZjoJAC48rUpXkXf+KvoZwKbw7voGkBZ7V8V7kk4AqF/bKm8TWFQCEBY3j451LK0AKDEbADCOKLd3tpVmAKiktosC8OO7KflEucOnjXQDoKR3Ct1y8yaAlp7MqD+6ff1dpR8AJX1uIOT7wgH4NTcj/iTLPVXkBID6VRaacfIWwIalebZHUE/rckFWAJT0bqEZ6wOAaOM+6jVCMgOgpNcHbtg2CogivuMvyQ6AEkEASEDHv4MA2KSvm75mjQBIytzsBKTj30EAVNFrBNfmSUTsGgLi9GI6fTG7eroiAJroXUMXJgyOw32hADbctXokKwiA1tbloVifWASkrCzz3KZ2X49NBEAfeXZlgoBtpIBfd7XP3MZBBMAQ6xIRYQC482J289yzqDsMATCWdRicUSYCRvdiSjz3lHjGQwDYotcMykDgfAHQXfGkv0c6fXsIAFf0YbOz1aPk9H8yQwDWikNaz6bDf2QHjxsEgC/6rMHJRiAccWU1hCg7+/U/AVcvh4gACI2eKRxV/CMcEJNiW2ZRtvlpOvlX8++ZhdtwEAAx0QvNJ+YVH5mTyqwvwJdy7/26XEPpJioEQOz0mYQf0psBzt2p6eKKZo/bb9IbIHr6npOv0psBTj3Q+aeBAEjBdDEzW+YA2+am9IgEEADpuDJfTsCmCxZx00EApEJ/KS/MFjvAhs9s10wLAZAS/eW8lt4MsOKOe/XTwy6gFOVZsSbwRXozYDQvaro4oTnTwwwgRdPFNYvCGMncnFRHggiAdF2ZGxSBvpYs+qaNAEgVi8IY7opF37QRACnTV+ieEQLo4TNP2UofAZA6PYK7kN4M6OQ7O35kIAAk0Bd0fZbeDGjlzmwigAAEgBR6REcIoAkXvAnDOQBpuD0U1YoL3igVCsMMQBo9E/gmvRmw5YUL3mRiBiBVnhVBcCm9GbDq/M/Y6y8TMwCpdK2XNQHZHuj8ZWMGIB1rAlKx4AtmAOKxO0giOn+sEADYDAFODKfvO50/SpSAsJZnxZW/xaGxCa2SpM+c8MUmZgBY09dGnHGLaHKKmd0fdP7YxQwA+/Lsg1KquAjslNaJ3txc6cytnthDAKAeTxaL3RP3+aMJAYBmeVZcD3DLukB0vnOpGw4hAHCYXhwuQuCY1gre0jzIhbv8cRCLwDhsvTj8ndYKWlHyOaHzR1vMANANJaFQfVPTxY30RkA3BAC607uEihA4p/W8e+HZveiLAEB/zAZ8Y9SPQVgDQH+61nzE2oBzRa3/X3T+GIoZAMahdwrNODxmVXGo65pFXoyFAMC49PXSxcj0Iy07mqUJ1xmHujAmAgB25NnNarTK+sBQd6tAnS5e434bCBEBAHv0bqFrgqAXOn5YRwDAvnUQXFEaOoiOH84QAHArz4og+ItW3/NgFnjp+OEMAQD38qw4O3BJy/8yV9PFUSCvBYJwDgA+MMrdRnvACwIAAIQiAABAKAIAPpzR6ls4PQ0vCAAAEIoAgA8faPUd+qwE4BQBAB94tOS+k9BeENJHAACAUAQA3MozFoCr0S5wjgAAAKEIALjGSLca7QLnCAAAEIoAgGuMdKtxGAzOEQBwjf3udTgLAMcIALjGGYB6nAWAUwQA3MkzOrhmtA+cIgDgEg89aUYJCE4RAHCJEW4zFsjhFAEAlwiAZrQPnCIA4BIloGYTdgLBJQIALrED6DBmAXCGAIAbXALXFu0EZwgAuMLIth3aCc4QAHCFjq0d2gnOEABwhdJGOx9ZCIYrBADs0x3aR1q6NcISThAAcIEOrRvKQHCCAIALdGjdEJhwggCAC3Ro3fBsADhBAMAFOrSuODcBBwgA2EVH1hftBusIANh2QQv3QgDAOgIAttGR9UPZDNYRALBH7//nAri+8ozZE6wiAGATHdgwzJ5gFQEAm+jAhiFAYRUBAJvowIYp7gXiITqwhgCAHXr754TWHYwQhTUEAGyh4xoH7QhrCADYQsc1jlOuh4YtBADGl2cnXP88KsIUVhAAsOGKVh0VAQArCADYQIc1rnPKQLCBAMC4KP/YQqhidAQAxkb5xw4CAKMjADA2Oio7zjkUhrERABiPvryM8o89hCtGRQBgTHRQdl2n/Obg3ru3tzeaHcPpXSr/oSWt+6Smi+fE3yMcYQaAsbD46wazAIyGAMBYCAA3LjgTgLEQABhO3/zJk7/cmLDWgrEQABgDo3+3KANhFCwCYxgWf335XU0XjzLfOsbCDABDMRr1g1kXBiMAMBQdkR+XnAzGUAQA+suzK07+ekX4YhACAEPc0HpeXbMlFEMQAOhHb/1k9O/XhFkAhiAA0Bej/zCwCI/eCAB0p0f/p7RcED6atRigMwIAfTD6Dwt/D/RCAKAbRv8hYhaAXggAdMVoM0z8XdAZAYD2GP2HjFkAOiMA0AWjzLDx90EnBADaYfQfA2YB6IQAQFuMLuMw43Qw2iIAcJgeVTL6j8OEw2FoiwBAG4z+43LNTaFogwBAszy74c6f6EwIbbTBE8FQT9eSX02Hgvh8UtPFM3831GEGgCYzOv+ozaQ3AJoxA0C1PDtRSv1D60Tvs5oubqU3AqoxA0AdRo9pYFsoahEA2Me2z5SwIIxalICwjYXfVLEgjD3MALCLhd80sQ6APQQA1vR9P5e0SJKOVZ5xQhhbKAFB06WfZw59JW2plDpR08Wr9IaAxgwAJU78pm9CKQibCACUpZ8vtIQIp5SCUKIEJB2lH4koBWGFGQAo/chDKQgrBIBklH4kOzU3vUIwSkBSUfqBxgExwZgByHVL5w+l1D13BclFAEik7/o5l94MWPnIxX9yUQKSRl/z/Mh1D9jBtdECEQCS6Kn+4+paAGBbsTX0jPUAWSgByTKj80cNvTWU9QBRCAApdN2fi97Q5Jj1AFkoAUlA3R/dfFXTBUEgAAGQOur+6IfzAQJQAkrfLZ0/enhkPSB976U3QNL0VQ/Fl/hJelOgl2ueJ5w2SkAAIBQlIAAQigAAAKEIAAAQigAAAKEIAAAQigAAAKEIAAAQigAAAKEIAAAQigAAAKEIAAAQigAAAKEIAAAQigAAAKEIAAAQigAAAKEIAAAQigAAAKEIAAAQigAAAKEIAAAQ6j1/+ATk2ZlS6lop9UF6U8CJWzVd3NLU8Xv39vYmvQ3il2c/lVIT6c0Apz6p6eKZJo8bJaA00PnDNWabCSAAAEAoAgAAhCIAAEAoAgAAhCIAAEAoAgAAhCIAAEAoAgAAhCIAAEAoAgAAhCIAAEAoAgAAhCIAAEAoAgAAhCIAAEAoAiANc+kNAKA7AiANr9IbAEB3BAAACEUAAIBQBEAaTqU3AIDuCIDY5dm19CaAF3zuEvDu7e1NehuEIc+OlFIXSqniP08qXtOj+c9npdRP8787U0pdSmsqBOPFfC4/mM9jk0fzuX1U08Uzf8IwEAC+5VnR6d8opY5lNwQEKbYtz9R0MeOP7hcB4EueFaOme+r3EGy+mvUyI/CGNQAf8uzE7N2n84dkH5VS/6g8u+JT4AczANf0yP/ZfPgBaL+r6eKRtnCLGYB7t3T+wJ57MziCQwSAS3lW7No5l/OGgdYmbC11jwBw60bSmwU6umYW4BYB4Ire58+iL1BvYs7CwBECwJ0zKW8UGIDviUMEgDuHTkoC4HviFAEAAEIRAAAgFAHgzk8pbxQYgO+JQwSAO5xyBA7je+IQAeCKvvCKh7cDze5pH3cIALe4/hao96Smi1faxx0CwCV9/zmzAKAat4I6RgC4x4cc2PeZ0b97BIBr+srbz7LeNNDoTk0XtzSRewSAD/rDXoTAUt6bB7Z8VdMFs2JPCABfdAicrRa+AHmKz/0nngvsF08EC4G+Arf4IlxKbwokb7m6Fp2O3z+l1P8D/zcyubsPjy8AAAAASUVORK5CYII=",ht=o.p+"images/most_kudos.png";const gt=e=>((0,i.pushScopeId)("data-v-1d7b0dd8"),e=e(),(0,i.popScopeId)(),e),yt={class:"buzz-event-card",ref:"event"},ft={class:"card-details"},bt={class:"card-image"},Ct={class:"card-description"},St={class:"job-title"},wt={key:0,class:"event-year"},Et={class:"anniversary-month"},kt={key:1,class:"event-birthday"},xt={class:"birthday-text"},Nt=gt((()=>(0,i.createElementVNode)("img",{class:"birthday",src:pt},null,-1))),At={key:2,class:"most-kudos-details"},Dt={key:0,class:"most-kudos",src:vt},Tt={key:1,class:"most-kudos",src:ht};function Pt(e,t,o,a,l,n){return(0,i.openBlock)(),(0,i.createElementBlock)("div",yt,[(0,i.createElementVNode)("div",ft,[(0,i.createElementVNode)("div",bt,[(0,i.renderSlot)(e.$slots,"default",{},void 0,!0)]),(0,i.createElementVNode)("div",Ct,[(0,i.renderSlot)(e.$slots,"name",{},void 0,!0),(0,i.createElementVNode)("div",St,(0,i.toDisplayString)(e.job_title),1)])]),(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["card-event",{mostKudosactive:"mostKudos"===e.eventType}])},["anniversary"===e.eventType?((0,i.openBlock)(),(0,i.createElementBlock)("div",wt,[(0,i.createElementVNode)("img",{class:(0,i.normalizeClass)(["year-celebration",{"year-celebration-extend":e.isLongYearName}]),src:ut},null,2),(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["year-text",{"year-text-extend":e.isLongYearName}])},[(0,i.createElementVNode)("div",null,(0,i.toDisplayString)(e.value),1),(0,i.createElementVNode)("div",null,(0,i.toDisplayString)(1===e.value?e.$t("Year"):e.$t("Years")),1),(0,i.createElementVNode)("div",Et,(0,i.toDisplayString)(e.$t(e.month)),1)],2)])):"birthday"===e.eventType?((0,i.openBlock)(),(0,i.createElementBlock)("div",kt,[(0,i.createElementVNode)("div",xt,(0,i.toDisplayString)(e.value),1),Nt])):"mostKudos"===e.eventType?((0,i.openBlock)(),(0,i.createElementBlock)("div",At,[(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["most-kudos-text",{active:e.isActiveKudos}])},(0,i.toDisplayString)(e.value),3),e.isActiveKudos?((0,i.openBlock)(),(0,i.createElementBlock)("img",Dt)):((0,i.openBlock)(),(0,i.createElementBlock)("img",Tt))])):(0,i.createCommentVNode)("",!0)],2)],512)}var Vt=(0,i.defineComponent)({name:"buzzEventCard",data(){return{isActiveKudos:!1}},props:{name:{type:String,required:!0},job_title:{type:String,required:!0},value:{type:String,required:!0},month:String,jobTitle:String,eventType:{validator(e){return["anniversary","birthday","event","mostKudos"].includes(e)},required:!0}},computed:{isLongYearName(){var e;return(null===(e=this.$t("Year"))||void 0===e?void 0:e.length)>5}},mounted(){var e;this.isActiveKudos=null===(e=this.$refs.event)||void 0===e?void 0:e.classList.contains("active")}});const Bt=(0,Re.Z)(Vt,[["render",Pt],["__scopeId","data-v-1d7b0dd8"]]);var It=Bt,Lt=(0,i.defineComponent)({name:"buzzRightMenu",data(){return{viewMoreLimitAnniversary:5,viewMoreLimitMostKudos:5,selectEmpId:0,clickedToLoadProfile:!1,windowHeight:0}},components:{"buzz-event-card":It,"profile-pic":P.Z},computed:{pageNo(){return this.$store.state.buzz.pageNo},pageLimit(){return this.$store.state.buzz.pageLimit},empNoFilter(){return this.$store.state.buzz.selectedEmpNo},orderFilter(){return this.$store.state.buzz.orderFilterForShare},orderByFilter(){return this.$store.state.buzz.orderByFilterForShare},morePostsLoading(){return this.$store.state.buzz.morePostsLoading},showSeeMoreAnniversaries(){return this.anniversaries.length>this.viewMoreLimitAnniversary},showSeeMoreMostKudos(){return this.mostKudos.length>this.viewMoreLimitMostKudos},displayAnniversaries(){return this.anniversaries.length>this.viewMoreLimitAnniversary?this.anniversaries.slice(0,this.viewMoreLimitAnniversary):this.anniversaries},displayMostKudos(){return this.mostKudos.length>this.viewMoreLimitMostKudos?this.mostKudos.slice(0,this.viewMoreLimitMostKudos):this.mostKudos},anniversaries(){return this.$store.state.buzz.anniversaries},mostKudos(){return this.$store.state.buzz.mostKudos},showSeeLessInKudos(){var e;return!this.showSeeMoreMostKudos&&(!((null===(e=this.anniversaries)||void 0===e?void 0:e.length)>=5)||(this.windowHeight<750&&this.viewMoreLimitMostKudos>3||this.windowHeight>750&&this.viewMoreLimitMostKudos>5))}},watch:{anniversaries(e){e&&this.onResize()}},methods:{onClickEmployee(e,t,o,a,i){if(this.clickedToLoadProfile=!0,this.morePostsLoading)this.$store.subscribeAction({after:l=>{if("buzz/getSharePosts"===l.type&&this.clickedToLoadProfile){this.clickedToLoadProfile=!1,this.selectEmpId=e,this.selectEmpId!==this.empNo?(this.$store.commit("buzz/isCurrentLoggedEmployeeProfile",!1),this.$store.commit("buzz/setIsPostsFetchActionTriggred",!0),this.$store.commit("buzz/setEmpNoFilter",this.selectEmpId),this.$store.commit("buzz/setOrderFilter",null),this.$store.commit("buzz/setOrderByFilter",null),this.$store.commit("buzz/setSelectedEmployeeName",t),this.$store.commit("buzz/setSelectedEmployeeLocation",i),this.$store.commit("buzz/setSelectedEmployeeEmail",o),this.$store.commit("buzz/setSelectedEmployeeDesignation",a)):(this.$store.commit("buzz/setIsPostsFetchActionTriggred",!0),this.$store.commit("buzz/isCurrentLoggedEmployeeProfile",!0),this.$store.commit("buzz/setEmpNoFilter",this.empNo),this.$store.commit("buzz/setOrderFilter",null),this.$store.commit("buzz/setOrderByFilter",null)),this.$store.commit("buzz/emptySelectedEmployeeLargeProfilePicture");const l={empNo:this.empNoFilter,size:"big",include:"Employee",webservice:this.ngServices.webservice};this.$store.dispatch("buzz/getSelectedUserProfilePictureLarge",l).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)}))),this.ngServices.$state.go("buzz.profile",{empId:this.empNoFilter}),this.loadProfile()}}});else{this.clickedToLoadProfile=!1,this.selectEmpId=e,this.selectEmpId!==this.empNo?(this.$store.commit("buzz/setIsPostsFetchActionTriggred",!0),this.$store.commit("buzz/isCurrentLoggedEmployeeProfile",!1),this.$store.commit("buzz/setEmpNoFilter",this.selectEmpId),this.$store.commit("buzz/setOrderFilter",null),this.$store.commit("buzz/setOrderByFilter",null),this.$store.commit("buzz/setSelectedEmployeeName",t),this.$store.commit("buzz/setSelectedEmployeeLocation",i),this.$store.commit("buzz/setSelectedEmployeeEmail",o),this.$store.commit("buzz/setSelectedEmployeeDesignation",a)):(this.$store.commit("buzz/setIsPostsFetchActionTriggred",!0),this.$store.commit("buzz/isCurrentLoggedEmployeeProfile",!0),this.$store.commit("buzz/setEmpNoFilter",this.empNo),this.$store.commit("buzz/setOrderFilter",null),this.$store.commit("buzz/setOrderByFilter",null)),this.$store.commit("buzz/emptySelectedEmployeeLargeProfilePicture");const l={empNo:this.empNoFilter,size:"big",include:"Employee",webservice:this.ngServices.webservice};this.$store.dispatch("buzz/getSelectedUserProfilePictureLarge",l).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)}))),this.ngServices.$state.go("buzz.profile",{empId:this.empNoFilter}),this.loadProfile()}},loadProfile(){this.$store.commit("buzz/emptySharePosts"),this.$store.commit("buzz/setPageNo",1),this.$store.commit("buzz/setFilterWithoutEmployee",!1);const e={pageNo:this.pageNo,limit:this.pageLimit,order:this.orderFilter,orderBy:this.orderByFilter,empNumber:this.empNoFilter?[this.empNoFilter]:null,webservice:this.ngServices.webservice};this.$store.commit("buzz/setLoading",!0),this.$store.commit("buzz/setMorePostsLoading",!0),this.$store.dispatch("buzz/getSharePosts",e).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)})))},viewMoreAnniversaries(){this.viewMoreLimitAnniversary=this.anniversaries.length},viewLessAnniversaries(){this.viewMoreLimitAnniversary=5},viewMoreMostKudos(){this.viewMoreLimitMostKudos=this.mostKudos.length},viewLessMostKudos(){this.windowHeight<750?this.viewMoreLimitMostKudos=3:this.viewMoreLimitMostKudos=5},getAnnivarsries(){const e={include:"Anniversary",includePhoto:!0,pageNo:1,limit:100,webservice:this.ngServices.webservice,$locale:this.$locale};this.$store.dispatch("buzz/getAnnivesaries",e).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)})))},getKudos(){const e={include:"MostKudos",includePhoto:!0,pageNo:1,limit:100,webservice:this.ngServices.webservice};this.$store.dispatch("buzz/getMostKudos",e).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)})))},onResize(){var e;this.windowHeight=window.innerHeight,(null===(e=this.anniversaries)||void 0===e?void 0:e.length)>=5&&this.windowHeight<750?this.viewMoreLimitMostKudos=3:this.viewMoreLimitMostKudos=5}},mounted(){this.getAnnivarsries(),this.getKudos(),this.onResize(),this.$nextTick((()=>{window.addEventListener("resize",this.onResize)}))},beforeUnmount(){window.removeEventListener("resize",this.onResize)}});const Ft=(0,Re.Z)(Lt,[["render",mt],["__scopeId","data-v-6715747b"]]);var zt=Ft,Mt=(0,i.defineComponent)({name:"BuzzContent",components:{"buzz-right-menu":zt}});const Ot=(0,Re.Z)(Mt,[["render",Je],["__scopeId","data-v-056a2d61"]]);var Rt=Ot;const _t={class:"left-panel-button-wrapper"};function $t(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-button");return(0,i.openBlock)(),(0,i.createElementBlock)("div",_t,[(0,i.createVNode)(r,{label:e.$t("Most Liked Posts"),size:"long",displayType:"text",iconName:"oxd-reaction","data-test":"loadMostLikedPostButton",onClick:t[0]||(t[0]=t=>e.loadMostLikedPosts()),class:(0,i.normalizeClass)({active:"most-liked-posts"===e.$store.state.buzz.selectedMenu})},null,8,["label","class"]),(0,i.createVNode)(r,{label:e.$t("Most Commented Posts"),size:"long",displayType:"text",iconName:"oxd-chat","data-test":"loadMostCommentedPostsButton",class:(0,i.normalizeClass)(["top-margin",{active:"most-commented-posts"===e.$store.state.buzz.selectedMenu}]),onClick:t[1]||(t[1]=t=>e.loadMostCommentedPosts())},null,8,["label","class"])])}var jt=o(81218),Ut=(0,i.defineComponent)({name:"buzzLeftMenu",data(){return{pageNo:1,pageLimit:10}},components:{"oxd-button":jt.Z},methods:{loadMostLikedPosts(){this.$store.commit("buzz/setSelectedMenu","most-liked-posts"),this.$emit("update:filterByLikes",!0)},loadMostCommentedPosts(){this.$store.commit("buzz/setSelectedMenu","most-commented-posts"),this.$emit("update:filterByComments",!0)}}});const Zt=(0,Re.Z)(Ut,[["render",$t],["__scopeId","data-v-5704fed6"]]);var Ht=Zt,qt=o.p+"images/cameraglass.png",Gt=o.p+"images/videoglass.png",Wt=o.p+"images/thumbsupglass.png";const Kt=e=>((0,i.pushScopeId)("data-v-026b17b2"),e=e(),(0,i.popScopeId)(),e),Qt={class:"create-post-content"},Jt=["src"],Yt={class:"post-footer"},Xt=Kt((()=>(0,i.createElementVNode)("img",{src:qt},null,-1))),eo=Kt((()=>(0,i.createElementVNode)("img",{src:Gt},null,-1))),to=Kt((()=>(0,i.createElementVNode)("img",{src:Wt},null,-1))),oo={key:3,class:"oxd-loader-text-wrapper"};function ao(e,t,o,a,l,n){const r=(0,i.resolveComponent)("profile-pic"),s=(0,i.resolveComponent)("oxd-input-field"),d=(0,i.resolveComponent)("oxd-button"),c=(0,i.resolveComponent)("oxd-divider"),m=(0,i.resolveComponent)("oxd-file-input"),u=(0,i.resolveComponent)("oxd-form"),p=(0,i.resolveComponent)("Sheet"),v=(0,i.resolveComponent)("buzz-fileupload-modal"),h=(0,i.resolveComponent)("video-post"),g=(0,i.resolveComponent)("kudos-post"),y=(0,i.resolveComponent)("oxd-loader");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createElementVNode)("div",Qt,[(0,i.createVNode)(p,{class:"sheet-width"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(u,{onSubmitValid:e.saveStatus,ref:"form"},{default:(0,i.withCtx)((()=>{var o;return[(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["post-header",{focusPostWrapperTextarea:e.isFocused}])},[((0,i.openBlock)(),(0,i.createBlock)(r,{"data-test":"profileImage",onClickOnce:t[0]||(t[0]=t=>e.routeToProfile()),key:e.profileKey},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("img",{src:e.empProfilePic},null,8,Jt)])),_:1})),(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["post-text-wrapper",{focusTextAreaWrapper:e.isFocused}])},[(0,i.createVNode)(s,{class:(0,i.normalizeClass)({focustextarea:e.isFocused,postTextArea:!0,initialStyle:e.resizeStyleOnSubmit,showScrollBar:e.showScrollBar}),rows:1,placeholder:e.$t("What's on your mind?"),onInput:t[1]||(t[1]=t=>e.onInput(t)),modelValue:e.postStatus,"onUpdate:modelValue":t[2]||(t[2]=t=>e.postStatus=t),rules:e.rules.post,type:"textarea","data-test":"postTextArea"},null,8,["class","placeholder","modelValue","rules"]),(0,i.createVNode)(d,{label:e.$t("Post"),size:"medium",displayType:"main",class:"postButton",type:"submit",disabled:null===(o=e.$refs.form)||void 0===o?void 0:o.isFromInvalid},null,8,["label","disabled"])],2)],2),(0,i.createVNode)(c,{style:{borderTopColor:"#ebedf1",margin:"0px"}}),(0,i.createElementVNode)("div",Yt,[((0,i.openBlock)(),(0,i.createBlock)(m,{multiple:"","onUpdate:modelValue":t[3]||(t[3]=t=>e.onFileUpload(t)),accept:"image/*",key:e.fileUploadKey},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{label:e.$t("Share Photos"),size:"long",displayType:"glass",class:"btn-glass-custom-post"},{icon:(0,i.withCtx)((()=>[Xt])),_:1},8,["label"])])),_:1})),(0,i.createVNode)(d,{label:e.$t("Share Video"),size:"long",displayType:"glass",class:"btn-glass-custom-video","data-test":"shareVideoButton",onClick:t[4]||(t[4]=t=>e.onShareVideo())},{icon:(0,i.withCtx)((()=>[eo])),_:1},8,["label"]),e.kudosEnabled?((0,i.openBlock)(),(0,i.createBlock)(d,{key:0,label:e.$t("Post Kudos"),size:"long",displayType:"glass",class:"btn-glass-custom-kudos",onClick:t[5]||(t[5]=t=>e.onPostKudos()),"data-test":"kudosButton"},{icon:(0,i.withCtx)((()=>[to])),_:1},8,["label"])):(0,i.createCommentVNode)("",!0)])]})),_:1},8,["onSubmitValid"])])),_:1})]),e.showBuzzFileModal?((0,i.openBlock)(),(0,i.createBlock)(v,{key:0,modalData:e.imageDetails,modelText:e.postStatus,invalidFilesSelected:e.isInvalidFilesSelected,maxImageSizeReachedFileSelected:e.isMaxImageSizeReachedFileSelected,maxFileLengthReachedProp:e.maxFileLengthReached,empProfilePic:e.empProfilePic,"onUpdate:show":t[6]||(t[6]=t=>e.onCloseBuzzFileModal()),"onUpdate:create":t[7]||(t[7]=t=>e.onPhotoStatusUpdate(t))},null,8,["modalData","modelText","invalidFilesSelected","maxImageSizeReachedFileSelected","maxFileLengthReachedProp","empProfilePic"])):(0,i.createCommentVNode)("",!0),e.showBuzzVideoModal?((0,i.openBlock)(),(0,i.createBlock)(h,{key:1,empProfilePic:e.empProfilePic,"onUpdate:show":t[8]||(t[8]=t=>e.onCloseVideoModal()),"onUpdate:create":t[9]||(t[9]=t=>e.onVideoUpdate(t))},null,8,["empProfilePic"])):(0,i.createCommentVNode)("",!0),e.showBuzzKudosModal?((0,i.openBlock)(),(0,i.createBlock)(g,{key:2,empProfilePic:e.empProfilePic,"onUpdate:show":t[10]||(t[10]=t=>e.onCloseKudosModal()),"onUpdate:create":t[11]||(t[11]=t=>e.onKudosUpdate(t))},null,8,["empProfilePic"])):(0,i.createCommentVNode)("",!0),e.onLoading?((0,i.openBlock)(),(0,i.createElementBlock)("div",oo,[(0,i.createVNode)(y,{withContainer:!0,class:"oxd-loader-text-view"})])):(0,i.createCommentVNode)("",!0)],64)}var io=o(54740),lo=o(71580),no=o(43223),ro=o(37076),so=o(97485),co=o(67338),mo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD8AAAA/CAYAAABXXxDfAAAGmklEQVRoge2bCbDXUxTHP++pqBCiRKEyTZaikrJlHRrLoFQSw5gSoswY+2AGQ0aDDMNURjWo7GuPQclaSakU2dIi+5aKlPfMac5v5jjd/3Lf//dfwnfmzfuf+7v3/u73Lufec+75Vc1b+AUBNAXOAU4COgM7hTKVEHXA98CHQA3wMLCm0NeHyA8FbgJalJlwNkhHXAM8WEgl1U4eDzxQ4cQFuwDjgNsLqaSB+T1Rp7rHYmA5UFtQcwtDQ6AtsLer5UrgT+D6+tSeTPtBuo4sXgVuBN4pG+XNcbgSPd49OQJ4K7YyIS+9+gvQxKTfB1yScsPTxD3ApaY+GcH2sfXLmj/LEX+vwokLhgNvG7kdcGRsJbLmz3BpQwP59gIal2ndV+u2tsKlXwvMMHJ/J+eEkO9kMsn0mecK3QsMS5dPNGSfvw64zRScpZ2yrcoHxlZarQeaBEvd890rgLigCrgV2MakrQdWGXn72EqrtVftSyyahIuVBWuBrbO8OHpJNnDk/aFno5PlePkysFWgo9JEnZLpo/pGsCFA0LahLvb9DfLIY1GjB4tSoY0hnzr8SOfCDiUkjlFmRUEs+X8V/if/X0U5ybdRZ0nZEEu+YUoN7QksAV4AZufYv4uGWPJf6v9TgAPq2Sgh/q7aCoLu5eqAWPJ7qNPjOeAD4NTI8glxj87l6IBY8uc7b88zwFF5ls1EPEHJOyANhTc9jw7oESC+VD1FFkkHJCfPRim0LyPS0vbTA36BBCcDM12a2OZHq5d4oHsmHTBXLbjFKbUviPqSlwY/5tIeV6+QRW/geZcmztCuwDKVJwMnujyd1FOzbz3blxdiya8DTtMGDwDmuOePmJHsqoaQhRDvBvzg0msCe76UPzY9qpsjlvwk4Fkj9wI+dXkeVcfDNJeeiXiCqYEZUFTEkv89IB8U6AC5TWlm5BU6kpmIJ6gpZQfEkg9tQ6t1RKdnKJMQ/zHPd5SsA9LS9r8BtwTSv85zxD0SHfBHSu0LIi3yh6q2t1it6bHEE0yNdUXHIg3yp+u2ZK+xZarvb2yB+mJ9McnH+vA85M7sKZeWr3LLB2lZkUHEjrz1lvZQT65FmsSLjljySf6DMxxZi03cu8vtsvDbcE7Ekp8P7Fom4n+pEkWPv4P1RilBW7U6O2Wu4p+IJd9Hb3HtCCwv0VSXUb5KO34BMBbY0TxvqWEqC3SQLs9lFcaSl2vg1kZeoT1dLOL2hmY3YKTqmlwQy3AU8HmGaJNNKGSrWwR0NFOxGNhQYJ2t1fM0PvSw0K3uIdUBxUBdhvUra38K8CKwUE+Xgu3UBD4BONP4CAXn6rmjp71/lLAUCevaWeVpzozsoF7WSsFE9f7kOjzJgNysStFihvU6+Stqvwx+riDiQ3QE8zk1fqP5h7t00VmXJYKM/BId4aRQK1fgAtWyTetzDRyJWtXqbV2xwQUEHEoHjHZpYm6vFvJPAH3NA+mdNwKVNCpBTM5GHbExJk3a1y9D/vYaNiN64GLddkN4SXVBghtkWQj5fs4ft0iVQ7kw02xnMtOaZ1l+c9SXIHhdnaIhyDb5lUmXTupYraaorXw/dUWVA63cPv50Dr1jl2jrLPkkducVI8vlyzGJgvNe14Haq/200kK3xHzhPThTcpRba36v0/+ZwmUmO7lzQkrWxBXAHeZhN10OtaoINxY5Dqc2EPA838kdVPHtqbId+X10OlepB2mYHsUTvO/qamFHdJQqjjtdpmpdM6VGXSCmfpzG34bQUK+90dk6Wj1JCb7VDk5me2O/r98FHAK8VgayIfit9aeIsr862e9UdaG1LNr2OFU8vdVia67hZ8Xc6mo1hjaZZVWBgKQhOhvaqdzFBCau1WUiA7oyEDXW0h3i1mRTZLP0r5To75Sc7DyfGFmO4mcb+SM1rtBj+GFZ2trFyd9VWkyOv8kdlCO/DY1rliUfgR1tbqWRF//Ax0bua4yuEFaatEynO3Rftye8z+QUW4nRWCOdnG2vH6DPJ6nRkwn+Rvlu8RVk+rSs3Fimo5VgtLXGIjHWmbbyVckm91elxuH1d/KIgGWWD8YEbPrzkh+VSn5WIGRluH7s1CuP8t3VcTHEpY+3V+yVOu0TPKkeY48ZGhE2W42WKj0fdFX7wH99hV6w9LYJlU5ecD9wYYF1TLDTPcGWEHt7kTok/QdG+WCVkt6MOFtQ4PEU9dqMCFhnIcgXIVdrmQmZMm0J095D3GnisZGLCbmukg+LxBqVLUxMWQlfe9PZ+psD+BsaZWSXEjRkCQAAAABJRU5ErkJggg==";const uo=e=>((0,i.pushScopeId)("data-v-b59c4776"),e=e(),(0,i.popScopeId)(),e),po={class:"fileupload-header"},vo={class:"header-text","data-test":"modalHeader"},ho={class:"fileupload-body"},go=["src"],yo={key:0,class:"add-more-wrapper","data-test":"addMoreImageFileInputWrapper"},fo={class:"add-more-img-btn-wrapper"},bo=uo((()=>(0,i.createElementVNode)("img",{src:mo},null,-1))),Co={class:"add-image-text"},So={key:1,class:"upload-image-container","data-test":"addMoreImageButton"},wo={class:"add-more-container"},Eo={key:0,class:"add-more-btn-wrapper"},ko={key:0,class:"image-wrapper"},xo=["src"],No={key:1},Ao={class:"image-wrapper"},Do=["src"],To={class:"image-wrapper"},Po=["src"],Vo={key:2},Bo={class:"image-wrapper"},Io=["src"],Lo={class:"image-wrapper multiple-img-container"},Fo=["src"],zo={class:"image-wrapper multiple-img-container"},Mo=["src"],Oo={key:3},Ro=["src"],_o={key:2,"data-test":"videoPostContent"},$o={class:"post-body"},jo={key:0,class:"iframe-container","data-test":"iframeContainer"},Uo=["src"],Zo={key:4},Ho={key:5,class:"oxd-loader-text-wrapper"},qo={class:"fileupload-footer"};function Go(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-divider"),s=(0,i.resolveComponent)("profile-pic"),d=(0,i.resolveComponent)("oxd-input-field"),c=(0,i.resolveComponent)("oxd-close-button"),m=(0,i.resolveComponent)("oxd-alert"),u=(0,i.resolveComponent)("oxd-file-input"),p=(0,i.resolveComponent)("oxd-button"),v=(0,i.resolveComponent)("oxd-close-btn"),h=(0,i.resolveComponent)("oxd-label"),g=(0,i.resolveComponent)("oxd-text"),y=(0,i.resolveComponent)("oxd-loader"),f=(0,i.resolveComponent)("oxd-form"),b=(0,i.resolveComponent)("oxd-dialog");return(0,i.openBlock)(),(0,i.createBlock)(b,{style:(0,i.normalizeStyle)({maxWidth:"522px",padding:"0 1.4rem 0 1.4rem"})},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(f,{onSubmitValid:e.savePost,ref:"form"},{default:(0,i.withCtx)((()=>{var o,a;return[(0,i.createElementVNode)("div",po,[(0,i.createElementVNode)("div",vo,(0,i.toDisplayString)(e.$t(e.modalStatus))+" "+(0,i.toDisplayString)(e.isKudosPost?e.$t("Kudos"):e.isVideoPost?e.$t("Video"):e.$t("Post")),1)]),(0,i.createVNode)(r),(0,i.createElementVNode)("div",ho,[(0,i.createElementVNode)("div",{class:"post-header",style:(0,i.normalizeStyle)({height:e.textAreaParentHeight}),"data-test":"postHeader"},[(0,i.createVNode)(s,null,{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("img",{src:e.empProfilePic},null,8,go)])),_:1}),(0,i.createVNode)(d,{ref:"textArea","data-test":"postTextArea",class:(0,i.normalizeClass)({AddPostTextArea:!0,AddPostTextAreaInitialStyle:e.resizeStyleOnSubmit,showScrollBar:e.showScrollBar}),id:"AddPostTextArea",rows:1,placeholder:e.$t("What's on your mind?"),onInput:t[0]||(t[0]=t=>e.onInput(t)),modelValue:e.postStatus,"onUpdate:modelValue":t[1]||(t[1]=t=>e.postStatus=t),type:"textarea",rules:e.rules.post},null,8,["class","placeholder","modelValue","rules"])],4),(0,i.createVNode)(m,{show:e.maxFileLengthReached,"data-test":"maxFileLengthReachedAlert",type:"error",message:e.$t("Only five images are allowed in a single post!")},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{"data-test":"maxFileLengthErrorAlertCloseButton",onClick:t[2]||(t[2]=t=>e.onHideFileLengthValidation())})])),_:1},8,["show","message"]),(0,i.createVNode)(m,{"data-test":"invalidFileSelectedAlert",show:e.isInvalidFilesSelected,type:"error",message:e.$t("Only 'gif', 'png', 'jpg', 'jpeg' type images are allowed!")},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{onClick:t[3]||(t[3]=t=>e.onHideFileValidation()),"data-test":"invalidFileSelectedAlertCloseButton"})])),_:1},8,["show","message"]),(0,i.createVNode)(m,{show:e.isMaxImageSizeReachedFileSelected,"data-test":"maxFileSizeErrorAlert",type:"error",message:e.$t("Maximum allowed upload file size is 10mb")},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{"data-test":"maxFileSizeErrorAlertCloseButton",onClick:t[4]||(t[4]=t=>e.onHideMaxFileSizeValidation())})])),_:1},8,["show","message"]),e.isKudosPost||e.isVideoPost||!e.uploadImages||0!==e.uploadImages.length||0!==e.shareType?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",yo,[(0,i.createElementVNode)("div",fo,[(0,i.createVNode)(u,{multiple:"","onUpdate:modelValue":t[5]||(t[5]=t=>e.addMoreImages(t))},{default:(0,i.withCtx)((()=>[bo])),_:1}),(0,i.createElementVNode)("span",Co,(0,i.toDisplayString)(e.$t("Add Images")),1)])])),0===e.shareType&&!e.isVideoPost&&e.uploadImages&&e.uploadImages.length>0?((0,i.openBlock)(),(0,i.createElementBlock)("div",So,[(0,i.createElementVNode)("div",wo,[e.uploadImages&&e.uploadImages.length>0?((0,i.openBlock)(),(0,i.createElementBlock)("div",Eo,[((0,i.openBlock)(),(0,i.createBlock)(u,{multiple:"","onUpdate:modelValue":t[6]||(t[6]=t=>e.addMoreImages(t)),disabled:e.onLoading||(null===(o=e.uploadImages)||void 0===o?void 0:o.length)>=5,key:e.fileUploadKey},{default:(0,i.withCtx)((()=>{var t;return[(0,i.createVNode)(p,{class:"post-btn",label:e.$t("Add Photos"),size:"medium",iconName:"file-image",displayType:"main",disabled:e.onLoading||(null===(t=e.uploadImages)||void 0===t?void 0:t.length)>=5},null,8,["label","disabled"])]})),_:1},8,["disabled"]))])):(0,i.createCommentVNode)("",!0)]),1===e.uploadImages.length?((0,i.openBlock)(),(0,i.createElementBlock)("div",ko,[(0,i.createElementVNode)("img",{src:e.uploadImages[0].src,class:(0,i.normalizeClass)(["img-single",{"img-overlay":e.onLoading}])},null,10,xo),(0,i.createVNode)(v,{class:"img-close-btn",onClick:t[7]||(t[7]=t=>e.removeImage(e.uploadImages[0].index))})])):(0,i.createCommentVNode)("",!0),2===e.uploadImages.length?((0,i.openBlock)(),(0,i.createElementBlock)("div",No,[(0,i.createElementVNode)("div",Ao,[(0,i.createElementVNode)("img",{src:e.uploadImages[0].src,class:(0,i.normalizeClass)(["img-couple",{"img-overlay":e.onLoading}])},null,10,Do),(0,i.createVNode)(v,{class:"img-close-btn",onClick:t[8]||(t[8]=t=>e.removeImage(e.uploadImages[0].index))})]),(0,i.createElementVNode)("div",To,[(0,i.createElementVNode)("img",{src:e.uploadImages[1].src,class:(0,i.normalizeClass)(["img-couple",{"img-overlay":e.onLoading}])},null,10,Po),(0,i.createVNode)(v,{class:"img-close-btn",onClick:t[9]||(t[9]=t=>e.removeImage(e.uploadImages[1].index))})])])):(0,i.createCommentVNode)("",!0),3===e.uploadImages.length?((0,i.openBlock)(),(0,i.createElementBlock)("div",Vo,[(0,i.createElementVNode)("div",Bo,[(0,i.createElementVNode)("img",{src:e.uploadImages[0].src,class:(0,i.normalizeClass)(["img-couple",{"img-overlay":e.onLoading}])},null,10,Io),(0,i.createVNode)(v,{class:"img-close-btn",onClick:t[10]||(t[10]=t=>e.removeImage(e.uploadImages[0].index))})]),(0,i.createElementVNode)("div",null,[(0,i.createElementVNode)("div",Lo,[(0,i.createElementVNode)("img",{src:e.uploadImages[1].src,class:(0,i.normalizeClass)(["img-tri",{"img-overlay":e.onLoading}])},null,10,Fo),(0,i.createVNode)(v,{class:"img-close-btn",onClick:t[11]||(t[11]=t=>e.removeImage(e.uploadImages[1].index))})]),(0,i.createElementVNode)("div",zo,[(0,i.createElementVNode)("img",{src:e.uploadImages[2].src,class:(0,i.normalizeClass)(["img-tri",{"img-overlay":e.onLoading}])},null,10,Mo),(0,i.createVNode)(v,{class:"img-close-btn",onClick:t[12]||(t[12]=t=>e.removeImage(e.uploadImages[2].index))})])])])):(0,i.createCommentVNode)("",!0),e.uploadImages.length>3?((0,i.openBlock)(),(0,i.createElementBlock)("div",Oo,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.uploadImages,(t=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"image-wrapper multiple-img-container",key:t.src},[(0,i.createElementVNode)("img",{src:t.src,class:(0,i.normalizeClass)(["img-tri",{"img-overlay":e.onLoading}])},null,10,Ro),(0,i.createVNode)(v,{class:"img-close-btn",onClick:o=>e.removeImage(t.index)},null,8,["onClick"])])))),128))])):(0,i.createCommentVNode)("",!0)])):(0,i.createCommentVNode)("",!0),0===e.shareType&&e.isVideoPost?((0,i.openBlock)(),(0,i.createElementBlock)("div",_o,[(0,i.createElementVNode)("div",$o,[(0,i.createElementVNode)("div",null,[(0,i.createVNode)(h,{label:e.$t("Paste Video Url")},null,8,["label"]),(0,i.createVNode)(d,{rows:1,modelValue:e.getVideoUrl,"onUpdate:modelValue":t[13]||(t[13]=t=>e.getVideoUrl=t),placeholder:e.$t("Paste Video Url"),onPaste:t[14]||(t[14]=t=>e.onUrlPaste(t)),type:"textarea"},null,8,["modelValue","placeholder"]),e.isInvalidURL?((0,i.openBlock)(),(0,i.createBlock)(g,{key:0,"data-test":"invalidUrlText",tag:"span",style:{"{\n                    display":"flex","font-size":"12px","font-weight":"600",color:"#eb0910"}},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("This url is not a valid url of a video or it is not supportedby the system")),1)])),_:1})):(0,i.createCommentVNode)("",!0)]),e.getValidVideoUrl?((0,i.openBlock)(),(0,i.createElementBlock)("div",jo,[(0,i.createElementVNode)("iframe",{src:e.getValidVideoUrl,class:"iframe-content",width:"100%",height:"250",sandbox:"allow-same-origin allow-scripts allow-popups allow-presentation",allowfullscreen:""},null,8,Uo)])):(0,i.createCommentVNode)("",!0)])])):(0,i.createCommentVNode)("",!0),1===e.shareType?(0,i.renderSlot)(e.$slots,"default",{key:3},void 0,!0):(0,i.createCommentVNode)("",!0),e.onLoading&&e.uploadImages&&e.uploadImages.length>0?((0,i.openBlock)(),(0,i.createElementBlock)("div",Zo,[(0,i.createVNode)(y,{withContainer:!0,class:"oxd-loader-images-view"})])):(0,i.createCommentVNode)("",!0),e.onLoading&&e.uploadImages&&0===e.uploadImages.length?((0,i.openBlock)(),(0,i.createElementBlock)("div",Ho,[(0,i.createVNode)(y,{withContainer:!0,class:"oxd-loader-text-view"})])):(0,i.createCommentVNode)("",!0)]),(0,i.createElementVNode)("div",qo,[(0,i.createVNode)(p,{class:"post-btn",label:e.$t("Post"),size:"medium",displayType:"main",disabled:(null===(a=e.$refs.form)||void 0===a?void 0:a.isFromInvalid)||e.disablePostButton,type:"submit"},null,8,["label","disabled"])])]})),_:3},8,["onSubmitValid"])])),_:3},8,["style"])}var Wo=o(99696),Ko=o(26617),Qo=o(40991),Jo=o(9195);const Yo="full_day",Xo="half_day",ea="half_day_pm",ta="half_day_am",oa="specify_time",aa="none",ia="all",la="start",na="end",ra="start_end",sa="assign",da="apply",ca="assign",ma="apply",ua=-1,pa=0,va=4,ha=5,ga=ce(),ya={id:null,country:{id:"",label:"",name:"",operationalCountryId:""},name:"",durationUnit:"days",isEntitlementSituational:!1,includeInBradfordFactorReport:!1,nominateEmployees:!1,shortTermEntitlement:!1},fa={id:null,description:"",start_date:"",date:"",length:0,editable:!1,deletable:!1,operational_country_id:"",country:"",recurring:0,HolidayLocation:[]},ba={id:Yo,label:ga("Full Day")},Ca={id:ea,label:ga("Half Day Afternoon")},Sa={id:ta,label:ga("Half Day Morning")},wa={id:oa,label:ga("Specify Time")},Ea=[Ca,Sa,wa],ka=[ba,...Ea],xa=[{id:aa,label:ga("None")},{id:ia,label:ga("All Days")},{id:la,label:ga("Start Day Only")},{id:na,label:ga("End Day Only")},{id:ra,label:ga("Start and End Day")}],Na={singleDuration:ba,startDayDuration:Ca,endDayDuration:Ca,partialDays:aa,settings:{showAttachment:!1,attachmentMandatory:!1,nomineeRequired:!1},refresh:!1};class Aa{constructor(){this._app=(0,i.getCurrentInstance)()}getDataGroupPermissions(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return new Promise(((t,a)=>{o.webservice.call("permissions","GET",[],e,void 0,!0).then((e=>{t(e.data.data)})).catch((e=>{a(e)}))}))}}class Da{constructor(e){this._app=(0,i.getCurrentInstance)(),this._app=e,this._dataGroupPermissionService=new Aa}getEmployee(e){var t;const o={filter:{employee_id_list:[e]},include:"photo",fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId,photo"},a=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return a.webservice.get("employees",o,{})}filterEmployees(e,t,o=5){var a;const i={filter:{employee_name_or_id:e,permissionType:t},include:"photo",fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId,photo","page[offset]":"0","page[limit]":o,sort:"fullName"},l=null===(a=this._app)||void 0===a?void 0:a.appContext.config.globalProperties.ngServices;return l.webservice.get("employees",i,{})}filterAllEmployees(e,t=5){var o;const a={filter:{employee_name_or_id:e},"page[offset]":"0","page[limit]":t,sort:"fullName"},i=null===(o=this._app)||void 0===o?void 0:o.appContext.config.globalProperties.ngServices;return i.webservice.get("employeeAutoComplete",a,{})}getActiveLeaveTypes(){var e;const t={filter:{deleted:0}},o=null===(e=this._app)||void 0===e?void 0:e.appContext.config.globalProperties.ngServices;return o.webservice.get("leave/types",t,{})}getLocations(){var e;const t=null===(e=this._app)||void 0===e?void 0:e.appContext.config.globalProperties.ngServices;return t.webservice.call("employees/locations","GET",{},{})}getCountries(){var e;const t=null===(e=this._app)||void 0===e?void 0:e.appContext.config.globalProperties.ngServices;return t.webservice.call("operationalCountries","GET",{},{})}getHolidays(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.get("holidays",e,{})}hasEditableLeave(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.get("holidays/has-editable-leave",e,{})}addHoliday(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.call("holidays","POST",e)}editHoliday(e,t){var o;const a=null===(o=this._app)||void 0===o?void 0:o.appContext.config.globalProperties.ngServices;return a.webservice.call("holidays/"+e,"PATCH",t)}deleteHolidays(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.call("holidays","DELETE",{data:e})}getDeletedLeaveTypes(){var e;const t={filter:{deleted:1}},o=null===(e=this._app)||void 0===e?void 0:e.appContext.config.globalProperties.ngServices;return o.webservice.get("leave/types",t,{})}getLeaveTypeRule(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.get("leave/type/"+e+"/rule",{},{})}checkRestrictions(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.get("leave/application/check-restrictions",e,{})}getUnfilteredLeaveTypes(){var e;const t={unfiltered:1},o=null===(e=this._app)||void 0===e?void 0:e.appContext.config.globalProperties.ngServices;return o.webservice.get("leave/types",t,{})}getAssignableLeaveTypes(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.get("leave/application/"+e+"/assignable-type",[],{})}getEligibleLeaveTypes(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.get("leave/application/"+e+"/eligible-type",[],{})}checkBalance(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.get("leave/application/check-balance",e,{})}getLeaveBalance(e){var t;const o={selectedEmployee:{empNumber:e},eligible_employees_only:!1,include_terminated:!1,items_per_page:50,leave_type:-1,orderBy:"ASC",orderField:"leaveType",page_no:1,period_offset:null,report_type:"employee"},a=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return a.webservice.get("leave/leaveBalanceForAssignLeave",o,{})}getLeaveBalanceByEmployeeAndLeaveType(e,t,o){var a;const i={filter:{periodOffset:o}},l=null===(a=this._app)||void 0===a?void 0:a.appContext.config.globalProperties.ngServices;return l.webservice.get("leave/type/"+t+"/employee/"+e+"/balance",i,{})}searchLeaveRequests(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.get("leave/requests",e,{})}getLeaveRequests(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.get("leave/requests/latest",e,{})}assignLeave(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.call("leave/application/assign","POST",e)}applyLeave(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.call("leave/application","POST",e)}createLeaveType(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.call("leaveTypes","POST",e)}updateLeaveType(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices,a=e.id;return delete e.id,o.webservice.call("leaveType?id="+a,"PATCH",e)}undeleteLeaveType(e,t){var o;const a=null===(o=this._app)||void 0===o?void 0:o.appContext.config.globalProperties.ngServices;return delete t.id,a.webservice.call("leaveType?id="+e+"&filter[undelete]=1","PATCH",t)}getOperationalCountries(){var e;const t=null===(e=this._app)||void 0===e?void 0:e.appContext.config.globalProperties.ngServices;return t.webservice.get("user_regions_leave_types",{},{})}getLeaveTypes(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.call("leaveTypes","GET",[],e,void 0,!1)}deleteLeaveTypes(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.call("leaveTypes","DELETE",e)}isLeaveTypeLocationRestricted(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return new Promise(((t,a)=>{o.webservice.get("leaveTypeLocationRestriction/"+e,"DELETE",{},{}).then((e=>{t(e.data.restricted)})).catch((e=>{a(e)}))}))}getDataGroupPermissions(e){return this._dataGroupPermissionService.getDataGroupPermissions(e)}getWorkSchedule(e,t){var o;let a;"undefined"!==typeof e?(a="employee/"+e+"/work-schedule","undefined"!=typeof t&&(a+="/date/"+t.replace(/-/g,""))):a="leave/default-work-schedule";const i=null===(o=this._app)||void 0===o?void 0:o.appContext.config.globalProperties.ngServices;return i.webservice.call(a,"GET",[],{})}isWorkWeekEnabled(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.call("leave/application/"+e+"/work-week","GET",[],{})}fetchLeavePeriod(e,t){var o;const a={filter:{empNumber:t}},i=null===(o=this._app)||void 0===o?void 0:o.appContext.config.globalProperties.ngServices;return i.webservice.get("leave/type/"+e+"/periods",a,{})}getAllowedLeavePeriodOffset(e){var t;const o={empNumber:e},a=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return a.webservice.get("leave/applyAssignAllowedLeavePeriodOffset",o,{})}}var Ta=o(77349),Pa=o(59319),Va=o(7069),Ba=o(79429),Ia=o(30381),La=o.n(Ia);const Fa=ce();class za{constructor(e){this._app=e,this._http=new Da(this._app),this._ngServices=(0,i.inject)("ngServices")}checkBalance(e){return new Promise(((t,o)=>{try{this._http.checkBalance(e).then((e=>{e.data&&t(e.data.data)}))}catch(a){o(a)}}))}getLeaveBalance(e){return new Promise(((t,o)=>{try{e?this._http.getLeaveBalance(e).then((e=>{e.data&&t(e.data.data)})):o()}catch(a){o(a)}}))}getLeaveBalanceByEmployeeAndLeaveType(e,t,o){return new Promise(((a,i)=>{try{e?this._http.getLeaveBalanceByEmployeeAndLeaveType(e,t,o).then((e=>{a(e.data)})):i()}catch(l){i(l)}}))}getLeaveRequestsWithMode(e,t){const o={filter:{empNumber:e,includeLeaveType:!0,includeOverdrawn:0,page:1,pageSize:50,sortField:"date_and_time",sortOrder:"DESC",withTerminated:!1,to:(new Date).toISOString().split("T")[0]}};return t&&(o.filter.mode=t),new Promise(((t,a)=>{try{e?this._http.getLeaveRequests(o).then((e=>{e.data&&t(e.data.list)})):a()}catch(i){a(i)}}))}getLeaveRequestsWithFiltersAndMode(e,t,o,a,i,l){const n={filter:{empNumber:e,includeLeaveType:!0,includeOverdrawn:0,page:1,pageSize:50,sortField:"date_and_time",sortOrder:"DESC",withTerminated:!1,to:o,from:t,status:a}};return l&&(n.filter.mode=l),i&&(n.filter.withTerminated=i),new Promise(((t,o)=>{try{e?this._http.searchLeaveRequests(n).then((e=>{e.data&&t(e.data.list)})):o()}catch(a){o(a)}}))}searchLeaveRequestsWithMode(e,t){const o={filter:{empNumber:e,includeLeaveType:!0,includeOverdrawn:0,page:1,pageSize:50,sortField:"date_and_time",sortOrder:"ASC",withTerminated:!0}};return t&&(o.filter.mode=t),new Promise(((t,a)=>{try{e?this._http.searchLeaveRequests(o).then((e=>{e.data&&t(e.data.list)})):a()}catch(i){a(i)}}))}getWorkSchedule(e,t){return new Promise(((o,a)=>{try{this._http.getWorkSchedule(e,t).then((e=>{o(e.data)}))}catch(i){a(i)}}))}isWorkWeekEnabled(e){return new Promise(((t,o)=>{try{this._http.isWorkWeekEnabled(e).then((e=>{t(e.data.isLeaveWorkWeekEnabled)}))}catch(a){o(a)}}))}getDataGroupPermissions(e){return this._http.getDataGroupPermissions(e)}getLeaveRequestAssignModel(e){var t,o,a,i,l,n,r,s,d,c,m,u;const p={employeeId:null!==e.employee?e.employee.id:null,from:e.fromDate,to:e.toDate,leaveTypeId:null===(t=e.leaveType)||void 0===t?void 0:t.id,partialDays:e.partialDays===aa?"":e.partialDays,workShiftLength:null!==(a=null===(o=e.startDayWorkSchedule)||void 0===o?void 0:o.length)&&void 0!==a?a:8,comment:null!==(i=e.comments)&&void 0!==i?i:""};if((null===(l=e.leaveType)||void 0===l?void 0:l.isShortTerm)&&(null===(r=null===(n=e.leaveType)||void 0===n?void 0:n.selectedEntitlement)||void 0===r?void 0:r.id)&&(p.entitlementIds=null===(d=null===(s=e.leaveType)||void 0===s?void 0:s.selectedEntitlement)||void 0===d?void 0:d.id.split(",")),p.duration=za.getDuration(null===(c=e.singleDuration)||void 0===c?void 0:c.id,e.singleSpecifyTimeFrom,e.singleSpecifyTimeTo),p.start=za.getDuration(null===(m=e.startDayDuration)||void 0===m?void 0:m.id,e.startDaySpecifyTimeFrom,e.startDaySpecifyTimeTo),p.end=za.getDuration(null===(u=e.endDayDuration)||void 0===u?void 0:u.id,e.endDaySpecifyTimeFrom,e.endDaySpecifyTimeTo),e.EmployeeNomineeRestrictionFilter){p.extraParams={EmployeeNomineeRestrictionFilter:[]};for(let t=0;t<e.EmployeeNomineeRestrictionFilter.length;t++)p.extraParams.EmployeeNomineeRestrictionFilter.push({employee:e.EmployeeNomineeRestrictionFilter[t].employee,empNumber:e.EmployeeNomineeRestrictionFilter[t].empNumber,note:e.EmployeeNomineeRestrictionFilter[t].note})}return e.ConfirmRestrictionFilter&&(p.extraParams||(p.extraParams={}),p.extraParams.ConfirmRestrictionFilter=e.ConfirmRestrictionFilter),e.PastPeriodRestrictionFilter&&(p.extraParams||(p.extraParams={}),p.extraParams.PastPeriodRestrictionFilter=e.PastPeriodRestrictionFilter),e.attachment&&e.attachment.length>0&&e.attachment[0].base64&&(p.attachment={base64:e.attachment[0].base64,filename:e.attachment[0].name,filesize:e.attachment[0].size,filetype:e.attachment[0].type}),p}assignLeave(e){return this._http.assignLeave(e).then(za.handleLeaveAssignResponse).catch((e=>Promise.reject(e)))}applyLeave(e){return this._http.applyLeave(e).then(za.handleLeaveAssignResponse).catch((e=>Promise.reject(e)))}static handleLeaveAssignResponse(e){if(e.data.success)return Promise.resolve({result:!0,leaveRequestId:e.data.leaveRequestId,errors:[],type:"",data:[]});{let t=[];switch(e.data.type){case"restricted":t=e.data.data.messages;break;case"error":t.push(e.data.message);break;case"overlap":t.push("Overlapping Leave Request Found");break}return Promise.resolve({result:!1,leaveRequestId:null,errors:t,type:e.data.type,data:e.data.data})}}getAllowedLeavePeriodOffset(e){return new Promise(((t,o)=>{try{this._http.getAllowedLeavePeriodOffset(e).then((e=>{const o=parseInt(e.data.data.offset,10);t(Number.isFinite(o)?o:1)}))}catch(a){o(a)}}))}goToLeaveRequest(e,t,o){this.getLeaveRequestDetailState(e,t,o).then((e=>{setTimeout((()=>{this._ngServices.$state.go(e.name,e.params)}),1e3)}))}getLeaveRequestUrl(e,t){return new Promise(((o,a)=>{try{this.getLeaveRequestDetailState(e,t,null).then().then((e=>{const t=this._ngServices.$state.href(e.name,e.params,{absolute:!0});o(t)}))}catch(i){a(i)}}))}static getBoundaryDates(e,t){const o=ee(e.currentLeavePeriod[0],"yyyy-MM-dd"),a=ee(e.currentLeavePeriod[1],"yyyy-MM-dd");if(!o||!a)return null;const i=(0,Ta.Z)(a,1),l=i.getUTCFullYear()-o.getUTCFullYear(),n=(0,Pa.Z)(o,t*l),r=(0,Va.Z)((0,Ba.Z)(o,(t+1)*l),1);return{min:n,max:r}}static getModifiedModelForExcludeOptions(e,t){t.includes("half_day")&&("half_day_am"!==e.value.singleDuration.id&&"half_day_pm"!==e.value.singleDuration.id||(e.value.singleDuration=ba),"half_day_am"!==e.value.startDayDuration.id&&"half_day_pm"!==e.value.startDayDuration.id||(e.value.startDayDuration=ba),"half_day_am"!==e.value.endDayDuration.id&&"half_day_pm"!==e.value.endDayDuration.id||(e.value.endDayDuration=ba)),t.includes("specify_time")&&("specify_time"===e.value.singleDuration.id&&(e.value.singleDuration=ba),"specify_time"===e.value.startDayDuration.id&&(e.value.startDayDuration=ba),"specify_time"===e.value.endDayDuration.id&&(e.value.endDayDuration=ba)),t.includes("half_day")&&t.includes("specify_time")&&(e.value.partialDays=aa)}static getDurationOptionsWithoutFullDay(e){const t=e.slice();return t.push(Yo),this.getDurationOptions(t)}static getPartialDayOptions(e){return e.includes(Xo)&&e.includes(oa)?xa.filter((e=>e.id===aa)):xa}static getDurationOptions(e){const t=[],o=e.slice();return e.includes(Xo)&&(o.push(ta),o.push(ea)),ka.forEach((e=>{o.includes(e.id)||t.push(e)})),t}static getDuration(e,t,o){const a={duration:"full_day",halfday:"AM",time:{from:t,to:o}};switch(e){case ta:a.duration="half_day",a.halfday="AM";break;case ea:a.duration="half_day",a.halfday="PM";break;case oa:a.duration="specify_time";break}return a}static formatTime(e){if(e){const[t,o]=e.split(":");return t+":"+o}return e}static isLunchTimeSelected(e,t,o,a){if(!e||!t)return!1;const i=ee(e,"HH:mm"),l=ee(t,"HH:mm"),n=o?ee(o,"HH:mm:ss"):null,r=a?ee(a,"HH:mm:ss"):null;return!!(n&&r&&i&&l)&&(i.getTime()>=n.getTime()&&l.getTime()<=r.getTime())}static calculateShiftLength(e,t,o,a){if(!e||!t)return null;const i=ee(e,"HH:mm"),l=ee(t,"HH:mm");if(i&&l&&l.getTime()>=i.getTime()){let e=l.getTime()-i.getTime(),t=o?ee(o,"HH:mm:ss"):null,n=a?ee(a,"HH:mm:ss"):null;if(t&&n&&(i>t&&(t=i),l<n&&(n=l),n>t)){const o=n.getTime()-t.getTime();e=e>o?e-o:0}if(e>=0){const t=e/6e4,o=Math.round(t%60),a=Math.floor(t/60);return this.zeroPadNumber(a)+":"+this.zeroPadNumber(o)}}return null}static resetSpecifyTimeValuesInModel(e,t=!0,o=!0,a=!0){t&&(e.value.startDaySpecifyTimeFrom=this.formatTime(e.value.startDayWorkSchedule.duration.start_time),e.value.startDaySpecifyTimeTo=this.formatTime(e.value.startDayWorkSchedule.duration.end_time)),a&&(e.value.singleSpecifyTimeFrom=this.formatTime(e.value.startDayWorkSchedule.duration.start_time),e.value.singleSpecifyTimeTo=this.formatTime(e.value.startDayWorkSchedule.duration.end_time)),o&&(e.value.endDaySpecifyTimeFrom=this.formatTime(e.value.endDayWorkSchedule.duration.start_time),e.value.endDaySpecifyTimeTo=this.formatTime(e.value.endDayWorkSchedule.duration.end_time))}formatDateString(e,t){if(e){const o=ee(e,t.jsSavingFormat);if(o)return J(o,t.jsDisplayFormat,{locale:t.locale})}return""}getTileCardItemWithBalanceDetails(e,t,o,a,i,l){if(a){let a=0,n=0,r=0,s=0,d=!1,c=null;const m=[],u=La()(new Date).format("YYYY-MM-DD");t.forEach((t=>{if(t.leaveTypeId==o&&t.toDate&&(a=parseFloat(t.entitlement_total.toString()),n=parseFloat(t.unused),d=te(t.toDate,u,"yyyy-MM-dd"),d||(s+=a,r+=n),n>0&&(!d||i===ca)&&t.shortTermEntitlementIds)){const o={id:t.shortTermEntitlementIds,label:Fa("Entitlement"),subHeader:Fa("{{leaveAmount}} {{leaveUnit}}",{leaveAmount:a.toFixed(e.numberOfDecimals),leaveUnit:"Balance Days"==e.subText?Fa("Day(s)"):Fa("Hour(s)")})+" ("+Fa("{{leaveAmount}} Available",{leaveAmount:n.toFixed(e.numberOfDecimals)})+")",description:Fa("Valid from {{fromDate}} to {{toDate}}",{fromDate:this.formatDateString(t.fromDate,l),toDate:this.formatDateString(t.toDate,l)}),fromDate:t.fromDate,toDate:t.toDate};c&&(d||o.toDate==c.toDate)||(c=o),m.push(o)}})),e.number=r.toString(),e.entitlementTotal=s,m.length>0&&(e.shortTermEntitlements=m,e.selectedEntitlement=c)}else{const a=t.find((e=>e.leaveTypeId==o));a&&(e.number=a.unused,e.entitlementTotal="string"===typeof a.entitlement_total?parseFloat(a.entitlement_total):a.entitlement_total)}e.entitlementUsed=e.entitlementTotal-parseFloat(e.number)}static zeroPadNumber(e,t=2){return("0".repeat(t)+e).slice(-t)}}const Ma=ce(),Oa=function(e){return"string"===typeof e?!!e&&""!==e.trim()||Ma(Te):"number"===typeof e?!Number.isNaN(e)||Ma(Te):Array.isArray(e)?!!e&&0!==e.length||Ma(Te):"object"===typeof e&&null!==e||Ma(Te)},Ra=function(e){return"string"!==typeof e||Ma(Te)},_a=function(e){return"string"!==typeof e||""===e.trim()||Ma(Pe)},$a=function(e){return function(t){return!t||new String(t).length<=e||Ma("Should not exceed {{amount}} characters",{amount:e})}},ja=function(e="yyyy-mm-dd",t="yyyy-MM-dd"){return function(o){if(!o)return!0;let a;const i=[Ma("Sun"),Ma("Mon"),Ma("Tue"),Ma("Wed"),Ma("Thu"),Ma("Fri"),Ma("Sat")],l=[Ma("Sunday"),Ma("Monday"),Ma("Tuesday"),Ma("Wednesday"),Ma("Thursday"),Ma("Friday"),Ma("Saturday")],n=[Ma("Jan"),Ma("Feb"),Ma("Mar"),Ma("Apr"),Ma("May"),Ma("Jun"),Ma("Jul"),Ma("Aug"),Ma("Sep"),Ma("Oct"),Ma("Nov"),Ma("Dec")];switch(e){case"yyyy-mm-dd":a=()=>/^(19|20)\d\d[-](0[1-9]|1[012])[-](0[1-9]|[12][0-9]|3[01])$/.test(o);break;case"dd-mm-yyyy":a=()=>/^(0[1-9]|[12][0-9]|3[01])[-](0[1-9]|1[012])[-](19|20)\d\d$/.test(o);break;case"mm-dd-yyyy":a=()=>/^(0[1-9]|1[012])[-](0[1-9]|[12][0-9]|3[01])[-](19|20)\d\d$/.test(o);break;case"yyyy-dd-mm":a=()=>/^(19|20)\d\d[-](0[1-9]|[12][0-9]|3[01])[-](0[1-9]|1[012])$/.test(o);break;case"mm-yyyy-dd":a=()=>/^(0[1-9]|1[012])[-](19|20)\d\d[-](0[1-9]|[12][0-9]|3[01])$/.test(o);break;case"dd-yyyy-mm":a=()=>/^(0[1-9]|[12][0-9]|3[01])[-](19|20)\d\d[-](0[1-9]|1[012])$/.test(o);break;case"yyyy/mm/dd":a=()=>/^(19|20)\d\d[/](0[1-9]|1[012])[/](0[1-9]|[12][0-9]|3[01])$/.test(o);break;case"yyyy mm dd":a=()=>/^(19|20)\d\d[\s](0[1-9]|1[012])[\s](0[1-9]|[12][0-9]|3[01])$/.test(o);break;case"yyyy-M-dd":{const e=new RegExp(`^(19|20)\\d\\d[-](${n.join("|")})[-](0[1-9]|[12][0-9]|3[01])`,"i");a=()=>e.test(o);break}case"DD, dd-M-yyyy":{const e=new RegExp(`^(${l.join("|")}), (0[1-9]|[12][0-9]|3[01])-(${n.join("|")})-(19|20)\\d\\d$`,"i");a=()=>e.test(o);break}case"D, dd M yyyy":{const e=new RegExp(`^(${i.join("|")}), (0[1-9]|[12][0-9]|3[01]) (${n.join("|")}) (19|20)\\d\\d$`,"i");a=()=>e.test(o);break}default:a=()=>!0;break}const r=null!==ee(o,t);return!!r||(a()?Ma("Invalid Date"):Ma(`Expected format: ${e}`))}},Ua=function(e){if(!e)return!0;const t=ee(e,"HH:mm");return!!t||Ma("Should be a valid time in HH:MM AM/PM format")},Za=function(e){return function(t){return Number.isNaN(parseFloat(t))||parseFloat(t)<=e||Ma(`Should be less than or equal ${e}`)}},Ha=function(e,t){return function(o){var a;return Number.isNaN(parseFloat(o))||Math.floor(parseFloat(o))===parseFloat(o)||(null===(a=o.split(".")[1])||void 0===a?void 0:a.length)<=t||Ma(`Enter a Positive Numeric Less than ${e}`)}},qa=function(e){return""==e||/^\d+$/.test(e)&&!Number.isNaN(parseFloat(e))||Ma("Should be a number")},Ga=function(e){return""==e||/^[-]?[0-9]*(?:\.[0-9]+)?$/.test(e)&&!Number.isNaN(parseFloat(e))||null==e||Ma("Should be a number")},Wa=function(e,t,o=!1,a=!1){return function(i){const l=t&&(null===t||void 0===t?void 0:t.decimals)?null===t||void 0===t?void 0:t.decimals:2;let n=null===e||void 0===e?void 0:e.decimal_separator,r=null===e||void 0===e?void 0:e.thousand_separator;n=n||".",r=r||",";let s="^(\\d+|\\d{1,3}(\\"+r+"\\d{3})*)",d="^(\\d+|(\\"+r+"\\d{3})*)";s=l>0?s+"(\\"+n+"\\d{1,"+l+"})?":s,d=l>0?d+"(\\"+n+"\\d{1,"+l+"})?":d,s=o?s+"%?":s;const c="string"===typeof i&&(null===i||void 0===i?void 0:i.includes("%")),m="string"===typeof i&&(null===i||void 0===i?void 0:i.includes(","));s=o&&c?d+"%?":s;const u=new RegExp(s+"$");return a&&m&&(s=d),""==i||u.test(i)&&!Number.isNaN(parseFloat(i))||null==i||Ma(Pe)}},Ka=function(e){return""==e||/^[+]?[0-9]*(?:\.[0-9]+)?$/.test(e)&&!Number.isNaN(parseFloat(e))||null==e||Ma("Should be a positive number")},Qa=function(e,t,o="yyyy-MM-dd"){return!e||!t||te(e,t,o)},Ja=function(e,t,o="yyyy-MM-dd"){return!e||!t||oe(e,t,o)},Ya=function(e,t,o="yyyy-MM-dd"){return!e||!t||ae(e,t,o)},Xa=(e,t,o={allowSameDate:!1,dateFormat:"yyyy-MM-dd"})=>a=>{const i="function"===typeof e?e():e;if(o.allowSameDate){const e=Ma("string"===typeof t?t:"End date should be on or after start date");return Ya(a,i)||Ja(a,i,o.dateFormat)||e}{const e="string"===typeof t?t:Ma("End date should be after start date");return Ja(a,i,o.dateFormat)||e}},ei=function(e,t,o="HH:mm"){return!e||!t||1===ie(e,t,o)},ti=function(e,t,o="HH:mm"){return!e||!t||-1===ie(e,t,o)},oi=function(e,t,o="HH:mm"){return!e||!t||0===ie(e,t,o)},ai=(e,t,o,a,i)=>l=>{const n="function"===typeof e?e():e,r="function"===typeof t?t():t,s="function"===typeof o?o():o,d="function"===typeof a?a():a,c=za.isLunchTimeSelected(n,r,s,d);return!c||i},ii=(e,t,o={allowSameTime:!1,timeFormat:"HH:mm"})=>a=>{const i="function"===typeof e?e():e,l="string"===typeof t?t:Ma("End time should be after start time"),n=Ua(i),r=Ua(a);return!0!==n||!0!==r||(o.allowSameTime?oi(a,i)||ti(a,i,o.timeFormat)||l:ti(a,i,o.timeFormat)||l)},li=function(e){return function(t){if(null===t||void 0===t)return!0;if(Array.isArray(t)){if(!t.find((t=>t.size>e)))return!0}else if(t.size&&t.size<=e)return!0;return Ma("Attachment size exceeded")}},ni=function(e){return function(t){if(null===t||void 0===t||t&&null===t[0].type)return!0;if(Array.isArray(t)){if(!t.find((t=>-1===e.findIndex((e=>e===t.type)))))return!0}else if(t&&e.findIndex((e=>e===t.type))>-1)return!0;return Ma("File type not allowed")}},ri=function(e){return function(t){if(null===t||void 0===t||t&&null===t[0].type)return!0;if(Array.isArray(t)){if(!t.find((t=>-1===e.findIndex((e=>e===t.type)))))return!0}else if(t&&e.findIndex((e=>e===t.type))>-1)return!0;return Ma("Attachment type invalid")}},si=function(e){return!!e&&(!e||/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9]+)+$/.test(e)||Ma("Expected format: admin@example.com"))},di=function(e){return!e||/^[0-9+\-/)(\s]+$/.test(e)||Ma("Allows numbers and only + - / ( )")},ci=function(e){return!e||""===e||-1===e.indexOf("http")&&-1===e.indexOf("/")||/^(https?:\/\/)?((w{3}\.)?)facebook\.com\/.*/i.test(e)||Ma(Le)},mi=function(e){return/.*([^\s])$/.test(e)&&/^(?!\s.*$).*/.test(e)&&/^(?!\/.*$).*/.test(e)||Ma(Le)},ui=function(e){return!e||""===e||-1===e.indexOf("http")&&-1===e.indexOf("/")||/^(https?:\/\/)?((w{3}\.)?)([a-zA-Z]+\.)?linkedin\.com\/.*/i.test(e)||Ma(Le)},pi=function(e){return!e||""===e||-1===e.indexOf("http")&&-1===e.indexOf("/")||/^(https?:\/\/)?((w{3}\.)?)twitter\.com\/.*/i.test(e)||Ma(Le)},vi=(e,t,o={allowSameDate:!1,dateFormat:"yyyy-MM-dd"})=>a=>{const i="function"===typeof e?e():e;if(o.allowSameDate){const e=Ma("string"===typeof t?t:"Start date should be on or before end date");return Ya(a,i)||Qa(a,i,o.dateFormat)||e}{const e=Ma("string"===typeof t?t:"Start date should be before end date");return Qa(a,i,o.dateFormat)||e}},hi=(e,t,o={allowSameTime:!1,timeFormat:"HH:mm"})=>a=>{const i="function"===typeof e?e():e,l="string"===typeof t?t:Ma("Start time should be before end time"),n=Ua(a),r=Ua(i);return!0!==n||!0!==r||(o.allowSameTime?oi(a,i)||ei(a,i,o.timeFormat)||l:ei(a,i,o.timeFormat)||l)},gi=(e,t,o)=>a=>{const i="string"===typeof o?o:Ma(`Should be a number between ${e}-${t}`);return!0===qa(a)&&parseFloat(a)>=e&&parseFloat(a)<=t||i},yi=(e,t,o)=>a=>{const i=null===a||void 0===a?void 0:a.replaceAll(",",""),l="string"===typeof o?o:Ma(`Should be a number between ${e}-${t}`);return parseFloat(i)>=e&&parseFloat(i)<=t||l},fi=(e,t=!1,o=!1,a=!1)=>i=>{let l=e;if("string"===typeof e){const t=e.replaceAll(",","");l=JSON.parse(JSON.stringify(Number(t)))}const n="string"===typeof i&&(null===i||void 0===i?void 0:i.includes("%")),r="string"===typeof i&&(null===i||void 0===i?void 0:i.includes(",")),s=null===i||void 0===i?void 0:i.replaceAll(",","");return!(!a||!n)||(t&&n||!t?o&&r?Ma(Pe):Number.isNaN(parseFloat(s))||parseFloat(s)<=l||Ma("Please enter a value less than or equal to {{maximum}}",{maximum:e||""}):!o||!r||Ma(Pe))},bi=(e,t,o=!0,a=!1)=>{const i=e=>{const t=o?e.trim():e;return a?t:t.toLowerCase()},l="string"===typeof t?t:Ma(Ie);return t=>{const o=t?i(t):t;return!t||-1===e.findIndex((e=>i(e)===o))||l}};var Ci=(0,i.defineComponent)({name:"buzzFileUploadModal",props:{modalData:{type:Object},invalidFilesSelected:Boolean,maxImageSizeReachedFileSelected:Boolean,maxFileLengthReachedProp:Boolean,modelText:String,empProfilePic:String,shareId:String,isKudosPost:Boolean,isVideoPost:Boolean,modalStatus:{type:String,default:"Create"},shareType:{type:Number,default:0},videoUrl:String},emits:["update:create","update:edit"],data:()=>({showModal:!1,uploadImages:[],resizeStyleOnSubmit:!1,postStatus:" ",postVideoLink:"",validURL:"",isInvalidURL:!1,textAreaParentHeight:"60px",onLoading:!1,isInvalidFilesSelected:!1,isMaxImageSizeReachedFileSelected:!1,maxFileLengthReached:!1,fileUploadKey:0,showScrollBar:!1,rules:{post:[$a(63535)]}}),computed:{getVideoUrl(){return this.postVideoLink},maxImageSizeUploadLimit(){return this.$store.state.buzz.MaxImageUploadSize},getValidVideoUrl(){return this.validURL},disablePostButton(){return 0===this.uploadImages.length&&""===this.postStatus.trim()}},components:{"oxd-button":jt.Z,"oxd-dialog":Wo.Z,"oxd-close-btn":Ko.Z,"profile-pic":P.Z,"oxd-divider":ro.Z,"oxd-loader":co.Z,"oxd-file-input":so.Z,"oxd-form":no.Z,"oxd-input-field":lo.Z,"oxd-alert":Jo.Z,"oxd-close-button":Ko.Z,"oxd-label":Qo.Z},methods:{onUrlPaste(e){var t,o;this.validURL="",this.postVideoLink=(null===(t=e.clipboardData)||void 0===t?void 0:t.getData("Text"))?null===(o=e.clipboardData)||void 0===o?void 0:o.getData("Text"):"";const a={url:this.postVideoLink};this.ngServices.webservice.call($,"POST",a).then((e=>{e.data.data.valid?(this.validURL=e.data.data.url,this.isInvalidURL=!1):(this.validURL="",this.postVideoLink="",this.isInvalidURL=!0)})).catch((()=>(this.onLoading=!1,this.$toast.error({title:this.$t(fe),message:this.$t(Ee)}))))},removeImage(e){this.uploadImages=this.uploadImages.filter((function(t){return t.index!==e})),this.uploadImages.length<=5&&(this.maxFileLengthReached=!1)},onInput(e){this.resizeStyleOnSubmit=!1,e.target,e.target.style.height="auto",e.target.style.height=`${e.target.scrollHeight}px`,this.textAreaParentHeight="auto",parseInt(e.target.style.height)>400?this.showScrollBar=!0:this.showScrollBar=!1},addMoreImages(e){var t;this.fileUploadKey++;let o=0,a=0;const i=["image/png","image/gif","image/png","image/jpeg","image/jpg"];e&&(this.maxFileLengthReached=!1,e.length+(null===(t=this.uploadImages)||void 0===t?void 0:t.length)>5?this.maxFileLengthReached=!0:(e.forEach((e=>{if(i.includes(null===e||void 0===e?void 0:e.type))if(1e-6*e.size<this.maxImageSizeUploadLimit){let t={index:this.uploadImages.length,name:e.name,src:ge.base64ImageConvertion(null===e||void 0===e?void 0:e.type,null===e||void 0===e?void 0:e.base64),base64:e.base64,size:e.size,type:e.type};this.uploadImages.push(t)}else a++;else o++})),this.isInvalidFilesSelected=o>0,this.isMaxImageSizeReachedFileSelected=a>0))},savePost(){var e;if(this.isVideoPost){let e;this.onLoading=!0,!this.isInvalidURL&&this.validURL&&(e=this.postStatus.trim()?{type:"video",text:this.postStatus?this.postStatus:"",video_link:this.validURL}:{type:"video",video_link:this.validURL},this.ngServices.webservice.call(I+"/"+Number(this.shareId),"PATCH",e).then((e=>(this.onLoading=!1,this.$emit("update:edit",e.data.data[0]),this.$toast.success({title:this.$t(ye),message:this.$t(be)})))).catch((()=>(this.onLoading=!1,this.$toast.error({title:this.$t(fe),message:this.$t(Ee)})))))}else if(this.uploadImages&&this.uploadImages.length>0&&!this.onLoading){this.onLoading=!0;const e=[];this.uploadImages.forEach((t=>{let o={name:t.name,size:t.size,type:t.type,base64:t.base64};e.push(o)}));const t={type:"photo",text:this.postStatus?this.postStatus:"",photos:e};"Create"===this.modalStatus.trim()?this.ngServices.webservice.call(B,"POST",t).then((e=>(this.onLoading=!1,this.$emit("update:create",e.data.data[0]),this.$toast.success({title:this.$t(ye),message:this.$t(be)})))).catch((()=>(this.onLoading=!1,this.$toast.error({title:this.$t(fe),message:this.$t(Ee)})))):this.ngServices.webservice.call(I+"/"+Number(this.shareId),"PATCH",t).then((e=>(this.onLoading=!1,this.$emit("update:edit",e.data.data[0]),this.$toast.success({title:this.$t(ye),message:this.$t(be)})))).catch((()=>(this.onLoading=!1,this.$toast.error({title:this.$t(fe),message:this.$t(Ee)}))))}else if((null===(e=this.postStatus)||void 0===e?void 0:e.trim())&&!this.onLoading){this.onLoading=!0;const e={type:"status",text:this.postStatus?this.postStatus:""};"Create"===this.modalStatus.trim()?this.ngServices.webservice.call(B,"POST",e).then((e=>(this.onLoading=!1,this.$emit("update:create",e.data.data[0]),this.$toast.success({title:this.$t(ye),message:this.$t(be)})))).catch((()=>(this.onLoading=!1,this.$toast.error({title:this.$t(fe),message:this.$t(Ee)})))):this.ngServices.webservice.call(I+"/"+Number(this.shareId),"PATCH",e).then((e=>(this.onLoading=!1,this.$emit("update:edit",e.data.data[0]),this.$toast.success({title:this.$t(ye),message:this.$t(be)})))).catch((()=>(this.onLoading=!1,this.$toast.error({title:this.$t(fe),message:this.$t(Ee)}))))}},onHideFileValidation(){this.isInvalidFilesSelected=!1},onHideFileLengthValidation(){this.maxFileLengthReached=!1},onHideMaxFileSizeValidation(){this.isMaxImageSizeReachedFileSelected=!1},resize(){const e=document.getElementById("AddPostTextArea");e&&(e.style.height=this.$refs.textArea.$el.children[1].children[0].scrollHeight+"px")}},mounted(){this.uploadImages=this.modalData?this.modalData:[],this.postStatus=this.modelText?this.modelText:"",this.isInvalidFilesSelected=this.invalidFilesSelected,this.isMaxImageSizeReachedFileSelected=this.maxImageSizeReachedFileSelected,this.maxFileLengthReached=this.maxFileLengthReachedProp,this.postVideoLink=this.videoUrl?this.videoUrl:"",this.validURL=this.videoUrl?this.videoUrl:"",this.$nextTick((()=>{this.textAreaParentHeight="auto",parseInt(this.$refs.textArea.$el.children[1].children[0].scrollHeight)>400?this.showScrollBar=!0:this.showScrollBar=!1,this.resize()}))}});const Si=(0,Re.Z)(Ci,[["render",Go],["__scopeId","data-v-b59c4776"]]);var wi=Si;const Ei={class:"video-header"},ki={class:"header-text"},xi={class:"video-body"},Ni=["src"],Ai={class:"post-body"},Di={key:0,class:"iframe-container","data-test":"iframeContainer"},Ti=["src"],Pi={key:0},Vi={class:"video-footer"};function Bi(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-divider"),s=(0,i.resolveComponent)("profile-pic"),d=(0,i.resolveComponent)("oxd-input-field"),c=(0,i.resolveComponent)("oxd-label"),m=(0,i.resolveComponent)("oxd-text"),u=(0,i.resolveComponent)("oxd-loader"),p=(0,i.resolveComponent)("oxd-button"),v=(0,i.resolveComponent)("oxd-form"),h=(0,i.resolveComponent)("oxd-dialog");return(0,i.openBlock)(),(0,i.createBlock)(h,{style:(0,i.normalizeStyle)({maxWidth:"522px",padding:"0 1.4rem 0 1.4rem",borderRadius:"1.2rem"})},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(v,{onSubmitValid:e.shareVideo,ref:"form","data-test":"form"},{default:(0,i.withCtx)((()=>{var o;return[(0,i.createElementVNode)("div",Ei,[(0,i.createElementVNode)("div",ki,(0,i.toDisplayString)(e.$t("Share Video")),1)]),(0,i.createVNode)(r),(0,i.createElementVNode)("div",xi,[(0,i.createElementVNode)("div",{class:"post-header",style:(0,i.normalizeStyle)({height:e.textAreaParentHeight})},[(0,i.createVNode)(s,null,{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("img",{src:e.empProfilePic},null,8,Ni)])),_:1}),(0,i.createVNode)(d,{class:(0,i.normalizeClass)({VideoPostTextArea:!0,VideoPostTextAreainitialStyle:e.resizeStyleOnSubmit,showScrollBar:e.showScrollBar}),rows:1,placeholder:e.$t("What's on your mind?"),onInput:t[0]||(t[0]=t=>e.onInput(t)),modelValue:e.postStatus,"onUpdate:modelValue":t[1]||(t[1]=t=>e.postStatus=t),"data-test":"postTextArea",rules:e.rules.post,type:"textarea"},null,8,["class","placeholder","modelValue","rules"])],4),(0,i.createElementVNode)("div",Ai,[(0,i.createElementVNode)("div",null,[(0,i.createVNode)(c,{label:e.$t("Paste Video Url")},null,8,["label"]),(0,i.createVNode)(d,{rows:1,modelValue:e.getVideoUrl,"onUpdate:modelValue":t[2]||(t[2]=t=>e.getVideoUrl=t),placeholder:e.$t("Paste Video Url"),onPaste:t[3]||(t[3]=t=>e.onUrlPaste(t)),"data-test":"urlInputField",type:"textarea"},null,8,["modelValue","placeholder"]),e.isInvalidURL?((0,i.openBlock)(),(0,i.createBlock)(m,{key:0,"data-test":"invalidUrlText",tag:"span",style:{"{\n                  display":"flex","font-size":"12px","font-weight":"600",color:"#eb0910"}},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("This url is not a valid url of a video or it is not supportedby the system")),1)])),_:1})):(0,i.createCommentVNode)("",!0)]),e.getValidVideoUrl?((0,i.openBlock)(),(0,i.createElementBlock)("div",Di,[(0,i.createElementVNode)("iframe",{class:"iframe-content",src:e.getValidVideoUrl,sandbox:"allow-same-origin allow-scripts allow-popups allow-presentation",allowfullscreen:""},null,8,Ti)])):(0,i.createCommentVNode)("",!0)]),e.onLoading?((0,i.openBlock)(),(0,i.createElementBlock)("div",Pi,[(0,i.createVNode)(u,{withContainer:!0,class:"oxd-loader-images-view"})])):(0,i.createCommentVNode)("",!0)]),(0,i.createElementVNode)("div",Vi,[(0,i.createVNode)(p,{class:"post-btn",label:e.$t("Share"),size:"medium",displayType:"main",type:"submit",disabled:null===(o=e.$refs.form)||void 0===o?void 0:o.isFromInvalid,"data-test":"SubmitButton"},null,8,["label","disabled"])])]})),_:1},8,["onSubmitValid"])])),_:1},8,["style"])}var Ii=o(48942),Li=(0,i.defineComponent)({name:"videoPost",props:{empProfilePic:String},emits:["update:create"],data:()=>({showModal:!1,resizeStyleOnSubmit:!1,postStatus:" ",postVideoLink:"",validURL:"",isInvalidURL:!1,textAreaParentHeight:"60px",onLoading:!1,showScrollBar:!1,rules:{post:[$a(63535)]}}),components:{"oxd-button":jt.Z,"oxd-dialog":Wo.Z,"profile-pic":P.Z,"oxd-divider":ro.Z,"oxd-label":Qo.Z,"oxd-text":Ii.Z,"oxd-input-field":lo.Z,"oxd-form":no.Z},computed:{getVideoUrl(){return this.postVideoLink},getValidVideoUrl(){return this.validURL}},methods:{onInput(e){this.resizeStyleOnSubmit=!1,e.target,e.target.style.height="auto",e.target.style.height=`${e.target.scrollHeight}px`,this.textAreaParentHeight="auto",parseInt(e.target.style.height)>400?this.showScrollBar=!0:this.showScrollBar=!1},onUrlPaste(e){var t,o;this.validURL="",this.postVideoLink=(null===(t=e.clipboardData)||void 0===t?void 0:t.getData("Text"))?null===(o=e.clipboardData)||void 0===o?void 0:o.getData("Text"):"";const a={url:this.postVideoLink};this.ngServices.webservice.call($,"POST",a).then((e=>{e.data.data.valid?(this.validURL=e.data.data.url,this.isInvalidURL=!1):(this.validURL="",this.postVideoLink="",this.isInvalidURL=!0)})).catch((()=>(this.onLoading=!1,this.$toast.error({title:this.$t(fe),message:this.$t(Ee)}))))},shareVideo(){let e;this.isInvalidURL||!this.validURL||this.onLoading||(e=this.postStatus.trim()?{type:"video",text:this.postStatus,video_link:this.validURL}:{type:"video",video_link:this.validURL},this.onLoading=!0,this.ngServices.webservice.call(B,"POST",e).then((e=>(this.onLoading=!1,this.$emit("update:create",e.data.data[0]),this.$toast.success({title:this.$t(ye),message:this.$t(be)})))).catch((()=>(this.onLoading=!1,this.$toast.error({title:this.$t(fe),message:this.$t(De)})))))}}});const Fi=(0,Re.Z)(Li,[["render",Bi],["__scopeId","data-v-3d3cab1a"]]);var zi=Fi;const Mi=e=>((0,i.pushScopeId)("data-v-7fdd7dc1"),e=e(),(0,i.popScopeId)(),e),Oi={class:"kudos-header"},Ri={class:"header-text"},_i={class:"kudos-body"},$i=["src"],ji={class:"post-body"},Ui={key:0,class:"card-image-wrapper"},Zi={class:"kudos-content"},Hi={class:"kudos-msg"},qi={key:0,class:"kudos-emp-name"},Gi={key:1,class:"kudos-emp-profile"},Wi=["src"],Ki={key:1,class:"card-image-wrapper"},Qi=Mi((()=>(0,i.createElementVNode)("div",{class:"kudos-wrapper",style:{"background-image":"url('images/default_kudos.jpg')"}},null,-1))),Ji=[Qi],Yi={class:"post-grid"},Xi={key:0,class:"auto-complete-img"},el=["src"],tl={key:0},ol={class:"kudos-footer"},al={class:"kudos-required"};function il(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-divider"),s=(0,i.resolveComponent)("profile-pic"),d=(0,i.resolveComponent)("oxd-input-field"),c=(0,i.resolveComponent)("oxd-icon-button"),m=(0,i.resolveComponent)("oxd-input-group"),u=(0,i.resolveComponent)("oxd-form-row"),p=(0,i.resolveComponent)("oxd-grid-item"),v=(0,i.resolveComponent)("oxd-grid"),h=(0,i.resolveComponent)("oxd-loader"),g=(0,i.resolveComponent)("oxd-button"),y=(0,i.resolveComponent)("oxd-form"),f=(0,i.resolveComponent)("oxd-dialog");return(0,i.openBlock)(),(0,i.createBlock)(f,{style:(0,i.normalizeStyle)({maxWidth:"600px",padding:"0 1.4rem 0 1.4rem",borderRadius:"1.2rem"})},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Oi,[(0,i.createElementVNode)("div",Ri,(0,i.toDisplayString)(e.$t("Kudos")),1)]),(0,i.createVNode)(r),(0,i.createVNode)(y,{onSubmitValid:e.postKudos,ref:"form"},{default:(0,i.withCtx)((()=>{var o,a,l;return[(0,i.createElementVNode)("div",_i,[(0,i.createElementVNode)("div",{class:"post-header",style:(0,i.normalizeStyle)({height:e.textAreaParentHeight})},[(0,i.createVNode)(s,null,{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("img",{src:e.empProfilePic},null,8,$i)])),_:1}),(0,i.createVNode)(d,{class:(0,i.normalizeClass)({KudosPostTextArea:!0,initialKudosTextAreaStyle:e.resizeStyleOnSubmit,showScrollBar:e.showScrollBar}),rows:1,placeholder:e.$t("Place Your Kudos"),onInput:t[0]||(t[0]=t=>e.onInput(t)),modelValue:e.postStatus,"onUpdate:modelValue":t[1]||(t[1]=t=>e.postStatus=t),type:"textarea","data-test":"postTextArea",rules:e.rules.post},null,8,["class","placeholder","modelValue","rules"])],4),(0,i.createElementVNode)("div",ji,[e.getKudosImage?((0,i.openBlock)(),(0,i.createElementBlock)("div",Ui,[(0,i.createElementVNode)("div",{class:"kudos-wrapper",style:(0,i.normalizeStyle)({backgroundImage:`url(data:${e.getKudosImage.image_type};base64,${e.getKudosImage.background_image})`})},[(0,i.createElementVNode)("div",Zi,[(0,i.createElementVNode)("div",Hi,(0,i.toDisplayString)(e.$t(e.getKudosImage.kudos)),1),(null===(o=e.kudos_receiver)||void 0===o?void 0:o.id)?((0,i.openBlock)(),(0,i.createElementBlock)("div",qi,(0,i.toDisplayString)(e.kudos_receiver.label),1)):(0,i.createCommentVNode)("",!0),(null===(a=e.kudos_receiver)||void 0===a?void 0:a.id)?((0,i.openBlock)(),(0,i.createElementBlock)("div",Gi,[(0,i.createElementVNode)("img",{src:e.kudos_receiver.image,class:"kudos-profile"},null,8,Wi)])):(0,i.createCommentVNode)("",!0)])],4)])):((0,i.openBlock)(),(0,i.createElementBlock)("div",Ki,Ji)),(0,i.createElementVNode)("div",Yi,[(0,i.createVNode)(v,{cols:1},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(p,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(u,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(m,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{required:"",label:e.$t("Employee Name"),modelValue:e.kudos_receiver,"onUpdate:modelValue":t[2]||(t[2]=t=>e.kudos_receiver=t),createOptions:e.syncFunction,rules:e.rules.name,type:"autocomplete",placeholder:e.$t("Type for hints")},{iconSlot:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{name:"oxd-search",class:"search-button"})])),option:(0,i.withCtx)((({data:e})=>[e.image?((0,i.openBlock)(),(0,i.createElementBlock)("span",Xi,[(0,i.createElementVNode)("img",{src:e.image},null,8,el)])):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("span",null,(0,i.toDisplayString)(e.label),1)])),_:1},8,["label","modelValue","createOptions","rules","placeholder"]),(0,i.createVNode)(d,{label:e.$t("Kudos"),required:"",modelValue:e.kudos_type,"onUpdate:modelValue":t[3]||(t[3]=t=>e.kudos_type=t),options:e.kudosTypes,type:"select",rules:e.rules.name},null,8,["label","modelValue","options","rules"])])),_:1})])),_:1})])),_:1})])),_:1})])]),e.onLoading?((0,i.openBlock)(),(0,i.createElementBlock)("div",tl,[(0,i.createVNode)(h,{withContainer:!0,class:"oxd-loader-images-view"})])):(0,i.createCommentVNode)("",!0)]),(0,i.createVNode)(r,{class:"bottom-divider"}),(0,i.createElementVNode)("div",ol,[(0,i.createElementVNode)("small",al,"* "+(0,i.toDisplayString)(e.$t("Required")),1),(0,i.createVNode)(g,{class:"post-btn",label:e.$t("Post"),size:"medium",displayType:"main",type:"submit",disabled:null===(l=e.$refs.form)||void 0===l?void 0:l.isFromInvalid},null,8,["label","disabled"])])]})),_:1},8,["onSubmitValid"])])),_:1},8,["style"])}var ll=o(95854),nl=o(92308),rl=o(14806),sl=o(92536),dl=(0,i.defineComponent)({name:"kudosPost",props:{empProfilePic:String},emits:["update:create"],data:()=>({showModal:!1,resizeStyleOnSubmit:!1,showScrollBar:!1,postStatus:"",postVideoLink:"",textAreaParentHeight:"60px",onLoading:!1,empPageLimit:5,kudos_receiver:null,kudos_type:null,rules:{name:[Oa],post:[$a(63535)]}}),components:{"oxd-button":jt.Z,"oxd-dialog":Wo.Z,"profile-pic":P.Z,"oxd-divider":ro.Z,"oxd-form":no.Z,"oxd-form-row":rl.Z,"oxd-input-field":lo.Z,"oxd-grid":ll.Z,"oxd-grid-item":nl.Z,"oxd-input-group":sl.Z,"oxd-loader":co.Z},computed:{getKudosImage(){var e;return null===(e=this.kudosTypes)||void 0===e?void 0:e.find((e=>{var t;return e.id==(null===(t=this.kudos_type)||void 0===t?void 0:t.id)}))},kudosTypes(){return this.$store.state.buzz.kudosTypes}},methods:{onInput(e){this.resizeStyleOnSubmit=!1,e.target,e.target.style.height="auto",e.target.style.height=`${e.target.scrollHeight}px`,this.textAreaParentHeight="auto",parseInt(e.target.style.height)>400?this.showScrollBar=!0:this.showScrollBar=!1},syncFunction(e){return(0,A.mG)(this,void 0,void 0,(function*(){return new Promise((t=>{if(e){let o={serverFetch:!0};this.ngServices.webservice.get(F,{filter:{emp_name_or_emp_number:e},limit:this.empPageLimit,includePhoto:!0},o).then((e=>{const o=e.data.data;t(o.map((e=>{var t,o,a,i;return{id:e.empNumber,label:ge.getEmployeeName(e.firstName,"",e.lastName,e.terminated),image:(null===(t=null===e||void 0===e?void 0:e.empProfilePic)||void 0===t?void 0:t.type)&&(null===(o=null===e||void 0===e?void 0:e.empProfilePic)||void 0===o?void 0:o.image)?ge.base64ImageConvertion(null===(a=null===e||void 0===e?void 0:e.empProfilePic)||void 0===a?void 0:a.type,null===(i=null===e||void 0===e?void 0:e.empProfilePic)||void 0===i?void 0:i.image):"images/default.png"}})))})).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(Ee)})))}else t([])}))}))},postKudos(){var e,t;if(!this.onLoading){let o;this.onLoading=!0,o={type:"kudos",text:this.postStatus?this.postStatus:"",kudos_receiver_id:null===(e=this.kudos_receiver)||void 0===e?void 0:e.id,kudos_type:null===(t=this.kudos_type)||void 0===t?void 0:t.id},this.ngServices.webservice.call(B,"POST",o).then((e=>(this.onLoading=!1,this.$emit("update:create",e.data.data[0]),this.$store.commit("buzz/clearMostKudos"),this.getKudos(),this.$toast.success({title:this.$t(ye),message:this.$t(be)})))).catch((()=>(this.onLoading=!1,this.$toast.error({title:this.$t(fe),message:this.$t(Ee)}))))}},getKudos(){const e={include:"MostKudos",includePhoto:!0,pageNo:1,limit:100,webservice:this.ngServices.webservice};this.$store.dispatch("buzz/getMostKudos",e).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)})))}}});const cl=(0,Re.Z)(dl,[["render",il],["__scopeId","data-v-7fdd7dc1"]]);var ml=cl;const ul=(0,i.defineComponent)({methods:{getSelectedUserEmployeeStats(){if("buzz.profile"===this.ngServices.$state.currentState.name){const e={empNo:this.ngServices.$stateParams.empId,webservice:this.ngServices.webservice};this.$store.dispatch("buzz/getSelectedUserEmployeeStats",e).catch((()=>this.$toast.error({title:fe,message:De})))}}}});var pl=(0,i.defineComponent)({name:"buzzCreatePost",mixins:[ul],components:{Sheet:io.Z,"oxd-button":jt.Z,"profile-pic":P.Z,"oxd-input-field":lo.Z,"oxd-form":no.Z,"oxd-divider":ro.Z,"oxd-file-input":so.Z,"buzz-fileupload-modal":wi,"oxd-loader":co.Z,"video-post":zi,"kudos-post":ml},props:{empProfilePic:String},computed:{maxImageSizeUploadLimit(){return this.$store.state.buzz.MaxImageUploadSize},kudosEnabled(){return this.$store.state.buzz.kudosFeatureEnabled},pageNo(){return this.$store.state.buzz.pageNo},pageLimit(){return this.$store.state.buzz.pageLimit},empNoFilter(){return this.$store.state.buzz.selectedEmpNo},orderFilter(){return this.$store.state.buzz.orderFilterForShare},orderByFilter(){return this.$store.state.buzz.orderByFilterForShare},isCreateProfileClickTriggered(){return this.$store.state.buzz.CreateProfileClickTriggered}},data:()=>({isFocused:!1,postStatus:"",resizeStyleOnSubmit:!1,showScrollBar:!1,showBuzzFileModal:!1,showBuzzVideoModal:!1,showBuzzKudosModal:!1,imageDetails:[],onLoading:!1,isInvalidFilesSelected:!1,isMaxImageSizeReachedFileSelected:!1,maxFileLengthReached:!1,profileKey:0,fileUploadKey:0,rules:{post:[$a(63535)]}}),emits:["update:create"],methods:{onInput(e){var t;this.resizeStyleOnSubmit=!1,e.target,(null===(t=e.target.value)||void 0===t?void 0:t.length)>0?this.isFocused=!0:this.isFocused=!1,e.target.style.height="auto",e.target.style.height=`${e.target.scrollHeight}px`,parseInt(e.target.style.height)>400?this.showScrollBar=!0:this.showScrollBar=!1},routeToProfile(){this.isCreateProfileClickTriggered||(this.$store.commit("buzz/setCreateProfileClickTriggered",!0),this.$store.commit("buzz/setIsPostsFetchActionTriggred",!0),this.$store.commit("buzz/isCurrentLoggedEmployeeProfile",!0),this.$store.commit("buzz/setEmpNoFilter",this.empNo),this.$store.commit("buzz/setOrderFilter",null),this.$store.commit("buzz/setOrderByFilter",null),this.ngServices.$state.go("buzz.profile",{empId:this.empNo}),this.loadProfile())},loadProfile(){this.$store.commit("buzz/emptySharePosts"),this.$store.commit("buzz/setPageNo",1);const e={pageNo:this.pageNo,limit:this.pageLimit,order:this.orderFilter,orderBy:this.orderByFilter,empNumber:this.empNoFilter?[this.empNoFilter]:null,webservice:this.ngServices.webservice};this.$store.commit("buzz/setLoading",!0),this.$store.commit("buzz/setMorePostsLoading",!0),this.$store.dispatch("buzz/getSharePosts",e).then((()=>{this.profileKey++})).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)})))},saveStatus(){var e;if((null===(e=this.postStatus)||void 0===e?void 0:e.trim())&&!this.onLoading){this.onLoading=!0;const e={type:"status",text:this.postStatus};this.ngServices.webservice.call(B,"POST",e).then((e=>(this.$store.commit("buzz/unshitSharePost",e.data.data[0]),this.postStatus="",this.isFocused=!1,this.resizeStyleOnSubmit=!0,this.onLoading=!1,this.getSelectedUserEmployeeStats(),this.$toast.success({title:this.$t(ye),message:this.$t(be)})))).catch((()=>(this.resizeStyleOnSubmit=!0,this.onLoading=!1,this.$toast.error({title:this.$t(fe),message:this.$t(Ee)}))))}},onFileUpload(e){this.fileUploadKey++;let t=0,o=0;const a=["image/png","image/gif","image/png","image/jpeg","image/jpg"];e&&(e.length>5?this.maxFileLengthReached=!0:(this.maxFileLengthReached=!1,e.forEach(((e,i)=>{if(a.includes(null===e||void 0===e?void 0:e.type))if(1e-6*e.size<this.maxImageSizeUploadLimit){let t={index:i,name:e.name,src:ge.base64ImageConvertion(null===e||void 0===e?void 0:e.type,null===e||void 0===e?void 0:e.base64),base64:e.base64,size:e.size,type:e.type};this.imageDetails.push(t)}else o++;else t++})),this.isInvalidFilesSelected=t>0,this.isMaxImageSizeReachedFileSelected=o>0),this.showBuzzFileModal=!0)},onShareVideo(){this.showBuzzVideoModal=!0},onPostKudos(){this.showBuzzKudosModal=!0},onPhotoStatusUpdate(e){this.showBuzzFileModal=!1,this.$store.commit("buzz/unshitSharePost",e),this.postStatus="",this.imageDetails=[],this.isFocused=!1,this.resizeStyleOnSubmit=!0,this.getSelectedUserEmployeeStats()},onVideoUpdate(e){this.showBuzzVideoModal=!1,this.$store.commit("buzz/unshitSharePost",e),this.getSelectedUserEmployeeStats()},onKudosUpdate(e){this.showBuzzKudosModal=!1,this.$store.commit("buzz/unshitSharePost",e),this.getSelectedUserEmployeeStats()},onCloseBuzzFileModal(){this.showBuzzFileModal=!1,this.imageDetails=[]},onCloseVideoModal(){this.showBuzzVideoModal=!1},onCloseKudosModal(){this.showBuzzKudosModal=!1}}});const vl=(0,Re.Z)(pl,[["render",ao],["__scopeId","data-v-026b17b2"]]);var hl=vl,gl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAGSklEQVRogdWbebBOZRzHP/e4mWpalEqYQjVxpw1FZEqS9kFKTOtU2qZ1yKR9pUappsSQmqa07xmT0dzbghopRcrQkEGLBoXUZOQ2j/t9r+M8Z3vOOfd6ff57f89ynt97nuW3PKeitraWBqQNcBRQBbQFWgEHAc31yA3AcuBXYBmwCJgP/Ag0yMCKVrgpcBrQFzgaONSqkY6VwHfAdGAKsK6oARal8GHAecBFQEurNB9G2feAl4B5eTvLq7B5g0OBC6yShuET4BHg66y9Z1XYA24E7rJKGodJwGjgj8ZQ+FhgrKbxjuRPYLime2o8xwFfA0wrA2UNzYBngfutkhhc3vATwMWWtDz4FDi/SIUnAAMsaXnxLXAu8FfcqNIo/ArQx5KWJwuBk+JGlrSGR+9EyiKLbool9RGn8HXA5Za0/OmmFxVK1JTuJLOuKFYA3wA/AGuAjbKVdwf20a5/XMG7/81ajqkUNhtAa0vqjnng28CMlM5AR2CgLLdmVqk7h8hBiVV4JHB1zgc9KWV/skrSYZS9VG9prxzjmC77vp6gwvtr2mVlgQY5P0cffg4AxiftvAkMlA2+leCmNTK+bSzmjfYqUFnD7/LCnKypAE/7f/rfsHHM51rV0zEhhSPRUhtTe+BAoAmwWs6+8X6WWC22x5waD1jSdAzQPkKlr/odGTt7I0HZQVqPnQPPC2Ic/nfkmIQxXu3vCSlLYkRJ4dIb3lVHhytxlk0bDb6bVRLPIg1wZkSt14Devt+l6IjxzQ+3am/jeGBpaQ33sorTMSiiljHkP8+gLJry7wI3WSV1XKgYmKEa6KIZ1AOYbNXexpX4Nq1+VnEyk3wP9tNH06+pVeLG3YqmBNkCPCOZCUJs9pUPA/6xWtSxdVaYKe1p43A57/7Wof5fQN4+ZipmxcyimkBbs+mdrOkdZEmMLlVG2WNiKkTxYoiyhuctiTtvAmOAL9TydWDPQC+/RSjbN0GXHpVaA658EFL/jIRNIw03SMES3RXVeFVHy6aEPu60JNvTxSh8hCWOZ21E1DDuaErD4oCy6C0fqT2maYLC/bTM4uhgFG4XUyGMWdo4/FRp/eahSUzb9y2JzRhLYtPWk/3swvchdXtbEnfMOXp9xrZDgL0tqU1zL4MbttySuC+LKO7Tmq2KKI9ieIQ8iOfJynJhfUjd/SxJdvoDnwEPp1T8WmBfSxrOFqNwRWhRNGHH0S6WJD9DpPgooEVEb55mRWpMg38dh7aHJcmQ8nDgKmAOcK8MDj8PJmx2QSoqFcdNOyUIeahhqSUplt10Rl8BjFMkpWeGJJ5XKZ/0YKsomrB1NSPG2C8SE/S7NUd/670MbmF3S1KX6thgScuPFZ58WhfahRgZxql+aidQeLGXMase5j+PDbHAyo15nuzVzY4DG2JJ6vrIaik1FjM9ZQFmOz6wTcQO+VZBLmKJVUrTjitg9qwpTWkUUnHlsYj6t+kCSl6qFYcapTP4xAgrLy0m5FQf4pmWoQNzNj5uSesYquhimFWWBhNgGKzZV2Kx/OKsTPYrbKbOlxk6ukSWUBgmrtXVcZA18ryGWSV1ZDVhfymFifyB+J5ag1kwkcSPYtqZW3jnACcoSVcK2WxUuGau8roLrJbbMB7Zh5pZrtyuoKOVW6rWDbosGBfthYxtk+iqPyQunx1H61K0JNjBiJhGSTwqzyVveDaISbFMDRlrWh7yh4bC0qVT9Y9mZZn+uOqcinbWxtfDKknPSiX36wlTuKXWVFweKA0fK5Rao0tkaWiiQP7Z2qXzcibwVZLCaPeNOnJcWS/nYrbs9p91YbRWm1cL2eZddda2Kui5LwO3BIVRCqNz63RLWgylNVX0ei8xPyqwGKcw8nM7WNLyZrMSAqHuatLO10+H9s7CJs3KUGXTKLxWm8gqq6Q86Z905SLN2WbuWZya87JLQ7NaO/KcpOe43Kat0DFzilWyY1molGpYrtrCxXqpVcc76hZ8GBN15SKVsuT4BKCT7jN2tEoah5VyCJzd2rwfeQzW4Z71cx1X1ilL+FxC6jSSoj7jMVcVLysgIR7FGnliE3VyZKboD7W6yw4+Sxfd8ipZo7tbs2IuqzjRkJ/imasUxtMxd0iM8ibDaO5fhCXvTCDAvDljZ5uwsTleTAyqECXrAf4Hl0F5JPfRfwoAAAAASUVORK5CYII=";const yl=e=>((0,i.pushScopeId)("data-v-0ef1346a"),e=e(),(0,i.popScopeId)(),e),fl={ref:"cardsWrapper",class:"cardsWrapper"},bl={key:1,class:"empty-posts","data-test":"currentEmployeeNoPost"},Cl={key:2,class:"empty-posts","data-test":"otherEmployeeNoPost"},Sl={key:3,class:"oxd-loader-text-wrapper"},wl=yl((()=>(0,i.createElementVNode)("img",{src:gl},null,-1)));function El(e,t,o,a,l,n){const r=(0,i.resolveComponent)("buzz-post"),s=(0,i.resolveComponent)("oxd-loader");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createElementVNode)("div",fl,[e.cardData.length>0?((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,{key:0},(0,i.renderList)(e.cardData,(t=>((0,i.openBlock)(),(0,i.createBlock)(r,{class:"buzz-content","data-test":"buzzPostWrapper",key:t.shareId,cardData:t,empProfilePic:e.loggedEmployeeProfile},null,8,["cardData","empProfilePic"])))),128)):(0,i.createCommentVNode)("",!0),e.isCurrentLoggedEmployee&&e.ngServices.$stateParams.empId===e.empNo&&0===e.cardData.length&&!e.onLoading?((0,i.openBlock)(),(0,i.createElementBlock)("div",bl,(0,i.toDisplayString)(e.$t("Your profile doesn't have any posts yet")),1)):0!==e.cardData.length||e.onLoading?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",Cl,(0,i.toDisplayString)(e.$t("This profile doesn't have any posts yet")),1)),e.onLoading?((0,i.openBlock)(),(0,i.createElementBlock)("div",Sl,[(0,i.createVNode)(s,{withContainer:!0,class:"oxd-loader-text-view"})])):(0,i.createCommentVNode)("",!0)],512),e.isNewPostsAvailable&&"buzz.home"===e.ngServices.$state.currentState.name?((0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"post-availibility","data-test":"IsPostAvaialableDiv",onClickOnce:t[0]||(t[0]=t=>e.loadHomePage()),key:e.homeButtonKey},[wl,(0,i.createElementVNode)("span",null,(0,i.toDisplayString)(e.$t("New Posts Available")),1)],32)):(0,i.createCommentVNode)("",!0)],64)}var kl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAMAAAC/MqoPAAAC/VBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+G1NxwAAAA/nRSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmaGlqa2xtbm9wcXJzdHV2d3h5ent8fX5/gIGCg4SFhoeIiYqLjI2Oj5CRkpOUlZaXmJmam5ydnp+goaKjpKWmp6ipqqusra6vsLGys7S1tre4ubq7vL2+v8DBwsPExcbHyMnKy8zNzs/Q0dLT1NXW19jZ2tvc3d7f4OHi4+Tl5ufo6err7O3u7/Dx8vP09fb3+Pn6+/z9/k0wXH8AAAABYktHRP7SAMJTAAAQ20lEQVR42u2dC3AU5R3Av3skl+ddHrxCQJKQQHIhBBJAkgvIqw61FAEHqmMdxhkHOtLaqY62ahWVjiNjW9FqtbW1o/goFvGBVhQcFQskgYRH7i458iAYCAGTQC4JIblXbze53Xvt7re7/73cbvKfIdzsfbe7v/0/vv/3XBUiJVavT1GlopgklKBDerVGj+LiUbIW6TXEt95jRJlE4q/aQP7AoEbixd1D/tfjJv72DxF/B68Tf1125OxFAzeQ3eW2E8f6HOiq51pP7xCCExXasHXahOQ4JA+5Ye+8+Ld9UOgHbkXykgO3wZxHjabLjBzshtUoXW7o6WDoBrmh66HCnG5AbuhI54DRul525FBqH8voyWMXPV5+6ED5lzpWfuixYxddB4SuG9f6OPq4wY9rXdnoMWMXfdzgx9HHVIQf1/p4mBvX+rivj2t93NfHDV4x6Fot+5MZJTo325caIK1r5Kd1KHS1/NDV41ofRxcc5iQw+JjM6TqDOn7AO1Ok50KHR0r0nVZLfb9QdFitx5WVl83N8D/nteMH9rZJ5usPe/9dslit1pMCHsARN5vwO1fZq13hTjK0p4B35cYmR8KVu/jlri0VibwuUgWGPmc/42mGXpsIiH6MsZyjYc+ja7AnnBwHQte94mI7UedWFRj6cY5ynQd3rpuMcZFaGPRs9kfolQPToNBrcMo1vvWLbI6LnAJBz21zc0r3WiD0U5jl3OadS9hsrQ4CPavVjSHOx1Qg6HW46AT9YmlTmviPbsKqlP7wdgxw5cYpxu3Sor8wF7PgXR9CTOLgdcsTJW2+bNiCXfS2j3URRmf2MbVW9J0YXuRReNWbqogaPOqUUuu/z+RTetMjkdV6l4ToU7bxK//UrGhBF23wm3nO5dLtiKjBS6n1DXx/cEdWJLXeLV3lljSft9LWwaG7OAv/IB16Pn+PWQRn8NzoLdIZvADrLYDTupOz8DnptD6V/08mRhD9+g/SaT2F/0/SIujr5zzSVW4C0HVwvu4Qbu/itZ7A/ycqLZjWB8Sgi02pY8Tdu0it98oN3YmghBO9FSgpBEJ3u8RdUgWk9VFAd4ApHfXITOui0Wm1X+IoeaVHsehcQ1o2FF3ocFGOE/2slOiaUdA6fdOWsYZOG7x1P3vJRinRBZwAcAGx5y/s3zdEGXofnNYR+7C6syXK0PsB0Sex1+pDUebr/XAGjwoF121IK3Otz8cN8DPWN3/dpyj02ZjomsPT0eD/vq2q7lEMeiYmep53molu5Urkrj925GijEtC1qZi+7hsLVhcW3ocuvbXr8uhE+F44dPbtVfrp1k2R//GM31pXjU6EvwIX4NnRbZ4QrY9I6oeZo6L1y3Ba1+PWbcGTHxLvFY8uoIPrEtzjZp8jaKWtI2TGy/zRMHiPDc7g2Ud562lXD9FQrHj0Jt6/uGCHszR2dLpJWxzy3Wnx6M/w/sVRFCGtDzWHD/Ck1IpHP/IF318cQnC+zjohy+ZkjHII1QAspniS54R3x6coQgZPRzlVSCun6zwA+vH9/Mp/chnQ4HV46DOTQ5UOsYRmO79Z86+gyGs9nL1DoJ/+gE/pr74BVDouemGYKAeycOoJPgNJzyBIrbMZvKOJpW6rhEE/+x5+2f9+hyJl8GcdzAbffhFoudwz2IMKnqcgrqfGQqcTmsScMEqHQW/ajVvyoxMIVHR4aWwIZRUUOtqBuaGx60mQy9FVSozAAF8Nht76Nl653RaQy3mw0OlrzQlRQQ0YOqbah/6AgNG1WAE+ROuWPjj083twSr3egoCFBb1xiLnxUoXg0BHOcgD3LhRBrdOuPi01nKuDodce5i7zaXMk0VlcHVbr6GWQIoAGX8+cxvbWg6J/xjl03P4V1LWwKjcrs9ZPuEDRBzibJQc9kdS6s5EZvQqBoqOvuQrUg10Kx9ebBqm0Nz9slANE5+xiHkKR1Dod5WYmSo3OOUXaGFGtszTW29qB0TnXKW9MhUePwXCvEFc/hmDR7/wRVwnDmzGjonWGKAeGfu+/uMus+Tg9YuhOGzN6JSR6/oF/4ixtWH36buC9YBjRm6kAH5sXHG5PwqFnv3wa87U5U3ef+HFktE7be36wm528AYVe/I7tfnwnnvfZ0Y0aOHSNAFevRDDoFZ/U3sVvUsriPY2PiIz1dCKr5g7wRoYoJw49ZmPV4TX8B9iznmvdBfS2IpWAdptP6yr2oRO2J5O09dfTBN/z0Ht/MmPpNZzEUzGsg2G2pEtPtaaagrpjL2eI1Xry71qeF06OYjef3psv3teZbr+FIk/MCvrqKBKHnvTA2WcniLTVDeY92WJ9XcVt72oGVxeGrv3luV2TxTuqeqP5iVhpfJ07lxOGvqLmJaC0LP7pumWSRHjmAO+sEY4+6YNDRXDpWN6hP8aI0DV/rZ/pE4y+vHY9aCqqfvCrDHBfdzcwolcigeiqHQenImCpqF4g/MFxBfi0DCZX54mueulxCfaizDzIcwsHD5fWaXsvQjBaV/11G5JCDJ+XCiNnQmfO5bro4Sg1n27S+7ciaST1swxQg6ddPbh3qtIjCD3vOSSVTHqbR3POLULrlX6Pjcc8mNcSJUNHyx/GL+viQnfbGKv1Kr/fDuhwDWphFZJQ+mZ14DZfBmgVDIVtMLfk+j5N+z7ooaTTa1/U+JPeHpaSHCU9CmfwzPZu9VvUrcaeATRpvaToaOsEAQbPlcYGR7lj/haNrfWfSryxduxGAeganlqvRkLC3FoksdwtwODDi5kR3V/rqssT8cJcwpUEidE9My7g0V2Zwl6O7qJR9wRWSj3pbgEGv1pqcqRaDeTrjVQGHzzSWOUWYvDrkOSyGsjgzTgJDT56/E+kR1+VCKN1C2OArxKC/qtU6dH1W2DQzUzoHv8Aj7QY6PHxU9c9gSIgz6o/7ro+CGjwQU3WswF7bGrd4uoRUNE9/zyA1m9Q7dLgkcbKwNorsnAgwoFeT30fPNIYhO5SHHodY4Cvkj26GzfAB7VY+81K1zpjtV7tVLqvM6JXIoVrvYdqCQSPNFYjhfu6meptDB5prFK61hntvaUDKdzXzUwBvhIp3eAZu2iqkNIN3oIZ4JWHfonaHztopPHGaSR/X3cLarbVDCld64yN9WPBJdVOhaEzdtFUh6APyQ99ECKN9aIPKgvdzbT6of2CErTOdsut1CyhzMCXDxxBSkevw7Z3xRk8Y4CvVLzWmQL84EnFozMFeN/SB+WiO6iNNNWB7bYwe34prF63UTjZiRyurjSt4yc08ozwWOiBUa7tQhh0h6LQmRrrx5DiDb6OD7qiDL6/1fcpZhaXqysswluoXozZAStLBk8p3uCZAnzNoOINnqkjOuwmpgozeAatV6Ixa/BhJzarB+SHfoPpi25qq5D4gMWD5y+GRe+VHzrjxstn6FxOw1Wre9Ht8kPv4WvvykHv5Y5yRu4o563cZFe7XXfw1HrIkNMIOveL8GTj6kx124khBvQuuaEz3nDbNd+ntGmcCQ2B3iY39DZuey/GcHXv7iZ/90xL1yfIxc/tXW2vc7dY5+Kh79tH/KdPMaj1Go0excWjJK3agHQJKFmL9GT9GEfuQK8Zft2GgZycEx8HkZuQ+ZR7ONrYyVHEATJfcdmRsxd5Zwr3uJ19xDG7y2V391yzsw6OMmwce66DCZ0UZ3e3KAi1Aa9GBh7NfxBH68eQAuVOp9tPHNTbETT9/se3KZB82YA/odtvk4aA40yrpNXyJS/ap2MI8AH2PnBGcehZB1KY6raAWTTHHUpDn/h5BmMuV4yR0MhX9MfdwUJvbvS9/+G1CiOP/SKEfIBaz50WcHyyssg174eQu6mtdtBy/8PM7+fVRlZZI8Of2uTATEjli1gpIwvSDSMxKGnk/hJHutUThoP6zJVszbYivISGHV2TO4fYckmtD7pD33o/3x3qR/qDkmIC7pBKd3URaCOY+eZy7Ogumy210GgsnZsc/U7A0G6rZPwB5h6BU41GY+H8qG7fZfm2pdDY/d731Z/qFIk+fM4ZhQWFxjm6qCS3p/oWfhT4v2vjmxUgYc7V0rKfGMMkLCA/2nIheskLbkLDP8I7LMRTjc0r9VpAtipq0OvCB/hKSPRhGSIfgCG3sMRYFBVJgyVsgPew7KUDobaoqARWfEOlsX59ko2zpUWPikpgsm/hR1qn39Hdm+ENPlTa273vo9TeNEqVQAe15KUEt9kGnMg6R6sSoBOaEswoJ00OPwqVAI3u3x/Vb4k0un8lkDIzIpWAJSx6lVMsuvqj5Ve/b2luabbxH6W6VlPz1kglUJwUAa2nZGO1XXAj/KZ/+z51NjSctTWcE7ZMSpU9xzjHWCBFDHSn+BZ+rPB/+e/aT8VqnW4dT6ioIEy5qcFma7DxHaP1tLR8QtSCRAgwxoOiN/WFi3IetiiHhz4luMfBSA7dd9TbrPWWDv614H5fLQj2AGrDunpjp2j0foYnMmW592+3xWrh/wCGa8HhB1AofvzuZFh09iEnLa8YEk7Sliwholkz8QBaBD2AmOmi8yAK3TATGx0rzM22YGYn3WbiAQh737SugODPFraX4aTOcFFu3hnR6Oj5h/jcRxfhAuYrghjiCozGfGMOz93DbQW+Tw/5beVkT3OLR0c3b1qfxROiy1xvbhD4AIgYkFOInwe8So2mvnsnffTL1QgA3Ss5q1auTOMNcbVFSAygGoM53rYAxp7KP/uP79PZXPro9h1A6F7RlCy9pSJFAEMnaQE/CHsAE4z5s435N7HcqTvDd2pDt1+xWw/BoZNJbdHSJUsnCWIQ9QAS8/MLZuXlht2I8Avq7UmrvqSPutJ6YdFJKViy5Bahbz7xPoC6erPQKWupOV4fyJkV2CW08QPKxrfTR0+VIAnQSUc0rawoEPzzq1aLtfa04LnJ0/Jyc3PzcodzoYZiagj9oN+I1MsPSIVO5nMLy1fNF9EjcclitVprrwu//tTM6UloH7WtoLbbr1L4+btSohOSXm4yLRCTiTmb6ywWcxPEphmL/NsrOa1So5NPu9hkWjZRXM9OI2EB9eJml+143K+VxBWM4LqPVPkmU3meyJP0WeusZku7UA3U+fU9790UMXRSJi8qr1ggui/C2xaqsdbxbwo87b/l629ejCw6IQkLK8rLDeLPc8ls9tpAH/4P1r/v3/ZZXB15dDLxKTSZTFkAJ/K0mi1maz3OeoU1e/1XNA6kOEYHnZRMU1nZfJB3szqbCAtoZq0Etv054FKHl6FRRCetf0FZedkEmHMN1lvMFktr2Ne1pL1wT+CB5x4bbfThro6ysvICqLGY3voz3kog8OXX2s3PBletrJ2xkUMnJLm4vMIEt924fyWgvmPHrJAYMbkzatDJRm9ReVl5NuAJ24kQYHw8N/SbBu73fkd+WsSUhSWmijipr/KPLVGIPpL4li6dIeUV7nsjStFJmVl2c9lcqYY7jQ3RjE72vcwvMS2VYBi2a5In2tFHOj1MpQtgByH3345kgU6mPiUlkN7/6E75oA+rvxSi3UfILd/JDJ2QmLkAwd+Rel2G6CDqryrDqWGjEp0Ygo8vXbT4ZoGvacda0BidWqckY0FJqYDxHrpjXr7oZOafX1pi4tflPf2iMtBJSZrHI/c5NxMpCJ2KfiUY02/euQerISEndCL6aWd7cz+OAS+8BY2y0jolExaWLlzAPO5eckq56KRkEvzhJjvY010KRx9x/5LS4H6vN+5DYwGdlJyKklI6/PXMOz920Mnc31g8t7jY2+3dffsRNLbQh2VK9tRvOzHL/h/JY96qtqI3VwAAAABJRU5ErkJggg==";const xl=e=>((0,i.pushScopeId)("data-v-114510d2"),e=e(),(0,i.popScopeId)(),e),Nl={class:"post-content"},Al={class:"buzz-card-header"},Dl={class:"header-details"},Tl=["src"],Pl=["src"],Vl={class:"header-content",ref:"postHeader"},Bl={class:"header-date"},Il={class:"header-config"},Ll={class:"list-items"},Fl={role:"menuitem",class:"oxd-userdropdown-link"},zl={role:"menuitem",class:"oxd-userdropdown-link"},Ml={class:"buzz-card-body"},Ol=["innerHTML"],Rl={key:2,class:"card-text-wrapper"},_l=["innerHTML"],$l={key:8,class:"card-image-wrapper",ref:"postImages"},jl={key:0,class:"img-single"},Ul=["src"],Zl={key:1},Hl=["src"],ql=["src"],Gl={key:2},Wl=["src"],Kl=["src"],Ql=["src"],Jl={key:3},Yl=["src"],Xl=["src"],en=["src"],tn=["src"],on={key:4,class:"image-more-container"},an=["src"],ln=["src"],nn=["src"],rn=["src"],sn={class:"buzz-image-more"},dn={class:"buzz-image-more-text"},cn=xl((()=>(0,i.createElementVNode)("img",{src:kl},null,-1))),mn={key:9,class:"card-image-wrapper",ref:"postImages"},un={class:"kudos-content"},pn={class:"kudos-msg"},vn={class:"kudos-emp-name"},hn={class:"kudos-emp-profile"},gn=["src"],yn={key:10,class:"iframe-container",ref:"postVideos"},fn=["src"],bn={key:0,class:"share-header","data-test":"shareHeader"},Cn={class:"header-details"},Sn={class:"header-content"},wn={class:"header-name"},En={class:"header-date"},kn={key:1,class:"buzz-card-body",ref:"postBody","data-test":"shareBody"},xn=["innerHTML"],Nn={key:2,class:"card-text-wrapper",ref:"postText"},An={key:4,class:"margin-top-1"},Dn=["innerHTML"],Tn=["innerHTML"],Pn=["innerHTML"],Vn=["innerHTML"];function Bn(e,t,o,a,l,n){var r,s,d,c,m,u,p,v,h,g,y,f,b,C,S,w,E,k,x,N,A,D,T,P,V,B;const I=(0,i.resolveComponent)("profile-pic"),L=(0,i.resolveComponent)("oxd-icon-button"),F=(0,i.resolveComponent)("oxd-icon"),z=(0,i.resolveComponent)("oxd-dropdown-menu"),M=(0,i.resolveComponent)("confirmation-modal"),O=(0,i.resolveComponent)("oxd-divider"),R=(0,i.resolveComponent)("buzz-post-actions"),_=(0,i.resolveComponent)("comment-list"),$=(0,i.resolveComponent)("Sheet"),j=(0,i.resolveComponent)("buzz-image-viewer"),U=(0,i.resolveComponent)("buzz-fileupload-modal");return(0,i.openBlock)(),(0,i.createElementBlock)("div",Nl,[(0,i.createVNode)($,{class:"sheet-width"},{default:(0,i.withCtx)((()=>{var o,a,l,n,r,s,d,c,m,u,p,v,h,g,y,f,b,C,S,w,E,k,x,N,A,D,T,P,V,B,$,j,U,Z,H,q,G,W,K,Q,J,Y,X,ee,te,oe,ae,ie,le,ne,re,se,de,ce,me,ue,pe,ve,he,ge,ye,fe,be,Ce,Se,we,Ee,ke,xe,Ne,Ae,De,Te,Pe,Ve,Be,Ie,Le,Fe,ze,Me,Oe;return[(0,i.createElementVNode)("div",Al,[(0,i.createElementVNode)("div",Dl,[(0,i.createVNode)(I,{onClick:t[0]||(t[0]=t=>{var o,a,i,l,n,r,s,d,c,m;return e.onClickEmployee(null===(a=null===(o=e.cardData)||void 0===o?void 0:o.Employee)||void 0===a?void 0:a.sharedEmpNumber,null===(l=null===(i=e.cardData)||void 0===i?void 0:i.Employee)||void 0===l?void 0:l.sharedEmpName,null===(r=null===(n=e.cardData)||void 0===n?void 0:n.Employee)||void 0===r?void 0:r.workEmail,null===(d=null===(s=e.cardData)||void 0===s?void 0:s.Employee)||void 0===d?void 0:d.jobTitle,null===(m=null===(c=e.cardData)||void 0===c?void 0:c.Employee)||void 0===m?void 0:m.location)})},{default:(0,i.withCtx)((()=>{var t;return[0===Number(null===(t=e.cardData)||void 0===t?void 0:t.shareType)?((0,i.openBlock)(),(0,i.createElementBlock)("img",{key:0,src:e.ProfilePicUrl},null,8,Tl)):((0,i.openBlock)(),(0,i.createElementBlock)("img",{key:1,src:e.ShareProfilePicUrl},null,8,Pl))]})),_:1}),(0,i.createElementVNode)("div",Vl,[(0,i.createElementVNode)("div",{class:"header-name","data-test":"userName",onClick:t[1]||(t[1]=t=>{var o,a,i,l,n,r,s,d,c,m;return e.onClickEmployee(null===(a=null===(o=e.cardData)||void 0===o?void 0:o.Employee)||void 0===a?void 0:a.sharedEmpNumber,null===(l=null===(i=e.cardData)||void 0===i?void 0:i.Employee)||void 0===l?void 0:l.sharedEmpName,null===(r=null===(n=e.cardData)||void 0===n?void 0:n.Employee)||void 0===r?void 0:r.workEmail,null===(d=null===(s=e.cardData)||void 0===s?void 0:s.Employee)||void 0===d?void 0:d.jobTitle,null===(m=null===(c=e.cardData)||void 0===c?void 0:c.Employee)||void 0===m?void 0:m.location)})},(0,i.toDisplayString)((null===(a=null===(o=e.cardData)||void 0===o?void 0:o.Employee)||void 0===a?void 0:a.sharedEmpName)?null===(n=null===(l=e.cardData)||void 0===l?void 0:l.Employee)||void 0===n?void 0:n.sharedEmpName:null===(d=null===(s=null===(r=e.cardData)||void 0===r?void 0:r.post)||void 0===s?void 0:s.Employee)||void 0===d?void 0:d.empName),1),(0,i.createElementVNode)("div",Bl,(0,i.toDisplayString)(e.sharedDate),1)],512)]),(0,i.createElementVNode)("div",Il,[(null===(m=null===(c=this.cardData)||void 0===c?void 0:c.Employee)||void 0===m?void 0:m.sharedEmpNumber)==this.empNo||this.isAdmin?((0,i.openBlock)(),(0,i.createBlock)(z,{key:0,class:"oxd-userdropdown"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(L,{name:"three-dots"})])),content:(0,i.withCtx)((()=>{var o,a;return[(0,i.createElementVNode)("div",Ll,[(0,i.createElementVNode)("li",{role:"none",onClick:t[2]||(t[2]=t=>e.confirmationModalDisplay())},[(0,i.createElementVNode)("a",Fl,[(0,i.createVNode)(F,{style:{paddingRight:"10px"},name:"trash","with-container":!1}),(0,i.createTextVNode)(" "+(0,i.toDisplayString)(e.$t("Delete Post")),1)])]),(null===(a=null===(o=this.cardData)||void 0===o?void 0:o.Employee)||void 0===a?void 0:a.sharedEmpNumber)==this.empNo?((0,i.openBlock)(),(0,i.createElementBlock)("li",{key:0,role:"none",onClick:t[3]||(t[3]=t=>e.onEdit())},[(0,i.createElementVNode)("a",zl,[(0,i.createVNode)(F,{style:{paddingRight:"10px"},name:"pencil","with-container":!1}),(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Edit Post")),1)])])):(0,i.createCommentVNode)("",!0)])]})),_:1})):(0,i.createCommentVNode)("",!0),e.showConfimationModal?((0,i.openBlock)(),(0,i.createBlock)(M,{key:1,onConfirmationModalAction:t[4]||(t[4]=t=>e.confirmationModalAction(t))})):(0,i.createCommentVNode)("",!0)])]),(0,i.createVNode)(O,{style:{borderTopColor:"#ebedf1",margin:"0px"}}),(0,i.createElementVNode)("div",Ml,[1===Number(null===(u=e.cardData)||void 0===u?void 0:u.shareType)&&(null===(p=e.getSanitizedHtml(e.customizedSharePostContent))||void 0===p?void 0:p.IsShowHtmlContent)?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,class:"card-text-wrapper",innerHTML:e.shareTextParser(null===(v=e.getSanitizedHtml(e.customizedSharePostContent))||void 0===v?void 0:v.htmlString)},null,8,Ol)):(0,i.createCommentVNode)("",!0),1===Number(null===(h=e.cardData)||void 0===h?void 0:h.shareType)&&(null===(g=e.getSanitizedHtml(e.customizedSharePostContent))||void 0===g?void 0:g.IsShowHtmlContent)&&e.showReadMoreShareLink?((0,i.openBlock)(),(0,i.createElementBlock)("a",{key:1,href:"javascript:void(0)",class:"read-more",onClick:t[5]||(t[5]=(...t)=>e.showFullShareTextContent&&e.showFullShareTextContent(...t))},(0,i.toDisplayString)(e.$t("Read More")),1)):(0,i.createCommentVNode)("",!0),1!==Number(null===(y=e.cardData)||void 0===y?void 0:y.shareType)||(null===(f=e.getSanitizedHtml(e.customizedSharePostContent))||void 0===f?void 0:f.IsShowHtmlContent)?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",Rl,(0,i.toDisplayString)(e.shareTextParser(null===(b=e.getSanitizedHtml(e.customizedSharePostContent))||void 0===b?void 0:b.htmlString)),1)),1===Number(null===(C=e.cardData)||void 0===C?void 0:C.shareType)&&!(null===(S=e.getSanitizedHtml(e.customizedSharePostContent))||void 0===S?void 0:S.IsShowHtmlContent)&&e.showReadMoreShareLink?((0,i.openBlock)(),(0,i.createElementBlock)("a",{key:3,href:"javascript:void(0)",class:"read-more",onClick:t[6]||(t[6]=(...t)=>e.showFullShareTextContent&&e.showFullShareTextContent(...t))},(0,i.toDisplayString)(e.$t("Read More")),1)):0===Number(null===(w=e.cardData)||void 0===w?void 0:w.shareType)&&(null===(E=e.getSanitizedHtml(e.customizedPostContent))||void 0===E?void 0:E.IsShowHtmlContent)?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:4,class:"card-text-wrapper",innerHTML:e.postTextParser(null===(k=e.getSanitizedHtml(e.customizedPostContent))||void 0===k?void 0:k.htmlString),ref:"postText"},null,8,_l)):(0,i.createCommentVNode)("",!0),0===Number(null===(x=e.cardData)||void 0===x?void 0:x.shareType)&&(null===(N=e.getSanitizedHtml(e.customizedPostContent))||void 0===N?void 0:N.IsShowHtmlContent)&&e.showReadMoreLink?((0,i.openBlock)(),(0,i.createElementBlock)("a",{key:5,href:"javascript:void(0)",class:"read-more",onClick:t[7]||(t[7]=(...t)=>e.showFullPostTextContent&&e.showFullPostTextContent(...t))},(0,i.toDisplayString)(e.$t("Read More")),1)):0!==Number(null===(A=e.cardData)||void 0===A?void 0:A.shareType)||(null===(D=e.getSanitizedHtml(e.customizedPostContent))||void 0===D?void 0:D.IsShowHtmlContent)?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:6,class:"card-text-wrapper",ref:"postText"},(0,i.toDisplayString)(e.postTextParser(null===(T=e.getSanitizedHtml(e.customizedPostContent))||void 0===T?void 0:T.htmlString)),513)),0===Number(null===(P=e.cardData)||void 0===P?void 0:P.shareType)&&!(null===(V=e.getSanitizedHtml(e.customizedPostContent))||void 0===V?void 0:V.IsShowHtmlContent)&&e.showReadMoreLink?((0,i.openBlock)(),(0,i.createElementBlock)("a",{key:7,href:"javascript:void(0)",class:"read-more",onClick:t[8]||(t[8]=(...t)=>e.showFullPostTextContent&&e.showFullPostTextContent(...t))},(0,i.toDisplayString)(e.$t("Read More")),1)):(0,i.createCommentVNode)("",!0),(null===(j=null===($=null===(B=this.cardData)||void 0===B?void 0:B.post)||void 0===$?void 0:$.photos)||void 0===j?void 0:j.length)>0?((0,i.openBlock)(),(0,i.createElementBlock)("div",$l,[1===(null===(H=null===(Z=null===(U=this.cardData)||void 0===U?void 0:U.post)||void 0===Z?void 0:Z.photos)||void 0===H?void 0:H.length)?((0,i.openBlock)(),(0,i.createElementBlock)("div",jl,[(0,i.createElementVNode)("img",{src:e.imageUrl[0],onClick:t[9]||(t[9]=t=>e.openImageViewer(0))},null,8,Ul)])):(0,i.createCommentVNode)("",!0),2===(null===(W=null===(G=null===(q=this.cardData)||void 0===q?void 0:q.post)||void 0===G?void 0:G.photos)||void 0===W?void 0:W.length)?((0,i.openBlock)(),(0,i.createElementBlock)("div",Zl,[(0,i.createElementVNode)("div",{class:"img-couple",onClick:t[10]||(t[10]=t=>e.openImageViewer(0))},[(0,i.createElementVNode)("img",{src:e.imageUrl[0]},null,8,Hl)]),(0,i.createElementVNode)("div",{class:"img-couple",onClick:t[11]||(t[11]=t=>e.openImageViewer(1))},[(0,i.createElementVNode)("img",{src:e.imageUrl[1]},null,8,ql)])])):(0,i.createCommentVNode)("",!0),3===(null===(J=null===(Q=null===(K=this.cardData)||void 0===K?void 0:K.post)||void 0===Q?void 0:Q.photos)||void 0===J?void 0:J.length)?((0,i.openBlock)(),(0,i.createElementBlock)("div",Gl,[(0,i.createElementVNode)("div",{class:"img-tri",onClick:t[12]||(t[12]=t=>e.openImageViewer(0))},[(0,i.createElementVNode)("img",{src:e.imageUrl[0]},null,8,Wl)]),(0,i.createElementVNode)("div",{class:"img-tri",onClick:t[13]||(t[13]=t=>e.openImageViewer(1))},[(0,i.createElementVNode)("img",{src:e.imageUrl[1]},null,8,Kl)]),(0,i.createElementVNode)("div",{class:"img-couple",onClick:t[14]||(t[14]=t=>e.openImageViewer(2))},[(0,i.createElementVNode)("img",{src:e.imageUrl[2]},null,8,Ql)])])):(0,i.createCommentVNode)("",!0),4===(null===(ee=null===(X=null===(Y=this.cardData)||void 0===Y?void 0:Y.post)||void 0===X?void 0:X.photos)||void 0===ee?void 0:ee.length)?((0,i.openBlock)(),(0,i.createElementBlock)("div",Jl,[(0,i.createElementVNode)("div",{class:"img-tri",onClick:t[15]||(t[15]=t=>e.openImageViewer(0))},[(0,i.createElementVNode)("img",{src:e.imageUrl[0]},null,8,Yl)]),(0,i.createElementVNode)("div",{class:"img-tri",onClick:t[16]||(t[16]=t=>e.openImageViewer(1))},[(0,i.createElementVNode)("img",{src:e.imageUrl[1]},null,8,Xl)]),(0,i.createElementVNode)("div",{class:"img-tri",onClick:t[17]||(t[17]=t=>e.openImageViewer(2))},[(0,i.createElementVNode)("img",{src:e.imageUrl[2]},null,8,en)]),(0,i.createElementVNode)("div",{class:"img-tri",onClick:t[18]||(t[18]=t=>e.openImageViewer(3))},[(0,i.createElementVNode)("img",{src:e.imageUrl[3]},null,8,tn)])])):(0,i.createCommentVNode)("",!0),(null===(ae=null===(oe=null===(te=this.cardData)||void 0===te?void 0:te.post)||void 0===oe?void 0:oe.photos)||void 0===ae?void 0:ae.length)>4?((0,i.openBlock)(),(0,i.createElementBlock)("div",on,[(0,i.createElementVNode)("div",{class:"img-tri",onClick:t[19]||(t[19]=t=>e.openImageViewer(0))},[(0,i.createElementVNode)("img",{src:e.imageUrl[0]},null,8,an)]),(0,i.createElementVNode)("div",{class:"img-tri",onClick:t[20]||(t[20]=t=>e.openImageViewer(1))},[(0,i.createElementVNode)("img",{src:e.imageUrl[1]},null,8,ln)]),(0,i.createElementVNode)("div",{class:"img-tri",onClick:t[21]||(t[21]=t=>e.openImageViewer(2))},[(0,i.createElementVNode)("img",{src:e.imageUrl[2]},null,8,nn)]),(0,i.createElementVNode)("div",{class:"img-more",onClick:t[22]||(t[22]=t=>e.openImageViewer(0))},[(0,i.createElementVNode)("img",{src:e.imageUrl[3]},null,8,rn),(0,i.createElementVNode)("div",sn,[(0,i.createElementVNode)("span",dn," +"+(0,i.toDisplayString)((null===(ne=null===(le=null===(ie=this.cardData)||void 0===ie?void 0:ie.post)||void 0===le?void 0:le.photos)||void 0===ne?void 0:ne.length)-4),1),cn])])])):(0,i.createCommentVNode)("",!0)],512)):(null===(de=null===(se=null===(re=this.cardData)||void 0===re?void 0:re.post)||void 0===se?void 0:se.kudos)||void 0===de?void 0:de.kudosBackground)?((0,i.openBlock)(),(0,i.createElementBlock)("div",mn,[(0,i.createElementVNode)("div",{class:"kudos-wrapper",style:(0,i.normalizeStyle)({backgroundImage:"url("+e.imageUrl[0]+")"})},[(0,i.createElementVNode)("div",un,[(0,i.createElementVNode)("div",pn,(0,i.toDisplayString)(e.$t(null===(ue=null===(me=null===(ce=e.cardData)||void 0===ce?void 0:ce.post)||void 0===me?void 0:me.kudos)||void 0===ue?void 0:ue.kudos)),1),(0,i.createElementVNode)("div",vn,(0,i.toDisplayString)(null===(he=null===(ve=null===(pe=e.cardData)||void 0===pe?void 0:pe.post)||void 0===ve?void 0:ve.kudos)||void 0===he?void 0:he.Employee.kudosEmployeeName),1),(0,i.createElementVNode)("div",hn,[(0,i.createElementVNode)("img",{src:e.KudosProfilePicUrl,class:"kudos-profile"},null,8,gn)])])],4)],512)):(null===(fe=null===(ye=null===(ge=e.cardData)||void 0===ge?void 0:ge.post)||void 0===ye?void 0:ye.video)||void 0===fe?void 0:fe.video_link)?((0,i.openBlock)(),(0,i.createElementBlock)("div",yn,[(0,i.createElementVNode)("iframe",{src:null===(Se=null===(Ce=null===(be=e.cardData)||void 0===be?void 0:be.post)||void 0===Ce?void 0:Ce.video)||void 0===Se?void 0:Se.video_link,class:"iframe-content",sandbox:"allow-same-origin allow-scripts allow-popups allow-presentation",allowfullscreen:""},null,8,fn)],512)):(0,i.createCommentVNode)("",!0)]),1===Number(null===(we=e.cardData)||void 0===we?void 0:we.shareType)?((0,i.openBlock)(),(0,i.createElementBlock)("div",bn,[(0,i.createElementVNode)("div",Cn,[(0,i.createElementVNode)("div",Sn,[(0,i.createElementVNode)("div",wn,(0,i.toDisplayString)(null===(xe=null===(ke=null===(Ee=e.cardData)||void 0===Ee?void 0:Ee.post)||void 0===ke?void 0:ke.Employee)||void 0===xe?void 0:xe.empName),1),(0,i.createElementVNode)("div",En,(0,i.toDisplayString)(e.postedDate),1)])])])):(0,i.createCommentVNode)("",!0),1===Number(null===(Ne=e.cardData)||void 0===Ne?void 0:Ne.shareType)?((0,i.openBlock)(),(0,i.createElementBlock)("div",kn,[(null===(Ae=e.getSanitizedHtml(e.customizedPostContent))||void 0===Ae?void 0:Ae.IsShowHtmlContent)?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,class:"card-text-wrapper",ref:"postText",innerHTML:e.postTextParser(null===(De=e.getSanitizedHtml(e.customizedPostContent))||void 0===De?void 0:De.htmlString)},null,8,xn)):(0,i.createCommentVNode)("",!0),(null===(Te=e.getSanitizedHtml(e.customizedPostContent))||void 0===Te?void 0:Te.IsShowHtmlContent)&&e.showReadMoreLink?((0,i.openBlock)(),(0,i.createElementBlock)("a",{key:1,href:"javascript:void(0)",class:"read-more",onClick:t[23]||(t[23]=(...t)=>e.showFullPostTextContent&&e.showFullPostTextContent(...t))},(0,i.toDisplayString)(e.$t("Read More")),1)):(0,i.createCommentVNode)("",!0),(null===(Pe=e.getSanitizedHtml(e.customizedPostContent))||void 0===Pe?void 0:Pe.IsShowHtmlContent)?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",Nn,[(0,i.createTextVNode)((0,i.toDisplayString)(e.postTextParser(null===(Ve=e.getSanitizedHtml(e.customizedPostContent))||void 0===Ve?void 0:Ve.htmlString))+" ",1),!(null===(Be=e.getSanitizedHtml(e.customizedPostContent))||void 0===Be?void 0:Be.IsShowHtmlContent)&&e.showReadMoreLink?((0,i.openBlock)(),(0,i.createElementBlock)("a",{key:0,href:"javascript:void(0)",class:"read-more",onClick:t[24]||(t[24]=(...t)=>e.showFullPostTextContent&&e.showFullPostTextContent(...t))},(0,i.toDisplayString)(e.$t("Read More")),1)):(0,i.createCommentVNode)("",!0)],512))],512)):(0,i.createCommentVNode)("",!0),1===Number(null===(Ie=e.cardData)||void 0===Ie?void 0:Ie.shareType)?((0,i.openBlock)(),(0,i.createBlock)(O,{key:2,style:(0,i.normalizeStyle)({borderTopColor:"#ebedf1",margin:"0px",marginTop:"0.3rem",marginBottom:"-0.3rem"})},null,8,["style"])):(0,i.createCommentVNode)("",!0),e.IsLikesUpdated?((0,i.openBlock)(),(0,i.createBlock)(R,{key:3,noOfShares:e.cardData.noOfShares,noOfLikes:e.noOfLikes,shareId:null===(Le=e.cardData)||void 0===Le?void 0:Le.shareId,postId:null===(Fe=e.cardData)||void 0===Fe?void 0:Fe.post.id,empProfilePic:e.empProfilePic,postHeaderContent:e.$refs.postHeader,postTextContent:e.$refs.postText,postImageContent:e.$refs.postImages,postVideoContent:e.$refs.postVideos,onShowComments:t[25]||(t[25]=t=>e.showCommentsOnPost(t))},null,8,["noOfShares","noOfLikes","shareId","postId","empProfilePic","postHeaderContent","postTextContent","postImageContent","postVideoContent"])):(0,i.createCommentVNode)("",!0),this.showComments?((0,i.openBlock)(),(0,i.createElementBlock)("div",An,[this.showComments?((0,i.openBlock)(),(0,i.createBlock)(_,{key:0,shareId:null===(ze=e.cardData)||void 0===ze?void 0:ze.shareId,loggedInEmployeePic:e.empProfilePic,sharedEmpNo:null===(Oe=null===(Me=e.cardData)||void 0===Me?void 0:Me.Employee)||void 0===Oe?void 0:Oe.sharedEmpNumber},null,8,["shareId","loggedInEmployeePic","sharedEmpNo"])):(0,i.createCommentVNode)("",!0)])):(0,i.createCommentVNode)("",!0)]})),_:1}),e.showBuzzImageViewer?((0,i.openBlock)(),(0,i.createBlock)(j,{key:0,images:e.imageUrl,imageIndex:e.selectedImageIndex,empProfilePic:e.ProfilePicUrl,empName:null===(d=null===(s=null===(r=e.cardData)||void 0===r?void 0:r.post)||void 0===s?void 0:s.Employee)||void 0===d?void 0:d.empName,postLikes:e.noOfLikes,postShares:e.cardData.noOfShares,statusText:null===(c=e.getSanitizedHtml(e.customizedPostContent))||void 0===c?void 0:c.htmlString,sharedTime:null===(m=e.cardData)||void 0===m?void 0:m.sharedTime,shareId:null===(u=e.cardData)||void 0===u?void 0:u.shareId,postId:null===(p=e.cardData)||void 0===p?void 0:p.post.id,loggedInEmployeePic:e.empProfilePic,sharedEmpNo:null===(h=null===(v=e.cardData)||void 0===v?void 0:v.Employee)||void 0===h?void 0:h.sharedEmpNumber,sharedEmpName:null===(y=null===(g=e.cardData)||void 0===g?void 0:g.Employee)||void 0===y?void 0:y.sharedEmpName,sharedJobTitle:null===(b=null===(f=e.cardData)||void 0===f?void 0:f.Employee)||void 0===b?void 0:b.jobTitle,sharedEmpLocation:null===(S=null===(C=e.cardData)||void 0===C?void 0:C.Employee)||void 0===S?void 0:S.location,sharedEmpWorkEmail:null===(E=null===(w=e.cardData)||void 0===w?void 0:w.Employee)||void 0===E?void 0:E.workEmail,"onUpdate:show":t[26]||(t[26]=t=>e.onCloseBuzzImageViewer()),postHeaderContent:e.$refs.postHeader,postTextContent:e.$refs.postText,postImageContent:e.$refs.postImages,postVideoContent:e.$refs.postVideos},null,8,["images","imageIndex","empProfilePic","empName","postLikes","postShares","statusText","sharedTime","shareId","postId","loggedInEmployeePic","sharedEmpNo","sharedEmpName","sharedJobTitle","sharedEmpLocation","sharedEmpWorkEmail","postHeaderContent","postTextContent","postImageContent","postVideoContent"])):(0,i.createCommentVNode)("",!0),e.showBuzzFileModal?((0,i.openBlock)(),(0,i.createBlock)(U,{key:1,modalData:e.getImageDetails,isKudosPost:e.isKudosPost,isVideoPost:e.isVideoPost,modelText:1===Number(null===(k=e.cardData)||void 0===k?void 0:k.shareType)?null===(x=this.cardData)||void 0===x?void 0:x.originalShareText:null===(A=null===(N=this.cardData)||void 0===N?void 0:N.post)||void 0===A?void 0:A.originalText,modalStatus:"Edit",shareId:null===(D=e.cardData)||void 0===D?void 0:D.shareId,empProfilePic:e.empProfilePic,shareType:Number(null===(T=e.cardData)||void 0===T?void 0:T.shareType),videoUrl:null===(B=null===(V=null===(P=e.cardData)||void 0===P?void 0:P.post)||void 0===V?void 0:V.video)||void 0===B?void 0:B.video_link,"onUpdate:show":t[27]||(t[27]=t=>e.onCloseBuzzFileModal()),"onUpdate:create":t[28]||(t[28]=t=>e.onPostCreated(t)),"onUpdate:edit":t[29]||(t[29]=t=>e.onPostUpdated(t))},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",null,[e.$refs.postImages?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,innerHTML:e.$refs.postImages.outerHTML},null,8,Dn)):(0,i.createCommentVNode)("",!0),e.$refs.postVideos?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:1,innerHTML:e.$refs.postVideos.outerHTML},null,8,Tn)):(0,i.createCommentVNode)("",!0),e.$refs.postHeader?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:2,innerHTML:e.$refs.postHeader.outerHTML},null,8,Pn)):(0,i.createCommentVNode)("",!0),e.$refs.postText?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:3,innerHTML:e.$refs.postText.outerHTML},null,8,Vn)):(0,i.createCommentVNode)("",!0)])])),_:1},8,["modalData","isKudosPost","isVideoPost","modelText","shareId","empProfilePic","shareType","videoUrl"])):(0,i.createCommentVNode)("",!0)])}var In=o(93857);const Ln={class:"image-viewer-wrapper"},Fn={class:"image-view"},zn={class:"image-view-wrapper"},Mn=["src"],On={class:"image-wrapper"},Rn=["src"],_n={class:"nav-btn-wrapper"},$n={class:"details-view-wrapper"},jn={class:"header-details"},Un=["src"],Zn={class:"header-content"},Hn={class:"header-date"},qn={class:"details-view"},Gn=["innerHTML"],Wn={class:"details-comment-wrapper"};function Kn(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon-button"),s=(0,i.resolveComponent)("profile-pic"),d=(0,i.resolveComponent)("oxd-divider"),c=(0,i.resolveComponent)("buzz-post-actions"),m=(0,i.resolveComponent)("comment-list"),u=(0,i.resolveComponent)("oxd-dialog");return(0,i.openBlock)(),(0,i.createBlock)(u,{"onUpdate:show":t[6]||(t[6]=t=>e.onClose()),style:{padding:"0",minWidth:"100vw",minHeight:"100vh"},class:"image-viewer-container"},{default:(0,i.withCtx)((()=>{var o,a,l;return[(0,i.createElementVNode)("div",Ln,[(0,i.createElementVNode)("div",Fn,[(0,i.createElementVNode)("div",zn,[(0,i.createElementVNode)("img",{src:e.getCurrentImage},null,8,Mn)])]),(0,i.createElementVNode)("div",On,[(0,i.createElementVNode)("img",{src:e.getCurrentImage},null,8,Rn),(0,i.createElementVNode)("div",_n,[(null===(o=e.images)||void 0===o?void 0:o.length)>1?((0,i.openBlock)(),(0,i.createBlock)(r,{key:0,name:"chevron-left",class:"nav-button",disabled:0===e.index,"data-test":"previousButton",onClick:t[0]||(t[0]=t=>e.onPrevious())},null,8,["disabled"])):(0,i.createCommentVNode)("",!0),(null===(a=e.images)||void 0===a?void 0:a.length)>1?((0,i.openBlock)(),(0,i.createBlock)(r,{key:1,name:"chevron-right",class:"nav-button","data-test":"nextButton",disabled:e.index===(null===(l=e.images)||void 0===l?void 0:l.length)-1,onClick:t[1]||(t[1]=t=>e.onNext())},null,8,["disabled"])):(0,i.createCommentVNode)("",!0)])]),(0,i.createElementVNode)("div",$n,[(0,i.createElementVNode)("div",jn,[((0,i.openBlock)(),(0,i.createBlock)(s,{onClickOnce:t[2]||(t[2]=t=>e.onClickEmployee()),key:e.profileKey},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("img",{src:e.empProfilePic},null,8,Un)])),_:1})),(0,i.createElementVNode)("div",Zn,[((0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"header-name","data-test":"userName",onClickOnce:t[3]||(t[3]=t=>e.onClickEmployee()),key:e.profileNameKey},(0,i.toDisplayString)(e.empName),33)),(0,i.createElementVNode)("div",Hn,(0,i.toDisplayString)(e.postedDate),1)])]),(0,i.createElementVNode)("div",qn,[(0,i.createElementVNode)("div",{class:"header-text",innerHTML:e.postTextParser(e.customizedPostContent)},null,8,Gn),e.showReadMoreLink?((0,i.openBlock)(),(0,i.createElementBlock)("a",{key:0,href:"javascript:void(0)",class:"read-more",onClick:t[4]||(t[4]=(...t)=>e.showFullPostTextContent&&e.showFullPostTextContent(...t))},(0,i.toDisplayString)(e.$t("Read more")),1)):(0,i.createCommentVNode)("",!0),(0,i.createVNode)(d),(0,i.createVNode)(c,{noOfShares:e.postShares,noOfLikes:e.postLikes,postId:e.postId,shareId:e.shareId,empProfilePic:e.loggedInEmployeePic,postHeaderContent:e.postHeaderContent,postTextContent:e.postTextContent,postImageContent:e.postImageContent,"onUpdate:edit":t[5]||(t[5]=t=>e.onResharePost(t)),showCommentsButton:!1},null,8,["noOfShares","noOfLikes","postId","shareId","empProfilePic","postHeaderContent","postTextContent","postImageContent"]),(0,i.createElementVNode)("div",Wn,[(0,i.createVNode)(m,{shareId:e.shareId,loggedInEmployeePic:e.loggedInEmployeePic,sharedEmpNo:e.sharedEmpNo},null,8,["shareId","loggedInEmployeePic","sharedEmpNo"])])])])])]})),_:1})}const Qn={class:"comment-wrapper"},Jn=["src"],Yn={class:"comment-text-wrapper"},Xn={class:"oxd-loader-text-wrapper"};function er(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-divider"),s=(0,i.resolveComponent)("profile-pic"),d=(0,i.resolveComponent)("oxd-input-field"),c=(0,i.resolveComponent)("oxd-form"),m=(0,i.resolveComponent)("buzz-comment");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(r,{style:{borderTopColor:"#ebedf1",margin:"0px"}}),(0,i.createElementVNode)("div",Qn,[(0,i.createElementVNode)("div",{class:"comment-box",style:(0,i.normalizeStyle)({height:e.textAreaParentHeight})},[(0,i.createVNode)(s,{onClick:t[0]||(t[0]=t=>e.routeToProfile()),"data-test":"loggedInEmployeeProfilePic"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("img",{src:e.loggedInEmployeePic},null,8,Jn)])),_:1}),(0,i.createVNode)(c,{onSubmitValid:e.saveComment,ref:"form"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Yn,[(0,i.createVNode)(d,{class:(0,i.normalizeClass)({commentTextArea:!0,initialStyle:e.resizeStyleOnSubmit}),rows:1,placeholder:e.$t("Write your comment..."),onKeydown:e.saveComment,onInput:t[1]||(t[1]=t=>e.onInput(t)),modelValue:e.commentStatus,"onUpdate:modelValue":t[2]||(t[2]=t=>e.commentStatus=t),rules:e.rules.comment},null,8,["class","placeholder","onKeydown","modelValue","rules"])])])),_:1},8,["onSubmitValid"])],4),(0,i.createElementVNode)("div",Xn,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.comments,(t=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:t.id},[(0,i.createVNode)(m,{"data-test":"comment",comment:t,shareId:e.shareId,sharedEmpNo:e.sharedEmpNo,loggedInEmployeePic:e.loggedInEmployeePic},null,8,["comment","shareId","sharedEmpNo","loggedInEmployeePic"])])))),128)),e.showSeeMoreLink?((0,i.openBlock)(),(0,i.createElementBlock)("a",{key:0,href:"javascript:void(0)",class:"see-more","data-test":"seeMoreComments",onClick:t[3]||(t[3]=t=>e.clickEventForSeeMore())},(0,i.toDisplayString)(e.$t("See More"))+" ...",1)):(0,i.createCommentVNode)("",!0),!e.showSeeMoreLink&&e.seeMoreCommentLimit>4?((0,i.openBlock)(),(0,i.createElementBlock)("a",{key:1,href:"javascript:void(0)",class:"see-more","data-test":"seeLessComments",onClick:t[4]||(t[4]=t=>e.clickEventForSeeLess())},(0,i.toDisplayString)(e.$t("Show Less")),1)):(0,i.createCommentVNode)("",!0)])])],64)}const tr={key:0,class:"comment","data-test":"nonEditCommentContent"},or=["src"],ar={class:"comment-area"},ir=["innerHTML"],lr={key:1,class:"comment-content"},nr={class:"commented-time"},rr={class:"like-button"},sr={class:"like-amount"},dr={class:"auto-complete-img"},cr=["src"],mr={class:"header-content"},ur={class:"header-name"},pr=["src"],vr={class:"comment-text-wrapper"},hr={key:0,class:"edit-info-text-hover"};function gr(e,t,o,a,l,n){var r,s,d;const c=(0,i.resolveComponent)("profile-pic"),m=(0,i.resolveComponent)("oxd-icon"),u=(0,i.resolveComponent)("oxd-loader"),p=(0,i.resolveComponent)("pop-over-list"),v=(0,i.resolveComponent)("oxd-input-field"),h=(0,i.resolveComponent)("oxd-form"),g=(0,i.resolveComponent)("confirmation-modal");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[e.showEditComment?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",tr,[(0,i.createVNode)(c,{onClick:t[0]||(t[0]=t=>e.onClickEmployee(e.comment.employee.empNumber,e.comment.employee.empName,e.comment.employee.workEmail,e.comment.employee.jobTitle,e.comment.employee.location))},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("img",{src:e.profilePicUpdate(e.comment.employee.empProfilePic)},null,8,or)])),_:1}),(0,i.createElementVNode)("div",ar,[(0,i.createElementVNode)("div",{class:"commenter-name","data-test":"commenterName",onClick:t[1]||(t[1]=t=>e.onClickEmployee(e.comment.employee.empNumber,e.comment.employee.empName,e.comment.employee.workEmail,e.comment.employee.jobTitle,e.comment.employee.location))},(0,i.toDisplayString)(e.comment.employee.empName),1),(null===(r=e.getSanitizedHtml(e.customizedCommentContent))||void 0===r?void 0:r.IsShowHtmlContent)?((0,i.openBlock)(),(0,i.createElementBlock)("span",{key:0,class:"comment-content",innerHTML:e.commentTextParser(e.getSanitizedHtml(e.customizedCommentContent).htmlString)},null,8,ir)):(0,i.createCommentVNode)("",!0),(null===(s=e.getSanitizedHtml(e.customizedCommentContent))||void 0===s?void 0:s.IsShowHtmlContent)?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("span",lr,(0,i.toDisplayString)(e.commentTextParser(null===(d=e.getSanitizedHtml(e.customizedCommentContent))||void 0===d?void 0:d.htmlString)),1)),e.showReadMoreLink?((0,i.openBlock)(),(0,i.createElementBlock)("a",{key:2,href:"javascript:void(0)",class:"read-more",onClick:t[2]||(t[2]=(...t)=>e.showFullCommentContent&&e.showFullCommentContent(...t))},(0,i.toDisplayString)(e.$t("Read More")),1)):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("div",nr,(0,i.toDisplayString)(e.commentedDate),1),Number(e.noOfLikesInComment)>0?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:3,class:"like-container",onMouseover:t[3]||(t[3]=t=>e.onHoverLikes()),"data-test":"likeContainer",onMouseleave:t[4]||(t[4]=t=>e.onHoverOutLikes()),ref:"likeContainer"},[(0,i.createElementVNode)("a",rr,[(0,i.createVNode)(m,{class:"clickedLikeButton",name:"oxd-reaction",withContainer:!1})]),(0,i.createElementVNode)("div",sr,(0,i.toDisplayString)("0"!=e.noOfLikesInComment?e.noOfLikesInComment:"  "),1),e.showEmployeeLikedComment?((0,i.openBlock)(),(0,i.createBlock)(p,{key:0,listContainerParentWrapper:e.$refs.likeContainer},{default:(0,i.withCtx)((()=>[e.onLoadingLikes?((0,i.openBlock)(),(0,i.createBlock)(u,{key:0,withContainer:!0})):(0,i.createCommentVNode)("",!0),((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.getPeopleLikedComment,(t=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"header-details",key:t.id},[(0,i.createElementVNode)("span",dr,[(0,i.createElementVNode)("img",{src:e.ProfilePicUrl(t)},null,8,cr)]),(0,i.createElementVNode)("div",mr,[(0,i.createElementVNode)("div",ur,(0,i.toDisplayString)(e.nameTextParser(null===t||void 0===t?void 0:t.empName)),1)])])))),128))])),_:1},8,["listContainerParentWrapper"])):(0,i.createCommentVNode)("",!0)],544)):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["edit-container",{"edit-container-extend":e.isLongEditName}])},[(0,i.createElementVNode)("a",{href:"javascript:void(0)",onClick:t[5]||(t[5]=t=>e.likeOnComment()),"data-test":"likeOnCommentDiv",class:(0,i.normalizeClass)({clickedLike:e.likeStatusOfComment,"edit-extra-space":e.isLongEditName})},(0,i.toDisplayString)(e.$t("Like")),3),e.comment.employee.empNumber==this.empNo?((0,i.openBlock)(),(0,i.createElementBlock)("a",{key:0,href:"javascript:void(0)",onClick:t[6]||(t[6]=t=>e.editComment()),"data-test":"editComment",class:(0,i.normalizeClass)({"edit-extra-space":e.isLongEditName})},(0,i.toDisplayString)(e.$t("Edit")),3)):(0,i.createCommentVNode)("",!0),e.comment.employee.empNumber==this.empNo||this.isAdmin?((0,i.openBlock)(),(0,i.createElementBlock)("a",{key:1,href:"javascript:void(0)","data-test":"deleteComment",onClick:t[7]||(t[7]=t=>e.deleteComment())},(0,i.toDisplayString)(e.$t("Delete")),1)):(0,i.createCommentVNode)("",!0)],2)])])),e.showEditComment?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:1,class:"comment-box",style:(0,i.normalizeStyle)({height:e.textAreaParentHeight}),"data-test":"EditCommentContent"},[(0,i.createVNode)(c,{onClick:t[8]||(t[8]=t=>e.routeToProfile()),"data-test":"loggedInEmployeeProfile"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("img",{src:e.loggedInEmployeePic},null,8,pr)])),_:1}),(0,i.createVNode)(h,{onSubmitValid:e.updateComment,ref:"form"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",vr,[(0,i.createVNode)(v,{class:(0,i.normalizeClass)({commentTextArea:!0,initialStyle:e.resizeStyleOnSubmit}),rows:1,placeholder:e.$t("Write your comment..."),onKeydown:e.updateComment,autofocus:"",onFocusin:t[9]||(t[9]=t=>e.onCommentHover()),onFocusout:t[10]||(t[10]=t=>e.onCommentHoverOut()),onInput:t[11]||(t[11]=t=>e.onInput(t)),modelValue:e.editCommentStatus,"onUpdate:modelValue":t[12]||(t[12]=t=>e.editCommentStatus=t),rules:e.rules.comment},null,8,["class","placeholder","onKeydown","modelValue","rules"]),e.showIgnoreTipOnHover?((0,i.openBlock)(),(0,i.createElementBlock)("span",hr,[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Press Esc to"))+" ",1),(0,i.createElementVNode)("a",null,(0,i.toDisplayString)(e.$t("Cancel")),1)])):(0,i.createCommentVNode)("",!0),e.showIgnoreTipOnHoverOut?((0,i.openBlock)(),(0,i.createElementBlock)("a",{key:1,class:"edit-info-text",onClick:t[13]||(t[13]=t=>e.cancelEdit())},(0,i.toDisplayString)(e.$t("Cancel")),1)):(0,i.createCommentVNode)("",!0)])])),_:1},8,["onSubmitValid"])],4)):(0,i.createCommentVNode)("",!0),e.showConfimationDeleteModal?((0,i.openBlock)(),(0,i.createBlock)(g,{key:2,onConfirmationModalAction:t[14]||(t[14]=t=>e.confirmationModalAction(t))})):(0,i.createCommentVNode)("",!0)],64)}const yr={class:"orangehrm-modal-header"},fr={class:"orangehrm-text-center-align"},br={class:"orangehrm-modal-footer"};function Cr(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-text"),s=(0,i.resolveComponent)("oxd-button"),d=(0,i.resolveComponent)("oxd-dialog"),c=(0,i.resolveDirective)("focus-first-element");return e.show?(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(d,(0,i.mergeProps)({key:0},e.$attr,{"onUpdate:show":e.onCancel,onKeyup:(0,i.withKeys)(e.onCancel,["esc"])}),{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",yr,[(0,i.createVNode)(r,{type:"modal-title"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Are you sure?")),1)])),_:1})]),(0,i.createElementVNode)("div",fr,[(0,i.createVNode)(r,{type:"subtitle-2"},{default:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"messageLine1",{},(()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("The selected item will be permanently deleted")),1)]))])),_:3}),(0,i.createVNode)(r,{type:"subtitle-2"},{default:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"messageLine2",{},(()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Are you sure you want to continue?")),1)]))])),_:3})]),(0,i.createElementVNode)("div",br,[(0,i.createVNode)(s,{label:e.$t("No, Cancel"),displayType:"text",class:"orangehrm-button-margin","data-test":"cancelButton",onClick:e.onCancel},null,8,["label","onClick"]),(0,i.createVNode)(s,{label:e.$t("Yes, Delete"),iconName:"oxd-trash",iconSize:"extra-small",displayType:"label-feedback-danger",class:"orangehrm-button-margin","data-test":"deleteButton",onClick:e.onDelete},null,8,["label","onClick"])])])),_:3},16,["onUpdate:show","onKeyup"])),[[c,void 0,"return-focus"]]):(0,i.createCommentVNode)("",!0)}var Sr=o(89035),wr=(0,i.defineComponent)({name:"confirmationModal",components:{"oxd-button":jt.Z,"oxd-dialog":Wo.Z,"oxd-text":Ii.Z},directives:{"focus-first-element":Sr.Z},data(){return{show:!0}},methods:{onCancel(){this.$emit("confirmationModalAction","cancel"),this.show=!this.show},onDelete(){this.$emit("confirmationModalAction","delete"),this.show=!this.show}}});const Er=(0,Re.Z)(wr,[["render",Cr]]);var kr=Er;function xr(e,t,o,a,l,n){return(0,i.openBlock)(),(0,i.createElementBlock)("div",{class:(0,i.normalizeClass)({"list-view-container":!0,"top-tool-tip":e.IsTopPostioned})},[(0,i.renderSlot)(e.$slots,"default",{},void 0,!0)],2)}var Nr=(0,i.defineComponent)({name:"PopOverList",data:()=>({topPostitionPopOverList:!1}),props:{listContainerParentWrapper:{type:HTMLElement,required:!0}},computed:{IsTopPostioned(){return this.getPopOverListDetais(),this.topPostitionPopOverList}},methods:{getPopOverListDetais(){this.$nextTick((function(){let e=this.listContainerParentWrapper,t=null===e||void 0===e?void 0:e.getBoundingClientRect().bottom,o=window.innerHeight;o-t<this.$el.clientHeight?this.topPostitionPopOverList=!0:this.topPostitionPopOverList=!1}))}}});const Ar=(0,Re.Z)(Nr,[["render",xr],["__scopeId","data-v-eff63390"]]);var Dr=Ar,Tr=(0,i.defineComponent)({name:"buzz-comment",mixins:[ul],components:{"profile-pic":P.Z,"oxd-icon":In.Z,"pop-over-list":Dr,"oxd-loader":co.Z,"confirmation-modal":kr,"oxd-form":no.Z,"oxd-input-field":lo.Z},data(){return{commentContentLength:0,maxContentLength:500,fullCommentText:"",peopleLikedComment:[],showEmployeeLikedComment:!1,onLoadingLikes:!1,textAreaParentHeight:"auto",resizeStyleOnSubmit:!1,buzz_comment__update_url:M+`/${this.shareId}/comment`,buzz_comment_delete_url:M+`/${this.shareId}/comments`,showEditComment:!1,editCommentStatus:"",showConfimationDeleteModal:!1,showIgnoreTipOnHover:!1,showIgnoreTipOnHoverOut:!0,clickedOnCommentLike:!1,selectEmpId:0,commentTriggered:!1,rules:{comment:[$a(63535)]}}},props:{comment:{type:Object},shareId:{type:String},sharedEmpNo:{type:String},loggedInEmployeePic:{type:String}},computed:{pageNo(){return this.$store.state.buzz.pageNo},pageLimit(){return this.$store.state.buzz.pageLimit},empNoFilter(){return this.$store.state.buzz.selectedEmpNo},orderFilter(){return this.$store.state.buzz.orderFilterForShare},orderByFilter(){return this.$store.state.buzz.orderByFilterForShare},commentedDate(){var e,t;if(null===(e=this.comment)||void 0===e?void 0:e.commentedTime){const e=Q(new Date(null===(t=this.comment)||void 0===t?void 0:t.commentedTime),new Date,{locale:this.$locale});return e.charAt(0).toUpperCase()+e.substr(1)}return""},showReadMoreLink(){return this.commentContentLength>this.maxContentLength},customizedCommentContent(){var e;return null===(e=this.comment)||void 0===e?void 0:e.commentText},noOfLikesInComment(){let e=this.$store.state.buzz.comments,t=e.filter((e=>{var t;if(Number(e.id)===Number(null===(t=this.comment)||void 0===t?void 0:t.id))return e}));return t[0]["noOfLikes"]},likeStatusOfComment(){let e=this.$store.state.buzz.userLikedComments,t=e.find((e=>{var t;if(Number(e.commentId)===Number(null===(t=this.comment)||void 0===t?void 0:t.id))return e}));return!!t},getPeopleLikedComment(){return this.peopleLikedComment},isLongEditName(){var e;return(null===(e=this.$t("Edit"))||void 0===e?void 0:e.length)>4}},methods:{nameTextParser(e){return e.length>30?e.substring(0,35)+"...":e},onClickEmployee(e,t,o,a,i){this.selectEmpId=e,this.selectEmpId!==this.empNo?(this.$store.commit("buzz/isCurrentLoggedEmployeeProfile",!1),this.$store.commit("buzz/setEmpNoFilter",this.selectEmpId),this.$store.commit("buzz/setOrderFilter",null),this.$store.commit("buzz/setOrderByFilter",null),this.$store.commit("buzz/setSelectedEmployeeName",t),this.$store.commit("buzz/setSelectedEmployeeLocation",i),this.$store.commit("buzz/setSelectedEmployeeEmail",o),this.$store.commit("buzz/setSelectedEmployeeDesignation",a)):(this.$store.commit("buzz/isCurrentLoggedEmployeeProfile",!0),this.$store.commit("buzz/setEmpNoFilter",this.empNo),this.$store.commit("buzz/setOrderFilter",null),this.$store.commit("buzz/setOrderByFilter",null)),this.$store.commit("buzz/emptySelectedEmployeeLargeProfilePicture");const l={empNo:this.empNoFilter,size:"big",include:"Employee",webservice:this.ngServices.webservice};this.$store.dispatch("buzz/getSelectedUserProfilePictureLarge",l).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)}))),this.ngServices.$state.go("buzz.profile",{empId:this.empNoFilter}),this.loadProfile()},loadProfile(){this.$store.commit("buzz/emptySharePosts"),this.$store.commit("buzz/setPageNo",1),this.$store.commit("buzz/setFilterWithoutEmployee",!1);const e={pageNo:this.pageNo,limit:this.pageLimit,order:this.orderFilter,orderBy:this.orderByFilter,empNumber:this.empNoFilter?[this.empNoFilter]:null,webservice:this.ngServices.webservice};this.$store.commit("buzz/setLoading",!0),this.$store.commit("buzz/setMorePostsLoading",!0),this.$store.dispatch("buzz/getSharePosts",e).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)})))},routeToProfile(){this.$store.commit("buzz/setIsPostsFetchActionTriggred",!0),this.$store.commit("buzz/isCurrentLoggedEmployeeProfile",!0),this.$store.commit("buzz/setEmpNoFilter",this.empNo),this.$store.commit("buzz/setOrderFilter",null),this.$store.commit("buzz/setOrderByFilter",null),this.ngServices.$state.go("buzz.profile",{empId:this.empNo}),this.loadProfile()},onInput(e){this.resizeStyleOnSubmit=!1,e.target,e.target.style.height="auto",e.target.style.height=`${e.target.scrollHeight}px`},getSanitizedHtml(e){return e?{htmlString:e,IsShowHtmlContent:!0}:""},ProfilePicUrl(e){var t,o,a,i;return(null===(t=null===e||void 0===e?void 0:e.empProfilePic)||void 0===t?void 0:t.image)&&(null===(o=null===e||void 0===e?void 0:e.empProfilePic)||void 0===o?void 0:o.type)?ge.base64ImageConvertion(null===(a=null===e||void 0===e?void 0:e.empProfilePic)||void 0===a?void 0:a.type,null===(i=null===e||void 0===e?void 0:e.empProfilePic)||void 0===i?void 0:i.image):"images/default.png"},commentTextParser(e){return this.commentContentLength=e.length,this.fullCommentText=e,this.commentContentLength>this.maxContentLength?e.substring(0,this.maxContentLength)+"...":e},showFullCommentContent(){this.maxContentLength=this.commentContentLength,this.customizedCommentContent=this.fullCommentText},profilePicUpdate(e){return e.image&&e.type?ge.base64ImageConvertion(e.type,e.image):"images/default.png"},editComment(){var e,t;this.editCommentStatus=(null===(e=this.comment)||void 0===e?void 0:e.originalCommentText)?null===(t=this.comment)||void 0===t?void 0:t.originalCommentText:"",this.showEditComment=!0},deleteComment(){this.showConfimationDeleteModal=!0},onHoverLikes(){this.showEmployeeLikedComment=!0},onHoverOutLikes(){this.showEmployeeLikedComment=!1},likeOnComment(){var e,t;if(!this.clickedOnCommentLike){this.clickedOnCommentLike=!0;const o={shareId:this.shareId?this.shareId:"",commentId:(null===(e=this.comment)||void 0===e?void 0:e.id)?null===(t=this.comment)||void 0===t?void 0:t.id:""};let a=!this.likeStatusOfComment;a?this.ngServices.webservice.call(_,"POST",o).then((e=>{const t={id:e.data.data.likeId,empNumber:e.data.data.empNumber,commentId:e.data.data.commentId,likedTime:e.data.data.likeTime};this.clickedOnCommentLike=!1,this.$store.commit("buzz/addUserLikedComment",t),this.$store.commit("buzz/addLikeForComment",o),this.getUserLikedComments(),this.getSelectedUserEmployeeStats()})).catch((()=>(this.clickedOnCommentLike=!1,this.$toast.error({title:this.$t(fe),message:this.$t(Ee)})))):this.ngServices.webservice.call(_,"DELETE",o).then((()=>{var e,t;this.clickedOnCommentLike=!1;let a=(null===(e=this.comment)||void 0===e?void 0:e.id)?null===(t=this.comment)||void 0===t?void 0:t.id:"";this.$store.commit("buzz/removeUserLikedComment",a),this.$store.commit("buzz/deleteLikeForComment",o),this.getUserLikedComments(),this.getSelectedUserEmployeeStats()})).catch((()=>(this.clickedOnCommentLike=!1,this.$toast.error({title:this.$t(fe),message:this.$t(Ee)}))))}},updateComment(e){var t,o;if("Escape"==e.key&&this.cancelEdit(),(null===(t=this.editCommentStatus)||void 0===t?void 0:t.trim())&&!this.$refs.form.isFromInvalid&&"Enter"==e.key&&!e.shiftKey&&!this.commentTriggered){this.commentTriggered=!0;const e={commentDetails:{commentText:this.editCommentStatus},commentUrl:this.buzz_comment__update_url,commentId:Number(null===(o=this.comment)||void 0===o?void 0:o.id),webservice:this.ngServices.webservice};this.$store.dispatch("buzz/updateComment",e).then((()=>{this.showEditComment=!1,this.editCommentStatus="",this.resizeStyleOnSubmit=!0,this.commentTriggered=!1})).catch((()=>(this.resizeStyleOnSubmit=!0,this.commentTriggered=!1,this.$toast.error({title:this.$t(fe),message:this.$t(Ee)}))))}},onCommentHover(){this.showIgnoreTipOnHover=!0,this.showIgnoreTipOnHoverOut=!1},onCommentHoverOut(){this.showIgnoreTipOnHover=!1,this.showIgnoreTipOnHoverOut=!0},OnDeleteComment(){var e,t;const o={data:{data:[Number(null===(e=this.comment)||void 0===e?void 0:e.id)]},deleteUrl:this.buzz_comment_delete_url,commentId:Number(null===(t=this.comment)||void 0===t?void 0:t.id),webservice:this.ngServices.webservice};this.$store.dispatch("buzz/deleteComment",o).then((()=>(this.getSelectedUserEmployeeStats(),this.$toast.success({title:this.$t(ye),message:this.$t(we)})))).catch((()=>(this.resizeStyleOnSubmit=!0,this.$toast.error({title:this.$t(fe),message:this.$t(Ee)}))))},cancelEdit(){this.showEditComment=!1},confirmationModalAction(e){"delete"===e&&this.OnDeleteComment(),this.showConfimationDeleteModal=!1},getUserLikedComments(){var e;this.onLoadingLikes=!0;let t={serverFetch:!0};this.ngServices.webservice.get(_,{filter:{commentIds:[Number(null===(e=this.comment)||void 0===e?void 0:e.id)]},include:"Employee",includeTerminated:!0},t).then((e=>{this.peopleLikedComment=e.data.data?e.data.data.map((e=>e.employee)):[],this.onLoadingLikes=!1})).catch((()=>(this.onLoadingLikes=!1,this.$toast.error({title:this.$t(fe),message:this.$t(Ee)}))))}},mounted(){this.getUserLikedComments()}});const Pr=(0,Re.Z)(Tr,[["render",gr],["__scopeId","data-v-1c542062"]]);var Vr=Pr,Br=(0,i.defineComponent)({name:"commentList",mixins:[ul],components:{"profile-pic":P.Z,"buzz-comment":Vr,"oxd-divider":ro.Z,"oxd-form":no.Z,"oxd-input-field":lo.Z},data(){return{textAreaParentHeight:"auto",resizeStyleOnSubmit:!1,commentStatus:"",buzz_comment_url:M+`/${this.shareId}/comments`,seeMoreCommentLimit:4,commentTriggered:!1,rules:{comment:[$a(63535)]}}},computed:{pageNo(){return this.$store.state.buzz.pageNo},pageLimit(){return this.$store.state.buzz.pageLimit},empNoFilter(){return this.$store.state.buzz.selectedEmpNo},orderFilter(){return this.$store.state.buzz.orderFilterForShare},orderByFilter(){return this.$store.state.buzz.orderByFilterForShare},comments(){let e=this.$store.state.buzz.comments,t=e.filter((e=>{if(e.shareId==this.shareId)return e}));return t.length>this.seeMoreCommentLimit?t.slice(0,this.seeMoreCommentLimit):t},showSeeMoreLink(){let e=this.$store.state.buzz.comments.filter((e=>{if(e.shareId==this.shareId)return e}));return e.length>this.seeMoreCommentLimit}},props:{shareId:{type:String,required:!0},loggedInEmployeePic:{type:String},sharedEmpNo:{type:String,required:!0}},methods:{routeToProfile(){this.$store.commit("buzz/setIsPostsFetchActionTriggred",!0),this.$store.commit("buzz/isCurrentLoggedEmployeeProfile",!0),this.$store.commit("buzz/setEmpNoFilter",this.empNo),this.$store.commit("buzz/setOrderFilter",null),this.$store.commit("buzz/setOrderByFilter",null),this.ngServices.$state.go("buzz.profile",{empId:this.empNo}),this.loadProfile()},loadProfile(){this.$store.commit("buzz/emptySharePosts"),this.$store.commit("buzz/setPageNo",1),this.$store.commit("buzz/setFilterWithoutEmployee",!1);const e={pageNo:this.pageNo,limit:this.pageLimit,order:this.orderFilter,orderBy:this.orderByFilter,empNumber:this.empNoFilter?[this.empNoFilter]:null,webservice:this.ngServices.webservice};this.$store.commit("buzz/setLoading",!0),this.$store.commit("buzz/setMorePostsLoading",!0),this.$store.dispatch("buzz/getSharePosts",e).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)})))},onInput(e){this.resizeStyleOnSubmit=!1,e.target,e.target.style.height="auto",e.target.style.height=`${e.target.scrollHeight}px`},saveComment(e){var t;if((null===(t=this.commentStatus)||void 0===t?void 0:t.trim())&&!this.$refs.form.isFromInvalid&&"Enter"==e.key&&!e.shiftKey&&!this.commentTriggered){this.commentTriggered=!0;const e={commentDetails:{commentText:this.commentStatus},commentUrl:this.buzz_comment_url,webservice:this.ngServices.webservice};this.$store.dispatch("buzz/saveComment",e).then((()=>{this.commentStatus="",this.resizeStyleOnSubmit=!0,this.getSelectedUserEmployeeStats()})).catch((()=>(this.resizeStyleOnSubmit=!0,this.$toast.error({title:this.$t(fe),message:this.$t(Ee)})))).finally((()=>{this.commentTriggered=!1}))}},profilePicUpdate(e){return e.image&&e.type?ge.base64ImageConvertion(e.type,e.image):"images/default.png"},clickEventForSeeMore(){this.seeMoreCommentLimit=this.$store.state.buzz.comments.filter((e=>{if(e.shareId==this.shareId)return e})).length},clickEventForSeeLess(){this.seeMoreCommentLimit=4}}});const Ir=(0,Re.Z)(Br,[["render",er],["__scopeId","data-v-c47cd418"]]);var Lr=Ir;const Fr={class:"buzz-post-action"},zr={class:"summary-details"},Mr={key:0,class:"like-icon"},Or={class:"auto-complete-img"},Rr=["src"],_r={class:"header-content"},$r={class:"header-name"},jr={class:"summary-bottom"},Ur={class:"auto-complete-img"},Zr=["src"],Hr={class:"header-content"},qr={class:"header-name"},Gr=["innerHTML"],Wr=["innerHTML"],Kr=["innerHTML"],Qr=["innerHTML"];function Jr(e,t,o,a,l,n){const r=(0,i.resolveComponent)("buzz-like-button"),s=(0,i.resolveComponent)("oxd-icon-button"),d=(0,i.resolveComponent)("oxd-icon"),c=(0,i.resolveComponent)("oxd-loader"),m=(0,i.resolveComponent)("pop-over-list"),u=(0,i.resolveComponent)("buzz-share-viewer");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createElementVNode)("div",Fr,[(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["card-action",{commentInactive:!e.showCommentsButton}])},[(0,i.createVNode)(r),e.showCommentsButton?((0,i.openBlock)(),(0,i.createBlock)(s,{key:0,name:"oxd-chat","data-test":"commentButton",onClick:t[0]||(t[0]=t=>e.showComments()),tooltip:e.$t("Comment"),flow:"bottom"},null,8,["tooltip"])):(0,i.createCommentVNode)("",!0),(0,i.createVNode)(s,{name:"oxd-share","data-test":"shareButton",onClick:t[1]||(t[1]=t=>e.sharePost()),tooltip:e.$t("Share"),flow:"bottom"},null,8,["tooltip"])],2),(0,i.createElementVNode)("div",null,[(0,i.createElementVNode)("div",zr,[(0,i.createElementVNode)("div",{class:"summary-top","data-test":"likesSection",onMouseover:t[2]||(t[2]=t=>e.onHoverLikes()),onMouseleave:t[3]||(t[3]=t=>e.onHoverOutLikes()),ref:"likeContainer"},[e.getLikes>0?((0,i.openBlock)(),(0,i.createElementBlock)("span",Mr,[(0,i.createVNode)(d,{name:"oxd-reaction"})])):(0,i.createCommentVNode)("",!0),(0,i.createTextVNode)(" "+(0,i.toDisplayString)(e.getLikes)+" "+(0,i.toDisplayString)(1===e.getLikes?e.$t("Like"):e.$t("Likes"))+" ",1),e.showEmployeeLikesListView?((0,i.openBlock)(),(0,i.createBlock)(m,{key:1,listContainerParentWrapper:e.$refs.likeContainer},{default:(0,i.withCtx)((()=>[e.onLoadingLikes?((0,i.openBlock)(),(0,i.createBlock)(c,{key:0,withContainer:!0})):(0,i.createCommentVNode)("",!0),((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.getEmplooyeeDetails,(t=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"header-details",key:t.id},[(0,i.createElementVNode)("span",Or,[(0,i.createElementVNode)("img",{src:e.ProfilePicUrl(t)},null,8,Rr)]),(0,i.createElementVNode)("div",_r,[(0,i.createElementVNode)("div",$r,(0,i.toDisplayString)(e.nameTextParser(null===t||void 0===t?void 0:t.empName)),1)])])))),128))])),_:1},8,["listContainerParentWrapper"])):(0,i.createCommentVNode)("",!0)],544),(0,i.createElementVNode)("div",jr,[(0,i.createElementVNode)("span",{onClick:t[4]||(t[4]=t=>e.showComments()),"data-test":"commentDiv"},(0,i.toDisplayString)(e.noOfComments)+" "+(0,i.toDisplayString)(1===e.noOfComments?e.$t("Comment"):e.$t("Comments"))+", ",1),(0,i.createElementVNode)("span",{class:"share-container","data-test":"shareContent",onMouseenter:t[5]||(t[5]=t=>e.onHoverShare()),onMouseleave:t[6]||(t[6]=t=>e.onHoverOutShare())},[(0,i.createTextVNode)((0,i.toDisplayString)(e.getShares)+" "+(0,i.toDisplayString)(1===e.getShares?e.$t("Share"):e.$t("Shares"))+" ",1),e.showEmployeeShareListView?((0,i.openBlock)(),(0,i.createBlock)(m,{key:0,listContainerParentWrapper:e.$refs.likeContainer},{default:(0,i.withCtx)((()=>[e.onLoadingShares?((0,i.openBlock)(),(0,i.createBlock)(c,{key:0,withContainer:!0,class:"oxd-loader-text-view"})):(0,i.createCommentVNode)("",!0),((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.getEmplooyeeDetails,(t=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"header-details",key:t.id},[(0,i.createElementVNode)("span",Ur,[(0,i.createElementVNode)("img",{src:e.ProfilePicUrl(t)},null,8,Zr)]),(0,i.createElementVNode)("div",Hr,[(0,i.createElementVNode)("div",qr,(0,i.toDisplayString)(e.nameTextParser(null===t||void 0===t?void 0:t.empName)),1)])])))),128))])),_:1},8,["listContainerParentWrapper"])):(0,i.createCommentVNode)("",!0)],32)])])])]),e.showShareModal?((0,i.openBlock)(),(0,i.createBlock)(u,{key:0,"onUpdate:show":t[7]||(t[7]=t=>e.onCloseBuzzShareModal()),"onUpdate:create":t[8]||(t[8]=t=>e.onPostReshare(t)),empProfilePic:e.empProfilePic,postId:e.postId},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",null,[e.postImageContent?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,innerHTML:e.postImageContent.outerHTML},null,8,Gr)):(0,i.createCommentVNode)("",!0),e.postVideoContent?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:1,innerHTML:e.postVideoContent.outerHTML},null,8,Wr)):(0,i.createCommentVNode)("",!0),e.postHeaderContent?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:2,innerHTML:e.postHeaderContent.outerHTML},null,8,Kr)):(0,i.createCommentVNode)("",!0),e.postTextContent?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:3,innerHTML:e.postTextContent.outerHTML},null,8,Qr)):(0,i.createCommentVNode)("",!0)])])),_:1},8,["empProfilePic","postId"])):(0,i.createCommentVNode)("",!0)],64)}const Yr=["tooltip"],Xr=(0,i.createStaticVNode)('<svg id="heart-svg" viewBox="467 392 58 57" xmlns="http://www.w3.org/2000/svg" data-v-e0081a26><g id="Group" fill="none" fill-rule="evenodd" transform="translate(467 392)" data-v-e0081a26><path d="M29.144 20.773c-.063-.13-4.227-8.67-11.44-2.59C7.63 28.795 28.94 43.256 29.143 43.394c.204-.138 21.513-14.6 11.44-25.213-7.214-6.08-11.377 2.46-11.44 2.59z" id="heart" fill="#64728c" data-v-e0081a26></path><circle id="main-circ" fill="rgba(100, 114, 140, 0.1)" opacity="0" cx="29.5" cy="29.5" r="1.5" data-v-e0081a26></circle><g id="grp7" opacity="0" transform="translate(7 6)" data-v-e0081a26><circle id="oval1" fill="#9CD8C3" cx="2" cy="6" r="4" data-v-e0081a26></circle><circle id="oval2" fill="#8CE8C3" cx="5" cy="2" r="4" data-v-e0081a26></circle></g><g id="grp6" opacity="0" transform="translate(0 28)" data-v-e0081a26><circle id="oval1" fill="#CC8EF5" cx="2" cy="7" r="4" data-v-e0081a26></circle><circle id="oval2" fill="#91D2FA" cx="3" cy="2" r="4" data-v-e0081a26></circle></g><g id="grp3" opacity="0" transform="translate(52 28)" data-v-e0081a26><circle id="oval2" fill="#9CD8C3" cx="2" cy="7" r="4" data-v-e0081a26></circle><circle id="oval1" fill="#8CE8C3" cx="4" cy="2" r="4" data-v-e0081a26></circle></g><g id="grp2" opacity="0" transform="translate(44 6)" data-v-e0081a26><circle id="oval2" fill="#CC8EF5" cx="5" cy="6" r="4" data-v-e0081a26></circle><circle id="oval1" fill="#CC8EF5" cx="2" cy="2" r="4" data-v-e0081a26></circle></g><g id="grp5" opacity="0" transform="translate(14 50)" data-v-e0081a26><circle id="oval1" fill="#91D2FA" cx="6" cy="5" r="4" data-v-e0081a26></circle><circle id="oval2" fill="#91D2FA" cx="2" cy="2" r="4" data-v-e0081a26></circle></g><g id="grp4" opacity="0" transform="translate(35 50)" data-v-e0081a26><circle id="oval1" fill="#F48EA7" cx="6" cy="5" r="4" data-v-e0081a26></circle><circle id="oval2" fill="#F48EA7" cx="2" cy="2" r="4" data-v-e0081a26></circle></g><g id="grp1" opacity="0" transform="translate(24)" data-v-e0081a26><circle id="oval1" fill="#9FC7FA" cx="2.5" cy="3" r="4" data-v-e0081a26></circle><circle id="oval2" fill="#9FC7FA" cx="7.5" cy="2" r="4" data-v-e0081a26></circle></g></g></svg>',1),es=[Xr];function ts(e,t,o,a,l,n){return(0,i.openBlock)(),(0,i.createElementBlock)("span",{onClick:t[0]||(t[0]=t=>e.onLike()),class:(0,i.normalizeClass)(["buzz-like-button",{likedPost:e.getLike}]),tooltip:e.$t("Like"),"data-test":"likeButton",flow:"bottom"},es,10,Yr)}var os=(0,i.defineComponent)({name:"buzzLikeButton",data:()=>({like:!1}),inject:["likeonPost","UserLikedPostProp"],methods:{onLike(){this.likeonPost()}},computed:{getLike(){return this.like}},mounted(){this.like=this.UserLikedPostProp}});const as=(0,Re.Z)(os,[["render",ts],["__scopeId","data-v-e0081a26"]]);var is=as;const ls={class:"share-view-header"},ns={class:"header-text"},rs={class:"share-view-body"},ss=["src"],ds={key:0},cs={class:"share-view-footer"};function ms(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-divider"),s=(0,i.resolveComponent)("profile-pic"),d=(0,i.resolveComponent)("oxd-input-field"),c=(0,i.resolveComponent)("oxd-loader"),m=(0,i.resolveComponent)("oxd-button"),u=(0,i.resolveComponent)("oxd-form"),p=(0,i.resolveComponent)("oxd-dialog");return(0,i.openBlock)(),(0,i.createBlock)(p,{style:(0,i.normalizeStyle)({maxWidth:"522px",padding:"0 1.4rem 0 1.4rem",borderRadius:"1.2rem"})},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",ls,[(0,i.createElementVNode)("div",ns,(0,i.toDisplayString)(e.$t("Share Post")),1)]),(0,i.createVNode)(r),(0,i.createVNode)(u,{onSubmitValid:e.sharePost,ref:"form"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",rs,[(0,i.createElementVNode)("div",{class:"post-header",style:(0,i.normalizeStyle)({height:e.textAreaParentHeight})},[(0,i.createVNode)(s,null,{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("img",{src:e.empProfilePic},null,8,ss)])),_:1}),(0,i.createVNode)(d,{class:(0,i.normalizeClass)({resharePostTextArea:!0,reshareTextinitialStyle:e.resizeStyleOnSubmit,showScrollBar:e.showScrollBar}),rows:1,placeholder:e.$t("What's on your mind?"),onInput:t[0]||(t[0]=t=>e.onInput(t)),type:"textarea",modelValue:e.postStatus,"onUpdate:modelValue":t[1]||(t[1]=t=>e.postStatus=t),rules:e.rules.post,"data-test":"postTextArea"},null,8,["class","placeholder","modelValue","rules"])],4),(0,i.createElementVNode)("div",null,[(0,i.renderSlot)(e.$slots,"default",{},void 0,!0)]),e.onLoading?((0,i.openBlock)(),(0,i.createElementBlock)("div",ds,[(0,i.createVNode)(c,{withContainer:!0,class:"oxd-loader-images-view"})])):(0,i.createCommentVNode)("",!0)]),(0,i.createElementVNode)("div",cs,[(0,i.createVNode)(m,{class:"post-btn",label:e.$t("Share"),size:"medium",displayType:"main",type:"submit"},null,8,["label"])])])),_:3},8,["onSubmitValid"])])),_:3},8,["style"])}var us=(0,i.defineComponent)({name:"buzzShareViewer",props:{empProfilePic:String,postId:String},emits:["update:create"],data:()=>({showModal:!1,resizeStyleOnSubmit:!1,postStatus:"",textAreaParentHeight:"60px",onLoading:!1,showScrollBar:!1,rules:{post:[$a(63535)]}}),components:{"oxd-button":jt.Z,"oxd-dialog":Wo.Z,"profile-pic":P.Z,"oxd-divider":ro.Z,"oxd-loader":co.Z,"oxd-input-field":lo.Z,"oxd-form":no.Z},methods:{onInput(e){this.resizeStyleOnSubmit=!1,e.target,e.target.style.height="auto",e.target.style.height=`${e.target.scrollHeight}px`,this.textAreaParentHeight="auto",parseInt(e.target.style.height)>400?this.showScrollBar=!0:this.showScrollBar=!1},sharePost(){if(!this.onLoading){let e;this.onLoading=!0,e=this.postStatus.trim()?{type:"reshare",reshare_text:this.postStatus,post_id:this.postId}:{type:"reshare",post_id:this.postId},this.ngServices.webservice.call(B,"POST",e).then((e=>(this.onLoading=!1,this.$emit("update:create",e.data.data[0]),this.$toast.success({title:this.$t(ye),message:this.$t(be)})))).catch((()=>(this.onLoading=!1,this.$toast.error({title:this.$t(fe),message:this.$t(Ee)}))))}}}});const ps=(0,Re.Z)(us,[["render",ms],["__scopeId","data-v-1aff9a4b"]]);var vs=ps;const hs=1;var gs=(0,i.defineComponent)({name:"buzzPostAction",mixins:[ul],data:()=>({showShareModal:!1,showCommentsStatus:!1,showEmployeeLikesListView:!1,showEmployeeShareListView:!1,peopleLikedOnPost:[],peopleSharedOnPost:[],shares:0,likes:0,onLoadingLikes:!1,onLoadingShares:!1}),props:{noOfShares:String,noOfLikes:String,shareId:String,postId:String,empProfilePic:String,postHeaderContent:String,postTextContent:HTMLElement,postImageContent:String,postVideoContent:String,showCommentsButton:{type:Boolean,default:!0}},emits:["showComments"],components:{"buzz-like-button":is,"oxd-icon-button":D.Z,"oxd-icon":In.Z,"buzz-share-viewer":vs,"pop-over-list":Dr,"oxd-loader":co.Z},computed:{getEmplooyeeDetails(){return this.showEmployeeLikesListView?this.peopleLikedOnPost:this.showEmployeeShareListView?this.peopleSharedOnPost:[]},noOfComments(){let e=this.$store.state.buzz.comments,t=e.filter((e=>{if(Number(e.shareId)===Number(this.shareId))return e}));return t.length},getShares(){return this.shares},getLikes(){return this.likes}},watch:{noOfLikes(e){this.likes=e,this.peopleLikedOnPost=[],this.getLikesOnPost()}},methods:{nameTextParser(e){return e.length>30?e.substring(0,35)+"...":e},sharePost(){this.showShareModal=!0},onCloseBuzzShareModal(){this.showShareModal=!1},onPostReshare(e){this.showShareModal=!1,this.$store.commit("buzz/unshitSharePost",e),this.getResharesOnPost(),this.getSelectedUserEmployeeStats()},showComments(){this.showCommentsStatus=!this.showCommentsStatus,this.$emit("showComments",this.showCommentsStatus)},onHoverLikes(){this.showEmployeeLikesListView=!0},onHoverOutLikes(){this.showEmployeeLikesListView=!1},onHoverShare(){this.showEmployeeShareListView=!0},onHoverOutShare(){this.showEmployeeShareListView=!1},ProfilePicUrl(e){var t,o,a,i;return(null===(t=null===e||void 0===e?void 0:e.empProfilePic)||void 0===t?void 0:t.image)&&(null===(o=null===e||void 0===e?void 0:e.empProfilePic)||void 0===o?void 0:o.type)?ge.base64ImageConvertion(null===(a=null===e||void 0===e?void 0:e.empProfilePic)||void 0===a?void 0:a.type,null===(i=null===e||void 0===e?void 0:e.empProfilePic)||void 0===i?void 0:i.image):"images/default.png"},getLikesOnPost(){this.onLoadingLikes=!0;let e={serverFetch:!0};this.ngServices.webservice.get(O,{filter:{shareIds:[Number(this.shareId)]},include:"Employee",includeTerminated:!0},e).then((e=>{this.peopleLikedOnPost=e.data.data?e.data.data.map((e=>e.employee)):[],this.onLoadingLikes=!1})).catch((()=>(this.onLoadingLikes=!1,this.$toast.error({title:this.$t(fe),message:this.$t(Ee)}))))},getResharesOnPost(){this.onLoadingShares=!0;let e={serverFetch:!0};this.ngServices.webservice.get(B,{postIds:[Number(this.postId)],include:"Employee",type:hs},e).then((e=>{const t=e.data.data;this.peopleSharedOnPost=t.map((e=>{var t,o,a;let i={id:Number(null===(t=e.Employee)||void 0===t?void 0:t.sharedEmpNumber),empName:null===(o=e.Employee)||void 0===o?void 0:o.sharedEmpName,empProfilePic:null===(a=e.Employee)||void 0===a?void 0:a.empProfilePic};return i})),this.shares=this.peopleSharedOnPost.length,this.onLoadingShares=!1})).catch((()=>(this.onLoadingShares=!1,this.$toast.error({title:this.$t(fe),message:this.$t(Ee)}))))}},mounted:function(){this.getLikesOnPost(),this.getResharesOnPost(),this.shares=this.noOfShares?Number(this.noOfShares):0,this.likes=this.noOfLikes?Number(this.noOfLikes):0}});const ys=(0,Re.Z)(gs,[["render",Jr],["__scopeId","data-v-6688c4f8"]]);var fs=ys,bs=(0,i.defineComponent)({name:"buzzImageViewer",props:{images:{type:Object},imageIndex:Number,statusText:String,empProfilePic:String,empName:String,sharedTime:String,postId:String,postLikes:String,postShares:String,shareId:String,loggedInEmployeePic:String,postHeaderContent:String,postTextContent:String,postImageContent:String,sharedEmpNo:String,sharedEmpName:String,sharedJobTitle:String,sharedEmpLocation:String,sharedEmpWorkEmail:String},data:()=>({showModal:!1,selectedImages:[],resizeStyleOnSubmit:!1,postStatus:"",onLoading:!1,index:0,postContentLength:0,maxContentLength:500,fullPostText:"",profileKey:0,profileNameKey:0}),emits:["update:show"],components:{"oxd-dialog":Wo.Z,"profile-pic":P.Z,"oxd-divider":ro.Z,"comment-list":Lr,"buzz-post-actions":fs,"oxd-icon-button":D.Z},computed:{pageNo(){return this.$store.state.buzz.pageNo},pageLimit(){return this.$store.state.buzz.pageLimit},empNoFilter(){return this.$store.state.buzz.selectedEmpNo},orderFilter(){return this.$store.state.buzz.orderFilterForShare},orderByFilter(){return this.$store.state.buzz.orderByFilterForShare},getCurrentImage(){var e;return null===(e=this.images)||void 0===e?void 0:e[this.index]},postedDate(){if(this.sharedTime){const e=Q(new Date(this.sharedTime),new Date,{locale:this.$locale});return e.charAt(0).toUpperCase()+e.substr(1)}return""},showReadMoreLink(){return this.postContentLength>this.maxContentLength},customizedPostContent(){return this.statusText}},methods:{onNext(){this.index++},onPrevious(){this.index--},onClose(){this.$emit("update:show")},onClickEmployee(){Number(this.sharedEmpNo)!==this.empNo?(this.$store.commit("buzz/isCurrentLoggedEmployeeProfile",!1),this.$store.commit("buzz/setEmpNoFilter",this.sharedEmpNo),this.$store.commit("buzz/setOrderFilter",null),this.$store.commit("buzz/setOrderByFilter",null),this.$store.commit("buzz/setSelectedEmployeeName",this.sharedEmpName),this.$store.commit("buzz/setSelectedEmployeeLocation",this.sharedEmpLocation),this.$store.commit("buzz/setSelectedEmployeeEmail",this.sharedEmpWorkEmail),this.$store.commit("buzz/setSelectedEmployeeDesignation",this.sharedJobTitle)):(this.$store.commit("buzz/isCurrentLoggedEmployeeProfile",!0),this.$store.commit("buzz/setEmpNoFilter",this.empNo),this.$store.commit("buzz/setOrderFilter",null),this.$store.commit("buzz/setOrderByFilter",null)),this.$store.commit("buzz/emptySelectedEmployeeLargeProfilePicture");const e={empNo:this.empNoFilter,size:"big",include:"Employee",webservice:this.ngServices.webservice};this.$store.dispatch("buzz/getSelectedUserProfilePictureLarge",e).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)}))),this.ngServices.$state.go("buzz.profile",{empId:this.empNoFilter}),this.loadProfile()},loadProfile(){this.$store.commit("buzz/emptySharePosts"),this.$store.commit("buzz/setPageNo",1);const e={pageNo:this.pageNo,limit:this.pageLimit,order:this.orderFilter,orderBy:this.orderByFilter,empNumber:this.empNoFilter?[this.empNoFilter]:null,webservice:this.ngServices.webservice};this.$store.commit("buzz/setLoading",!0),this.$store.commit("buzz/setMorePostsLoading",!0),this.$store.dispatch("buzz/getSharePosts",e).then((()=>{this.profileKey++,this.profileNameKey++})).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)})))},toggleBodyClass(e,t){const o=document.body;"removeScroller"===e?o.classList.add(t):o.classList.remove(t)},onResharePost(e){this.$store.commit("buzz/unshitSharePost",e)},showFullPostTextContent(){this.maxContentLength=this.postContentLength,this.customizedPostContent=this.fullPostText},postTextParser(e){return this.postContentLength=null===e||void 0===e?void 0:e.length,this.fullPostText=e,this.postContentLength>this.maxContentLength?e.substring(0,this.maxContentLength)+"...":e}},mounted(){this.index=this.imageIndex?this.imageIndex:0,this.toggleBodyClass("removeScroller","removeScroll")},unmounted(){this.toggleBodyClass("addScroller","removeScroll")}});const Cs=(0,Re.Z)(bs,[["render",Kn],["__scopeId","data-v-538b86d6"]]);var Ss=Cs,ws=(0,i.defineComponent)({name:"buzzPost",mixins:[ul],props:{cardData:{type:Object,defaut:{}},empProfilePic:String},data:()=>({showBuzzImageViewer:!1,showBuzzFileModal:!1,selectedImageIndex:0,noOfLikes:0,IsLikesUpdated:!1,buzz_comment_url:"",showConfimationModal:!1,showComments:!1,isLikeLoading:!1,postContentLength:0,shareContentLength:0,fullPostText:"",fullShareText:"",maxContentLength:500,maxShareContentLength:500,selectEmpId:0}),provide(){return{likeonPost:this.likeonPost,UserLikedPostProp:(0,i.computed)((()=>this.userLikedPost))}},components:{Sheet:io.Z,"profile-pic":P.Z,"oxd-divider":ro.Z,"buzz-image-viewer":Ss,"comment-list":Lr,"buzz-post-actions":fs,"oxd-icon":In.Z,"buzz-fileupload-modal":wi,"oxd-dropdown-menu":V.Z,"oxd-icon-button":D.Z,"confirmation-modal":kr},computed:{pageNo(){return this.$store.state.buzz.pageNo},pageLimit(){return this.$store.state.buzz.pageLimit},empNoFilter(){return this.$store.state.buzz.selectedEmpNo},orderFilter(){return this.$store.state.buzz.orderFilterForShare},orderByFilter(){return this.$store.state.buzz.orderByFilterForShare},userLikedPost(){var e;const t=null===(e=this.$store.state.buzz.userLikedPosts)||void 0===e?void 0:e.find((e=>{var t;if(Number(e.shareId)===Number(null===(t=this.cardData)||void 0===t?void 0:t.shareId))return e}));return!!t},sharedDate(){var e,t;if(null===(e=this.cardData)||void 0===e?void 0:e.sharedTime){const e=Q(new Date(null===(t=this.cardData)||void 0===t?void 0:t.sharedTime),new Date,{locale:this.$locale});return e.charAt(0).toUpperCase()+e.substr(1)}return""},postedDate(){var e,t,o,a;if(null===(t=null===(e=this.cardData)||void 0===e?void 0:e.post)||void 0===t?void 0:t.postedTime){const e=Q(new Date(null===(a=null===(o=this.cardData)||void 0===o?void 0:o.post)||void 0===a?void 0:a.postedTime),new Date,{locale:this.$locale});return e.charAt(0).toUpperCase()+e.substr(1)}return""},imageUrl(){var e,t,o,a,i,l,n,r,s,d,c,m,u,p,v,h,g,y;const f=[];if(null===(o=null===(t=null===(e=this.cardData)||void 0===e?void 0:e.post)||void 0===t?void 0:t.kudos)||void 0===o?void 0:o.kudosBackground){let e=ge.base64ImageConvertion(null===(l=null===(i=null===(a=this.cardData)||void 0===a?void 0:a.post)||void 0===i?void 0:i.kudos)||void 0===l?void 0:l.kudosBackgroundImageType,null===(s=null===(r=null===(n=this.cardData)||void 0===n?void 0:n.post)||void 0===r?void 0:r.kudos)||void 0===s?void 0:s.kudosBackground);return f.push(e),f}if(null===(c=null===(d=this.cardData)||void 0===d?void 0:d.post)||void 0===c?void 0:c.photos)for(var b=0;b<(null===(p=null===(u=null===(m=this.cardData)||void 0===m?void 0:m.post)||void 0===u?void 0:u.photos)||void 0===p?void 0:p.length);b++){let e=ge.base64ImageConvertion(null===(h=null===(v=this.cardData)||void 0===v?void 0:v.post)||void 0===h?void 0:h.photos[b].type,null===(y=null===(g=this.cardData)||void 0===g?void 0:g.post)||void 0===y?void 0:y.photos[b].base64);f.push(e)}return f},ProfilePicUrl(){var e,t,o,a,i,l,n,r,s,d,c,m,u,p,v,h;return(null===(a=null===(o=null===(t=null===(e=this.cardData)||void 0===e?void 0:e.post)||void 0===t?void 0:t.Employee)||void 0===o?void 0:o.empProfilePic)||void 0===a?void 0:a.image)&&(null===(r=null===(n=null===(l=null===(i=this.cardData)||void 0===i?void 0:i.post)||void 0===l?void 0:l.Employee)||void 0===n?void 0:n.empProfilePic)||void 0===r?void 0:r.type)?ge.base64ImageConvertion(null===(m=null===(c=null===(d=null===(s=this.cardData)||void 0===s?void 0:s.post)||void 0===d?void 0:d.Employee)||void 0===c?void 0:c.empProfilePic)||void 0===m?void 0:m.type,null===(h=null===(v=null===(p=null===(u=this.cardData)||void 0===u?void 0:u.post)||void 0===p?void 0:p.Employee)||void 0===v?void 0:v.empProfilePic)||void 0===h?void 0:h.image):"images/default.png"},ShareProfilePicUrl(){var e,t,o,a,i,l,n,r,s,d,c,m;return(null===(o=null===(t=null===(e=this.cardData)||void 0===e?void 0:e.Employee)||void 0===t?void 0:t.empProfilePic)||void 0===o?void 0:o.image)&&(null===(l=null===(i=null===(a=this.cardData)||void 0===a?void 0:a.Employee)||void 0===i?void 0:i.empProfilePic)||void 0===l?void 0:l.type)?ge.base64ImageConvertion(null===(s=null===(r=null===(n=this.cardData)||void 0===n?void 0:n.Employee)||void 0===r?void 0:r.empProfilePic)||void 0===s?void 0:s.type,null===(m=null===(c=null===(d=this.cardData)||void 0===d?void 0:d.Employee)||void 0===c?void 0:c.empProfilePic)||void 0===m?void 0:m.image):"images/default.png"},KudosProfilePicUrl(){var e,t,o,a,i,l,n,r,s,d,c,m,u,p,v,h,g,y,f,b;return(null===(i=null===(a=null===(o=null===(t=null===(e=this.cardData)||void 0===e?void 0:e.post)||void 0===t?void 0:t.kudos)||void 0===o?void 0:o.Employee)||void 0===a?void 0:a.kudosEmpProfilePic)||void 0===i?void 0:i.image)&&(null===(d=null===(s=null===(r=null===(n=null===(l=this.cardData)||void 0===l?void 0:l.post)||void 0===n?void 0:n.kudos)||void 0===r?void 0:r.Employee)||void 0===s?void 0:s.kudosEmpProfilePic)||void 0===d?void 0:d.type)?ge.base64ImageConvertion(null===(v=null===(p=null===(u=null===(m=null===(c=this.cardData)||void 0===c?void 0:c.post)||void 0===m?void 0:m.kudos)||void 0===u?void 0:u.Employee)||void 0===p?void 0:p.kudosEmpProfilePic)||void 0===v?void 0:v.type,null===(b=null===(f=null===(y=null===(g=null===(h=this.cardData)||void 0===h?void 0:h.post)||void 0===g?void 0:g.kudos)||void 0===y?void 0:y.Employee)||void 0===f?void 0:f.kudosEmpProfilePic)||void 0===b?void 0:b.image):"images/default.png"},isKudosPost(){var e,t;return!!(null===(t=null===(e=this.cardData)||void 0===e?void 0:e.post)||void 0===t?void 0:t.kudos)},isVideoPost(){var e,t;return!!(null===(t=null===(e=this.cardData)||void 0===e?void 0:e.post)||void 0===t?void 0:t.video)},getImageDetails(){var e,t,o,a,i;const l=[];return(null===(t=null===(e=this.cardData)||void 0===e?void 0:e.post)||void 0===t?void 0:t.photos)&&(null===(i=null===(a=null===(o=this.cardData)||void 0===o?void 0:o.post)||void 0===a?void 0:a.photos)||void 0===i||i.forEach(((e,t)=>{let o={index:t,name:e.name,src:ge.base64ImageConvertion(null===e||void 0===e?void 0:e.type,null===e||void 0===e?void 0:e.base64),base64:e.base64,size:Number(e.size),type:e.type};l.push(o)}))),l},customizedPostContent(){var e,t;return null===(t=null===(e=this.cardData)||void 0===e?void 0:e.post)||void 0===t?void 0:t.text},customizedSharePostContent(){var e;return null===(e=this.cardData)||void 0===e?void 0:e.shareText},showReadMoreLink(){return this.postContentLength>this.maxContentLength},showReadMoreShareLink(){return this.shareContentLength>this.maxShareContentLength}},methods:{onClickEmployee(e,t,o,a,i){this.selectEmpId=e,this.selectEmpId!==this.empNo?(this.$store.commit("buzz/isCurrentLoggedEmployeeProfile",!1),this.$store.commit("buzz/setEmpNoFilter",this.selectEmpId),this.$store.commit("buzz/setOrderFilter",null),this.$store.commit("buzz/setOrderByFilter",null),this.$store.commit("buzz/setSelectedEmployeeName",t),this.$store.commit("buzz/setSelectedEmployeeLocation",i),this.$store.commit("buzz/setSelectedEmployeeEmail",o),this.$store.commit("buzz/setSelectedEmployeeDesignation",a)):(this.$store.commit("buzz/isCurrentLoggedEmployeeProfile",!0),this.$store.commit("buzz/setEmpNoFilter",this.empNo),this.$store.commit("buzz/setOrderFilter",null),this.$store.commit("buzz/setOrderByFilter",null)),this.$store.commit("buzz/emptySelectedEmployeeLargeProfilePicture");const l={empNo:this.empNoFilter,size:"big",include:"Employee",webservice:this.ngServices.webservice};this.$store.dispatch("buzz/getSelectedUserProfilePictureLarge",l).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)}))),this.ngServices.$state.go("buzz.profile",{empId:this.empNoFilter}),this.loadProfile()},loadProfile(){this.$store.commit("buzz/emptySharePosts"),this.$store.commit("buzz/setPageNo",1),this.$store.commit("buzz/setFilterWithoutEmployee",!1);const e={pageNo:this.pageNo,limit:this.pageLimit,order:this.orderFilter,orderBy:this.orderByFilter,empNumber:this.empNoFilter?[this.empNoFilter]:null,webservice:this.ngServices.webservice};this.$store.commit("buzz/setLoading",!0),this.$store.commit("buzz/setMorePostsLoading",!0),this.$store.dispatch("buzz/getSharePosts",e).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)})))},openImageViewer(e){this.showBuzzImageViewer=!0,this.selectedImageIndex=e},onCloseBuzzImageViewer(){this.showBuzzImageViewer=!1},like(){this.noOfLikes++},unlike(){this.noOfLikes--},likeonPost(){var e,t;if(!this.isLikeLoading){this.isLikeLoading=!0;const o={data:{shareId:(null===(e=this.cardData)||void 0===e?void 0:e.shareId)?null===(t=this.cardData)||void 0===t?void 0:t.shareId:""},webservice:this.ngServices.webservice};this.userLikedPost?this.$store.dispatch("buzz/removeLikeFromPost",o).then((()=>{this.isLikeLoading=!1,this.unlike(),this.getSelectedUserEmployeeStats()})).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)}))):this.$store.dispatch("buzz/addLikeForPost",o).then((()=>{this.isLikeLoading=!1,this.like(),this.getSelectedUserEmployeeStats()})).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)})))}},getCommentData(){let e={serverFetch:!0};this.ngServices.webservice.get(this.buzz_comment_url,{include:"Employee"},e).then((e=>{if(e.data.data.length>0){let t=e.data.data;t.forEach((e=>{this.$store.commit("buzz/loadComments",e)}))}})).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(Ee)})))},deletePost(){var e,t;const o={data:{data:[(null===(e=this.cardData)||void 0===e?void 0:e.shareId)?null===(t=this.cardData)||void 0===t?void 0:t.shareId:""]},webservice:this.ngServices.webservice};this.$store.dispatch("buzz/deletePost",o).then((()=>{var e,t;return(null===(t=null===(e=this.cardData)||void 0===e?void 0:e.post)||void 0===t?void 0:t.kudos)&&this.getKudos(),this.getSelectedUserEmployeeStats(),this.$toast.success({title:this.$t(ye),message:this.$t(we)})})).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(Ee)})))},confirmationModalAction(e){"delete"===e&&this.deletePost(),this.showConfimationModal=!1},confirmationModalDisplay(){this.showConfimationModal=!0},getKudos(){const e={include:"MostKudos",includePhoto:!0,pageNo:1,limit:100,webservice:this.ngServices.webservice};this.$store.dispatch("buzz/getMostKudos",e).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)})))},onResharePost(e){this.$store.commit("buzz/unshitSharePost",e)},onCloseBuzzFileModal(){this.showBuzzFileModal=!1},onPostCreated(e){this.showBuzzFileModal=!1,this.$store.commit("buzz/unshitSharePost",e)},onPostUpdated(e){this.showBuzzFileModal=!1,this.$store.commit("buzz/updateSharePost",e)},onEdit(){this.showBuzzFileModal=!0},showCommentsOnPost(e){this.showComments=e},postTextParser(e){return this.postContentLength=null===e||void 0===e?void 0:e.length,this.fullPostText=e,this.postContentLength>this.maxContentLength?e.substring(0,this.maxContentLength)+"...":e},shareTextParser(e){return this.shareContentLength=null===e||void 0===e?void 0:e.length,this.fullShareText=e,this.shareContentLength>this.maxShareContentLength?e.substring(0,this.maxShareContentLength)+"...":e},showFullPostTextContent(){this.maxContentLength=this.postContentLength,this.customizedPostContent=this.fullPostText},showFullShareTextContent(){this.maxShareContentLength=this.shareContentLength,this.customizedSharePostContent=this.fullShareText},getSanitizedHtml(e){return e?{htmlString:e,IsShowHtmlContent:!0}:""}},mounted:function(){var e;this.$nextTick((function(){var e,t;this.IsLikesUpdated=!0,this.noOfLikes=(null===(e=this.cardData)||void 0===e?void 0:e.noOfLikes)?Number(null===(t=this.cardData)||void 0===t?void 0:t.noOfLikes):0})),this.buzz_comment_url=`buzz/share/${null===(e=this.cardData)||void 0===e?void 0:e.shareId}/comments`,this.getCommentData()}});const Es=(0,Re.Z)(ws,[["render",Bn],["__scopeId","data-v-114510d2"]]);var ks=Es,xs=(0,i.defineComponent)({name:"buzzPosts",data(){return{loggedEmployeeProfile:"",homeButtonKey:0}},components:{"oxd-loader":co.Z,"buzz-post":ks},inject:["empProfilePic"],computed:{isCurrentLoggedEmployee(){return this.$store.state.buzz.isLoggedEmployeeProfile},filterPostsWithoutEmployee(){return this.$store.state.buzz.filterWithoutEmployee},pageNo(){return this.$store.state.buzz.pageNo},pageLimit(){return this.$store.state.buzz.pageLimit},empNoFilter(){return this.$store.state.buzz.selectedEmpNo},orderFilter(){return this.$store.state.buzz.orderFilterForShare},orderByFilter(){return this.$store.state.buzz.orderByFilterForShare},cardData(){return this.$store.state.buzz.shares},isCardsAvailable(){return this.$store.state.buzz.isCardsAvailable},morePostsLoading(){return this.$store.state.buzz.morePostsLoading},onLoading(){return this.$store.state.buzz.onLoading},isNewPostsAvailable(){return this.$store.state.buzz.isNewPostsAvailable}},methods:{loadHomePage(){window.scrollTo({top:0,behavior:"smooth"}),this.$store.commit("buzz/setNewPostsAvailable",!1),this.$store.commit("buzz/setSelectedMenu",""),this.$store.commit("buzz/setIsPostsFetchActionTriggred",!0),this.$store.commit("buzz/emptySharePosts",!0),this.$store.commit("buzz/isCurrentLoggedEmployeeProfile",!0),this.$store.commit("buzz/setEmpNoFilter",null),this.$store.commit("buzz/setOrderFilter",null),this.$store.commit("buzz/setOrderByFilter",null),this.ngServices.$state.go("buzz.home"),this.$store.commit("buzz/setPageNo",1);const e={pageNo:this.pageNo,limit:this.pageLimit,order:this.orderFilter,orderBy:this.orderByFilter,empNumber:this.empNoFilter?[this.empNoFilter]:null,webservice:this.ngServices.webservice};this.$store.commit("buzz/setLoading",!0),this.$store.commit("buzz/setMorePostsLoading",!0),this.$store.dispatch("buzz/getSharePosts",e).then((()=>{this.homeButtonKey++})).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)})))},scrollEventListener(){let e=this.$refs.cardsWrapper,t=null===e||void 0===e?void 0:e.getBoundingClientRect().bottom,o=window.innerHeight;if(!this.morePostsLoading&&this.isCardsAvailable&&t&&t<o){this.$store.commit("buzz/incrementPageNo");const e={pageNo:this.pageNo,limit:this.pageLimit,order:this.orderFilter,orderBy:this.orderByFilter,empNumber:this.filterPostsWithoutEmployee?null:this.empNoFilter?[this.empNoFilter]:"buzz.profile"===this.ngServices.$state.currentState.name?[0]:null,webservice:this.ngServices.webservice};this.$store.commit("buzz/setLoading",!0),this.$store.commit("buzz/setMorePostsLoading",!0),this.$store.dispatch("buzz/getSharePosts",e).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)})))}}},beforeMount:function(){this.loggedEmployeeProfile=this.empProfilePic},mounted:function(){window.addEventListener("scroll",this.scrollEventListener)},onUnmounted:function(){window.removeEventListener("scroll",this.scrollEventListener)}});const Ns=(0,Re.Z)(xs,[["render",El],["__scopeId","data-v-0ef1346a"]]);var As=Ns,Ds=(0,i.defineComponent)({name:"buzz-home",components:{"buzz-content":Rt,"buzz-posts":As,"buzz-left-menu":Ht,"buzz-create-post":hl},emits:["update:create","update:edit"],data(){return{loggedEmployeeProfile:""}},inject:["empProfilePic"],computed:{pageNo(){return this.$store.state.buzz.pageNo},pageLimit(){return this.$store.state.buzz.pageLimit},orderFilter(){return this.$store.state.buzz.orderFilterForShare},orderByFilter(){return this.$store.state.buzz.orderByFilterForShare}},methods:{filterSharesByLikes(){this.$store.commit("buzz/emptySharePosts"),this.$store.commit("buzz/setFilterWithoutEmployee",!0),this.$store.commit("buzz/setLoading",!0),this.$store.commit("buzz/setMorePostsLoading",!0),this.$store.commit("buzz/setEmpNoFilter",this.empNo),this.$store.commit("buzz/setOrderFilter","descending"),this.$store.commit("buzz/setOrderByFilter","no of likes"),this.$store.commit("buzz/setPageNo",1);const e={pageNo:this.pageNo,limit:this.pageLimit,orderBy:this.orderByFilter,order:this.orderFilter,webservice:this.ngServices.webservice};this.$store.dispatch("buzz/getSharePosts",e).catch((()=>this.$toast.error({title:fe,message:De})))},filterSharesByComments(){this.$store.commit("buzz/emptySharePosts"),this.$store.commit("buzz/setFilterWithoutEmployee",!0),this.$store.commit("buzz/setLoading",!0),this.$store.commit("buzz/setMorePostsLoading",!0),this.$store.commit("buzz/setEmpNoFilter",this.empNo),this.$store.commit("buzz/setOrderFilter","descending"),this.$store.commit("buzz/setOrderByFilter","no of comments"),this.$store.commit("buzz/setPageNo",1);const e={pageNo:this.pageNo,limit:this.pageLimit,orderBy:this.orderByFilter,order:this.orderFilter,webservice:this.ngServices.webservice};this.$store.dispatch("buzz/getSharePosts",e).catch((()=>this.$toast.error({title:fe,message:De})))}},beforeMount:function(){this.loggedEmployeeProfile=this.empProfilePic}});const Ts=(0,Re.Z)(Ds,[["render",je],["__scopeId","data-v-69bf23c6"]]);var Ps=Ts;const Vs={key:0,class:"profile-content","data-test":"currentLoggedInEmployee"},Bs={key:0,class:"profile-image"},Is=["src"],Ls={class:"employee-profile-content"},Fs={class:"emp-name"},zs={class:"emp-designation"},Ms={class:"emp-email"},Os={key:1,class:"employee-profile-location"},Rs={class:"location-icon-container"},_s={class:"location-details-container"},$s={class:"location-header"},js={class:"location-detail"},Us={key:2,class:"statistics-section"},Zs={class:"statistics-title"},Hs={class:"statistics-content"},qs={class:""},Gs={class:"statistic-pill hot-pink"},Ws={class:"statistics-content"},Ks={class:""},Qs={class:"statistic-pill lime-green"},Js={class:"statistics-content"},Ys={class:""},Xs={class:"statistic-pill mustered-yellow"},ed={key:1,class:"profile-content","data-test":"OtherEmployee"},td={key:0,class:"profile-image"},od=["src"],ad={class:"employee-profile-content"},id={class:"emp-name"},ld={class:"emp-designation"},nd={class:"emp-email"},rd={key:1,class:"employee-profile-location"},sd={class:"location-icon-container"},dd={class:"location-details-container"},cd={class:"location-header"},md={class:"location-detail"},ud={key:2,class:"statistics-section"},pd={class:"statistics-title"},vd={class:"statistics-content"},hd={class:""},gd={class:"statistic-pill hot-pink"},yd={class:"statistics-content"},fd={class:""},bd={class:"statistic-pill lime-green"},Cd={class:"statistics-content"},Sd={class:""},wd={class:"statistic-pill mustered-yellow"};function Ed(e,t,o,a,l,n){const r=(0,i.resolveComponent)("profile-pic"),s=(0,i.resolveComponent)("oxd-icon-button"),d=(0,i.resolveComponent)("oxd-icon"),c=(0,i.resolveComponent)("buzz-create-post"),m=(0,i.resolveComponent)("buzz-posts"),u=(0,i.resolveComponent)("buzz-content");return(0,i.openBlock)(),(0,i.createBlock)(u,null,{topContent:(0,i.withCtx)((()=>[])),leftMenu:(0,i.withCtx)((()=>[e.isCurrentLoggedEmployee&&e.ngServices.$stateParams.empId===e.empNo?((0,i.openBlock)(),(0,i.createElementBlock)("div",Vs,[e.userLargeProfilePic?((0,i.openBlock)(),(0,i.createElementBlock)("div",Bs,[(0,i.createVNode)(r,null,{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("img",{src:e.userLargeProfilePic},null,8,Is)])),_:1})])):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("div",Ls,[(0,i.createElementVNode)("div",Fs,(0,i.toDisplayString)(e.empName),1),(0,i.createElementVNode)("div",zs,(0,i.toDisplayString)(e.empJobTitle),1),(0,i.createElementVNode)("div",Ms,(0,i.toDisplayString)(e.empEmail),1)]),e.empLocation?((0,i.openBlock)(),(0,i.createElementBlock)("div",Os,[(0,i.createElementVNode)("div",Rs,[(0,i.createVNode)(s,{name:"oxd-location"})]),(0,i.createElementVNode)("div",_s,[(0,i.createElementVNode)("div",$s,(0,i.toDisplayString)(e.$t("Location")),1),(0,i.createElementVNode)("div",js,(0,i.toDisplayString)(e.empLocation),1)])])):(0,i.createCommentVNode)("",!0),e.selectedEmpEmployeeStats?((0,i.openBlock)(),(0,i.createElementBlock)("div",Us,[(0,i.createElementVNode)("div",Zs,(0,i.toDisplayString)(e.$t("Statistics")),1),(0,i.createElementVNode)("div",Hs,[(0,i.createVNode)(d,{name:"oxd-reaction"}),(0,i.createElementVNode)("div",qs,(0,i.toDisplayString)(e.$t("Likes Received")),1),(0,i.createElementVNode)("div",Gs,[(0,i.createElementVNode)("span",null,(0,i.toDisplayString)(e.selectedEmpLikes),1)])]),(0,i.createElementVNode)("div",Ws,[(0,i.createVNode)(d,{name:"oxd-chat"}),(0,i.createElementVNode)("div",Ks,(0,i.toDisplayString)(e.$t("Comments Given")),1),(0,i.createElementVNode)("div",Qs,[(0,i.createElementVNode)("span",null,(0,i.toDisplayString)(e.selectedEmpComments),1)])]),(0,i.createElementVNode)("div",Js,[(0,i.createVNode)(d,{name:"oxd-share"}),(0,i.createElementVNode)("div",Ys,(0,i.toDisplayString)(e.$t("Shares")),1),(0,i.createElementVNode)("div",Xs,[(0,i.createElementVNode)("span",null,(0,i.toDisplayString)(e.selectedEmpShares),1)])])])):(0,i.createCommentVNode)("",!0)])):((0,i.openBlock)(),(0,i.createElementBlock)("div",ed,[e.selectedUserLargeProfilePic?((0,i.openBlock)(),(0,i.createElementBlock)("div",td,[(0,i.createVNode)(r,null,{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("img",{src:e.selectedUserLargeProfilePic},null,8,od)])),_:1})])):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("div",ad,[(0,i.createElementVNode)("div",id,(0,i.toDisplayString)(e.selectedUserName),1),(0,i.createElementVNode)("div",ld,(0,i.toDisplayString)(e.selectedUserDesignation),1),(0,i.createElementVNode)("div",nd,(0,i.toDisplayString)(e.selectedUserEmail),1)]),e.selectedUserLocation?((0,i.openBlock)(),(0,i.createElementBlock)("div",rd,[(0,i.createElementVNode)("div",sd,[(0,i.createVNode)(s,{name:"oxd-location"})]),(0,i.createElementVNode)("div",dd,[(0,i.createElementVNode)("div",cd,(0,i.toDisplayString)(e.$t("Location")),1),(0,i.createElementVNode)("div",md,(0,i.toDisplayString)(e.selectedUserLocation),1)])])):(0,i.createCommentVNode)("",!0),e.selectedEmpEmployeeStats?((0,i.openBlock)(),(0,i.createElementBlock)("div",ud,[(0,i.createElementVNode)("div",pd,(0,i.toDisplayString)(e.$t("Statistics")),1),(0,i.createElementVNode)("div",vd,[(0,i.createVNode)(d,{name:"oxd-reaction"}),(0,i.createElementVNode)("div",hd,(0,i.toDisplayString)(e.$t("Likes Received")),1),(0,i.createElementVNode)("div",gd,[(0,i.createElementVNode)("span",null,(0,i.toDisplayString)(e.selectedEmpLikes),1)])]),(0,i.createElementVNode)("div",yd,[(0,i.createVNode)(d,{name:"oxd-chat"}),(0,i.createElementVNode)("div",fd,(0,i.toDisplayString)(e.$t("Comments Given")),1),(0,i.createElementVNode)("div",bd,[(0,i.createElementVNode)("span",null,(0,i.toDisplayString)(e.selectedEmpComments),1)])]),(0,i.createElementVNode)("div",Cd,[(0,i.createVNode)(d,{name:"oxd-share"}),(0,i.createElementVNode)("div",Sd,(0,i.toDisplayString)(e.$t("Shares")),1),(0,i.createElementVNode)("div",wd,[(0,i.createElementVNode)("span",null,(0,i.toDisplayString)(e.selectedEmpShares),1)])])])):(0,i.createCommentVNode)("",!0)]))])),mainContent:(0,i.withCtx)((()=>[e.loggedEmployeeProfile&&e.isCurrentLoggedEmployee&&e.ngServices.$stateParams.empId===e.empNo?((0,i.openBlock)(),(0,i.createBlock)(c,{key:0,empProfilePic:e.loggedEmployeeProfile,class:"buzz-content"},null,8,["empProfilePic"])):(0,i.createCommentVNode)("",!0),(0,i.createVNode)(m)])),_:1})}var kd=(0,i.defineComponent)({name:"buzz-profile",mixins:[ul],data(){return{loggedEmployeeProfile:"",selectedEmployeeProfile:""}},inject:["empProfilePic"],components:{"buzz-content":Rt,"buzz-posts":As,"buzz-create-post":hl,"profile-pic":P.Z,"oxd-icon-button":D.Z,"oxd-icon":In.Z},computed:{isCurrentLoggedEmployee(){return this.$store.state.buzz.isLoggedEmployeeProfile},userLargeProfilePic(){return this.$store.state.buzz.userProfilePictureLarge},selectedUserLargeProfilePic(){return this.$store.state.buzz.selectedUserProfilePictureLarge},selectedUserName(){return this.$store.state.buzz.selectedEmpName},selectedUserDesignation(){return this.$store.state.buzz.selectedEmpWorkDesignation},selectedUserLocation(){return this.$store.state.buzz.selectedEmpLocation},selectedUserEmail(){return this.$store.state.buzz.selectedEmpWorkEmail},empName(){return this.$store.state.buzz.empName},empJobTitle(){return this.$store.state.buzz.empJobTitle},empLocation(){return this.$store.state.buzz.empLocation},empEmail(){return this.$store.state.buzz.empEmail},selectedEmpEmployeeStats(){return this.$store.state.buzz.selectedEmpEmployeeStats},selectedEmpLikes(){var e,t;return null!==(t=null===(e=this.$store.state.buzz.selectedEmpEmployeeStats)||void 0===e?void 0:e.likesReceived)&&void 0!==t?t:0},selectedEmpComments(){var e,t;return null!==(t=null===(e=this.$store.state.buzz.selectedEmpEmployeeStats)||void 0===e?void 0:e.commentsAdded)&&void 0!==t?t:0},selectedEmpShares(){var e,t;return null!==(t=null===(e=this.$store.state.buzz.selectedEmpEmployeeStats)||void 0===e?void 0:e.shares)&&void 0!==t?t:0}},methods:{getLargeProfilePicture(){const e={empNo:this.ngServices.$stateParams.empId,size:"big",include:"Employee",webservice:this.ngServices.webservice};this.ngServices.$stateParams.empId!==this.empNo?this.$store.dispatch("buzz/getSelectedUserProfilePictureLarge",e).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)}))):this.ngServices.$stateParams.empId===this.empNo&&this.$store.dispatch("buzz/getProfilePictureLarge",e).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)})))},clearSelectedEmpEmployeeStats(){this.$store.dispatch("buzz/clearSelectedEmpEmployeeStats")}},mounted:function(){this.clearSelectedEmpEmployeeStats(),this.loggedEmployeeProfile=this.empProfilePic,this.getLargeProfilePicture(),this.getSelectedUserEmployeeStats()}});const xd=(0,Re.Z)(kd,[["render",Ed],["__scopeId","data-v-1b2e5d0d"]]);var Nd=xd,Ad=(0,i.defineComponent)({name:"BuzzModule",components:{"buzz-top-header":$e,"buzz-home":Ps,"buzz-profile":Nd},data:()=>({interval:0}),computed:{empName(){return this.$store.state.buzz.empName},userProfilePic(){return this.$store.state.buzz.userProfilePicture},pageNo(){return this.$store.state.buzz.pageNo},pageLimit(){return this.$store.state.buzz.pageLimit},empNoFilter(){return this.$store.state.buzz.selectedEmpNo},orderFilter(){return this.$store.state.buzz.orderFilterForShare},orderByFilter(){return this.$store.state.buzz.orderByFilterForShare},IsPostsFetchActionTriggred(){return this.$store.state.buzz.isPostsFetchActionTriggred},getLatestPostSharedTime(){var e;return this.$store.state.buzz.shares.length>0?null===(e=this.$store.state.buzz.shares[0])||void 0===e?void 0:e.shareUpdatedTime:""},getLastPostSharedTime(){return this.$store.state.buzz.lastShareUpdatedTime}},provide(){return{empProfilePic:(0,i.computed)((()=>this.userProfilePic)),empName:(0,i.computed)((()=>this.empName))}},methods:{getEmpProfile(){if(this.empNo){const e={empNo:this.empNo,size:"small",include:"Employee",webservice:this.ngServices.webservice},t={emp_number:this.empNo,limit:1,includePhoto:!0,webservice:this.ngServices.webservice},o={emp_number:this.ngServices.$stateParams.empId,limit:1,includePhoto:!0,webservice:this.ngServices.webservice};this.$store.dispatch("buzz/getProfilePicture",e).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)}))),this.$store.dispatch("buzz/getUserProfileInfo",t).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)}))),this.$store.dispatch("buzz/getSelectedUserProfileInfo",o).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)})))}else this.$store.commit("buzz/setCurrentEmployeeName",this.userName),this.$store.commit("buzz/setCurrentEmployeeProfilePicture","images/default.png")},setFiltersForShares(){"buzz.home"===this.ngServices.$state.currentState.name?(this.$store.commit("buzz/setEmpNoFilter",null),this.$store.commit("buzz/setOrderFilter",null),this.$store.commit("buzz/setOrderByFilter",null)):"buzz.profile"===this.ngServices.$state.currentState.name&&(this.$store.commit("buzz/setEmpNoFilter",this.ngServices.$stateParams.empId),this.$store.commit("buzz/setOrderFilter",null),this.$store.commit("buzz/setOrderByFilter",null))},getUserLikedComments(){const e={empNo:this.empNo,webservice:this.ngServices.webservice};this.$store.dispatch("buzz/getUserLikedComments",e).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)})))},getUserLikedPosts(){const e={empNo:this.empNo,webservice:this.ngServices.webservice};this.$store.dispatch("buzz/getUserLikedPosts",e).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)})))},getBuzzSettings(){this.$store.dispatch("buzz/getBuzzSettings",this.ngServices.webservice).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)})))},callPing(){this.getLatestPostSharedTime&&!this.$store.state.buzz.selectedMenu&&this.$store.commit("buzz/setLastShareUpdatedTime",this.getLatestPostSharedTime);const e=this.getLastPostSharedTime;let t={webservice:this.ngServices.webservice};this.getLastPostSharedTime&&(t.timestamp=e),this.$store.dispatch("buzz/pingBuzz",t)}},beforeMount:function(){if(!this.IsPostsFetchActionTriggred){this.setFiltersForShares(),this.getEmpProfile(),this.$store.dispatch("buzz/getKudosTypes",this.ngServices.webservice).catch((()=>this.$toast.error({title:fe,message:De})));const e={pageNo:this.pageNo,limit:this.pageLimit,order:this.orderFilter,orderBy:this.orderByFilter,empNumber:this.empNoFilter?[this.empNoFilter]:"buzz.profile"===this.ngServices.$state.currentState.name?[0]:null,webservice:this.ngServices.webservice};this.$store.commit("buzz/emptySharePosts",!0),this.$store.commit("buzz/setFilterWithoutEmployee",!1),this.$store.commit("buzz/setLoading",!0),this.$store.commit("buzz/setMorePostsLoading",!0),this.$store.dispatch("buzz/getSharePosts",e).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(De)}))),this.getUserLikedComments(),this.getUserLikedPosts(),this.getBuzzSettings()}},mounted(){this.callPing(),this.interval=window.setInterval((()=>{this.callPing()}),3e5)},unmounted(){this.$store.commit("buzz/setIsPostsFetchActionTriggred",!1),this.ngServices.$stateParams.empId===this.empNo&&this.$store.commit("buzz/isCurrentLoggedEmployeeProfile",!0),clearInterval(this.interval),this.$toast.clearAll()}});const Dd=(0,Re.Z)(Ad,[["render",n],["__scopeId","data-v-88dcc984"]]);var Td=Dd;const Pd={class:"leave-list-container"};function Vd(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-list"),s=(0,i.resolveComponent)("add-leave-type-modal"),d=(0,i.resolveComponent)("confirmation-modal"),c=(0,i.resolveComponent)("default-layout"),m=(0,i.resolveDirective)("set-tab-focus-to-first-element");return(0,i.openBlock)(),(0,i.createBlock)(c,null,{default:(0,i.withCtx)((()=>[(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createElementBlock)("div",Pd,[(0,i.createVNode)(r,{configurations:e.configs,"list-items":e.items,"list-highlightRows":e.highlightRows,"whole-records-count":e.wholeRecordsCount,"filtered-total-records-count":e.filteredTotalRecordsCount,pagination:e.pagination,"onDrawer:show":e.drawerShow,"onUpdate:order":e.tableSort,"onUpdate:selected":e.tableSelect,onDeleteLeaveTypes:t[0]||(t[0]=t=>e.setDeleteLeaveTypesModalVisibility(!0)),onAddNewItem:t[1]||(t[1]=t=>e.addNewLeaveType()),"is-list-loading":e.loadingLeaveTypes},null,8,["configurations","list-items","list-highlightRows","whole-records-count","filtered-total-records-count","pagination","onDrawer:show","onUpdate:order","onUpdate:selected","is-list-loading"]),e.addModalState?((0,i.openBlock)(),(0,i.createBlock)(s,{key:0,ref:"addLeaveTypeModalRef",loading:e.addingLeaveType,"editing-model":e.leaveTypeToEdit,onSubmitValid:e.saveLeaveType,"onUpdate:show":e.toggleAddLeaveTypesModal},null,8,["loading","editing-model","onSubmitValid","onUpdate:show"])):(0,i.createCommentVNode)("",!0)])),[[m]]),e.deleteModalState?((0,i.openBlock)(),(0,i.createBlock)(d,{key:0,style:{width:"450px"},headerTitle:"Are you sure?",onConfirmationModalAction:t[2]||(t[2]=t=>e.deleteLeaveTypeConfirmationModalAction(t)),confirmButtonDisplayType:"label-feedback-danger",confirmButtonText:"Yes, Delete"},{messageLine1:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("You are about to delete data permanently.")),1)])),messageLine2:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Are you sure you want to continue?")),1)])),_:1})):(0,i.createCommentVNode)("",!0)])),_:1})}var Bd=o(32467);const Id={class:"orangehrm-modal-header"},Ld={key:0,class:"header-icon"},Fd={class:"orangehrm-text-center-align"},zd={class:"orangehrm-modal-footer"};function Md(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon"),s=(0,i.resolveComponent)("oxd-text"),d=(0,i.resolveComponent)("oxd-button"),c=(0,i.resolveComponent)("oxd-dialog"),m=(0,i.resolveDirective)("set-tab-focus-to-first-element");return e.show?(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(c,(0,i.mergeProps)({key:0},e.$attr,{"onUpdate:show":e.onCancel,onKeyup:(0,i.withKeys)(e.onCancel,["esc"])}),{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Id,[e.headerIconVisibility?((0,i.openBlock)(),(0,i.createElementBlock)("div",Ld,[(0,i.createVNode)(r,{name:e.headerIconType,size:"large",class:"modal-title-icon"},null,8,["name"])])):(0,i.createCommentVNode)("",!0),(0,i.createVNode)(s,{class:"modal-title",type:"modal-title"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.headerTitle)),1)])),_:1})]),(0,i.createElementVNode)("div",Fd,[(0,i.createVNode)(s,{type:"subtitle-2"},{default:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"messageLine1",{},(()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("The selected item will be permanently deleted.")),1)]),!0)])),_:3}),(0,i.createVNode)(s,{type:"subtitle-2"},{default:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"messageLine2",{},(()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Are you sure you want to continue?")),1)]),!0)])),_:3})]),(0,i.createElementVNode)("div",zd,[(0,i.createVNode)(d,{label:e.$t(e.cancelButtonText),iconName:e.cancelButtonIcon,iconSize:e.cancelButtonIconSize,displayType:e.cancelButtonDisplayType,"data-test":"cancelButton",class:"orangehrm-button-margin",onClick:e.onCancel},null,8,["label","iconName","iconSize","displayType","onClick"]),(0,i.createVNode)(d,{label:e.$t(e.confirmButtonText),iconName:e.confirmButtonIcon,iconSize:e.confirmButtonIconSize,displayType:e.confirmButtonDisplayType,"data-test":"deleteButton",class:"orangehrm-button-margin",onClickOnce:e.onConfirm},null,8,["label","iconName","iconSize","displayType","onClickOnce"])])])),_:3},16,["onUpdate:show","onKeyup"])),[[m,void 0,"return-focus"]]):(0,i.createCommentVNode)("",!0)}var Od=(0,i.defineComponent)({name:"confirmationModal",components:{"oxd-button":jt.Z,"oxd-dialog":Wo.Z,"oxd-text":Ii.Z,"oxd-icon":In.Z},data(){return{show:!0}},directives:{"set-tab-focus-to-first-element":Sr.Z},props:{headerTitle:{type:String,default:"Are you sure?",required:!1},cancelButtonText:{type:String,default:"No, Cancel",required:!1},cancelButtonIcon:{type:String,default:"",required:!1},cancelButtonIconSize:{type:String,default:"",required:!1},cancelButtonDisplayType:{type:String,default:"text",required:!1},confirmButtonText:{type:String,default:"Yes, Delete",required:!1},confirmButtonIcon:{type:String,default:"oxd-trash",required:!1},confirmButtonIconSize:{type:String,default:"extra-small",required:!1},confirmButtonDisplayType:{type:String,default:"label-feedback-danger",required:!1},headerIconVisibility:{type:Boolean,default:!1,required:!1},headerIconType:{type:String,default:"exclamation-triangle",required:!1}},methods:{onCancel(){this.$emit("confirmationModalAction","cancel"),this.show=!this.show},onConfirm(){this.$emit("confirmationModalAction","confirm"),this.show=!this.show}}});const Rd=(0,Re.Z)(Od,[["render",Md],["__scopeId","data-v-6ac36fd6"]]);var _d=Rd;function $d(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-schema-form"),s=(0,i.resolveComponent)("form-modal");return(0,i.openBlock)(),(0,i.createBlock)(s,{"max-width":"600px"},{title:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.modalTitle)),1)])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(r,(0,i.mergeProps)({schema:e.schema,model:e.model,"onUpdate:model":t[0]||(t[0]=t=>e.model=t)},e.$attrs),null,16,["schema","model"])])),_:1})}function jd(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-text");return(0,i.openBlock)(),(0,i.createBlock)(r,{tag:"p",class:"orangehrm-form-hint"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)(" * "+(0,i.toDisplayString)(e.$t("Required")),1)])),_:1})}var Ud={name:"required-text",components:{"oxd-text":Ii.Z}};const Zd=(0,Re.Z)(Ud,[["render",jd],["__scopeId","data-v-160528b9"]]);var Hd=Zd;function qd(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,{type:"select",options:e.options,placeholder:e.$t("Select a Country"),"onUpdate:modelValue":e.selectOperationalCountry},null,8,["options","placeholder","onUpdate:modelValue"])}var Gd=o(33907),Wd=(0,i.defineComponent)({name:"OperationalCountryDropdown",components:{"oxd-input-field":lo.Z},props:{mode:{type:String,default:"read"}},setup(e){const t=(0,Gd.oR)(),o=(0,i.ref)([]),a=(0,i.getCurrentInstance)(),l=e=>{t.dispatch("leave/leaveType/changeFilteredOperationalCountry",e)};return(0,i.onMounted)((()=>{const e=new Da(a);e.getOperationalCountries().then((e=>{e.data&&(o.value=e.data.data.map((e=>({id:e.id,label:e.name,name:e.name,operationalCountryId:e.operationalCountryId}))))}))})),{options:o,selectOperationalCountry:l}}});const Kd=(0,Re.Z)(Wd,[["render",qd]]);var Qd=Kd;const Jd={class:"leave-type-undelete-options"};function Yd(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-divider"),s=(0,i.resolveComponent)("oxd-alert"),d=(0,i.resolveComponent)("oxd-radio-input"),c=(0,i.resolveComponent)("oxd-input-group");return(0,i.openBlock)(),(0,i.createElementBlock)("div",Jd,[(0,i.createVNode)(r),(0,i.createVNode)(s,{type:e.TYPE_WARN,message:e.$t("This Is a Deleted Leave Type. Reactivate It?"),show:!0,compact:!0},null,8,["type","message"]),(0,i.createVNode)(c,{classes:{wrapper:"--grouped-field"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{id:"1",value:"true",optionLabel:e.$t("Yes")+" - "+e.$t("Leave Type Will Be Reactivated"),modelValue:e.undelete,"onUpdate:modelValue":t[0]||(t[0]=t=>e.undelete=t),onInput:e.onInput},null,8,["optionLabel","modelValue","onInput"]),(0,i.createVNode)(d,{id:"2",value:"false",optionLabel:e.$t("No")+" - "+e.$t("A New Leave Type Will Be Created with Same Name"),modelValue:e.undelete,"onUpdate:modelValue":t[1]||(t[1]=t=>e.undelete=t),onInput:e.onInput},null,8,["optionLabel","modelValue","onInput"])])),_:1})])}var Xd=o(42305),ec=o(72334),tc=(0,i.defineComponent)({name:"UndeleteOptionsRadioInput",components:{"oxd-input-group":sl.Z,"oxd-radio-input":ec.Z,"oxd-alert":Jo.Z,"oxd-divider":ro.Z},emits:["update:modelValue"],methods:{onInput(e){this.$emit("update:modelValue","true"===e.target.value)}},setup(){const e=(0,i.ref)(!0);return{undelete:e,TYPE_WARN:Xd.ur}}});const oc=(0,Re.Z)(tc,[["render",Yd]]);var ac=oc,ic=o(44690);const lc=ce();function nc(e,t,o,a){var l;return(0,A.mG)(this,void 0,void 0,(function*(){const n=yield e,r=yield t,s=yield o,d=(0,i.ref)(!1),c=[{id:"days",label:"Days",_selected:void 0},{id:"hours",label:"Hours",_selected:void 0}];d.value=!!(null===(l=a.value)||void 0===l?void 0:l.id);const m=n.filter((e=>{var t;return e.id!==(null===(t=a.value)||void 0===t?void 0:t.id)})),u=m.map((e=>e.name)),p=r.filter((e=>{var t;return e.name!==(null===(t=a.value)||void 0===t?void 0:t.name)})),v=m.reduce(((e,t)=>(t.include_in_bradford_factor_report&&-1===e.indexOf(t.operational_country_id)&&e.push(t.operational_country_id),e)),[]);return{name:"Add Leave Type Form",layout:[{type:"grid",props:{cols:2},children:{default:[{name:"country",label:lc("Country"),type:"custom",component:(0,i.markRaw)(Qd),props:{disabled:s,hintPlacement:ic.fM,hint:s?lc("Unable to change country while locations are being used in leave rules"):null},validators:new Map([["required",Oa]])},{name:"name",label:lc("Name"),type:"input",validators:new Map([["required",Oa],["shouldNotExceedCharLength",$a(50)],["stringShouldNotAlreadyExist",bi(u,lc("Leave type name already exists"),!0,!1)]])},{name:"durationUnit",label:lc("Duration Unit"),validators:new Map([["required",Oa]]),class:"mb-sm--oxd-input-group",style:{"margin-left":"3px !important"},visible:!0,type:"radiogroup",props:{options:c,disabled:d},value:"days"}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"grid",props:{cols:1},children:{default:[{name:"undelete",label:"",type:"custom",component:(0,i.markRaw)(ac),value:!0,visible:!1,hook:(e,t)=>{var o;if(t.name){const i=t.name.trim().toLowerCase(),l=e.visible;let n;const r=u.findIndex((e=>e.trim().toLocaleLowerCase()===i));-1===r&&(n=p.find((({name:e})=>e.trim().toLocaleLowerCase()===i))),void 0===t.undelete&&(t.undelete=!0),n?(e.visible=!0,t.undeleteId=n.id,t.undelete=!l||t.undelete):(e.visible=!1,t.undeleteId=null),d.value=!!(null===(o=a.value)||void 0===o?void 0:o.id)||e.visible&&!!t.undelete,d.value&&n&&(t.durationUnit=n.hour_based?"hours":"days",t.shortTermEntitlement=1==n.is_short_term)}return Object.assign({},e)}}]},style:{"margin-left":"-8px","margin-right":"-10px"}},{type:"grid",props:{cols:1},children:{default:[{name:"Options",label:"",type:"custom",component:(0,i.markRaw)(Qo.Z),props:{label:lc("Options")},style:{"margin-bottom":"0.4rem"}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"divider",style:{"margin-bottom":"1rem"}},{type:"grid",props:{cols:2},children:{default:[{name:"isEntitlementSituational",label:"",type:"switch",props:{"option-label":lc("Is Entitlement Situational"),"label-position":"left",useFullWidth:!0,"help-text":lc("These leave will be excluded from reports unless there's some activity. E.g. maternity leave, jury duty leave.")},value:!1,class:["mb-sm--oxd-input-group","switch-input-group"]},{name:"includeInBradfordFactorReport",label:"",type:"switch",props:{"option-label":lc("Include in Bradford Factor Report"),"label-position":"left",useFullWidth:!0},value:!1,class:["mb-sm--oxd-input-group","switch-input-group","--offset-column-1"],hook:(e,t)=>{var o;const a=-1===v.indexOf(null===(o=t.country)||void 0===o?void 0:o.operationalCountryId);return e.props&&(e.props["option-label"]=lc("Include in Bradford Factor Report"),a?delete e.props.disabled:(e.props["option-label"]+=" ("+lc("Only One Leave Type Can Be Included per Country")+")",e.props.disabled=!0,t.includeInBradfordFactorReport=!1,e.value=!1)),Object.assign({},e)}},{name:"nominateEmployees",label:"",type:"switch",props:{"option-label":lc("Nominate Employees"),"label-position":"left",useFullWidth:!0},value:!1,class:["mb-sm--oxd-input-group","switch-input-group","--offset-column-1"]},{name:"shortTermEntitlement",label:"",type:"switch",props:{"option-label":lc("Short Term Entitlements"),"label-position":"left",useFullWidth:!0,disabled:d},value:!1,class:["mb-sm--oxd-input-group","switch-input-group","--offset-column-1"]}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"divider",style:{margin:"0"}},{type:"action",children:{default:[{name:"required",label:"",type:"custom",component:(0,i.markRaw)(Hd),style:{"margin-right":"auto",padding:"0px"}},{name:"reset",label:lc("Cancel"),type:"button",props:{type:"button",displayType:"ghost"},listeners:{onClick:()=>{this.emit("update:show",!0)}}},{name:"submit",label:lc("Save"),type:"button",style:{"margin-left":"0.5rem"},props:{type:"submit",displayType:"secondary"}}]},style:{"padding-top":"1.2rem"}}]}}))}var rc=nc;const sc={class:"modal-header"},dc={class:"d-flex align-center justify-between w-100"},cc={class:"modal-title"},mc={class:"modal-body"};function uc(e,t,o,a,l,n){var r;return(0,i.openBlock)(),(0,i.createBlock)((0,i.resolveDynamicComponent)(e.dynamicComp),(0,i.mergeProps)(e.$attrs,{style:{width:"90%",maxWidth:e.maxWidth}}),(0,i.createSlots)({default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",sc,[(0,i.createElementVNode)("div",dc,[(0,i.createElementVNode)("h5",cc,[(0,i.renderSlot)(e.$slots,"title",{},void 0,!0)]),(0,i.renderSlot)(e.$slots,"headerActions",{},void 0,!0)])]),(0,i.createElementVNode)("div",mc,[(0,i.renderSlot)(e.$slots,"body",{},void 0,!0)])])),_:2},[null!==(r=e.isPopOver)&&void 0!==r&&r?{name:"button",fn:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"popOverButton",{},void 0,!0)])),key:"0"}:void 0]),1040,["style"])}var pc=o(26561),vc=(0,i.defineComponent)({name:"formPopOverModal",components:{"oxd-dialog":Wo.Z,"oxd-pop-over":pc.Z},directives:{"set-tab-focus-to-first-element":Sr.Z},props:{isPopOver:{type:Boolean,default:!1,required:!0},maxWidth:{type:String,default:"800px"}},setup(e){const t=(0,i.ref)("oxd-dialog");return e.isPopOver&&(t.value="oxd-pop-over"),{dynamicComp:t}}});const hc=(0,Re.Z)(vc,[["render",uc],["__scopeId","data-v-3178cf32"]]);var gc=hc,yc=o(75235),fc=o(48394);class bc{constructor(e){this._app=e,this._http=new Da(this._app)}saveLeaveType(e,t){return t?this._http.undeleteLeaveType(t,e):e.id?this._http.updateLeaveType(e):this._http.createLeaveType(e)}getActiveLeaveTypes(){return new Promise(((e,t)=>{try{this._http.getActiveLeaveTypes().then((t=>{let o=[];t.data&&t.data.data&&(o=t.data.data),e(o)}))}catch(o){t(o)}}))}getDeletedLeaveTypes(){return new Promise(((e,t)=>{try{this._http.getDeletedLeaveTypes().then((t=>{let o=[];t.data&&t.data.data&&(o=t.data.data),e(o)}))}catch(o){t(o)}}))}getLeaveTypeRule(e){return new Promise(((t,o)=>{try{this._http.getLeaveTypeRule(e).then((a=>{var i,l,n,r;(null===(l=null===(i=a.data)||void 0===i?void 0:i.data)||void 0===l?void 0:l[e])&&t(null===(r=null===(n=a.data)||void 0===n?void 0:n.data)||void 0===r?void 0:r[e]),o("invalid response")}))}catch(a){o(a)}}))}checkRestrictions(e){return new Promise(((t,o)=>{try{this._http.checkRestrictions(e).then((e=>{var a,i;(null===(a=e.data)||void 0===a?void 0:a.data)&&t(null===(i=e.data)||void 0===i?void 0:i.data),o("invalid response")})).catch((()=>{o("invalid response")}))}catch(a){o(a)}}))}}var Cc=(0,i.defineComponent)({name:"addLeaveTypeModal",components:{"form-modal":gc,"oxd-schema-form":yc.Z},props:{editingModel:{type:Object,required:!1}},setup(e,t){var o,a,l;const n=(0,i.getCurrentInstance)(),r=new bc(n),s=new Da(n),d=r.getActiveLeaveTypes(),c=r.getDeletedLeaveTypes(),m=(0,i.ref)(Object.assign({},e.editingModel)),u=(null===(o=e.editingModel)||void 0===o?void 0:o.id)?"Edit Leave Type":"Add Leave Type",p=!!(null===(a=e.editingModel)||void 0===a?void 0:a.id)&&s.isLeaveTypeLocationRestricted(e.editingModel.id),v=(0,fc.Z)(rc.call(t,d,c,p,m)),h=v.schema,g=(null===(l=e.editingModel)||void 0===l?void 0:l.id)?m:v.model;return{model:g,schema:h,modalTitle:u}}});const Sc=(0,Re.Z)(Cc,[["render",$d],["__scopeId","data-v-67aa37d0"]]);var wc=Sc;const Ec="Success",kc="Error",xc="Warning",Nc="Info",Ac="success",Dc={visible:!1,header:{button:{props:{}}},body:{button:{labelMini:"",doubleLineLabel:!1,label:"",displayType:"",style:{}},dropdown:{style:{}},buttonSecondary:{visible:!1,icon:"",tooltip:"",style:""}},list:{visible:!1,bubble:{visible:!1}}};var Tc=Dc;const Pc={type:"oxd-button",props:{label:"Add Item",size:"medium",displayType:"secondary",iconName:"oxd-add",iconSize:"small",flow:"bottom"},class:"info-color",events:[{type:"click",identifier:"add-new-item"}]};var Vc=Pc;const Bc=ce(),Ic={visible:!0,listRecordCount:{singleTerm:Bc("Leave Type"),multiTerm:Bc("Leave Types")},bulkActions:[{type:"oxd-button",props:{label:"Delete Selected",size:"medium",displayType:"label-danger",iconName:"oxd-trash",iconSize:"extra-small",flow:"bottom"},class:"oxd-btn-danger-custom",events:[{type:"click",identifier:"delete-leave-types"}]}],quickSearch:{visible:!1},singleActions:[Vc]};var Lc=Ic;const Fc=[{name:"leaveTypeName",title:"Leave Type",sortField:"leaveTypeName",initialSortOrder:"DEFAULT",style:{flex:"10%","min-width":"120px","margin-right":"0"},cellType:"oxd-table-cell-link",cellProps:{link:"settingsUrl",target:"_self"}},{name:"country",title:"Country",sortField:"country",initialSortOrder:"ASC",style:{flex:"5%","min-width":"90px","margin-right":"0"}},{name:"durationUnit",title:"Duration Unit",style:{flex:"5%","min-width":"70px","margin-right":"0"}},{name:"isSituational",title:"Is Entitlement Situational",style:{flex:"5%","min-width":"90px","margin-right":"0"}},{name:"inBradfordFactorReport",title:"Included In Bradford Factor Report",style:{flex:"5%","min-width":"90px","margin-right":"0"}},{name:"nominateEmployee",title:"Nominate Employee",style:{flex:"5%","min-width":"90px","margin-right":"0"}},{name:"shortTermEntitlementsEnabled",title:"Short Term Entitlement",style:{flex:"5%","min-width":"90px","margin-right":"0"}},{name:"action",slot:"footer",title:"",style:{width:"5rem","margin-left":"5px","margin-right":"-4px"},cellType:"oxd-table-cell-actions",cellRenderer:"actionsRenderer"}];var zc=Fc;const Mc={leftPanel:Tc,topBar:Lc,headers:zc,selectable:!0,addable:!1,pagination:{maxPageLimit:5}};var Oc=Mc;const Rc={visible:!1};var _c=Rc,$c={table:Oc,drawer:_c};const jc={class:"vue-container"};function Uc(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-toaster"),s=(0,i.resolveComponent)("modal-provider");return(0,i.openBlock)(),(0,i.createElementBlock)("div",jc,[(0,i.createVNode)(s,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r),(0,i.renderSlot)(e.$slots,"default",{},void 0,!0)])),_:3})])}function Zc(e,t,o,a,l,n){return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[e.modal.component?((0,i.openBlock)(),(0,i.createBlock)((0,i.resolveDynamicComponent)(e.modal.component),(0,i.normalizeProps)((0,i.mergeProps)({key:0},e.modal.attrs)),null,16)):(0,i.createCommentVNode)("",!0),(0,i.renderSlot)(e.$slots,"default")],64)}var Hc=o(66705);const qc=Symbol("modal-manager");function Gc(e,t,o){const a=o||(0,Hc.E)(qc),l={"onUpdate:show":()=>{a.value={component:null,attrs:{}}}};return{modal:a,eventHandlers:l,open:function(o=0){return new Promise((n=>{a.value={component:(0,i.markRaw)(e),attrs:Object.assign(Object.assign(Object.assign({},t&&t),l),{onVnodeMounted:()=>setTimeout(n,o)})}}))},close:function(e=0){return new Promise((t=>{a.value={component:null,attrs:{}},setTimeout(t,e)}))},listen:function(e,t){return l[e]=t,this}}}var Wc=(0,i.defineComponent)({name:"modal-provider",setup(){const e=(0,i.ref)({attrs:{},component:null});return(0,i.provide)(qc,e),{modal:e}}});const Kc=(0,Re.Z)(Wc,[["render",Zc]]);var Qc=Kc,Jc=(0,i.defineComponent)({name:"default-layout",components:{"modal-provider":Qc},unmounted(){this.$toast.clearAll()}});const Yc=(0,Re.Z)(Jc,[["render",Uc],["__scopeId","data-v-48374497"]]);var Xc=Yc,em=o(65678);const tm="UPDATE_SEARCH_PARAMETERS",om="UPDATE_LIMIT",am="UPDATE_CURRENT_PAGE",im="UPDATE_ORDER_FIELD",lm="UPDATE_ORDER_BY",nm="UPDATE_FILTER_FIELD",rm="UPDATE_FILTERED_OPERATIONAL_COUNTRY",sm="country",dm="ASC",cm={orderField:"date",orderBy:"DESC",limit:20,currentPage:1},mm={startDate:(new Date).getFullYear()+"-01-01",endDate:(new Date).getFullYear()+"-12-31",operationalCountryId:[],locations:[],locationsFromFilterModal:null};var um=(0,i.defineComponent)({components:{"default-layout":Xc,"oxd-list":Bd.Z,"add-leave-type-modal":wc,"confirmation-modal":_d},directives:{"set-tab-focus-to-first-element":Sr.Z},setup:function(){const e=(0,i.getCurrentInstance)(),t=ce(),o=(0,Gd.oR)(),a=null===e||void 0===e?void 0:e.appContext.config.globalProperties.$toast,l=(0,i.inject)("ngServices"),n=(0,i.ref)([]),r=(0,i.ref)([]),s=(0,i.ref)(!1),d=(0,i.ref)({rowIndexes:[],type:em.Ox}),c=new bc(e),m=(0,i.ref)(!1),u=(0,i.ref)(0),p=(0,i.ref)(!1),v=(0,i.ref)(0),h=(0,i.ref)(0),g=(0,i.ref)(!1),y=(0,i.ref)(!1),f=(0,i.ref)({read:!1,create:!1,update:!1,delete:!1}),b=(0,i.ref)(),C=(0,i.ref)(ya);o.dispatch("leave/leaveType/list/init",{sortField:sm,sortOrder:dm});const S=(0,i.computed)((()=>o.state.leave.leaveType.list.sortField)),w=(0,i.computed)((()=>o.state.leave.leaveType.list.sortOrder)),E=JSON.parse(JSON.stringify($c)),k=(e,o,a,i)=>{const l={component:"oxd-icon-button",props:{label:"Leave Rule",displayType:"label",size:"medium",name:"gear",tooltip:t("Leave Rule")},onClick(e){L(e)}},n={component:"oxd-icon-button",props:{label:"Edit Leave Type",displayType:"label",size:"xx-small",name:"oxd-edit",tooltip:t("Edit Leave Type")},onClick(e){I(e)}};return i.editable?{props:{header:{cellConfig:Object.assign({leaveRuleSettings:l},{editLeaveRule:n})}}}:{props:{header:{cellConfig:Object.assign({leaveRuleSettings:l})}}}},x=E.table.headers[7];x&&"string"===typeof x.cellRenderer&&(x.cellRenderer=k);const N=E.table.topBar.singleActions[0];N.props.label="Add Leave Type";for(let i=0;i<E.table.headers.length;i++){const e=E.table.headers[i];e.sortField===S.value?e.initialSortOrder=w.value:e.sortField&&e.initialSortOrder&&(e.initialSortOrder="DEFAULT")}const A=(0,i.ref)(Object.assign({},E)),D=(0,i.computed)((()=>A.value)),T=e=>{let o=e.name,a="";e.OperationalCountry&&e.OperationalCountry.Country&&(a=t(e.OperationalCountry.Country.cou_name));let i=t("No");e.exclude_in_reports_if_no_entitlement&&(i=t("Yes"));let l=t("No");e.include_in_bradford_factor_report&&(l=t("Yes"));let n=t("No");e.employee_nominee_enabled&&(n=t("Yes"));let r=!1;void 0!==f.value.update&&f.value.update&&(r=!0);let s=`#/leave/define_leave_type_rule/${e.id}`,d=e.deletable,c=e.hour_based?t("Hours"):t("Days"),m=e.is_short_term?t("Yes"):t("No");return Object.assign(Object.assign({},e),{leaveTypeName:o,country:a,isSituational:i,inBradfordFactorReport:l,nominateEmployee:n,settingsUrl:s,editable:r,isSelectable:d,durationUnit:c,shortTermEntitlementsEnabled:m})},P=()=>{const t={sortOrder:w.value,sortField:S.value},o=new Da(e);y.value=!0,o.getLeaveTypes(t).then((e=>{e.data&&(n.value=e.data.data.map(T),h.value=n.value.length,d.value.rowIndexes=[]),y.value=!1})).catch((()=>{y.value=!1})).finally((()=>{r.value=[]}))},V=()=>{m.value=!1},B=e=>{m.value=e},I=e=>{e.OperationalCountry&&(C.value={id:e.id,country:{id:e.OperationalCountry.Country.cou_code,label:e.OperationalCountry.Country.cou_name,name:e.OperationalCountry.Country.cou_name,operationalCountryId:e.OperationalCountry.id},name:e.name,durationUnit:e.hour_based?"hours":"days",isEntitlementSituational:e.exclude_in_reports_if_no_entitlement,includeInBradfordFactorReport:e.include_in_bradford_factor_report,nominateEmployees:e.employee_nominee_enabled,shortTermEntitlement:e.is_short_term},j(!0))},L=e=>{let t={id:e.id,name:e.name};l.$state.go("leave.define_leave_type_rule_general",t)},F=e=>{for(const t in e){const a=e[t];"DEFAULT"!==a&&(o.dispatch("leave/leaveType/list/changeSortField",t),o.dispatch("leave/leaveType/list/changeSortOrder",a),P())}},z=e=>{s.value=e},M=e=>{"confirm"===e&&O(),z(!1)},O=()=>{const o=r.value.map((e=>e.id)),i=new Da(e);i.deleteLeaveTypes(o).then((e=>{e.data&&(P(),a.success({title:t(Ec),message:t(we)}))})).catch((()=>{a.error({title:t(kc),message:t(xe)})}))},R=()=>{u.value=0,C.value=ya,j(!0)},_=e=>{g.value=!0;const o=Boolean(e.id)&&!e.undeleteId,i=!!e.undelete&&e.undeleteId,l={name:e.name.trim(),operational_country_id:e.country.operationalCountryId,exclude_in_reports_if_no_entitlement:e.isEntitlementSituational,include_in_bradford_factor_report:e.includeInBradfordFactorReport,employee_nominee_enabled:e.nominateEmployees};o?l.id=e.id:i||(l.hour_based="hours"===e.durationUnit,l.is_short_term=e.shortTermEntitlement),c.saveLeaveType(l,i).then((e=>{const l=T(e.data.data);if(o){const e=n.value.findIndex((e=>e.id==l.id));n.value[e]=l,d.value.rowIndexes.push(e)}else n.value.unshift(l),h.value++,d.value.rowIndexes=d.value.rowIndexes.map((e=>e+1)),d.value.rowIndexes.push(0);g.value=!1,p.value=!1,a.success({title:t(Ec),message:t(o||i?Se:be)})})).catch((()=>{g.value=!1,a.error({title:t(kc),message:t(Ee)})}))},$=e=>{r.value=n.value.filter(((t,o)=>e.indexOf(o)>-1))},j=e=>{p.value=e},U=()=>{p.value=!p.value},Z=()=>{const t=new Da(e);t.getDataGroupPermissions({dataGroup:"leave_types"}).then((e=>{f.value=e,f.value.read?(P(),A.value.table.selectable=f.value.delete,void 0!=f.value.create&&f.value.create||(A.value.table.topBar.singleActions=[])):l.$state.go("403")}))};return Z(),{items:n,highlightRows:d,selectedLeaveTypes:r,deleteModalState:s,wholeRecordsCount:v,filteredTotalRecordsCount:h,configs:D,drawerShow:B,closeModal:V,actionsRenderer:k,editExistingLeaveType:I,redirectToLeaveRule:L,tableSort:F,sortField:S,sortOrder:w,setDeleteLeaveTypesModalVisibility:z,deleteLeaveTypeConfirmationModalAction:M,tableSelect:$,addNewLeaveType:R,setAddLeaveTypesModalVisibility:j,toggleAddLeaveTypesModal:U,saveLeaveType:_,addingLeaveType:g,addModalState:p,addLeaveTypeModalRef:b,leaveTypeToEdit:C,loadingLeaveTypes:y}}});const pm=(0,Re.Z)(um,[["render",Vd],["__scopeId","data-v-3f3f7bae"]]);var vm=pm;const hm={class:"holiday-list-container"};function gm(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-pop-over-with_button_click"),s=(0,i.resolveComponent)("oxd-list"),d=(0,i.resolveComponent)("ohrm-layout"),c=(0,i.resolveComponent)("add-holiday-modal"),m=(0,i.resolveComponent)("oxd-progress-bar"),u=(0,i.resolveComponent)("holiday-confirmation-confirmation"),p=(0,i.resolveDirective)("set-tab-focus-to-first-element");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(d,null,{default:(0,i.withCtx)((()=>[(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createElementBlock)("div",hm,[(0,i.createVNode)(s,{configurations:e.configs,"list-items":e.items,"list-highlightRows":e.highlightRows,"whole-records-count":e.wholeRecordsCount,"filtered-total-records-count":e.filteredTotalRecordsCount,pagination:e.pagination,"onUpdate:order":e.tableSort,"onUpdate:selected":e.tableSelect,"onPagination:onPrevious":e.selectPreviousPage,"onPagination:onNext":e.selectNextPaginate,"onPagination:onSelectPage":e.selectExactPage,"onPagination:onSelectPerPage":e.selectPerPage,onAddNewItem:e.addNewItemModal,onDeleteHolidays:e.checkRecurringHolidayInDelete,"is-list-loading":e.loadingHolidays},{tableFilterAdditionalSingleActions:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{onSubmitValid:e.filterHolidays,show:e.filterHolidaysModalState,"onUpdate:show":e.updateShow,isNonAccessibleLocationsEmpty:e.isNonAccessibleLocationsEmpty},null,8,["onSubmitValid","show","onUpdate:show","isNonAccessibleLocationsEmpty"])])),_:1},8,["configurations","list-items","list-highlightRows","whole-records-count","filtered-total-records-count","pagination","onUpdate:order","onUpdate:selected","onPagination:onPrevious","onPagination:onNext","onPagination:onSelectPage","onPagination:onSelectPerPage","onAddNewItem","onDeleteHolidays","is-list-loading"])])),[[p]])])),_:1}),e.addHolidayModalState?((0,i.openBlock)(),(0,i.createBlock)(c,{key:0,ref:"addTaskModalRef","editing-model":e.editHolidayObject,onSubmitValid:e.addOrEditHoliday,options:e.treeSelectOptions,locationsIdsFromEditObject:e.locationsIdsFromEditObject,isNonAccessibleLocationsEmpty:e.isNonAccessibleLocationsEmpty,"onUpdate:show":e.toggleAddHolidayModal},null,8,["editing-model","onSubmitValid","options","locationsIdsFromEditObject","isNonAccessibleLocationsEmpty","onUpdate:show"])):(0,i.createCommentVNode)("",!0),(0,i.createVNode)(m,{show:e.progressBarValueObj.progressBarState,title:e.$t(e.progressBarTitle),progressValue:e.progressBarValueObj.progressBarValue},null,8,["show","title","progressValue"]),e.holidayConfirmationModalState?((0,i.openBlock)(),(0,i.createBlock)(u,{key:1,onConfirmationHasEditableLeaveModalAction:t[0]||(t[0]=t=>e.holidayConfirmationModalResult(t)),"holidays-count":Object.keys(e.selectedHolidays).length,state:e.holidayConfirmationType,"is-recurring-holiday-selected":e.isRecurringHolidaySelected},null,8,["holidays-count","state","is-recurring-holiday-selected"])):(0,i.createCommentVNode)("",!0)],64)}var ym=o(28260);const fm={visible:!1,header:{button:{props:{}}},body:{button:{labelMini:"",doubleLineLabel:!1,label:"",displayType:"",style:{}},dropdown:{style:{}},buttonSecondary:{visible:!1,icon:"",tooltip:"",style:""}},list:{visible:!1,bubble:{visible:!1}}};var bm=fm;const Cm=ce(),Sm={visible:!0,listRecordCount:{singleTerm:Cm("Holiday"),multiTerm:Cm("Holidays")},bulkActions:[{type:"oxd-button",props:{label:"Delete Selected",size:"medium",displayType:"label-danger",iconName:"oxd-trash",iconSize:"extra-small",flow:"bottom"},class:"oxd-btn-danger-custom",events:[{type:"click",identifier:"delete-holidays"}]}],quickSearch:{visible:!1},singleActions:[{type:"oxd-button",props:{label:"Add Holiday",size:"medium",displayType:"secondary",iconName:"oxd-add",iconSize:"small",flow:"bottom"},class:"info-color",events:[{type:"click",identifier:"add-new-item"}]}]};var wm=Sm;const Em=[{name:"description",title:"Name",sortField:"description",initialSortOrder:"DEFAULT",style:{flex:"1%","min-width":"230px","margin-right":"0"}},{name:"date",sortField:"date",initialSortOrder:"DESC",title:"Date",style:{flex:"1%","max-width":"auto","min-width":"150px","margin-right":"0"},cellType:"oxd-table-cell-date",cellProps:{}},{name:"type",title:"Full Day/Half Day",sortField:"type",style:{flex:"1%","min-width":"100px","margin-right":"0"}},{name:"is_repeats_annually",title:"Repeats Annually",style:{flex:"2%","min-width":"80px","margin-right":"0"}},{name:"country_name",title:"Country",sortField:"country",initialSortOrder:"DEFAULT",style:{flex:"2%","min-width":"100px","margin-right":"0"}},{name:"locations",title:"Locations",sortField:"locations",style:{flex:"20%","min-width":"150px","margin-right":"10px"}},{name:"action",slot:"footer",title:"",style:{flex:"1%","max-width":"90px","margin-right":"0.25rem"},cellType:"oxd-table-cell-actions",cellRenderer:"actionsRenderer"}];var km=Em;const xm={leftPanel:bm,topBar:wm,headers:km,selectable:!0,addable:!1,pagination:{maxPageLimit:5}};var Nm=xm;const Am={visible:!0,width:"600px",height:"100%",fullHeight:!1,stickyFooter:!0,fixedPosition:!0,position:"right",header:{visible:!0,title:"Filter Holidays",charmButton:{visible:!0,icon:"oxd-refresh",tooltip:"Reset",flow:"bottom"}},footer:{okButton:{label:"Search"}}};var Dm=Am,Tm={table:Nm,drawer:Dm};class Pm{constructor(e){this._app=(0,i.getCurrentInstance)(),this._dataGroupPermissionService=new Aa,this._app=e}getListSchema(){var e;const t=(0,i.getCurrentInstance)(),o=new Da(t),a=null===(e=this._app)||void 0===e?void 0:e.appContext.config.globalProperties.ngServices,l=(0,i.ref)(JSON.parse(JSON.stringify(Tm))),n=l.value.table.topBar;l.value.table.topBar=[];const r={read:!1,update:!1,delete:!1,create:!1};return o.getDataGroupPermissions({dataGroup:"holidays"}).then((e=>{r.read=e.read,r.update=e.update,r.delete=e.delete,r.create=e.create,r.read?(l.value.table.topBar=n,this.augmentListSpecificSchemaChanges(l,r)):a.$state.go("403"),r.create||(l.value.table.topBar.singleActions=[]),r.delete?l.value.table.selectable=!0:l.value.table.selectable=!1})),l}augmentListSpecificSchemaChanges(e,t){e.value.table.addable=t.create,e.value.table.selectable=t.delete}}const Vm={class:"popover-wrapper"};function Bm(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon-button"),s=(0,i.resolveComponent)("oxd-schema-form"),d=(0,i.resolveComponent)("form-modal");return(0,i.openBlock)(),(0,i.createElementBlock)("div",Vm,[(0,i.createVNode)(d,{"is-pop-over":!0,show:e.show},{popOverButton:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{tooltip:e.$t("Filter Holidays"),class:"popover-icon",name:"funnel",onClick:e.setLoading},null,8,["tooltip","onClick"])])),title:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Filter Holidays")),1)])),headerActions:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{name:e.drawerSchema.header.charmButton.icon,tooltip:e.drawerSchema.header.charmButton.tooltip,flow:e.drawerSchema.header.charmButton.flow,size:"extra-large",onClick:e.resetFilters},null,8,["name","tooltip","flow","onClick"])])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(s,(0,i.mergeProps)({schema:e.schema,model:e.model,"onUpdate:model":t[0]||(t[0]=t=>e.model=t),loading:e.isLoading,"onUpdate:loading:schema":t[1]||(t[1]=t=>e.updateLoading(t))},e.$attrs),null,16,["schema","model","loading"])])),_:1},8,["show"])])}function Im(){var e,t;const o=(0,i.getCurrentInstance)();if(!o)throw new Error("app instance not found!");const a=null===(e=o.appContext.config.globalProperties)||void 0===e?void 0:e.$dateFormat;if(!a)throw new Error("date format not found!");const l=null===(t=o.appContext.config.globalProperties)||void 0===t?void 0:t.$locale;if(!l)throw new Error("locale not found!");return{locale:l,format:a,userFormat:le(a),jsSavingFormat:(0,se.gc)("Y-m-d"),jsDisplayFormat:(0,se.gc)(a)}}function Lm(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,{type:"date",locale:e.locale,"io-format":e.ioFormat,"display-format":e.displayFormat,placeholder:e.placeholder,events:e.events,onSelectYear:e.onSelectYear},null,8,["locale","io-format","display-format","placeholder","events","onSelectYear"])}function Fm(){var e;const t=(0,i.getCurrentInstance)();if(!t)throw new Error("app instance not found!");const o=null===(e=t.appContext.config.globalProperties)||void 0===e?void 0:e.ngServices;if(!o)throw new Error("ngServices not found!");return o}function zm(){return Fm().webservice}function Mm(){const e=(0,i.inject)("ngServices")||Fm(),t=(0,i.reactive)({weekendsWithholidays:[]}),o=(o=(new Date).getFullYear(),a="")=>(0,A.mG)(this,void 0,void 0,(function*(){const i={filter:{employeeId:a,year:o}},l={useCache:!0};e.webservice.get("leave/weekends",i,l).then((e=>{t.weekendsWithholidays=Object.entries(e.data).map((([e,t])=>{const o=new Date(1e3*parseInt(String(e)));return{date:o,type:t.type,class:"weekend"===t.type?4===parseInt(t.duration)?"--working-day-half":"--non-working-day":4===parseInt(t.duration)?"--holiday-half":"--holiday-full",index:o.getDay()}}))}))}));return Object.assign(Object.assign({},(0,i.toRefs)(t)),{fetchWeekendsAndHolidays:o})}var Om=(0,i.defineComponent)({name:"date-input",components:{"oxd-input-field":lo.Z},setup(){const{jsSavingFormat:e,jsDisplayFormat:t,userFormat:o,locale:a}=Im(),{weekendsWithholidays:i,fetchWeekendsAndHolidays:l}=Mm(),n=({year:e})=>(0,A.mG)(this,void 0,void 0,(function*(){yield l(e)}));return l(),{events:i,onSelectYear:n,locale:a,placeholder:o,ioFormat:e,displayFormat:t}}});const Rm=(0,Re.Z)(Om,[["render",Lm],["__scopeId","data-v-4788f615"]]);var _m=Rm;function $m(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,{type:"treeselect",options:e.option,selectParentsOnChildSelection:!0,disableUncheckedOptions:e.disableUncheckedOptions,"onUpdate:modelValue":e.updateSelectedIdsFun,onKeydown:e.onVacancyKeypress},null,8,["options","disableUncheckedOptions","onUpdate:modelValue","onKeydown"])}function jm(e){var t,o,a;const i=[],l=ce();for(const n of e){const e={};if(e["id"]="C__"+n.id,e["label"]=l(null===(t=null===n||void 0===n?void 0:n.Country)||void 0===t?void 0:t.cou_name),e["children"]=[],(null===(a=null===(o=null===n||void 0===n?void 0:n.Country)||void 0===o?void 0:o.Location)||void 0===a?void 0:a.length)>0)for(const t of n.Country.Location){const o={};o["id"]="L__"+t.id,o["label"]=t.name,e["children"].push(o)}i.push(e)}return i}function Um(e){var t;const o={};for(const i of e)if(o["C__"+i.country.code]){const e={};e.id="L__"+i.id,e.label=i.name,null===(t=o["C__"+i.country.code].children)||void 0===t||t.push(e)}else{const e={};e.id="C__"+i.country.code,e.label=i.country.name;const t={};t.id="L__"+i.id,t.label=i.name,e.children=[t],o[e.id]=e}const a=[];for(const i in o)a.push(o[i]);return a}function Zm(e){e=Wm(e);let t=[];for(let l=0;l<e.length;l++){if("1"===e[l].id)continue;const o=e[l],a=[];for(let t=0;t<e.length;t++)parseInt(o.lft)<parseInt(e[t].lft)&&parseInt(o.rgt)>parseInt(e[t].rgt)&&a.push(e[t].id);o.allChildrenIds=a,t.push(o)}t=Km(t);const o=Gm(t),a=qm(o),i=Hm(a);return i}function Hm(e){const t=[];for(const o in e)1==e[o].level&&t.push(e[o]);return t}function qm(e){for(const t in e){const o=e[t].allChildrenIds;e[t].children=[];for(const a of o)Number(e[t].level)+1==e[a].level&&e[t].children.push(e[a])}return e}function Gm(e){const t={};for(const o of e)o["label"]=o.name,t[o.id]=o;return t}function Wm(e){const t=[];for(let o=0;o<e.length;o++){if("1"===e[o].id)continue;const a=e[o];if(1!==parseInt(a.level))for(let o=0;o<e.length;o++)parseInt(a.lft)>parseInt(e[o].lft)&&parseInt(a.rgt)<parseInt(e[o].rgt)&&parseInt(a.level)-parseInt(e[o].level)===1&&(a.parentId=e[o].id,t.push(a));else a.parentId=null,t.push(a)}return t}function Km(e){const t=e.filter((e=>"1"==e.level));let o=[];for(let a=0;a<t.length;a++){const i=t[a];o.push(i),o=Qm(o,i,e)}return o}function Qm(e,t,o){if(t.allChildrenIds.length>0){const a=t.allChildrenIds;for(let t=0;t<a.length;t++){const i=o.find((e=>e.id==a[t]));void 0===e.find((e=>e.id==a[t]))&&(e.push(i),e=Qm(e,i,o))}}return e}var Jm=(0,i.defineComponent)({name:"CountryAutocomplete",components:{"oxd-input-field":lo.Z},props:{options:{type:Array,required:!1,default:void 0},disableUncheckedOptions:{type:Boolean,default:!1},editModel:{type:Object,default:void 0},locationsIdsFromEditObject:{type:Array,default:()=>[]},isNonAccessibleLocationsEmpty:{type:Boolean,default:!1}},setup(e,{emit:t}){const o=(0,i.getCurrentInstance)(),a=((0,Gd.oR)(),new Da(o)),l=(0,i.ref)([]),n=(0,i.ref)([]);(0,i.onMounted)((()=>{r()}));const r=()=>{a.getCountries().then((t=>{var o;let a=[];if(t.data.data){if(e.isNonAccessibleLocationsEmpty)a=t.data.data;else for(let i of t.data.data)for(let t of i.Country.Location)if(null===(o=e.locationsIdsFromEditObject)||void 0===o?void 0:o.includes(t.id)){a.push(i);break}l.value=jm(a),d()}}))},s=e=>{t("update:modelValue",[...e,1e3])},d=()=>{var e;let t=null===o||void 0===o?void 0:o.parent;while(t){if("oxd-schema-form"==(null===(e=t.parent)||void 0===e?void 0:e.type.name)){t.emit("update:loading:schema",!1);break}t=t.parent}};return{option:l,updateSelectedIdsFun:s,preSelectedIds:n}}});const Ym=(0,Re.Z)(Jm,[["render",$m]]);var Xm=Ym;const eu=ce();function tu(e,t,o){return{name:"filterHolidaysForm",layout:[{type:"grid",props:{cols:2},children:{default:[{name:"startDate",label:eu("From"),type:"custom",component:(0,i.markRaw)(_m),validators:new Map([["validDateFormat",ja(e)],["endDateShouldBeAfterStartDate",vi((()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.endDate}),eu(Fe),{allowSameDate:!0})],["required",Oa]]),props:{years:ne()}},{name:"endDate",label:eu("To"),type:"custom",component:(0,i.markRaw)(_m),validators:new Map([["validDateFormat",ja(e)],["endDateShouldBeAfterStartDate",Xa((()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.startDate}),eu(ze),{allowSameDate:!0})],["required",Oa]]),props:{years:ne()}},{name:"locationsFromFilterModal",label:eu("Country and Location"),type:"custom",component:(0,i.markRaw)(Xm),class:"mb-0--oxd-input-group",props:{placeholder:eu("Select Country and Location"),isNonAccessibleLocationsEmpty:o,countTopmostParents:!1}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"divider",style:{margin:"0"}},{type:"action",children:{default:[{name:"reset",label:eu("Cancel"),type:"button",props:{type:"button",displayType:"ghost"},listeners:{onClick:()=>{this.emit("update:show")}}},{name:"submit",label:eu("Search"),type:"button",style:{"margin-left":"0.5rem"},props:{type:"submit",displayType:"secondary"}}]},style:{"padding-top":"1.2rem"}}]}}var ou=tu,au=(0,i.defineComponent)({name:"oxd-pop-over-with_button_click",components:{"oxd-icon-button":D.Z,"oxd-schema-form":yc.Z,"form-modal":gc},props:{show:{type:Boolean},isNonAccessibleLocationsEmpty:{type:Boolean}},setup(e,t){const o=(0,i.ref)(!0),a=(0,Gd.oR)(),l=Dm,{userFormat:n}=Im(),r=(0,i.ref)(Object.assign({},a.state.holiday.searchParameters)),{schema:s}=(0,fc.Z)(ou.call(t,n,r,e.isNonAccessibleLocationsEmpty)),d=()=>{a.dispatch("holiday/resetSearchParameters"),r.value=Object.assign({},a.state.holiday.searchParameters)},c=()=>{o.value=!0,r.value=Object.assign({},a.state.holiday.searchParameters)},m=e=>{o.value=e};return{model:r,schema:s,drawerSchema:l,resetFilters:d,isLoading:o,updateLoading:m,setLoading:c}}});const iu=(0,Re.Z)(au,[["render",Bm],["__scopeId","data-v-77c61cb2"]]);var lu=iu;function nu(e,t,o,a,l,n){const r=(0,i.resolveComponent)("confirmation-modal");return(0,i.openBlock)(),(0,i.createBlock)(r,{style:{width:"450px"},headerTitle:"Are you sure?",onConfirmationModalAction:t[0]||(t[0]=t=>e.onConfirm(t)),confirmButtonDisplayType:e.confirmButtonDisplayType,confirmButtonIcon:e.confirmButtonIcon,cancelButtonIcon:e.cancelButtonIcon,confirmButtonText:e.confirmButtonText,cancelButtonText:e.cancelButtonText,"header-icon-visibility":e.headerIconVisibility},{messageLine1:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.messageLine1)),1)])),messageLine2:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.messageLine2)),1)])),_:1},8,["confirmButtonDisplayType","confirmButtonIcon","cancelButtonIcon","confirmButtonText","cancelButtonText","header-icon-visibility"])}var ru=(0,i.defineComponent)({name:"hasEditableLeaveHolidayConfirmationModal",components:{"confirmation-modal":_d},props:{state:{type:String,default:"",required:!0},isRecurringHolidaySelected:{type:Boolean,default:!1,required:!0},holidaysCount:{type:Number,default:0,required:!0}},methods:{onConfirm(e){"confirm"===e?"DELETE"===this.state?this.$emit("confirmationHasEditableLeaveModalAction",{state:"DELETE",action:"confirm"}):"HasEditableLeave"===this.state?this.$emit("confirmationHasEditableLeaveModalAction",{state:"adjustLeave",action:"confirm"}):this.$emit("confirmationHasEditableLeaveModalAction",{state:"editRecurringHoliday",action:"confirm"}):"DELETE"===this.state?this.$emit("confirmationHasEditableLeaveModalAction",{state:"DELETE",action:"cancel"}):"HasEditableLeave"===this.state?this.$emit("confirmationHasEditableLeaveModalAction",{state:"adjustLeave",action:"cancel"}):this.$emit("confirmationHasEditableLeaveModalAction",{state:"editRecurringHoliday",action:"cancel"})}},computed:{messageLine1(){return"DELETE"===this.state?this.isRecurringHolidaySelected?"These holiday(s) repeat annually. Deleting these records will remove all holiday(s) in the sequence. Are you sure you want to continue?":"You are about to delete data permanently. Are you sure you want to continue?":"HasEditableLeave"===this.state?"Would you like to adjust leave already applied? This will cancel any leaves that are no longer necessary":"This holiday repeats annually. Altering this record will change all holidays in the sequence. Are you sure you want to continue?"},messageLine2(){return""},confirmButtonIcon(){return"DELETE"===this.state?"oxd-trash":""},cancelButtonIcon(){return this.state,""},confirmButtonText(){return"DELETE"===this.state?"Yes, Delete":"editRecurringHoliday"===this.state?"Yes, Edit":"Yes"},cancelButtonText(){return"DELETE"===this.state||"editRecurringHoliday"===this.state?"No, Cancel":"No"},confirmButtonDisplayType(){return"DELETE"===this.state?"label-feedback-danger":"secondary"},headerIconVisibility(){return"DELETE"!==this.state}}});const su=(0,Re.Z)(ru,[["render",nu]]);var du=su;function cu(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-schema-form"),s=(0,i.resolveComponent)("form-modal");return(0,i.openBlock)(),(0,i.createBlock)(s,null,{title:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.modalTitle)),1)])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(r,(0,i.mergeProps)({schema:e.schema,model:e.model,"onUpdate:model":t[0]||(t[0]=t=>e.model=t),loading:e.isLoading,"onUpdate:loading:schema":t[1]||(t[1]=t=>e.updateLoading(t))},e.$attrs),null,16,["schema","model","loading"])])),_:1})}const mu=ce();function uu(e,t,o,a,l,n){var r,s,d,c,m,u;return(0,A.mG)(this,void 0,void 0,(function*(){const p=[{id:"1",label:"Full Day",_selected:void 0},{id:"2",label:"Half Day",_selected:void 0}];return{name:"Add Holiday Form",layout:[{type:"grid",props:{cols:2},children:{default:[{name:"name",label:mu("Name"),type:"input",value:null===(r=t.value)||void 0===r?void 0:r.description,validators:new Map([["required",Oa],["shouldNotExceedCharLength",$a(200)]]),props:{readonly:0==n}},{name:"startDate",label:mu("Start Date"),type:"custom",component:(0,i.markRaw)(_m),value:(null===(s=t.value)||void 0===s?void 0:s.start_date)?null===(d=t.value)||void 0===d?void 0:d.start_date:null===(c=t.value)||void 0===c?void 0:c.date,validators:new Map([["required",Oa],["validDateFormat",ja(e)]]),props:{years:ne(),readonly:0==n}},{name:"locationsFromFilterModal",label:mu("Country and Location"),type:"custom",component:(0,i.markRaw)(Xm),validators:new Map([["required",Oa]]),value:void 0!=t.value?a:[],props:{placeholder:mu("Select Country and Location"),editModel:t.value,options:o,disableUncheckedOptions:!0,locationsIdsFromEditObject:l,isNonAccessibleLocationsEmpty:n,countTopmostParents:!1}},{name:"holidayType",label:mu("Full Day/Half Day"),validators:new Map([["required",Oa]]),class:"mb-sm--oxd-input-group",visible:!0,type:"radiogroup",props:{options:p,disabled:0==n},value:void 0!=t.value?"0"==t.value.length?"1":"2":"1"},{name:"repeatsAnnually",label:"",type:"switch",props:{"option-label":mu("Repeats Annually"),disabled:0==n},value:null!=(null===(m=t.value)||void 0===m?void 0:m.id)&&"0"!==(null===(u=t.value)||void 0===u?void 0:u.recurring),class:"mb-sm--oxd-input-group"}]}},{type:"divider",style:{margin:"0"}},{type:"action",children:{default:[{name:"required",label:"",type:"custom",component:(0,i.markRaw)(Hd),style:{"margin-right":"auto",padding:"0px"}},{name:"reset",label:mu("Cancel"),type:"button",props:{type:"button",displayType:"ghost"},listeners:{onClick:()=>{this.emit("update:show",!0)}}},{name:"submit",label:mu("Save"),type:"button",style:{"margin-left":"0.5rem"},props:{type:"submit",displayType:"secondary"}}]},style:{"padding-top":"1.2rem"}}]}}))}var pu=uu;function vu(){const e=new Promise(((e,t)=>{try{const t=Fm();t.webservice.get("settings",{},{}).then((t=>{e(Object.assign({},t.data.data))}))}catch(o){t(o)}}));return{settings:e}}var hu=(0,i.defineComponent)({name:"addHolidayModal",components:{"form-modal":gc,"oxd-schema-form":yc.Z},props:{editingModel:{type:Object,required:!1,default:void 0},options:{type:Array,required:!1,default:void 0},locationsIdsFromEditObject:{type:Array,default:void 0},isNonAccessibleLocationsEmpty:{type:Boolean,default:!1}},setup(e,t){var o,a;const l=(0,i.getCurrentInstance)(),n=(0,i.ref)(!0),r=ce(),{settings:s}=(new Da(l),vu()),d=(0,i.ref)(Object.assign({},e.editingModel)),c=(null===(o=e.editingModel)||void 0===o?void 0:o.id)?"Edit Holiday":"Add Holiday",{userFormat:m}=Im();let u=null===(a=e.editingModel)||void 0===a?void 0:a.HolidayLocation.map((e=>e.location_id)),p=u.map((function(e){return"L__"+e}));const{model:v,schema:h}=(0,fc.Z)(pu.call(t,m,d,e.options,p,e.locationsIdsFromEditObject,e.isNonAccessibleLocationsEmpty)),g=()=>{n.value=!0},y=e=>{n.value=e};return(0,i.watch)((()=>v.value),(()=>{let e=v.value.startDate,t=La()(e,"YYYY-MM-DD").format("MMMM");h.value.layout[0].children.default[4].props["option-label"]=e?r("Repeats Annually")+" "+r("on")+" "+r(t)+" "+Number(e.slice(8,10)):r("Repeats Annually")})),{model:v,schema:h,modalTitle:c,isLoading:n,updateLoading:y,setLoading:g}}});const gu=(0,Re.Z)(hu,[["render",cu],["__scopeId","data-v-508674ad"]]);var yu=gu;class fu{constructor(e){this._app=(0,i.getCurrentInstance)(),this._app=e,this._dataGroupPermissionService=new Aa}progressBar(e,t){var o;const a=null===(o=this._app)||void 0===o?void 0:o.appContext.config.globalProperties.ngServices;return a.webservice.call("progress",e,[],{name:t})}}function bu(e,t,o,a){return(0,A.mG)(this,void 0,void 0,(function*(){const i=ce(),l=null===t||void 0===t?void 0:t.appContext.config.globalProperties.$toast,n=new fu(t);function r(){return(0,A.mG)(this,void 0,void 0,(function*(){if(100!=o.progressBarValue){const t=yield n.progressBar("GET",e);o.progressBarValue=null!=t.data.data?t.data.data:0,setTimeout(r,10)}else yield n.progressBar("DELETE",e),o.progressBarState=!1,o.progressBarValue=0,l.success({title:i(Ec),message:i(a)})}))}n.progressBar("POST",e).then((()=>{o.progressBarState=!0})),yield r()}))}var Cu=(0,i.defineComponent)({components:{"ohrm-layout":Xc,"oxd-list":Bd.Z,"add-holiday-modal":yu,"oxd-pop-over-with_button_click":lu,"holiday-confirmation-confirmation":du,"oxd-progress-bar":ym.Z},directives:{"set-tab-focus-to-first-element":Sr.Z},setup:function(){var e,t,o,a;const l=(0,Gd.oR)(),n=(0,i.getCurrentInstance)(),r=ce(),s=new Pm(n),d=null===n||void 0===n?void 0:n.appContext.config.globalProperties.$toast,c=(0,i.ref)([]),m=(0,i.ref)(0),u=(0,i.ref)(0),p=(0,i.ref)([]),v=(0,i.ref)(!1),h=s.getListSchema(),g=(0,i.ref)([]),y=(0,i.ref)(!1),f=(0,i.ref)(!1),b=(0,i.ref)(!1),C=(0,i.ref)(!1),S=(0,i.ref)("HasEditableLeave"),w=(0,i.ref)(null),E=(0,i.ref)([]),k=(0,i.ref)([]),x=(0,i.ref)([]),N=(0,i.ref)(!1),A=(0,i.ref)([]),D=(0,i.ref)(!1),T=(0,i.ref)({progressBarValue:0,progressBarState:!1}),P=(0,i.ref)(""),V=(0,i.ref)(""),B=(0,i.ref)({id:"",recurring:null}),I=(0,i.ref)(fa),L=new Da(n),F=(0,i.computed)((()=>h.value)),z=null===n||void 0===n?void 0:n.appContext.config.globalProperties.$dateFormat,M=null===n||void 0===n?void 0:n.appContext.config.globalProperties.$locale,O=null===(t=null===(e=h.value.table)||void 0===e?void 0:e.headers)||void 0===t?void 0:t.find((e=>"date"==e.name));O&&(O.cellProps={displayFormat:z,locale:M});const R=(e,t,o,a)=>{JSON.parse(JSON.stringify(a));const i={component:"oxd-icon-button",props:{label:"Delete Holiday",displayType:"label",size:"xx-small",name:"oxd-trash",tooltip:r("Delete"),onClick:e=>ve(e,a)}},l={component:"oxd-icon-button",props:{label:"Edit Holiday",displayType:"label",size:"xx-small",name:"oxd-edit",tooltip:r("Edit"),onClick:e=>re(e,a)}};return{props:{class:"oxd-action-render-button-visibility-on-hover",style:{"justify-content":"flex-end"},header:{cellConfig:Object.assign(Object.assign({},a.deletable&&{deleteHoliday:i}),a.editable&&{editHoliday:l})}}}},_=null===(a=null===(o=h.value.table)||void 0===o?void 0:o.headers)||void 0===a?void 0:a.find((e=>"action"==e.name));_&&"string"===typeof _.cellRenderer&&(_.cellRenderer=R);const $=(0,i.computed)((()=>({limit:l.state.holiday.limit,pages:[10,20,50,100],currentPage:l.state.holiday.currentPage}))),j=(e,t)=>{let o=(e-1)*t;return o},U=()=>({paginationParameters:{limit:l.state.holiday.limit,offset:j(l.state.holiday.currentPage,l.state.holiday.limit),sortingField:l.state.holiday.orderField,sortingOrder:l.state.holiday.orderBy},searchParameters:{startDate:l.state.holiday.searchParameters.startDate,endDate:l.state.holiday.searchParameters.endDate,operationalCountryId:l.state.holiday.searchParameters.operationalCountryId,locations:l.state.holiday.searchParameters.locations}}),Z=()=>{l.dispatch("holiday/previousPage"),ee(U()),window.scrollTo(0,0)},H=e=>{l.dispatch("holiday/jumpToPage",e.page),ee(U()),window.scrollTo(0,0)},q=e=>{l.dispatch("holiday/changeLimit",e.label),l.dispatch("holiday/jumpToPage",1),ee(U()),window.scrollTo(0,0)},G=()=>{l.dispatch("holiday/nextPage"),ee(U()),window.scrollTo(0,0)},W=e=>{for(let t in e){const o=e[t];if("DEFAULT"!==o){const e=t;l.dispatch("holiday/changeSortField",e),l.dispatch("holiday/changeSortOrder",o),ee(U())}}},K=e=>{p.value=c.value.filter(((t,o)=>e.indexOf(o)>-1))},Q=e=>{let t=e.date,o=0==e.length?r("Full Day"):r("Half Day"),a=r(e.country),i=[];for(let r=0;r<Object.keys(e.HolidayLocation).length;r++)i.push(e.HolidayLocation[r].location_name);let l=i.join(", "),n=0==e.recurring?r("No"):r("Yes"),s=e.deletable;return Object.assign(Object.assign({},e),{date:t,type:o,is_repeats_annually:n,country_name:a,locations:l,isSelectable:s})},J=e=>{var t;let o=e.date,a=(e.start_date,0==e.length?r("Full Day"):r("Half Day")),i=r(e.OperationalCountry.Country.cou_name),l=[];for(let r=0;r<Object.keys(e.HolidayLocation).length;r++)l.push(null===(t=e.HolidayLocation[r].Location)||void 0===t?void 0:t.name);let n=l.join(", "),s=0==e.recurring?r("No"):r("Yes"),d=1==e.deletable,c=e.editable,m=e.deletable,u=e.OperationalCountry.Country.cou_name;return Object.assign(Object.assign({},e),{date:o,type:a,is_repeats_annually:s,country_name:i,locations:n,isSelectable:d,deletable:m,editable:c,country:u})},Y=(0,i.ref)({rowIndexes:[],type:em.Ox}),X=()=>{u.value++,Y.value.rowIndexes=Y.value.rowIndexes.map((e=>e+1)),Y.value.rowIndexes.push(0)},ee=e=>{v.value=!0,L.getHolidays(e).then((e=>{Y.value.rowIndexes=[],e.data&&(c.value=e.data.data.map(Q),u.value=e.data.meta.total)})).catch((()=>{d.error({title:r("Error"),message:r(Be)})})).finally((()=>{p.value=[],v.value=!1}))},te=()=>{y.value=!y.value},oe=e=>{var t;let o=[];for(let l=0;l<(null===(t=e.locationsFromFilterModal)||void 0===t?void 0:t.length);l++)o.push(e.locationsFromFilterModal[l].split("__"));let a=[],i=[];for(let l=0;l<o.length;l++)"C"==o[l][0]?a.push(o[l][1]):i.push(o[l][1]);for(let l of g.value)if(!a.includes(l.id))for(let e of l.Country.Location)if(i.includes(e.id)){a.push(l.id);break}return{locationIds:i,countryIds:a}},ae=e=>{let t=oe(e);y.value=!y.value;let o=t.locationIds.map((function(e){return"L__"+e}));l.dispatch("holiday/applySearchParameters",{startDate:e.startDate,endDate:e.endDate,operationalCountryId:t.countryIds,locations:t.locationIds,locationsFromFilterModal:o}),l.dispatch("holiday/jumpToPage",1),ee(U())},ie=()=>{k.value=[],x.value=[],N.value=!0,I.value=fa,le()},le=()=>{b.value=!b.value},ne=e=>{if("DELETE"===e.state)"confirm"===e.action?""!=B.value.id?he(B.value.id):he(null):C.value=!1;else if("adjustLeave"===e.state){let t;t="confirm"===e.action,null==I.value.id?de(w.value,E.value,V.value,t):se(w.value,E.value,V.value,t),C.value=!1}else"confirm"===e.action?le():C.value=!1;S.value="",C.value=!1,B.value={id:"",recurring:null}},re=(e,t)=>{I.value=t,k.value=[],x.value=[];for(let o of t.HolidayLocation)k.value.push(o.location_id.toString());x.value=k.value.filter((e=>!A.value.includes(e))),N.value=0==x.value.length,1==t.recurring?(S.value="editRecurringHoliday",C.value=!0):le()},se=(e,t,o,a=!1)=>{const i={description:e.name,date:e.startDate,length:"1"==e.holidayType?0:4,operational_country_id:parseInt(o),recurring:e.repeatsAnnually?"on":"off",adjustLeave:a,location:t};P.value="Saving Holiday",bu("edit_holiday",n,T.value,Se),L.editHoliday(I.value.id,i).then((e=>{const t=J(e.data.data),o=c.value.findIndex((e=>e.id==t.id));c.value[o]=t,Y.value.rowIndexes.push(o)})).catch((()=>{d.error({title:r(kc),message:r(ke)})})).finally((()=>{w.value=null,E.value=[]}))},de=(e,t,o,a=!1)=>{I.value=fa;const i={description:e.name,date:e.startDate,length:"1"==e.holidayType?0:4,operational_country_id:parseInt(o),recurring:e.repeatsAnnually?"on":"off",adjustLeave:a,location:t};P.value="Saving Holiday",bu("edit_holiday",n,T.value,be),L.addHoliday(i).then((e=>{let t=e.data.data,o=J(t);c.value.unshift(o),X()})).catch((()=>{d.error({title:r(kc),message:r(Ee)})})).finally((()=>{e.value=null,E.value=[]}))},me=e=>{S.value="HasEditableLeave";let t=oe(e),o=x.value.concat(t.locationIds.filter((e=>x.value.indexOf(e)<0)));const a={country:t.countryIds[0],date:e.startDate,recurring:e.repeatsAnnually?"on":"off",location:o};L.hasEditableLeave(a).then((a=>{a.data.data?(C.value=!0,w.value=e,E.value=o,V.value=t.countryIds[0]):null==I.value.id?de(e,o,t.countryIds[0]):se(e,o,t.countryIds[0])})),b.value=!1},ue=()=>{S.value="DELETE",C.value=!0},pe=()=>{if(""!=B.value.id)D.value=1==B.value.recurring;else{let e=p.value.map((e=>e.recurring));for(let t=0;t<e.length;t++)1==e[t]&&(D.value=!0)}ue()},ve=(e,t)=>{B.value={id:t.id,recurring:t.recurring},pe()},he=e=>{let t;t=[],null!=e?t.push(e):t=p.value.map((e=>e.id)),P.value="Deleting Holiday(s)",bu("delete_holiday",n,T.value,we);const o=new Da(n);o.deleteHolidays(t).then((e=>{e.data&&ee(U())})).catch((()=>{d.error({title:r(kc),message:r(xe)})}))},ge=()=>{L.getCountries().then((e=>{if(e.data.data){g.value=e.data.data;for(let e of g.value)for(let t of e.Country.Location)A.value.push(t.id)}}))},ye=()=>{N.value=!0,ge(),ee(U())};return ye(),(0,i.onUnmounted)((()=>{d.clearAll()})),(0,i.watch)((()=>Object.keys(c.value)),(()=>{for(let e of c.value){if(e.isSelectable){F.value.table.selectable=!0;break}F.value.table.selectable=!1}})),{items:c,configs:F,wholeRecordsCount:m,filteredTotalRecordsCount:u,pagination:$,highlightRows:Y,tableSort:W,tableSelect:K,selectPreviousPage:Z,selectNextPaginate:G,selectExactPage:H,selectPerPage:q,filterHolidays:ae,getLocationAndCountryFromTreeSelect:oe,updateShow:te,filterHolidaysModalState:y,filteringHolidays:f,loadingHolidays:v,addHolidayModalState:b,toggleAddHolidayModal:le,addOrEditHoliday:me,holidayConfirmationModalState:C,holidayConfirmationType:S,holidayConfirmationModalResult:ne,selectedHolidays:p,setHolidayConfirmationModalVisibility:ue,deleteHolidays:he,singleDeleteHoliday:B,editHolidayObject:I,checkRecurringHolidayInDelete:pe,isRecurringHolidaySelected:D,addNewItemModal:ie,countryAndLocations:g,locationsIdsFromEditObject:k,isNonAccessibleLocationsEmpty:N,progressBarValueObj:T,progressBarTitle:P}}});const Su=(0,Re.Z)(Cu,[["render",gm]]);var wu=Su,Eu=o(56938),ku=o(46147),xu=o(53416);const Nu=(0,i.reactive)({toasts:[],transition:"",class:"",position:""}),Au=(0,i.defineComponent)({name:"oxd-toaster",setup(){return Object.assign({},(0,i.toRefs)(Nu))},methods:{onUpdateShow(e,t){!1===e&&this.toasts.splice(t,1)}},computed:{classes(){return{"oxd-toast-container":!0,[`oxd-toast-container--${this.position}`]:!0}}},render(){return(0,i.h)(i.TransitionGroup,{appear:!0,name:this.transition,tag:"div",class:this.classes},{default:()=>this.toasts.map(((e,t)=>(0,i.h)(Eu.Z,{key:e.id,type:e.type,title:e.title,message:e.message,show:e.show,class:this.class,"onUpdate:show":e=>this.onUpdateShow(e,t)})))})}});var Du={install:(e,t)=>{const o=ce(),a=e=>{if("string"===typeof e){const t=Nu.toasts.findIndex((t=>t.id===e));t>-1&&a(t)}else Nu.toasts[e]&&Nu.toasts.splice(e,1)},i=(e,o=!0,i=!1)=>new Promise((l=>{const n=(0,xu.x0)(8);if(i&&c(),Nu.toasts.push(Object.assign(Object.assign({},e),{id:n})),!t.persist&&o){const e=t.duration?t.duration:2500;setTimeout((()=>{a(n),l(n)}),e)}else l(n)})),l=e=>i(Object.assign({id:"",type:ku.nL,show:!0},e)),n=(e,t=!0)=>i(Object.assign({id:"",type:ku.A_,show:!0},e),!1,t),r=e=>i(Object.assign({id:"",type:ku.wZ,show:!0},e)),s=(e,t=!0)=>i(Object.assign({id:"",type:ku.ur,show:!0},e),!1,t),d=e=>i(Object.assign({id:"",type:ku.Xg,show:!0},e)),c=()=>{Nu.toasts=[]},m=()=>l({title:o("Success"),message:o("Successfully Saved")}),u=()=>l({title:o("Success"),message:o("Successfully Added")}),p=()=>l({title:o("Success"),message:o("Successfully Updated")}),v=()=>l({title:o("Success"),message:o("Successfully Deleted")}),h=()=>l({title:o("Success"),message:o("Successfully Archived")}),g=()=>l({title:o("Success"),message:o("Successfully Unarchived")}),y=()=>n({title:o("Error"),message:o("Cannot be Deleted")}),f=()=>n({title:o("Error"),message:o("Failed to Save")}),b=()=>n({title:o("Error"),message:o("Failed to Save")}),C=()=>n({title:o("Error"),message:o("Failed to Delete")}),S=()=>n({title:o("Error"),message:o("Failed to Archive")}),w=()=>n({title:o("Error"),message:o("Failed to Unarchive")}),E=()=>r({title:o("Info"),message:o("No Records Found")});Nu.class=t.class?t.class:"oxd-toast-container--toast",Nu.transition=t.animation?t.animation:"oxd-toast-list",Nu.position=t.position?t.position:"bottom",e.component("oxd-toaster",Au);const k={notify:i,show:d,success:l,error:n,info:r,warn:s,clear:a,clearAll:c,saveError:f,saveSuccess:m,addSuccess:u,deleteError:C,updateError:b,archiveError:S,updateSuccess:p,deleteSuccess:v,cannotDelete:y,noRecordsFound:E,archiveSuccess:h,unarchiveError:w,unarchiveSuccess:g};e.config.globalProperties.$toast=k,e.provide("$toast",k)}};function Tu(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-toaster"),s=(0,i.resolveComponent)("reports-catalogue"),d=(0,i.resolveComponent)("scheduled-reports"),c=(0,i.resolveComponent)("modify-schedule");return(0,i.openBlock)(),(0,i.createElementBlock)("div",null,[(0,i.createVNode)(r),"reports_and_analytics.catalogue"===e.ngServices.$state.currentState.name?((0,i.openBlock)(),(0,i.createBlock)(s,{key:0})):"reports_and_analytics.schedule_reports"===e.ngServices.$state.currentState.name?((0,i.openBlock)(),(0,i.createBlock)(d,{key:1})):"reports_and_analytics.schedule_report"===e.ngServices.$state.currentState.name?((0,i.openBlock)(),(0,i.createBlock)(c,{key:2})):(0,i.createCommentVNode)("",!0)])}const Pu={class:"report-catalogue-container"},Vu={class:"report-catalogue-heading-row"},Bu={class:"report-catalogue-header"},Iu={class:"report-catalogue-header-icon"},Lu={class:"report-catalogue-header-title"},Fu={class:"report-catalogue-filter",ref:"searchbox"},zu=["innerHTML"],Mu={class:"report-catalogue-heading-separator"},Ou={class:"container-body"},Ru={key:0,class:"container-body-left-panel"},_u={class:"container-body-right-panel"},$u={class:"reports-list-loader"},ju={key:0,class:"accordian-items"},Uu={class:"reports-accordion-header"},Zu={class:"reports-accordion-header-title-icon"},Hu=["tabindex","onKeyup"],qu={class:"extra-header-buttons"},Gu=["onClick"],Wu=["onClick"],Ku={key:0},Qu={key:0,class:"reports-accordion-single-page-subtitle"},Ju={class:"sub-title-row-check-icon"},Yu={class:"delete-button-danger"},Xu={key:1,class:"empty-msg-container"},ep={key:0,class:"empty-msg"},tp={class:"caption"},op={key:1,class:"empty-msg-container"},ap={key:0,class:"empty-msg-no-report"},ip={class:"caption"},lp={key:0,class:"content-row-check-icon"},np=["href","onKeyup","data-test"],rp={class:"reports-accordion-content-row-title-icon"},sp={class:"reports-accordion-content-row-action-buttons"},dp={key:0,"data-test":"itemDeleteDiv",class:"reports-accordion-content-row-action-button-icon"},cp=["onClick"],mp=["onKeyup","onClick"],up={key:1,class:"empty-msg-container"},pp={key:0,class:"empty-msg"},vp={class:"caption"},hp={class:"reports-list-loader"},gp={key:1,class:"recent-reports-panel"};function yp(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon"),s=(0,i.resolveComponent)("oxd-text"),d=(0,i.resolveComponent)("oxd-icon-button"),c=(0,i.resolveComponent)("oxd-quick-search"),m=(0,i.resolveComponent)("oxd-divider"),u=(0,i.resolveComponent)("oxd-table-sidebar"),p=(0,i.resolveComponent)("oxd-loader"),v=(0,i.resolveComponent)("oxd-checkbox-input"),h=(0,i.resolveComponent)("oxd-button"),g=(0,i.resolveComponent)("oxd-chip"),y=(0,i.resolveComponent)("accordion-item"),f=(0,i.resolveComponent)("oxd-accordion"),b=(0,i.resolveComponent)("recent-reports"),C=(0,i.resolveComponent)("delete-confirmation-modal"),S=(0,i.resolveComponent)("add-new-report"),w=(0,i.resolveComponent)("add-new-folder"),E=(0,i.resolveDirective)("set-tab-focus-to-first-element");return(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createElementBlock)("div",Pu,[(0,i.createElementVNode)("div",Vu,[(0,i.createElementVNode)("div",Bu,[(0,i.createElementVNode)("div",Iu,[(0,i.createVNode)(r,{class:"report-catalog-icon",name:"oxd-report-catalogue"})]),(0,i.createElementVNode)("div",Lu,[(0,i.createVNode)(s,null,{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Reports")),1)])),_:1})])]),(0,i.createElementVNode)("div",Fu,[(0,i.createVNode)(c,{createOptions:e.quickSearch,placeholder:e.$t("Search"),"data-test":"searchInput",modelValue:e.selected,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.selected=t),e.quickSearchSelect],clear:!1,"onDropdown:clear":e.quickSearchOnClear,"onUpdate:searchTerm":e.setQuickSearchTerm,"onSelect:enter":e.quickSearchKeywordSearch},{iconSlot:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{onClick:e.quickSearchKeywordSearch,"data-test":"searchIcon",name:"oxd-search"},null,8,["onClick"])])),option:(0,i.withCtx)((({text:e})=>[(0,i.createElementVNode)("div",{innerHTML:e},null,8,zu)])),_:1},8,["createOptions","placeholder","modelValue","onUpdate:modelValue","onDropdown:clear","onUpdate:searchTerm","onSelect:enter"])],512)]),(0,i.createElementVNode)("div",Mu,[(0,i.createVNode)(m)]),(0,i.createElementVNode)("div",Ou,[e.loading?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",Ru,[((0,i.openBlock)(),(0,i.createBlock)(u,{key:0,class:(0,i.normalizeClass)(["oxd-table-left-panel",{"with-filters":!0}]),width:"230px","side-panel-list":e.dataObj.stages,"bubble-visible":!1,"side-panel-icon-visible":!0,"header-visible":e.reportTypes.length>0,"header-action-button-visible":e.reportTypes.length>0,"header-secondary-btn-visible":!0,"body-visible":!1,"list-visible":e.getRouteParamsProcessed,button:e.configurations.table.leftPanel.header.button,"secondary-button":e.configurations.table.leftPanel.header.secondaryButton,"selected-list-item-id":this.selectedFilter,"onSidePanelList:onSelect":e.sidePanelListOnSelect,"onSidePanelList:onHeaderBtnClick":e.addReportModalDisplay,"onSidePanelList:onHeaderSecondaryBtnClick":e.addFolderModalDisplay,"is-side-panel-open":e.isLeftPanelOpen},{sidePanelBody:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"sidePanelBody",{},void 0,!0)])),footer:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"footer",{},void 0,!0)])),_:3},8,["side-panel-list","header-visible","header-action-button-visible","list-visible","button","secondary-button","selected-list-item-id","onSidePanelList:onSelect","onSidePanelList:onHeaderBtnClick","onSidePanelList:onHeaderSecondaryBtnClick","is-side-panel-open"]))])),(0,i.createElementVNode)("div",_u,[(0,i.createElementVNode)("div",$u,[e.searching?((0,i.openBlock)(),(0,i.createBlock)(p,{key:0,withContainer:!0,class:"oxd-loader-text-view"})):(0,i.createCommentVNode)("",!0)]),e.searching||4===e.selectedFilter?e.searching||4!==e.selectedFilter?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",gp,[(0,i.createVNode)(b,{reports:e.recentReports,"onShow:deleteConfirmation":e.confirmationModalDisplay,"onReport:viewReport":e.goToReport,"onReport:editReport":e.goToEditReport,"onReport:viewFolder":e.viewAllReportsForFolder},null,8,["reports","onShow:deleteConfirmation","onReport:viewReport","onReport:editReport","onReport:viewFolder"])])):((0,i.openBlock)(),(0,i.createBlock)(f,{key:0,"allow-multiple":!1},{default:(0,i.withCtx)((()=>[e.sections.length>0?((0,i.openBlock)(),(0,i.createElementBlock)("div",ju,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.sections,(o=>((0,i.openBlock)(),(0,i.createBlock)(y,{key:o.id,extraHeaderActions:!0,singlePageView:e.viewSinglePageState,"default-expand":o.reports.length>0,ref_for:!0,ref:`accordionItem${o.id}`},{header:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Uu,[e.viewSinglePageState?((0,i.openBlock)(),(0,i.createBlock)(d,{key:0,onClick:t[1]||(t[1]=t=>e.viewAllSections()),"data-test":"backButtononHeader",class:"back-button",name:"oxd-arrow-left",tooltip:e.$t("Reports")},null,8,["tooltip"])):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("div",Zu,[(0,i.createVNode)(d,{name:o.icon,tabindex:"-1",size:"extra-large",class:(0,i.normalizeClass)(e.viewSinglePageState?"accordian-item-headr-icon":"accordion-item-header-icon-default")},null,8,["name","class"])]),(0,i.createElementVNode)("div",{tabindex:e.viewSinglePageState?"-1":"0",onKeyup:(0,i.withKeys)((t=>e.viewAllReportsForCategory(o.id)),["enter"]),class:(0,i.normalizeClass)(e.viewSinglePageState?"reports-accordion-header-title-in-folder":"reports-accordion-header-title")},[(0,i.createVNode)(s,{onClick:t=>e.viewAllReportsForCategory(o.id)},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(o.name)),1)])),_:2},1032,["onClick"])],42,Hu)])])),extraHeaderActions:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",qu,[!o.predefined&&o.deletable?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,class:"extra-header-button-with-space",onClick:t=>e.deleteFolderConfirmationModalDisplay(o.id)},[(0,i.createVNode)(d,{class:"row-action-button-icon",name:"oxd-trash","data-test":"customFolderDelete",tooltip:e.$t("Delete")},null,8,["tooltip"])],8,Gu)):(0,i.createCommentVNode)("",!0),!o.predefined&&o.editable?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:1,onClick:t=>e.editFolderNameModal(o.name,o.id)},[(0,i.createVNode)(d,{class:"row-action-button-icon",name:"oxd-edit","data-test":"customFolderNameEdit",tooltip:e.$t("Edit")},null,8,["tooltip"])],8,Wu)):(0,i.createCommentVNode)("",!0)])])),content:(0,i.withCtx)((()=>[e.viewSinglePageState?((0,i.openBlock)(),(0,i.createElementBlock)("div",Ku,[o.reports.length>0?((0,i.openBlock)(),(0,i.createElementBlock)("div",Qu,[(0,i.createElementVNode)("div",Ju,[e.viewSinglePageState?((0,i.openBlock)(),(0,i.createBlock)(v,{key:0,checkIcon:e.checkIcon,modelValue:e.selectedAll,"onUpdate:modelValue":t[2]||(t[2]=t=>e.selectedAll=t),onChange:t=>e.onChangeSelectAll(o)},null,8,["checkIcon","modelValue","onChange"])):(0,i.createCommentVNode)("",!0)]),(0,i.createVNode)(s,{style:{color:"#929baa"}},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)("("+(0,i.toDisplayString)(e.deleteRecordIds.length>0?e.deleteRecordIds.length:e.$t(o.reports.length))+") ",1)])),_:2},1024),(0,i.createVNode)(s,{style:{"padding-left":"13px",color:"#929baa"}},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.deleteRecordIds.length>0?e.dynamicCountBasedString(e.deleteRecordIds.length,"Selected"):e.dynamicCountBasedString(o.reports.length,"Found")),1)])),_:2},1024),(0,i.createElementVNode)("div",Yu,[e.deleteRecordIds.length>0?((0,i.openBlock)(),(0,i.createBlock)(h,{key:0,label:e.$t("Delete Selected"),size:"medium",displayType:"label-danger",iconName:"oxd-trash","data-test":"loadMostCommentedPostsButton",selected:e.deleteRecordIds,"onUpdate:selected":t[3]||(t[3]=t=>e.deleteRecordIds=t),onClick:t=>e.confirmationModalDisplay(e.deleteRecordIds,o),disabled:e.disbleBulkDelete,disabledTooltip:"Your selection contains non-deletable reports",flow:"bottom"},null,8,["label","selected","onClick","disabled"])):(0,i.createCommentVNode)("",!0)])])):((0,i.openBlock)(),(0,i.createElementBlock)("div",Xu,[e.loading?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",ep,[(0,i.createVNode)(r,{class:"empty-msg-pic",name:"oxd-no-data"}),(0,i.createElementVNode)("div",tp,(0,i.toDisplayString)(e.$t("Sorry, No Data Found!")),1)]))]))])):(0,i.createCommentVNode)("",!0),0!==o.reports.length||e.viewSinglePageState?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",op,[e.loading?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",ap,[(0,i.createElementVNode)("div",ip,(0,i.toDisplayString)(e.$t("Sorry, No Data Found!")),1)]))])),((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.getSectionsliced(o.reports),(a=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:a.id,class:"reports-accordion-content-row"},[e.viewSinglePageState?((0,i.openBlock)(),(0,i.createElementBlock)("div",lp,[e.viewSinglePageState?((0,i.openBlock)(),(0,i.createBlock)(v,{key:0,modelValue:e.deleteRecordIds,"onUpdate:modelValue":t[4]||(t[4]=t=>e.deleteRecordIds=t),value:a.id,onClick:t=>e.onCheckBoxClick(a,o)},null,8,["modelValue","value","onClick"])):(0,i.createCommentVNode)("",!0)])):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("a",{class:"reports-accordion-content-row-title",href:e.getReportUrl(a),tabindex:"0",onKeyup:(0,i.withKeys)((t=>e.goToReport(a)),["enter"]),"data-test":"reportItem"+a.id},[(0,i.createElementVNode)("div",rp,[(0,i.createVNode)(r,{name:"1"===a.hasDynamicChart||"1"===a.hasEmbeddedChart?"oxd-report-chart":"oxd-report",tooltip:"1"===a.hasDynamicChart||"1"===a.hasEmbeddedChart?e.$t("Report With Chart"):e.$t("Report Without Chart")},null,8,["name","tooltip"]),a.is_private?((0,i.openBlock)(),(0,i.createBlock)(r,{key:0,class:"oxd-pop-icon",name:"oxd-lock",tooltip:e.$t("Private Report")},null,8,["tooltip"])):(0,i.createCommentVNode)("",!0)]),(0,i.createVNode)(s,{class:"reports-content-row-text"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(a.name)),1)])),_:2},1024)],40,np),(0,i.createElementVNode)("div",sp,[a.deletable?((0,i.openBlock)(),(0,i.createElementBlock)("div",dp,[(0,i.createVNode)(d,{class:"row-action-button-icon",name:"oxd-trash","data-test":"deleteButton",onClick:t=>e.confirmationModalDisplay([a.id],o),tooltip:e.$t("Delete")},null,8,["onClick","tooltip"])])):(0,i.createCommentVNode)("",!0),a.editable?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:1,"data-test":"itemEditDiv",class:"reports-accordion-content-row-action-button-icon",onClick:t=>e.goToEditReport(a)},[(0,i.createVNode)(d,{class:"row-action-button-icon",name:"oxd-edit",tooltip:e.$t("Edit")},null,8,["tooltip"])],8,cp)):(0,i.createCommentVNode)("",!0)])])))),128)),o.reports.length>10&&!e.viewSinglePageState?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:2,class:"count-container",tabindex:"0",onKeyup:(0,i.withKeys)((t=>e.viewAllReportsForCategory(o.id)),["enter"]),onClick:t=>e.viewAllReportsForCategory(o.id),"data-test":"viewAllButton"},[(0,i.createVNode)(g,{tabindex:"-1",label:o.reports.length,flow:"right",class:"oxd-chip-button"},null,8,["label"]),(0,i.createVNode)(s,{class:"oxd-label oxd-chip-button-text"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("View All")),1)])),_:1}),(0,i.createVNode)(r,{tabindex:"-1",class:"oxd-right-icon",size:"extra-small",name:"oxd-arrow-right"})],40,mp)):(0,i.createCommentVNode)("",!0)])),_:2},1032,["singlePageView","default-expand"])))),128))])):((0,i.openBlock)(),(0,i.createElementBlock)("div",up,[e.loading?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",pp,[(0,i.createVNode)(r,{class:"empty-msg-pic",name:"oxd-no-data"}),(0,i.createElementVNode)("div",vp,(0,i.toDisplayString)(e.$t("Sorry, No Data Found!")),1)]))])),(0,i.createElementVNode)("div",hp,[e.loading?((0,i.openBlock)(),(0,i.createBlock)(p,{key:0,withContainer:!0,class:"oxd-loader-text-view"})):(0,i.createCommentVNode)("",!0)])])),_:1}))]),e.showConfirmationModal?((0,i.openBlock)(),(0,i.createBlock)(C,{key:1,"data-test":"deleteConfirmationModal",onConfirmationModalAction:t[5]||(t[5]=t=>e.confirmationModalAction(t))},{messageLine1:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("The selected Report(s) will be permanently deleted.")),1)])),messageLine2:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Are you sure you want to continue?")),1)])),_:1})):(0,i.createCommentVNode)("",!0),e.showDeleteFolderConfirmationModal?((0,i.openBlock)(),(0,i.createBlock)(C,{key:2,"data-test":"deleteConfirmationModal",onConfirmationModalAction:t[6]||(t[6]=t=>e.deleteFolderconfirmationModalAction(t))},{messageLine1:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("The selected Folder will be permanently deleted.")),1)])),messageLine2:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Are you sure you want to continue?")),1)])),_:1})):(0,i.createCommentVNode)("",!0),e.showAddReportModal?((0,i.openBlock)(),(0,i.createBlock)(S,{key:3,onAddNewReport:t[7]||(t[7]=t=>e.addNewReportModalAction(t)),"report-types":e.reportTypes,folders:e.reportFolders,"data-test":"addNewReportModal"},null,8,["report-types","folders"])):(0,i.createCommentVNode)("",!0),e.showAddFolderModal?((0,i.openBlock)(),(0,i.createBlock)(w,{key:4,onAddNewFolder:t[8]||(t[8]=t=>e.addNewFolderModalAction(t)),onUpdateFolder:t[9]||(t[9]=t=>e.updateFolderModalAction(t)),existingFolderNames:e.folderNameSet,"edit-folder-name":e.editFolderName,"report-types":e.reportTypes,"data-test":"addNewReportModal"},null,8,["existingFolderNames","edit-folder-name","report-types"])):(0,i.createCommentVNode)("",!0)])])),[[E]])}const fp={class:"oxd-accordion"};function bp(e,t,o,a,l,n){return(0,i.openBlock)(),(0,i.createElementBlock)("div",fp,[(0,i.renderSlot)(e.$slots,"default",{},void 0,!0)])}var Cp=(0,i.defineComponent)({name:"oxd-accordion",components:{},props:{allowMultiple:{type:Boolean,default:!1}},methods:{}});const Sp=(0,Re.Z)(Cp,[["render",bp],["__scopeId","data-v-449f0ca7"]]);var wp=Sp;const Ep={class:"oxd-accordion-item"},kp={class:"oxd-accordion-item-header-title"},xp={class:"oxd-accordion-item-header-actions"},Np={class:"oxd-accordion-item-header-action-extra"},Ap={key:0,class:"oxd-accordion-item-header-action-caret"},Dp={class:"oxd-accordion-item-content"};function Tp(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-text"),s=(0,i.resolveComponent)("oxd-icon-button");return(0,i.openBlock)(),(0,i.createElementBlock)("div",Ep,[(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(e.singlePageView?"oxd-accordion-item-single-page-header":"oxd-accordion-item-header")},[(0,i.renderSlot)(e.$slots,"header",{},(()=>[(0,i.createElementVNode)("div",kp,[(0,i.createVNode)(r,null,{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.headerTitle)),1)])),_:1})])]),!0),(0,i.createElementVNode)("div",xp,[(0,i.createElementVNode)("div",Np,[(0,i.renderSlot)(e.$slots,"extraHeaderActions",{},void 0,!0)]),e.singlePageView?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",Ap,[(0,i.createVNode)(s,{name:e.isOpen?"oxd-caret-up":"oxd-caret-down",class:"oxd-accordion-item-header-action-caret-icon",onClick:e.toggleAccordionItem,tooltip:e.isOpen?e.$t("Collapse"):e.$t("Expand")},null,8,["name","onClick","tooltip"])]))])],2),(0,i.withDirectives)((0,i.createElementVNode)("div",Dp,[(0,i.renderSlot)(e.$slots,"content",{},void 0,!0)],512),[[i.vShow,e.isOpen]])])}var Pp=(0,i.defineComponent)({name:"AccordionItem",components:{"oxd-icon-button":D.Z},props:{extraHeaderActions:{type:Boolean,default:!1},singlePageView:{type:Boolean,default:!1},headerTitle:{type:String,default:""},defaultExpand:{type:Boolean,default:!1}},data(){return{isOpen:this.defaultExpand}},methods:{toggleAccordionItem(){this.isOpen=!this.isOpen,this.$emit("toggle-accordion-item",this.isOpen)}}});const Vp=(0,Re.Z)(Pp,[["render",Tp],["__scopeId","data-v-c1a9e764"]]);var Bp=Vp,Ip=o(55752);const Lp={class:"add-report-modal-header"},Fp={class:"modal-oxd-divider"},zp={class:"add-report-modal-footer"},Mp={class:"add-report-modal-helper-text"};function Op(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-text"),s=(0,i.resolveComponent)("oxd-divider"),d=(0,i.resolveComponent)("oxd-input-field"),c=(0,i.resolveComponent)("required-text"),m=(0,i.resolveComponent)("oxd-button"),u=(0,i.resolveComponent)("oxd-form"),p=(0,i.resolveComponent)("oxd-dialog");return e.show?((0,i.openBlock)(),(0,i.createBlock)(p,{key:0,"onUpdate:show":e.onCancel,style:{width:"400px"}},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Lp,[(0,i.createVNode)(r,{type:"card-title"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Add Report")),1)])),_:1})]),(0,i.createElementVNode)("div",Fp,[(0,i.createVNode)(s)]),(0,i.createVNode)(u,{onSubmitValid:e.onAddReport,ref:"form"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{type:"select",label:e.$t("Select Report Type"),clear:!1,required:"",options:e.reportTypes,modelValue:e.reportType,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.reportType=t),e.updateFolderOptions],rules:e.rules.reportType,onKeydown:e.onReportTypeKeypress},null,8,["label","options","modelValue","rules","onUpdate:modelValue","onKeydown"]),(0,i.createVNode)(d,{type:"select",label:e.$t("Select Folder"),clear:!1,required:"",options:e.reportFolders,modelValue:e.reportFolder,"onUpdate:modelValue":t[1]||(t[1]=t=>e.reportFolder=t),onKeydown:e.onFolderKeypress,rules:e.rules.reportFolder},null,8,["label","options","modelValue","onKeydown","rules"]),(0,i.createVNode)(s),(0,i.createElementVNode)("div",zp,[(0,i.createElementVNode)("div",Mp,[(0,i.createVNode)(c)]),(0,i.createVNode)(m,{class:"add-report-button-margin","data-test":"cancelButton",label:e.$t("Cancel"),displayType:"ghost",onClick:e.onCancel},null,8,["label","onClick"]),(0,i.createVNode)(m,{class:"add-report-button-margin","data-test":"addButton",label:e.$t("Next"),displayType:"secondary",type:"submit"},null,8,["label"])])])),_:1},8,["onSubmitValid"])])),_:1},8,["onUpdate:show"])):(0,i.createCommentVNode)("",!0)}var Rp=(0,i.defineComponent)({name:"AddNewReportDialogue",components:{RequiredText:Hd,"oxd-button":jt.Z,"oxd-dialog":Wo.Z,"oxd-text":Ii.Z,"oxd-divider":ro.Z,"oxd-input-field":lo.Z,"oxd-form":no.Z},props:{reportTypes:{type:Array,default:()=>[]},folders:{type:Array,default:()=>[]}},data(){return{show:!0,reportType:this.reportTypes[0],reportFolder:this.folders[0],reportFolders:[],previousKey:"",keyPressCount:0,rules:{reportType:[e=>void 0!==(null===e||void 0===e?void 0:e.id)||"Required"],reportFolder:[e=>void 0!==(null===e||void 0===e?void 0:e.id)||"Required"]}}},methods:{onCancel(){this.$emit("add-new-report","cancel"),this.show=!this.show},onAddReport(){this.$refs.form.isValid&&(this.show=!this.show),this.reportType&&(this.show=!this.show,this.$emit("add-new-report",{reportType:this.reportType,reportFolder:this.reportFolder}))},onReportTypeKeypress(e){if(e.key.length>1)return;const t=this.reportTypes.filter((t=>t.label.toLowerCase().startsWith(e.key)));t.length>0&&(this.previousKey==e.key?(this.keyPressCount++,this.keyPressCount==t.length&&(this.keyPressCount=0),this.reportType=t[this.keyPressCount]):(this.reportType=t[0],this.keyPressCount=0)),this.previousKey=e.key,this.updateFolderOptions()},onFolderKeypress(e){if(e.key.length>1)return;const t=this.reportFolders.filter((t=>t.name.toLowerCase().startsWith(e.key)));t.length>0&&(this.previousKey==e.key?(this.keyPressCount++,this.keyPressCount==t.length&&(this.keyPressCount=0),this.reportFolder=t[this.keyPressCount]):(this.reportFolder=t[0],this.keyPressCount=0)),this.previousKey=e.key},updateFolderOptions(){var e,t,o;this.reportFolders=[],this.reportFolders.push(this.getReportFolderItem(null===(e=this.reportType)||void 0===e?void 0:e.folderId,null===(t=this.reportType)||void 0===t?void 0:t.folderName,!0)),(null===(o=this.reportType)||void 0===o?void 0:o.additionalFolders)&&this.reportType.additionalFolders.length>0&&this.reportType.additionalFolders.forEach((e=>{this.reportFolders.push(this.getReportFolderItem(e.id,e.name,!0))}));for(let a=0;a<this.folders.length;a++){let e=this.folders[a];this.reportFolders.push(this.getReportFolderItem(e.id,e.name,!1))}this.reportFolder=this.reportFolders[0]},getReportFolderItem(e,t,o){return{id:e,label:t,name:t,predefined:o,menuItemId:null,editable:!1,deletable:!1,createdUser:!1}}},mounted(){this.updateFolderOptions()}});const _p=(0,Re.Z)(Rp,[["render",Op]]);var $p=_p;const jp={class:"add-report-modal-header"},Up={class:"modal-oxd-divider"},Zp={ref:"inputbox"},Hp={class:"modal-oxd-divider"},qp={class:"add-report-modal-footer"},Gp={class:"add-report-modal-helper-text"};function Wp(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-text"),s=(0,i.resolveComponent)("oxd-divider"),d=(0,i.resolveComponent)("oxd-input-field"),c=(0,i.resolveComponent)("required-text"),m=(0,i.resolveComponent)("oxd-button"),u=(0,i.resolveComponent)("oxd-form"),p=(0,i.resolveComponent)("oxd-dialog");return e.show?((0,i.openBlock)(),(0,i.createBlock)(p,{key:0,"onUpdate:show":e.onCancel,style:{width:"400px"}},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",jp,[(0,i.createVNode)(r,{type:"card-title"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.editFolderName?e.$t("Edit Folder"):e.$t("Add Folder")),1)])),_:1})]),(0,i.createElementVNode)("div",Up,[(0,i.createVNode)(s)]),(0,i.createVNode)(u,{onSubmitValid:e.onAddFolder,ref:"form"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Zp,[(0,i.createVNode)(d,{rows:"1",placeholder:e.$t("Enter Folder Name"),label:e.$t("Folder Name"),onInput:t[0]||(t[0]=t=>e.onInput(t)),modelValue:e.folderName,"onUpdate:modelValue":t[1]||(t[1]=t=>e.folderName=t),required:"",rules:e.rules.name},null,8,["placeholder","label","modelValue","rules"])],512),(0,i.createElementVNode)("div",Hp,[(0,i.createVNode)(s)]),(0,i.createElementVNode)("div",qp,[(0,i.createElementVNode)("div",Gp,[(0,i.createVNode)(c)]),(0,i.createVNode)(m,{class:"add-report-button-margin",label:e.$t("Cancel"),displayType:"ghost",onClick:e.onCancel},null,8,["label","onClick"]),(0,i.createVNode)(m,{class:"add-report-button-margin","data-test":"submitFolderButton",label:e.editFolderName?e.$t("Update"):e.$t("Save"),displayType:"secondary",type:"submit"},null,8,["label"])])])),_:1},8,["onSubmitValid"])])),_:1},8,["onUpdate:show"])):(0,i.createCommentVNode)("",!0)}var Kp=(0,i.defineComponent)({name:"AddNewReportDialogue",components:{RequiredText:Hd,"oxd-button":jt.Z,"oxd-dialog":Wo.Z,"oxd-text":Ii.Z,"oxd-divider":ro.Z,"oxd-input-field":lo.Z,"oxd-form":no.Z},props:{editFolderName:{type:String,default:()=>""},existingFolderNames:{type:Array,default:()=>[]}},data(){return{show:!0,folderName:this.editFolderName,rules:{name:[e=>(null===e||void 0===e?void 0:e.length)<71||this.$t("Should not exceed 70 characters"),e=>{var t;return(null===(t=e.trim())||void 0===t?void 0:t.length)>0||(this.$nextTick((()=>{const e=this.$refs.inputbox,t=e.children[0].children[1].children[0];t.focus()})),this.$t("Required"))},e=>{var t;return-1==this.existingFolderNames.indexOf(e.toLowerCase().trim())||e.toLowerCase().trim()===(null===(t=this.editFolderName)||void 0===t?void 0:t.toLowerCase().trim())||this.$t("Already Exists")}]}}},methods:{onInput(e){e.target,e.target.style.height="auto",e.target.style.height=`${e.target.scrollHeight}px`},onCancel(){this.$emit("add-new-folder","cancel"),this.show=!this.show},onAddFolder(){if(this.$refs.form.isValid&&(this.show=!this.show),this.folderName&&!this.editFolderName){this.show=!this.show;const e={name:this.folderName.trim()};this.$emit("add-new-folder",e)}if(this.editFolderName){this.show=!this.show;const e={name:this.folderName.trim()};this.$emit("update-folder",e)}}}});const Qp=(0,Re.Z)(Kp,[["render",Wp]]);var Jp=Qp,Yp={getDuplicateReportsFiltered(e){for(const t of e)t.folderId=t.ReportFolder?t.ReportFolder.id:t.folderId;return e.reduce(this.removeDuplicates,[])},removeDuplicates(e,t){return o(t)?e:[...e,t];function o(t){return e.some((e=>e.name===t.name&&e.folderId===t.folderId))}},getRecentReportsCategorized(e){const t=[],o=(new Date).getDate(),a=(new Date).getMonth(),i=(new Date).getFullYear(),l=(new Date).getHours(),n=(new Date).getMinutes(),r=(new Date).getSeconds(),s=new Date(i,a,o,l,n,r),d=new Date(i,a,o),c=new Date(i,a,o-7),m=new Date(i,a,o-30),u=new Date(i,a,o-365),p=this.getReportsViewedDuringPeriod(e,d,s),v=this.getReportsViewedDuringPeriod(e,c,d),h=this.getReportsViewedDuringPeriod(e,m,c),g=this.getReportsViewedDuringPeriod(e,u,m);return p.length>0&&t.push({name:"Today",reports:p}),v.length>0&&t.push({name:"Last 7 days",reports:v}),h.length>0&&t.push({name:"Last 30 days",reports:h}),g.length>0&&t.push({name:"Earlier",reports:g}),t},getReportsViewedDuringPeriod(e,t,o){const a=[];for(const i of e){const e=i.access_time?new Date(i.access_time.toString()+"Z"):"";o>=e&&t<e&&a.push(i)}return a}},Xp=o(77855),ev=o(88540);const tv={key:0},ov={key:1,class:"empty-msg-container"},av={class:"empty-msg"},iv={class:"caption"};function lv(e,t,o,a,l,n){const r=(0,i.resolveComponent)("recent-reports-single-section"),s=(0,i.resolveComponent)("oxd-icon");return e.categorizedReports.length>0?((0,i.openBlock)(),(0,i.createElementBlock)("div",tv,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.categorizedReports,(t=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:t.name},[(0,i.createVNode)(r,{category:t.name,reports:t.reports,"onReport:delete":e.showDeleteConfirmationModal,"onReport:goToReport":e.viewReport,"onReport:goToEditReport":e.editReport,"onReport:goToFolder":e.viewFolder},null,8,["category","reports","onReport:delete","onReport:goToReport","onReport:goToEditReport","onReport:goToFolder"])])))),128))])):((0,i.openBlock)(),(0,i.createElementBlock)("div",ov,[(0,i.createElementVNode)("div",av,[(0,i.createVNode)(s,{name:"oxd-no-data"}),(0,i.createElementVNode)("div",iv,(0,i.toDisplayString)(e.$t("Sorry, No Data Found!")),1)])]))}const nv={class:"recent-reports-single-section"},rv={class:"recent-reports-single-section-header"},sv={class:"recent-reports-single-section-header-title"},dv={class:"recent-reports-single-section-content"},cv=["onClick","onKeyup"],mv={class:"recent-reports-single-section-content-row-title-icon"},uv=["href"],pv=["onClick","onKeyup"],vv={class:"report-folder-chip"},hv={class:"report-folder-chip-icon"},gv={class:"report-folder-chip-name"},yv={class:"reports-accordion-content-row-action-section"},fv={class:"reports-accordion-content-row-action-buttons"},bv={key:0,class:"reports-accordion-content-row-action-button-icon"},Cv={key:1,class:"reports-accordion-content-row-action-button-icon"};function Sv(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-text"),s=(0,i.resolveComponent)("oxd-icon"),d=(0,i.resolveComponent)("oxd-icon-button");return(0,i.openBlock)(),(0,i.createElementBlock)("div",nv,[(0,i.createElementVNode)("div",rv,[(0,i.createElementVNode)("div",sv,[(0,i.createVNode)(r,null,{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.category)),1)])),_:1})])]),(0,i.createElementVNode)("div",dv,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.reports,(t=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:t.id,class:"recent-reports-single-section-content-row"},[(0,i.createElementVNode)("div",{class:"recent-reports-single-section-content-row-title",onClick:o=>e.goToReport(t),"data-test":"viewReport",tabindex:"0",onKeyup:(0,i.withKeys)((o=>e.goToReport(t)),["enter"])},[(0,i.createElementVNode)("div",mv,[(0,i.createVNode)(s,{name:"1"===t.hasDynamicChart||"1"===t.hasEmbeddedChart?"oxd-report-chart":"oxd-report",tooltip:"1"===t.hasDynamicChart||"1"===t.hasEmbeddedChart?e.$t("Report With Chart"):e.$t("Report Without Chart")},null,8,["name","tooltip"])]),(0,i.createElementVNode)("a",{class:"recent-reports-single-section-content-row-title-text",href:e.getReportUrl(t)},[(0,i.createVNode)(r,{class:"d-flex align-center"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(t.name)),1)])),_:2},1024)],8,uv),(0,i.createElementVNode)("div",{class:"report-folder-chip-container",onClick:o=>e.goToFolder(t.folderId),tabindex:"0","data-test":"viewFolder",onKeyup:(0,i.withKeys)((o=>e.goToFolder(t.folderId)),["enter"])},[(0,i.createElementVNode)("div",vv,[(0,i.createElementVNode)("div",hv,[(0,i.createVNode)(s,{name:"oxd-report-folder"})]),(0,i.createElementVNode)("div",gv,[(0,i.createVNode)(r,null,{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(t.folder_name)),1)])),_:2},1024)])])],40,pv)],40,cv),(0,i.createElementVNode)("div",yv,[(0,i.createElementVNode)("div",fv,[t.deletable?((0,i.openBlock)(),(0,i.createElementBlock)("div",bv,[(0,i.createVNode)(d,{class:"row-action-button-icon",name:"oxd-trash","data-test":"deleteButton",onClick:o=>e.deleteReport(t.id),tooltip:e.$t("Delete")},null,8,["onClick","tooltip"])])):(0,i.createCommentVNode)("",!0),t.editable?((0,i.openBlock)(),(0,i.createElementBlock)("div",Cv,[(0,i.createVNode)(d,{class:"row-action-button-icon",name:"oxd-edit","data-test":"editButton",tooltip:e.$t("Edit"),onClick:o=>e.editReport(t)},null,8,["tooltip","onClick"])])):(0,i.createCommentVNode)("",!0)])])])))),128))])])}var wv=(0,i.defineComponent)({name:"RecentReportsSingleSection",emits:["report:delete","report:goToFolder","report:goToReport","report:goToEditReport"],components:{"oxd-text":Ii.Z,"oxd-icon":In.Z,"oxd-icon-button":D.Z},props:{category:{type:String,default:"Today"},reports:{type:Array,default:()=>[]}},methods:{deleteReport(e){this.$emit("report:delete",[e])},goToFolder(e){this.$emit("report:goToFolder",e)},goToReport(e){this.$emit("report:goToReport",e)},editReport(e){this.$emit("report:goToEditReport",e)},getReportUrl(e){let t=e.custom_url.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/);if(t&&4===t.length){let a,i=t[1];if(void 0!==t[3]){try{let o=this.getRouteParamsProcessed(t[3],e);a=JSON.parse(o)}catch(o){}return"pim"==e.module&&(i="report_view_oxd"),this.ngServices.$state.href(i,a)}{let o=this.getRouteParamsProcessed(t[0],e);return o.replace("/noncore","")}}},getRouteParamsProcessed(e,t){return e=e.replace(":module",t.module),e=e.replace(":prefix",t.prefix),e=e.replace(":dataGroup",t.dataGroup),e=e.replace(":template",t.template),e=e.replace(":reportId",t.id.toString()),e=e.replace(":uniqueName",t.uniqueName),e=e.replace(":ohrmReportId",t.ohrmReportId),e}}});const Ev=(0,Re.Z)(wv,[["render",Sv],["__scopeId","data-v-6951c620"]]);var kv=Ev,xv=(0,i.defineComponent)({name:"RecentReportComponent",emits:["show:deleteConfirmation","report:viewReport","report:editReport","report:viewFolder"],components:{"recent-reports-single-section":kv,"oxd-icon":In.Z},props:{reports:{type:Array,required:!0}},watch:{reports(e){this.categorizedReports=Yp.getRecentReportsCategorized(e)}},methods:{showDeleteConfirmationModal(e){this.$emit("show:deleteConfirmation",e)},viewReport(e){this.$emit("report:viewReport",e)},viewFolder(e){this.$emit("report:viewFolder",e)},editReport(e){this.$emit("report:editReport",e)}},data(){return{categorizedReports:[]}},mounted(){this.categorizedReports=Yp.getRecentReportsCategorized(this.reports)}});const Nv=(0,Re.Z)(xv,[["render",lv],["__scopeId","data-v-7319e2e6"]]);var Av=Nv,Dv=(0,i.defineComponent)({name:"ReportsCatalogue",components:{"recent-reports":Av,"add-new-report":$p,"add-new-folder":Jp,"oxd-accordion":wp,"accordion-item":Bp,"oxd-chip":Ip.Z,"oxd-text":Ii.Z,"oxd-icon-button":D.Z,"oxd-icon":In.Z,"oxd-quick-search":T.Z,"oxd-divider":ro.Z,"oxd-loader":co.Z,"oxd-table-sidebar":Xp.Z,"oxd-checkbox-input":ev.Z,"delete-confirmation-modal":kr,"oxd-button":jt.Z},directives:{"set-tab-focus-to-first-element":Sr.Z},watch:{deleteRecordIds(e){if(e.length>0&&this.selectedSection.reports.length>0){const t=e.filter((e=>this.nonDeletableIds.includes(e)));this.disbleBulkDelete=t.length>0,this.selectedAll=!0,this.selectedSection.reports.length==e.length?this.checkIcon="oxd-check":this.checkIcon="dash"}else this.selectedAll=!1}},methods:{onChangeSelectAll(e){this.selectedAll?this.deleteRecordIds=e.reports.map((e=>e.id.toString())):this.deleteRecordIds=[]},onCheckBoxClick(e,t){this.selectedSection=t,this.sectionId=t.id},getReportData(e,t){this.searching=!0,this.fetchFunctionCalled?setTimeout((()=>{this.searching=!0,this.fetchReports(e,t)}),800):this.fetchReports(e,t)},quickSearchOnClear(){this.quickSearchTriggered&&(this.quickSearchTriggered=!1),this.quickSearchTerm=null},quickSearchSelect(e){e?e.id&&(this.quickSearchTriggered=!0,this.quickSearchTerm=e.name,this.getReports(e)):this.quickSearchOnClear()},editFolderNameModal(e,t){this.folderUpdateId=t,this.editFolderName=e,this.showAddFolderModal=!0},setQuickSearchTerm(e){this.quickSearchTerm=e},quickSearchKeywordSearch(){this.quickSearchTriggered=!0;let e={name:this.quickSearchTerm};this.getReports(e),""!==this.quickSearchTerm&&null!==this.quickSearchTerm||(this.quickSearchTriggered=!1),this.sectionId=0},getSectionsliced(e){return this.viewSinglePageState?e:e.length>0?e.slice(0,10):void 0},viewAllSections(){this.sections=this.allSections,this.setSinglePageVisiblity(!1),this.deleteRecordIds=[],this.disbleBulkDelete=!1,this.deleteSuccess=!1,this.sectionId=0},setSinglePageVisiblity(e){this.viewSinglePageState=e},fetchReports(e,t){let o={serverFetch:!0};this.fetchFunctionCalled=!0;let a={reportName:e,id:t};2==this.selectedFilter?a.reportType="StandardReports":3==this.selectedFilter?a.reportType="MyReports":4==this.selectedFilter&&(a.reportType="RecentReports"),this.ngServices.webservice.get("reports",{filter:a,include:"ReportFolder,ChartAvailability"},o).then((e=>{this.sections=[],this.allSections=[],this.sectionIcons=e.data.metaData.icons,this.moduleInfo=e.data.metaData.moduleInfo;let t=Yp.getDuplicateReportsFiltered(e.data.data);this.setEditableReportTypes(this.moduleInfo),this.reportTypes.length>0?this.ngServices.webservice.get("reportsFolders",null,o).then((e=>{if(this.folderItems=e.data.data,this.reportTypes.length>0){this.reportFolders=this.getNonPredefinedReportFolders(this.folderItems),this.folderNameSet=e.data.data.map((e=>e.name.toLowerCase()));let t=e.data.data.filter((e=>"Other Reports"==e.name));this.otherReportsFolderCreatedUser=t[0].createdUser,this.otherReportsFolderId=t[0].id}this.prepareReportsData(t)})):this.prepareReportsData(t)})).catch((e=>{if(this.stayOnFolder=!1,403===e.status)this.ngServices.$state.go("403");else if(401!==e.status)return this.loading=!1,this.searching=!1,this.fetchFunctionCalled=!1,this.$toast.error({title:this.$t("Error"),message:this.$t("Error on processing the request")})}))},prepareReportsData(e){if(e.length>0&&4!=this.selectedFilter){let t=[],o=[];for(let a of e)if(a.ReportFolder){if(-1==o.indexOf(a.ReportFolder.name)){o.push(a.ReportFolder.name);let e=this.folderItems.findIndex((e=>e.id===a.ReportFolder.id));t.push({id:a.ReportFolder.id,name:a.ReportFolder.name,icon:this.sectionIcons[a.ReportFolder.name]?this.sectionIcons[a.ReportFolder.name]:"oxd-folder",predefined:!(this.folderItems.length>0)||this.folderItems[e].predefined,deletable:this.folderItems.length>0&&this.folderItems[e].deletable,editable:this.folderItems.length>0&&this.folderItems[e].editable,createdUser:this.folderItems.length>0&&this.folderItems[e].createdUser,reports:[]})}t[o.indexOf(a.ReportFolder.name)].reports.push(a),this.folderItems=this.folderItems.filter((e=>e.id!=a.ReportFolder.id))}if(this.folderItems.length>0&&2!=this.selectedFilter)for(let e of this.folderItems)e.createdUser&&!this.quickSearchTriggered&&t.push({id:e.id,name:e.name,icon:this.sectionIcons[e.name]?this.sectionIcons[e.name]:"oxd-folder",predefined:e.predefined,deletable:e.deletable,editable:e.editable,createdUser:e.createdUser,reports:[]});t.forEach((e=>{let t=e.reports.sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0}));e["reports"]=[],e["reports"]=t})),t=t.sort((function(e,t){return"Other Reports"!=e.name&&"Other Reports"!=t.name?Number(t.predefined)-Number(e.predefined):"Other Reports"!=e.name&&"Other Reports"==t.name?-1:1})),this.sections=t,this.allSections=this.sections}else if(e.length>0&&4==this.selectedFilter)this.recentReports=e;else{let e=[];if(this.folderItems.length>0&&2!=this.selectedFilter)for(let t of this.folderItems)!t.createdUser||t.predefined||this.quickSearchTriggered||e.push({id:t.id,name:t.name,icon:this.sectionIcons[t.name]?this.sectionIcons[t.name]:"oxd-folder",predefined:t.predefined,deletable:t.deletable,editable:t.editable,createdUser:t.createdUser,reports:[]});this.sections=e,this.allSections=this.sections}this.loading=!1,this.searching=!1,this.fetchFunctionCalled=!1,this.setAdditionalopeartationsOnFetch(),this.sectionId&&this.viewAllReportsForCategory(this.sectionId)},setAdditionalopeartationsOnFetch(){this.disbleBulkDelete=!1,this.deleteSuccess&&this.viewSinglePageState?(this.stayOnFolder?this.$nextTick((()=>{this.viewAllReportsForCategory(this.sectionId)})):this.viewAllReportsForCategory(this.sectionId),this.deleteSuccess=!1):this.setSinglePageVisiblity(!1),this.deleteRecordIds=[]},setEditableReportTypes(e){this.reportTypes=[];for(let[t,o]of e.entries())o.can_add_report&&this.reportTypes.push({id:t,label:o.label,module:o.module,template:o.template,prefix:o.prefix,folderId:o.folder_id,folderName:o.folder_name,additionalFolders:o.additional_folders})},viewAllReportsForCategory(e){window.scrollTo(0,0),this.toggleAccordionUponSearch(e),this.$nextTick((()=>{const e=this.$refs.searchbox,t=e.children[0].children[0].children[0].children[1];t.focus()}));let t=[];for(let o of this.sections)o.id==e&&(this.selectedSection=o,t.push(o),this.nonDeletableIds=o.reports.filter((e=>{if(!e.deletable)return e})).map((e=>e.id)));this.setSinglePageVisiblity(!0),this.sections=t},getReports(e){e?(this.searching=!0,this.selectedFilter=1,e.id?this.getReportData("",e.id.toString()):this.getReportData(e.name,null),this.toggleAccordionUponSearch(e.ReportFolder?e.ReportFolder.id:e.folderId)):this.getReportData("",null)},quickSearch(e){return new Promise(((t,o)=>{if(e.trim()){let a={useCache:!1,serverFetch:!0},i={reportName:e},l={filter:i};this.ngServices.webservice.get("reports",l,a).then((e=>{let o=Yp.getDuplicateReportsFiltered(e.data.data);const a=o.map((e=>Object.assign(Object.assign({},e),{id:e.id,label:this.$t(e.name)})));t(a)})).catch((()=>{o([])}))}else t([])}))},getRouteParamsProcessed(e,t){return e=e.replace(":module",t.module),e=e.replace(":prefix",t.prefix),e=e.replace(":dataGroup",t.dataGroup),e=e.replace(":template",t.template),e=e.replace(":reportId",t.id.toString()),e=e.replace(":uniqueName",t.uniqueName),e=e.replace(":ohrmReportId",t.ohrmReportId),e},goToReport(e){let t=e.custom_url.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/);if(t&&4===t.length){let a,i=t[1];if(void 0!==t[3]){try{let o=this.getRouteParamsProcessed(t[3],e);a=JSON.parse(o)}catch(o){}"pim"==e.module&&(i="report_view_oxd"),this.ngServices.$state.go(i,a)}else{let o=this.getRouteParamsProcessed(t[0],e);this.ngServices.$location.url(o)}}},getReportUrl(e){let t=e.custom_url.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/);if(t&&4===t.length){let a,i=t[1];if(void 0!==t[3]){try{let o=this.getRouteParamsProcessed(t[3],e);a=JSON.parse(o)}catch(o){}return"pim"==e.module&&(i="report_view_oxd"),this.ngServices.$state.href(i,a)}{let o=this.getRouteParamsProcessed(t[0],e);return o.replace("/noncore","")}}},goToEditReport(e){this.ngServices.$state.go("report_definition",{id:e.id,step:3,templateName:e.template,module:e.module,dataGroup:e.dataGroup,prefix:e.prefix})},dynamicCountBasedString(e,t){let o=e<2?"Report":"Reports";return this.$t(o+" "+t)},confirmationModalDisplay(e,t){t&&(this.sectionId=t.id,this.selectedFolderSection=t),this.selectedReportIds=e,this.selectedSectionReportIds=e.map(Number),this.showConfirmationModal=!0},deleteFolderConfirmationModalDisplay(e){this.sectionId=e,this.showDeleteFolderConfirmationModal=!0},addReportModalDisplay(){this.showAddReportModal=!0},addFolderModalDisplay(){this.editFolderName="",this.showAddFolderModal=!0},confirmationModalAction(e){"delete"===e&&this.deleteReport(),this.showConfirmationModal=!1,this.selectedReportIds=[]},deleteFolderconfirmationModalAction(e){"delete"===e&&this.deleteFolder(),this.showDeleteFolderConfirmationModal=!1,this.selectedReportIds=[]},addNewReportModalAction(e){"string"==typeof e?this.showAddReportModal=!1:e.reportType&&this.ngServices.$state.go("report_definition",{id:null,templateName:e.reportType.template,module:e.reportType.module,dataGroup:null,prefix:e.reportType.prefix,folder:e.reportFolder.id}),this.showAddReportModal=!1,this.quickSearchTriggered=!1},addNewFolderModalAction(e){"string"!==typeof e&&this.ngServices.webservice.call("reportsFolders","POST",e).then((e=>(this.getReportData(null,null),this.getReportFolders(),this.quickSearchTriggered=!1,this.$toast.success({title:this.$t(ye),message:this.$t(be)})))).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(Ee)}))),this.showAddFolderModal=!1},updateFolderModalAction(e){"string"!==typeof e&&this.ngServices.webservice.call("reportFolder/"+Number(this.folderUpdateId),"PATCH",e).then((e=>{let t=e.data.data.name;return this.editFolderNameWithoutReload(t),this.getReportFolders(),this.editFolderName="",this.$toast.success({title:this.$t(ye),message:this.$t(Se)})})).catch((()=>this.$toast.error({title:this.$t(fe),message:this.$t(Ee)}))),this.showAddFolderModal=!1},deleteReport(){const e={data:this.selectedReportIds};this.ngServices.webservice.call("reports","DELETE",e,void 0,void 0,!0).then((()=>(this.$emit("delete-report",e),this.deleteSuccess=!0,this.selectedFolderSection.reports&&(1!=this.selectedFolderSection.reports.length&&this.selectedSectionReportIds.length!=this.selectedFolderSection.reports.length||(this.quickSearchTriggered?(this.deleteSuccess=!1,this.sections=this.allSections,this.viewSinglePageState=!1,this.sections=this.sections.filter((e=>e.id!=this.sectionId))):this.selectedFolderSection.createdUser?2==this.selectedFilter?this.viewSinglePageState=!1:this.stayOnFolder=!0:(this.viewSinglePageState=!1,this.sections=this.allSections))),this.deleteReportsWithoutReload(),this.selectedSectionReportIds=[],this.$toast.success({title:this.$t(ye),message:this.$t(we)})))).catch((()=>(this.selectedSectionReportIds=[],this.stayOnFolder=!1,this.$toast.error({title:this.$t("Error"),message:this.$t("Error on processing the request")}))))},deleteFolder(){const e={id:this.sectionId};this.ngServices.webservice.call("reportsFolders","DELETE",e,void 0,void 0,!0).then((()=>(this.deleteFolderWithoutReload(),this.$emit("delete-report",e),this.viewSinglePageState=!1,this.deleteSuccess=!0,this.$toast.success({title:this.$t(ye),message:this.$t(we)})))).catch((()=>this.$toast.error({title:this.$t("Error"),message:this.$t("Error on processing the request")})))},deleteReportsWithoutReload(){this.sections.forEach((e=>{let t=e.reports.filter((e=>!this.selectedSectionReportIds.includes(Number(e.id))));e["reports"]=[],e["reports"]=t})),this.sections=this.sections.filter((e=>e.createdUser||e.reports.length>0)),this.quickSearchTriggered&&(this.allSections=this.sections),4==this.selectedFilter&&(this.recentReports=this.recentReports.filter((e=>!this.selectedSectionReportIds.includes(Number(e.id))))),this.setAdditionalopeartationsOnFetch(),this.getReportFolders()},deleteFolderWithoutReload(){this.viewSinglePageState&&(this.viewSinglePageState=!1,this.sections=this.allSections);let e=this.sections.filter((e=>e.id==this.sectionId));this.sections=this.sections.filter((e=>e.id!=this.sectionId));let t=!1;if(e[0].reports.length>0&&(e[0].reports.forEach((e=>{e.folderId=this.otherReportsFolderId})),this.sections.forEach((o=>{"Other Reports"==o.name&&(t=!0,o.reports.push.apply(o.reports,e[0].reports))})),!t)){const t={createdUser:this.otherReportsFolderCreatedUser,id:this.otherReportsFolderId,deletable:"false",editable:"false",icon:"oxd-folder",name:"Other Reports",predefined:!0,reports:e[0].reports};this.sections.push(t)}this.allSections=this.sections,this.getReportFolders(),this.setAdditionalopeartationsOnFetch()},editFolderNameWithoutReload(e){this.sections.forEach((t=>{t.id==this.folderUpdateId&&(t.name=e)}))},toggleAccordionUponSearch(e){const t=this.$refs[`accordionItem${e}`];t&&t[0]&&(t[0].isOpen=!0)},sidePanelListOnSelect(e){this.selectedFilter=e.id,this.getReportData(null,null),this.quickSearchTriggered=!1,this.sectionId=0},getReportFolders(){this.reportTypes.length>0&&this.ngServices.webservice.get("reportsFolders","GET",{}).then((e=>{let t=e.data.data;this.reportFolders=this.getNonPredefinedReportFolders(t),this.folderNameSet=e.data.data.map((e=>e.name.toLowerCase()))})).catch((()=>this.$toast.error({title:this.$t("Error"),message:this.$t("Error on processing the request")})))},getNonPredefinedReportFolders(e){let t=[];for(let[,o]of e.entries())o.predefined||(o.label=o.name,t.push(o));return t},viewAllReportsForFolder(e){this.selectedFilter=1,this.fetchReports(null,null),this.sectionId=e,this.loading=!0}},data(){return{sections:[],selectedSection:{},selectedFolderSection:{},allSections:[],selected:null,sectionIcons:{},showConfirmationModal:!1,showAddReportModal:!1,showAddFolderModal:!1,moveToFilter:!1,stayOnFolder:!1,viewSinglePageState:!1,showDeleteFolderConfirmationModal:!1,disbleBulkDelete:!1,folderNameSet:[],editFolderName:"",deleteSuccess:!1,sectionId:0,folderItems:[],selectedAll:!1,loading:!0,searching:!1,nonDeletableIds:[],checkIcon:"check",deleteRecordIds:[],selectedReportIds:[],selectedSectionReportIds:[],reportTypes:[],moduleInfo:[],isLeftPanelOpen:!0,folderUpdateId:0,selectedFilter:1,otherReportsFolderCreatedUser:!1,otherReportsFolderId:0,fetchFunctionCalled:!1,quickSearchTerm:null,quickSearchTriggered:!1,reportFolders:[],recentReports:[],configurations:{table:{leftPanel:{visible:!0,header:{visible:!0,button:{props:{label:this.$t("New Report"),displayType:"secondary",size:"long",iconName:"oxd-add"}},secondaryButton:{props:{label:this.$t("New Folder"),icon:"oxd-new-folder",size:"extra-large"}}}}}},dataObj:{stages:[{id:1,label:this.$t("All Reports"),iconName:"oxd-all-reports",tooltip:this.$t("All Reports")},{id:2,label:this.$t("Standard Reports"),iconName:"oxd-standard-reports",tooltip:this.$t("Standard Reports")},{id:3,label:this.$t("My Reports"),iconName:"oxd-my-reports",tooltip:this.$t("My Reports")},{id:4,label:this.$t("Recent Reports"),iconName:"oxd-recent-reports",tooltip:this.$t("Recent Reports")}],modalState:!1}}},mounted(){this.getReportData(null,null),this.getReportFolders()}});const Tv=(0,Re.Z)(Dv,[["render",yp],["__scopeId","data-v-5da71fee"]]);var Pv=Tv;const Vv={class:"reports-schedule-container"};function Bv(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-list"),s=(0,i.resolveComponent)("delete-confirmation-modal"),d=(0,i.resolveDirective)("set-tab-focus-to-first-element");return(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createElementBlock)("div",Vv,[(0,i.createVNode)(r,{ref:"scheduleListRef",configurations:e.configs,"list-items":e.items,"list-highlightRows":e.highlightRows,"whole-records-count":e.wholeRecordsCount,"filtered-total-records-count":e.filteredTotalRecordsCount,pagination:e.pagination,"quick-search-options":e.shedulesQuickSearch,"side-panel-list":e.stages,"selected-list-item-id":e.selectedStageId,quickSearchKeyWord:e.quickSearchKeyWord,"onDrawer:show":e.drawerShow,"onUpdate:order":e.tableSort,"onUpdate:selected":e.tableSelect,"onSidePanelList:onHeaderBtnClick":e.toggleAddSchedulePage,"onSidePanelList:onSelect":e.selectStage,"onQuickSearch:onSelect":e.scheduleQuickSearchSelect,"onQuickSearch:onClear":e.scheduleQuickSearchClear,"onQuickSearch:onSearch":e.scheduleQuickSearchKeywordSearch,"onPagination:onPrevious":e.selectPreviousPage,"onPagination:onNext":e.selectNextPaginate,"onPagination:onSelectPage":e.selectExactPage,"onPagination:onSelectPerPage":e.selectPerPage,onDeleteSchedules:t[0]||(t[0]=t=>e.setDeleteShedulesModalVisiblity(!0)),"is-list-loading":e.loadingReportSchedules},null,8,["configurations","list-items","list-highlightRows","whole-records-count","filtered-total-records-count","pagination","quick-search-options","side-panel-list","selected-list-item-id","quickSearchKeyWord","onDrawer:show","onUpdate:order","onUpdate:selected","onSidePanelList:onHeaderBtnClick","onSidePanelList:onSelect","onQuickSearch:onSelect","onQuickSearch:onClear","onQuickSearch:onSearch","onPagination:onPrevious","onPagination:onNext","onPagination:onSelectPage","onPagination:onSelectPerPage","is-list-loading"]),e.deleteModalState?((0,i.openBlock)(),(0,i.createBlock)(s,{key:0,onConfirmationModalAction:t[1]||(t[1]=t=>e.deleteFolderconfirmationModalAction(t))},{messageLine1:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("The selected Schedule(s) will be permanently deleted.")),1)])),messageLine2:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Are you sure you want to continue?")),1)])),_:1})):(0,i.createCommentVNode)("",!0)])),[[d]])}class Iv{constructor(e,t,o){var a,l;this._app=(0,i.getCurrentInstance)(),this._baseUrl=e,this._apiSection=t,(null===(a=this._app)||void 0===a?void 0:a.appContext.config.globalProperties.isAdmin)||null===(l=this._app)||void 0===l||l.appContext.config.globalProperties.ngServices.$state.go("403"),this._app=o}getScheduleReports(e){var t;let o={};if((null===e||void 0===e?void 0:e.query)&&(o=Object.assign({},e.query)),(null===e||void 0===e?void 0:e.includes)&&(o=Object.assign(Object.assign({},o),{include:e.includes.join(",")})),null===e||void 0===e?void 0:e.filter){let t;for(t in e.filter){const o=e.filter[t];o||delete e.filter[t]}o=Object.assign(Object.assign({},o),{filter:e.filter})}const a=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return a.webservice.call("scheduleReports","GET",[],o)}getScheduleReport(e,t){var o;let a={};(null===e||void 0===e?void 0:e.query)&&(a=Object.assign({},e.query)),(null===e||void 0===e?void 0:e.includes)&&(a=Object.assign(Object.assign({},a),{include:e.includes.join(",")}));const i=null===(o=this._app)||void 0===o?void 0:o.appContext.config.globalProperties.ngServices;return i.webservice.call("scheduleReport/"+t,"GET",[],a)}deleteSelected(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.call("scheduleReports","DELETE",{scheduleList:e})}deleteConnection(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.call("fileTransferConnections","DELETE",{ids:[e]})}getReportTitles(){var e;const t={filter:{scheduleReports:"true"}},o=null===(e=this._app)||void 0===e?void 0:e.appContext.config.globalProperties.ngServices;return o.webservice.get("reports",t,{})}getFillEmptyRowStatus(e){var t;const o={include:"fillEmptyRowConfigs"},a=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return a.webservice.call("reports/"+e,"GET",[],o)}getScheduleFTPConnections(){var e;const t=null===(e=this._app)||void 0===e?void 0:e.appContext.config.globalProperties.ngServices;return t.webservice.get("fileTransferConnections",{},{})}getTimeZones(){var e;const t=null===(e=this._app)||void 0===e?void 0:e.appContext.config.globalProperties.ngServices;return t.webservice.get("standardTimeZones",{},{})}getFrequincies(){var e;const t=null===(e=this._app)||void 0===e?void 0:e.appContext.config.globalProperties.ngServices;return t.webservice.get("scheduleReports/frequency",{},{})}createSchedule(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return(null===e||void 0===e?void 0:e.id)?o.webservice.call("scheduleReport/"+e.id,"PATCH",e):o.webservice.call("scheduleReports","POST",e)}addNewConnection(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.call("fileTransferConnections","POST",e)}updateConnection(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.call("fileTransferConnection/"+(null===e||void 0===e?void 0:e.id),"PATCH",e)}logout(){var e;const t=null===(e=this._app)||void 0===e?void 0:e.appContext.config.globalProperties.ngServices;return t.webservice.logout()}getLocations(){var e;const t=null===(e=this._app)||void 0===e?void 0:e.appContext.config.globalProperties.ngServices;return t.webservice.get("locations",{},{})}getLoggedInEmployee(e){var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.ngServices;return o.webservice.get("employees/"+e,{},{})}}const Lv={class:"oxd-bordered-cell-text"};function Fv(e,t,o,a,l,n){return(0,i.openBlock)(),(0,i.createElementBlock)("div",Lv,(0,i.toDisplayString)(e.$t(e.value)),1)}var zv=(0,i.defineComponent)({name:"bordered-cell-component",props:{value:{type:String}}});const Mv=(0,Re.Z)(zv,[["render",Fv],["__scopeId","data-v-66e43d22"]]);var Ov=Mv;const Rv={class:"oxd-pill-cell-text"};function _v(e,t,o,a,l,n){return(0,i.openBlock)(),(0,i.createElementBlock)("div",Rv,(0,i.toDisplayString)(e.$t(e.value)),1)}var $v=(0,i.defineComponent)({name:"pill-cell-component",props:{value:{type:String}}});const jv=(0,Re.Z)($v,[["render",_v],["__scopeId","data-v-2aef6864"]]);var Uv=jv;const Zv="api/scheduleReports",Hv="api/reportsTimezones",qv="api/scheduleReports/frequency",Gv="api/employees",Wv={visible:!0,header:{visible:!0,button:{props:{label:"Create Schedule",displayType:"secondary",size:"long",iconName:"oxd-add",iconSize:"small",disabled:!0,disabledTooltip:""},events:[{type:"click",identifier:"get-add-candidates-modal"}]}},body:{button:{labelMini:"",doubleLineLabel:!1,label:"",displayType:"",style:{}},dropdown:{style:{}},buttonSecondary:{visible:!1,icon:"",tooltip:"",style:""}},list:{visible:!0,bubble:{visible:!0}}};var Kv=Wv;const Qv=ce(),Jv={visible:!0,listRecordCount:{singleTerm:Qv("Schedule"),multiTerm:Qv("Schedules")},bulkActions:[{type:"oxd-button",props:{label:"Delete Selected",size:"medium",displayType:"label-danger",iconName:"oxd-trash",iconSize:"extra-small",flow:"bottom"},class:"oxd-btn-danger-custom",events:[{type:"click",identifier:"delete-schedules"}]}],quickSearch:{visible:!0,placeholder:"Search",clear:!1,style:{width:"261px"},button:{visible:!0,class:"quick-search-btn",style:{"background-color":"rgba(100, 114, 140, 0.1)",padding:"0","min-width":"unset","min-height":"unset",width:"28px",height:"28px"},props:{name:"oxd-search",displayType:"label-info"}}},singleActions:[]};var Yv=Jv;const Xv=[{name:"name",title:"Schedule Name",sortField:"name",initialSortOrder:"DEFAULT",style:{flex:"25%","min-width":"90px","margin-right":"0"},cellType:"oxd-table-cell-link",cellProps:{link:"editScheduleURL",target:"_self"}},{name:"startTime",title:"Start Date",sortField:"startDate",initialSortOrder:"DEFAULT",style:{flex:"15%","min-width":"90px","margin-right":"0"},cellType:"oxd-table-cell-date",cellProps:{}},{name:"action",slot:"footer",title:"Status",sortField:"status",initialSortOrder:"ASC",style:{flex:"10%","min-width":"90px","margin-right":"0"},cellType:"oxd-table-cell-actions",cellRenderer:"statusRenderer"},{name:"action",slot:"footer",title:"Frequency",sortField:"frequency",initialSortOrder:"DEFAULT",class:"frequency-column",sortIcons:{asc:"oxd-frequency-sort-asc",desc:"oxd-frequency-sort-desc"},style:{flex:"10%"},cellType:"oxd-table-cell-actions",cellRenderer:"frequencyRenderer"},{name:"createdByName",title:"Created By",style:{flex:"15%","min-width":"90px","margin-right":"0"}},{name:"action",slot:"footer",style:{flex:"7%","max-width":"100px","margin-right":"0"},class:"actions-column",cellType:"oxd-table-cell-actions",cellRenderer:"actionsRenderer"}];var eh=Xv;const th={leftPanel:Kv,topBar:Yv,headers:eh,selectable:!0,addable:!0,pagination:{maxPageLimit:5}};var oh=th;const ah={visible:!0};var ih=ah,lh={table:oh,drawer:ih};class nh{constructor(e){this._app=(0,i.getCurrentInstance)(),this._t=ce(),this._dataGroupPermissionService=new Aa,this._app=e,this._http=new Iv("","",this._app)}augmentListSpecificSchemaChanges(e,t){e.value.table.addable=t.create,e.value.table.selectable=t.delete,e.value.table.leftPanel&&(e.value.table.leftPanel.header.visible=!0)}getDataGroupPermissions(e){return this._dataGroupPermissionService.getDataGroupPermissions(e)}getReportSchedulesList(){return new Promise(((e,t)=>{try{const t={includes:["TimeZone"]};this._http.getScheduleReports(t).then((t=>{e(t)}))}catch(o){t(o)}}))}getScheduleFTPConnections(){return new Promise(((e,t)=>{try{this._http.getScheduleFTPConnections().then((t=>{e(t)}))}catch(o){t(o)}}))}getReportTitles(){return new Promise(((e,t)=>{try{this._http.getReportTitles().then((t=>{let o=[];t.data&&(o=t.data.data.map((e=>{var t;const o=["csv"],a=null===(t=e.custom_url)||void 0===t?void 0:t.includes("leave.balance_report(");return a||o.push("pdf"),{id:e.id,label:this._t(e.name),exportOptions:o}}))),e(o)}))}catch(o){t(o)}}))}getFillEmptyRowStatus(e){return new Promise(((t,o)=>{try{this._http.getFillEmptyRowStatus(e).then((e=>{t(e)})).catch((e=>{o(e)}))}catch(a){o(a)}}))}getExportOptionsForReport(e,t){if(e){const o=t.find((t=>{if(Number(t.id)===Number(e))return t}));return o?o.exportOptions:[]}return[]}getListSchema(){var e;const t=null===(e=this._app)||void 0===e?void 0:e.appContext.config.globalProperties.ngServices,o=(0,i.ref)(JSON.parse(JSON.stringify(lh)));return this.getDataGroupPermissions({dataGroup:"schedule_report"}).then((e=>{const a=e;a.read?this.augmentListSpecificSchemaChanges(o,a):t.$state.go("403")})),o}getEmployeeRecipients(){var e;const t={filter:{has_work_email:1},includeSelf:!1,include:"photo",fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId,photo","page[offset]":"0",sort:"fullName"},o=null===(e=this._app)||void 0===e?void 0:e.appContext.config.globalProperties.ngServices;return o.webservice.get("employees",t,{})}getCreatedByName(e){var t,o,a,i;if(null===(o=null===(t=e.user)||void 0===t?void 0:t.employee)||void 0===o?void 0:o.empNumber){const t=null===(a=e.user)||void 0===a?void 0:a.employee;return ge.getEmployeeName(t.firstName,t.middleName,t.lastName,Boolean(t.terminationId))}return null===(i=e.user)||void 0===i?void 0:i.userName}getScheduleReport(e){return new Promise(((t,o)=>{try{const o={includes:["Frequency","Report","TimeZone","Connection","User"]};let a={};e?this._http.getScheduleReport(o,e).then((o=>{var i,l,n,r,s,d,c,m;if(e&&o.data&&o.data.data){const e=o.data.data,t="Activated"==e.status?{id:"1",label:"Activated"}:{id:"0",label:"Deactivated"},u={exportFileType:"1"==e.exportFileType?"csv":"pdf",fillEmptyRows:{available:null===(l=null===(i=e.configurations)||void 0===i?void 0:i.fillEmptyRows)||void 0===l?void 0:l.available,enabled:null===(r=null===(n=e.configurations)||void 0===n?void 0:n.fillEmptyRows)||void 0===r?void 0:r.enabled}},p="1"==e.scheduleType?"email":"upload",v=e.employeeRecipients,h=null===(s=this._app)||void 0===s?void 0:s.appContext.config.globalProperties.empNo,g=v.findIndex((e=>e.id==h)),y=[];-1!==g&&y.push(1);const f=v.filter((e=>e.id!==h));a=Object.assign(Object.assign({},e),{scheduleName:e.name,status:t,timeZone:{id:e.timeZone.name,label:"("+e.timeZone.prefix+") "+this._t(e.timeZone.label),offset:e.timeZone.offset,prefix:e.timeZone.prefix},frequency:{id:e.frequency.id,label:e.frequency.name},startDate:e.startTime.split(" ")[0],hours:{id:e.startTime.split(" ")[1].split(":")[0],label:e.startTime.split(" ")[1].split(":")[0]},minutes:{id:e.startTime.split(" ")[1].split(":")[1],label:e.startTime.split(" ")[1].split(":")[1]},report:{id:e.report.reportId,label:e.report.reportName},attachmentType:u,scheduleType:{id:p,label:p},ftpPath:e.connectionPath,startTime:e.startTime.split(" ")[0],startTimeDate:e.startTime,gdprConsent:!0,emailRecipients:{enteredEmails:e.emailRecipients},recipientsEmployees:f,includeMe:y,emailSendingMethod:e.emailSendingMethod}),(null===(d=e.connection)||void 0===d?void 0:d.id)&&(a.connectionId={id:parseInt(null===(c=e.connection)||void 0===c?void 0:c.id),label:null===(m=e.connection)||void 0===m?void 0:m.name})}t(a)})):t(a)}catch(a){o(a)}}))}}const rh={class:"oxd-empty-cell"};function sh(e,t,o,a,l,n){return(0,i.openBlock)(),(0,i.createElementBlock)("div",rh)}var dh=(0,i.defineComponent)({name:"empty-cell-component",props:{value:{type:String}}});const ch=(0,Re.Z)(dh,[["render",sh],["__scopeId","data-v-33d39e6c"]]);var mh=ch,uh=(0,i.defineComponent)({name:"ScheduledReports",components:{"oxd-list":Bd.Z,"delete-confirmation-modal":kr},directives:{"set-tab-focus-to-first-element":Sr.Z},setup:function(){var e,t,o,a,l,n,r,s,d,c,m,u,p,v;const h=(0,Gd.oR)(),g=(0,i.getCurrentInstance)(),y=null===g||void 0===g?void 0:g.appContext.config.globalProperties.empNo,f=(0,i.ref)([]),b=(0,i.ref)([]),C=(0,i.ref)(null),S=(0,i.ref)(0),w=(0,i.ref)(0),E=(0,i.ref)(!1),k=(0,i.ref)(!1),x=(0,i.ref)([]),N=(0,i.ref)({rowIndexes:[],type:em.Ox}),A=null===g||void 0===g?void 0:g.appContext.config.globalProperties.$toast,D=null===g||void 0===g?void 0:g.appContext.config.globalProperties.ngServices,T=ce();let P=(0,i.ref)(!1);const V=(0,i.ref)(0),B=(0,i.ref)(!1),I=(0,i.ref)(null),L=(0,i.ref)(null),F=(0,i.ref)(null===g||void 0===g?void 0:g.appContext.config.globalProperties.userName),z=(0,i.ref)({read:!1,create:!1,update:!1,delete:!1}),M=e=>{E.value=e};(0,i.onBeforeMount)((()=>{I.value=j.value.searchKeyWordValue||j.value.searchKeyWordTerm}));const O=new nh(g),R=O.getListSchema(),_=(0,i.computed)((()=>h.getters["report/appliedFilters"])),$=(0,i.computed)((()=>h.getters["report/appliedQueries"])),j=(0,i.computed)((()=>h.getters["report/searchKeyWordValue"])),U=(0,i.computed)((()=>h.getters["report/modificationValue"])),Z=(0,i.computed)((()=>h.getters["report/newlyAddedScheduleValue"])),H=(0,i.computed)((()=>h.state.report.orderField)),q=(0,i.computed)((()=>h.state.report.orderBy)),G=(0,i.computed)((()=>({limit:h.state.report.limit,pages:[10,20,50,100],currentPage:h.state.report.currentPage}))),W=()=>{O.getDataGroupPermissions({dataGroup:"schedule_report"}).then((e=>{z.value=e}))};W();const K=()=>{const e=new Iv("/",Zv,g);let t={filter:_.value,includes:["Frequency","Report","TimeZone","User"],query:$.value};k.value=!0,e.getScheduleReports(t).then((e=>{var t,o;if(e.data){f.value=e.data.data.map((e=>Y(e))),w.value=e.data.meta.count,B.value=e.data.meta.canCreate,null==L.value||""==L.value?(pe.value.table.leftPanel.header.button.props.disabled=!0,pe.value.table.leftPanel.header.button.props.disabledTooltip="You cant create a Schedule since your work email is not set"):B.value?pe.value.table.leftPanel.header.button.props.disabled=!1:(pe.value.table.leftPanel.header.button.props.disabled=!0,pe.value.table.leftPanel.header.button.props.disabledTooltip="All the time slots have been utilized");let a=parseInt(null!==(t=e.data.meta.statusCount.Activated)&&void 0!==t?t:0),i=parseInt(null!==(o=e.data.meta.statusCount.Deactivated)&&void 0!==o?o:0);x.value=[{id:0,typeId:"-1",label:"All",count:a+i,style:{backgroundColor:"#d1dff6",color:"#1f6ffd"},displayOrder:1},{id:1,typeId:"1",label:"Activated",count:a,style:{backgroundColor:"#e1f8e0",color:"#74cb1e"},displayOrder:2},{id:2,typeId:"2",label:"Deactivated",count:i,style:{backgroundColor:"#f9e3e9",color:"#e74432"},displayOrder:3}]}if(N.value.rowIndexes=[],V.value="Deactivated"==_.value.status?2:"Activated"==_.value.status?1:0,U.value){const e=f.value.findIndex((e=>e.id==U.value.modifiedId));if(e>=0){let t=f.value[e];f.value.splice(e,1),f.value.unshift(t),N.value.rowIndexes.push(0)}else if(Z.value){N.value.rowIndexes.push(0);const e=Y(Z.value);e.createdByName=F.value,f.value.unshift(e)}}k.value=!1,(0,i.nextTick)((()=>{h.dispatch("report/changeModification",null),h.dispatch("report/changeAddedSchedule",null)}))})).catch((()=>{k.value=!1}))},Q=()=>{const e=new Iv("/",Gv,g);k.value=!0,e.getLoggedInEmployee(y).then((e=>{e.data&&(L.value=e.data.data.emp_work_email,F.value=ge.getEmployeeName(e.data.data.firstName,e.data.data.middleName,e.data.data.lastName,Boolean(e.data.data.termination_id)),K())})).catch((()=>{L.value="",K()}))};Q();const J=()=>{D.$state.go("reports_and_analytics.schedule_report")},Y=e=>{var t,o,a;let i=`#/reports_and_analytics/scheduled_report/scheduleId/${e.id}`;return Object.assign(Object.assign({},e),{editable:"1"!==(null===(t=e.user)||void 0===t?void 0:t.purged)&&!(null===(a=null===(o=e.user)||void 0===o?void 0:o.employee)||void 0===a?void 0:a.terminationId),frequency:T(e.frequency.name),startTime:e.startTime.split(" ")[0],startTimeDate:e.startTime,createdByName:O.getCreatedByName(e),editScheduleURL:i})},X=e=>{h.dispatch("report/changeFilterField",{field:"status",value:"0"==e.id?null:e.label}),V.value=e.id,h.dispatch("report/jumpToPage",1),K()},ee=e=>{P.value=e},te=e=>{"delete"===e&&oe(),P.value=!1},oe=()=>{const e=new Iv("/",Zv,g),t=b.value.map((e=>e.id));e.deleteSelected(t).then((()=>{K(),A.success({title:T(ye),message:T(we)})})).catch((()=>{A.error({title:T(fe),message:T(xe)})}))},ae=(e,t,o,a)=>{const i={component:"oxd-icon-button",props:{name:"oxd-trash",size:"small",tooltip:"Delete",onClick:()=>{b.value=[a],P.value=!0}}},l={component:mh},n={component:"oxd-icon-button",props:{size:"small",name:"oxd-edit",tooltip:T("Edit")},onClick(e){D.$state.go("reports_and_analytics.schedule_report",{scheduleId:e.id})}};let r=[];return z.value.delete&&r.push(i),z.value.update&&a.editable&&r.push(n),0===r.length&&r.push(l),{props:{header:{cellConfig:Object.assign({},r)},class:"oxd-action-render-button-visibility-on-hover"}}},ie=(e,t,o,a)=>{const i=JSON.parse(JSON.stringify(a)),l={component:Ov,props:{value:i.status}};return{props:{header:{cellConfig:Object.assign({status:l})}}}},le=(e,t,o,a)=>{const i=JSON.parse(JSON.stringify(a)),l={component:Uv,props:{value:i.frequency}};return{props:{header:{cellConfig:Object.assign({frequency:l})}}}},ne=null===(o=null===(t=null===(e=R.value)||void 0===e?void 0:e.table)||void 0===t?void 0:t.headers)||void 0===o?void 0:o[2];ne&&"string"===typeof ne.cellRenderer&&(ne.cellRenderer=ie);const re=null===(n=null===(l=null===(a=R.value)||void 0===a?void 0:a.table)||void 0===l?void 0:l.headers)||void 0===n?void 0:n[3];re&&"string"===typeof re.cellRenderer&&(re.cellRenderer=le);const se=null===(d=null===(s=null===(r=R.value)||void 0===r?void 0:r.table)||void 0===s?void 0:s.headers)||void 0===d?void 0:d[5];se&&"string"===typeof se.cellRenderer&&(se.cellRenderer=ae);for(let i=0;i<(null===(c=R.value)||void 0===c?void 0:c.table.headers.length);i++){const e=null===(m=R.value)||void 0===m?void 0:m.table.headers[i];let t="start_date"==H.value?"startDate":H.value;e.sortField===t?e.initialSortOrder=q.value:e.sortField&&e.initialSortOrder&&(e.initialSortOrder="DEFAULT")}const de=null===g||void 0===g?void 0:g.appContext.config.globalProperties.$dateFormat,me=null===g||void 0===g?void 0:g.appContext.config.globalProperties.$locale,ue=null===(v=null===(p=null===(u=R.value)||void 0===u?void 0:u.table)||void 0===p?void 0:p.headers)||void 0===v?void 0:v[1];ue&&(ue.cellProps={displayFormat:de,locale:me});const pe=(0,i.computed)((()=>R.value)),ve=e=>{for(const t in e){const o=e[t];if("DEFAULT"!==o){const e=t.replace(/[A-Z]/g,(e=>`_${e.toLowerCase()}`));h.dispatch("report/changeSortField",e),h.dispatch("report/changeSortOrder",o),h.dispatch("report/jumpToPage",1),K()}}},he=e=>{const t=new Iv("/",Zv,g),o={scheduleName:e},a={filter:o,includes:["Frequency"]};return new Promise(((e,o)=>{t.getScheduleReports(a).then((t=>{const o=t.data.data.map((e=>Object.assign(Object.assign({},e),{id:parseInt(e.id),label:e.name,candidateName:e.name})));e(o)})).catch((()=>{o([])}))}))},be=e=>{V.value=0,h.dispatch("report/changeFilterField",{field:"scheduleName",value:e}),h.dispatch("report/changeFilterField",{field:"status",value:null}),h.dispatch("report/jumpToPage",1),K()},Ce=e=>{V.value=0,h.dispatch("report/changeFilterField",{field:"scheduleQuickSearch",value:[e]}),h.dispatch("report/changeFilterField",{field:"status",value:null}),h.dispatch("report/jumpToPage",1),K()},Se=()=>{h.dispatch("report/changeFilterField",{field:"scheduleQuickSearch",value:[]}),h.dispatch("report/changeFilterField",{field:"scheduleName",value:null}),I.value=null},Ee=e=>{b.value=f.value.filter(((t,o)=>e.indexOf(o)>-1))},ke=()=>{h.dispatch("report/previousPage"),K(),window.scrollTo(0,0)},Ne=()=>{h.dispatch("report/nextPage"),K(),window.scrollTo(0,0)},Ae=e=>{h.dispatch("report/jumpToPage",e.page),K(),window.scrollTo(0,0)},De=e=>{h.dispatch("report/changeLimit",e.label),h.dispatch("report/jumpToPage",1),K(),window.scrollTo(0,0)};return{configs:pe,scheduleListRef:C,items:f,wholeRecordsCount:S,filteredTotalRecordsCount:w,drawerShow:M,tableSort:ve,tableSelect:Ee,selectPreviousPage:ke,selectNextPaginate:Ne,selectExactPage:Ae,selectPerPage:De,selectStage:X,loadingReportSchedules:k,stages:x,selectedStageId:V,pagination:G,highlightRows:N,deleteModalState:P,selectedSchedules:b,deleteFolderconfirmationModalAction:te,setDeleteShedulesModalVisiblity:ee,toggleAddSchedulePage:J,shedulesQuickSearch:he,scheduleQuickSearchKeywordSearch:be,scheduleQuickSearchSelect:Ce,scheduleQuickSearchClear:Se,quickSearchKeyWord:I}}});const ph=(0,Re.Z)(uh,[["render",Bv],["__scopeId","data-v-11e4f88c"]]);var vh=ph;function hh(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-schema-form"),s=(0,i.resolveComponent)("form-card"),d=(0,i.resolveComponent)("multiple-recipient-error-modal"),c=(0,i.resolveComponent)("ohrm-layout"),m=(0,i.resolveComponent)("add-new-ftp-connection"),u=(0,i.resolveComponent)("oxd-progress-bar");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(c,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(s,null,{title:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.modalTitle)),1)])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(r,(0,i.mergeProps)({schema:e.schema,model:e.model,"onUpdate:model":t[0]||(t[0]=t=>e.model=t)},e.$attrs,{onSubmitValid:e.createSchedule}),null,16,["schema","model","onSubmitValid"])])),_:1}),e.showMultipleRecipientErrorModal?((0,i.openBlock)(),(0,i.createBlock)(d,{key:0,style:{width:"450px"},onConfirmationModalAction:t[1]||(t[1]=t=>e.multipleRecipientErrorModalAction(t))})):(0,i.createCommentVNode)("",!0)])),_:1}),e.connectionModalStatus?(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(m,{key:0,onAddNewConnection:t[2]||(t[2]=t=>e.addNewConnectionModalAction(t)),"onUpdate:show":e.toggleAddConnectionModal,onSubmitValid:e.addNewConnection},null,8,["onUpdate:show","onSubmitValid"])),[[i.vShow,!e.progressModalStatus]]):(0,i.createCommentVNode)("",!0),(0,i.createVNode)(u,{show:e.progressModalStatus,title:e.$t("Validating Connection")},null,8,["show","title"])],64)}function gh(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,{type:"select",options:e.options,"onUpdate:modelValue":e.selectedTimeZone,showEmptySelector:!1},null,8,["options","onUpdate:modelValue"])}var yh=(0,i.defineComponent)({name:"TimezoneDropdown",components:{"oxd-input-field":lo.Z},props:{mode:{type:String,default:"read"}},setup(e){const t=(0,Gd.oR)(),o=(0,i.ref)([]),a=(0,i.getCurrentInstance)(),l=ce(),n=e=>{t.dispatch("report/changeTimeZoneValue",e)};return(0,i.onMounted)((()=>{const e=new Iv("/",Hv,a);e.getTimeZones().then((e=>{if(e.data){o.value=e.data.data.map((e=>({id:e.name,label:"("+e.prefix.concat(") ",l(e.label)),offset:e.offset,prefix:e.prefix})));let a=(new Date).getTimezoneOffset();a=0==a?0:-a;(a/60).toFixed(2);let i=Intl.DateTimeFormat().resolvedOptions().timeZone;const n=e.data.data.filter((e=>e.name==i||e.alternativeKeys&&e.alternativeKeys.includes(i)?e:void 0)).map((e=>({id:e.name,label:"("+e.prefix.concat(") ",l(e.label)),offset:e.offset,prefix:e.prefix})));t.dispatch("report/changeTimeZoneValue",n[0])}}))})),{options:o,selectedTimeZone:n}}});const fh=(0,Re.Z)(yh,[["render",gh]]);var bh=fh;function Ch(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,{type:"multiselect",options:e.options,placeholder:"HH",showEmptySelector:!1},null,8,["options"])}var Sh=(0,i.defineComponent)({name:"HourDropdown",components:{"oxd-input-field":lo.Z},props:{mode:{type:String,default:"read"},options:{type:Array,default:()=>{}}}});const wh=(0,Re.Z)(Sh,[["render",Ch]]);var Eh=wh;function kh(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,{type:"multiselect",options:e.options,placeholder:"MM",showEmptySelector:!1},null,8,["options"])}var xh=(0,i.defineComponent)({name:"MinuteDropdown",components:{"oxd-input-field":lo.Z},props:{mode:{type:String,default:"read"},options:{type:Array,default:()=>{}}}});const Nh=(0,Re.Z)(xh,[["render",kh]]);var Ah=Nh;const Dh={class:"--span-column-4"},Th={class:"--span-column-3",style:{"word-break":"break-word"}},Ph={class:"oxd-sheet-title-action"},Vh={style:{"padding-right":"0.3rem"}},Bh={class:"oxd-sheet-content"};function Ih(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-text"),s=(0,i.resolveComponent)("oxd-icon-button"),d=(0,i.resolveComponent)("oxd-grid"),c=(0,i.resolveComponent)("oxd-form-row"),m=(0,i.resolveComponent)("oxd-divider"),u=(0,i.resolveComponent)("oxd-sheet"),p=(0,i.resolveComponent)("confirmation-modal"),v=(0,i.resolveComponent)("add-new-ftp-connection"),h=(0,i.resolveComponent)("oxd-progress-bar");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(c,{style:{"padding-left":"0.6rem","padding-right":"0.6rem","padding-bottom":"0.6rem"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{cols:4,style:{width:"100%"}},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Dh,[(0,i.createVNode)(u,{type:"white"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{cols:4,style:{width:"100%","padding-bottom":"0.5rem"}},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Th,[(0,i.createVNode)(r,{class:"oxd-sheet-title"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.connection.label),1)])),_:1})]),(0,i.createElementVNode)("div",Ph,[(0,i.createElementVNode)("div",Vh,[e.dataGroupPermissions.delete?((0,i.openBlock)(),(0,i.createBlock)(s,{key:0,name:"oxd-trash",size:"xx-small",tooltip:e.connection.inUse?e.$t("This connection is already in use by schedule(s)."):e.$t("Delete"),style:{"padding-left":"0.3rem"},disabled:e.connection.inUse,showTooltipWhenDisabled:!0,onClick:t[0]||(t[0]=t=>e.showConfirmationModal(e.connection.id)),onConfirmationModalAction:t[1]||(t[1]=t=>e.deleteConnectionconfirmationModalAction(t))},null,8,["tooltip","disabled"])):(0,i.createCommentVNode)("",!0)]),e.dataGroupPermissions.update?((0,i.openBlock)(),(0,i.createBlock)(s,{key:0,name:"oxd-edit",size:"xx-small",tooltip:e.connection.isEditable?e.$t("Edit"):e.$t("This connection belongs to an inactive employee"),disabled:!e.connection.isEditable,showTooltipWhenDisabled:!0,onClick:t[2]||(t[2]=t=>e.toggleEditConfirmationModal(e.connection))},null,8,["tooltip","disabled"])):(0,i.createCommentVNode)("",!0)])])),_:1})])),_:1}),(0,i.createVNode)(m),(0,i.createElementVNode)("div",Bh,[(0,i.createVNode)(c,{style:{"padding-top":"1rem"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{class:"oxd-sheet-subtitle"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Host")+" :"),1)])),_:1}),(0,i.createVNode)(r,{class:"oxd-sheet-subtitle-info"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.connection.host),1)])),_:1})])),_:1}),(0,i.createVNode)(c,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{class:"oxd-sheet-subtitle"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Port")+" :"),1)])),_:1}),(0,i.createVNode)(r,{class:"oxd-sheet-subtitle-info"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.connection.port),1)])),_:1})])),_:1}),(0,i.createVNode)(c,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{class:"oxd-sheet-subtitle"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Username")+" :"),1)])),_:1}),(0,i.createVNode)(r,{class:"oxd-sheet-subtitle-info"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.connection.user),1)])),_:1})])),_:1}),(0,i.createVNode)(c,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{class:"oxd-sheet-subtitle"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Password")+" :"),1)])),_:1}),(0,i.createVNode)(r,{class:"oxd-sheet-subtitle-info"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(""))])),_:1})])),_:1})])])),_:1})])])),_:1})])),_:1}),e.showDeleteConfirmationModal?((0,i.openBlock)(),(0,i.createBlock)(p,{key:0,onConfirmationModalAction:t[3]||(t[3]=t=>e.deleteConnectionconfirmationModalAction(t))},{messageLine1:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("The selected connection will be permanently deleted.")),1)])),messageLine2:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Are you sure you want to continue?")),1)])),_:1})):(0,i.createCommentVNode)("",!0),e.showEditConfirmationModal?((0,i.openBlock)(),(0,i.createBlock)(p,{key:1,onConfirmationModalAction:t[4]||(t[4]=t=>e.editConnectionconfirmationModalAction(t)),confirmButtonText:"Yes, Edit",confirmButtonIcon:"oxd-edit"},{messageLine1:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.editConnectionConfirmation),1)])),messageLine2:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Are you sure you want to continue?")),1)])),_:1})):(0,i.createCommentVNode)("",!0),e.connectionModalStatus?(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(v,{key:2,connectionIdToEdit:e.connection.id,onAddNewConnection:t[5]||(t[5]=t=>e.addNewConnectionModalAction(t)),"onUpdate:show":e.toggleAddConnectionModal,onSubmitValid:e.addNewConnection},null,8,["connectionIdToEdit","onUpdate:show","onSubmitValid"])),[[i.vShow,!e.progressModalStatus]]):(0,i.createCommentVNode)("",!0),(0,i.createVNode)(h,{show:e.progressModalStatus,title:e.$t("Validating Connection")},null,8,["show","title"])],64)}const Lh={id:null,emp_number:null,connection_type_id:null,name:null,settings:{host:null,port:null,user:null},scheduleCount:""},Fh={startDate:"2022-07-15",attachmentType:{exportFileType:"csv",fillEmptyRows:{available:!1,enabled:!1}},scheduleType:{id:"email",label:"Email"},status:{id:"1",label:"Activated"},recipientsEmployees:[],emailRecipients:[],includeMe:[1],emailSendingMethod:0};function zh(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-schema-form"),s=(0,i.resolveComponent)("form-modal");return(0,i.openBlock)(),(0,i.createBlock)(s,{style:{width:"90%",maxWidth:"500px"}},{title:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.modalTitle)),1)])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(r,(0,i.mergeProps)({schema:e.schema,model:e.model,"onUpdate:model":t[0]||(t[0]=t=>e.model=t)},e.$attrs),null,16,["schema","model"])])),_:1})}function Mh(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,{options:e.options,showEmptySelector:!1,placeholder:"SFTP"},null,8,["options"])}var Oh=(0,i.defineComponent)({name:"connectionTypeDropdown",components:{"oxd-input-field":lo.Z},props:{mode:{type:String,default:"read"}},setup(e){const t=(0,i.ref)([]);return(0,i.onMounted)((()=>{t.value=[{id:"1",label:"sftp"}]})),{options:t}}});const Rh=(0,Re.Z)(Oh,[["render",Mh]]);var _h=Rh;const $h=ce();function jh(e,t,o){return(0,A.mG)(this,void 0,void 0,(function*(){const e=yield t,a=e.data.data,l=(0,i.ref)([]);l.value=o?a.filter((e=>{if(e.id!=o)return e})).map((e=>e.name)):a.map((e=>e.name));const n=o?"Update":"Save";return{name:"addConnectionForm",layout:[{type:"grid",props:{cols:1},children:{default:[{name:"connectionName",label:$h("Connection Name"),type:"input",validators:new Map([["required",Oa],["shouldNotExceedCharLength",$a(100)],["stringShouldNotAlreadyExist",bi(l.value,$h("Already Exists"),!0,!1)]])},{name:"protocol",label:$h("Protocol"),type:"custom",component:(0,i.markRaw)(_h),props:{type:"select",readonly:"true"},style:{width:"25%"}},{name:"host",label:$h("Host"),type:"input",validators:new Map([["required",Oa],["shouldNotExceedCharLength",$a(255)]])},{name:"port",label:$h("Port"),type:"input",validators:new Map([["required",Oa],["numberShouldBeBetweenMinandMaxValue",gi(1,65535)]]),style:{width:"50%"}},{name:"username",label:$h("Username"),type:"input",validators:new Map([["required",Oa],["shouldNotExceedCharLength",$a(255)]])},{name:"password",label:$h("Password"),type:"password",validators:new Map([["required",Oa],["shouldNotExceedCharLength",$a(255)]])}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"divider",style:{margin:"0"}},{type:"action",children:{default:[{name:"required",label:"",type:"custom",component:(0,i.markRaw)(Hd),style:{"margin-right":"auto",padding:"0px"}},{name:"reset",label:$h("Cancel"),type:"button",props:{type:"button",displayType:"ghost"},listeners:{onClick:()=>{this.emit("update:show",!0)}}},{name:"submit",label:$h(n),type:"button",style:{"margin-left":"0.5rem"},props:{type:"submit",displayType:"secondary"}}]},style:{"padding-top":"1.2rem"}}]}}))}var Uh=jh;const Zh="********";var Hh=(0,i.defineComponent)({name:"addConnectionModal",components:{"form-modal":gc,"oxd-schema-form":yc.Z},props:{connectionIdToEdit:{type:Number,default:null}},setup(e,t){const o=(0,i.getCurrentInstance)(),{userFormat:a}=((0,Gd.oR)(),Im()),l=(null===o||void 0===o||o.appContext.config.globalProperties.$toast,ce(),(0,i.ref)("Add New Connection")),n=new nh(o),r=n.getScheduleFTPConnections(),s=(0,i.ref)({});(0,i.onMounted)((()=>(0,A.mG)(this,void 0,void 0,(function*(){if(e.connectionIdToEdit){l.value="Edit Connection";const t=yield r,o=t.data.data;let a=o.filter((t=>{if(t.id==e.connectionIdToEdit)return t})).map((e=>({connection_type_id:e.connection_type_id,id:e.id,connectionName:e.name,host:e.settings.host,port:e.settings.port,username:e.settings.user,password:Zh})))[0];s.value=a}}))));const d=(0,fc.Z)(Uh.call(t,a,r,e.connectionIdToEdit)),c=d.schema;return{model:s,schema:c,modalTitle:l}}});const qh=(0,Re.Z)(Hh,[["render",zh]]);var Gh=qh,Wh=(0,i.defineComponent)({name:"ConnectionDetails",components:{"oxd-sheet":io.Z,"oxd-grid":ll.Z,"oxd-form-row":rl.Z,"oxd-divider":ro.Z,"oxd-progress-bar":ym.Z,"oxd-icon-button":D.Z,"oxd-text":Ii.Z,"confirmation-modal":_d,"add-new-ftp-connection":Gh},emits:["showConfirmation"],methods:{confirmationModalDisplay(e){this.$emit("showConfirmation",e)}},props:{initialModel:{type:Object},permissions:{type:Object}},setup(e,t){const o=(0,Gd.oR)(),a=(0,i.getCurrentInstance)(),l=((0,i.ref)([]),(0,i.ref)(Lh)),n=ce(),r=(0,i.ref)(!1),s=(0,i.ref)(!1),d=(0,i.ref)(""),c=(0,i.ref)(""),m=(0,i.ref)(!1),u=(0,i.ref)(!1),p=(0,i.ref)(),v=null===a||void 0===a?void 0:a.appContext.config.globalProperties.$toast,h=(0,i.computed)((()=>o.getters["report/connectionValue"]));h.value&&(l.value=h.value),(0,i.onBeforeMount)((()=>{p.value=e.permissions}));const g=e=>{if(v.clearAll(),e.id){const t=new Iv("/","",a);let i={id:e.id,name:e.connectionName,settings:{host:e.host,port:e.port,user:e.username}};e.password!==Zh&&(i.settings.password=e.password),E(),t.updateConnection(i).then((e=>{w(),E(),v.success({title:n(ye),message:n(Se)}),o.dispatch("report/changeConnectionModifiedValue","update")})).catch((e=>{var t,o;E();const a=null!==(o=null===(t=e.data)||void 0===t?void 0:t.message)&&void 0!==o?o:ke;v.error({title:n(fe),message:n(a)})}))}};(0,i.watch)((()=>[h.value]),(e=>{l.value=e[0]}));const y=e=>{d.value=e,r.value=!0},f=t=>{var o,a;((null===(a=null===(o=e.initialModel)||void 0===o?void 0:o.connectionId)||void 0===a?void 0:a.id)!=t.id||1!=parseInt(t.scheduleCount))&&parseInt(t.scheduleCount)>0?(c.value=n("The selected connection is used by {{count}} schedule(s).",{count:t.scheduleCount}),s.value=!0):m.value=!0,d.value=t.id},b=e=>{"confirm"===e&&S(d.value),r.value=!1},C=e=>{"confirm"===e&&(m.value=!0),s.value=!1},S=e=>{const t=new Iv("/","",a);t.deleteConnection(e).then((e=>{v.success({title:n(ye),message:n(we)}),o.dispatch("report/changeConnectionModifiedValue","delete")})).catch((e=>{var t,o;o=null===(t=e.data)||void 0===t?void 0:t.message;v.error({title:n(fe),message:n(xe)})}))},w=()=>{v.clearAll(),m.value=!m.value},E=()=>{u.value=!u.value};return{connection:l,showConfirmationModal:y,showDeleteConfirmationModal:r,toggleEditConfirmationModal:f,showEditConfirmationModal:s,editConnectionConfirmation:c,deleteConnectionconfirmationModalAction:b,editConnectionconfirmationModalAction:C,connectionModalStatus:m,progressModalStatus:u,addNewConnection:g,toggleAddConnectionModal:w,toggleProgressModal:E,dataGroupPermissions:p}}});const Kh=(0,Re.Z)(Wh,[["render",Ih],["__scopeId","data-v-7ff645fc"]]);var Qh=Kh;const Jh={class:"--span-column-3",style:{"padding-right":"0.3rem"}},Yh={class:"connection-details-sheet"},Xh={style:{"border-left":"1px solid #eeeff3","padding-left":"0.3rem","margin-bottom":"1.5rem"}},eg={class:"time-legend"},tg=(0,i.createElementVNode)("ul",{class:"legend-item"},null,-1),og={class:"legend-title"};function ag(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-alert"),s=(0,i.resolveComponent)("oxd-form-row"),d=(0,i.resolveComponent)("oxd-grid"),c=(0,i.resolveComponent)("oxd-divider");return(0,i.openBlock)(),(0,i.createBlock)(d,{cols:4},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Jh,[e.isCreatorTerminated?((0,i.openBlock)(),(0,i.createBlock)(r,{key:0,style:{margin:"1rem 10px"},type:e.TYPE_ERROR,message:e.$t("The schedule belongs to an inactive employee"),show:!0,compact:!0},null,8,["type","message"])):(0,i.createCommentVNode)("",!0),(0,i.createVNode)(s,null,{default:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"scheduleName")])),_:3}),(0,i.createVNode)(s,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{cols:2,style:{width:"100%"}},{default:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"frequency")])),_:3})])),_:3}),(0,i.createVNode)(s,null,{default:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"reportName")])),_:3}),(0,i.createVNode)(s,null,{default:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"scheduleType")])),_:3}),(0,i.createElementVNode)("div",Yh,[(0,i.createVNode)(s,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{cols:4,style:{width:"100%"}},{default:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"connections")])),_:3})])),_:3}),(0,i.createVNode)(s,null,{default:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"connectionDetails")])),_:3}),(0,i.createVNode)(s,null,{default:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"ftpPath")])),_:3})]),(0,i.createVNode)(s,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{cols:2,style:{width:"100%"}},{default:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"multipleRecipients1")])),_:3})])),_:3}),(0,i.createVNode)(s,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{cols:1,style:{width:"100%"}},{default:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"multipleRecipients2")])),_:3})])),_:3}),(0,i.createVNode)(s,null,{default:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"gdprConsent")])),_:3})]),(0,i.createElementVNode)("div",Xh,[(0,i.createVNode)(d,{cols:1},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(s,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{cols:1,style:{width:"100%"}},{default:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"status")])),_:3})])),_:3}),(0,i.createVNode)(s,null,{default:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"startDate")])),_:3}),(0,i.createVNode)(s,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{cols:2,style:{width:"100%"}},{default:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"time")])),_:3})])),_:3}),e.scheduleCount>0?((0,i.openBlock)(),(0,i.createBlock)(s,{key:0},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",eg,[tg,(0,i.createElementVNode)("p",og,(0,i.toDisplayString)(e.$t("Unavailable Time Values")),1)])])),_:1})):(0,i.createCommentVNode)("",!0),(0,i.createVNode)(s,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{cols:1,style:{width:"100%"}},{default:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"attachmentType")])),_:3})])),_:3})])),_:3})]),(0,i.createVNode)(c,{class:"--span-column-4"})])),_:3})}var ig=(0,i.defineComponent)({components:{"oxd-grid":ll.Z,"oxd-alert":Jo.Z,"oxd-form-row":rl.Z,"oxd-divider":ro.Z},props:{scheduleCount:{type:Number,default:0},isCreatorTerminated:{type:Boolean,default:!1}},setup(){return{TYPE_ERROR:Xd.A_}}});const lg=(0,Re.Z)(ig,[["render",ag]]);var ng=lg;function rg(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,{type:"autocomplete",createOptions:e.options,multiple:!1,clear:!1,placeholder:e.$t("Type for hints...")},null,8,["createOptions","placeholder"])}ce();var sg=(0,i.defineComponent)({name:"ReportsAutoComplete",components:{"oxd-input-field":lo.Z},props:{reportTitles:{type:Array,default:()=>[]}},setup(e){const t=t=>new Promise((o=>{const a=e.reportTitles.filter((e=>{const o=e.label.toLowerCase(),a=t.toLowerCase();return o.includes(a)}));o(a)}));return{options:t}}});const dg=(0,Re.Z)(sg,[["render",rg]]);var cg=dg;function mg(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,{type:"multiselect",options:e.options,placeholder:"Select Frequency",showEmptySelector:!1},null,8,["options"])}var ug=(0,i.defineComponent)({name:"FrequencyDropdown",components:{"oxd-input-field":lo.Z},props:{mode:{type:String,default:"read"}},setup(e){const t=(0,Gd.oR)(),o=(0,i.ref)([]),a=(0,i.getCurrentInstance)();return(0,i.onMounted)((()=>{const e=new Iv("/",qv,a);e.getFrequincies().then((e=>{e.data&&(o.value=e.data.data.map((e=>({id:e.id,label:e.name}))),t.dispatch("report/changeFrequencyValues",e.data.data))}))})),{options:o}}});const pg=(0,Re.Z)(ug,[["render",mg]]);var vg=pg;function hg(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,{options:e.options,placeholder:"Select Connection","onUpdate:modelValue":e.selectConnection,showEmptySelector:!1},null,8,["options","onUpdate:modelValue"])}var gg=(0,i.defineComponent)({name:"ConnectionsDropdown",components:{"oxd-input-field":lo.Z},props:{mode:{type:String,default:"read"},selectedConnection:{type:String,default:null},connectionAdded:{type:Object},initialModel:{type:Object}},setup(e,t){const o=(0,Gd.oR)(),a=(0,i.ref)([]),l=(0,i.getCurrentInstance)(),n=(0,i.computed)((()=>o.getters["report/connectionModifiedValue"])),r=()=>{const i=new Iv("/","",l);i.getScheduleFTPConnections().then((i=>{if(i.data&&(a.value=i.data.data.map((e=>({id:e.id,label:e.name,host:e.settings.host,port:e.settings.port,user:e.settings.user,inUse:e.in_use,isEditable:e.is_editable,scheduleCount:e.report_schedule_count,createdBy:e.created_by}))),e.selectedConnection)){let i=a.value.filter((t=>t.id==e.selectedConnection.id))[0];if(o.dispatch("report/changeSelectedConnection",i),"update"==n.value){let e={id:parseInt(i.id),label:i.label};t.emit("update:modelValue",e),o.dispatch("report/changeConnectionModifiedValue",null)}}}))};r(),(0,i.watch)((()=>[e.connectionAdded,n.value]),(a=>{var i;let l=a[0].id,n=a[1];if(l&&r(),"delete"==n){if(e.initialModel.id&&(null===(i=e.initialModel.connectionId)||void 0===i?void 0:i.id)){let a={id:parseInt(e.initialModel.connectionId.id),label:e.initialModel.connectionId.label};t.emit("update:modelValue",a),o.dispatch("report/changeConnectionModifiedValue",null)}else t.emit("update:modelValue",null),o.dispatch("report/changeConnectionModifiedValue",null);r()}"update"==n&&r()}));const s=e=>{o.dispatch("report/changeSelectedConnection",e)};return{options:a,selectConnection:s}}});const yg=(0,Re.Z)(gg,[["render",hg]]);var fg=yg;const bg={class:"leave-type-undelete-options"},Cg={key:1},Sg={key:0,class:"oxd-checkbox-input-file-type"};function wg(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-loader"),s=(0,i.resolveComponent)("oxd-radio-input"),d=(0,i.resolveComponent)("oxd-checkbox-input"),c=(0,i.resolveComponent)("oxd-input-group");return(0,i.openBlock)(),(0,i.createElementBlock)("div",bg,[(0,i.createVNode)(c,{classes:{wrapper:"--grouped-field"},label:e.$t("Report Attached as")},{default:(0,i.withCtx)((()=>[e.onLoading?((0,i.openBlock)(),(0,i.createBlock)(r,{key:0,withContainer:!0,class:"oxd-loader-text-view"})):(0,i.createCommentVNode)("",!0),e.onLoading?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",Cg,[(0,i.createVNode)(s,{disabled:e.isCsvDisabled,id:"1",value:"csv",optionLabel:e.$t("CSV (Comma Separated Value)"),modelValue:e.selected,"onUpdate:modelValue":t[0]||(t[0]=t=>e.selected=t),onInput:t[1]||(t[1]=t=>e.onInput(t,e.fillEmptyRowsValueLocal,e.fillEmptyRowsAvailable,e.fillEmptyRowsConfigValue))},null,8,["disabled","optionLabel","modelValue"]),e.fillEmptyRowsAvailable?((0,i.openBlock)(),(0,i.createElementBlock)("div",Sg,[(0,i.createVNode)(d,{disabled:e.isCsvDisabled,optionLabel:e.$t("Fill Empty Rows"),modelValue:e.fillEmptyRowsValueLocal,"onUpdate:modelValue":t[2]||(t[2]=t=>e.fillEmptyRowsValueLocal=t),"data-test":"check-fill-empty-rows",onInput:t[3]||(t[3]=t=>e.onInputCheck(t,e.fillEmptyRowsValueLocal,e.fillEmptyRowsAvailable))},null,8,["disabled","optionLabel","modelValue"])])):(0,i.createCommentVNode)("",!0),(0,i.createVNode)(s,{disabled:e.isPdfDisabled,id:"2",value:"pdf",optionLabel:e.$t("PDF"),modelValue:e.selected,"onUpdate:modelValue":t[4]||(t[4]=t=>e.selected=t),onInput:t[5]||(t[5]=t=>e.onInput(t,e.fillEmptyRowsValueLocal,e.fillEmptyRowsAvailable,e.fillEmptyRowsConfigValue))},null,8,["disabled","optionLabel","modelValue"])]))])),_:1},8,["label"])])}var Eg=(0,i.defineComponent)({name:"ExportFileTypeRadioInput",components:{"oxd-input-group":sl.Z,"oxd-radio-input":ec.Z,"oxd-checkbox-input":ev.Z,"oxd-loader":co.Z},props:{selectionValue:{type:String,default:"csv"},fillEmptyRows:{type:Object,default:()=>({available:!1,enabled:!1})},fillEmptyRowsConfig:{type:Boolean,default:!1},isInitialEditLoad:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},readOnlyOptions:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup:function(e,t){const o=(0,i.ref)(!1),a=(0,i.computed)((()=>e.selectionValue)),l=(0,i.computed)((()=>e.fillEmptyRows.available)),n=(0,i.computed)((()=>e.fillEmptyRowsConfig)),r=(0,i.computed)((()=>e.isInitialEditLoad));"csv"==e.selectionValue&&(o.value=r.value?e.fillEmptyRows.enabled:e.fillEmptyRowsConfig),(0,i.watch)((()=>[e.fillEmptyRows]),(()=>{e.fillEmptyRows.available?"csv"==e.selectionValue&&(o.value=e.fillEmptyRowsConfig):o.value=!1}));const s=(0,i.computed)((()=>e.readOnlyOptions.includes("csv"))),d=(0,i.computed)((()=>e.readOnlyOptions.includes("pdf"))),c=(0,i.computed)((()=>e.isLoading)),m=(e,a,i,l)=>{let n={};n.exportFileType=e.target.value,n.fillEmptyRows={},n.fillEmptyRows.enabled=l,n.fillEmptyRows.available=i,"pdf"==e.target.value&&i&&(n.fillEmptyRows.enabled=!1,o.value=!1),t.emit("update:modelValue",n)},u=(e,o,a)=>{let i={};"on"==e.target.value&&(i.exportFileType="csv",i.fillEmptyRows={},i.fillEmptyRows.enabled=!o,i.fillEmptyRows.available=a),t.emit("update:modelValue",i)};return{selected:a,fillEmptyRowsAvailable:l,fillEmptyRowsConfigValue:n,isCsvDisabled:s,isPdfDisabled:d,onLoading:c,onInput:m,onInputCheck:u,fillEmptyRowsValueLocal:o}}});const kg=(0,Re.Z)(Eg,[["render",wg],["__scopeId","data-v-ea9b4b78"]]);var xg=kg;function Ng(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-select-input-btn");return(0,i.openBlock)(),(0,i.createElementBlock)("div",{class:(0,i.normalizeClass)({"oxd-select-wrapper":!0,"status-selector-disabled":!this.activated,"status-selector-enabled":this.activated})},[(0,i.createElementVNode)("label",null,[((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:0},[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Status")),1)],64))]),(0,i.createVNode)(r,{disabled:e.isReadOnly,modelValue:e.selectedStatus,wholeButtonClickable:!0,options:e.options,button:e.buttonObject,"onUpdate:modelValue":e.selectOption},null,8,["disabled","modelValue","options","button","onUpdate:modelValue"])],2)}var Ag=o(31710),Dg=(0,i.defineComponent)({name:"StatusDropdown",components:{"oxd-select-input-btn":Ag.Z},props:{activatedStatus:{type:Boolean,default:!0},isReadOnly:{type:Boolean,default:!1},initialModel:{type:Object,default:void 0}},emits:["update:modelValue"],setup(e,t){const o=(0,i.ref)(!0),a=(0,i.ref)({id:"1",label:"Activated"}),l=(0,i.ref)([{id:"1",label:"Activated"},{id:"0",label:"Deactivated"}]);(0,i.onBeforeMount)((()=>{var t;o.value=e.activatedStatus,(null===(t=e.initialModel)||void 0===t?void 0:t.id)&&(a.value=e.initialModel.status)}));const n={iconName:" ",style:{"justify-content":"space-between"}},r=e=>{o.value="1"==e.id,a.value=e,t.emit("update:modelValue",e)};return{options:l,buttonObject:n,selectOption:r,activated:o,selectedStatus:a}}});const Tg=(0,Re.Z)(Dg,[["render",Ng],["__scopeId","data-v-a586e9e4"]]);var Pg=Tg;function Vg(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-segment");return(0,i.openBlock)(),(0,i.createElementBlock)("div",null,[(0,i.createElementVNode)("label",null,[((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:0},[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Schedule Type")),1)],64))]),(0,i.createVNode)(r,(0,i.mergeProps)(e.$attrs,{disabled:e.isReadOnly,options:e.options}),null,16,["disabled","options"])])}var Bg=o(43678),Ig=(0,i.defineComponent)({name:"SheduleTypeSegment",components:{"oxd-segment":Bg.Z},props:{isReadOnly:{type:Boolean,default:!1}},setup(e){const t=(0,i.ref)([{id:"email",label:"Email"},{id:"upload",label:"Upload"}]);return{options:t}}});const Lg=(0,Re.Z)(Ig,[["render",Vg]]);var Fg=Lg;const zg={class:"schedule-note"},Mg={class:"schedule-note-header-row"},Og={class:"schedule-note-header-row-icon"},Rg={class:"schedule-note-header-row-text"};function _g(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon"),s=(0,i.resolveComponent)("oxd-text");return(0,i.openBlock)(),(0,i.createElementBlock)("div",zg,[(0,i.createElementVNode)("div",Mg,[(0,i.createElementVNode)("div",Og,[(0,i.createVNode)(r,{class:"report-catalog-icon",name:"oxd-help-popup"})]),(0,i.createElementVNode)("div",Rg,[(0,i.createVNode)(s,{tag:"p",class:"oxd-label orangehrm-warning-note-heading"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Note")),1)])),_:1})])]),(0,i.createVNode)(s,{tag:"p",class:"orangehrm-form-hint"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)(" * "+(0,i.toDisplayString)(e.maxReportsWarning),1)])),_:1}),(0,i.createVNode)(s,{tag:"p",class:"orangehrm-form-hint"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)(" * "+(0,i.toDisplayString)(e.maxRecordsWarning),1)])),_:1}),(0,i.createVNode)(s,{tag:"p",class:"orangehrm-form-hint"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)(" * "+(0,i.toDisplayString)(e.maxFileSizeWarning),1)])),_:1})])}var $g=(0,i.defineComponent)({name:"CreateScheduleWarnings",components:{"oxd-text":Ii.Z,"oxd-icon":In.Z},props:{maxReportsCount:{type:Number,default:1},maxRecordsCount:{type:Number,default:5e4},maxFileSize:{type:Number,default:10}},setup(e){const t=ce(),o=t("You will be able to export a maximum of {{maxReports}} report(s) per schedule.",{maxReports:e.maxReportsCount}),a=t("You will be able to export a maximum of {{maxRecords}} records per schedule.",{maxRecords:e.maxRecordsCount}),i=t("The system will support only a maximum of {{maxFileSize}}MB size for a single attachment.",{maxFileSize:e.maxFileSize});return{maxReportsWarning:o,maxRecordsWarning:a,maxFileSizeWarning:i}}});const jg=(0,Re.Z)($g,[["render",_g],["__scopeId","data-v-7208a21a"]]);var Ug=jg,Zg=o(16042);class Hg{static cloneDeep(e){return(0,Zg.Z)(e)}}const qg={class:"options-emplyee-label"},Gg={class:"options-emplyee-id"},Wg={style:{"margin-left":"10px"}};function Kg(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,{type:"autocomplete",createOptions:e.options,readonly:e.isReadOnly,multiple:!0,placeholder:e.$t("Type for hints...")},{option:(0,i.withCtx)((({data:e})=>[(0,i.createElementVNode)("span",qg,(0,i.toDisplayString)(e.label),1),(0,i.createElementVNode)("div",Gg,(0,i.toDisplayString)(e.employeeId),1)])),chips:(0,i.withCtx)((({data:e})=>[(0,i.createElementVNode)("span",Wg,"("+(0,i.toDisplayString)(e.employeeId)+")",1)])),_:1},8,["createOptions","readonly","placeholder"])}var Qg=(0,i.defineComponent)({name:"EmployeeRecipientSelect",components:{"oxd-input-field":lo.Z},props:{isReadOnly:{type:Boolean,default:!1}},setup(){const e=(0,i.getCurrentInstance)(),t=e=>new Promise((t=>{const a=o.filter((t=>{const o=t.label.toLowerCase(),a=e.toLowerCase();return o.includes(a)}));t(a)}));let o=[];const a=()=>{const t=new nh(e);t.getEmployeeRecipients().then((e=>{e.data&&(o=e.data.data.map((e=>{var t,o,a;return{id:e.empNumber,label:ge.getEmployeeName(e.firstName,e.middleName,e.lastName,Boolean(e.termination_id)),employeeId:e.employeeId,image:(null===(t=e.photo)||void 0===t?void 0:t.type)&&(null===(o=e.photo)||void 0===o?void 0:o.image)?ge.base64ImageConvertion(e.photo.type,null===(a=e.photo)||void 0===a?void 0:a.image):"images/default.png"}})))}))};return(0,i.onBeforeMount)((()=>{a()})),{options:t}}});const Jg=(0,Re.Z)(Qg,[["render",Kg],["__scopeId","data-v-40061c16"]]);var Yg=Jg;const Xg={class:"email-recipient-list",style:{width:"50%","padding-right":"10px"}},ey={class:"add-email-recipient-icon"};function ty(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-label"),s=(0,i.resolveComponent)("email-recipient"),d=(0,i.resolveComponent)("oxd-mutliselect-chips"),c=(0,i.resolveComponent)("oxd-icon-button");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createElementVNode)("div",Xg,[(0,i.createVNode)(r,{class:"email-recipient-list-label",label:e.$t("Additional Recipients (Emails)")},null,8,["label"]),(0,i.createVNode)(s,{"component-id":e.recipientKey,"existing-strings":e.recipientStrings,readOnly:e.isReadOnly,required:e.isRequired,onUpdateItem:e.recipientUpdated,onAddEmail:e.addRecipient,"data-test":"email-recipient-text",style:{"margin-bottom":"unset"}},null,8,["component-id","existing-strings","readOnly","required","onUpdateItem","onAddEmail"]),(0,i.createVNode)(d,{disabled:!1,readonly:e.isReadOnly,selected:e.modelValue.enteredEmails,"data-test":"selected-email-recipients",onChipRemoved:e.onRemoveSelected},null,8,["readonly","selected","onChipRemoved"])]),(0,i.createElementVNode)("div",ey,[(0,i.createVNode)(c,{disabled:e.isReadOnly,name:"oxd-add",size:"small",onClick:t[0]||(t[0]=t=>e.addRecipient()),"data-test":"add-email-recipient",tooltip:e.$t("Add Additional Recipient")},null,8,["disabled","tooltip"])])],64)}function oy(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,{rows:"1",modelValue:e.recipient,"onUpdate:modelValue":t[0]||(t[0]=t=>e.recipient=t),rules:e.rules.recipient,"data-test":"email-recipient-text",readOnly:e.isReadOnly,onKeydown:(0,i.withKeys)((0,i.withModifiers)(e.onSelectEnter,["prevent"]),["enter"])},null,8,["modelValue","rules","readOnly","onKeydown"])}var ay=(0,i.defineComponent)({name:"EmailRecipient",components:{"oxd-input-field":lo.Z},props:{componentId:{type:Number,required:!0},existingStrings:{type:Array,required:!0,default:()=>[""]},isRequired:{type:Boolean,default:!1},isReadOnly:{type:Boolean,default:!1}},emits:["updateItem","addEmail","updateEmailonInput"],setup(e,t){const o=(0,i.ref)(""),a=ce();(0,i.watch)((()=>e.componentId),(()=>{o.value=""})),(0,i.watch)((()=>o.value),(()=>{n.value.recipient.map((a=>new Promise(((i,l)=>{Promise.resolve(a(o.value)).then((a=>{!0===a?t.emit("updateItem",{id:e.componentId,label:o.value}):t.emit("updateItem",!1)}))}))))}));const l=function(e){return!e||/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9]+)+$/.test(e)||a("Expected format: admin@example.com")},n=(0,i.computed)((()=>e.isRequired?{recipient:[Oa,l,bi(e.existingStrings,"Already exists"),$a(50)]}:{recipient:[l,bi(e.existingStrings,"Already exists"),$a(50)]}));return{recipient:o,rules:n}},methods:{onSelectEnter(){this.$emit("addEmail",!0)}}});const iy=(0,Re.Z)(ay,[["render",oy]]);var ly=iy,ny=o(69268),ry=(0,i.defineComponent)({name:"EmailRecipients",components:{"email-recipient":ly,"oxd-icon-button":D.Z,"oxd-label":Qo.Z,"oxd-mutliselect-chips":ny.Z},props:{modelValue:{type:Object},isRequired:{type:Boolean,default:!1},isReadOnly:{type:Boolean,default:!1}},setup(e,t){var o,a,l;const n=(0,i.toRef)(e,"modelValue"),r=(0,i.ref)([{id:0,label:""}]),s=(0,i.ref)([]);(null===(a=null===(o=n.value)||void 0===o?void 0:o.enteredEmails)||void 0===a?void 0:a.length)&&(s.value=n.value.enteredEmails.map((function(e){return e.label})));const d=(0,i.ref)((null===(l=n.value)||void 0===l?void 0:l.enteredEmails)?n.value.enteredEmails.length+1:0);t.emit("update:modelValue",n);const c=e=>{const t=e.trim();return t.toLowerCase()},m=()=>{var e;u()&&(void 0===(null===(e=n.value)||void 0===e?void 0:e.enteredEmails)&&(n.value.enteredEmails=[]),r.value[d.value]&&(n.value.enteredEmails[d.value]=r.value[d.value]),n.value.enteredEmails=n.value.enteredEmails.filter((function(e){return e})),t.emit("update:modelValue",n),n.value.emailInInputField={},d.value+=1,s.value=n.value.enteredEmails.map((e=>e.label)))},u=()=>{if(r.value&&r.value[d.value]&&""!==r.value[d.value].label&&n.value){let e=c(r.value[d.value].label);if(!0===si(r.value[d.value].label)&&-1===s.value.findIndex((t=>c(t)===e))&&r.value[d.value].label.length<=50)return!0}return!1},p=e=>{var o;if(e){if(r.value[e.id]=e,u()){let e=c(r.value[d.value].label);("undefined"!==(null===(o=n.value)||void 0===o?void 0:o.enteredEmails)||n.value.enteredEmails.some((function(t){return t.label!==e})))&&(n.value.emailInInputField=r.value[d.value],t.emit("update:modelValue",n))}}else delete r.value[d.value],void 0!==n.value.emailInInputField&&0!==Object.keys(n.value.emailInInputField).length&&delete n.value.emailInInputField},v=e=>{var o,a,i;if(null===(o=n.value)||void 0===o?void 0:o.enteredEmails){let o=null===(a=n.value)||void 0===a?void 0:a.enteredEmails.filter((t=>t.id!==e.id)),l=null===(i=s.value)||void 0===i?void 0:i.indexOf(e.label);-1!==l&&s.value.splice(l,1);let r=[];o.forEach(((e,t)=>{r.push({id:t,label:e.label})})),d.value-=1;let c={enteredEmails:r};t.emit("update:modelValue",c)}};return{recipientKey:d,recipientStrings:s,addRecipient:m,recipientUpdated:p,onRemoveSelected:v}}});const sy=(0,Re.Z)(ry,[["render",ty],["__scopeId","data-v-c1a49d7c"]]);var dy=sy;const cy=e=>((0,i.pushScopeId)("data-v-388cbb95"),e=e(),(0,i.popScopeId)(),e),my={class:"email-sending-method-container"},uy=cy((()=>(0,i.createElementVNode)("div",{class:"vertical-line"},null,-1)));function py(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-text"),s=(0,i.resolveComponent)("oxd-icon-button");return(0,i.openBlock)(),(0,i.createElementBlock)("div",my,[(0,i.createVNode)(r,{tag:"p",class:"email-sending-method-label"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Email Sending Method:")),1)])),_:1}),(0,i.createVNode)(s,{name:"oxd-mail-multiple",class:"multiple-emails",size:"small",id:"multipleEmails",ref:"multipleEmails","data-test":"multiple-emails",onClick:t[0]||(t[0]=t=>e.selectMethod(1)),tooltip:e.$t("Multiple Emails")},null,8,["tooltip"]),uy,(0,i.createVNode)(s,{name:"oxd-mail",class:"single-email",size:"small",id:"singleEmail",ref:"singleEmail","data-test":"single-email",onClick:t[1]||(t[1]=t=>e.selectMethod(0)),tooltip:e.$t("Single Email")},null,8,["tooltip"])])}var vy=(0,i.defineComponent)({name:"EmployeeRecipientSelect",components:{"oxd-icon-button":D.Z,"oxd-text":Ii.Z},emits:["update:modelValue"],props:{modelValue:{type:Number,default:0}},setup(e,t){const o=(0,i.ref)(0),a=e=>{const t=document.getElementById("multipleEmails"),o=document.getElementById("singleEmail");t&&o&&(1==e?(t.classList.add("active"),o.classList.remove("active")):(o.classList.add("active"),t.classList.remove("active")))},l=e=>{o.value=1,a(e),t.emit("update:modelValue",e)};return(0,i.watch)((()=>[e.modelValue]),(()=>{a(e.modelValue),t.emit("update:modelValue",e.modelValue)})),(0,i.onMounted)((()=>{a(e.modelValue),t.emit("update:modelValue",e.modelValue)})),{selectMethod:l}}});const hy=(0,Re.Z)(vy,[["render",py],["__scopeId","data-v-388cbb95"]]);var gy=hy;const yy={class:"gdpr-concent-sub-text",style:{width:"50%","padding-right":"10px"}};function fy(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-text");return(0,i.openBlock)(),(0,i.createElementBlock)("div",yy,[(0,i.createVNode)(r,null,{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("You may have selected a report that contains sensitive information. Report generation will happen according to the permissions of the scheduler. Please ensure you consent to sharing potential private or confidential information contained in the report.")),1)])),_:1})])}var by=(0,i.defineComponent)({name:"EmailRecipients",components:{"oxd-text":Ii.Z},setup(e,t){return{}}});const Cy=(0,Re.Z)(by,[["render",fy]]);var Sy=Cy;const wy=ce(),Ey=()=>{const e=(0,K.Z)(new Date),t=e-20,o=e+20,a=[];for(let i=t;i<o;i++)a.push(i);return a},ky=(e,t)=>{const o=[];if(e.forEach((e=>{const t=e.timeZone?e.timeZone.prefix:"0",a=e.startTime.split(" "),i=a[0],l=a[1],n=t.replace("GMT",""),r=new Date(i+"T"+l+n);o.push(("00"+r.getHours()).slice(-2)+":"+("00"+r.getMinutes()).slice(-2))})),t.id){const e=t.timeZone?t.timeZone.prefix:"0",a=t.startDate,i=t.hours.id+":"+t.minutes.id,l=e.replace("GMT",""),n=new Date(a+"T"+i+l),r=("00"+n.getHours()).slice(-2)+":"+("00"+n.getMinutes()).slice(-2);o.splice(o.indexOf(r),1)}return o};function xy(e,t,o,a,l,n,r){var s,d,c,m,u,p;return(0,A.mG)(this,void 0,void 0,(function*(){const v=(0,i.getCurrentInstance)(),h=(0,i.ref)([]),g=(0,i.ref)([]),y=(0,i.ref)(!1),f=(0,i.ref)(Fh),b=(0,i.ref)(!1),C=(0,i.ref)(!1),S=(0,i.ref)(!1),w=(0,i.ref)(!1),E=(0,i.ref)(!1),k=yield a,x=(0,i.ref)([]),N=(0,i.ref)(!0),D=(0,i.ref)(!1),T=yield e,P=yield l,V=P,B=yield o,I=B.data.data,L=new nh(v),F=V.user&&((null===(d=null===(s=V.user)||void 0===s?void 0:s.employee)||void 0===d?void 0:d.terminationId)||"1"===V.user.purged);T.update=T.update&&!F;const z={maxRecordsPerReport:B.data.meta.maxRecordsPerReport,maxReportsPerSchedule:B.data.meta.maxReportsPerSchedule,maxFileSizePerReport:B.data.meta.maxFileSizePerReport},M=B.data.meta.isLoggedInUserHasWorkEmail,O=V.id&&!T.update,R=I.filter((e=>{if(e.name!=V.name)return e})).map((e=>e.name)),_=e=>(0,A.mG)(this,void 0,void 0,(function*(){let t=!1;if(e.report.id&&e.attachmentType.fillEmptyRows.available){const o=yield L.getFillEmptyRowStatus(e.report.id).catch((()=>!1));t=!!o&&o.data.meta.fillEmptyRows.enabled,E.value=!0}return t}));(null===(c=null===V||void 0===V?void 0:V.report)||void 0===c?void 0:c.id)&&(w.value=yield _(V));const $=(e,t,o)=>{let a="00";t.id&&(a=t.minutes.id);const i=t.timeZone?t.timeZone.prefix:"0",l=t.startDate;let n=t.hours.id+":"+a;const r=i.replace("GMT","");let s=new Date(l+"T"+n+r);const d=new Date;d.getHours(),d.getMinutes();let c=0;o?(s=d,c=s.getHours()):c=23;for(let m=0;m<=c;m++){let t=60;m==c&&o&&(t=s.getMinutes());let a=!1;for(let o=0;o<t;o+=5)o>60&&(m+=1,o-=60,a=!0),e.push(("00"+m).slice(-2)+":"+("00"+o).slice(-2)),a&&(m-=1,o+=60,a=!1)}return e=[...new Set(e)],t.id&&V.hours.id==t.hours.id&&V.startDate==t.startDate&&(s=new Date(l+"T"+n+r),n=("00"+s.getHours()).slice(-2)+":"+("00"+s.getMinutes()).slice(-2),e.indexOf(n)>=0&&e.splice(e.indexOf(n),1)),e},j=(e,t)=>{const o=[],a=e.timeZone?e.timeZone.prefix:"0",i=e.startDate,l=a.replace("GMT",""),n=new Date;n.setHours(n.getUTCHours()+parseInt(l.substring(0,3))),n.setMinutes(n.getUTCMinutes()+parseInt(l.substring(0,1)+1)*parseInt(l.substring(4,6)));let r=23;t&&(r=n.getHours(),n.getMinutes()>55&&(r+=1)),e.id&&y.value&&(r+=1);for(let s=0;s<r;s++){const e=new Date(i+"T"+("00"+s).slice(-2)+":00"+l),t=("00"+e.getHours()).slice(-2)+":"+("00"+e.getMinutes()).slice(-2);o.push(t)}if(N.value&&e.id){const t=e.hours.id+":00";o.indexOf(t)>=0&&o.splice(o.indexOf(t),1),N.value=!1}return o},U=e=>{const t=e.timeZone?e.timeZone.prefix:"0",o=t.replace("GMT","");let a=[];b.value?a=j(e,!0):y.value&&(a=j(e,!1)),g.value=W.map((t=>{const i=new Date(e.startDate+"T"+("00"+t).slice(-2)+":00"+o),l=("00"+i.getHours()).slice(-2)+":"+("00"+i.getMinutes()).slice(-2);return{id:t,label:t,_disabled:a.includes(l)}}))},Z=V.id?"Update":"Save",H=!V.status||"1"==V.status.id,q=ky(I,V),G=Array.from({length:12},((e,t)=>("00"+5*t).slice(-2))),W=Array.from({length:24},((e,t)=>("00"+t).slice(-2)));return h.value=G.map((e=>({id:e,label:e}))),g.value=W.map((e=>({id:e,label:e}))),x.value=O?["csv","pdf"]:[],{name:"addScheduleForm",layout:[{type:"custom",component:(0,i.markRaw)(ng),props:{scheduleCount:I.length,isCreatorTerminated:F},children:{scheduleName:[{name:"scheduleName",label:wy("Schedule Name"),type:"input",props:{readOnly:O},validators:new Map([["required",Oa],["shouldNotExceedCharLength",$a(100)],["stringShouldNotAlreadyExist",bi(R,wy("Already Exists"),!0,!1)]]),style:{width:"100%"}}],frequency:[{name:"frequency",label:wy("Frequency"),type:"custom",component:(0,i.markRaw)(vg),props:{type:"select",readonly:O},validators:new Map([["required",Oa]])},{name:"timeZone",label:wy("Time Zone"),type:"custom",component:(0,i.markRaw)(bh),props:{type:"select",readonly:O},validators:new Map([["required",Oa]])}],reportName:[{name:"report",label:wy("Report"),type:"custom",component:(0,i.markRaw)(cg),class:"mb-0--oxd-input-group",validators:new Map([["required",Oa]]),props:{autocomplete:"off",readonly:O,reportTitles:k},style:{width:"100%"},listeners:{onchange:e=>(0,A.mG)(this,void 0,void 0,(function*(){var t,o;const a=k.find((t=>t.label===e.target._value));if((null===(t=f.value.report)||void 0===t?void 0:t.id)&&void 0!=a){C.value=!0;const e=yield L.getFillEmptyRowStatus(null===(o=f.value.report)||void 0===o?void 0:o.id).catch((()=>{C.value=!1,S.value=!0}));f.value.attachmentType.fillEmptyRows=e.data.meta.fillEmptyRows,w.value=e.data.meta.fillEmptyRows.enabled,C.value=!1,S.value=!0,E.value=!1}}))},hook:(e,t)=>(f.value=t,t.report||(f.value.attachmentType.fillEmptyRows={available:!1,enabled:!1}),Object.assign({},e))}],startDate:[{name:"startDate",label:wy("Start Date"),type:"custom",component:(0,i.markRaw)(_m),value:(0,se.p6)((0,se._G)(),"yyyy-MM-dd"),validators:new Map([["required",Oa],["validDateFormat",ja(t)]]),props:{years:Ey(),min:new Date,disabled:O},style:{width:"100%"},hook:(e,t)=>{const o=new Date,a=o.getFullYear()+"-"+(o.getMonth()+1).toString().padStart(2,"0")+"-"+o.getDate().toString().padStart(2,"0");return t.startDate<a?(y.value=!0,b.value=!1,D.value=!1):t.startDate==a?(b.value=!0,y.value=!1,D.value=!1):(D.value=!0,b.value=!1,y.value=!1),void 0==t.id&&U(t),Object.assign({},e)}}],time:[{name:"hours",label:wy("Time"),type:"custom",component:(0,i.markRaw)(Eh),props:{type:"select",options:g,readonly:O},validators:new Map([["required",Oa]])},{name:"minutes",type:"custom",component:(0,i.markRaw)(Ah),props:{type:"select",options:h,readonly:O},validators:new Map([["required",Oa]]),style:{"padding-top":"23px"},hook:(e,t)=>{if(void 0!=t.hours){let o=[];if(D.value)o=q;else if(b.value){const e=Hg.cloneDeep(q);o=$(e,t,!0)}else y.value?o=$([],t,!1):t.id||(o=q);const a=t.timeZone.prefix.replace("GMT","");if(h.value=G.map((e=>{const i=new Date(t.startDate+"T"+t.hours.id+":"+("00"+e).slice(-2)+a),l=("00"+i.getHours()).slice(-2)+":"+("00"+i.getMinutes()).slice(-2);return{id:e,label:e,_disabled:o.includes(l)}})),e.props&&(e.props.options=h),void 0!=t.minutes){const e=new Date(t.startDate+"T"+t.hours.id+":"+("00"+t.minutes.id).slice(-2)+a),i=("00"+e.getHours()).slice(-2)+":"+("00"+e.getMinutes()).slice(-2);o.includes(i)&&(t.minutes=!1)}U(t)}return Object.assign({},e)}}],attachmentType:[{name:"attachmentType",label:wy("Report Attached As"),type:"custom",props:{selectionValue:null===(m=V.attachmentType)||void 0===m?void 0:m.exportFileType,fillEmptyRows:null===(u=V.attachmentType)||void 0===u?void 0:u.fillEmptyRows,fillEmptyRowsConfig:null===(p=V.attachmentType)||void 0===p?void 0:p.fillEmptyRows.enabled,readOnlyOptions:x,isInitialEditLoad:E},component:(0,i.markRaw)(xg),value:"csv",validators:new Map([["required",Oa]]),hook:(e,t)=>{var o,a,i,l,n,r;if(e.props){x.value=O?["pdf","csv"]:[];let s=t.attachmentType.exportFileType;if(!O&&t.report){const e=L.getExportOptionsForReport(t.report.id,k);(null===e||void 0===e?void 0:e.includes("pdf"))||(x.value.push("pdf"),s="csv"),(null===e||void 0===e?void 0:e.includes("csv"))||(x.value.push("csv"),s="pdf")}s!==e.props.selectionValue&&x.value.length<2?(e.props.selectionValue=s,t.attachmentType.exportFileType=s):(null===(o=t.report)||void 0===o?void 0:o.fillEmptyRows)&&(e.props.selectionValue={},e.props.selectionValue.fillEmptyRows=null===(a=t.report)||void 0===a?void 0:a.fillEmptyRows),e.props.readOnlyOptions=x,C.value&&(e.props.isLoading=!0,e.props.readOnlyOptions=["csv","pdf"]),C.value||(e.props.isLoading=!1,e.props.readOnlyOptions=x),void 0!==(null===(l=null===(i=f.value.attachmentType)||void 0===i?void 0:i.fillEmptyRows)||void 0===l?void 0:l.available)&&(e.props["fillEmptyRows"]=null===(n=f.value.attachmentType)||void 0===n?void 0:n.fillEmptyRows,t.attachmentType.fillEmptyRows=null===(r=f.value.attachmentType)||void 0===r?void 0:r.fillEmptyRows,e.props.fillEmptyRowsConfig=w.value)}return Object.assign({},e)}}],status:[{name:"status",label:wy("Status"),type:"custom",component:(0,i.markRaw)(Pg),value:{id:"1",label:"Activated"},props:{activatedStatus:H,isReadOnly:O,initialModel:V}}],connections:[{name:"connectionId",label:wy("Select Connection"),type:"custom",class:"--span-column-2 connection-selection",component:(0,i.markRaw)(fg),props:{type:"select",initialModel:V,readonly:O},style:{"padding-top":"1.2rem","padding-left":"1.2rem"},validators:new Map([["required",Oa]]),hook:(e,t)=>("upload"===t.scheduleType.id?(e.visible=!0,e.props&&(e.props["selectedConnection"]=t.connectionId,e.props["connectionAdded"]=r.value)):e.visible=!1,Object.assign({},e))},{name:"addConnection",label:wy("Add New Connection"),type:"button",class:"--span-column-2 oxd-sheet-action-button",props:{type:"button",displayType:"text",iconName:"oxd-add",iconSize:"small",size:"long"},styles:{"margin-top":"3.3rem","margin-right":"1.2rem"},listeners:{onClick:()=>{n()}},hook:(e,t)=>("upload"===t.scheduleType.id&&T.create?e.visible=!0:e.visible=!1,Object.assign({},e))}],connectionDetails:[{name:"connectionDetails",type:"custom",class:"--span-column-3",component:(0,i.markRaw)(Qh),style:{width:"100%"},props:{initialModel:V,permissions:T},hook:(e,t)=>{var o;return"upload"===t.scheduleType.id&&(null===(o=t.connectionId)||void 0===o?void 0:o.id)?e.visible=!0:e.visible=!1,Object.assign({},e)}}],ftpPath:[{name:"connectionPath",label:wy("File Location"),type:"input",class:"--span-column-3",visible:!1,props:{readOnly:O,hintPlacement:ic.fM,hint:wy("Eg: /ftp/shared/reports (linux server), /C:/Users/ftp-user/reports (windows server), shared/reports (relative path). Leave blank to use the default folder."),hintStyle:{"word-break":"normal"}},validators:new Map([["shouldNotExceedCharLength",$a(255)]]),style:{width:"100%","padding-bottom":"1.2rem","padding-left":"1.2rem","padding-right":"1.2rem"},hook:(e,t)=>{var o;return"upload"===t.scheduleType.id&&(null===(o=t.connectionId)||void 0===o?void 0:o.id)?e.visible=!0:e.visible=!1,Object.assign({},e)}}],scheduleType:[{name:"scheduleType",label:wy("Schedule Type"),type:"custom",component:(0,i.markRaw)(Fg),style:{width:"50%",marginBottom:"1rem"},props:{isReadOnly:O}},{name:"emailSendingMethod",label:wy(""),type:"custom",component:(0,i.markRaw)(gy),style:{width:"50%",marginBottom:"1rem"},visible:!1,hook:(e,t)=>Object.assign({},e)}],multipleRecipients1:[{name:"recipientsEmployees",label:wy("Employees"),type:"custom",component:(0,i.markRaw)(Yg),style:{width:"100%"},props:{isReadOnly:O},validators:new Map([["autocompleteInValidMultiselect",_a]]),hook:(e,t)=>("email"==t.scheduleType.id?e.visible=!0:e.visible=!1,Object.assign({},e))},{name:"includeMe",label:wy(""),type:"checkboxgroup",props:{options:[{id:1,label:wy("Include Me")}],disabled:O},style:{"margin-top":"2.4rem"},hook:(e,t)=>(M?"email"==t.scheduleType.id?e.visible=!0:e.visible=!1:(t.includeMe=[],e.visible=!1),Object.assign({},e))}],multipleRecipients2:[{name:"emailRecipients",label:wy("Additional Recipients (Emails)"),type:"custom",component:(0,i.markRaw)(dy),style:{width:"100%",display:"flex"},props:{isReadOnly:O},hook:(e,t)=>("email"==t.scheduleType.id?e.visible=!0:e.visible=!1,Object.assign({},e))}],gdprConsent:[{name:"gdprConsent",label:wy(""),type:"checkboxgroup",validators:new Map([["required",Oa]]),props:{options:[{id:1,label:wy("I confirm that I have agreed to share the data of the selected report.")}],disabled:void 0!=V.id},style:{"padding-top":"2rem",width:"100%"}},{name:"gdprConsent",label:wy(""),type:"custom",component:(0,i.markRaw)(Sy),style:{"padding-left":"35px","margin-top":"-10px","font-size":"10px","padding-bottom":"2rem"}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"action",children:{default:[{name:"note",label:"",type:"custom",component:(0,i.markRaw)(Ug),props:{maxReportsCount:z.maxReportsPerSchedule,maxRecordsCount:z.maxRecordsPerReport,maxFileSize:z.maxFileSizePerReport},style:{"margin-right":"auto",padding:"0px"}}]},style:{"padding-top":"1.2rem","margin-bottom":"1.2rem"}},{type:"divider",style:{margin:"0"}},{type:"action",children:{default:[{name:"required",label:"",type:"custom",component:(0,i.markRaw)(Hd),style:{"margin-right":"auto",padding:"0px"}},{name:"submit",label:wy(Z),type:"custom",component:(0,i.markRaw)(jt.Z),visible:!V.id||!!T.update,style:{"margin-left":"0.5rem"},props:{type:"submit",displayType:"secondary",disabled:C}}]},style:{"padding-top":"1.2rem"}}]}}))}var Ny=xy;const Ay={class:"card-container"},Dy={class:"card-header"},Ty={class:"card-title"},Py={class:"card-body"};function Vy(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-divider");return(0,i.openBlock)(),(0,i.createElementBlock)("div",Ay,[(0,i.createElementVNode)("div",Dy,[(0,i.createElementVNode)("h4",Ty,[(0,i.renderSlot)(e.$slots,"title",{},void 0,!0)])]),e.showDivider?((0,i.openBlock)(),(0,i.createBlock)(r,{key:0,style:{"margin-bottom":"1rem"}})):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("div",Py,[(0,i.renderSlot)(e.$slots,"body",{},void 0,!0)])])}var By=(0,i.defineComponent)({name:"form-card",components:{"oxd-divider":ro.Z},props:{showDivider:{type:Boolean,default:!0}}});const Iy=(0,Re.Z)(By,[["render",Vy],["__scopeId","data-v-50361c85"]]);var Ly=Iy;const Fy={class:"orangehrm-modal-header"},zy={class:"header-icon"},My={class:"orangehrm-text-center-align"},Oy={class:"orangehrm-modal-footer"};function Ry(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon"),s=(0,i.resolveComponent)("oxd-text"),d=(0,i.resolveComponent)("oxd-button"),c=(0,i.resolveComponent)("oxd-dialog"),m=(0,i.resolveDirective)("set-tab-focus-to-first-element");return e.show?(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(c,(0,i.mergeProps)({key:0},e.$attr,{"onUpdate:show":e.onCancel,onKeyup:(0,i.withKeys)(e.onCancel,["esc"])}),{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Fy,[(0,i.createElementVNode)("div",zy,[(0,i.createVNode)(r,{name:"exclamation-triangle",size:"large",class:"modal-title-icon"})])]),(0,i.createElementVNode)("div",My,[(0,i.createVNode)(s,{class:"text-1",type:"subtitle-2"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("At least one recipient should be selected. An active employee, recipient or Include me.")),1)])),_:1})]),(0,i.createElementVNode)("div",Oy,[(0,i.createVNode)(d,{label:e.$t("OK"),displayType:"secondary","data-test":"confirmButton",class:"orangehrm-button-margin",onClickOnce:e.onConfirm},null,8,["label","onClickOnce"])])])),_:1},16,["onUpdate:show","onKeyup"])),[[m,void 0,"return-focus"]]):(0,i.createCommentVNode)("",!0)}var _y=(0,i.defineComponent)({name:"multipleRecipientErrorModal",components:{"oxd-button":jt.Z,"oxd-dialog":Wo.Z,"oxd-text":Ii.Z,"oxd-icon":In.Z},data(){return{show:!0}},directives:{"set-tab-focus-to-first-element":Sr.Z},methods:{onCancel(){this.$emit("confirmationModalAction","cancel"),this.show=!this.show},onConfirm(){this.$emit("confirmationModalAction","confirm"),this.show=!this.show}},setup(e){return{}}});const $y=(0,Re.Z)(_y,[["render",Ry],["__scopeId","data-v-1fc5b9d2"]]);var jy=$y,Uy=(0,i.defineComponent)({name:"ModifySchedule",components:{"ohrm-layout":Xc,"form-card":Ly,"oxd-progress-bar":ym.Z,"oxd-schema-form":yc.Z,"add-new-ftp-connection":Gh,"multiple-recipient-error-modal":jy},setup(e,t){const o=(0,i.getCurrentInstance)(),a=(0,Gd.oR)(),{userFormat:l}=Im(),n=(0,i.ref)(Fh),r=((0,i.ref)({}),(0,i.ref)({})),s=new nh(o),d=(0,i.ref)(!1),c=(0,i.ref)(!1),m=s.getDataGroupPermissions({dataGroup:"schedule_report"}),u=s.getReportSchedulesList(),p=s.getReportTitles(),v=(0,i.ref)("Create Schedule"),h=null===o||void 0===o?void 0:o.appContext.config.globalProperties.$toast,g=ce(),y=(0,i.inject)("ngServices"),f=y.$stateParams,b=f.scheduleId?f.scheduleId:null,C=s.getScheduleReport(b),S=(0,i.ref)(!1),w=null===o||void 0===o?void 0:o.appContext.config.globalProperties.empNo;(0,i.computed)((()=>a.getters["report/frequencyListValues"]));let E=!1;if((0,i.onMounted)((()=>(0,A.mG)(this,void 0,void 0,(function*(){const e=yield m;if(b)if(e.update||e.read){const e=yield C;n.value=e}else y.$state.go("403");else e.create&&e.read||y.$state.go("403")})))),b)v.value="Edit Schedule";else{let e=new Date,t=e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0");n.value.startDate=t,n.value.emailRecipients=[]}const k=e=>{var t,o,a,i,l;let n=[];return null!==e.recipientsEmployees&&void 0!==(null===(t=e.recipientsEmployees)||void 0===t?void 0:t.length)&&0!==(null===(o=e.recipientsEmployees)||void 0===o?void 0:o.length)&&(n=e.recipientsEmployees.filter((function(e){return-1===e.label.indexOf(` (${g("Past Employee")})`)}))),"email"!=e.scheduleType.id||0!=e.includeMe.length||0!=n.length||void 0!==(null===(a=e.emailRecipients)||void 0===a?void 0:a.enteredEmails)&&0!=(null===(l=null===(i=e.emailRecipients)||void 0===i?void 0:i.enteredEmails)||void 0===l?void 0:l.length)||void 0!==e.emailRecipients.emailInInputField&&0!==Object.keys(e.emailRecipients.emailInInputField).length},x=e=>{var t,i,l,n,r,s,d,c,m,u,p,v,f,b,C,S,x,N,T,P,V,B,I,F,z,M,O,R;if(h.clearAll(),!E)if(k(e)){E=!0;const k=new Iv("/","",o),{vacancy:L}=e;(0,A._T)(e,["vacancy"]);if(e.id){let o={id:e.id?e.id:null,name:e.scheduleName,startTime:e.startDate.concat(" ",e.hours.id,":",e.minutes.id,":00"),timezone:e.timeZone.id,reportId:e.report.id,frequency:e.frequency.id,exportFileType:e.attachmentType.exportFileType,scheduleType:e.scheduleType.id,status:e.status.id};if(e.attachmentType.fillEmptyRows.available){let t={enabled:e.attachmentType.fillEmptyRows.enabled};o.configurations={fillEmptyRows:t}}"upload"==e.scheduleType.id&&(o.connectionId=e.connectionId.id,e.connectionPath&&(o.ftpPath=e.connectionPath),D()),"email"==e.scheduleType.id&&((null===(i=null===(t=e.emailRecipients)||void 0===t?void 0:t.enteredEmails)||void 0===i?void 0:i.length)>0&&(o.emailRecipients=null===(n=null===(l=e.emailRecipients)||void 0===l?void 0:l.enteredEmails)||void 0===n?void 0:n.map((e=>e.label))),o.emailRecipients&&(null===(s=null===(r=e.emailRecipients)||void 0===r?void 0:r.emailInInputField)||void 0===s?void 0:s.label)?o.emailRecipients=null===(d=o.emailRecipients)||void 0===d?void 0:d.concat(null===(c=e.emailRecipients)||void 0===c?void 0:c.emailInInputField.label):void 0===o.emailRecipients&&(null===(u=null===(m=e.emailRecipients)||void 0===m?void 0:m.emailInInputField)||void 0===u?void 0:u.label)?o.emailRecipients=[null===(p=e.emailRecipients)||void 0===p?void 0:p.emailInInputField.label]:void 0===o.emailRecipients&&(o.emailRecipients=[]),o.employeeRecipients=[],null!==e.recipientsEmployees&&void 0!==(null===(v=e.recipientsEmployees)||void 0===v?void 0:v.length)&&0!==(null===(f=e.recipientsEmployees)||void 0===f?void 0:f.length)&&(o.employeeRecipients=e.recipientsEmployees.map((e=>e.id))),1==e.includeMe[0]&&(null===(b=o.employeeRecipients)||void 0===b||b.push(w)),o.emailSendingMethod=1),k.createSchedule(o).then((t=>{h.success({title:g(ye),message:g(Se)});let o={updated:!0,modifiedId:e.id},i=t.data.data;a.dispatch("report/changeModification",o),a.dispatch("report/changeAddedSchedule",i),"upload"==e.scheduleType.id&&D(),setTimeout((()=>{y.$state.go("reports_and_analytics.schedule_reports"),E=!1}),1e3)})).catch((t=>{var o,a,i;"upload"==e.scheduleType.id&&D();const l=null!==(i=null===(a=null===(o=t.data)||void 0===o?void 0:o.messages)||void 0===a?void 0:a.error)&&void 0!==i?i:ke;h.error({title:g(fe),message:g(l)}),E=!1}))}else{let t={name:e.scheduleName,startTime:e.startDate.concat(" ",e.hours.id,":",e.minutes.id,":00"),timezone:e.timeZone.id,reportId:e.report.id,frequency:e.frequency.id,exportFileType:e.attachmentType.exportFileType,scheduleType:e.scheduleType.id,ftpPath:e.ftpPath,status:e.status.id,gdprConsentAccepted:e.gdprConsent[0]};if(e.attachmentType.fillEmptyRows.available){let o={enabled:e.attachmentType.fillEmptyRows.enabled};t.configurations={fillEmptyRows:o}}"email"==e.scheduleType.id&&((null===(S=null===(C=e.emailRecipients)||void 0===C?void 0:C.enteredEmails)||void 0===S?void 0:S.length)>0&&(t.emailRecipients=null===(N=null===(x=e.emailRecipients)||void 0===x?void 0:x.enteredEmails)||void 0===N?void 0:N.map((e=>e.label))),t.emailRecipients&&(null===(P=null===(T=e.emailRecipients)||void 0===T?void 0:T.emailInInputField)||void 0===P?void 0:P.label)?t.emailRecipients=null===(V=t.emailRecipients)||void 0===V?void 0:V.concat(null===(B=e.emailRecipients)||void 0===B?void 0:B.emailInInputField.label):void 0===t.emailRecipients&&(null===(F=null===(I=e.emailRecipients)||void 0===I?void 0:I.emailInInputField)||void 0===F?void 0:F.label)&&(t.emailRecipients=[null===(z=e.emailRecipients)||void 0===z?void 0:z.emailInInputField.label]),t.employeeRecipients=[],null!==e.recipientsEmployees&&void 0!==(null===(M=e.recipientsEmployees)||void 0===M?void 0:M.length)&&0!==(null===(O=e.recipientsEmployees)||void 0===O?void 0:O.length)&&(t.employeeRecipients=e.recipientsEmployees.map((e=>e.id))),1==e.includeMe[0]&&(null===(R=t.employeeRecipients)||void 0===R||R.push(w)),t.emailSendingMethod=1),"upload"==e.scheduleType.id&&(t.connectionId=e.connectionId.id,e.connectionPath?t.ftpPath=e.connectionPath:t.ftpPath="",D()),k.createSchedule(t).then((t=>{h.success({title:g(ye),message:g(be)});let o=t.data.data,i={updated:!1,modifiedId:o.id};a.dispatch("report/changeModification",i),a.dispatch("report/changeAddedSchedule",o),a.dispatch("report/jumpToPage",1),"upload"==e.scheduleType.id&&D(),setTimeout((()=>{y.$state.go("reports_and_analytics.schedule_reports"),E=!1}),1e3)})).catch((t=>{var o,a,i;"upload"==e.scheduleType.id&&D();const l=null!==(i=null===(a=null===(o=t.data)||void 0===o?void 0:o.messages)||void 0===a?void 0:a.error)&&void 0!==i?i:Ee;h.error({title:g(fe),message:g(l)}),E=!1}))}}else L(!0)},N=()=>{h.clearAll(),d.value=!d.value},D=()=>{c.value=!c.value},T=()=>{d.value=!0},P=e=>{h.clearAll(),D();const t=new Iv("/","",o);t.addNewConnection({connection_type_id:1,name:e.connectionName,settings:{host:e.host,port:e.port,user:e.username,password:e.password}}).then((e=>{N(),D(),h.success({title:g(ye),message:g(be)}),r.value=e.data.data})).catch((e=>{var t,o;D();const a=null!==(o=null===(t=e.data)||void 0===t?void 0:t.message)&&void 0!==o?o:Ee;h.error({title:g(fe),message:g(a)})}))},V=(0,fc.Z)(Ny.call(t,m,l,u,p,C,T,r)),B=(0,i.computed)((()=>a.getters["report/timeZoneValue"])),I=V.schema;b||(0,i.watch)((()=>[n.value,B.value]),(e=>{const t=e[0],o=e[1];n.value.timeZone=void 0,t&&o.timeZoneValue&&(n.value.timeZone=o.timeZoneValue)}));const L=e=>{S.value=e},F=e=>{L(!1)};return{model:n,schema:I,timeZoneValue:B,modalTitle:v,createSchedule:x,toggleAddConnectionModal:N,toggleProgressModal:D,connectionModalStatus:d,progressModalStatus:c,addNewConnectionModalAction:T,addNewConnection:P,showMultipleRecipientErrorModal:S,multipleRecipientErrorModalAction:F}}});const Zy=(0,Re.Z)(Uy,[["render",hh],["__scopeId","data-v-16564f9a"]]);var Hy=Zy,qy={components:{ReportsCatalogue:Pv,ScheduledReports:vh,ModifySchedule:Hy},name:"ReportsAndAnalyticsModule",unmounted(){this.$toast.clearAll()}};const Gy=(0,Re.Z)(qy,[["render",Tu]]);var Wy=Gy,Ky={install:e=>{const t=(e,t=!1,o=0,a=1)=>{const i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(i){let e=parseInt(i[1],16),l=parseInt(i[2],16),n=parseInt(i[3],16);e/=255,l/=255,n/=255;const r=Math.max(e,l,n),s=Math.min(e,l,n);let d,c=0,m=(r+s)/2;if(r==s)c=d=0;else{const t=r-s;switch(d=m>.5?t/(2-r-s):t/(r+s),r){case e:c=(l-n)/t+(l<n?6:0);break;case l:c=(n-e)/t+2;break;case n:c=(e-l)/t+4;break}c/=6}d*=100,d=Math.round(d),m*=100,m=Math.round(m),c=Math.round(360*c);let u="";return u=t?"hsl("+c+", "+d+"%, "+(m-o)+"%,"+a+")":"hsl("+c+", "+d+"%, "+(m+o)+"%,"+a+")",u}return""},o=JSON.parse(window.OHRM.currentTheme.colors);document.documentElement.style.setProperty("---oxd-header-color","#"+o["oxd-header-color"]),document.documentElement.style.setProperty("---oxd-input-focus-color","#"+o["oxd-input-focus-color"]),document.documentElement.style.setProperty("---oxd-primary-input-color","#"+o["oxd-primary-input-color"]),document.documentElement.style.setProperty("---oxd-primary-one-color","#"+o["oxd-primary-one-color"]),document.documentElement.style.setProperty("---oxd-primary-two-color","#"+o["oxd-primary-two-color"]),document.documentElement.style.setProperty("---oxd-progress-bar-color","#"+o["oxd-progress-bar-color"]),document.documentElement.style.setProperty("---oxd-secondary-three-color","#"+o["oxd-secondary-three-color"]),document.documentElement.style.setProperty("---oxd-sub-header-color","#"+o["oxd-sub-header-color"]),document.documentElement.style.setProperty("---oxd-success-button-color","#"+o["oxd-success-button-color"]),document.documentElement.style.setProperty("---oxd-button-color--main-pressed",t("#"+o["oxd-success-button-color"],!0,5.1)),document.documentElement.style.setProperty("---oxd-button-color--main-hover",t("#"+o["oxd-success-button-color"],!1,4.9)),document.documentElement.style.setProperty("---oxd-progress-bar-background-color",t("#"+o["oxd-success-button-color"],!1,0,.08)),document.documentElement.style.setProperty("---oxd-button-color--secondary-pressed",t("#"+o["oxd-primary-two-color"],!0,5)),document.documentElement.style.setProperty("---oxd-button-color--secondary-hover",t("#"+o["oxd-primary-two-color"],!1,5)),document.documentElement.style.setProperty("---oxd-primary-one-color-pressed",t("#"+o["oxd-primary-one-color"],!0,5.1)),document.documentElement.style.setProperty("---oxd-primary-one-color-hover",t("#"+o["oxd-primary-one-color"],!1,4.9)),document.documentElement.style.setProperty("---oxd-input-border-focus-color","#"+o["oxd-input-focus-color"]),document.documentElement.style.setProperty("---oxd-input-border-focus-box-shadow-color",t("#"+o["oxd-input-focus-color"],!0,10,.12)),document.documentElement.style.setProperty("---oxd-primary-input-color-alpha-05",t("#"+o["oxd-primary-input-color"],!1,0,.05)),document.documentElement.style.setProperty("---oxd-primary-input-color-alpha-10",t("#"+o["oxd-primary-input-color"],!1,0,.1)),document.documentElement.style.setProperty("---oxd-primary-input-color-lighten-10",t("#"+o["oxd-primary-input-color"],!1,10)),document.documentElement.style.setProperty("---oxd-primary-input-color-alpha-05",t("#"+o["oxd-primary-input-color"],!1,0,.05)),document.documentElement.style.setProperty("---oxd-primary-input-color-alpha-10",t("#"+o["oxd-primary-input-color"],!1,0,.1)),document.documentElement.style.setProperty("---oxd-primary-input-color-lighten-10",t("#"+o["oxd-primary-input-color"],!1,10))}};const Qy={class:"candidate-profile-container"},Jy={class:"candidate-profile-content"},Yy={key:1,class:"candidate-profile-left-panel"},Xy={class:"candidate-profile-quick-search-wrapper"},ef={class:"profile-pic-margin-left"},tf=["innerHTML"],of={class:"profile-image-card"},af={class:"profile-image"},lf={class:"candidate-profile-details"},nf={class:"candidate-name"},rf={key:0,class:"candidate-vacancy"},sf={key:1,class:"candidate-vacancy-name"},df={key:0,class:"employee-profile-details"},cf={key:1,class:"candidate-history"},mf={class:"candidate-history-common-content"},uf={key:0,class:"modal-oxd-divider view-recent-reports-divider"},pf={class:"candidate-profile-right-panel"},vf={class:"tab-wrapper"},hf={class:"tabs-wrapper"},gf={class:"tab-action-wrapper align-center d-flex"},yf={key:0},ff={class:"view-document-content-header d-flex align-center justify-between"},bf={class:"view-document-content-header-back-btn-wrapper d-flex align-center"},Cf={key:0,class:"view-document-content-header-back-btn-label"},Sf={class:"view-document-content-header-actions d-flex align-center"},wf={class:"audit-logs-modal-body"},Ef={class:"orangehrm-modal-footer justify-end"};function kf(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-loader"),s=(0,i.resolveComponent)("oxd-icon-button"),d=(0,i.resolveComponent)("profile-pic"),c=(0,i.resolveComponent)("oxd-quick-search"),m=(0,i.resolveComponent)("oxd-button"),u=(0,i.resolveComponent)("oxd-select-input-btn"),p=(0,i.resolveComponent)("oxd-candidate-history-info-pill"),v=(0,i.resolveComponent)("oxd-bullet-points"),h=(0,i.resolveComponent)("oxd-collapsible"),g=(0,i.resolveComponent)("oxd-divider"),y=(0,i.resolveComponent)("profile-details"),f=(0,i.resolveComponent)("oxd-tab"),b=(0,i.resolveComponent)("profile-resume"),C=(0,i.resolveComponent)("profile-note"),S=(0,i.resolveComponent)("attachment-list"),w=(0,i.resolveComponent)("email-history-list"),E=(0,i.resolveComponent)("create-document-list"),k=(0,i.resolveComponent)("oxd-tabs"),x=(0,i.resolveComponent)("document-template-preview"),N=(0,i.resolveComponent)("confirmation-modal"),A=(0,i.resolveComponent)("edit-candidate-note-modal"),D=(0,i.resolveComponent)("candidate-confirmation-modal"),T=(0,i.resolveComponent)("oxd-classic-table"),P=(0,i.resolveComponent)("form-modal"),V=(0,i.resolveComponent)("add-as-employee-modal"),B=(0,i.resolveComponent)("email-document-modal"),I=(0,i.resolveComponent)("candidate-profile-update-modal"),L=(0,i.resolveComponent)("recruitment-layout"),F=(0,i.resolveDirective)("set-tab-focus-to-first-element");return(0,i.openBlock)(),(0,i.createBlock)(L,null,{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Qy,[(0,i.createElementVNode)("div",Jy,[e.isLoading?((0,i.openBlock)(),(0,i.createBlock)(r,{key:0,withContainer:!0,class:"candidate-profile-loader"})):(0,i.createCommentVNode)("",!0),e.isLoading?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",Yy,[(0,i.createElementVNode)("div",Xy,[(0,i.createVNode)(c,{"data-test":"searchInput",placeholder:e.$t("Switch Candidate"),clear:!1,modelValue:e.selectedCandidate,createOptions:e.getMatchingCandidates,readonly:e.viewDocumentContent,"onUpdate:modelValue":e.selectCandidate,"onSelect:enter":e.switchCandidate},{iconSlot:(0,i.withCtx)((()=>[(0,i.createVNode)(s,(0,i.mergeProps)({"data-test":"switchCandidateBtn"},e.quickSearchButtonProps,{class:"quick-search-btn",size:"small",style:e.quickSearchButtonStyle,disabled:!0}),null,16,["style"])])),option:(0,i.withCtx)((({data:t,text:o})=>[(0,i.createVNode)(d,{size:"extra-small",imageSrc:t.avatar_url||e.setDefaultProfilePic(t.id)},null,8,["imageSrc"]),(0,i.createElementVNode)("div",ef,[(0,i.createElementVNode)("div",{innerHTML:o},null,8,tf)])])),_:1},8,["placeholder","modelValue","createOptions","readonly","onUpdate:modelValue","onSelect:enter"])]),(0,i.createElementVNode)("div",of,[(0,i.createElementVNode)("div",af,[(0,i.createElementVNode)("div",{class:"profile-image-border",style:(0,i.normalizeStyle)(e.profileImageBorderColors.outerBorderColor)},[e.hasEditPermission?((0,i.openBlock)(),(0,i.createBlock)(s,{key:0,name:"oxd-edit",tooltip:e.$t("Change Profile Picture"),onClick:e.openEmployeeProfileModal,size:"small","data-test":"profile-modal-trigger",class:"prof-photo-edit-icon"},null,8,["tooltip","onClick"])):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("div",{class:"prof-image-content",style:(0,i.normalizeStyle)(e.profileImageBorderColors.innerBorderColor)},[(0,i.createVNode)(d,{imageSrc:e.profileImage},null,8,["imageSrc"])],4)],4)]),(0,i.createElementVNode)("div",lf,[(0,i.createElementVNode)("div",nf,(0,i.toDisplayString)(e.candidateName),1),e.candidateVacancy?((0,i.openBlock)(),(0,i.createElementBlock)("div",rf,(0,i.toDisplayString)(e.$t("Vacancy")),1)):(0,i.createCommentVNode)("",!0),e.candidateVacancy?((0,i.openBlock)(),(0,i.createElementBlock)("div",sf,(0,i.toDisplayString)(e.candidateVacancy.name),1)):(0,i.createCommentVNode)("",!0)])]),e.employeeProfileLink?((0,i.openBlock)(),(0,i.createElementBlock)("div",df,[(0,i.createVNode)(m,{label:e.$t("View Employee Profile"),iconName:"oxd-quick-access-employee-profile",iconSize:"extra-large",displayType:"label",class:"view-employee-profile-btn","data-test":"view-employee-profile",onClick:e.gotToEmployeeProfile},null,8,["label","onClick"])])):(0,i.createCommentVNode)("",!0),e.candidateEventData.length>0||e.candidatePastVacancies.length>1?((0,i.openBlock)(),(0,i.createElementBlock)("div",cf,[((0,i.openBlock)(),(0,i.createBlock)(h,{key:e.getRefreshKeyForHistory,"header-title":"Candidate History",collapsible:e.candidateEventData.length!==e.candidateLatestEventData.length},(0,i.createSlots)({collapsedContent:(0,i.withCtx)((()=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.candidateLatestEventData,((t,o)=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"candidate-history-collapsed-content",key:o},[(0,i.createVNode)(p,{"event-data":t,onOnClickEventDetails:e.onClickEventDetails,onOnClickEdit:o=>e.onClickEdit(t)},null,8,["event-data","onOnClickEventDetails","onOnClickEdit"])])))),128))])),expandedContent:(0,i.withCtx)((()=>[(0,i.createVNode)(v,{list:e.candidateEventData,"line-color":e.selectedVacancyForEvents&&"-1"!==e.selectedVacancyForEvents.id&&e.candidatePastVacancies.length>0?"rgb(31, 111, 253)":"rgba(#64728c, 0.07)"},(0,i.createSlots)({_:2},[(0,i.renderList)(e.candidateEventData,((t,o)=>({name:t.id,fn:(0,i.withCtx)((()=>[(0,i.createVNode)(p,{"event-data":t,onOnClickEventDetails:e.onClickEventDetails,onOnClickEdit:o=>e.onClickEdit(t)},null,8,["event-data","onOnClickEventDetails","onOnClickEdit"])]))})))]),1032,["list","line-color"])])),_:2},[e.candidatePastVacancies.length>1?{name:"commonContent",fn:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",mf,[(0,i.createVNode)(u,{button:{iconName:"oxd-snapshot",iconSize:"small",iconStyle:"-1"===e.selectedVacancyForEvents.id?"color : #64728c":"color : rgb(31, 111, 253)",displayType:"label",style:{"background-color":"-1"===e.selectedVacancyForEvents.id?"#f1f2f5":"rgba(31, 111, 253, 0.1)","font-weight":600,"font-size":"14px","text-align":"left",color:"-1"===e.selectedVacancyForEvents.id?"#64728c":"rgb(31, 111, 253)"},labelMini:"-1"===e.selectedVacancyForEvents.id?"Current Vacancy":"",doubleLineLabel:"-1"===e.selectedVacancyForEvents.id,showLabel:!0},doubleLineLabel:"-1"===e.selectedVacancyForEvents.id,dropdownTriggerIconStyles:"-1"!==e.selectedVacancyForEvents.id?{color:"rgb(31, 111, 253)"}:{color:"#64728c"},dropdownTriggerButtonBackgroundColor:"-1"!==e.selectedVacancyForEvents.id?"#1f6ffd":null,options:e.candidatePastVacancies,modelValue:e.selectedVacancyForEvents,"onUpdate:modelValue":e.selectVacancyForEvents},null,8,["button","doubleLineLabel","dropdownTriggerIconStyles","dropdownTriggerButtonBackgroundColor","options","modelValue","onUpdate:modelValue"])])])),key:"0"}:void 0]),1032,["collapsible"]))])):(0,i.createCommentVNode)("",!0),(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createElementBlock)("div",{class:(0,i.normalizeClass)(["action-log-button-container",{"no-history":!(e.candidateEventData.length>0||e.candidatePastVacancies.length>1)}])},[e.hasAuditLogReadPermissions?((0,i.openBlock)(),(0,i.createElementBlock)("div",uf,[(0,i.createVNode)(g)])):(0,i.createCommentVNode)("",!0),e.hasAuditLogReadPermissions&&e.auditLogList.length>0?((0,i.openBlock)(),(0,i.createBlock)(m,{key:1,label:e.$t("View Audit Logs"),iconName:"oxd-view-file",iconSize:"extra-large",displayType:"text",class:"view-recent-reports-btn","data-test":"view-action-log",onClick:e.getActionLogModal},null,8,["label","onClick"])):e.hasAuditLogReadPermissions?((0,i.openBlock)(),(0,i.createBlock)(m,{key:2,label:e.$t("View Audit Logs"),iconName:"oxd-view-file",iconSize:"extra-large",displayType:"text",disabled:!0,"disabled-tooltip":e.$t("No Action Logs Available"),flow:"bottom",class:"view-recent-reports-btn disabled-btn","data-test":"view-action-log-disabled"},null,8,["label","disabled-tooltip"])):(0,i.createCommentVNode)("",!0)],2)),[[F]])])),e.isLoading?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createBlock)(g,{key:2,orientation:"vertical",style:{height:"100%"}})),(0,i.withDirectives)((0,i.createElementVNode)("div",pf,[(0,i.createElementVNode)("div",vf,[(0,i.withDirectives)((0,i.createElementVNode)("div",hf,[(0,i.createVNode)(k,{onChange:e.changeCurrentTab},{"tab-actions":(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",gf,[(0,i.createElementVNode)("div",{style:(0,i.normalizeStyle)({padding:"0.5rem"})},null,4),(0,i.createVNode)(s,{name:"oxd-file-download",onClick:t[0]||(t[0]=t=>e.onClickDownloadApplicationForm()),tooltip:e.$t("Download Application Form"),flow:"bottom",or:""},null,8,["tooltip"])])])),default:(0,i.withCtx)((()=>[(0,i.createVNode)(f,{tab:e.tabs[0]},{default:(0,i.withCtx)((()=>[e.candidate&&e.vacancies?((0,i.openBlock)(),(0,i.createBlock)(y,{key:e.getRefreshKey+e.candidate.candidateStage+e.candidate.isHired,candidate:e.candidate,vacancies:e.vacancies,vacancyId:e.vacancyId,isCurrentVacancySelected:e.isCurrentVacancySelected,"data-group-permissions":e.dataGroupPermissions,"question-form-fields":e.questionFormWithAnswers,"question-ids-with-types":e.questionIdsWithTypes,"selected-vacancy-id-for-events":e.selectedVacancyForEvents.id,onUpdateCandidate:e.onCandidateUpdate,onUpdateCandidateEvent:e.updateCandidateEvent,onClickLabel:e.clickLabel,"onEditJobOfferModal:show":e.showEditJobOfferModal},null,8,["candidate","vacancies","vacancyId","isCurrentVacancySelected","data-group-permissions","question-form-fields","question-ids-with-types","selected-vacancy-id-for-events","onUpdateCandidate","onUpdateCandidateEvent","onClickLabel","onEditJobOfferModal:show"])):(0,i.createCommentVNode)("",!0)])),_:1},8,["tab"]),(0,i.createVNode)(f,{tab:e.tabs[1]},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(),(0,i.createBlock)(b,{ref:"profileResumeRef",key:e.selectedVacancyForEvents.id+e.dynamicKey+e.getRefreshKey,onUpdateCandidate:e.onCandidateUpdate,candidateData:e.candidate,dataGroupPermissions:e.dataGroupPermissions,resumeNoteGroups:e.resumeNoteGroups,"selected-vacancy-id-for-events":e.selectedVacancyForEvents.id,"onResumeNotes:delete":e.deleteResumeNotes,onUpdateAuditlog:e.onUpdateNotes,onSetNotes:e.setNotes},null,8,["onUpdateCandidate","candidateData","dataGroupPermissions","resumeNoteGroups","selected-vacancy-id-for-events","onResumeNotes:delete","onUpdateAuditlog","onSetNotes"]))])),_:1},8,["tab"]),(0,i.createVNode)(f,{tab:e.tabs[2]},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(),(0,i.createBlock)(C,{ref:"profileNote",key:e.selectedVacancyForEvents.id+e.dynamicKey+e.getRefreshKey,candidateData:e.candidate,dataGroupPermissions:e.dataGroupPermissions,resumeNoteGroups:e.resumeNoteGroups,onSetNotes:e.setNotes,onSetEventNotes:e.setEventNotes,onUpdateAuditlog:e.onUpdateNotes,"selected-vacancy-id-for-events":e.selectedVacancyForEvents.id},null,8,["candidateData","dataGroupPermissions","resumeNoteGroups","onSetNotes","onSetEventNotes","onUpdateAuditlog","selected-vacancy-id-for-events"]))])),_:1},8,["tab"]),(0,i.createVNode)(f,{tab:e.tabs[3]},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(),(0,i.createBlock)(S,{ref:"attachmentListRef",key:e.selectedVacancyForEvents.id+e.dynamicKey+e.getRefreshKey,candidateData:e.candidate,dataGroupPermissions:e.dataGroupPermissions,onOnSaveAttachment:e.onSaveAttachment},null,8,["candidateData","dataGroupPermissions","onOnSaveAttachment"]))])),_:1},8,["tab"]),(0,i.createVNode)(f,{tab:e.tabs[4]},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(),(0,i.createBlock)(w,{key:e.dynamicKey+e.getRefreshKeyForHistory+e.getRefreshKey}))])),_:1},8,["tab"]),(0,i.createVNode)(f,{tab:e.tabs[5]},{default:(0,i.withCtx)((()=>[e.candidate?(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(E,{key:e.selectedVacancyForEvents+e.dynamicKey+e.getRefreshKey,candidate:e.candidate,viewDocumentContent:e.viewDocumentContent,onUpdateDocumentList:e.onUpdateDocumentList,onGetEditPreviewTokens:e.onPreviewDocumentEditTokens,onPreviewDocument:e.onPreviewDocument},null,8,["candidate","viewDocumentContent","onUpdateDocumentList","onGetEditPreviewTokens","onPreviewDocument"])),[[F,void 0,"return-focus"]]):(0,i.createCommentVNode)("",!0)])),_:1},8,["tab"])])),_:1},8,["onChange"])],512),[[i.vShow,!e.documentPreviewMode]]),e.documentPreviewMode?((0,i.openBlock)(),(0,i.createElementBlock)("div",yf,[(0,i.createElementVNode)("div",ff,[(0,i.createElementVNode)("div",bf,[(0,i.createVNode)(s,{name:"oxd-arrow-left",size:"xxx-small",onClick:e.exitDocTemplateMode,tooltip:e.$t("Back"),flow:"top"},null,8,["onClick","tooltip"]),e.viewDocumentContent?((0,i.openBlock)(),(0,i.createElementBlock)("span",Cf,(0,i.toDisplayString)(e.viewDocumentContent.name),1)):(0,i.createCommentVNode)("",!0)]),(0,i.createElementVNode)("div",Sf,[e.showSendEmailButton?((0,i.openBlock)(),(0,i.createBlock)(m,{key:0,label:e.$t(e.sendEmailButtonLabel()),iconName:"oxd-mail",displayType:"label-success",size:"medium",flow:"top",onClick:t[1]||(t[1]=t=>e.emailDocumentModalState=!0)},null,8,["label"])):(0,i.createCommentVNode)("",!0),(0,i.createVNode)(m,{label:e.$t("PDF"),iconName:"oxd-pdf",displayType:"label-danger",size:"medium",tooltip:"Export to PDF",flow:"top",onClick:t[2]||(t[2]=t=>e.downloadDocumentTemplate("pdf"))},null,8,["label"]),(0,i.createVNode)(m,{label:e.$t("DOCX"),iconName:"oxd-docx",displayType:"label-info",size:"medium",tooltip:"Export to DOCX",flow:"top",onClick:t[3]||(t[3]=t=>e.downloadDocumentTemplate("docx"))},null,8,["label"])])]),(0,i.createVNode)(g),(0,i.createVNode)(x,{ref:"docTemplatePreview",viewDocumentContent:e.viewDocumentContent,candidate:e.candidate,"onGet:initialDocContentChange":e.getInitialDocContentChange},null,8,["viewDocumentContent","candidate","onGet:initialDocContentChange"])])):(0,i.createCommentVNode)("",!0)])],512),[[i.vShow,!e.isLoading]])])]),e.showGoBackConfirmation?((0,i.openBlock)(),(0,i.createBlock)(N,{key:0,style:{width:"450px"},headerTitle:"Are you sure?",onConfirmationModalAction:e.goBackOnConfirm,confirmButtonDisplayType:"label-feedback-success",confirmButtonIcon:"",confirmButtonText:e.$t("Yes, Continue")},{messageLine1:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("All unsaved changes will be lost.")),1)])),_:1},8,["onConfirmationModalAction","confirmButtonText"])):(0,i.createCommentVNode)("",!0),e.editCandidatesNoteModalState&&e.jobOfferEssentialDetailsLoaded?((0,i.openBlock)(),(0,i.createBlock)(A,{key:1,ref:"editCandidateNoteModal",candidate:e.candidate,commentGroups:e.commentGroups,stage:e.selectedHistoryStage,timezones:e.timezones,loading:e.updatingCandidateEvent,commentHasError:e.commentHasError,payGrades:e.payGrades,currencyTypes:e.currencyTypes,employmentStatus:e.employmentStatus,getMatchingDirectSupervisors:e.getMatchingDirectSupervisors,allCountries:e.allCountries,allUSProvinces:e.allUSProvinces,"onNote:add":e.addNotes,"onNote:hasError":e.noteHasError,"onNote:update":e.updateNotes,"onNote:delete":e.deleteNotes,onSubmitValid:e.editCandidateNote,"onUpdate:show":e.toggleEditCandidateNote,onOnDeleteComment:t[4]||(t[4]=t=>e.setDeleteCandidatesModalVisiblity(!0)),"onNote:commentInput":e.newCommentInput,onOldStageId:e.getOldStageId},null,8,["candidate","commentGroups","stage","timezones","loading","commentHasError","payGrades","currencyTypes","employmentStatus","getMatchingDirectSupervisors","allCountries","allUSProvinces","onNote:add","onNote:hasError","onNote:update","onNote:delete","onSubmitValid","onUpdate:show","onNote:commentInput","onOldStageId"])):(0,i.createCommentVNode)("",!0),e.deleteModalState?((0,i.openBlock)(),(0,i.createBlock)(D,{key:2,state:"Delete",onConfirmationCandidateModalAction:t[5]||(t[5]=t=>e.deleteNoteConfirmationModalAction(t))})):(0,i.createCommentVNode)("",!0),e.showViewRecentReports?((0,i.openBlock)(),(0,i.createBlock)(P,{key:3,class:"audit-logs-modal","onUpdate:show":t[7]||(t[7]=t=>e.showViewRecentReports=!1),onKeyup:t[8]||(t[8]=(0,i.withKeys)((t=>e.showViewRecentReports=!1),["esc"])),style:{width:"100%","max-width":"80%"}},{title:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Audit Logs")),1)])),body:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",wf,[(0,i.withDirectives)((0,i.createVNode)(T,{class:"classic-table audit-logs-table",ref:"auditLogsTable",headers:e.auditLogsHeaders,items:e.auditLogs,clickable:!1},null,8,["headers","items"]),[[F,void 0,"return-focus"]])]),(0,i.createVNode)(g),(0,i.createElementVNode)("div",Ef,[(0,i.createVNode)(m,{label:e.$t("Close"),displayType:"ghost","data-test":"cancelButton",class:"orangehrm-button-margin",onClick:t[6]||(t[6]=t=>e.showViewRecentReports=!1),size:"medium"},null,8,["label"])])])),_:1})):(0,i.createCommentVNode)("",!0),e.showAddAsEmployeeModal?((0,i.openBlock)(),(0,i.createBlock)(V,{key:4,class:"add-as-employee-modal",id:"addAsEmployeeModal",candidate:e.candidateUpdatedObj,empWizardEnabled:e.empWizardEnabled,stage:e.selectedHistoryStage,payGrades:e.payGrades,currencyTypes:e.currencyTypes,employmentStatus:e.employmentStatus,getMatchingDirectSupervisors:e.getMatchingDirectSupervisors,allCountries:e.allCountries,allUSProvinces:e.allUSProvinces,loading:e.addingAsAnEmployee,onSubmitValid:e.addAsEmployeeModalOnConfirm,"onUpdate:show":t[9]||(t[9]=t=>e.showAddAsEmployeeModal=!1)},null,8,["candidate","empWizardEnabled","stage","payGrades","currencyTypes","employmentStatus","getMatchingDirectSupervisors","allCountries","allUSProvinces","loading","onSubmitValid"])):(0,i.createCommentVNode)("",!0),e.emailDocumentModalState&&e.emailDocumentDefaultData?((0,i.openBlock)(),(0,i.createBlock)(B,{key:5,ref:"emailDocumentModal","onUpdate:show":t[10]||(t[10]=t=>e.emailDocumentModalState=!1),emailDocumentDefaultData:e.emailDocumentDefaultData,loading:e.emailDocumentDefaultLoading,showAttachmentTypes:!0,settingsObj:e.settingsObj,isLoggedInUserEmployee:e.showSenderNameSelector,onSubmitValid:e.sendCandidateDocumentEmail,"onOnUpdate:searchTerm":e.onUpdateSearchTerm,"onSelectenter:to":t[11]||(t[11]=t=>e.onUpdateemailDocumentModal(t,"to")),"onSelectenter:cc":t[12]||(t[12]=t=>e.onUpdateemailDocumentModal(t,"cc")),"onSelectenter:replyTo":t[13]||(t[13]=t=>e.onUpdateemailDocumentModal(t,"replyTo")),"onTinymce:errrorImageSize":e.tinymceErrrorImageSize,"onTinymce:errrorImageType":e.tinymceErrrorImageType},null,8,["emailDocumentDefaultData","loading","settingsObj","isLoggedInUserEmployee","onSubmitValid","onOnUpdate:searchTerm","onTinymce:errrorImageSize","onTinymce:errrorImageType"])):(0,i.createCommentVNode)("",!0),e.showProfileModal?((0,i.openBlock)(),(0,i.createBlock)(I,{key:6,profileImage:e.profileImageForModal,profileImageName:"candidateProfile",allowRemoveOption:!0,maxAttachmentSize:e.maxAttachmentSize,allowedImageTypes:e.allowedImageTypes,"data-test":"view-profile-photo-modal",onProfileModalConfirmAction:e.profileModalConfirmAction,onProfilePhotoDeleteAction:e.profilePhotoDeleteAction,onProfileModalCloseAction:e.profileModalCloseAction},null,8,["profileImage","maxAttachmentSize","allowedImageTypes","onProfileModalConfirmAction","onProfilePhotoDeleteAction","onProfileModalCloseAction"])):(0,i.createCommentVNode)("",!0)])),_:1})}var xf=o(66399),Nf=o(58288);function Af(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-schema-form"),s=(0,i.resolveComponent)("confirmation-modal");return(0,i.openBlock)(),(0,i.createElementBlock)("div",null,[(0,i.createVNode)(r,(0,i.mergeProps)({schema:e.schema,enableFirstElementFocus:!1,onSubmitValid:e.saveCandidate,model:e.model,"onUpdate:model":t[0]||(t[0]=t=>e.model=t)},e.$attrs),null,16,["schema","onSubmitValid","model"]),e.state.vacancySwitchConfirmationModal.isShow?((0,i.openBlock)(),(0,i.createBlock)(s,{key:0,style:{width:"450px"},ref:"vacancySwitchConfirmationModal",id:"vacancySwitchConfirmationModal",headerTitle:"Are you sure?",onConfirmationModalAction:e.onSwitchVacancyConfirm,confirmButtonDisplayType:"label-feedback-success",confirmButtonIcon:"",confirmButtonText:e.$t("Yes, Continue")},{messageLine1:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Changing the vacancy will reset the current stage.")),1)])),_:1},8,["onConfirmationModalAction","confirmButtonText"])):(0,i.createCommentVNode)("",!0)])}const Df="api/recruitment/downloadApplicationForm/candidateId",Tf="api/recruitment/downloadCandidateResume/candidateId";var Pf=o(79833);class Vf{constructor(){this._ngServices=(0,i.inject)("ngServices")}getCandidates(e,t){var o;let a={};if((null===e||void 0===e?void 0:e.query)&&(a=Object.assign({},e.query)),(null===e||void 0===e?void 0:e.includes)&&(a=Object.assign(Object.assign({},a),{include:e.includes.join(",")})),(null===e||void 0===e?void 0:e.excludes)&&(a=Object.assign(Object.assign({},a),{exclude:e.excludes.join(",")})),null===e||void 0===e?void 0:e.filter){let t;for(t in e.filter){const o=e.filter[t];o||delete e.filter[t]}a=Object.assign(Object.assign({},a),{filter:e.filter})}return null===(o=this._ngServices)||void 0===o?void 0:o.webservice.call("recruitment/candidates","GET",[],a,t)}getVacancies(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.get("recruitment/vacancies/basic",e,{})}getVacancy(e,t){var o;return null===(o=this._ngServices)||void 0===o?void 0:o.webservice.call(`recruitment/vacancy/${e}`,"GET",[],t||{include:"JobTitle,Events"})}getJobTitles(){var e;return null===(e=this._ngServices)||void 0===e?void 0:e.webservice.get("jobTitles",{},{})}ping(){var e;return null===(e=this._ngServices)||void 0===e?void 0:e.webservice.get("ping",{},{})}logout(){var e;return null===(e=this._ngServices)||void 0===e?void 0:e.webservice.logout()}progressStatus(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call("progress",e,[],{name:"candidateListCSV"})}getOrganizationStructure(){var e;return null===(e=this._ngServices)||void 0===e?void 0:e.webservice.get("organizationStructure",{},{})}getLocations(){var e;return null===(e=this._ngServices)||void 0===e?void 0:e.webservice.get("locations",{},{})}getEmployeeWizardStatus(){var e;return null===(e=this._ngServices)||void 0===e?void 0:e.webservice.get("employee-wizard/status",{},{})}checkEmployeeEmailAvailability(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call("checkEmployeeEmailAvailability","POST",{email:e}).then((function(e){return e}))}downloadCSVRequest(e){let t="";const o=["candidateIdList","vacancyIds","jobTitleIds","vacancyIds","excludeCandidateEventTypeIds"];if(null===e||void 0===e?void 0:e.query){const o=e.query,a=["limit","pageNo"];Object.keys(o).forEach((e=>{a.includes(e)||(t=`${t}${e}=${o[e]}&`)})),t=t.slice(0,-1)}if(null===e||void 0===e?void 0:e.filter){let a;for(a in e.filter){const i=e.filter[a],l=Array.isArray(i);if(Array.isArray(i)&&i.length>0)if(o.indexOf(a)>-1){const e=i&&Array.isArray(i)?i:[];e.length>0&&e.forEach((e=>{t+=`&filter[${a}][]=${e}`}))}else t=`${t}&filter[${a}][]=${i}`;else i&&!l&&(t="string"===typeof i?`${t}&filter[${a}]=${encodeURIComponent(i)}`:`${t}&filter[${a}]=${i}`)}}return t}deleteSelected(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call("recruitment/candidates","DELETE",{ids:e})}archiveSelected(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call("recruitment/candidates/archive","PATCH",e)}unarchiveSelected(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call("recruitment/candidates/unarchive","PATCH",e)}createCandidate(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call("recruitment/candidates","POST",e)}partialUpdateCandidate(e,t){var o;return null===(o=this._ngServices)||void 0===o?void 0:o.webservice.call(`recruitment/candidate/${t}`,"PATCH",e)}updateCandidateProfile(e,t){var o;return null===(o=this._ngServices)||void 0===o?void 0:o.webservice.call(`recruitment/candidate/${t}`,"PATCH",e)}updateCandidateResume(e,t){var o;return null===(o=this._ngServices)||void 0===o?void 0:o.webservice.call(`recruitment/candidate/${t}`,"PATCH",e)}deleteCandidateResume(e,t){var o;return null===(o=this._ngServices)||void 0===o?void 0:o.webservice.call(`recruitment/candidate/${t}`,"PATCH",e)}getCandidate(e){var t;const o={include:"QuestionFormAnswers,CandidatePicture,AnswerAttachments,Notes,CandidateResume,CandidateStages,CurrentVacancyEventsWithNotes,PastVacancyEventsWithNotes"};return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call(`recruitment/candidate/${e.candidateId}`,"GET",[],o)}getCandidatePastVacancyDetails(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call(`recruitment/candidate/${e}/pastVacancyDetails`,"GET",[],{})}getQuestionForm(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call(`recruitment/candidate/${e}/questionForm`,"GET")}getQuestionFormAnswers(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call(`recruitment/candidate/${e}/questionFormAnswers`,"GET")}getTimeZones(){return this._ngServices.webservice.get("standardTimeZones",{},{})}addCandidateEventNote(e,t,o){var a;return null===(a=this._ngServices)||void 0===a?void 0:a.webservice.call(`recruitment/candidate/${e}/event/${t}/comments`,"POST",o)}updateCandidateEventNote(e,t){var o;return null===(o=this._ngServices)||void 0===o?void 0:o.webservice.call(`recruitment/candidate/event/comment/${e}`,"PATCH",t)}deleteCandidateEventNote(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call(`recruitment/candidate/event/comment/${e}`,"DELETE")}saveCandidateEvent(e,t,o){var a;return null===(a=this._ngServices)||void 0===a?void 0:a.webservice.call(`recruitment/candidate/${e}/event/${t}`,"PATCH",o)}partialUpdateFinalNote(e,t,o){var a;return null===(a=this._ngServices)||void 0===a?void 0:a.webservice.call(`recruitment/candidate/${e}/event/${t}`,"PATCH",o)}partialUpdateScheduleNote(e,t,o){var a;return null===(a=this._ngServices)||void 0===a?void 0:a.webservice.call(`recruitment/candidate/${e}/event/${t}`,"PATCH",o)}addCandidateComment(e,t){var o;return null===(o=this._ngServices)||void 0===o?void 0:o.webservice.call(`recruitment/candidate/${e}/comments`,"POST",t)}updateCandidateComment(e,t){var o;return null===(o=this._ngServices)||void 0===o?void 0:o.webservice.call(`recruitment/candidate/comment/${e}`,"PATCH",{comment:t})}deleteCandidateComment(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call(`recruitment/candidate/comment/${e}`,"DELETE")}getActionLogs(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call(`recruitment/candidate/${e}/auditTrails`,"GET")}getCandidateDocuments(e){var t;const o={include:"CandidateDocuments"};return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call(`recruitment/candidate/${e}`,"GET",[],o)}getCandidateDocumentEmailHistory(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call(`recruitment/candidate/${e}/documentNotificationHistory`,"GET")}addCandidateDocument(e,t){var o;return null===(o=this._ngServices)||void 0===o?void 0:o.webservice.call(`recruitment/candidate/${e}/candidateDocuments`,"POST",t)}updateCandidateDocument(e,t,o){var a;return null===(a=this._ngServices)||void 0===a?void 0:a.webservice.call(`recruitment/candidate/${e}/candidateDocument/${t}`,"PATCH",o)}deleteCandidateDocuments(e,t){var o;return null===(o=this._ngServices)||void 0===o?void 0:o.webservice.call(`recruitment/candidate/${e}/candidateDocuments`,"DELETE",{ids:t})}getCandidateDocumentEmailDefaultValues(e,t){var o;return null===(o=this._ngServices)||void 0===o?void 0:o.webservice.call(`recruitment/candidate/${e}/defaultNotificationData`,"GET",[],t)}getDocumentTemplates(e,t){var o;return null===(o=this._ngServices)||void 0===o?void 0:o.webservice.call(`recruitment/documentTemplates?candidateId=${e}&vacancyId=${t}`,"GET")}getCandidateProfilePictures(e){var t;const o={filter:{ids:e}};return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call("recruitment/candidateProfilePictures","GET",[],o).then((function(e){const t=[];for(let o=0;o<e.data.data.length;o++){const a=e.data.data[o];t[(0,Pf.Z)(a.id)]=a.profilePic}return t}))}addEmployeeAsCandidate(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call("recruitment/recruitedEmployees","POST",e)}wizardCustomFieldAttachmentData(){var e;return null===(e=this._ngServices)||void 0===e?void 0:e.webservice.call("employeeWizardCustomSessionData/wizardCustomFieldAttachmentData","DELETE")}customSessionDataWizardPut(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call("customSessionData/wizard","PUT",e)}customSessionDataWizardGet(){var e;return null===(e=this._ngServices)||void 0===e?void 0:e.webservice.call("customSessionData/wizard","GET")}getEmployees(){var e;const t={page:{offset:0,limit:0}};return null===(e=this._ngServices)||void 0===e?void 0:e.webservice.call("employees","GET",[],t)}documentContent(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call("recruitment/documentDefaultTokenValues","GET",[],e)}exportModifiedDocuments(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call("recruitment/exportModifiedDocuments","POST",e)}getEmployeeRecipients(e,t){var o;const a={filter:{has_work_email:1,employee_name_or_id:e},includeSelf:!1,include:"contactDetails","page[offset]":"0",sort:"fullName"};return null===(o=this._ngServices)||void 0===o?void 0:o.webservice.get("employees",a,{},t)}getSalaryComponents(){return this._ngServices.webservice.get("salaryComponents",{},{})}getPayGrades(){return this._ngServices.webservice.get("recruitment/payGrades",{},{})}getCurrencyTypes(){return this._ngServices.webservice.get("currencyType",{},{})}getEmploymentStatus(){return this._ngServices.webservice.get("employmentStatus",{},{})}getDirectSupervisors(e,t){var o;const a={filter:{employee_name_or_id:e},fields:"empNumber,firstName,middleName,lastName,termination_id,employeeId","page[limit]":"50","page[offset]":"0",sort:"fullName"};return null===(o=this._ngServices)||void 0===o?void 0:o.webservice.get("employees",a,{},t)}getCountries(){return this._ngServices.webservice.get("countries",{},{})}getUSProvinces(){return this._ngServices.webservice.get("provinces",{},{})}getEmployeeReportingMethods(){return this._ngServices.webservice.get("employeeReportingMethods",{},{})}updateCandidateProfilePicture(e,t,o){var a;const i={photo:o,partialUpdate:["photo"],vacancyId:t};return null===(a=this._ngServices)||void 0===a?void 0:a.webservice.call("recruitment/candidate/"+e,"PATCH",i,[])}removeCandidateProfilePicture(e,t){var o;const a={photo:null,partialUpdate:["photo"],candidateId:e,vacancyId:t};return null===(o=this._ngServices)||void 0===o?void 0:o.webservice.call("recruitment/candidate/"+e,"PATCH",a,[])}getHiringManagers(e,t){var o,a;const i=["empNumber","termination_id","employeeId"],l=[...i,e.fields].join(","),n={filter:{employee_name_or_id:e.keyword},include:null===(o=e.include)||void 0===o?void 0:o.join(","),fields:l,"page[limit]":"50","page[offset]":"0",sort:"fullName"};return null===(a=this._ngServices)||void 0===a?void 0:a.webservice.get("employees",n,{},t)}}class Bf{constructor(){this.getDefaultProfilePicName=e=>"candidate-profile-random-"+e%6+".png",this.getMappedCandidateStages=e=>{const t=e&&e.length>0?e:[],o=[];for(const i of t)o[parseInt(i.level)]?o[parseInt(i.level)].label+=", "+i.eventTitle:(o[parseInt(i.level)]=i,o[parseInt(i.level)].label=i.eventTitle);const a=[];for(const[i,l]of Object.entries(o))a.push(l);return a},this.getMappedColorsForCandidateStages=e=>{const t=[{typeId:"7",color:"#76bc21"},{typeId:"8",color:"#eb0910"}],o=t.find((t=>t.typeId===e.typeId));return Object.assign(Object.assign({},e),{color:null===o||void 0===o?void 0:o.color})},this.getSocialMediaLink=(e,t)=>{const o=null===t||void 0===t?void 0:t.find((t=>t.type.name===e));return null===o||void 0===o?void 0:o.profileLink},this.onClickDownloadApplicationForm=e=>this._http.ping().then((()=>{window.open(`${window.location.origin}/${Df}/${e}`,"_self")})),this.filteroutInvalidEmails=e=>e.filter((e=>{const t=!!e.email&&(!e.email||/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9]+)+$/.test(e.email))&&(!e.email||new String(e.email).length<=50);return t&&e.email})),this.sendingCandidateDocumentEmail=!1,this.sendCandidateDocumentEmailMapper=(e,t,o,a,i,l,n,r)=>{if(!this.sendingCandidateDocumentEmail)return this.sendingCandidateDocumentEmail=!0,new Promise(((s,d)=>{try{const d=e=>{let t;return t=e.terminationId?e.label+" ("+`${this._$t("Past Employee")})`:e.label,Object.assign(Object.assign(Object.assign({},e.candidateId?{candidateId:e.candidateId}:{empNumber:e.empNumber||null}),e.empNumber||e.candidateId?{name:t}:{name:null}),{email:e.id})},c=e=>Array.isArray(e)?e.map((e=>d(e))):[e],m=c(e.to),u=c(e.cc),p=c(e.replyTo),v=null===t||void 0===t?void 0:t.value,h=(e,t)=>t?this.filteroutInvalidEmails([...new Set([...e,{empNumber:null,name:null,email:t}])]):e,g=h(m,o.value.to),y=h(u,o.value.cc);let f=h(p,o.value.replyTo);const b=this.getSenderData(n,e.setLoggedInEmployeeAsSender,l,r,f);e.setLoggedInEmployeeAsSender&&l&&(f=this.getReplyToListWhenSenderSelected(l,r));const C=Object.assign(Object.assign(Object.assign(Object.assign({candidateId:i,templateId:a.value.candidateDocumentId,emailDocument:!0,emailSubject:e.subject,emailBody:e.body,recipientTo:g,recipientCc:y},f.length>0&&{recipientReplyTo:f}),{fileType:e.attachmentType,generateDocument:!0}),v?{content:v.documentContent.content}:void 0),b&&{sender:{name:b.name,empNumber:b.empNumber}});this.sendingCandidateDocumentEmail=!1,s(C)}catch(c){this.sendingCandidateDocumentEmail=!1,d(c)}}))},this.getReplyToListWhenSenderSelected=(e,t)=>{const o=[];return t.length>0&&(this.isEmployeeInList(t,e)?o.push(e):t.length>0&&o.push(t[0])),o},this.isEmployeeInList=(e,t)=>{let o=!1;return t&&e.length>0&&e.forEach((e=>{e.empNumber===t.empNumber&&(o=!0)})),o},this.getSenderData=(e,t,o,a,i)=>{let l=null;return e&&o||t&&o?l=o:a.length>0&&(l=o&&this.isEmployeeInList(a,o)?o:i.length>0&&this.getFirstHiringManagerFromList(a,i)?this.getFirstHiringManagerFromList(a,i):a[0]),l},this.getFirstHiringManagerFromList=(e,t)=>{if(t.length>0)for(const o of t)if(o.empNumber)for(const t of e)if(o.empNumber===t.empNumber)return t;return null},this.onKeypressAddEmailAfterValidate=(e,t,o,a,i=50)=>{let l=a.value[t];const n=o.value,r=!!l&&(!l||/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9]+)+$/.test(l)),s=n.$refs.emailDocumentModalForm.model[t];Array.isArray(s)||(n.$refs.emailDocumentModalForm.model[t]=[]);const d=n.$refs.emailDocumentModalForm.model[t].find((e=>e.id===l)),c=!l||new String(l).length<=i;n&&r&&!d&&c&&(n.$refs.emailDocumentModalForm.model[t].push({id:l,label:l}),l=a.value[t]=null,e())},this._http=new Vf,this._$t=ce()}getDirectReportingMethod(e){if(e&&e.length>0){const t=e.find((e=>"Direct"===e.name));if(t)return t;{const t=e.sort(((e,t)=>e.id-t.id));return t[0]}}return null}}const If="1",Lf="2",Ff="3",zf="4",Mf="5",Of="6",Rf="7",_f="8",$f="9",jf="10",Uf="11";var Zf;(function(e){e["JobOffer"]="Job Offer",e["Hired"]="Hired"})(Zf||(Zf={}));Zf.JobOffer,Zf.Hired;var Hf;(function(e){e["JobOffer"]="6",e["Hired"]="7"})(Hf||(Hf={}));const qf={id:void 0,name:"",attachmentDownloadLink:"",description:"",type:"",size:"",isGenerated:!1,createdDate:"",createdTime:"",createdBy:""};var Gf,Wf;(function(e){e["Earning"]="1",e["Deduction"]="2"})(Gf||(Gf={})),function(e){e["Amount"]="1",e["AmountWithPercentage"]="2",e["AmountWithOrWithoutPercentage"]="3"}(Wf||(Wf={}));const Kf=[Wf.AmountWithPercentage,Wf.AmountWithOrWithoutPercentage];function Qf(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,(0,i.mergeProps)({type:"file"},e.$attrs,{"button-label":e.$t("Browse"),placeholder:e.$t("No file chosen")}),null,16,["button-label","placeholder"])}var Jf={name:"fileInput",inheritAttrs:!1,components:{"oxd-input-field":lo.Z}};const Yf=(0,Re.Z)(Jf,[["render",Qf]]);var Xf=Yf;const eb=ce();function tb(e,t,o){return{type:"grid",props:{cols:2},children:{default:ob(e,t,o)},style:{"margin-left":"-10px","margin-right":"-10px"}}}function ob(e,t,o){if(e.questions)return e.questions.map((e=>ab(e,t,o)))}function ab(e,t,o){const a={name:e.answerId,label:e.label};if(e.type.id===If){const t=ib(e);return Object.assign(Object.assign({},a),t)}if(e.type.id===Lf){const t=lb(e);return Object.assign(Object.assign({},a),t)}if(e.type.id===Ff){const t=rb(e);return Object.assign(Object.assign({},a),t)}if(e.type.id===zf){const t=nb(e);return Object.assign(Object.assign({},a),t)}if(e.type.id===Mf){const t=sb(e);return Object.assign(Object.assign({},a),t)}if(e.type.id===Of||e.type.id===Rf){const t=db(e);return Object.assign(Object.assign({},a),t)}if(e.type.id===_f){const i=cb(e,t,o);return Object.assign(Object.assign({},a),i)}if(e.type.id===$f){const t=mb(e);return Object.assign(Object.assign({},a),t)}if(e.type.id===jf){const t=ub(e);return Object.assign(Object.assign({},a),t)}if(e.type.id===Uf){const t=pb(e);return Object.assign(Object.assign({},a),t)}}function ib(e){return{type:"input",validators:gb(e.validationRuleMetaData),value:e.value}}function lb(e){return{type:"textarea",validators:gb(e.validationRuleMetaData),value:e.value}}function nb(e){return{type:"input",validators:fb(e.validationRuleMetaData),value:e.value}}function rb(e){return{type:"custom",validators:hb(e.validationRuleMetaData),component:(0,i.markRaw)(_m),value:e.value}}function sb(e){return{type:"input",validators:yb(e.validationRuleMetaData),value:e.value}}function db(e){const t=[];Object.keys(e.options).forEach((o=>{t.push({id:"string"===typeof o?o:o.toString(),label:e.options[o]})}));const o=t.find((t=>t.id===e.value));return{type:"select",props:{options:t,showEmptySelector:!0},value:o,validators:gb(e.validationRuleMetaData)}}function cb(e,t,o){const a=e.validationRuleMetaData.maxFileSizeInMB?e.validationRuleMetaData.maxFileSizeInMB:"",l=(0,i.ref)("keep");return{type:"custom",component:(0,i.markRaw)(Xf),props:{multiple:!1,buttonLabel:"Browse",inputFile:e.value,deletable:!e.validationRuleMetaData.required,hintPlacement:"bottom",hint:(0,i.computed)((()=>l.value&&"replace"!==l.value?"":eb("Accepts up to {{fileSize}}MB",{fileSize:a}))),downloadBoxClick:()=>{o?window.open(`${window.location.origin}/api/recruitment/candidate/${t}/questionFormAnswers/attachment/${e.value.id}`,"_self"):window.open(`${window.location.origin}/api/recruitment/candidate/${t}/pastVacancyQuestionFormAnswers/attachment/${e.value.id}`,"_self")}},hook:t=>(t.validators=vb(e.validationRuleMetaData),Object.assign({},t)),listeners:{onFileUpdateMode:e=>{l.value=e}}}}function mb(e){let t=0;const o=e.options.map((e=>({id:t++,label:e}))),a=o.find((t=>t.label===e.value));return{type:"select",props:{options:o,showEmptySelector:!0},value:a,validators:gb(e.validationRuleMetaData)}}function ub(e){let t=0;const o=e.options.map((e=>({id:t++,label:e})));let a;return o.forEach((t=>{t.label===e.value&&(a=t.id)})),{type:"radiogroup",props:{options:o},value:a,validators:gb(e.validationRuleMetaData)}}function pb(e){let t=0;const o=e.options.map((e=>({id:t++,label:e}))),a=[];return o.forEach((t=>{null!==e.value&&void 0!==e.value&&e.value.forEach((e=>{t.label===e&&a.push(t.id)}))})),{type:"checkboxgroup",validators:gb(e.validationRuleMetaData),value:a,props:{options:o}}}function vb(e){const t=new Map;return e.required&&t.set("required",Oa),e.allowedFileTypes&&t.set("validFileTypes",ni(e.allowedFileTypes)),e.maxFileSize&&t.set("maxFileSize",li(e.maxFileSize)),t}function hb(e){const{userFormat:t}=Im(),o=new Map;return o.set("validDateFormat",ja(t)),e.required&&o.set("required",Oa),o}function gb(e){const t=new Map;return e.required&&t.set("required",Oa),e.maxLength&&t.set("shouldNotExceedCharLength",$a(e.maxLength)),t}function yb(e){const t=new Map;return t.set("validEmailFormat",si),e.required&&t.set("required",Oa),e.maxLength&&t.set("shouldNotExceedCharLength",$a(e.maxLength)),t}function fb(e){const t=new Map;return t.set("numbersOnly",Ga),e.required&&t.set("required",Oa),e.maxLength&&t.set("shouldNotExceedCharLength",$a(e.maxLength)),t}function bb(e){return{type:"grid",props:{cols:1},children:{default:[{name:e.id,label:"",type:"custom",component:(0,i.markRaw)(Qo.Z),props:{label:"Consent Section"!==e.name?e.name:"",style:{color:"#38455d"}},class:"input-group-label"}]},style:{"margin-left":"-10px","margin-right":"-10px","margin-bottom":"1rem","margin-top":"1.5rem"}}}const Cb=ce();class Sb{constructor(){this.getProfileImageBorderColors=e=>{const t=e%6;let o,a;switch(t){case 0:o="rgb(209 113 86 / 20%)",a="rgb(209 113 86 / 7%)";break;case 1:o="rgb(216 185 99 / 20%)",a="rgb(216 185 99 / 7%)";break;case 2:o="rgb(128 158 139 / 20%)",a="rgb(128 158 139 / 7%)";break;case 3:o="rgb(153 122 133 / 20%)",a="rgb(153 122 133 / 7%)";break;case 4:o="rgb(151 121 157 / 20%)",a="rgb(151 121 157 / 7%)";break;case 5:o="rgb(120 133 160 / 20%)",a="rgb(120 133 160 / 7%)";break}return[{borderColor:a},{borderColor:o}]},this.updateVacancyStage=e=>{const t=new Vf;return new Promise(((o,a)=>{const i={level:e.level,vacancyId:e.vacancyIdParam,partialUpdate:["level"]};t.partialUpdateCandidate(i,e.candidateId).then((e=>{o(e)})).catch((e=>{a(e)}))}))}}getBulletPointStyles(e){return"Accepted"===e?{backgroundColor:"#ddeec7"}:"Rejected"===e?{backgroundColor:"#fac1c3"}:{}}getFormattedDateAndTime(e,t){const o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=this.getNewDate(),l=this.getNewDate(),n=this.getNewDate(),r=this.getNewDate();l.setDate(i.getDate()+1),n.setDate(i.getDate()-1),r.setDate(i.getDate()+7);const s=new Date(e),d=s.getFullYear(),c=o[s.getMonth()],m=s.getDate(),u=a[s.getDay()];let p=s.getHours();const v=s.getMinutes(),h=p>=12?"pm":"am";p%=12;const g=p||12,y=v<10?"0"+v:v;let f="",b="";return f=s.setHours(0,0,0,0)==i.setHours(0,0,0,0)?Cb("Today"):s.setHours(0,0,0,0)==l.setHours(0,0,0,0)?Cb("Tomorrow"):s.setHours(0,0,0,0)==n.setHours(0,0,0,0)?Cb("Yesterday"):s<r&&s>i?Cb(u):d==i.getFullYear()?Cb(c)+" "+m:m+" "+Cb(c)+" "+d,b=g+":"+y+h+" "+t,{date:f,time:b}}getNewDate(){return new Date}getPastEventData(e,t,o){let a=[];return Object.entries(e).forEach((([e,i])=>{i.jobCandidateVacancy.id===t&&(a=i.events.filter((e=>e.vacancyEvent.type.isInterview||e.vacancyEvent.type.isTest||"Job Offer"===e.vacancyEvent.type.type)).map((e=>Object.assign(Object.assign({},e),{title:e.vacancyEvent.eventTitle,date:e.scheduledTime&&e.scheduledTimeZone?this.getFormattedDateAndTime(e.scheduledTime,this.getTimeZoneLabelByKey(o,e.scheduledTimeZone)).date:"",time:e.scheduledTime&&e.scheduledTimeZone?this.getFormattedDateAndTime(e.scheduledTime,this.getTimeZoneLabelByKey(o,e.scheduledTimeZone)).time:"",level:e.vacancyEvent.level,status:e.finalStatus?e.finalStatus:"",scoreType:e.vacancyEvent.isScoreType,score:e.finalScore?100*Number(e.finalScore)/Number(e.vacancyEvent.maxScore):0,styles:{backgroundColor:"rgb(31, 111, 253)"}}))))})),a}getPastVacancies(e,t){const o=[];return t&&o.push({id:"-1",label:t+" ("+Cb("Current Vacancy")+")"}),Object.entries(e).forEach((([e,t])=>{o.push({id:e,label:Cb(t.jobCandidateVacancy.vacancyName)})})),o}getCurrentEventData(e,t){return e.filter((e=>e.vacancyEvent.type.isInterview||e.vacancyEvent.type.isTest||e.vacancyEvent.type.id===Hf.JobOffer)).map((e=>Object.assign(Object.assign({},e),{title:e.vacancyEvent.eventTitle,date:e.scheduledTime&&e.scheduledTimeZone?this.getFormattedDateAndTime(e.scheduledTime,this.getTimeZoneLabelByKey(t,e.scheduledTimeZone)).date:"",time:e.scheduledTime&&e.scheduledTimeZone?this.getFormattedDateAndTime(e.scheduledTime,this.getTimeZoneLabelByKey(t,e.scheduledTimeZone)).time:"",level:e.vacancyEvent.level,status:e.finalStatus?e.finalStatus:"",scoreType:e.vacancyEvent.isScoreType,score:e.finalScore?100*Number(e.finalScore)/Number(e.vacancyEvent.maxScore):0,styles:e.finalStatus?this.getBulletPointStyles(e.finalStatus):{}})))}getTimeZoneLabelByKey(e,t){const o=e.find((e=>e.id===t));return o&&o.label?o.label:""}getLatestEventData(e){const t=e.filter((e=>{let t=!1;return e.state.forEach((e=>{e&&e.active&&(t=!0)})),t}));return 0!=t.length?t:e.filter((t=>t.level===e[e.length-1].level))}getFormattedLocalDateTime(e){const t=La().utc(e).toDate(),o=La()(t).local().format("hh:mm A"),a=La()(t).local().format("YYYY-MM-DD"),i=o.split(/\s/)[0]+" "+Cb(o.split(/\s/)[1]);return{localDate:a,localTime:i}}}const wb=ce();function Eb(e,t,o,a,l,n,r,s){var d;return(0,A.mG)(this,void 0,void 0,(function*(){const c=new Sb,m=Im(),u=m.locale,p=ee(e.dateOfApplication,m.jsSavingFormat)||new Date(e.dateOfApplication),v=(0,se.p6)(p,m.jsDisplayFormat,{locale:u});let h;h=!s&&(null===r||void 0===r?void 0:r.length)>0?[{type:"divider",style:{margin:"2.5rem 0",borderTop:"1px solid #1e6ceb"}}]:[],r.forEach((t=>{void 0!==t.questions&&t.questions.length>0&&(h.push(bb(t)),h.push(tb(t,e.id,s)))}));const g=t.map((e=>({id:e.id||e.vacancyId,label:e.label||e.vacancyName}))).filter((e=>e.id>-1));let y,f=[{id:-1,label:`${wb("No Vacancy Selected")}`},...g];o?(y=f.find((e=>e.id===o)),y||(f=[...f,{id:e.vacancy.vacancyId,label:e.vacancy.name}],y=f.find((e=>e.id===o)))):y={id:-1,label:`${wb("No Vacancy Selected")}`},l.vacancySwitchValues.oldValue=y;const b=new Bf,C=b.getMappedCandidateStages(e.candidateStages);let S=e.candidateStage;"string"===typeof e.candidateStage&&(S={typeId:"1",id:"1",label:e.candidateStage});const w=C.find((t=>e.candidateStage===t.eventTitle)),E=b.getMappedColorsForCandidateStages(o&&w?w:S),k=o?E:"Application Received",x=(0,i.getCurrentInstance)(),N=(new Vf,null===x||void 0===x?void 0:x.appContext.config.globalProperties.$toast),A=e.socialMedia?e.socialMedia:[];n.facebook=b.getSocialMediaLink("Facebook",A),n.linkedIn=b.getSocialMediaLink("LinkedIn",A),n.twitter=b.getSocialMediaLink("Twitter",A);const D=(0,i.ref)(),T=[{type:"divider",style:{margin:"0"}},{type:"action",children:{default:[{name:"required",label:"",type:"custom",component:(0,i.markRaw)(Hd),style:{"margin-right":"auto",padding:"0px"}},{name:"submit",label:wb("Save"),type:"button",style:{"margin-left":"0.5rem"},props:{type:"submit",displayType:"secondary"}}]},style:{"padding-top":"1.2rem"}}],P=[{name:"currentStageOfRecruitment",label:"",type:"infobox",validators:new Map([["required",Oa]]),props:{disabled:a,rows:3,infoLabel:wb("Current Stage"),class:"details-info-box-wrapper",options:C.map((e=>{let t=null;return"Hired"===e.eventTitle?t="#76bc21":"Rejected"===e.eventTitle&&(t="#eb0910"),Object.assign(Object.assign({},e),{color:t})})),clickableText:"Hired"===k.eventTitle&&e.permittedToAddAsEmployee?wb("Add as Employee"):void 0},value:k,hook:(t,o)=>(o.currentStageOfRecruitment.id!==t.value.id&&o.currentStageOfRecruitment.typeId&&(c.updateVacancyStage({candidateId:e.id,level:o.currentStageOfRecruitment.level,vacancyIdParam:o.vacancy.id,typeId:o.currentStageOfRecruitment.typeId}).then((e=>{e.data&&(this.emit("updateCandidateEvent",e.data.data.events),this.emit("updateCandidate",!1,e.data.data),o.currentStageOfRecruitment.typeId===Hf.JobOffer&&this.emit("editJobOfferModal:show",e.data.data),N.success({title:wb(Ec),message:wb(Se)}))})).catch((()=>{N.error({title:wb(Ve),message:wb(Ce)})})),t.value=o.currentStageOfRecruitment,D.value=o.currentStageOfRecruitment.id),Object.assign({},t)),listeners:{onClickLabel:e=>{this.emit("click-label",e)}}},{name:"vacancy",label:"",type:"infobox",validators:new Map([["required",Oa]]),props:{disabled:a,rows:3,infoLabel:wb("Vacancy"),class:"details-info-box-wrapper",options:f},value:y,hook:(e,t)=>(t.vacancy.id!==l.vacancySwitchValues.oldValue.id&&(l.vacancySwitchConfirmationModal.isShow=!0,l.vacancySwitchValues.oldValue=e.value),Object.assign({},e))},{name:"selectedJobTitle",label:"",type:"infobox",validators:new Map([["required",Oa]]),props:{rows:3,infoLabel:wb("Job Title"),class:"details-info-box-wrapper"},value:e.vacancy?null===(d=e.vacancy.jobTitle)||void 0===d?void 0:d.name:`${wb("Not Available")}`},{name:"dateOfApplication",label:"",type:"infobox",validators:new Map([["required",Oa]]),props:{rows:3,infoLabel:wb("Date of Application"),class:"details-info-box-wrapper"},value:v}];let V=[{type:"grid",props:{cols:1},children:{default:[{name:"vacancy&JobDetails",label:"",type:"custom",component:(0,i.markRaw)(Qo.Z),props:{label:wb("Vacancy and Job Details"),style:{color:"#38455d"}},class:"input-group-label"}]},style:{"margin-left":"-10px","margin-right":"-10px","margin-bottom":"1rem"}},{type:"grid",props:{cols:4},children:{default:P},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"grid",props:{cols:1},children:{default:[{name:"personalDetails",label:"",type:"custom",component:(0,i.markRaw)(Qo.Z),props:{label:wb("Personal Details"),style:{color:"#38455d"}},class:"input-group-label"}]},style:{"margin-left":"-10px","margin-right":"-10px","margin-bottom":"1rem","margin-top":"1.5rem"}},{type:"grid",props:{cols:3},children:{default:[{name:"firstName",label:wb("First Name"),type:"input",validators:new Map([["required",Oa],["shouldNotExceedCharLength",$a(30)]]),value:e.firstName},{name:"middleName",label:wb("Middle Name"),type:"input",validators:new Map([["shouldNotExceedCharLength",$a(30)]]),value:e.middleName},{name:"lastName",label:wb("Last Name"),type:"input",validators:new Map([["required",Oa],["shouldNotExceedCharLength",$a(30)]]),value:e.lastName}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"grid",props:{cols:1},children:{default:[{name:"contactDetails",label:"",type:"custom",component:(0,i.markRaw)(Qo.Z),props:{label:wb("Contact Details"),style:{color:"#38455d"}},class:"input-group-label"}]},style:{"margin-left":"-10px","margin-right":"-10px","margin-bottom":"1rem","margin-top":"1.5rem"}},{type:"grid",props:{cols:3},children:{default:[{name:"email",label:wb("Email"),type:"input",validators:new Map([["required",Oa],["validEmailFormat",si],["shouldNotExceedCharLength",$a(254)]]),value:e.email},{name:"contactNo",label:wb("Contact Number"),type:"input",validators:new Map([["validPhoneNumberFormat",di],["shouldNotExceedCharLength",$a(30)]]),value:e.contactNo}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"grid",props:{cols:1},children:{default:[{name:"socialMediaLinks",label:"",type:"custom",component:(0,i.markRaw)(Qo.Z),props:{label:wb("Social Media Links"),style:{color:"#38455d"}},class:"input-group-label"}]},style:{"margin-left":"-10px","margin-right":"-10px","margin-bottom":"1rem","margin-top":"1.5rem"}},{type:"grid",props:{cols:2},children:{default:[{name:"Facebook",label:wb("Facebook"),type:"input",validators:new Map([["socialMediaFacebook",ci],["checkSocialMediaUrlForSpecialCases",mi],["shouldNotExceedCharLength",$a(100)]]),props:{imageIcon:"images/facebook_icon.svg",imageIconClick:()=>{window.open(n.facebook,"_blank")}},value:n.facebook,hook:(e,t)=>(n.facebook&&e&&"undefined"!==typeof e.props&&(e.props.isIconClickable=t.Facebook===n.facebook),Object.assign({},e))},{name:"Twitter",label:wb("Twitter"),type:"input",validators:new Map([["socialMediaTwitter",pi],["checkSocialMediaUrlForSpecialCases",mi],["shouldNotExceedCharLength",$a(100)]]),props:{imageIcon:"images/twitter_icon.svg",imageIconClick:()=>{window.open(n.twitter,"_blank")}},value:n.twitter,hook:(e,t)=>(n.twitter&&e&&"undefined"!==typeof e.props&&(e.props.isIconClickable=t.Twitter===n.twitter),Object.assign({},e))},{name:"LinkedIn",label:wb("LinkedIn"),type:"input",validators:new Map([["socialMediaLinkedin",ui],["checkSocialMediaUrlForSpecialCases",mi],["shouldNotExceedCharLength",$a(100)]]),props:{imageIcon:"images/linkedin_icon.svg",imageIconClick:()=>{window.open(n.linkedIn,"_blank")}},value:n.linkedIn,hook:(e,t)=>(n.linkedIn&&e&&"undefined"!==typeof e.props&&(e.props.isIconClickable=t.LinkedIn===n.linkedIn),Object.assign({},e))}]},style:{"margin-left":"-10px","margin-right":"-10px"}}];const B=!!e.comment;if(B){const t=[{type:"grid",props:{cols:1},children:{default:[{name:"commentSection",label:"",type:"custom",component:(0,i.markRaw)(Qo.Z),props:{label:`${e.firstName}'s ${wb("Comment")}`,style:{color:"#38455d"}},class:"input-group-label"}]},style:{"margin-left":"-10px","margin-right":"-10px","margin-bottom":"1rem","margin-top":"1.5rem"}},{type:"grid",props:{cols:1},children:{default:[{name:"comment",label:"",type:"textarea",validators:new Map([["shouldNotExceedCharLength",$a(65535)]]),props:{readonly:!B},value:e.comment}]},style:{"margin-left":"-10px","margin-right":"-10px"}}];V=V.concat(t)}const I=[{type:"grid",props:{cols:1},children:{default:[{name:"keywords",label:wb("Keywords"),type:"input",validators:new Map([["shouldNotExceedCharLength",$a(254)]]),props:{hint:wb("Enter comma separated words")},value:e.keywords}]},style:{"margin-left":"-10px","margin-right":"-10px"}}];return V=V.concat(I),{name:"updateCandidateForm",disabled:a,layout:a.value?[...V,...h]:[...V,...h,...T]}}))}var kb=Eb,xb={changePropertyLabel(e,t,o){e.layout.forEach((e=>{var a;"grid"!==e.type&&"action"!==e.type||null===(a=e.children)||void 0===a||a.default.forEach((e=>{e.name===t&&e.props&&(e.props.label=o)}))}))},changeInfoboxOptions(e,t,o){e.layout.forEach((e=>{var a;"grid"===e.type&&(null===(a=e.children)||void 0===a||a.default.forEach((e=>{e.name===t&&e.props&&(e.props.options=o)})))}))},changeFileInput(e,t,o,a){e.layout.forEach((e=>{var i;"grid"===e.type&&(null===(i=e.children)||void 0===i||i.default.forEach((e=>{e.name===t&&e.props&&(e.props.inputFile=o,e.props.initialFileUpdateMode=a)})))}))}},Nb=(0,i.defineComponent)({name:"profile-details",components:{"oxd-schema-form":yc.Z,"confirmation-modal":_d},props:{candidate:{type:Object},vacancies:{type:Array,default:()=>[]},vacancyId:{type:String},dataGroupPermissions:{type:Object},isCurrentVacancySelected:{type:Boolean},questionFormFields:{type:[],default:()=>[]},questionIdsWithTypes:{type:Array,default:()=>[]},selectedVacancyIdForEvents:{type:String}},setup(e,t){var o,a;const l=(0,i.reactive)({vacancySwitchConfirmationModal:{isShow:!1},vacancySwitchValues:{oldValue:""}}),n=(0,i.reactive)({facebook:"",linkedIn:"",twitter:""}),r=(0,i.inject)("ngServices"),s=new Vf,d=r.$stateParams,c=(0,i.inject)("$toast"),m=ce(),u=(0,i.ref)(!1),p=(0,i.ref)(null);let v=!1;(!(null===(o=e.dataGroupPermissions)||void 0===o?void 0:o.update)||(null===(a=e.candidate)||void 0===a?void 0:a.isHired)||e.selectedVacancyIdForEvents&&"-1"!==e.selectedVacancyIdForEvents)&&(u.value=!0);const h=new Bf,{model:g,schema:y}=(0,fc.Z)(kb.call(t,e.candidate,e.vacancies,e.vacancyId?e.vacancyId:"",u,l,n,e.questionFormFields,e.isCurrentVacancySelected)),f=e=>{"confirm"===e?(l.vacancySwitchValues.oldValue=g.value.vacancy,g.value.vacancy.id=g.value.vacancy.id>0?g.value.vacancy.id:"",b(d.candidateId,g.value.vacancy.id),l.vacancySwitchConfirmationModal.isShow=!1):(g.value.vacancy=l.vacancySwitchValues.oldValue,l.vacancySwitchConfirmationModal.isShow=!1)},b=(e,o)=>{const a={vacancyId:o,partialUpdate:["vacancyId"]};""===o&&delete a.vacancyId,s.partialUpdateCandidate(a,e).then((e=>{var o;if(e.data){const a=e.data.data,i={id:"1",label:"Application Received",level:"1"};g.value.currentStageOfRecruitment=i,t.emit("updateCandidate",!1,a),a.vacancy||(g.value.selectedJobTitle=`${m("Not Available")}`,g.value.currentStageOfRecruitment=i.label,t.emit("updateCandidateEvent",[]),xb.changeInfoboxOptions(y.value,"currentStageOfRecruitment",[])),a.vacancy&&(xb.changeInfoboxOptions(y.value,"currentStageOfRecruitment",h.getMappedCandidateStages(a.candidateStages)),g.value.selectedJobTitle=a.vacancy.jobTitle.name,t.emit("updateCandidateEvent",a.events)),r.$state.go("recruitment.candidateProfile.view",{vacancyId:null===(o=a.vacancy)||void 0===o?void 0:o.vacancyId,candidateId:a.id},{reload:!1}),c.success({title:m(Ec),message:m(Se)})}})).catch((()=>{l.vacancySwitchConfirmationModal.isShow=!1,null===c||void 0===c||c.error({title:m(Ve),message:m(Ce)})}))},C=()=>{var o;if(!v){v=!0,t.emit("updateCandidate",!0,void 0),g.value.vacancy.id=g.value.vacancy.id>0?g.value.vacancy.id:"";let a={};e.questionIdsWithTypes.length>0&&(null===(o=e.questionIdsWithTypes)||void 0===o||o.forEach((e=>{let t={};if(e.type===Of||e.type===Rf)g.value[e.id]?t[e.id]=g.value[e.id].id:t[e.id]=null;else if(e.type===_f)g.value[e.id]?t[e.id]=Object.assign({content:g.value[e.id][0].base64?g.value[e.id][0].base64:null,name:g.value[e.id][0].name,type:g.value[e.id][0].type,size:g.value[e.id][0].size},g.value[e.id][0].fileUpdateMode&&{updateMode:g.value[e.id][0].base64||"replace"!==g.value[e.id][0].fileUpdateMode?g.value[e.id][0].fileUpdateMode:"keep"}):t[e.id]=null;else if(e.type===$f)g.value[e.id]?t[e.id]=g.value[e.id].label:t[e.id]=null;else if(e.type===Uf){let o=[];g.value[e.id].forEach((t=>{o.push(e.options[t])})),o.length>0?t[e.id]=o:t[e.id]=null}else if(e.type===jf){const o=e.options[g.value[e.id]];t[e.id]=o||null}else g.value[e.id]?t[e.id]=g.value[e.id]:t[e.id]=null;a=Object.assign(Object.assign({},a),t)})));const i=Object.assign({firstName:g.value.firstName,middleName:g.value.middleName,lastName:g.value.lastName,email:g.value.email,facebook:g.value.Facebook,twitter:g.value.Twitter,linkedin:g.value.LinkedIn,contactNo:g.value.contactNo,keywords:g.value.keywords,vacancyId:g.value.vacancy.id,level:g.value.currentStageOfRecruitment.level},e.questionIdsWithTypes.length>0&&{answers:a});g.value.contactNo||delete i.contactNo,g.value.keywords||delete i.keywords,""===g.value.vacancy.id&&delete i.vacancyId,s.updateCandidateProfile(i,d.candidateId).then((t=>{var o,a;const i=t.data.data,l=i.socialMedia||[];S(i,l),v=!1,(null===(o=e.questionIdsWithTypes)||void 0===o?void 0:o.length)>0&&(null===(a=e.questionIdsWithTypes)||void 0===a||a.forEach((e=>{e.type===_f&&xb.changeFileInput(y.value,e.id,i.questionFormAnswers[e.id],"keep")})))})).catch((()=>{w(),v=!1}))}},S=(e,o)=>{g.value.Facebook=h.getSocialMediaLink("Facebook",o),g.value.Twitter=h.getSocialMediaLink("Twitter",o),g.value.LinkedIn=h.getSocialMediaLink("LinkedIn",o),n.facebook=g.value.Facebook,n.linkedIn=g.value.LinkedIn,n.twitter=g.value.Twitter,e.vacancy||(g.value.currentStageOfRecruitment="Application Received",g.value.selectedJobTitle=`${m("Not Available")}`);const a=`${e.firstName}'s ${m("Comment")}`;xb.changePropertyLabel(y.value,"commentSection",a),t.emit("updateCandidate",!1,e),c.success({title:m(Ec),message:m(Se)})},w=()=>{t.emit("updateCandidate",!1,void 0),null===c||void 0===c||c.error({title:m(Ve),message:m(Ce)})};return(0,i.watch)((()=>l.vacancySwitchConfirmationModal.isShow),(()=>(0,A.mG)(this,void 0,void 0,(function*(){yield(0,i.nextTick)();const e=p.value,t=null===e||void 0===e?void 0:e.$el.querySelector('[data-test="cancelButton"]');setTimeout((()=>{t.focus()}))})))),{model:g,schema:y,state:l,onSwitchVacancyConfirm:f,saveCandidate:C,vacancySwitchConfirmationModal:p}}});const Ab=(0,Re.Z)(Nb,[["render",Af],["__scopeId","data-v-2b86cf5b"]]);var Db=Ab;const Tb=e=>((0,i.pushScopeId)("data-v-4ddf47f2"),e=e(),(0,i.popScopeId)(),e),Pb={key:0,style:{"min-height":"80vh",display:"flex"}},Vb=["data"],Bb={class:"empty-msg-container"},Ib={class:"empty-msg"},Lb=Tb((()=>(0,i.createElementVNode)("img",{src:"images/noResumeFound.png",class:"no-resume-found"},null,-1))),Fb={class:"caption"},zb={key:1,class:"floating-container"};function Mb(e,t,o,a,l,n){const r=(0,i.resolveComponent)("add-resume-note-card"),s=(0,i.resolveComponent)("oxd-icon-button"),d=(0,i.resolveComponent)("update-resume-modal"),c=(0,i.resolveComponent)("delete-resume-modal");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[e.updatingResume?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",Pb,[(0,i.createElementVNode)("div",{style:(0,i.normalizeStyle)({width:e.addResumeNoteCardState?"40%":"0%"})},[e.addResumeNoteCardState?((0,i.openBlock)(),(0,i.createBlock)(r,{key:0,commentGroups:e.commentGroups,hideAddInput:!e.hasPermissionsForResumeNotes,class:"card-container","onNote:add":e.addNotes,"onNote:update":e.updateNotes,"onNote:delete":e.deleteNotes,"onUpdate:show":e.toggleAddResumeNoteCard,onClose:e.toggleAddResumeNoteCard},null,8,["commentGroups","hideAddInput","onNote:add","onNote:update","onNote:delete","onUpdate:show","onClose"])):(0,i.createCommentVNode)("",!0)],4),(0,i.createElementVNode)("div",{style:(0,i.normalizeStyle)({width:e.addResumeNoteCardState?"60%":"100%"})},[((0,i.openBlock)(),(0,i.createElementBlock)("object",{key:e.resumeUrl,style:{height:"100%",width:"100%"},class:"pdf-object",id:"myPdf",type:"text/html",data:e.resumeUrl},[(0,i.createElementVNode)("div",Bb,[(0,i.createElementVNode)("div",Ib,[Lb,(0,i.createElementVNode)("div",Fb,(0,i.toDisplayString)(e.$t("Sorry, No Resume Found!")),1)])])],8,Vb))],4)])),!e.updatingResume&&e.hasPermissionsForResumeNotes?((0,i.openBlock)(),(0,i.createElementBlock)("div",zb,[e.hasPermissionsForResume?((0,i.openBlock)(),(0,i.createBlock)(s,{key:0,id:"addResume",name:e.isResumeDeleted?"oxd-file-upload":"oxd-replace-resume",size:"small",style:(0,i.normalizeStyle)(e.floatingButtonStyle),onClick:e.addModalClick,tooltip:e.isResumeDeleted?e.$t("Upload New Resume"):e.$t("Replace Resume")},null,8,["name","style","onClick","tooltip"])):(0,i.createCommentVNode)("",!0),e.addResumeNoteCardState?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createBlock)(s,{key:1,id:"addNote",name:"oxd-note",size:"small",style:(0,i.normalizeStyle)(e.floatingButtonStyle),onClick:e.addResumeNoteClick,tooltip:e.$t("Add Note")},null,8,["style","onClick","tooltip"])),e.isResumeRequired||e.isResumeDeleted||!e.hasPermissionsForResume?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createBlock)(s,{key:2,id:"deleteResume",class:(0,i.normalizeClass)("row-action-button-icon"),name:"oxd-trash",size:"small",style:(0,i.normalizeStyle)(e.floatingButtonStyle),onClick:e.deleteModalClick,tooltip:e.$t("Delete Resume")},null,8,["style","onClick","tooltip"]))])):(0,i.createCommentVNode)("",!0),e.updateResumeModalState?((0,i.openBlock)(),(0,i.createBlock)(d,{key:2,loading:e.updatingResume,isResumeDeleted:e.isResumeDeleted,onSubmitValid:e.updateResume,"onUpdate:show":e.toggleUpdateResumeModal},null,8,["loading","isResumeDeleted","onSubmitValid","onUpdate:show"])):(0,i.createCommentVNode)("",!0),e.deleteEventModalState?((0,i.openBlock)(),(0,i.createBlock)(c,{key:3,onConfirmationModalAction:t[0]||(t[0]=t=>e.deleteResume(t))})):(0,i.createCommentVNode)("",!0)],64)}function Ob(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-schema-form"),s=(0,i.resolveComponent)("form-modal");return(0,i.openBlock)(),(0,i.createBlock)(s,{style:{width:"90%",maxWidth:"550px"}},{title:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.modalTitle)),1)])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(r,(0,i.mergeProps)({schema:e.schema,model:e.model,"onUpdate:model":t[0]||(t[0]=t=>e.model=t)},e.$attrs),null,16,["schema","model"])])),_:1})}const Rb=ce();function _b(e,t){return(0,A.mG)(this,void 0,void 0,(function*(){const o=yield e;return{name:"addResumeForm",layout:[{type:"grid",props:{cols:1},children:{default:[{name:"file",label:Rb("Select Resume"),type:"custom",component:(0,i.markRaw)(Xf),props:{multiple:!1,hintPlacement:"bottom",hint:Rb("Accepts .docx, .doc, .odt, .pdf, .rtf, .txt up to {{fileSize}}MB",{fileSize:Math.round(o.recruitment.resumeMaxAttachmentSize/1048576)})},class:["--span-column-2"],hook:(e,t)=>{const a=new Map([["validFileTypes",ni(["application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","application/vnd.oasis.opendocument.text","application/pdf","application/rtf","text/plain"])],["maxFileSize",li(o.recruitment.resumeMaxAttachmentSize)],["required",Oa]]);return e.validators=a,Object.assign({},e)}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"divider",style:{margin:"0"}},{type:"action",children:{default:[{name:"required",label:"",type:"custom",component:(0,i.markRaw)(Hd),style:{"margin-right":"auto",padding:"0px"}},{name:"reset",label:Rb("Cancel"),type:"button",props:{type:"button",displayType:"ghost"},listeners:{onClick:()=>{this.emit("update:show",!0)}}},{name:"submit",label:Rb(t?"Upload":"Save"),type:"button",style:{"margin-left":"0.5rem"},props:{type:"submit",displayType:"secondary"}}]},style:{"padding-top":"1.2rem"}}]}}))}var $b=_b,jb=(0,i.defineComponent)({name:"addResumeModal",components:{"form-modal":gc,"oxd-schema-form":yc.Z},props:{isResumeDeleted:{type:Boolean,required:!1}},setup(e,t){const{settings:o}=vu(),a=e.isResumeDeleted?"Upload New Resume":"Replace Resume",{model:i,schema:l}=(0,fc.Z)($b.call(t,o,e.isResumeDeleted));return{model:i,schema:l,modalTitle:a}}});const Ub=(0,Re.Z)(jb,[["render",Ob],["__scopeId","data-v-419a83f8"]]);var Zb=Ub;const Hb={style:{display:"flex","align-items":"center"}},qb={style:{"flex-grow":"1"}};function Gb(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-close-button"),s=(0,i.resolveComponent)("oxd-schema-form"),d=(0,i.resolveComponent)("form-card");return(0,i.openBlock)(),(0,i.createBlock)(d,{class:"oxd-add-resume-note-card"},{title:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Hb,[(0,i.createElementVNode)("div",qb,(0,i.toDisplayString)(e.$t("Resume Notes")),1),(0,i.createVNode)(r,{class:"oxd-dialog-close-button-position",onClick:e.closeResumeNoteCardClick},null,8,["onClick"])])])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(s,(0,i.mergeProps)({schema:e.schema,model:e.model,"onUpdate:model":t[0]||(t[0]=t=>e.model=t),enableFirstElementFocus:!1},e.$attrs),null,16,["schema","model"])])),_:1})}const Wb=ce();function Kb(e,t){return(0,A.mG)(this,void 0,void 0,(function*(){return{name:"addResumeNoteForm",layout:[{type:"grid",props:{cols:1},children:{default:[{name:"time",label:Wb("Time"),type:"time",class:"oxd-hidden-input-group",props:{disabled:!0}},{name:"notes",label:"",type:"comments",class:"mb-0--oxd-input-group",props:{enableAvatar:!0,scrollHeight:"auto",stackConfirmationElements:!0,commentThreadMinHeight:"250px",maxCharLength:65535,commentGroups:e,hideAddInput:t,commentBoxLabel:Wb("Add Note"),hideEmptyPlaceholder:!0,commentBoxPlaceholder:Wb("Write your note"),requiredEditCommentErrorMsg:Wb("Required"),unsavedEditCommentErrorMsg:Wb("Note should be either updated or removed"),unsavedAddCommentErrorMsg:Wb("Note should be either added or removed"),commentDeleteConfirmationMsg:Wb("The current note will be permanently deleted. Are you sure you want to continue?")},validators:new Map([["shouldNotExceedCharLength",$a(65535)]]),listeners:{onAddComment:(e,t)=>{this.emit("note:add",e,t)},onUpdateComment:(e,t)=>{this.emit("note:update",e,t)},onDeleteComment:(e,t)=>{this.emit("note:delete",e,t)},onCommentEditHasError:(e,t)=>{this.emit("note:hasError",e,t)}}}]},style:{"margin-left":"-10px","margin-right":"-10px"}}]}}))}var Qb=Kb,Jb=(0,i.defineComponent)({name:"addResumeNoteCard",components:{"form-card":Ly,"oxd-schema-form":yc.Z,"oxd-close-button":Ko.Z},props:{commentGroups:{type:Object,required:!0},hideAddInput:{type:Boolean,required:!0}},methods:{closeResumeNoteCardClick(){this.$emit("close")}},setup:function(e,t){const o=(0,i.toRef)(e,"commentGroups"),{model:a,schema:l}=(0,fc.Z)(Qb.call(t,o,e.hideAddInput));return{model:a,schema:l}}});const Yb=(0,Re.Z)(Jb,[["render",Gb]]);var Xb=Yb,eC=(0,i.defineComponent)({name:"profile-resume",components:{"oxd-icon-button":D.Z,"update-resume-modal":Zb,"delete-resume-modal":kr,"add-resume-note-card":Xb},emits:["updateCandidate","resume-notes:delete","setNotes","updateAuditlog"],props:{candidateData:{type:Object,required:!0},dataGroupPermissions:{type:Object,required:!0},resumeNoteGroups:{type:Array,default:()=>[]},selectedVacancyIdForEvents:{type:String}},setup(e,{emit:t}){var o,a,l,n,r,s,d;const c=(0,i.inject)("$toast"),m=ce(),u=new Vf,p=new Bf,{jsDisplayFormat:v,locale:h}=Im(),g=e=>(0,se.p6)(new Date(e),v,{locale:h}),y=(0,i.ref)(!0),f=(0,i.ref)(!0);(!(null===(o=e.dataGroupPermissions)||void 0===o?void 0:o.update)||(null===(a=e.candidateData)||void 0===a?void 0:a.isHired)||e.selectedVacancyIdForEvents&&"-1"!==e.selectedVacancyIdForEvents)&&(y.value=!1),(!(null===(l=e.dataGroupPermissions)||void 0===l?void 0:l.update)||e.selectedVacancyIdForEvents&&"-1"!==e.selectedVacancyIdForEvents)&&(f.value=!1);const b=(0,i.ref)(!1),C=(0,i.ref)(!1),S=(0,i.ref)(e.resumeNoteGroups),w=(0,i.ref)(!1),E=(0,i.ref)(!1),k=(0,i.ref)(null==(null===(n=e.candidateData)||void 0===n?void 0:n.attachment)),x=(0,i.ref)(e.candidateData),N=(0,i.computed)((()=>{var e,t;return(null===(e=x.value)||void 0===e?void 0:e.notes)?null===(t=x.value)||void 0===t?void 0:t.notes:[]})),A=()=>{var e,t,o;let a="";return(null===(e=x.value)||void 0===e?void 0:e.attachment)&&(null===(t=x.value)||void 0===t?void 0:t.attachment.name)&&(a=null===(o=x.value)||void 0===o?void 0:o.attachment.name,a=a.replace(/\.[^/.]+$/,"")),encodeURIComponent(a)},D=(0,i.ref)("null"),T=()=>{var e;D.value=`/${Tf}/${null===(e=x.value)||void 0===e?void 0:e.id}/alternativeFileName/${A()}?isInline=1`},P=(0,i.ref)(!!(null===(r=x.value)||void 0===r?void 0:r.vacancy)&&(null===(d=null===(s=x.value)||void 0===s?void 0:s.vacancy)||void 0===d?void 0:d.isResumeRequired)),V=()=>{b.value=!0},B=()=>{O(),C.value=!0},I=()=>{E.value=!0},L=()=>{b.value=!b.value},F=()=>{C.value=!C.value},z=e=>`images/${p.getDefaultProfilePicName(e)}`,M=e=>{const t=e.addedEmployee?{id:e.addedEmployee.id,commenterName:ge.getEmployeeName(e.addedEmployee.firstName,e.addedEmployee.middleName,e.addedEmployee.lastName,Boolean(e.addedEmployee.terminationId)),avatarUrl:e.addedEmployee.profilePic?ge.base64ImageConvertion("image/jpeg",e.addedEmployee.profilePic.image):z(e.addedEmployee.id)}:{id:"-1",commenterName:ge.getEmployeeName("Admin","","",!1)};return{groupId:"groupId",id:e.id,allowToEdit:e.editable,allowToDelete:e.deletable,content:e.note,user:t,addedTime:e.addedTime,time:e.addedTime,formattedTime:g(e.addedTime),edited:!!e.updatedTime||(e.edited||!1)}},O=()=>{var e;const t=(0,xu.x0)(6),o=N.value.filter((e=>e.addedFromResume)).map((e=>M(e))),a=o.sort(((e,t)=>e.id-t.id));S.value=(null===(e=N.value)||void 0===e?void 0:e.length)>0?[{id:t,comments:a}]:[]};O();const R=e=>{var o,a,i;w.value=!0,u.updateCandidateResume({vacancyId:null===(a=null===(o=x.value)||void 0===o?void 0:o.vacancy)||void 0===a?void 0:a.vacancyId,partialUpdate:["file"],file:{file:e.file[0].base64,fileName:e.file[0].name,fileType:e.file[0].type,fileSize:e.file[0].size}},null===(i=x.value)||void 0===i?void 0:i.id).then((e=>{var o;if(e.data){const a=e.data.data;D.value=`/${Tf}/${null===(o=x.value)||void 0===o?void 0:o.id}?isInline=1`,t("updateCandidate",!0,a,!0),w.value=!1,b.value=!1,k.value?(k.value=!1,c.success({title:m(Ec),message:m(be)})):c.success({title:m(Ec),message:m(Se)})}})).catch((()=>{t("updateCandidate",!1,void 0),w.value=!1,null===c||void 0===c||c.error({title:m(Ve),message:m(Ce)})}))},_=o=>{var a,i,l;"delete"===o&&(w.value=!0,u.deleteCandidateResume({vacancyId:null===(i=null===(a=e.candidateData)||void 0===a?void 0:a.vacancy)||void 0===i?void 0:i.vacancyId,partialUpdate:["file"]},null===(l=x.value)||void 0===l?void 0:l.id).then((e=>{if(e.data){const o=e.data.data;x.value=o,D.value="null",k.value=!0,t("updateCandidate",!0,o),w.value=!1,c.success({title:m(Ec),message:m(we)})}})).catch((()=>{w.value=!1,c.error({title:m(kc),message:m(xe)})}))),E.value=!1};let $=!1;const j=(e,o)=>{var a;if($)return!0;$=!0,u.addCandidateComment(null===(a=x.value)||void 0===a?void 0:a.id,{comment:o.value,addedFromResume:!0}).then((e=>{var a,i;if($=!1,e.data.success){const l=e.data.data,n={addedEmployee:l.addedEmployee,addedTime:l.addedTime,id:l.id,note:l.note,updatedTime:l.updatedTime,deletable:l.deletable,editable:l.editable,addedFromResume:l.addedFromResume};null===(i=null===(a=x.value)||void 0===a?void 0:a.notes)||void 0===i||i.push(n);const r=M(n);S.value.length>0?S.value[0].comments.push(r):S.value.push({id:(0,xu.x0)(6),comments:[r]}),t("updateAuditlog"),o.successCallback(),c.success({title:m(Ec),message:m(be)})}else c.error({title:m(kc),message:m(Ee)})})).catch((()=>$=!1))},U=(e,o)=>{u.updateCandidateComment(o.comment.id,o.value).then((e=>{var a,i;if(e.data.success){const e=S.value[0].comments.find((e=>e.id===o.comment.id)),l=null===(i=null===(a=x.value)||void 0===a?void 0:a.notes)||void 0===i?void 0:i.find((e=>e.id===o.comment.id));l&&(l.note=o.value,l.edited=!0),t("updateAuditlog"),void 0!=e&&(e.note=o.value,e.content=o.value,e.edited=!0),c.success({title:m(Ec),message:m(Se)})}else c.error({title:m(kc),message:m(ke)})}))},Z=(e,o)=>{t("resume-notes:delete",o,(()=>{var e,a,i,l;const n=null===(a=null===(e=S.value[0])||void 0===e?void 0:e.comments)||void 0===a?void 0:a.findIndex((e=>e.id===o.value.id));n>-1&&(null===(l=null===(i=S.value[0])||void 0===i?void 0:i.comments)||void 0===l||l.splice(n,1),t("updateAuditlog"))}))},H={"background-color":"rgba(100, 114, 140, 0.1)",color:"#64728c","margin-left":"0.25rem","margin-right":"0.25rem","min-width":"unset","min-height":"unset",width:"28px",height:"28px"};return(0,i.onMounted)((()=>{t("setNotes",N.value),T()})),{floatingButtonStyle:H,updateResumeModalState:b,addResumeNoteCardState:C,updatingResume:w,deleteEventModalState:E,resumeUrl:D,isResumeRequired:P,isResumeDeleted:k,hasPermissionsForResume:y,hasPermissionsForResumeNotes:f,candidate:x,notes:N,deleteNotes:Z,addNotes:j,updateNotes:U,addModalClick:V,addResumeNoteClick:B,toggleUpdateResumeModal:L,toggleAddResumeNoteCard:F,updateResume:R,deleteResume:_,deleteModalClick:I,mapCommentGroup:M,commentGroups:S,setResumeUrl:T,getCommentGroups:O}}});const tC=(0,Re.Z)(eC,[["render",Mb],["__scopeId","data-v-4ddf47f2"]]);var oC=tC;const aC=e=>((0,i.pushScopeId)("data-v-292e53b4"),e=e(),(0,i.popScopeId)(),e),iC={key:1,class:"empty-msg-container"},lC={class:"empty-msg"},nC=aC((()=>(0,i.createElementVNode)("img",{src:"images/noDocumentFound-new.png",class:"no-document-found"},null,-1))),rC={class:"caption"};function sC(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-list"),s=(0,i.resolveComponent)("oxd-button"),d=(0,i.resolveComponent)("oxd-available-token-modal"),c=(0,i.resolveDirective)("set-tab-focus-to-first-element");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[e.noDocumentFound?(0,i.createCommentVNode)("",!0):(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(r,{key:0,class:(0,i.normalizeClass)({"is-loading":e.loadingDocumentList}),configurations:e.configurations,"list-items":e.documents,"filtered-total-records-count":e.totalDocumentCount,"is-list-loading":e.loadingDocumentList,isPaginated:!1},null,8,["class","configurations","list-items","filtered-total-records-count","is-list-loading"])),[[c,void 0,"return-focus"]]),e.noDocumentFound?((0,i.openBlock)(),(0,i.createElementBlock)("div",iC,[(0,i.createElementVNode)("div",lC,[nC,(0,i.createElementVNode)("div",rC,(0,i.toDisplayString)(e.$t("Sorry, No Document Exists For The Selected Stage")),1),e.hasCreateDocumentTemplatePermission?((0,i.openBlock)(),(0,i.createBlock)(s,{key:0,label:e.$t("Create Document Template"),class:"redirect-button-when-table-empty",onClick:e.redirectToDocumentTemplates},null,8,["label","onClick"])):(0,i.createCommentVNode)("",!0)])])):(0,i.createCommentVNode)("",!0),e.showAvailableTokenModal?((0,i.openBlock)(),(0,i.createBlock)(d,{key:2,viewDocumentContent:e.viewDocumentContent,candidate:e.candidate,"row-tokens":e.initialRows,"onUpdate:show":e.toggleAvailableTokenModal,onOnConfirm:e.previewDocument,onOnCancel:e.toggleAvailableTokenModal},null,8,["viewDocumentContent","candidate","row-tokens","onUpdate:show","onOnConfirm","onOnCancel"])):(0,i.createCommentVNode)("",!0)],64)}const dC={visible:!1,listRecordCount:{singleTerm:"Document",multiTerm:"Documents"},bulkActions:[],singleActions:[]};var cC=dC;const mC=[{name:"name",title:"File Name",style:{flex:"20%","min-width":"250px","margin-right":"0"}},{name:"action",title:"",style:{flex:"10%","min-width":"80px","margin-left":"40px","margin-right":"0"},cellType:"oxd-table-cell-actions",cellRenderer:"actionsRenderer"}];var uC=mC;const pC={topBar:cC,headers:uC,hideHeaders:!0,selectable:!1,disableHeader:!0};var vC=pC,hC={table:vC};class gC{getListSchema(){const e=(0,i.ref)(JSON.parse(JSON.stringify(hC)));return e}}const yC={key:0,class:"oxd-loader-wrapper d-flex align-center justify-center"},fC={key:1},bC={class:"oxd-available-token-table"},CC={class:"token"},SC={class:"token-value"},wC={class:"modal-oxd-divider"},EC={class:"ohrm-email-preview-modal-row"},kC={class:"orangehrm-modal-footer d-flex justify-end"};function xC(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-loader"),s=(0,i.resolveComponent)("oxd-chip"),d=(0,i.resolveComponent)("oxd-input"),c=(0,i.resolveComponent)("oxd-textarea"),m=(0,i.resolveComponent)("oxd-available-token-input"),u=(0,i.resolveComponent)("oxd-autocomplete-input"),p=(0,i.resolveComponent)("oxd-divider"),v=(0,i.resolveComponent)("oxd-button"),h=(0,i.resolveComponent)("form-modal"),g=(0,i.resolveDirective)("set-tab-focus-to-first-element");return(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(h,{style:{width:"100%",maxWidth:"800px"},"is-pop-over":!1},{title:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Following tokens will be replaced using the shown values")),1)])),body:(0,i.withCtx)((()=>[e.loading?((0,i.openBlock)(),(0,i.createElementBlock)("div",yC,[(0,i.createVNode)(r,{withContainer:!0,class:"oxd-loader-text-view"})])):((0,i.openBlock)(),(0,i.createElementBlock)("div",fC,[(0,i.createElementVNode)("table",bC,[(0,i.createElementVNode)("thead",null,[(0,i.createElementVNode)("tr",null,[(0,i.createElementVNode)("th",CC,(0,i.toDisplayString)(e.$t("Token")),1),(0,i.createElementVNode)("th",SC,(0,i.toDisplayString)(e.$t("Token Value")),1)])]),(0,i.createElementVNode)("tbody",null,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.rows,(t=>{var o,a,l,n;return(0,i.openBlock)(),(0,i.createElementBlock)("tr",{key:t.id},[(0,i.createElementVNode)("td",null,[(0,i.createVNode)(s,{label:e.$t(t.label),class:"oxd-available-token-chip"},null,8,["label"])]),(0,i.createElementVNode)("td",null,["text"===t.type?((0,i.openBlock)(),(0,i.createBlock)(d,{key:0,autofocus:"",modelValue:t.value,"onUpdate:modelValue":o=>e.updateModelValue(o,t)},null,8,["modelValue","onUpdate:modelValue"])):(0,i.createCommentVNode)("",!0),"textarea"===t.type?((0,i.openBlock)(),(0,i.createBlock)(c,{key:1,autofocus:"",modelValue:t.value,"onUpdate:modelValue":o=>e.updateModelValue(o,t)},null,8,["modelValue","onUpdate:modelValue"])):(0,i.createCommentVNode)("",!0),["line_breaks","bullet_points"].includes(t.type||"")&&e.multipleAutocompletes.includes(t.id)&&Array.isArray(t.value)?((0,i.openBlock)(),(0,i.createBlock)(m,{key:2,autofocus:"",row:t,"onUpdate:modelValue":o=>e.onModelUpdate(o,t)},null,8,["row","onUpdate:modelValue"])):(0,i.createCommentVNode)("",!0),"bullet_points"===t.type&&!e.multipleAutocompletes.includes(t.id)&&Array.isArray(t.value)?((0,i.openBlock)(),(0,i.createBlock)(u,{key:3,autofocus:"",multiple:!0,modelValue:t.value,placeholder:(null===(a=null===(o=e.initialRows.find((e=>e.id===t.id)))||void 0===o?void 0:o.value)||void 0===a?void 0:a.length)===t.value.length?e.$t("All the options are selected"):e.$t("Type for hints..."),"onUpdate:modelValue":o=>e.updateModelValue(o,t),createOptions:e.createHiringManagerReq(t).addBackOptions},null,8,["modelValue","placeholder","onUpdate:modelValue","createOptions"])):(0,i.createCommentVNode)("",!0),"table"===t.type&&Array.isArray(t.value)?((0,i.openBlock)(),(0,i.createBlock)(u,{key:4,autofocus:"",multiple:!0,modelValue:t.value,placeholder:(null===(n=null===(l=e.initialRows.find((e=>e.id===t.id)))||void 0===l?void 0:l.value)||void 0===n?void 0:n.length)===t.value.length?e.$t("All the options are selected"):e.$t("Type for hints..."),"onUpdate:modelValue":o=>e.updateModelValue(o,t),createOptions:e.createHiringManagerReq(t).addBackOptions},null,8,["modelValue","placeholder","onUpdate:modelValue","createOptions"])):(0,i.createCommentVNode)("",!0)])])})),128))])]),(0,i.createElementVNode)("div",wC,[(0,i.createVNode)(p)]),(0,i.createElementVNode)("div",EC,[(0,i.createElementVNode)("div",kC,[(0,i.createVNode)(v,{label:e.$t("Cancel"),displayType:"text","data-test":"cancelButton",class:"orangehrm-button-margin",onClick:e.onCancel},null,8,["label","onClick"]),(0,i.createVNode)(v,{label:e.$t("Preview"),displayType:"secondary","data-test":"confirmButton",class:"orangehrm-button-margin",onClick:e.onConfirm},null,8,["label","onClick"])])])]))])),_:1})),[[g,void 0,"return-focus"]])}var NC=o(78894);function AC(e,t,o,a,l,n){var r;const s=(0,i.resolveComponent)("oxd-autocomplete-input");return(0,i.openBlock)(),(0,i.createBlock)(s,(0,i.mergeProps)(e.$attrs,{multiple:!0,modelValue:null===(r=e.row)||void 0===r?void 0:r.value,createOptions:e.getMatchingHiringManagers}),null,16,["modelValue","createOptions"])}var DC=(0,i.defineComponent)({name:"AvailableTokensInput",props:{row:{type:Object}},components:{"oxd-autocomplete-input":NC.Z},setup(e){var t;const o=new Vf,a=(0,i.inject)("ngServices"),l=null===(t=a.$q)||void 0===t?void 0:t.defer,n=(0,i.ref)(null),r=()=>{var t,o,a,i,l,n,r,s,d,c,m;return"hiringManagerAndTitle"===(null===(t=e.row)||void 0===t?void 0:t.id)?{fields:["firstName","middleName","lastName","jobTitle"],include:["jobTitle"]}:["hiringManagersFullName","stageCoordinatorsFullName"].includes(null!==(a=null===(o=e.row)||void 0===o?void 0:o.id)&&void 0!==a?a:"")?{fields:["firstName","middleName","lastName"]}:["hiringManagersFirstName","stageCoordinatorsFirstName"].includes(null!==(l=null===(i=e.row)||void 0===i?void 0:i.id)&&void 0!==l?l:"")?{fields:["firstName"]}:["hiringManagersMiddleName","stageCoordinatorsMiddleName"].includes(null!==(r=null===(n=e.row)||void 0===n?void 0:n.id)&&void 0!==r?r:"")?{fields:["middleName"]}:["hiringManagersLastName","stageCoordinatorsLastName"].includes(null!==(d=null===(s=e.row)||void 0===s?void 0:s.id)&&void 0!==d?d:"")?{fields:["lastName"]}:"hiringManagersWorkTelephone"===(null===(c=e.row)||void 0===c?void 0:c.id)||"hiringManagersWorkEmail"===(null===(m=e.row)||void 0===m?void 0:m.id)?{fields:["firstName","middleName","lastName","contactDetails"],include:["contactDetails"]}:{fields:[]}},s=t=>(0,A.mG)(this,void 0,void 0,(function*(){n.value&&n.value.resolve(),n.value=l();const a=n.value.promise;return yield new Promise(((i,l)=>{const n=r();o.getHiringManagers(Object.assign({keyword:t},n),a).then((t=>{const o=t.data.data.map((t=>{const o=t=>{var o,a,i,l,n,r,s;const d=ge.getEmployeeNameV2(null!==(o=t.firstName)&&void 0!==o?o:"",null!==(a=t.middleName)&&void 0!==a?a:"",null!==(i=t.lastName)&&void 0!==i?i:"",Boolean(t.termination_id));if("hiringManagerAndTitle"===(null===(l=e.row)||void 0===l?void 0:l.id))return`${d} ${(null===(n=t.jobTitle)||void 0===n?void 0:n.jobTitleName)?`- ${null===(r=t.jobTitle)||void 0===r?void 0:r.jobTitleName}`:""}`;if("hiringManagersWorkEmail"===(null===(s=e.row)||void 0===s?void 0:s.id)){let e="";return t.contactDetails&&t.contactDetails.length>0&&(e=t.contactDetails[0].empWorkEmail),null!==e&&void 0!==e?e:""}return d},a=Object.assign(Object.assign({},t),{id:t.empNumber,label:o(t).trim()});return a})).filter((e=>!!e.label));i(o)})).catch((()=>{l([])}))}))}));return{getMatchingHiringManagers:s}}});const TC=(0,Re.Z)(DC,[["render",AC]]);var PC=TC,VC=o(58776),BC=o(94294),IC=(0,i.defineComponent)({name:"AvailableTokensModal",directives:{"set-tab-focus-to-first-element":Sr.Z},components:{"oxd-loader":co.Z,"oxd-divider":ro.Z,"oxd-button":jt.Z,"form-modal":gc,"oxd-chip":Ip.Z,"oxd-input":VC.Z,"oxd-textarea":BC.Z,"oxd-autocomplete-input":NC.Z,"oxd-available-token-input":PC},props:{editingModel:{type:Object,required:!1},candidate:{type:Object,required:!0},viewDocumentContent:{type:Object},rowTokens:{type:Array,default:()=>[]}},setup(e,{emit:t}){const o=(0,i.ref)(!1),a=e=>e.hasMultiple&&"line_breaks"===e.styleType?"line_breaks":e.hasMultiple||"line_breaks"!==e.styleType?e.hasMultiple&&"bullet_points"===e.styleType?"bullet_points":"table"===e.styleType?"table":"text":"textarea",l=e=>{var t,o,i;const l=a(e);if("text"===l)return e.value;if("textarea"===l)return e.value&&Array.isArray(e.value)?e.value.join("\n"):null;if("line_breaks"===l&&Array.isArray(e.value))return null===(t=e.value)||void 0===t?void 0:t.map((e=>({id:e.empNumber,label:`${e.fullName} ${e.jobTitle?`- ${e.jobTitle}`:""}`})));if("bullet_points"===l&&Array.isArray(e.value))return null===(o=e.value)||void 0===o?void 0:o.map((e=>({id:e.empNumber,label:e.value})));if("table"===l){if(Array.isArray(e.value))return null===(i=e.value)||void 0===i?void 0:i.map((t=>({id:t[e.keyAttribute||""],label:""!==t[e.keyAttribute||""].trim()?t[e.keyAttribute||""]:"               "})));if(e.value&&"object"===typeof e.value){const t=Object.values(e.value);return null===t||void 0===t?void 0:t.map((t=>{var o;const a=t[null!==(o=e.keyAttribute)&&void 0!==o?o:""];return{id:a,label:""!==a.trim()?a:"               "}}))}}},n=["hiringManagersFullName","hiringManagersFirstName","hiringManagersMiddleName","hiringManagersLastName","hiringManagerAndTitle","hiringManagersWorkTelephone","hiringManagersWorkEmail","stageCoordinatorsFirstName","stageCoordinatorsMiddleName","stageCoordinatorsLastName","stageCoordinatorsFullName","hiringManagerAndTitle"],r=(0,i.ref)([]),s=(0,i.ref)([]),d=()=>{var t;r.value=(null===(t=e.rowTokens)||void 0===t?void 0:t.map((e=>{var t;const o=a(e),i=l(e);return{id:e.name,label:e.displayName,value:i,type:o,selectedAttributes:null!==(t=e.selectedAttributes)&&void 0!==t?t:[],placeholder:""}})))||[],r.value=r.value.filter((e=>{var t;const o="table"!==e.type||null!==(t=Array.isArray(null===e||void 0===e?void 0:e.value)&&e.value.length>0)&&void 0!==t&&t;return o})),s.value=(0,Zg.Z)(r.value)},c=e=>e.filter(((e,t,o)=>t===o.findIndex((t=>t.label===e.label)))),m=(e,t)=>{var o,a;if(["line_breaks","bullet_points","table"].includes(null!==(o=t.type)&&void 0!==o?o:"")&&"string"===typeof e)return!0;const i=null===(a=r.value)||void 0===a?void 0:a.find((e=>e.id===t.id));i&&(i.value=null!==e&&void 0!==e?e:[])},u=()=>{t("onCancel")},p=()=>{t("onConfirm",r.value)};(0,i.watch)((()=>e.rowTokens),(()=>{d()}),{immediate:!0});const v=(e,t)=>{var o;const a=null===(o=r.value)||void 0===o?void 0:o.find((e=>e.id===t.id));a&&(a.value=e)},h=e=>{const t=s.value.find((t=>t.id===e.id));return{addBackOptions(e){return(0,A.mG)(this,void 0,void 0,(function*(){return new Promise((o=>{const a=Array.isArray(null===t||void 0===t?void 0:t.value)?null===t||void 0===t?void 0:t.value.filter((t=>{const o=t.label.toLowerCase(),a=e.toLowerCase();return o.includes(a)})):[];o(a)}))}))}}};return{rows:r,loading:o,multipleAutocompletes:n,initialRows:s,updateModelValue:m,onCancel:u,onConfirm:p,onModelUpdate:v,createHiringManagerReq:h,uniques:c}}});const LC=(0,Re.Z)(IC,[["render",xC],["__scopeId","data-v-089a74b9"]]);var FC=LC,zC=o(91036),MC=o.n(zC);class OC{constructor(){this.htmlSanitizer=MC(),this.defaultOptions={allowedTags:MC().defaults.allowedTags.concat(["img"]),allowedSchemes:MC().defaults.allowedSchemes.concat(["data","blob"]),allowedAttributes:Object.assign(Object.assign({},MC().defaults.allowedAttributes),{"*":["style"]})}}sanitizeHtml(e,t=this.defaultOptions){return this.htmlSanitizer(e,t)}}var RC=(0,i.defineComponent)({name:"AttachmentList",components:{"oxd-list":Bd.Z,"oxd-button":jt.Z,"oxd-available-token-modal":FC},directives:{"set-tab-focus-to-first-element":Sr.Z},props:{candidate:{type:Object,required:!0},viewDocumentContent:{type:Object}},setup(e,{emit:t}){var o,a,l,n,r;const s=ce(),d=(0,i.inject)("$toast"),c=(0,i.inject)("ngServices"),m=(0,i.ref)(c.$stateParams.candidateId),u=(0,i.ref)(c.$stateParams.vacancyId),p=new Vf,v=new OC,h=(0,i.ref)([]),g=(0,i.ref)(!1),y=(0,i.ref)(!1),f=(0,i.ref)(0),b=(0,i.ref)(!1),C=(0,i.ref)(null),S={},w={},E=e=>{var t,o={};return null===(t=null===e||void 0===e?void 0:e.events)||void 0===t||t.forEach((e=>{let t=e.vacancyEvent;k(e.state)&&(o[t.id]=t.eventTitle)})),o},k=e=>{let t=!1;return null===e||void 0===e||e.forEach((e=>{e.active&&(t=!0)})),t};if(u.value){const t=(null===(a=null===(o=e.candidate)||void 0===o?void 0:o.vacancy)||void 0===a?void 0:a.name)||"";S[u.value]=t,w["vacancies"]=S,w["events"]=E(e.candidate)}const x=(0,i.ref)(!1),N=()=>{c.miscNgActionService.addRecruitmentDocumentTemplate(w).then((function(e){e&&(D(),null===d||void 0===d||d.success({title:s(Ec),message:s(be)}))}))},D=()=>{u.value?(g.value=!0,p.getDocumentTemplates(m.value,u.value).then((e=>{const t=e.data.data;x.value=e.data.meta.hasCreateDocumentTemplatePermission,0==t.length?y.value=!0:y.value=!1,h.value=t,f.value=t.length,g.value=!1})).catch((()=>{g.value=!1,null===d||void 0===d||d.error({title:s(kc),message:s(Be)})}))):y.value=!0},T=(0,i.ref)(null),P=(e="")=>{const t=v.sanitizeHtml(e);return t},V=(0,i.ref)([]),B=()=>{const e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)},I=t=>new Promise(((o,a)=>{p.documentContent({candidateId:e.candidate.id,templateId:null===t||void 0===t?void 0:t.id,clientDateTime:B()}).then((e=>{o(e.data.data)})).catch((()=>a()))})),L=e=>(0,A.mG)(this,void 0,void 0,(function*(){C.value=e,t("get-edit-preview-tokens",e),yield I(e).then((e=>{var t;e.tokenValues.length>0?(V.value=null!==(t=e.tokenValues)&&void 0!==t?t:[],b.value=!0):(T.value=Object.assign(Object.assign({},e),{content:P(e.content)}),F())}))})),F=e=>{t("preview-document",C.value,e),b.value=!1},z=()=>{b.value=!b.value,b.value||(C.value=null)},M=(e,t,o,a)=>{let i={};const l={component:"oxd-button",props:{label:s("Preview"),id:"docPreview",iconName:"oxd-show",displayType:"label",size:"medium",onClick:()=>{L(a)}}};return i={previewButton:l},{props:{header:{cellConfig:Object.assign({},i)}}}},O=new gC,R=O.getListSchema(),_=null===(r=null===(n=null===(l=R.value)||void 0===l?void 0:l.table)||void 0===n?void 0:n.headers)||void 0===r?void 0:r[1];_&&"string"===typeof _.cellRenderer&&(_.cellRenderer=M);const $=(0,i.computed)((()=>R.value));return(0,i.onMounted)((()=>{D()})),(0,i.onUnmounted)((()=>{null===d||void 0===d||d.clearAll()})),{documents:h,totalDocumentCount:f,configurations:$,loadingDocumentList:g,noDocumentFound:y,hasCreateDocumentTemplatePermission:x,showAvailableTokenModal:b,initialRows:V,getDocumentTemplateList:D,actionsRenderer:M,redirectToDocumentTemplates:N,toggleAvailableTokenModal:z,previewDocument:F}}});const _C=(0,Re.Z)(RC,[["render",sC],["__scopeId","data-v-292e53b4"]]);var $C=_C;function jC(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-schema-form"),s=(0,i.resolveComponent)("form-modal");return(0,i.openBlock)(),(0,i.createBlock)(s,{style:{width:"90%",maxWidth:"50%"}},{title:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.getModalHeader())),1)])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(r,(0,i.mergeProps)({ref:"emailDocumentModalForm",schema:e.schema,model:e.model,"onUpdate:model":t[0]||(t[0]=t=>e.model=t)},e.$attrs),null,16,["schema","model"])])),_:1})}const UC=["innerHTML"],ZC={style:{"margin-left":"0.5rem"}},HC={class:"autocomplete-email-mode-custom-chip"};function qC(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-label"),s=(0,i.resolveComponent)("oxd-autocomplete-input"),d=(0,i.resolveComponent)("oxd-input-group");return(0,i.openBlock)(),(0,i.createBlock)(d,{class:"oxd-input-field-bottom-space",message:a.message,classes:a.classes},{default:(0,i.withCtx)((()=>[a.classes&&a.classes.label?((0,i.openBlock)(),(0,i.createBlock)(r,{key:0,label:o.label,class:(0,i.normalizeClass)(["oxd-autocomplete-email-input-label",a.classes.label])},null,8,["label","class"])):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["oxd-autocomplete-email-wrapper",a.inputClasses])},[(0,i.createVNode)(s,(0,i.mergeProps)({ref:"autocompleteEmailInput"},e.$attrs,{"model-value":o.modelValue,"has-error":a.hasError,disabled:o.disabled,readonly:o.readonly,hasSelectEnter:!0,"onUpdate:modelValue":t[0]||(t[0]=e=>a.onModelUpdate(e)),"onUpdate:searchTerm":a.onSearchTerm,"onDropdown:clear":t[1]||(t[1]=e=>a.onClear()),"onDropdown:closed":t[2]||(t[2]=e=>a.onClosed()),"onDropdown:blur":t[3]||(t[3]=e=>a.onBlur()),"onSelect:enter":a.onSelectEnter}),{option:(0,i.withCtx)((({data:e,text:t})=>[(0,i.createElementVNode)("span",{innerHTML:t},null,8,UC),(0,i.createElementVNode)("div",ZC,(0,i.toDisplayString)(e.labelSecondary),1)])),chips:(0,i.withCtx)((({data:e})=>[(0,i.createElementVNode)("span",HC,(0,i.toDisplayString)(e.labelSecondary),1)])),_:1},16,["model-value","has-error","disabled","readonly","onUpdate:searchTerm","onSelect:enter"]),o.disabled?(0,i.createCommentVNode)("",!0):(0,i.renderSlot)(e.$slots,"iconSlot",{key:0},void 0,!0)],2)])),_:3},8,["message","classes"])}var GC=o(72233),WC={name:"AutocompleteEmail",components:{"oxd-autocomplete-input":NC.Z,"oxd-input-group":sl.Z,"oxd-label":Qo.Z},inheritAttrs:!1,props:{label:{type:String,default:null,required:!1},rules:{type:Array,default:()=>[],required:!1},required:{type:Boolean,default:!1,required:!1},modelValue:{type:Array},disabled:{type:Boolean,default:!1,required:!1},readonly:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){var o;const a=ce(),l=(0,i.toRef)(e,"rules"),n=(0,i.toRef)(e,"disabled"),r=(0,i.toRef)(e,"modelValue"),s=r.value,d=()=>(0,A.mG)(this,void 0,void 0,(function*(){t("update:modelValue",s),yield(0,i.nextTick)()})),c=()=>{var e;const t=null===(e=N.value)||void 0===e?void 0:e.searchTerm;if(Array.isArray(r.value)){const e=r.value.find((e=>e.id===t));return!e||a("Already selected")}return!0},m=function(){var e;const t=null===(e=N.value)||void 0===e?void 0:e.searchTerm;return!t||/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9]+)+$/.test(t)||a("Expected format: admin@example.com")},u=function(e){return function(){var t;const o=null===(t=N.value)||void 0===t?void 0:t.searchTerm;return!o||new String(o).length<=e||a("Should not exceed {{amount}} characters",{amount:e})}},p=(0,i.ref)(),v=e=>{p.value=e,b.value||(b.value=!0,f())},h=(0,i.ref)([...l.value,()=>m(),()=>c(),u(50)]),{hasError:g,message:y,startWatcher:f,dirty:b}=(0,GC.Z)({fieldLabel:null!==(o=e.label)&&void 0!==o?o:"",rules:h,modelValue:r,onReset:d,isDirty:!1,isDisabled:n}),C=(0,i.computed)((()=>({"oxd-autocomplete-search-wrapper--readonly":e.readonly}))),S=(0,i.computed)((()=>({label:{"oxd-input-field-required":e.required},message:{"oxd-input-field-error-message":g},wrapper:{"orangehrm-autocomplete-email-wrapper":!0}}))),w=e=>{const o=Array.isArray(e),a=Array.isArray(r.value),i="string"===typeof e,l="string"===typeof r.value,n=!e,s=!r.value;n?t("update:modelValue",e):o&&0===e.length?(t("update:modelValue",e),0===e.length&&(N.value.searchTerm=null)):(i&&a&&r.value.length<1||o&&a||o&&s||o&&l||i&&!a)&&t("update:modelValue",e)},E=e=>{b.value||(b.value=!0,f()),t("update:searchTerm",e)},k=()=>{t("dropdown:clear")},x=()=>{t("dropdown:closed")},N=(0,i.ref)(),D=()=>{N.value.dropdownOpen=!1,t("dropdown:blur")},T=()=>{t("selectenter",(()=>{N.value.searchTerm=null}))};return{classes:S,inputClasses:C,message:y,hasError:g,searchKeyword:p,autocompleteEmailInput:N,onUpdateSearchTerm:v,onModelUpdate:w,onSearchTerm:E,onClear:k,onClosed:x,onBlur:D,onSelectEnter:T}}};const KC=(0,Re.Z)(WC,[["render",qC],["__scopeId","data-v-814500d2"]]);var QC=KC;const JC={class:"digital-sign-content-wrapper"},YC=["innerHTML"];function XC(e,t,o,a,l,n){return(0,i.openBlock)(),(0,i.createElementBlock)("div",JC,[(0,i.createElementVNode)("div",{innerHTML:e.modelValue},null,8,YC)])}var eS=(0,i.defineComponent)({name:"DigitalSignContentPreview",props:{modelValue:{type:String}}});const tS=(0,Re.Z)(eS,[["render",XC]]);var oS=tS;const aS=ce();function iS(e,t,o,a,l=!1,n=!1,r,s,d){return(0,A.mG)(this,void 0,void 0,(function*(){let r;l&&(r=["--span-column-8"]);const c=[{name:"to",label:aS("To"),type:"custom",component:(0,i.markRaw)(QC),validators:new Map([["required",Oa]]),props:{placeholder:aS("Recipients"),multiple:!0,createOptions:e,disabled:s.isDigitalSignEnabled},listeners:{"onUpdate:searchTerm":e=>{this.emit("onUpdate:searchTerm",e,"to")},onSelectenter:e=>{this.emit("selectenter:to",e)}}},{name:"cc",label:aS("Cc"),type:"custom",component:(0,i.markRaw)(QC),props:{placeholder:aS("Recipients"),multiple:!0,createOptions:t,disabled:s.isDigitalSignEnabled},listeners:{"onUpdate:searchTerm":e=>{this.emit("onUpdate:searchTerm",e,"cc")},onSelectenter:e=>{this.emit("selectenter:cc",e)}}},{name:"replyTo",label:aS("Reply To"),type:"custom",component:(0,i.markRaw)(QC),props:{placeholder:aS("Recipients"),multiple:!0,createOptions:o,disabled:s.isDigitalSignEnabled},listeners:{"onUpdate:searchTerm":e=>{this.emit("onUpdate:searchTerm",e,"replyTo")},onSelectenter:e=>{this.emit("selectenter:replyTo",e)}},hook:(e,t)=>(e.visible=!t.setLoggedInEmployeeAsSender,Object.assign({},e))},{name:"subject",label:aS("Subject"),type:"input",class:r,validators:new Map([["required",Oa],["shouldNotExceedCharLength",$a(255)]]),props:{placeholder:aS("Email Template Subject Here")}},{name:"body",label:"",type:"tinymce",validators:new Map([["shouldNotExceedCharLength",$a(16e6)]]),props:{placeholder:aS("Email Template Subject Here"),configurations:{baseURL:a.baseURL,skin_url:a.skin_url},attachmentSize:s.maxAttachmentSize,allowedFileTypes:s.allowedImageTypes},listeners:{"onTinymce:errror-image-size":()=>{this.emit("tinymce:errror-image-size")},"onTinymce:errror-image-type":()=>{this.emit("tinymce:errror-image-type")}}},{name:"digitalSignContent",label:"",type:"custom",component:(0,i.markRaw)(oS)}],m={name:"attachmentType",label:aS("Attachment Type"),type:"radiogroup",class:["--span-column-4 oxd-inline-radio-group"],props:{options:[{id:"pdf",label:aS("PDF")},{id:"docx",label:aS("DOCX")}],disabled:s.isDigitalSignEnabled},validators:new Map([["required",Oa]])},u={name:"setLoggedInEmployeeAsSender",label:aS(""),type:"checkbox",props:{optionLabel:aS("Use myself as the Sender")}};return n?(c.splice(3,0,u),l&&c.splice(5,0,m)):l&&c.splice(4,0,m),{name:"emailDocumentForm",layout:[{type:"grid",props:{cols:1},class:["grid-12"],children:{default:c},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"divider",style:{margin:"0"}},{type:"grid",props:{cols:1},class:["grid-12"],children:{default:[{name:"warning",label:"",type:"custom",component:(0,i.markRaw)(Jo.Z),props:{type:Xd.ur,message:"",compact:!0,default:""},hook:(e,t)=>{let o=!1,a="";if((null===d||void 0===d?void 0:d.length)>0){const i=d.filter((e=>t.body.includes(e)));a=i.length>0?ge.joinStrings(i):"",e.props.message=aS("The token {{values}} appeared on the generated email body as it refers to data that no longer exists in the system",{values:a||""}),o=Boolean(d.find((e=>t.body.includes(e))))}return e.props.message=aS("The token {{values}} appeared on the generated email body as it refers to data that no longer exists in the system",{values:a||""}),e.props.show=o,Object.assign({},e)}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"action",children:{default:[{name:"required",label:"",type:"custom",component:(0,i.markRaw)(Hd),style:{"margin-right":"auto",padding:"0px"}},{name:"reset",label:aS("Cancel"),type:"button",props:{type:"button",displayType:"ghost"},listeners:{onClick:()=>{this.emit("update:show",!0)}}},{name:"submit",label:s.isDigitalSignEnabled?aS("Send E-signature Request"):aS("Send"),type:"button",style:{"margin-left":"0.5rem"},props:{type:"submit",displayType:"secondary"}}]},style:{"padding-top":"1.2rem"}}]}}))}var lS=iS,nS=(0,i.defineComponent)({name:"addResumeModal",components:{"form-modal":gc,"oxd-schema-form":yc.Z},props:{emailDocumentDefaultData:{type:Object},isLoggedInUserEmployee:{type:Boolean,default:!1},showAttachmentTypes:{type:Boolean,default:!1},settingsObj:{type:Object}},setup(e,t){var o;const a=new Vf,l=(0,i.inject)("ngServices"),n=null===(o=l.$q)||void 0===o?void 0:o.defer,r=(0,i.ref)(null),s=(0,i.inject)("uiTinymceConfig"),d=e=>e.map((e=>Object.assign(Object.assign({},e),{preSelected:!1}))),c=(e,t)=>(0,A.mG)(this,void 0,void 0,(function*(){r.value&&r.value.resolve(),r.value=n();const o=r.value.promise,i=yield new Promise(((i,l)=>{a.getEmployeeRecipients(e,o).then((e=>{const o=e.data.data.map((e=>{const t=Object.assign(Object.assign({},e),{id:e.contactDetails[0].empWorkEmail,labelSecondary:`(${e.contactDetails[0].empWorkEmail})`,label:ge.getEmployeeName(e.firstName,e.middleName,e.lastName,Boolean(e.terminationId))});return t})),a=[...o,...t||[]],l=a.filter(((e,t,o)=>t===o.findIndex((t=>t.id===e.id))));i(l)})).catch((()=>{l([])}))}));return i})),m=e=>{const t=d(g),o=t.filter((t=>t.label.toLocaleLowerCase().includes((null===e||void 0===e?void 0:e.toLocaleLowerCase())||"")));return c(e,o)},u=()=>{var t;return(null===(t=e.settingsObj)||void 0===t?void 0:t.isDigitalSignEnabled)?"Request E-signature":"Email and Attached Document"},p=e=>{const t=d(h),o=t.filter((t=>t.label.toLocaleLowerCase().includes((null===e||void 0===e?void 0:e.toLocaleLowerCase())||"")));return c(e,o)},v=e=>{const t=d(y),o=t.filter((t=>t.label.toLocaleLowerCase().includes((null===e||void 0===e?void 0:e.toLocaleLowerCase())||"")));return c(e,o)},h=e.emailDocumentDefaultData.recipient.cc.map((e=>Object.assign(Object.assign({},e),{id:e.email,label:e.name,labelSecondary:`(${e.email})`,preSelected:!0}))),g=e.emailDocumentDefaultData.recipient.to.map((e=>Object.assign(Object.assign({},e),{id:e.email,label:e.name,labelSecondary:`(${e.email})`,preSelected:!0}))),y=e.emailDocumentDefaultData.recipient.replyTo.map((e=>Object.assign(Object.assign({},e),{id:e.email,label:e.name,labelSecondary:`(${e.email})`,preSelected:!0}))),f=(0,i.ref)({to:g,cc:h,replyTo:y,subject:e.emailDocumentDefaultData.subject,body:e.emailDocumentDefaultData.bodyText,attachmentType:e.showAttachmentTypes?"pdf":null,setLoggedInEmployeeAsSender:null,digitalSignContent:e.emailDocumentDefaultData.digitalSignContent}),{schema:b}=(0,fc.Z)(lS.call(t,m,p,v,s,e.showAttachmentTypes,e.isLoggedInUserEmployee,e.emailDocumentDefaultData.warning,e.settingsObj,e.emailDocumentDefaultData.missingTokens)),C=(0,i.ref)();return{model:f,schema:b,emailDocumentModalForm:C,getModalHeader:u}}});const rS=(0,Re.Z)(nS,[["render",jC],["__scopeId","data-v-76acca8b"]]);var sS=rS;const dS={class:"group-by-wrapper"},cS={class:"group-by-label-text"};function mS(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-select-input-button"),s=(0,i.resolveComponent)("notes-inner-content");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createElementVNode)("span",dS,[(0,i.createElementVNode)("span",cS,(0,i.toDisplayString)(e.$t("Group By")),1),(0,i.createVNode)(r,{button:e.groupingButton,options:e.groupingOptions,modelValue:e.selectedGroupingOption,"onUpdate:modelValue":e.selectGroupingOption,wholeButtonClickable:!0},null,8,["button","options","modelValue","onUpdate:modelValue"])]),(0,i.createVNode)(s,{commentGroups:e.combinedNotes,hideAddInput:!e.hasPermissions,disabled:!e.hasPermissions,groupBy:e.selectedGroupingOption.id,"onNote:add":e.addGeneralNotes,"onNote:update":e.updateNotes,"onNote:delete":e.deleteNotes},null,8,["commentGroups","hideAddInput","disabled","groupBy","onNote:add","onNote:update","onNote:delete"])],64)}function uS(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-schema-form");return(0,i.openBlock)(),(0,i.createBlock)(r,(0,i.mergeProps)({schema:e.schema,model:e.model,"onUpdate:model":t[0]||(t[0]=t=>e.model=t)},e.$attrs,{enableFirstElementFocus:!1}),null,16,["schema","model"])}var pS=o(41375);const vS=ce();function hS(e,t,o){return(0,A.mG)(this,void 0,void 0,(function*(){return{name:"addResumeNoteForm",layout:[{type:"grid",props:{cols:1},children:{default:[{name:"time",label:vS("Time"),type:"time",class:"oxd-hidden-input-group",props:{disabled:!0}},{name:"notes",label:"",type:"comments",class:"mb-0--oxd-input-group",props:{stackConfirmationElements:!0,enableAvatar:!0,groupBy:o,scrollHeight:"50vh",commentThreadMinHeight:t?"70vh":"50vh",maxCharLength:65535,commentGroups:e,hideAddInput:t,commentBoxLabel:vS("Add Note"),emptyPlaceholderMsg:vS("Sorry, No Notes Found!"),commentBoxPlaceholder:vS("Write your note"),requiredEditCommentErrorMsg:vS("Required"),unsavedEditCommentErrorMsg:vS("Note should be either updated or removed"),unsavedAddCommentErrorMsg:vS("Note should be either added or removed"),commentDeleteConfirmationMsg:vS("The current note will be permanently deleted. Are you sure you want to continue?"),scrollOnLoad:!1},hook:(e,t)=>(e&&e.props&&o&&(e.props.groupBy=o),Object.assign({},e)),validators:new Map([["shouldNotExceedCharLength",$a(65535)]]),listeners:{onAddComment:(e,t)=>{this.emit("note:add",e,t)},onUpdateComment:(e,t)=>{this.emit("note:update",e,t)},onDeleteComment:(e,t)=>{this.emit("note:delete",e,t)},onCommentEditHasError:(e,t)=>{this.emit("note:hasError",e,t)}}}]},style:{"margin-left":"-10px","margin-right":"-10px"}}]}}))}var gS=hS,yS=(0,i.defineComponent)({name:"addResumeModal",components:{"oxd-schema-form":yc.Z},props:{commentGroups:{type:Object,required:!0},hideAddInput:{type:Boolean,required:!0},groupBy:{type:String,default:pS.KF}},setup(e,t){const o=(0,i.toRef)(e,"commentGroups"),a=(0,i.computed)((()=>e.groupBy)),{model:l,schema:n}=(0,fc.Z)(gS.call(t,o,e.hideAddInput,a));return{model:l,schema:n}}});const fS=(0,Re.Z)(yS,[["render",uS]]);var bS=fS,CS=(0,i.defineComponent)({name:"profile-note",components:{"notes-inner-content":bS,"oxd-select-input-button":Ag.Z},props:{candidateData:{type:Object,required:!0},dataGroupPermissions:{type:Object,required:!0},selectedVacancyIdForEvents:{type:String}},setup(e,{emit:t}){var o;const a=(0,i.ref)(e.candidateData),l=(0,Gd.oR)(),n=(0,i.computed)((()=>l.getters["recruitment/candidateProfile/getCandidateNotesGroupBy"]));let r=(0,i.ref)({id:pS.KF,label:"Stage"});n.value?r=n:l.dispatch("recruitment/candidateProfile/updateCandidateNotesGroupBy",r);const s=(0,i.ref)([{id:pS.Q6,label:"None"},{id:pS.KF,label:"Stage"}]),d={iconName:" ",iconStyle:{"margin-right":0},displayType:"label",style:{"justify-content":"space-between",padding:"0.5rem","border-radius":"2rem","font-size":"13px","font-weight":"800","background-color":"#f1f2f5",color:"#64728c"}},c=(0,i.computed)((()=>{var e,t;return(null===(e=a.value)||void 0===e?void 0:e.notes)?null===(t=a.value)||void 0===t?void 0:t.notes:[]})),m=(0,i.computed)((()=>{var e,t;return(null===(e=a.value)||void 0===e?void 0:e.events)?null===(t=a.value)||void 0===t?void 0:t.events:[]})),u=(0,i.computed)((()=>{var e,t;return(null===(e=a.value)||void 0===e?void 0:e.pastEvents)?null===(t=a.value)||void 0===t?void 0:t.pastEvents:[]})),p=(0,i.inject)("$toast"),v=ce(),h=new Vf,g=new Bf,y=(0,i.ref)(!0);(!(null===(o=e.dataGroupPermissions)||void 0===o?void 0:o.update)||e.selectedVacancyIdForEvents&&"-1"!==e.selectedVacancyIdForEvents)&&(y.value=!1);const f=(0,i.ref)({id:1,label:"General Notes"}),b=(0,i.ref)([]),C=(0,i.ref)([]),S=(0,i.ref)([]),{jsDisplayFormat:w,locale:E}=Im(),k=e=>(0,se.p6)(new Date(e),w,{locale:E}),x=e=>`images/${g.getDefaultProfilePicName(e)}`,N=(t,o,a)=>{const i=t.addedEmployee?{id:t.addedEmployee.id,commenterName:ge.getEmployeeName(t.addedEmployee.firstName,t.addedEmployee.middleName,t.addedEmployee.lastName,Boolean(t.addedEmployee.terminationId)),avatarUrl:t.addedEmployee.profilePic?ge.base64ImageConvertion("image/jpeg",t.addedEmployee.profilePic.image):x(t.addedEmployee.id)}:{id:"-1",commenterName:ge.getEmployeeName("Admin","","",!1)};return{isGeneralNotes:a,groupId:o,id:t.id,allowToEdit:!(e.selectedVacancyIdForEvents&&(!e.selectedVacancyIdForEvents||"-1"!==e.selectedVacancyIdForEvents))&&t.editable,allowToDelete:!(e.selectedVacancyIdForEvents&&(!e.selectedVacancyIdForEvents||"-1"!==e.selectedVacancyIdForEvents))&&t.deletable,content:t.note,user:i,addedTime:t.addedTime,time:t.addedTime,formattedTime:k(t.addedTime),edited:!!t.updatedTime||(t.edited||!1),labelHint:t.addedFromResume?v("(Added note on resume)"):null}};let A=!1;const D=(e,o)=>{var i;if(A)return!0;A=!0,h.addCandidateComment(null===(i=a.value)||void 0===i?void 0:i.id,{comment:o.value,addedFromResume:!1}).then((e=>{var i,l,n;if(A=!1,e.data.success){const r=e.data.data,s={addedEmployee:r.addedEmployee,addedTime:r.addedTime,id:r.id,note:r.note,updatedTime:r.updatedTime,deletable:r.deletable,editable:r.editable,addedFromResume:r.addedFromResume};null===(l=null===(i=a.value)||void 0===i?void 0:i.notes)||void 0===l||l.push(s);const d=N(s,"group-1",!0);b.value.length>0?b.value[0].comments.push(d):(b.value.push({id:"group-1",label:v("General Notes"),comments:[d]}),S.value=[...S.value,...b.value]),t("setNotes",null===(n=a.value)||void 0===n?void 0:n.notes),t("updateAuditlog"),o.successCallback(),p.success({title:v(Ec),message:v(be)})}else p.error({title:v(kc),message:v(Ee)})})).catch((()=>A=!1))},T=e=>{h.updateCandidateComment(e.comment.id,e.value).then((o=>{var i,l,n;if(o.data.success){const o=b.value[0].comments.find((t=>t.id===e.comment.id));void 0!=o&&(o.note=e.value,o.content=e.value,o.edited=!0);const r=null===(l=null===(i=a.value)||void 0===i?void 0:i.notes)||void 0===l?void 0:l.find((t=>t.id===e.comment.id));r&&(r.note=e.value,r.edited=!0),t("setNotes",null===(n=a.value)||void 0===n?void 0:n.notes),t("updateAuditlog"),p.success({title:v(Ec),message:v(Se)})}else p.error({title:v(kc),message:v(ke)})}))},P=()=>{const e=S.value.findIndex((e=>0===e.comments.length));S.value.splice(e,1)},V=e=>{h.deleteCandidateComment(e.value.id).then((()=>{var o,i,l,n;const r=b.value[0].comments.findIndex((t=>t.id===e.value.id));b.value[0].comments.splice(r,1);const s=null===(i=null===(o=a.value)||void 0===o?void 0:o.notes)||void 0===i?void 0:i.findIndex((t=>t.id===e.value.id));s>-1&&(null===(n=null===(l=a.value)||void 0===l?void 0:l.notes)||void 0===n||n.splice(s,1)),0===b.value[0].comments.length&&(b.value.splice(0,b.value.length),P()),t("updateAuditlog"),p.success({title:v(Ec),message:v(we)})}))},B=e=>{e.comment.isFinalNote?z(e):e.comment.isScheduleNote?M(e):h.updateCandidateEventNote(e.comment.id,{comment:e.value}).then((t=>{var o,i;if(t.data.success){const t=C.value.find((t=>t.id===e.comment.groupId)),l=null===(i=null===(o=a.value)||void 0===o?void 0:o.events)||void 0===i?void 0:i.find((t=>t.id===e.comment.groupId));if(t){const o=t.comments.findIndex((t=>t.id===e.comment.id));o>-1&&(t.comments[o].note=e.value,t.comments[o].content=e.value,t.comments[o].edited=!0)}if(l){const t=l.notes.findIndex((t=>t.id===e.comment.id));if(t>-1){const o=l.notes[t];o.note=e.value,o.edited=!0}}p.success({title:v(Ec),message:v(Se)})}else p.error({title:v(kc),message:v(ke)})}))},I=e=>{e.value.isFinalNote?z(Object.assign(Object.assign({},e.value),{isDelete:!0})):e.value.isScheduleNote?M(Object.assign(Object.assign({},e.value),{isDelete:!0})):h.deleteCandidateEventNote(e.value.id).then((o=>{var i,l;if(204==o.status){const o=C.value.find((t=>t.id===e.value.groupId));if(o){const t=o.comments.findIndex((t=>t.id===e.value.id)),n=null===(l=null===(i=a.value)||void 0===i?void 0:i.events)||void 0===l?void 0:l.find((t=>t.id===e.value.groupId)),r=null===n||void 0===n?void 0:n.notes.findIndex((t=>t.id===e.value.id));if(t>-1&&o.comments.splice(t,1),r>-1&&(null===n||void 0===n||n.notes.splice(r,1)),0==o.comments.length){const t=C.value.findIndex((t=>t.id===e.value.groupId));C.value.splice(t,1),P()}}t("updateAuditlog"),p.success({title:v(Ec),message:v(we)})}else p.error({title:v(kc),message:v(xe)})}))},L=()=>new Promise((e=>{var t,o,i,l;const n=null===(o=null===(t=a.value)||void 0===t?void 0:t.notes)||void 0===o?void 0:o.map((e=>N(e,"group-1",!0))),r=null===n||void 0===n?void 0:n.sort(((e,t)=>e.id-t.id));b.value=(null===(i=a.value)||void 0===i?void 0:i.notes)&&(null===(l=a.value)||void 0===l?void 0:l.notes.length)>0?[{id:"group-1",comments:r}]:[],e(b.value)})),F=()=>new Promise((e=>{var t,o;const i=[],l=[];null===(o=null===(t=a.value)||void 0===t?void 0:t.events)||void 0===o||o.forEach((e=>{var t,o,a;const l=e.notes.map((t=>N(t,e.id,!1))).sort(((e,t)=>e.id-t.id)),n=e.scheduleNote&&Object.assign(Object.assign({},N(e.scheduleNote,e.id,!1)),{isScheduleNote:!0,event:e}),r=e.finalNote&&Object.assign(Object.assign({},N(e.finalNote,e.id,!1)),{isFinalNote:!0,event:e}),s=`${null===(t=e.vacancyEvent.vacancy)||void 0===t?void 0:t.name}: ${v(e.vacancyEvent.eventTitle)}`;if(l.length>0)n&&l.push(n),r&&l.push(r),i.push({id:e.id,label:s,customGroupName:{labelPrimary:null===(o=e.vacancyEvent.vacancy)||void 0===o?void 0:o.name,labelSecondary:`: ${v(e.vacancyEvent.eventTitle)}`},comments:l});else{const t=[];if(!r&&!n)return!0;n&&t.push(n),r&&t.push(r),i.push({id:e.id,label:s,customGroupName:{labelPrimary:null===(a=e.vacancyEvent.vacancy)||void 0===a?void 0:a.name,labelSecondary:`: ${v(e.vacancyEvent.eventTitle)}`},comments:t})}})),u.value.forEach((e=>{var t,o,a;const i=e.notes.map((t=>N(t,e.id,!1))).sort(((e,t)=>e.id-t.id)),n=e.finalNote&&Object.assign(Object.assign({},N(e.finalNote,e.id,!1)),{isFinalNote:!0,event:e}),r=e.scheduleNote&&Object.assign(Object.assign({},N(e.scheduleNote,e.id,!1)),{isScheduleNote:!0,event:e}),s=`${null===(t=e.vacancyEvent.vacancy)||void 0===t?void 0:t.name}: ${v(e.vacancyEvent.eventTitle)}`;if(i.length>0)r&&i.push(r),n&&i.push(n),l.push({id:e.id,label:s,customGroupName:{labelPrimary:null===(o=e.vacancyEvent.vacancy)||void 0===o?void 0:o.name,labelSecondary:`: ${v(e.vacancyEvent.eventTitle)}`},comments:i});else{if(!n&&!r)return!0;const t=[];r&&t.push(r),n&&t.push(n),l.push({id:e.id,label:s,customGroupName:{labelPrimary:null===(a=e.vacancyEvent.vacancy)||void 0===a?void 0:a.name,labelSecondary:`: ${v(e.vacancyEvent.eventTitle)}`},comments:t})}})),C.value=[...l,...i],e(C.value)})),z=e=>{var o;const i=null===(o=a.value)||void 0===o?void 0:o.id;let l;l=e.isDelete?e.event.vacancyEvent.id:e.comment.event.vacancyEvent.id,h.partialUpdateFinalNote(i,l,Object.assign(Object.assign({},""!==e.value&&{finalComment:e.value||null}),{partialUpdate:["finalComment"]})).then((()=>{var o,i,l,n,r,s;const d=e.isDelete?e.groupId:null===(o=e.comment)||void 0===o?void 0:o.groupId,c=C.value.find((e=>e.id===d)),m=null===(l=null===(i=a.value)||void 0===i?void 0:i.events)||void 0===l?void 0:l.find((e=>e.finalNote));if(e.isDelete){if(m.finalNote=null,c&&m){const e=c.comments.findIndex((e=>c.finalNote));c.comments.splice(e,1),P()}p.success({title:v(Ec),message:v(we)})}else{if(c&&m){const t=c.comments.findIndex((e=>e.isFinalNote));m.finalNote.note=e.value,m.finalNote.edited=!0,t>-1&&(c.comments[t].note=e.value,c.comments[t].content=e.value,c.comments[t].edited=!0);const o=null===(r=null===(n=a.value)||void 0===n?void 0:n.events)||void 0===r?void 0:r.find((e=>e.id===d));o&&o.finalNote&&(o.finalNote.edited=!0,o.edited=!0)}p.success({title:v(Ec),message:v(Se)})}t("updateAuditlog"),t("setEventNotes",null===(s=a.value)||void 0===s?void 0:s.events)}))},M=e=>{var o;const i=null===(o=a.value)||void 0===o?void 0:o.id;let l;l=e.isDelete?e.event.vacancyEvent.id:e.comment.event.vacancyEvent.id,h.partialUpdateScheduleNote(i,l,Object.assign(Object.assign({},""!==e.value&&{scheduleComment:e.value||null}),{partialUpdate:["scheduleComment"]})).then((()=>{var o,i,l;const n=e.isDelete?e.groupId:null===(o=e.comment)||void 0===o?void 0:o.groupId,r=C.value.find((e=>e.id===n)),s=null===(i=a.value.events)||void 0===i?void 0:i.find((e=>e.scheduleNote));if(e.isDelete){if(s.scheduleNote=null,r&&s){const e=r.comments.findIndex((e=>e.isScheduleNote));r.comments.splice(e,1),P()}p.success({title:v(Ec),message:v(we)})}else{if(r&&s){const t=r.comments.findIndex((e=>e.isScheduleNote));s.scheduleNote.note=e.value,s.scheduleNote.edited=!0,t>-1&&(r.comments[t].note=e.value,r.comments[t].content=e.value,r.comments[t].edited=!0);const o=null===(l=a.value.events)||void 0===l?void 0:l.find((e=>e.id===n));o&&o.scheduleNote&&(o.scheduleNote.edited=!0,o.edited=!0)}p.success({title:v(Ec),message:v(Se)})}t("setEventNotes",a.value.events)}))},O=[{id:1,label:"General Notes"},{id:2,label:"Event Notes"}],R=()=>{Promise.all([L(),F()]).then((e=>{let t=e[0];t.length>0&&(t[0].label=v("General Notes"));const o=e[1];S.value=[],S.value=[...o,...t]}))};R();const _=(e,t)=>{t.comment.isGeneralNotes?T(t):B(t)},$=(e,t)=>{t.value.isGeneralNotes?V(t):I(t)},j=e=>{r.value=e,l.dispatch("recruitment/candidateProfile/updateCandidateNotesGroupBy",e)};return{addGeneralNotes:D,updateGeneralNotes:T,deleteGeneralNotes:V,generalNotes:b,options:O,hasPermissions:y,segmentValue:f,sectionNotes:C,updateSectionNotes:B,deleteSectionNotes:I,getGeneralNotes:L,getSectionNotes:F,notes:c,events:m,combinedNotes:S,getCombinedNotes:R,updateNotes:_,deleteNotes:$,candidate:a,groupingButton:d,groupingOptions:s,selectedGroupingOption:r,selectGroupingOption:j}}});const SS=(0,Re.Z)(CS,[["render",mS],["__scopeId","data-v-7b65b992"]]);var wS=SS;const ES="Processing E-signature Request",kS="Please Wait While We Process Your E-signature Request. This May Take a Moment.";var xS=o(54641),NS=o(3471);const AS={class:"oxd-candidate-history-info-pill-wrapper"},DS={class:"oxd-candidate-history-info-pill-header"},TS={key:0,class:"oxd-candidate-history-info-pill-date-and-time"},PS={class:"oxd-candidate-history-info-pill-date"},VS={class:"oxd-candidate-history-info-pill-time"},BS={class:"oxd-candidate-history-info-pill-header-right align-start d-flex"},IS={key:0,class:"oxd-candidate-history-info-pill-marks-indicator"},LS={class:"oxd-candidate-history-info-pill-header-state-label"},FS={key:0,class:"oxd-candidate-history-info-pill-date-and-time"},zS={class:"oxd-candidate-history-info-pill-date"},MS={class:"oxd-candidate-history-info-pill-time"};function OS(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-progress-circle"),s=(0,i.resolveComponent)("oxd-icon"),d=(0,i.resolveComponent)("oxd-icon-button"),c=(0,i.resolveComponent)("oxd-info-pill");return(0,i.openBlock)(),(0,i.createBlock)(c,{class:(0,i.normalizeClass)(e.classes)},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",AS,[(0,i.createElementVNode)("div",DS,[(0,i.createElementVNode)("div",{class:"oxd-candidate-history-info-pill-header-title",style:(0,i.normalizeStyle)(e.customTitleStyles)},[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.eventData.title))+" ",1),e.eventData.date&&e.eventData.time&&e.eventData.scoreType?((0,i.openBlock)(),(0,i.createElementBlock)("div",TS,[(0,i.createElementVNode)("div",PS,(0,i.toDisplayString)(e.$t(e.eventData.date)),1),(0,i.createElementVNode)("div",VS,(0,i.toDisplayString)(e.$t(e.eventData.time)),1)])):(0,i.createCommentVNode)("",!0)],4),(0,i.createElementVNode)("div",BS,[e.eventData.scoreType?((0,i.openBlock)(),(0,i.createElementBlock)("div",IS,[(0,i.createVNode)(r,{value:e.eventData.score,"stroke-fill-color":e.getCustomStrokeFill()},null,8,["value","stroke-fill-color"])])):(0,i.createCommentVNode)("",!0),!e.eventData.scoreType&&e.eventData.status?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:1,class:(0,i.normalizeClass)(["oxd-candidate-history-info-pill-header-state d-flex align-center",e.eventStateClasses])},["Pass"===e.eventData.status||"Fail"===e.eventData.status?((0,i.openBlock)(),(0,i.createBlock)(s,{key:0,name:e.statusIconName(),class:(0,i.normalizeClass)(e.getStatusClass())},null,8,["name","class"])):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("div",LS,(0,i.toDisplayString)(e.$t(e.eventData.status)),1)],2)):(0,i.createCommentVNode)("",!0)])]),e.eventData.date&&e.eventData.time&&!e.eventData.scoreType?((0,i.openBlock)(),(0,i.createElementBlock)("div",FS,[(0,i.createElementVNode)("div",zS,(0,i.toDisplayString)(e.$t(e.eventData.date)),1),(0,i.createElementVNode)("div",MS,(0,i.toDisplayString)(e.$t(e.eventData.time)),1)])):(0,i.createCommentVNode)("",!0)]),e.eventData.editable?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,class:"oxd-candidate-history-info-action-button-wrapper",style:(0,i.normalizeStyle)(e.customEditButtonWrapper)},[(0,i.createVNode)(d,{class:(0,i.normalizeClass)(["oxd-candidate-history-info-action-button edit-button",e.actionButtonClasses]),name:"oxd-edit",size:"xxx-small",onClick:e.onClickEdit,onFocus:e.onFocusEdit,onBlur:e.onBlurEdit,tooltip:e.$t("Edit Candidate Event")},null,8,["class","onClick","onFocus","onBlur","tooltip"]),"NOT_STARTED"===e.eventData.processingState||"started"===e.eventData.processingState?((0,i.openBlock)(),(0,i.createBlock)(d,{key:0,class:(0,i.normalizeClass)(["oxd-candidate-history-info-action-button details-button --accepted",e.actionButtonClasses]),name:"oxd-play",size:"xxx-small",onClick:t[0]||(t[0]=t=>e.onClickEventDetails(t,e.eventData)),tooltip:e.$t(e.getPlayIconTooltip())},null,8,["class","tooltip"])):(0,i.createCommentVNode)("",!0)],4)):(0,i.createCommentVNode)("",!0)])),_:1},8,["class"])}function RS(e,t,o,a,l,n){return(0,i.openBlock)(),(0,i.createElementBlock)("button",{class:(0,i.normalizeClass)(["oxd-info-pill-container",e.classes]),onFocus:t[0]||(t[0]=(...t)=>e.onFocus&&e.onFocus(...t)),onBlur:t[1]||(t[1]=(...t)=>e.onBlur&&e.onBlur(...t)),onClick:t[2]||(t[2]=(...t)=>e.onClick&&e.onClick(...t)),tabindex:"0"},[(0,i.renderSlot)(e.$slots,"default",{},void 0,!0)],34)}var _S=(0,i.defineComponent)({name:"oxd-info-pill",data(){return{focused:!1}},computed:{classes(){return{"oxd-info-pill-container--focus":this.focused}}},methods:{onFocus(e){this.focused=!0},onBlur(e){this.focused=!1},onClick(e){this.$emit("click",e)}}});const $S=(0,Re.Z)(_S,[["render",RS],["__scopeId","data-v-9c8500a4"]]);var jS=$S,US=o(77101),ZS=(0,i.defineComponent)({name:"oxd-candidate-history-info-pill",components:{"oxd-info-pill":jS,"oxd-icon-button":D.Z,"oxd-progress-circle":US.Z,"oxd-icon":In.Z},props:{eventData:{type:Object,required:!0}},data(){return{buttonFocused:!1}},computed:{classes(){return"Accepted"===this.$props.eventData.status?{"info-offer-accepted":!0}:"Rejected"===this.$props.eventData.status?{"info-offer-rejected":!0}:{}},eventStateClasses(){return"Accepted"===this.$props.eventData.status||"Pass"===this.$props.eventData.status?{"oxd-candidate-history-info-pill-header-state--accepted":!0}:"Rejected"===this.$props.eventData.status||"Fail"===this.$props.eventData.status?{"oxd-candidate-history-info-pill-header-state--rejected":!0}:{}},actionButtonClasses(){return"Accepted"===this.$props.eventData.status?{"oxd-candidate-history-info-action-button--accepted":!0,"oxd-candidate-history-info-action-button--accepted--focus":this.buttonFocused}:"Rejected"===this.$props.eventData.status?{"oxd-candidate-history-info-action-button--rejected":!0,"oxd-candidate-history-info-action-button--rejected--focus":this.buttonFocused}:{}},customEditButtonWrapper(){return this.eventData.scoreType?{"padding-left":0}:{}},customTitleStyles(){return this.eventData.scoreType?{}:{"max-width":"50%"}}},methods:{onClickEdit(e){e.stopImmediatePropagation(),this.$emit("onClickEdit",e)},onClickEventDetails(e,t){e.stopImmediatePropagation(),this.$emit("onClickEventDetails",t)},onFocusEdit(){this.buttonFocused=!0},onBlurEdit(){this.buttonFocused=!1},getCustomStrokeFill(){if(this.$props.eventData.score)return this.$props.eventData.score>=75?"#95be35":this.$props.eventData.score>=50?"#ffaa00":"#ff414e"},statusIconName(){return"Pass"===this.$props.eventData.status?"oxd-pass":"Fail"===this.$props.eventData.status?"oxd-fail":void 0},getStatusClass(){return"Pass"===this.$props.eventData.status?{"oxd-candidate-history-info-pill-header-state--pass":!0}:"Fail"===this.$props.eventData.status?{"oxd-candidate-history-info-pill-header-state--fail":!0}:void 0},getPlayIconTooltip(){let e="";switch(this.$props.eventData.processingState){case"NOT_STARTED":e="Start Interview";break;case"started":e="Join Interview";break}return e}}});const HS=(0,Re.Z)(ZS,[["render",OS],["__scopeId","data-v-7be21072"]]);var qS=HS;function GS(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-schema-form"),s=(0,i.resolveComponent)("form-modal");return(0,i.openBlock)(),(0,i.createBlock)(s,{"max-width":"1000px"},{title:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.modalTitle),1)])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(r,(0,i.mergeProps)({schema:e.schema,model:e.model,"onUpdate:model":t[0]||(t[0]=t=>e.model=t)},e.$attrs,{onSubmit:e.submit}),null,16,["schema","model","onSubmit"])])),_:1})}function WS(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,{type:"select",options:e.options,showEmptySelector:!1},null,8,["options"])}class KS{constructor(){this._ngServices=(0,i.inject)("ngServices")}getTimeZones(){return this._ngServices.webservice.get("standardTimeZones",{},{})}}var QS=(0,i.defineComponent)({name:"TimezoneDropdown",components:{"oxd-input-field":lo.Z},props:{mode:{type:String,default:"read"}},setup(e){const t=(0,i.ref)([]),o=ce();return(0,i.onMounted)((()=>{const e=new KS;e.getTimeZones().then((e=>{e.data&&(t.value=e.data.data.map((e=>({id:e.name,label:"("+e.prefix.concat(") ",o(e.label)),offset:e.offset,prefix:e.prefix}))))}))})),{options:t}}});const JS=(0,Re.Z)(QS,[["render",WS]]);var YS=JS;function XS(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,(0,i.mergeProps)({type:"select"},e.$attrs,{showEmptySelector:!0,modelValue:e.modelValue}),null,16,["modelValue"])}var ew=(0,i.defineComponent)({name:"StatusDropdown",components:{"oxd-input-field":lo.Z},props:{modelValue:{type:Object}}});const tw=(0,Re.Z)(ew,[["render",XS]]);var ow=tw;const aw={class:"oxd-score-input-wrapper d-flex align-center justify-between"};function iw(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field"),s=(0,i.resolveComponent)("oxd-chip");return(0,i.openBlock)(),(0,i.createElementBlock)("div",aw,[(0,i.createVNode)(r,(0,i.mergeProps)({type:"input"},e.$attrs),null,16),e.inputLabelChip?((0,i.openBlock)(),(0,i.createBlock)(s,{key:0,label:e.inputLabelChip,backgroundColor:"#f1f2f5",color:"#64728c",tooltip:e.$t("Max Score")},null,8,["label","tooltip"])):(0,i.createCommentVNode)("",!0)])}var lw=(0,i.defineComponent)({name:"ScoreInput",props:{inputLabelChip:{type:String}},components:{"oxd-input-field":lo.Z,"oxd-chip":Ip.Z}});const nw=(0,Re.Z)(lw,[["render",iw],["__scopeId","data-v-689a7602"]]);var rw=nw;const sw={class:"modal-header section-switch"},dw={class:"row w-100"},cw={class:"col-3"},mw=["textContent"],uw={class:"col-9"};function pw(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-switch-input");return(0,i.openBlock)(),(0,i.createElementBlock)("div",sw,[(0,i.createElementVNode)("div",dw,[(0,i.createElementVNode)("div",cw,[(0,i.createElementVNode)("h5",{class:"modal-title",textContent:(0,i.toDisplayString)(e.title)},null,8,mw)]),(0,i.createElementVNode)("div",uw,[(0,i.createVNode)(r,{class:"oxd-section-switch-input",modelValue:e.vModel,"onUpdate:modelValue":t[0]||(t[0]=t=>e.vModel=t),onChange:e.onChange},null,8,["modelValue","onChange"])])])])}var vw=o(68256),hw=(0,i.defineComponent)({props:{modelValue:{},title:{type:String,required:!0}},emits:["update:modelValue","blur","focus","change"],components:{"oxd-switch-input":vw.Z},setup(e,{emit:t}){const o=(0,i.ref)(e.modelValue),a=()=>{t("update:modelValue",o.value),t("change",o.value)};return{onChange:a,vModel:o}}});const gw=(0,Re.Z)(hw,[["render",pw],["__scopeId","data-v-a5fa0eba"]]);var yw=gw;function fw(e){function t(t,o,i,l=!1){if(!a(t))return t;t=parseFloat(t);let n=null===e||void 0===e?void 0:e.decimal_separator,r=null===e||void 0===e?void 0:e.thousand_separator,s=null===e||void 0===e?void 0:e.is_currency_symbol_at_right;s="undefined"!==typeof s&&"1"===s,o="undefined"===typeof o||null===o||isNaN(o=Math.abs(o))?2:o,n="undefined"===typeof n||null===n?".":n,r="undefined"===typeof r||null===r?",":r;const d="\\d(?=(\\d{3})+"+(o>0?"\\D":"$")+")",c=t.toFixed(Math.max(0,~~o)),m=i&&!s?i:"",u=i&&s?i:"";return l?m+(n?c.replace(".",n):c)+u:m+(n?c.replace(".",n):c).replace(new RegExp(d,"g"),"$&"+(r||","))+u}function o(e,t,o,a){let i;e=e||0,a=a||1;const l=[],n=[];for(let r=e;r<=t;r+=o){i=r.toString();while(i.length<a)i="0"+i;n.push(i),l.push({value:i,name:i})}return{titleMap:l,enum:n}}function a(e){return!isNaN(parseFloat(e))&&!isNaN(e-0)}function i(e,t){const o=Math.pow(10,t);return(Math.floor(e*o)/o).toFixed(t)}const l={formatCurrencyValue:t,getNumberArrayForDropdown:o,isNumber:a,roundDown:i};return l}const bw=e=>((0,i.pushScopeId)("data-v-fbb5d9ca"),e=e(),(0,i.popScopeId)(),e),Cw={class:"oxd-salary-details-form"},Sw={class:"--table x"},ww=["width"],Ew={colspan:"4"},kw=["width"],xw={class:"mb-0"},Nw=["width"],Aw=["width"],Dw=["textContent"],Tw=["width"],Pw=["textContent"],Vw=bw((()=>(0,i.createElementVNode)("tr",null,[(0,i.createElementVNode)("td",{colspan:"4"})],-1))),Bw={class:"summary-row"},Iw={colspan:"3"},Lw={class:"d-flex align-center justify-start"},Fw={class:"modal-title ml-2"},zw=["textContent"],Mw={class:"--table"},Ow=["width"],Rw={colspan:"4"},_w=["width"],$w={class:"mb-0"},jw=["width"],Uw=["width"],Zw=["textContent"],Hw=["width"],qw=["textContent"],Gw=bw((()=>(0,i.createElementVNode)("tr",null,[(0,i.createElementVNode)("td",{colspan:"4"})],-1))),Ww={class:"summary-row"},Kw={colspan:"3"},Qw={class:"d-flex align-center justify-start"},Jw={class:"modal-title ml-2"},Yw=["textContent"];function Xw(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxdDivider"),s=(0,i.resolveComponent)("oxd-input-field"),d=(0,i.resolveComponent)("oxd-icon-button");return(0,i.openBlock)(),(0,i.createElementBlock)("div",Cw,[(0,i.createElementVNode)("table",Sw,[(0,i.createElementVNode)("thead",null,[(0,i.createElementVNode)("tr",null,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.earningListHeaders,((t,o)=>((0,i.openBlock)(),(0,i.createElementBlock)("th",{key:o,width:t.width},[(0,i.createElementVNode)("label",{class:(0,i.normalizeClass)(["oxd-label",t.cssClasses])},(0,i.toDisplayString)(e.$t(t.label)),3)],8,ww)))),128))])]),(0,i.withDirectives)((0,i.createElementVNode)("tbody",null,[(0,i.createElementVNode)("tr",null,[(0,i.createElementVNode)("td",Ew,[(0,i.createVNode)(r)])]),((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.earningList,((t,o)=>{var a,l,n,r;return(0,i.openBlock)(),(0,i.createElementBlock)("tr",{key:o},[(0,i.createElementVNode)("td",{width:e.earningListHeaders[0].width},[(0,i.createElementVNode)("p",xw,(0,i.toDisplayString)(e.$t(t.label))+" "+(0,i.toDisplayString)("Annual Basic Payment"===t.name?"*":""),1)],8,kw),(0,i.createElementVNode)("td",{width:e.earningListHeaders[1].width},[(0,i.createVNode)(s,{class:"mb-0 text-right",modelValue:t.value,rules:e.show?t.rules:[],dirty:!0,"onUpdate:modelValue":o=>e.updateAmount(o,t)},null,8,["modelValue","rules","onUpdate:modelValue"])],8,Nw),(0,i.createElementVNode)("td",{width:e.earningListHeaders[2].width},[e.endsWithPercentageList.includes(t.endsWithPercentage)?((0,i.openBlock)(),(0,i.createElementBlock)("p",{key:0,class:"mb-0",textContent:(0,i.toDisplayString)(t.endsWithPercentage===e.SalaryComponentValueTypeIdsEnum.AmountWithPercentage?e.$t("%"):e.$t("End with % of percentages. Eg: 5%"))},null,8,Dw)):(0,i.createCommentVNode)("",!0)],8,Aw),(0,i.createElementVNode)("td",{width:e.earningListHeaders[3].width},[t.amount>0?((0,i.openBlock)(),(0,i.createElementBlock)("span",{key:0,class:"text-right d-block",textContent:(0,i.toDisplayString)(e.formatCurrencyValue(t.amount,null===(l=null===(a=e.filteredCurrency)||void 0===a?void 0:a.CurrencyType)||void 0===l?void 0:l.decimals,null===(r=null===(n=e.filteredCurrency)||void 0===n?void 0:n.CurrencyType)||void 0===r?void 0:r.currency_symbol))},null,8,Pw)):(0,i.createCommentVNode)("",!0)],8,Tw)])})),128))],512),[[i.vShow,e.showEarningSection]]),(0,i.createElementVNode)("tfoot",null,[Vw,(0,i.createElementVNode)("tr",Bw,[(0,i.createElementVNode)("td",Iw,[(0,i.createElementVNode)("div",Lw,[(0,i.createVNode)(d,{name:"oxd-caret-"+(e.showEarningSection?"up":"down"),size:"xxx-small",onClick:t[0]||(t[0]=t=>e.showEarningSection=!e.showEarningSection),"data-test":"section-toggle-button"},null,8,["name"]),(0,i.createElementVNode)("span",Fw,(0,i.toDisplayString)(e.$t("Gross Pay")),1)])]),(0,i.createElementVNode)("td",{class:"adjusted-amount modal-title text-right",textContent:(0,i.toDisplayString)(e.getFormattedGrossPay)},null,8,zw)])])]),(0,i.createElementVNode)("table",Mw,[(0,i.createElementVNode)("thead",null,[(0,i.createElementVNode)("tr",null,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.deductionListHeaders,((e,t)=>((0,i.openBlock)(),(0,i.createElementBlock)("th",{key:t,width:e.width},[(0,i.createElementVNode)("label",{class:(0,i.normalizeClass)(["oxd-label",e.cssClasses])},(0,i.toDisplayString)(e.label),3)],8,Ow)))),128))])]),(0,i.withDirectives)((0,i.createElementVNode)("tbody",null,[(0,i.createElementVNode)("tr",null,[(0,i.createElementVNode)("td",Rw,[(0,i.createVNode)(r)])]),((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.deductionList,((t,o)=>{var a,l,n,r;return(0,i.openBlock)(),(0,i.createElementBlock)("tr",{key:o},[(0,i.createElementVNode)("td",{width:e.deductionListHeaders[0].width},[(0,i.createElementVNode)("p",$w,(0,i.toDisplayString)(e.$t(t.label)),1)],8,_w),(0,i.createElementVNode)("td",{width:e.deductionListHeaders[1].width},[(0,i.createVNode)(s,{class:"mb-0 text-right",modelValue:t.value,rules:t.rules,"onUpdate:modelValue":o=>e.updateAmount(o,t)},null,8,["modelValue","rules","onUpdate:modelValue"])],8,jw),(0,i.createElementVNode)("td",{width:e.deductionListHeaders[2].width},[e.endsWithPercentageList.includes(t.endsWithPercentage)?((0,i.openBlock)(),(0,i.createElementBlock)("p",{key:0,class:"mb-0",textContent:(0,i.toDisplayString)(t.endsWithPercentage===e.SalaryComponentValueTypeIdsEnum.AmountWithPercentage?e.$t("%"):e.$t("End with % of percentages. Eg: 5%"))},null,8,Zw)):(0,i.createCommentVNode)("",!0)],8,Uw),(0,i.createElementVNode)("td",{width:e.deductionListHeaders[3].width},[t.amount>0?((0,i.openBlock)(),(0,i.createElementBlock)("span",{key:0,class:"text-right d-block",textContent:(0,i.toDisplayString)(e.formatCurrencyValue(t.amount,null===(l=null===(a=e.filteredCurrency)||void 0===a?void 0:a.CurrencyType)||void 0===l?void 0:l.decimals,null===(r=null===(n=e.filteredCurrency)||void 0===n?void 0:n.CurrencyType)||void 0===r?void 0:r.currency_symbol))},null,8,qw)):(0,i.createCommentVNode)("",!0)],8,Hw)])})),128))],512),[[i.vShow,e.showDeductionSection]]),(0,i.createElementVNode)("tfoot",null,[Gw,(0,i.createElementVNode)("tr",Ww,[(0,i.createElementVNode)("td",Kw,[(0,i.createElementVNode)("div",Qw,[(0,i.createVNode)(d,{name:"oxd-caret-"+(e.showDeductionSection?"up":"down"),size:"xxx-small",onClick:t[1]||(t[1]=t=>e.showDeductionSection=!e.showDeductionSection),"data-test":"section-toggle-button"},null,8,["name"]),(0,i.createElementVNode)("span",Jw,(0,i.toDisplayString)(e.$t("Total Deductions")),1)])]),(0,i.createElementVNode)("td",{class:"adjusted-amount modal-title text-right",textContent:(0,i.toDisplayString)(e.getFormattedDeductions)},null,8,Yw)])])])])}var eE=(0,i.defineComponent)({name:"SalaryDetailsForm",components:{oxdDivider:ro.Z,"oxd-input-field":lo.Z,"oxd-icon-button":D.Z},props:{payGrade:{type:Object},currency:{type:Object},filteredCurrency:{type:Object},show:{type:Boolean,default:!1},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:t}){const o=new Vf,a=ce(),l=(0,i.inject)("languageSettings"),n=(0,i.computed)((()=>{var t,o;return[{label:a("Earning"),width:"25%"},{label:`${a("Amount")} / ${a("Currency")}`,width:"20%"},{label:"",width:"26.5%"},{label:(null===(t=e.filteredCurrency)||void 0===t?void 0:t.currency_id)?`${a("Amount")} (${null===(o=e.filteredCurrency)||void 0===o?void 0:o.currency_id})`:a("Amount"),cssClasses:"text-right",width:"29.5%"}]})),r=(0,i.computed)((()=>{var t,o;return[{label:a("Deduction"),width:"25%"},{label:`${a("Amount")} / ${a("Currency")}`,width:"20%"},{label:"",width:"26.5%"},{label:(null===(t=e.filteredCurrency)||void 0===t?void 0:t.currency_id)?`${a("Amount")} (${null===(o=e.filteredCurrency)||void 0===o?void 0:o.currency_id})`:a("Amount"),cssClasses:"text-right",width:"29.5%"}]})),s=(0,i.ref)([]),d=(0,i.ref)([]),c=Kf,m=Wf,u=fw(l).formatCurrencyValue,p=()=>{o.getSalaryComponents().then((o=>{const a=o.data.data;e.modelValue.forEach((e=>a.map((t=>{t.id===e.id&&(t.value=e.value,t.amount=Number(e.value||"0"))})))),s.value=a.map((t=>{var o,a;return Object.assign(Object.assign({},t),{label:t.name,value:"0"===t.value?void 0:u(t.value,null===(a=null===(o=e.filteredCurrency)||void 0===o?void 0:o.CurrencyType)||void 0===a?void 0:a.decimals,void 0),amount:t.amount||0,endsWithPercentage:t.value_type,rules:v(t)})})).filter((e=>e.type===Gf.Earning)),d.value=a.map((t=>{var o,a;return Object.assign(Object.assign({},t),{label:t.name,value:"0"===t.value?void 0:u(t.value,null===(a=null===(o=e.filteredCurrency)||void 0===o?void 0:o.CurrencyType)||void 0===a?void 0:a.decimals,void 0),amount:t.amount||0,endsWithPercentage:t.value_type,rules:v(t)})})).filter((e=>e.type===Gf.Deduction)),t("update:modelValue",a.map((e=>({id:e.id,value:e.value}))))}))},v=t=>{var o,a,i,n,r,s,d,c,m,p;let v=[];const h=u(null===(o=e.filteredCurrency)||void 0===o?void 0:o.minSalary,null===(i=null===(a=e.filteredCurrency)||void 0===a?void 0:a.CurrencyType)||void 0===i?void 0:i.decimals,void 0,!0),g=u(null===(n=e.filteredCurrency)||void 0===n?void 0:n.maxSalary,null===(s=null===(r=e.filteredCurrency)||void 0===r?void 0:r.CurrencyType)||void 0===s?void 0:s.decimals,void 0,!0);return t.value_type!==Wf.Amount||t.isEditable?t.value_type!==Wf.AmountWithPercentage&&t.value_type!==Wf.Amount&&t.isEditable?v=[...v,Wa(l,null===(c=e.filteredCurrency)||void 0===c?void 0:c.CurrencyType,!0),fi("999,999,999,999,999.00",void 0,void 0,!0),fi("1,000.00",!0)]:t.value_type===Wf.AmountWithPercentage?v=[...v,Wa(l,null===(m=e.filteredCurrency)||void 0===m?void 0:m.CurrencyType,void 0,!0),fi("1,000.00",void 0,!0)]:t.value_type===Wf.Amount&&(v=[...v,Wa(l,null===(p=e.filteredCurrency)||void 0===p?void 0:p.CurrencyType),fi("999,999,999,999,999.00")]):v=[Oa,Wa(l,null===(d=e.filteredCurrency)||void 0===d?void 0:d.CurrencyType),...h&&g?[]:[fi("999,999,999,999,999.00")],...h&&g?[yi(h,g)]:[]],v},h=(0,i.ref)(!0),g=(0,i.ref)(!0),y=e=>{const t=s.value.find((e=>e.value_type===Wf.Amount&&!e.isEditable));return e.reduce(((e,o)=>{var a,i,l;const n=(null===t||void 0===t?void 0:t.amount)||0;if(o.value_type!==Wf.AmountWithPercentage&&o.value_type!==Wf.Amount&&o.isEditable){const e="string"===typeof o.value&&(null===(a=o.value)||void 0===a?void 0:a.includes("%"));if(e){const e="string"===typeof o.value?null===(i=o.value)||void 0===i?void 0:i.replace("%","").replaceAll(",",""):o.value;o.amount=n/100*Number(e)}else o.amount}else if(o.endsWithPercentage===Wf.AmountWithPercentage){const e="string"===typeof o.value?null===(l=o.value)||void 0===l?void 0:l.replace("%","").replaceAll(",",""):o.value;o.amount=n/100*Number(e)}return isNaN(o.amount)?e:e+o.amount}),0)},f=(0,i.computed)((()=>y(s.value))),b=(0,i.computed)((()=>{var t,o,a,i;return f.value>0?u(f.value,null===(o=null===(t=e.filteredCurrency)||void 0===t?void 0:t.CurrencyType)||void 0===o?void 0:o.decimals,null===(i=null===(a=e.filteredCurrency)||void 0===a?void 0:a.CurrencyType)||void 0===i?void 0:i.currency_symbol):null})),C=(0,i.computed)((()=>y(d.value))),S=(0,i.computed)((()=>{var t,o,a,i;return C.value>0?u(C.value,null===(o=null===(t=e.filteredCurrency)||void 0===t?void 0:t.CurrencyType)||void 0===o?void 0:o.decimals,null===(i=null===(a=e.filteredCurrency)||void 0===a?void 0:a.CurrencyType)||void 0===i?void 0:i.currency_symbol):null})),w=(o,a)=>{a.value=o;const i=o.replaceAll(",","");a.amount=Number(i),t("update:modelValue",e.modelValue.map((e=>(e.id===a.id&&(e.value=o),e))))};return(0,i.watch)((()=>e.filteredCurrency),(()=>{p()}),{immediate:!0}),{earningList:s,deductionList:d,endsWithPercentageList:c,SalaryComponentValueTypeIdsEnum:m,showEarningSection:h,showDeductionSection:g,getFormattedGrossPay:b,getFormattedDeductions:S,earningListHeaders:n,deductionListHeaders:r,formatCurrencyValue:u,updateAmount:w,setRules:v}}});const tE=(0,Re.Z)(eE,[["render",Xw],["__scopeId","data-v-fbb5d9ca"]]);var oE=tE;const aE=ce(),iE=(0,i.ref)(!1),lE=(0,i.ref)(),nE=(0,i.ref)(),rE=(0,i.ref)(),sE=(0,i.ref)(),dE=(0,i.ref)();class cE{constructor(e){var t,o,a,l,n,r,s,d,c,m,u,p,v,h,g,y,f,b,C,S,w;this.jobDetailsSection=[],this.salaryDetailsSection=[],this.joinedDate=(0,i.ref)(),this.showEmpDetailsSection=(0,i.ref)(!1);const E=fw(e.languageSettings).formatCurrencyValue,k=null===(t=e.jobOfferDetail)||void 0===t?void 0:t.supervisor,x=(0,i.computed)((()=>k?Object.assign(Object.assign({},k),{id:k.empNumber,label:ge.getEmployeeName(k.firstName,k.middleName||"",k.lastName||"",Boolean(k.termination_id))}):{})),N=null===(a=null===(o=e.jobOfferDetail)||void 0===o?void 0:o.addressProvince)||void 0===a?void 0:a.name,A=(0,i.computed)((()=>{var t,o,a,i,l;const n="US"===(null===(o=null===(t=e.jobOfferDetail)||void 0===t?void 0:t.addressCountryCode)||void 0===o?void 0:o.id)?Object.assign(Object.assign({},null===(a=e.jobOfferDetail)||void 0===a?void 0:a.addressProvince),{label:null===(l=null===(i=e.jobOfferDetail)||void 0===i?void 0:i.addressProvince)||void 0===l?void 0:l.name}):N;return n})),D=[Hf.JobOffer,Hf.Hired].includes(null===(l=e.stage)||void 0===l?void 0:l.vacancyEvent.type.id)||Zf.Hired===(null===(n=e.candidate)||void 0===n?void 0:n.candidateStage)?"grid":"none";dE.value=(e.currencyTypesList.value||e.currencyTypesList).find((t=>{var o,a;return t.id===(null===(a=null===(o=e.jobOfferDetail)||void 0===o?void 0:o.currency)||void 0===a?void 0:a.id)}));const T=(0,i.computed)((()=>{const t=(e.payGrades.value||e.payGrades).find((t=>{var o,a;return t.id===(null===(a=null===(o=e.jobOfferDetail)||void 0===o?void 0:o.payGrade)||void 0===a?void 0:a.id)}));return t})),P=(0,i.computed)((()=>{var e;const t=(null===(e=rE.value)||void 0===e?void 0:e.PayGradeCurrency)||[],o=t.find((e=>{var t;return e.currency_id===(null===(t=dE.value)||void 0===t?void 0:t.currency_id)}));return o})),V=(0,i.computed)((()=>{var e,t;return null===(t=null===(e=T.value)||void 0===e?void 0:e.PayGradeCurrency)||void 0===t?void 0:t.find((e=>{var t;return e.currency_id===(null===(t=dE.value)||void 0===t?void 0:t.currency_id)}))})),B=(0,i.computed)((()=>{var e,t,o,a,i,l,n,r;return Object.assign(Object.assign(Object.assign({},P.value),V.value),{minSalary:(null===(e=P.value)||void 0===e?void 0:e.minSalary)||(null===(t=V.value)||void 0===t?void 0:t.minSalary),maxSalary:(null===(o=P.value)||void 0===o?void 0:o.maxSalary)||(null===(a=V.value)||void 0===a?void 0:a.maxSalary),decimals:(null===(i=P.value)||void 0===i?void 0:i.decimals)||(null===(l=V.value)||void 0===l?void 0:l.decimals),currency_symbol:(null===(n=P.value)||void 0===n?void 0:n.currency_symbol)||(null===(r=V.value)||void 0===r?void 0:r.currency_symbol)})})),I=[...e.showJoinedDate?[{name:"joinedDate",label:aE("Joined Date"),type:"custom",component:(0,i.markRaw)(_m),validators:new Map([["validDateFormat",ja(e.dateFormat)],["endDateShouldBeAfterStartDate",Xa((()=>e.offerDate.value),aE("Joined date should be on or after the job offer date"),{allowSameDate:!0})]]),props:{years:e.yearRange()},value:null===(r=e.jobOfferDetail)||void 0===r?void 0:r.joinedDate,hook:(e,t)=>(this.joinedDate.value=t.joinedDate,Object.assign({},e))}]:[],{name:"employmentStatus",label:aE("Employment Status"),type:"select",props:{"hide-dropdown-default-label":!0,options:e.employmentStatusList,showEmptySelector:!0},value:Object.assign(Object.assign({},null===(s=e.jobOfferDetail)||void 0===s?void 0:s.employmentStatus),{label:null===(c=null===(d=e.jobOfferDetail)||void 0===d?void 0:d.employmentStatus)||void 0===c?void 0:c.name})},{name:"directSupervisor",label:aE("Supervisor"),type:"autocomplete",props:{clear:!0,createOptions:e.getMatchingDirectSupervisors},value:x.value,class:"mb-0--oxd-input-group"},{name:"addressStreet1",label:aE("Address Street 1"),type:"input",class:"mb-0--oxd-input-group",value:null===(m=e.jobOfferDetail)||void 0===m?void 0:m.addressStreet1,validators:new Map([["shouldNotExceedCharLength",$a(70)]])},{name:"addressStreet2",label:aE("Address Street 2"),type:"input",class:"mb-0--oxd-input-group",value:null===(u=e.jobOfferDetail)||void 0===u?void 0:u.addressStreet2,validators:new Map([["shouldNotExceedCharLength",$a(70)]])},{name:"addressCity",label:aE("City"),type:"input",class:"mb-0--oxd-input-group",value:null===(p=e.jobOfferDetail)||void 0===p?void 0:p.addressCity,validators:new Map([["shouldNotExceedCharLength",$a(70)]])},{name:"addressCountryCode",label:aE("Country"),type:"select",props:{multiple:!0,clear:!0,options:e.allCountries,showEmptySelector:!0},value:Object.assign(Object.assign({},null===(v=e.jobOfferDetail)||void 0===v?void 0:v.addressCountryCode),{label:null===(g=null===(h=e.jobOfferDetail)||void 0===h?void 0:h.addressCountryCode)||void 0===g?void 0:g.name}),class:"mb-0--oxd-input-group",hook:(e,t)=>{var o;return lE.value=null===(o=t.addressCountryCode)||void 0===o?void 0:o.cou_code,nE.value=t.addressCountryCode,Object.assign({},e)}},{name:"addressProvince",label:aE("State/Province"),type:"input",id:"addressProvinceText",class:"mb-0--oxd-input-group",value:A.value,validators:new Map([["shouldNotExceedCharLength",$a(70)]]),hook:(e,t)=>{var o,a;return"addressProvinceText"===e.id&&("US"===(null===(o=t.addressCountryCode)||void 0===o?void 0:o.cou_code)||"US"===(null===(a=t.addressCountryCode)||void 0===a?void 0:a.id)?e.visible=!1:e.visible=!0),Object.assign({},e)}},{name:"addressProvince",label:aE("State/Province"),type:"select",props:{options:e.allUSProvinces,showEmptySelector:!0},id:"addressProvinceSelect",class:"mb-0--oxd-input-group",value:A.value,hook:(e,t)=>{var o,a;return"addressProvinceSelect"===e.id&&("US"===(null===(o=t.addressCountryCode)||void 0===o?void 0:o.cou_code)||"US"===(null===(a=t.addressCountryCode)||void 0===a?void 0:a.id)?e.visible=!0:e.visible=!1),Object.assign({},e)}},{name:"addressZipCode",label:aE("Zip/Postal Code"),type:"input",class:"mb-0--oxd-input-group",value:null===(y=e.jobOfferDetail)||void 0===y?void 0:y.addressZipCode,validators:new Map([["shouldNotExceedCharLength",$a(10)]])}];this.jobDetailsSection=[{type:"grid",props:{cols:1},children:{default:[{name:"swtichJobDetails",label:"",type:"custom",component:(0,i.markRaw)(yw),props:{title:aE("Employment Details")},value:this.showEmpDetailsSection,listeners:{onChange:e=>{F(e)}},style:{display:D}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"grid",props:{cols:3},class:"mt-3",id:"swtichJobDetails",children:{default:[]},style:{"margin-left":"-10px","margin-right":"-10px",display:"none"}}];const L=[{name:"payGrade",label:aE("Pay Grade"),type:"select",props:{options:e.payGrades,showEmptySelector:!0},class:["--span-column-4"],value:Object.assign(Object.assign({},null===(f=e.jobOfferDetail)||void 0===f?void 0:f.payGrade),{label:null===(C=null===(b=e.jobOfferDetail)||void 0===b?void 0:b.payGrade)||void 0===C?void 0:C.name}),hook:(e,t)=>{var o,a;return sE.value=t.payGrade,t.payGrade?(null===(o=rE.value)||void 0===o?void 0:o.id)!==(null===(a=sE.value)||void 0===a?void 0:a.id)&&(rE.value=sE.value):(rE.value=void 0,dE.value=void 0),Object.assign({},e)}},{name:"currency",label:aE("Currency"),type:"select",props:{options:[],showEmptySelector:!0},value:dE,class:["--span-column-4"],hook:(t,o)=>{var a,i;dE.value=o.currency;const l=(null===(a=o.payGrade)||void 0===a?void 0:a.PayGradeCurrency)||[],n=e.currencyTypesList.value||e.currencyTypesList||[];if(t.props){const e=l.length>0?l:null===(i=T.value)||void 0===i?void 0:i.PayGradeCurrency;t.props.options=n.filter((t=>null===e||void 0===e?void 0:e.find((e=>e.currency_id===t.currency_id)))),o.payGrade||t.props&&(t.props.options=[])}return Object.assign({},t)}},{name:"minPaygrade",label:aE("Minimum"),type:"input",props:{disabled:!0},class:["--span-column-2"],hook:(e,t)=>{var o,a,i,l;if(t.payGrade&&t.currency){const e=B.value.minSalary,n=null===(a=null===(o=B.value)||void 0===o?void 0:o.CurrencyType)||void 0===a?void 0:a.decimals,r=null===(l=null===(i=B.value)||void 0===i?void 0:i.CurrencyType)||void 0===l?void 0:l.currency_symbol;t.minPaygrade=E(e,n,r)}else t.minPaygrade=null;return Object.assign({},e)}},{name:"maxPaygrade",label:aE("Maximum"),type:"input",props:{disabled:!0},class:["--span-column-2"],hook:(e,t)=>{var o,a,i,l;return t.payGrade&&t.currency?t.maxPaygrade=E(B.value.maxSalary,null===(a=null===(o=B.value)||void 0===o?void 0:o.CurrencyType)||void 0===a?void 0:a.decimals,null===(l=null===(i=B.value)||void 0===i?void 0:i.CurrencyType)||void 0===l?void 0:l.currency_symbol):t.maxPaygrade=null,Object.assign({},e)}},{name:"salaryComponentValues",label:"",type:"custom",component:(0,i.markRaw)(oE),class:["--span-column-12"],props:{filteredCurrency:B,payGrade:rE,currency:dE,show:iE},value:(null===(w=null===(S=e.jobOfferDetail)||void 0===S?void 0:S.salaryComponentValues)||void 0===w?void 0:w.map((e=>({id:e.salaryComponent.id,value:e.value}))))||[]}];this.salaryDetailsSection=[{type:"grid",props:{cols:1},children:{default:[{name:"swtichSalaryDetails",label:"",type:"custom",component:(0,i.markRaw)(yw),props:{title:aE("Salary Details")},value:iE,listeners:{onChange:e=>{z(e)}},style:{display:D}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"grid",props:{cols:12},id:"swtichSalaryDetails",class:["grid-12","mt-3"],children:{default:[]},style:{"margin-left":"-10px","margin-right":"-10px",display:"none"}}];const F=e=>{var t;this.showEmpDetailsSection.value=e;const o=null===(t=this.jobDetailsSection)||void 0===t?void 0:t.find((e=>"swtichJobDetails"===e.id));o&&(e?(o.children.default=[...I],o.style.display="grid"):(o.children.default=[],o.style.display="none"))},z=e=>{iE.value=e;const t=this.salaryDetailsSection.find((e=>"swtichSalaryDetails"===e.id));t&&(e?(t.style.display="grid",t.children.default=[...L]):(t.children.default=[],t.style.display="none"))},M=()=>{var t,o,a,i,l,n,r,s,d;if(F(!1),z(!1),"none"===D)return!1;((null===(t=e.jobOfferDetail)||void 0===t?void 0:t.joinedDate)||(null===(o=e.jobOfferDetail)||void 0===o?void 0:o.employmentStatus)||(null===(a=e.jobOfferDetail)||void 0===a?void 0:a.addressStreet1)||(null===(i=e.jobOfferDetail)||void 0===i?void 0:i.addressStreet2)||(null===(l=e.jobOfferDetail)||void 0===l?void 0:l.addressCity)||(null===(n=e.jobOfferDetail)||void 0===n?void 0:n.addressZipCode)||(null===(r=e.jobOfferDetail)||void 0===r?void 0:r.addressCountryCode)||(null===(s=e.jobOfferDetail)||void 0===s?void 0:s.supervisor)||A.value)&&F(!0),(T.value||dE.value||(null===(d=e.jobOfferDetail)||void 0===d?void 0:d.salaryComponentValues))&&z(!0)};(0,i.onMounted)((()=>{M()}))}getEmploymentDetailsSchema(){return this.jobDetailsSection}getSalaryDetailsSchema(){return this.salaryDetailsSection}}const mE=ce(),uE=()=>{const e=(0,K.Z)(new Date),t=e-20,o=e+20,a=[];for(let i=t;i<o;i++)a.push(i);return a};function pE(e,t,o,a,l,n,r,s,d,c,m,u,p,v){var h,g,y,f,b,C,S,w;return(0,A.mG)(this,void 0,void 0,(function*(){const E=null===(g=null===(h=l.events)||void 0===h?void 0:h.find((e=>e.vacancyEvent.type.id===Hf.JobOffer)))||void 0===g?void 0:g.jobOfferDetail,k=(0,i.ref)(),x=(0,i.ref)(),N=new cE({stage:t,dateFormat:e,yearRange:uE,candidate:l,jobOfferDetail:E,employmentStatusList:c,allCountries:u,allUSProvinces:p,getMatchingDirectSupervisors:m,payGrades:s,currencyTypesList:d,showJoinedDate:!0,offerDate:k,languageSettings:v});(null===t||void 0===t?void 0:t.scheduledTime)||(null===t||void 0===t?void 0:t.vacancyEvent.type.id)!==Hf.JobOffer||(t.scheduledTime=La()().format("YYYY-MM-DD HH:mm:ss"));const A=null===(y=null===t||void 0===t?void 0:t.scheduledTime)||void 0===y?void 0:y.split(" ")[0],D=null===(f=null===t||void 0===t?void 0:t.scheduledTime)||void 0===f?void 0:f.split(" ")[1],T=D?D.split(":"):[],P=T.length>0?`${T[0]}:${T[1]}`:null,V=a.find((e=>e.keys.includes(null===t||void 0===t?void 0:t.scheduledTimeZone)));let B=!1;const I=(null===(C=null===(b=null===t||void 0===t?void 0:t.vacancyEvent)||void 0===b?void 0:b.optionsToEdit)||void 0===C?void 0:C.map((e=>({id:e,label:e}))))||[],L=null===I||void 0===I?void 0:I.find((e=>e.id===(null===t||void 0===t?void 0:t.finalStatus))),F=(0,i.computed)((()=>N.joinedDate.value)),z=(e,t,o={allowSameDate:!1,dateFormat:"yyyy-MM-dd"})=>a=>{const i="function"===typeof e?e():e;if(o.allowSameDate){const e=mE("string"===typeof t?t:"Start date should be on or before end date");return Ya(a,i)||Qa(a,i,o.dateFormat)||e}{const e=mE("string"===typeof t?t:"Start date should be before end date");return Qa(a,i,o.dateFormat)||e}},M=[{type:"grid",props:{cols:12},class:["grid-12"],children:{default:[{name:"date",label:mE((null===t||void 0===t?void 0:t.vacancyEvent.type.id)===Hf.JobOffer?"Job Offer Date":"Date"),type:"custom",component:(0,i.markRaw)(_m),class:["--span-column-4"],validators:new Map([["validDateFormat",ja(e)],["startDateShouldBeBeforeEndDate2",z((()=>F.value),mE("Job offer date should be on or before the joined date"),{allowSameDate:!0})],["startDateShouldBeBeforeEndDate",vi((()=>x.value),mE("Job offer date should be on or before the offer end date"),{allowSameDate:!0})]]),props:{years:uE()},value:A,hook:(e,t)=>(e.visible=t.swtichJobDetails,Object.assign({},e))},{name:"date",label:mE((null===t||void 0===t?void 0:t.vacancyEvent.type.id)===Hf.JobOffer?"Job Offer Date":"Date"),type:"custom",component:(0,i.markRaw)(_m),class:["--span-column-4"],validators:new Map([["validDateFormat",ja(e)]]),props:{years:uE()},value:A,hook:(e,t)=>(e.visible=!t.swtichJobDetails,Object.assign({},e))},{name:"timezone",label:mE("Time Zone"),type:"custom",component:(0,i.markRaw)(YS),class:["--span-column-8"],props:{type:"select",placeholder:""},value:V,hook:(e,t)=>{const o=t;if(e.props&&(e.props.disabled=!o.date,k.value=o.date,o.date||(o.timezone=void 0),o.date&&!o.timezone)){const e=Intl.DateTimeFormat().resolvedOptions().timeZone;o.timezone=a.find((t=>{var o;return null===(o=t.keys)||void 0===o?void 0:o.includes(e)})),o.time="00:00"}return Object.assign({},e)}},{name:"time",label:mE("Time"),type:"time",value:P,props:{disabled:!1,placeholder:"HH:MM"},class:["--span-column-4"],validators:new Map([["validTimeFormat",Ua]]),hook:(e,o)=>{const a=o;return e.props&&(e.props.disabled=!a.date,(null===t||void 0===t?void 0:t.vacancyEvent.type.id)===Hf.JobOffer?"00:00"===a.time&&(a.time=P):a.date&&!a.time&&(a.time=null)),Object.assign({},e)}},...(null===(S=null===t||void 0===t?void 0:t.vacancyEvent)||void 0===S?void 0:S.isScoreType)?[{name:"score",label:mE("Score"),type:"custom",component:(0,i.markRaw)(rw),class:["--span-column-4"],value:null===t||void 0===t?void 0:t.finalScore,props:{inputLabelChip:null===t||void 0===t?void 0:t.vacancyEvent.maxScore},validators:new Map([["maxDigits",Ha(null===t||void 0===t?void 0:t.vacancyEvent.maxScore,4)],["max",Za(null===t||void 0===t?void 0:t.vacancyEvent.maxScore)],["numbersOnly",Ga],["positivesOnly",Ka]])}]:[{name:"status",label:mE("Status"),type:"custom",component:(0,i.markRaw)(ow),class:["--span-column-4"],props:{options:I},value:L}],...(null===t||void 0===t?void 0:t.vacancyEvent.type.id)===Hf.JobOffer?[{name:"jobOfferEndDate",label:mE("Offer End Date"),type:"custom",component:(0,i.markRaw)(_m),validators:new Map([["validDateFormat",ja(e)],["endDateShouldBeAfterStartDate",Xa((()=>k.value),mE("Offer end date should be on or after the job offer date"),{allowSameDate:!0})]]),props:{years:uE()},value:null===(w=null===E||void 0===E?void 0:E.jobOfferEndDate)||void 0===w?void 0:w.split(" ")[0],hook:(e,t)=>(x.value=t.jobOfferEndDate,Object.assign({},e)),class:["--span-column-4"]}]:[]]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"grid",props:{cols:1},children:{default:[{name:"notes",type:"comments",class:"mb-0--oxd-input-group",props:{enableAvatar:!0,hideEmptyPlaceholder:!0,scrollHeight:"250px",commentThreadMinHeight:"250px",maxCharLength:65535,stage:t,candidate:l,commentGroups:o,headerLabel:mE("Notes"),commentBoxLabel:mE("Add Note"),commentBoxPlaceholder:mE("Write your note"),requiredEditCommentErrorMsg:mE("Required"),unsavedEditCommentErrorMsg:mE("Note should be either updated or removed"),unsavedAddCommentErrorMsg:mE("Note should be either added or removed"),commentDeleteConfirmationMsg:mE("The current note will be permanently deleted. Are you sure you want to continue?")},validators:new Map([["commentShouldBeAddedOrRemoved",()=>!r],["shouldNotExceedCharLength",$a(65535)]]),listeners:{onAddComment:(e,t)=>{("string"===typeof B&&n.value||"boolean"===typeof B&&!n.value)&&(B=!1,this.emit("note:add",e,t))},onUpdateComment:(e,t)=>{this.emit("note:update",e,t)},onDeleteComment:(e,t)=>{this.emit("note:delete",e,t)},onCommentEditHasError:e=>{this.emit("note:hasError",e)},onCommentChange:(e,t)=>{this.emit("note:commentChange",e,t)},onCommentChanged:e=>{this.emit("note:commentInput",e)}}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},...N.getEmploymentDetailsSchema(),...N.getSalaryDetailsSchema(),{type:"divider",style:{margin:"0"}},{type:"action",children:{default:[{name:"reset",label:mE("Cancel"),type:"button",props:{type:"button",displayType:"ghost"},listeners:{onClick:()=>{this.emit("update:show",!0)}}},{name:"submit",label:mE("Save"),type:"button",style:{"margin-left":"0.5rem"},props:{type:"submit",displayType:"secondary"}}]},style:{"padding-top":"1.2rem"}}],O={name:"editCandidateNoteForm",layout:M};return O}))}var vE=pE,hE=(0,i.defineComponent)({name:"EditCandidateNoteModal",components:{"form-modal":gc,"oxd-schema-form":yc.Z},props:{stage:{type:Object},commentGroups:{type:Array},timezones:{type:Array},candidate:{type:Object},commentHasError:{type:Boolean,default:!1},payGrades:{type:Array,default:()=>[]},currencyTypes:{type:Array,default:()=>[]},employmentStatus:{type:Array,default:()=>[]},getMatchingDirectSupervisors:{type:Function},allCountries:{type:Array},allUSProvinces:{type:Array},directSupervisorsFromVacancy:{type:Array}},setup(e,t){const o=(0,i.inject)("languageSettings"),a=(0,i.ref)(!1),l=(0,i.toRef)(e,"payGrades"),n=(0,i.toRef)(e,"currencyTypes"),r=(0,i.toRef)(e,"employmentStatus"),{userFormat:s}=Im(),d=ce(),c=()=>{a.value=!0},{model:m,schema:u}=(0,fc.Z)(vE.call(t,s,e.stage||{},e.commentGroups,e.timezones,e.candidate,a,e.commentHasError,l,n,r,e.getMatchingDirectSupervisors,e.allCountries,e.allUSProvinces,o)),p=(0,i.computed)((()=>{var t,o,a,i,l,n,r,s,c,m,u,p;if((null===(a=null===(o=null===(t=e.stage)||void 0===t?void 0:t.vacancyEvent)||void 0===o?void 0:o.type)||void 0===a?void 0:a.id)===Hf.JobOffer){const t=ge.getEmployeeNameV2(null!==(l=null===(i=e.candidate)||void 0===i?void 0:i.firstName)&&void 0!==l?l:"",null!==(r=null===(n=e.candidate)||void 0===n?void 0:n.middleName)&&void 0!==r?r:"",null!==(c=null===(s=e.candidate)||void 0===s?void 0:s.lastName)&&void 0!==c?c:"",Boolean(null===(m=e.candidate)||void 0===m?void 0:m.termination_id));return`${d(null===(u=e.stage)||void 0===u?void 0:u.title)} to ${t}`}return d(null===(p=e.stage)||void 0===p?void 0:p.title)}));let v=0;(0,i.watch)((()=>{var e;return null===(e=m.value)||void 0===e?void 0:e.addressCountryCode}),(()=>{m.value&&v>0&&(m.value.addressProvince=void 0),v++}));let h=0;return(0,i.watch)((()=>{var e;return null===(e=m.value)||void 0===e?void 0:e.payGrade}),(()=>{m.value&&h>0&&(m.value.minPaygrade=void 0,m.value.maxPaygrade=void 0,m.value.currency=void 0),h++})),{model:m,schema:u,submitted:a,modalTitle:p,submit:c}}});const gE=(0,Re.Z)(hE,[["render",GS],["__scopeId","data-v-088fdfd8"]]);var yE=gE;function fE(e,t,o,a,l,n){const r=(0,i.resolveComponent)("confirmation-modal");return(0,i.openBlock)(),(0,i.createBlock)(r,{style:{width:"450px"},headerTitle:"Are you sure?",onConfirmationModalAction:t[0]||(t[0]=t=>e.onConfirm(t)),confirmButtonDisplayType:"label-feedback-danger",confirmButtonIcon:"oxd-trash",confirmButtonText:"Yes, Delete"},{messageLine1:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.messageLine1)),1)])),messageLine2:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Are you sure you want to continue?")),1)])),_:1})}var bE=(0,i.defineComponent)({name:"candidateConfirmationModal",components:{"confirmation-modal":_d},props:{messageLine1:{type:String}},methods:{onConfirm(e){this.$emit("confirmationCandidateModalAction",e)}}});const CE=(0,Re.Z)(bE,[["render",fE]]);var SE=CE;function wE(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-list"),s=(0,i.resolveComponent)("add-event-modal"),d=(0,i.resolveComponent)("delete-event-modal"),c=(0,i.resolveComponent)("email-document-modal");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(r,{class:"oxd-attachment-list-table",configurations:e.configurations,"list-items":e.attachments,"list-highlightRows":e.highlightRows,"filtered-total-records-count":e.totalAttachmentCount,isPaginated:!1,"onUpdate:selected":e.tableRowSelection,"onAddAttachment:show":e.addAttachmentButtonPress,onDeleteEvents:t[0]||(t[0]=t=>e.setDeleteEventModalVisibility(!0)),"is-list-loading":e.loadingAttachmentList,emptyMsg:{message:"Sorry, No Data Found!",icon:"oxd-no-data"}},null,8,["configurations","list-items","list-highlightRows","filtered-total-records-count","onUpdate:selected","onAddAttachment:show","is-list-loading"]),e.addAttachmentModalState?((0,i.openBlock)(),(0,i.createBlock)(s,{key:0,loading:e.addingAttachment,editingModel:e.editingAttachmentModel,onSubmitValid:e.saveAttachment,onKeyup:(0,i.withKeys)(e.toggleAddAttachmentModal,["esc"]),"onUpdate:show":e.toggleAddAttachmentModal},null,8,["loading","editingModel","onSubmitValid","onKeyup","onUpdate:show"])):(0,i.createCommentVNode)("",!0),e.deleteAttachmentEventModalState?((0,i.openBlock)(),(0,i.createBlock)(d,{key:1,onConfirmationModalAction:t[1]||(t[1]=t=>e.deleteAttachmentEvent(t))},{messageLine1:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("The selected attachment(s) will be permanently deleted.")),1)])),_:1})):(0,i.createCommentVNode)("",!0),e.emailDocumentModalState&&e.emailDocumentDefaultData?((0,i.openBlock)(),(0,i.createBlock)(c,{key:2,ref:"emailDocumentModal","onUpdate:show":t[2]||(t[2]=t=>e.emailDocumentModalState=!1),emailDocumentDefaultData:e.emailDocumentDefaultData,loading:e.emailDocumentDefaultLoading,settingsObj:e.settingsObj,isLoggedInUserEmployee:e.showSenderNameSelector,onSubmitValid:e.sendCandidateDocumentEmail,"onOnUpdate:searchTerm":e.onUpdateSearchTerm,"onSelectenter:to":t[3]||(t[3]=t=>e.onUpdateemailDocumentModal(t,"to")),"onSelectenter:cc":t[4]||(t[4]=t=>e.onUpdateemailDocumentModal(t,"cc")),"onSelectenter:replyTo":t[5]||(t[5]=t=>e.onUpdateemailDocumentModal(t,"replyTo")),"onTinymce:errrorImageSize":e.tinymceErrrorImageSize,"onTinymce:errrorImageType":e.tinymceErrrorImageType},null,8,["emailDocumentDefaultData","loading","settingsObj","isLoggedInUserEmployee","onSubmitValid","onOnUpdate:searchTerm","onTinymce:errrorImageSize","onTinymce:errrorImageType"])):(0,i.createCommentVNode)("",!0)],64)}function EE(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-schema-form"),s=(0,i.resolveComponent)("form-modal");return(0,i.openBlock)(),(0,i.createBlock)(s,{style:{width:"90%",maxWidth:"700px"}},{title:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.modalTitle)),1)])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(r,(0,i.mergeProps)({schema:e.schema,model:e.usedModel,"onUpdate:model":t[0]||(t[0]=t=>e.usedModel=t)},e.$attrs),null,16,["schema","model"])])),_:1})}const kE=ce();function xE(e,t){return(0,A.mG)(this,void 0,void 0,(function*(){const o=yield t;return{name:"addEventForm",layout:[{type:"grid",props:{cols:1},children:{default:[{name:"name",label:kE("Select Attachment"),type:"custom",component:(0,i.markRaw)(Xf),props:{multiple:!1,hintPlacement:"bottom",hint:kE("Accepts up to {{fileSize}}MB",{fileSize:Math.round(o.max_attachment_size/1048576)})},class:["--span-column-2"],hook:(t,a)=>{const i=new Map([["validAttachmentTypes",ri(o.attachmentFileTypes)],["maxFileSize",li(o.max_attachment_size)],["required",Oa]]);return e&&i.delete("required"),t.validators=i,Object.assign({},t)}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"grid",props:{cols:1},children:{default:[{name:"description",label:kE("Description"),type:"textarea",validators:new Map([["shouldNotExceedCharLength",$a(400)]])}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"divider",style:{margin:"0"}},{type:"action",children:{default:[{name:"required",label:"",type:"custom",component:(0,i.markRaw)(Hd),style:{"margin-right":"auto",padding:"0px"}},{name:"reset",label:kE("Cancel"),type:"button",props:{type:"button",displayType:"ghost"},listeners:{onClick:()=>{this.emit("update:show",!0)}}},{name:"submit",label:kE("Save"),type:"button",style:{"margin-left":"0.5rem"},props:{type:"submit",displayType:"secondary"}}]},style:{"padding-top":"1.2rem"}}]}}))}var NE=xE,AE=(0,i.defineComponent)({name:"AddAttachmentModal",components:{"form-modal":gc,"oxd-schema-form":yc.Z},props:{editingModel:{type:Object,required:!1}},setup(e,t){var o;const a=(0,i.ref)(Object.assign({},e.editingModel)),l=!!(null===(o=e.editingModel)||void 0===o?void 0:o.id),n=l?"Edit Attachment":"Add Attachment",{settings:r}=vu(),{model:s,schema:d}=(0,fc.Z)(NE.call(t,l,r)),c=l?a:s;return{usedModel:c,schema:d,modalTitle:n}}});const DE=(0,Re.Z)(AE,[["render",EE]]);var TE=DE;const PE={visible:!0,listRecordCount:{singleTerm:"Attachment",multiTerm:"Attachments"},singleActions:[],bulkActions:[{type:"oxd-button",props:{label:"Delete Selected",size:"medium",displayType:"label-danger",iconName:"oxd-trash","icon-size":"extra-small","disabled-tooltip":"You don't have permissions to delete some of the selected attachments",flow:"bottom"},events:[{type:"click",identifier:"delete-events"}]}]};var VE=PE;const BE=[{name:"action",title:"File Name",style:{flex:"10%","min-width":"100px","margin-right":"0"},cellType:"oxd-table-cell-actions",cellRenderer:"fileNameRenderer"},{name:"action",title:"Description",style:{flex:"9%","min-width":"100px","margin-right":"0"},cellType:"oxd-table-cell-actions",cellRenderer:"descriptionRenderer"},{name:"size",title:"Size",style:{flex:"1%","min-width":"50px","margin-right":"15px","text-align":"right","justify-content":"end"}},{name:"type",title:"Type",style:{flex:"5%","min-width":"50px","margin-right":"0"}},{name:"createdDate",title:"Added Date",style:{flex:"5%","min-width":"90px","margin-right":"0"},cellType:"oxd-table-cell-date",cellProps:{}},{name:"createdTime",html:"",style:{flex:"1 1 80px","min-width":"90px","margin-right":"0"}},{name:"createdBy",title:"Added By",style:{flex:"5%","min-width":"90px","margin-right":"0"}},{name:"action",title:"",style:{flex:"10%","max-width":"130px","margin-right":"0"},cellType:"oxd-table-cell-actions",cellRenderer:"actionsRenderer"}];var IE=BE;const LE={topBar:VE,headers:IE,selectable:!1};var FE=LE,zE={table:FE};class ME{getListSchema(){var e,t,o;const a=(0,i.ref)(JSON.parse(JSON.stringify(zE))),l=(0,i.getCurrentInstance)(),n=null===l||void 0===l?void 0:l.appContext.config.globalProperties.$dateFormat,r=null===l||void 0===l?void 0:l.appContext.config.globalProperties.$locale,s=null===(o=null===(t=null===(e=a.value)||void 0===e?void 0:e.table)||void 0===t?void 0:t.headers)||void 0===o?void 0:o[4];return s&&(s.cellProps={displayFormat:n,locale:r}),a}}const OE=["href","target"];function RE(e,t,o,a,l,n){return(0,i.openBlock)(),(0,i.createElementBlock)("div",null,[(0,i.createElementVNode)("a",{href:e.link?e.link:"#",target:e.target,class:"oxd-table-cell-link"},(0,i.toDisplayString)(e.$t(e.value)),9,OE)])}var _E=(0,i.defineComponent)({name:"link-cell-component",props:{value:{type:String},link:{type:String,default:null},target:{type:String,default:"_self"}}});const $E=(0,Re.Z)(_E,[["render",RE]]);var jE=$E;function UE(e,t,o,a,l,n){return(0,i.openBlock)(),(0,i.createElementBlock)("div",null,(0,i.toDisplayString)(e.$t(e.value)),1)}var ZE=(0,i.defineComponent)({name:"text-cell-component",props:{value:{type:String}}});const HE=(0,Re.Z)(ZE,[["render",UE]]);var qE=HE;const GE=["innerHTML"];function WE(e,t,o,a,l,n){return(0,i.openBlock)(),(0,i.createElementBlock)("div",{innerHTML:e.value},null,8,GE)}var KE=(0,i.defineComponent)({name:"text-cell-component",props:{value:{type:String}}});const QE=(0,Re.Z)(KE,[["render",WE]]);var JE=QE,YE=(0,i.defineComponent)({name:"AttachmentList",components:{"oxd-list":Bd.Z,"add-event-modal":TE,"delete-event-modal":kr,"email-document-modal":sS},directives:{"set-tab-focus-to-first-element":Sr.Z},props:{candidateData:{type:Object,required:!0},dataGroupPermissions:{type:Object,required:!0}},setup(e,{emit:t}){var o,a,l,n,r,s,d,c,m,u,p,v,h;const g=ce(),{settings:y}=vu(),{jsDisplayFormat:f,locale:b}=Im(),C=(0,i.inject)("$toast"),S=(0,i.inject)("ngServices"),w=(0,i.ref)(S.$stateParams.candidateId),E=new Vf,k=new Bf,x=(0,i.ref)([]),N=(0,i.ref)([]),A=(0,i.ref)(!1),D=(0,i.ref)(!1),T=(0,i.ref)(!1),P=(0,i.ref)(!1),V=(0,i.ref)(!1),B=(0,i.ref)(0),I=(0,i.ref)(!0),L=(0,i.ref)(),F=(0,i.ref)(!1),z=(0,i.ref)(!1),M=(0,i.ref)(null),O=(0,i.ref)([]),R=(0,i.ref)(!1),_=(0,i.ref)(qf),$=(0,i.ref)({rowIndexes:[],type:em.Ox}),j=new ME,U=j.getListSchema(),Z=null===(l=null===(a=null===(o=U.value)||void 0===o?void 0:o.table)||void 0===a?void 0:a.headers)||void 0===l?void 0:l[0],H=null===(s=null===(r=null===(n=U.value)||void 0===n?void 0:n.table)||void 0===r?void 0:r.headers)||void 0===s?void 0:s[1],q=null===(m=null===(c=null===(d=U.value)||void 0===d?void 0:d.table)||void 0===c?void 0:c.headers)||void 0===m?void 0:m.find((e=>"createdTime"===e.name));q&&(q.html=g("Added Time")+`<br>(${ge.getClientGMT()})`);const G=null===(v=null===(p=null===(u=U.value)||void 0===u?void 0:u.table)||void 0===p?void 0:p.headers)||void 0===v?void 0:v[7],W="Generated via Document Template",K=(0,i.computed)((()=>U.value)),Q=(0,i.ref)(0),J=new Sb,Y=(0,i.ref)(!1),X=20;(null===(h=e.dataGroupPermissions)||void 0===h?void 0:h.update)||(I.value=!1);const ee=()=>{_.value=qf,A.value=!A.value},te=e=>{P.value=e},oe=e=>{"delete"===e&&ye(),P.value=!1},ae=e=>{N.value=x.value.filter(((t,o)=>e.indexOf(o)>-1))},ie=()=>{A.value=!0},le=()=>{V.value=!0,I.value&&(K.value.table.topBar.singleActions=[{type:"oxd-button",props:{label:"Add Attachment",size:"medium",displayType:"secondary",iconName:"oxd-add",iconSize:"small",flow:"bottom"},class:"info-color",events:[{type:"click",identifier:"addAttachment:show"}]}]),E.getCandidateDocuments(w.value).then((e=>{$.value.rowIndexes=[],x.value=e.data.data.candidateDocuments.map((e=>pe(e))),I.value||(K.value.table.selectable=!1),B.value=x.value.length,V.value=!1})).catch((()=>{V.value=!1,null===C||void 0===C||C.error({title:g(kc),message:g(Be)})}))};le();const ne=e=>{T.value=!1,null===C||void 0===C||C.error({title:g(kc),message:g(e)})},re=e=>{T.value=!1,A.value=!1,null===C||void 0===C||C.success({title:g(Ec),message:g(e)})},de=()=>{B.value++,$.value.rowIndexes=$.value.rowIndexes.map((e=>e+1)),$.value.rowIndexes.push(0)},me=e=>{let t="";if(e.isGenerated){if(e.description!=W){let o=e.description.split(".");const a=[];return o.forEach((function(e){let t=e.substring(e.length-X,e.length-1),o=e.substring(0,e.length-X).trim(),i=J.getFormattedLocalDateTime(t);const l=`${g(o)} ${ue(i.localDate)} ${i.localTime} (${ge.getClientGMT()})`;a.push(l)})),t=a.join("<br>"),t}t=g(e.description)}else t=e.description;return t},ue=e=>(0,se.p6)(new Date(e),f,{locale:b}),pe=e=>{e.description=me(e);const t=J.getFormattedLocalDateTime(e.createdDate);return Object.assign(Object.assign({},e),{size:`${(parseInt(e.size)/1024).toFixed(2)} kB`,originalSize:parseInt(e.size),createdDate:t.localDate,createdTime:t.localTime,isSelectable:!e.isGenerated,createdBy:ge.getEmployeeName(e.createdBy.firstName,e.createdBy.middleName,e.createdBy.lastName,Boolean(e.createdBy.terminationId)),attachmentDownloadLink:`/api/recruitment/candidate/${w.value}/candidateDocument/${e.id}?isInline=1${Te(e.isDigitalSignCompleted)}`})},ve=e=>{T.value=!0,e.id?he(e,e.id):E.addCandidateDocument(w.value,{file:{file:e.name[0].base64,fileName:e.name[0].name,fileType:e.name[0].type,fileSize:e.name[0].size},description:e.description}).then((e=>{let o=e.data.data;o=pe(e.data.data),x.value.unshift(o),de(),t("on-save-attachment",o),re(be)})).catch((()=>{ne(Ee)}))},he=(e,t)=>{null==e.name[0].base64?E.updateCandidateDocument(w.value,t,{description:e.description}).then((e=>{let o=e.data.data;o=pe(e.data.data);const a=x.value.findIndex((e=>e.id==t));x.value[a]=o,$.value.rowIndexes.push(a),_.value=qf,re(Se)})).catch((()=>{ne(ke)})):E.updateCandidateDocument(w.value,t,{file:{file:e.name[0].base64,fileName:e.name[0].name,fileType:e.name[0].type,fileSize:e.name[0].size},description:e.description}).then((e=>{let o=e.data.data;o=pe(e.data.data);const a=x.value.findIndex((e=>e.id==t));x.value[a]=o,$.value.rowIndexes.push(a),_.value=qf,re(Se)})).catch((()=>{ne(ke)}))},ye=()=>{const e=N.value.map((e=>e.id));E.deleteCandidateDocuments(w.value,e).then((()=>{le(),null===C||void 0===C||C.success({title:g(Ec),message:g(we)})})).catch((()=>{null===C||void 0===C||C.error({title:g(kc),message:g(xe)})}))},fe=(e,t,o,a)=>{let i,l={};return i=!a.restrictDetails&&je(a)?{component:jE,props:{value:a.name,link:a.attachmentDownloadLink,target:"_blank"}}:{component:qE,props:{value:a.name}},l={cell:i},{props:{header:{cellConfig:Object.assign({},l)}}}},Ce=(e,t,o,a)=>{let i,l={};return a&&(i={component:JE,props:{value:a.description}}),l={cell:i},{props:{header:{cellConfig:Object.assign({},l)}}}},Ae=(e,t)=>{E.ping().then((()=>{window.open(`${window.location.origin}/api/recruitment/candidate/${w.value}/candidateDocument/${e}${De(t)}`,"_self")})).catch((e=>{403===e.status?S.$state.go("403"):401===e.status?E.logout():null===C||void 0===C||C.error({title:g("Error"),message:g("Error on processing the request")})}))},De=e=>{let t="";return e&&(t="?signed=1"),t},Te=e=>{let t="";return e&&(t="&signed=1"),t},Pe=e=>e.length>1?`${e.slice(0,-1).join(", ")} and ${e.slice(-1)}`:{0:"",1:e[0]}[e.length],Ve=e=>{R.value=!0,E.getCandidateDocumentEmailDefaultValues(S.$stateParams.candidateId,{candidateDocumentId:e.id}).then((t=>{var o,a,i,l,n,r,s,d,c,m,u,p,v;L.value={recipient:{to:(null===(a=null===(o=t.data.data)||void 0===o?void 0:o.recipient)||void 0===a?void 0:a.to)||[],cc:(null===(l=null===(i=t.data.data)||void 0===i?void 0:i.recipient)||void 0===l?void 0:l.cc)||[],replyTo:(null===(r=null===(n=t.data.data)||void 0===n?void 0:n.recipient)||void 0===r?void 0:r.replyTo)||[]},subject:(null===(s=t.data.data)||void 0===s?void 0:s.subject)||"",bodyText:(null===(d=t.data.data)||void 0===d?void 0:d.bodyText)||"",digitalSignContent:(null===(c=t.data.meta)||void 0===c?void 0:c.digitalSignContent)||""},(null===(u=null===(m=t.data.meta)||void 0===m?void 0:m.missingTokens)||void 0===u?void 0:u.length)>0&&(L.value.missingTokens=t.data.meta.missingTokens,L.value.warning=Pe(t.data.meta.missingTokens)),L.value.attachmentType=e.type,L.value.candidateDocumentId=e.id,M.value=null===(p=t.data.meta)||void 0===p?void 0:p.loggedInEmployee,O.value=null===(v=t.data.meta)||void 0===v?void 0:v.hiringManagers,O.value&&O.value.length>0&&(F.value=k.isEmployeeInList(O.value,M.value)),z.value=!!M.value&&!F.value,$e.value.isDigitalSignEnabled=e.isDigitalSignEnabled,D.value=!0})).catch((e=>{403===e.status?S.$state.go("403"):401===e.status?E.logout():null===C||void 0===C||C.error({title:g("Error"),message:g("Error on processing the request")})})).finally((()=>{R.value=!1}))},Ie=(0,i.ref)(!1),Le=e=>{var t;$e.value.isDigitalSignEnabled&&(null===C||void 0===C||C.info({title:g(ES),message:g(kS)})),D.value=!1,null===(t=k.sendCandidateDocumentEmailMapper(e,null,ze,L,w.value,M.value,F.value,O.value))||void 0===t||t.then((e=>{const t=Object.assign({candidateId:e.candidateId,candidateDocumentId:L.value.candidateDocumentId,emailDocument:!0,emailSubject:e.emailSubject,emailBody:e.emailBody,recipientTo:e.recipientTo,recipientCc:e.recipientCc,recipientReplyTo:e.recipientReplyTo},e.sender&&{sender:{name:e.sender.name,empNumber:e.sender.empNumber}});E.exportModifiedDocuments(t).then((()=>{ze.value.to=null,ze.value.cc=null,ze.value.replyTo=null,L.value=null,null===C||void 0===C||C.success({title:g(Ec),message:g(Me)})})).catch((e=>{403===e.status?S.$state.go("403"):401===e.status?E.logout():null===C||void 0===C||C.error({title:g("Error"),message:g("Error on processing the request")})})).finally((()=>Ie.value=!1))}))},Fe=(0,i.ref)(),ze=(0,i.ref)({to:null,cc:null}),Oe=(e,t)=>{ze.value[t]=e},Re=(e,t)=>{k.onKeypressAddEmailAfterValidate(e,t,Fe,ze)},_e=(e,t,o,a)=>{let i={};const l={component:"oxd-icon-button",props:{id:"editAttachment",name:"oxd-edit",size:"xx-small",tooltip:"Edit",onClick:()=>{_.value={id:a.id,name:[{name:a.name,type:a.type,size:a.size}],description:a.description,createdDate:a.createdDate,createdTime:a.createdTime,attachmentDownloadLink:a.attachmentDownloadLink,type:a.type,size:a.size,isGenerated:!1,createdBy:a.createdBy},ie()}}},n={component:"oxd-icon-button",props:{id:"deleteAttachment",name:"oxd-trash",size:"xx-small",tooltip:"Delete",onClick:()=>{N.value=[{id:a.id,name:a.name,description:a.description,createdDate:a.createdDate,createdTime:a.createdTime,attachmentDownloadLink:a.attachmentDownloadLink,type:a.type,size:a.size,createdBy:a.createdBy,isGenerated:!1}],P.value=!0}}},r={component:"oxd-icon-button",props:{id:"downloadAttachment",name:"oxd-download",size:"xx-small",tooltip:a.isDigitalSignCompleted?"Download E-signed Document":"Download",onClick:()=>{Ae(a.id,a.isDigitalSignCompleted)}}},s=a.originalSize||0,d=s>Q.value,c={component:"oxd-icon-button",props:{id:"emailAttachment",name:"oxd-mail",tooltip:a.isDigitalSignEnabled?"Send E-signature Request":g(d?"Document size exceeds the allowable attachment limit":"Email Document"),disabled:d,showTooltipWhenDisabled:!0,onClick:()=>{Ve(a)}}};return a.restrictDetails||(i=a.isGenerated?a.isDigitalSignEnabled?Y.value&&!a.isDigitalSignCompleted&&je(a)?{emailAttachment:c,downloadAttachment:r}:{downloadAttachment:r}:{emailAttachment:c,downloadAttachment:r}:I.value?{deleteAttachment:n,downloadAttachment:r,editEvent:l}:{downloadAttachment:r}),{props:{header:{cellConfig:Object.assign({},i)},class:"oxd-action-render-button-visibility-on-hover"}}};G&&"string"===typeof G.cellRenderer&&(G.cellRenderer=_e),Z&&"string"===typeof Z.cellRenderer&&(Z.cellRenderer=fe),H&&"string"===typeof H.cellRenderer&&(H.cellRenderer=Ce);const $e=(0,i.ref)({maxAttachmentSize:0,allowedImageTypes:[],isDigitalSignEnabled:!1}),je=e=>"application/pdf"==e.type||"application/x-pdf"==e.type,Ue=(0,i.ref)(),Ze=()=>{null===y||void 0===y||y.then((e=>{$e.value.maxAttachmentSize=e.max_attachment_size,$e.value.allowedImageTypes=e.allowed_image_types,Q.value=e.maxEmailAttachmentSize,Ue.value=$e.value.maxAttachmentSize/1048576,e.recruitment&&e.recruitment.isDigitalSignEnabledCandidateDocuments&&(Y.value=e.recruitment.isDigitalSignEnabledCandidateDocuments)}))},He=()=>{C.warn({title:g(xc),message:g(Ne)})},qe=(e,t)=>g(e,{[t]:Math.round(Ue.value)}),Ge=(0,i.computed)((()=>qe("File Size Should Be Less than {{maxSize}}MB","maxSize"))),We=()=>{C.warn({title:g(xc),message:Ge})};return(0,i.onUnmounted)((()=>{null===C||void 0===C||C.clearAll()})),(0,i.onMounted)((()=>{Ze()})),{addingAttachment:T,attachments:x,selectedAttachments:N,totalAttachmentCount:B,configurations:K,addAttachmentModalState:A,deleteAttachmentEventModalState:P,loadingAttachmentList:V,highlightRows:$,editingAttachmentModel:_,hasPermissions:I,emailDocumentModalState:D,emailDocumentDefaultData:L,emailDocumentDefaultLoading:R,emailDocumentModal:Fe,settingsObj:$e,setDeleteEventModalVisibility:te,saveAttachment:ve,toggleAddAttachmentModal:ee,getAttachmentList:le,tableRowSelection:ae,deleteAttachmentEvent:oe,deleteAttachmentList:ye,actionsRenderer:_e,fileNameRenderer:fe,addAttachmentButtonPress:ie,sendCandidateDocumentEmail:Le,onUpdateSearchTerm:Oe,onUpdateemailDocumentModal:Re,tinymceErrrorImageSize:We,tinymceErrrorImageType:He,loggedInEmployeeData:M,showSenderNameSelector:z}}});const XE=(0,Re.Z)(YE,[["render",wE],["__scopeId","data-v-019c3e40"]]);var ek=XE,tk=o(62838);function ok(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-schema-form"),s=(0,i.resolveComponent)("form-modal");return(0,i.openBlock)(),(0,i.createBlock)(s,{class:"add-as-employee-modal",width:"100%","max-width":"1000px !important"},{title:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Add Candidate as Employee")),1)])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(r,(0,i.mergeProps)({schema:e.schema,model:e.model,"onUpdate:model":t[0]||(t[0]=t=>e.model=t)},e.$attrs),null,16,["schema","model"])])),_:1})}const ak=ce(),ik=()=>{const e=(0,K.Z)(new Date),t=e-20,o=e+20,a=[];for(let i=t;i<o;i++)a.push(i);return a};function lk(e,t,o,a,l,n,r,s,d,c,m,u){var p,v,h;return(0,A.mG)(this,void 0,void 0,(function*(){const e=null===(v=null===(p=null===a||void 0===a?void 0:a.events)||void 0===p?void 0:p.find((e=>e.vacancyEvent.type.id===Hf.JobOffer)))||void 0===v?void 0:v.jobOfferDetail,g=new cE({stage:l,dateFormat:t,yearRange:ik,candidate:a,jobOfferDetail:e,employmentStatusList:s,allCountries:c,allUSProvinces:m,getMatchingDirectSupervisors:d,payGrades:n,currencyTypesList:r,languageSettings:u}),y=new Vf,f=function(){let e;return function(t){return(0,A.mG)(this,void 0,void 0,(function*(){let o;return(t||""!==t)&&(o=yield y.checkEmployeeEmailAvailability(t)),e=!t||o.data.isAvailable||ak("Employee with same email address already exists in the system"),e}))}},b=null===(h=null===l||void 0===l?void 0:l.scheduledTime)||void 0===h?void 0:h.split(" ")[0],C=[{type:"grid",props:{cols:3},children:{default:[{name:"firstName",label:ak("First Name"),type:"input",value:(null===a||void 0===a?void 0:a.firstName)||"",validators:new Map([["required",Oa],["shouldNotExceedCharLength",$a(30)]])},{name:"middleName",label:ak("Middle Name"),type:"input",value:(null===a||void 0===a?void 0:a.middleName)||"",validators:new Map([["shouldNotExceedCharLength",$a(30)]])},{name:"lastName",label:ak("Last Name"),type:"input",value:(null===a||void 0===a?void 0:a.lastName)||"",validators:new Map([["required",Oa],["shouldNotExceedCharLength",$a(30)]])},{name:"email",label:ak("Email"),type:"input",value:(null===a||void 0===a?void 0:a.email)||"",validators:new Map([["validEmailFormat",si],["shouldNotExceedCharLength",$a(50)],["existingEmployeeEmail",f()]]),class:["--span-column-2"]},{name:"contactNumber",label:ak("Contact Number"),type:"input",value:(null===a||void 0===a?void 0:a.contactNo)||"",validators:new Map([["validPhoneNumberFormat",di],["shouldNotExceedCharLength",$a(30)]])},{name:"joinedDate",label:ak("Joined Date"),type:"custom",component:(0,i.markRaw)(_m),value:(null===e||void 0===e?void 0:e.joinedDate)||(0,se.p6)((0,se._G)(),"yyyy-MM-dd"),validators:new Map([["required",Oa],["validDateFormat",ja(t)],["endDateShouldBeAfterStartDate",Xa((()=>b),ak("Joined date should be on or after the job offer date"),{allowSameDate:!0})]]),props:{years:ik()}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},...g.getEmploymentDetailsSchema(),...g.getSalaryDetailsSchema(),{type:"divider",style:{margin:"0"}},{type:"action",children:{default:[{name:"required",label:"",type:"custom",component:(0,i.markRaw)(Hd),style:{"margin-right":"auto",padding:"0px"}},{name:"reset",label:ak("Cancel"),type:"button",props:{type:"button",displayType:"ghost"},listeners:{onClick:()=>{this.emit("update:show",!0)}}},{name:"submit",label:ak(o?"Next":"Save"),type:"button",style:{"margin-left":"0.5rem"},props:{type:"submit",displayType:"secondary"}}]},style:{"padding-top":"1.2rem"}}],S={name:"addAsEmployeeForm",layout:C};return S}))}var nk=lk,rk=(0,i.defineComponent)({name:"addCandidateAsEmployeeModal",components:{"form-modal":gc,"oxd-schema-form":yc.Z},props:{candidate:{type:Object},empWizardEnabled:{type:Boolean},stage:{type:Object},payGrades:{type:Array,default:()=>[]},currencyTypes:{type:Array,default:()=>[]},employmentStatus:{type:Array,default:()=>[]},getMatchingDirectSupervisors:{type:Function},allCountries:{type:Array},allUSProvinces:{type:Array},directSupervisorsFromVacancy:{type:Array}},setup(e,t){const o=(0,i.inject)("languageSettings"),{settings:a}=vu(),{userFormat:l}=Im(),{model:n,schema:r}=(0,fc.Z)(nk.call(t,a,l,e.empWizardEnabled,e.candidate,e.stage,e.payGrades,e.currencyTypes,e.employmentStatus,e.getMatchingDirectSupervisors,e.allCountries,e.allUSProvinces,o));let s=0;(0,i.watch)((()=>{var e;return null===(e=n.value)||void 0===e?void 0:e.addressCountryCode}),(()=>{n.value&&s>0&&(n.value.addressProvince=void 0),s++}));let d=0;return(0,i.watch)((()=>{var e;return null===(e=n.value)||void 0===e?void 0:e.payGrade}),(()=>{n.value&&d>0&&(n.value.minPaygrade=void 0,n.value.maxPaygrade=void 0,n.value.currency=void 0),d++})),{model:n,schema:r}}});const sk=(0,Re.Z)(rk,[["render",ok],["__scopeId","data-v-110c6052"]]);var dk=sk;const ck={class:"ohrm-document-template-preview-container"},mk={class:"ohrm-document-template-preview-container-body"},uk={key:0,class:"ohrm-document-template-preview-container-body --preview"},pk=["innerHTML"],vk={key:1,class:"ohrm-document-template-preview-container-body --edit"},hk={class:"wysiwyg-hint oxd-text oxd-text--p oxd-input-field-hint placement-bottom"},gk={class:"wysiwyg-hint oxd-text oxd-text--p oxd-input-field-hint placement-bottom"};function yk(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-tinymce"),s=(0,i.resolveComponent)("digital-sign-content-preview");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createElementVNode)("div",ck,[(0,i.createElementVNode)("div",mk,[1===e.selectedDocumentViewOption.id?((0,i.openBlock)(),(0,i.createElementBlock)("div",uk,[e.documentContent?((0,i.openBlock)(),(0,i.createElementBlock)("button",{key:0,ref:"ohrmDocumentTemplatePreviewBtn",onClick:t[0]||(t[0]=t=>e.switchMode(1))},[(0,i.createElementVNode)("div",{innerHTML:e.documentContent.content,class:(0,i.normalizeClass)(e.previewStyleClasses)},null,10,pk)],512)):(0,i.createCommentVNode)("",!0)])):((0,i.openBlock)(),(0,i.createElementBlock)("div",vk,[e.documentContent?((0,i.openBlock)(),(0,i.createBlock)(r,{key:0,modelValue:e.documentContent.content,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.documentContent.content=t),e.onChange],id:"doc-template-preview-tinymce",configurations:{baseURL:e.uiTinymceConfig.baseURL,skin_url:e.uiTinymceConfig.skin_url,auto_focus:"doc-template-preview-tinymce"},attachmentSize:e.settingsObj.maxAttachmentSize,allowedFileTypes:e.settingsObj.allowedImageTypes,"onTinymce:errrorImageType":e.onImageTypeError,"onTinymce:errrorImageSize":e.onImageSizeError,onOnBlur:t[2]||(t[2]=t=>e.switchMode(0))},null,8,["modelValue","configurations","attachmentSize","allowedFileTypes","onUpdate:modelValue","onTinymce:errrorImageType","onTinymce:errrorImageSize"])):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("p",hk,(0,i.toDisplayString)(e.maxFileSizeHintLabel),1),(0,i.createElementVNode)("p",gk,(0,i.toDisplayString)(e.$t("You are currently editing this document. Changes made will not be saved to the template and will not be present when creating a new document from the 'Create Document' tab.")),1)]))])]),e.getDigitalSignContent&&e.documentContent?((0,i.openBlock)(),(0,i.createBlock)(s,{key:0,"model-value":e.getDigitalSignContent},null,8,["model-value"])):(0,i.createCommentVNode)("",!0)],64)}var fk=o(74816),bk=(0,i.defineComponent)({name:"document-template-preview",components:{"oxd-tinymce":fk.Z,"digital-sign-content-preview":oS},props:{viewDocumentContent:{type:Object},candidate:{type:Object,required:!0}},setup(e,{emit:t}){const o=ce(),{settings:a}=vu(),l=(0,i.inject)("$toast"),n=(0,i.inject)("uiTinymceConfig"),r=new Vf,s=new OC,d=(0,i.ref)(null),c=(0,i.ref)([{id:1,label:o("Preview"),icon:"oxd-show",iconSize:"small"},{id:2,label:o("Edit"),icon:"oxd-edit",iconSize:"xx-small"}]),m=(0,i.ref)(null),u=(0,i.ref)(null),p=(e,t)=>o(e,{[t]:Math.round(N.value)}),v=(0,i.computed)((()=>p("Accepts up to {{fileSize}}MB","fileSize"))),h=(0,i.computed)((()=>p("File Size Should Be Less than {{maxSize}}MB","maxSize"))),g=(0,i.computed)((()=>{var e;return m.value!==(null===(e=d.value)||void 0===e?void 0:e.content)})),y=(0,i.computed)((()=>{var t;return{"ohrm-document-template-preview-container-body-html":!0,"is-editable":"1"===(null===(t=e.viewDocumentContent)||void 0===t?void 0:t.isTemplateStringEditable)}})),f=(0,i.computed)((()=>{var t;return null===(t=e.viewDocumentContent)||void 0===t?void 0:t.digitalSignContent})),b=()=>{const e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)},C=e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.replace(/[\u00A0-\u9999<>]/g,(e=>`&#${e.charCodeAt(0)};`)))&&void 0!==t?t:""},S=()=>{var t,a;const l={candidateId:null===(t=e.candidate)||void 0===t?void 0:t.id,templateId:null===(a=e.viewDocumentContent)||void 0===a?void 0:a.id,clientDateTime:b()};r.documentContent(l).then((t=>{var a,l;let n=null===(a=e.viewDocumentContent)||void 0===a?void 0:a.rows;const r=e.viewDocumentContent;let s=null!==(l=r.templateString)&&void 0!==l?l:"";const c=e=>{if(!e.value)return"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";if("text"===e.type&&"string"===typeof e.value)return C(e.value);if("textarea"===e.type){if(e.value){e.value.toString();let t=[],o="";return"string"===typeof e.value&&(t=e.value.split("\n"),t=t.map((e=>C(e))),o=t.join("<br>")),o.replaceAll("\n","<br>")}return""}if(["line_breaks"].includes(e.type)&&Array.isArray(e.value)){const t=e.value.map((e=>(e.label=C(e.label),e.label=e.label.replace(" - ","<br>")))),o=t.join("<br><br>");return o}if(["bullet_points"].includes(e.type)&&Array.isArray(e.value)){if(e.value.length>1){const t=`<ul>${e.value.map((e=>`<li>${C(e.label)}</li>`))}</ul>`;return null===t||void 0===t?void 0:t.replaceAll(",","")}if(1===e.value.length)return C(e.value[0].label)}else if(["table"].includes(e.type)&&Array.isArray(e.value)){if("table"===e.type&&e.selectedAttributes.length>1&&e.value.length>0){const a=`\n              <table style="border-collapse:collapse">\n                <tbody>\n                  <tr>\n                    ${e.selectedAttributes.map((e=>`\n                        <th style="text-align:left;padding:7px">\n                          ${o(e.displayName)}\n                        </th>\n                        `))}\n                  </tr>\n                  ${e.value.map(((o,a)=>{const i=`\n                      <tr>\n                        ${e.selectedAttributes.map((o=>{const i=t.data.data.tokenValues.find((e=>e.keyAttribute===o.key)),l=Array.isArray(null===i||void 0===i?void 0:i.value)?null===i||void 0===i?void 0:i.value:(null===i||void 0===i?void 0:i.value)&&"object"===typeof(null===i||void 0===i?void 0:i.value)?Object.values(null===i||void 0===i?void 0:i.value):[],n=Array.isArray(e.value)?e.value:[],r=null===l||void 0===l?void 0:l.filter((e=>n.find((t=>{const o=e[i.keyAttribute];return t.id===o})))),s=r?r[a]:void 0,d=[];for(const e in s)d.push({id:e,label:s[e]});const c=`\n                            ${null===d||void 0===d?void 0:d.map((t=>{var o;const a=e.selectedAttributes.find((e=>e.key===t.id));return a?`<td style="text-align:left;padding:7px">${""!==(null===(o=t.label)||void 0===o?void 0:o.trim())?C(t.label):"               "}</td>\n                                `:null}))}\n                            `;return c}))}\n                      </tr>\n                      `;return`\n                    ${i}`}))}\n                </tbody>\n              </table>\n            `;return null===a||void 0===a?void 0:a.replaceAll(",","")}if(1===e.selectedAttributes.length&&e.value.length>1){const t=`<ul>\n                ${e.value.map((e=>`<li>${C(e.label)}</li>`))}\n              </ul>`;return null===t||void 0===t?void 0:t.replaceAll(",","")}if(1===e.selectedAttributes.length&&1===e.value.length)return`${e.value.map((e=>C(e.label)))}`}},u=t.data.data.tokenValues.map((e=>({id:e.name}))),p=(e,t)=>e.filter((e=>!t.some((t=>e.id===t.id))));if(n){const e=p(u,n||[]);n=[...null!==n&&void 0!==n?n:[],...e],n.forEach((e=>{var t;const o=`#${e.id}#`,a=null!==(t=c(e))&&void 0!==t?t:"";s=s.replaceAll(o,a)}))}d.value=Object.assign(Object.assign({},t.data.data),{content:P(null!==s&&void 0!==s?s:"")}),m.value=JSON.parse(JSON.stringify(s)),(0,i.nextTick)((()=>{window.scrollTo(0,0)}))}))},w=e=>{d.value&&(d.value.content=e)},E=()=>{l.warn({title:o(xc),message:o(Ne)})},k=()=>{l.warn({title:o(xc),message:h})},x=(0,i.ref)({maxAttachmentSize:0,allowedImageTypes:[]}),N=(0,i.ref)(),A=()=>{null===a||void 0===a||a.then((e=>{x.value.maxAttachmentSize=e.max_attachment_size,x.value.allowedImageTypes=e.allowed_image_types,N.value=x.value.maxAttachmentSize/1048576}))},D=(0,i.ref)(c.value[0]),T=t=>{var o;"0"!==(null===(o=e.viewDocumentContent)||void 0===o?void 0:o.isTemplateStringEditable)&&(D.value=c.value[t])},P=(e="")=>{const t=s.sanitizeHtml(e);return t};return(0,i.watch)((()=>g.value),(e=>{t("get:initialDocContentChange",e)})),(0,i.onMounted)((()=>{A(),S()})),{documentViewOptions:c,documentContent:d,selectedDocumentViewOption:D,settingsObj:x,maxFileSizeHintLabel:v,attachmentMaxSize:N,uiTinymceConfig:n,previewStyleClasses:y,ohrmDocumentTemplatePreviewBtn:u,onChange:w,onImageTypeError:E,onImageSizeError:k,switchMode:T,getDigitalSignContent:f}}});const Ck=(0,Re.Z)(bk,[["render",yk]]);var Sk=Ck;function wk(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-list"),s=(0,i.resolveComponent)("oxd-email-document-preview-modal");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(r,{class:"oxd-email-history-list-table",configurations:e.configurations,"list-items":e.notificationHistoryRecords,isPaginated:!1,"is-list-loading":e.loadingNotificationHistoryRecords,"filtered-total-records-count":e.notificationHistoryRecords.length,emptyMsg:{message:"Sorry, No Emails Found!",icon:"oxd-no-emails"}},null,8,["configurations","list-items","is-list-loading","filtered-total-records-count"]),e.showModal?((0,i.openBlock)(),(0,i.createBlock)(s,{key:0,emailPreviewData:e.emailDocPreviewContent,"onUpdate:show":t[0]||(t[0]=t=>e.showModal=!1)},null,8,["emailPreviewData"])):(0,i.createCommentVNode)("",!0)],64)}const Ek={visible:!1,listRecordCount:{singleTerm:"Attachment",multiTerm:"Attachments"},singleActions:[],bulkActions:[{type:"oxd-button",props:{label:"Delete Selected",size:"medium",displayType:"label-danger",iconName:"oxd-trash","icon-size":"extra-small","disabled-tooltip":"You don't have permissions to delete some of the selected attachments",flow:"bottom"},events:[{type:"click",identifier:"delete-events"}]}]};var kk=Ek;const xk=[{name:"subject",title:"Subject",style:{flex:"8%","min-width":"150px","margin-right":"0"}},{name:"action",title:"To",style:{flex:"12%","min-width":"340px","padding-left":"0","margin-right":"0",display:"flex","justify-content":"start",height:"inherit"},cellType:"oxd-table-cell-actions",cellRenderer:"toEmailPillRenderer"},{name:"action",html:"",style:{flex:"5%","min-width":"130px","margin-right":"0",display:"flex","justify-content":"start"},cellType:"oxd-table-cell-actions",cellRenderer:"dateTimeCellRenderer"},{name:"sentByName",title:"Sent By",style:{flex:"10%","min-width":"90px","margin-right":"0"}},{name:"action",title:"",style:{flex:"10%","max-width":"190px","margin-right":"0"},cellType:"oxd-table-cell-actions",cellRenderer:"actionsRenderer"}];var Nk=xk;const Ak={topBar:kk,headers:Nk,selectable:!1};var Dk=Ak,Tk={table:Dk};class Pk{getListSchema(){const e=(0,i.ref)(JSON.parse(JSON.stringify(Tk)));return e}}const Vk={class:"oxd-chips-group-wrapper"};function Bk(e,t,o,a,l,n){return(0,i.openBlock)(),(0,i.createElementBlock)("div",Vk,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.options,((e,t)=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"oxd-chip-cell",key:e.id||t},(0,i.toDisplayString)(e.label),1)))),128))])}var Ik=(0,i.defineComponent)({name:"ChipsGroup",props:{options:{type:Array},displayType:{type:String},transparent:{type:Boolean}}});"function"===typeof a["default"]&&(0,a["default"])(Ik);const Lk=(0,Re.Z)(Ik,[["render",Bk]]);var Fk=Lk;const zk={class:"date-time-ul"},Mk={class:"d-flex align-center date-time-li"},Ok={class:"d-flex align-center"};function Rk(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon");return(0,i.openBlock)(),(0,i.createElementBlock)("ul",zk,[(0,i.createElementVNode)("li",Mk,[(0,i.createVNode)(r,{class:"date-time-icon",name:"oxd-calendar",size:"xx-small"}),(0,i.createElementVNode)("span",null,(0,i.toDisplayString)(e.formattedDateTime.date),1)]),(0,i.createElementVNode)("li",Ok,[(0,i.createVNode)(r,{class:"date-time-icon",name:"oxd-clock",size:"xx-small"}),(0,i.createElementVNode)("span",null,(0,i.toDisplayString)(e.formattedDateTime.time),1)])])}var _k=(0,i.defineComponent)({name:"DateTimeCell",components:{"oxd-icon":In.Z},props:{modelValue:{type:String}},setup(e){var t,o;const a=(0,i.toRef)(e,"modelValue"),{jsDisplayFormat:l,locale:n}=Im(),r=e=>(0,se.p6)(new Date(e),l,{locale:n}),s=(null===(t=a.value)||void 0===t?void 0:t.split(",")[0])||"",d=null===(o=a.value)||void 0===o?void 0:o.split(",")[1],c={date:r(s),time:d};return{formattedDateTime:c}}});const $k=(0,Re.Z)(_k,[["render",Rk],["__scopeId","data-v-b796cf9e"]]);var jk=$k;const Uk={class:"ohrm-email-preview-modal"},Zk={class:"ohrm-email-preview-modal-row"},Hk={class:"ohrm-email-preview-field-group d-flex align-center"},qk={class:"ohrm-email-preview-field-label"},Gk={class:"ohrm-email-preview-field-input"},Wk={class:"oxd-autocomplete-chips-area"},Kk={class:"oxd-chip-label"},Qk={key:0,class:"autocomplete-email-mode-custom-chip"},Jk={class:"ohrm-email-preview-field-group d-flex align-center"},Yk={class:"ohrm-email-preview-field-label"},Xk={class:"ohrm-email-preview-field-input"},ex={class:"oxd-autocomplete-chips-area"},tx={class:"oxd-chip-label"},ox={key:0,class:"autocomplete-email-mode-custom-chip"},ax={class:"ohrm-email-preview-field-group d-flex align-center"},ix={class:"ohrm-email-preview-field-label"},lx={class:"ohrm-email-preview-field-input"},nx={class:"oxd-autocomplete-chips-area"},rx={class:"oxd-chip-label"},sx={key:0,class:"autocomplete-email-mode-custom-chip"},dx={class:"ohrm-email-preview-modal-row"},cx={class:"ohrm-email-preview-field-group d-flex align-center"},mx={class:"ohrm-email-preview-field-label"},ux={key:0,class:"ohrm-email-preview-field-value"},px={class:"modal-oxd-divider"},vx={class:"ohrm-email-preview-modal-row"},hx={class:"ohrm-email-preview-field-group d-flex align-center"},gx={class:"ohrm-email-preview-field-label"},yx={key:0,class:"ohrm-email-preview-field-value"},fx={class:"ohrm-email-preview-modal-row"},bx=["innerHTML"],Cx={class:"modal-oxd-divider"},Sx={class:"ohrm-email-preview-modal-row"},wx={class:"orangehrm-modal-footer justify-end"};function Ex(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-divider"),s=(0,i.resolveComponent)("oxd-button"),d=(0,i.resolveComponent)("form-modal"),c=(0,i.resolveDirective)("set-tab-focus-to-first-element");return(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(d,{style:{width:"100%",maxWidth:"800px"},"onUpdate:show":e.onCancel},{title:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.getModalHeader())),1)])),body:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Uk,[(0,i.createElementVNode)("div",Zk,[(0,i.createElementVNode)("div",Hk,[(0,i.createElementVNode)("label",qk,(0,i.toDisplayString)(e.$t("To")),1),(0,i.createElementVNode)("div",Gk,[(0,i.createElementVNode)("div",Wk,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.toValue,((e,t)=>((0,i.openBlock)(),(0,i.createElementBlock)("span",{key:e.id||t,class:"oxd-chip oxd-chip--default oxd-button--main oxd-autocomplete-chips-selected align-center"},[(0,i.createElementVNode)("div",Kk,(0,i.toDisplayString)(e.labelSecondary),1),e.label?((0,i.openBlock)(),(0,i.createElementBlock)("span",Qk,"("+(0,i.toDisplayString)(e.label)+")",1)):(0,i.createCommentVNode)("",!0)])))),128))])])]),(0,i.createElementVNode)("div",Jk,[(0,i.createElementVNode)("label",Yk,(0,i.toDisplayString)(e.$t("Cc")),1),(0,i.createElementVNode)("div",Xk,[(0,i.createElementVNode)("div",ex,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.ccValue,((e,t)=>((0,i.openBlock)(),(0,i.createElementBlock)("span",{key:e.id||t,class:"oxd-chip oxd-chip--default oxd-button--main oxd-autocomplete-chips-selected align-center"},[(0,i.createElementVNode)("div",tx,(0,i.toDisplayString)(e.labelSecondary),1),e.label?((0,i.openBlock)(),(0,i.createElementBlock)("span",ox,"("+(0,i.toDisplayString)(e.label)+")",1)):(0,i.createCommentVNode)("",!0)])))),128))])])]),(0,i.createElementVNode)("div",ax,[(0,i.createElementVNode)("label",ix,(0,i.toDisplayString)(e.$t("Reply To")),1),(0,i.createElementVNode)("div",lx,[(0,i.createElementVNode)("div",nx,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.replyToValue,((e,t)=>((0,i.openBlock)(),(0,i.createElementBlock)("span",{key:e.id||t,class:"oxd-chip oxd-chip--default oxd-button--main oxd-autocomplete-chips-selected align-center"},[(0,i.createElementVNode)("div",rx,(0,i.toDisplayString)(e.labelSecondary),1),e.label?((0,i.openBlock)(),(0,i.createElementBlock)("span",sx,"("+(0,i.toDisplayString)(e.label)+")",1)):(0,i.createCommentVNode)("",!0)])))),128))])])])]),(0,i.createElementVNode)("div",dx,[(0,i.createElementVNode)("div",cx,[(0,i.createElementVNode)("label",mx,(0,i.toDisplayString)(e.$t("Sender Name")),1),e.emailPreviewData?((0,i.openBlock)(),(0,i.createElementBlock)("span",ux,(0,i.toDisplayString)(e.emailPreviewData.senderName),1)):(0,i.createCommentVNode)("",!0)])]),(0,i.createElementVNode)("div",px,[(0,i.createVNode)(r)]),(0,i.createElementVNode)("div",vx,[(0,i.createElementVNode)("div",hx,[(0,i.createElementVNode)("label",gx,(0,i.toDisplayString)(e.$t("Subject"))+":",1),e.emailPreviewData?((0,i.openBlock)(),(0,i.createElementBlock)("span",yx,(0,i.toDisplayString)(e.emailPreviewData.subject),1)):(0,i.createCommentVNode)("",!0)])]),(0,i.createElementVNode)("div",fx,[e.emailPreviewData?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,class:"ohrm-document-template-preview-container-body-html",innerHTML:e.sanitize(e.getBodyWithDigitalSignContent)},null,8,bx)):(0,i.createCommentVNode)("",!0)]),(0,i.createElementVNode)("div",Cx,[(0,i.createVNode)(r)]),(0,i.createElementVNode)("div",Sx,[(0,i.createElementVNode)("div",wx,[e.emailPreviewData.isDigitalSignRequested?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createBlock)(s,{key:0,label:e.$t("Download Document"),displayType:"label","data-test":"okButton","icon-name":"oxd-download-doc",class:"orangehrm-button-margin download-doc-btn",onClick:e.candidateDownloadDocument,size:"medium"},null,8,["label","onClick"])),(0,i.createVNode)(s,{label:e.$t("Done"),displayType:"ghost","data-test":"cancelButton",class:"orangehrm-button-margin",onClick:e.onCancel,size:"medium"},null,8,["label","onClick"])])])])])),_:1},8,["onUpdate:show"])),[[c,void 0,"return-focus"]])}var kx=(0,i.defineComponent)({name:"EmailDocumentPreviewModal",components:{"oxd-divider":ro.Z,"oxd-button":jt.Z,"form-modal":gc},directives:{"set-tab-focus-to-first-element":Sr.Z},props:{emailPreviewData:{type:Object}},setup(e,{emit:t}){const o=new Vf,a=ce(),l=(0,i.inject)("ngServices"),n=(0,i.inject)("$toast"),r=(0,i.ref)(l.$stateParams.candidateId),s=new OC,d=e=>{let t;return t=e.terminationId?e.name+" ("+`${a("Past Employee")})`:e.name,t},c=(0,i.computed)((()=>{var t,o;return null===(o=null===(t=e.emailPreviewData)||void 0===t?void 0:t.toEmailArr)||void 0===o?void 0:o.map((e=>Object.assign(Object.assign(Object.assign(Object.assign({},e),{id:e.email}),d(e)?{label:e.email}:null),{labelSecondary:d(e)||e.email,preSelected:!0})))})),m=(0,i.computed)((()=>{var t,o;return null===(o=null===(t=e.emailPreviewData)||void 0===t?void 0:t.ccEmailArr)||void 0===o?void 0:o.map((e=>Object.assign(Object.assign(Object.assign(Object.assign({},e),{id:e.email}),d(e)?{label:e.email}:null),{labelSecondary:d(e)||e.email,preSelected:!0})))})),u=(0,i.computed)((()=>{var t,o;return null===(o=null===(t=e.emailPreviewData)||void 0===t?void 0:t.replyToEmailArr)||void 0===o?void 0:o.map((e=>Object.assign(Object.assign(Object.assign(Object.assign({},e),{id:e.email}),d(e)?{label:e.email}:null),{labelSecondary:d(e)||e.email,preSelected:!0})))})),p=()=>{var t;return(null===(t=e.emailPreviewData)||void 0===t?void 0:t.isDigitalSignRequested)?"Request E-signature":"Email and Attached Document"},v=(0,i.ref)(),h=()=>{t("update:show")},g=()=>{o.ping().then((()=>{var t;window.open(`${window.location.origin}/api/recruitment/candidate/${r.value}/candidateDocument/${null===(t=e.emailPreviewData)||void 0===t?void 0:t.attachmentId}`,"_self")})).catch((e=>{403===e.status?l.$state.go("403"):401===e.status?o.logout():null===n||void 0===n||n.error({title:a("Error"),message:a("Error on processing the request")})}))},y=(e="")=>{const t=s.sanitizeHtml(e);return t},f=(0,i.computed)((()=>{var t,o;let a=null===(t=e.emailPreviewData)||void 0===t?void 0:t.body,i=null===(o=e.emailPreviewData)||void 0===o?void 0:o.digitalSignContent;return i&&(a+="<br/>"+i),a}));return{emailDocumentModalForm:v,toValue:c,ccValue:m,replyToValue:u,onCancel:h,candidateDownloadDocument:g,sanitize:y,getModalHeader:p,getBodyWithDigitalSignContent:f}}});const xx=(0,Re.Z)(kx,[["render",Ex],["__scopeId","data-v-16a4f37c"]]);var Nx=xx,Ax=(0,i.defineComponent)({name:"EmailHistory",components:{"oxd-list":Bd.Z,"oxd-email-document-preview-modal":Nx},setup(){var e,t,o,a,l,n,r,s,d;const c=ce(),m=new Pk,u=m.getListSchema(),p=new Vf,v=(0,i.inject)("$toast"),h=(0,i.inject)("ngServices"),g=(0,i.ref)(h.$stateParams.candidateId),y=new Sb,f=(0,i.ref)([]),b=(0,i.ref)(!1),C=()=>{b.value=!0,p.getCandidateDocumentEmailHistory(g.value).then((e=>{f.value=e.data.data.map((e=>S(e))),b.value=!1})).catch((()=>{b.value=!1,null===v||void 0===v||v.error({title:c(kc),message:c(Be)})}))},S=e=>{const t=y.getFormattedLocalDateTime(e.sentDateTime);return Object.assign(Object.assign({},e),{sentDateTime:t.localDate+","+t.localTime,toEmailArr:e.toEmail||[],ccEmailArr:e.ccEmail||[],replyToEmailArr:e.replyToEmail||[],sentByName:ge.getEmployeeName(e.sentBy.name,"","",Boolean(e.sentBy.terminationId)),senderName:ge.getEmployeeName(e.sender.name,"","",Boolean(e.sender.terminationId))})},w=(0,i.ref)(!1),E=(0,i.ref)(null),k=e=>{w.value=!w.value,E.value=e},x=(e,t,o,a)=>{let i={};const l={component:"oxd-button",props:{label:c("View Email"),id:"viewEmailLabel",class:"view-email-label-button",iconName:"oxd-show",displayType:"label",size:"medium",onClick:()=>{k(a)}}},n={component:"oxd-icon-button",props:{id:"viewEmailicon",name:"oxd-show",size:"small",tooltip:"View Email",class:"view-email-icon-button",iconName:"oxd-show",displayType:"label",onClick:()=>{k(a)}}};return a.restrictDetails||(i={previewLabelButton:l,previewIconButton:n}),{props:{header:{cellConfig:Object.assign({},i)}}}},N=(e,t,o,a)=>{const i={component:Fk,props:{options:a.toEmailArr.map((e=>Object.assign(Object.assign({},e),{id:e.email,label:e.email})))}};return{props:{header:{cellConfig:Object.assign({emailPillObj:i})}}}},A=(e,t,o,a)=>{const i={component:jk,props:{modelValue:a.sentDateTime}};return{props:{header:{cellConfig:Object.assign({dateTimeObj:i})}}}},D=null===(o=null===(t=null===(e=u.value)||void 0===e?void 0:e.table)||void 0===t?void 0:t.headers)||void 0===o?void 0:o[4];D&&"string"===typeof D.cellRenderer&&(D.cellRenderer=x);const T=null===(n=null===(l=null===(a=u.value)||void 0===a?void 0:a.table)||void 0===l?void 0:l.headers)||void 0===n?void 0:n[1];T&&"string"===typeof T.cellRenderer&&(T.cellRenderer=N);const P=null===(d=null===(s=null===(r=u.value)||void 0===r?void 0:r.table)||void 0===s?void 0:s.headers)||void 0===d?void 0:d[2];P&&"string"===typeof P.cellRenderer&&(P.cellRenderer=A,P.html=c("Sent Date and Time")+`<br>(${ge.getClientGMT()})`);const V=(0,i.computed)((()=>u.value));return C(),{configurations:V,notificationHistoryRecords:f,loadingNotificationHistoryRecords:b,showModal:w,emailDocPreviewContent:E,getNotificationHistoryRecords:C}}});const Dx=(0,Re.Z)(Ax,[["render",wk],["__scopeId","data-v-7eea3bbb"]]);var Tx=Dx;const Px=e=>((0,i.pushScopeId)("data-v-a8e9ce6e"),e=e(),(0,i.popScopeId)(),e),Vx={class:"profile-modal-header"},Bx={class:"modal-oxd-divider"},Ix={class:"profile-modal-body"},Lx={key:0,class:"helper-text"},Fx={key:2,class:"profile-image-placeholder"},zx=Px((()=>(0,i.createElementVNode)("img",{style:{width:"215px",height:"215px"},src:"images/profile-image-update-modal-default-image.png"},null,-1))),Mx={class:"profile-modal-footer"},Ox={key:0,class:"oxd-input-field-error-message oxd-input-group__message"},Rx={key:1,class:"oxd-input-field-error-message oxd-input-group__message"};function _x(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-text"),s=(0,i.resolveComponent)("oxd-divider"),d=(0,i.resolveComponent)("image-cropper"),c=(0,i.resolveComponent)("oxd-file-input"),m=(0,i.resolveComponent)("oxd-button"),u=(0,i.resolveComponent)("oxd-dialog"),p=(0,i.resolveDirective)("set-tab-focus-to-first-element");return(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(u,(0,i.mergeProps)(e.$attr,{"onUpdate:show":e.onCancel,onKeyup:(0,i.withKeys)(e.onCancel,["esc"]),style:{width:"750px"}}),{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Vx,[(0,i.createVNode)(r,{class:"modal-title",type:"card-title"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Update Profile Photo")),1)])),_:1})]),(0,i.createElementVNode)("div",Bx,[(0,i.createVNode)(s)]),(0,i.createElementVNode)("div",Ix,[e.getUpdatedProfilePicture?((0,i.openBlock)(),(0,i.createElementBlock)("div",Lx,(0,i.toDisplayString)(e.$t("Use the scroll to zoom in and out")),1)):(0,i.createCommentVNode)("",!0),e.getUpdatedProfilePicture?((0,i.openBlock)(),(0,i.createBlock)(d,{key:1,image:e.getUpdatedProfilePicture,imageFormat:e.imageType,onChange:e.onImageCropped},null,8,["image","imageFormat","onChange"])):((0,i.openBlock)(),(0,i.createElementBlock)("div",Fx,[(0,i.createVNode)(c,{"onUpdate:modelValue":t[0]||(t[0]=t=>e.onFileUpload(t)),accept:"image/*"},{default:(0,i.withCtx)((()=>[zx])),_:1})]))]),(0,i.createVNode)(s),(0,i.createElementVNode)("div",Mx,[e.isInvalidFilesSelected?((0,i.openBlock)(),(0,i.createElementBlock)("div",Ox,(0,i.toDisplayString)(e.$t("This is an unsupported image type. Please select a valid image")),1)):(0,i.createCommentVNode)("",!0),e.isMaxFileSizeExceeded?((0,i.openBlock)(),(0,i.createElementBlock)("div",Rx,(0,i.toDisplayString)(e.displayMaxFileValidationText),1)):(0,i.createCommentVNode)("",!0),e.getUpdatedProfilePicture&&e.allowRemoveOption?((0,i.openBlock)(),(0,i.createBlock)(m,{key:2,label:e.$t("Remove"),iconName:"oxd-trash",displayType:"text",class:"orangehrm-button-margin",style:(0,i.normalizeStyle)({"align-self":"flex-start","margin-right":"0.5rem"}),onClickOnce:t[1]||(t[1]=t=>e.$emit("profilePhotoDeleteAction")),"data-test":"deleteBtn"},null,8,["label","style"])):(0,i.createCommentVNode)("",!0),e.getUpdatedProfilePicture?((0,i.openBlock)(),(0,i.createBlock)(c,{key:3,"onUpdate:modelValue":t[2]||(t[2]=t=>e.onFileUpload(t)),accept:"image/*"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(m,{label:e.$t("Change"),iconName:"oxd-edit",displayType:"text",style:{"align-self":"flex-start"},"data-test":"changeBtn"},null,8,["label"])])),_:1})):(0,i.createCommentVNode)("",!0),e.getUpdatedProfilePicture?((0,i.openBlock)(),(0,i.createBlock)(m,{key:4,label:e.$t("Save"),class:"orangehrm-button-margin",style:{"align-self":"flex-start"},onClickOnce:e.onConfirm,"data-test":"saveBtn"},null,8,["label","onClickOnce"])):(0,i.createCommentVNode)("",!0)])])),_:1},16,["onUpdate:show","onKeyup"])),[[p,void 0,"return-focus"]])}var $x=o(55373),jx=(0,i.defineComponent)({name:"profileImageUpdateModal",components:{"oxd-button":jt.Z,"oxd-dialog":Wo.Z,"image-cropper":$x.Z,"oxd-text":Ii.Z,"oxd-divider":ro.Z,"oxd-file-input":so.Z},emits:["profileModalConfirmAction","profileModalCloseAction","profilePhotoDeleteAction"],directives:{"set-tab-focus-to-first-element":Sr.Z},props:{profileImage:{type:String,required:!0},profileImageName:{type:String},maxAttachmentSize:{type:Number},allowedImageTypes:{type:Array},allowRemoveOption:{type:Boolean,default:!1,required:!1}},setup(e,{emit:t}){const o=ce(),a=(0,i.ref)(""),l=(0,i.ref)(),n=((0,i.inject)("ngServices"),(0,i.ref)(!1)),r=(0,i.ref)(!1),s=()=>{t("profileModalCloseAction","cancel")},d=(0,i.toRef)(e,"profileImageName"),c=(0,i.toRef)(e,"profileImage"),m=(0,i.toRef)(e,"maxAttachmentSize"),u=(0,i.toRef)(e,"allowedImageTypes"),p=(0,i.computed)((()=>o("The file is too large. Allowed maximum size is {{maxAttachmentSize}}MB",{maxAttachmentSize:Math.floor(m.value?m.value/1e6:0).toString()})));l.value={filename:d.value?d.value:"profile-image."+c.value.split(",")[0].replace("data:","").split(";")[0],filesize:500,base64:c.value.split(",")[1],filetype:c.value.split(",")[0].replace("data:","").split(";")[0]};const v=()=>{if(n.value||r.value)return;const e={status:!0,imageDetails:l.value};t("profileModalConfirmAction",e)},h=()=>{if(n.value||r.value)return;l.value;t("profileModalConfirmAction")},g=(0,i.computed)((()=>a.value?a.value:e.profileImage)),y=(0,i.computed)((()=>l.value.filetype)),f=e=>{l.value&&(l.value.base64=e.split(",")[1])},b=e=>{var t,o,i,s;if(e.length>0&&e[0]){if(!(null===(t=null===u||void 0===u?void 0:u.value)||void 0===t?void 0:t.includes(null===(o=e[0])||void 0===o?void 0:o.type)))return n.value=!0,void(r.value=!1);if(e[0].size>m.value)return r.value=!0,void(n.value=!1);n.value=!1,r.value=!1,l.value={filename:e[0].name,base64:e[0].base64,filesize:e[0].size,filetype:e[0].type},a.value=ge.base64ImageConvertion(null===(i=e[0])||void 0===i?void 0:i.type,null===(s=e[0])||void 0===s?void 0:s.base64)}};return{onCancel:s,onConfirm:v,onRemove:h,onImageCropped:f,onFileUpload:b,getUpdatedProfilePicture:g,updatedImageSrC:a,isInvalidFilesSelected:n,isMaxFileSizeExceeded:r,imageType:y,displayMaxFileValidationText:p}}});const Ux=(0,Re.Z)(jx,[["render",_x],["__scopeId","data-v-a8e9ce6e"]]);var Zx=Ux,Hx=(0,i.defineComponent)({name:"candidateProfile",components:{"form-modal":gc,"profile-pic":P.Z,"oxd-divider":ro.Z,"oxd-button":jt.Z,"oxd-tabs":xf.Z,"oxd-tab":Nf.Z,"profile-details":Db,"profile-note":wS,"profile-resume":oC,"recruitment-layout":Xc,"oxd-collapsible":xS.Z,"oxd-bullet-points":NS.Z,"oxd-quick-search":T.Z,"oxd-icon-button":D.Z,"oxd-candidate-history-info-pill":qS,"oxd-loader":co.Z,"edit-candidate-note-modal":yE,"candidate-confirmation-modal":SE,"oxd-select-input-btn":Ag.Z,"oxd-classic-table":tk.Z,"attachment-list":ek,"email-history-list":Tx,"create-document-list":$C,"add-as-employee-modal":dk,"document-template-preview":Sk,"confirmation-modal":_d,"email-document-modal":sS,"candidate-profile-update-modal":Zx},directives:{"set-tab-focus-to-first-element":Sr.Z},setup(){var e;const t=ce(),{settings:o}=vu(),a={name:"oxd-switch-person-icon",displayType:"label-info"},l={"background-color":"rgba(100, 114, 140, 0.1)",color:"#64728c",padding:"0","min-width":"unset","min-height":"unset",width:"28px",height:"28px"},n=[{name:"date",title:t("Date and Time"),width:"20%"},{name:"actionOwner",title:t("Action Owner"),width:"15%"},{name:"action",title:t("Action"),width:"15%"},{name:"actionDesc",title:t("Action Description"),width:"50%",style:"white-space: pre-wrap; word-break: break-word;",class:"audit-log-action-desc-td",flow:"left"}],r=(0,i.inject)("ngServices"),s=(0,i.ref)(r.$stateParams.vacancyId),d=new Vf,c=new Aa,{jsDisplayFormat:m,locale:u}=Im(),p=(0,i.ref)(0),v=e=>(0,se.p6)(new Date(e),m,{locale:u}),h=(0,i.ref)();c.getDataGroupPermissions({dataGroup:"recruitment_candidates",entities:{Candidate:r.$stateParams.candidateId}}).then((e=>{h.value=e,h.value=e,g.value=e.read,h.value&&!h.value.read&&r.$state.go("403")}));const g=(0,i.ref)(!1),y=(0,i.inject)("$toast"),f=(0,i.ref)(),b=(0,i.ref)(!1),C=(0,i.ref)(),S=(0,i.ref)(),w=(0,i.ref)(),E=(0,i.ref)([]),k=(0,i.ref)([]),x=(0,i.ref)(!1),N=(0,i.ref)(!1),D=(0,i.ref)(null),T=null===(e=r.$q)||void 0===e?void 0:e.defer,P=(0,i.ref)(null),V=(0,i.ref)([]),B=(0,i.ref)([]),I=(0,i.ref)([]),L=(0,i.ref)([]),F=(0,i.ref)([]),z=(0,i.ref)([]),M=(0,i.ref)([]),O=(0,i.ref)([]),R=(0,i.ref)([]),_=(0,i.ref)(!1),$=(0,i.ref)(new Map),j=(0,i.ref)({});let U=null;const Z=(0,i.ref)(!1),H=(0,i.ref)(!1),q=(0,i.ref)(null),G=(0,i.ref)(null),W=(0,i.ref)(null),K=(0,i.ref)([]),Q=(0,i.ref)({}),J=(0,i.ref)(null),Y=(0,i.ref)(!1),X=(0,i.ref)(null),ee=new Sb,te=new Bf,oe=(0,i.ref)(!0),ae=(0,i.ref)([]),ie=(0,i.ref)(null),le=(0,i.ref)(null),ne=(0,i.ref)((0,xu.x0)(6)),re=(0,i.ref)(!1),de=(0,i.ref)(!1),me=(0,i.ref)(!1),ue=(0,i.ref)(),pe=(0,i.ref)(!1),ve=(0,i.ref)(!1),he=(0,i.ref)(!1),ye=(0,i.ref)(!1),fe=(0,i.ref)(!1),Ee=(0,i.ref)(!1),xe=(0,i.computed)((()=>{var e,t;return!(!(null===(e=null===h||void 0===h?void 0:h.value)||void 0===e?void 0:e.update)||(null===(t=null===f||void 0===f?void 0:f.value)||void 0===t?void 0:t.isHired))}));w.value=[{id:"tab1",title:"Details"},{id:"tab2",title:"Resume"},{id:"tab3",title:"Notes"},{id:"tab4",title:"Attachments"},{id:"tab5",title:"Email History"},{id:"tab6",title:"Create Document",icon:"oxd-create-document",class:"create-doc-tab"}];const Ae=(0,i.ref)();r.titleService.setForcedTitle("Candidate Profile");const De=e=>`images/${te.getDefaultProfilePicName(e)}`,Te=(0,i.computed)((()=>{var e,t,o;return`${null===(e=f.value)||void 0===e?void 0:e.firstName} ${null===(t=f.value)||void 0===t?void 0:t.middleName} ${null===(o=f.value)||void 0===o?void 0:o.lastName}`})),Pe=(0,i.computed)((()=>{var e;return null===(e=f.value)||void 0===e?void 0:e.vacancy})),Ie=(0,i.ref)(void 0),Le=(0,i.computed)((()=>{var e;let t=null;return(null===(e=f.value)||void 0===e?void 0:e.addedAsEmployeeNumber)?t=f.value.addedAsEmployeeNumber:Ie.value&&(t=Ie.value),t?"/client/#/pim/employees/"+t+"/profile":null})),Fe=(0,i.computed)((()=>{var e,t,o,a;return(null===(e=f.value)||void 0===e?void 0:e.candidatePicture)?ge.base64ImageConvertion("image/jpeg",null===(t=f.value)||void 0===t?void 0:t.candidatePicture):(null===(o=f.value)||void 0===o?void 0:o.id)?De(null===(a=f.value)||void 0===a?void 0:a.id):null})),ze=(0,i.computed)((()=>{var e,t;return(null===(e=f.value)||void 0===e?void 0:e.candidatePicture)?ge.base64ImageConvertion("image/jpeg",null===(t=f.value)||void 0===t?void 0:t.candidatePicture):""})),Oe=(0,i.computed)((()=>{var e,t,o;const a=!(null===(e=f.value)||void 0===e?void 0:e.candidatePicture)&&(null===(t=f.value)||void 0===t?void 0:t.id)?ee.getProfileImageBorderColors(null===(o=f.value)||void 0===o?void 0:o.id):[];return{outerBorderColor:a[0],innerBorderColor:a[1]}})),Re=e=>{var t,o,a,i,l,n,r,s;Q.value=e,E.value=[],k.value=[],"-1"===e.id?(z.value=M.value,O.value=R.value,oe.value=!0,je(null===(t=Pe.value)||void 0===t?void 0:t.name),(null===(o=f.value)||void 0===o?void 0:o.events)&&He(null===(a=f.value)||void 0===a?void 0:a.events)):(oe.value=!1,z.value=null===(i=$.value.get(e.id))||void 0===i?void 0:i.answer,O.value=null===(l=$.value.get(e.id))||void 0===l?void 0:l.question,(null===(n=f.value)||void 0===n?void 0:n.pastEvents)&&(null===(r=f.value)||void 0===r?void 0:r.pastEvents.length)>0&&($e(null===(s=Pe.value)||void 0===s?void 0:s.name),E.value=ee.getPastEventData(j.value,Q.value.id,I.value),E.value.length>0&&(k.value=ee.getLatestEventData(E.value))))},_e=e=>{K.value[0].label=e||t("No Vacancy Selected")},$e=e=>{K.value=ee.getPastVacancies(j.value,e||t("No Vacancy Selected"))},je=e=>{_e(e),Q.value=K.value[0]},Ue=(e=!1,o)=>{x.value=e;const a={candidateId:r.$stateParams.candidateId,vacancyId:s.value?s.value:""};d.getCandidate(a).then((e=>{var a,i,l,n,r,s,d;x.value=!1,e.data&&(f.value=e.data.data,K.value=[],E.value=[],k.value=[],e.data.data.pastEvents&&e.data.data.pastEvents.length>0?($e(null===(i=null===(a=f.value)||void 0===a?void 0:a.vacancy)||void 0===i?void 0:i.name),je(null===(n=null===(l=f.value)||void 0===l?void 0:l.vacancy)||void 0===n?void 0:n.name)):(Q.value.id="-1",Q.value.label=(null===(s=null===(r=f.value)||void 0===r?void 0:r.vacancy)||void 0===s?void 0:s.name)?f.value.vacancy.name:t("No Vacancy Selected")),e.data.data.events&&Ze(e.data.data.events,Pe.value),(null===(d=f.value)||void 0===d?void 0:d.isDocumentTemplateFound)?b.value=f.value.isDocumentTemplateFound:b.value=!1,o(e.data.data))})).catch((()=>{x.value=!1,null===y||void 0===y||y.error({title:t(Ve),message:t(Ce)})}))},Ze=(e,t)=>{f.value&&(f.value.events=e),K.value.length>0&&(Q.value=K.value[0]),He(e),t&&f.value&&(f.value.vacancy=t)},He=(e=[],t)=>{var o;E.value=[],k.value=[],E.value=ee.getCurrentEventData(e,I.value),(null===(o=f.value)||void 0===o?void 0:o.candidateStage)===Zf.Hired&&(D.value={vacancyEvent:{type:{id:Hf.Hired}}}),E.value.length>0&&(k.value=ee.getLatestEventData(E.value)),t&&t()},qe=(e,t,o=!1)=>{var a;x.value=e,t?(yt(t.pastEvents,null===(a=t.vacancy)||void 0===a?void 0:a.name),t.events&&He(t.events),ft().then((()=>{var e,a,i;f.value=t,s.value=null===(a=null===(e=f.value)||void 0===e?void 0:e.vacancy)||void 0===a?void 0:a.vacancyId,(null===(i=f.value)||void 0===i?void 0:i.isDocumentTemplateFound)?b.value=f.value.isDocumentTemplateFound:b.value=!1,Et(),o&&(ne.value=(0,xu.x0)(6))}))):ne.value=(0,xu.x0)(6),x.value=!1},Ge=e=>{var t,o,a;window.open(`${window.location.origin}/recruitment/candidateProfile/candidateId/${null===(t=f.value)||void 0===t?void 0:t.id}/vacancyId/${null===(a=null===(o=f.value)||void 0===o?void 0:o.vacancy)||void 0===a?void 0:a.vacancyId}/eventId/${e.vacancyEvent.id}`,"_blank")},We=()=>{var e,t,o,a,i,l,n;const r=(0,xu.x0)(6),s=(0,xu.x0)(6),d=(0,xu.x0)(6),c=null===(t=null===(e=D.value)||void 0===e?void 0:e.notes)||void 0===t?void 0:t.map((e=>tt(e))),m=c.sort(((e,t)=>e.id-t.id));if(V.value=(null===(o=D.value.notes)||void 0===o?void 0:o.length)>0?[{id:r,comments:m}]:[],null===(a=D.value)||void 0===a?void 0:a.scheduleNote){const e=D.value.scheduleNote.addedEmployee?{id:D.value.scheduleNote.addedEmployee.id,commenterName:ge.getEmployeeName(D.value.scheduleNote.addedEmployee.firstName,D.value.scheduleNote.addedEmployee.middleName,D.value.scheduleNote.addedEmployee.lastName,Boolean(D.value.scheduleNote.addedEmployee.terminationId)),avatarUrl:D.value.scheduleNote.addedEmployee.profilePic?ge.base64ImageConvertion("image/jpeg",D.value.scheduleNote.addedEmployee.profilePic.image):De(D.value.scheduleNote.addedEmployee.id)}:{id:"-1",commenterName:ge.getEmployeeName("Admin","","",!1)};V.value.push({id:d,comments:[{isScheduleNote:!0,groupId:d,id:2,allowToEdit:D.value.scheduleNote.editable,allowToDelete:D.value.scheduleNote.deletable,content:D.value.scheduleNote.note,user:e,time:D.value.scheduleNote.addedTime,formattedTime:null===(i=D.value.scheduleNote.addedTime)||void 0===i?void 0:i.split(" ")[0],edited:!!D.value.scheduleNote.updatedTime||(D.value.edited||!1)}],isScheduleNoteGroup:!0})}if(null===(l=D.value)||void 0===l?void 0:l.finalNote){const e=D.value.finalNote.addedEmployee?{id:D.value.finalNote.addedEmployee.id,commenterName:ge.getEmployeeName(D.value.finalNote.addedEmployee.firstName,D.value.finalNote.addedEmployee.middleName,D.value.finalNote.addedEmployee.lastName,Boolean(D.value.finalNote.addedEmployee.terminationId)),avatarUrl:D.value.finalNote.addedEmployee.profilePic?ge.base64ImageConvertion("image/jpeg",D.value.finalNote.addedEmployee.profilePic.image):De(D.value.finalNote.addedEmployee.id)}:{id:"-1",commenterName:ge.getEmployeeName("Admin","","",!1)};V.value.push({id:s,comments:[{isFinalNote:!0,groupId:s,id:1,allowToEdit:D.value.finalNote.editable,allowToDelete:D.value.finalNote.deletable,content:D.value.finalNote.note,user:e,time:D.value.finalNote.addedTime,formattedTime:null===(n=D.value.finalNote.addedTime)||void 0===n?void 0:n.split(" ")[0],edited:!!D.value.finalNote.updatedTime||(D.value.edited||!1)}],isFinalNoteGroup:!0})}},Ke=e=>{D.value=e,We(),N.value=!0},Qe=new Promise(((e,t)=>{const o={filter:{excludeStatuses:[-1,3]},mode:"create"};d.getVacancies(o).then((t=>{t.data&&t.data.data&&(S.value=[],S.value=t.data.data.map((e=>Object.assign(Object.assign({},e),{id:e.vacancyId,label:e.vacancyName}))),e(S.value))})).catch((e=>t(e)))})),Je=e=>{var t;P.value&&P.value.resolve(),P.value=T();const o=P.value.promise,a={candidateName:e,excludeCandidateIds:[null===(t=f.value)||void 0===t?void 0:t.id]},i={filter:a,includes:["Photo"],query:{includeArchive:!0,includeActive:!0,orderBy:"bestMatchName",limit:5},excludes:["Meta"]},l=new Promise(((e,t)=>{d.getCandidates(i,o).then((t=>{const o=t.data.data.map((e=>Object.assign(Object.assign({},e),{id:parseInt(e.id),label:e.fullName,avatar_url:e.profilePic?ge.base64ImageConvertion("image/jpeg",e.profilePic):null})));e(o)})).catch((()=>{t([])}))}));return l},Ye=e=>{"string"!==typeof e&&(C.value=e,Xe())},Xe=()=>{var e,t;C.value&&(r.$stateParams.candidateId=C.value.id,s.value=C.value.vacancyId,oe.value=!0,Ue(!1,(e=>{const t=J.value,o=G.value;t&&(t.candidate=e,t.notes=e.notes,t.getCommentGroups(),t.setResumeUrl()),o&&(o.candidate=e,o.getCombinedNotes()),Et(),ue.value=void 0,pe.value=!1})),r.$state.go("recruitment.candidateProfile.view",{candidateId:null===(e=C.value)||void 0===e?void 0:e.id,vacancyId:null===(t=C.value)||void 0===t?void 0:t.vacancyId}),C.value=null,ft())},et=new Promise(((e,o)=>{d.getTimeZones().then((o=>{if(o.data){const e=[];o.data.data.forEach((o=>{const a=[...o.alternativeKeys||[],o.name];e.push({id:o.name,label:"("+o.prefix.concat(") ",t(o.label)),offset:o.offset,prefix:o.prefix,keys:a})})),I.value=e}e(I.value)})).catch((e=>o(e)))})),tt=e=>{const t=e.addedEmployee?{id:e.addedEmployee.id,commenterName:ge.getEmployeeName(e.addedEmployee.firstName,e.addedEmployee.middleName,e.addedEmployee.lastName,Boolean(e.addedEmployee.terminationId)),avatarUrl:e.addedEmployee.profilePic?ge.base64ImageConvertion("image/jpeg",e.addedEmployee.profilePic.image):De(e.addedEmployee.id)}:{id:"-1",commenterName:ge.getEmployeeName("Admin","","",!1)};return{groupId:"groupId",id:e.id,allowToEdit:e.editable,allowToDelete:e.deletable,content:e.note,user:t,addedTime:e.addedTime,formattedTime:v(e.addedTime),edited:!!e.updatedTime||(e.edited||!1)}};let ot=!1;const at=(e,o)=>{var a;return!o.value||""===o.value.trim()||(!!ot||(ot=!0,void d.addCandidateEventNote(null===(a=f.value)||void 0===a?void 0:a.id,D.value.vacancyEvent.id,{comment:o.value}).then((e=>{var a,i,l,n,r,s,d;ut.value=null,ot=!1;const c=e.data.data,m={addedEmployee:c.addedEmployee,addedTime:c.addedTime,id:c.id,note:c.note,updatedTime:c.updatedTime,deletable:c.deletable,editable:c.editable};null===(a=D.value)||void 0===a||a.notes.push(m);const u=tt(m);V.value.length>0?(null===(i=V.value[0])||void 0===i?void 0:i.isFinalNoteGroup)||(null===(l=V.value[0])||void 0===l?void 0:l.isScheduleNoteGroup)||(null===(n=V.value[1])||void 0===n?void 0:n.isScheduleNoteGroup)?V.value.unshift({id:(0,xu.x0)(6),comments:[u]}):V.value[0].comments.push(u):V.value.push({id:(0,xu.x0)(6),comments:[u]});const p=G.value;if(p){const e=null===(s=null===(r=f.value)||void 0===r?void 0:r.events)||void 0===s?void 0:s.find((e=>e.id===D.value.id));e>-1&&(null===(d=e.notes)||void 0===d||d.push(m)),p.getCombinedNotes()}o.successCallback(),null===y||void 0===y||y.success({title:t(Ec),message:t(be)})})).catch((()=>ot=!1))))},it=e=>{H.value=e},lt=e=>{var o;d.partialUpdateScheduleNote(null===(o=f.value)||void 0===o?void 0:o.id,D.value.vacancyEvent.id,Object.assign(Object.assign({},""!==e&&{scheduleComment:e}),{partialUpdate:["scheduleComment"]})).then((()=>{var o,a,i,l;if(e){const i=null===(a=null===(o=f.value)||void 0===o?void 0:o.events)||void 0===a?void 0:a.find((e=>e.id===D.value.id));i.scheduleNote.note=e,i.scheduleNote.edited=!0,D.value.scheduleNote.note=e,V.value.length>1&&V.value[1].isScheduleNoteGroup?(V.value[1].comments[0].content=e,V.value[1].comments[0].edited=!0):(V.value[0].comments[0].content=e,V.value[0].comments[0].edited=!0),null===y||void 0===y||y.success({title:t(Ec),message:t(Se)})}else{D.value.scheduleNote=null;const e=null===(l=null===(i=f.value)||void 0===i?void 0:i.events)||void 0===l?void 0:l.find((e=>e.id===D.value.id));e.scheduleNote=null,V.value.length>1&&V.value[1].isScheduleNoteGroup?V.value[1].comments=[]:V.value[0].comments=[],null===y||void 0===y||y.success({title:t(Ec),message:t(we)})}const n=G.value;n&&n.getCombinedNotes()}))},nt=e=>{var o;d.partialUpdateFinalNote(null===(o=f.value)||void 0===o?void 0:o.id,D.value.vacancyEvent.id,Object.assign(Object.assign({},""!==e&&{finalComment:e}),{partialUpdate:["finalComment"]})).then((()=>{var o,a,i,l;if(e){const i=null===(a=null===(o=f.value)||void 0===o?void 0:o.events)||void 0===a?void 0:a.find((e=>e.id===D.value.id));i.finalNote.note=e,i.finalNote.edited=!0,D.value.finalNote.note=e,V.value[V.value.length-1].comments[0].content=e,V.value[V.value.length-1].comments[0].edited=!0,null===y||void 0===y||y.success({title:t(Ec),message:t(Se)})}else{D.value.finalNote=null;const e=null===(l=null===(i=f.value)||void 0===i?void 0:i.events)||void 0===l?void 0:l.find((e=>e.id===D.value.id));e.finalNote=null,V.value[V.value.length-1].comments=[],null===y||void 0===y||y.success({title:t(Ec),message:t(we)})}const n=G.value;n&&n.getCombinedNotes()}))},rt=(e,o)=>{o.comment.isFinalNote?nt(o.value):o.comment.isScheduleNote?lt(o.value):d.updateCandidateEventNote(o.comment.id,{comment:o.value}).then((e=>{var a,i,l,n,r,s,d;if(H.value=!1,e.data.success){const e=D.value.notes.find((e=>e.id===o.comment.id)),t=null===(i=null===(a=f.value)||void 0===a?void 0:a.events)||void 0===i?void 0:i.find((e=>e.id===D.value.id)),c=(null===(n=null===(l=f.value)||void 0===l?void 0:l.events)||void 0===n?void 0:n.findIndex((e=>e.id===D.value.id)))||-1,m=null===(r=null===t||void 0===t?void 0:t.notes)||void 0===r?void 0:r.find((e=>e.id===o.comment.id));m&&(m.note=o.value,m.edited=!0),e.note=o.value,e.edited=!0;const u=V.value[0].comments.find((e=>e.id===o.comment.id));u.content=e.note,u.edited=!0;const p=G.value;p&&(c>-1&&(null===(d=null===(s=f.value)||void 0===s?void 0:s.events)||void 0===d||d.splice(c,1,t)),p.getCombinedNotes())}null===y||void 0===y||y.success({title:t(Ec),message:t(Se)})}))},st=(e,o)=>{o.value.isFinalNote?nt(null):o.value.isScheduleNote?lt(null):d.deleteCandidateEventNote(o.value.id).then((()=>{var e,a,i,l,n,r,s;const d=D.value.notes.findIndex((e=>e.id===o.value.id));null===(e=D.value)||void 0===e||e.notes.splice(d,1);const c=V.value[0].comments.findIndex((e=>e.id===o.value.id));V.value[0].comments.splice(c,1);const m=G.value;if(m){const e=null===(i=null===(a=f.value)||void 0===a?void 0:a.events)||void 0===i?void 0:i.find((e=>e.id===D.value.id)),t=(null===(n=null===(l=f.value)||void 0===l?void 0:l.events)||void 0===n?void 0:n.findIndex((e=>e.id===D.value.id)))||-1;t>-1&&(null===(s=null===(r=f.value)||void 0===r?void 0:r.events)||void 0===s||s.splice(t,1,e)),m.getCombinedNotes()}null===y||void 0===y||y.success({title:t(Ec),message:t(we)})}))},dt=e=>{"cancel"===e?U=null:d.deleteCandidateEventNote(U.id).then((e=>{var o;if(e.data.success){const e=D.value.notes.findIndex((e=>e.id===U.id));null===(o=D.value)||void 0===o||o.notes.splice(e,1),U=null,null===y||void 0===y||y.success({title:t(Ec),message:t(we)})}})),_.value=!1},ct=e=>new Promise(((o,a)=>{var i,l,n,c,m,u,p,v,h,g,b,C,S,w,E,k,x,A,T;if(!H.value){Z.value=!0;const P=D.value.vacancyEvent.isScoreType,V=e.time?e.time+":00":"00:00:00",B=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({timezone:e.date?null===(i=e.timezone)||void 0===i?void 0:i.id:void 0,time:e.date?`${e.date} ${V}`:null,score:P?e.score||"0":void 0},ut.value?{comment:ut.value}:void 0),!P&&{status:(null===(l=e.status)||void 0===l?void 0:l.id)||null}),(null===(n=D.value)||void 0===n?void 0:n.vacancyEvent.type.id)===Hf.JobOffer?{jobOfferEndDate:e.jobOfferEndDate||null}:void 0),e.swtichJobDetails?{joinedDate:e.joinedDate||null,employmentStatus:(null===(c=e.employmentStatus)||void 0===c?void 0:c.id)||null,supervisorId:Number(null===(m=e.directSupervisor)||void 0===m?void 0:m.empNumber)||null,addressCountryCode:(null===(u=e.addressCountryCode)||void 0===u?void 0:u.cou_code)||(null===(p=e.addressCountryCode)||void 0===p?void 0:p.id)||"",addressStreet1:(null!==(v=e.addressStreet1)&&void 0!==v?v:"").trim()||"",addressStreet2:(null!==(h=e.addressStreet2)&&void 0!==h?h:"").trim()||"",addressCity:(null!==(g=e.addressCity)&&void 0!==g?g:"").trim()||"",addressProvince:"US"===((null===(b=e.addressCountryCode)||void 0===b?void 0:b.cou_code)||(null===(C=e.addressCountryCode)||void 0===C?void 0:C.id))?(null===(S=e.addressProvince)||void 0===S?void 0:S.province_code)||(null===(w=e.addressProvince)||void 0===w?void 0:w.id):(null!==(E=e.addressProvince)&&void 0!==E?E:"").trim()||"",addressZipCode:(null!==(k=e.addressZipCode)&&void 0!==k?k:"").trim()||""}:void 0),e.swtichSalaryDetails?{payGrade:e.payGrade?Number(null===(x=e.payGrade)||void 0===x?void 0:x.id):null,currency:e.currency?null===(A=e.currency)||void 0===A?void 0:A.currency_id:null,salaryComponentValues:e.salaryComponentValues.map((e=>{var t;return Object.assign(Object.assign({},e),{value:null===(t=e.value)||void 0===t?void 0:t.replaceAll(",","")})}))}:void 0);D.value.vacancyEvent.id?d.saveCandidateEvent(null===(T=f.value)||void 0===T?void 0:T.id,D.value.vacancyEvent.id,B).then((e=>{var t,a,i,l,n,c,m,u,p;if(ut.value=null,Z.value=!1,e.data.success){const v=e.data.data,h={candidateId:r.$stateParams.candidateId,vacancyId:s.value?s.value:""};d.getCandidate(h).then((e=>{const t=e.data.data;f.value&&(f.value.candidateStage=t.candidateStage,f.value.permittedToAddAsEmployee=t.permittedToAddAsEmployee)}));let g=null===(a=null===(t=f.value)||void 0===t?void 0:t.events)||void 0===a?void 0:a.findIndex((e=>e.id===v.id));g>-1?null===(l=null===(i=f.value)||void 0===i?void 0:i.events)||void 0===l||l.splice(g,1,v):1===(null===(c=null===(n=f.value)||void 0===n?void 0:n.events)||void 0===c?void 0:c.length)&&(null===(u=null===(m=f.value)||void 0===m?void 0:m.events)||void 0===u||u.splice(0,0,v));const y=(null===(p=f.value)||void 0===p?void 0:p.events)||[];He(y),N.value=!1,o(v)}})).catch((e=>{Z.value=!1,null===y||void 0===y||y.error({title:t(Ve),message:t(ke)}),a(e)})):a(e)}})),mt=e=>{ct(e).then((()=>{null===y||void 0===y||y.success({title:t(Ec),message:t(Se)})}))},ut=(0,i.ref)(null),pt=e=>{ut.value=e;const t=q.value;t&&(t.submitted=!1)},vt=()=>{N.value=!N.value},ht=e=>{_.value=e},gt=()=>{var e;te.onClickDownloadApplicationForm(null===(e=f.value)||void 0===e?void 0:e.id).catch((e=>{403===e.status?r.$state.go("403"):401===e.status?d.logout():null===y||void 0===y||y.error({title:t("Error"),message:t("Error on processing the request")})}))},yt=(e=[],t="")=>{d.getCandidatePastVacancyDetails(r.$stateParams.candidateId).then((o=>{j.value=o.data.data,e.length>0&&($e(t),je(t)),Object.values(o.data.data).forEach((e=>{var t;const o=[],a=e.answers;$.value.set(e.jobCandidateVacancy.id,{answer:null===(t=e.questionForm)||void 0===t?void 0:t.map((e=>{var t;return{id:e.id,name:e.name,order:e.order,questions:null===(t=e.questions)||void 0===t?void 0:t.map((e=>(e.type.id===jf||e.type.id===Uf?o.push({id:e.answerId,type:e.type.id,options:e.options}):o.push({id:e.answerId,type:e.type.id}),Object.assign(Object.assign({},e),{value:a[e.answerId]}))))}})),question:o})}))}))},ft=()=>Promise.all([d.getQuestionForm(r.$stateParams.candidateId),d.getQuestionFormAnswers(r.$stateParams.candidateId)]).then((e=>{O.value=[],R.value=[],L.value=e[0].data.data,F.value=e[1].data.data,z.value=L.value.map((e=>{var t;return{id:e.id,name:e.name,order:e.order,questions:null===(t=e.questions)||void 0===t?void 0:t.map((e=>(e.type.id===jf||e.type.id===Uf?O.value.push({id:e.answerId,type:e.type.id,options:e.options}):O.value.push({id:e.answerId,type:e.type.id}),Object.assign(Object.assign({},e),{value:F.value[e.answerId]}))))}})),M.value=z.value,R.value=O.value})).catch((e=>{403===e.status?r.$state.go("recruitment.candidates"):null===y||void 0===y||y.error({title:t(Ve),message:t(Ce)})})),bt=(0,i.computed)((()=>{var e,t;return`${null===(e=f.value)||void 0===e?void 0:e.id}${s.value}${null===(t=Q.value)||void 0===t?void 0:t.id}`})),Ct=(0,i.computed)((()=>{var e,t;return`${null===(e=f.value)||void 0===e?void 0:e.id}${null===(t=Q.value)||void 0===t?void 0:t.id}`})),St=()=>{Y.value=!0,Et()},wt=()=>{window.open(`${window.location.origin}${Le.value}`,"_blank")},Et=()=>{var e,t=null===(e=f.value)||void 0===e?void 0:e.id;t||(t=r.$stateParams.candidateId),d.getActionLogs(t).then((e=>{e.data&&(ae.value=e.data.data||[])}))},kt=e=>e.toLowerCase().split(" ").map((function(e){return e.replace(e[0],e[0].toUpperCase())})).join(" "),xt=(0,i.computed)((()=>{const e=ae.value.map((e=>({date:`${v(e.actionTime)} ${e.actionTime.split(" ")[1]}`,actionOwner:ge.getEmployeeName(e.actionOwnerName,"","",!1),action:t(kt(e.action)),actionDesc:e.actionDescription.trim().replace(/  +/g," ").replace(/\r |\n /g,"\r\n")})));return e})),Nt=(0,i.computed)((()=>{var e;return Object.assign(Object.assign({},f.value),{contactNumber:null===(e=f.value)||void 0===e?void 0:e.contactNo})})),At=e=>{f.value&&(f.value.notes=e)},Dt=e=>{f.value&&e&&(f.value.events=e,Ze(e,Pe.value))},Tt=()=>{Et()},Pt=()=>{const e=W.value;e&&e.getAttachmentList()},Vt=(e,o)=>{d.deleteCandidateComment(e.value.id).then((()=>{var a,i,l,n;const r=null===(i=null===(a=f.value)||void 0===a?void 0:a.notes)||void 0===i?void 0:i.findIndex((t=>t.id===e.value.id));r>-1&&(null===(n=null===(l=f.value)||void 0===l?void 0:l.notes)||void 0===n||n.splice(r,1)),o(),null===y||void 0===y||y.success({title:t(Ec),message:t(we)})}))},Bt=()=>{ne.value=(0,xu.x0)(6)},It=e=>{d.getEmployeeWizardStatus().then((t=>{e(t)})).catch((()=>{}))},Lt=()=>{const e=k.value.find((e=>e.vacancyEvent.type.id===Hf.JobOffer));e&&(D.value=e),It((e=>{re.value=!0,de.value=e.data.data.enabled||!1}))},Ft=e=>new Promise(((o,a)=>{var i,l,n,r,s,c,m,u,p,v,h,g,b,C,S,w,E;me.value=!0;const k=To.value&&e.directSupervisor&&"object"===typeof e.directSupervisor?[{supervisorId:null===(i=e.directSupervisor)||void 0===i?void 0:i.empNumber,reportingMethodId:null===(l=To.value)||void 0===l?void 0:l.id}]:null,x=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({candidateId:null===(n=f.value)||void 0===n?void 0:n.id,firstName:e.firstName},e.middleName?{middleName:e.middleName}:void 0),{lastName:e.lastName,email:e.email||"",joinedDate:e.joinedDate}),e.contactNumber?{contactNo:e.contactNumber}:void 0),e.swtichJobDetails?{supervisors:k}:void 0),e.swtichJobDetails?{employment_status_id:(null===(r=e.employmentStatus)||void 0===r?void 0:r.id)||null,street1:(null!==(s=e.addressStreet1)&&void 0!==s?s:"").trim()||"",street2:(null!==(c=e.addressStreet2)&&void 0!==c?c:"").trim()||"",city:(null!==(m=e.addressCity)&&void 0!==m?m:"").trim()||"",country:(null===(u=e.addressCountryCode)||void 0===u?void 0:u.cou_code)||(null===(p=e.addressCountryCode)||void 0===p?void 0:p.id)||"",province:"US"===((null===(v=e.addressCountryCode)||void 0===v?void 0:v.cou_code)||(null===(h=e.addressCountryCode)||void 0===h?void 0:h.id))?(null===(g=e.addressProvince)||void 0===g?void 0:g.province_code)||(null===(b=e.addressProvince)||void 0===b?void 0:b.id):(null!==(C=e.addressProvince)&&void 0!==C?C:"").trim()||"",emp_zipcode:(null!==(S=e.addressZipCode)&&void 0!==S?S:"").trim()||""}:void 0),e.swtichSalaryDetails?{pay_grade_id:(null===(w=e.payGrade)||void 0===w?void 0:w.id)||null,currency_id:(null===(E=e.currency)||void 0===E?void 0:E.currency_id)||null,salaryComponentValues:e.salaryComponentValues||null}:void 0);d.addEmployeeAsCandidate(x).then((e=>{var a;!1===(null===(a=f.value)||void 0===a?void 0:a.isHired)&&(f.value.isHired=!0),e&&e.data&&e.data.data&&e.data.data.empNumber&&e.data.data.isAccessible&&(Ie.value=e.data.data.empNumber),f.value&&(f.value.permittedToAddAsEmployee=!1),re.value=!1,null===y||void 0===y||y.success({title:t(Ec),message:t(be)}),o(e)})).catch((e=>a(e))).finally((()=>{me.value=!1}))})),zt=e=>{me.value=!0,d.getEmployees().then((t=>{const o=t.data.meta.nextEmployeeId;d.wizardCustomFieldAttachmentData().then((()=>{var t,a,i,l;let n="";(null===(a=null===(t=f.value)||void 0===t?void 0:t.vacancy)||void 0===a?void 0:a.vacancyId)&&(n=null===(l=null===(i=f.value)||void 0===i?void 0:i.vacancy)||void 0===l?void 0:l.vacancyId),d.getVacancy(n,{include:"Location,JobTitle"}).then((t=>{var a,i,l,n,r,s,c,m,u,p,v,h,g,y,b,C,S,w,E;const k=t.data.data,x=k.locationId,N=To.value&&e.directSupervisor&&"object"===typeof e.directSupervisor?[{supervisorId:e.directSupervisor.empNumber,reportingMethodId:null===(a=To.value)||void 0===a?void 0:a.id,supervisor:Object.assign(Object.assign({},e.directSupervisor),{termination_id:e.directSupervisor.terminationId||null,purged_at:null}),ReportingMethod:To.value}]:null,A=Object.assign(Object.assign({employee:Object.assign({firstName:e.firstName,lastName:e.lastName,middleName:e.middleName,locationId:x,joinedDate:e.joinedDate,terminationId:null,purged_at:null,deleted_at:null,emp_mobile:e.contactNumber,emp_oth_email:e.email,employeeId:"",autoGenerateEmployeeId:!0},e.swtichJobDetails?{city:(null!==(i=e.addressCity)&&void 0!==i?i:"").trim()||"",country:(null===(l=e.addressCountryCode)||void 0===l?void 0:l.cou_code)||(null===(n=e.addressCountryCode)||void 0===n?void 0:n.id)||"",emp_zipcode:(null!==(r=e.addressZipCode)&&void 0!==r?r:"").trim()||"",province:"US"===((null===(s=e.addressCountryCode)||void 0===s?void 0:s.cou_code)||(null===(c=e.addressCountryCode)||void 0===c?void 0:c.id))?(null===(m=e.addressProvince)||void 0===m?void 0:m.province_code)||(null===(u=e.addressProvince)||void 0===u?void 0:u.id):(null!==(p=e.addressProvince)&&void 0!==p?p:"").trim()||"",street1:(null!==(v=e.addressStreet1)&&void 0!==v?v:"").trim()||"",street2:(null!==(h=e.addressStreet2)&&void 0!==h?h:"").trim()||""}:void 0),employeeJobRecord:{job_title_id:null===(y=null===(g=f.value)||void 0===g?void 0:g.vacancy)||void 0===y?void 0:y.jobTitle.id,joined_date:e.joinedDate,employment_status_id:(null===(b=e.employmentStatus)||void 0===b?void 0:b.id)||null}},e.swtichSalaryDetails?{salary:{currency_id:null===(C=e.currency)||void 0===C?void 0:C.currency_id,pay_grade_id:null===(S=e.payGrade)||void 0===S?void 0:S.id,annual_basic_payment:null===(E=null===(w=e.salaryComponentValues)||void 0===w?void 0:w.find((e=>"1"===e.id)))||void 0===E?void 0:E.value,components:e.salaryComponentValues}}:void 0),e.swtichJobDetails&&To.value&&"object"===typeof e.directSupervisor?{supervisors:N}:void 0);d.customSessionDataWizardPut({data:A}).then((()=>{d.customSessionDataWizardGet().then((t=>{var a,i,l,n;const r={chkLogin:!1,firstName:e.firstName,lastName:e.lastName,middleName:e.middleName,locationId:x,employeeId:o,joinedDate:e.joinedDate},s={endpoint:"employees",method:"POST",data:r,params:{addCandidateAsEmployee:!0,candidateInitialData:Object.assign(Object.assign({employee:A.employee,employeeJobRecord:A.employeeJobRecord,candidateId:null===(a=f.value)||void 0===a?void 0:a.id},e.swtichJobDetails&&To.value&&e.directSupervisor&&"object"===typeof e.directSupervisor?{supervisors:[{supervisorId:e.directSupervisor.empNumber,reportingMethodId:null===(i=To.value)||void 0===i?void 0:i.id}]}:void 0),e.swtichSalaryDetails?{salary:{currency_id:(null===(l=e.currency)||void 0===l?void 0:l.currency_id)||null,pay_grade_id:(null===(n=e.payGrade)||void 0===n?void 0:n.id)||null,components:e.salaryComponentValues||[]}}:void 0)},extra:{employee:!0}};t.data.data.actions=[s],d.customSessionDataWizardPut(t.data).then((()=>{me.value=!1,window.location.href=window.location.origin+'/client/#/route/pim.wizard({"data": "{}", "redirectedFrom": "addCandidateAsEmployee"})'})).catch((()=>{me.value=!1}))})).catch((()=>{me.value=!1}))})).catch((()=>{me.value=!1}))})).catch((()=>{me.value=!1}))})).catch((()=>{me.value=!1}))})).catch((()=>{me.value=!1}))},Mt=e=>{de.value?zt(e):Ft(e)},Ot=()=>{Et()},Rt=e=>{ue.value=e},_t=(e,t)=>{pe.value=!0,ue.value&&(ue.value=e,ue.value&&(ue.value.rows=t)),$t(e),Ut(),jt(),qt(e)},$t=e=>{1==e.isDigitalSignEnabled?he.value=!0:he.value=!1},jt=()=>{no.value.isDigitalSignEnabled=ye.value&&he.value},Ut=()=>{!ye.value&&he.value?fe.value=!1:fe.value=!0},Zt=e=>{d.ping().then((()=>(0,A.mG)(this,void 0,void 0,(function*(){var t;const o=X.value,a={fileType:e,candidateId:r.$stateParams.candidateId,templateId:null===(t=ue.value)||void 0===t?void 0:t.id,content:o.documentContent.content,generateDocument:!0};d.exportModifiedDocuments(a).then((e=>{go.value=!1,Et(),window.open(`${window.location.origin}/api/recruitment/candidate/${r.$stateParams.candidateId}/candidateDocument/${e.data.data.id}`,"_self")}))})))).catch((e=>{403===e.status?r.$state.go("403"):401===e.status?d.logout():null===y||void 0===y||y.error({title:t("Error"),message:t("Error on processing the request")})}))},Ht=e=>{"confirm"===e&&(pe.value=!1,ue.value=void 0),ve.value=!1},qt=e=>{Xt.value=!0,d.getCandidateDocumentEmailDefaultValues(r.$stateParams.candidateId,{documentTemplateId:null===e||void 0===e?void 0:e.id}).then((t=>{var o,a,i,l,n,r,s,d,c,m,u,p,v;Yt.value={recipient:{to:(null===(a=null===(o=t.data.data)||void 0===o?void 0:o.recipient)||void 0===a?void 0:a.to)||[],cc:(null===(l=null===(i=t.data.data)||void 0===i?void 0:i.recipient)||void 0===l?void 0:l.cc)||[],replyTo:(null===(r=null===(n=t.data.data)||void 0===n?void 0:n.recipient)||void 0===r?void 0:r.replyTo)||[]},subject:(null===(s=t.data.data)||void 0===s?void 0:s.subject)||"",bodyText:(null===(d=t.data.data)||void 0===d?void 0:d.bodyText)||"",digitalSignContent:(null===(c=t.data.meta)||void 0===c?void 0:c.digitalSignContent)||""},Wt.value=null===(m=t.data.meta)||void 0===m?void 0:m.loggedInEmployee,Kt.value=null===(u=t.data.meta)||void 0===u?void 0:u.hiringManagers,Kt.value&&Kt.value.length>0&&(Qt.value=te.isEmployeeInList(Kt.value,Wt.value)),Jt.value=Wt.value&&!Qt.value,(null===(v=null===(p=t.data.meta)||void 0===p?void 0:p.missingTokens)||void 0===v?void 0:v.length)>0&&(Yt.value.missingTokens=t.data.meta.missingTokens,Yt.value.warning=ge.joinStrings(t.data.meta.missingTokens)),Yt.value.attachmentType=null===e||void 0===e?void 0:e.type,Yt.value.candidateDocumentId=null===e||void 0===e?void 0:e.id})).catch((e=>{403===e.status?r.$state.go("403"):401===e.status?d.logout():null===y||void 0===y||y.error({title:t("Error"),message:t("Error on processing the request")})})).finally((()=>{Xt.value=!1}))},Gt=(0,i.ref)(!1),Wt=(0,i.ref)(null),Kt=(0,i.ref)([]),Qt=(0,i.ref)(!1),Jt=(0,i.ref)(!1),Yt=(0,i.ref)(),Xt=(0,i.ref)(!1),eo=(0,i.ref)(!1),to=e=>{var o;Gt.value=!1,no.value.isDigitalSignEnabled&&(null===y||void 0===y||y.info({title:t(ES),message:t(kS)})),null===(o=te.sendCandidateDocumentEmailMapper(e,X,ao,Yt,r.$stateParams.candidateId,Wt.value,Qt.value,Kt.value))||void 0===o||o.then((e=>{d.exportModifiedDocuments(e).then((()=>{ao.value.to=null,ao.value.cc=null,ao.value.replyTo=null,go.value=!1,Et(),null===y||void 0===y||y.success({title:t(Ec),message:t(Me)})})).catch((e=>{var o,a;422===e.status?null===y||void 0===y||y.error({title:t(Ve),message:t(null===(a=null===(o=e.data)||void 0===o?void 0:o.errors[0])||void 0===a?void 0:a.content)}):403===e.status?r.$state.go("403"):401===e.status?d.logout():null===y||void 0===y||y.error({title:t(Ve),message:t(Be)})})).finally((()=>eo.value=!1))}))},oo=(0,i.ref)(),ao=(0,i.ref)({to:null,cc:null,replyTo:null}),io=(e,t)=>{ao.value[t]=e},lo=(e,t)=>{te.onKeypressAddEmailAfterValidate(e,t,oo,ao)},no=(0,i.ref)({maxAttachmentSize:0,allowedImageTypes:[],isDigitalSignEnabled:!1}),ro=(0,i.ref)(),so=(0,i.ref)(),co=()=>{null===o||void 0===o||o.then((e=>{no.value.maxAttachmentSize=e.max_attachment_size,no.value.allowedImageTypes=e.allowed_image_types,p.value=e.max_attachment_size,so.value=e.allowed_image_types,e.recruitment&&e.recruitment.isDigitalSignEnabledCandidateDocuments&&(ye.value=e.recruitment.isDigitalSignEnabledCandidateDocuments)}))},mo=()=>{y.warn({title:t(xc),message:t(Ne)})},uo=(e,o)=>t(e,{[o]:Math.round(ro.value)}),po=(0,i.computed)((()=>uo("File Size Should Be Less than {{maxSize}}MB","maxSize"))),vo=()=>{y.warn({title:t(xc),message:po})},ho=()=>ye.value&&he.value?"Send E-signature Request":"Email Document",go=(0,i.ref)(!1),yo=e=>{go.value=e},fo=()=>{Ee.value=!0},bo=()=>{Ee.value=!1},Co=e=>{d.updateCandidateProfilePicture(r.$stateParams.candidateId,r.$stateParams.vacancyId,e.imageDetails).then((e=>{f.value&&(f.value.candidatePicture=e.data.data.candidatePicture,Ee.value=!1,y.success({title:t(Ec),message:t(Se)}))}))},So=()=>{d.removeCandidateProfilePicture(r.$stateParams.candidateId,r.$stateParams.vacancyId).then((e=>{e&&f.value&&(f.value.candidatePicture=void 0,Ee.value=!1,y.success({title:t(Ec),message:t(we)}))}))},wo=()=>{go.value?ve.value=!0:Ht("confirm")},Eo=(0,i.ref)([]),ko=new Promise(((e,t)=>{d.getPayGrades().then((t=>{Eo.value=t.data.data.map((e=>Object.assign(Object.assign({},e),{label:e.name}))),e(Eo.value)})).catch((e=>t(e)))})),xo=(0,i.ref)([]),No=new Promise(((e,t)=>{d.getCurrencyTypes().then((t=>{xo.value=t.data.data.map((e=>Object.assign(Object.assign({},e),{id:e.currency_id,label:e.currency_name}))),e(xo.value)})).catch((e=>t(e)))})),Ao=(0,i.ref)([]),Do=new Promise(((e,t)=>{d.getEmploymentStatus().then((t=>{Ao.value=t.data.data.map((e=>Object.assign(Object.assign({},e),{label:e.name}))),e(Ao.value)})).catch((e=>t(e)))})),To=(0,i.ref)(null),Po=new Promise(((e,t)=>{d.getEmployeeReportingMethods().then((t=>{To.value=te.getDirectReportingMethod(t.data.data),e(To.value)})).catch((e=>t(e)))})),Vo=e=>(0,A.mG)(this,void 0,void 0,(function*(){P.value&&P.value.resolve(),P.value=T();const t=P.value.promise,o=yield new Promise(((o,a)=>{d.getDirectSupervisors(e,t).then((e=>{const t=e.data.data.map((e=>{const t=Object.assign(Object.assign({},e),{id:e.empNumber,label:ge.getEmployeeName(e.firstName,e.middleName||"",e.lastName||"",Boolean(null===e||void 0===e?void 0:e.termination_id))});return t}));o(t)})).catch((()=>{a([])}))}));return o})),Bo=(0,i.ref)([]),Io=new Promise(((e,t)=>{d.getCountries().then((t=>{Bo.value=t.data.data.map((e=>Object.assign(Object.assign({},e),{id:e.cou_code,label:e.cou_name})))||[],e(Bo.value)})).catch((e=>t(e)))})),Lo=(0,i.ref)([]),Fo=new Promise(((e,t)=>{d.getUSProvinces().then((t=>{Lo.value=t.data.data.map((e=>Object.assign(Object.assign({},e),{id:e.province_code,label:e.province_name})))||[],e(Lo.value)})).catch((e=>t(e)))})),zo=e=>{He(e.events||[],(()=>{const e=k.value.find((e=>e.vacancyEvent.type.id===Hf.JobOffer));e&&(D.value=e)})),N.value=!0,We()},Mo=(0,i.ref)(!1);(0,i.onMounted)((()=>{Et(),co(),Promise.all([Qe,Fo,Io,No,ko,et,Do,Po]).then((()=>{Mo.value=!0})).catch((()=>{Mo.value=!1}))}));const Oo=()=>{ft(),yt(),Ue(!0,(()=>{}))};return Oo(),(0,i.onUnmounted)((()=>{null===y||void 0===y||y.clearAll()})),{tabs:w,candidate:f,candidateName:Te,candidateVacancy:Pe,profileImage:Fe,profileImageForModal:ze,setDefaultProfilePic:De,profileImageBorderColors:Oe,vacancies:S,vacancyId:s,onCandidateUpdate:qe,http:d,dataGroupPermissions:h,hasAuditLogReadPermissions:g,quickSearchButtonProps:a,quickSearchButtonStyle:l,selectedCandidate:C,getMatchingCandidates:Je,selectCandidate:Ye,switchCandidate:Xe,isLoading:x,candidateEventData:E,candidateLatestEventData:k,updateCandidateEvent:Ze,onClickEventDetails:Ge,onClickEdit:Ke,editCandidatesNoteModalState:N,selectedHistoryStage:D,editCandidateNote:mt,toggleEditCandidateNote:vt,commentGroups:V,timezones:I,addNotes:at,noteHasError:it,updateNotes:rt,deleteNotes:st,deleteModalState:_,setDeleteCandidatesModalVisiblity:ht,onClickDownloadApplicationForm:gt,deleteNoteConfirmationModalAction:dt,updatingCandidateEvent:Z,questionFormWithAnswers:z,questionIdsWithTypes:O,commentHasError:H,editCandidateNoteModal:q,profileNote:G,attachmentListRef:W,newCommentInput:pt,getRefreshKey:bt,resumeNoteGroups:B,setNotes:At,setEventNotes:Dt,deleteResumeNotes:Vt,candidatePastVacancies:K,selectedVacancyForEvents:Q,dynamicKey:ne,selectVacancyForEvents:Re,profileResumeRef:J,getRefreshKeyForHistory:Ct,isCurrentVacancySelected:oe,showViewRecentReports:Y,auditLogsTable:ie,auditLogsHeaders:n,auditLogList:ae,auditLogs:xt,getActionLogModal:St,onUpdateNotes:Tt,onUpdateDocumentList:Pt,changeCurrentTab:Bt,createDocumentTable:le,isDocumentTemplateFound:b,clickLabel:Lt,showAddAsEmployeeModal:re,empWizardEnabled:de,addingAsAnEmployee:me,addAsEmployeeModalOnConfirm:Mt,candidateUpdatedObj:Nt,onSaveAttachment:Ot,onPreviewDocument:_t,onPreviewDocumentEditTokens:Rt,viewDocumentContent:ue,documentPreviewMode:pe,downloadDocumentTemplate:Zt,employeeProfileLink:Le,gotToEmployeeProfile:wt,docTemplatePreview:X,showGoBackConfirmation:ve,goBackOnConfirm:Ht,emailDocumentModalState:Gt,emailDocumentDefaultData:Yt,emailDocumentDefaultLoading:Xt,sendCandidateDocumentEmail:to,onUpdateSearchTerm:io,onUpdateemailDocumentModal:lo,getCandidateDocumentEmailDefaultValues:qt,emailDocumentModal:oo,settingsObj:no,tinymceErrrorImageSize:vo,tinymceErrrorImageType:mo,getInitialDocContentChange:yo,hasDocContentChanged:go,exitDocTemplateMode:wo,loggedInEmployeeData:Wt,showSenderNameSelector:Jt,payGrades:Eo,currencyTypes:xo,employmentStatus:Ao,getMatchingDirectSupervisors:Vo,allCountries:Bo,allUSProvinces:Lo,showEditJobOfferModal:zo,getOldStageId:Ae,sendEmailButtonLabel:ho,showSendEmailButton:fe,jobOfferEssentialDetailsLoaded:Mo,openEmployeeProfileModal:fo,showProfileModal:Ee,maxAttachmentSize:p,allowedImageTypes:so,profileModalConfirmAction:Co,profilePhotoDeleteAction:So,profileModalCloseAction:bo,hasEditPermission:xe}}});const qx=(0,Re.Z)(Hx,[["render",kf],["__scopeId","data-v-5d22d6f5"]]);var Gx=qx;function Wx(e,t,o,a,l,n){const r=(0,i.resolveComponent)("leave-form"),s=(0,i.resolveComponent)("default-layout");return(0,i.openBlock)(),(0,i.createBlock)(s,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{"application-type":"assign"})])),_:1})}const Kx={class:"leave-form"};function Qx(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-schema-form"),s=(0,i.resolveComponent)("form-card"),d=(0,i.resolveComponent)("insufficient-leave-balance-confirmation-modal"),c=(0,i.resolveComponent)("overlapping-leave-modal"),m=(0,i.resolveComponent)("leave-balance-modal");return(0,i.openBlock)(),(0,i.createElementBlock)("div",Kx,[(0,i.createVNode)(s,{"show-divider":e.isAssign},{title:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.pageTitle)),1)])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(r,(0,i.mergeProps)({schema:e.schema,model:e.model,"onUpdate:model":t[0]||(t[0]=t=>e.model=t)},e.$attrs,{onSubmitValid:e.checkLeaveBalanceAndAssignLeave}),null,16,["schema","model","onSubmitValid"])])),_:1},8,["show-divider"]),e.showInsufficientLeaveBalanceConfirmationModal?((0,i.openBlock)(),(0,i.createBlock)(d,{key:0,style:{width:"450px"},onConfirmationModalAction:t[1]||(t[1]=t=>e.insufficientLeaveBalanceConfirmationModalAction(t)),onConfirmationLinkClickAction:e.showLeaveBalanceModal,"total-amount":e.checkedBalanceTotalAmount},null,8,["onConfirmationLinkClickAction","total-amount"])):(0,i.createCommentVNode)("",!0),e.showOverlappingLeaveModal?((0,i.openBlock)(),(0,i.createBlock)(c,{key:1,style:{width:"750px"},onConfirmationModalAction:t[2]||(t[2]=t=>e.overlappingLeaveModalAction(t)),"leave-details":e.overlappingLeaveData},null,8,["leave-details"])):(0,i.createCommentVNode)("",!0),e.displayLeaveBalanceModal?((0,i.openBlock)(),(0,i.createBlock)(m,{key:2,style:{width:"750px"},"application-type":e.applicationType,"leave-type-id":e.leaveBalanceModalData.leaveTypeId,"emp-number":e.leaveBalanceModalData.empNumber,"max-period-offset":e.allowedLeavePeriodOffset,"show-projected-balance":e.showProjectedBalance,settings:e.leaveAmountSettings,onConfirmationModalAction:t[3]||(t[3]=t=>e.leaveBalanceModalAction(t))},null,8,["application-type","leave-type-id","emp-number","max-period-offset","show-projected-balance","settings"])):(0,i.createCommentVNode)("",!0)])}const Jx={class:"oxd-input-field-bottom-space"},Yx={class:"oxd-form-info-field"},Xx={class:"oxd-input-field-error-message oxd-input-group__message"};function eN(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-group");return(0,i.openBlock)(),(0,i.createElementBlock)("div",Jx,[(0,i.createVNode)(r,{label:e.label},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Yx,[(0,i.createTextVNode)((0,i.toDisplayString)(e.value)+" ",1),(0,i.renderSlot)(e.$slots,"default",{},void 0,!0)])])),_:3},8,["label"]),(0,i.createElementVNode)("div",Xx,(0,i.toDisplayString)(e.message),1)])}var tN=(0,i.defineComponent)({name:"oxd-form-info-field",components:{"oxd-input-group":sl.Z},props:{value:{type:String},label:{type:String},rules:{type:Array,default:()=>[]}},setup(e){const t=(0,i.ref)(null),o=(0,i.ref)(!1),a=(0,i.toRef)(e,"rules"),{message:l,startWatcher:n}=(0,GC.Z)({fieldLabel:e.label?e.label:"",rules:a,modelValue:t,isDisabled:o,isDirty:!1,onReset:Promise.resolve});return n(),{message:l}}});const oN=(0,Re.Z)(tN,[["render",eN],["__scopeId","data-v-7a7eb820"]]);var aN=oN;function iN(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,{type:"date",locale:e.locale,"io-format":e.ioFormat,"display-format":e.displayFormat,placeholder:e.placeholder,events:e.events,onSelectYear:e.onSelectYear,"onDateselect:opened":e.onDatePickerOpen,"onUpdate:modelValue":e.onUpdateModelValue,modelValue:e.modelValue},null,8,["locale","io-format","display-format","placeholder","events","onSelectYear","onDateselect:opened","onUpdate:modelValue","modelValue"])}var lN=(0,i.defineComponent)({name:"employee-date-input",components:{"oxd-input-field":lo.Z},emits:["update:modelValue"],props:{modelValue:{type:String,default:""},empNumber:{type:String,required:!0}},setup(e,t){const{jsSavingFormat:o,jsDisplayFormat:a,userFormat:l,locale:n}=Im(),{weekendsWithholidays:r,fetchWeekendsAndHolidays:s}=Mm(),d=e=>{t.emit("update:modelValue",e)},c=({year:t})=>(0,A.mG)(this,void 0,void 0,(function*(){yield s(t,e.empNumber)})),m=()=>{u()},u=()=>{const t=ee(e.modelValue,o),a=null===t||void 0===t?void 0:t.getFullYear();s(a,e.empNumber)};return s(),(0,i.watch)((()=>[e.empNumber,e.modelValue]),(()=>{u()})),{events:r,onSelectYear:c,onUpdateModelValue:d,onDatePickerOpen:m,locale:n,placeholder:l,ioFormat:o,displayFormat:a}}});const nN=(0,Re.Z)(lN,[["render",iN]]);var rN=nN;const sN={key:0,class:"auto-complete-selected-img"},dN=["src"],cN={class:"employee-id"},mN={key:0,class:"auto-complete-img"},uN=["src"],pN={class:"options-emplyee-label"},vN={class:"options-emplyee-id"};function hN(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,{type:"autocomplete",createOptions:e.options,placeholder:e.$t("Type for hints..."),clear:!1,autocomplete:"off"},{beforeSelected:(0,i.withCtx)((({data:e})=>[e.image?((0,i.openBlock)(),(0,i.createElementBlock)("span",sN,[(0,i.createElementVNode)("img",{src:e.image},null,8,dN)])):(0,i.createCommentVNode)("",!0)])),afterSelected:(0,i.withCtx)((({data:e})=>[(0,i.createElementVNode)("span",cN,(0,i.toDisplayString)(e.employeeId),1)])),option:(0,i.withCtx)((({data:e})=>[e.image?((0,i.openBlock)(),(0,i.createElementBlock)("span",mN,[(0,i.createElementVNode)("img",{src:e.image},null,8,uN)])):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("span",pN,(0,i.toDisplayString)(e.label),1),(0,i.createElementVNode)("div",vN,(0,i.toDisplayString)(e.employeeId),1)])),_:1},8,["createOptions","placeholder"])}var gN=(0,i.defineComponent)({name:"EmployeeAutoComplete",components:{"oxd-input-field":lo.Z},emits:["update:searchTerm"],props:{permissionType:{type:String},searchFunction:{type:Function}},setup(e){const t=(0,i.getCurrentInstance)(),o=new Da(t),a=t=>new Promise((a=>{o.filterEmployees(t,e.permissionType).then((e=>{let t=[];e.data&&(t=e.data.data.map((e=>{var t,o,a;return{id:e.empNumber,label:ge.getEmployeeName(e.firstName,e.middleName,e.lastName,Boolean(e.termination_id)),employeeId:e.employeeId,image:(null===(t=e.photo)||void 0===t?void 0:t.type)&&(null===(o=e.photo)||void 0===o?void 0:o.image)?ge.base64ImageConvertion(e.photo.type,null===(a=e.photo)||void 0===a?void 0:a.image):"images/default.png"}}))),a(t)}))})),l=t=>e.searchFunction?e.searchFunction(t):a(t);return{options:l}}});const yN=(0,Re.Z)(gN,[["render",hN],["__scopeId","data-v-c90b83e6"]]);var fN=yN;class bN{getLeaveAmountSettings(e){var t;const o=null===(t=e.leave)||void 0===t?void 0:t.leave_amount_formatting_configs;let a=2,i=2,l=2,n="HH:MM";return"object"===typeof o&&(void 0!==o.edit_mode_format&&o.edit_mode_format&&(n=o.edit_mode_format),void 0!==o.hour_decimals&&o.hour_decimals&&(i=o.hour_decimals),void 0!==o.minute_decimals&&o.minute_decimals&&(a=o.minute_decimals),void 0!==o.day_decimals&&o.day_decimals&&(l=o.day_decimals)),{hourDecimals:i,minuteDecimals:a,dayDecimals:l,editModeFormat:n}}getNumberOfDecimals(e,t){return e?t.hourDecimals:t.dayDecimals}formatAmount(e,t,o){const a=this.getNumberOfDecimals(t,o),i=t?(parseFloat(e)/60).toString():e;return parseFloat(i).toFixed(a)}}const CN={key:0,class:"leave-type-ribbon-radio-select-container"},SN={class:"image-with-progress"},wN={style:{display:"flex","flex-direction":"column",overflow:"hidden"}},EN={key:0,class:"ribbon-radio-selector"},kN={key:1,class:"label-tiles"},xN={key:0,class:"oxd-info-drop-down-selector"},NN={class:"label-tile-wrapper wrapper-1"},AN={class:"label-tile-content"},DN={key:0,class:"empty-leave-types"};function TN(e,t,o,a,l,n){const r=(0,i.resolveComponent)("image-progress"),s=(0,i.resolveComponent)("ribbon-radio-selector"),d=(0,i.resolveComponent)("entitlement-item"),c=(0,i.resolveComponent)("oxd-info-drop-down"),m=(0,i.resolveComponent)("oxd-link"),u=(0,i.resolveComponent)("oxd-loader");return(0,i.openBlock)(),(0,i.createBlock)(i.Transition,{name:"transition-fade-down"},{default:(0,i.withCtx)((()=>[e.empNumber?((0,i.openBlock)(),(0,i.createElementBlock)("div",CN,[(0,i.createElementVNode)("div",SN,[(0,i.createVNode)(r,{"count-number":e.displayProfileCountNumber,"count-text":e.displayProfileCountText,"number-of-decimals":e.displayProfileCountDecimals,percentage:e.displayProfilePercentage,"profile-pic":e.displayProfilePic,"show-text":!e.onLoading&&!e.isNoLeaveTypesAssgined},null,8,["count-number","count-text","number-of-decimals","percentage","profile-pic","show-text"])]),(0,i.createElementVNode)("div",wN,[e.onLoading||e.isNoLeaveTypesAssgined?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",EN,[(0,i.createVNode)(s,{"default-selected-id":e.leaveTypeId,items:e.options,"onUpdate:ribbonSelect":e.onInput},null,8,["default-selected-id","items","onUpdate:ribbonSelect"])])),e.onLoading||e.isNoLeaveTypesAssgined?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",kN,[e.entitlementsOptions&&e.entitlementsOptions.length>0?((0,i.openBlock)(),(0,i.createElementBlock)("div",xN,[(0,i.createVNode)(c,{modelValue:e.infoBoxModelValue,options:e.entitlementsOptions,"onUpdate:modelValue":e.updateInfoBoxModelValue,disabled:1===e.entitlementsOptions.length},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{description:e.infoBoxModelValue.description,label:e.infoBoxModelValue.label,subHeader:e.infoBoxModelValue.subHeader,isHeader:!0},null,8,["description","label","subHeader"])])),option:(0,i.withCtx)((e=>[(0,i.createVNode)(d,{description:e.data.description,label:e.data.label,subHeader:e.data.subHeader},null,8,["description","label","subHeader"])])),_:1},8,["modelValue","options","onUpdate:modelValue","disabled"])])):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("div",NN,[(0,i.createElementVNode)("div",AN,[(0,i.createVNode)(m,{"icon-name":"oxd-view-calendar","icon-size":"extra-large",text:e.$t("View Leave Balance"),onLinkClick:t[0]||(t[0]=t=>e.$emit("linkClick"))},null,8,["text"])])])]))]),!e.onLoading&&e.isNoLeaveTypesAssgined?((0,i.openBlock)(),(0,i.createElementBlock)("div",DN,(0,i.toDisplayString)(e.$t("This employee doesnt have any leave types")),1)):(0,i.createCommentVNode)("",!0),e.onLoading?((0,i.openBlock)(),(0,i.createBlock)(u,{key:1,withContainer:!0,class:"oxd-loader-text-view"})):(0,i.createCommentVNode)("",!0)])):(0,i.createCommentVNode)("",!0)])),_:1})}const PN={key:0,class:"bottom-text"};function VN(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-progress-circle");return(0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"box",style:(0,i.normalizeStyle)(e.componentStyles)},[(0,i.createVNode)(r,{radius:e.radius,"stroke-width":e.strokeWidth,value:e.percentage},{progressCircleInnerContent:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",{class:"img-tag",style:(0,i.normalizeStyle)({backgroundImage:`url(${e.profilePicDisplay})`})},null,4)])),progressCircleBottomContent:(0,i.withCtx)((()=>[e.showText?((0,i.openBlock)(),(0,i.createElementBlock)("div",PN,(0,i.toDisplayString)(e.displayText),1)):(0,i.createCommentVNode)("",!0)])),_:1},8,["radius","stroke-width","value"])],4)}var BN=(0,i.defineComponent)({name:"imageProgress",components:{"oxd-progress-circle":US.Z},props:{profilePic:{type:String,required:!0},countText:{type:String,required:!0},countNumber:{type:Number,required:!0},numberOfDecimals:{type:Number,required:!1},percentage:{type:Number,required:!0},showText:{type:Boolean,default:!1},radius:{type:Number,default:70},strokeWidth:{type:Number,default:12}},setup(e){const t=ce(),o=(0,i.computed)((()=>{const o=e.numberOfDecimals?e.numberOfDecimals:2;return t("{{leaveAmount}} {{leaveUnit}} Utilized",{leaveAmount:parseFloat(e.countNumber.toString()).toFixed(o),leaveUnit:t(e.countText)})})),a=(0,i.computed)((()=>e.profilePic));return{displayText:o,profilePicDisplay:a}}});const IN=(0,Re.Z)(BN,[["render",VN],["__scopeId","data-v-75e7fece"]]);var LN=IN;const FN={class:"wrapper"};function zN(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon"),s=(0,i.resolveComponent)("tile-card");return(0,i.openBlock)(),(0,i.createElementBlock)("div",FN,[(0,i.withDirectives)((0,i.createElementVNode)("div",{class:"arrow-indicator left-arrow",onClick:t[0]||(t[0]=(...t)=>e.scrollSliderLeft&&e.scrollSliderLeft(...t)),onKeyup:t[1]||(t[1]=(0,i.withKeys)(((...t)=>e.scrollSliderLeft&&e.scrollSliderLeft(...t)),["enter"]))},[(0,i.createVNode)(r,{name:"oxd-arrow-left",size:"xxx-small"})],544),[[i.vShow,!e.hideArrowsWithoutCheckingConditions&&e.showArrows&&e.showLeftArrow]]),(0,i.createElementVNode)("div",{id:"tileSlider",ref:"tileSlider",class:"tile-slider",style:(0,i.normalizeStyle)({width:e.clientWidthCalculated?e.newClientWidth+"px":"100%"})},[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.items,((o,a)=>((0,i.openBlock)(),(0,i.createBlock)(s,{"header-text":o.title,"number-text":o.number,"number-of-decimals":o.numberOfDecimals,"sub-text":o.subText,"tooltip-flow":e.formatTooltipFlow(a,e.items),colour:o.colour?o.colour:"",key:o.id,onClick:t=>e.selected(o),onKeyup:(0,i.withKeys)((t=>e.selected(o)),["enter"]),active:e.selectedLeaveTyeId===o.id,focus:e.focusedLeaveTyeId===o.id,tabindex:"0",onFocusin:t=>e.onItemHover(o),onFocusout:t[2]||(t[2]=t=>e.onItemHoverOut())},null,8,["header-text","number-text","number-of-decimals","sub-text","tooltip-flow","colour","onClick","onKeyup","active","focus","onFocusin"])))),128))],4),(0,i.withDirectives)((0,i.createElementVNode)("div",{class:"arrow-indicator right-arrow",onClick:t[3]||(t[3]=(...t)=>e.scrollSliderRight&&e.scrollSliderRight(...t)),onKeyup:t[4]||(t[4]=(0,i.withKeys)(((...t)=>e.scrollSliderRight&&e.scrollSliderRight(...t)),["enter"])),id:"rightArrow"},[(0,i.createVNode)(r,{name:"oxd-arrow-right",size:"xxx-small"})],544),[[i.vShow,!e.hideArrowsWithoutCheckingConditions&&e.showArrows&&e.showRightArrow]])])}const MN=["tooltip","flow"],ON={key:1,class:"tile-header"},RN={class:"tile-number"},_N={class:"tile-help-text"};function $N(e,t,o,a,l,n){return(0,i.openBlock)(),(0,i.createElementBlock)("div",{class:(0,i.normalizeClass)(["tile-card",e.classObject]),style:(0,i.normalizeStyle)(e.componentStyles)},[e.displayHeaderText&&e.displayHeaderText.length>15?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,class:"tile-header",tooltip:e.displayHeaderText,flow:e.tooltipFlow},(0,i.toDisplayString)(e.displayHeaderText.substring(0,12)+"..."),9,MN)):((0,i.openBlock)(),(0,i.createElementBlock)("div",ON,(0,i.toDisplayString)(e.displayHeaderText),1)),(0,i.createElementVNode)("div",RN,(0,i.toDisplayString)(e.displayNumberText),1),(0,i.createElementVNode)("div",_N,(0,i.toDisplayString)(e.displaySubText),1)],6)}var jN=(0,i.defineComponent)({name:"tileCard",props:{headerText:{type:String,required:!0},numberText:{type:String,required:!0},numberOfDecimals:{type:Number,required:!1},subText:{type:String,required:!0},active:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},tooltipFlow:{type:String,default:"bottom"},colour:{type:String,default:""}},setup(e){const t=ce(),o=e.numberOfDecimals?e.numberOfDecimals:2,a=(0,i.computed)((()=>t(e.headerText))),l=(0,i.computed)((()=>new Intl.NumberFormat("en-US",{minimumFractionDigits:o}).format(Number(e.numberText)))),n=(0,i.computed)((()=>"("+t(e.subText)+")")),r=(0,i.computed)((()=>({"selected-tile":e.active,"unselected-tile":!e.active,"tile-focused":e.focus,"custom-colour-defined":e.colour}))),s=(0,i.computed)((()=>({"--dynamic-tile-colour":e.colour?"#"+e.colour:""})));return{displayHeaderText:a,displayNumberText:l,displaySubText:n,classObject:r,componentStyles:s}}});const UN=(0,Re.Z)(jN,[["render",$N],["__scopeId","data-v-1116825e"]]);var ZN=UN,HN=(0,i.defineComponent)({name:"ribbonRadioSelector",components:{"tile-card":ZN,"oxd-icon":In.Z},props:{items:{type:Array,default:()=>[],required:!0},hideArrowsWithoutCheckingConditions:{type:Boolean,default:!1,required:!1},defaultSelectedId:{type:Number,required:!1},tooltipFlowFunction:{type:Function}},setup:function(e,t){const o=(0,i.ref)(0),a=(0,i.ref)(0),l=(0,i.ref)(0),n=(0,i.ref)(0),r=(0,i.ref)(0),s=(0,i.ref)(0),d=(0,i.ref)(!1),c=(0,i.ref)(!1),m=(0,i.ref)(0),u=(0,i.ref)(null);let p,v,h=!1;(0,i.onUpdated)((()=>{null===u.value||c.value||(l.value=u.value.clientWidth,a.value=u.value.childElementCount,u.value.firstElementChild&&(o.value=u.value.firstElementChild.clientWidth,u.value.firstElementChild.className.includes("selected-tile")&&(o.value-=10),s.value=(o.value+20)*a.value),m.value=Math.floor(l.value/(o.value+20)),r.value=(o.value+20)*m.value,n.value=m.value*(o.value+20),d.value=!0,c.value=!0,a.value>0&&(b.value=(o.value+20)*a.value>l.value,S.value=!!b.value))}));const g=()=>{if(e.defaultSelectedId){if(e.defaultSelectedId>0){let t=e.items.filter((function(t){return t.id==e.defaultSelectedId}));1==t.length?w(t[0]):w(e.items[0])}}else w(e.items[0])};(0,i.onMounted)((()=>{g(),u.value&&(u.value.addEventListener("scroll",B),u.value.addEventListener("mousedown",P),u.value.addEventListener("touchstart",P),u.value.addEventListener("mousemove",V),u.value.addEventListener("touchmove",V),u.value.addEventListener("mouseleave",T),u.value.addEventListener("mouseup",T),u.value.addEventListener("touchend",T))})),(0,i.onUnmounted)((()=>{u.value&&(u.value.removeEventListener("scroll",B),u.value.removeEventListener("mousedown",P),u.value.removeEventListener("touchstart",P),u.value.removeEventListener("mousemove",V),u.value.removeEventListener("touchmove",V),u.value.removeEventListener("mouseleave",T),u.value.removeEventListener("mouseup",T),u.value.removeEventListener("touchend",T))}));const y=(0,i.ref)(0),f=(0,i.ref)(0),b=(0,i.ref)(!1),C=(0,i.ref)(!1),S=(0,i.ref)(!1),w=e=>{y.value=null===e||void 0===e?void 0:e.id,t.emit("update:ribbonSelect",e)},E=(t,o)=>e.tooltipFlowFunction?e.tooltipFlowFunction(t,o):0===t?"right":t===o.length-1?"left":"bottom",k=e=>{f.value=e.id},x=()=>{f.value=0},N=()=>{u.value&&(u.value.scrollLeft=u.value.scrollLeft-(o.value+20))},D=()=>(0,A.mG)(this,void 0,void 0,(function*(){u.value&&(u.value.scrollLeft=u.value.scrollLeft+(o.value+20))})),T=()=>{var e;h=!1,null===(e=u.value)||void 0===e||e.classList.remove("active"),setTimeout((()=>{var e;if(u.value){let t=(null===(e=u.value)||void 0===e?void 0:e.scrollLeft)%(o.value+20);t<.3*(o.value+20)?u.value.scrollLeft-=t:u.value.scrollLeft+=o.value+20-t}}),500)},P=e=>{var t;h=!0,null===(t=u.value)||void 0===t||t.classList.add("active"),u.value&&(p=e.pageX||e.touches[0].pageX-u.value.offsetLeft,v=u.value.scrollLeft)},V=e=>{if(h&&(e.preventDefault(),u.value)){const t=e.pageX||e.touches[0].pageX-u.value.offsetLeft,o=t-p;u.value.scrollLeft=v-o}},B=()=>{if(u.value){const e=u.value.scrollWidth-u.value.clientWidth;C.value=u.value.scrollLeft>0,S.value=u.value.scrollLeft<e}};return(0,i.watch)((()=>[e.items]),(()=>{e.items.length>0&&g()})),{selectedLeaveTyeId:y,focusedLeaveTyeId:f,selected:w,onItemHover:k,onItemHoverOut:x,showArrows:b,showLeftArrow:C,showRightArrow:S,scrollSliderLeft:N,scrollSliderRight:D,clientWidthCalculated:d,newClientWidth:n,tileSlider:u,formatTooltipFlow:E}}});const qN=(0,Re.Z)(HN,[["render",zN],["__scopeId","data-v-6ff366bf"]]);var GN=qN;const WN={class:"oxd-link-container"},KN=["href"];function QN(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon");return(0,i.openBlock)(),(0,i.createElementBlock)("div",WN,[e.iconName?((0,i.openBlock)(),(0,i.createBlock)(r,{key:0,name:e.iconName,size:e.iconSize,class:"oxd-link-icon"},null,8,["name","size"])):(0,i.createCommentVNode)("",!0),e.link?((0,i.openBlock)(),(0,i.createElementBlock)("a",(0,i.mergeProps)({key:1,href:e.link,class:"oxd-link"},e.$attrs),(0,i.toDisplayString)(e.$t(e.text)),17,KN)):((0,i.openBlock)(),(0,i.createElementBlock)("a",(0,i.mergeProps)({key:2,href:"",onClick:t[0]||(t[0]=(0,i.withModifiers)((t=>e.$emit("linkClick")),["prevent"])),class:"oxd-link"},e.$attrs),(0,i.toDisplayString)(e.$t(e.text)),17))])}var JN=(0,i.defineComponent)({name:"oxd-link",inheritAttrs:!1,components:{"oxd-icon":In.Z},props:{text:{type:String,required:!0},link:{type:String,required:!1},iconName:{type:String,required:!1},iconSize:{type:String,default:"extra-small"}},emits:["linkClick"],setup(){const e=ce();return{$t:e}}});const YN=(0,Re.Z)(JN,[["render",QN],["__scopeId","data-v-5513178c"]]);var XN=YN;class eA{isActionAllowed(e,t,o,a){return new Promise((i=>{const l={workflowName:e,workflowState:t,workflowAction:o,entities:a};this.getNgService().webservice.call("workflowPermissions","GET",[],l,void 0,!1).then((e=>{i(Boolean(e.data.data.allowed))})).catch((()=>{i(!1)}))}))}getNgService(){var e;return null===(e=(0,i.getCurrentInstance)())||void 0===e?void 0:e.appContext.config.globalProperties.ngServices}}const tA="leave",oA="INITIAL",aA="ASSIGN",iA={pageTitle:"Assign Leave",saveSuccess:"Successfully Assigned",saveError:"Failed to Assign"},lA={pageTitle:"Apply Leave",saveSuccess:"Successfully Submitted",saveError:"Failed to Submit"};class nA extends za{constructor(e){super(e)}getMessageStrings(){return iA}isAllowed(e){const t=new eA;return new Promise((o=>{t.isActionAllowed(tA,oA,aA,e).then((e=>{var t;const a=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.account,i=(a.isAdmin||"Supervisor"===a.usertype||a.isDepartmentHead)&&e;o(i)}))}))}getAvailableLeaveTypes(e){return new Promise(((t,o)=>{try{e?this._http.getAssignableLeaveTypes(e).then((e=>{let o=[];e.data&&(o=e.data),t(o)})):this._http.getUnfilteredLeaveTypes().then((e=>{let o=[];e.data&&e.data.data&&(o=e.data.data),t(o)}))}catch(a){o(a)}}))}getLeaveRequests(e){return super.getLeaveRequestsWithMode(e)}getLeaveRequestsWithFilters(e,t,o,a,i){return super.getLeaveRequestsWithFiltersAndMode(e,t,o,a,i)}searchLeaveRequests(e){return super.searchLeaveRequestsWithMode(e)}makeLeaveRequest(e){return super.assignLeave(e)}getLeaveRequestDetailState(e,t,o){return new Promise(((a,i)=>{const l={Employee:t};this._http.getDataGroupPermissions({dataGroup:"leave_list",entities:l}).then((t=>{t.read?a({name:"leave.view_leave_list.detail",params:{id:e,redirectedFrom:o}}):i("no permissions")})).catch((e=>i(e)))}))}}class rA extends za{constructor(e){super(e)}getMessageStrings(){return lA}isAllowed(e){return new Promise((e=>{var t;const o=null===(t=this._app)||void 0===t?void 0:t.appContext.config.globalProperties.empNo;e(null!=o)}))}getAvailableLeaveTypes(e){return new Promise(((t,o)=>{try{e?this._http.getEligibleLeaveTypes(e).then((e=>{let o=[];e.data&&(o=e.data),t(o)})):t([])}catch(a){o(a)}}))}getLeaveRequests(e){return super.getLeaveRequestsWithMode(e,"my")}getLeaveRequestsWithFilters(e,t,o,a,i){return super.getLeaveRequestsWithFiltersAndMode(e,t,o,a,i,"my")}searchLeaveRequests(e){return super.searchLeaveRequestsWithMode(e,"my")}makeLeaveRequest(e){return super.applyLeave(e)}getLeaveRequestDetailState(e,t,o){return new Promise((t=>{t({name:"leave.view_my_leave_list.detail",params:{id:e,mode:"my",redirectedFrom:o}})}))}}const sA={class:"oxd-info-drop-down-content"};function dA(e,t,o,a,l,n){return(0,i.openBlock)(),(0,i.createElementBlock)("div",{class:(0,i.normalizeClass)(["ent-label-tile-content",{"ent-label-header-content":e.isHeader}])},[(0,i.createElementVNode)("div",sA,[(0,i.createElementVNode)("span",{class:"oxd-info-drop-down-main-label",style:(0,i.normalizeStyle)(e.titleLabelStyles)},(0,i.toDisplayString)(e.label),5),(0,i.createTextVNode)(" "+(0,i.toDisplayString)(e.subHeader),1)]),(0,i.createElementVNode)("div",{class:"oxd-info-drop-down-description",style:(0,i.normalizeStyle)(e.titleLabelStyles)},(0,i.toDisplayString)(e.description),5)],2)}var cA=(0,i.defineComponent)({name:"stle-entitlements-items",props:{label:{type:String,required:!1},subHeader:{type:String,required:!1},description:{type:String,required:!1},numOfTitleRows:{type:Number,default:1},isHeader:{type:Boolean,required:!1,default:!1}},computed:{titleLabelStyles(){return{"-webkit-line-clamp":this.numOfTitleRows}}}});const mA=(0,Re.Z)(cA,[["render",dA],["__scopeId","data-v-50435e2a"]]);var uA=mA,pA=o(79922),vA=(0,i.defineComponent)({name:"leaveTypeRibbonRadioSelector",components:{"image-progress":LN,"ribbon-radio-selector":GN,"oxd-loader":co.Z,"oxd-link":XN,"oxd-info-drop-down":pA.Z,"entitlement-item":uA},props:{applicationType:{type:String,required:!0},settings:{type:Object,required:!0},empNumber:{type:String},refresh:{type:Boolean},leaveTypeId:{type:String,required:!1}},emits:["update:modelValue","linkClick"],setup(e,t){ce();const o=(0,i.computed)((()=>"../index.php/leave/viewPhoto/empNumber/"+e.empNumber+"/size/small")),a=(0,i.ref)(!1),l=(0,i.ref)(!0),n=(0,i.ref)(0),r=(0,i.ref)(0),s=(0,i.ref)("Day(s)"),d=(0,i.ref)(2),c=(0,i.ref)([]),m=(0,i.getCurrentInstance)(),u=new bN,p=e.applicationType===ca?new nA(m):new rA(m),v=Im(),h=()=>{let t=[];l.value=!0,p.getAvailableLeaveTypes(e.empNumber).then((o=>{o.forEach((e=>{null!==e.id&&(t[e.id]=e)})),void 0!==e.empNumber?p.getLeaveBalance(e.empNumber).then((o=>{const i=Object.keys(t),n=[];i.forEach((a=>{const i=parseInt(a,10),l=t[a].hour_based,r=t[a].is_short_term,s=u.getNumberOfDecimals(l,e.settings),d=l?"Hours":"Days",c={id:i,title:t[a].name,number:"0.00",subText:"Balance "+d,entitlementTotal:0,entitlementUsed:0,numberOfDecimals:s,isShortTerm:r};p.getTileCardItemWithBalanceDetails(c,o,a,r,e.applicationType,v),n.push(c)})),l.value=!1,a.value=0===i.length,c.value=n,c.value.sort(g)})):(c.value=[],n.value=0,r.value=0,a.value=!1,l.value=!1)}))},g=(e,t)=>parseFloat(e.number)>parseFloat(t.number)?-1:parseFloat(e.number)<parseFloat(t.number)?1:0,y=e=>{C.value=[],n.value=e.entitlementUsed,d.value=e.numberOfDecimals?e.numberOfDecimals:2,s.value="Balance Days"==e.subText?"Day(s)":"Hour(s)",0==e.entitlementTotal?r.value=0:r.value=e.entitlementUsed/e.entitlementTotal*100,e.shortTermEntitlements&&e.shortTermEntitlements.length>0&&(C.value=e.shortTermEntitlements,e.selectedEntitlement&&(S.value=e.selectedEntitlement)),b=e},f=e=>{t.emit("update:modelValue",e),y(e)};(0,i.watch)((()=>[e.empNumber]),(()=>{h()})),(0,i.watch)((()=>[e.refresh]),(()=>{h()})),(0,i.onMounted)((()=>{h()}));let b=null;const C=(0,i.ref)([]),S=(0,i.ref)(),w=e=>{S.value=e,b&&(b.selectedEntitlement=e,t.emit("update:modelValue",b))};return{displayProfilePic:o,displayProfileCountText:s,displayProfileCountNumber:n,displayProfileCountDecimals:d,displayProfilePercentage:r,options:c,fetchLeaveTypes:h,onInput:f,isNoLeaveTypesAssgined:a,onLoading:l,entitlementsOptions:C,infoBoxModelValue:S,updateInfoBoxModelValue:w}}});const hA=(0,Re.Z)(vA,[["render",TN],["__scopeId","data-v-29e51441"]]);var gA=hA;const yA={key:0,class:"add-new-nominee-section"},fA={class:"add-new-nominee-section-icon"},bA={class:"add-new-nominee-section-text"};function CA(e,t,o,a,l,n){const r=(0,i.resolveComponent)("employee-with-comment"),s=(0,i.resolveComponent)("oxd-icon-button"),d=(0,i.resolveComponent)("oxd-text");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.nomineesItemKeys,(t=>((0,i.openBlock)(),(0,i.createBlock)(r,{key:t,existingIds:e.existingNomineeIds,"employee-permission-type":"leave_assign","component-id":t,onUpdateItem:e.nomineeUpdated,onRemoveItem:e.nomineeRemoved},null,8,["existingIds","component-id","onUpdateItem","onRemoveItem"])))),128)),e.nomineesItemKeys.length<3?((0,i.openBlock)(),(0,i.createElementBlock)("div",yA,[(0,i.createElementVNode)("div",fA,[(0,i.createVNode)(s,{name:"oxd-add",tabindex:"0",size:"small",onClick:t[0]||(t[0]=t=>e.addNominee())})]),(0,i.createElementVNode)("div",bA,[(0,i.createVNode)(d,null,{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Add Nominee")),1)])),_:1})])])):(0,i.createCommentVNode)("",!0)],64)}const SA={class:"employee-section",style:{width:"100%"}},wA={class:"comment-section"};function EA(e,t,o,a,l,n){const r=(0,i.resolveComponent)("employee-autocomplete"),s=(0,i.resolveComponent)("oxd-icon-button"),d=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createElementVNode)("div",SA,[(0,i.createVNode)(r,{id:"employee-autocomplete_{{componentId}}",label:e.$t("Nominee"),"permission-type":e.employeePermissionType,"search-function":e.filterEmployees,modelValue:e.employee,"onUpdate:modelValue":t[0]||(t[0]=t=>e.employee=t),class:"employee-auto-complete","data-test":"employeeName"},null,8,["label","permission-type","search-function","modelValue"]),(0,i.createVNode)(s,{id:"remove-icon_{{componentId}}",name:"trash",tabindex:"0",size:"medium",onClick:t[1]||(t[1]=t=>e.removeItem()),class:"remove-icon",tooltip:e.$t("Delete"),"data-test":"removeIcon"},null,8,["tooltip"])]),(0,i.createElementVNode)("div",wA,[(0,i.createVNode)(d,{rows:1,id:"employee-note_{{componentId}}",placeholder:e.$t("Note"),label:e.$t("Note"),type:"textarea",modelValue:e.note,"onUpdate:modelValue":t[2]||(t[2]=t=>e.note=t),"data-test":"commentTextArea",disabled:null==e.item.empNumber,rules:e.rules.note},null,8,["placeholder","label","modelValue","disabled","rules"])])],64)}class kA{static base64ImageConvertion(e,t){return`data:${e};base64,${t}`}static getEmployeeName(e,t,o){return o?e+" "+t+" (Past Employee)":e+" "+t}}var xA=(0,i.defineComponent)({name:"employee-with-comment",components:{"employee-autocomplete":fN,"oxd-input-field":lo.Z,"oxd-icon-button":D.Z},emits:["updateItem","removeItem"],props:{employeePermissionType:{type:String,required:!0},existingIds:{type:Array,required:!0},componentId:{type:Number,required:!0}},setup(e,t){const o=(0,i.getCurrentInstance)(),a=new Da(o),l=(0,i.ref)(),n=(0,i.ref)(null),r=(0,i.ref)({key:e.componentId,employee:null,empNumber:null,note:null});let s={note:[$a(250)]};(0,i.watch)((()=>l.value),(()=>{l.value?(r.value.empNumber=l.value.id,r.value.employee=l.value):(r.value.empNumber=null,r.value.employee=null,n.value=null)})),(0,i.watch)((()=>n.value),(()=>{r.value.note=n.value})),(0,i.watch)((()=>[r.value.empNumber,r.value.note]),(()=>{const e=(0,Zg.Z)(r);null!==e.value.employee&&delete e.value.employee.image,t.emit("updateItem",{key:e.value.key,employee:e.value.employee,empNumber:e.value.empNumber,note:e.value.note})}));const d=t=>new Promise((o=>{a.filterAllEmployees(t,50).then((t=>{let a=[];t.data&&(a=t.data.data.map((t=>{var o,a,i;if(-1===e.existingIds.indexOf(t.empNumber))return{id:t.empNumber,label:kA.getEmployeeName(t.firstName,t.lastName,Boolean(t.termination_id)),employeeId:t.employeeId,image:(null===(o=t.photo)||void 0===o?void 0:o.type)&&(null===(a=t.photo)||void 0===a?void 0:a.image)?kA.base64ImageConvertion(t.photo.type,null===(i=t.photo)||void 0===i?void 0:i.image):"images/default.png"}}))),a=a.filter((e=>void 0!=e)),o(a)}))})),c=()=>{t.emit("removeItem",e.componentId)};return{employee:l,note:n,item:r,filterEmployees:d,removeItem:c,rules:s}}});const NA=(0,Re.Z)(xA,[["render",EA],["__scopeId","data-v-386f193c"]]);var AA=NA,DA=(0,i.defineComponent)({name:"nomineeSelector",components:{"employee-with-comment":AA,"oxd-icon-button":D.Z},emits:["update:modelValue"],props:{empNumber:{type:String,default:"0"}},setup(e,t){const o=(0,i.ref)(),a=(0,i.ref)(0),l=(0,i.ref)([{employee:null,empNumber:null,note:null}]);t.emit("update:modelValue",l);const n=(0,i.ref)([a.value]),r=(0,i.ref)([e.empNumber]),s=()=>{a.value<2&&(a.value+=1,n.value.push(a.value),l.value.push({employee:null,empNumber:null,note:null}))},d=o=>{l.value[o.key]={employee:o.employee,empNumber:o.empNumber,note:o.note},r.value=[e.empNumber],l.value.map((e=>{null!==e.empNumber&&r.value.push(e.empNumber)})),t.emit("update:modelValue",l)},c=e=>{var o=n.value.indexOf(e);-1!==o&&(l.value.splice(o,1),n.value.splice(o,1)),a.value-=1,0==l.value.length&&t.emit("update:modelValue",[{employee:null,empNumber:null,note:null}])};return{nomineesItemKeys:n,employee:o,addNominee:s,nomineeUpdated:d,nomineeRemoved:c,existingNomineeIds:r}}});const TA=(0,Re.Z)(DA,[["render",CA],["__scopeId","data-v-4a0908ee"]]);var PA=TA;const VA={key:0,class:"label-tile-wrapper"},BA={class:"oxd-select-date-icon"},IA={class:"label-tile-content"},LA={class:"text-1"},FA={class:"text-2"};function zA(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon"),s=(0,i.resolveComponent)("oxd-link");return e.dataLoaded?((0,i.openBlock)(),(0,i.createElementBlock)("div",VA,[(0,i.createElementVNode)("div",BA,[(0,i.createVNode)(r,{name:"oxd-select-date",size:"extra-large",class:"oxd-link-icon"})]),(0,i.createElementVNode)("div",IA,[(0,i.createElementVNode)("div",LA,[e.redirectWithLink?((0,i.openBlock)(),(0,i.createBlock)(s,{key:0,link:e.lastLeaveRequestLink,text:e.displayLeaveTakenDate},null,8,["link","text"])):((0,i.openBlock)(),(0,i.createBlock)(s,{key:1,text:e.displayLeaveTakenDate,onLinkClick:e.linkClick},null,8,["text","onLinkClick"]))]),(0,i.createElementVNode)("div",FA,(0,i.toDisplayString)(e.displayLeaveTakenCount),1)])])):(0,i.createCommentVNode)("",!0)}var MA=(0,i.defineComponent)({name:"lastLeaveTaken",components:{"oxd-icon":In.Z,"oxd-link":XN},props:{empNumber:{type:String,required:!0},applicationType:{type:String,required:!0},leaveTypeId:{type:String,required:!1},redirectWithLink:{type:Boolean,required:!1,default:!0},showLeaveType:{type:Boolean,required:!1,default:!0}},emits:["linkClick","dataAvailableToShow"],setup(e,t){const o=ce(),a=(0,i.getCurrentInstance)(),l=e.applicationType===ca?new nA(a):new rA(a),{jsSavingFormat:n,jsDisplayFormat:r,locale:s}=Im(),d=(0,i.ref)(" "),c=(0,i.ref)(" "),m=(0,i.ref)(),u=(0,i.ref)(!1),p=(0,i.ref)(""),v=(0,i.ref)([]),h=e=>{const t=[ua,pa,va,ha];let o="";for(let a=e.length-1;a>=0;a--){const i=e[a];if(parseFloat(i.length_days)>0&&!t.includes(parseInt(i.status,10))){o=i.date;break}}return""===o&&(o=e[0].date),o},g=()=>{e.empNumber?l.getLeaveRequests(e.empNumber).then((e=>{e.length>0?(v.value=e,y()):(f(),v.value=[])})):(f(),v.value=[])},y=()=>{if(v.value.length>0){let a=v.value;if(e.leaveTypeId){const t=e.leaveTypeId?parseInt(e.leaveTypeId):0;a=v.value.filter((e=>{if(e.data.leave_type_id==t)return e}))}if(a.length>0){let i=a[0];p.value=i.id;let n=h(i.data.Leave),r=i.data.LeaveType.name,s=i.leave.leaveAmount;d.value=o("Last leave taken on {{leaveDate}}",{leaveDate:b(n)}),c.value=e.showLeaveType?r+" - ":"",c.value+=o("{{leaveAmount}} {{leaveUnit}}",{leaveAmount:s,leaveUnit:i.data.LeaveType.hour_based?o("hour(s)"):o("day(s)")}),l.getLeaveRequestUrl(i.id,e.empNumber).then((e=>{m.value=e,u.value=!0,t.emit("dataAvailableToShow",!0)}))}else f()}else f()},f=()=>{d.value=" ",c.value=" ",u.value=!1,t.emit("dataAvailableToShow",!1)},b=e=>{if(e){const t=ee(e,n);if(t)return J(t,r,{locale:s})}return""},C=()=>{t.emit("linkClick",p.value)};return(0,i.watch)((()=>[e.empNumber]),(()=>{g()}),{immediate:!0}),(0,i.watch)((()=>[e.leaveTypeId]),(()=>{y()})),{displayLeaveTakenDate:d,displayLeaveTakenCount:c,dataLoaded:u,lastLeaveRequestLink:m,linkClick:C}}});const OA=(0,Re.Z)(MA,[["render",zA],["__scopeId","data-v-4bab1036"]]);var RA=OA;const _A=ce();function $A(e,t,o,a,l,n,r,s,d,c){return(0,A.mG)(this,void 0,void 0,(function*(){const m=yield e,u=new bN,p=u.getLeaveAmountSettings(m);return{name:"leave.assign",layout:[{type:"grid",props:{cols:3},children:{default:[{name:"employee",label:_A("Employee Name"),type:"custom",component:(0,i.markRaw)(fN),visible:c===ca,props:{permissionType:"leave_assign"},validators:new Map([["required",Oa],["autoCompleteValueSelected",Ra]])},{name:"lastLeaveTakenForAssign",label:"",type:"custom",component:(0,i.markRaw)(RA),props:{applicationType:c},style:{"margin-left":"auto","margin-bottom":"1rem",display:"flex","align-items":"flex-end",padding:"0px"},class:["--span-column-2"],hook:(e,t)=>{var o;const a=null===(o=t.employee)||void 0===o?void 0:o.id;return e.visible=c===ca&&Boolean(a),e.props&&(e.props["empNumber"]=a),Object.assign({},e)}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"grid",props:{cols:1},children:{default:[{name:"leaveType",label:"",type:"custom",component:(0,i.markRaw)(gA),visible:!0,props:{applicationType:c,settings:p},style:{"padding-top":"0","padding-bottom":"0"},listeners:{onLinkClick:()=>{a()}},hook:(e,t)=>{var o;const a=null===(o=t.employee)||void 0===o?void 0:o.id,i=t.refresh;return e.props&&(a!=e.props["empNumber"]&&delete t.leaveType,e.props["empNumber"]=a,e.props["refresh"]=i,(null===t||void 0===t?void 0:t.leaveTypeId)&&(e.props["leaveTypeId"]=t.leaveTypeId)),Object.assign({},e)}}]},style:{"margin-left":"-12px","margin-right":"-12px","margin-bottom":"16px"}},{type:"grid",props:{cols:3},children:{default:[{name:"fromDate",label:_A("From Date"),type:"custom",component:(0,i.markRaw)(rN),validators:new Map([["required",Oa],["validDateFormat",ja(t)],["endDateShouldBeAfterStartDate",vi((()=>{var e;return null===(e=o.value)||void 0===e?void 0:e.toDate}),_A("From date should be on or before to date"),{allowSameDate:!0})]]),props:{},hook:(e,t)=>{var o;const a=null===(o=t.employee)||void 0===o?void 0:o.id;return e.props&&(e.props["empNumber"]=a,d.value?(e.props.min=d.value.min,e.props.max=d.value.max,e.props.years=jA(d.value)):(delete e.props.min,delete e.props.max,delete e.props.years)),Object.assign({},e)}},{name:"toDate",label:_A("To Date"),type:"custom",component:(0,i.markRaw)(rN),validators:new Map([["required",Oa],["validDateFormat",ja(t)],["endDateShouldBeAfterStartDate",Xa((()=>{var e;return null===(e=o.value)||void 0===e?void 0:e.fromDate}),_A("To date should be on or after from date"),{allowSameDate:!0})]]),props:{},hook:(e,t)=>{var o;const a=null===(o=t.employee)||void 0===o?void 0:o.id;return e.props&&(e.props["empNumber"]=a,d.value?(e.props.min=new Date(d.value.min),e.props.max=new Date(d.value.max),e.props.years=jA(d.value)):(delete e.props.min,delete e.props.max,delete e.props.years)),Object.assign({},e)}},{name:"lastLeaveTakenForApply",label:"",type:"custom",component:(0,i.markRaw)(RA),props:{applicationType:c},style:{"margin-left":"auto","margin-bottom":"1rem","max-height":"68px",display:"flex","align-items":"flex-end",padding:"0px"},hook:(e,t)=>{var o;const a=null===(o=t.employee)||void 0===o?void 0:o.id;return e.visible=c===ma&&Boolean(a),e.props&&(e.props["empNumber"]=a),Object.assign({},e)}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"grid",props:{cols:6},children:{default:[{name:"singleDuration",label:_A("Duration"),type:"select",props:{hideDropdownDefaultLabel:!0,options:l},validators:new Map([["required",Oa]]),hook:(e,t)=>{const o=t;return e.visible=ZA(o)&&l.value.length>1,Object.assign({},e)},class:["--span-column-2"]},{name:"singleSpecifyTimeFrom",label:_A("From"),type:"time",validators:new Map([["required",Oa],["validTimeFormat",Ua],["FromTimeShouldBeBeforeToTime",hi((()=>{var e;return null===(e=o.value)||void 0===e?void 0:e.singleSpecifyTimeTo}),_A("From time should be before To time"),{allowSameTime:!1})]]),hook:(e,t)=>{const o=t;return e.visible=qA(o),Object.assign({},e)}},{name:"singleSpecifyTimeTo",label:_A("To"),type:"time",validators:new Map([["required",Oa],["validTimeFormat",Ua],["ToTimeShouldBeAfterFromTime",ii((()=>{var e;return null===(e=o.value)||void 0===e?void 0:e.singleSpecifyTimeFrom}),_A("To time should be after From time"),{allowSameTime:!1})]]),hook:(e,t)=>{const o=t;return e.visible=qA(o),Object.assign({},e)}},{name:"singleSpecifyTimeDuration",label:_A("Duration"),type:"custom",component:(0,i.markRaw)(aN),props:{value:""},validators:new Map([["isLunchTimeSelected",ai((()=>{var e;return null===(e=o.value)||void 0===e?void 0:e.singleSpecifyTimeFrom}),(()=>{var e;return null===(e=o.value)||void 0===e?void 0:e.singleSpecifyTimeTo}),(()=>{var e,t;return null===(t=null===(e=o.value)||void 0===e?void 0:e.startDayWorkSchedule)||void 0===t?void 0:t.duration.lunch_start_time}),(()=>{var e,t;return null===(t=null===(e=o.value)||void 0===e?void 0:e.startDayWorkSchedule)||void 0===t?void 0:t.duration.lunch_end_time}),_A("Selected time slot is allocated for the lunch time"))]]),hook:(e,t)=>{var o,a;const i=t;if(e.visible=qA(i),e.visible&&(null===e||void 0===e?void 0:e.props)){const t=za.calculateShiftLength(i.singleSpecifyTimeFrom,i.singleSpecifyTimeTo,null===(o=i.startDayWorkSchedule)||void 0===o?void 0:o.duration.lunch_start_time,null===(a=i.startDayWorkSchedule)||void 0===a?void 0:a.duration.lunch_end_time);e.props.value=null!==t&&void 0!==t?t:_A("Invalid")}return Object.assign({},e)}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"grid",props:{cols:1},children:{default:[{name:"partialDays",label:_A("Partial Days"),type:"radiopillgroup",props:{options:r},style:{"margin-bottom":"1rem"},validators:new Map([["required",Oa]]),listeners:{onChange:()=>{var e,t;za.resetSpecifyTimeValuesInModel(o,!0,!0,!1),n.value.length>0&&((null===(e=o.value)||void 0===e?void 0:e.startDayDuration)&&(o.value.startDayDuration=n.value[0]),(null===(t=o.value)||void 0===t?void 0:t.endDayDuration)&&(o.value.endDayDuration=n.value[0]))}},hook:(e,t)=>{const o=t;return e.visible=HA(o)&&r.value.length>1,Object.assign({},e)}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"grid",props:{cols:6},children:{default:[{name:"startDayDuration",label:_A("Duration"),type:"select",props:{hideDropdownDefaultLabel:!0,options:n},validators:new Map([["required",Oa]]),hook:(e,t)=>{const o=t;return e.visible=GA(o),e.label="all"===o.partialDays?_A("Duration"):_A("Start Day"),Object.assign({},e)},class:["--span-column-2"]},{name:"startDaySpecifyTimeFrom",label:_A("From"),type:"time",validators:new Map([["required",Oa],["validTimeFormat",Ua],["FromTimeShouldBeBeforeToTime",hi((()=>{var e;return null===(e=o.value)||void 0===e?void 0:e.startDaySpecifyTimeTo}),_A("From time should be before To time"),{allowSameTime:!1})]]),hook:(e,t)=>{const o=t;return e.visible=KA(o),Object.assign({},e)}},{name:"startDaySpecifyTimeTo",label:_A("To"),type:"time",validators:new Map([["required",Oa],["validTimeFormat",Ua],["ToTimeShouldBeAfterFromTime",ii((()=>{var e;return null===(e=o.value)||void 0===e?void 0:e.startDaySpecifyTimeFrom}),_A("To time should be after From time"),{allowSameTime:!1})]]),hook:(e,t)=>{const o=t;return e.visible=KA(o),Object.assign({},e)}},{name:"startDaySpecifyTimeDuration",label:_A("Duration"),type:"custom",component:(0,i.markRaw)(aN),props:{value:""},hook:(e,t)=>{var o,a;const i=t;if(e.visible=KA(i),e.visible&&(null===e||void 0===e?void 0:e.props)){const t=za.calculateShiftLength(i.startDaySpecifyTimeFrom,i.startDaySpecifyTimeTo,null===(o=i.startDayWorkSchedule)||void 0===o?void 0:o.duration.lunch_start_time,null===(a=i.startDayWorkSchedule)||void 0===a?void 0:a.duration.lunch_end_time);e.props.value=null!==t&&void 0!==t?t:_A("Invalid")}return Object.assign({},e)}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"grid",props:{cols:6},children:{default:[{name:"endDayDuration",label:_A("End Day"),type:"select",props:{hideDropdownDefaultLabel:!0,options:n},validators:new Map([["required",Oa]]),hook:(e,t)=>{const o=t;return e.visible=WA(o),Object.assign({},e)},class:["--span-column-2"]},{name:"endDaySpecifyTimeFrom",label:_A("From"),type:"time",validators:new Map([["required",Oa],["validTimeFormat",Ua],["FromTimeShouldBeBeforeToTime",hi((()=>{var e;return null===(e=o.value)||void 0===e?void 0:e.endDaySpecifyTimeTo}),_A("From time should be before To time"),{allowSameTime:!1})]]),hook:(e,t)=>{const o=t;return e.visible=QA(o),Object.assign({},e)}},{name:"endDaySpecifyTimeTo",label:_A("To"),type:"time",validators:new Map([["required",Oa],["validTimeFormat",Ua],["ToTimeShouldBeAfterFromTime",ii((()=>{var e;return null===(e=o.value)||void 0===e?void 0:e.endDaySpecifyTimeFrom}),_A("To time should be after From time"),{allowSameTime:!1})]]),hook:(e,t)=>{const o=t;return e.visible=QA(o),Object.assign({},e)}},{name:"endDaySpecifyTimeDuration",label:_A("Duration"),type:"custom",component:(0,i.markRaw)(aN),props:{value:""},hook:(e,t)=>{var o,a;const i=t;if(e.visible=QA(i),e.visible&&(null===e||void 0===e?void 0:e.props)){const t=za.calculateShiftLength(i.endDaySpecifyTimeFrom,i.endDaySpecifyTimeTo,null===(o=i.endDayWorkSchedule)||void 0===o?void 0:o.duration.lunch_start_time,null===(a=i.endDayWorkSchedule)||void 0===a?void 0:a.duration.lunch_end_time);e.props.value=null!==t&&void 0!==t?t:_A("Invalid")}return Object.assign({},e)}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"grid",props:{cols:6},children:{default:[{name:"totalDuration",label:_A("Total Duration"),type:"input",props:{readonly:!0},hook:(e,t)=>{const o=t;return e.visible=UA(o),Object.assign({},e)}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"grid",props:{cols:3},children:{default:[{name:"comments",label:_A("Comments"),type:"textarea",validators:new Map([["shouldNotExceedCharLength",$a(250)]]),props:{labelIcon:"oxd-comment-label-icon",placeholder:_A("Add your comments here")},class:["--offset-column-1","--span-column-2"]},{name:"attachment",label:_A("Attachment"),type:"custom",component:(0,i.markRaw)(Xf),visible:!1,props:{multiple:!1,hint:_A("Accepts up to {{fileSize}}MB",{fileSize:Math.round(m.max_attachment_size/1048576)})},hook:(e,t)=>{var o,a;const i=t,l=new Map([["maxFileSize",li(m.max_attachment_size)],["validFileTypes",ni(m.attachmentFileTypes)]]);return e.visible=null===(o=i.settings)||void 0===o?void 0:o.showAttachment,(null===(a=i.settings)||void 0===a?void 0:a.attachmentMandatory)&&l.set("required",Oa),e.validators=l,Object.assign({},e)}}]},style:{"margin-left":"-10px","margin-right":"-10px"},class:"rounded-overlay"},{type:"grid",props:{cols:3},children:{default:[{name:"EmployeeNomineeRestrictionFilter",label:"",type:"custom",component:(0,i.markRaw)(PA),visible:!1,props:{},style:{"padding-top":"0","padding-bottom":"0"},class:["--offset-column-1","--span-column-2"],hook:(e,t)=>{var o,a;const i=t,l=null===(o=i.employee)||void 0===o?void 0:o.id;return e.visible=null===(a=i.settings)||void 0===a?void 0:a.nomineeRequired,e.props&&(e.props["empNumber"]=l),Object.assign({},e)}}]},style:{"margin-left":"-12px","margin-right":"-12px"}},{type:"grid",props:{cols:4},children:{default:[{name:"PastPeriodRestrictionFilter",label:"",type:"radiopillgroup",visible:!1,props:{options:[{id:"Yes",label:_A("Yes")},{id:"No",label:_A("No")}],name:"PastPeriodRestrictionFilter"},validators:new Map([["required",Oa]]),hook:e=>(void 0!==s.value["PastPeriodRestrictionFilter"]?(e.visible=!0,e.label=_A(s.value["PastPeriodRestrictionFilter"].widget.schema.title)):e.visible=!1,Object.assign({},e))},{name:"ConfirmRestrictionFilter",label:"",type:"radiopillgroup",visible:!1,props:{options:[{id:"Yes",label:_A("Yes")},{id:"No",label:_A("No")}],name:"ConfirmRestrictionFilter"},validators:new Map([["required",Oa]]),class:["--span-column-3"],hook:e=>(void 0!==s.value["ConfirmRestrictionFilter"]?(e.visible=!0,e.label=_A(s.value["ConfirmRestrictionFilter"].widget.schema.title)):e.visible=!1,Object.assign({},e))}]},style:{"margin-left":"-12px","margin-right":"-12px"}},{type:"divider",style:{margin:"0"}},{type:"action",children:{default:[{name:"required",label:"",type:"custom",component:(0,i.markRaw)(Hd),style:{"margin-right":"auto",padding:"0px"}},{name:"submit",label:_A(c===ca?"Assign":"Apply"),type:"button",style:{"margin-left":"0.5rem"},props:{type:"submit",displayType:"secondary"}}]},style:{"padding-top":"1.2rem"}}]}}))}const jA=e=>{const t=(0,K.Z)(new Date),o=e?(0,K.Z)(e.min):t-10,a=e?(0,K.Z)(e.max):t+10,i=[];for(let l=o;l<=a;l++)i.push(l);return i},UA=e=>Boolean(e.fromDate)&&Boolean(e.toDate)&&Boolean(e.totalDuration),ZA=e=>Boolean(e.fromDate)&&e.fromDate===e.toDate,HA=e=>Boolean(e.fromDate)&&Boolean(e.toDate)&&e.fromDate!==e.toDate,qA=e=>{var t;return ZA(e)&&(null===(t=e.singleDuration)||void 0===t?void 0:t.id)===oa},GA=e=>HA(e)&&(e.partialDays===ia||e.partialDays===la||e.partialDays===ra),WA=e=>HA(e)&&(e.partialDays===na||e.partialDays===ra),KA=e=>{var t;return GA(e)&&(null===(t=e.startDayDuration)||void 0===t?void 0:t.id)===oa},QA=e=>{var t;return WA(e)&&(null===(t=e.endDayDuration)||void 0===t?void 0:t.id)===oa};var JA=$A;class YA{constructor(e){this._app=e,this._http=new Da(this._app)}fetch(e,t){return new Promise(((o,a)=>{try{this._http.fetchLeavePeriod(e,t).then((e=>{o(e.data.data)}))}catch(i){a(i)}}))}}const XA={class:"orangehrm-modal-header"},eD={class:"header-icon"},tD={class:"orangehrm-text-center-align"},oD={class:"orangehrm-modal-footer"};function aD(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon"),s=(0,i.resolveComponent)("oxd-text"),d=(0,i.resolveComponent)("oxd-button"),c=(0,i.resolveComponent)("oxd-dialog"),m=(0,i.resolveDirective)("set-tab-focus-to-first-element");return e.show?(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(c,(0,i.mergeProps)({key:0},e.$attr,{"onUpdate:show":e.onCancel,onKeyup:(0,i.withKeys)(e.onCancel,["esc"])}),{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",XA,[(0,i.createElementVNode)("div",eD,[(0,i.createVNode)(r,{name:"exclamation-triangle",size:"large",class:"modal-title-icon"})]),(0,i.createVNode)(s,{class:"modal-title",type:"modal-title"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Insufficient Leave Balance")),1)])),_:1})]),(0,i.createElementVNode)("div",tD,[(0,i.createVNode)(s,{class:"text-1",type:"subtitle-2"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.displayLeaveDaysText),1)])),_:1}),(0,i.createVNode)(s,{class:"text-2",type:"subtitle-2"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("a",{href:"",onClick:t[0]||(t[0]=(0,i.withModifiers)(((...t)=>e.onLinkCLick&&e.onLinkCLick(...t)),["prevent"])),class:"oxd-link","data-test":"showBalanceModal"},(0,i.toDisplayString)(e.$t("Available balance for this period is not sufficient")),1)])),_:1}),(0,i.createVNode)(s,{class:"modal-bottom-text",type:"subtitle-2"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Click OK to confirm leave request")),1)])),_:1})]),(0,i.createElementVNode)("div",oD,[(0,i.createVNode)(d,{label:e.$t("Cancel"),displayType:"text","data-test":"cancelButton",class:"orangehrm-button-margin",onClick:e.onCancel},null,8,["label","onClick"]),(0,i.createVNode)(d,{label:e.$t("OK"),displayType:"secondary","data-test":"confirmButton",class:"orangehrm-button-margin",onClickOnce:e.onConfirm},null,8,["label","onClickOnce"])])])),_:1},16,["onUpdate:show","onKeyup"])),[[m,void 0,"return-focus"]]):(0,i.createCommentVNode)("",!0)}var iD=(0,i.defineComponent)({name:"insufficientLeaveBalanceModal",components:{"oxd-button":jt.Z,"oxd-dialog":Wo.Z,"oxd-text":Ii.Z,"oxd-icon":In.Z},data(){return{show:!0}},props:{totalAmount:{type:String,required:!0}},directives:{"set-tab-focus-to-first-element":Sr.Z},methods:{onCancel(){this.$emit("confirmationModalAction","cancel"),this.show=!this.show},onConfirm(){this.$emit("confirmationModalAction","confirm"),this.show=!this.show},onLinkCLick(){this.$emit("confirmationLinkClickAction","clicked")}},setup(e){const t=ce(),o=(0,i.computed)((()=>t("The leave request includes {{leaveAmount}} of leave",{leaveAmount:e.totalAmount})));return{displayLeaveDaysText:o}}});const lD=(0,Re.Z)(iD,[["render",aD],["__scopeId","data-v-1a45d1e8"]]);var nD=lD;const rD={class:"orangehrm-modal-header"},sD={class:"orangehrm-modal-body"},dD={class:"orangehrm-modal-footer"};function cD(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-text"),s=(0,i.resolveComponent)("oxd-divider"),d=(0,i.resolveComponent)("oxd-classic-table"),c=(0,i.resolveComponent)("oxd-button"),m=(0,i.resolveComponent)("oxd-dialog"),u=(0,i.resolveDirective)("set-tab-focus-to-first-element");return e.show?(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(m,(0,i.mergeProps)({key:0},e.$attr,{"onUpdate:show":e.onCancel,onKeyup:(0,i.withKeys)(e.onCancel,["esc"])}),{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",rD,[(0,i.createVNode)(r,{class:"modal-title",type:"modal-title"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Overlapping Leave Request Found")),1)])),_:1})]),(0,i.createVNode)(s,{style:{borderTopColor:"#ebedf1",margin:"0px"}}),(0,i.createElementVNode)("div",sD,[(0,i.createVNode)(d,{class:"classic-table",headers:e.headers,items:e.tableItems,clickable:!1},null,8,["headers","items"])]),(0,i.createVNode)(s,{style:{borderTopColor:"#ebedf1",margin:"0px"}}),(0,i.createElementVNode)("div",dD,[(0,i.createVNode)(c,{label:e.$t("Cancel"),displayType:"ghost","data-test":"cancelButton",class:"orangehrm-button-margin",onClick:e.onCancel,size:"medium"},null,8,["label","onClick"])])])),_:1},16,["onUpdate:show","onKeyup"])),[[u,void 0,"return-focus"]]):(0,i.createCommentVNode)("",!0)}var mD=(0,i.defineComponent)({name:"overlappingLeaveModal",components:{"oxd-button":jt.Z,"oxd-dialog":Wo.Z,"oxd-text":Ii.Z,"oxd-classic-table":tk.Z,"oxd-divider":ro.Z},data(){return{show:!0}},directives:{"set-tab-focus-to-first-element":Sr.Z},props:{leaveDetails:{type:Array,required:!0}},methods:{onCancel(){this.$emit("confirmationModalAction","cancel"),this.show=!this.show}},setup(e){const t=ce(),{jsSavingFormat:o,jsDisplayFormat:a,userFormat:l,locale:n}=Im(),r=[{name:"date",title:t("Date"),width:"20%"},{name:"length",title:t("No of Hours"),width:"20%"},{name:"leaveType",title:t("Leave Type"),width:"20%",style:{"word-break":"break-word"}},{name:"status",title:t("Status"),width:"15%",style:{border:"solid 1px #D3D3D3",borderRadius:"0.5rem",padding:"5px 10px",width:"fit-content"}},{name:"comment",title:t("Comment"),width:"25%",maxCharacterLength:75,flow:"left"}],s=e=>{if(e){const t=ee(e,o);if(t)return J(t,a,{locale:n})}return""},d=(0,i.computed)((()=>e.leaveDetails.map((e=>({date:s(e.date),length:parseFloat((parseFloat(e.length_minutes)/60).toString()).toFixed(2),leaveType:e.leave_type,status:t(e.status),comment:null!==e.comments?e.comments:""})))));return{headers:r,tableItems:d}}});const uD=(0,Re.Z)(mD,[["render",cD],["__scopeId","data-v-5049ea68"]]);var pD=uD;const vD={class:"orangehrm-modal-header"},hD={class:"modal-leave-period"},gD={class:"header-left-arrow"},yD={class:"header-right-arrow"},fD={class:"orangehrm-modal-body"},bD={class:"leave-balance-modal-body"},CD={class:"orangehrm-modal-footer"};function SD(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-text"),s=(0,i.resolveComponent)("oxd-icon-button"),d=(0,i.resolveComponent)("oxd-th"),c=(0,i.resolveComponent)("oxd-tr"),m=(0,i.resolveComponent)("oxd-thead"),u=(0,i.resolveComponent)("leave-balance-item"),p=(0,i.resolveComponent)("oxd-table"),v=(0,i.resolveComponent)("oxd-button"),h=(0,i.resolveComponent)("oxd-dialog"),g=(0,i.resolveDirective)("set-tab-focus-to-first-element");return e.show?(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(h,(0,i.mergeProps)({key:0},e.$attr,{"onUpdate:show":e.onCancel,onKeyup:(0,i.withKeys)(e.onCancel,["esc"])}),{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",vD,[(0,i.createVNode)(r,{class:"modal-title",type:"modal-title"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Leave Balance")),1)])),_:1}),(0,i.createElementVNode)("div",hD,[(0,i.createVNode)(r,{class:"period-from"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.headerControllers.period.from)),1)])),_:1}),(0,i.createVNode)(r,null,{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(" - "))])),_:1}),(0,i.createVNode)(r,{class:"period-to"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.headerControllers.period.to)),1)])),_:1}),(0,i.createElementVNode)("div",gD,[(0,i.createVNode)(s,{name:"chevron-left",class:"nav-button-previous","data-test":"previousButton",size:"medium",onClick:e.onPrevious,disabled:e.periodOffset<=-e.maxOffset},null,8,["onClick","disabled"])]),(0,i.createElementVNode)("div",yD,[(0,i.createVNode)(s,{name:"chevron-right",class:"nav-button-next","data-test":"nextButton",size:"medium",onClick:e.onNext,disabled:e.periodOffset>=e.maxOffset},null,8,["onClick","disabled"])])])]),(0,i.createElementVNode)("div",fD,[(0,i.createVNode)(p,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(m,{class:"list-header"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{class:"list-header-row"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{class:"cell-1 oxd-padding-cell oxd-table-th"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Available Balance")),1)])),_:1}),(0,i.createVNode)(d,{class:"oxd-padding-cell oxd-table-th cell-2"}),(0,i.createVNode)(d,{class:"oxd-padding-cell oxd-table-th cell-3"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Note")),1)])),_:1})])),_:1})])),_:1}),(0,i.createElementVNode)("div",bD,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.leaveBalanceDetails,(t=>((0,i.openBlock)(),(0,i.createBlock)(u,{key:t.id,"leave-balance-detail":t,"show-projected-balance":e.showProjectedBalance},null,8,["leave-balance-detail","show-projected-balance"])))),128))])])),_:1})]),(0,i.createElementVNode)("div",CD,[(0,i.createVNode)(v,{label:e.$t("Cancel"),displayType:"ghost","data-test":"cancelButton",class:"orangehrm-button-margin",onClick:e.onCancel,size:"medium"},null,8,["label","onClick"])])])),_:1},16,["onUpdate:show","onKeyup"])),[[g,void 0,"return-focus"]]):(0,i.createCommentVNode)("",!0)}var wD=o(36499),ED=o(39058),kD=o(73068),xD=o(55777);const ND={class:"leave-balance-item",tabindex:"0",style:{width:"100%",display:"flex",flexDirection:"row",padding:"8px 16px",height:"75px",borderRadius:"1rem"}},AD={class:"balance-section",style:{width:"22%",marginLeft:"15px"}},DD={class:"balance-value-section"},TD={class:"unit-label"},PD={class:"date-range-section"},VD={class:"note-section",style:{width:"50%"}};function BD(e,t,o,a,l,n){const r=(0,i.resolveComponent)("date-range-pill");return(0,i.openBlock)(),(0,i.createElementBlock)("div",ND,[(0,i.createElementVNode)("div",AD,[(0,i.createElementVNode)("div",DD,[(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["balance-value",{"balance-value-custom":e.leaveBalanceDetail.balance.length>=6}])},(0,i.toDisplayString)(e.showProjectedBalance?e.leaveBalanceDetail.projected:e.leaveBalanceDetail.balance),3)]),(0,i.createElementVNode)("div",TD,(0,i.toDisplayString)("("+e.$t(e.leaveBalanceDetail.hour_based?"Hours":"Days")+")"),1)]),(0,i.createElementVNode)("div",PD,[(0,i.createVNode)(r,{"from-date":e.leaveBalanceDetail.from,"to-date":e.leaveBalanceDetail.to,active:!1,class:"date-range-pill"},null,8,["from-date","to-date"])]),(0,i.createElementVNode)("div",VD,(0,i.toDisplayString)(e.leaveBalanceDetail.note),1)])}const ID={style:{display:"flex","flex-direction":"column","align-items":"center",float:"left"}},LD={class:"text",style:{"text-align":"center"}},FD=["tooltip"],zD={key:1,class:"date"},MD={style:{display:"flex","flex-direction":"column","align-items":"center"}},OD={style:{display:"flex","flex-direction":"column","align-items":"center",float:"right"}},RD={class:"text",style:{"text-align":"center"}},_D=["tooltip"],$D={key:1,class:"date"};function jD(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon");return(0,i.openBlock)(),(0,i.createElementBlock)("div",{class:(0,i.normalizeClass)(["date-range-container",e.classObject])},[(0,i.createElementVNode)("div",ID,[(0,i.createElementVNode)("div",LD,(0,i.toDisplayString)(e.$t("From")),1),e.fromDate.length>10?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,class:"date",tooltip:e.fromDate},(0,i.toDisplayString)(e.fromDate.substring(0,10)+"..."),9,FD)):((0,i.openBlock)(),(0,i.createElementBlock)("div",zD,(0,i.toDisplayString)(e.fromDate),1))]),(0,i.createElementVNode)("div",MD,[(0,i.createVNode)(r,{name:"oxd-duration",size:"xxx-small"})]),(0,i.createElementVNode)("div",OD,[(0,i.createElementVNode)("div",RD,(0,i.toDisplayString)(e.$t("To")),1),e.toDate.length>10?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,class:"date",tooltip:e.toDate},(0,i.toDisplayString)(e.toDate.substring(0,10)+"..."),9,_D)):((0,i.openBlock)(),(0,i.createElementBlock)("div",$D,(0,i.toDisplayString)(e.toDate),1))])],2)}var UD=(0,i.defineComponent)({name:"tileCard",props:{fromDate:{type:String,required:!0},toDate:{type:String,required:!0},active:{type:Boolean,default:!1}},components:{"oxd-icon":In.Z},setup(e){const t=(0,i.computed)((()=>({"tile-selected":e.active,"tile-unselected":!e.active})));return{classObject:t}}});const ZD=(0,Re.Z)(UD,[["render",jD],["__scopeId","data-v-3ed0461e"]]);var HD=ZD,qD=(0,i.defineComponent)({name:"leaveBalanceItem",props:{leaveBalanceDetail:{type:Object,required:!0},showProjectedBalance:{type:Boolean,required:!0}},components:{"date-range-pill":HD},setup(){return{}}});const GD=(0,Re.Z)(qD,[["render",BD],["__scopeId","data-v-5be3a7f4"]]);var WD=GD,KD=(0,i.defineComponent)({name:"LeaveBalanceModal",components:{"oxd-button":jt.Z,"oxd-dialog":Wo.Z,"oxd-text":Ii.Z,"oxd-table":wD.Z,"oxd-thead":ED.Z,"oxd-tr":kD.Z,"oxd-th":xD.Z,"leave-balance-item":WD,"oxd-icon-button":D.Z},data(){return{show:!0}},directives:{"set-tab-focus-to-first-element":Sr.Z},props:{leaveTypeId:{type:String,required:!0},empNumber:{type:String,required:!0},maxPeriodOffset:{type:Number,required:!0},showProjectedBalance:{type:Boolean,required:!0},applicationType:{type:String,required:!0},settings:{type:Object,required:!0}},methods:{onCancel(){this.$emit("confirmationModalAction","cancel"),this.show=!this.show}},setup:function(e){const{jsSavingFormat:t,jsDisplayFormat:o,userFormat:a,locale:l}=Im(),n=e=>{if(e){const a=ee(e,t);if(a)return J(a,o,{locale:l})}return""},r=(0,i.ref)(e.maxPeriodOffset),s=(0,i.getCurrentInstance)(),d=e.applicationType===ca?new nA(s):new rA(s),c=new bN,m=(0,i.ref)([]),u=(0,i.ref)({period:{from:"",to:""}}),p=(0,i.ref)(0),v=(0,i.ref)(["Available Balance","Duration","Note"]),h=(t,o,a)=>{d.getLeaveBalanceByEmployeeAndLeaveType(t,o,a).then((t=>{let o=0;u.value={period:{from:n(t.meta.period.from),to:n(t.meta.period.to)}},m.value=t.data.map((t=>(o+=1,{id:o,balance:c.formatAmount(t.balance,t.hour_based,e.settings),from:n(t.from),includes_projected:t.includes_projected,note:t.note,projected:c.formatAmount(t.projected,t.hour_based,e.settings),to:n(t.to),hour_based:t.hour_based})))}))};h(e.empNumber,e.leaveTypeId,p.value);const g=()=>{p.value-=1,h(e.empNumber,e.leaveTypeId,p.value)},y=()=>{p.value+=1,h(e.empNumber,e.leaveTypeId,p.value)};return{leaveBalanceDetails:m,headers:v,headerControllers:u,periodOffset:p,onPrevious:g,onNext:y,maxOffset:r}}});const QD=(0,Re.Z)(KD,[["render",SD],["__scopeId","data-v-733202d0"]]);var JD=QD,YD=o(8891),XD=(0,i.defineComponent)({name:"LeaveForm",components:{"form-card":Ly,"oxd-schema-form":yc.Z,"insufficient-leave-balance-confirmation-modal":nD,"overlapping-leave-modal":pD,"leave-balance-modal":JD},props:{applicationType:{type:String,required:!0}},setup(e,t){const o=(0,i.getCurrentInstance)(),a=new Da(o),l=(0,i.ref)(e.applicationType===ca),n=l.value?new nA(o):new rA(o),r=n.getMessageStrings(),s=new bc(o),d=new YA(o),c=new bN,m=(0,i.inject)("ngServices"),u=null===o||void 0===o?void 0:o.appContext.config.globalProperties.$toast,p=ce();let v,h,g,y,f=null,b=null,C=!1,S=[];const w=(0,i.ref)(!1),E=(0,i.ref)(!1),k=(0,i.ref)(!1),x=(0,i.ref)(1),N=(0,i.ref)({empNumber:null,leaveTypeId:null}),A=(0,i.ref)(),D=(0,i.ref)(ka),T=(0,i.ref)(Ea),P=(0,i.ref)(xa),V=(0,i.ref)({}),B=(0,i.ref)(!1),I=(0,i.ref)({});n.isAllowed([]).then((e=>{e||m.$state.go("403")}));const{userFormat:L}=Im(),{settings:F}=vu(),z=()=>{null===F||void 0===F||F.then((e=>{I.value=c.getLeaveAmountSettings(e)}))},M=(0,i.ref)(Na),O=e=>{a.getEmployee(e).then((e=>{var t,o,a;let i=e.data.data[0];i&&(M.value.employee={employeeId:i.employeeId,id:i.empNumber,image:(null===(t=i.photo)||void 0===t?void 0:t.type)&&(null===(o=i.photo)||void 0===o?void 0:o.image)?ge.base64ImageConvertion(i.photo.type,null===(a=i.photo)||void 0===a?void 0:a.image):"images/default.png",label:ge.getEmployeeName(i.firstName,i.middleName,i.lastName,Boolean(i.termination_id))},M.value.leaveTypeId=m.$stateParams.leaveType)}))},R=(0,i.ref)(),_=(0,i.ref)(),$=(0,i.ref)(!1),j=(0,i.ref)(!0),U=(0,i.ref)(!0),Z=(0,i.ref)(!0),H=(0,i.ref)(),q=(0,i.ref)(!1),G=(0,i.ref)(r.pageTitle),W=(0,i.ref)(null);let K=null;const Q=e=>{n.getWorkSchedule(e).then((e=>{y=e,he(e)}))};e.applicationType===ma&&(W.value=null===o||void 0===o?void 0:o.appContext.config.globalProperties.empNo,N.value.empNumber=W.value,M.value.employee={id:W.value});const J=e=>{K="employeeProfile",document.dispatchEvent(new CustomEvent("addTopMenuBackButton",{detail:{uisref:"pim.employees.profile.profile({empNumber: "+e+"})",tooltip:"Employee Profile",icon:"back_to_profile"}}))};void 0!==m.$stateParams.employeeId&&null!==m.$stateParams.employeeId&&e.applicationType===ca?(O(m.$stateParams.employeeId),J(m.$stateParams.employeeId)):e.applicationType===ma?m.$stateParams.leaveType?(M.value.leaveTypeId=m.$stateParams.leaveType,J(W.value)):delete M.value.leaveTypeId:(delete M.value.leaveTypeId,delete M.value.employee);const Y=()=>{oe(!1),N.value.empNumber=v,N.value.leaveTypeId=f,ie(!0)},{schema:X}=(0,fc.Z)(JA.call(t,F,L,M,Y,D,T,P,V,H,e.applicationType)),te=e=>{var t;if((null===(t=e.leaveType)||void 0===t?void 0:t.id)||u.warn({title:p(xc),message:p("No Leave Types with Leave Balance")}),!B.value&&$.value){B.value=!0,R.value=n.getLeaveRequestAssignModel(e);const t=(0,Zg.Z)(R.value);delete t.attachment,delete t.comment,n.checkBalance(t).then((e=>{e.haveBalance||e.isWorkShiftLengthExceeded||e.hasOverlapLeave||!e.showWarningUponInsufficientBalance||j.value&&!U.value?R.value&&le(R.value):(_.value=p("{{leaveAmount}} {{leaveUnit}}",{leaveAmount:e.totalAmount,leaveUnit:p(e.leaveUnit)}),oe(!0),B.value=!1)})).catch((()=>{B.value=!1}))}},oe=e=>{w.value=e},ae=e=>{E.value=e},ie=e=>{k.value=e},le=e=>{let t=!1;B.value=!0,n.makeLeaveRequest(e).then((o=>{o.result?(M.value.refresh=!M.value.refresh,u.success({title:p(Ec),message:p(r.saveSuccess)}),o.leaveRequestId&&(t=!0,n.goToLeaveRequest(o.leaveRequestId,e.employeeId,K))):"overlap"==o.type?(A.value=o.data,ae(!0)):o.errors.forEach((e=>{u.warn({title:p(xc),message:p(e)})}))})).catch((()=>{u.error({title:p(kc),message:p(r.saveError)})})).finally((()=>{t||(B.value=!1)}))},ne=()=>{Se([]),V.value={},M.value.settings.nomineeRequired=!1,Z.value=!1,delete M.value.EmployeeNomineeRestrictionFilter,delete M.value.ConfirmRestrictionFilter,delete M.value.PastPeriodRestrictionFilter},re=()=>{if(!M.value.leaveType)return;u.clearAll();let e=n.getLeaveRequestAssignModel(M.value);delete e.attachment,delete e.comment;const t=e;t.type=l.value?sa:da,s.checkRestrictions(t).then((e=>{var t;if(e.allow)j.value=!1;else if(j.value=!0,e.messages&&e.messages.forEach((e=>{u.warn({title:p(xc),message:p(e)},!1)})),e.input)for(let o=0;o<e.input.length;o++)"EmployeeNomineeRestrictionFilter"==e.input[o].name&&(Z.value=!0,M.value.settings.nomineeRequired=!0),V.value[e.input[o].name]=e.input[o];Se(null===(t=e.metaData)||void 0===t?void 0:t.exclude_options),U.value=e.needInput,M.value.totalDuration=p("{{leaveAmount}} {{leaveUnit}}",{leaveAmount:e.totalAmount?e.totalAmount:"",leaveUnit:e.leaveUnit?p(e.leaveUnit):""})})).catch((()=>{M.value.totalDuration=p("Invalid")}))},se=(0,YD.Z)(re,500),de=e=>{var t;if(e&&e.fromDate&&e.toDate){$.value=!0;const t=ee(e.fromDate,"yyyy-MM-dd"),o=ee(e.toDate,"yyyy-MM-dd");H.value=t&&o?{min:t,max:o}:void 0}else(null===(t=M.value.leaveType)||void 0===t?void 0:t.isShortTerm)&&(H.value=void 0)},me=e=>{var t;ne(),e?(s.getLeaveTypeRule(e).then((e=>{M.value.settings.showAttachment=e.attachment,M.value.settings.attachmentMandatory=e.attachmentMandatory,q.value=e.showProjectedBalance})).catch((()=>{M.value.settings.showAttachment=!1,M.value.settings.attachmentMandatory=!1})),M.value.leaveType.isShortTerm?de(null===(t=M.value.leaveType)||void 0===t?void 0:t.selectedEntitlement):d.fetch(e,v).then((e=>{if(e){$.value=!0;const t=za.getBoundaryDates(e,x.value);H.value=t||void 0}})).catch((()=>{$.value=!1}))):(M.value.settings.showAttachment=!1,M.value.settings.attachmentMandatory=!1)},ue=e=>{ne(),e&&Q(e),e&&(n.isWorkWeekEnabled(e).then((e=>{C=e})),n.getAllowedLeavePeriodOffset(e).then((e=>{x.value=e})))},pe=(e,t)=>{C&&n.getWorkSchedule(v,e).then((o=>{he(o,!0,e===t)}))},ve=(e,t)=>{C&&n.getWorkSchedule(v,t).then((o=>{he(o,e===t,!0)}))},he=(e,t=!0,o=!0)=>{if(e){const a=t,i=e.duration.start_time?e:y;t&&(M.value.startDayWorkSchedule=i),o&&(M.value.endDayWorkSchedule=i),za.resetSpecifyTimeValuesInModel(M,t,o,a)}},ye=e=>{"confirm"==e&&R.value&&le(R.value),oe(!1)},fe=()=>{ae(!1)},be=()=>{ie(!1)},Ce=()=>{var e,t,o,a,i,l,n,r,s,d,c;v!==(null===(e=M.value.employee)||void 0===e?void 0:e.id)&&(v=null===(t=M.value.employee)||void 0===t?void 0:t.id,ue(v)),f!==(null===(o=M.value.leaveType)||void 0===o?void 0:o.id)&&(f=null===(a=M.value.leaveType)||void 0===a?void 0:a.id,me(f)),(null===(i=M.value.leaveType)||void 0===i?void 0:i.isShortTerm)&&b!==(null===(n=null===(l=M.value.leaveType)||void 0===l?void 0:l.selectedEntitlement)||void 0===n?void 0:n.id)&&(b=null===(s=null===(r=M.value.leaveType)||void 0===r?void 0:r.selectedEntitlement)||void 0===s?void 0:s.id,de(null===(d=M.value.leaveType)||void 0===d?void 0:d.selectedEntitlement)),h!==M.value.fromDate&&(M.value.fromDate&&!M.value.toDate&&(M.value.toDate=M.value.fromDate),h=M.value.fromDate,pe(h,g)),g!==M.value.toDate&&(g=M.value.toDate,ve(h,g)),(null===(c=M.value.leaveType)||void 0===c?void 0:c.id)&&se()},Se=e=>{e&&e.length>0?e.length===S.length&&e.join(",")===S.join(",")||(S=e,T.value=za.getDurationOptionsWithoutFullDay(S),D.value=za.getDurationOptions(S),P.value=za.getPartialDayOptions(S),za.getModifiedModelForExcludeOptions(M,S)):S.length>0&&(S=[],D.value=ka,T.value=Ea,P.value=xa)};return(0,i.onMounted)((()=>{z()})),(0,i.watch)((()=>M.value),Ce),{model:M,submitModel:R,schema:X,checkLeaveBalanceAndAssignLeave:te,showLeaveBalanceModal:Y,checkedBalanceTotalAmount:_,showInsufficientLeaveBalanceConfirmationModal:w,insufficientLeaveBalanceConfirmationModalAction:ye,overlappingLeaveData:A,showOverlappingLeaveModal:E,overlappingLeaveModalAction:fe,leaveBalanceModalData:N,displayLeaveBalanceModal:k,leaveBalanceModalAction:be,allowedLeavePeriodOffset:x,showProjectedBalance:q,pageTitle:G,isAssign:l,leaveSaveInProgress:B,leaveAmountSettings:I}}});const eT=(0,Re.Z)(XD,[["render",Qx],["__scopeId","data-v-748d0c65"]]);var tT=eT,oT=(0,i.defineComponent)({name:"AssignLeave",components:{"default-layout":Xc,"leave-form":tT}});const aT=(0,Re.Z)(oT,[["render",Wx]]);var iT=aT;function lT(e,t,o,a,l,n){const r=(0,i.resolveComponent)("leave-form"),s=(0,i.resolveComponent)("default-layout");return(0,i.openBlock)(),(0,i.createBlock)(s,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{"application-type":"apply"})])),_:1})}var nT=(0,i.defineComponent)({name:"ApplyLeave",components:{"default-layout":Xc,"leave-form":tT}});const rT=(0,Re.Z)(nT,[["render",lT]]);var sT=rT;function dT(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-list"),s=(0,i.resolveComponent)("add-event-modal"),d=(0,i.resolveComponent)("delete-event-modal"),c=(0,i.resolveComponent)("default-layout"),m=(0,i.resolveDirective)("set-tab-focus-to-first-element");return(0,i.openBlock)(),(0,i.createBlock)(c,null,{default:(0,i.withCtx)((()=>[(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createElementBlock)("div",null,[(0,i.createVNode)(r,{configurations:e.configurations,"list-items":e.events,"list-highlightRows":e.highlightRows,"filtered-total-records-count":e.totalEventCount,"quick-search-options":e.eventQuickSearch,pagination:e.pagination,"onAddEvent:show":e.addEventButtonPress,onDeleteEvents:t[0]||(t[0]=t=>e.setDeleteEventModalVisibility(!0)),"onUpdate:selected":e.tableRowSelection,"onUpdate:order":e.tableSort,"onPagination:onPrevious":e.selectPreviousPage,"onPagination:onNext":e.selectNextPaginate,"onPagination:onSelectPage":e.selectExactPage,"onPagination:onSelectPerPage":e.selectPerPage,"is-list-loading":e.loadingEventsList},null,8,["configurations","list-items","list-highlightRows","filtered-total-records-count","quick-search-options","pagination","onAddEvent:show","onUpdate:selected","onUpdate:order","onPagination:onPrevious","onPagination:onNext","onPagination:onSelectPage","onPagination:onSelectPerPage","is-list-loading"]),e.addEventModalState?((0,i.openBlock)(),(0,i.createBlock)(s,{key:0,loading:e.addingEvent,editingModel:e.editingEventModel,onSubmitValid:e.createEvent,onKeyup:(0,i.withKeys)(e.toggleAddEventModal,["esc"]),"onUpdate:show":e.toggleAddEventModal},null,8,["loading","editingModel","onSubmitValid","onKeyup","onUpdate:show"])):(0,i.createCommentVNode)("",!0),e.deleteEventModalState?((0,i.openBlock)(),(0,i.createBlock)(d,{key:1,onConfirmationModalAction:t[1]||(t[1]=t=>e.deleteEvent(t))},{messageLine1:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("The selected event(s) will be permanently deleted.")),1)])),_:1})):(0,i.createCommentVNode)("",!0)])),[[m]])])),_:1})}const cT="pimHistoryEvent",mT="pimHistoryEvents";class uT{getEvents(e,t){return e.webservice.call(mT,"GET",[],t)}getAllEvents(e){return e.webservice.call(mT+"?filter[includeDeleted]=1&filter[includeHidden]=1","GET")}createNewEvent(e,t){return e.webservice.call(mT,"POST",t)}updateEvent(e,t,o){return e.webservice.call(cT+"/"+t,"PATCH",o)}deleteSelectedEvents(e,t){return e.webservice.call(mT,"DELETE",{ids:t})}getDataGroupPermissions(e){const t=new Aa;return t.getDataGroupPermissions(e)}}function pT(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-schema-form"),s=(0,i.resolveComponent)("form-modal");return(0,i.openBlock)(),(0,i.createBlock)(s,{style:{width:"90%",maxWidth:"550px"}},{title:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.modalTitle)),1)])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(r,(0,i.mergeProps)({schema:e.schema,model:e.usedModel,"onUpdate:model":t[0]||(t[0]=t=>e.usedModel=t)},e.$attrs),null,16,["schema","model"])])),_:1})}const vT=ce(),hT=function(e,t,o){return function(a){const i=vT(Ie),l=void 0!==o&&""!==o;return(l||!a||gT(a,e))&&!(l&&o&&(e=e.filter((e=>e!==o)),!gT(a,e)||!gT(a,t)))||i}},gT=function(e,t){let o=!0;const a=yT(e);return t.forEach((e=>{yT(e)!==a||(o=!1)})),o},yT=e=>e.trim().toLowerCase().replace(/[*[\]$\-`~!@#%^()_=+{}|;:'",.<>?\s]/g,""),fT=ce();function bT(e,t,o,a){return(0,A.mG)(this,void 0,void 0,(function*(){return{name:"addEventForm",layout:[{type:"grid",props:{cols:1},children:{default:[{name:"name",label:fT("Name"),type:"input",validators:new Map([["required",Oa],["shouldNotExceedCharLength",$a(100)],["shouldHaveUniqueName",hT(o,a,t)]]),props:{placeholder:fT("Event Name")}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"grid",props:{cols:1},children:{default:[{name:"undelete",label:"",type:"custom",component:(0,i.markRaw)(Jo.Z),props:{show:!0,type:Xd.ur,message:fT("This Is a Deleted Event. It Will Be Reactivated.")},visible:!1,hook:(t,o)=>(o.name&&!e&&(t.visible=o.isReactivation),Object.assign({},t))}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"grid",props:{cols:1},children:{default:[{name:"typeIdList",label:fT("Type"),type:"checkboxgroup",validators:new Map([["required",Oa]]),props:{options:[{id:1,label:"Job"},{id:2,label:"Salary"}]}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"divider",style:{margin:"0"}},{type:"action",children:{default:[{name:"required",label:"",type:"custom",component:(0,i.markRaw)(Hd),style:{"margin-right":"auto",padding:"0px"}},{name:"reset",label:fT("Cancel"),type:"button",props:{type:"button",displayType:"ghost"},listeners:{onClick:()=>{this.emit("update:show",!0)}}},{name:"submit",label:fT("Save"),type:"button",hook:(e,t)=>(t.isReactivation?e.label=fT("Reactivate"):e.label=fT("Save"),Object.assign({},e)),style:{"margin-left":"0.5rem"},props:{type:"submit",displayType:"secondary"}}]},style:{"padding-top":"1.2rem"}}]}}))}var CT=bT,ST=(0,i.defineComponent)({name:"AddEventModal",components:{"form-modal":gc,"oxd-schema-form":yc.Z},props:{editingModel:{type:Object,required:!1}},setup(e,t){var o,a;const l=(0,i.ref)([]),n=(0,i.ref)([]),r=(0,i.ref)([]),s=()=>{var e;const t=null===(e=(0,i.getCurrentInstance)())||void 0===e?void 0:e.appContext.config.globalProperties.ngServices,o=new uT;o.getAllEvents(t).then((e=>{const t=e.data.data;t.forEach((e=>{null==e.deleted_at?l.value.push(e.name):(r.value.push(e.name),n.value.push({id:e.id,name:e.name,typeIdList:e.types.map((e=>e.id))}))}))}))};s();const d=(0,i.ref)(Object.assign({},e.editingModel)),c=!!(null===(o=e.editingModel)||void 0===o?void 0:o.id),m=c?"Edit Event":"Add Event",{model:u,schema:p}=(0,fc.Z)(CT.call(t,c,null===(a=e.editingModel)||void 0===a?void 0:a.name,l.value,r.value)),v=c?d:u;return(0,i.watch)(v,((e,t)=>{if(e&&t){let o=!1;if(e.name&&!c&&(o=!gT(e.name,r.value),e.isReactivation=!1,o)){const o=r.value.findIndex((t=>yT(t)===yT(e.name)));e.isReactivation=!0,e.reactivationId=n.value[o].id;const a=n.value[o].typeIdList.map((e=>Number(e)));void 0!==t.typeIdList&&0!==t.typeIdList.length||void 0!==e.typeIdList&&0!==e.typeIdList.length||(e.typeIdList=a)}}})),{usedModel:v,schema:p,modalTitle:m}}});const wT=(0,Re.Z)(ST,[["render",pT]]);var ET,kT=wT;(function(e){e["Job"]="Job",e["Salary"]="Salary"})(ET||(ET={}));const xT={id:void 0,name:"",types:[],typeIdList:[]},NT={visible:!0,listRecordCount:{singleTerm:"Event",multiTerm:"Events"},bulkActions:[{type:"oxd-button",props:{label:"Delete Selected",size:"medium",displayType:"label-danger",iconName:"oxd-trash","icon-size":"extra-small","disabled-tooltip":"You don't have permissions to delete some of the selected events",flow:"bottom"},events:[{type:"click",identifier:"delete-events"}]}],singleActions:[]};var AT=NT;const DT=[{name:"name",sortField:"name",initialSortOrder:"ASC",title:"Event Name",style:{flex:"50%","min-width":"500px","margin-right":"0"}},{name:"eventType",title:"Type",style:{flex:"5%","min-width":"90px","margin-right":"0"}},{name:"action",title:"",style:{flex:"5%","max-width":"100px","margin-right":"0"},cellType:"oxd-table-cell-actions",cellRenderer:"actionsRenderer"}];var TT=DT;const PT={topBar:AT,headers:TT,selectable:!0,addable:!0,pagination:{maxPageLimit:5}};var VT=PT,BT={table:VT};class IT{getListSchema(){const e=(0,i.ref)(JSON.parse(JSON.stringify(BT)));return e}}var LT=(0,i.defineComponent)({name:"EventList",components:{"default-layout":Xc,"oxd-list":Bd.Z,"add-event-modal":kT,"delete-event-modal":kr},directives:{"set-tab-focus-to-first-element":Sr.Z},setup:function(){var e,t,o,a,l,n;const r=(0,i.getCurrentInstance)(),s=(0,Gd.oR)(),d=ce(),c=null===r||void 0===r?void 0:r.appContext.config.globalProperties.$toast,m=null===r||void 0===r?void 0:r.appContext.config.globalProperties.ngServices,u=new uT,p=(0,i.ref)([]),v=(0,i.ref)([]),h=(0,i.ref)(!1),g=(0,i.ref)(!1),y=(0,i.ref)(!1),f=(0,i.ref)(!1),b=(0,i.ref)(0),C=(0,i.ref)(xT),S=()=>{},w=(0,i.ref)({read:!1,create:!1,update:!1,delete:!1}),E=(0,i.ref)({rowIndexes:[],type:em.Ox});s.dispatch("pim/historyEvent/list/init",{sortOrder:"ASC",limit:20,currentPage:1});const k=(0,i.computed)((()=>s.getters["pim/historyEvent/list/getListState"])),x=()=>{C.value=xT,h.value=!h.value},N=e=>{y.value=e},A=e=>{"delete"===e&&O(),y.value=!1},D=e=>{v.value=p.value.filter(((t,o)=>e.indexOf(o)>-1))},T=()=>{h.value=!0},P=e=>(e.typeIdList=e.types.map((e=>e.id)),e.eventType=e.types.map((e=>d(e.name))).join(", "),e.name=d(e.name),e.isSelectable=!e.is_readonly,e),V=()=>{f.value=!0,u.getEvents(m,{limit:k.value.limit,orderBy:k.value.sortOrder,pageNo:k.value.currentPage}).then((e=>{E.value.rowIndexes=[];let t=e.data.data,o=!1;t.forEach((e=>{e=P(e),o=o||!e.is_readonly})),w.value.delete&&(Z.value.table.selectable=o),p.value=t,b.value=e.data.meta.total,f.value=!1})).catch((()=>{f.value=!1,c.error({title:d(kc),message:d(Be)})})).finally((()=>{v.value=[]}))},B=()=>{f.value=!0,u.getDataGroupPermissions({dataGroup:"pim_history_events"}).then((e=>{w.value=Object.assign(Object.assign({},w.value),e),w.value.read?(w.value.create&&(Z.value.table.topBar.singleActions=[{type:"oxd-button",props:{label:"Add Event",size:"medium",displayType:"secondary",iconName:"oxd-add",iconSize:"small",flow:"bottom"},class:"info-color",events:[{type:"click",identifier:"addEvent:show"}]}]),V(),Z.value.table.selectable=w.value.delete):(f.value=!1,m.$state.go("403"))}))};B();const I=e=>{g.value=!1,c.error({title:d(kc),message:d(e)})},L=e=>{g.value=!1,h.value=!1,c.success({title:d(Ec),message:d(e)})},F=()=>{b.value++,E.value.rowIndexes=E.value.rowIndexes.map((e=>e+1)),E.value.rowIndexes.push(0)},z=e=>{g.value=!0,e.id?M(e,e.id):e.isReactivation?M(e,e.reactivationId):u.createNewEvent(m,{name:e.name,types:e.typeIdList}).then((e=>{let t=e.data.data;t=P(t),w.value.delete&&(Z.value.table.selectable=!t.is_readonly),p.value.unshift(t),F(),L(be)})).catch((()=>{I(Ee)}))},M=(e,t)=>{const o={name:e.name,types:e.typeIdList};e.isReactivation&&(o.reactivate=1),u.updateEvent(m,t,o).then((o=>{let a=o.data.data;if(a=P(a),e.isReactivation)w.value.delete&&(Z.value.table.selectable=!a.is_readonly),p.value.unshift(a),F();else{const e=p.value.findIndex((e=>e.id==t));p.value[e]=a,E.value.rowIndexes.push(e)}C.value=xT,L(Se)})).catch((()=>{I(ke)}))},O=()=>{const e=v.value.map((e=>e.id));u.deleteSelectedEvents(m,e).then((()=>{V(),c.success({title:d(Ec),message:d(we)})})).catch((()=>{c.error({title:d(kc),message:d(xe)})}))},R=(e,t,o,a)=>{let i={};if(a.isSelectable){const e={component:"oxd-icon-button",props:{name:"oxd-edit",size:"xx-small",tooltip:"Edit",onClick:()=>{C.value={id:a.id,name:a.name,types:a.types,typeIdList:a.typeIdList.map((e=>Number(e)))},T()}}},t={component:"oxd-icon-button",props:{name:"oxd-trash",size:"xx-small",tooltip:"Delete",onClick:()=>{v.value=[{id:a.id,name:a.name,types:a.types,typeIdList:[]}],y.value=!0}}};i=w.value.update&&w.value.delete?{deleteEvent:t,editEvent:e}:w.value.update?{editEvent:e}:w.value.delete?{deleteEvent:t}:{}}return{props:{header:{cellConfig:Object.assign({},i)},class:"oxd-action-render-button-visibility-on-hover"}}},_=new IT,$=_.getListSchema(),j=null===(o=null===(t=null===(e=$.value)||void 0===e?void 0:e.table)||void 0===t?void 0:t.headers)||void 0===o?void 0:o[0],U=null===(n=null===(l=null===(a=$.value)||void 0===a?void 0:a.table)||void 0===l?void 0:l.headers)||void 0===n?void 0:n[2];j&&(j.initialSortOrder=k.value.sortOrder),U&&"string"===typeof U.cellRenderer&&(U.cellRenderer=R);const Z=(0,i.computed)((()=>$.value)),H=e=>{for(const t in e){const o=e[t];"DEFAULT"!==o&&s.dispatch("pim/historyEvent/list/changeSortOrder",o).then((()=>{s.dispatch("pim/historyEvent/list/jumpToPage",1).then((()=>{V()}))}))}},q=(0,i.computed)((()=>({limit:k.value.limit,pages:[10,20,50,100],currentPage:k.value.currentPage}))),G=()=>{s.dispatch("pim/historyEvent/list/previousPage").then((()=>{V(),window.scrollTo(0,0)}))},W=()=>{s.dispatch("pim/historyEvent/list/nextPage").then((()=>{V(),window.scrollTo(0,0)}))},K=e=>{s.dispatch("pim/historyEvent/list/jumpToPage",e.page).then((()=>{V(),window.scrollTo(0,0)}))},Q=e=>{s.dispatch("pim/historyEvent/list/changeLimit",e.label).then((()=>{s.dispatch("pim/historyEvent/list/jumpToPage",1).then((()=>{V(),window.scrollTo(0,0)}))}))};return(0,i.onUnmounted)((()=>{c.clearAll()})),{addingEvent:g,events:p,selectedEvents:v,totalEventCount:b,configurations:Z,addEventModalState:h,deleteEventModalState:y,editingEventModel:C,getListState:k,pagination:q,dataGroupPermissions:w,loadingEventsList:f,highlightRows:E,selectPreviousPage:G,selectNextPaginate:W,selectExactPage:K,selectPerPage:Q,tableSort:H,setDeleteEventModalVisibility:N,createEvent:z,toggleAddEventModal:x,getEventList:V,tableRowSelection:D,eventQuickSearch:S,deleteEvent:A,deleteEventList:O,actionsRenderer:R,addEventButtonPress:T}}});const FT=(0,Re.Z)(LT,[["render",dT],["__scopeId","data-v-73afea8a"]]);var zT=FT;const MT={class:"vacancy-list-container"};function OT(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-list"),s=(0,i.resolveComponent)("filter-vacancy-modal"),d=(0,i.resolveComponent)("add-vacancy-modal"),c=(0,i.resolveComponent)("import-from-template-modal"),m=(0,i.resolveComponent)("delete-vacancy-confirmation-modal"),u=(0,i.resolveComponent)("recruitment-layout"),p=(0,i.resolveDirective)("set-tab-focus-to-first-element");return(0,i.openBlock)(),(0,i.createBlock)(u,null,{default:(0,i.withCtx)((()=>[(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createElementBlock)("div",MT,[(0,i.createVNode)(r,{ref:"listRef",configurations:e.configurations,"list-items":e.vacancies,"list-highlightRows":e.highlightRows,filteredTotalRecordsCount:e.totalVacanciesCount,"quick-search-options":e.vacancyQuickSearch,"onQuickSearch:onSelect":e.vacancyQuickSearchSelect,"onQuickSearch:onClear":e.vacancyQuickSearchClear,"onQuickSearch:onSearch":e.vacancyQuickSearchKeywordSearch,"side-panel-list":e.sidePanelStatuses,"onSidePanelList:onSelect":e.getVacanciesFilterByStatus,"selected-list-item-id":e.selectedStatusIdFromSidePanel,"onSidePanelList:onHeaderBtnClick":t[0]||(t[0]=t=>e.addVacancyModalState=!0),"onSidePanelList:onHeaderSecondaryBtnClick":t[1]||(t[1]=t=>e.importFromTemplateModalState=!0),"onUpdate:selected":e.tableSelect,"onUpdate:order":e.tableSort,"onFilter:show":e.toggleFilterVacanciesModal,"is-list-loading":e.loadingVacancyList,pagination:e.pagination,"onPagination:onPrevious":e.selectPreviousPage,"onPagination:onNext":e.selectNextPaginate,"onPagination:onSelectPage":e.selectExactPage,"onPagination:onSelectPerPage":e.selectPerPage,onDeleteVacancies:t[2]||(t[2]=t=>e.setDeleteVacanciessModalVisiblity(!0))},null,8,["configurations","list-items","list-highlightRows","filteredTotalRecordsCount","quick-search-options","onQuickSearch:onSelect","onQuickSearch:onClear","onQuickSearch:onSearch","side-panel-list","onSidePanelList:onSelect","selected-list-item-id","onUpdate:selected","onUpdate:order","onFilter:show","is-list-loading","pagination","onPagination:onPrevious","onPagination:onNext","onPagination:onSelectPage","onPagination:onSelectPerPage"]),e.filterVacanciesModalState?((0,i.openBlock)(),(0,i.createBlock)(s,{key:0,onSubmitValid:e.filterVacancies,"quick-search-options":e.vacancyQuickSearch,"onUpdate:show":e.toggleFilterVacanciesModal},null,8,["onSubmitValid","quick-search-options","onUpdate:show"])):(0,i.createCommentVNode)("",!0),e.addVacancyModalState?((0,i.openBlock)(),(0,i.createBlock)(d,{key:1,ref:"addVacancyModalRef",loading:e.isAddVacancyLoading,vacancies:e.allVacancyNames,onSelectJobTitle:e.selectJobTitle,onSelectLocation:e.selectLocation,onSelectSubUnit:e.selectSubUnit,onSubmitValid:e.createVacancy,"onUpdate:show":t[3]||(t[3]=t=>e.addVacancyModalState=!1)},null,8,["loading","vacancies","onSelectJobTitle","onSelectLocation","onSelectSubUnit","onSubmitValid"])):(0,i.createCommentVNode)("",!0),e.importFromTemplateModalState?((0,i.openBlock)(),(0,i.createBlock)(c,{key:2,ref:"importFromTemplateModalRef",loading:e.isImportFromTemplateLoading,vacancies:e.allVacancyNames,onSelectVacancy:e.selectVacancyTemaplate,onSubmitValid:e.createVacancybyImportFromTemplate,"onUpdate:show":t[4]||(t[4]=t=>e.importFromTemplateModalState=!1)},null,8,["loading","vacancies","onSelectVacancy","onSubmitValid"])):(0,i.createCommentVNode)("",!0),e.deleteModalState?((0,i.openBlock)(),(0,i.createBlock)(m,{key:3,vacanciesCount:e.selectedVacancies.length,onConfirmationVacancyModalAction:t[5]||(t[5]=t=>e.deleteVacancyConfirmationModalAction(t))},null,8,["vacanciesCount"])):(0,i.createCommentVNode)("",!0)])),[[p]])])),_:1})}class RT{constructor(){this._ngServices=(0,i.inject)("ngServices")}getVacancies(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call("recruitment/vacancies","GET",[],Object.assign({},e))}getLocations(){var e;const t={required_permissions:{data_group:{name:"recruitment_vacancies",permissions:{canRead:1}}}};return null===(e=this._ngServices)||void 0===e?void 0:e.webservice.call("employees/locations","GET",[],Object.assign({},t))}getLocationsForAddModal(){var e;const t={required_permissions:{data_group:{name:"recruitment_vacancies",permissions:{canRead:1}}}};return null===(e=this._ngServices)||void 0===e?void 0:e.webservice.call("employees/locations?operation=edit","GET",[],Object.assign({},t))}getJobTitles(){var e;return null===(e=this._ngServices)||void 0===e?void 0:e.webservice.get("jobTitles",{},{})}getSubUnits(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.get("subunits",{tree:e},{})}getHiringManagers(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.get("employees",{filter:{employee_name:e},page:{limit:5}},{})}getOperationalCountries(){var e;return null===(e=this._ngServices)||void 0===e?void 0:e.webservice.get("operationalCountries",{},{})}getAllVacancyNames(){var e;return null===(e=this._ngServices)||void 0===e?void 0:e.webservice.get("recruitment/allVacancyNames",{},{})}createVacancy(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call("recruitment/vacancies","POST",e)}deleteVacancies(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.call("recruitment/vacancies","DELETE",{ids:e})}}const _T=ce(),$T={visible:!0,header:{visible:!0,button:{props:{label:"Add Vacancy",displayType:"secondary",size:"long",iconName:"oxd-add",iconSize:"xx-small"},events:[{type:"click",identifier:"get-add-candidates-modal"}]},secondaryButton:{props:{label:_T("Add From a Template"),icon:"oxd-import-templates",size:"extra-large",style:{color:"#76bc21"}}}},body:{visible:!1,button:{label:"All Statuses",labelMini:"Vacancy",iconName:"eye",iconSize:"large",iconStyle:"height: 20px; display: flex; align-items: center;",displayType:"label",doubleLineLabel:!0,style:{"background-color":"#ebfcd6","justify-content":"space-between"}},dropdown:{style:{width:"200px"}},buttonSecondary:{visible:!0,icon:"oxd-info",tooltip:"Vacancy Info",style:"min-width: unset; min-height: unset;"}},list:{visible:!0,bubble:{visible:!0}}};var jT=$T;const UT=ce(),ZT={visible:!0,listRecordCount:{singleTerm:UT("Vacancy"),multiTerm:UT("Vacancies")},bulkActions:[{type:"oxd-button",props:{label:"Delete Selected",size:"medium",displayType:"label-danger",iconName:"oxd-trash","icon-size":"extra-small","disabled-tooltip":"You don't have permissions to delete some of the selected vacancies",flow:"bottom"},events:[{type:"click",identifier:"delete-vacancies"}]}],quickSearch:{visible:!0,placeholder:"Search",clear:!1,style:{width:"261px"},button:{visible:!0,class:"quick-search-btn",style:{"background-color":"rgba(100, 114, 140, 0.1)",padding:"0","min-width":"unset","min-height":"unset",width:"28px",height:"28px"},props:{name:"oxd-search",displayType:"label-info"}}},singleActions:[{type:"oxd-icon-button",props:{size:"medium",displayType:"label-info",name:"funnel",tooltip:"Filter Vacancies",flow:"top"},class:"btn-large",style:{"margin-left":"font-size: 14px","font-size":"unset"},events:[{type:"click",identifier:"filter:show"}]}]};var HT=ZT;const qT=[{name:"vacancyName",title:"Vacancy",sortField:"vacancyName",initialSortOrder:"ASC",style:{flex:"20%","min-width":"90px","margin-right":"0"},cellType:"oxd-table-cell-link-with-pill",cellProps:{link:"candidateVacancyUrl",target:"_self",pillProperty:["jobTitle"]}},{name:"hiringManagers",title:"Hiring Manager",style:{flex:"20%","min-width":"90px","margin-right":"0"},cellType:"oxd-table-cell-link",cellProps:{link:"candidateVacancyUrl",target:"_self"}},{name:"location",title:"Location",sortField:"location",initialSortOrder:"DEFAULT",style:{flex:"15%","min-width":"90px","margin-right":"0"},cellType:"oxd-table-cell-link-with-pill",cellProps:{link:"candidateVacancyUrl",target:"_self",pillProperty:["subunit"]}},{name:"publishedDate",title:"Published Date",sortField:"publishedDate",initialSortOrder:"DEFAULT",style:{flex:"15%","min-width":"100px","margin-right":"0"},cellType:"oxd-table-cell-link",cellProps:{link:"candidateVacancyUrl",target:"_self"}},{name:"status",title:"Status",sortField:"status",initialSortOrder:"DEFAULT",style:{flex:"15%","min-width":"90px","margin-right":"0"},cellType:"oxd-table-cell-link",cellProps:{link:"candidateVacancyUrl",target:"_self"}},{name:"actionForIcons",slot:"footer",title:"",style:{flex:"15%","max-width":"100px"},cellType:"oxd-table-cell-actions",cellRenderer:"actionsRenderer"}];var GT=qT;const WT={leftPanel:jT,topBar:HT,headers:GT,addable:!1,selectable:!1,pagination:{maxPageLimit:5}};var KT=WT,QT={table:KT};class JT{constructor(e){this._app=(0,i.getCurrentInstance)(),this._dataGroupPermissionService=new Aa,this._app=e}getListSchema(){var e;const t=null===(e=this._app)||void 0===e?void 0:e.appContext.config.globalProperties.ngServices,o=(0,i.ref)(JSON.parse(JSON.stringify(QT))),a=o.value.table.topBar;return o.value.table.topBar=[],this.getDataGroupPermissions({dataGroup:"recruitment_vacancies"}).then((e=>{const i=e;i.read?(o.value.table.topBar=a,this.augmentListSpecificSchemaChanges(o,i)):t.$state.go("403")})),o}augmentListSpecificSchemaChanges(e,t){e.value.table.addable=t.create,e.value.table.leftPanel&&(e.value.table.leftPanel.header.visible=!0)}getDataGroupPermissions(e){return this._dataGroupPermissionService.getDataGroupPermissions(e)}}const YT={selectedAllStatusCount:0,selectedNewStatusCount:0,selectedPublishedStatusCount:0,selectedUnpublishedStatusCount:0,selectedClosedStatusCount:0};function XT(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon-button"),s=(0,i.resolveComponent)("oxd-schema-form"),d=(0,i.resolveComponent)("form-modal");return(0,i.openBlock)(),(0,i.createBlock)(d,null,{title:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Filter Vacancies")),1)])),headerActions:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{name:e.drawerSchema.header.charmButton.icon,tooltip:e.drawerSchema.header.charmButton.tooltip,flow:e.drawerSchema.header.charmButton.flow,size:"extra-large",id:"reset-button-id",onClick:e.resetFilters},null,8,["name","tooltip","flow","onClick"])])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(s,(0,i.mergeProps)({schema:e.schema,model:e.model,"onUpdate:model":t[0]||(t[0]=t=>e.model=t),loading:e.isFilterloadingComputed},e.$attrs,{onSubUnitsLoading:t[1]||(t[1]=t=>e.subUnitsLoading=t),onLocationsLoading:t[2]||(t[2]=t=>e.locationsLoading=t)}),null,16,["schema","model","loading"])])),_:1})}function eP(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,{type:"autocomplete",createOptions:e.options,multiple:!0,placeholder:e.$t("Type for hints...")},null,8,["createOptions","placeholder"])}var tP=(0,i.defineComponent)({name:"VacancyAutocomplete",components:{"oxd-input-field":lo.Z},props:{autocompleteType:{type:String,default:""}},setup(e){const t=new RT,o=t=>{const o=t.toLowerCase();return"JOB_TITLE"==e.autocompleteType?new Promise((e=>{const t=a.filter((e=>{const t=e.label.toLowerCase();return t.includes(o)}));e(t)})):"HIRING_MANAGER"==e.autocompleteType?new Promise((e=>{r(o).then((t=>{const o=l;e(o)}))})):void 0};let a=[],l=[];const n=()=>{t.getJobTitles().then((e=>{e.data&&(a=e.data.data.map((e=>({id:e.id,label:e.jobTitleName}))))}))},r=e=>new Promise(((o,a)=>{t.getHiringManagers(e).then((e=>{e.data&&(l=e.data.data.map((e=>({id:e.empNumber,label:e.firstName+" "+e.lastName})))),o(l)})).catch((()=>{l=[],a([])}))}));return(0,i.onBeforeMount)((()=>{"JOB_TITLE"==e.autocompleteType&&n()})),{options:o}}});const oP=(0,Re.Z)(tP,[["render",eP]]);var aP=oP;function iP(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,{type:"treeselect",options:e.options,selectParentsOnChildSelection:e.selectParentsOnChildSelection,countTopmostParents:e.countTopmostParents,disableUncheckedOptions:e.disableUncheckedOptions,removeAllSelection:e.removeAllSelection},null,8,["options","selectParentsOnChildSelection","countTopmostParents","disableUncheckedOptions","removeAllSelection"])}var lP=(0,i.defineComponent)({name:"VacancyTreeSelect",components:{"oxd-input-field":lo.Z},props:{treeSelectType:{type:String,default:""},selectParentsOnChildSelection:{type:Boolean,default:!0},countTopmostParents:{type:Boolean,default:!1},disableUncheckedOptions:{type:Boolean,default:!1},removeAllSelection:{type:Boolean,default:!1}},setup(e){const t=(0,i.getCurrentInstance)(),o=(0,i.ref)([]),a=e=>{var o,a;let i=null===t||void 0===t?void 0:t.parent;while(i){if("oxd-schema-form"==(null===(a=null===(o=i.parent)||void 0===o?void 0:o.type)||void 0===a?void 0:a.name)){i.emit(e,!1);break}i=i.parent}};return(0,i.onMounted)((()=>{const t=new RT,i=()=>{t.getSubUnits(!1).then((e=>{o.value=Zm(e.data.data),a("subUnitsLoading")})).catch((()=>{}))},l=()=>{t.getLocations().then((e=>{o.value=Um(e.data.data),a("locationsLoading")})).catch((()=>{}))};"SubUnit"==e.treeSelectType?i():"Location"==e.treeSelectType&&l()})),{options:o}}});const nP=(0,Re.Z)(lP,[["render",iP]]);var rP=nP;const sP=ce(),dP=()=>{const e=(0,K.Z)(new Date),t=e-20,o=e+20,a=[];for(let i=t;i<o;i++)a.push(i);return a};function cP(e,t,o){return{name:"filterVacancyForm",layout:[{type:"grid",props:{cols:2},children:{default:[{name:"vacanciesFromFilterModal",label:sP("Job Vacancy"),type:"autocomplete",props:{placeholder:sP("Type for hints..."),multiple:!0,clear:!0,createOptions:e},class:"mb-0--oxd-input-group",validators:new Map([["autocompleteInValidMultiselect",_a]])},{name:"includeClosedVacancies",label:"",type:"switch",props:{"option-label":sP("Include Closed Vacancies"),disabled:!1},class:"mb-sm--oxd-input-group",style:{"margin-top":"38px"}},{name:"JobTitlesFromFilterModal",label:sP("Job Title"),type:"custom",component:(0,i.markRaw)(aP),props:{autocompleteType:"JOB_TITLE"},class:"mb-0--oxd-input-group",validators:new Map([["autocompleteInValidMultiselect",_a]])},{name:"hiringManagerFromFilterModal",label:sP("Hiring Manager"),type:"custom",component:(0,i.markRaw)(aP),props:{autocompleteType:"HIRING_MANAGER"},class:"mb-0--oxd-input-group",validators:new Map([["autocompleteInValidMultiselect",_a]])},{name:"treeSelectLocationsFromFilterModal",label:sP("Location"),type:"custom",component:(0,i.markRaw)(rP),props:{treeSelectType:"Location",placeholder:sP("Select Locations..."),selectParentsOnChildSelection:!0,countTopmostParents:!1,disableUncheckedOptions:!1,removeAllSelection:!1},class:"mb-0--oxd-input-group",validators:new Map([])},{name:"treeSelectSubUnitsFromFilterModal",label:sP("Sub Unit"),type:"custom",component:(0,i.markRaw)(rP),props:{treeSelectType:"SubUnit",placeholder:sP("Select Sub Units..."),selectParentsOnChildSelection:!1,countTopmostParents:!0,disableUncheckedOptions:!1,removeAllSelection:!1},class:"mb-0--oxd-input-group",validators:new Map([])}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"grid",props:{cols:2},children:{default:[{name:"publishedDateFrom",label:sP("From"),type:"custom",component:(0,i.markRaw)(_m),validators:new Map([["validDateFormat",ja(t)],["endDateShouldBeAfterStartDate",vi((()=>{var e;return null===(e=o.value)||void 0===e?void 0:e.publishedDateTo}),void 0,{allowSameDate:!0})]]),props:{years:dP()}},{name:"publishedDateTo",label:sP("To"),type:"custom",component:(0,i.markRaw)(_m),validators:new Map([["validDateFormat",ja(t)],["endDateShouldBeAfterStartDate",Xa((()=>{var e;return null===(e=o.value)||void 0===e?void 0:e.publishedDateFrom}),void 0,{allowSameDate:!0})]]),props:{years:dP()}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"divider",style:{margin:"0"}},{type:"action",children:{default:[{name:"reset",label:sP("Cancel"),type:"button",props:{type:"button",displayType:"ghost"},listeners:{onClick:()=>{this.emit("update:show",!0)}}},{name:"submit",label:sP("Search"),type:"button",style:{"margin-left":"0.5rem"},props:{type:"submit",displayType:"secondary"}}]},style:{"padding-top":"1.2rem"}}]}}var mP=cP;const uP={visible:!0,width:"600px",height:"100%",fullHeight:!1,stickyFooter:!0,fixedPosition:!0,position:"right",header:{visible:!0,title:"Filter Candidates",charmButton:{visible:!0,icon:"oxd-refresh",tooltip:"Reset",flow:"bottom"}},footer:{okButton:{label:"Search"}}};var pP=uP,vP=(0,i.defineComponent)({name:"FilterVacanciesModal",components:{"form-modal":gc,"oxd-schema-form":yc.Z,"oxd-icon-button":D.Z},props:{quickSearchOptions:{type:Function}},setup(e,t){const o=(0,Gd.oR)(),a=(0,i.ref)(!0),l=(0,i.ref)(!0),n=(0,i.ref)(!0),r=pP,{userFormat:s}=Im(),d=(0,i.ref)(Object.assign({},o.state.recruitment.vacancy.filters));d.value.includeClosedVacancies=!d.value.excludeClosedVacancies;const{schema:c}=(0,fc.Z)(mP.call(t,e.quickSearchOptions,s,d)),m=()=>{o.dispatch("recruitment/vacancy/resetFilters"),d.value=Object.assign({},o.state.recruitment.vacancy.filters),c.value.layout[0].children.default[1].props.disabled=!1},u=(0,i.computed)((()=>a.value||l.value)),p=(e,t)=>{const o=[];for(const[a,i]of Object.entries(e))for(const[e,l]of Object.entries(t))a===e&&i!==l&&o.push({key:a,oldValue:i,newValue:l});return o};return(0,i.watch)([()=>d.value,()=>c.value],(([e,t],[o,a])=>{if(t&&o.includeClosedVacancies==e.includeClosedVacancies&&Array.isArray(e.vacanciesFromFilterModal)){const t=e.vacanciesFromFilterModal.find((e=>-1==e.statusValue));if(t)d.value.includeClosedVacancies=!0,d.value.excludeClosedVacancies=!1,c.value.layout[0].children.default[1].props.disabled=!0;else{if(a){const t=p(o,e),a=t.findIndex((e=>"vacanciesFromFilterModal"!==e.key))>-1;a||(d.value.includeClosedVacancies=!1,d.value.excludeClosedVacancies=!0)}c.value.layout[0].children.default[1].props.disabled=!1}}}),{immediate:!0}),{model:d,schema:c,drawerSchema:r,isFilterloading:n,subUnitsLoading:a,locationsLoading:l,isFilterloadingComputed:u,resetFilters:m}}});const hP=(0,Re.Z)(vP,[["render",XT],["__scopeId","data-v-572c5c41"]]);var gP=hP;function yP(e,t,o,a,l,n){const r=(0,i.resolveComponent)("confirmation-modal");return(0,i.openBlock)(),(0,i.createBlock)(r,{style:{width:"450px"},headerTitle:"Are you sure?",onConfirmationModalAction:t[0]||(t[0]=t=>e.onConfirm(t)),confirmButtonDisplayType:e.confirmButtonDisplayType,confirmButtonIcon:e.confirmButtonIcon,confirmButtonText:e.confirmButtonText},{messageLine1:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.messageLine1)),1)])),messageLine2:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.messageLine2)),1)])),_:1},8,["confirmButtonDisplayType","confirmButtonIcon","confirmButtonText"])}var fP=(0,i.defineComponent)({name:"DeleteVacancyConfirmationModal",components:{"confirmation-modal":_d},props:{vacanciesCount:{type:Number,default:0,required:!0}},methods:{onConfirm(e){this.$emit("confirmationVacancyModalAction",e)}},computed:{messageLine1(){return`The selected ${this.vacanciesCount>1?"vacancies":"vacancy"} will be permanently deleted.`},messageLine2(){return"Are you sure you want to continue?"},confirmButtonIcon(){return"oxd-trash"},confirmButtonText(){return"Yes, Delete"},confirmButtonDisplayType(){return"label-feedback-danger"}}});const bP=(0,Re.Z)(fP,[["render",yP]]);var CP=bP;function SP(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-schema-form"),s=(0,i.resolveComponent)("form-modal");return(0,i.openBlock)(),(0,i.createBlock)(s,null,{title:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Add Vacancy")),1)])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(r,(0,i.mergeProps)({schema:e.schema,model:e.model,"onUpdate:model":t[0]||(t[0]=t=>e.model=t)},e.$attrs),null,16,["schema","model"])])),_:1})}function wP(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,{type:"select",options:e.options,isLoading:e.isLoading,onKeydown:e.onVacancyKeypress},null,8,["options","isLoading","onKeydown"])}var EP=(0,i.defineComponent)({name:"VacancySelectInput",emits:["selectVacancy"],components:{"oxd-input-field":lo.Z},props:{selectInputType:{type:String,default:""}},setup(e,{emit:t}){const o=ce(),a=(0,i.ref)([]),l=(0,i.ref)(!1),n=(0,i.ref)(""),r=(0,i.ref)(0),s=e=>{if(e.key.length>1)return;const o=a.value.filter((t=>t.label.toLowerCase().startsWith(e.key)));if(o.length>0)if(n.value==e.key){r.value++,r.value==o.length&&(r.value=0);const e=o[r.value];t("selectVacancy",e)}else{const e=o[0];t("selectVacancy",e),r.value=0}n.value=e.key};(0,i.onMounted)((()=>{const t=new RT,o=()=>{t.getLocationsForAddModal().then((e=>{a.value=d(e.data.data)})).catch((()=>{}))},i=()=>{t.getSubUnits(!0).then((e=>{a.value=c(e.data.data)})).catch((()=>{}))},n=()=>{t.getJobTitles().then((e=>{e.data&&(a.value=e.data.data.map((e=>({id:e.id,label:e.jobTitleName}))))}))},r=()=>{l.value=!0;let e={},o={templatesOnly:!0};e.filter=o,t.getVacancies(e).then((e=>{l.value=!1,e.data&&(a.value=e.data.data.map((e=>({id:e.vacancyId,label:e.vacancyTemplateDetails.vacancyTemplateName,vacancyName:e.vacancyName,templateDescription:e.vacancyTemplateDetails.vacancyTemplateDescription}))))})).catch((()=>{l.value=!1}))};"SubUnit"==e.selectInputType?i():"Location"==e.selectInputType?o():"JobTitle"==e.selectInputType?n():"Template"==e.selectInputType&&r()}));const d=e=>{let t=[];function a(e,t){return e.country.code<t.country.code?-1:e.country.code>t.country.code?1:0}e.sort(a);let i="";for(const l of e){if(i&&l.country.code==i){let e={};e.label=o(l.name),e.id=Number(l.id),e._indent=3,t.push(e)}else{let e={},a={};a.id=1e4*Number(l.id),a.label=o(l.country.name),a._indent=0,a._disabled=!0,t.push(a),e.label=o(l.name),e.id=Number(l.id),e._indent=3,t.push(e)}i=l.country.code}return t},c=e=>{let t=[];for(let o of e){let e={};e.id=o.id,e.label=o.name,e._indent=3*(o.level-1),t.push(e)}return t};return{options:a,isLoading:l,onVacancyKeypress:s}}});const kP=(0,Re.Z)(EP,[["render",wP],["__scopeId","data-v-e116b512"]]);var xP=kP;const NP=ce(),AP=function(e){return function(t){return!e.includes(t.toLowerCase().trim())||NP("Vacancy name already exists")}};function DP(e,t,o){return(0,A.mG)(this,void 0,void 0,(function*(){yield e;return{name:"addVacancyForm",layout:[{type:"grid",props:{cols:2},children:{default:[{name:"vacancyName",label:NP("Vacancy"),type:"input",value:"",props:{placeholder:NP("Type Vacancy Name...")},validators:new Map([["required",Oa],["shouldNotExceedCharLength",$a(100)],["existingVacancyName",AP(o.map((e=>e.name.toLowerCase().trim())))]])},{name:"jobTitle",label:NP("Job Title"),type:"custom",component:(0,i.markRaw)(xP),props:{placeholder:NP("Select Job Title..."),selectInputType:"JobTitle"},class:"mb-0--oxd-input-group",validators:new Map([["required",Oa],["autocompleteInValidMultiselect",_a]]),listeners:{onSelectVacancy:e=>{this.emit("selectJobTitle",e)}}},{name:"location",label:NP("Location"),type:"custom",component:(0,i.markRaw)(xP),props:{placeholder:NP("Select Location..."),selectInputType:"Location"},class:"mb-0--oxd-input-group",validators:new Map([["required",Oa]]),listeners:{onSelectVacancy:e=>{this.emit("selectLocation",e)}}},{name:"subUnit",label:NP("Sub Unit"),type:"custom",component:(0,i.markRaw)(xP),props:{placeholder:NP("Select Sub Unit..."),selectInputType:"SubUnit"},class:"mb-0--oxd-input-group",validators:new Map([]),listeners:{onSelectVacancy:e=>{this.emit("selectSubUnit",e)}}},{name:"hiringManager",label:NP("Hiring Manager"),type:"custom",component:(0,i.markRaw)(aP),props:{autocompleteType:"HIRING_MANAGER"},class:"mb-0--oxd-input-group",validators:new Map([["required",Oa],["autocompleteInValidMultiselect",_a]])},{name:"numberOfPositions",label:NP("Number of Positions"),type:"input",value:"",props:{placeholder:NP("Type Number of Positions...")},validators:new Map([["digitsOnly",qa],["shouldNotExceedCharLength",$a(4)]])}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"grid",props:{cols:1},children:{default:[{name:"requestConsent",label:"",type:"switch",value:!1,props:{"option-label":NP("Request consent to keep candidate data for later processing")},class:"mb-sm--oxd-input-group"},{name:"resumeRequired",label:"",type:"switch",value:!0,props:{"option-label":NP("Resume Required")},class:"mb-sm--oxd-input-group"}]},style:{"margin-top":"25px","margin-left":"-10px","margin-right":"-10px"}},{type:"divider",style:{margin:"0"}},{type:"action",children:{default:[{name:"required",label:"",type:"custom",component:(0,i.markRaw)(Hd),style:{"margin-right":"auto",padding:"0px"}},{name:"reset",label:NP("Cancel"),type:"button",props:{type:"button",displayType:"ghost"},listeners:{onClick:()=>{this.emit("update:show",!0)}}},{name:"submit",label:NP("Save"),type:"button",style:{"margin-left":"0.5rem"},props:{type:"submit",displayType:"secondary"}}]},style:{"padding-top":"1.2rem"}}]}}))}var TP=DP,PP=(0,i.defineComponent)({name:"AddVacancyModal",components:{"form-modal":gc,"oxd-schema-form":yc.Z},props:{vacancies:{type:Array,default:()=>[],required:!0}},setup(e,t){const{settings:o}=vu(),{userFormat:a}=Im(),{model:i,schema:l}=(0,fc.Z)(TP.call(t,o,a,e.vacancies));return{model:i,schema:l,props:e}}});const VP=(0,Re.Z)(PP,[["render",SP]]);var BP=VP;function IP(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-schema-form"),s=(0,i.resolveComponent)("form-modal");return(0,i.openBlock)(),(0,i.createBlock)(s,{"max-width":"600px"},{title:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Import Vacancy Information From Template")),1)])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(r,(0,i.mergeProps)({schema:e.schema,model:e.model,"onUpdate:model":t[0]||(t[0]=t=>e.model=t)},e.$attrs),null,16,["schema","model"])])),_:1})}const LP=ce();function FP(e){return(0,A.mG)(this,void 0,void 0,(function*(){return{name:"importVacancyForm",layout:[{type:"grid",props:{cols:1},children:{default:[{name:"template",label:LP("Template Name"),type:"custom",component:(0,i.markRaw)(xP),props:{placeholder:LP("Select Template..."),selectInputType:"Template"},class:"mb-0--oxd-input-group",validators:new Map([["required",Oa]]),listeners:{onSelectVacancy:e=>{this.emit("selectVacancy",e)}}},{name:"templateDescription",label:LP("Description"),type:"input",value:"",visible:!1,props:{disabled:!0,placeholder:LP("")}},{name:"vacancyName",visible:!1,label:LP("Vacancy Name"),type:"input",props:{placeholder:LP("Type Vacancy Name...")},value:"controller vacancy from template",validators:new Map([["required",Oa],["shouldNotExceedCharLength",$a(100)],["existingVacancyName",AP(e.map((e=>e.name.toLowerCase().trim())))]])},{name:"importWorkflow",label:"",type:"switch",value:!1,props:{"option-label":LP("Import Workflow Information")},class:"mb-sm--oxd-input-group",style:{"margin-bottom":"-10px","margin-top":"25px"}},{name:"importJobPostingData",label:"",type:"switch",value:!1,props:{"option-label":LP("Import Job Posting Information")},class:"mb-sm--oxd-input-group"}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"divider",style:{margin:"0"}},{type:"action",children:{default:[{name:"required",label:"",type:"custom",component:(0,i.markRaw)(Hd),style:{"margin-right":"auto",padding:"0px"}},{name:"reset",label:LP("Cancel"),type:"button",props:{type:"button",displayType:"ghost"},listeners:{onClick:()=>{this.emit("update:show",!0)}}},{name:"submit",label:LP("Import"),type:"button",style:{"margin-left":"0.5rem"},props:{type:"submit",displayType:"secondary"}}]},style:{"padding-top":"1.2rem"}}]}}))}var zP=FP,MP=(0,i.defineComponent)({name:"ImportFromTemplateModal",components:{"form-modal":gc,"oxd-schema-form":yc.Z},props:{vacancies:{type:Array,default:()=>[],required:!0}},setup(e,t){const{model:o,schema:a}=(0,fc.Z)(zP.call(t,e.vacancies));return(0,i.watch)((()=>{var e;return null===(e=o.value)||void 0===e?void 0:e.template}),(()=>{var e;(null===(e=o.value)||void 0===e?void 0:e.template)&&(o.value.template.templateDescription&&(a.value.layout[0].children.default[1].visible=!0,o.value.templateDescription=o.value.template.templateDescription),a.value.layout[0].children.default[2].visible=!0,o.value.vacancyName=o.value.template.vacancyName)}),{immediate:!0}),{model:o,schema:a,props:e}}});const OP=(0,Re.Z)(MP,[["render",IP]]);var RP=OP,_P=(0,i.defineComponent)({directives:{"set-tab-focus-to-first-element":Sr.Z},components:{"oxd-list":Bd.Z,"filter-vacancy-modal":gP,"delete-vacancy-confirmation-modal":CP,"add-vacancy-modal":BP,"import-from-template-modal":RP,"recruitment-layout":Xc},setup:function(){const e=(0,Gd.oR)(),t=(0,i.getCurrentInstance)(),o=ce(),a=null===t||void 0===t?void 0:t.appContext.config.globalProperties.$toast,l=(0,i.ref)(!1),n=(0,i.ref)([]),r=new RT,s=(0,i.ref)([]),d=(0,i.ref)(0),c=(0,i.ref)(0),m=new JT(t),u=(0,i.ref)([]),p=(0,i.ref)(!1),v=(0,i.ref)(!1),h=(0,i.ref)(!1),g=(0,i.ref)(!1),y=(0,i.ref)(!1),f=(0,i.ref)([]),b=(0,i.ref)(null),C=" ("+String(o("Closed"))+")",S=" ("+String(o("Unpublished"))+")",w=(0,i.ref)(null),E=(0,i.ref)(null),k=(0,i.ref)(Object.assign({},YT)),x=(0,i.ref)({rowIndexes:[],type:em.Ox}),N=(t,a,i,l)=>{const n=l.eventTypes.map((e=>({label:o(e.eventTitle),count:e.candidateCount,context:e.eventId.includes(",")?e.eventId.split(",")[0]:e.eventId}))),r={component:"oxd-table-dropdown",props:Object.assign(Object.assign({},l.eventTypes.length>0&&{options:n}),{disabled:0==l.eventTypes.length,style:{"margin-left":"auto"},class:`${0===l.eventTypes.length&&"hide-table-dropdown"}`,iconName:"oxd-multi-user",iconSize:"small",tooltip:0!=l.eventTypes.length?o("View Candidates"):"",onClick:e=>{window.location.href=`#/noncore/recruitment/candidatePipelineStageComparison/vacancyId/${l.vacancyId}/eventId/${e.context}`}})},s={component:"oxd-icon-button",props:{style:{"margin-left":"0px"},label:"Settings",displayType:"label",size:"xx-small",name:"gear",tooltip:o("Settings"),onClick:t=>{e.getters["recruitment/vacancy/GetState"].filters.excludeClosedVacancies?e.dispatch("recruitment/vacancy/resetFilters").then((()=>{window.location.href=`#/noncore/recruitment/manageVacancyWorkflow/vacancyId/${l.vacancyId}`})):e.dispatch("recruitment/vacancy/resetFilters").then((()=>{e.dispatch("recruitment/vacancy/changeFilterField",{field:"excludeClosedVacancies",value:!1}).then((()=>{window.location.href=`#/noncore/recruitment/manageVacancyWorkflow/vacancyId/${l.vacancyId}`}))}))}}};return{props:{class:"oxd-action-render-button-visibility-on-hover",header:{cellConfig:Object.assign(Object.assign({},l.permissions.read&&{viewCandidates:r}),l.permissions.update&&{settings:s})}}}},A=m.getListSchema(),D=(0,i.computed)((()=>e.getters["recruitment/vacancy/GetState"].orderField)),T=(0,i.computed)((()=>e.getters["recruitment/vacancy/GetState"].orderBy));let P=A.value.table.headers.find((e=>"actionForIcons"===e.name));P&&"string"===typeof P.cellRenderer&&(P.cellRenderer=N);const V=()=>{A.value.table.selectable=!1;for(const e of s.value)if(e.isSelectable){A.value.table.selectable=!0;break}},B=(0,i.computed)((()=>(V(),A.value)));let I=null;const L=(0,i.computed)((()=>({limit:e.state.recruitment.vacancy.limit,pages:[10,20,50,100],currentPage:e.state.recruitment.vacancy.currentPage}))),F=()=>{e.dispatch("recruitment/vacancy/previousPage"),R(X(e.getters["recruitment/vacancy/GetState"]),!1),window.scrollTo(0,0)},z=()=>{e.dispatch("recruitment/vacancy/nextPage"),R(X(e.getters["recruitment/vacancy/GetState"]),!1),window.scrollTo(0,0)},M=t=>{e.dispatch("recruitment/vacancy/jumpToPage",t.page),R(X(e.getters["recruitment/vacancy/GetState"]),!1),window.scrollTo(0,0)},O=t=>{e.dispatch("recruitment/vacancy/changeLimit",t.label),e.dispatch("recruitment/vacancy/jumpToPage",1),R(X(e.getters["recruitment/vacancy/GetState"]),!1),window.scrollTo(0,0)},R=(t,i)=>{l.value=!0,r.getVacancies(t).then((t=>{x.value.rowIndexes=[],u.value=[...t.data.meta.allStatuses],s.value=q(t.data.data),i&&e.dispatch("recruitment/vacancy/updateMetaData",_(t.data.meta)),I&&e.dispatch("recruitment/vacancy/updateMetaData",I),I=null,K(e.getters["recruitment/vacancy/GetMetaData"]),U(e.getters["recruitment/vacancy/GetMetaData"],e.getters["recruitment/vacancy/AppliedFilters"].status),0===s.value.length&&a.info({title:o(Nc),message:o(Ae)})})).catch((()=>{a.error({title:"Error",message:"Error on processing the request"})})).finally((()=>{l.value=!1}))},_=e=>{let t={count:e.count,statusWithCount:{new:e.statusWithCount.New?e.statusWithCount.New:0,published:e.statusWithCount.Published?e.statusWithCount.Published:0,unpublished:e.statusWithCount.Unpublished?e.statusWithCount.Unpublished:0,closed:e.statusWithCount.Closed?e.statusWithCount.Closed:0}};return t},$=()=>{let t=e.getters["recruitment/vacancy/GetMetaData"],o={count:t.count-k.value.selectedAllStatusCount,statusWithCount:{new:t.statusWithCount.new-k.value.selectedNewStatusCount,published:t.statusWithCount.published-k.value.selectedPublishedStatusCount,unpublished:t.statusWithCount.unpublished-k.value.selectedUnpublishedStatusCount,closed:t.statusWithCount.closed-k.value.selectedClosedStatusCount}};e.dispatch("recruitment/vacancy/updateMetaData",o)},j=()=>{let t=e.getters["recruitment/vacancy/GetMetaData"],o={count:Number(t.count)+1,statusWithCount:{new:Number(t.statusWithCount.new)+1,published:t.statusWithCount.published,unpublished:t.statusWithCount.unpublished,closed:t.statusWithCount.closed}};e.dispatch("recruitment/vacancy/updateMetaData",o)},U=(e,t)=>{null==t?d.value=e.count:1==t?d.value=e.statusWithCount.new:2==t?d.value=e.statusWithCount.published:3==t?d.value=e.statusWithCount.unpublished:-1==t&&(d.value=e.statusWithCount.closed)},{jsDisplayFormat:Z,locale:H}=Im(),q=e=>{const t=e.map((e=>{var t;const a=o((null===(t=u.value.find((t=>t.statusValue==e.statusId)))||void 0===t?void 0:t.name.toUpperCase())||""),i=e.publishedTime?(0,se.p6)(new Date(e.publishedTime.substring(0,10)),Z,{locale:H}):o("Not Available"),l={vacancyId:Number(e.vacancyId),vacancyName:e.vacancyName,statusValue:e.statusId,jobTitle:e.jobTitle.title,location:e.location.name,subunit:e.subunit.subunit,status:a,publishedDate:i,hiringManagers:G(e.hiringManager),permissions:e.permissions,isSelectable:!!e.permissions.delete,eventTypes:e.eventTypes?e.eventTypes:[],candidateVacancyUrl:`/client/#/recruitment/candidates/${e.vacancyId}`};return l}));return t},G=e=>{let t="";for(let a=0;a<e.length;a++){const i=Boolean(e[a].termination_id);t+=`${e[a].firstName} ${e[a].lastName}${i?" ("+o("Past Employee")+")":""}`,t+=a==e.length-1?"":", "}return t},W=(0,i.ref)([]),K=t=>{W.value=[],W.value.push({id:0,statusValue:0,label:"All Status",count:t.count,style:{backgroundColor:"rgba(105, 118, 145, 0.1)",color:"rgb(105, 118, 145)"},displayOrder:1}),W.value.push({id:1,statusValue:1,label:"New",count:t.statusWithCount.new,style:{backgroundColor:"rgba(31, 111, 253, 0.1)",color:"rgb(31, 111, 253)"},displayOrder:2}),W.value.push({id:2,statusValue:2,label:"Published",count:t.statusWithCount.published,style:{backgroundColor:"rgba(237, 125, 48, 0.1)",color:"rgb(237, 125, 48)"},displayOrder:4}),W.value.push({id:3,statusValue:3,label:"Unpublished",count:t.statusWithCount.unpublished,style:{backgroundColor:"rgba(197, 122, 253, 0.1)",color:"rgb(197, 122, 253)"},displayOrder:3}),e.getters["recruitment/vacancy/AppliedFilters"].excludeClosedVacancies||W.value.push({id:-1,statusValue:-1,label:"Closed",count:t.statusWithCount.closed,style:{backgroundColor:"rgba(237, 125, 48, 0.1)",color:"rgb(237, 125, 48)"},displayOrder:5}),c.value=Q(e.getters["recruitment/vacancy/AppliedFilters"].status)},Q=e=>{let t=e||0,o=W.value.find((e=>e.statusValue==t));return o.id},J=t=>{c.value=t.id,0!=t.statusValue?e.dispatch("recruitment/vacancy/changeFilterField",{field:"status",value:t.statusValue}):e.dispatch("recruitment/vacancy/changeFilterField",{field:"status",value:null}),e.dispatch("recruitment/vacancy/jumpToPage",1);let o=X(e.getters["recruitment/vacancy/GetState"]),a=0==t.statusValue;R(o,a)},Y=e=>{var t;let a=null===(t=e.vacancyName)||void 0===t?void 0:t.lastIndexOf(o(C)),i=a&&a>=0?String(e.vacancyName).substring(0,a)+"":e.vacancyName;return{vacancies:e.vacancies,vacancyName:i,titles:e.titles,hiringManager:e.hiringManager,locations:e.locations,subUnits:e.subUnits,status:e.status,publishedDateFrom:e.publishedDateFrom,publishedDateTo:e.publishedDateTo,excludeClosedVacancies:e.excludeClosedVacancies}},X=e=>{let t={};return t.filter=Y(e.filters),t.include=e.include,t.limit=e.limit,t.orderBy=e.orderBy,t.orderField=e.orderField,t.pageNo=e.currentPage,t},ee=t=>{let o="name";for(const a in t)"DEFAULT"!=t[a]&&(o="vacancyName"==a?"name":"jobTitle"==a?"job_title":a,e.dispatch("recruitment/vacancy/changeSortField",o),e.dispatch("recruitment/vacancy/changeSortOrder",t[a]),e.dispatch("recruitment/vacancy/jumpToPage",1),R(X(e.getters["recruitment/vacancy/GetState"]),!1))},te=e=>{I=null;let t={},o={};return o.vacancyName=e,o.excludeClosedVacancies=!1,t.filter=o,t.limit=5,new Promise((e=>{r.getVacancies(t).then((t=>{e(t.data.data.map((e=>{const t=-1==e.statusId?e.vacancyName+C:3==e.statusId?e.vacancyName+S:e.vacancyName;return{id:parseInt(e.vacancyId),label:t,candidateName:-1==e.statusId?e.vacancyName+C:e.vacancyName,statusValue:e.statusId}})))})).catch((()=>{e([])}))}))},oe=t=>{const o="-1"!==t.statusValue;e.dispatch("recruitment/vacancy/resetFilters"),e.dispatch("recruitment/vacancy/changeFilterField",{field:"excludeClosedVacancies",value:o}),e.dispatch("recruitment/vacancy/changeFilterField",{field:"vacancies",value:[t.id]}),e.dispatch("recruitment/vacancy/changeFilterField",{field:"vacancyName",value:t.label}),e.dispatch("recruitment/vacancy/changeFilterField",{field:"vacanciesFromFilterModal",value:[{id:t.id,label:t.label,statusValue:Number(t.statusValue)}]}),e.dispatch("recruitment/vacancy/jumpToPage",1),R(X(e.getters["recruitment/vacancy/GetState"]),!0)},ae=t=>{let o=t||b.value.quickSearch.$refs.autocompleteInput.searchTerm;e.dispatch("recruitment/vacancy/resetFilters"),e.dispatch("recruitment/vacancy/changeFilterField",{field:"excludeClosedVacancies",value:!1}),e.dispatch("recruitment/vacancy/changeFilterField",{field:"vacancyName",value:o||null}),e.dispatch("recruitment/vacancy/jumpToPage",1),R(X(e.getters["recruitment/vacancy/GetState"]),!0)},ie=()=>{let t={},o={excludeClosedVacancies:!1};t.filter=o,t.limit=1,r.getVacancies(t).then((e=>{I=_(e.data.meta)})).catch((()=>{a.error({title:"Error",message:Be})})),e.dispatch("recruitment/vacancy/changeFilterField",{field:"vacancyName",value:null}),e.dispatch("recruitment/vacancy/changeFilterField",{field:"vacancies",value:null}),e.dispatch("recruitment/vacancy/changeFilterField",{field:"vacanciesFromFilterModal",value:null})},le=e=>{k.value=Object.assign({},YT),k.value.selectedAllStatusCount=e.length,f.value=s.value.filter(((t,o)=>e.indexOf(o)>-1&&(1==t.statusValue?k.value.selectedNewStatusCount++:2==t.statusValue?k.value.selectedPublishedStatusCount++:3==t.statusValue?k.value.selectedUnpublishedStatusCount++:-1==t.statusValue&&k.value.selectedClosedStatusCount++,!0)))},ne=e=>{"confirm"===e&&de(),re(!1)},re=e=>{y.value=e},de=()=>{const t=f.value.map((e=>e.vacancyId));r.deleteVacancies(t).then((()=>{$(),R(X(e.getters["recruitment/vacancy/GetState"]),!1),De(),a.success({title:o(Ec),message:o(we)})})).catch((()=>{a.error({title:o(fe),message:o(xe)})}))},me=()=>{p.value=!p.value},ue=()=>{const e=b.value;e&&(e.state.quickSearchTerm=null,e.state.selectedQuickSearch=null,e.state.quickSearchTriggered=!1,e.quickSearch.$refs.autocompleteInput.searchTerm=null)},pe=t=>{ue();let o={};o.excludeClosedVacancies=!t.includeClosedVacancies,o.publishedDateFrom=t.publishedDateFrom,o.publishedDateTo=t.publishedDateTo,o.treeSelectSubUnitsFromFilterModal=t.treeSelectSubUnitsFromFilterModal,o.treeSelectLocationsFromFilterModal=t.treeSelectLocationsFromFilterModal,o.vacancies=t.vacanciesFromFilterModal&&t.vacanciesFromFilterModal.length>0?t.vacanciesFromFilterModal.map((e=>e.id)):null,o.hiringManager=t.hiringManagerFromFilterModal&&t.hiringManagerFromFilterModal.length>0?t.hiringManagerFromFilterModal.map((e=>e.id)):null,o.titles=t.JobTitlesFromFilterModal&&t.JobTitlesFromFilterModal.length>0?t.JobTitlesFromFilterModal.map((e=>e.id)):null,o.subUnits=t.treeSelectSubUnitsFromFilterModal&&t.treeSelectSubUnitsFromFilterModal.length>0?t.treeSelectSubUnitsFromFilterModal.map((e=>Number(e))):null,o.locations=t.treeSelectLocationsFromFilterModal&&t.treeSelectLocationsFromFilterModal.length>0?t.treeSelectLocationsFromFilterModal.map((e=>{if(e.includes("L__"))return Number(e.replace("L__",""))})):null,o.JobTitlesFromFilterModal=t.JobTitlesFromFilterModal,o.vacanciesFromFilterModal=t.vacanciesFromFilterModal,o.hiringManagerFromFilterModal=t.hiringManagerFromFilterModal,e.dispatch("recruitment/vacancy/jumpToPage",1),e.dispatch("recruitment/vacancy/applyFilters",o),R(X(e.getters["recruitment/vacancy/GetState"]),!0),me()},ve=()=>{d.value++,x.value.rowIndexes=x.value.rowIndexes.map((e=>e+1)),x.value.rowIndexes.push(0)},he=e=>{let t={};return t.copyFromTemplate=(!1).toString(),t.vacancyName=e.vacancyName,t.jobTitle=Number(e.jobTitle["id"]),t.subUnit=e.subUnit?Number(e.subUnit["id"]):void 0,t.location=Number(e.location["id"]),t.hiringManager=e.hiringManager.map((e=>Number(e.id))),e.numberOfPositions>=0&&""!==e.numberOfPositions&&(t.noOfPositions=Number(e.numberOfPositions)),t.requestConsent=e.requestConsent.toString(),t.resumeRequired=e.resumeRequired.toString(),t},ge=e=>{let t={};return t.vacancyId=Number(e.template.id),t.copyFromTemplate=(!0).toString(),t.vacancyName=e.vacancyName,t.importWorkflow=e.importWorkflow.toString(),t.importJobPostingData=e.importJobPostingData.toString(),t},ye=e=>{let t=q([e])[0];s.value=[t,...s.value]},Ce=(0,i.ref)(!1),Se=t=>{let i=he(t);Ce.value=!0,r.createVacancy(i).then((t=>{let i=t.data.data;j(),K(e.getters["recruitment/vacancy/GetMetaData"]),ye(t.data.data),ve();const l={id:i.vacancyId,name:i.vacancyName};n.value.push(l),a.success({title:o(Ec),message:o(be)})})).catch((()=>{a.error({title:o(fe),message:o(Ee)})})).finally((()=>{Ce.value=!1,v.value=!1}))},ke=(0,i.ref)(!1),Ne=t=>{let i=ge(t);ke.value=!0,r.createVacancy(i).then((t=>{const i=t.data.data;j(),e.dispatch("recruitment/vacancy/resetFilters").then((()=>{window.location.href=`#/noncore/recruitment/addJobVacancy/vacancyId/${i.vacancyId}`})).catch((()=>{})),a.success({title:o(Ec),message:o(be)})})).catch((()=>{a.error({title:o(fe),message:o(Ee)})})).finally((()=>{h.value=!1,ke.value=!1}))},De=()=>{A.value.table.addable&&r.getAllVacancyNames().then((e=>{n.value=[...e.data.data]})).catch((()=>{}))},Te=()=>{var t;let o=X(e.getters["recruitment/vacancy/GetState"]);(null===(t=o.filter)||void 0===t?void 0:t.status)?R(o,!1):R(o,!0)},Pe=e=>{const t=w.value;t&&(t.model.template=e)},Ve=e=>{const t=E.value;t&&(t.model.jobTitle=e)},Ie=e=>{const t=E.value;t&&(t.model.location=e)},Le=e=>{const t=E.value;t&&(t.model.subUnit=e)};return Te(),(0,i.watch)((()=>[D.value,T.value]),(()=>{A.value.table.headers.map((e=>{e.sortField&&(e.initialSortOrder="DEFAULT",(e.name===D.value||"vacancyName"===e.name&&"name"===D.value)&&(e.initialSortOrder=T.value))}))}),{immediate:!0}),(0,i.watch)((()=>{var e;return null===(e=b.value)||void 0===e?void 0:e.quickSearch}),(()=>{if(b.value.quickSearch){const t=b.value;t.quickSearch.$refs.autocompleteInput.searchTerm=e.getters["recruitment/vacancy/GetState"].filters.vacancyName?e.getters["recruitment/vacancy/GetState"].filters.vacancyName:null,t.state.quickSearchTriggered=!0}}),{immediate:!1}),(0,i.watch)((()=>A.value.table.addable),(()=>{A.value.table.addable&&De()}),{immediate:!0}),{configurations:B,vacancies:s,totalVacanciesCount:d,sidePanelStatuses:W,loadingVacancyList:l,addVacancyModalState:v,pagination:L,deleteModalState:y,selectedVacancies:f,listRef:b,importFromTemplateModalState:h,isImportFromTemplateLoading:ke,selectedStatusIdFromSidePanel:c,filterVacanciesModalState:p,filteringvacancies:g,highlightRows:x,allVacancyNames:n,getVacanciesFilterByStatus:J,selectPreviousPage:F,selectNextPaginate:z,selectExactPage:M,selectPerPage:O,vacancyQuickSearch:te,vacancyQuickSearchSelect:oe,vacancyQuickSearchKeywordSearch:ae,vacancyQuickSearchClear:ie,tableSelect:le,toggleFilterVacanciesModal:me,filterVacancies:pe,tableSort:ee,setDeleteVacanciessModalVisiblity:re,deleteVacancyConfirmationModalAction:ne,createVacancy:Se,createVacancybyImportFromTemplate:Ne,selectedStatusesCount:k,tempMetaDataOnSearchClear:I,updateTotalRecordsCount:U,getVacancies:R,createMetaData:_,createSidePanelStatuses:K,mapResponseToVacancyObjetcs:q,isAddVacancyLoading:Ce,selectVacancyTemaplate:Pe,importFromTemplateModalRef:w,addVacancyModalRef:E,selectJobTitle:Ve,selectLocation:Ie,selectSubUnit:Le}}});const $P=(0,Re.Z)(_P,[["render",OT],["__scopeId","data-v-dc1e36c6"]]);var jP=$P;function UP(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-list"),s=(0,i.resolveComponent)("default-layout");return(0,i.openBlock)(),(0,i.createBlock)(s,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{configurations:e.listSchema,"filtered-total-records-count":e.items.length,"list-items":e.items,"is-list-loading":e.loading},null,8,["configurations","filtered-total-records-count","list-items","is-list-loading"])])),_:1})}const ZP={visible:!0,listRecordCount:{singleTerm:"Event",multiTerm:"Events"},bulkActions:[{type:"oxd-button",props:{label:"Delete Selected",size:"medium",displayType:"label-danger",iconName:"oxd-trash","icon-size":"extra-small","disabled-tooltip":"You don't have permissions to delete some of the selected events",flow:"bottom"},events:[{type:"click",identifier:"delete-events"}]}],singleActions:[]};var HP=ZP;const qP=[{name:"name",title:"Project name"}];var GP=qP;const WP={topBar:HP,headers:GP,selectable:!0,addable:!0,pagination:{maxPageLimit:5}};var KP=WP,QP={table:KP};const JP="projects";class YP{getProjects(e,t){return e.webservice.call(JP,"GET",[],t)}}const XP=new YP;class eV{getListSchema(){const e=(0,i.ref)(JSON.parse(JSON.stringify(QP)));return e}getProjects(e){return XP.getProjects(e,{}).then((e=>e.data.data))}}var tV=(0,i.defineComponent)({name:"ProjectList",components:{"default-layout":Xc,"oxd-list":Bd.Z},setup(){const e=new eV,t=e.getListSchema(),o=(0,i.inject)("ngServices"),a=(0,i.ref)([]),l=(0,i.ref)(!1);return(0,i.onMounted)((()=>{l.value=!0,e.getProjects(o).then((e=>{a.value=e,l.value=!1}))})),{listSchema:t,items:a,loading:l}}});const oV=(0,Re.Z)(tV,[["render",UP]]);var aV=oV;const iV={class:"dashboard-widget action-center-widget"},lV={class:"widget-header"},nV={class:"widget-header-text"},rV={class:"dashboard-widget-body"},sV={class:"section-info"},dV={style:{display:"flex","justify-content":"space-between"}},cV={style:{padding:"6px","z-index":"1"}},mV={class:"social-button-wrapper",style:{"z-index":"1"}},uV=["src"],pV={key:2,class:"inactive-label"},vV={class:"employee-details"},hV=["tooltip"],gV={key:1,class:"emp-name"},yV={key:2,class:"emp-designation"},fV=["tooltip"],bV={key:1},CV={key:3,class:"emp-location"},SV={key:0,class:"section-info"},wV={class:"section-data"},EV={key:1,class:"section-info"},kV={class:"section-data"},xV={key:2,class:"section-info"},NV={class:"section-data"},AV={key:0,class:"section-info"},DV={class:"section-data"},TV={key:1,class:"section-info"},PV={class:"section-data"},VV={key:2,class:"section-info"},BV={class:"section-data"},IV={class:"section-info"},LV={key:0,class:"section-data-status-active"},FV={key:1,class:"section-data-status-inactive"},zV={key:0,class:"section-info"},MV={class:"section-data"},OV={key:1,class:"section-info"},RV={class:"section-data"},_V={key:2,class:"section-info"},$V={class:"section-data"};function jV(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-dashboard-widget-settings-icon"),s=(0,i.resolveComponent)("oxd-icon"),d=(0,i.resolveComponent)("oxd-icon-button"),c=(0,i.resolveComponent)("profile-pic"),m=(0,i.resolveComponent)("oxd-grid-item"),u=(0,i.resolveComponent)("employee-info-section"),p=(0,i.resolveComponent)("oxd-grid"),v=(0,i.resolveComponent)("employee-profile-update-modal"),h=(0,i.resolveComponent)("configure-employee-details-widget");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(r,{id:e.appSpecificData.id,"show-configurations":!0,"show-menu":e.showMenu,onMenuToggleOff:e.menuToggleOff,onToggleConfigurations:e.toggleConfigurationsModal},null,8,["id","show-menu","onMenuToggleOff","onToggleConfigurations"]),(0,i.createElementVNode)("div",{class:"dashboard-widget-container",onClick:t[3]||(t[3]=(...t)=>e.closeMenu&&e.closeMenu(...t))},[(0,i.createElementVNode)("div",iV,[(0,i.createElementVNode)("div",lV,[(0,i.createVNode)(s,{name:e.widgetIcon},null,8,["name"]),(0,i.createElementVNode)("span",nV,(0,i.toDisplayString)(e.$t(e.appSpecificData.title)),1)]),(0,i.createElementVNode)("div",rV,[(0,i.createElementVNode)("div",sV,[(0,i.createElementVNode)("div",dV,[(0,i.createElementVNode)("div",cV,[(0,i.createVNode)(s,{name:"oxd-timezone",tooltip:e.timeZoneString,flow:"right"},null,8,["tooltip"])]),(0,i.createElementVNode)("div",mV,[e.twitterDisabled?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createBlock)(d,{key:0,name:"oxd-twitter",onClick:t[0]||(t[0]=t=>e.socialMediaTwitter())})),e.linkedinDisabled?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createBlock)(d,{key:1,name:"oxd-linkedin",onClick:t[1]||(t[1]=t=>e.socialMediaLinkedin())})),e.facebookDisabled?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createBlock)(d,{key:2,name:"oxd-facebook",onClick:t[2]||(t[2]=t=>e.socialMediaFacebook())}))])])]),(0,i.createVNode)(p,{cols:2,style:{"margin-top":"-35px"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(m,null,{default:(0,i.withCtx)((()=>{var t,o,a,l,n,r,m,u,p,v,h,g,y,f;return[(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["employee-profile-pic",{inactive:!(null===(t=e.employeeAboutDetails.jobDetails)||void 0===t?void 0:t.isActiveEmployee)}])},[e.employeeProfileImage?((0,i.openBlock)(),(0,i.createBlock)(c,{key:0,style:{overflow:"hidden"}},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("img",{src:e.employeeProfileImage},null,8,uV)])),_:1})):((0,i.openBlock)(),(0,i.createBlock)(c,{key:1})),(null===(o=e.employeeAboutDetails.jobDetails)||void 0===o?void 0:o.isActiveEmployee)?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",pV,(0,i.toDisplayString)(e.$t("INACTIVE")),1)),e.photoPermissions?((0,i.openBlock)(),(0,i.createBlock)(d,{key:3,name:"oxd-settings",tooltip:e.$t("Change Profile Picture"),onClick:e.openEmployeeProfileModal},null,8,["tooltip","onClick"])):(0,i.createCommentVNode)("",!0)],2),(0,i.createElementVNode)("div",vV,[(null===(a=e.employeeAboutDetails.basicInfo)||void 0===a?void 0:a.fullname)&&(null===(l=e.employeeAboutDetails.basicInfo)||void 0===l?void 0:l.fullname.length)>25?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,class:"emp-name",tooltip:null===(n=e.employeeAboutDetails.basicInfo)||void 0===n?void 0:n.fullname},(0,i.toDisplayString)(e.nameTextParser(null===(r=e.employeeAboutDetails.basicInfo)||void 0===r?void 0:r.fullname)),9,hV)):((0,i.openBlock)(),(0,i.createElementBlock)("div",gV,(0,i.toDisplayString)(null===(m=e.employeeAboutDetails.basicInfo)||void 0===m?void 0:m.fullname),1)),(null===(u=e.employeeAboutDetails.jobDetails)||void 0===u?void 0:u.jobTitle)?((0,i.openBlock)(),(0,i.createElementBlock)("div",yV,[(null===(p=e.employeeAboutDetails.jobDetails)||void 0===p?void 0:p.jobTitle.length)>40?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,tooltip:null===(v=e.employeeAboutDetails.jobDetails)||void 0===v?void 0:v.jobTitle},(0,i.toDisplayString)((null===(h=e.employeeAboutDetails.jobDetails)||void 0===h?void 0:h.jobTitle.substring(0,37))+"..."),9,fV)):((0,i.openBlock)(),(0,i.createElementBlock)("div",bV,(0,i.toDisplayString)(null===(g=e.employeeAboutDetails.jobDetails)||void 0===g?void 0:g.jobTitle),1))])):(0,i.createCommentVNode)("",!0),(null===(y=e.employeeAboutDetails.locationDetails)||void 0===y?void 0:y.address)?((0,i.openBlock)(),(0,i.createElementBlock)("div",CV,[(0,i.createVNode)(s,{name:"oxd-location",size:"xxx-small"}),(0,i.createTextVNode)(" "+(0,i.toDisplayString)((null===(f=e.employeeAboutDetails.locationDetails)||void 0===f?void 0:f.address)+" - "+e.employeeAboutDetails.locationDetails.country),1)])):(0,i.createCommentVNode)("",!0)])]})),_:1}),(0,i.createVNode)(m,{class:"--span-column-1",style:{"margin-top":"1.9rem","padding-top":"0px"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(p,{cols:1},{default:(0,i.withCtx)((()=>[e.configurationEditModel.showBasicInfo&&e.personalPermissions?((0,i.openBlock)(),(0,i.createBlock)(u,{key:0,iconName:"oxd-basic-info",sectionName:"Basic Info"},{default:(0,i.withCtx)((()=>{var t,o,a,l,n,r;return[(null===(t=e.employeeAboutDetails.basicInfo)||void 0===t?void 0:t.fullname)?((0,i.openBlock)(),(0,i.createElementBlock)("div",SV,[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Full Name"))+": ",1),(0,i.createElementVNode)("span",wV,(0,i.toDisplayString)(null===(o=e.employeeAboutDetails.basicInfo)||void 0===o?void 0:o.fullname),1)])):(0,i.createCommentVNode)("",!0),(null===(a=e.employeeAboutDetails.basicInfo)||void 0===a?void 0:a.empID)?((0,i.openBlock)(),(0,i.createElementBlock)("div",EV,[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Employee Id"))+": ",1),(0,i.createElementVNode)("span",kV,(0,i.toDisplayString)(null===(l=e.employeeAboutDetails.basicInfo)||void 0===l?void 0:l.empID),1)])):(0,i.createCommentVNode)("",!0),(null===(n=e.employeeAboutDetails.basicInfo)||void 0===n?void 0:n.birthDay)?((0,i.openBlock)(),(0,i.createElementBlock)("div",xV,[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Birthday"))+": ",1),(0,i.createElementVNode)("span",NV,(0,i.toDisplayString)(null===(r=e.employeeAboutDetails.basicInfo)||void 0===r?void 0:r.birthDay),1)])):(0,i.createCommentVNode)("",!0)]})),_:1})):(0,i.createCommentVNode)("",!0),e.configurationEditModel.showJobInfo&&e.jobPermissions?((0,i.openBlock)(),(0,i.createBlock)(u,{key:1,iconName:"oxd-job",sectionName:"Job"},{default:(0,i.withCtx)((()=>{var t,o,a,l,n,r,s,d,c;return[(null===(t=e.employeeAboutDetails.jobDetails)||void 0===t?void 0:t.joinedDate)&&(null===(o=e.employeeAboutDetails.jobDetails)||void 0===o?void 0:o.isActiveEmployee)?((0,i.openBlock)(),(0,i.createElementBlock)("div",AV,[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Joined Date"))+": ",1),(0,i.createElementVNode)("span",DV,(0,i.toDisplayString)(null===(a=e.employeeAboutDetails.jobDetails)||void 0===a?void 0:a.joinedDate),1)])):(0,i.createCommentVNode)("",!0),(null===(l=e.employeeAboutDetails.jobDetails)||void 0===l?void 0:l.terminatedDate)&&!(null===(n=e.employeeAboutDetails.jobDetails)||void 0===n?void 0:n.isActiveEmployee)?((0,i.openBlock)(),(0,i.createElementBlock)("div",TV,[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Terminated Date"))+": ",1),(0,i.createElementVNode)("span",PV,(0,i.toDisplayString)(null===(r=e.employeeAboutDetails.jobDetails)||void 0===r?void 0:r.terminatedDate),1)])):(0,i.createCommentVNode)("",!0),(null===(s=e.employeeAboutDetails.jobDetails)||void 0===s?void 0:s.subUnit)?((0,i.openBlock)(),(0,i.createElementBlock)("div",VV,[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Sub Unit"))+": ",1),(0,i.createElementVNode)("span",BV,(0,i.toDisplayString)(null===(d=e.employeeAboutDetails.jobDetails)||void 0===d?void 0:d.subUnit),1)])):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("div",IV,[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Status"))+": ",1),(null===(c=e.employeeAboutDetails.jobDetails)||void 0===c?void 0:c.isActiveEmployee)?((0,i.openBlock)(),(0,i.createElementBlock)("span",LV,(0,i.toDisplayString)(e.$t("Active")),1)):((0,i.openBlock)(),(0,i.createElementBlock)("span",FV,(0,i.toDisplayString)(e.$t("Inactive")),1))])]})),_:1})):(0,i.createCommentVNode)("",!0),e.employeeAboutDetails.contactDetails.show&&e.contactPermissions&&e.configurationEditModel.showContactInfo?((0,i.openBlock)(),(0,i.createBlock)(u,{key:2,iconName:"oxd-contact-white",sectionName:"Contact"},{default:(0,i.withCtx)((()=>{var t,o,a,l,n,r;return[(null===(t=e.employeeAboutDetails.contactDetails)||void 0===t?void 0:t.mobile)?((0,i.openBlock)(),(0,i.createElementBlock)("div",zV,[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Mobile"))+": ",1),(0,i.createElementVNode)("span",MV,(0,i.toDisplayString)(null===(o=e.employeeAboutDetails.contactDetails)||void 0===o?void 0:o.mobile),1)])):(0,i.createCommentVNode)("",!0),(null===(a=e.employeeAboutDetails.contactDetails)||void 0===a?void 0:a.workPhone)?((0,i.openBlock)(),(0,i.createElementBlock)("div",OV,[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Work Telephone/Extension"))+": ",1),(0,i.createElementVNode)("span",RV,(0,i.toDisplayString)(null===(l=e.employeeAboutDetails.contactDetails)||void 0===l?void 0:l.workPhone),1)])):(0,i.createCommentVNode)("",!0),(null===(n=e.employeeAboutDetails.contactDetails)||void 0===n?void 0:n.workEmail)?((0,i.openBlock)(),(0,i.createElementBlock)("div",_V,[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Work Email"))+": ",1),(0,i.createElementVNode)("span",$V,(0,i.toDisplayString)(null===(r=e.employeeAboutDetails.contactDetails)||void 0===r?void 0:r.workEmail),1)])):(0,i.createCommentVNode)("",!0)]})),_:1})):(0,i.createCommentVNode)("",!0)])),_:1})])),_:1})])),_:1})])])]),e.showProfileModal?((0,i.openBlock)(),(0,i.createBlock)(v,{key:0,profileImage:e.employeeProfileImage,profileImageName:e.profileImageName,maxAttachmentSize:e.maxAttachmentSize,allowedImageTypes:e.allowedImageTypes,onProfileModalCloseAction:e.profileModalCloseAction,onProfileModalConfirmAction:e.profileModalConfirmAction},null,8,["profileImage","profileImageName","maxAttachmentSize","allowedImageTypes","onProfileModalCloseAction","onProfileModalConfirmAction"])):(0,i.createCommentVNode)("",!0),e.addModalState?((0,i.openBlock)(),(0,i.createBlock)(h,{key:1,ref:"configurations",loading:!1,"editing-model":e.configurationEditModel,personalPermissions:e.personalPermissions,contactPermissions:e.contactPermissions,jobPermissions:e.jobPermissions,onSubmitValid:e.saveConfigurations,"onUpdate:show":e.closeModal},null,8,["editing-model","personalPermissions","contactPermissions","jobPermissions","onSubmitValid","onUpdate:show"])):(0,i.createCommentVNode)("",!0)],64)}class UV{constructor(){this._ngServices=(0,i.inject)("ngServices")}getEmployeeDetails(e){var t;const o={include:"JobRecord,socialMedia,EmployeeTerminationRecord,JobCandidate"};return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.get("employees/"+e,o,[])}getEmployeeLargeProfilePicture(e){var t;const o={filter:{id:[e],size:"big"}};return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.get("employeePhotos",o,[])}setEmployeeProfilePicture(e,t){var o;const a={photo:t};return null===(o=this._ngServices)||void 0===o?void 0:o.webservice.call("employees/"+e,"PATCH",a,[])}getLeaveEvents(e){var t;const o={includeDeletedLeaveTypes:!1};return e&&(o.includeDeletedLeaveTypes=!0),null===(t=this._ngServices)||void 0===t?void 0:t.webservice.get("leaveEvents",o,[])}setWidgetConfigurations(e,t){var o;const a={settings:t};return null===(o=this._ngServices)||void 0===o?void 0:o.webservice.call("dashboard/widgets/"+e,"PATCH",a,[])}getEmployeeTimeSheets(e,t){var o;return null===(o=this._ngServices)||void 0===o?void 0:o.webservice.call("employee/"+e+"/timesheets","GET",[],t)}getTimeSheetById(e){const t={include:"Project,Activity"};return this._ngServices.webservice.get("timesheets/"+e,t,[])}getDefaultLeavePeriod(){var e;return null===(e=this._ngServices)||void 0===e?void 0:e.webservice.get("leave/period",{},[])}getLeaveStatus(e){var t;return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.get("leave/status",e,[])}getEmployeeDataFromApi(e,t){var o;const a={emp_number:t,includeTerminated:"true"};return null===(o=this._ngServices)||void 0===o?void 0:o.webservice.get(e,a,[])}getGoalStatuses(){var e;return null===(e=this._ngServices)||void 0===e?void 0:e.webservice.get("goalStatuses",{},[])}getGoals(e,t,o,a,i){var l;const n={filter:{category:t,include:2,includeDevelopmentGoals:"Yes",withAchievedGoals:"Yes",ownerEmployeeNumber:i},limit:1e3,listType:e,mode:"approved",offset:0,orderBy:"DESC",orderField:"dueDate"};return void 0!==o&&""!==o&&(n.filter.dueDateFrom=o),void 0!==a&&""!==a&&(n.filter.dueDateTo=a),null===(l=this._ngServices)||void 0===l?void 0:l.webservice.get("goals",n,[])}getTrackers(e){var t;const o={emp_number:e,include:"logs",orderField:"date",orderBy:"DESC",includeTerminated:"true"};return null===(t=this._ngServices)||void 0===t?void 0:t.webservice.get("performanceTrackers",o,[])}}const ZV={class:"section-name"};function HV(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon"),s=(0,i.resolveComponent)("oxd-grid-item"),d=(0,i.resolveComponent)("oxd-grid");return(0,i.openBlock)(),(0,i.createBlock)(s,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{cols:8},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(s,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{name:e.iconName,class:"employee-about-icon"},null,8,["name"])])),_:1}),(0,i.createVNode)(s,{class:"--span-column-7 custom-padding-left"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",ZV,(0,i.toDisplayString)(e.$t(e.sectionName)),1),(0,i.renderSlot)(e.$slots,"default",{},void 0,!0)])),_:3})])),_:3})])),_:3})}var qV=(0,i.defineComponent)({name:"employeeInfoSection",props:{iconName:String,sectionName:{type:String,default:""}},components:{"oxd-grid":ll.Z,"oxd-grid-item":nl.Z,"oxd-icon":In.Z},setup(){}});const GV=(0,Re.Z)(qV,[["render",HV],["__scopeId","data-v-18c2f60a"]]);var WV=GV;const KV={class:"modal-header-with-icon",style:{display:"flex","align-items":"center"}},QV={class:"header-container"},JV={class:"sub-heading"},YV={class:"heading"};function XV(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon"),s=(0,i.resolveComponent)("oxd-schema-form"),d=(0,i.resolveComponent)("form-modal");return(0,i.openBlock)(),(0,i.createBlock)(d,{"max-width":"600px"},{title:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",KV,[(0,i.createVNode)(r,{name:"oxd-about-employee",size:"medium",style:{"margin-right":"10px"}})]),(0,i.createElementVNode)("span",QV,[(0,i.createElementVNode)("div",JV,(0,i.toDisplayString)(e.$t(e.modalTitle)),1),(0,i.createElementVNode)("div",YV,(0,i.toDisplayString)(e.$t("Configurations")),1)])])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(s,(0,i.mergeProps)({schema:e.schema,model:e.model,"onUpdate:model":t[0]||(t[0]=t=>e.model=t)},e.$attrs),null,16,["schema","model"])])),_:1})}const eB=ce();function tB(e,t,o){return(0,A.mG)(this,void 0,void 0,(function*(){return{name:"About Configurations",layout:[{type:"grid",props:{cols:2},children:{default:[{name:"showBasicInfo",label:"",type:"switch",props:{"option-label":eB("Basic Info"),"label-position":"left",useFullWidth:!0},value:!1,class:["mb-sm--oxd-input-group","switch-input-group"],hook:(t,o)=>(t.visible=!!e,Object.assign({},t))},{name:"showJobInfo",label:"",type:"switch",props:{"option-label":eB("Job"),"label-position":"left",useFullWidth:!0},value:!1,class:["mb-sm--oxd-input-group","switch-input-group","--offset-column-1"],hook:(e,t)=>(e.visible=!!o,Object.assign({},e))},{name:"showContactInfo",label:"",type:"switch",props:{"option-label":eB("Contact"),"label-position":"left",useFullWidth:!0},value:!1,class:["mb-sm--oxd-input-group","--offset-column-1"],hook:(e,o)=>(e.visible=!!t,Object.assign({},e))}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"divider",style:{margin:"0"}},{type:"action",children:{default:[{name:"reset",label:eB("Cancel"),type:"button",props:{type:"button",displayType:"ghost"},listeners:{onClick:()=>{this.emit("update:show",!0)}}},{name:"submit",label:eB("Save"),type:"button",style:{"margin-left":"0.5rem"},props:{type:"submit",displayType:"secondary"}}]},style:{"padding-top":"1.2rem"}}]}}))}var oB=tB,aB=(0,i.defineComponent)({name:"configureEmployeeDetails",components:{"form-modal":gc,"oxd-schema-form":yc.Z,"oxd-icon":In.Z},props:{editingModel:{type:Object,required:!1},personalPermissions:{type:Boolean,required:!0},contactPermissions:{type:Boolean,required:!0},jobPermissions:{type:Boolean,required:!0}},setup(e,t){const o=(0,i.ref)(Object.assign({},e.editingModel)),a="About",l=(0,fc.Z)(oB.call(t,e.personalPermissions,e.contactPermissions,e.jobPermissions)),n=l.schema,r=o;return{model:r,schema:n,modalTitle:a}}});const iB=(0,Re.Z)(aB,[["render",XV],["__scopeId","data-v-10f241d0"]]);var lB=iB;const nB={class:"widget-configure-icons"},rB={class:"widget-icon-container"};function sB(e,t,o,a,l,n){return(0,i.openBlock)(),(0,i.createElementBlock)("span",nB,[(0,i.createElementVNode)("span",rB,[(0,i.createElementVNode)("span",{class:(0,i.normalizeClass)(["widget-delete-icon",{show:e.isActive}])},[(0,i.createElementVNode)("i",{class:"material-icons","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",onClick:t[0]||(t[0]=(...t)=>e.toggleMenu&&e.toggleMenu(...t))},"settings"),(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["widget-dropdown dropdown-menu dropdown-menu-right",{show:e.isActive}])},[e.showConfigurations?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,class:"dropdown-item",onClick:t[1]||(t[1]=t=>e.$emit("toggleConfigurations"))},(0,i.toDisplayString)(e.$t(e.configurationsLabel)),1)):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("div",{class:"dropdown-item",onClick:t[2]||(t[2]=(...t)=>e.onRemove&&e.onRemove(...t))},(0,i.toDisplayString)(e.$t(e.removeItemLabel)),1)],2)],2)])])}var dB=(0,i.defineComponent)({name:"dashboard-widget-settings-icon",props:{id:{type:String,required:!0},removeItemLabel:{type:String,required:!1,default:"Remove"},showConfigurations:{type:Boolean,required:!1,default:!1},showMenu:{type:Boolean,required:!1,default:!0},configurationsLabel:{type:String,required:!1,default:"Configure"}},emits:["toggleConfigurations","menuToggleOff"],setup(e,{emit:t}){const o=(0,i.ref)(!1),a=t=>{var o;null===(o=t.target)||void 0===o||o.dispatchEvent(new CustomEvent("removeVueDashboardWidget",{bubbles:!0,detail:{id:e.id}}))},l=e=>{o.value=!o.value,e.stopPropagation()};return(0,i.watch)((()=>[e.showMenu]),(()=>{e.showMenu||(o.value=!1,t("menuToggleOff"))})),(0,i.onMounted)((()=>{window.addEventListener("click",(()=>{o.value=!1}))})),(0,i.onUnmounted)((()=>{window.removeEventListener("click",(()=>{o.value=!1}))})),{onRemove:a,toggleMenu:l,isActive:o}}});const cB=(0,Re.Z)(dB,[["render",sB]]);var mB=cB,uB=(0,i.defineComponent)({name:"dashboardEmployeeDetailsWidget",components:{"oxd-grid":ll.Z,"oxd-grid-item":nl.Z,"profile-pic":P.Z,"oxd-icon":In.Z,"oxd-icon-button":D.Z,"employee-info-section":WV,"employee-profile-update-modal":Zx,"configure-employee-details-widget":lB,"oxd-dashboard-widget-settings-icon":mB},setup:function(){const e=ce(),t=(0,i.getCurrentInstance)(),o=(0,i.inject)("appSpecificData"),a=(0,i.reactive)({basicInfo:{},jobDetails:{},recruitmentDetails:{},locationDetails:{},contactDetails:{}}),{jsSavingFormat:l,jsDisplayFormat:n,locale:r}=Im(),{settings:s}=vu(),d=(0,i.ref)(0),c=(0,i.ref)(),m=null===t||void 0===t?void 0:t.appContext.config.globalProperties.empNo,u=o.empNumber,p=(0,i.ref)(!0),v=()=>{null===s||void 0===s||s.then((e=>{d.value=e.max_attachment_size,c.value=e.allowed_image_types}))},h=e=>(null===e||void 0===e?void 0:e.length)>25?e.substring(0,25)+"...":e,g=e=>{p.value=!1},y=()=>{E.value=!1},f=()=>{p.value=!0},b=(0,i.inject)("ngServices"),C=new UV,S=(0,i.ref)(""),w=(0,i.ref)(""),E=(0,i.ref)(!1),k=(0,i.ref)(!0),x=(0,i.ref)(!0),N=(0,i.ref)(!0),A=(0,i.ref)({alternative_keys:null,id:"",label:"",offset:0,prefix:"",timezone_key:""}),D=e=>{var t;null===(t=e.target)||void 0===t||t.dispatchEvent(new CustomEvent("goToAngularRouteFromVue",{bubbles:!0,detail:{}}))},T=(0,i.ref)(!1),P=new Aa,V=(0,i.ref)(!1),B=(0,i.ref)(!1),I=(0,i.ref)(!1),L=(0,i.ref)(!1),F=(0,i.ref)(o.config.settings),z=()=>{E.value=!0},M=t=>{t.status&&C.setEmployeeProfilePicture(b.$stateParams.empNumber,t.imageDetails).then((t=>{t&&(ge.showAngularToast(Ac,e(be)),location.reload())})),E.value=!1},O=e=>{if(e){const t=ee(e,l);if(t)return J(t,n,{locale:r})}return""},R=()=>{a.jobDetails.isActiveEmployee=!0,C.getEmployeeDetails(b.$stateParams.empNumber).then((t=>{var o,i,l,n,r,s,d,c;if(t.data.data){const m=t.data.data;if(a.basicInfo={fullname:m.firstName+" "+m.middleName+" "+m.lastName,empID:m.employeeId,birthDay:m.emp_birthday?e(La()(m.emp_birthday,"YYYY-MM-DD").format("MMM"))+" "+La()(m.emp_birthday,"YYYY-MM-DD").format("DD"):""},a.jobDetails={jobTitle:(null===(o=m.jobTitle)||void 0===o?void 0:o.jobTitleName)?(null===(i=m.jobTitle)||void 0===i?void 0:i.jobTitleName)+(1==(null===(l=m.jobTitle)||void 0===l?void 0:l.isDeleted)?" ("+e("Deleted")+")":""):null===(n=m.jobTitle)||void 0===n?void 0:n.jobTitleName,joinedDate:O(m.joined_date),subUnit:"",isActiveEmployee:!m.termination_id,terminatedDate:""},a.locationDetails={address:m.locations.name,country:null===(r=m.locations.country)||void 0===r?void 0:r.cou_name,timeZone:m.locations.time_zone},A.value=m.locations.timeZone?m.locations.timeZone:null,a.contactDetails={show:m.emp_mobile||m.emp_work_telephone||m.emp_work_email,mobile:m.emp_mobile,workPhone:m.emp_work_telephone,workEmail:m.emp_work_email,socialMedia:{twitter:null,facebook:null,linkedin:null}},null!==a.jobDetails&&(a.jobDetails.subUnit=null===(s=m.subDivision)||void 0===s?void 0:s.name,!a.jobDetails.isActiveEmployee&&(null===(d=m.EmployeeTerminationRecord)||void 0===d?void 0:d.date)&&(a.jobDetails.terminatedDate=O(null===(c=m.EmployeeTerminationRecord)||void 0===c?void 0:c.date))),null!==a.contactDetails){let e=m.EmployeeSocialMedia.filter((function(e){return"1"==e.typeId&&e.profileLink}));e.length>0&&(a.contactDetails.socialMedia.twitter={name:e[0].profileName,link:e[0].profileLink},k.value=!1);let t=m.EmployeeSocialMedia.filter((function(e){return"2"==e.typeId&&e.profileLink}));t.length>0&&(a.contactDetails.socialMedia.facebook={name:t[0].profileName,link:t[0].profileLink},x.value=!1);let o=m.EmployeeSocialMedia.filter((function(e){return"3"==e.typeId&&e.profileLink}));o.length>0&&(a.contactDetails.socialMedia.linkedin={name:o[0].profileName,link:o[0].profileLink},N.value=!1)}}})).catch((()=>{}))},_=()=>{C.getEmployeeLargeProfilePicture(b.$stateParams.empNumber).then((e=>{var t,o,a;e.data.data.length>0&&(S.value=ge.base64ImageConvertion(null===(t=e.data.data[0])||void 0===t?void 0:t.type,null===(o=e.data.data[0])||void 0===o?void 0:o.image),w.value=null===(a=e.data.data[0])||void 0===a?void 0:a.filename)}))},$=()=>{null!=a.contactDetails&&null!=a.contactDetails.socialMedia.facebook&&window.open(a.contactDetails.socialMedia.facebook.link)},j=()=>{null!=a.contactDetails&&null!=a.contactDetails.socialMedia.twitter&&window.open(a.contactDetails.socialMedia.twitter.link)},U=()=>{null!=a.contactDetails&&null!=a.contactDetails.socialMedia.linkedin&&window.open(a.contactDetails.socialMedia.linkedin.link)},Z=(0,i.computed)((()=>{let t="";return null!==A.value&&(""!=A.value.prefix&&(t="("+A.value.prefix+") "),t+=e(A.value.label)),e("Timezone: {{timeZone}}",{timeZone:t})})),H=t=>{C.setWidgetConfigurations(o.id,t).then((t=>{t&&(ge.showAngularToast(Ac,e(be)),F.value=t.data.data.config.settings,G())}))},q=()=>{T.value=!T.value,p.value=!1},G=()=>{T.value=!1},W=(0,i.computed)((()=>o.widgetGlobalConfig.widgetIcon?o.widgetGlobalConfig.widgetIcon:""));return P.getDataGroupPermissions({self:u==m,entities:{Employee:u}}).then((e=>{0!==e.length&&(V.value=e.personal_information.read,B.value=e.contact_details.read,I.value=e.job_history_details.read,L.value=e.photograph.update)})),(0,i.onMounted)((()=>{R(),_(),v()})),{onRemove:D,employeeAboutDetails:a,employeeProfileImage:S,profileImageName:w,showProfileModal:E,profileModalCloseAction:y,openEmployeeProfileModal:z,profileModalConfirmAction:M,socialMediaFacebook:$,socialMediaTwitter:j,socialMediaLinkedin:U,facebookDisabled:x,twitterDisabled:k,linkedinDisabled:N,timeZoneString:Z,addModalState:T,saveConfigurations:H,toggleConfigurationsModal:q,closeModal:G,configurationEditModel:F,maxAttachmentSize:d,allowedImageTypes:c,appSpecificData:o,widgetIcon:W,nameTextParser:h,personalPermissions:V,contactPermissions:B,jobPermissions:I,photoPermissions:L,closeMenu:g,menuToggleOff:f,showMenu:p}}});const pB=(0,Re.Z)(uB,[["render",jV],["__scopeId","data-v-3a305134"]]);var vB=pB;const hB=e=>((0,i.pushScopeId)("data-v-4ba17844"),e=e(),(0,i.popScopeId)(),e),gB={class:"dashboard-widget"},yB={class:"widget-header",style:{"padding-left":"0.75rem"}},fB={class:"widget-header-text"},bB={key:1,class:"leave-balance-wrapper"},CB={class:"leave-balance-top-content"},SB={class:"grid-container"},wB={class:"grid-item-1"},EB=["tooltip"],kB={key:1,class:"selected-leave-type-name"},xB={class:"selected-leave-type-balance"},NB=["tooltip"],AB={key:1,class:"taken-amount"},DB={key:2},TB={class:"overdrawn-amount"},PB={class:"grid-item-2",style:{"margin-left":"auto"}},VB={class:"grid-item-3"},BB={key:2,class:"no-items-placeholder-container"},IB={class:"no-item-watermark graph"},LB=hB((()=>(0,i.createElementVNode)("img",{src:"images/dashboard/watermarks/list_item_empty_watermark.png"},null,-1))),FB={key:0,class:"no-items-placeholder"},zB={key:1,class:"no-items-placeholder"};function MB(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-dashboard-widget-settings-icon"),s=(0,i.resolveComponent)("oxd-icon"),d=(0,i.resolveComponent)("oxd-loader"),c=(0,i.resolveComponent)("oxd-button"),m=(0,i.resolveComponent)("last-leave-taken"),u=(0,i.resolveComponent)("oxd-dashboard-leave-balance-item"),p=(0,i.resolveComponent)("modal-provider");return(0,i.openBlock)(),(0,i.createBlock)(p,null,{default:(0,i.withCtx)((()=>{var o,a,l,n,p;return[(0,i.createVNode)(r,{id:e.appSpecificData.id,"show-menu":e.showMenu,onMenuToggleOff:e.menuToggleOff},null,8,["id","show-menu","onMenuToggleOff"]),(0,i.createElementVNode)("div",{class:"dashboard-widget-container",onClick:t[1]||(t[1]=(...t)=>e.closeMenu&&e.closeMenu(...t))},[(0,i.createElementVNode)("div",gB,[(0,i.createElementVNode)("div",yB,[(0,i.createVNode)(s,{name:e.widgetIcon},null,8,["name"]),(0,i.createElementVNode)("span",fB,(0,i.toDisplayString)(e.$t(e.appSpecificData.title)),1)]),(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["widget-body",{loading:e.onLoading,nodata:!e.isAllowedApplyAssign||e.isNoLeaveTypesAssigned}]),style:(0,i.normalizeStyle)(e.cardColour)},[e.onLoading?((0,i.openBlock)(),(0,i.createBlock)(d,{key:0,withContainer:!0,class:"oxd-loader-text-view"})):(0,i.createCommentVNode)("",!0),e.onLoading?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",bB,[e.isAllowedApplyAssign&&(null===(o=e.selectedLeaveType)||void 0===o?void 0:o.id)?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,class:(0,i.normalizeClass)(["leave-balance-top",{"item-selected":null===(a=e.selectedLeaveType)||void 0===a?void 0:a.id,"extra-item-present":e.addExtraPaddingToLeaveTiles}])},[(0,i.createElementVNode)("div",CB,[(0,i.createElementVNode)("div",SB,[(0,i.createElementVNode)("div",wB,[e.leaveTypesString.length>21?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,class:"selected-leave-type-name",tooltip:e.leaveTypesString,flow:"bottom"},(0,i.toDisplayString)(e.leaveTypesString.slice(0,18)+"..."),9,EB)):((0,i.openBlock)(),(0,i.createElementBlock)("div",kB,(0,i.toDisplayString)(e.leaveTypesString),1)),(0,i.createElementVNode)("div",xB,[e.takenDaysCountString.length>30?((0,i.openBlock)(),(0,i.createElementBlock)("span",{key:0,class:"taken-amount",tooltip:e.takenDaysCountString,flow:"bottom"},(0,i.toDisplayString)(e.takenDaysCountString.slice(0,30)+"..."),9,NB)):((0,i.openBlock)(),(0,i.createElementBlock)("span",AB,(0,i.toDisplayString)(e.takenDaysCountString),1)),e.overdrawnAmountString.length>0?((0,i.openBlock)(),(0,i.createElementBlock)("div",DB,[(0,i.createElementVNode)("span",TB,(0,i.toDisplayString)(e.overdrawnAmountString),1)])):(0,i.createCommentVNode)("",!0)])]),(0,i.createElementVNode)("div",PB,[e.isActiveEmployee&&void 0!=e.leaveTypeNames[null===(l=e.selectedLeaveType)||void 0===l?void 0:l.id]?((0,i.openBlock)(),(0,i.createBlock)(c,{key:0,label:e.assignLeaveButtonLabel,size:"small",displayType:"text","data-test":"confirmButton",class:"assign-leave-button",onClick:t[0]||(t[0]=t=>e.applyAssignLeave())},null,8,["label"])):(0,i.createCommentVNode)("",!0)]),(0,i.createElementVNode)("div",VB,[(null===(n=e.selectedLeaveType)||void 0===n?void 0:n.id)?((0,i.openBlock)(),(0,i.createBlock)(m,{key:0,"redirect-with-link":!1,"emp-number":e.empNumber,"application-type":e.applicationType,"leave-type-id":e.selectedLeaveType.id,"show-leave-type":!1,onLinkClick:e.redirectToLeaveRequest,onDataAvailableToShow:e.lastTakenLeaveAvailable},null,8,["emp-number","application-type","leave-type-id","onLinkClick","onDataAvailableToShow"])):(0,i.createCommentVNode)("",!0)])])])],2)):(0,i.createCommentVNode)("",!0),e.isAllowedApplyAssign&&!e.isNoLeaveTypesAssigned?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:1,class:(0,i.normalizeClass)(["leave-types-container",{"item-selected":null===(p=e.selectedLeaveType)||void 0===p?void 0:p.id,"extra-item-present":e.addExtraPaddingToLeaveTiles}])},[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.options,((t,o)=>((0,i.openBlock)(),(0,i.createBlock)(u,{key:t.id,"leave-balance":t,active:e.selectedLeaveType.id===t.id,focus:e.focusedLeaveTyeId===t.id,isLastItem:e.options.length>3&&o===e.options.length-1,onClick:o=>e.selectLeaveType(t),onKeyup:(0,i.withKeys)((o=>e.selectLeaveType(t)),["enter"]),onFocusin:o=>e.onItemHover(t),tabindex:"0"},null,8,["leave-balance","active","focus","isLastItem","onClick","onKeyup","onFocusin"])))),128))],2)):(0,i.createCommentVNode)("",!0),!e.isAllowedApplyAssign||e.isNoLeaveTypesAssigned?((0,i.openBlock)(),(0,i.createElementBlock)("div",BB,[(0,i.createElementVNode)("div",IB,[LB,e.isAllowedApplyAssign?e.isNoLeaveTypesAssigned?((0,i.openBlock)(),(0,i.createElementBlock)("span",zB,(0,i.toDisplayString)(e.$t("No Leave Balance to Display")),1)):(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("span",FB,(0,i.toDisplayString)(e.$t("No Permissions to View the Content")),1))])])):(0,i.createCommentVNode)("",!0)]))],6)])])]})),_:1})}var OB=o(34148);const RB={class:"leave-balance-number-section"},_B={key:0,class:"leave-subtext"},$B={key:1,class:"leave-subtext"},jB={class:"leave-balance-description-section"},UB=["tooltip","flow"],ZB={key:1,class:"leave-type"},HB={class:"progress linear-progress-vue"},qB={class:"total-entitlements"};function GB(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon");return(0,i.openBlock)(),(0,i.createElementBlock)("div",{class:(0,i.normalizeClass)(["leave-balance",e.classObject]),style:(0,i.normalizeStyle)(e.cardColour)},[(0,i.createElementVNode)("div",RB,[(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["leave-count",{"leave-count-custom":e.leaveBalanceCount.length>=6}])},(0,i.toDisplayString)(e.leaveBalanceCount),3),e.leaveBalance.subText.length>17?((0,i.openBlock)(),(0,i.createElementBlock)("div",_B,(0,i.toDisplayString)(e.leaveBalance.subText.substring(0,15)+"..."),1)):((0,i.openBlock)(),(0,i.createElementBlock)("div",$B,(0,i.toDisplayString)(e.leaveBalance.subText),1))]),(0,i.createElementVNode)("div",jB,[e.leaveBalance.title.length>23?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,class:"leave-type",tooltip:e.leaveBalance.title,flow:e.isLastItem?"top":"bottom"},(0,i.toDisplayString)(e.leaveBalance.title.substring(0,20)+"..."),9,UB)):((0,i.openBlock)(),(0,i.createElementBlock)("div",ZB,(0,i.toDisplayString)(e.$t(e.leaveBalance.title)),1)),(0,i.createElementVNode)("div",HB,[(0,i.createElementVNode)("div",{class:"loader",style:(0,i.normalizeStyle)({"--value":e.progressPercentage})},null,4)]),(0,i.createElementVNode)("div",qB,[(0,i.createTextVNode)((0,i.toDisplayString)(e.totalEntitlementsString)+" ",1),1==e.leaveBalance.isShortTerm?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,class:"entitlement-items-icon-wrapper",onClick:t[0]||(t[0]=t=>e.onClickBreakdown(t)),onKeyup:t[1]||(t[1]=(0,i.withKeys)((t=>e.onClickBreakdown(t)),["enter"])),tabindex:"0"},[(0,i.createVNode)(r,{name:"oxd-list-items",size:"xxx-small",tooltip:e.$t("Entitlements Breakdown"),flow:e.isLastItem?"top":"left"},null,8,["tooltip","flow"])],32)):(0,i.createCommentVNode)("",!0)])])],6)}const WB={class:"dashboard-ent-item-title"};function KB(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-schema-form"),s=(0,i.resolveComponent)("form-modal");return(0,i.openBlock)(),(0,i.createBlock)(s,{"onUpdate:show":t[0]||(t[0]=t=>e.$emit("update:show",t)),"max-width":"500px"},{title:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",WB,(0,i.toDisplayString)(e.$t("Entitlements Breakdown")),1)])),headerActions:(0,i.withCtx)((()=>[])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{schema:e.schema},null,8,["schema"])])),_:1})}const QB={class:"dashboard-ent-item-content"};function JB(e,t,o,a,l,n){const r=(0,i.resolveComponent)("entitlement-item");return(0,i.openBlock)(),(0,i.createElementBlock)("div",QB,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.shortTermEntitlementsList,(e=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"dashboard-ent-item-list-content",key:e.subHeader},[(0,i.createVNode)(r,{description:e.description,subHeader:e.subHeader},null,8,["description","subHeader"])])))),128))])}var YB=(0,i.defineComponent)({name:"CreateScheduleWarnings",components:{"entitlement-item":uA},props:{shortTermEntitlementsList:{type:Object,required:!1}},setup(){}});const XB=(0,Re.Z)(YB,[["render",JB],["__scopeId","data-v-dc0c3e2c"]]);var eI=XB,tI=(0,i.defineComponent)({name:"dashboard-entitlement-item-modal",components:{"form-modal":gc,"oxd-schema-form":yc.Z},methods:{onCancel(){this.$emit("update:show",!1)}},props:{shortTermEntitlementsList:{type:Object,required:!1}},emits:["update:show"],setup(e,t){const{schema:o}=(0,fc.Z)({name:"dashboardEntitlementItemModalForm",layout:[{type:"grid",props:{cols:1},children:{default:[{name:"breakDown",label:"",type:"custom",component:(0,i.markRaw)(eI),props:{shortTermEntitlementsList:e.shortTermEntitlementsList},style:{"margin-right":"auto",padding:"0px"}}]}},{type:"divider",style:{margin:"0"}},{type:"action",children:{default:[{name:"reset",label:"Cancel",type:"button",props:{type:"button",displayType:"ghost"},listeners:{onClick:()=>{t.emit("update:show",!1)}}}]},style:{"padding-top":"1.2rem"}}]});return{schema:o}}});const oI=(0,Re.Z)(tI,[["render",KB],["__scopeId","data-v-20126916"]]);var aI=oI;(0,i.inject)("appSpecificData");var iI=(0,i.defineComponent)({name:"dashboard-leave-balance-item",components:{"oxd-icon":In.Z},props:{leaveBalance:{type:Object,required:!0},active:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},isLastItem:{type:Boolean,default:!1}},emits:["toggleConfigurations"],setup(e){const t=ce(),o=(0,i.ref)(!1),a=(0,i.computed)((()=>{if(0==e.leaveBalance.entitlement_total)return"0%";{let t=parseFloat(e.leaveBalance.netBalance.toString())/e.leaveBalance.entitlement_total*100;return t.toString()+"%"}})),l=(0,i.computed)((()=>t("Total Entitlements {{numberOfEntitlements}} {{leaveUnit}}",{numberOfEntitlements:e.leaveBalance.entitlementTotal,leaveUnit:e.leaveBalance.leaveUnit?t(e.leaveBalance.leaveUnit):t("Day(s)")}))),n=(0,i.computed)((()=>({"--dynamic-card-colour":e.leaveBalance.colour?"#"+e.leaveBalance.colour:""}))),r=(0,i.computed)((()=>({"selected-tile":e.active,"unselected-tile":!e.active,"focused-tile":e.focus}))),s=(0,i.computed)((()=>e.leaveBalance.netBalance<=0?parseFloat("0").toFixed(e.leaveBalance.decimals):e.leaveBalance.netBalance.toString())),d=Gc(aI,{shortTermEntitlementsList:e.leaveBalance.shortTermEntitlements}),c=e=>{void 0!==e["key"]?o.value||"Enter"!==e.key?o.value=!1:(d.open(),o.value=!0):d.open()};return{cardColour:n,totalEntitlementsString:l,progressPercentage:a,classObject:r,leaveBalanceCount:s,onClickBreakdown:c}}});const lI=(0,Re.Z)(iI,[["render",GB],["__scopeId","data-v-5dcc6cf0"]]);var nI=lI,rI=(0,i.defineComponent)({name:"dashboardLeaveBalanceWidget",inheritAttrs:!1,components:{"last-leave-taken":RA,"oxd-button":jt.Z,"oxd-loader":co.Z,"oxd-icon":In.Z,"oxd-dashboard-widget-settings-icon":mB,"oxd-dashboard-leave-balance-item":nI,"modal-provider":Qc},setup(){const e=ce(),t=(0,i.getCurrentInstance)(),{settings:o}=vu(),a=(0,i.inject)("appSpecificData"),l=null===t||void 0===t?void 0:t.appContext.config.globalProperties.empNo,n=a.empNumber,r=a.employee?a.employee:null,s=(0,i.ref)(!0);r&&null!==(null===r||void 0===r?void 0:r.termination_id)&&(s.value=!1);const d=(0,i.ref)(!0),c=(0,i.inject)("ngServices"),m=(0,i.ref)([]),u=(0,i.ref)({id:0,title:"",number:"",subText:"",entitlementTotal:"0",entitlementUsed:0,taken:0,adjustment_count:0,adjustments:0,carried_forward:0,country_name:"",current:"",entitlement_count:0,entitlement_total:0,exclude_if_no_entitlement:"",fromDate:"",leaveTypeId:"",leave_type_deleted:"",netBalance:0,overdrawn:0,overdrawn_leave_requests:"",pending:0,pendingLeaveRequests:"",scheduled:0,scheduledLeaveRequests:"",status:[0],takenLeaveRequests:"",timeline:"",toDate:"",uisref:{entitlement_total:"",overdrawn:"",pending:"",scheduled:"",taken:"",timeline:""},unused:"",leaveUnit:"",decimals:2}),p=(0,i.ref)(0),v=(0,i.ref)(!0),h=(0,i.ref)(!1),g=(0,i.ref)(!1),y=l==n?"apply":"assign",f=(0,i.ref)({}),b=new bN;let C=e("Assign Leave");const S=Im();"apply"==y&&(C=e("Apply Leave"));const w=()=>{null===o||void 0===o||o.then((e=>{f.value=b.getLeaveAmountSettings(e)}))},E=(0,i.computed)((()=>"../index.php/leave/viewPhoto/empNumber/"+n+"/size/small")),k="assign"==y?new nA(t):new rA(t),x=new UV,N=(0,i.ref)([]),A=e=>{d.value=!1},D=()=>{d.value=!0},T=()=>{let t=[];const o=[];x.getLeaveEvents(!1).then((a=>{a.data.meta&&(t=(0,OB.Z)(a.data.meta.legend.leaveTypeColorList),k.getAvailableLeaveTypes(n).then((a=>{a.map((e=>{null!==e.id&&(N.value[e.id]=e.name)})),void 0!==n?k.getLeaveBalance(n).then((a=>{let i=a.filter((e=>{if("0"==e.leave_type_deleted&&(0!=e.entitlement_total||0!=e.pending||0!=e.scheduled||0!=e.taken||0!=e.netBalance||0!=e.overdrawn))return e}));i.map((e=>{o.includes(e.leaveTypeId)||o.push(e.leaveTypeId)})),v.value=!1,h.value=i.length<=0,m.value=o.reduce(((o,l)=>{var n,r;const s=i.find((e=>e.leaveTypeId===l));if(s){const i=t.filter((e=>parseInt(e.id)==parseInt(s.leaveTypeId))),l="Days"!=s.leaveUnit,d=b.getNumberOfDecimals(l,f.value);s.leaveUnit=l?"Hour(s)":"Day(s)";let c="1"===s.isShortTerm;const m=l?"Hours":"Days",u={id:null!==(n=parseInt(s.leaveTypeId))&&void 0!==n?n:0,title:i[0].name,number:s.unused,subText:"Balance "+m,entitlementTotal:0,entitlementUsed:0,numberOfDecimals:d,isShortTerm:c};k.getTileCardItemWithBalanceDetails(u,a,s.leaveTypeId,c,y,S);const p=parseFloat(u.number).toFixed(u.numberOfDecimals),v=u.entitlementTotal.toFixed(u.numberOfDecimals);o.push(Object.assign(Object.assign({id:null!==(r=parseInt(s.leaveTypeId))&&void 0!==r?r:0,title:i[0].name,number:p,subText:e("Balance "+s.leaveUnit),entitlementTotal:v,entitlementUsed:u.entitlementUsed,colour:i[0].color,decimals:d,shortTermEntitlements:u.shortTermEntitlements},s),{netBalance:p,entitlement_total:u.entitlementTotal}))}return o}),[]),m.value.sort(V)})).catch((()=>{P()})):(m.value=[],P())})).catch((()=>{P()})))})).catch((()=>{P()}))},P=()=>{v.value=!1,h.value=!0},V=(e,t)=>{let o="string"==typeof e.netBalance?parseFloat(e.netBalance):e.netBalance,a="string"==typeof t.netBalance?parseFloat(t.netBalance):t.netBalance;return o>a?-1:o<a?1:0},B=(0,i.ref)(!1);v.value=!0,k.isAllowed({Employee:n}).then((e=>{e?(B.value=!0,T()):v.value=!1}));const I=e=>{e&&(u.value=e)},L=(0,i.computed)((()=>({"--dynamic-card-colour":u.value.colour?"#"+u.value.colour:""}))),F=e=>{p.value=e.id},z=(0,i.computed)((()=>e("{{leaveAmount}} {{leaveUnit}} used",{leaveAmount:u.value.entitlementUsed.toFixed(u.value.decimals),leaveUnit:"Day(s)"==u.value.leaveUnit?"day(s)":"hour(s)"}))),M=(0,i.computed)((()=>0!=u.value.overdrawn?e("{{overdrawnAmount}} overdrawn",{overdrawnAmount:u.value.overdrawn}):"")),O=(0,i.computed)((()=>{var t,o;return e((null===(t=u.value)||void 0===t?void 0:t.title)?null===(o=u.value)||void 0===o?void 0:o.title:"")})),R=(0,i.computed)((()=>a.widgetGlobalConfig.widgetIcon)),_=()=>{var e,t;l==n?c.$state.go("vueleave.leave_apply",{leaveType:(null===(e=u.value)||void 0===e?void 0:e.id)?u.value.id:0}):c.$state.go("vueleave.leave_assign",{leaveType:(null===(t=u.value)||void 0===t?void 0:t.id)?u.value.id:0,employeeId:n})},$=e=>{k.goToLeaveRequest(e,n,"employeeProfile")},j=e=>{g.value=e};return(0,i.onBeforeMount)((()=>{w()})),{displayProfilePic:E,options:m,appSpecificData:a,empNumber:n,takenDaysCountString:z,leaveTypesString:O,applyAssignLeave:_,assignLeaveButtonLabel:C,applicationType:y,isNoLeaveTypesAssigned:h,onLoading:v,isAllowedApplyAssign:B,widgetIcon:R,selectedLeaveType:u,redirectToLeaveRequest:$,lastTakenLeaveAvailable:j,addExtraPaddingToLeaveTiles:g,selectLeaveType:I,onItemHover:F,focusedLeaveTyeId:p,isActiveEmployee:s,cardColour:L,leaveTypeNames:N,closeMenu:A,menuToggleOff:D,showMenu:d,overdrawnAmountString:M}}});const sI=(0,Re.Z)(rI,[["render",MB],["__scopeId","data-v-4ba17844"]]);var dI=sI,cI=o.p+"images/no_timesheets.png";const mI=e=>((0,i.pushScopeId)("data-v-07dfc83a"),e=e(),(0,i.popScopeId)(),e),uI={class:"dashboard-widget"},pI={class:"widget-header",style:{"margin-bottom":"12px","padding-left":"0.75rem"}},vI={class:"widget-header-text"},hI={class:"widget-body"},gI={key:2,class:"timeSheetHeaderContent"},yI={class:"chart"},fI={key:0,class:"empty-pie-chart"},bI=mI((()=>(0,i.createElementVNode)("img",{src:"images/dashboard/empty_pie_chart.png"},null,-1))),CI=[bI],SI={class:"content"},wI={class:"header"},EI={class:"bottom"},kI={class:"total-time"},xI={class:"duration"},NI={class:"status-container"},AI={key:4,class:"timesheetItemWrapper"},DI={class:"item-detail-wrapper"},TI=["tooltip","flow"],PI={key:1,class:"activity"},VI={class:"project"},BI=["tooltip","flow"],II={key:1,class:"name"},LI={key:2,class:"name"},FI={class:"duration"},zI={key:5,class:"no-items-placeholder-container"},MI={class:"no-item-watermark graph",style:{"margin-top":"30px",width:"160px"}},OI=mI((()=>(0,i.createElementVNode)("img",{src:cI},null,-1))),RI={class:"no-items-placeholder"},_I={key:6,class:"no-items-placeholder-container"},$I={class:"no-item-watermark graph"},jI=mI((()=>(0,i.createElementVNode)("img",{src:cI},null,-1))),UI={class:"no-items-placeholder"},ZI={key:7,class:"no-items-placeholder-container"},HI={class:"no-item-watermark graph"},qI=mI((()=>(0,i.createElementVNode)("img",{src:"images/dashboard/watermarks/list_item_empty_watermark.png"},null,-1))),GI={class:"no-items-placeholder"};function WI(e,t,o,a,l,n){var r,s,d,c;const m=(0,i.resolveComponent)("oxd-dashboard-widget-settings-icon"),u=(0,i.resolveComponent)("oxd-icon"),p=(0,i.resolveComponent)("oxd-loader"),v=(0,i.resolveComponent)("pie-chart"),h=(0,i.resolveComponent)("oxd-select"),g=(0,i.resolveComponent)("oxd-icon-button"),y=(0,i.resolveComponent)("oxd-divider");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(m,{id:e.appSpecificData.id,"show-menu":e.showMenu,onMenuToggleOff:e.menuToggleOff},null,8,["id","show-menu","onMenuToggleOff"]),(0,i.createElementVNode)("div",{class:"dashboard-widget-container",onClick:t[3]||(t[3]=(...t)=>e.closeMenu&&e.closeMenu(...t))},[(0,i.createElementVNode)("div",uI,[(0,i.createElementVNode)("div",pI,[(0,i.createVNode)(u,{name:e.widgetIcon},null,8,["name"]),(0,i.createElementVNode)("span",vI,(0,i.toDisplayString)(e.$t(e.appSpecificData.title)),1)]),(0,i.createElementVNode)("div",hI,[e.onLoading?((0,i.openBlock)(),(0,i.createBlock)(p,{key:0,withContainer:!0,class:"oxd-loader-text-view"})):(0,i.createCommentVNode)("",!0),!e.onLoading&&e.onTimeSheetDataLoading?((0,i.openBlock)(),(0,i.createBlock)(p,{key:1,withContainer:!0,class:"oxd-loader-text-view",style:{position:"absolute",top:"55%",left:"40%"}})):(0,i.createCommentVNode)("",!0),e.onLoading||e.IsEmptyTimeSheet||e.IsInvalidPermission?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",gI,[(0,i.createElementVNode)("div",yI,[e.onTimeSheetDataLoading||0!=e.chartData.length&&0!=e.totalDurationGlobalParam?e.chartData.length>0?((0,i.openBlock)(),(0,i.createBlock)(v,{key:1,width:"400px",height:"400px",cutout:"50%",legend:{display:!1},tooltip:{enabled:!1},data:e.chartData},null,8,["data"])):(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",fI,CI))]),(0,i.createElementVNode)("div",SI,[(0,i.createElementVNode)("div",wI,[(0,i.createVNode)(h,{modelValue:e.selectedTimePeriod,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.selectedTimePeriod=t),t[1]||(t[1]=t=>e.getEmployeeTimeSheetData(e.selectedTimePeriod.id))],options:e.timePeriodDetails,button:e.buttonObject,type:"select"},null,8,["modelValue","options","button"])]),(0,i.createElementVNode)("div",EI,[(0,i.createElementVNode)("div",kI,[(0,i.createElementVNode)("div",null,(0,i.toDisplayString)(e.$t("Total Time")),1),(0,i.createElementVNode)("div",xI,[(0,i.createTextVNode)((0,i.toDisplayString)(e.totalTimeSheetDuration)+" ",1),(0,i.createVNode)(u,{name:"oxd-clock"})])]),(0,i.createElementVNode)("div",NI,[(0,i.createElementVNode)("div",{class:"status",style:(0,i.normalizeStyle)({color:null===(r=e.selectedTimePeriod)||void 0===r?void 0:r.statusLabelColor,"border-color":null===(s=e.selectedTimePeriod)||void 0===s?void 0:s.statusBorderColor,"background-color":null===(d=e.selectedTimePeriod)||void 0===d?void 0:d.statusBackgroundColor})},(0,i.toDisplayString)(e.$t(null===(c=e.selectedTimePeriod)||void 0===c?void 0:c.status)),5),(0,i.createVNode)(g,{name:"oxd-date-and-time",onClick:t[2]||(t[2]=t=>e.redirectToTimeSheet(e.selectedTimePeriod)),tooltip:e.$t("View Timesheet")},null,8,["tooltip"])])])])])),e.onLoading||e.IsEmptyTimeSheet||e.IsInvalidPermission?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createBlock)(y,{key:3,style:{borderTopColor:"#ebedf1",margin:"0px 15px"}})),!e.onLoading&&!e.IsEmptyTimeSheet&&!e.IsInvalidPermission&&e.timeSheetItemsLength>0?((0,i.openBlock)(),(0,i.createElementBlock)("div",AI,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.timeSheetItemsGroupedByActivity,((t,o,a)=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"timeSheetItem",key:t.id},[(0,i.createElementVNode)("div",DI,[t.activityName&&t.activityName.length>30?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,class:"activity",tooltip:t.activityName,flow:a<3?"bottom":"top"},(0,i.toDisplayString)(t.activityName.substring(0,30)+"..."),9,TI)):((0,i.openBlock)(),(0,i.createElementBlock)("div",PI,(0,i.toDisplayString)(t.activityName),1)),(0,i.createElementVNode)("div",VI,[(0,i.createElementVNode)("span",{class:"item-color",style:(0,i.normalizeStyle)({"background-color":t.itemcolor})},null,4),t.projectName&&t.projectName.length>22?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,class:"name",tooltip:t.projectName,flow:a<3?"bottom":"top"},[(0,i.createElementVNode)("span",null,(0,i.toDisplayString)(e.$t("Project")),1),(0,i.createTextVNode)(": "+(0,i.toDisplayString)(t.projectName.substring(0,22)+"..."),1)],8,BI)):(0,i.createCommentVNode)("",!0),t.projectName&&t.projectName.length<=22?((0,i.openBlock)(),(0,i.createElementBlock)("div",II,[(0,i.createElementVNode)("span",null,(0,i.toDisplayString)(e.$t("Project")),1),(0,i.createTextVNode)(": "+(0,i.toDisplayString)(t.projectName),1)])):(0,i.createCommentVNode)("",!0),t.projectName?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",LI,(0,i.toDisplayString)(e.$t("Common Activity")),1))])]),(0,i.createElementVNode)("div",FI,(0,i.toDisplayString)(t.duration),1)])))),128))])):(0,i.createCommentVNode)("",!0),e.onLoading||e.onTimeSheetDataLoading||e.IsEmptyTimeSheet||e.IsInvalidPermission||0!==e.timeSheetItemsLength?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",zI,[(0,i.createElementVNode)("div",MI,[OI,(0,i.createElementVNode)("span",RI,(0,i.toDisplayString)(e.$t("No Timesheet Data was found")),1)])])),e.onLoading||!e.IsEmptyTimeSheet||e.IsInvalidPermission?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",_I,[(0,i.createElementVNode)("div",$I,[jI,(0,i.createElementVNode)("span",UI,(0,i.toDisplayString)(e.$t("No Timesheet was found")),1)])])),!e.onLoading&&e.IsInvalidPermission?((0,i.openBlock)(),(0,i.createElementBlock)("div",ZI,[(0,i.createElementVNode)("div",HI,[qI,(0,i.createElementVNode)("span",GI,(0,i.toDisplayString)(e.$t("No Permissions to View the Content")),1)])])):(0,i.createCommentVNode)("",!0)])])])],64)}var KI=o(89183);const QI=["#34BC40","#33A0FF","#FE7D15","#FB5255","#FDC461","#BE4BDB","#7A50F2","#228BE6","#0FAAC0","#12B886","#81C91D","#28DAC6","#FE8833","#6FC944","#FF3495","#35B4D0","#DEA92B","#C7CA24","#93BE35","#E64980","#6774E7","#5CC0FF","#6EC885","#FFAA00","#FF414d"],JI=(e,t=!1)=>{const o=Math.floor(e/3600),a=Math.floor(e%3600/60);let i=o.toString(),l=a.toString();return 1===i.length?i="0".concat(i):0===i.length&&(i="00"),1===l.length?l="0".concat(l):0===l.length&&(l="00"),t?i+"h "+l+"m":i+":"+l},YI=e=>{const t=new Map([["SUBMITTED","#1e6ceb"],["NOT SUBMITTED","#ffa62f"],["APPROVED","#34bc40"],["REJECTED","#eb0910"],["NOT CREATED","#929baa"]]);return t.has(e)?t.get(e):"#64728C"},XI=e=>{const t=new Map([["SUBMITTED","#1e6cebbd"],["NOT SUBMITTED","#ffa62fbd"],["APPROVED","#34bc40bd"],["REJECTED","#eb0910d9"],["NOT CREATED","#929baad9"]]);return t.has(e)?t.get(e):"#E8EAEF"},eL=e=>{const t=new Map([["SUBMITTED","#1e6ceb1a"],["NOT SUBMITTED","#ffa62f1a"],["APPROVED","#34bc401a"],["REJECTED","#eb09101a"],["NOT CREATED","#929baa1a"]]);return t.has(e)?t.get(e):"#FFFFFF"};var tL=(0,i.defineComponent)({name:"dashboardTimesheetsWidget",inheritAttrs:!1,components:{"oxd-icon":In.Z,"oxd-select":Ag.Z,"oxd-icon-button":D.Z,"oxd-divider":ro.Z,"pie-chart":KI.Z,"oxd-loader":co.Z,"oxd-dashboard-widget-settings-icon":mB},setup(e,t){const o=ce(),a=(0,i.getCurrentInstance)(),l=(0,i.inject)("appSpecificData"),n=new UV,r=null===a||void 0===a?void 0:a.appContext.config.globalProperties.empNo,{jsSavingFormat:s,jsDisplayFormat:d,locale:c}=Im(),m=(0,i.inject)("ngServices"),u=(0,i.ref)(!0),p=(0,i.ref)(!0),v=(0,i.ref)(!1),h=(0,i.ref)(!1),g=(0,i.ref)(!0),y=(0,i.ref)([]),f=(0,i.ref)([]),b=(0,i.ref)({}),C=(0,i.ref)(0),S=(0,i.ref)([]),w=(0,i.ref)(null),E=(0,i.ref)(null),k=new Aa,x=(0,i.ref)(0),N=(0,i.ref)({read:!1,create:!1,update:!1,delete:!1}),A=(0,i.computed)((()=>l.widgetGlobalConfig.widgetIcon)),D={iconName:" ",style:{"justify-content":"flex-start"}},T=e=>{if(e){const t=ee(e,s);if(t)return J(t,d,{locale:c})}return""},P=e=>{g.value=!1},V=()=>{g.value=!0},B=e=>{const t=m.$stateParams.empNumber,o=t==r;"summary"==e.type.trim()?window.location.href=o?`/client/#/noncore/time/viewMyTimesheet/timesheetStartDate/${e.startDate}`:`/client/#/noncore/time/viewPendingApprovelTimesheet/timesheetId/${e.id}/employeeId/${t}/timesheetStartday/${e.startDate}/redirectedFrom/employeeProfile`:"detailed"===e.type.trim()&&m.$state.go("time.detailed_timesheet",{timesheetId:e.id,redirectedFrom:"employeeProfile",empNo:t})},I=()=>{k.getDataGroupPermissions({dataGroup:"time_employee_timesheets",self:m.$stateParams.empNumber==r,entities:{Employee:m.$stateParams.empNumber}}).then((e=>{N.value=e,N.value&&N.value.read?(h.value=!1,L()):(u.value=!1,h.value=!0)}))},L=()=>{var e={limit:5};n.getEmployeeTimeSheets(m.$stateParams.empNumber,e).then((e=>{var t;if(e.data.data&&e.data.data.length>0){u.value=!1,v.value=!1;const a=J(new Date,"yyyy-MM-dd");let i=!1;e.data.data.forEach(((e,t)=>{const l={id:e.timesheetId,label:T(e.startDate)+" "+o("to")+" "+T(e.endDate),status:e.state,statusLabelColor:YI(e.state),statusBorderColor:XI(e.state),statusBackgroundColor:eL(e.state),type:e.type,startDate:e.startDate,endDate:e.endDate};y.value.push(l),!i&&te(l.endDate,a,"yyyy-MM-dd")&&(i=!0,w.value=l)})),i||(i=!0,w.value=y.value[0]),F(null===(t=w.value)||void 0===t?void 0:t.id)}else e.data.data&&0==e.data.data.length&&(v.value=!0,p.value=!1,u.value=!1)}))},F=e=>{f.value=[],S.value=[],E.value="00h 00m";let t=0;b.value=[],C.value=0,p.value=!0,n.getTimeSheetById(e).then((e=>{e.data.data.TimesheetItem.length>0&&(e.data.data.TimesheetItem.forEach((e=>{var o;f.value.push({id:e.timesheetItemId,activityName:e.JobActivity.name,activityId:e.activityId,projectId:e.projectId,projectName:null===(o=e.Project)||void 0===o?void 0:o.name,duration:e.duration}),t+=Number(e.duration),x.value=t})),z(),E.value=JI(t,!0)),p.value=!1}))},z=()=>{var e;b.value=f.value.reduce(((e,t)=>{var o;const a=t.activityId+""+t.projectId;return e[a]=null!==(o=e[a])&&void 0!==o?o:[],e[a].push(t),e}),{});let t=0;for(let[o,a]of Object.entries(b.value)){let i=0;null===(e=a)||void 0===e||e.forEach((e=>{i+=Number(e.duration)})),S.value.push({value:i,color:QI[t]});const l=a[0];l.itemcolor=QI[t],l.duration=JI(i),b.value[o]=l,t++,t===QI.length&&(t=0)}C.value=Object.keys(b.value).length};return(0,i.onMounted)((()=>{I()})),{appSpecificData:l,onLoading:u,onTimeSheetDataLoading:p,IsEmptyTimeSheet:v,IsInvalidPermission:h,widgetIcon:A,timePeriodDetails:y,selectedTimePeriod:w,timeSheetItemsGroupedByActivity:b,timeSheetItemsLength:C,chartData:S,redirectToTimeSheet:B,getEmployeeTimeSheetData:F,buttonObject:D,totalTimeSheetDuration:E,totalDurationGlobalParam:x,closeMenu:P,menuToggleOff:V,showMenu:g}}});const oL=(0,Re.Z)(tL,[["render",WI],["__scopeId","data-v-07dfc83a"]]);var aL=oL;const iL=e=>((0,i.pushScopeId)("data-v-3b8b97e2"),e=e(),(0,i.popScopeId)(),e),lL={class:"dashboard-widget"},nL={class:"widget-header",style:{"margin-bottom":"12px","padding-left":"0.75rem"}},rL={class:"widget-header-text"},sL={class:"widget-body",style:{overflow:"hidden"}},dL={key:1,class:"leave-list-wrapper"},cL={key:0,class:"widget-body-leave-info"},mL={class:"leave-requests-info"},uL={class:"leave-requests-info-string"},pL={class:"view-leave-list"},vL={key:1,class:"widget-body-leave-list"},hL={key:2,class:"no-items-placeholder-container"},gL={class:"no-item-watermark graph",style:{"margin-top":"45px"}},yL=iL((()=>(0,i.createElementVNode)("img",{src:"images/dashboard/watermarks/list_item_empty_watermark.png"},null,-1))),fL={class:"no-items-placeholder"},bL={key:2,class:"no-items-placeholder-container"},CL={class:"no-item-watermark graph",style:{"margin-top":"45px"}},SL=iL((()=>(0,i.createElementVNode)("img",{src:"images/dashboard/watermarks/list_item_empty_watermark.png"},null,-1))),wL={class:"no-items-placeholder"};function EL(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-dashboard-widget-settings-icon"),s=(0,i.resolveComponent)("oxd-icon"),d=(0,i.resolveComponent)("oxd-loader"),c=(0,i.resolveComponent)("oxd-button"),m=(0,i.resolveComponent)("oxd-dashboard-leave-list-month-item");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(r,{id:e.appSpecificData.id,"show-menu":e.showMenu,onMenuToggleOff:e.menuToggleOff},null,8,["id","show-menu","onMenuToggleOff"]),(0,i.createElementVNode)("div",{class:"dashboard-widget-container",onClick:t[1]||(t[1]=(...t)=>e.closeMenu&&e.closeMenu(...t))},[(0,i.createElementVNode)("div",lL,[(0,i.createElementVNode)("div",nL,[(0,i.createVNode)(s,{name:e.widgetIcon},null,8,["name"]),(0,i.createElementVNode)("span",rL,(0,i.toDisplayString)(e.$t(e.appSpecificData.title)),1)]),(0,i.createElementVNode)("div",sL,[e.onLoading?((0,i.openBlock)(),(0,i.createBlock)(d,{key:0,withContainer:!0,class:"oxd-loader-text-view"})):(0,i.createCommentVNode)("",!0),e.onLoading||e.noLeaveTypesDefined?e.noLeaveTypesDefined?((0,i.openBlock)(),(0,i.createElementBlock)("div",bL,[(0,i.createElementVNode)("div",CL,[SL,(0,i.createElementVNode)("span",wL,(0,i.toDisplayString)(e.$t("No Leave Type Defined")),1)])])):(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",dL,[e.dataGroupPermissions.read?((0,i.openBlock)(),(0,i.createElementBlock)("div",cL,[(0,i.createElementVNode)("div",mL,[(0,i.createElementVNode)("div",uL,(0,i.toDisplayString)(e.widgetInfoText),1)]),(0,i.createElementVNode)("div",pL,[e.filterDataLoaded&&e.statusesLoaded?((0,i.openBlock)(),(0,i.createBlock)(c,{key:0,label:e.$t(e.leaveListRedirectionButtonLabel),size:"small","data-test":"viewLeaveListButton",displayType:"text",class:"view-leave-list-button",onClick:t[0]||(t[0]=t=>e.redirectToLeaveList())},null,8,["label"])):(0,i.createCommentVNode)("",!0)])])):(0,i.createCommentVNode)("",!0),e.dataGroupPermissions.read?((0,i.openBlock)(),(0,i.createElementBlock)("div",vL,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.requestsByMonth,(t=>((0,i.openBlock)(),(0,i.createBlock)(m,{key:t.month,"leave-requests":t,onItemClicked:e.redirectToLeaveRequest},null,8,["leave-requests","onItemClicked"])))),128))])):(0,i.createCommentVNode)("",!0),e.dataGroupPermissions.read?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",hL,[(0,i.createElementVNode)("div",gL,[yL,(0,i.createElementVNode)("span",fL,(0,i.toDisplayString)(e.$t("No Permissions to View the Content")),1)])]))]))])])])],64)}const kL={class:"leave-requests"},xL={class:"leave-monthly-header"},NL={class:"leave-items"};function AL(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-dashboard-leave-list-item");return(0,i.openBlock)(),(0,i.createElementBlock)("div",kL,[(0,i.createElementVNode)("div",xL,[(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["month-header",{emptymonth:0===e.leaveRequests.requests.length}])},(0,i.toDisplayString)(e.$t(e.monthsArray[e.leaveRequests.month])+" "+e.leaveRequests.year),3)]),(0,i.createElementVNode)("div",NL,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.leaveRequests.requests,(t=>((0,i.openBlock)(),(0,i.createBlock)(r,{key:t.id,"leave-request":t,onClick:o=>e.redirectToLeaveRequest(t.id)},null,8,["leave-request","onClick"])))),128))])])}const DL={class:"leave-days"},TL={class:"leave-details"},PL={key:0,class:"multiple-statuses"},VL={class:"multiple-statuses-left"},BL={class:"leave-first-status"},IL={class:"leave-single-status"},LL={class:"leave-multiple-status"},FL={class:"leave-type"},zL={class:"multiple-statuses-right"},ML={class:"leave-count leave-count-main-custom"},OL={class:"leave-count-text leave-count-text-custom"},RL={key:1,class:"single-status"},_L={class:"leave-status"},$L={class:"leave-single-status"},jL={class:"leave-type"},UL={class:"multiple-statuses-right"},ZL={class:"leave-count leave-count-main-custom"},HL={class:"leave-count-text leave-count-text-custom"};function qL(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-dashboard-leave-list-item-date-pill");return(0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"leave-request",style:(0,i.normalizeStyle)(e.cardColour)},[(0,i.createElementVNode)("div",DL,[(0,i.createVNode)(r,{"start-date":e.leaveRequest.from,"end-date":e.leaveRequest.to},null,8,["start-date","end-date"])]),(0,i.createElementVNode)("div",TL,[e.leaveRequest.hasMultipleStatuses?((0,i.openBlock)(),(0,i.createElementBlock)("div",PL,[(0,i.createElementVNode)("div",VL,[(0,i.createElementVNode)("div",BL,[(0,i.createElementVNode)("div",IL,(0,i.toDisplayString)(e.firstStatus),1)]),(0,i.createElementVNode)("div",LL,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.restOfTheStatuses,((e,t)=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"leave-single-status",key:t},(0,i.toDisplayString)(e),1)))),128))]),(0,i.createElementVNode)("div",FL,(0,i.toDisplayString)(e.leaveRequest.leaveType),1)]),(0,i.createElementVNode)("div",zL,[(0,i.createElementVNode)("div",ML,[(0,i.createTextVNode)((0,i.toDisplayString)(e.leaveRequest.leaveAmount)+" ",1),(0,i.createElementVNode)("div",OL,(0,i.toDisplayString)(e.$t(e.leaveRequest.leaveUnit)),1)])])])):((0,i.openBlock)(),(0,i.createElementBlock)("div",RL,[(0,i.createElementVNode)("div",_L,[(0,i.createElementVNode)("div",$L,(0,i.toDisplayString)(e.leaveRequest.leaveStatuses[0]),1)]),(0,i.createElementVNode)("div",jL,(0,i.toDisplayString)(e.$t(e.leaveRequest.leaveType)),1),(0,i.createElementVNode)("div",UL,[(0,i.createElementVNode)("div",ZL,[(0,i.createTextVNode)((0,i.toDisplayString)(e.leaveRequest.leaveAmount)+" ",1),(0,i.createElementVNode)("div",HL,(0,i.toDisplayString)(e.$t(e.leaveRequest.leaveUnit)),1)])])]))])],4)}const GL={key:0,class:"single-day"},WL={class:"start-date"},KL={class:"day-string"},QL={class:"date-string"},JL={key:1,style:{display:"flex"},class:"multiple-day"},YL={class:"start-date"},XL={class:"day-string"},eF={class:"date-string"},tF={class:"duration-icon"},oF={class:"end-date"},aF={class:"day-string"},iF={class:"date-string"};function lF(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon");return e.isSingleDayLeaveRequest?((0,i.openBlock)(),(0,i.createElementBlock)("div",GL,[(0,i.createElementVNode)("div",WL,[(0,i.createElementVNode)("div",KL,(0,i.toDisplayString)(e.startDayToDisplay),1),(0,i.createElementVNode)("div",QL,(0,i.toDisplayString)(e.startDateToDisplay),1)])])):((0,i.openBlock)(),(0,i.createElementBlock)("div",JL,[(0,i.createElementVNode)("div",YL,[(0,i.createElementVNode)("div",XL,(0,i.toDisplayString)(e.startDayToDisplay),1),(0,i.createElementVNode)("div",eF,(0,i.toDisplayString)(e.startDateToDisplay),1)]),(0,i.createElementVNode)("div",tF,[(0,i.createVNode)(r,{name:"oxd-duration"})]),(0,i.createElementVNode)("div",oF,[(0,i.createElementVNode)("div",aF,(0,i.toDisplayString)(e.endDayToDisplay),1),(0,i.createElementVNode)("div",iF,(0,i.toDisplayString)(e.endDateToDisplay),1)])]))}var nF=(0,i.defineComponent)({name:"dashboard-leave-list-item-date-pill",components:{"oxd-icon":In.Z},props:{startDate:{type:String,required:!0},endDate:{type:String,required:!0}},emits:["toggleConfigurations"],setup(e){const t=ce(),o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a=(0,i.computed)((()=>La()(e.startDate,"YYYY-MM-DD").format("DD"))),l=(0,i.computed)((()=>t(o[La()(e.startDate,"YYYY-MM-DD").day()]))),n=(0,i.computed)((()=>La()(e.endDate,"YYYY-MM-DD").format("DD"))),r=(0,i.computed)((()=>t(o[La()(e.endDate,"YYYY-MM-DD").day()]))),s=(0,i.computed)((()=>e.endDate===e.startDate));return{startDateToDisplay:a,startDayToDisplay:l,endDateToDisplay:n,endDayToDisplay:r,isSingleDayLeaveRequest:s}}});const rF=(0,Re.Z)(nF,[["render",lF],["__scopeId","data-v-02479887"]]);var sF=rF,dF=(0,i.defineComponent)({name:"dashboard-leave-list-item",components:{"oxd-dashboard-leave-list-item-date-pill":sF},props:{leaveRequest:{type:Object,required:!0}},setup(e){ce();const t=(0,i.computed)((()=>({"--dynamic-card-colour":e.leaveRequest.colour?"RGBA("+o(e.leaveRequest.colour)+", 1)":"","--dynamic-card-colour-lighter-1":e.leaveRequest.colour?"RGBA("+o(e.leaveRequest.colour)+", 0.5)":"","--dynamic-card-colour-lighter-2":e.leaveRequest.colour?"RGBA("+o(e.leaveRequest.colour)+", 0.05)":""}))),o=e=>{let t=e.match(/.{1,2}/g);if(t){let e=[parseInt(t[0],16),parseInt(t[1],16),parseInt(t[2],16)];return e}return e},a=(0,i.computed)((()=>e.leaveRequest.formattedLeaveStatuses[0])),l=(0,i.computed)((()=>e.leaveRequest.formattedLeaveStatuses.slice(1)));return{cardColour:t,firstStatus:a,restOfTheStatuses:l}}});const cF=(0,Re.Z)(dF,[["render",qL],["__scopeId","data-v-010772b4"]]);var mF=cF,uF=(0,i.defineComponent)({name:"dashboard-leave-list-month-item",components:{"oxd-dashboard-leave-list-item":mF},props:{leaveRequests:{type:Object,required:!0}},emits:["itemClicked"],setup(e,t){const o=["January","February","March","April","May","June","July","August","September","October","November","December"],a=e=>{t.emit("itemClicked",e)};return{monthsArray:o,redirectToLeaveRequest:a}}});const pF=(0,Re.Z)(uF,[["render",AL],["__scopeId","data-v-1be0e598"]]);var vF=pF;class hF{constructor(e,t){this._app=(0,i.getCurrentInstance)(),this._t=ce(),this._app=e,this._leaveService=new bN,this._leaveAmountSettings=t}getFilterStartDateByJoinDate(e,t){let o=new Date;t&&(o=t);const a=o.getMonth()-6;let i=o.getFullYear()+"-"+this.getFormattedMonth(a+1)+"-01";if(a<0&&(i=o.getFullYear()-1+"-"+this.getFormattedMonth(a+13)+"-01"),""!==e&&new Date(e)>new Date(i)){const t=new Date(e);i=t.getFullYear()+"-"+this.getFormattedMonth(t.getMonth()+1)+"-01"}return i}getFormattedMonth(e){const t=e<10?"0":"";return t+e}mapLeaveRequests(e,t){return e.map((e=>{var o;const a=t.filter((t=>parseInt(t.id)==parseInt(e.data.LeaveType.id)));return{id:parseInt(e.id),leaveAmount:e.leave.leaveAmount,leaveUnit:e.data.LeaveType.hour_based?"Hour(s)":"Day(s)",leaveType:e.data.LeaveType.name+(1==e.data.LeaveType.deleted?" ("+this._t("Deleted")+")":""),from:e.leave.dateRange.from,to:e.leave.dateRange.to,hasMultipleStatuses:e.leave.breakdown.length>1,leaveStatuses:e.leave.breakdown.map((e=>this._t(e.status))),formattedLeaveStatuses:e.leave.breakdown.map((e=>this._t(e.status)+"("+e.amount+")")),startingMonth:(0,U.Z)(new Date(e.data.leave_start_date)),startingYear:(0,K.Z)(new Date(e.data.leave_start_date)),colour:(null===(o=a[0])||void 0===o?void 0:o.color)?a[0].color:""}}))}rearrangeLeaveRequestsBasedOnMonth(e,t,o,a){let i=e;const l=[];let n=0;do{const e=new Date(i),t=this.filterRequestsByMonthAndYear((0,U.Z)(e),(0,K.Z)(e),o);(t.length>0||(0,U.Z)(e)==(0,U.Z)(a)&&(0,K.Z)(e)==(0,K.Z)(a))&&l.push({month:(0,U.Z)(e),year:(0,K.Z)(e),requests:t});let r=(0,K.Z)(e);(0,U.Z)(e)-1<0?(r-=1,n=12):n=(0,U.Z)(e),i=this.toDateString(r,n,this.lastDay(r,n-1))}while(new Date(i)>a&&new Date(i)>new Date(t));while(new Date(i)>new Date(t)){const e=new Date(i),t=this.filterRequestsByMonthAndYear((0,U.Z)(e),(0,K.Z)(e),o);l.push({month:(0,U.Z)(e),year:(0,K.Z)(e),requests:t}),n=0;let a=(0,K.Z)(e);(0,U.Z)(e)-1<0?(a-=1,n=12):n=(0,U.Z)(e),i=this.toDateString(a,n,this.lastDay(a,n-1))}return l}filterRequestsByMonthAndYear(e,t,o){return o.filter((function(o){return e==o.startingMonth&&t==o.startingYear}))}toDateString(e,t,o){return e+"-"+("00"+t).slice(-2)+"-"+("00"+o).slice(-2)}lastDay(e,t){return new Date(e,t+1,0).getDate()}breakDownLeaveRequests(e,t){const o=[],a=this;return e.forEach((e=>{let i=(0,Zg.Z)(e);const l=new Date(e.leave.dateRange.from),n=new Date(e.leave.dateRange.to);if((0,U.Z)(l)!==(0,U.Z)(n)||(0,K.Z)(l)!==(0,K.Z)(n)){let l=[],n="",r="",s=0,d=null;const c=e.data.LeaveType.hour_based;e.data.Leave.slice().reverse().forEach((function(m){const u=m.date,p=new Date(u);""==r&&(r=u,n=u,s=a.getLeaveAmountFromLeave(m,c),l.push(m)),d=new Date(r),(0,U.Z)(p)!==(0,U.Z)(d)?(i.leave.dateRange.from=n,i.leave.dateRange.to=r,i.data.Leave=l,i.data.leave_start_date=n,i.leave.leaveAmount=a._leaveService.formatAmount(s.toString(),c,a._leaveAmountSettings),i.leave.breakdown=a.extractLeaveStatusCount(l,t),a.hasNotCancelledLeave(i)&&o.push(i),i=(0,Zg.Z)(e),l=[],r=u,n=u,s=a.getLeaveAmountFromLeave(m,c),l.push(m)):p<d&&(n=u,s+=a.getLeaveAmountFromLeave(m,c),l.push(m))})),i.leave.dateRange.from=n,i.leave.dateRange.to=r,i.data.Leave=l,i.data.leave_start_date=n,i.leave.leaveAmount=a._leaveService.formatAmount(s.toString(),c,a._leaveAmountSettings),i.leave.breakdown=this.extractLeaveStatusCount(l,t)}a.hasNotCancelledLeave(i)&&o.push(i)})),o}hasNotCancelledLeave(e){let t=!1;return e.leave.breakdown.forEach((e=>{"Cancelled"!=e.status&&(t=!0)})),t}getLeaveAmountFromLeave(e,t){return t?parseFloat(e.length_minutes):parseFloat(e.length_days)}extractLeaveStatusCount(e,t){const o=[];for(const[a,i]of Object.entries(t)){const t=e.filter((function(e){return a==e.status&&parseFloat(e.length_days)>0}));if(t.length){let e=0;t.forEach((t=>{e+=parseFloat(t.length_days)})),o.push({status:i,amount:e.toString()})}}return o}}var gF=(0,i.defineComponent)({name:"dashboardLeaveListWidget",inheritAttrs:!1,components:{"oxd-icon":In.Z,"oxd-button":jt.Z,"oxd-dashboard-widget-settings-icon":mB,"oxd-dashboard-leave-list-month-item":vF,"oxd-loader":co.Z},setup:function(e,t){const o=ce(),a=(0,i.getCurrentInstance)(),l=(0,i.inject)("appSpecificData"),n=(0,i.inject)("ngServices"),{settings:r}=vu(),s=null===a||void 0===a?void 0:a.appContext.config.globalProperties.empNo,d=l.empNumber,c=(0,i.ref)("View Leave List");s==d&&(c.value="View My Leave");const m=(0,i.ref)(!1),u=(0,i.ref)(!1),p=(0,i.ref)(!1),v=(0,i.ref)(""),h=(0,i.ref)(""),g=(0,i.ref)({cmbStartDate:"1",cmbStartMonth:"1",currentEndDate:"",currentLeavePeriod:"",currentStartDate:"",editable:!1,leavePeriodDefined:!1,nextEndDate:"",nextStartDate:""}),y=(0,i.ref)([]),f=(0,i.ref)([]),b=(0,i.ref)({}),C=(0,i.ref)(!0),S=(0,i.ref)(!1),w=(0,i.ref)(!0),E=(0,i.ref)({}),k=(0,i.computed)((()=>l.widgetGlobalConfig.widgetIcon)),x=new bN,N=["January","February","March","April","May","June","July","August","September","October","November","December"],A=(0,i.computed)((()=>{let e=new Date(v.value);return o("Leave Request(s) From {{month}} {{year}}",{month:o(N[(0,U.Z)(e)])?o(N[(0,U.Z)(e)]):"",year:(0,K.Z)(e)?(0,K.Z)(e):""})})),D=s==d?"apply":"assign",T="assign"==D?new nA(a):new rA(a),P=new UV,V=(0,i.ref)([]),B=new Aa,I=(0,i.ref)({read:!1,create:!1,update:!1,delete:!1}),L=(0,i.ref)({}),F=(0,i.ref)(""),z=e=>{w.value=!1},M=()=>{w.value=!0},O=e=>{let t=[];for(const[o,a]of Object.entries(b.value))a&&t.push(o);T.getLeaveRequestsWithFilters(d,v.value,h.value,t,m.value).then((t=>{C.value=!1;let o=e.breakDownLeaveRequests(t,L.value);y.value=[],V.value=e.mapLeaveRequests(o,f.value),y.value=e.rearrangeLeaveRequestsBasedOnMonth(h.value,v.value,V.value,new Date)}))},R=()=>{let e=[];for(const[o,a]of Object.entries(b.value))a&&e.push(o);const t=JSON.stringify({from:v.value,to:h.value,status:e,empNumber:d,pastEmployee:m.value});s==d?n.$state.go("leave.view_my_leave_list",{filter:t,redirectedFrom:"employeeProfile"}):n.$state.go("leave.view_leave_list",{filter:t,redirectedFrom:"employeeProfile"})},_=e=>{T.goToLeaveRequest(e,d,"employeeProfile")},$=()=>{null===r||void 0===r||r.then((e=>{E.value=x.getLeaveAmountSettings(e);const t=new hF(a,E.value);let o={};d==s&&(o={filter:{type:"my_leave_list"}}),P.getLeaveStatus(o).then((e=>{if(e.data){L.value=e.data;for(const[t,o]of Object.entries(e.data))b.value[t]=!0;p.value=!0}})),P.getEmployeeDetails(n.$stateParams.empNumber).then((e=>{e.data.data&&(F.value=e.data.data.joined_date),m.value=null!=e.data.data.termination_id,P.getDefaultLeavePeriod().then((e=>{g.value=e.data.data,v.value=t.getFilterStartDateByJoinDate(F.value,new Date),h.value=g.value.nextEndDate,P.getLeaveEvents(!0).then((e=>{e.data.meta&&(f.value=(0,OB.Z)(e.data.meta.legend.leaveTypeColorList)),u.value=!0,O(t)})).catch((()=>{C.value=!1,S.value=!0}))}))}))}))};return B.getDataGroupPermissions({dataGroup:"leave_list",self:d==s,entities:{Employee:d}}).then((e=>{0!==e.length&&(I.value=e),I.value.read?$():C.value=!1})).catch((()=>{C.value=!1})),{appSpecificData:l,widgetIcon:k,widgetInfoText:A,redirectToLeaveList:R,filteredLeaveRequests:V,redirectToLeaveRequest:_,requestsByMonth:y,configurationEditModel:b,dataGroupPermissions:I,filterDataLoaded:u,statusesLoaded:p,leaveListRedirectionButtonLabel:c,onLoading:C,noLeaveTypesDefined:S,closeMenu:z,menuToggleOff:M,showMenu:w}}});const yF=(0,Re.Z)(gF,[["render",EL],["__scopeId","data-v-3b8b97e2"]]);var fF=yF;const bF=e=>((0,i.pushScopeId)("data-v-4dcf7896"),e=e(),(0,i.popScopeId)(),e),CF={class:"dashboard-widget"},SF={class:"widget-header",style:{"margin-bottom":"12px","padding-left":"0.75rem"}},wF={class:"widget-header-text"},EF={class:"widget-body"},kF={key:1,class:"module-container"},xF=["href","target"],NF={class:"title"},AF={class:"module-name"},DF={class:"screen-name"},TF={key:2,class:"no-items-placeholder-container"},PF={class:"no-item-watermark graph"},VF=bF((()=>(0,i.createElementVNode)("img",{src:"images/dashboard/watermarks/list_item_empty_watermark.png"},null,-1))),BF={class:"no-items-placeholder"};function IF(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-dashboard-widget-settings-icon"),s=(0,i.resolveComponent)("oxd-icon"),d=(0,i.resolveComponent)("oxd-loader"),c=(0,i.resolveComponent)("configure-employee-quick-access-widget");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(r,{id:e.appSpecificData.id,"show-configurations":!0,onToggleConfigurations:e.toggleConfigurationsModal,"show-menu":e.showMenu,onMenuToggleOff:e.menuToggleOff},null,8,["id","onToggleConfigurations","show-menu","onMenuToggleOff"]),(0,i.createElementVNode)("div",{class:"dashboard-widget-container",onClick:t[0]||(t[0]=(...t)=>e.closeMenu&&e.closeMenu(...t))},[(0,i.createElementVNode)("div",CF,[(0,i.createElementVNode)("div",SF,[(0,i.createVNode)(s,{name:e.widgetIcon},null,8,["name"]),(0,i.createElementVNode)("span",wF,(0,i.toDisplayString)(e.$t(e.appSpecificData.title)),1)]),(0,i.createElementVNode)("div",EF,[e.onLoading?((0,i.openBlock)(),(0,i.createBlock)(d,{key:0,withContainer:!0,class:"oxd-loader-text-view"})):(0,i.createCommentVNode)("",!0),!e.onLoading&&e.widgetDetails.length>0?((0,i.openBlock)(),(0,i.createElementBlock)("div",kF,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.widgetDetails,(t=>((0,i.openBlock)(),(0,i.createElementBlock)("a",{class:"module",tabindex:"0",href:t.href,target:t.target,key:t.key},[(0,i.createVNode)(s,{name:t.icon,style:(0,i.normalizeStyle)({"background-color":t.color})},null,8,["name","style"]),(0,i.createElementVNode)("div",NF,[(0,i.createElementVNode)("div",AF,(0,i.toDisplayString)(e.$t(t.moduleName)),1),(0,i.createElementVNode)("div",DF,(0,i.toDisplayString)(e.$t(t.screenName)),1)])],8,xF)))),128))])):(0,i.createCommentVNode)("",!0),e.onLoading||0!=e.widgetDetails.length?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",TF,[(0,i.createElementVNode)("div",PF,[VF,(0,i.createElementVNode)("span",BF,(0,i.toDisplayString)(e.$t("No Links to Display")),1)])]))])])]),e.addModalState?((0,i.openBlock)(),(0,i.createBlock)(c,{key:0,ref:"configurations",loading:!1,"editing-model":e.configurationEditModel,options:e.availableWidgets,onSubmitValid:e.saveConfigurations,"onUpdate:show":e.closeModal},null,8,["editing-model","options","onSubmitValid","onUpdate:show"])):(0,i.createCommentVNode)("",!0)],64)}const LF={class:"modal-header-with-icon",style:{display:"flex","align-items":"center"}},FF={class:"header-container"},zF={class:"sub-heading"},MF={class:"heading"};function OF(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon"),s=(0,i.resolveComponent)("oxd-schema-form"),d=(0,i.resolveComponent)("form-modal");return(0,i.openBlock)(),(0,i.createBlock)(d,{"max-width":"600px"},{title:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",LF,[(0,i.createVNode)(r,{name:"oxd-quick-access-icon",size:"medium",style:{"margin-right":"10px"}})]),(0,i.createElementVNode)("span",FF,[(0,i.createElementVNode)("div",zF,(0,i.toDisplayString)(e.$t(e.modalTitle)),1),(0,i.createElementVNode)("div",MF,(0,i.toDisplayString)(e.$t("Configurations")),1)])])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(s,(0,i.mergeProps)({schema:e.schema,model:e.model,"onUpdate:model":t[0]||(t[0]=t=>e.model=t)},e.$attrs),null,16,["schema","model"])])),_:1})}const RF="date",_F=ce();function $F(e){return[{type:"divider",style:{margin:"0"}},{type:"action",children:{default:[{name:"reset",label:_F("Cancel"),type:"button",props:{type:"button",displayType:"ghost"},listeners:{onClick:()=>{e.emit("update:show",!0)}}},{name:"submit",label:_F("Save"),type:"button",style:{"margin-left":"0.5rem"},props:{type:"submit",displayType:"secondary"}}]},style:{"padding-top":"1.2rem"}}]}function jF(e){return{type:"grid",props:{cols:2},children:{default:UF(e)},style:{"margin-left":"-10px","margin-right":"-10px"}}}function UF(e){if(e)return e.map((e=>ZF(e.name,e.label,e.type)))}function ZF(e,t,o){return o==RF?{name:e,label:_F(t),type:"custom",component:(0,i.markRaw)(rN)}:{name:e,label:"",type:"switch",props:{"option-label":_F(t),"label-position":"left",useFullWidth:!0},value:!1,class:["mb-sm--oxd-input-group","switch-input-group","--offset-column-1"]}}function HF(e){return(0,A.mG)(this,void 0,void 0,(function*(){const t=[];t.push(jF(e));const o=$F(this);return{name:"configureQuickAccessWidgetForm",layout:[...t,...o]}}))}var qF=HF,GF=(0,i.defineComponent)({name:"configureEmployeeDetails",components:{"form-modal":gc,"oxd-schema-form":yc.Z,"oxd-icon":In.Z},props:{editingModel:{type:Object,required:!1},options:{type:Array,required:!0}},setup(e,t){const o=(0,i.ref)(Object.assign({},e.editingModel)),a="Quick Access",l=(0,fc.Z)(qF.call(t,e.options)),n=l.schema,r=o;return{model:r,schema:n,modalTitle:a}}});const WF=(0,Re.Z)(GF,[["render",OF],["__scopeId","data-v-29ef4c32"]]);var KF=WF,QF=(0,i.defineComponent)({name:"DashboardEmployeeQuickAccessWidget",inheritAttrs:!1,components:{"oxd-dashboard-widget-settings-icon":mB,"oxd-icon":In.Z,"oxd-loader":co.Z,"configure-employee-quick-access-widget":KF},setup:function(){const e=ce(),t=(0,i.getCurrentInstance)(),o=(0,i.inject)("appSpecificData"),a=new UV,l=null===t||void 0===t?void 0:t.appContext.config.globalProperties.empNo,n=(0,i.ref)(""),r=(0,i.ref)(""),s=o.empNumber;let d="",c="";o.employee&&o.employee.jobCandidate&&(d=o.employee.jobCandidate.id,o.employee.jobCandidate.vacancy&&(c=o.employee.jobCandidate.vacancy.vacancyId));const m=(0,i.inject)("ngServices"),u=(0,i.ref)([]),p=(0,i.ref)([]),v=(0,i.ref)([]);let h=o.widgetGlobalConfig.accessLinks;const g=new Aa,y=(0,i.ref)(!0),f=s==l,b=(0,i.ref)(!0),C=(0,i.ref)(!1);let S=[];const w=(0,i.ref)(o.config.settings),E=()=>{let e=[];p.value=[],v.value=[],h.forEach((t=>{e.push(N(t))})),Promise.all(e).then((e=>{h.forEach((t=>{if(S=e.filter((e=>t.key==e[0])),1==S.length&&S[0][1]){if(k(t.key)&&x(t)){if("href"==t.redirectionStrategy.trim())t.url=t.url.replace("_##_empNumber_##_",m.$stateParams.empNumber).replace("_##_id_##_",S[0][1]).replace("_##_candidateId_##_",d).replace("_##_vacancyId_##_",c),t.href=t.url,t.noRedirectBack||(t.href+="/redirectedFrom/employeeProfile");else if("uisref"===t.redirectionStrategy.trim()){const e=f&&t.myInfoState?t.myInfoState:t.state;var o={empNo:s,employeeId:r.value,empName:n.value,include:"2"};t.noRedirectBack||(o.redirectedFrom="employeeProfile"),t.href=m.$state.href(e,o)}t.target=t.target?t.target:"_self",u.value.push(t)}v.value.push({name:t.key,type:"switch",label:t.screenName})}})),y.value=!1})).catch((e=>{y.value=!1}))},k=e=>!!w.value[e],x=e=>{let t=!0;return"candidateProfile"===e.key&&(t=!!d),t},N=e=>e.dataGroup?g.getDataGroupPermissions({dataGroup:s==l&&e.selfdataGroup?e.selfdataGroup:e.dataGroup,self:s==l,entities:A(e)}).then((t=>0!==t.length?(p.value.push(e.key),[e.key,t.read]):[e.key,!1])):e.api?a.getEmployeeDataFromApi(e.api,s).then((t=>{if(0!==t.data.data.length){if(p.value.push(e.key),"trackers"==e.key){let o=t.data.data.map((e=>parseInt(e.id)));return[e.key,Math.max.apply(0,o)]}return[e.key,t.data.data[t.data.data.length-1].id]}return[e.key,!1]})):void 0,A=e=>{let t={};switch(e.key){case"candidateProfile":t={Candidate:d};break;default:t={Employee:s}}return t},D=()=>{y.value=!0,a.getEmployeeDetails(m.$stateParams.empNumber).then((t=>{if(t.data.data){const o=t.data.data;let a=""!==o.termination_id&&null!==o.termination_id?" ("+e("Past Employee")+")":"";r.value=o.employeeId,n.value=o.firstName+" "+o.lastName+a}E()})).catch((()=>{y.value=!1}))},T=e=>{b.value=!1},P=()=>{b.value=!0},V=(0,i.computed)((()=>o.widgetGlobalConfig.widgetIcon?o.widgetGlobalConfig.widgetIcon:"")),B=()=>{C.value=!C.value,b.value=!1},I=()=>{C.value=!1},L=t=>{a.setWidgetConfigurations(o.id,t).then((t=>{t&&!y.value&&(ge.showAngularToast(Ac,e(be)),w.value=t.data.data.config.settings,I(),u.value=[],y.value=!0,E())}))};return D(),{appSpecificData:o,widgetIcon:V,widgetDetails:u,availableWidgets:v,closeModal:I,toggleConfigurationsModal:B,onLoading:y,addModalState:C,configurationEditModel:w,saveConfigurations:L,closeMenu:T,menuToggleOff:P,showMenu:b}}});const JF=(0,Re.Z)(QF,[["render",IF],["__scopeId","data-v-4dcf7896"]]);var YF=JF;const XF=e=>((0,i.pushScopeId)("data-v-0967e824"),e=e(),(0,i.popScopeId)(),e),ez={class:"dashboard-widget"},tz={class:"widget-header",style:{"padding-left":"0.75rem"}},oz={class:"widget-header-text"},az={key:1,class:"navigate-buttons"},iz={key:0,class:"empty-widget-body"},lz={key:2,class:"empty-widget-body"},nz={key:0,class:"no-items-placeholder-container"},rz={class:"no-item-watermark graph",style:{"margin-top":"45px"}},sz=XF((()=>(0,i.createElementVNode)("img",{src:"images/dashboard/watermarks/list_item_empty_watermark.png"},null,-1))),dz={class:"no-items-placeholder"},cz={key:1,class:"no-items-placeholder-container"},mz={class:"no-item-watermark graph",style:{"margin-top":"45px"}},uz=XF((()=>(0,i.createElementVNode)("img",{src:"images/dashboard/watermarks/list_item_empty_watermark.png"},null,-1))),pz={class:"no-items-placeholder"};function vz(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-dashboard-widget-settings-icon"),s=(0,i.resolveComponent)("oxd-icon"),d=(0,i.resolveComponent)("oxd-button"),c=(0,i.resolveComponent)("oxd-icon-button"),m=(0,i.resolveComponent)("oxd-loader"),u=(0,i.resolveComponent)("oxd-dashboard-goal-items-list"),p=(0,i.resolveComponent)("configure-goals-widget");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(r,{id:e.appSpecificData.id,"show-configurations":!e.onLoading&&e.dataGroupPermissions.read,"show-menu":e.showMenu,onToggleConfigurations:e.toggleConfigurationsModal,onMenuToggleOff:e.menuToggleOff},null,8,["id","show-configurations","show-menu","onToggleConfigurations","onMenuToggleOff"]),(0,i.createElementVNode)("div",{class:"dashboard-widget-container",onClick:t[3]||(t[3]=(...t)=>e.closeMenu&&e.closeMenu(...t))},[(0,i.createElementVNode)("div",ez,[(0,i.createElementVNode)("div",tz,[(0,i.createVNode)(s,{name:e.widgetIcon},null,8,["name"]),(0,i.createElementVNode)("span",oz,(0,i.toDisplayString)(e.$t(e.appSpecificData.title)),1),!e.onLoading&&e.dataGroupPermissions.read?((0,i.openBlock)(),(0,i.createBlock)(d,{key:0,label:e.$t(e.viewGoalListButtonLabel),size:"extra-small","data-test":"viewGoalListButton",class:(0,i.normalizeClass)([{extrarightmargin:!e.showNavigationButtons},"view-goal-list-button"]),displayType:"text",onClick:t[0]||(t[0]=t=>e.redirectToGoalList())},null,8,["label","class"])):(0,i.createCommentVNode)("",!0),e.showNavigationButtons&&!e.onLoading&&e.dataGroupPermissions.read?((0,i.openBlock)(),(0,i.createElementBlock)("div",az,[(0,i.createVNode)(c,{name:"oxd-arrow-left",size:"xxx-small",class:(0,i.normalizeClass)(["oxd-navigate-button-goals",{active:!0,"navigation-visible":e.leftNavigationVisible}]),onClick:t[1]||(t[1]=t=>e.scrollLeft()),tooltip:e.$t(e.leftNavigationTooltip),flow:"bottom"},null,8,["class","tooltip"]),(0,i.createVNode)(c,{name:"oxd-arrow-right",size:"xxx-small",class:(0,i.normalizeClass)(["oxd-navigate-button-goals",{active:!0,"navigation-visible":e.rightNavigationVisible}]),onClick:t[2]||(t[2]=t=>e.scrollRight()),tooltip:e.$t(e.rightNavigationTooltip),flow:"bottom"},null,8,["class","tooltip"])])):(0,i.createCommentVNode)("",!0)]),e.onLoading?((0,i.openBlock)(),(0,i.createElementBlock)("div",iz,[(0,i.createVNode)(m,{withContainer:!0,class:"oxd-loader-text-view"})])):(0,i.createCommentVNode)("",!0),!e.onLoading&&e.dataGroupPermissions.read&&e.goals.length>0?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:1,class:"widget-body",style:(0,i.normalizeStyle)([{overflow:"hidden"},{"grid-template-columns":e.gridTemplateColumns,"grid-auto-columns":e.gridAutoColumns}]),id:"tableSlider",ref:"tableSlider"},[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.goalsStatusBreakdown,(t=>((0,i.openBlock)(),(0,i.createBlock)(u,{key:t.id,heading:t.state,colour:t.colour,items:t.goals,"logged-in-emp-number":e.loggedInEmpNumber,"emp-number":e.empNumber,"max-goal-completion-percentage":e.maxGoalCompletionPercentage},null,8,["heading","colour","items","logged-in-emp-number","emp-number","max-goal-completion-percentage"])))),128))],4)):(0,i.createCommentVNode)("",!0),e.onLoading||e.dataGroupPermissions.read&&e.goals.length>0?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",lz,[e.dataGroupPermissions.read?e.goals.length>0?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",cz,[(0,i.createElementVNode)("div",mz,[uz,(0,i.createElementVNode)("span",pz,(0,i.toDisplayString)(e.$t("No Goals/OKRs to Display")),1)])])):((0,i.openBlock)(),(0,i.createElementBlock)("div",nz,[(0,i.createElementVNode)("div",rz,[sz,(0,i.createElementVNode)("span",dz,(0,i.toDisplayString)(e.$t("No Permissions to View the Content")),1)])]))]))])]),e.configModalState?((0,i.openBlock)(),(0,i.createBlock)(p,{key:0,ref:"configurations",loading:!1,"editing-model":e.configurationEditModel,options:e.availableWidgets,"modal-icon":e.widgetIcon,onSubmitValid:e.saveConfigurations,"onUpdate:show":e.closeConfigurationsModal},null,8,["editing-model","options","modal-icon","onSubmitValid","onUpdate:show"])):(0,i.createCommentVNode)("",!0)],64)}const hz=e=>((0,i.pushScopeId)("data-v-a4283ac8"),e=e(),(0,i.popScopeId)(),e),gz={class:"goal-items-list"},yz={class:"goal-items-list-heading"},fz={class:"goal-items-list-body"},bz={key:0,class:"goals-list"},Cz={key:1,class:"empty-goals-message"},Sz=hz((()=>(0,i.createElementVNode)("img",{src:"images/dashboard/watermarks/no_goals.png"},null,-1))),wz={class:"no-items-placeholder"};function Ez(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-dashboard-goal-item");return(0,i.openBlock)(),(0,i.createElementBlock)("div",gz,[(0,i.createElementVNode)("div",yz,(0,i.toDisplayString)(e.$t(e.heading)),1),(0,i.createElementVNode)("div",fz,[e.items.length>0?((0,i.openBlock)(),(0,i.createElementBlock)("div",bz,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.items,(o=>((0,i.openBlock)(),(0,i.createBlock)(r,{key:o.id,item:o,name:o.name,date:o.date,completion:parseInt(o.goalPercentageCompletion),priority:o.priority,"data-test":"goalItem"+o.id,colour:e.colour,"max-goal-completion-percentage":e.maxGoalCompletionPercentage,focus:e.focusedItemId===o.id,onItemClicked:t=>e.redirectToGoal(o),onKeyup:(0,i.withKeys)((t=>e.redirectToGoal(o)),["enter"]),onFocusin:t=>e.onItemHover(o),onFocusout:t[0]||(t[0]=t=>e.onItemHoverOut()),tabindex:"0"},null,8,["item","name","date","completion","priority","data-test","colour","max-goal-completion-percentage","focus","onItemClicked","onKeyup","onFocusin"])))),128))])):((0,i.openBlock)(),(0,i.createElementBlock)("div",Cz,[Sz,(0,i.createElementVNode)("div",wz,(0,i.toDisplayString)(e.getEmptyGoalsMessage(e.heading)),1)]))])])}const kz={class:"progress-circle"},xz={class:"goal-summary-description"},Nz={class:"goal-severity"},Az={class:"goal-level-icon"},Dz={class:"goal-type-icon"},Tz={class:"goal-target-date"},Pz={class:"goal-target-date-string"},Vz={class:"goal-description-text"},Bz={key:0,class:"read-more-label"};function Iz(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon"),s=(0,i.resolveComponent)("oxd-progress-circle");return(0,i.openBlock)(),(0,i.createElementBlock)("div",{class:(0,i.normalizeClass)(["goal-item",e.classObject])},[(0,i.createElementVNode)("div",{class:"goal-summary",onClick:t[0]||(t[0]=t=>e.$emit("itemClicked"))},[(0,i.createElementVNode)("span",kz,[(0,i.createVNode)(s,{radius:21,"stroke-width":5,value:parseInt(e.item.goalPercentageCompletion),"stroke-fill-color":e.strokeFillColour},{progressCircleInnerContent:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["goal-percentage",{"custom-percentage-font-size":e.isGoalPercentageAboveThousand}])},(0,i.toDisplayString)(parseInt(e.item.goalPercentageCompletion))+"% ",3)])),progressCircleBottomContent:(0,i.withCtx)((()=>[2===parseInt(e.item.purposeId)?((0,i.openBlock)(),(0,i.createBlock)(r,{key:0,class:"development-goals-icon",name:"oxd-goals-development",size:"small",tooltip:e.$t("Development Goal"),flow:"right"},null,8,["tooltip"])):(0,i.createCommentVNode)("",!0)])),_:1},8,["value","stroke-fill-color"])]),(0,i.createElementVNode)("div",xz,[(0,i.createElementVNode)("span",Nz,[(0,i.createElementVNode)("span",Az,[1===parseInt(e.item.categoryId)?((0,i.openBlock)(),(0,i.createBlock)(r,{key:0,name:"oxd-goals",tooltip:e.$t(e.category),flow:"bottom"},null,8,["tooltip"])):((0,i.openBlock)(),(0,i.createBlock)(r,{key:1,name:"oxd-okrs",tooltip:e.$t(e.category),flow:"bottom"},null,8,["tooltip"]))]),(0,i.createElementVNode)("span",Dz,[1===parseInt(e.item.levelId)?((0,i.openBlock)(),(0,i.createBlock)(r,{key:0,name:"oxd-organizational-structure",tooltip:e.$t(e.item.levelName),flow:"bottom"},null,8,["tooltip"])):((0,i.openBlock)(),(0,i.createBlock)(r,{key:1,name:"oxd-individual",tooltip:e.$t(e.item.levelName),flow:"bottom"},null,8,["tooltip"]))]),(0,i.createElementVNode)("span",{class:"goal-severity-label",style:(0,i.normalizeStyle)({"background-color":e.item.priority.color})},(0,i.toDisplayString)(e.$t(e.item.priority.name)),5)]),(0,i.createElementVNode)("div",Tz,[(0,i.createElementVNode)("span",Pz,(0,i.toDisplayString)(e.dueDate),1)])])]),(0,i.createElementVNode)("div",{class:"goal-description",onClick:t[1]||(t[1]=t=>e.$emit("itemClicked"))},[(0,i.createElementVNode)("div",Vz,(0,i.toDisplayString)(e.goalName),1)]),e.hideOverflowingName?((0,i.openBlock)(),(0,i.createElementBlock)("div",Bz,[(0,i.createElementVNode)("a",{class:"read-more",href:"javascript:void(0)",onClick:t[2]||(t[2]=(...t)=>e.showFullTextContent&&e.showFullTextContent(...t))},(0,i.toDisplayString)(e.$t("Read More")),1)])):(0,i.createCommentVNode)("",!0)],2)}var Lz=o(13652),Fz=o(94731),zz=(0,i.defineComponent)({name:"dashboard-goal-item",components:{"oxd-icon":In.Z,"oxd-progress-circle":US.Z},props:{item:{type:Object,required:!0},colour:{type:Object,required:!1,default:()=>({default:"#00ead3",overDefault:"#00c2af",overHalfMax:"#00998a"})},maxGoalCompletionPercentage:{type:Number,required:!0},focus:{type:Boolean,default:!1}},emits:["itemClicked"],setup(e){const{jsSavingFormat:t,jsDisplayFormat:o,locale:a}=Im(),l=(0,i.ref)(115),n=(0,i.ref)(e.item.name.length),r=(0,i.ref)(!1),s=(0,i.ref)(e.maxGoalCompletionPercentage);n.value>l.value&&(r.value=!0);const d=e=>(0,Lz.Z)((0,Fz.Z)(e)),c=e=>{if(e){const i=ee(e,t);if(i)return J(i,o,{locale:a})}return""},m=(0,i.computed)((()=>d(e.item.category))),u=(0,i.computed)((()=>c(e.item.dueDate))),p=(0,i.computed)((()=>{var t,o,a;let i=parseInt(e.item.goalPercentageCompletion);return i>s.value/2?null===(t=e.colour)||void 0===t?void 0:t.overHalfMax:i>100?null===(o=e.colour)||void 0===o?void 0:o.overDefault:null===(a=e.colour)||void 0===a?void 0:a.default})),v=(0,i.computed)((()=>{let t=parseInt(e.item.goalPercentageCompletion);return t>999})),h=(0,i.computed)((()=>r.value?e.item.name.substr(0,l.value)+"...":e.item.name)),g=()=>{r.value=!r.value},y=(0,i.computed)((()=>({"focused-tile":e.focus})));return{category:m,dueDate:u,goalName:h,hideOverflowingName:r,showFullTextContent:g,strokeFillColour:p,isGoalPercentageAboveThousand:v,classObject:y}}});const Mz=(0,Re.Z)(zz,[["render",Iz],["__scopeId","data-v-69ad1375"]]);var Oz=Mz,Rz=(0,i.defineComponent)({name:"dashboard-goal-item",components:{"oxd-dashboard-goal-item":Oz},props:{heading:{type:String,required:!0},colour:{type:Object,required:!1,default:()=>({default:"#00ead3",overDefault:"#00c2af",overHalfMax:"#00998a"})},items:{type:Array,required:!0},loggedInEmpNumber:{type:Number,required:!0},empNumber:{type:Number,required:!0},maxGoalCompletionPercentage:{type:Number,required:!0}},setup:function(e){const t=ce(),o=(0,i.inject)("ngServices"),a=e.empNumber==e.loggedInEmpNumber,l=(0,i.ref)(0),n=t=>{a?o.$state.go("performance.goals.my.add",{listType:"my_goals",goalId:t.id,category:t.category,listName:"performanceMyGoalsList",redirectFrom:"employeeProfile",empNumber:e.empNumber}):o.$state.go("performance.goals.approved.add",{listType:"employee_goals",goalId:t.id,category:t.category,listName:"performanceGoalsList",redirectFrom:"employeeProfile",empNumber:e.empNumber})},r=e=>t("No {{status}} Goals/OKRs to Display",{status:t(e)}),s=e=>{l.value=e.id},d=()=>{l.value=0};return{redirectToGoal:n,getEmptyGoalsMessage:r,onItemHover:s,onItemHoverOut:d,focusedItemId:l}}});const _z=(0,Re.Z)(Rz,[["render",Ez],["__scopeId","data-v-a4283ac8"]]);var $z=_z;const jz={class:"modal-header-with-icon",style:{display:"flex","align-items":"center"}},Uz={class:"header-container"},Zz={class:"sub-heading"},Hz={class:"heading"};function qz(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon"),s=(0,i.resolveComponent)("oxd-schema-form"),d=(0,i.resolveComponent)("form-modal");return(0,i.openBlock)(),(0,i.createBlock)(i.Teleport,{to:"#mount-vue-app"},[(0,i.createVNode)(d,{"max-width":"600px","onUpdate:show":e.onCancel},{title:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",jz,[(0,i.createVNode)(r,{name:e.modalIcon,size:"medium",style:{"margin-right":"10px"}},null,8,["name"])]),(0,i.createElementVNode)("span",Uz,[(0,i.createElementVNode)("div",Zz,(0,i.toDisplayString)(e.$t(e.modalTitle)),1),(0,i.createElementVNode)("div",Hz,(0,i.toDisplayString)(e.$t("Configurations")),1)])])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(s,(0,i.mergeProps)({schema:e.schema,model:e.model,"onUpdate:model":t[0]||(t[0]=t=>e.model=t)},e.$attrs),null,16,["schema","model"])])),_:1},8,["onUpdate:show"])])}const Gz=ce();function Wz(e,t,o){var a,l;return(0,A.mG)(this,void 0,void 0,(function*(){const e=[{type:"grid",props:{cols:2},children:{default:[{name:"from",label:Gz("Due Date From"),type:"custom",component:(0,i.markRaw)(rN),validators:new Map([["required",Oa],["validDateFormat",ja(t)],["endDateShouldBeAfterStartDate",vi((()=>{var e;return null===(e=o.value)||void 0===e?void 0:e.to}),Gz("From date should be on or before to date"),{allowSameDate:!0})]]),props:{years:Kz(null===(a=o.value)||void 0===a?void 0:a.from)}},{name:"to",label:Gz("Due Date To"),type:"custom",component:(0,i.markRaw)(rN),validators:new Map([["required",Oa],["validDateFormat",ja(t)],["endDateShouldBeAfterStartDate",Xa((()=>{var e;return null===(e=o.value)||void 0===e?void 0:e.from}),Gz("To date should be on or after from date"),{allowSameDate:!0})]]),props:{years:Kz(null===(l=o.value)||void 0===l?void 0:l.to)}},{name:"goals",label:"",type:"switch",props:{"option-label":Gz("Goals"),"label-position":"left",useFullWidth:!0},value:!1,class:["mb-sm--oxd-input-group","switch-input-group","--offset-column-1"]},{name:"okrs",label:"",type:"switch",props:{"option-label":Gz("OKRs"),"label-position":"left",useFullWidth:!0},value:!1,class:["mb-sm--oxd-input-group","switch-input-group","--offset-column-1"]}]},style:{"margin-left":"-10px","margin-right":"-10px"}}],n=$F(this);return{name:"configureQuickAccessWidgetForm",layout:[...e,...n]}}))}const Kz=e=>{const t=(0,K.Z)(new Date(e)),o=t-20,a=t+20,i=[];for(let l=o;l<=a;l++)i.push(l);return i};var Qz=Wz,Jz=(0,i.defineComponent)({name:"configureEmployeeDetails",components:{"form-modal":gc,"oxd-schema-form":yc.Z,"oxd-icon":In.Z},props:{editingModel:{type:Object,required:!0},options:{type:Array,required:!0},modalIcon:{type:String,required:!0}},setup(e,t){const o=(0,i.ref)(Object.assign({},e.editingModel)),a="Performance - Goals/OKRs",{userFormat:l}=Im(),n=(0,fc.Z)(Qz.call(t,e.options,l,o)),r=n.schema,s=o,d=()=>{t.emit("update:show",!1)};return{model:s,schema:r,modalTitle:a,onCancel:d}}});const Yz=(0,Re.Z)(Jz,[["render",qz],["__scopeId","data-v-1e66dc6c"]]);var Xz=Yz;class eM{constructor(e){this._app=(0,i.getCurrentInstance)(),this._t=ce(),this._app=e}getStatusColour(e){let t={};switch((0,Fz.Z)(e)){case"pending":t={default:"#fca919",overDefault:"#e89403",overHalfMax:"#d38703"};break;case"in progress":t={default:"#1ba8ed",overDefault:"#0d70a1",overHalfMax:"#084968"};break;case"achieved":t={default:"#65c823",overDefault:"#4b941a",overHalfMax:"#305f11"};break;case"not achieved":t={default:"#e63546",overDefault:"#e31c2f",overHalfMax:"#bf1828"};break;case"on hold":t={default:"#8fa5b4",overDefault:"#668499",overHalfMax:"#4e6574"};break;default:t={default:"#00ead3",overDefault:"#00c2af",overHalfMax:"#00998a"}}return t}rearrangeGoalsBasedOnStatus(e,t){const o=[];return e.forEach((e=>{o.push({state:e.name,colour:this.getStatusColour(e.name),goals:this.filterGoalsByStatus(e,t)})})),o}filterGoalsByStatus(e,t){return t.filter((function(t){return e.id==t.goalStateId}))}}var tM=(0,i.defineComponent)({name:"dashboardGoalsWidget",inheritAttrs:!1,components:{"oxd-icon":In.Z,"oxd-button":jt.Z,"oxd-icon-button":D.Z,"oxd-dashboard-widget-settings-icon":mB,"oxd-dashboard-goal-items-list":$z,"configure-goals-widget":Xz,"oxd-loader":co.Z},setup:function(e,t){var o,a;const l=ce(),n=(0,i.getCurrentInstance)(),r=(0,i.inject)("appSpecificData"),s=(0,i.inject)("ngServices"),d=null===n||void 0===n?void 0:n.appContext.config.globalProperties.empNo,c=r.empNumber,m=r.employee,u=(0,i.ref)(null),p=(0,i.ref)("View Goal List"),v=(0,i.ref)(!1),h=(0,i.ref)(!1),g=(0,i.ref)(""),y=(0,i.ref)(!1),f=(0,i.ref)(""),b=(0,i.ref)(3),C=(0,i.ref)("33.33% 33.33% 33.33%"),S=(0,i.ref)("minmax(33.33%, 33.33%)"),w=(0,i.ref)(!1),E=(0,i.ref)(null===(o=r.widgetGlobalConfig)||void 0===o?void 0:o.filterFields),k=(0,i.ref)([]),x=(0,i.ref)([]),N=(0,i.ref)(null===(a=r.config)||void 0===a?void 0:a.settings),A=new UV,D=new eM(n),T=new Aa,P=(0,i.ref)({read:!1,create:!1,update:!1,delete:!1}),V=(0,i.ref)(!0);let B=La()().subtract(1,"y").format("YYYY-MM-DD"),I=La()().add(1,"y").format("YYYY-MM-DD");const{settings:L}=vu(),F=(0,i.ref)(999),z=(0,i.ref)(!0),M=(0,i.ref)(!1),O=(0,i.ref)(!1),R=(0,i.ref)(0),_=(0,i.ref)(0);""!=N.value.from&&null!=N.value.from||(N.value.from=B),""!=N.value.to&&null!=N.value.to||(N.value.to=I),d==c&&(p.value="View My Goals");const $=(0,i.computed)((()=>r.widgetGlobalConfig.widgetIcon));let j=(0,i.ref)([]);const U=()=>{if(j.value.length>3&&x.value.length>0?v.value=!0:v.value=!1,j.value.length<3){let e=100/j.value.length,t=[];for(let o=0;o<j.value.length;o++)t.push(e+"%");C.value=t.join(" "),S.value="minmax("+e+"%, "+e+"%)"}},Z=()=>{let e={redirectedFrom:"employeeProfile",empNo:c,employeeId:m.employeeId,empName:H(),filterParameters:{currentTabKey:null,include:"2",withAchievedGoals:!0,includeDevelopmentGoals:!0,goalLevel:"",goalPriority:"",dueDateFrom:N.value.from,dueDateTo:N.value.to},useFiltersFromFilterParams:!0};e.filterParameters.currentTabKey=0==N.value.goals&&1==N.value.okrs?2:1,d==c?s.$state.go("performance.goals.my",e):s.$state.go("performance.goals.approved",e)},H=()=>m.termination_id?m.middleName?m.firstName+" "+m.middleName+" "+m.lastName+" "+l("(Past Employee)"):m.firstName+" "+m.lastName+" "+l("(Past Employee)"):m.middleName?m.firstName+" "+m.middleName+" "+m.lastName:m.firstName+" "+m.lastName,q=()=>{!0!==M.value&&(M.value=!0,setTimeout((()=>{u.value&&u.value.firstElementChild&&(_.value=_.value-u.value.firstElementChild.clientWidth,u.value.scrollLeft=_.value,M.value=!1)}),500))},G=()=>{!0!==M.value&&(M.value=!0,setTimeout((()=>{u.value&&u.value.firstElementChild&&(_.value=_.value+u.value.firstElementChild.clientWidth,u.value.scrollLeft=_.value,M.value=!1)}),500))},W=e=>{b.value+=e,j.value.length>3?b.value<=3?(h.value=!1,y.value=!0,g.value="",f.value=j.value[b.value]["state"]):b.value>3&&b.value>=j.value.length?(h.value=!0,y.value=!1,g.value=j.value[b.value-4]["state"],f.value=""):(h.value=!0,y.value=!0,g.value=j.value[b.value-4]["state"],f.value=j.value[b.value]["state"]):(h.value=!1,y.value=!1)},K=()=>{w.value=!w.value},Q=()=>{w.value=!1},J=e=>{let t={from:e.from==B?null:e.from,to:e.to==I?null:e.to,goals:e.goals,okrs:e.okrs};Q(),V.value=!0,A.setWidgetConfigurations(r.id,t).then((e=>{e&&(ge.showAngularToast(Ac,l(be)),N.value=e.data.data.config.settings,""!=N.value.from&&null!=N.value.from||(N.value.from=B),""!=N.value.to&&null!=N.value.to||(N.value.to=I),X())})).catch((()=>{V.value=!1}))},Y=()=>{null===L||void 0===L||L.then((e=>{e.performance&&(F.value=parseInt(e.performance.goal_max_completion_percentage))}))},X=()=>{A.getGoalStatuses().then((e=>{k.value=e.data.data;let t=[0];N.value.goals&&t.push(1),N.value.okrs&&t.push(2),A.getGoals(d==c?"my_goals":"employee_goals",t,N.value.from,N.value.to,c).then((e=>{V.value=!1,x.value=e.data.data,j.value=D.rearrangeGoalsBasedOnStatus(k.value,x.value),U(),ee()})).catch((()=>{V.value=!1,x.value=[]}))})).catch((()=>{V.value=!1,x.value=[]}))},ee=()=>{R.value=0,_.value=0,b.value=3,W(0),u.value?u.value.scrollLeft=0:O.value=!1},te=()=>{if(u.value){let e=0;u.value.firstElementChild&&(e=u.value.firstElementChild.clientWidth),Math.abs(R.value-u.value.scrollLeft)>e/2&&(R.value-u.value.scrollLeft>0?(W(-1),R.value-=e):R.value-u.value.scrollLeft<0&&(W(1),R.value+=e))}};(0,i.onUnmounted)((()=>{u.value&&u.value.removeEventListener("scroll",te)})),(0,i.onUpdated)((()=>{u.value&&!O.value&&(u.value.addEventListener("scroll",te),O.value=!0)})),(0,i.onMounted)((()=>{T.getDataGroupPermissions({dataGroup:"Goals",self:c==d,entities:{Employee:c}}).then((e=>{0!==e.length&&(P.value=e),P.value.read?X():V.value=!1})).catch((()=>{V.value=!1})),Y()}));const oe=e=>{z.value=!1},ae=()=>{z.value=!0};return{appSpecificData:r,widgetIcon:$,viewGoalListButtonLabel:p,goalsStatusBreakdown:j,showNavigationButtons:v,leftNavigationVisible:h,rightNavigationVisible:y,leftNavigationTooltip:g,rightNavigationTooltip:f,redirectToGoalList:Z,scrollLeft:q,scrollRight:G,tableSlider:u,gridTemplateColumns:C,gridAutoColumns:S,configModalState:w,toggleConfigurationsModal:K,closeConfigurationsModal:Q,saveConfigurations:J,availableWidgets:E,configurationEditModel:N,loggedInEmpNumber:d,empNumber:c,dataGroupPermissions:P,onLoading:V,goals:x,maxGoalCompletionPercentage:F,closeMenu:oe,menuToggleOff:ae,showMenu:z}}});const oM=(0,Re.Z)(tM,[["render",vz],["__scopeId","data-v-0967e824"]]);var aM=oM;const iM=e=>((0,i.pushScopeId)("data-v-083b047a"),e=e(),(0,i.popScopeId)(),e),lM={class:"dashboard-widget-container"},nM={class:"dashboard-widget"},rM={class:"widget-header",style:{"padding-left":"0.75rem"}},sM={class:"widget-header-text"},dM={key:1,class:"tracker-container"},cM={class:"tracker"},mM={class:"tracker-header"},uM={class:"title"},pM=["tooltip","href"],vM=["href"],hM={class:"date-details"},gM={class:"date"},yM={key:0,class:"progress-bar-container"},fM=["tooltip"],bM={key:0},CM={key:0,class:"tracker-logs-container"},SM={key:1,class:"no-tracker-logs-placeholder-container"},wM={class:"no-tracker-logs-msg"},EM=iM((()=>(0,i.createElementVNode)("img",{src:"images/employee_profile/trackers-no-log.png"},null,-1))),kM={class:"no-items-placeholder"},xM={class:"navigate-buttons"},NM={key:2,class:"no-items-placeholder-container"},AM={class:"no-item-watermark graph"},DM=iM((()=>(0,i.createElementVNode)("img",{src:"images/dashboard/watermarks/list_item_empty_watermark.png"},null,-1))),TM={key:0,class:"no-items-placeholder"},PM={key:1,class:"no-items-placeholder"};function VM(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-dashboard-widget-settings-icon"),s=(0,i.resolveComponent)("oxd-icon"),d=(0,i.resolveComponent)("oxd-loader"),c=(0,i.resolveComponent)("tracker-log-item"),m=(0,i.resolveComponent)("oxd-icon-button");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(r,{id:e.appSpecificData.id,"show-configurations":!1},null,8,["id"]),(0,i.createElementVNode)("div",lM,[(0,i.createElementVNode)("div",nM,[(0,i.createElementVNode)("div",rM,[(0,i.createVNode)(s,{name:e.widgetIcon},null,8,["name"]),(0,i.createElementVNode)("span",sM,(0,i.toDisplayString)(e.$t(e.appSpecificData.title)),1)]),(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["widget-body",{isNonEmptyContainer:e.trackers.length>0}])},[e.onLoading?((0,i.openBlock)(),(0,i.createBlock)(d,{key:0,withContainer:!0,class:"oxd-loader-text-view"})):(0,i.createCommentVNode)("",!0),e.trackers.length>0&&!e.onLoading?((0,i.openBlock)(),(0,i.createElementBlock)("div",dM,[(0,i.createElementVNode)("div",cM,[(0,i.createElementVNode)("div",mM,[(0,i.createElementVNode)("div",uM,[e.trackers[e.trackerIndex].trackerName.length>60?((0,i.openBlock)(),(0,i.createElementBlock)("a",{key:0,class:"tracker-name",tooltip:e.$t(e.trackers[e.trackerIndex].trackerName),href:e.directToTrackerPage(e.trackers[e.trackerIndex].id)},(0,i.toDisplayString)(e.$t(e.trackers[e.trackerIndex].trackerName.substring(0,60))+"..."),9,pM)):((0,i.openBlock)(),(0,i.createElementBlock)("a",{key:1,class:"tracker-name",href:e.directToTrackerPage(e.trackers[e.trackerIndex].id)},(0,i.toDisplayString)(e.$t(e.trackers[e.trackerIndex].trackerName)),9,vM)),(0,i.createElementVNode)("div",hM,[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Added Date"))+": ",1),(0,i.createElementVNode)("span",gM,(0,i.toDisplayString)(e.$t(e.formatDateString(e.trackers[e.trackerIndex].addedDate))),1)])]),e.trackers[e.trackerIndex].logs.length>0?((0,i.openBlock)(),(0,i.createElementBlock)("div",yM,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.topFiveScoresOfTask,(t=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"bar-container",key:t.name},[(0,i.createElementVNode)("div",{class:"bar",style:(0,i.normalizeStyle)({width:t.score+"%","background-color":t.color}),tooltip:e.$t(t.label)},null,12,fM),t.score>0?((0,i.openBlock)(),(0,i.createElementBlock)("span",bM,[(0,i.createVNode)(s,{name:Number(t.rating)>0?"oxd-like":Number(t.rating)<0?"oxd-unlike":"oxd-like",style:(0,i.normalizeStyle)({transform:0==Number(t.rating)?"rotate(-90deg)":"",color:t.color,display:"inline-flex","align-self":"center"})},null,8,["name","style"])])):(0,i.createCommentVNode)("",!0)])))),128))])):(0,i.createCommentVNode)("",!0)]),e.trackers[e.trackerIndex].logs.length>0?((0,i.openBlock)(),(0,i.createElementBlock)("div",CM,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.trackers[e.trackerIndex].logs,(e=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"tracker-logs",key:e.id},[(0,i.createVNode)(c,{"log-details":e},null,8,["log-details"])])))),128))])):(0,i.createCommentVNode)("",!0),0!=e.trackers[e.trackerIndex].logs||e.onLoading?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",SM,[(0,i.createElementVNode)("div",wM,[EM,(0,i.createElementVNode)("span",kM,(0,i.toDisplayString)(e.$t("No Available Tracker Logs")),1)])]))]),(0,i.createElementVNode)("div",xM,[(0,i.withDirectives)((0,i.createVNode)(m,{name:"oxd-arrow-left",size:"xxx-small",class:"oxd-navigate-button-trackers",flow:"bottom",style:{right:"30px",position:"inherit"},tooltip:e.$t("Previous"),onClick:t[0]||(t[0]=t=>e.trackerIndex--)},null,8,["tooltip"]),[[i.vShow,e.trackerIndex>0]]),(0,i.withDirectives)((0,i.createVNode)(m,{name:"oxd-arrow-right",size:"xxx-small",class:"oxd-navigate-button-trackers",flow:"bottom",tooltip:e.$t("Next"),onClick:t[1]||(t[1]=t=>e.trackerIndex++)},null,8,["tooltip"]),[[i.vShow,e.trackerIndex<e.trackers.length-1]])])])):(0,i.createCommentVNode)("",!0),0!=e.trackers.length||e.onLoading?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",NM,[(0,i.createElementVNode)("div",AM,[DM,""!==e.emptyTrackersMessage?((0,i.openBlock)(),(0,i.createElementBlock)("span",TM,(0,i.toDisplayString)(e.$t(e.emptyTrackersMessage)),1)):((0,i.openBlock)(),(0,i.createElementBlock)("span",PM,(0,i.toDisplayString)(e.$t("No Available Trackers")),1))])]))],2)])])],64)}const BM={class:"emp-profile"},IM=["src"],LM={class:"emp-details"},FM={class:"name-and-feedback-container"},zM={class:"emp-name"},MM={class:"feedback-chip"},OM={class:"emp-log"},RM={class:"date"};function _M(e,t,o,a,l,n){const r=(0,i.resolveComponent)("profile-pic"),s=(0,i.resolveComponent)("oxd-chip");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createElementVNode)("div",BM,[e.employeeProfileImage?((0,i.openBlock)(),(0,i.createBlock)(r,{key:0},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("img",{src:e.employeeProfileImage},null,8,IM)])),_:1})):((0,i.openBlock)(),(0,i.createBlock)(r,{key:1}))]),(0,i.createElementVNode)("div",LM,[(0,i.createElementVNode)("div",FM,[(0,i.createElementVNode)("div",zM,(0,i.toDisplayString)(e.logDetails.empName),1),(0,i.createElementVNode)("div",MM,[(0,i.createVNode)(s,{label:e.$t(e.logDetails.logRatingScale.label),backgroundColor:e.logDetails.logRatingScale.color},null,8,["label","backgroundColor"])])]),(0,i.createElementVNode)("div",OM,(0,i.toDisplayString)(e.logDetails.log),1),(0,i.createElementVNode)("div",RM,(0,i.toDisplayString)(e.formatDateString(e.logDetails.date)),1)])],64)}var $M=(0,i.defineComponent)({name:"dashboard-tracker-log-item",components:{"profile-pic":P.Z,"oxd-chip":Ip.Z},props:{logDetails:{type:Object,required:!0}},setup(e){const t=new UV,o=(0,i.ref)("images/default.png"),{jsSavingFormat:a,jsDisplayFormat:l,locale:n}=Im(),r=e=>{if(e){const t=ee(e,a);if(t)return J(t,l,{locale:n})}return""},s=()=>{t.getEmployeeLargeProfilePicture(e.logDetails.empNumber).then((e=>{var t,a;e.data.data.length>0&&(o.value=ge.base64ImageConvertion(null===(t=e.data.data[0])||void 0===t?void 0:t.type,null===(a=e.data.data[0])||void 0===a?void 0:a.image))}))};return(0,i.onMounted)((()=>{s()})),{formatDateString:r,employeeProfileImage:o}}});const jM=(0,Re.Z)($M,[["render",_M],["__scopeId","data-v-c9a3ec02"]]);var UM=jM,ZM=(0,i.defineComponent)({name:"DashboardTrackersWidget",inheritAttrs:!1,components:{"oxd-dashboard-widget-settings-icon":mB,"tracker-log-item":UM,"oxd-icon":In.Z,"oxd-loader":co.Z,"oxd-icon-button":D.Z},setup:function(){ce();const e=(0,i.inject)("appSpecificData"),t=new UV,o=e.empNumber,a=(0,i.ref)(!1);let l=(0,i.ref)(0);const n=(0,i.ref)([]),r=(0,i.ref)(""),{jsSavingFormat:s,jsDisplayFormat:d,locale:c}=Im(),m=e=>{if(e){const t=ee(e,s);if(t)return J(t,d,{locale:c})}return""},u=(0,i.computed)((()=>e.widgetGlobalConfig.widgetIcon?e.widgetGlobalConfig.widgetIcon:"")),p=()=>{a.value=!0,t.getTrackers(o).then((e=>{a.value=!1,n.value=e.data.data,r.value=e.data.meta.emptyRecordsMessage}))},v=e=>"/client/#/noncore/performanceTracker/addPerformanceTrackerLog/empNumber/"+o+"/trackId/"+e+"/redirectedFrom/employeeProfile",h=(0,i.computed)((()=>n.value[l.value].scores.slice(0,5)));return p(),{appSpecificData:e,widgetIcon:u,onLoading:a,trackers:n,directToTrackerPage:v,trackerIndex:l,formatDateString:m,emptyTrackersMessage:r,topFiveScoresOfTask:h,getEmployeeTrackers:p}}});const HM=(0,Re.Z)(ZM,[["render",VM],["__scopeId","data-v-083b047a"]]);var qM=HM;const GM={namespaced:!0,state:{pageNo:1,pageLimit:5,comments:[],userLikedPosts:[],userLikedComments:[],kudosTypes:[],shares:[],isCardsAvailable:!0,morePostsLoading:!1,onLoading:!1,userProfilePicture:"",userProfilePictureLarge:"",selectedUserProfilePictureLarge:"",empName:"",isLoggedEmployeeProfile:!0,orderFilterForShare:null,orderByFilterForShare:null,selectedEmpNo:null,selectedEmpName:null,selectedEmpLocation:null,selectedEmpWorkEmail:null,selectedEmpWorkDesignation:null,empJobTitle:null,empLocation:null,empEmail:null,anniversaries:[],mostKudos:[],kudosFeatureEnabled:!1,MaxImageUploadSize:0,isPostsFetchActionTriggred:!1,CreateProfileClickTriggered:!1,filterWithoutEmployee:!1,selectedMenu:"",selectedEmpEmployeeStats:null,isNewPostsAvailable:!1,lastShareUpdatedTime:""},mutations:{setIsPostsFetchActionTriggred(e,t){e.isPostsFetchActionTriggred=t},setCreateProfileClickTriggered(e,t){e.CreateProfileClickTriggered=t},setSelectedMenu(e,t){e.selectedMenu=t},setFilterWithoutEmployee(e,t){e.filterWithoutEmployee=t},setPageNo(e,t){e.pageNo=t},setEmpNoFilter(e,t){e.selectedEmpNo=t},setOrderFilter(e,t){e.orderFilterForShare=t},setOrderByFilter(e,t){e.orderByFilterForShare=t},isCurrentLoggedEmployeeProfile(e,t){e.isLoggedEmployeeProfile=t},incrementPageNo(e){e.pageNo++},addSharePost(e,t){const o=e.shares.findIndex((e=>Number(e.shareId)===Number(t.shareId)));-1===o&&e.shares.push(t)},updateSharePost(e,t){const o=e.shares.findIndex((e=>Number(e.shareId)===Number(t.shareId)));e.shares[o]=t},deleteSharePost(e,t){e.shares=e.shares.filter((function(e){return e.shareId!=t.data.data[0]}))},unshitSharePost(e,t){e.shares.unshift(t)},emptySharePosts(e){e.shares=[]},setLoading(e,t){e.onLoading=t},setCardsAvailblity(e,t){e.isCardsAvailable=t},setMorePostsLoading(e,t){e.morePostsLoading=t},setKudosTypes(e,t){e.kudosTypes=t},addAnnivesaries(e,t){e.anniversaries=t},clearMostKudos(e){e.mostKudos=[]},addMostKudos(e,t){e.mostKudos=t},setKudosFeatureAvailibility(e,t){e.kudosFeatureEnabled=t},setMaxImageUploadSize(e,t){e.MaxImageUploadSize=t},setCurrentEmployeeName(e,t){e.empName=t},setCurrentEmployeeDesignation(e,t){e.empJobTitle=t},setCurrentEmployeeLocation(e,t){e.empLocation=t},setCurrentEmployeeEmail(e,t){e.empEmail=t},setCurrentEmployeeProfilePicture(e,t){e.userProfilePicture=t},setCurrentEmployeeLargeProfilePicture(e,t){e.userProfilePictureLarge=t},setSelectedEmployeeLargeProfilePicture(e,t){e.selectedUserProfilePictureLarge=t},setSelectedEmployeeName(e,t){e.selectedEmpName=t},setSelectedEmployeeLocation(e,t){e.selectedEmpLocation=t},setSelectedEmployeeEmail(e,t){e.selectedEmpWorkEmail=t},setSelectedEmployeeDesignation(e,t){e.selectedEmpWorkDesignation=t},emptySelectedEmployeeLargeProfilePicture(e){e.selectedUserProfilePictureLarge=""},loadComments(e,t){const o=e.comments.find((e=>{if(Number(e.id)===Number(t.id))return e}));o||e.comments.unshift(t)},addComment(e,t){e.comments.push(t)},editComment(e,t){const o=e.comments.findIndex((e=>Number(e.id)===Number(t.id)));-1!==o&&(e.comments[o]=t)},deleteComment(e,t){const o=e.comments.findIndex((e=>Number(e.id)===t));-1!==o&&e.comments.splice(o,1)},addLikeForComment(e,t){const o=e.comments.findIndex((e=>Number(e.id)===Number(t.commentId)));-1!==o&&(e.comments[o]["noOfLikes"]=String(Number(e.comments[o]["noOfLikes"])+1))},deleteLikeForComment(e,t){const o=e.comments.findIndex((e=>Number(e.id)===Number(t.commentId)));-1!==o&&(e.comments[o]["noOfLikes"]=String(Number(e.comments[o]["noOfLikes"])-1))},loadUserLikedComment(e,t){const o=e.userLikedComments.findIndex((e=>Number(e.commentId)===Number(t.commentId)));-1===o&&e.userLikedComments.push(t)},loadUserLikedPosts(e,t){e.userLikedPosts=t},addUserLikedPost(e,t){e.userLikedPosts.push(t)},removeUserLikedPost(e,t){e.userLikedPosts=e.userLikedPosts.filter((e=>Number(e.shareId)!==Number(t)))},addUserLikedComment(e,t){e.userLikedComments.push(t)},removeUserLikedComment(e,t){e.userLikedComments=e.userLikedComments.filter((e=>Number(e.commentId)!==Number(t)))},setSelectedEmpEmployeeStats(e,t){e.selectedEmpEmployeeStats=t},setNewPostsAvailable(e,t){e.isNewPostsAvailable=t},setLastShareUpdatedTime(e,t){e.lastShareUpdatedTime=t}},actions:{getKudosTypes(e,t){return new Promise(((o,a)=>{const i={serverFetch:!0};t.get(R,{includePhoto:!0},i).then((t=>{var a,i;const l=null===(i=null===(a=t.data)||void 0===a?void 0:a.data)||void 0===i?void 0:i.map((e=>({id:e.id,label:e.kudos,background_image:e.background_image,image_type:e.image_type,kudos:e.kudos})));e.commit("setKudosTypes",l),o()})).catch((()=>{a()}))}))},getSharePosts(e,t){return new Promise(((o,a)=>{const i={serverFetch:!0};t.webservice.get(B,{include:"Employee",pageNo:t.pageNo,limit:t.limit,orderBy:t.orderBy,order:t.order,empNumber:t.empNumber},i).then((t=>{if(t.data.data.length>0){const o=t.data.data;e.commit("setCardsAvailblity",!0),o.forEach((t=>{e.commit("addSharePost",t)}))}else e.commit("setCardsAvailblity",!1);e.commit("setMorePostsLoading",!1),e.commit("setLoading",!1),o()})).catch((()=>{a()}))}))},deletePost(e,t){return new Promise(((o,a)=>{const i=t;t.webservice.call(B,"DELETE",t.data).then((()=>{e.commit("deleteSharePost",i),o()})).catch((()=>{a()}))}))},saveComment(e,t){return new Promise(((o,a)=>{t.webservice.call(t.commentUrl,"POST",t.commentDetails).then((t=>{e.commit("addComment",t.data.data),o()})).catch((()=>{a()}))}))},updateComment(e,t){return new Promise(((o,a)=>{t.webservice.call(t.commentUrl+"/"+t.commentId,"PATCH",t.commentDetails).then((t=>{e.commit("editComment",t.data.data),o()})).catch((()=>{a()}))}))},deleteComment(e,t){return new Promise(((o,a)=>{t.webservice.call(t.deleteUrl,"DELETE",t.data).then((()=>{e.commit("deleteComment",t.commentId),o()})).catch((()=>{a()}))}))},getUserLikedComments(e,t){return new Promise(((o,a)=>{var i;const l={serverFetch:!0};t.webservice.get(_,{filter:{empNumber:null!==(i=t.empNo)&&void 0!==i?i:0}},l).then((t=>{const a=t.data.data;t.data.data&&a.forEach((t=>{e.commit("loadUserLikedComment",t)})),o()})).catch((()=>{a()}))}))},getUserLikedPosts(e,t){return new Promise(((o,a)=>{var i;const l={serverFetch:!0};t.webservice.get(O,{filter:{empNumber:null!==(i=t.empNo)&&void 0!==i?i:0}},l).then((t=>{if(t.data.data){const o=t.data.data;e.commit("loadUserLikedPosts",o)}o()})).catch((()=>{a()}))}))},addLikeForPost(e,t){return new Promise(((o,a)=>{t.webservice.call(O,"POST",t.data).then((t=>{t.data.data&&e.commit("addUserLikedPost",t.data.data),o()})).catch((()=>{a()}))}))},removeLikeFromPost(e,t){return new Promise(((o,a)=>{t.webservice.call(O,"DELETE",t.data).then((a=>{a.data.data&&e.commit("removeUserLikedPost",t.data.shareId),o()})).catch((()=>{a()}))}))},getProfilePictureLarge(e,t){return new Promise(((o,a)=>{const i={serverFetch:!0};t.webservice.get(L,{filter:{id:[t.empNo],size:t.size},include:t.include},i).then((t=>{var a,i,l,n;(null===(a=t.data.data[0])||void 0===a?void 0:a.image)&&(null===(i=t.data.data[0])||void 0===i?void 0:i.type)?e.commit("setCurrentEmployeeLargeProfilePicture",ge.base64ImageConvertion(null===(l=t.data.data[0])||void 0===l?void 0:l.type,null===(n=t.data.data[0])||void 0===n?void 0:n.image)):e.commit("setCurrentEmployeeLargeProfilePicture","images/default.png"),o()})).catch((()=>{a()}))}))},getProfilePicture(e,t){return new Promise(((o,a)=>{const i={serverFetch:!0};t.webservice.get(L,{filter:{id:[t.empNo],size:t.size},include:t.include},i).then((t=>{var a,i,l,n;(null===(a=t.data.data[0])||void 0===a?void 0:a.image)&&(null===(i=t.data.data[0])||void 0===i?void 0:i.type)?(e.commit("setCurrentEmployeeName",ge.getEmployeeName(t.data.data[0].Employee.firstName,"",t.data.data[0].Employee.lastName,t.data.data[0].Employee.pastEmployee)),e.commit("setCurrentEmployeeProfilePicture",ge.base64ImageConvertion(null===(l=t.data.data[0])||void 0===l?void 0:l.type,null===(n=t.data.data[0])||void 0===n?void 0:n.image))):e.commit("setCurrentEmployeeProfilePicture","images/default.png"),o()})).catch((()=>{a()}))}))},getSelectedUserProfilePictureLarge(e,t){return new Promise(((o,a)=>{const i={serverFetch:!0};t.webservice.get(L,{filter:{id:[t.empNo],size:t.size},include:t.include},i).then((t=>{var a,i,l,n;(null===(a=t.data.data[0])||void 0===a?void 0:a.image)&&(null===(i=t.data.data[0])||void 0===i?void 0:i.type)?e.commit("setSelectedEmployeeLargeProfilePicture",ge.base64ImageConvertion(null===(l=t.data.data[0])||void 0===l?void 0:l.type,null===(n=t.data.data[0])||void 0===n?void 0:n.image)):e.commit("setSelectedEmployeeLargeProfilePicture","images/default.png"),o()})).catch((()=>{a()}))}))},getUserProfileInfo(e,t){return new Promise(((o,a)=>{const i={serverFetch:!0};t.webservice.get(F,{filter:{emp_number:t.emp_number},includePhoto:t.includePhoto,limit:t.limit},i).then((t=>{t.data.data[0]&&(e.commit("setCurrentEmployeeDesignation",t.data.data[0].jobTitle),e.commit("setCurrentEmployeeLocation",t.data.data[0].location),e.commit("setCurrentEmployeeEmail",t.data.data[0].workEmail),e.commit("setCurrentEmployeeName",ge.getEmployeeName(t.data.data[0].firstName,"",t.data.data[0].lastName,t.data.data[0].terminated))),o()})).catch((()=>{a()}))}))},getSelectedUserProfileInfo(e,t){return new Promise(((o,a)=>{const i={serverFetch:!0};t.webservice.get(F,{filter:{emp_number:t.emp_number},includePhoto:t.includePhoto,limit:t.limit,include:"EmployeeStats"},i).then((t=>{t.data.data[0]&&(e.commit("setSelectedEmployeeDesignation",t.data.data[0].jobTitle),e.commit("setSelectedEmployeeLocation",t.data.data[0].location),e.commit("setSelectedEmployeeEmail",t.data.data[0].workEmail),e.commit("setSelectedEmployeeName",ge.getEmployeeName(t.data.data[0].firstName,"",t.data.data[0].lastName,t.data.data[0].terminated)),e.commit("setSelectedEmpEmployeeStats",t.data.data[0].EmployeeStats)),o()})).catch((()=>{a()}))}))},getAnnivesaries(e,t){return new Promise(((o,a)=>{const i={serverFetch:!0};t.webservice.get(F,{include:t.include,includePhoto:t.includePhoto,pageNo:t.pageNo,limit:t.limit},i).then((a=>{if(a.data.data){const o=a.data.data,i=o.map((e=>({employeeId:e.empNumber,annivesaryYears:ge.calculateAnniversaryYears(e.joinedDate),annivesaryMonth:J(new Date(e.joinedDate),"MMM dd",{locale:t.$locale}),name:ge.getEmployeeName(e.firstName,"",e.lastName,e.terminated),empProfilePic:e.empProfilePic.type&&e.empProfilePic.image?ge.base64ImageConvertion(e.empProfilePic.type,e.empProfilePic.image):null,jobTitle:e.jobTitle,location:e.location,workEmail:e.workEmail})));e.commit("addAnnivesaries",i)}o()})).catch((()=>{a()}))}))},getMostKudos(e,t){return new Promise(((o,a)=>{const i={serverFetch:!0};t.webservice.get(F,{include:t.include,includePhoto:t.includePhoto,pageNo:t.pageNo,limit:t.limit},i).then((t=>{if(t.data.data){const o=t.data.data,a=o.map((e=>({employeeId:e.empNumber,kudosCount:Number(e.kudosCount),name:ge.getEmployeeName(e.firstName,"",e.lastName,e.terminated),empProfilePic:e.empProfilePic.type&&e.empProfilePic.image?ge.base64ImageConvertion(e.empProfilePic.type,e.empProfilePic.image):null,jobTitle:e.jobTitle,location:e.location,workEmail:e.workEmail})));e.commit("addMostKudos",a)}o()})).catch((()=>{a()}))}))},getBuzzSettings(e,t){return new Promise(((o,a)=>{t.get(z).then((t=>{var a,i,l,n;if(t.data.data){const o="on"===(null===(i=null===(a=t.data)||void 0===a?void 0:a.data)||void 0===i?void 0:i.kudosEnabled);e.commit("setKudosFeatureAvailibility",o)}e.commit("setMaxImageUploadSize",Number(null===(n=null===(l=t.data)||void 0===l?void 0:l.data)||void 0===n?void 0:n.maxImageUploadSize)),o()})).catch((()=>{a()}))}))},getSelectedUserEmployeeStats(e,t){return new Promise(((o,a)=>{var i;const l={serverFetch:!0};t.webservice.get(F,{filter:{emp_number:null!==(i=t.empNo)&&void 0!==i?i:0},includePhoto:!1,limit:1,include:"EmployeeStats"},l).then((t=>{t.data.data[0]&&e.commit("setSelectedEmpEmployeeStats",t.data.data[0].EmployeeStats),o()})).catch((()=>{a()}))}))},pingBuzz(e,t){return new Promise(((o,a)=>{t.webservice.get(j,{timestamp:t.timestamp}).then((t=>{var a,i,l;(null===(a=t.data)||void 0===a?void 0:a.data)&&t.data.data.length>0&&e.commit("setNewPostsAvailable",!0),(null===(i=t.data)||void 0===i?void 0:i.meta)&&!e.state.lastShareUpdatedTime&&e.commit("setLastShareUpdatedTime",null===(l=t.data)||void 0===l?void 0:l.meta.serverTime),o()})).catch((()=>{a()}))}))},clearSelectedEmpEmployeeStats(e){e.commit("setSelectedEmpEmployeeStats",null)}}},WM="UPDATE_SORT_FIELD",KM="UPDATE_SORT_ORDER",QM="UPDATE_LIMIT",JM="UPDATE_CURRENT_PAGE";var YM={namespaced:!0,state:{sortField:null,sortOrder:null,limit:null,currentPage:null},mutations:{[WM](e,t){e.sortField=t},[KM](e,t){e.sortOrder=t},[QM](e,t){e.limit=t},[JM](e,t){e.currentPage=t}},actions:{init(e,t){null==e.state.sortField&&e.commit(WM,t.sortField),null===e.state.sortOrder&&e.commit(KM,t.sortOrder),null===e.state.limit&&e.commit(QM,t.limit),null===e.state.currentPage&&e.commit(JM,t.currentPage)},changeSortField({commit:e},t){return new Promise((o=>{e(WM,t),o(!0)}))},changeSortOrder({commit:e},t){return new Promise((o=>{e(KM,t),o(!0)}))},nextPage({commit:e,state:t}){return new Promise((o=>{e(JM,t.currentPage+1),o(!0)}))},previousPage({commit:e,state:t}){return new Promise((o=>{e(JM,t.currentPage-1),o(!0)}))},jumpToPage({commit:e},t){return new Promise((o=>{e(JM,t),o(!0)}))},changeLimit({commit:e},t){return new Promise((o=>{e(QM,t),o(!0)}))}},getters:{getListState(e){return{sortField:e.sortField,sortOrder:e.sortOrder,currentPage:e.currentPage,limit:e.limit}}}},XM={namespaced:!0,modules:{list:YM},state:{FilteredOperationalCountry:null},mutations:{[rm](e,t){e.filteredOperationalCountry=t}},actions:{changeFilteredOperationalCountry({commit:e},t){e(rm,t)}},getters:{filteredOperationalCountry(e){return{filteredOperationalCountry:e.filteredOperationalCountry}}}},eO={namespaced:!0,modules:{leaveType:XM}};const tO="UPDATE_FILTERS_PERSIST",oO="UPDATE_LIMIT",aO="UPDATE_CURRENT_PAGE",iO="UPDATE_ORDER_FIELD",lO="UPDATE_ORDER_BY",nO="UPDATE_FILTER_FIELD",rO="UPDATE_FILTERED_VACANCY",sO={searchText:"",candidatesQuickSearch:[],jobVacancy:null,jobTitle:null,from:null,to:null,activeVacanciesOnly:!0,searchInsideResume:!1,showActiveCandidates:!0,showArchivedCandidates:!1,jobVacancies:[],jobTitles:[],candidateName:"",candidateEventType:null,excludeCandidateEventTypes:[]},dO={searchActiveVacancies:!0,includeActive:!0,searchInsideResume:!1,includeArchive:!1,orderField:"date_applied",orderBy:"DESC",limit:20,currentPage:1};var cO={namespaced:!0,state:{filters:Object.assign({},sO),orderField:dO.orderField,orderBy:dO.orderBy,limit:dO.limit,currentPage:dO.currentPage,filteredVacancy:null},mutations:{[tO](e,t){e.filters=Object.assign({},t)},[oO](e,t){e.limit=t},[aO](e,t){e.currentPage=t},[iO](e,t){e.orderField=t},[lO](e,t){e.orderBy=t},[nO](e,t){e.filters[t.field]=t.value},[rO](e,t){e.filteredVacancy=t}},actions:{applyFilters({commit:e},t){t=Object.assign({},t),e(tO,t)},applyFiltersWithPartialDefault({commit:e},t){t=Object.assign(Object.assign({},t),{jobVacancy:sO.jobVacancy,jobTitle:sO.jobTitle,candidateEventType:sO.candidateEventType,excludeCandidateEventTypes:sO.excludeCandidateEventTypes,candidateName:sO.candidateName}),e(tO,t)},resetFilters({commit:e}){e(tO,sO)},nextPage({commit:e,state:t}){e(aO,t.currentPage+1)},previousPage({commit:e,state:t}){e(aO,t.currentPage-1)},jumpToPage({commit:e},t){e(aO,t)},changeLimit({commit:e},t){e(oO,t)},changeSortField({commit:e},t){e(iO,t)},changeSortOrder({commit:e},t){e(lO,t)},changeFilterField({commit:e},t){e(nO,t)},changeFilteredVacancy({commit:e},t){e(rO,t)}},getters:{appliedFilters(e){var t,o,a,i;return{candidateIdList:(null===(t=e.filters.candidatesQuickSearch)||void 0===t?void 0:t.map((e=>e.id)))||null,subUnitId:null,locationId:null,orderField:null,orderBy:null,nameTxt:e.filters.searchText,candidateName:e.filters.candidateName||null,appliedDateFrom:e.filters.from,appliedDateTo:e.filters.to,candidateEventTypeId:e.filters.candidateEventType,vacancyIds:null===(o=e.filters.jobVacancies)||void 0===o?void 0:o.map((e=>e.id)),jobTitleIds:(null===(a=e.filters.jobTitle)||void 0===a?void 0:a.id)?[e.filters.jobTitle.id]:null===(i=e.filters.jobTitles)||void 0===i?void 0:i.map((e=>e.id)),excludeCandidateEventTypeIds:e.filters.excludeCandidateEventTypes}},filteredVacancy(e){return{filteredVacancy:e.filteredVacancy}},appliedQueries(e){const t=Boolean(e.filters.activeVacanciesOnly),o=e.filters.searchText?Boolean(e.filters.searchInsideResume):void 0,a=Boolean(e.filters.showActiveCandidates),i=Boolean(e.filters.showArchivedCandidates);return{includeActive:a,includeArchive:i,searchInsideResume:o,searchActiveVacancies:t,orderField:e.orderField,orderBy:e.orderBy,pageNo:e.currentPage,limit:e.limit}},getState(e){return e}}};const mO="UPDATE_CANDIDATE_NOTES_GROUP_BY_PERSIST";var uO={namespaced:!0,state:{candidateNotesGroupBy:null},mutations:{[mO](e,t){e.candidateNotesGroupBy=t}},actions:{updateCandidateNotesGroupBy({commit:e},t){e(mO,t)}},getters:{getCandidateNotesGroupBy(e){return e.candidateNotesGroupBy}}};const pO="UPDATE_FILTERS_PERSIST",vO="UPDATE_LIMIT",hO="UPDATE_CURRENT_PAGE",gO="UPDATE_ORDER_FIELD",yO="UPDATE_ORDER_BY",fO="UPDATE_FILTER_FIELD",bO="UPDATE_FILTERED_VACANCY",CO={vacancies:null,vacancyName:null,titles:null,hiringManager:null,locations:null,subUnits:null,status:null,publishedDateFrom:null,publishedDateTo:null,excludeClosedVacancies:!0,hiringManagerFromFilterModal:[],JobTitlesFromFilterModal:[],vacanciesFromFilterModal:[],treeSelectSubUnitsFromFilterModal:null,treeSelectLocationsFromFilterModal:null},SO={orderField:"name",orderBy:"ASC",limit:20,currentPage:1,include:"Location,JobTitle,SubUnit,Status",metaData:{count:0,statusWithCount:{closed:0,new:0,published:0,unpublished:0}}};var wO={namespaced:!0,state:{filters:Object.assign({},CO),orderField:SO.orderField,orderBy:SO.orderBy,limit:SO.limit,currentPage:SO.currentPage,include:SO.include,metaData:SO.metaData},mutations:{[pO](e,t){e.filters=Object.assign({},t)},[vO](e,t){e.limit=t},[hO](e,t){e.currentPage=t},[gO](e,t){e.orderField=t},[yO](e,t){e.orderBy=t},[fO](e,t){e.filters[t.field]=t.value},["UPDATE_META_DATA"](e,t){e.metaData=t}},actions:{applyFilters({commit:e},t){t=Object.assign({},t),e(pO,t)},resetFilters({commit:e}){e(pO,CO)},nextPage({commit:e,state:t}){e(hO,t.currentPage+1)},previousPage({commit:e,state:t}){e(hO,t.currentPage-1)},jumpToPage({commit:e},t){e(hO,t)},changeLimit({commit:e},t){e(vO,t)},changeSortField({commit:e},t){e(gO,t)},changeSortOrder({commit:e},t){e(yO,t)},changeFilterField({commit:e},t){e(fO,t)},changeFilteredVacancy({commit:e},t){e(bO,t)},updateMetaData({commit:e},t){e("UPDATE_META_DATA",t)}},getters:{AppliedFilters(e){return e.filters},GetState(e){return e},GetMetaData(e){return e.metaData}}},EO={namespaced:!0,modules:{candidate:cO,candidateProfile:uO,vacancy:wO}};const kO="UPDATE_LIMIT",xO="UPDATE_CURRENT_PAGE",NO="UPDATE_ORDER_FIELD",AO="UPDATE_ORDER_BY",DO="UPDATE_FILTER_FIELD",TO="UPDATE_TIME_ZONE_VALUE",PO="UPDATE_CONNECTION_VALUE",VO="UPDATE_CONNECTION_MODIFIED_VALUE",BO="UPDATE_FREQUENCY_LIST",IO="UPDATE_MODIFICATION_STATUS",LO="UPDATE_ADDED_SCHEDULE",FO={limit:20,currentPage:1},zO={status:null,scheduleName:null,scheduleQuickSearch:[]},MO={namespaced:!0,state:{filters:Object.assign({},zO),timeZoneValue:null,connection:null,frequencies:[],orderField:"status",currentPage:FO.currentPage,limit:FO.limit,orderBy:"ASC",modificationStatus:null,addedSchedule:null,connectionsModified:null},mutations:{[TO](e,t){e.timeZoneValue=t},[BO](e,t){e.frequencies=t},[kO](e,t){e.limit=t},[IO](e,t){e.modificationStatus=t},[LO](e,t){e.addedSchedule=t},[NO](e,t){e.orderField=t},[xO](e,t){e.currentPage=t},[PO](e,t){e.connection=t},[VO](e,t){e.connectionsModified=t},[DO](e,t){e.filters[t.field]=t.value},[AO](e,t){e.orderBy=t}},actions:{jumpToPage({commit:e},t){e(xO,t)},nextPage({commit:e,state:t}){e(xO,t.currentPage+1)},previousPage({commit:e,state:t}){e(xO,t.currentPage-1)},changeLimit({commit:e},t){e(kO,t)},changeModification({commit:e},t){e(IO,t)},changeAddedSchedule({commit:e},t){e(LO,t)},changeSortField({commit:e},t){e(NO,t)},changeSortOrder({commit:e},t){e(AO,t)},changeTimeZoneValue({commit:e},t){e(TO,t)},changeSelectedConnection({commit:e},t){e(PO,t)},changeConnectionModifiedValue({commit:e},t){e(VO,t)},changeFrequencyValues({commit:e},t){e(BO,t)},changeFilterField({commit:e},t){e(DO,t)}},getters:{appliedFilters(e){var t;return{scheduleIdList:(null===(t=e.filters.scheduleQuickSearch)||void 0===t?void 0:t.map((e=>e.id)))||null,status:e.filters.status,scheduleName:e.filters.scheduleName}},searchKeyWordValue(e){var t,o;let a=null;return a=e.filters.scheduleName?e.filters.scheduleName:null===(t=e.filters.scheduleQuickSearch)||void 0===t?void 0:t.map((e=>e.label))[0],{searchKeyWordValue:null===(o=e.filters.scheduleQuickSearch)||void 0===o?void 0:o.map((e=>e.label))[0],searchKeyWordTerm:e.filters.scheduleName}},timeZoneValue(e){return{timeZoneValue:e.timeZoneValue}},modificationValue(e){return e.modificationStatus},newlyAddedScheduleValue(e){return e.addedSchedule},connectionValue(e){return e.connection},connectionModifiedValue(e){return e.connectionsModified},frequencyListValues(e){return{frequencies:e.frequencies}},appliedQueries(e){return{orderField:e.orderField,orderBy:e.orderBy,pageNo:e.currentPage,limit:e.limit}}}};o(82801);const OO=e=>{let t;try{return t=window[e],t.setItem("store_test",(new Date).toString()),t.removeItem("store_test"),!0}catch(o){return o instanceof DOMException&&(22===o.code||1014===o.code||"QuotaExceededError"===o.name||"NS_ERROR_DOM_QUOTA_REACHED"===o.name)&&t&&0!==t.length}},RO=(e,t,o)=>{o.setItem(e,JSON.stringify(t,((e,t)=>void 0===t?null:t)))},_O=(e,t)=>{const o=t.getItem(e);return"string"===typeof o?JSON.parse(o):o},$O=(e,t)=>{t.removeItem(e)},jO=(e,t)=>Object.keys(t).filter((t=>t.includes(e,0))),UO=(e,t="VUEX")=>{const o=window[e];return a=>{function i(){jO(t,o).forEach((e=>{const t=_O(e,o),[,i,...l]=e.split(/-|_/);"root"===i?a.commit(l.join("_"),t):a.hasModule(i.split("/"))&&a.commit(`${i}/${l.join("_")}`,t)}))}OO(e)&&(i(),a.subscribe((e=>{const{type:a,payload:l}=e;let n=a,r=["root"];if(a.indexOf("/")>-1&&([n,...r]=a.split("/").reverse()),n.includes("PERSIST")){const e=`${t}-${r.reverse().join("/")}_${n}`;$O(e,o),RO(e,l,o)}"REFRESH_STORE"===a&&i()})))}};var ZO=UO;const HO={namespaced:!0,state:{orderField:cm.orderField,orderBy:cm.orderBy,limit:cm.limit,currentPage:cm.currentPage,searchParameters:Object.assign({},mm)},mutations:{[tm](e,t){e.searchParameters=Object.assign({},t)},[om](e,t){e.limit=t},[am](e,t){e.currentPage=t},[im](e,t){e.orderField=t},[lm](e,t){e.orderBy=t}},actions:{applySearchParameters({commit:e},t){t=Object.assign({},t),e(tm,t)},applySearchParametersWithPartialDefault({commit:e},t){t=Object.assign({},t),e(tm,t)},changeFilterField({commit:e},t){e(nm,t)},resetSearchParameters({commit:e}){e(tm,mm)},nextPage({commit:e,state:t}){e(am,t.currentPage+1)},previousPage({commit:e,state:t}){e(am,t.currentPage-1)},jumpToPage({commit:e},t){e(am,t)},changeLimit({commit:e},t){e(om,t)},changeSortField({commit:e},t){e(im,t)},changeSortOrder({commit:e},t){e(lm,t)}},getters:{appliedQueries(e){return{orderField:e.orderField,orderBy:e.orderBy,pageNo:e.currentPage,limit:e.limit}}}};var qO={namespaced:!0,modules:{list:YM}},GO={namespaced:!0,modules:{historyEvent:qO}},WO=o(35322);const KO={namespaced:!0,state:{goalParams:[],goalData:[],formattedGoalParams:[],formattedGoalData:[],goalStatusesParams:[],goalStatusesData:[]},mutations:{UPDATE_GOAL_PARAMS(e,t){t?e.goalParams.push(t):e.goalParams=[]},UPDATE_GOAL_DATA(e,t){t?e.goalData.push(t):e.goalData=[]},UPDATE_FORMATTED_GOAL_PARAMS(e,t){t?e.formattedGoalParams.push(t):e.formattedGoalParams=[]},UPDATE_FORMATTED_GOAL_DATA(e,t){t?e.formattedGoalData.push(t):e.formattedGoalData=[]},UPDATE_GOAL_STATUSES_PARAMS(e,t){t?e.goalStatusesParams.push(t):e.goalStatusesParams=[]},UPDATE_GOAL_STATUSES_DATA(e,t){t?e.goalStatusesData.push(t):e.goalStatusesData=[]}},actions:{storeGoalParams(e,t){e.commit("UPDATE_GOAL_PARAMS",(0,Zg.Z)(t))},storeGoalData(e,t){e.commit("UPDATE_GOAL_DATA",(0,Zg.Z)(t))},dropGoalData(e){e.commit("UPDATE_GOAL_PARAMS"),e.commit("UPDATE_GOAL_DATA")},storeFormattedGoalParams(e,t){e.commit("UPDATE_FORMATTED_GOAL_PARAMS",(0,Zg.Z)(t))},storeFormattedGoalData(e,t){e.commit("UPDATE_FORMATTED_GOAL_DATA",(0,Zg.Z)(t))},dropFormattedGoalData(e){e.commit("UPDATE_FORMATTED_GOAL_PARAMS"),e.commit("UPDATE_FORMATTED_GOAL_DATA")},storeGoalStatusesParams(e,t){e.commit("UPDATE_GOAL_STATUSES_PARAMS",(0,Zg.Z)(t))},storeGoalStatusesData(e,t){e.commit("UPDATE_GOAL_STATUSES_DATA",(0,Zg.Z)(t))},dropGoalStatusesData(e){e.commit("UPDATE_GOAL_STATUSES_PARAMS"),e.commit("UPDATE_GOAL_STATUSES_DATA")}},getters:{getGoalDataByParams:e=>t=>{const o=e.goalParams.findIndex((e=>(0,WO.Z)(e,t)));return o>-1?(0,Zg.Z)(e.goalData[o]):null},getFormattedGoalDataByParams:e=>t=>{const o=e.formattedGoalParams.findIndex((e=>(0,WO.Z)(e,t)));return o>-1?(0,Zg.Z)(e.formattedGoalData[o]):null},getGoalStatusesDataByParams:e=>t=>{const o=e.goalStatusesParams.findIndex((e=>(0,WO.Z)(e,t)));return o>-1?(0,Zg.Z)(e.goalStatusesData[o]):null}}};var QO=KO;const JO={namespaced:!0,state:{objectiveParams:[],objectiveData:[]},mutations:{UPDATE_OBJECTIVE_PARAMS(e,t){t?e.objectiveParams.push(t):e.objectiveParams=[]},UPDATE_OBJECTIVE_DATA(e,t){t?e.objectiveData.push(t):e.objectiveData=[]}},actions:{storeObjectiveParams(e,t){e.commit("UPDATE_OBJECTIVE_PARAMS",(0,Zg.Z)(t))},storeObjectiveData(e,t){e.commit("UPDATE_OBJECTIVE_DATA",(0,Zg.Z)(t))},dropObjectiveData(e){e.commit("UPDATE_OBJECTIVE_PARAMS"),e.commit("UPDATE_OBJECTIVE_DATA")}},getters:{getObjectiveDataByParams:e=>t=>{const o=e.objectiveParams.findIndex((e=>(0,WO.Z)(e,t)));return o>-1?(0,Zg.Z)(e.objectiveData[o]):null}}};var YO=JO,XO={namespaced:!0,modules:{goals:QO,objectives:YO}};const eR={namespaced:!0,state:{subunitData:[]},mutations:{UPDATE_SUBUNIT_DATA(e,t){t?e.subunitData.push(t):e.subunitData=[]}},actions:{storeSubunitData(e,t){e.commit("UPDATE_SUBUNIT_DATA",(0,Zg.Z)(t))},dropSubunitData(e){e.commit("UPDATE_SUBUNIT_DATA")}},getters:{getSubunits:e=>e.subunitData.length>0?(0,Zg.Z)(e.subunitData):null}};var tR=eR;const oR={namespaced:!0,state:{jobTitleData:[]},mutations:{UPDATE_JOBTITLE_DATA(e,t){t?e.jobTitleData.push(t):e.jobTitleData=[]}},actions:{storeJobTitleData(e,t){e.commit("UPDATE_JOBTITLE_DATA",(0,Zg.Z)(t))},dropJobTitleData(e){e.commit("UPDATE_JOBTITLE_DATA")}},getters:{getJobTitles:e=>e.jobTitleData.length>0?(0,Zg.Z)(e.jobTitleData):null}};var aR=oR;const iR={namespaced:!0,state:{locationParams:[],locationData:[]},mutations:{UPDATE_LOCATION_PARAMS(e,t){t?e.locationParams.push(t):e.locationParams=[]},UPDATE_LOCATION_DATA(e,t){t?e.locationData.push(t):e.locationData=[]}},actions:{storeLocationParams(e,t){e.commit("UPDATE_LOCATION_PARAMS",(0,Zg.Z)(t))},storeLocationData(e,t){e.commit("UPDATE_LOCATION_DATA",(0,Zg.Z)(t))},dropLocationData(e){e.commit("UPDATE_LOCATION_PARAMS"),e.commit("UPDATE_LOCATION_DATA")}},getters:{getLocationDataByParams:e=>t=>{const o=e.locationParams.findIndex((e=>(0,WO.Z)(e,t)));return o>-1?(0,Zg.Z)(e.locationData[o]):null}}};var lR=iR;const nR="UPDATE_PERMISSION",rR="BULK_UPDATE_PERMISSION",sR={namespaced:!0,state:{permissions:{}},mutations:{[nR]:function(e,t){e.permissions[t.dataGroup]=t.abilities},[rR]:function(e,t){e.permissions=Object.assign({},t)}},actions:{fetchPermissions(e,t){return new Promise(((o,a)=>{this.$http.call("permissions","GET",[],JSON.parse(JSON.stringify(t)),void 0,!0).then((t=>{e.commit(rR,t.data.data),o()})).catch((e=>{a(e)}))}))},fetchPermissionsByDataGroup(e,t){return new Promise(((o,a)=>{"undefined"===typeof t.dataGroup&&a(new Error("Datagroup name is not specified")),this.$http.call("permissions","GET",[],JSON.parse(JSON.stringify(Object.assign(Object.assign({},t.params),{dataGroup:t.dataGroup}))),void 0,!0).then((a=>{e.commit(nR,{dataGroup:t.dataGroup,abilities:a.data.data}),o()})).catch((e=>{a(e)}))}))}},getters:{getPermissionsByDataGroup:e=>t=>e.permissions[t]||{read:!1,create:!1,delete:!1,update:!1}}};var dR=sR,cR={namespaced:!0,modules:{subunits:tR,jobTitles:aR,locations:lR,permissions:dR}};function mR(e,t){class o extends Gd.yh{constructor(e,t){super(t),this.$http=e}}return new o(e,t)}function uR(e){return mR(e,{strict:!1,modules:{buzz:GM,recruitment:EO,leave:eO,holiday:HO,pim:GO,report:MO,performance:XO,core:cR},mutations:{REFRESH_STORE(){}},plugins:[ZO("localStorage","ngStorage")]})}const pR={key:0,class:"bulk-action-buttons"};function vR(e,t,o,a,l,n){const r=(0,i.resolveComponent)("quick-filter"),s=(0,i.resolveComponent)("oxd-status-tab-panel"),d=(0,i.resolveComponent)("table-header"),c=(0,i.resolveComponent)("oxd-button"),m=(0,i.resolveComponent)("quick-search"),u=(0,i.resolveComponent)("oxd-icon-button"),p=(0,i.resolveComponent)("oxd-list-table"),v=(0,i.resolveComponent)("oxd-pagination"),h=(0,i.resolveComponent)("oxd-list");return(0,i.openBlock)(),(0,i.createBlock)(h,{class:"candidate-list"},{sidepanel:(0,i.withCtx)((({collapsed:o})=>[(0,i.createVNode)(s,{collapsed:o,filters:e.sidepanelFilters,mainButtonLabel:"Add Candidate",mainButtonDisabled:!e.permissions.create,onFilter:e.onSidepanelFilter,onClickMainButton:e.onAddCandidate},{body:(0,i.withCtx)((({collapsed:o})=>[(0,i.createVNode)(r,{modelValue:e.vacancy,"onUpdate:modelValue":t[0]||(t[0]=t=>e.vacancy=t),collapsed:o,onOnMoreClick:e.onClickVacancyInfo},null,8,["modelValue","collapsed","onOnMoreClick"])])),_:2},1032,["collapsed","filters","mainButtonDisabled","onFilter","onClickMainButton"])])),contentHeaderLeft:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{entity:"Candidate",total:e.total,loading:e.isLoading,selected:e.checkedItems.length},null,8,["total","loading","selected"]),e.checkedItems.length>0?((0,i.openBlock)(),(0,i.createElementBlock)("div",pR,[(0,i.createVNode)(c,{iconName:"oxd-archive",displayType:"label-info",disabledTooltip:e.$t(e.archiveButtonTooltip),disabled:!(e.canArchiveSelected||e.canUnarchiveSelected),label:e.$t(e.archiveButtonLabel),onClick:t[1]||(t[1]=t=>e.onClickArchive(e.canArchiveSelected))},null,8,["disabledTooltip","disabled","label"]),(0,i.createVNode)(c,{iconName:"oxd-trash",iconSize:"extra-small",displayType:"label-danger",label:e.$t("Delete Selected"),disabled:!e.canDeleteSelected,onClick:e.onClickDelete},null,8,["label","disabled","onClick"])])):(0,i.createCommentVNode)("",!0)])),contentHeaderRight:(0,i.withCtx)((()=>[(0,i.createVNode)(m,{entity:"candidates",module:"recruitment",modelValue:e.candidate,onSearch:e.onClickQuickSearch,"onUpdate:modelValue":e.onQuickSearch},null,8,["modelValue","onSearch","onUpdate:modelValue"]),(0,i.createVNode)(u,{name:"funnel",displayType:"label-info",tooltip:"Filter Candidates",onClick:e.onClickFilter},null,8,["onClick"]),(0,i.createVNode)(c,{label:"CSV",size:"medium",tooltip:"Export to CSV",displayType:"label-info",class:"csv-export-button",iconName:"oxd-document-text",onClick:e.onCsvExport},null,8,["onClick"])])),contentBody:(0,i.withCtx)((()=>[(0,i.createVNode)(p,{items:e.items,flashing:!0,selectable:!0,headers:e.headers,loading:e.isLoading,order:e.sortDefinition,"onUpdate:order":t[2]||(t[2]=t=>e.sortDefinition=t),selected:e.checkedItems,"onUpdate:selected":t[3]||(t[3]=t=>e.checkedItems=t)},null,8,["items","headers","loading","order","selected"])])),contentFooter:(0,i.withCtx)((()=>[(0,i.createVNode)(v,{current:e.currentPage,"onUpdate:current":t[4]||(t[4]=t=>e.currentPage=t),length:e.pages,perPage:e.pageSize,totalRecordsCount:e.total,onOnPerPageSelect:e.onPageSizeChange},null,8,["current","length","perPage","totalRecordsCount","onOnPerPageSelect"])])),_:1})}function hR(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-select-button");return(0,i.openBlock)(),(0,i.createBlock)(r,{flow:"right",moreIconName:"oxd-info",moreTooltip:"Vacancy Info",options:e.options,button:e.buttonObject,tooltip:e.tooltipText,doubleLineLabel:!0,hideDropdownLabel:e.collapsed,"dropdown-position":e.collapsed?"right":"bottom",modelValue:e.isLoading?null:e.modelValue,"onUpdate:modelValue":e.onUpdateModelValue},null,8,["options","button","tooltip","hideDropdownLabel","dropdown-position","modelValue","onUpdate:modelValue"])}function gR(e,t){return e.split("/").reduce(((e,t)=>e&&e[t]),t)}function yR(e,t=[]){const o={};for(const n in gR(e.NAMESPACE,e.store.state).filters)o[n]=(0,i.computed)({get:()=>gR(e.NAMESPACE,e.store.state).filters[n],set:t=>e.updateFilter({[n]:t})});const a=e=>(0,i.watch)([...Object.keys(o).filter((e=>!1===t.includes(e))).map((e=>o[e]))],e),l=(0,i.computed)((()=>e.store.getters[`${e.NAMESPACE}/getFilters`]));return{filters:o,onFilter:a,serializedFilters:l}}const fR=class{constructor(e){this._Buildable=e}get(...e){return new this._Buildable(...e)}};function bR(e){const t=(0,Gd.oR)(),o=new fR(e).get(t),a=o.NAMESPACE.split("/");return!1===t.hasModule(a)&&(a.length>1&&!1===t.hasModule(a[0])&&t.registerModule(a[0],{namespaced:!0}),t.registerModule(a,o.init()),t.commit("REFRESH_STORE",o.NAMESPACE,{root:!0})),o}class CR{constructor(e){this.store=e}init(){return{namespaced:!0,state:{entities:[],total:0,pageSize:20,currentPage:1,fetchState:!1,sortDefinition:{},filters:Object.assign({},this.FILTERS)},mutations:{ADD_ENTITY(e,t){e.entities.unshift(t)},UPDATE_TOTAL(e,t){e.total=t},UPDATE_ENTITY(e,t){const{index:o,data:a}=t;e.entities[o]=a},UPDATE_ENTITIES(e,t){e.entities=[...t]},UPDATE_FILTER_PERSIST(e,t){e.filters=t},UPDATE_FETCH_STATE(e,t){e.fetchState=t},UPDATE_PAGE_SIZE_PERSIST(e,t){e.pageSize=t},UPDATE_CURRENT_PAGE(e,t){e.currentPage=t},UPDATE_SORT_DEFINITION(e,t){e.sortDefinition=t},REMOVE_ENTITIES(e,t){e.entities=e.entities.filter((e=>!t.includes(e.id)))}},actions:{create(e,t){e.commit("ADD_ENTITY",t)},update(e,t){e.commit("UPDATE_ENTITIES",t)},updateOne(e,t){const o=e.state.entities.findIndex((e=>e.id===t.id));e.commit("UPDATE_ENTITY",{index:o,data:t})},updateTotal(e,t){e.commit("UPDATE_TOTAL",t)},updateFilter(e,t){e.commit("UPDATE_FILTER_PERSIST",Object.assign(Object.assign({},e.state.filters),t))},updateFetchState(e,t){e.commit("UPDATE_FETCH_STATE",t)},updatePageSize(e,t){e.commit("UPDATE_PAGE_SIZE_PERSIST",t)},updateCurrentPage(e,t){e.commit("UPDATE_CURRENT_PAGE",t)},updateSortDefinition(e,t){e.commit("UPDATE_SORT_DEFINITION",t)},delete(e,t){e.commit("REMOVE_ENTITIES",t)}},getters:{getTotal:e=>e.total,getPageSize:e=>e.pageSize,getSortDefinition:e=>e.sortDefinition,getPagination:(e,t)=>({limit:e.pageSize,pageNo:t.getCurrentPage}),getOrder:(e,t)=>({orderBy:t.getSortOrder,orderField:t.getSortField}),getPages:e=>e.total>e.pageSize?Math.ceil(e.total/e.pageSize):1,getFilters:e=>this.serialize(e.filters),getFiltered:e=>e.entities,getCurrentPage:(e,t)=>e.currentPage>0&&e.currentPage<=t.getPages?e.currentPage:1,getSortField:e=>Object.keys(e.sortDefinition).filter((t=>{const o=e.sortDefinition[t];return o&&"DEFAULT"!=o}))[0],getSortOrder:(e,t)=>e.sortDefinition[t.getSortField]}}}createEntity(e){this.store.dispatch(`${this.NAMESPACE}/create`,this.normalize(e.data,e.meta)),this.store.dispatch(`${this.NAMESPACE}/updateTotal`,this.store.getters[`${this.NAMESPACE}/getTotal`]+1)}deleteEntities(e){this.store.dispatch(`${this.NAMESPACE}/delete`,e),this.store.dispatch(`${this.NAMESPACE}/updateTotal`,this.store.getters[`${this.NAMESPACE}/getTotal`]-e.length)}updateEntity(e){this.store.dispatch(`${this.NAMESPACE}/updateOne`,this.normalize(e.data,e.meta))}updateEntities(e){this.store.dispatch(`${this.NAMESPACE}/update`,e)}updateTotal(e){this.store.dispatch(`${this.NAMESPACE}/updateTotal`,e)}updateFilter(e){this.store.dispatch(`${this.NAMESPACE}/updateFilter`,e)}updatePageSize(e){this.store.dispatch(`${this.NAMESPACE}/updatePageSize`,e)}updateCurrentPage(e){this.store.dispatch(`${this.NAMESPACE}/updateCurrentPage`,e)}updateFetchState(e){this.store.dispatch(`${this.NAMESPACE}/updateFetchState`,e)}updateSortDefinition(e){this.store.dispatch(`${this.NAMESPACE}/updateSortDefinition`,e)}}class SR extends CR{constructor(){super(...arguments),this.APIPATH="recruitment/candidates",this.NAMESPACE="recruitment/candidates",this.FILTERS={searchText:null,appliedDateTo:null,appliedDateFrom:null,candidateEventTypeId:null,includeActive:!0,includeArchive:!1,searchInsideResume:!1,searchActiveVacancies:!0,include:["Vacancy","CandidateStages"],exclude:["StatusWithCount"],vacancy:null,vacancies:[],jobTitleIds:[],candidate:null}}get(e){return(0,A.mG)(this,void 0,void 0,(function*(){const{data:t}=yield this.store.$http.call(this.APIPATH,"GET",[],e);return t}))}create(e){return(0,A.mG)(this,void 0,void 0,(function*(){const{data:t}=yield this.store.$http.call(this.APIPATH,"POST",e);return t}))}update(e,t){return(0,A.mG)(this,void 0,void 0,(function*(){const{data:o}=yield this.store.$http.call(`${this.APIPATH.slice(0,-1)}/${e}`,"PATCH",t);return o}))}delete(e){return(0,A.mG)(this,void 0,void 0,(function*(){const{data:t}=yield this.store.$http.call(this.APIPATH,"DELETE",{ids:e});return t}))}archive(e){return(0,A.mG)(this,void 0,void 0,(function*(){const{data:t}=yield this.store.$http.call(`${this.APIPATH}/archive`,"PATCH",{candidateIds:e});return t}))}unarchive(e){return(0,A.mG)(this,void 0,void 0,(function*(){const{data:t}=yield this.store.$http.call(`${this.APIPATH}/unarchive`,"PATCH",{candidateIds:e});return t}))}getSidePanelFilters(){return(0,A.mG)(this,void 0,void 0,(function*(){const e=[{count:0,selected:!1,name:"Application Received",color:"rgb(31, 111, 253)",backgroundColor:"rgba(31, 111, 253, 0.1)"},{count:0,selected:!1,name:"Shortlisted",color:"rgb(197, 122, 253)",backgroundColor:"rgba(197, 122, 253, 0.1)"},{id:9999,count:0,selected:!1,name:"In Progress",color:"rgb(116, 203, 30)",backgroundColor:"rgba(116, 203, 30, 0.1)"},{count:0,selected:!1,name:"Job Offer",color:"rgb(0, 234, 211)",backgroundColor:"rgba(0, 234, 211, 0.1)"},{count:0,selected:!1,name:"Hire",color:"rgb(237, 125, 48)",backgroundColor:"rgba(237, 125, 48, 0.1)"},{count:0,selected:!1,name:"Rejected",color:"rgb(231, 68, 50)",backgroundColor:"rgba(231, 68, 50, 0.1)"}],{meta:t}=yield this.get(Object.assign(Object.assign({},this.store.getters[`${this.NAMESPACE}/getFilters`]),{include:void 0,exclude:void 0,includeOnlyStatusWithCount:!0})),o=this.store.state.recruitment.candidates.filters.candidateEventTypeId;for(const a in t.statusWithCount){const i=t.statusWithCount[a],l=e.findIndex((e=>e.name===i.typeName));!1===i.isDefault||"Panel Interview"===i.typeName?(e[2].selected=o==e[2].id,e[2].accessible=e[2].accessible||i.accessible,e[2].count=e[2].count+parseInt(i.eventCount)):-1!==l&&(e[l].id=parseInt(i.typeId),e[l].accessible=i.accessible,e[l].count=parseInt(i.eventCount),e[l].selected=o==i.typeId)}return[{name:"All Candidates",selected:!o,count:parseInt(t.totalCount)},...e.map((e=>"Hire"===e.name?Object.assign(Object.assign({},e),{name:"Hired"}):e)).filter((e=>e.accessible))]}))}getOne(e,t){return(0,A.mG)(this,void 0,void 0,(function*(){const{data:o}=yield this.store.$http.call(`${this.APIPATH.slice(0,-1)}/${e}`,"GET",[],t);return o}))}normalize(e,t){var o,a,i,l,n,r;const{permittedIds:s,permittedActions:d}=t,c=e.candidateStages.map((e=>({id:e.level,label:e.eventTitle}))).reduce(((e,t)=>(e[Number(t.id)]=e[Number(t.id)]||[],e[Number(t.id)].push(t),e)),[]).filter((e=>!!e)).map((e=>({id:e[0].id,label:e.map((e=>e.label)).join(", ")})));return{id:e.id,email:e.email,isHired:e.isHired,vacancy:e.vacancy,candidate:e.fullName,contactNumber:e.contactNo,isArchived:"2"===e.status,vacancyId:null===(o=e.vacancy)||void 0===o?void 0:o.vacancyId,dateOfApplication:e.dateOfApplication,stage:{id:9999,label:e.candidateStage},stages:c,attachmentId:(null===(a=null===e||void 0===e?void 0:e.attachment)||void 0===a?void 0:a.id)||e.attachmentId,permittedToAddAsEmployee:e.permittedToAddAsEmployee,canArchive:void 0===s&&void 0===d||(null!==(i=null===d||void 0===d?void 0:d.archive)&&void 0!==i?i:null===s||void 0===s?void 0:s.archive.includes(e.id)),canDelete:void 0===s&&void 0===d||(null!==(l=null===d||void 0===d?void 0:d.delete)&&void 0!==l?l:null===s||void 0===s?void 0:s.delete.includes(e.id)),canUpdate:void 0===s&&void 0===d||(null!==(n=null===d||void 0===d?void 0:d.update)&&void 0!==n?n:null===s||void 0===s?void 0:s.update.includes(e.id)),profilePic:`/api/recruitment/candidateProfilePicture/${e.id}`,profileUrl:`/client/#/recruitment/candidateProfile/candidateId/${e.id}/vacancyId/${(null===(r=e.vacancy)||void 0===r?void 0:r.vacancyId)||""}`}}serialize(e){let t=null,o=[],a=[],i=[],l=e.includeActive,n=e.includeArchive,r=e.searchActiveVacancies;return e.vacancy?o=[e.vacancy.id]:e.vacancies.length>0&&(o=e.vacancies.map((e=>e.id))),e.jobTitleIds.length>0&&(a=e.jobTitleIds.map((e=>e.id))),e.candidate&&("string"===typeof e.candidate?(i=[],t=e.candidate):Array.isArray(e.candidate)?(t=null,i=e.candidate.map((e=>e.id))):"object"===typeof e.candidate&&(o=[],t=null,i=[e.candidate.id])),i.length>0&&(l=!0,n=!0,r=!1),{includeActive:l,includeArchive:n,searchActiveVacancies:r,exclude:e.exclude.join(","),include:e.include.join(","),searchInsideResume:e.searchInsideResume,filter:Object.assign({vacancyIds:o,jobTitleIds:a,candidateName:t,candidateIdList:i,nameTxt:e.searchText,appliedDateTo:e.appliedDateTo,appliedDateFrom:e.appliedDateFrom},9999===e.candidateEventTypeId?{excludeCandidateEventTypeIds:[1,6,7,8,9]}:{candidateEventTypeId:e.candidateEventTypeId})}}}const wR={label:"All Vacancies",labelMini:"Vacancy",iconName:"eye",iconSize:"large",iconStyle:"height: 20px; display: flex; align-items: center; color: #68a61d",iconImageSrc:null,size:"long",displayType:"label",doubleLineLabel:!0,showLabel:!0,style:{"background-color":"#ebfcd6","justify-content":"space-between"}};var ER=(0,i.defineComponent)({name:"QuickFilter",props:{collapsed:{type:Boolean,default:!1},modelValue:{type:Object,default:null}},components:{"oxd-select-button":Ag.Z},emits:["update:modelValue"],setup(e,t){const o=zm(),a=Fm(),l=bR(SR),{filters:n}=yR(l),r=(0,i.ref)([]),s=(0,i.ref)(!1);(0,i.onBeforeMount)((()=>{var e;s.value=!!(null===(e=a.$stateParams)||void 0===e?void 0:e.vacancyId),o.get("recruitment/vacancies/basic",{filter:{excludeStatuses:[-1]}}).then((e=>{var t;const{data:o}=e.data;r.value=[{id:-1,label:"All Vacancies"},...o.map((e=>({label:e.vacancyName,id:parseInt(e.vacancyId)})))],(null===(t=a.$stateParams)||void 0===t?void 0:t.vacancyId)&&(n.vacancy.value=r.value.find((e=>e.id==parseInt(a.$stateParams.vacancyId))))})).finally((()=>{s.value=!1}))}));const d=e=>{t.emit("update:modelValue",-1===(null===e||void 0===e?void 0:e.id)?null:e)},c=(0,i.computed)((()=>{var t;return s.value?"All Vacancies":e.collapsed?(null===(t=e.modelValue)||void 0===t?void 0:t.label)||"All Vacancies":""}));return{options:r,isLoading:s,tooltipText:c,buttonObject:wR,onUpdateModelValue:d}}});const kR=(0,Re.Z)(ER,[["render",hR],["__scopeId","data-v-32773dc4"]]);var xR=kR;const NR={class:"orangehrm-table-header"};function AR(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-text");return(0,i.openBlock)(),(0,i.createElementBlock)("div",NR,[(0,i.createVNode)(r,{tag:"h5",class:(0,i.normalizeClass)(a.classes)},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(o.selected>0?a.itemSelectedText:a.itemCountText),1)])),_:1},8,["class"])])}const DR=(e,t,o="s",a=null)=>1===e?t:a||t+o;var TR={name:"TableHeader",props:{loading:{type:Boolean,required:!0},selected:{type:Number,required:!0},total:{type:[Number,String],required:!0},entity:{type:String,default:"Record"},entitySuffix:{type:String,default:"s"},entityIrregular:{type:String,default:null}},components:{"oxd-text":Ii.Z},setup(e){const t=ce(),o=o=>{const a=DR(o,e.entity,e.entitySuffix,e.entityIrregular);return`(${o}) ${t(a)}`},a=(0,i.computed)((()=>`${o(e.total)} `+t("Found"))),l=(0,i.computed)((()=>`${o(e.selected)} `+t("Selected"))),n=(0,i.computed)((()=>({"orangehrm-table-header-text":!0,"--selected":e.selected>0})));return{classes:n,itemCountText:a,itemSelectedText:l}}};const PR=(0,Re.Z)(TR,[["render",AR],["__scopeId","data-v-3db7cfb0"]]);var VR=PR;function BR(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon-button"),s=(0,i.resolveComponent)("oxd-quick-search");return(0,i.openBlock)(),(0,i.createBlock)(s,{clear:!1,placeholder:e.$t("Search"),createOptions:e.getQuickSearchOptions},{iconSlot:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{name:"oxd-search",onClick:t[0]||(t[0]=t=>e.$emit("search",t))})])),_:1},8,["placeholder","createOptions"])}var IR=(0,i.defineComponent)({components:{"oxd-icon-button":D.Z,"oxd-quick-search":T.Z},props:{module:{type:String,required:!0},entity:{type:String,required:!0}},setup(e){const t=zm(),o=o=>new Promise((a=>{t.get(`${e.module}/${e.entity}`,{limit:5,exclude:"Meta",includeActive:!0,includeArchive:!0,orderBy:"bestMatchName",filter:{candidateName:o}}).then((e=>{const{data:t}=e.data;a(t.map((e=>({id:e.id,label:e.fullName}))))}))}));return{getQuickSearchOptions:o}}});const LR=(0,Re.Z)(IR,[["render",BR],["__scopeId","data-v-6dbbc0f6"]]);var FR=LR;function zR(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-progress-bar");return(0,i.openBlock)(),(0,i.createBlock)(r,{title:e.$t(e.title),show:!0},null,8,["title"])}var MR=(0,i.defineComponent)({name:"FileExportModal",props:{title:{type:String,required:!0},name:{type:String,required:!0}},components:{"oxd-progress-bar":ym.Z},emits:["update:show","progress:start","progress:end"],setup(e,t){const o=zm(),a=()=>o.call("progress","POST",[],{name:e.name}),i=()=>o.call("progress","GET",[],{name:e.name}),l=()=>o.call("progress","DELETE",[],{name:e.name}),n=()=>(0,A.mG)(this,void 0,void 0,(function*(){yield a(),t.emit("progress:start");const e=setInterval((function(){i().then((e=>{const{data:o}=e.data;if(o&&o>=100)return t.emit("progress:end"),l()})).then((()=>{t.emit("update:show",!0)})).finally((()=>{clearInterval(e)}))}),1e3)}));n()}});const OR=(0,Re.Z)(MR,[["render",zR]]);var RR=OR,_R=o(80129);const $R=function(e,t={},o={}){let a=e;return o=JSON.parse(JSON.stringify(o)),Object.keys(t).forEach((e=>{const o=`{${e}}`;if(a.includes(o)){let i=t[e];"number"===typeof i&&(i=i.toString()),a=a.replace(o,i)}else console.error("Invalid parameter.")})),encodeURI(a+(0,_R.stringify)(o,{encode:!1,skipNulls:!0,addQueryPrefix:!0}))},jR=function(e,t={},o={}){return`${window.location.origin}/${$R(e,t,o)}`},UR=function(e,t={},o={}){window.location.href=jR(e,t,o)};var ZR=o(79697);function HR(e,t){const o=(0,i.computed)({get:()=>e.store.getters[`${e.NAMESPACE}/getSortDefinition`],set:t=>e.updateSortDefinition(t)}),a=(0,i.computed)((()=>e.store.getters[`${e.NAMESPACE}/getSortField`])),l=(0,i.computed)((()=>e.store.getters[`${e.NAMESPACE}/getSortOrder`])),n=e=>(0,i.watch)(o,e);return(0,ZR.Z)(o.value)&&e.updateSortDefinition(JSON.parse(JSON.stringify(t))),{onSort:n,sortOrder:l,sortField:a,sortDefinition:o}}function qR(){const e=(0,i.inject)("$toast"),t=e=>(...t)=>e&&e(...t);return{notify:t(null===e||void 0===e?void 0:e.notify),show:t(null===e||void 0===e?void 0:e.show),success:t(null===e||void 0===e?void 0:e.success),error:t(null===e||void 0===e?void 0:e.error),info:t(null===e||void 0===e?void 0:e.info),warn:t(null===e||void 0===e?void 0:e.warn),clear:t(null===e||void 0===e?void 0:e.clear),clearAll:t(null===e||void 0===e?void 0:e.clearAll),saveError:t(null===e||void 0===e?void 0:e.saveError),saveSuccess:t(null===e||void 0===e?void 0:e.saveSuccess),addSuccess:t(null===e||void 0===e?void 0:e.addSuccess),deleteError:t(null===e||void 0===e?void 0:e.deleteError),updateError:t(null===e||void 0===e?void 0:e.updateError),updateSuccess:t(null===e||void 0===e?void 0:e.updateSuccess),deleteSuccess:t(null===e||void 0===e?void 0:e.deleteSuccess),cannotDelete:t(null===e||void 0===e?void 0:e.cannotDelete),archiveError:t(null===e||void 0===e?void 0:e.archiveError),unarchiveError:t(null===e||void 0===e?void 0:e.unarchiveError),archiveSuccess:t(null===e||void 0===e?void 0:e.archiveSuccess),noRecordsFound:t(null===e||void 0===e?void 0:e.noRecordsFound),unarchiveSuccess:t(null===e||void 0===e?void 0:e.unarchiveSuccess)}}const GR={class:"orangehrm-modal-header"},WR={key:0,class:"header-icon"},KR={class:"orangehrm-text-center-align"},QR={class:"orangehrm-modal-footer"};function JR(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon"),s=(0,i.resolveComponent)("oxd-text"),d=(0,i.resolveComponent)("oxd-button"),c=(0,i.resolveComponent)("oxd-dialog"),m=(0,i.resolveDirective)("set-tab-focus-to-first-element");return(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(c,{onKeyup:(0,i.withKeys)(e.onCancel,["esc"]),"onUpdate:show":e.onCancel},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",GR,[e.icon?((0,i.openBlock)(),(0,i.createElementBlock)("div",WR,[(0,i.createVNode)(r,{name:e.icon,size:"large",class:"modal-title-icon"},null,8,["name"])])):(0,i.createCommentVNode)("",!0),(0,i.createVNode)(s,{class:"modal-title",type:"modal-title"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.title)),1)])),_:1})]),(0,i.createElementVNode)("div",KR,[(0,i.createVNode)(s,{type:"subtitle-2"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.message)),1)])),_:1}),(0,i.withDirectives)((0,i.createVNode)(s,{type:"subtitle-2"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t(e.messageAlt)),1)])),_:1},512),[[i.vShow,e.messageAlt]])]),(0,i.createElementVNode)("div",QR,[(0,i.createVNode)(d,{label:e.$t(e.cancelText),iconName:e.cancelIcon,iconSize:e.cancelIconSize,displayType:e.cancelDisplayType,"data-test":"cancelButton",class:"orangehrm-button-margin",onClick:(0,i.withModifiers)(e.onCancel,["stop"])},null,8,["label","iconName","iconSize","displayType","onClick"]),(0,i.createVNode)(d,{label:e.$t(e.confirmText),iconName:e.confirmIcon,iconSize:e.confirmIconSize,displayType:e.confirmDisplayType,"data-test":"confirmButton",class:"orangehrm-button-margin",onClick:(0,i.withModifiers)(e.onConfirm,["stop"])},null,8,["label","iconName","iconSize","displayType","onClick"])])])),_:1},8,["onKeyup","onUpdate:show"])),[[m,void 0,"return-focus"]])}var YR=(0,i.defineComponent)({name:"ConfirmationDialog",components:{"oxd-icon":In.Z,"oxd-text":Ii.Z,"oxd-button":jt.Z,"oxd-dialog":Wo.Z},emits:["confirm","cancel","onUpdate:show"],directives:{"set-tab-focus-to-first-element":Sr.Z},props:{icon:{type:String,default:null,required:!1},title:{type:String,default:"Are you sure?",required:!1},cancelText:{type:String,default:"No, Cancel",required:!1},confirmText:{type:String,default:"Ok",required:!1},message:{type:String,default:"Your message",required:!1},messageAlt:{type:String,default:null,required:!1},cancelIcon:{type:String,default:null,required:!1},confirmIcon:{type:String,default:null,required:!1},cancelIconSize:{type:String,default:null,required:!1},confirmIconSize:{type:String,default:null,required:!1},cancelDisplayType:{type:String,default:null,required:!1},confirmDisplayType:{type:String,default:null,required:!1}},methods:{onCancel(){this.$emit("cancel")},onConfirm(){this.$emit("confirm")}}});const XR=(0,Re.Z)(YR,[["render",JR],["__scopeId","data-v-19189b67"]]);var e_=XR;function t_(){const e=(0,Hc.E)(qc);function t(t){return new Promise((o=>{const a=Gc(e_,{message:t,title:"Are you sure?",cancelText:"No, Cancel",cancelDisplayType:"text",confirmText:"Yes, Delete",confirmIcon:"oxd-trash",confirmIconSize:"extra-small",style:{width:"450px"},confirmDisplayType:"label-feedback-danger",messageAlt:"Are you sure you want to continue?"},e).listen("onConfirm",(()=>{o("ok"),a.close()})).listen("onCancel",(()=>{o("no"),a.close()}));a.open()}))}function o(t,o=!0){return new Promise((a=>{const i=Gc(e_,{message:t,title:"Are you sure?",cancelText:"No, Cancel",cancelDisplayType:"text",confirmText:o?"Yes, Archive":"Yes, Unarchive",confirmIcon:"oxd-archive",confirmIconSize:"extra-small",style:{width:"450px"},confirmDisplayType:"label-feedback-info",messageAlt:"Are you sure you want to continue?"},e).listen("onConfirm",(()=>{a("ok"),i.close()})).listen("onCancel",(()=>{a("no"),i.close()}));i.open()}))}return{deleteDialog:t,archiveDialog:o}}function o_(e){const t=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))Array.isArray(a)&&0===a.length?t[o]=void 0:t[o]=null===a||""===a?void 0:"object"===typeof a?o_(a):a;return t}function a_(e){const t=(0,i.ref)(!1),{noRecordsFound:o}=qR(),a=(a=!1)=>(0,A.mG)(this,void 0,void 0,(function*(){t.value=!0,e.updateFetchState(!0);const a=o_(o_(Object.assign(Object.assign(Object.assign({},e.store.getters[`${e.NAMESPACE}/getFilters`]),e.store.getters[`${e.NAMESPACE}/getOrder`]),e.store.getters[`${e.NAMESPACE}/getPagination`]))),{data:i,meta:l}=yield e.get(a);e.updateEntities(i.map((t=>e.normalize(t,l)))),l&&("number"===typeof l.count&&(e.updateTotal(l.count),0===l.count&&o()),"string"===typeof l.count&&(e.updateTotal(parseInt(l.count)),0===parseInt(l.count)&&o())),t.value=!1,e.updateFetchState(!1)})),l=(0,i.computed)((()=>e.store.getters[`${e.NAMESPACE}/getPages`])),n=(0,i.computed)((()=>e.store.getters[`${e.NAMESPACE}/getTotal`])),r=(0,i.computed)((()=>e.store.getters[`${e.NAMESPACE}/getFiltered`])),s=(0,i.computed)((()=>l.value>1||n.value>10)),d=(0,i.computed)({get:()=>e.store.getters[`${e.NAMESPACE}/getPageSize`],set:t=>e.updatePageSize(t)}),c=(0,i.computed)({get:()=>e.store.getters[`${e.NAMESPACE}/getCurrentPage`],set:t=>e.updateCurrentPage(t)});(0,i.watch)(c,(()=>a()));const m=e=>(0,i.watch)(r,e,{deep:!0,flush:"post"});return{pages:l,items:r,total:n,pageSize:d,isLoading:t,execQuery:a,onPaginate:m,currentPage:c,showPaginator:s}}var i_=o(67545),l_=o(2969),n_=o(74570);class r_{constructor(e){this._app=(0,i.getCurrentInstance)(),this._dataGroupPermissionService=new Aa,this._app=e}getDataGroupPermissions(e){return this._dataGroupPermissionService.getDataGroupPermissions(e)}}var s_=o(43936);function d_(e){const t=ce();(0,i.provide)("screenState",{screenType:"lg"});const o=new Vf,a=(0,Hc.E)(qc),l=new Bf,n=new r_(null),r=new Sb,{jsDisplayFormat:s,locale:d,format:c}=Im(),{saveError:m,saveSuccess:u,updateError:p,updateSuccess:v}=qR(),h=e=>(0,se.p6)(new Date(e),s,{locale:d}),g=(0,i.reactive)({timezones:[],payGrades:[],isLoading:!1,allCountries:[],currencyTypes:[],allUSProvinces:[],employmentStatus:[],empWizardEnabled:!1,supervisors:[],commentGroups:[],candidateProfile:null,selectedHistoryStage:null,candidateEventData:[],candidateLatestEventData:[],directReportingMethod:null,permissions:{read:!0,create:!1,update:!1,delete:!1}}),y=[{name:"profilePic",style:{width:"55px","justify-content":"center"},iconName:"oxd-profile-pic",iconStyle:"color: #929baa; justify-content: center;",cellType:"oxd-table-cell-profile-pic",cellProps:{link:"profileUrl",target:"_blank"}},{name:"candidate",title:"Candidate",sortField:"candidate",style:{flex:"10%","padding-left":"1rem","margin-right":"0"},cellType:"oxd-table-cell-link-with-pill",cellProps:{link:"profileUrl",target:"_blank",pillProperty:["vacancy","name"]}},{name:"email",title:"Email",sortField:"email",style:{flex:"5%","min-width":"90px","margin-right":"0"}},{name:"contactNumber",title:"Contact Number",sortField:"contact_number",style:{flex:"5%","min-width":"90px","margin-right":"0"}},{name:"dateOfApplication",title:"Date Applied",sortField:"date_applied",style:{flex:"5%","min-width":"90px","margin-right":"0"},cellType:"oxd-table-cell-date",cellProps:{displayFormat:c,locale:d}},{title:"Stage",style:{flex:"185px","margin-right":"0"},cellType:"oxd-table-cell-actions",cellRenderer:f}];function f(...[,,,o]){o=JSON.parse(JSON.stringify(o)),o.stage={id:o.stage.id,label:o.stage.label.split(",").map((e=>t(e.trim()))).join(", ")},o.stages=(o.stages||[]).map((e=>({id:e.id,label:e.label.split(",").map((e=>t(e.trim()))).join(", ")})));const i={component:s_.Z,props:{modelValue:o.stage,options:o.stages,disabled:0===o.stages.length||!1===o.canUpdate||!0===o.isHired},onChange(t,o){e.update(t.id,{level:parseInt(o.id),partialUpdate:["level"]}).then((t=>{const{data:o,meta:i}=t;v(),e.updateEntity({data:o,meta:i}),"Job Offer"===o.candidateStage&&F(o.id,o.vacancy.vacancyId).then((()=>{Z(a).open()}))})).catch((()=>p()))}},l=[{icon:"oxd-download",label:t("Download Application Form"),context:"download_application_form"}];o.vacancyId&&l.push({label:t("Compare with Other Candidates"),icon:"oxd-users",context:"candidate_comparison"}),o.attachmentId&&l.unshift({label:t("Download Resume"),icon:"oxd-download-doc",context:"download_resume"}),o.permittedToAddAsEmployee&&l.unshift({label:t("Add as Employee"),icon:"oxd-add-employee",context:"add_as_an_employee",class:"orangehrm-add-employee"});const n={component:"oxd-table-dropdown",props:{options:l,style:{"margin-left":"auto"},onClick:e=>r(e,o)}},r=function(e,t){switch(e.context){case"download_resume":UR("api/recruitment/downloadCandidateResume/candidateId/{candidateId}",{candidateId:t.id});break;case"download_application_form":UR("api/recruitment/downloadApplicationForm/candidateId/{candidateId}",{candidateId:t.id});break;case"candidate_comparison":UR("/client/#/noncore/recruitment/forwardToCandidatePipelineAjax/vacancyId/{vacancyId}/candidateId/{candidateId}",{candidateId:t.id,vacancyId:t.vacancyId});break;case"add_as_an_employee":F(t.id,t.vacancyId).then((()=>{H(a,parseInt(t.id)).open()}));break;default:break}};return{props:{header:{cellConfig:Object.assign({stage:i},{more:n})}}}}const b=new Promise(((e,t)=>{o.getCountries().then((t=>{g.allCountries=t.data.data.map((e=>Object.assign(Object.assign({},e),{id:e.cou_code,label:e.cou_name}))),e()})).catch((e=>t(e)))})),C=new Promise(((e,t)=>{o.getPayGrades().then((t=>{g.payGrades=t.data.data.map((e=>Object.assign(Object.assign({},e),{label:e.name}))),e()})).catch((e=>t(e)))})),S=new Promise(((e,a)=>{o.getTimeZones().then((o=>{g.timezones=o.data.data.map((e=>{const o=[...e.alternativeKeys||[],e.name];return{id:e.name,keys:o,offset:e.offset,prefix:e.prefix,label:`(${e.prefix}) `+t(e.label)}})),e()})).catch((e=>a(e)))})),w=new Promise(((e,t)=>{o.getEmployeeWizardStatus().then((t=>{g.empWizardEnabled=t.data.data.enabled||!1,e()})).catch((e=>t(e)))})),E=new Promise(((e,t)=>{o.getUSProvinces().then((t=>{g.allUSProvinces=t.data.data.map((e=>Object.assign(Object.assign({},e),{id:e.province_code,label:e.province_name})))||[],e()})).catch((e=>t(e)))})),k=new Promise(((e,t)=>{o.getCurrencyTypes().then((t=>{g.currencyTypes=t.data.data.map((e=>Object.assign(Object.assign({},e),{id:e.currency_id,label:e.currency_name}))),e()})).catch((e=>t(e)))})),x=new Promise(((e,t)=>{o.getEmploymentStatus().then((t=>{g.employmentStatus=t.data.data.map((e=>Object.assign(Object.assign({},e),{label:e.name}))),e()})).catch((e=>t(e)))})),N=new Promise(((e,t)=>{o.getEmployeeReportingMethods().then((t=>{const o=t.data.data;if(o&&o.length>0){const e=o.find((e=>"Direct"===e.name));if(e)g.directReportingMethod=e;else{const e=o.sort(((e,t)=>e.id-t.id));g.directReportingMethod=e[0]}}else g.directReportingMethod=null;e()})).catch((e=>t(e)))})),D=new Promise(((e,t)=>{n.getDataGroupPermissions({dataGroup:"recruitment_candidates"}).then((t=>{g.permissions=t,e()})).catch((e=>t(e)))})),T=e=>new Promise(((t,a)=>{o.getVacancy(e,{include:"HiringManager"}).then((e=>{var o,a;g.supervisors=null===(a=null===(o=e.data.data)||void 0===o?void 0:o.hiringManager)||void 0===a?void 0:a.map((e=>{var t,o;return Object.assign(Object.assign({},e),{id:e.empNumber,label:ge.getEmployeeName(e.firstName,null!==(t=e.middleName)&&void 0!==t?t:"",null!==(o=e.lastName)&&void 0!==o?o:"",Boolean(null===e||void 0===e?void 0:e.termination_id))})})),t()})).catch((e=>a(e)))})),P=e=>(0,A.mG)(this,void 0,void 0,(function*(){const t=yield new Promise(((t,a)=>{o.getDirectSupervisors(e).then((e=>{const o=e.data.data.map((e=>{const t=Object.assign(Object.assign({},e),{id:e.employeeId,label:ge.getEmployeeName(e.firstName,e.middleName||"",e.lastName||"",Boolean(null===e||void 0===e?void 0:e.termination_id))});return t}));t(o)})).catch((()=>{a([])}))}));return t})),V=e=>`images/${l.getDefaultProfilePicName(e)}`,B=e=>{const t=e.addedEmployee?{id:e.addedEmployee.id,commenterName:ge.getEmployeeName(e.addedEmployee.firstName,e.addedEmployee.middleName,e.addedEmployee.lastName,Boolean(e.addedEmployee.terminationId)),avatarUrl:e.addedEmployee.profilePic?ge.base64ImageConvertion("image/jpeg",e.addedEmployee.profilePic.image):V(e.addedEmployee.id)}:{id:"-1",commenterName:ge.getEmployeeName("Admin","","",!1)};return{user:t,id:e.id,groupId:"groupId",content:e.note,addedTime:e.addedTime,allowToEdit:e.editable,allowToDelete:e.deletable,formattedTime:h(e.addedTime),edited:!!e.updatedTime||(e.edited||!1)}},I=()=>{var e,t,o,a,i,l,n;const r=(0,xu.x0)(6),s=(0,xu.x0)(6),d=(0,xu.x0)(6),c=null===(t=null===(e=g.selectedHistoryStage)||void 0===e?void 0:e.notes)||void 0===t?void 0:t.map((e=>B(e))),m=null===c||void 0===c?void 0:c.sort(((e,t)=>e.id-t.id));if(g.selectedHistoryStage&&(null===(o=g.selectedHistoryStage.notes)||void 0===o?void 0:o.length)>0&&(g.commentGroups=[{id:r,comments:m}]),g.selectedHistoryStage&&(null===(a=g.selectedHistoryStage)||void 0===a?void 0:a.scheduleNote)){const e=g.selectedHistoryStage.scheduleNote.addedEmployee?{id:g.selectedHistoryStage.scheduleNote.addedEmployee.id,commenterName:ge.getEmployeeName(g.selectedHistoryStage.scheduleNote.addedEmployee.firstName,g.selectedHistoryStage.scheduleNote.addedEmployee.middleName,g.selectedHistoryStage.scheduleNote.addedEmployee.lastName,Boolean(g.selectedHistoryStage.scheduleNote.addedEmployee.terminationId)),avatarUrl:g.selectedHistoryStage.scheduleNote.addedEmployee.profilePic?ge.base64ImageConvertion("image/jpeg",g.selectedHistoryStage.scheduleNote.addedEmployee.profilePic.image):V(g.selectedHistoryStage.scheduleNote.addedEmployee.id)}:{id:"-1",commenterName:ge.getEmployeeName("Admin","","",!1)};g.commentGroups.push({id:d,comments:[{id:2,isScheduleNote:!0,groupId:d,content:g.selectedHistoryStage.scheduleNote.note,user:e,time:g.selectedHistoryStage.scheduleNote.addedTime,formattedTime:null===(i=g.selectedHistoryStage.scheduleNote.addedTime)||void 0===i?void 0:i.split(" ")[0],allowToEdit:g.selectedHistoryStage.scheduleNote.editable,allowToDelete:g.selectedHistoryStage.scheduleNote.deletable,edited:!!g.selectedHistoryStage.scheduleNote.updatedTime||(g.selectedHistoryStage.edited||!1)}],isScheduleNoteGroup:!0})}if(null===(l=g.selectedHistoryStage)||void 0===l?void 0:l.finalNote){const e=g.selectedHistoryStage.finalNote.addedEmployee?{id:g.selectedHistoryStage.finalNote.addedEmployee.id,commenterName:ge.getEmployeeName(g.selectedHistoryStage.finalNote.addedEmployee.firstName,g.selectedHistoryStage.finalNote.addedEmployee.middleName,g.selectedHistoryStage.finalNote.addedEmployee.lastName,Boolean(g.selectedHistoryStage.finalNote.addedEmployee.terminationId)),avatarUrl:g.selectedHistoryStage.finalNote.addedEmployee.profilePic?ge.base64ImageConvertion("image/jpeg",g.selectedHistoryStage.finalNote.addedEmployee.profilePic.image):V(g.selectedHistoryStage.finalNote.addedEmployee.id)}:{id:"-1",commenterName:ge.getEmployeeName("Admin","","",!1)};g.commentGroups.push({id:s,comments:[{user:e,id:1,isFinalNote:!0,groupId:s,content:g.selectedHistoryStage.finalNote.note,time:g.selectedHistoryStage.finalNote.addedTime,allowToEdit:g.selectedHistoryStage.finalNote.editable,allowToDelete:g.selectedHistoryStage.finalNote.deletable,edited:!!g.selectedHistoryStage.finalNote.updatedTime||(g.selectedHistoryStage.edited||!1),formattedTime:null===(n=g.selectedHistoryStage.finalNote.addedTime)||void 0===n?void 0:n.split(" ")[0]}],isFinalNoteGroup:!0})}},L=(e=[])=>new Promise((t=>{g.candidateEventData=[],g.candidateLatestEventData=[],g.candidateEventData=r.getCurrentEventData(e,g.timezones),g.candidateEventData.length>0&&(g.candidateLatestEventData=r.getLatestEventData(g.candidateEventData)),t()})),F=(e,t)=>new Promise(((a,i)=>{o.getCandidate({candidateId:e,vacancyId:t}).then((e=>{var t;return g.candidateProfile=e.data.data,L((null===(t=g.candidateProfile)||void 0===t?void 0:t.events)||[])})).then((()=>{const e=g.candidateLatestEventData.find((e=>e.vacancyEvent.type.id===Hf.JobOffer));return e&&(g.selectedHistoryStage=e),T(t)})).then((()=>{var e;I(),"Hired"!==(null===(e=g.candidateProfile)||void 0===e?void 0:e.candidateStage)||g.selectedHistoryStage||(g.selectedHistoryStage={vacancyEvent:{type:{id:Hf.Hired}}}),a()})).catch((e=>{i(e)}))})),z=e=>{var t;o.partialUpdateScheduleNote(null===(t=g.candidateProfile)||void 0===t?void 0:t.id,g.selectedHistoryStage.vacancyEvent.id,Object.assign(Object.assign({},""!==e&&{scheduleComment:e}),{partialUpdate:["scheduleComment"]})).then((()=>{var t,o,a,i;if(e){const a=null===(o=null===(t=g.candidateProfile)||void 0===t?void 0:t.events)||void 0===o?void 0:o.find((e=>e.id===g.selectedHistoryStage.id));a.scheduleNote.note=e,a.scheduleNote.edited=!0,g.selectedHistoryStage.scheduleNote.note=e,g.commentGroups.length>1&&g.commentGroups[1].isScheduleNoteGroup?(g.commentGroups[1].comments[0].content=e,g.commentGroups[1].comments[0].edited=!0):(g.commentGroups[0].comments[0].content=e,g.commentGroups[0].comments[0].edited=!0)}else{g.selectedHistoryStage.scheduleNote=null;const e=null===(i=null===(a=g.candidateProfile)||void 0===a?void 0:a.events)||void 0===i?void 0:i.find((e=>e.id===g.selectedHistoryStage.id));e.scheduleNote=null,g.commentGroups.length>1&&g.commentGroups[1].isScheduleNoteGroup?g.commentGroups[1].comments=[]:g.commentGroups[0].comments=[]}}))},M=e=>{var t;o.partialUpdateFinalNote(null===(t=g.candidateProfile)||void 0===t?void 0:t.id,g.selectedHistoryStage.vacancyEvent.id,Object.assign(Object.assign({},""!==e&&{finalComment:e}),{partialUpdate:["finalComment"]})).then((()=>{var t,o,a,i;if(e){const a=null===(o=null===(t=g.candidateProfile)||void 0===t?void 0:t.events)||void 0===o?void 0:o.find((e=>e.id===g.selectedHistoryStage.id));a.finalNote.note=e,a.finalNote.edited=!0,g.selectedHistoryStage.finalNote.note=e,g.commentGroups[g.commentGroups.length-1].comments[0].content=e,g.commentGroups[g.commentGroups.length-1].comments[0].edited=!0}else{g.selectedHistoryStage.finalNote=null;const e=null===(i=null===(a=g.candidateProfile)||void 0===a?void 0:a.events)||void 0===i?void 0:i.find((e=>e.id===g.selectedHistoryStage.id));e.finalNote=null,g.commentGroups[g.commentGroups.length-1].comments=[]}}))},O=(e,t)=>{t.value&&""!==t.value.trim()&&o.addCandidateEventNote(g.candidateProfile.id,g.selectedHistoryStage.vacancyEvent.id,{comment:t.value}).then((e=>{var t,o,a;const i=e.data.data,l={id:i.id,note:i.note,editable:i.editable,deletable:i.deletable,addedTime:i.addedTime,updatedTime:i.updatedTime,addedEmployee:i.addedEmployee};g.selectedHistoryStage.notes.push(l);const n=B(l);g.commentGroups.length>0?(null===(t=g.commentGroups[0])||void 0===t?void 0:t.isFinalNoteGroup)||(null===(o=g.commentGroups[0])||void 0===o?void 0:o.isScheduleNoteGroup)||(null===(a=g.commentGroups[1])||void 0===a?void 0:a.isScheduleNoteGroup)?g.commentGroups.unshift({id:(0,xu.x0)(6),comments:[n]}):g.commentGroups[0].comments.push(n):g.commentGroups.push({id:(0,xu.x0)(6),comments:[n]})}))},R=(e,t)=>{t.comment.isFinalNote?M(t.value):t.comment.isScheduleNote?z(t.value):o.updateCandidateEventNote(t.comment.id,{comment:t.value})},_=(e,t)=>{t.value.isFinalNote?M(null):t.value.isScheduleNote?z(null):o.deleteCandidateEventNote(t.value.id).then((()=>{var e;const o=g.selectedHistoryStage.notes.findIndex((e=>e.id===t.value.id));null===(e=g.selectedHistoryStage)||void 0===e||e.notes.splice(o,1);const a=g.commentGroups[0].comments.findIndex((e=>e.id===t.value.id));g.commentGroups[0].comments.splice(a,1)}))},$=e=>new Promise(((t,a)=>{var i,l,n,r,s,d,c,m,u,h,y,f,b,C,S,w,E,k,x,N;const A=null===(i=g.selectedHistoryStage)||void 0===i?void 0:i.vacancyEvent.isScoreType,D=e.time?e.time+":00":"00:00:00",T=Object.assign(Object.assign(Object.assign(Object.assign({timezone:e.date?null===(l=e.timezone)||void 0===l?void 0:l.id:void 0,time:e.date?`${e.date} ${D}`:null,score:A?e.score||"0":void 0},!A&&{status:(null===(n=e.status)||void 0===n?void 0:n.id)||null}),(null===(r=g.selectedHistoryStage)||void 0===r?void 0:r.vacancyEvent.type.id)===Hf.JobOffer?{jobOfferEndDate:e.jobOfferEndDate||null}:void 0),e.swtichJobDetails?{joinedDate:e.joinedDate||null,employmentStatus:(null===(s=e.employmentStatus)||void 0===s?void 0:s.id)||null,supervisorId:Number(null===(d=e.directSupervisor)||void 0===d?void 0:d.empNumber)||null,addressCountryCode:(null===(c=e.addressCountryCode)||void 0===c?void 0:c.cou_code)||(null===(m=e.addressCountryCode)||void 0===m?void 0:m.id)||"",addressStreet1:(null!==(u=e.addressStreet1)&&void 0!==u?u:"").trim()||"",addressStreet2:(null!==(h=e.addressStreet2)&&void 0!==h?h:"").trim()||"",addressCity:(null!==(y=e.addressCity)&&void 0!==y?y:"").trim()||"",addressProvince:"US"===((null===(f=e.addressCountryCode)||void 0===f?void 0:f.cou_code)||(null===(b=e.addressCountryCode)||void 0===b?void 0:b.id))?(null===(C=e.addressProvince)||void 0===C?void 0:C.province_code)||(null===(S=e.addressProvince)||void 0===S?void 0:S.id):(null!==(w=e.addressProvince)&&void 0!==w?w:"").trim()||"",addressZipCode:(null!==(E=e.addressZipCode)&&void 0!==E?E:"").trim()||""}:void 0),e.swtichSalaryDetails?{payGrade:e.payGrade?Number(null===(k=e.payGrade)||void 0===k?void 0:k.id):null,currency:e.currency?null===(x=e.currency)||void 0===x?void 0:x.currency_id:null,salaryComponentValues:e.salaryComponentValues.map((e=>{var t;return Object.assign(Object.assign({},e),{value:null===(t=e.value)||void 0===t?void 0:t.replaceAll(",","")})}))}:void 0);g.selectedHistoryStage.vacancyEvent.id?o.saveCandidateEvent(null===(N=g.candidateProfile)||void 0===N?void 0:N.id,g.selectedHistoryStage.vacancyEvent.id,T).then((e=>{var o,a,i,l,n,r,s,d,c;if(e.data.success){const m=e.data.data,u=null===(a=null===(o=g.candidateProfile)||void 0===o?void 0:o.events)||void 0===a?void 0:a.findIndex((e=>e.id===m.id));u>-1?null===(l=null===(i=g.candidateProfile)||void 0===i?void 0:i.events)||void 0===l||l.splice(u,1,m):1===(null===(r=null===(n=g.candidateProfile)||void 0===n?void 0:n.events)||void 0===r?void 0:r.length)&&(null===(d=null===(s=g.candidateProfile)||void 0===s?void 0:s.events)||void 0===d||d.splice(0,0,m));const p=(null===(c=g.candidateProfile)||void 0===c?void 0:c.events)||[];L(p),v(),t()}})).catch((e=>{p(),a(e)})):a(e)})),j=e=>new Promise(((t,a)=>{let i={},l=null,n=null;o.getEmployees().then((e=>(n=e.data.meta.nextEmployeeId,o.wizardCustomFieldAttachmentData()))).then((()=>{var e;return o.getVacancy(null===(e=g.candidateProfile.vacancy)||void 0===e?void 0:e.vacancyId,{include:"Location,JobTitle"})})).then((t=>{var a,n,r,s,d,c,m,u,p,v,h,y,f,b,C,S,w;const E=t.data.data;l=E.locationId;const k=E.jobTitleId;let x=null;return g.directReportingMethod&&e.directSupervisor&&"object"===typeof e.directSupervisor&&(x=[{supervisorId:e.directSupervisor.empNumber,reportingMethodId:null===(a=g.directReportingMethod)||void 0===a?void 0:a.id,supervisor:Object.assign(Object.assign({},e.directSupervisor),{termination_id:e.directSupervisor.terminationId||null,purged_at:null}),ReportingMethod:g.directReportingMethod}]),i=Object.assign(Object.assign({employee:Object.assign({purged_at:null,deleted_at:null,terminationId:null,locationId:l,lastName:e.lastName,firstName:e.firstName,middleName:e.middleName,joinedDate:e.joinedDate,emp_mobile:e.contactNumber,emp_oth_email:e.email,employeeId:"",autoGenerateEmployeeId:!0},e.swtichJobDetails?{city:(null!==(n=e.addressCity)&&void 0!==n?n:"").trim()||"",country:(null===(r=e.addressCountryCode)||void 0===r?void 0:r.cou_code)||(null===(s=e.addressCountryCode)||void 0===s?void 0:s.id)||"",emp_zipcode:(null!==(d=e.addressZipCode)&&void 0!==d?d:"").trim()||"",province:"US"===((null===(c=e.addressCountryCode)||void 0===c?void 0:c.cou_code)||(null===(m=e.addressCountryCode)||void 0===m?void 0:m.id))?(null===(u=e.addressProvince)||void 0===u?void 0:u.province_code)||(null===(p=e.addressProvince)||void 0===p?void 0:p.id):(null!==(v=e.addressProvince)&&void 0!==v?v:"").trim()||"",street1:(null!==(h=e.addressStreet1)&&void 0!==h?h:"").trim()||"",street2:(null!==(y=e.addressStreet2)&&void 0!==y?y:"").trim()||""}:void 0),employeeJobRecord:{job_title_id:k,joined_date:e.joinedDate,employment_status_id:(null===(f=e.employmentStatus)||void 0===f?void 0:f.id)||null}},e.swtichSalaryDetails?{salary:{currency_id:null===(b=e.currency)||void 0===b?void 0:b.currency_id,pay_grade_id:null===(C=e.payGrade)||void 0===C?void 0:C.id,annual_basic_payment:null===(w=null===(S=e.salaryComponentValues)||void 0===S?void 0:S.find((e=>"1"===e.id)))||void 0===w?void 0:w.value,components:e.salaryComponentValues}}:void 0),e.swtichJobDetails&&g.directReportingMethod&&"object"===e.directSupervisor?{supervisors:x}:void 0),o.customSessionDataWizardPut({data:i})})).then((()=>o.customSessionDataWizardGet())).then((t=>{var a,r,s;const d={chkLogin:!1,locationId:l,lastName:e.lastName,firstName:e.firstName,middleName:e.middleName,joinedDate:e.joinedDate,employeeId:n},c={method:"POST",data:d,endpoint:"employees",params:{addCandidateAsEmployee:!0,candidateInitialData:Object.assign(Object.assign({employee:i.employee,employeeJobRecord:i.employeeJobRecord,candidateId:g.candidateProfile.id},e.swtichJobDetails&&g.directReportingMethod&&"object"===typeof e.directSupervisor?{supervisors:[{supervisorId:e.directSupervisor.empNumber,reportingMethodId:null===(a=g.directReportingMethod)||void 0===a?void 0:a.id}]}:void 0),e.swtichSalaryDetails?{salary:{currency_id:(null===(r=e.currency)||void 0===r?void 0:r.currency_id)||null,pay_grade_id:(null===(s=e.payGrade)||void 0===s?void 0:s.id)||null,components:e.salaryComponentValues||[]}}:void 0)},extra:{employee:!0}};return t.data.data.actions=[c],o.customSessionDataWizardPut(t.data)})).then((()=>{UR('/client/#/route/pim.wizard({"data": "{}", "redirectedFrom": "addCandidateAsEmployee"})'),t()})).catch((e=>a(e)))})),U=e=>new Promise(((t,a)=>{var i,l,n,r,s,d,c,p,v,h,y,f,b,C,S;let w=null;g.directReportingMethod&&e.directSupervisor&&"object"===typeof e.directSupervisor&&(w=[{supervisorId:e.directSupervisor.empNumber,reportingMethodId:null===(i=g.directReportingMethod)||void 0===i?void 0:i.id}]);const E=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({candidateId:Number(g.candidateProfile.id),firstName:e.firstName},e.middleName?{middleName:e.middleName}:void 0),{lastName:e.lastName,email:e.email||"",joinedDate:e.joinedDate}),e.contactNumber?{contactNo:e.contactNumber}:void 0),e.swtichJobDetails&&g.directReportingMethod?{supervisors:w}:void 0),e.swtichJobDetails?{employment_status_id:(null===(l=e.employmentStatus)||void 0===l?void 0:l.id)||null,street1:(null!==(n=e.addressStreet1)&&void 0!==n?n:"").trim()||"",street2:(null!==(r=e.addressStreet2)&&void 0!==r?r:"").trim()||"",city:(null!==(s=e.addressCity)&&void 0!==s?s:"").trim()||"",country:(null===(d=e.addressCountryCode)||void 0===d?void 0:d.cou_code)||(null===(c=e.addressCountryCode)||void 0===c?void 0:c.id)||"",province:"US"===((null===(p=e.addressCountryCode)||void 0===p?void 0:p.cou_code)||(null===(v=e.addressCountryCode)||void 0===v?void 0:v.id))?(null===(h=e.addressProvince)||void 0===h?void 0:h.province_code)||(null===(y=e.addressProvince)||void 0===y?void 0:y.id):(null!==(f=e.addressProvince)&&void 0!==f?f:"").trim()||"",emp_zipcode:(null!==(b=e.addressZipCode)&&void 0!==b?b:"").trim()||""}:void 0),e.swtichSalaryDetails?{pay_grade_id:(null===(C=e.payGrade)||void 0===C?void 0:C.id)||null,currency_id:(null===(S=e.currency)||void 0===S?void 0:S.currency_id)||null,salaryComponentValues:e.salaryComponentValues.map((e=>{var t;return Object.assign(Object.assign({},e),{value:null===(t=e.value)||void 0===t?void 0:t.replaceAll(",","")})}))||null}:void 0);o.addEmployeeAsCandidate(E).then((()=>{u(),t()})).catch((e=>{m(),a(e)}))})),Z=e=>{const t=Gc(yE,{loading:(0,i.toRef)(g,"isLoading"),timezones:g.timezones,payGrades:g.payGrades,stage:g.selectedHistoryStage,allCountries:g.allCountries,candidate:g.candidateProfile,currencyTypes:g.currencyTypes,commentGroups:g.commentGroups,allUSProvinces:g.allUSProvinces,employmentStatus:g.employmentStatus,directSupervisorsFromVacancy:g.supervisors,getMatchingDirectSupervisors:P},e).listen("onNote:add",O).listen("onNote:update",R).listen("onNote:delete",_).listen("onSubmitValid",(e=>(0,A.mG)(this,void 0,void 0,(function*(){g.isLoading=!0,yield $(e),t.close(),g.isLoading=!1}))));return t},H=(t,o)=>{const a=Gc(dk,{loading:(0,i.toRef)(g,"isLoading"),payGrades:g.payGrades,stage:g.selectedHistoryStage,allCountries:g.allCountries,candidate:g.candidateProfile,currencyTypes:g.currencyTypes,commentGroups:g.commentGroups,allUSProvinces:g.allUSProvinces,employmentStatus:g.employmentStatus,empWizardEnabled:g.empWizardEnabled,directSupervisorsFromVacancy:g.supervisors,getMatchingDirectSupervisors:P},t).listen("onSubmitValid",(t=>(0,A.mG)(this,void 0,void 0,(function*(){g.isLoading=!0,g.empWizardEnabled?yield j(t):yield U(t),e.getOne(o,{include:"CandidateStages"}).then((t=>{const{data:o,meta:a}=t;e.updateEntity({data:o,meta:a})})).finally((()=>{a.close(),g.isLoading=!1}))}))));return a};return(0,i.onBeforeMount)((()=>{Promise.all([b,C,S,E,k,x,w,N,D])})),{headers:y,permissions:(0,i.toRef)(g,"permissions")}}function c_(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-schema-form"),s=(0,i.resolveComponent)("form-modal");return(0,i.openBlock)(),(0,i.createBlock)(s,{"onUpdate:show":t[1]||(t[1]=t=>e.$emit("update:show",t))},{title:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Add Candidate")),1)])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{schema:e.schema,loading:e.isLoading,model:e.model,"onUpdate:model":t[0]||(t[0]=t=>e.model=t),onSubmitValid:e.onFormSubmit},null,8,["schema","loading","model","onSubmitValid"])])),_:1})}function m_(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,{type:"multiselect",options:e.options,"onUpdate:modelValue":e.selectVacancy,onKeydown:e.onVacancyKeypress},null,8,["options","onUpdate:modelValue","onKeydown"])}var u_=(0,i.defineComponent)({name:"VacancyDropdown",components:{"oxd-input-field":lo.Z},props:{mode:{type:String,default:"read"}},setup(e){const t=(0,Gd.oR)(),o=(0,i.ref)([]),a=(0,i.inject)("ngServices"),l=(0,i.ref)(""),n=(0,i.ref)(0),r=a.$stateParams,s=e=>{t.dispatch("recruitment/candidate/changeFilteredVacancy",e)},d=e=>{if(e.key.length>1)return;const t=o.value.filter((t=>t.label.toLowerCase().startsWith(e.key)));if(t.length>0)if(l.value==e.key){n.value++,n.value==t.length&&(n.value=0);const e=t[n.value];s(e)}else{const e=t[0];s(e),n.value=0}l.value=e.key};return(0,i.onMounted)((()=>{const a=new Vf;a.getVacancies({mode:e.mode}).then((e=>{if(e.data)if(o.value=e.data.data.map((e=>({id:e.vacancyId,label:e.vacancyName,isResumeRequired:e.isResumeRequired,updatable:e.updatable}))),r.vacancyId){const e=o.value.find((e=>e.id==r.vacancyId));t.dispatch("recruitment/candidate/changeFilteredVacancy",e)}else t.dispatch("recruitment/candidate/changeFilteredVacancy",null)}))})),{options:o,selectVacancy:s,onVacancyKeypress:d}}});const p_=(0,Re.Z)(u_,[["render",m_]]);var v_=p_;const h_=()=>{const e=(0,K.Z)(new Date),t=e-20,o=e+20,a=[];for(let i=t;i<o;i++)a.push(i);return a};var g_=(0,i.defineComponent)({name:"AddCandidateModal",components:{"form-modal":gc,"oxd-schema-form":yc.Z},emits:["submit","update:show"],setup(e,t){const o=ce(),a=(0,i.ref)(!1),{settings:l}=vu(),{userFormat:n}=Im(),{saveSuccess:r,saveError:s}=qR(),d=bR(SR),{filters:c}=yR(d),{model:m,schema:u}=(0,fc.Z)((()=>(0,A.mG)(this,void 0,void 0,(function*(){const e=yield l;return{name:"addCandidateForm",layout:[{type:"grid",props:{cols:3},children:{default:[{name:"firstName",label:o("First Name"),type:"input",validators:new Map([["required",Oa],["shouldNotExceedCharLength",$a(30)]])},{name:"middleName",label:o("Middle Name"),type:"input",validators:new Map([["shouldNotExceedCharLength",$a(30)]])},{name:"lastName",label:o("Last Name"),type:"input",validators:new Map([["required",Oa],["shouldNotExceedCharLength",$a(30)]])},{name:"vacancy",label:o("Vacancy"),type:"custom",value:c.vacancy.value,component:(0,i.markRaw)(v_),props:{type:"select",mode:"create"}},{name:"file",label:o("Select Resume"),type:"custom",component:(0,i.markRaw)(Xf),props:{multiple:!1,hint:o("Accepts .docx, .doc, .odt, .pdf, .rtf, .txt up to {{fileSize}}MB",{fileSize:Math.round(e.recruitment.resumeMaxAttachmentSize/1048576)})},class:["--span-column-2"],hook:(t,o)=>{var a;const i=o,l=new Map([["validFileTypes",ni(["application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","application/vnd.oasis.opendocument.text","application/pdf","application/rtf","text/plain"])],["maxFileSize",li(e.recruitment.resumeMaxAttachmentSize)]]);return"1"===(null===(a=i.vacancy)||void 0===a?void 0:a.isResumeRequired)&&l.set("required",Oa),t.validators=l,Object.assign({},t)}},{name:"appliedDate",label:o("Date of Application"),type:"custom",component:(0,i.markRaw)(_m),value:(0,se.p6)((0,se._G)(),"yyyy-MM-dd"),validators:new Map([["validDateFormat",ja(n)]]),props:{years:h_()}},{name:"email",label:o("Email"),type:"input",validators:new Map([["required",Oa],["validEmailFormat",si],["shouldNotExceedCharLength",$a(100)]])},{name:"contactNo",label:o("Contact Number"),type:"input",validators:new Map([["validPhoneNumberFormat",di],["shouldNotExceedCharLength",$a(30)]])},{name:"facebook",label:o("Facebook"),type:"input",validators:new Map([["socialMediaFacebook",ci],["checkSocialMediaUrlForSpecialCases",mi],["shouldNotExceedCharLength",$a(100)]])},{name:"twitter",label:o("Twitter"),type:"input",validators:new Map([["socialMediaTwitter",pi],["checkSocialMediaUrlForSpecialCases",mi],["shouldNotExceedCharLength",$a(100)]])},{name:"linkedin",label:o("LinkedIn"),type:"input",validators:new Map([["socialMediaLinkedin",ui],["checkSocialMediaUrlForSpecialCases",mi],["shouldNotExceedCharLength",$a(100)]])},{name:"keywords",label:o("Keywords"),type:"input",validators:new Map([["shouldNotExceedCharLength",$a(254)]]),props:{placeholder:o("Enter comma separated words")}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"grid",props:{cols:1},children:{default:[{name:"note",label:o("Notes"),type:"textarea",validators:new Map([["shouldNotExceedCharLength",$a(65535)]]),props:{placeholder:o("Enter any other notes about the candidate")}}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"divider",style:{margin:"0"}},{type:"action",children:{default:[{name:"required",label:"",type:"custom",component:(0,i.markRaw)(Hd),style:{"margin-right":"auto",padding:"0px"}},{name:"reset",label:o("Cancel"),type:"button",props:{type:"button",displayType:"ghost"},listeners:{onClick:()=>{t.emit("update:show",!0)}}},{name:"submit",label:o("Save"),type:"button",style:{"margin-left":"0.5rem"},props:{type:"submit",displayType:"secondary"}}]},style:{"padding-top":"1.2rem"}}]}})))()),p=()=>{if(!m.value)return;a.value=!0;const e=m.value,{file:o,vacancy:i}=e,l=(0,A._T)(e,["file","vacancy"]);d.create(Object.assign(Object.assign(Object.assign({},l),o&&{file:{file:m.value.file[0].base64,fileName:m.value.file[0].name,fileSize:m.value.file[0].size,fileType:m.value.file[0].type}}),{vacancy:null===i||void 0===i?void 0:i.id})).then((e=>{const{data:o,meta:a={}}=e;d.createEntity({data:o,meta:a}),t.emit("update:show",!0),r()})).catch((()=>s()))};return{model:m,schema:u,isLoading:a,onFormSubmit:p}}});const y_=(0,Re.Z)(g_,[["render",c_]]);var f_=y_,b_=o(74474);function C_(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-icon-button"),s=(0,i.resolveComponent)("oxd-schema-form"),d=(0,i.resolveComponent)("form-modal");return(0,i.openBlock)(),(0,i.createBlock)(d,{"onUpdate:show":t[1]||(t[1]=t=>e.$emit("update:show",t))},{title:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("Filter Candidates")),1)])),headerActions:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{flow:"bottom",tooltip:"Reset",name:"oxd-refresh",size:"extra-large",onClick:e.resetFilters},null,8,["onClick"])])),body:(0,i.withCtx)((()=>[(0,i.createVNode)(s,{schema:e.schema,model:e.model,"onUpdate:model":t[0]||(t[0]=t=>e.model=t),onSubmitValid:e.onSubmitValid},null,8,["schema","model","onSubmitValid"])])),_:1})}function S_(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,{type:"autocomplete",createOptions:e.options,multiple:!0,placeholder:e.$t("Type for hints...")},null,8,["createOptions","placeholder"])}var w_=(0,i.defineComponent)({name:"VacancyAutocomplete",components:{"oxd-input-field":lo.Z},setup(){const e=e=>new Promise((o=>{const a=t.filter((t=>{const o=t.label.toLowerCase(),a=e.toLowerCase();return o.includes(a)}));o(a)}));let t=[];const o=()=>{const e=new Vf;e.getJobTitles().then((e=>{e.data&&(t=e.data.data.map((e=>({id:e.id,label:e.jobTitleName}))))}))};return(0,i.onBeforeMount)((()=>{o()})),{options:e}}});const E_=(0,Re.Z)(w_,[["render",S_]]);var k_=E_;function x_(e,t,o,a,l,n){const r=(0,i.resolveComponent)("oxd-input-field");return(0,i.openBlock)(),(0,i.createBlock)(r,{type:"autocomplete",createOptions:e.options,multiple:!0,placeholder:e.$t("Type for hints...")},null,8,["createOptions","placeholder"])}const N_="-1",A_="3";var D_=(0,i.defineComponent)({name:"VacancyAutocomplete",components:{"oxd-input-field":lo.Z},props:{mode:{type:String,default:"read"}},setup(e){const t=ce(),o=e=>new Promise((t=>{const o=a.filter((t=>{const o=t.label.toLowerCase(),a=e.toLowerCase();return o.includes(a)}));t(o)}));let a=[];const l=()=>{const t=new Vf;t.getVacancies({mode:e.mode}).then((e=>{e.data&&(a=e.data.data.map((e=>{let t=n(e),o=e.vacancyName;return t&&(o=o+" ("+t+")"),Object.assign(Object.assign({},e),{id:e.vacancyId,label:o,isResumeRequired:e.isResumeRequired,updatable:e.updatable,status:e.status})})))}))},n=e=>{var o="";switch(e.status){case N_:o="Closed";break;case A_:o="Unpublished";break;default:o="";break}return t(o)};return(0,i.onBeforeMount)((()=>{l()})),{options:o}}});const T_=(0,Re.Z)(D_,[["render",x_]]);var P_=T_;const V_=()=>{const e=(0,K.Z)(new Date),t=e-20,o=e+20,a=[];for(let i=t;i<o;i++)a.push(i);return a};var B_=(0,i.defineComponent)({name:"filterCandidatesModal",components:{"form-modal":gc,"oxd-icon-button":D.Z,"oxd-schema-form":yc.Z},emits:["update:show"],setup(e,t){const o=ce(),a=zm(),{userFormat:l}=Im(),n=(0,i.ref)(!1),r=bR(SR),{filters:s}=yR(r),d=e=>new Promise((t=>{a.get("recruitment/candidates",{limit:5,exclude:"Meta",includeActive:!0,includeArchive:!0,orderBy:"bestMatchName",filter:{candidateName:e}}).then((e=>{const{data:o}=e.data;t(o.map((e=>({id:e.id,label:e.fullName,archived:"2"===e.status}))))}))})),{schema:c,model:m}=(0,fc.Z)({name:"filterCandidateForm",layout:[{type:"grid",props:{cols:2},children:{default:[{name:"searchText",label:o("Search Text"),type:"input",validators:new Map([["shouldNotExceedCharLength",$a(100)]]),class:"mb-0--oxd-input-group"},{name:"candidatesQuickSearch",label:o("Candidate"),type:"autocomplete",props:{clear:!0,multiple:!0,createOptions:d,placeholder:o("Type for hints...")},class:"mb-0--oxd-input-group",validators:new Map([["autocompleteInValidMultiselect",_a]])},{name:"jobTitleIds",label:o("Job Title"),type:"custom",component:(0,i.markRaw)(k_),class:"mb-0--oxd-input-group",validators:new Map([["autocompleteInValidMultiselect",_a]])},{name:"jobVacancy",label:o("Job Vacancy"),type:"custom",component:(0,i.markRaw)(P_),class:"mb-0--oxd-input-group",props:{clear:!1,multiple:!0},validators:new Map([["autocompleteInValidMultiselect",_a]])},{name:"from",label:o("Date Applied From"),type:"custom",component:(0,i.markRaw)(_m),validators:new Map([["validDateFormat",ja(l)],["endDateShouldBeAfterStartDate",vi((()=>{var e;return null===(e=h.value)||void 0===e?void 0:e.to}),void 0,{allowSameDate:!0})]]),props:{years:V_()}},{name:"to",label:o("Date Applied To"),type:"custom",component:(0,i.markRaw)(_m),validators:new Map([["validDateFormat",ja(l)],["endDateShouldBeAfterStartDate",Xa((()=>{var e;return null===(e=h.value)||void 0===e?void 0:e.from}),void 0,{allowSameDate:!0})]]),props:{years:V_()}},{name:"activeVacanciesOnly",label:"",type:"switch",props:{"option-label":o("Active Vacancies Only")},value:!0,hook:e=>(e.props&&(n.value?e.props.disabled=!0:e.props.disabled=!1),Object.assign({},e)),class:"mb-sm--oxd-input-group"},{name:"searchInsideResume",label:"",type:"switch",props:{"option-label":o("Search Inside Resume")},value:!1,class:"mb-sm--oxd-input-group"},{name:"showActiveCandidates",label:"",type:"switch",props:{"option-label":o("Show Active Candidates")},value:!0,hook:(e,t)=>(e.props&&(e.props.disabled=!t.showArchivedCandidates),Object.assign({},e)),class:"mb-sm--oxd-input-group"},{name:"showArchivedCandidates",label:"",type:"switch",props:{"option-label":o("Show Archived Candidates")},value:!1,hook:(e,t)=>(e.props&&(e.props.disabled=!t.showActiveCandidates),Object.assign({},e)),class:"mb-sm--oxd-input-group"}]},style:{"margin-left":"-10px","margin-right":"-10px"}},{type:"divider",style:{margin:"0"}},{type:"action",children:{default:[{name:"reset",label:o("Cancel"),type:"button",props:{type:"button",displayType:"ghost"},listeners:{onClick:()=>{t.emit("update:show",!0)}}},{name:"submit",label:o("Search"),type:"button",style:{"margin-left":"0.5rem"},props:{type:"submit",displayType:"secondary"}}]},style:{"padding-top":"1.2rem"}}]}),u=Array.isArray(s.candidate.value)?s.candidate.value:"object"===typeof s.candidate.value&&s.candidate.value?[s.candidate.value]:[];let p=s.includeArchive.value,v=s.searchActiveVacancies.value;u.length>0&&(p=!0,v=!1);const h=(0,i.ref)({activeVacanciesOnly:v,candidatesQuickSearch:u,showArchivedCandidates:p,to:s.appliedDateTo.value||null,from:s.appliedDateFrom.value||null,searchText:s.searchText.value||null,showActiveCandidates:s.includeActive.value,searchInsideResume:s.searchInsideResume.value,jobTitleIds:s.jobTitleIds.value||[],jobVacancy:s.vacancy.value?[s.vacancy.value]:s.vacancies.value}),g=()=>{h.value=Object.assign(Object.assign({},m.value),{jobTitleIds:[]})},y=()=>{var e,o,a,i,l,n,r,d,c,m;s.vacancy.value=null,s.vacancies.value=[],s.candidateEventTypeId.value=null,s.appliedDateTo.value=null===(e=h.value)||void 0===e?void 0:e.to,s.appliedDateFrom.value=null===(o=h.value)||void 0===o?void 0:o.from,s.searchText.value=null===(a=h.value)||void 0===a?void 0:a.searchText,s.jobTitleIds.value=null===(i=h.value)||void 0===i?void 0:i.jobTitleIds,s.candidate.value=null===(l=h.value)||void 0===l?void 0:l.candidatesQuickSearch,s.includeActive.value=null===(n=h.value)||void 0===n?void 0:n.showActiveCandidates,s.includeArchive.value=null===(r=h.value)||void 0===r?void 0:r.showArchivedCandidates,s.searchInsideResume.value=null===(d=h.value)||void 0===d?void 0:d.searchInsideResume,s.searchActiveVacancies.value=null===(c=h.value)||void 0===c?void 0:c.activeVacanciesOnly,Array.isArray(null===(m=h.value)||void 0===m?void 0:m.jobVacancy)&&(1===h.value.jobVacancy.length?s.vacancy.value=h.value.jobVacancy[0]:s.vacancies.value=h.value.jobVacancy),t.emit("update:show",!0)};return{model:h,schema:c,resetFilters:g,onSubmitValid:y}}});const I_=(0,Re.Z)(B_,[["render",C_],["__scopeId","data-v-7b98ba0b"]]);var L_=I_,F_=(0,i.defineComponent)({components:{"oxd-list":i_.Z,"oxd-button":jt.Z,"quick-filter":xR,"quick-search":FR,"table-header":VR,"oxd-list-table":l_.Z,"oxd-pagination":n_.Z,"oxd-icon-button":D.Z,"oxd-status-tab-panel":b_.Z},setup(){const{deleteError:e,archiveError:t,deleteSuccess:o,archiveSuccess:a,unarchiveError:l,unarchiveSuccess:n}=qR(),r=Fm(),s=bR(SR),{headers:d,permissions:c}=d_(s),{deleteDialog:m,archiveDialog:u}=t_(),{filters:p,serializedFilters:v,onFilter:h}=yR(s,["candidate"]),g=(0,i.reactive)({checkedItems:[],csvExportActive:!1,sidepanelFilters:[]}),{total:y,pages:f,items:b,pageSize:C,isLoading:S,execQuery:w,onPaginate:E,currentPage:k}=a_(s),{sortDefinition:x,onSort:N}=HR(s,{candidate:"DEFAULT",email:"DEFAULT",contact_number:"DEFAULT",date_applied:"DESC"}),A=Gc(f_),D=()=>{c.value.create&&A.open()},T=Gc(RR,{title:"Exporting Candidates List to CSV",name:"candidateListCSV"}).listen("onProgress:start",(()=>{UR("api/recruitment/candidateDataCsvExport",{},Object.assign(Object.assign({},v.value),{exclude:null,include:null}))})).listen("onProgress:end",(()=>{g.csvExportActive=!1,T.close()})),P=()=>{g.csvExportActive||(g.csvExportActive=!0,T.open())},V=Gc(L_),B=()=>{V.open()},I=()=>{m(`The selected ${DR(g.checkedItems.length,"candidate")} will be permanently deleted.`).then((t=>{if("ok"===t){const t=z.value.map((e=>e.id));s.delete(t).then((()=>{g.checkedItems=[],o(),w()})).catch((()=>e()))}}))},L=e=>{u(`The selected ${DR(g.checkedItems.length,"candidate")} will be ${e?"archived":"unarchived"}.`,e).then((o=>{if("ok"===o){const o=z.value.map((e=>parseInt(e.id)));(e?s.archive(o):s.unarchive(o)).then((()=>{g.checkedItems=[],e?a():n(),w()})).catch((()=>e?t():l()))}}))},F=()=>{s.getSidePanelFilters().then((e=>{g.sidepanelFilters=e}))},z=(0,i.computed)((()=>(b.value||[]).filter(((e,t)=>g.checkedItems.includes(t))))),M=(0,i.computed)((()=>z.value.filter((e=>!0===e.canArchive&&!1===e.isArchived)).length===z.value.length)),O=(0,i.computed)((()=>z.value.filter((e=>!0===e.canArchive&&!0===e.isArchived)).length===z.value.length)),R=(0,i.computed)((()=>z.value.filter((e=>!0===e.canDelete)).length===z.value.length)),_=(0,i.computed)((()=>0===g.checkedItems.length?"":b.value[g.checkedItems[0]].isArchived?"Unarchive":"Archive")),$=(0,i.computed)((()=>M.value||O.value||0===g.checkedItems.length?"":b.value[g.checkedItems[0]].isArchived?"Your selection should contain only archived candidates":"Your selection should contain only active candidates")),j=()=>{p.vacancy.value=null,p.candidateEventTypeId.value=null,w()},U=e=>{p.candidate.value=e,p.vacancy.value=null,p.searchText.value=null,p.candidateEventTypeId.value=null,e&&"object"===typeof e&&w()},Z=({label:e})=>{C.value=e,w()},H=e=>{p.candidateEventTypeId.value===e.id&&w(),p.candidateEventTypeId.value=e.id},q=()=>{var e;const t=null===(e=p["vacancy"].value)||void 0===e?void 0:e.id;t&&UR("client/#/noncore/recruitment/addJobVacancy/vacancyId/{vacancyId}/template/",{vacancyId:t})};return N((()=>{k.value=1,w()})),h((()=>{k.value=1,w()})),E(F),(0,i.onBeforeMount)((()=>{var e;"string"===typeof p.candidate.value&&(p.candidate.value=null),(null===(e=r.$stateParams)||void 0===e?void 0:e.vacancyId)?S.value=!0:0===b.value.length?w():F()})),Object.assign(Object.assign({total:y,pages:f,items:b,headers:d,pageSize:C,isLoading:S,permissions:c,currentPage:k,onCsvExport:P,onQuickSearch:U,onClickDelete:I,onClickFilter:B,onClickArchive:L,onAddCandidate:D,sortDefinition:x,onPageSizeChange:Z,onSidepanelFilter:H,onClickVacancyInfo:q,onClickQuickSearch:j,canDeleteSelected:R,archiveButtonLabel:_,canArchiveSelected:M,canUnarchiveSelected:O,archiveButtonTooltip:$},(0,i.toRefs)(g)),p)}});const z_=(0,Re.Z)(F_,[["render",vR],["__scopeId","data-v-22272c8a"]]);var M_=z_,O_={buzz:Td,recruitment:{candidates:M_,candidateProfile:Gx,vacancies:jP},store:uR,toaster:Du,translate:pe,theme:Ky,reportsAndAnalytics:Wy,leave:{leaveTypes:vm,holidaysList:wu,assignLeave:iT,applyLeave:sT},pim:{historyEvents:zT},sample:{projectList:aV},DashboardEmployeeDetailsWidget:vB,DashboardLeaveBalanceWidget:dI,DashboardTimesheetsWidget:aL,DashboardLeaveListWidget:fF,DashboardEmployeeQuickAccessWidget:YF,DashboardGoalsWidget:aM,DashboardTrackersWidget:qM,layout:{default:Xc}},R_=O_},64807:function(e){"use strict";e.exports=Vue},24654:function(){},22868:function(){},14777:function(){},99830:function(){},70209:function(){},87414:function(){}},t={};function o(a){var i=t[a];if(void 0!==i)return i.exports;var l=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(l.exports,l,l.exports,o),l.loaded=!0,l.exports}o.m=e,function(){var e=[];o.O=function(t,a,i,l){if(!a){var n=1/0;for(c=0;c<e.length;c++){a=e[c][0],i=e[c][1],l=e[c][2];for(var r=!0,s=0;s<a.length;s++)(!1&l||n>=l)&&Object.keys(o.O).every((function(e){return o.O[e](a[s])}))?a.splice(s--,1):(r=!1,l<n&&(n=l));if(r){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[a,i,l]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){o.p=""}(),function(){var e={179:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,l,n=a[0],r=a[1],s=a[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(i in r)o.o(r,i)&&(o.m[i]=r[i]);if(s)var c=s(o)}for(t&&t(a);d<n.length;d++)l=n[d],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(c)},a=self["webpackChunkVueComponents"]=self["webpackChunkVueComponents"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[998],(function(){return o(70754)}));a=o.O(a),VueComponents=a})();